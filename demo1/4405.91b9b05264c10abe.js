"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[4405],{14405:(N,P,l)=>{l.r(P),l.d(P,{ManualOverrideModule:()=>z});var i=l(86656),y=l(64190),g=l(56223),M=l(96814),A=l(30617),w=l(14934),_=l(15861),O=l(13519),b=l.n(O),e=l(65879),f=l(88672),C=l(31552),x=l(5588),L=l(30175),k=l(74260),I=l(16519),Z=l(81127),T=l(92429);const F=["slideToggle"],U=["invertCheckbox"];function E(p,m){if(1&p){const c=e.EpF();e.TgZ(0,"div",7)(1,"label",34),e._uU(2,"Slider"),e.qZA(),e.TgZ(3,"div",35)(4,"div",36)(5,"input",37),e.NdJ("keyup",function(o){e.CHM(c);const n=e.oxw();return e.KtG(n.changeValue(o))}),e.qZA(),e.TgZ(6,"ngx-slider",38),e.NdJ("valueChange",function(o){e.CHM(c);const n=e.oxw();return e.KtG(n.value=o)})("valueChange",function(o){e.CHM(c);const n=e.oxw();return e.KtG(n.updateSliderValue(o))}),e.qZA()()(),e.TgZ(7,"div",7),e._UZ(8,"label",34),e.TgZ(9,"div",39)(10,"button",40),e.NdJ("click",function(){e.CHM(c);const o=e.oxw();return e.KtG(o.sliderSubmit())}),e.TgZ(11,"span",41),e._uU(12,"Submit"),e.qZA()()()()()}if(2&p){const c=e.oxw();e.xp6(6),e.Q6J("value",c.value)("options",c.options)}}function J(p,m){if(1&p){const c=e.EpF();e.TgZ(0,"div",42)(1,"div",6)(2,"h5",43),e._uU(3,"On and Off button"),e.qZA(),e.TgZ(4,"div",16)(5,"div",44)(6,"div",45)(7,"input",46),e.NdJ("change",function(o){e.CHM(c);const n=e.oxw();return e.KtG(n.toggleSwitch(o))}),e.qZA(),e._UZ(8,"label",47),e.qZA()(),e.TgZ(9,"div",48)(10,"label",49)(11,"input",50),e.NdJ("change",function(o){e.CHM(c);const n=e.oxw();return e.KtG(n.invertValues(o))}),e.qZA(),e.TgZ(12,"span",51),e._uU(13,"Invert "),e.qZA()()()()()()}}function K(p,m){if(1&p){const c=e.EpF();e.TgZ(0,"div",42)(1,"div",6)(2,"h5",43),e._uU(3,"On and Off button"),e.qZA(),e.TgZ(4,"div",16)(5,"div",44)(6,"div",45)(7,"input",46),e.NdJ("change",function(o){e.CHM(c);const n=e.oxw();return e.KtG(n.toggleSwitchInverted(o))}),e.qZA(),e._UZ(8,"label",47),e.qZA()()()()()}}function B(p,m){if(1&p&&(e.TgZ(0,"option",57),e._uU(1),e.qZA()),2&p){const c=m.$implicit;e.Q6J("value",c.dropdown_value),e.xp6(1),e.hij(" ",c.dropdown_label," ")}}function j(p,m){if(1&p){const c=e.EpF();e.TgZ(0,"div",52)(1,"h5",43),e._uU(2,"Dropdown"),e.qZA(),e.TgZ(3,"select",53)(4,"option",54),e._uU(5,"Select an Option"),e.qZA(),e.YNc(6,B,2,2,"option",55),e.qZA(),e.TgZ(7,"div",56)(8,"button",40),e.NdJ("click",function(){e.CHM(c);const o=e.oxw();let n;return e.KtG(o.toggleDropdown(null==(n=o.form.get("dropdown"))?null:n.value))}),e.TgZ(9,"span",41),e._uU(10,"Submit"),e.qZA()()()()}if(2&p){const c=e.oxw();e.xp6(4),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",c.dropdownList)}}function q(p,m){if(1&p){const c=e.EpF();e.TgZ(0,"div",5)(1,"div",58)(2,"span",59),e._uU(3,"Binding Parameters List"),e.qZA(),e.TgZ(4,"div",60)(5,"div",61)(6,"span",62)(7,"strong"),e._uU(8,"Status as on"),e.qZA(),e._uU(9),e.TgZ(10,"button",63),e.NdJ("click",function(){e.CHM(c);const o=e.oxw();return e.KtG(o.fetchReadlTimeData())}),e._UZ(11,"i",64),e.qZA()(),e.TgZ(12,"table",65)(13,"thead")(14,"tr")(15,"th",66),e._uU(16,"Sl.No"),e.qZA(),e.TgZ(17,"th",66),e._uU(18),e.qZA(),e.TgZ(19,"th",66),e._uU(20,"Values"),e.qZA()()()()()()()()}if(2&p){const c=e.oxw();e.xp6(9),e.hij("",c.convertDate," "),e.xp6(9),e.Oqu(c.showLabel)}}let R=(()=>{var p;class m{generateTicksArray(t,o,n){const a=[];for(let s=t;s<=o;s+=n)a.push(s);return a}constructor(t,o,n,a,s,r,u,d,v,h,D){(0,i.Z)(this,"spinner",void 0),(0,i.Z)(this,"api",void 0),(0,i.Z)(this,"getPowerBoard",void 0),(0,i.Z)(this,"fb",void 0),(0,i.Z)(this,"location",void 0),(0,i.Z)(this,"lambdatapi",void 0),(0,i.Z)(this,"cdr",void 0),(0,i.Z)(this,"datePipe",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"locationPermissionService",void 0),(0,i.Z)(this,"auditTrialServices",void 0),(0,i.Z)(this,"getLoggedUser",void 0),(0,i.Z)(this,"clientID",void 0),(0,i.Z)(this,"lookup_data_user",[]),(0,i.Z)(this,"form",void 0),(0,i.Z)(this,"SK_clientID",void 0),(0,i.Z)(this,"WDTparameters",void 0),(0,i.Z)(this,"cardslider",!1),(0,i.Z)(this,"cardONOFF",!1),(0,i.Z)(this,"cardONOFF_invert",!1),(0,i.Z)(this,"cardDropdown",!1),(0,i.Z)(this,"selectedAction",void 0),(0,i.Z)(this,"sliderValue",void 0),(0,i.Z)(this,"inverted",!1),(0,i.Z)(this,"hidingLink",void 0),(0,i.Z)(this,"payload",{mqtt:{},device_configuration:{},wrting_parameter:{},val:0,PAT:0}),(0,i.Z)(this,"slideToggle",void 0),(0,i.Z)(this,"invertCheckbox",void 0),(0,i.Z)(this,"togglevalue",void 0),(0,i.Z)(this,"toggleSwitchinverted",void 0),(0,i.Z)(this,"dropdownList",[]),(0,i.Z)(this,"mqttItems",[]),(0,i.Z)(this,"user_companyID",void 0),(0,i.Z)(this,"allPermissions_user",void 0),(0,i.Z)(this,"temp",void 0),(0,i.Z)(this,"parentID_selected_node",void 0),(0,i.Z)(this,"final_list",void 0),(0,i.Z)(this,"combineMnDevList",void 0),(0,i.Z)(this,"delay",void 0),(0,i.Z)(this,"devices",void 0),(0,i.Z)(this,"enableLocationButton",void 0),(0,i.Z)(this,"mqtt",void 0),(0,i.Z)(this,"selectedDevice",""),(0,i.Z)(this,"showTable",!1),(0,i.Z)(this,"parametersList",[]),(0,i.Z)(this,"Live_Data",void 0),(0,i.Z)(this,"userName",void 0),(0,i.Z)(this,"All_RDTS_Configration",[]),(0,i.Z)(this,"live_result_data",[]),(0,i.Z)(this,"tempParameterLabel",void 0),(0,i.Z)(this,"scalingtemp",void 0),(0,i.Z)(this,"dateTime",void 0),(0,i.Z)(this,"timeDifference",void 0),(0,i.Z)(this,"convertDate",void 0),(0,i.Z)(this,"hideDeleteButton",void 0),(0,i.Z)(this,"value",100),(0,i.Z)(this,"options",{floor:0,ceil:100,step:.001,ticksArray:this.generateTicksArray(0,1,.1),translate:S=>S.toFixed(3)}),(0,i.Z)(this,"showLabel",""),this.spinner=t,this.api=o,this.getPowerBoard=n,this.fb=a,this.location=s,this.lambdatapi=r,this.cdr=u,this.datePipe=d,this.router=v,this.locationPermissionService=h,this.auditTrialServices=D}ngOnInit(){this.getLoggedUser=this.getPowerBoard.getLoggedUserDetails(),this.SK_clientID=this.getLoggedUser.attributes["custom:clientID"],this.clientID=this.getLoggedUser.attributes["custom:clientID"]+"#device",this.user_companyID=this.getLoggedUser.attributes["custom:companyID"],this.userName=this.getLoggedUser.attributes["custom:username"],this.allPermissions_user=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("permissionDetails")))),this.auditTrialServices.audit_trail("2.1","Manual Override","Page Load","Manual Override Page Loaded","1"),this.initializeform(),this.fetchDeviceLookup(1),this.getLocationTree(),this.checkPermission()}changeValue(t){console.log("The data is ",t.target.value),this.sliderValue=t.target.value,this.form.get("sliderControl")?.setValue(this.sliderValue),this.cdr.detectChanges()}initializeform(){this.form=new g.cw({sliderControl:new g.NI(0),device_name:new g.NI(""),parameter_actions:new g.NI(""),dropdown:new g.NI(null),mqtt:new g.NI(null),sliderInput:new g.NI(0)})}updateSliderValue(t){let o=t;console.log(this.sliderValue),console.log("Multiplication Factore :",this.selectedAction.mX_C_X_Multiplication_Factor),console.log("Addition Factore :",this.selectedAction.mX_C_C_Addition_Factor),this.payload.val=o*parseInt(this.selectedAction.mX_C_X_Multiplication_Factor)+parseInt(this.selectedAction.mX_C_C_Addition_Factor),this.sliderValue=o,console.log("Payload :",this.payload)}checkPermission(){let t=!1,o=!1;for(let n=0;n<this.allPermissions_user.length;n++)"ManualOverride - Update"===this.allPermissions_user[n]?(t=!0,this.hidingLink=t,console.log("CHECK PERMISSION hasDeviceUpdate",t)):"ManualOverride - View"===this.allPermissions_user[n]&&(o=!0,console.log("CHECK PERMISSION hasDeviceViewhasDeviceView",o));t&&o||t?this.hideDeleteButton=!0:o?this.hideDeleteButton=!1:(console.log("CHECK PERMISSION hasDeviceUpdate",t),this.router.navigate(["/404"]))}sliderSubmit(){this.manualSubmit(this.sliderValue,"Slider")}fetchDeviceLookup(t){var o=this;return(0,_.Z)(function*(){console.log("Iam called Bro");try{const n=yield o.api.GetLookupMasterTable(o.clientID,t);if(n&&n.items)if("string"==typeof n.items){let a=JSON.parse(n.items);if(console.log("d1 =",a),Array.isArray(a)){for(let s=0;s<a.length;s++){const r=a[s];if(null==r)break;{const u=Object.keys(r)[0],{P1:d,P2:v,P3:h,P4:D,P5:S}=r[u];o.lookup_data_user.push({P1:d,P2:v,P3:h,P4:D,P5:S}),console.log("d2 =",o.lookup_data_user)}}o.lookup_data_user.sort((s,r)=>r.P5-s.P5),console.log("Lookup sorting",o.lookup_data_user),yield o.fetchDeviceLookup(t+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else console.log(),console.log("Devices from the Lookup to be displayed",o.lookup_data_user)}catch(n){console.error("Error:",n)}})()}fetchMqtt(t){var o=this;return(0,_.Z)(function*(){console.log("Iam called Bro");try{const n=yield o.api.GetLookupMasterTable(o.SK_clientID+"#mqtt",t);if(n&&n.items){let a=JSON.parse(n.items);if(Array.isArray(a)){for(let s=0;s<a.length;s++){const r=a[s];if(null==r)break;{const u=Object.keys(r)[0],{P1:d,P2:v,P3:h}=r[u];o.mqttItems.push({P1:d,P2:v,P3:h}),console.log("d2 =",o.mqttItems)}}console.log("Lookup sorting",o.lookup_data_user),yield o.fetchMqtt(t+1)}else console.error("Invalid data format - not an array.");console.log("MQtt table data is",o.mqttItems)}}catch(n){console.error("Error:",n)}})()}showParameters(){var t=this;return(0,_.Z)(function*(){t.cardONOFF=!1,t.cardONOFF_invert=!1,t.cardDropdown=!1,t.cardslider=!1,console.log("Iam exicuting :"),t.selectedDevice="";try{for(let o of Object.keys(t.combineMnDevList))console.log(o),t.selectedDevice=o.toString();console.log(t.selectedDevice),yield t.api.GetDeviceConfiguration(t.selectedDevice,t.SK_clientID).then(function(){var o=(0,_.Z)(function*(n){return n?(console.log("Data that is being coming from db",n),t.showLabel=n.mn_label,t.mqtt=n.reserved,n&&n.reserved&&""!=n.reserved?(t.mqttUpdate(t.mqtt),void(yield t.api.GetWritingDeviceType(n.writing_device_type,t.SK_clientID).then(function(){var a=(0,_.Z)(function*(s){if(!s)return b().fire({customClass:{container:"my-swal"},position:"center",title:"Writing Device Type not Configured",text:"Please Configure..!",icon:"warning",allowOutsideClick:!1});t.getAllLabels(s),t.payload.device_configuration=n,console.log("payload :",t.payload)});return function(s){return a.apply(this,arguments)}}()))):(t.selectedDevice="",b().fire({customClass:{container:"my-swal"},position:"center",title:"No MQTT ID Found",text:"Please configure MQTT Id in Device Configuration..!",icon:"warning",allowOutsideClick:!1}))):(console.log("Device Not found ",t.selectedDevice),t.selectedDevice="",b().fire({customClass:{container:"my-swal"},position:"center",title:"Device Configuration Not found",text:"Please configure the Device..!",icon:"warning",allowOutsideClick:!1}))});return function(n){return o.apply(this,arguments)}}())}catch(o){console.log("Cannot Fetch :",o)}t.cdr.detectChanges()})()}getAllLabels(t){this.WDTparameters=JSON.parse(t.parameters),console.log("WDT Parameters :",this.WDTparameters)}showModal(t){if(console.log("The event is",t),this.showTable=!1,this.dropdownList=[],this.selectedAction=t[0].data,this.cardslider=!1,this.cardONOFF=!1,this.cardDropdown=!1,this.cardONOFF_invert=!1,this.cdr.detectChanges(),console.log("Selected action is :",this.selectedAction),this.payload.wrting_parameter=this.selectedAction,"Slider"==this.selectedAction.control_type)this.cardslider=!0,this.sliderValue=this.selectedAction.min,this.options.floor=this.selectedAction.min,this.options.ceil=this.selectedAction.max,this.options.step=parseFloat(this.selectedAction.step),this.options.translate=o=>o.toFixed(1==this.selectedAction.step.includes(".")?this.selectedAction.step.split(".")[1].length:0),console.log("Options are",this.options);else if("ON & OFF button"==this.selectedAction.control_type)this.cardONOFF=!0;else if("Inverted ON & OFF button"==this.selectedAction.control_type)this.cardONOFF_invert=!0;else{this.cardDropdown=!0;const o="string"==typeof this.selectedAction.dropdownLabel_value?JSON.parse(this.selectedAction.dropdownLabel_value):this.selectedAction.dropdownLabel_value;if(o)for(let n of o)this.dropdownList.push(n);console.log("Drop down list is here :",this.dropdownList)}1==this.selectedAction.enable_binding_parameter&&(this.showTable=!0,this.parametersList=this.selectedAction.binding_parameter,console.log("Binding Parameters :",this.parametersList),this.fetchReadlTimeData()),this.cdr.detectChanges()}fetchReadlTimeData(){var t=this;return(0,_.Z)(function*(){t.spinner.show();let o=[];var a;o.push("MN#"+t.selectedDevice+"#TD"),console.log("All devices Data :",o),t.lambdatapi.getLatestData2({messageID:12345,type:"deviceDataLatestTable",MN:o,username:t.userName,clientID:t.SK_clientID,key:"sampleKeyExample"}).subscribe({next:(a=(0,_.Z)(function*(s){let r=JSON.parse(JSON.stringify(s));if(console.log("data live data1232 :>> ",r),t.Live_Data=r?.data,t.live_result_data=[],t.dateTime=new Date,t.convertDate=t.datePipe.transform(t.dateTime,"EEEE, MMMM d, y, h:mm a"),t.calculateTimeDifference(),!t.parametersList||!Array.isArray(t.parametersList))return t.spinner.hide(),b().fire({customClass:{container:"my-swal"},position:"center",title:"No Binding Parameters Found",icon:"warning",allowOutsideClick:!1});for(let u=0;u<t.parametersList.length;u++){const d=yield t.fetchParameterlabelIndex(t.selectedAction.rdt,t.parametersList[u]);console.log("Index,",d);let v=(yield t.fetchLiveData(t.selectedDevice,d,"processDisplayValue"))??"No Data";console.log("Index Data :",v),t.live_result_data.push({index:u+1,parameterName:t.tempParameterLabel,value:v})}console.log("Final data to be displayed :",t.live_result_data),t.showTableData(),t.cdr.detectChanges()}),function(r){return a.apply(this,arguments)}),error:a=>{console.error("getLatestData2 error",a)}})})()}calculateTimeDifference(){this.dateTime=new Date;const t=Math.abs((new Date).getTime()-this.dateTime.getTime());this.timeDifference=`${Math.floor(t/6e4)} minutes ago`}showTableData(){$("#live_data_table").off("click");const t={pagingType:"full_numbers",destroy:!0,lengthChange:!0,ordering:!0,responsive:!0,data:this.live_result_data,columns:[{data:"index"},{data:"parameterName"},{data:"value"}]};this.scalingtemp=$("#live_data_table").DataTable(t),this.spinner.hide()}fetchLiveData(t,o,n){console.log("fetchLiveData source",n),console.log("fetchLiveData PK,parameterIndex",t,o),console.warn(this.Live_Data);let a=null;for(let s=0;s<this.Live_Data?.length;s++){const r=this.Live_Data[s];let u="MN#"+t+"#TD",d=JSON.parse(JSON.stringify(r.MM));if(r&&r.PK===u){if(console.log("dataMMdataMMdataMM",d),d&&null!=o){a=d["P"+(o+1)];break}a="No Data";break}}return console.log("fetchLiveData value ---------\x3e",a),a}toggleSwitch(t){this.togglevalue=this.inverted?!t.target.checked:t.target.checked,this.payload.val=this.togglevalue?this.selectedAction.max*parseInt(this.selectedAction.mX_C_X_Multiplication_Factor)+parseInt(this.selectedAction.mX_C_C_Addition_Factor):this.selectedAction.min*parseInt(this.selectedAction.mX_C_X_Multiplication_Factor)+parseInt(this.selectedAction.mX_C_C_Addition_Factor),this.manualSubmit(this.payload.val,"toggleSwitch")}invertValues(t){this.inverted=t.target.checked,console.log(this.inverted)}toggleSwitchInverted(t){this.toggleSwitchinverted=!t.target.checked,console.log("Inverted Switch value:",this.toggleSwitchinverted),this.payload.val=this.toggleSwitchinverted?this.selectedAction.max*parseInt(this.selectedAction.mX_C_X_Multiplication_Factor)+parseInt(this.selectedAction.mX_C_C_Addition_Factor):this.selectedAction.min*parseInt(this.selectedAction.mX_C_X_Multiplication_Factor)+parseInt(this.selectedAction.mX_C_C_Addition_Factor),this.manualSubmit(this.payload.val,"invert_toggle")}toggleDropdown(t){console.log("Value got Submitted is :",t);let o="string"==typeof this.selectedAction?.dropdownLabel_value?JSON.parse(this.selectedAction?.dropdownLabel_value):this.selectedAction?.dropdownLabel_value;console.log("arrayofObject",o);let n=o?.filter(a=>a.dropdown_value==t)??null;this.payload.val=n[0].dropdown_value*parseInt(this.selectedAction.mX_C_X_Multiplication_Factor)+parseInt(this.selectedAction.mX_C_C_Addition_Factor),this.manualSubmit(this.payload.val,"dropdown")}mqttUpdate(t){var o=this;return(0,_.Z)(function*(){try{yield o.api.GetMqtt(o.mqtt,o.SK_clientID).then(function(){var n=(0,_.Z)(function*(a){console.log("Mqtt",a),a&&(o.payload.mqtt=a,console.log("payload :",o.payload))});return function(a){return n.apply(this,arguments)}}())}catch(n){console.log("Cant fetch :",n)}})()}manualSubmit(t,o){var n=this;return(0,_.Z)(function*(){n.spinner.show(),n.auditTrialServices.audit_trail("2.1","Manual Override","Write",`${n.combineMnDevList[n.selectedDevice]} wrote data (${t}) using ${n.selectedAction.control_type} control type parameter (${n.selectedAction.parameterLabel})`,"1"),n.lambdatapi.mqtt(n.payload).subscribe(a=>{console.log(a),a&&(n.spinner.hide(),b().fire({customClass:{container:"my-swal"},position:"center",title:"Data Sent successfully",icon:"success",allowOutsideClick:!1}))})})()}getLocationTree(){var t=this;return(0,_.Z)(function*(){try{const o=yield t.locationPermissionService.fetchGlobalLocationTree();if(!o)throw new Error("No data returned");t.temp=o,console.log("Data from location",t.temp),t.createJSTree(t.temp),console.log("this.tempthis.temp",t.temp)}catch(o){console.log("Eror fetching location ",o)}})()}AddAllnodes(){console.log(this.combineMnDevList)}createJSTree(t){$("#MultiJSTree_manual").jstree({core:{check_callback:!0,data:t,multiple:!1},search:{show_only_matches:!0},plugins:["contextmenu","dnd","search"],contextmenu:{items:function(a){let s=$("#MultiJSTree_manual").jstree(!0);return{submenu:{Child:{seperator_before:!1,seperator_after:!1,label:"Child",action:function(r){s.get_selected().forEach(d=>{let v=s.create_node(d,{text:"New Child",type:"file",icon:"glyphicon glyphicon-file"});s.deselect_node(d),s.select_node(v)})}},Parent:{seperator_before:!1,seperator_after:!1,label:"Parent",action:function(r){s.get_selected().forEach(d=>{let v=s.create_node(d,{text:"New Parent",type:"default"});s.deselect_node(d),s.select_node(v)})}}},Rename:{separator_before:!1,separator_after:!1,label:"Edit Location",action:function(r){s.get_selected().forEach(d=>{s.edit(d)})}},Remove:{separator_before:!1,separator_after:!1,label:"Remove Location",action:function(r){s.get_selected().forEach(d=>{s.delete_node(d)})}}}}}}).on("changed.jstree",(a,s)=>{let r=s.instance.get_selected();if(r.length>0){let u=s.instance.get_node(r[0]);if(u&&u.text){this.parentID_selected_node=u.parent,this.final_list=r.map(h=>s.instance.get_node(h)),console.log("chk this.final_list",this.final_list);const d=this.final_list.filter(h=>h.original&&"device"===h.original.node_type).map(h=>h.original.mn),v=this.final_list.filter(h=>h.original&&"device"===h.original.node_type).map(h=>h.original.text);this.combineMnDevList={},d.forEach((h,D)=>{this.combineMnDevList[h]=v[D]}),console.log(this.combineMnDevList),console.log(Object.keys(this.combineMnDevList).length),this.delay=Object.keys(this.combineMnDevList).length,this.devices=d,this.enableLocationButton=this.final_list.some(h=>void 0!==h.original)}else this.enableLocationButton=!1}else this.enableLocationButton=!1;this.cdr.detectChanges()}),$("#search").keyup(()=>{var a=$("#search").val();$("#MultiJSTree_manual").jstree(!0).search(a)})}fetchParameterlabelIndex(t,o){var n=this;return(0,_.Z)(function*(){console.log("rdt :>> ",t),console.log("parameter_label :>> ",o);try{const a=yield n.getPowerBoard.getLookUpRDT(t,n.SK_clientID);if(!a)return console.log("No result found for the given RDT"),null;console.log("GetRdt ",a),n.All_RDTS_Configration.push(a);const s=n.All_RDTS_Configration.find(r=>r?.PK===t);if(s){let r=[];try{r=JSON.parse(s.parameters)||[]}catch(d){console.error("Error parsing parameters:",d)}const u=r.findIndex(d=>d.parameterID===o);return-1!==u?(n.tempParameterLabel=r[u].parameterLabel,console.log("Index:",u),u):(console.log("Parameter label not found"),null)}return console.log("RDT configuration not found"),null}catch(a){throw console.log("Error fetching data:",a),a}})()}}return p=m,(0,i.Z)(m,"\u0275fac",function(t){return new(t||p)(e.Y36(f.t2),e.Y36(C.t),e.Y36(x.F),e.Y36(g.QS),e.Y36(x.F),e.Y36(L.i),e.Y36(e.sBO),e.Y36(M.uU),e.Y36(y.F0),e.Y36(k.G),e.Y36(I.C))}),(0,i.Z)(m,"\u0275cmp",e.Xpm({type:p,selectors:[["app-manual-override"]],viewQuery:function(t,o){if(1&t&&(e.Gf(F,5),e.Gf(U,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.slideToggle=n.first),e.iGM(n=e.CRH())&&(o.invertCheckbox=n.first)}},features:[e._Bn([M.uU])],decls:49,vars:11,consts:[[1,"d-flex","flex-column","flex-column-fluid"],[1,"app-toolbar","py-3","py-lg-6"],[1,"app-container","container-fluid","d-flex","flex-stack"],[1,"page-title","d-flex","flex-wrap","me-3","flex-column","justify-content-center"],[1,"page-heading","d-flex","text-gray-900","fw-bold","fs-3","my-0","flex-column","justify-content-center"],[1,"card","card-custom"],[1,"card-body"],[1,"form-group","row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-form-label","text-right","col-lg-3","col-sm-12","required","fw-bold"],[1,"col-lg-4","col-md-9","col-sm-12"],["type","button","title","Select Devices","data-bs-toggle","modal","placement","right","data-bs-target","#myLoca",1,"btn","fw-bold","btn-primary","translatey"],[3,"formGroup"],["ngbTooltip","Select the WDT parameter Action",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["formControlName","parameter_actions","optionValueField","wdtLabel","optionTextField","parameterLabel","placeholder","Select...",3,"allowClear","items","selectionChanges"],["class","form-group row","style","margin-top: 10px;margin-bottom: 10px;",4,"ngIf"],["class","card",4,"ngIf"],[1,"row"],["class","col-sm-4",4,"ngIf"],["id","myLoca",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content",2,"width","400px","transform","translate(30%, 0px)"],[1,"modal-header",2,"padding-bottom","15px"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"container"],["type","search","id","search","value","","placeholder","Search For Devices",1,"col-md-12","input",2,"margin","0em auto 1em auto","padding","4px","border-radius","4px","border","1px solid silver"],["id","MultiJSTree_manual",1,"container","scroll-y","h-300px"],[1,"modal-footer"],[2,"display","flex","gap","10px"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-primary",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-danger"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["class","card card-custom",4,"ngIf"],[1,"col-form-label","text-right","col-lg-3","col-sm-12","fw-bold"],[1,"col",2,"display","flex","align-items","center","gap","10px"],[1,"slider-container"],["step","0.01","type","number","formControlName","sliderInput",1,"form-control","col-lg-2","col-md-9","col-sm-12","text-right","fw-bold",2,"margin-bottom","10px",3,"keyup"],["formControlName","sliderControl",2,"min-width","100%",3,"value","options","valueChange"],[1,"col-lg-4","col-md-9","col-sm-12",2,"display","flex","align-items","center","gap","10px"],["type","button",1,"btn","fw-bold","btn-lg","btn-primary","me-3","me-3",3,"click"],[1,"indicator-label"],[1,"card"],[1,"card-title","mb-5"],[1,"col-sm-6"],[1,"toggleWrapper"],["type","checkbox","name","toggle1","id","toggle1","checked","",1,"mobileToggle",3,"change"],["for","toggle1"],[1,"col"],[1,"form-check","form-check-inline","form-check-solid","me-5"],["type","checkbox",1,"form-check-input",3,"change"],[1,"fw-bold","ps-2","fc-8"],[1,"col-sm-4"],["name","dropdown","formControlName","dropdown",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["disabled","",3,"value","selected"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-4","pt-11"],[3,"value"],[1,"card","mb-5","mb-xl-8"],[1,"custom-card-title"],[1,"card-body","py-3"],[1,"table-responsive"],[1,"status-date"],["type","button","ngbTooltip","Refresh",3,"click"],[1,"bi","bi-arrow-clockwise",2,"color","white","font-weight","bolder","font-size","large"],["id","live_data_table",1,"table","table-striped","table-bordered","table-hover","table-responsive-sm"],["scope","col"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),e._uU(5,"Manual Overriding"),e.qZA()()()()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),e._uU(10,"Select Device"),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e._uU(13),e.qZA()()(),e.TgZ(14,"form",11)(15,"div",7)(16,"label",8),e._uU(17,"Parameters"),e._UZ(18,"i",12),e.qZA(),e.TgZ(19,"div",9)(20,"ngx-select",13),e.NdJ("selectionChanges",function(a){return o.showModal(a)}),e.qZA()()(),e.YNc(21,E,13,2,"div",14),e.YNc(22,J,14,0,"div",15),e.YNc(23,K,9,0,"div",15),e.TgZ(24,"div",16),e.YNc(25,j,11,2,"div",17),e.qZA()(),e.TgZ(26,"div",18)(27,"div",19)(28,"div",20)(29,"div",21)(30,"h2",22),e._uU(31," Location "),e.qZA(),e._UZ(32,"button",23),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"div",24),e._UZ(35,"input",25),e.qZA(),e._UZ(36,"div",26),e.TgZ(37,"div",27)(38,"div",24)(39,"div",16)(40,"div",28)(41,"button",29),e.NdJ("click",function(){return o.showParameters()}),e._uU(42," Ok "),e.qZA(),e.TgZ(43,"button",30),e._uU(44," Cancel "),e.qZA()()()()()()()()(),e.TgZ(45,"ngx-spinner",31)(46,"p",32),e._uU(47,"Please wait your Binding Parameters Table is Loading... "),e.qZA()()(),e.YNc(48,q,21,2,"div",33)),2&t&&(e.xp6(13),e.Oqu(""==o.selectedDevice?"Location":o.showLabel),e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("allowClear",!0)("items",o.WDTparameters),e.xp6(1),e.Q6J("ngIf",o.cardslider&&o.form.valid),e.xp6(1),e.Q6J("ngIf",o.cardONOFF&&o.form.valid),e.xp6(1),e.Q6J("ngIf",o.cardONOFF_invert&&o.form.valid),e.xp6(2),e.Q6J("ngIf",o.cardDropdown&&o.form.valid),e.xp6(16),e.Q6J("disabled",!o.enableLocationButton),e.xp6(4),e.Q6J("fullScreen",!0),e.xp6(3),e.Q6J("ngIf",1==o.showTable))},dependencies:[g._Y,g.YN,g.Kr,g.Fj,g.wV,g.EJ,g.JJ,g.JL,g.sg,g.u,M.sg,M.O5,w._L,f.Ro,Z.O2,T.Pi],styles:['.card-custom[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:10px;margin-left:30px;margin-right:30px;margin-bottom:2%}mat-select[_ngcontent-%COMP%]{background-color:var(--bs-gray-100);color:var(--bs-gray-700);font-weight:600!important;padding:.825rem 1.3rem .825rem 1.5rem;font-size:1.15rem;border-radius:.625rem}.slider-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:space-between;min-width:43%}.slider[_ngcontent-%COMP%]{flex:1;margin:0 10px;-webkit-appearance:none;width:100%;height:5px;background:#ddd;outline:none;opacity:.8;transition:opacity .2s ease-in-out,background .3s ease-in-out}.slider[_ngcontent-%COMP%]:hover{opacity:1;background:#ccc}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:#4CAF50;cursor:pointer;border-radius:50%;-webkit-transition:transform .2s ease-in-out,background .3s ease-in-out;transition:transform .2s ease-in-out,background .3s ease-in-out}.slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);background:#45a049}.slider[_ngcontent-%COMP%]::-moz-range-thumb{width:20px;height:20px;background:#4CAF50;cursor:pointer;border-radius:50%;-moz-transition:transform .2s ease-in-out,background .3s ease-in-out;transition:transform .2s ease-in-out,background .3s ease-in-out}.slider[_ngcontent-%COMP%]::-moz-range-thumb:hover{transform:scale(1.2);background:#45a049}.slider-value[_ngcontent-%COMP%]{width:40px;text-align:center;font-size:1rem;color:#4caf50;transition:color .3s ease-in-out}.selected-value[_ngcontent-%COMP%]{margin-top:10px;font-weight:700;color:#4caf50;transition:color .3s ease-in-out}.toggle-switch[_ngcontent-%COMP%]{position:relative;width:60px;height:30px}.toggle-input[_ngcontent-%COMP%]{display:none}.toggle-label[_ngcontent-%COMP%]{display:block;position:absolute;cursor:pointer;background-color:#ccc;border-radius:15px;width:30px;height:30px;top:0;transition:background-color .3s ease}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]{background-color:#007aff}.toggle-label[_ngcontent-%COMP%]:after{content:"";position:absolute;top:5px;left:5px;width:20px;height:20px;border-radius:50%;background-color:#fff;transition:transform .3s ease}.toggle-input[_ngcontent-%COMP%]:checked + .toggle-label[_ngcontent-%COMP%]:after{transform:translate(30px)}.inactiveMixin[_ngcontent-%COMP%]{content:"";position:absolute;display:block}.beforeAnimation[_ngcontent-%COMP%]{transition:.2s cubic-bezier(.24,0,.5,1)}.afterAnimation[_ngcontent-%COMP%]{box-shadow:0 0 0 1px #0000001a,0 4px #0000000a,0 4px 9px #00000021,0 3px 3px #0000000d;transition:.35s cubic-bezier(.54,1.6,.5,1)}.toggleWrapper[_ngcontent-%COMP%]   input.mobileToggle[_ngcontent-%COMP%]{opacity:0;position:absolute}.toggleWrapper[_ngcontent-%COMP%]   input.mobileToggle[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;display:inline-block;-webkit-user-select:none;user-select:none;transition:.4s ease;-webkit-tap-highlight-color:transparent;height:30px;width:50px;border:1px solid #e4e4e4;border-radius:60px}.toggleWrapper[_ngcontent-%COMP%]   input.mobileToggle[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;transition:.4s ease;height:30px;width:51px;top:0;left:0;border-radius:30px}.toggleWrapper[_ngcontent-%COMP%]   input.mobileToggle[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;transition:.4s ease;background:whitesmoke;height:28px;width:28px;top:1px;left:0;border-radius:60px}.toggleWrapper[_ngcontent-%COMP%]   input.mobileToggle[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background:#2ecc71;transition:width .2s cubic-bezier(0,0,0,.1)}.toggleWrapper[_ngcontent-%COMP%]   input.mobileToggle[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{left:24px}.btn-primary[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:-moz-fit-content;max-width:fit-content;max-height:40px}.custom-table[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem;border-collapse:collapse;background-color:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 0 10px #0000001a}.custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;text-align:center}.custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;border-bottom:2px solid #ddd}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e9ecef}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-top:1px solid #ddd}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{text-align:center}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{text-align:center}.status-date[_ngcontent-%COMP%]{display:flex;align-items:center;font-family:Arial,sans-serif}.status-date[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-right:10px;font-weight:700}.status-date[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;border:none;background-color:#ffc107;color:#fff;border-radius:5px;font-weight:700;margin-top:2px;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content;padding-top:5px;cursor:pointer;box-shadow:0 4px 8px #0000001a;transition:transform .3s,box-shadow .3s}.status-date[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#e0a800;transform:translateY(-2px);transform:translate(1px);transition:.8ms;box-shadow:0 6px 12px #000000e6}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);transition:.8ms}.status-date[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(0);box-shadow:0 2px 4px #0000001a}.custom-card-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;margin-top:2%;color:var(--bs-text-gray-900);text-align:center}']})),m})();var G=l(64170),V=l(98525),W=l(2032),X=l(92202),Y=l(92596);let z=(()=>{var p;class m{}return p=m,(0,i.Z)(m,"\u0275fac",function(t){return new(t||p)}),(0,i.Z)(m,"\u0275mod",e.oAB({type:p})),(0,i.Z)(m,"\u0275inj",e.cJS({imports:[g.UX,g.u5,M.ez,A.Ps,w.IJ,G.lN,V.LD,W.c,X.KP,Y.AV,f.ef,Z.i4,T.kx,y.Bz.forChild([{path:"",component:R}])]})),m})()},30175:(N,P,l)=>{l.d(P,{i:()=>_});var i=l(86656),y=l(69862),g=l(57337),M=l(26306),A=l(22096),w=l(65879);let _=(()=>{var O;class b{constructor(f){(0,i.Z)(this,"http",void 0),this.http=f}mqtt(f){return console.log("environment.lambdaUrl :>> ",g.N.lambdaUrl),this.http.post(`${g.N.lambdaUrl}`,f)}getLatestData2(f){return console.log(new Date),console.log("getLatestData2"),this.http.post("https://37iltjrp70.execute-api.ap-south-1.amazonaws.com/test/?doAuth=secretKey",f).pipe((0,M.K)(x=>(console.error(x),(0,A.of)({error:x}))))}getDeviceList(f){const C=f?.filter((k,I,Z)=>I===Z?.findIndex(T=>T?.PK===k?.PK));console.log(C);const x={type:"batchGet",table_name:"device_configuration",keys:C};console.log("postData postDatapostDatapostData",x);const L=(new y.WM).set("Content-Type","application/json");return this.http.post("https://fy1sd9sosb.execute-api.ap-south-1.amazonaws.com/firststage/dynamic_dynamoDB_crud",x,{headers:L})}getRDT(f){const C=(new y.WM).set("Content-Type","application/json");return this.http.post("https://fy1sd9sosb.execute-api.ap-south-1.amazonaws.com/firststage/dynamic_dynamoDB_crud",f,{headers:C})}}return O=b,(0,i.Z)(b,"\u0275fac",function(f){return new(f||O)(w.LFG(y.eN))}),(0,i.Z)(b,"\u0275prov",w.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"})),b})()}}]);