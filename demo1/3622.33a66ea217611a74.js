"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[3622],{73622:(xt,W,E)=>{E.r(W),E.d(W,{ReadingdevicetypeXlsxModule:()=>kt});var T=E(86656),H=E(96814),tt=E(22939),et=E(64190),Z=E(15861),j=E(56223),ot=E(90775),it=E.n(ot),nt=E(13519),$=E.n(nt),at=E(11486),lt=E(6990),st=E(89362),l=E(65879),dt=E(31552),rt=E(5588),ut=E(74260),ht=E(36624),Q=E(88672);let pt=(()=>{var x;class A{constructor(){(0,T.Z)(this,"columnValidations",{"RDT Id":{required:!0,validate:(a,i)=>this.isString(a)?this.isWhitespace(a)?{isValid:!1,error:"RDT ID cannot contains space"}:{isValid:!0}:{isValid:!1,error:"RDT ID must be text"}},"RDT Label":{required:!0,validate:(a,i)=>this.isString(a)?a.length<2?{isValid:!1,error:"RDT label must be at least 2 characters"}:" "==a.charAt(0)?{isValid:!1,error:"RDT Label cannot have spaces at start"}:{isValid:!0}:{isValid:!1,error:"RDT label must be text"}},"Dashboard Update Time":{required:!0,validate:(a,i)=>this.isNumber(a)?this.isInteger(a)?this.isPositive(a)?{isValid:!0}:{isValid:!1,error:"Dashboard Update Time must be positive"}:{isValid:!1,error:"Dashboard Update Time must not be decimal"}:{isValid:!1,error:"Dashboard Update Time must be a number"}},"Device Timeout":{required:!0,validate:(a,i)=>this.isNumber(a)?this.isInteger(a)?this.isPositive(a)?{isValid:!0}:{isValid:!1,error:"Device Timeout must be positive"}:{isValid:!1,error:"Device Timeout must not be decimal"}:{isValid:!1,error:"Device Timeout must be a number"}},"Schedule Type":{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"Schedule Type must be boolean such as true/false"}:{isValid:!0}},"mx+C":{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"mxC must be boolean such as true/false"}:{isValid:!0}},Alerts:{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"Alerts must be boolean such as true/false"}:{isValid:!0}},"Parameters View":{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"Parameters View must be boolean such as true/false"}:{isValid:!0}}})}getColumnLetter(a){let i="";for(;a>=0;)i=String.fromCharCode(a%26+65)+i,a=Math.floor(a/26)-1;return i}isString(a){return"string"==typeof a||a instanceof String}isNumber(a){return!isNaN(Number(a))&&"boolean"!=typeof a}isInteger(a){return Number.isInteger(Number(a))}isPositive(a){return a>0}isWhitespace(a){return/\s/.test(a)}validateExcelFile(a,i,h,d,u,f){var p=this;return(0,Z.Z)(function*(){return new Promise((o,s)=>{const r=[],V=[],m=[];try{const t=a[0],D=a.slice(1).map(y=>y[0]),e=a.slice(1).map(y=>y[1]);Object.entries(p.columnValidations).forEach(([y,c])=>{if(console.log("Header is ",y),c.required&&!t.includes(y)){const n=Object.keys(p.columnValidations).indexOf(y);r.push({row:1,column:y,columnLetter:p.getColumnLetter(n),value:"Missing",error:`Required column "${y}" is missing`})}});for(let y=1;y<a.length;y++){const c=a[y];if(0===c.length)break;t.forEach((n,_)=>{const v=p.columnValidations[n];if(v){const w=c[_],R=p.getColumnLetter(_);if(v.required&&(null==w||""===w)&&r.push({row:y+1,column:n,columnLetter:R,value:w,error:`${n} is required`}),"RDT Id"===n&&v.required&&w&&"string"==typeof w&&i.includes(w.trim())&&!d&&r.push({row:y+1,column:n,columnLetter:R,value:w,error:"RDT ID already present"}),"RDT Label"===n&&v.required&&w&&"string"==typeof w&&h.includes(w.trim())){const S=f&&c[0]&&f.find(k=>k.P1==c[0].trim());console.log("Filtered RDT is here ",S),(!d||S&&S&&S.P2&&S.P2!=w.trim())&&r.push({row:y+1,column:n,columnLetter:R,value:w,error:"RDT Label already present"})}if("RDT Id"===n&&v.required&&w&&"string"==typeof w&&0==i.includes(w.trim())&&d&&r.push({row:y+1,column:n,columnLetter:R,value:w,error:"RDT ID does not exist"}),"RDT Id"===n&&v.required&&null!=w&&null!=w&&""!=w&&w&&D.filter(k=>k==w.trim()).length>1&&r.push({row:y+1,column:n,columnLetter:R,value:w,error:"Duplicate RDT Id found with name"}),"RDT Label"===n&&v.required&&null!=w&&null!=w&&""!=w&&w&&e.filter(k=>k==w.trim()).length>1&&r.push({row:y+1,column:n,columnLetter:R,value:w,error:"Duplicate RDT Label found with name"}),null!=w&&""!==w){const S=v.validate(w,y+1);S.isValid||r.push({row:y+1,column:n,columnLetter:R,value:w,error:S.error})}}}),d?m.push(c):V.push(c)}console.log("Errors array is here ",r),o({isValid:0===r.length,errors:r,createRows:V,updateRows:m})}catch(t){s(`Error processing data: ${t.message}`)}})})()}formatValidationErrors(a){return a.map(i=>`Row ${i.row}, Column ${i.columnLetter} (${i.column}): ${i.error}${i.value?` (${i.value})`:""}`)}}return x=A,(0,T.Z)(A,"\u0275fac",function(a){return new(a||x)}),(0,T.Z)(A,"\u0275prov",l.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})),A})();var ct=E(14934);let gt=(()=>{var x;class A{getColumnLetter(a){let i="";for(;a>=0;)i=String.fromCharCode(a%26+65)+i,a=Math.floor(a/26)-1;return i}isString(a){return"string"==typeof a||a instanceof String}isNumber(a){return!isNaN(Number(a))&&"boolean"!=typeof a}isInteger(a){return Number.isInteger(Number(a))}isPositive(a){return a>0}isWhitespace(a){return/\s/.test(a)}constructor(){(0,T.Z)(this,"columnValidations",{"RDT Id":{required:!0,validate:(a,i)=>this.isString(a)?this.isWhitespace(a)?{isValid:!1,error:"RDT ID cannot contains space"}:{isValid:!0}:{isValid:!1,error:"RDT ID must be text"}},"Parameter ID":{required:!0,validate:(a,i)=>this.isString(a)?a.length<2?{isValid:!1,error:"Parameter ID  must be at least 2 characters"}:this.isWhitespace(a)?{isValid:!1,error:"Parameter ID cannot contains space"}:{isValid:!0}:{isValid:!1,error:"Parameter ID must be text"}},"Parameter Label":{required:!0,validate:(a,i)=>this.isString(a)?a.length<2?{isValid:!1,error:"Parameter Label  must be at least 2 characters"}:" "==a.charAt(0)?{isValid:!1,error:"Parameter Label cannot have spaces at start"}:{isValid:!0}:{isValid:!1,error:"Parameter Label must be text"}},"Parameter Description":{required:!1,validate:(a,i)=>({isValid:!0})},"Decimal Point":{required:!0,validate:(a,i)=>this.isNumber(a)?this.isInteger(a)?this.isPositive(a)?{isValid:!0}:{isValid:!1,error:"Decimal Point must be positive"}:{isValid:!1,error:"Decimal Point must not be decimal"}:{isValid:!1,error:"Decimal Point must be a number"}},"mX+C Reading X Multiplication Factor":{required:!0,validate:(a,i)=>this.isNumber(a)?{isValid:!0}:{isValid:!1,error:"mX+C Multiplication Factor must be a number"}},"mX+C Reading C is Correction":{required:!0,validate:(a,i)=>this.isNumber(a)?{isValid:!0}:{isValid:!1,error:"mX+C Correction must be a number"}},"Enable Schedule Parameter":{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"Enable Schedule Parameter must be boolean such as true/false"}:{isValid:!0}},"Schedule Parameter Name":{required:!1,validate:(a,i)=>this.isString(a)?" "==a.charAt(0)?{isValid:!1,error:"Schedule Parameter Name cannot have spaces at start"}:{isValid:!0}:{isValid:!1,error:"Schedule Parameter Name must be text"}},"Schedule Parameter Label":{required:!1,validate:(a,i)=>this.isString(a)?" "==a.charAt(0)?{isValid:!1,error:"Schedule Parameter Label cannot have spaces at start"}:{isValid:!0}:{isValid:!1,error:"Schedule Parameter Label must be text"}},"Schedule Parameter Max Value":{required:!1,validate:(a,i)=>this.isNumber(a)?this.isInteger(a)?this.isPositive(a)?{isValid:!0}:{isValid:!1,error:"Schedule Parameter Max Value must be positive"}:{isValid:!1,error:"Schedule Parameter Max Value must not be decimal"}:{isValid:!1,error:"Schedule Parameter Max Value must be a number"}},"Schedule Parameter Value Type":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Schedule Parameter Value Type Name must be text"}},"Schedule Parameter Operation Type":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Schedule Parameter Operation Type must be text"}},"Schedule Parameter Heat Map Type":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Schedule Parameter Heat Map Type must be text"}},"Enable Valuemapping":{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"Enable Valuemappping must be boolean such as true/false"}:{isValid:!0}},"No of ValueMapping":{required:!1,validate:(a,i)=>this.isNumber(a)?this.isInteger(a)?this.isPositive(a)?{isValid:!0}:{isValid:!1,error:"No of ValueMapping must be positive"}:{isValid:!1,error:"No of ValueMapping must not be decimal"}:{isValid:!1,error:"No of ValueMapping must be a number"}},"Value Mapping Label":{required:!1,validate:(a,i)=>this.isString(a)?" "==a.charAt(0)?{isValid:!1,error:"Value Mapping Label cannot have spaces at start"}:{isValid:!0}:{isValid:!1,error:"Value Mapping Label must be text"}},"Value Mapping Value":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Value must be text"}},"Value Mapping Equation":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Equation must be text"}},"Value Mapping Class Icon":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Class Icon must be text"}},"Value Mapping Label Color":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Label Color must be text"}},"Value Mapping Animation":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Animation must be text"}},"Value Mapping Font":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Font must be text"}},"Value Mapping Font Size":{required:!1,validate:(a,i)=>({isValid:!0})},"Value Mapping Align":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"Value Mapping Align must be text"}},"Enable Scaling":{required:!1,validate:(a,i)=>null!=a&&""!==a&&"boolean"!=typeof a&&"true"!==a&&"false"!==a?{isValid:!1,error:"Enable Scaling must be boolean such as true/false"}:{isValid:!0}},"No of Scaling table":{required:!1,validate:(a,i)=>this.isNumber(a)?this.isInteger(a)?this.isPositive(a)?{isValid:!0}:{isValid:!1,error:"No of Scaling table must be positive"}:{isValid:!1,error:"No of Scaling table must not be decimal"}:{isValid:!1,error:"No of Scaling table must be a number"}},"Scaling Table Threshold":{required:!1,validate:(a,i)=>({isValid:!0})},"Scaling Table Multiplication Factor":{required:!1,validate:(a,i)=>({isValid:!0})},"Scaling Table Unit":{required:!1,validate:(a,i)=>this.isString(a)?{isValid:!0}:{isValid:!1,error:"RDT label must be text"}}})}validateExcelFile(a,i,h,d,u,f){var p=this;return(0,Z.Z)(function*(){return new Promise((o,s)=>{const r=[],V=[],m=[];try{const t=a[0];Object.entries(p.columnValidations).forEach(([e,y])=>{if(y.required&&!t.includes(e)){const c=Object.keys(p.columnValidations).indexOf(e);r.push({row:1,column:e,columnLetter:p.getColumnLetter(c),value:"Missing",error:`Required column "${e}" is missing`})}});let D={};try{a.slice(1).forEach(e=>{D&&D[e[0]]?(D[e[0]].parameterID.push(e[1]),D[e[0]].parameterLabel.push(e[2]),D[e[0]].ScheduleParameter.push(e[8])):(D[e[0]]={},D[e[0]].parameterID=[],D[e[0]].parameterLabel=[],D[e[0]].ScheduleParameter=[],D[e[0]].parameterID.push(e[1]),D[e[0]].parameterLabel.push(e[2]),D[e[0]].ScheduleParameter.push(e[8]))})}catch(e){console.log("Error with getting parameters of each RDT ",e)}console.log("Mapped Parameters are here ready for validations ",D);for(let e=1;e<a.length;e++){const y=a[e];if(0===y.length)break;t.forEach((c,n)=>{const _=p.columnValidations[c];if(_){const v=y[n];let w=p.getColumnLetter(n);if(null!=v&&null!=v&&(1==v||"true"==v)&&"Enable Schedule Parameter"==c){console.log("cellValue ",v);for(let R=8;R<=13;R++){const S=y[R];w=p.getColumnLetter(R),console.log("Entered into Schedule Schedule block ",S),(null==S||""===S)&&(12!=R||"Difference"==y[11])&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`For difference Type ${t[R]} is required`})}}if(null!=v&&null!=v&&(1==v||"true"==v)&&"Enable Valuemapping"==c){console.log("Value Mapping cellValue ",v);for(let R=15;R<=24;R++){const S=y[R];if(console.log("Entered into value mapping block ",S),w=p.getColumnLetter(R),R<=17&&(null==S||""===S)&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`${t[R]} is required`}),1==y[15]&&15!=R)null!=S&&null!=S&&""!=S&&S.toString().includes(",")&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`${t[R]} If the number of value mappings is 1, there is no need to add comma-separated`});else if(15!=R&&null!=S&&null!=S&&""!=S&&((0==S.toString().includes(",")||S.split(",").length!=y[15])&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`${t[R]} mismatched with No of Value Mapping (It should be comma separated)`}),1==S.includes(",")&&17==R)){const k=S.split(","),N={};for(let z of k)N[z]=(N[z]||0)+1;for(let z in N)N[z]>1&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:"Duplicate Value Mapping Value found"})}}}if(null!=v&&null!=v&&(1==v||"true"==v)&&"Enable Scaling"==c)for(let R=26;R<=29;R++){const S=y[R];if(console.log("Entered into Scaling block ",S),w=p.getColumnLetter(R),R<=29&&(null==S||""===S)&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`${t[R]} is required`}),1==y[26]&&26!=R)null!=S&&null!=S&&""!=S&&S.toString().includes(",")&&r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`${t[R]} If the number of value mappings is 1, there is no need to add comma-separated`});else if(26!=R&&null!=S&&null!=S&&""!=S)if(0==S.includes(",")||S.split(",").length!=y[26])r.push({row:e+1,column:t[R],columnLetter:w,value:S,error:`${t[R]} mismatched with No of Value Mapping (It should be comma separated)`});else if(null!=y[27]&&""!==y[27]&&null!=y[28]&&""!==y[28]&&null!=y[29]&&""!==y[29]){const k="string"==typeof y[27]?y[27].split(","):[],N="string"==typeof y[28]?y[28].split(","):[],z="string"==typeof y[29]?y[29].split(","):[];if(Array.isArray(k)&&Array.isArray(N)&&Array.isArray(z))if(console.log("Iam inside the else if block "),k.length===N.length&&N.length===z.length){const L=new Set;for(let K=0;K<k.length;K++){const J=`${k[K].trim()}|${N[K].trim()}|${z[K].trim()}`;if(L.has(J)){r.push({row:e+1,column:t[R],columnLetter:w,value:J,error:"Duplicate Scaling Parameters Found"});break}L.add(J)}}else r.push({row:e+1,column:t[R],columnLetter:w,value:"",error:"Mismatch in length of Thresholds, Multiplication Factors, and Units"});break}}if(_.required&&(null==v||""===v)&&r.push({row:e+1,column:c,columnLetter:w,value:v,error:`${c} is required`}),"RDT Id"===c&&_.required&&v&&"string"==typeof v&&0==i.includes(v.trim())&&r.push({row:e+1,column:c,columnLetter:w,value:v,error:"RDT ID does not exist"}),"Parameter ID"==c&&_.required&&y[0]&&v&&"string"==typeof v&&D&&D[y[0]]){const R=D[y[0]].parameterID.filter(S=>v==S);R&&Array.isArray(R)&&R.length>1&&r.push({row:e+1,column:c,columnLetter:w,value:v,error:"Duplicate parameter ID found"})}if("Parameter Label"==c&&_.required&&y[0]&&v&&"string"==typeof v&&D&&D[y[0]]){const R=D[y[0]].parameterLabel.filter(S=>v==S);R&&Array.isArray(R)&&R.length>1&&r.push({row:e+1,column:c,columnLetter:w,value:v,error:"Duplicate parameter Label found"})}if("Schedule Parameter Name"==c&&y[0]&&v&&"string"==typeof v&&(null!=v||null!=v||""!=v)&&D&&D[y[0]]){const R=D[y[0]].ScheduleParameter.filter(S=>v==S);console.log("Filtered schedule is here ",R),R&&Array.isArray(R)&&R.length>1&&r.push({row:e+1,column:c,columnLetter:w,value:v,error:"Duplicate Schedule Parameter Name found"})}if(null!=v&&""!==v){const R=_.validate(v,e+1);R.isValid||r.push({row:e+1,column:c,columnLetter:w,value:v,error:R.error})}}}),d?m.push(y):V.push(y)}console.log("Errors array is here ",r),o({isValid:0===r.length,errors:r,createRows:V,updateRows:m})}catch(t){s(`Error processing data: ${t.message}`)}})})()}formatValidationErrors(a){return a.map(i=>`Row ${i.row}, Column ${i.columnLetter} (${i.column}): ${i.error}${i.value?` (${i.value})`:""}`)}}return x=A,(0,T.Z)(A,"\u0275fac",function(a){return new(a||x)}),(0,T.Z)(A,"\u0275prov",l.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"})),A})();const mt=["fileUpload"],ft=["container"],_t=["tabulatorContainer"];function vt(x,A){1&x&&(l.TgZ(0,"small",7),l._uU(1," Please select a type. "),l.qZA())}function Pt(x,A){if(1&x){const I=l.EpF();l.TgZ(0,"div",5)(1,"label",6),l._uU(2,"Upload Excel File"),l.qZA(),l.TgZ(3,"input",23),l.NdJ("change",function(i){l.CHM(I);const h=l.oxw();return l.KtG(h.onFileChange(i))}),l.qZA()()}}function bt(x,A){if(1&x){const I=l.EpF();l.TgZ(0,"button",24),l.NdJ("click",function(){l.CHM(I);const i=l.oxw();let h;return l.KtG(i.onFileSelected(null==(h=i.createRDTXlsx.get("type"))?null:h.value,"update"))}),l._uU(1," \u270f\ufe0f Update"),l.qZA()}if(2&x){const I=l.oxw();let a;l.Q6J("disabled",!(null!=(a=I.createRDTXlsx.get("type"))&&a.value))}}function Ct(x,A){if(1&x){const I=l.EpF();l.TgZ(0,"button",25),l.NdJ("click",function(){l.CHM(I);const i=l.oxw();let h;return l.KtG(i.fetchLoggedInClientRDT(null==(h=i.createRDTXlsx.get("type"))?null:h.value))}),l._uU(1,"\u{1f4e5} Get Data"),l.qZA()}if(2&x){const I=l.oxw();let a;l.Q6J("disabled",!(null!=(a=I.createRDTXlsx.get("type"))&&a.value))}}function Dt(x,A){if(1&x){const I=l.EpF();l.TgZ(0,"button",26),l.NdJ("click",function(){l.CHM(I);const i=l.oxw();let h;return l.KtG(i.onFileSelected(null==(h=i.createRDTXlsx.get("type"))?null:h.value,"add"))}),l._uU(1,"\u2795 Add New"),l.qZA()}if(2&x){const I=l.oxw();let a;l.Q6J("disabled",!(null!=(a=I.createRDTXlsx.get("type"))&&a.value))}}function yt(x,A){if(1&x){const I=l.EpF();l.TgZ(0,"button",27),l.NdJ("click",function(){l.CHM(I);const i=l.oxw();let h;return l.KtG(i.download(null==(h=i.createRDTXlsx.get("type"))?null:h.value))}),l._UZ(1,"i",28),l._uU(2," Download"),l.qZA()}if(2&x){const I=l.oxw();let a;l.Q6J("disabled",!(null!=(a=I.createRDTXlsx.get("type"))&&a.value))}}function Rt(x,A){if(1&x&&(l.TgZ(0,"div",37),l._uU(1),l.qZA()),2&x){const I=l.oxw(2);l.xp6(1),l.Oqu(I.error)}}function wt(x,A){if(1&x&&(l.TgZ(0,"tr")(1,"td",45),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA()()),2&x){const I=A.$implicit;l.xp6(2),l.Oqu(I.split(",")[0].replace("Row ","")),l.xp6(2),l.Oqu(I.split(":")[0].split(",")[1].trim()),l.xp6(2),l.Oqu(I.split(":")[1].trim())}}function St(x,A){if(1&x&&(l.TgZ(0,"div",38)(1,"div",37)(2,"div",39)(3,"strong"),l._uU(4,"Errors Found:"),l.qZA(),l.TgZ(5,"span",40),l._uU(6),l.qZA()(),l.TgZ(7,"div",41)(8,"table",42)(9,"thead",43)(10,"tr")(11,"th"),l._uU(12,"Row"),l.qZA(),l.TgZ(13,"th"),l._uU(14,"Column"),l.qZA(),l.TgZ(15,"th"),l._uU(16,"Error"),l.qZA()()(),l.TgZ(17,"tbody"),l.YNc(18,wt,7,3,"tr",44),l.qZA()()()()()),2&x){const I=l.oxw(2);l.xp6(6),l.hij("",I.validationErrors.length," issues"),l.xp6(12),l.Q6J("ngForOf",I.validationErrors)}}function Vt(x,A){if(1&x){const I=l.EpF();l.TgZ(0,"div",29)(1,"h5",30),l._uU(2,"Validation Issues"),l.qZA(),l.TgZ(3,"button",31),l.NdJ("click",function(){const h=l.CHM(I).$implicit;return l.KtG(h.dismiss())}),l.qZA()(),l.TgZ(4,"div",32),l.YNc(5,Rt,2,1,"div",33),l.YNc(6,St,19,2,"div",34),l.qZA(),l.TgZ(7,"div",35)(8,"button",36),l.NdJ("click",function(){const h=l.CHM(I).$implicit;return l.KtG(h.dismiss())}),l._uU(9,"Close"),l.qZA()()}if(2&x){const I=l.oxw();l.xp6(5),l.Q6J("ngIf",I.error),l.xp6(1),l.Q6J("ngIf",I.validationErrors.length>0)}}const Nt=function(){return["rdt_xlsx","parameter_xlsx"]};let Tt=(()=>{var x;class A{onEditComplete(a){console.log("Edited row:",a.data)}constructor(a,i,h,d,u,f,p,o,s,r,V,m,t){(0,T.Z)(this,"fb",void 0),(0,T.Z)(this,"toast",void 0),(0,T.Z)(this,"api",void 0),(0,T.Z)(this,"getReadingDeviceType",void 0),(0,T.Z)(this,"router",void 0),(0,T.Z)(this,"rdtConfig",void 0),(0,T.Z)(this,"locationPermissionService",void 0),(0,T.Z)(this,"DynamicApi",void 0),(0,T.Z)(this,"spinner",void 0),(0,T.Z)(this,"excelValidator",void 0),(0,T.Z)(this,"modalService",void 0),(0,T.Z)(this,"excelParameterValidator",void 0),(0,T.Z)(this,"cd",void 0),(0,T.Z)(this,"columnDefs",[]),(0,T.Z)(this,"rowData",[]),(0,T.Z)(this,"fileUpload",void 0),(0,T.Z)(this,"createRDTXlsx",void 0),(0,T.Z)(this,"finalWorksheet",void 0),(0,T.Z)(this,"previewData",[[],[]]),(0,T.Z)(this,"RDT_Id",void 0),(0,T.Z)(this,"grid",void 0),(0,T.Z)(this,"multiRDT",[]),(0,T.Z)(this,"userClientIDCognito",void 0),(0,T.Z)(this,"specific_RDT",void 0),(0,T.Z)(this,"tempMultiData",[]),(0,T.Z)(this,"ADD_finalData",{}),(0,T.Z)(this,"renameKeys",[]),(0,T.Z)(this,"SK_clientID",""),(0,T.Z)(this,"uniqueRDTList",[]),(0,T.Z)(this,"data_temp",[]),(0,T.Z)(this,"parameterAllDetails",{}),(0,T.Z)(this,"virtualparameterAllDetails",{}),(0,T.Z)(this,"tempMultiParams",[]),(0,T.Z)(this,"temp_Schedule_type",""),(0,T.Z)(this,"temp_mxc",""),(0,T.Z)(this,"temp_enable_Alerts",""),(0,T.Z)(this,"temp_Parameter_view",""),(0,T.Z)(this,"allPermissions_user",void 0),(0,T.Z)(this,"hideUpdateButton",!1),(0,T.Z)(this,"hideGetButton",!1),(0,T.Z)(this,"container",void 0),(0,T.Z)(this,"maxlength",500),(0,T.Z)(this,"clientID",void 0),(0,T.Z)(this,"lookup_data_temp1",[]),(0,T.Z)(this,"All_Devices_Configuration",[]),(0,T.Z)(this,"username",void 0),(0,T.Z)(this,"showAlldevice",!1),(0,T.Z)(this,"locationTree",void 0),(0,T.Z)(this,"filteredDevices",[]),(0,T.Z)(this,"lookup_data_user",[]),(0,T.Z)(this,"error",void 0),(0,T.Z)(this,"validationErrors",[]),(0,T.Z)(this,"selectedFile",void 0),(0,T.Z)(this,"savedFileEvent",void 0),(0,T.Z)(this,"uniqueRDTLabels",[]),(0,T.Z)(this,"validExcelData",void 0),(0,T.Z)(this,"allRDTDetails",void 0),(0,T.Z)(this,"color_dict",{Red:"#ff0000","Dark Blue":"#133E87",Blue:"#0000ff","Dark Purple":"#3B1E54",Yellow:"#F9E400",Green:"#0D4715"}),(0,T.Z)(this,"fileName",""),(0,T.Z)(this,"tabulator",void 0),(0,T.Z)(this,"currentPage",0),(0,T.Z)(this,"pageSize",50),(0,T.Z)(this,"tabContainer",void 0),(0,T.Z)(this,"pagedPreviewData",[]),(0,T.Z)(this,"totalPages",void 0),this.fb=a,this.toast=i,this.api=h,this.getReadingDeviceType=d,this.router=u,this.rdtConfig=f,this.locationPermissionService=p,this.DynamicApi=o,this.spinner=s,this.excelValidator=r,this.modalService=V,this.excelParameterValidator=m,this.cd=t}ngOnInit(){var a=this;return(0,Z.Z)(function*(){a.uniqueRDTList=[],a.uniqueRDTLabels=[],a.initializeRDTxlsxFields(),a.userClientIDCognito=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("userAttributes")))),a.SK_clientID=a.userClientIDCognito.attributes["custom:clientID"],a.clientID=a.userClientIDCognito.attributes["custom:clientID"]+"#rdt",a.username=a.userClientIDCognito.attributes["custom:username"],a.allPermissions_user=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("permissionDetails")))),yield a.getuserConfiguration(),yield a.fetchRDTList(1),a.checkPermission(),yield a.getLocationConfiguration(),yield a.fetchDeviceLookup(1)})()}fetchDeviceLookup(a){var i=this;return(0,Z.Z)(function*(){console.log("Iam called Bro");try{const h=yield i.api.GetLookupMasterTable(i.SK_clientID+"#device",a);if(h&&h.items)if("string"==typeof h.items){let d=JSON.parse(h.items);if(console.log("d1 =",d),Array.isArray(d)){for(let u=0;u<d.length;u++){const f=d[u];if(null==f)break;{const p=Object.keys(f)[0],{P1:o,P2:s,P3:r,P4:V,P5:m,P6:t,P7:D,P8:e}=f[p];i.lookup_data_user.push({P1:o,P2:s,P3:r,P4:V,P5:m,P6:t,P7:D,P8:e})}}i.lookup_data_user.sort((u,f)=>f.P5-u.P5),console.log("Lookup sorting",i.lookup_data_user),yield i.fetchDeviceLookup(a+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else console.log(),console.log("Devices from the Lookup to be displayed",i.lookup_data_user),i.filteredDevices=i.lookup_data_user.filter(d=>i.locationTree&&1==i.locationTree.includes(d.P1)),i.filteredDevices=Array.from(new Set(i.filteredDevices.map(d=>d.P3))),console.log("Filtered RDT are here ",i.filteredDevices)}catch(h){console.error("Error:",h)}})()}getuserConfiguration(){var a=this;return(0,Z.Z)(function*(){console.log("We will get the user configuration now ",a.username);try{const i=yield a.api.GetUserManagement(a.username,a.SK_clientID);i&&(console.log("Fetched user is here",i),Array.isArray(i.device_permission)&&1==i.device_permission.length&&"All"==i.device_permission[0]&&1==i.device_permission.length&&i.location_permission&&"All"==i.location_permission[0]&&i.device_type_permission&&"All"==i.device_type_permission[0]&&(a.showAlldevice=!0))}catch(i){console.log("Error fetching user Configuration",i)}})()}getLocationConfiguration(){var a=this;return(0,Z.Z)(function*(){try{const i=yield a.locationPermissionService.fetchGlobalLocationTree();if(!i)throw new Error("No data returned");if(console.log("Data from location:",i),i)try{if(Array.isArray(i)){const h=i.filter(d=>"device"===d.node_type);a.locationTree=Array.from(new Set(h.map(d=>d.mn||""))),console.log("Filtered devices are here which will be shown",a.locationTree)}else console.error("Parsed tree is not an array")}catch(h){console.error("Error parsing JSON",h)}}catch(i){console.error("Error fetching location configuration",i)}})()}initializeRDTxlsxFields(){this.createRDTXlsx=this.fb.group({type:["",j.kI.required]})}checkPermission(){let a=!1,i=!1;for(let h=0;h<this.allPermissions_user.length;h++)"Reading Device Type - xlsx Update"===this.allPermissions_user[h]?(a=!0,this.hideGetButton=!0,this.hideUpdateButton=!0):"Reading Device Type - xlsx View"===this.allPermissions_user[h]&&(i=!0,this.hideGetButton=!0,this.hideUpdateButton=!1);a&&i||a||i?this.hideGetButton=!0:this.router.navigate(["/404"])}fetchRDTList(a){var i=this;return(0,Z.Z)(function*(){console.log("iam trying to fetch",i.SK_clientID);try{const h=yield i.api.GetLookupMasterTable(i.clientID,a);if(h&&h.items)if("string"==typeof h.items){let d=JSON.parse(h.items);if(console.log("d1 =",d),Array.isArray(d)){for(let u=0;u<d.length;u++){const f=d[u];if(null==f)break;{const p=Object.keys(f)[0],{P1:o,P2:s,P3:r,P4:V}=f[p];i.lookup_data_temp1.push({P1:o,P2:s,P3:r,P4:V}),console.log("d2 =",i.lookup_data_temp1)}}i.lookup_data_temp1.sort((u,f)=>f.P4-u.P4),console.log("Lookup sorting",i.lookup_data_temp1),yield i.fetchRDTList(a+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else{console.log();for(let d=0;d<i.lookup_data_temp1.length;d++)i.uniqueRDTList.push(i.lookup_data_temp1[d]?.P1),i.uniqueRDTLabels.push(i.lookup_data_temp1[d]?.P2);console.log("All the RDT are here :",i.uniqueRDTList)}}catch(h){console.error("Error:",h)}})()}exportTemplate(a){if(""==a)return void this.toast.open("Select Configuration Type","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});let i,h,d={};"rdt_xlsx"==a&&(i=[["RDT Id","RDT Label","Dashboard Update Time","Device Timeout","Schedule Type","mx+C","Alerts","Parameters View","Reserved 1","Reserved 2","Reserved 3","Reserved 4","Reserved 5"],["","","","","","","","","","","","",""]],h="Reading Device Type.xlsx",d={}),"parameter_xlsx"==a&&(i=[["RDT Id","Parameter ID","Parameter Label","Parameter Description","Decimal Point","mX+C Reading X Multiplication Factor","mX+C Reading C is Correction","Enable Schedule Parameter","Schedule Parameter Name","Schedule Parameter Label","Schedule Parameter Max Value","Schedule Parameter Value Type","Schedule Parameter Operation Type","Schedule Parameter Heat Map Type","Enable Valuemapping","No of ValueMapping","Value Mapping Label","Value Mapping Value","Value Mapping Equation","Value Mapping Class Icon","Value Mapping Label Color","Value Mapping Animation","Value Mapping Font","Value Mapping Font Size","Value Mapping Align","Enable Scaling","No of Scaling table","Scaling Table Threshold","Scaling Table Multiplication Factor","Scaling Table Unit","Reserved 1","Reserved 2","Reserved 3","Reserved 4","Reserved 5"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],h="Reading Parameters.xlsx",d={"Schedule Parameter Value Type":["Maximum","Difference","Minimum","Average","Sum","StdDevPop","StdDevSamp","Latest"],"Schedule Parameter Operation Type":["Normal","Zero Roll Over"],"Schedule Parameter Heat Map Type":["None","Disabled","Difference","Maximum"],"Value Mapping Animation":["None","bounce","flash","pulse","rubberBand","shakeX","shakeY"],"Value Mapping Font":["Normal","Bold","Italic"],"Value Mapping Align":["Left","Center","Right"],"Value Mapping Class Icon":["bi bi-speedometer2","bi bi-alarm","bi bi-bell","bi bi-calendar","bi bi-cpu"],"Value Mapping Label Color":["Red","Dark Blue","Blue","Dark Purple","Yellow","Green"]}),"virtualParameter_xlsx"==a&&(i=[["RDT Id","Virtual Parameter ID","Virtual Parameter Label","Virtual Parameter Description","Virtual Decimal Point","Virtual mX+C Reading X Multiplication Factor","Virtual mX+C Reading C is Correction","Virtual Equation","Enable Virtual Schedule Parameter","Virtual Schedule Parameter Name","Virtual Schedule Parameter Label","Virtual Schedule Parameter Max Value","Virtual Schedule Parameter Value Type","Virtual Schedule Parameter Operation Type","Virtual Schedule Parameter Heat Map Type","Enable Virtual Value Mapping","No of Virtual ValueMapping","Virtual Value Mapping Label","Virtual Value Mapping Value","Virtual Value Mapping Equation","Virtual Value Mapping Class Icon","Virtual Value Mapping Label Color","Virtual Value Mapping Animation","Virtual Value Mapping Font","Virtual Value Mapping Style Text Color","Virtual Value Mapping Font Size","Virtual Value Mapping Align","Enable Virtual Scaling Table","No of Virtual Scaling Table","Virtual Scaling Table Threshold","Virtual Scaling Table Multiplication Factor","Virtual Scaling Table Unit","Reserved 1","Reserved 2","Reserved 3","Reserved 4","Reserved 5"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],h="Reading Virtual Parameters.xlsx",d={"Virtual Schedule Parameter Value Type":["Maximum","Difference","Minimum","Average","Sum","StdDevPop","StdDevSamp","Latest"],"Virtual Schedule Parameter Operation Type":["Normal","Zero Roll Over"],"Virtual Schedule Parameter Heat Map Type":["None","Disabled","Difference","Maximum"],"Virtual Value Mapping Animation":["None","bounce","flash","pulse","rubberBand","shakeX","shakeY"],"Virtual Value Mapping Font":["Normal","Bold","Italic"],"Virtual Value Mapping Align":["Left","Center","Right"]});const u=new(it().Workbook),f=u.addWorksheet("Sheet1");f.addRows(i),f.columns=i[0].map(()=>({width:50}));const p=["RDT Id","RDT Label","Dashboard Update Time","Device Timeout","Parameter ID","Virtual Parameter ID","Decimal Point","mX+C Reading X Multiplication Factor","mX+C Reading C is Correction","Parameter Label"];i[0].forEach((o,s)=>{if(f.getCell(1,s+1).style={fill:{type:"pattern",pattern:"solid",fgColor:{argb:p.includes(o)?"FF0000":"FFA500"}},font:{bold:!0,color:{argb:"FFFFFF"}}},d[o]){const V=f.getColumn(s+1).letter;f.dataValidations.add(`${V}2:${V}1000`,{type:"list",allowBlank:!0,formulae:[`"${d[o].join(",")}"`]})}}),u.xlsx.writeBuffer().then(o=>{const s=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),r=document.createElement("a");r.href=URL.createObjectURL(s),r.download=h,r.click()}).catch(o=>{console.error("Error writing the file",o)})}onFileChange(a){const i=a.target.files?.[0];if(this.savedFileEvent=i,i&&(this.fileName=i.name),!i)return;if(!i.name.endsWith(".xlsx"))return $().fire({title:"Invalid File",text:"Only .xlsx supported",icon:"error"});const h=new FileReader;h.onload=d=>{const u=at.ij(d.target.result,{type:"binary"});this.rowData=at.P6.sheet_to_json(u.Sheets[u.SheetNames[0]],{defval:""}),this.previewData=JSON.parse(JSON.stringify(this.rowData.slice(0))),this.rowData=[...this.rowData],console.log("this.previewData is here",this.previewData);const p=Object.keys(this.rowData[0]||{}),o=[],s={"Schedule Parameter Value Type":["Maximum","Difference","Minimum","Average","Sum","StdDevPop","StdDevSamp","Latest"],"Schedule Parameter Operation Type":["Normal","Zero Roll Over"],"Schedule Parameter Heat Map Type":["None","Disabled","Difference","Maximum"],"Value Mapping Animation":["None","bounce","flash","pulse","rubberBand","shakeX","shakeY"],"Value Mapping Font":["Normal","Bold","Italic"],"Value Mapping Align":["Left","Center","Right"],"Value Mapping Class Icon":["bi bi-speedometer2","bi bi-alarm","bi bi-bell","bi bi-calendar","bi bi-cpu"],"Value Mapping Label Color":["Red","Dark Blue","Blue","Dark Purple","Yellow","Green"],"Virtual Schedule Parameter Value Type":["Maximum","Difference","Minimum","Average","Sum","StdDevPop","StdDevSamp","Latest"],"Virtual Schedule Parameter Operation Type":["Normal","Zero Roll Over"],"Virtual Schedule Parameter Heat Map Type":["None","Disabled","Difference","Maximum"],"Virtual Value Mapping Animation":["None","bounce","flash","pulse","rubberBand","shakeX","shakeY"],"Virtual Value Mapping Font":["Normal","Bold","Italic"],"Virtual Value Mapping Align":["Left","Center","Right"]},r=[{title:"S.No.",formatter:"rownum",hozAlign:"center",headerSort:!1,width:70},...p.map((m,t)=>{const D=o.includes(m),e=s[m];return{title:D?`<span style="color: red;">${m}</span>`:m,field:`field${t}`,editor:e?"list":"input",editorParams:e?{values:e}:void 0,headerSort:!0,width:180}})],V=this.rowData.map(m=>p.reduce((t,D,e)=>({...t,[`field${e}`]:m[D]}),{}));setTimeout(()=>this.initializeTabulator(V,r),100)},h.readAsBinaryString(i)}initializeTabulator(a,i){this.tabulator&&this.tabulator.destroy(),this.tabulator=new st.Ae(this.tabContainer.nativeElement,{data:a,columns:i,reactiveData:!0,layout:"fitColumns",height:"500px"}),this.tabulator.on("cellEdited",h=>{console.log("Edited:",h.getField(),"->",h.getValue())})}download(a){let i,h,d=[];if(0===this.previewData[0].length)return this.toast.open("Error: No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});"rdt_xlsx"==a&&(i=[["RDT Id","RDT Label","Dashboard Update Time","Device Timeout","Schedule Type","mx+C","Alerts","Parameters View","Reserved 1","Reserved 2","Reserved 3","Reserved 4","Reserved 5"]],h="Reading Device Type.xlsx",d={}),"parameter_xlsx"==a&&(i=[["RDT Id","Parameter ID","Parameter Label","Parameter Description","Decimal Point","mX+C Reading X Multiplication Factor","mX+C Reading C is Correction","Enable Schedule Parameter","Schedule Parameter Name","Schedule Parameter Label","Schedule Parameter Max Value","Schedule Parameter Value Type","Schedule Parameter Operation Type","Schedule Parameter Heat Map Type","Enable Valuemapping","No of ValueMapping","Value Mapping Label","Value Mapping Value","Value Mapping Equation","Value Mapping Class Icon","Value Mapping Label Color","Value Mapping Animation","Value Mapping Font","Value Mapping Font Size","Value Mapping Align","Enable Scaling","No of Scaling table","Scaling Table Threshold","Scaling Table Multiplication Factor","Scaling Table Unit","Reserved 1","Reserved 2","Reserved 3","Reserved 4","Reserved 5"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],h="Reading Parameters.xlsx",d={"Schedule Parameter Value Type":["Maximum","Difference","Minimum","Average","Sum","StdDevPop","StdDevSamp","Latest"],"Schedule Parameter Operation Type":["Normal","Zero Roll Over"],"Schedule Parameter Heat Map Type":["None","Disabled","Difference","Maximum"],"Value Mapping Animation":["None","bounce","flash","pulse","rubberBand","shakeX","shakeY"],"Value Mapping Font":["Normal","Bold","Italic"],"Value Mapping Align":["Left","Center","Right"],"Value Mapping Class Icon":["bi bi-speedometer2","bi bi-alarm","bi bi-bell","bi bi-calendar","bi bi-cpu"],"Value Mapping Label Color":["Red","Dark Blue","Blue","Dark Purple","Yellow","Green"]}),"virtualParameter_xlsx"==a&&(i=[["RDT Id","Virtual Parameter ID","Virtual Parameter Label","Virtual Parameter Description","Virtual Decimal Point","Virtual mX+C Reading X Multiplication Factor","Virtual mX+C Reading C is Correction","Virtual Equation","Enable Virtual Schedule Parameter","Virtual Schedule Parameter Name","Virtual Schedule Parameter Label","Virtual Schedule Parameter Max Value","Virtual Schedule Parameter Value Type","Virtual Schedule Parameter Operation Type","Virtual Schedule Parameter Heat Map Type","Enable Virtual Value Mapping","No of Virtual ValueMapping","Virtual Value Mapping Label","Virtual Value Mapping Value","Virtual Value Mapping Equation","Virtual Value Mapping Class Icon","Virtual Value Mapping Label Color","Virtual Value Mapping Animation","Virtual Value Mapping Font","Virtual Value Mapping Style Text Color","Virtual Value Mapping Font Size","Virtual Value Mapping Align","Enable Virtual Scaling Table","No of Virtual Scaling Table","Virtual Scaling Table Threshold","Virtual Scaling Table Multiplication Factor","Virtual Scaling Table Unit","Reserved 1","Reserved 2","Reserved 3","Reserved 4","Reserved 5"],["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]],h="Reading Virtual Parameters.xlsx",d={"Virtual Schedule Parameter Value Type":["Maximum","Difference","Minimum","Average","Sum","StdDevPop","StdDevSamp","Latest"],"Virtual Schedule Parameter Operation Type":["Normal","Zero Roll Over"],"Virtual Schedule Parameter Heat Map Type":["None","Disabled","Difference","Maximum"],"Virtual Value Mapping Animation":["None","bounce","flash","pulse","rubberBand","shakeX","shakeY"],"Virtual Value Mapping Font":["Normal","Bold","Italic"],"Virtual Value Mapping Align":["Left","Center","Right"]});const u=new(it().Workbook),f=u.addWorksheet("Sheet1");f.addRow(i[0]);const p=["RDT Id","RDT Label","Dashboard Update Time","Device Timeout","Parameter ID","Virtual Parameter ID","Decimal Point","mX+C Reading X Multiplication Factor","mX+C Reading C is Correction","Parameter Label"];i[0].forEach((s,r)=>{if(f.getCell(1,r+1).style=p.includes(s)?{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF0000"}},font:{bold:!0,color:{argb:"FFFFFF"}}}:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFA500"}},font:{bold:!0,color:{argb:"FFFFFF"}}},d[s]){const m=f.getColumn(r+1).letter;f.dataValidations.add(`${m}2:${m}1000`,{type:"list",allowBlank:!0,formulae:[`"${d[s].join(",")}"`]})}}),(this.previewData&&JSON.parse(JSON.stringify(this.previewData))).splice(1).forEach(s=>{f.addRow(s)}),f.columns=i[0].map(()=>({width:20})),u.xlsx.writeBuffer().then(s=>{const r=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),V=document.createElement("a");V.href=URL.createObjectURL(r),V.download=h,V.click()})}renderPreviewData(){if(!this.previewData||0===this.previewData.length)return;const i=[{title:"S.No.",formatter:"rownum",hozAlign:"center",headerSort:!1,width:70},...this.previewData[0].map((d,u)=>({title:d,field:`field${u}`,editor:"input",headerSort:!0,width:150}))],h=this.previewData.slice(1).map(d=>{const u={};return d.forEach((f,p)=>{u[`field${p}`]=f}),u});this.initializeTabulator(h,i)}fetchLoggedInClientRDT(a){const i=this.tabulator.getColumns().filter(u=>u.getField()),h=i.map(u=>u.getDefinition().title),d=this.tabulator.getData().map(u=>i.map(f=>u[f.getField()]));if(this.previewData=[h,...d],console.log("Preview Data with Headers:",this.previewData),this.grid||(this.grid={}),this.grid.data=this.previewData,this.validationErrors=[],0===this.previewData[0].length)return this.toast.open(" Error :No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if("rdt_xlsx"==a){for(let u=1;u<this.grid.data.length;u++)if(this.grid.data[u]&&this.grid.data[u][0]&&this.grid.data[u][0].trim().length>=2){for(let f=0;f<this.uniqueRDTList.length&&this.grid.data[u][0].trim()!==this.uniqueRDTList[f];f++)f==this.uniqueRDTList.length-1&&this.validationErrors.push({row:u+1,column:"RDT Id",columnLetter:"A",value:this.grid.data[u][0],error:"RDT ID does not exists"});this.multiRDT.push(this.grid.data[u][0].trim())}else(null==this.grid.data[u][0]||null==this.grid.data[u][0]||""==this.grid.data[u][0])&&this.validationErrors.push({row:u+1,column:"RDT Id",columnLetter:"A",value:"undefined value",error:"RDT ID should not be empty"});if(this.validationErrors.length>0)return this.validationErrors=this.excelValidator.formatValidationErrors(this.validationErrors),void this.openFileUploadModal(this.fileUpload)}if("parameter_xlsx"==a){this.multiRDT=[];for(let u=1;u<this.grid.data.length;u++){if(this.grid.data[u]&&this.grid.data[u][0]&&this.grid.data[u][0].trim().length>=2){for(let f=0;f<this.uniqueRDTList.length&&this.grid.data[u][0].trim()!==this.uniqueRDTList[f];f++)f==this.uniqueRDTList.length-1&&this.validationErrors.push({row:u+1,column:"RDT Id",columnLetter:"A",value:this.grid.data[u][0],error:"RDT ID does not exists"});this.multiRDT.push(this.grid.data[u][0].trim())}else(null==this.grid.data[u][0]||null==this.grid.data[u][0]||""==this.grid.data[u][0])&&this.validationErrors.push({row:u+1,column:"RDT Id",columnLetter:"A",value:"undefined value",error:"RDT ID should not be empty"});if(this.validationErrors.length>0)return this.validationErrors=this.excelValidator.formatValidationErrors(this.validationErrors),void this.openFileUploadModal(this.fileUpload)}}if("virtualParameter_xlsx"==a){this.multiRDT=[];for(let u=1;u<this.grid.data.length;u++)if(this.grid.data[u]&&this.grid.data[u][0]&&this.grid.data[u][0].trim().length>=2){for(let f=0;f<this.uniqueRDTList.length&&this.grid.data[u][0].trim()!==this.uniqueRDTList[f];f++)if(f==this.uniqueRDTList.length-1)return void this.toast.open("Column:A  Row: "+u+" RDT ID not exists","Add Already added RDT ID",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});this.multiRDT.push(this.grid.data[u][0].trim())}else if(null==this.grid.data[u][0]||null==this.grid.data[u][0]||""==this.grid.data[u][0])return this.toast.open("Column:A  Row: "+u+" RDT ID should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(0==this.multiRDT.length)return this.toast.open("Column:A  Row: 1 Add RDT ID","RDT ID should not be empty",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(console.log("RDT to be added are here ",this.multiRDT),!this.showAlldevice&&this.multiRDT)for(let u of this.multiRDT)if(0==this.filteredDevices.includes(u))return $().fire({title:`${u} Reading Device Type not found or you Don't have permission to access this RDT`});this.spinner.show(),this.getDeviceBatch().then(u=>{let f={items:[]};if(u.forEach(o=>{f.items.push(o.others)}),console.log("All the RDT configurations are :",f),this.spinner.hide(),0==f.items?.length)return this.spinner.hide(),this.toast.open("No RDT found","Check other RDT",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(f&&f.items&&f.items.length>0){if(console.log("RDT value.items",f.items.length),"rdt_xlsx"==a){this.specific_RDT=f.items,console.log("Values are here ",f.items),delete this.specific_RDT[0].__typename;for(let o=0;o<f.items.length;o++)this.grid.data[o+1][0]=f.items[o]?.reading_device_type_id,this.grid.data[o+1][1]=f.items[o]?.rdtLabel,this.grid.data[o+1][2]=f.items[o]?.updateTime,this.grid.data[o+1][3]=f.items[o]?.deviceTimeout,this.grid.data[o+1][4]=f.items[o]?.schedule_type,this.grid.data[o+1][5]=f.items[o]?.mxC,this.grid.data[o+1][6]=f.items[o]?.alerts,this.grid.data[o+1][7]=f.items[o]?.parameters_view;if(this.grid.data=this.grid.data,this.previewData=this.grid.data,this.renderPreviewData(),this.currentPage=0,this.grid.data)return this.toast.open("RDT Fetched","Check",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if("parameter_xlsx"==a){this.specific_RDT=f.items;let o=[],s=[],r=[];console.log("All the parameters are here ",this.specific_RDT);for(let V=0;V<this.specific_RDT.length;V++){if("string"==typeof this.specific_RDT[V].parameters)try{r=JSON.parse(this.specific_RDT[V].parameters),console.log("All the parameters are here ",r)}catch(m){console.error("Error parsing JSON:",m)}else{if("object"!=typeof this.specific_RDT[V].parameters){$().fire({title:"No Reading Device Type Parameters Found"});continue}r=this.specific_RDT[V].parameters}if(0==r.length)this.toast.open("No Parameters found for this device "+this.specific_RDT[V].PK,"Check other device",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});else{for(let m=0;m<r.length;m++)o.push({PK:this.specific_RDT[V].PK,parameterID:r[m].parameterID,parameterLabel:r[m].parameterLabel,parameterDescription:r[m].parameterDescription,decimalpoint:r[m].decimalpoint,mX_C_X_Multiplication_Factor:r[m].mX_C_X_Multiplication_Factor,mX_C_C_Correction_Factor:r[m].mX_C_C_Correction_Factor,schedule_parameter:r[m].schedule_parameter,schedule_parameter_name:r[m].schedule_parameter_name,schedule_parameter_label:r[m].schedule_parameter_label,schedule_max:r[m].schedule_max,schedule_value_type:r[m].schedule_value_type,schedule_operation_type:r[m].schedule_operation_type,schedule_heatmap_type:r[m].schedule_heatmap_type,value_mapping:r[m].value_mapping,valuemapping:r[m].valuemapping,scaling_table:r[m].scaling_table,scalingtable:r[m].scalingtable});if(console.log("tempObject",o),0==V){s.push([]);for(let m=0;m<this.grid.data[0].length;m++)s[0].push(this.grid.data[0][m])}for(let m=0;m<o.length;m++){s.push([]);for(let D=0;D<this.grid.data[0].length;D++)s[s.length-1].push("");let t=s.length-1;if(s[t][0]=o[m].PK,s[t][1]=o[m].parameterID,s[t][2]=o[m].parameterLabel,s[t][3]=o[m].parameterDescription,s[t][4]=o[m].decimalpoint,s[t][5]=o[m].mX_C_X_Multiplication_Factor,s[t][6]=o[m].mX_C_C_Correction_Factor,s[t][7]=o[m].schedule_parameter,s[t][8]=o[m].schedule_parameter_name,s[t][9]=o[m].schedule_parameter_label,s[t][10]=o[m].schedule_max,s[t][11]=o[m].schedule_value_type,s[t][12]=o[m].schedule_operation_type,s[t][13]=o[m].schedule_heatmap_type,s[t][14]=o[m].value_mapping,s[t][25]=o[m].scaling_table,r[m]&&r[m].valuemapping){let D=r[m].valuemapping;if(console.log("temp value mapping",D),0==D.length||(s[t][15]=D.length),D.length>=1){let e=[],y=[],c=[],n=[],_=[],v=[],w=[],R=[],S=[],k=[];for(let N=0;N<D.length;N++)e[N]=D[N].vm_label,y[N]=D[N].vm_value,c[N]=D[N].vm_equation,n[N]=D[N].vm_icon,_[N]=D[N].vm_label_color,v[N]=D[N].vm_animation,w[N]=D[N].vm_font,R[N]=D[N].vm_text_color,S[N]=D[N].vm_font_size,k[N]=D[N].vm_align_type;s[t][16]=e.toString(),s[t][17]=y.toString(),s[t][18]=c.toString(),s[t][19]=n.toString(),s[t][20]=R.toString(),s[t][21]=v.toString(),s[t][22]=w.toString(),s[t][23]=S.toString(),s[t][24]=k.toString()}}if(r[m]&&r[m].scalingtable&&(1==r[m].scaling_table||"true"==r[m].scaling_table)){console.log("Parameter value is here ",typeof r[m].scaling_table);var p=r[m].scalingtable;if(console.log("Scaling values are here ",p),0==p.length||console.log("Iam executed bro"),s[t][26]=p.length,p.length>=1){let D=[],e=[],y=[];for(let c=0;c<p.length;c++)console.log("Iam in for loop "),p&&(console.log("iam executed in block if ",p[c].scale_threshold),D[c]=p[c].scale_threshold,e[c]=p[c].sc_multiply,y[c]=p[c].sc_unit);console.log("Scaling thesold is here ",D),s[t][27]=D.toString(),s[t][28]=e.toString(),s[t][29]=y.toString()}}}o=[]}}if(this.grid.data=s,this.previewData=s,this.renderPreviewData(),this.currentPage=0,this.grid.data)return this.toast.open("RDT Parameters Fetched","Check",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if("virtualParameter_xlsx"==a){this.specific_RDT=f.items;let o=[],s=[],r=[];console.log("virtual parametere",o);for(let V=0;V<this.specific_RDT.length;V++){if("string"==typeof this.specific_RDT[V].virtual_parameters)try{o=JSON.parse(this.specific_RDT[V].virtual_parameters)}catch(m){console.error("Error parsing JSON for virtual_parameters:",m)}else{if("object"!=typeof this.specific_RDT[V].virtual_parameters)return void $().fire({title:"No Reading Device Type Parameters Found"});o=this.specific_RDT[V].virtual_parameters}if(0==o.length)this.toast.open("No Virtual Parameters found for this device "+this.specific_RDT[V].PK,"Check other device",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});else{console.log("virtualparameterData",o);for(let m=0;m<o.length;m++)s.push({PK:this.specific_RDT[V].PK,v_parameterID:o[m].v_parameterID,v_parameterLabel:o[m].v_parameterLabel,v_parameterDescription:o[m].v_parameterDescription,v_decimalPoint:o[m].v_decimalPoint,v_mX_C_X_Multiplication_Factor:o[m].v_mX_C_X_Multiplication_Factor,v_mX_C_C_Correction_Factor:o[m].v_mX_C_C_Correction_Factor,virtual_equation_textarea:o[m].virtual_equation_textarea,v_schedule_parameter:o[m].v_schedule_parameter,v_schedule_parameter_name:o[m].v_schedule_parameter_name,v_schedule_parameter_label:o[m].v_schedule_parameter_label,v_schedule_max:o[m].v_schedule_max,v_schedule_value_type:o[m].v_schedule_value_type,v_schedule_operation_type:o[m].v_schedule_operation_type,v_schedule_heatmap_type:o[m].v_schedule_heatmap_type,v_valuemappingBoolean:o[m].v_valuemappingBoolean,valuemapping:o[m].v_value_mapping,v_scalingtableBoolean:o[m].v_scalingtableBoolean,scalingtable:o[m].v_scaling_table});if(0==V){r.push([]);for(let m=0;m<this.grid.data[0].length;m++)r[0].push(this.grid.data[0][m])}for(let m=0;m<s.length;m++){r.push([]);for(let D=0;D<this.grid.data[0].length;D++)r[r.length-1].push("");let t=r.length-1;if(r[t][0]=s[m].PK,r[t][1]=s[m].v_parameterID,r[t][2]=s[m].v_parameterLabel,r[t][3]=s[m].v_parameterDescription,r[t][4]=s[m].v_decimalPoint,r[t][5]=s[m].v_mX_C_X_Multiplication_Factor,r[t][6]=s[m].v_mX_C_C_Correction_Factor,r[t][7]=s[m].virtual_equation_textarea,r[t][8]=s[m].v_schedule_parameter,r[t][9]=s[m].v_schedule_parameter_name,r[t][10]=s[m].v_schedule_parameter_label,r[t][11]=s[m].v_schedule_max,r[t][12]=s[m].v_schedule_value_type,r[t][13]=s[m].v_schedule_operation_type,r[t][14]=s[m].v_schedule_heatmap_type,r[t][15]=s[m].v_valuemappingBoolean,r[t][27]=s[m].v_scalingtableBoolean,console.log("Value mapping is ",r[t][15]),o[m]&&o[m].v_value_mapping&&r[t][15]&&"true"==r[t][15]){let D=o[m].v_value_mapping;if(r[t][16]=0==D.length?0:D.length,D.length>=1){let e=[],y=[],c=[],n=[],_=[],v=[],w=[],R=[],S=[],k=[];for(let N=0;N<D.length;N++)e[N]=D[N].v_vm_label,y[N]=D[N].v_vm_value,c[N]=D[N].v_vm_equation,n[N]=D[N].v_vm_icon,_[N]=D[N].v_vm_label_color,v[N]=D[N].v_vm_animation,w[N]=D[N].v_vm_font,R[N]=D[N].v_vm_text_color,S[N]=D[N].v_vm_font_size,k[N]=D[N].v_vm_align_type;console.log("Value mapping array is here ",e),r[t][17]=e.toString(),r[t][18]=y.toString(),r[t][19]=c.toString(),r[t][20]=n.toString(),r[t][21]=_.toString(),r[t][22]=v.toString(),r[t][23]=w.toString(),r[t][24]=R.toString(),r[t][25]=S.toString(),r[t][26]=k.toString()}}if(o[m]&&o[m].v_scaling_table&&r[t][27]&&"true"==r[t][27]){let D=o[m].v_scaling_table;if(r[t][28]=D.length,D.length>=1){let e=[],y=[],c=[];for(let n=0;n<D.length;n++)e[n]=D[n].v_scale_threshold,y[n]=D[n].v_sc_multiply,c[n]=D[n].v_sc_unit;r[t][29]=e.toString(),r[t][30]=y.toString(),r[t][31]=c.toString()}}}s=[]}}if(this.grid.data=r,this.previewData=r,this.currentPage=0,this.renderPreviewData(),this.grid.data)return this.toast.open("RDT Virtual Parameters Fetched","Check",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}).catch(u=>{console.log("No RDT found",u)})}getDeviceBatch(){return new Promise((a,i)=>{let h=[...this.multiRDT];const d=new Set,f={type:"batchGet",table_name:"reading_device_type",keys:h.map(p=>d.has(p)?(console.warn(`Duplicate PK found: ${p}`),null):(d.add(p),{PK:p,SK:this.SK_clientID})).filter(p=>null!==p)};this.All_Devices_Configuration=[],this.rdtConfig.postData(f).subscribe({next:p=>{let o=p;for(let s=0;s<o.length;s++)this.All_Devices_Configuration.push({device:o[s].PK,others:o[s],rdt:o[s].reading_device_type});console.log("Batch devices are ",this.All_Devices_Configuration),a(this.All_Devices_Configuration)},error:p=>{console.error("Error rdt Batch:",p),i(p)}})})}HelpherforUpdate(a){var i=this;try{this.api.GetReadingDeviceType(this.tempMultiParams[0].PK,this.SK_clientID).then(function(){var h=(0,Z.Z)(function*(d){d?(console.log("Data that is being coming from db",d),"parameter_xlsx"==a?i.sendMultipleRDTParamsDB(0,d):"virtualParameter_xlsx"==a&&i.sendMultipleRDTVirtualParamsDB(0,d)):console.error("cant fectch details :")});return function(d){return h.apply(this,arguments)}}())}catch(h){console.log("Cannot fetch Details :",h)}}onFileSelected(a,i){const h=this.savedFileEvent,d=this.tabulator.getColumns().filter(p=>p.getField()),u=d.map(p=>p.getDefinition().title),f=this.tabulator.getData().map(p=>d.map(o=>p[o.getField()]));this.previewData=[u,...f],console.log("Preview Data with Headers:",this.previewData),this.handleFile(h,i,a)}handleFile(a,i,h){var d=this;return(0,Z.Z)(function*(){let u=!1,f=!1;if("add"!==i?(u=!0,"parameter_xlsx"!=h?f=!0:yield $().fire({position:"center",title:"Parameters will be added/updated",html:'<div style="text-align: justify;">Non-existing Parameter will result in the creation of a new Parameter, and any existing Parameter will be updated.</div>',icon:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"Continue"}).then(p=>{p.dismiss!==$().DismissReason.cancel&&(f=!0)})):"parameter_xlsx"!=h?f=!0:yield $().fire({position:"center",title:"Parameters will be replaced",html:'<div style="text-align: justify;">All the Excel Parameters will be replacing the existing parameters.</div>',icon:"warning",allowOutsideClick:!1,showCancelButton:!0,confirmButtonText:"Continue"}).then(p=>{p.dismiss!==$().DismissReason.cancel&&(f=!0)}),console.log("Confirm flag is here ",f),f){if(console.log("Target file is here ",a),d.error="",d.validationErrors=[],!a.name.toLowerCase().endsWith(".xlsx"))return void(d.error="Please select an XLSX file");if(a.size>5242880)return void(d.error="File size must be less than 5MB");d.selectedFile=a;try{let p={};if(p="parameter_xlsx"==h?yield d.excelParameterValidator.validateExcelFile(d.previewData,d.uniqueRDTList,d.uniqueRDTLabels,u,d.SK_clientID,[]):yield d.excelValidator.validateExcelFile(d.previewData,d.uniqueRDTList,d.uniqueRDTLabels,u,d.SK_clientID,d.lookup_data_temp1),p.isValid){if(d.validExcelData=p,!d.selectedFile||d.validationErrors.length>0)return;try{const o=d.validExcelData.createRows,s=d.validExcelData.updateRows;if(d.spinner.show(),o&&Array.isArray(o)&&o.length>0&&!u&&"parameter_xlsx"!=h)for(let r of o)yield d.createNewRDT(r);if(s&&Array.isArray(s)&&s.length>0&&u&&"parameter_xlsx"!=h){console.log("Update operation is called ");for(let r of s)yield d.updateRDT(r)}o&&Array.isArray(o)&&o.length>0&&!u&&"parameter_xlsx"==h&&(yield d.createParameterRDT(o,"add")),s&&Array.isArray(s)&&s.length>0&&u&&"parameter_xlsx"==h&&(yield d.createParameterRDT(s,"update"),console.log("Update operation will be performed for RDT paramters")),console.log("Data to be added/update is here ",o),u||"parameter_xlsx"==h?u&&"parameter_xlsx"!=h?$().fire({icon:"success",title:`${s.length} ${s.length>1?"RDTs updated Successfully":"RDT updated Successfully"}`,showConfirmButton:!0}):u&&"parameter_xlsx"==h?$().fire({icon:"success",title:`${s.length} ${s.length>1?"Reading Parameters updated Successfully":"Reading Parameter updated Successfully"}`,showConfirmButton:!0}):$().fire({icon:"success",title:`${o.length} ${o.length>1?"Reading Parameters added Successfully":"Reading Parameter added Successfully"}`,showConfirmButton:!0}):$().fire({icon:"success",title:`${o.length} ${o.length>1?"RDTs added Successfully":"RDT added Successfully"}`,showConfirmButton:!0})}catch(o){d.error="Error uploading file. Please try again."}finally{d.spinner.hide()}}else d.validationErrors="parameter_xlsx"==h?d.excelParameterValidator.formatValidationErrors(p.errors):d.excelValidator.formatValidationErrors(p.errors),d.openFileUploadModal(d.fileUpload)}catch(p){console.log("Error message is here ",p),d.error=p.message||"Error validating file",d.selectedFile=null}}})()}createParameterRDT(a,i){var h=this;return(0,Z.Z)(function*(){try{console.log("User Details are here ",a);const d=a.reduce((o,s)=>{const r=s[0]?.trim();return o[r]||(o[r]=[]),o[r].push(s),o},{});console.log("Grouped data is here ",d);const u=o=>"string"==typeof o?o.split(","):[o],f=(o,s)=>{const r=u(o[16]),V=u(o[17]),m=u(o[18]),t=u(o[19]),D=u(o[20]),e=u(o[21]),y=u(o[22]),c=u(o[23]),n=u(o[24]),_=[];for(let v=0;v<s;v++)_.push({vm_label:h.getSafeValue(r[v]),vm_value:parseInt(h.getSafeValue(V[v]))||0,vm_equation:h.getSafeValue(m[v]),vm_icon:h.getSafeValue(t[v]),vm_text_color:(()=>{const w=h.getSafeValue(D[v]);return h.color_dict[w]||w||""})(),vm_animation:h.getSafeValue(e[v]),vm_font:h.getSafeValue(y[v]),vm_font_size:h.getSafeValue(c[v]),vm_align_type:h.getSafeValue(n[v])});return _},p=(o,s)=>{const r=u(o[27]),V=u(o[28]),m=u(o[29]),t=[];for(let D=0;D<s;D++)t.push({scale_threshold:h.getSafeValue(r[D]),sc_multiply:h.getSafeValue(V[D]),sc_unit:h.getSafeValue(m[D])});return t};for(const o of Object.keys(d)){const s=[];for(const r of d[o]){let V=[],m=[];if(1==r[14]||"true"===r[14]){console.log("Element 14 is here ",r[14]);const t=isNaN(r[15])?0:parseFloat(r[15]);0!==t&&(V=f(r,t))}if(1==r[25]||"true"===r[25]){const t=isNaN(r[26])?0:parseFloat(r[26]);0!==t&&(m=p(r,t))}s.push({parameterID:r[1].trim()||"",parameterLabel:r[2].trim()||"",parameterDescription:r[3]||"",decimalpoint:isNaN(r[4])?0:parseInt(r[4]),mX_C_X_Multiplication_Factor:isNaN(r[5])?0:parseFloat(r[5]),mX_C_C_Correction_Factor:isNaN(r[6])?0:parseFloat(r[6]),schedule_parameter:!!r[7]&&("string"!=typeof r[7]||"true"!==r[7]&&"false"!==r[7]?r[7]:JSON.parse(r[7])),schedule_parameter_name:r[8]||"",schedule_parameter_label:r[9]||"",schedule_max:isNaN(r[10])?null:parseFloat(r[10]),schedule_value_type:r[11]||"",schedule_operation_type:r[12]||"",schedule_heatmap_type:r[13]||"",value_mapping:!!r[14]&&("string"!=typeof r[14]||"true"!==r[14]&&"false"!==r[14]?r[14]:JSON.parse(r[14])),valuemapping:V,scaling_table:!!r[25]&&("string"!=typeof r[25]||"true"!==r[25]&&"false"!==r[25]?r[25]:JSON.parse(r[25])),scalingtable:m})}d[o]=s}if(console.log("Grouped data after parameters is being added ",d),"update"===i)for(const o of Object.keys(d))try{const s=yield h.api.GetReadingDeviceType(o,h.SK_clientID);if(s&&s.parameters){const r=JSON.parse(s.parameters);if(r&&Array.isArray(r)){for(const n of d[o]){const _=r.findIndex(v=>v.parameterID===n.parameterID);-1!==_?r[_]=n:r.push(n)}console.log("DB parameters are here to be updated ",r);let V="";h.allRDTDetails={PK:o,SK:h.SK_clientID,parameters:JSON.stringify(r),reading_device_type_id:o,updated:new Date};let t="";t=1===r.length?r[0].parameterID:r.length>1?r[0].parameterID+"...("+r.length+")":"...(0)",V=h.lookup_data_temp1.find(n=>n.P1===h.allRDTDetails.PK)?.P2||"";const e=Math.ceil((new Date).getTime()/1e3),y={P1:h.allRDTDetails.PK,P2:V,P3:t,P4:e};console.log("RDT details are here ",h.allRDTDetails),console.log("Lookup items are here ",y),(yield h.api.UpdateReadingDeviceType(h.allRDTDetails))&&(yield h.fetchTimeMachineById(1,y.P1,"update",y))}}}catch(s){console.log("Error getting Reading device Type ",s)}else for(const o of Object.keys(d)){let s="";h.allRDTDetails={PK:o,SK:h.SK_clientID,parameters:JSON.stringify(d[o]),reading_device_type_id:o,updated:new Date};const r=d[o];let V="";V=1===r.length?r[0].parameterID:r.length>1?r[0].parameterID+"...("+r.length+")":"...(0)",s=h.lookup_data_temp1.find(y=>y.P1===h.allRDTDetails.PK)?.P2||"";const t=Math.ceil((new Date).getTime()/1e3),D={P1:h.allRDTDetails.PK,P2:s,P3:V,P4:t};console.log("RDT details are here ",h.allRDTDetails),console.log("Lookup items are here ",D),(yield h.api.UpdateReadingDeviceType(h.allRDTDetails))&&(yield h.fetchTimeMachineById(1,D.P1,"update",D))}}catch(d){console.log("Error in object Creation ",d)}})()}getSafeValue(a){return null==a?"":"string"==typeof a?a.trim():a}updateRDT(a){var i=this;return(0,Z.Z)(function*(){try{console.log("User Details are here ",a),i.allRDTDetails={},i.allRDTDetails={PK:a[0].trim(),SK:i.SK_clientID,rdtLabel:a[1].trim(),schedule_type:a[4],reading_device_type_id:a[0].trim(),updateTime:a[2],deviceTimeout:a[3],mxC:a[5],alerts:a[6],parameters_view:a[7],updated:new Date};let d="...(0)";try{d=i.lookup_data_temp1.find(o=>o.P1==i.allRDTDetails.PK).P3,console.log("Temp Paramter is here bro ",d)}catch(o){console.log("Error in filtering the lookup of rdt get the specific record",o)}const u=Math.ceil((new Date).getTime()/1e3),f={P1:i.allRDTDetails.PK,P2:i.allRDTDetails.rdtLabel,P3:d,P4:u};console.log("RDT details are here ",i.allRDTDetails),console.log("Lookup items are here ",f),(yield i.api.UpdateReadingDeviceType(i.allRDTDetails))&&(yield i.fetchTimeMachineById(1,f.P1,"update",f))}catch(h){console.log("Error in object Creation ",h)}})()}createNewRDT(a){var i=this;return(0,Z.Z)(function*(){try{console.log("User Details are here ",a),i.allRDTDetails={},i.allRDTDetails={PK:a[0].trim(),SK:i.SK_clientID,rdtLabel:a[1].trim(),schedule_type:a[4],reading_device_type_id:a[0].trim(),updateTime:a[2],deviceTimeout:a[3],mxC:a[5],alerts:a[6],parameters_view:a[7],parameters:JSON.stringify([]),updated:new Date};const d=Math.ceil((new Date).getTime()/1e3),u={P1:i.allRDTDetails.PK,P2:i.allRDTDetails.rdtLabel,P3:"...(0)",P4:d};if(console.log("RDT details are here ",i.allRDTDetails),console.log("Lookup items are here ",u),(yield i.api.CreateReadingDeviceType(i.allRDTDetails))&&(yield i.createLookUpRdt(u,1),!i.showAlldevice)){const p={type:"rdt_permission",deviceName:u.P1,userName:i.username,clientID:i.SK_clientID};yield i.DynamicApi.sendData(p).subscribe(o=>{console.log("Response from Lambda:",o),i.toast.open("Mail Sent Successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})},o=>{console.error("Error:",o)})}}catch(h){console.log("Error in object Creation ",h)}})()}openFileUploadModal(a){this.modalService.open(a,{backdrop:"static",keyboard:!1,size:"lg",centered:!0})}createRDTConfig(a){if(0===this.previewData[0].length)return this.toast.open(" Error :No File is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if("parameter_xlsx"==a){let i=[],h="true",d="false",u="",p="",o="",s="",r="",V="",m=[];if(0===this.previewData[0].length)return this.toast.open(" Error :No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!this.grid.data||this.grid.data.length<2||""===this.grid.data[1][0]||void 0===this.grid.data[1][0])return this.toast.open("Column:A  Row: 1 RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let e=1;e<this.grid.data.length;e++)null!=this.grid.data[e][1]&&m.push(this.grid.data[e][1]);let D=(e=m).filter((y,c)=>e.indexOf(y)!=c);if(console.log("params duplicates",D),0!=D.length)return this.toast.open("Column:B  Row:  "+D+" Duplicate Parameter ID not allowed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let e=1;e<this.grid.data.length;e++)if(this.ADD_finalData={},this.grid.data[e][0]&&this.grid.data[e][0].trim().length>=2){if(null==this.grid.data[e][0]||""===this.grid.data[e][0])return this.toast.open("Column:A  Row: "+e+" RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][0].charCodeAt(0))return this.toast.open("Column:A  Row: "+e+" RDT ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let C=0;C<this.uniqueRDTList.length&&this.uniqueRDTList[C]!==this.grid.data[e][0].trim();C++)if(C==this.uniqueRDTList.length-1)return void this.toast.open("Column:A  RDT ID not exists","Add Correct RDT ID",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][1]||""===this.grid.data[e][0])return this.toast.open("Column:B  Row: "+e+" Parameter ID is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][1].charCodeAt(0))return this.toast.open("Column:B  Row: "+e+" Parameter ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][2]||""===this.grid.data[e][2])return this.toast.open("Column:C  Row: "+e+" Parameter Label is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][2].charCodeAt(0))return this.toast.open("Column:C  Row: "+e+" Parameter Label not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][3]||""===this.grid.data[e][3])return this.toast.open("Column:D  Row: "+e+" Parameter Description is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][3].charCodeAt(0))return this.toast.open("Column:D  Row: "+e+" Parameter Description not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][4]))return this.toast.open("Column:E  Row: "+e+" Decimal Point must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][4]||""===this.grid.data[e][4])return this.toast.open("Column:E  Row: "+e+" Decimal Point should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][4])))return this.toast.open("Column:E Row: "+e+" Decimal Point should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][4])<0)return this.toast.open("Column:E  Row: "+e+" Decimal Point should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][5]))return this.toast.open("Column:F  Row: "+e+" Multiplication factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][5]||""===this.grid.data[e][5])return this.toast.open("Column:F  Row: "+e+" Multiplication factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][5])<0)return this.toast.open("Column:F  Row: "+e+" Multiplication factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][6]||""===this.grid.data[e][6])return this.toast.open("Column:G  Row: "+e+" Correction factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!0===isNaN(this.grid.data[e][6]))return this.toast.open("Column:G  Row: "+e+" Correction factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][6])<0)return this.toast.open("Column:G  Row: "+e+" Correction factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(u=this.grid.data[e][7],null!=u&&""!==u){let C="";if("boolean"==typeof u?C=JSON.stringify(u).trim().toLowerCase():0==isNaN(u)||(C=u.trim().toLowerCase()),C!==h&&C!==d)return this.toast.open(u+"Column:H  Row: "+e+" Enable Schedule Parameter must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((C==h||C==d)&&(u=C),1==JSON.parse(u)){if(null==this.grid.data[e][8]||""===this.grid.data[e][8])return this.toast.open("Column:I  Row: "+e+" Schedule Parameter should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][9]||""===this.grid.data[e][9])return this.toast.open("Column:J  Row: "+e+" Schedule Parameter Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][10]))return this.toast.open("Column:K  Row: "+e+" Schedule Max value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][10]||""===this.grid.data[e][10])return this.toast.open("Column:K  Row: "+e+" Schedule Max value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][10])))return this.toast.open("Column:K Row: "+e+" Schedule Max value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][10])<0)return this.toast.open("Column:K  Row: "+e+" Schedule Max value should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][11]||""===this.grid.data[e][11])return this.toast.open("Column:L  Row: "+e+" Schedule Parameter Value type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if("Difference"===this.grid.data[e][11]||"Difference"===this.grid.data[e][11]){if(null==this.grid.data[e][12]||""===this.grid.data[e][12])return this.toast.open("Column:M  Row: "+e+" Schedule Parameter Operation type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(null==this.grid.data[e][13]||""===this.grid.data[e][13])return this.toast.open("Column:N  Row: "+e+" Schedule Parameter HeatMap type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}else u=d;if(p=this.grid.data[e][17],o=this.grid.data[e][24],null!=this.grid.data[e][14]&&""!==this.grid.data[e][14]&&1==JSON.parse(this.grid.data[e][14])){if(console.log("vlaue mapping value",p),null==this.grid.data[e][15]||""===this.grid.data[e][15])return this.toast.open("Column:P  Row: "+e+" Number of value mapping should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][15]))return this.toast.open("Column:P  Row: "+e+" No of value mapping must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][15])))return this.toast.open("Column:P Row: "+e+" No of value mapping should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][15])<0)return this.toast.open("Column:P  Row: "+e+" No of value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][16]||""===this.grid.data[e][15])return this.toast.open("Column:Q  Row: "+e+" Value mapping Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==p||""===p)return this.toast.open("Column:R  Row: "+e+" Value mapping Value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][15]){if(1===JSON.parse(this.grid.data[e][15])){if(!0===JSON.stringify(this.grid.data[e][17]).includes(","))return this.toast.open(p+" Column:R  Row: "+e+" Should be equal in length","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(p=this.grid.data[e][17],1==isNaN(p))return this.toast.open(p+" Column:R  Row: "+e+" Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(p=this.grid.data[e][17].split(","),p)for(let C=0;C<p.length;C++)if(1==isNaN(p[C]))return this.toast.open(C+" Column:R  Row: "+e+" Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(p))return this.toast.open("Column:R  Row: "+e+" Value Mapping value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(p)))return this.toast.open("Column:R Row: "+e+" Value mapping Value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(p)<0)return this.toast.open("Column:R  Row: "+e+" No of value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][15]){if(1===JSON.parse(this.grid.data[e][15])){if(o=this.grid.data[e][24],1==isNaN(o))return this.toast.open("Column:Y  Row: "+e+" Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(o=this.grid.data[e][24].split(","),o)for(let C=0;C<o.length;C++)if(1==isNaN(o[C]))return this.toast.open("Column:Y  Row: "+e+" Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(o))return this.toast.open("Column:Y  Row: "+e+" Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(o)))return this.toast.open("Column:Y Row: "+e+" Font size should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(o)<0)return this.toast.open("Column:Y  Row: "+e+" Font size should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}if(s=this.grid.data[e][28],r=this.grid.data[e][29],V=this.grid.data[e][30],null!=this.grid.data[e][26]&&""!==this.grid.data[e][26]){let C="";if("boolean"==typeof this.grid.data[e][26]?C=JSON.stringify(this.grid.data[e][26]).trim().toLowerCase():0==isNaN(this.grid.data[e][26])||(C=this.grid.data[e][26].trim().toLowerCase()),C!==h&&C!==d)return this.toast.open("Column:AA  Row: "+e+" Enable Scaling must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((C==h||C==d)&&(this.grid.data[e][26]=C),1==JSON.parse(this.grid.data[e][26])){if(null==this.grid.data[e][27]||""===this.grid.data[e][27])return this.toast.open("Column:AB  Row: "+e+" No of scaling table should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][27]))return this.toast.open("Column:AB  Row: "+e+" No of scaling table must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][27])))return this.toast.open("Column:AB Row: "+e+" No of scaling table should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][27])<0)return this.toast.open("Column:AB  Row: "+e+" No of scaling table should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==s||""===s)return this.toast.open("Column:AC  Row: "+e+" Scale threshold should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][27]){if(1===JSON.parse(this.grid.data[e][27])){if(s=this.grid.data[e][28],1==isNaN(s))return this.toast.open("Column:AC  Row: "+e+" Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(s=this.grid.data[e][28].split(","),s)for(let q=0;q<s.length;q++)if(1==isNaN(s[q]))return this.toast.open("Column:AB  Row: "+e+" Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(s))return this.toast.open("Column:AC  Row: "+e+" Scale Threhold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(s)))return this.toast.open("Column:AC Row: "+e+" Scale threshold should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(s)<0)return this.toast.open("Column:AC  Row: "+e+" Scale threshold should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(null==r||""===r)return this.toast.open("Column:AD  Row: "+e+" Multi factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][27]){if(1===JSON.parse(this.grid.data[e][27])){if(r=this.grid.data[e][29],1==isNaN(r))return this.toast.open("Column:AD  Row: "+e+" Scaling Multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(r=this.grid.data[e][29].split(","),r)for(let q=0;q<r.length;q++)if(1==isNaN(r[q]))return this.toast.open("Column:AD  Row: "+e+" Scaling multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(r))return this.toast.open("Column:AD  Row: "+e+" Multi factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(r)))return this.toast.open("Column:AD Row: "+e+" Multi factor should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(r)<0)return this.toast.open("Column:AD  Row: "+e+" Multi factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(null==V||""===V)return this.toast.open("Column:AE  Row: "+e+" Scaling Unit should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}this.ADD_finalData.PK=this.grid.data[e][0].trim(),this.ADD_finalData.SK=this.userClientIDCognito.attributes["custom:clientID"],this.ADD_finalData.parameters=[],this.renameKeys[1]="parameterID",this.renameKeys[2]="parameterLabel",this.renameKeys[3]="parameterDescription",this.renameKeys[4]="decimalpoint",this.renameKeys[5]="mX_C_X_Multiplication_Factor",this.renameKeys[6]="mX_C_C_Correction_Factor",this.renameKeys[7]="schedule_parameter",this.renameKeys[8]="schedule_parameter_name",this.renameKeys[9]="schedule_parameter_label",this.renameKeys[10]="schedule_max",this.renameKeys[11]="schedule_value_type",this.renameKeys[12]="schedule_operation_type",this.renameKeys[13]="schedule_heatmap_type",this.renameKeys[14]="value_mapping",this.renameKeys[15]="valuemapping",this.renameKeys[26]="scaling_table",this.renameKeys[27]="scalingtable";let c=[],n=[],_=15,v=1,w=1,R=[],k=[],N=[],z=[],L=[],K=[],J=[],X=[],O=[],P=[],g=27;if(null!=this.grid.data[e][15]&&""!==this.grid.data[e][15])if("string"==typeof this.grid.data[e][_+v]&&!0===this.grid.data[e][_+v].includes(",")){R=this.grid.data[e][_+v].split(","),k=null!=this.grid.data[e][_+v+2]&&""!==this.grid.data[e][_+v+2]?this.grid.data[e][_+v+2].split(","):this.grid.data[e][_+v+2],N=null!=this.grid.data[e][_+v+3]&&""!==this.grid.data[e][_+v+3]?this.grid.data[e][_+v+3].split(","):this.grid.data[e][_+v+3],z=null!=this.grid.data[e][_+v+4]&&""!==this.grid.data[e][_+v+4]?this.grid.data[e][_+v+4].split(","):this.grid.data[e][_+v+4],L=null!=this.grid.data[e][_+v+5]&&""!==this.grid.data[e][_+v+5]?this.grid.data[e][_+v+5].split(","):this.grid.data[e][_+v+5],K=null!=this.grid.data[e][_+v+6]&&""!==this.grid.data[e][_+v+6]?this.grid.data[e][_+v+6].split(","):this.grid.data[e][_+v+6],J=null!=this.grid.data[e][_+v+7]&&""!==this.grid.data[e][_+v+7]?this.grid.data[e][_+v+7].split(","):this.grid.data[e][_+v+7],O=null!=this.grid.data[e][_+v+8]&&""!==this.grid.data[e][_+v+8]?this.grid.data[e][_+v+8].split(","):this.grid.data[e][_+v+8],X=null!=this.grid.data[e][_+v+9]&&""!==this.grid.data[e][_+v+9]?this.grid.data[e][_+v+9].split(","):this.grid.data[e][_+v+9],console.log("splittedLabels",R);for(let C=0;C<this.grid.data[e][15];C++)c.push({vm_label:R[C],vm_value:p[C],vm_equation:null!==k&&""!==k&&void 0!==k?k[C]:k,vm_icon:null!==N&&""!==N&&void 0!==N?N[C]:N,vm_label_color:null!==z&&""!==z&&void 0!==z?z[C]:z,vm_animation:null!==L&&""!==L&&void 0!==L?L[C]:L,vm_font:null!==K&&""!==K&&void 0!==K?K[C]:K,vm_text_color:null!==J&&""!==J&&void 0!==J?J[C]:J,vm_font_size:null!==O&&""!==O&&void 0!==O?O[C]:O,vm_align_type:null!==X&&""!==X&&void 0!==X?X[C]:X})}else 0!=this.grid.data[e][15]&&c.push({vm_label:this.grid.data[e][_+v],vm_value:this.grid.data[e][_+v+1],vm_equation:this.grid.data[e][_+v+2],vm_icon:this.grid.data[e][_+v+3],vm_label_color:this.grid.data[e][_+v+4],vm_animation:this.grid.data[e][_+v+5],vm_font:this.grid.data[e][_+v+6],vm_text_color:this.grid.data[e][_+v+7],vm_font_size:this.grid.data[e][_+v+8],vm_align_type:this.grid.data[e][_+v+9]});else c=[];if(null!=this.grid.data[e][27]&&""!==this.grid.data[e][27])if("string"==typeof this.grid.data[e][g+w]&&!0===this.grid.data[e][g+w].includes(",")){P=this.grid.data[e][g+w+2].split(",");for(let C=0;C<this.grid.data[e][27];C++)n.push({scale_threshold:s[C],sc_multiply:r[C],sc_unit:P[C]})}else 0!=this.grid.data[e][27]&&n.push({scale_threshold:this.grid.data[e][g+w],sc_multiply:this.grid.data[e][g+w+1],sc_unit:this.grid.data[e][g+w+2]});else n=[];for(let C=0;C<this.grid.data[0].length;C++)null==this.grid.data[e][C]?this.grid.data[e][C]=null:this.ADD_finalData[this.renameKeys[C]]=this.grid.data[e][C];delete this.ADD_finalData.undefined,this.ADD_finalData.updated=new Date,this.ADD_finalData.valuemapping=c,this.ADD_finalData.scalingtable=n,this.ADD_finalData.schedule_parameter=u,i.push(this.ADD_finalData);let M=[];for(let C=0;C<i.length;C++)M.push({PK:i[C].PK,SK:i[C].SK,updated:i[C].updated});const b=M.map(C=>C.PK),F=M.filter(({PK:C},q)=>!b.includes(C,q+1));let G=[];for(let C=0;C<F.length;C++)G.push({PK:F[C].PK,SK:F[C].SK,parameters:[],updated:F[C].updated});for(let C=0;C<i.length;C++)for(let q=0;q<G.length;q++)"PK"in G[q]&&G[q].PK==i[C].PK?G[q].parameters.push({parameterID:i[C].parameterID,parameterLabel:i[C].parameterLabel,parameterDescription:i[C].parameterDescription,decimalpoint:i[C].decimalpoint,mX_C_X_Multiplication_Factor:i[C].mX_C_X_Multiplication_Factor,mX_C_C_Correction_Factor:i[C].mX_C_C_Correction_Factor,schedule_parameter:i[C].schedule_parameter,schedule_parameter_name:i[C].schedule_parameter_name,schedule_parameter_label:i[C].schedule_parameter_label,schedule_max:i[C].schedule_max,schedule_value_type:i[C].schedule_value_type,schedule_operation_type:i[C].schedule_operation_type,schedule_heatmap_type:i[C].schedule_heatmap_type,value_mapping:i[C].value_mapping,valuemapping:i[C].valuemapping,scaling_table:i[C].scaling_table,scalingtable:i[C].scalingtable}):"PK"in G[q]||(G[q].PK=i[C].PK,G[q].parameters=[],G[q].parameters.push({parameterID:i[C].parameterID,parameterLabel:i[C].parameterLabel,parameterDescription:i[C].parameterDescription,decimalpoint:i[C].decimalpoint,mX_C_X_Multiplication_Factor:i[C].mX_C_X_Multiplication_Factor,mX_C_C_Correction_Factor:i[C].mX_C_C_Correction_Factor,schedule_parameter:i[C].schedule_parameter,schedule_parameter_name:i[C].schedule_parameter_name,schedule_parameter_label:i[C].schedule_parameter_label,schedule_max:i[C].schedule_max,schedule_value_type:i[C].schedule_value_type,schedule_operation_type:i[C].schedule_operation_type,schedule_heatmap_type:i[C].schedule_heatmap_type,value_mapping:i[C].value_mapping,valuemapping:i[C].valuemapping,scaling_table:i[C].scaling_table,scalingtable:i[C].scalingtable}));console.log("new object",G),this.tempMultiParams=G;for(let C=0;C<this.tempMultiParams.length;C++)this.tempMultiParams[C].parameters=JSON.stringify(this.tempMultiParams[C].parameters)}this.HelpherforUpdate(a)}var e,t;if("virtualParameter_xlsx"==a){let i=[],h=[],d="",u="true",f="false",p="",o="",s="",r="";if(0===this.previewData[0].length)return this.toast.open(" Error :No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!this.grid.data||this.grid.data.length<2||""===this.grid.data[1][0]||void 0===this.grid.data[1][0])return this.toast.open("Column:A  Row: 1 RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let t=1;t<this.grid.data.length;t++)null!=this.grid.data[t][1]&&h.push(this.grid.data[t][1]);let m=(t=h).filter((D,e)=>t.indexOf(D)!=e);if(console.log("duplicates",m),0!=m.length)return this.toast.open("Column:B  Row:  "+m+" Duplicate Virtual Parameter ID not allowed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let t=1;t<this.grid.data.length;t++)if(this.ADD_finalData={},this.grid.data[t][0]&&this.grid.data[t][0].trim().length>=2){if(!(null!==this.grid.data[t][0]&&this.grid.data[t][0].length>=2))return this.toast.open("RDT ID should be atleast 2 character","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][0]||""===this.grid.data[t][0])return this.toast.open("Column:A  Row: "+t+" RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][0].charCodeAt(0))return this.toast.open("Column:A  Row: "+t+" RDT ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let P=0;P<this.uniqueRDTList.length&&this.uniqueRDTList[P]!==this.grid.data[t][0].trim();P++)if(P==this.uniqueRDTList.length-1)return void this.toast.open("Column:A  RDT ID not exists","Add Correct RDT ID",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][1]||""===this.grid.data[t][1])return this.toast.open("Column:B  Row: "+t+" Virtual Parameter ID is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][1].charCodeAt(0))return this.toast.open("Column:B Row: "+t+" Virtual Parameter ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][2]||""===this.grid.data[t][2])return this.toast.open("Column:C  Row: "+t+" Virtual Parameter Label is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][2].charCodeAt(0))return this.toast.open("Column:C  Row: "+t+" Virtual Parameter Label not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][3]||""===this.grid.data[t][3])return this.toast.open("Column:D  Row: "+t+" Virtual Parameter Description is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][3].charCodeAt(0))return this.toast.open("Column:D  Row: "+t+" Virtual Parameter Description not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][4]))return this.toast.open("Column:E  Row: "+t+" Virtual Decimal Point must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][4]||""===this.grid.data[t][4])return this.toast.open("Column:E  Row: "+t+" Virtual Decimal Point should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][4])))return this.toast.open("Column:E Row: "+t+" Virtual Decimal Point should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][4])<0)return this.toast.open("Column:E  Row: "+t+" Virtual Decimal Point should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][5]))return this.toast.open("Column:F  Row: "+t+" Virtual Multiplication factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][5]||""===this.grid.data[t][5])return this.toast.open("Column:F  Row: "+t+" Virtual Multiplication factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][5])<0)return this.toast.open("Column:F  Row: "+t+" Virtual Multiplication factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][6]||""===this.grid.data[t][6])return this.toast.open("Column:G  Row: "+t+" Virtual Correction factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!0===isNaN(this.grid.data[t][6]))return this.toast.open("Column:G  Row: "+t+" Virtual Correction factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][6])<0)return this.toast.open("Column:G  Row: "+t+" Virtual Correction factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(d=this.grid.data[t][8],null!=d&&""!==d){let P="";if("boolean"==typeof d?P=JSON.stringify(d).trim().toLowerCase():0==isNaN(d)||(P=d.trim().toLowerCase()),P!==f&&P!==u)return this.toast.open("Column:I  Row: "+t+" Enable Schedule Parameter must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((P==u||P==f)&&(d=P),1==JSON.parse(d)){if(null==this.grid.data[t][9]||""===this.grid.data[t][9])return this.toast.open("Column:J  Row: "+t+" Virtual Schedule Parameter should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(""==this.grid.data[t][10]||null==this.grid.data[t][10]||null==this.grid.data[t][10])return this.toast.open("Column:K  Row: "+t+" Virtual Schedule Parameter Label must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][11]))return this.toast.open("Column:L  Row: "+t+" Virtual Schedule Max value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][11]||""===this.grid.data[t][11])return this.toast.open("Column:L  Row: "+t+" Virtual Schedule Max value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][11])))return this.toast.open("Column:M Row: "+t+" Virtual Schedule Max value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][11])<0)return this.toast.open("Column:L  Row: "+t+" Virtual Schedule Max value should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][12]||""===this.grid.data[t][12])return this.toast.open("Column:M  Row: "+t+" Virtual Schedule Parameter Value type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][13]||""===this.grid.data[t][13])return this.toast.open("Column:N  Row: "+t+" Virtual Schedule Parameter Operation type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][14]||""===this.grid.data[t][14])return this.toast.open("Column:O  Row: "+t+" Virtual Schedule Parameter HeatMap type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}else d=f;if(p=this.grid.data[t][17],o=this.grid.data[t][24],null!=this.grid.data[t][15]&&""!==this.grid.data[t][15]){let P="";if("boolean"==typeof this.grid.data[t][15]?P=JSON.stringify(this.grid.data[t][15]).trim().toLowerCase():0==isNaN(this.grid.data[t][15])||(P=this.grid.data[t][15].trim().toLowerCase()),P!==u&&P!==f)return this.toast.open("Column:P  Row: "+t+" Enable Virtual Value mapping must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((P==u||P==f)&&(this.grid.data[t][15]=P),1==JSON.parse(this.grid.data[t][15])){if(console.log("vlaue mapping value",p),null==this.grid.data[t][16]||""===this.grid.data[t][16])return this.toast.open("Column:Q  Row: "+t+" Number of virtual value mapping should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][16]))return this.toast.open("Column:Q  Row: "+t+" No of virtual value mapping must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][16])))return this.toast.open("Column:Q Row: "+t+" No of virtual value mapping should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][16])<0)return this.toast.open("Column:Q  Row: "+t+" No of virtual value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][17]||""===this.grid.data[t][17])return this.toast.open("Column:R  Row: "+t+" Virtual Value mapping Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==p||""===p)return this.toast.open("Column:R  Row: "+t+" Virtual Value mapping Value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][16]){if(1===JSON.parse(this.grid.data[t][16])){if(!0===this.grid.data[t][17].includes(",")||(p=this.grid.data[t][18]),1==isNaN(p))return this.toast.open("Column:S  Row: "+t+" Virtual Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(p=this.grid.data[t][18].split(","),p)for(let g=0;g<p.length;g++)if(1==isNaN(p[g]))return this.toast.open("Column:S  Row: "+t+" Virtual Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(p))return this.toast.open("Column:S  Row: "+t+" Virtual Value Mapping value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(p)))return this.toast.open("Column:S Row: "+t+" Virtual Value mapping Value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(p)<0)return this.toast.open("Column:S  Row: "+t+" No of virtual value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][16]){if(1===JSON.parse(this.grid.data[t][16])){if(o=this.grid.data[t][25],1==isNaN(o))return this.toast.open("Column:Z  Row: "+t+" Virtual Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(o=this.grid.data[t][25].split(","),o)for(let g=0;g<o.length;g++)if(1==isNaN(o[g]))return this.toast.open("Column:Z  Row: "+t+" Virtual Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(o))return this.toast.open("Column:Z  Row: "+t+" Virtual Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(o)))return this.toast.open("Column:Z Row: "+t+" Virtual Font size should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(o)<0)return this.toast.open("Column:Z  Row: "+t+" Virtual Font size should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}}if(s=this.grid.data[t][29],r=this.grid.data[t][30],console.log("virtual sclaing enable",this.grid.data[t][27]),null!==this.grid.data[t][26]&&void 0!==this.grid.data[t][27]&&""!==this.grid.data[t][27]){let P="";if("boolean"==typeof this.grid.data[t][27]?P=JSON.stringify(this.grid.data[t][27]).trim().toLowerCase():0==isNaN(this.grid.data[t][27])||(P=this.grid.data[t][27].trim().toLowerCase()),P!==u&&P!==f)return this.toast.open("Column:AB  Row: "+t+" Enable Virtual Scaling must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((P==u||P==f)&&(this.grid.data[t][27]=P),1==JSON.parse(this.grid.data[t][27])){if(null==this.grid.data[t][28]||""===this.grid.data[t][28])return this.toast.open("Column:AC  Row: "+t+" No of Virtual scaling table should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][28]))return this.toast.open("Column:AC  Row: "+t+" No of Virtual scaling table must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][28])))return this.toast.open("Column:AC Row: "+t+" No of Virtual scaling table should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][28])<0)return this.toast.open("Column:AC  Row: "+t+" No of Virtual scaling table should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==s||""===s)return this.toast.open("Column:AD  Row: "+t+" Virtual Scale threshold should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][28]){if(1===JSON.parse(this.grid.data[t][28])){if(s=this.grid.data[t][29],1==isNaN(s))return this.toast.open("Column:AD  Row: "+t+" Virtual Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(s=this.grid.data[t][29].split(","),s)for(let g=0;g<s.length;g++)if(1==isNaN(s[g]))return this.toast.open("Column:AD  Row: "+t+" Virtual Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(s))return this.toast.open("Column:AD  Row: "+t+" Virtual Scale Threhold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(s)))return this.toast.open("Column:AD Row: "+t+" Virtual Scale threshold should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(s)<0)return this.toast.open("Column:AD  Row: "+t+" Virtual Scale threshold should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(null==r||""===r)return this.toast.open("Column:AE  Row: "+t+" Virtual Multi factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][28]){if(1===JSON.parse(this.grid.data[t][28])){if(r=this.grid.data[t][30],1==isNaN(r))return this.toast.open("Column:AE  Row: "+t+" Virtual Scaling Multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(r=this.grid.data[t][30].split(","),r)for(let g=0;g<r.length;g++)if(1==isNaN(r[g]))return this.toast.open("Column:AE  Row: "+t+" Virtual Scaling multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(r))return this.toast.open("Column:AE  Row: "+t+" Virtual Multi factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(r)))return this.toast.open("Column:AE Row: "+t+" Virtual Multi factor should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(r)<0)return this.toast.open("Column:AE  Row: "+t+" Virtual Multi factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}this.ADD_finalData.PK=this.grid.data[t][0].trim(),this.ADD_finalData.SK=this.userClientIDCognito.attributes["custom:clientID"],this.ADD_finalData.virtual_parameters=[],this.renameKeys[1]="v_parameterID",this.renameKeys[2]="v_parameterLabel",this.renameKeys[3]="v_parameterDescription",this.renameKeys[4]="v_decimalPoint",this.renameKeys[5]="v_mX_C_X_Multiplication_Factor",this.renameKeys[6]="v_mX_C_C_Correction_Factor",this.renameKeys[7]="virtual_equation_textarea",this.renameKeys[8]="v_schedule_parameter",this.renameKeys[9]="v_schedule_parameter_name",this.renameKeys[10]="v_schedule_parameter_label",this.renameKeys[11]="v_schedule_max",this.renameKeys[12]="v_schedule_value_type",this.renameKeys[13]="v_schedule_operation_type",this.renameKeys[14]="v_schedule_heatmap_type",this.renameKeys[15]="v_valuemappingBoolean",this.renameKeys[16]="v_value_mapping",this.renameKeys[27]="v_scalingtableBoolean",this.renameKeys[28]="v_scaling_table";let e=[],y=[],c=16,n=1,_=1,v=[],w=[],R=[],S=[],k=[],N=[],z=[],L=[],K=[],J=[],U=28;if(null!=this.grid.data[t][16]&&""!==this.grid.data[t][16])if("string"==typeof this.grid.data[t][c+n]&&!0===this.grid.data[t][c+n].includes(",")){v=this.grid.data[t][c+n].split(","),w=null!=this.grid.data[t][c+n+2]&&""!==this.grid.data[t][c+n+2]?this.grid.data[t][c+n+2].split(","):this.grid.data[t][c+n+2],R=null!=this.grid.data[t][c+n+3]&&""!==this.grid.data[t][c+n+3]?this.grid.data[t][c+n+3].split(","):this.grid.data[t][c+n+3],S=null!=this.grid.data[t][c+n+4]&&""!==this.grid.data[t][c+n+4]?this.grid.data[t][c+n+4].split(","):this.grid.data[t][c+n+4],k=null!=this.grid.data[t][c+n+5]&&""!==this.grid.data[t][c+n+5]?this.grid.data[t][c+n+5].split(","):this.grid.data[t][c+n+5],N=null!=this.grid.data[t][c+n+6]&&""!==this.grid.data[t][c+n+6]?this.grid.data[t][c+n+6].split(","):this.grid.data[t][c+n+6],z=null!=this.grid.data[t][c+n+7]&&""!==this.grid.data[t][c+n+7]?this.grid.data[t][c+n+7].split(","):this.grid.data[t][c+n+7],J=null!=this.grid.data[t][c+n+8]&&""!==this.grid.data[t][c+n+8]?this.grid.data[t][c+n+8].split(","):this.grid.data[t][c+n+8],L=null!=this.grid.data[t][c+n+9]&&""!==this.grid.data[t][c+n+9]?this.grid.data[t][c+n+9].split(","):this.grid.data[t][c+n+9],console.log("splittedLabels",v);for(let P=0;P<this.grid.data[t][16];P++)e.push({v_vm_label:v[P],v_vm_value:p[P],v_vm_equation:null!==w&&""!==w&&void 0!==w?w[P]:w,v_vm_icon:null!==R&&""!==R&&void 0!==R?R[P]:R,v_vm_label_color:null!==S&&""!==S&&void 0!==S?S[P]:S,v_vm_animation:null!==k&&""!==k&&void 0!==k?k[P]:k,v_vm_font:null!==N&&""!==N&&void 0!==N?N[P]:N,v_vm_text_color:null!==z&&""!==z&&void 0!==z?z[P]:z,v_vm_font_size:null!==J&&""!==J&&void 0!==J?J[P]:J,v_vm_align_type:null!==L&&""!==L&&void 0!==L?L[P]:L})}else e.push({v_vm_label:this.grid.data[t][c+n],v_vm_value:this.grid.data[t][c+n+1],v_vm_equation:this.grid.data[t][c+n+2],v_vm_icon:this.grid.data[t][c+n+3],v_vm_label_color:this.grid.data[t][c+n+4],v_vm_animation:this.grid.data[t][c+n+5],v_vm_font:this.grid.data[t][c+n+6],v_vm_text_color:this.grid.data[t][c+n+7],v_vm_font_size:this.grid.data[t][c+n+8],v_vm_align_type:this.grid.data[t][c+n+9]});else e=[];if(null!=this.grid.data[t][28]&&""!==this.grid.data[t][28])if("string"==typeof this.grid.data[t][U+_]&&!0===this.grid.data[t][U+_].includes(",")){K=this.grid.data[t][U+_+2].split(",");for(let P=0;P<this.grid.data[t][28];P++)y.push({v_scale_threshold:s[P],v_sc_multiply:r[P],v_sc_unit:K[P]})}else y.push({v_scale_threshold:this.grid.data[t][U+_],v_sc_multiply:this.grid.data[t][U+_+1],v_sc_unit:this.grid.data[t][U+_+2]});else y=[];for(let P=0;P<this.grid.data[0].length;P++)null==this.grid.data[t][P]?this.grid.data[t][P]=null:this.ADD_finalData[this.renameKeys[P]]=this.grid.data[t][P];delete this.ADD_finalData.undefined,this.ADD_finalData.updated=new Date,this.ADD_finalData.v_value_mapping=e,this.ADD_finalData.v_scaling_table=y,i.push(this.ADD_finalData);let X=[];for(let P=0;P<i.length;P++)X.push({PK:i[P].PK,SK:i[P].SK,updated:i[P].updated});const Y=X.map(P=>P.PK),B=X.filter(({PK:P},g)=>!Y.includes(P,g+1));console.log("filtered",B);let O=[];for(let P=0;P<B.length;P++)O.push({PK:B[P].PK,SK:B[P].SK,virtual_parameters:[],updated:B[P].updated});for(let P=0;P<i.length;P++)for(let g=0;g<O.length;g++)"PK"in O[g]&&O[g].PK==i[P].PK?O[g].virtual_parameters.push({v_parameterID:i[P].v_parameterID,v_parameterLabel:i[P].v_parameterLabel,v_parameterDescription:i[P].v_parameterDescription,v_decimalPoint:i[P].v_decimalPoint,v_mX_C_X_Multiplication_Factor:i[P].v_mX_C_X_Multiplication_Factor,v_mX_C_C_Correction_Factor:i[P].v_mX_C_C_Correction_Factor,virtual_equation_textarea:i[P].virtual_equation_textarea,v_schedule_parameter:i[P].v_schedule_parameter,v_schedule_parameter_name:i[P].v_schedule_parameter_name,v_schedule_parameter_label:i[P].v_schedule_parameter_label,v_schedule_max:i[P].v_schedule_max,v_schedule_value_type:i[P].v_schedule_value_type,v_schedule_operation_type:i[P].v_schedule_operation_type,v_schedule_heatmap_type:i[P].v_schedule_heatmap_type,v_valuemappingBoolean:i[P].v_valuemappingBoolean,v_value_mapping:i[P].v_value_mapping,v_scalingtableBoolean:i[P].v_scalingtableBoolean,v_scaling_table:i[P].v_scaling_table}):"PK"in O[g]||(O[g].PK=i[P].PK,O[g].virtual_parameters=[],O[g].virtual_parameters.push({v_parameterID:i[P].v_parameterID,v_parameterLabel:i[P].v_parameterLabel,v_parameterDescription:i[P].v_parameterDescription,v_decimalPoint:i[P].v_decimalPoint,v_mX_C_X_Multiplication_Factor:i[P].v_mX_C_X_Multiplication_Factor,v_mX_C_C_Correction_Factor:i[P].v_mX_C_C_Correction_Factor,virtual_equation_textarea:i[P].virtual_equation_textarea,v_schedule_parameter:i[P].v_schedule_parameter,v_schedule_parameter_name:i[P].v_schedule_parameter_name,v_schedule_parameter_label:i[P].v_schedule_parameter_label,v_schedule_max:i[P].v_schedule_max,v_schedule_value_type:i[P].v_schedule_value_type,v_schedule_operation_type:i[P].v_schedule_operation_type,v_schedule_heatmap_type:i[P].v_schedule_heatmap_type,v_valuemappingBoolean:i[P].v_valuemappingBoolean,v_value_mapping:i[P].v_value_mapping,v_scalingtableBoolean:i[P].v_scalingtableBoolean,v_scaling_table:i[P].v_scaling_table}));console.log("new object",O),this.tempMultiParams=O;for(let P=0;P<this.tempMultiParams.length;P++)this.tempMultiParams[P].virtual_parameters=JSON.stringify(this.tempMultiParams[P].virtual_parameters)}this.HelpherforUpdate(a)}}sendMultipleRDTVirtualParamsDB(a,i){var h=this;if(this.spinner.show(),a<this.tempMultiParams.length){console.log("this.multi alerts index",this.tempMultiParams[a]);let d=JSON.parse(i.parameters),u="";u=d?1===d.length?d[0].parameterID:d.length>1?d[0].parameterID+"...("+d.length+")":"...(0)":"...(0)";const f=Math.ceil((new Date).getTime()/1e3),p={P1:this.tempMultiParams[a].PK,P2:i.rdtLabel,P3:u,P4:f};this.api.UpdateReadingDeviceType(this.tempMultiParams[a]).then(function(){var o=(0,Z.Z)(function*(s){console.log("added index",a),s?(yield h.fetchTimeMachineById(1,p.P1,"update",p),h.sendMultipleRDTVirtualParamsDB(a+1,i)):alert("Error in Creating Virtual Parameter Configuration")});return function(s){return o.apply(this,arguments)}}()).catch(o=>{this.spinner.hide(),console.log("err for creation",a),this.toast.open("Error in Creating Virtual Parameter Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}else this.spinner.hide(),this.toast.open(this.tempMultiParams.length+" RDT's Virtual Parameters added successfully "," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})}sendMultipleRDTParamsDB(a,i){var h=this;if(this.spinner.show(),a<this.tempMultiParams.length){let d=JSON.parse(this.tempMultiParams[a].parameters),u="";u=d?1===d.length?d[0].parameterID:d.length>1?d[0].parameterID+"...("+d.length+")":"...(0)":"...(0)";const f=Math.ceil((new Date).getTime()/1e3),p={P1:this.tempMultiParams[a].PK,P2:i.rdtLabel,P3:u,P4:f};this.api.UpdateReadingDeviceType(this.tempMultiParams[a]).then(function(){var o=(0,Z.Z)(function*(s){console.log("added index",a),s?(yield h.fetchTimeMachineById(1,p.P1,"update",p),h.sendMultipleRDTParamsDB(a+1,i)):alert("Error in Creating Parameter Configuration")});return function(s){return o.apply(this,arguments)}}()).catch(o=>{console.log("err for creation",a),this.toast.open("Error in Creating Parameter Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}else this.spinner.hide(),this.toast.open(this.tempMultiParams.length+" RDT's Parameters added successfully "," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})}createLookUpRdt(a,i){var h=this;return(0,Z.Z)(function*(){try{console.log("iam a calleddd dude",a,i);const d=yield h.api.GetLookupMasterTable(h.clientID,i);let u=[];if(null!=d&&d.items&&"string"==typeof d.items&&(u=JSON.parse(d.items)),null!=d&&u.length<h.maxlength){let f=[];d.items&&"string"==typeof d.items&&JSON.parse(d.items).forEach(r=>{for(const V in r)Object.prototype.hasOwnProperty.call(r,V)&&f.push(r[V])}),f.unshift(a),f=f.map((s,r)=>({[`L${r+1}`]:s})),console.log("newdata 11111111 :>> ",f);let p={PK:h.clientID,SK:d.SK,createdTime:"",updatedTime:"",items:JSON.stringify(f)};const o=yield h.api.UpdateLookupMasterTable(p);console.log("createResponse :>> ",o)}else if(null==d){let f=[];f.push(a),f=f.map((s,r)=>({[`L${r+1}`]:s}));let p={SK:i,PK:h.clientID,items:JSON.stringify(f)};console.log(p);const o=yield h.api.CreateLookupMasterTable(p);console.log(o)}else yield h.createLookUpRdt(a,i+1)}catch(d){console.log("err :>> ",d)}})()}updateMultipleRDTxlsx(a){if(0===this.previewData[0].length)return this.toast.open(" Error :No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if("parameter_xlsx"==a){let i=[],h="true",d="false",u="",p="",o="",s="",r="",V="",m=[];if(0===this.previewData[0].length)return this.toast.open(" Error :No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!this.grid.data||this.grid.data.length<2||""===this.grid.data[1][0]||void 0===this.grid.data[1][0])return this.toast.open("Column:A  Row: 1 RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let e=1;e<this.grid.data.length;e++)null!=this.grid.data[e][1]&&m.push(this.grid.data[e][1]);let D=(e=m).filter((y,c)=>e.indexOf(y)!=c);if(0!=D.length)return this.toast.open("Column:B  Row:  "+D+" Duplicate Parameter ID not allowed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let e=1;e<=this.grid.data.length;e++)if(this.grid.data&&this.grid.data[e]&&0==this.filteredDevices.includes(this.grid.data[e][0])&&!this.showAlldevice)return $().fire({title:`${this.grid.data[e][0]} RDT not found or You Dont have Access to update this RDT`});for(let e=1;e<this.grid.data.length;e++)if(this.ADD_finalData={},this.grid.data[e][0]&&this.grid.data[e][0].trim().length>=2){if(null==this.grid.data[e][0]||""===this.grid.data[e][0])return this.toast.open("Column:A  Row: "+e+" RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][0].charCodeAt(0))return this.toast.open("Column:A  Row: "+e+" RDT ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let b=0;b<this.uniqueRDTList.length&&this.uniqueRDTList[b]!==this.grid.data[e][0].trim();b++)if(b==this.uniqueRDTList.length-1)return void this.toast.open("Column:A  RDT ID not exists","Add Correct RDT ID",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][1]||""===this.grid.data[e][1])return this.toast.open("Column:B  Row: "+e+" Parameter ID is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][1].charCodeAt(0))return this.toast.open("Column:A  Row: "+e+" Parameter ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][2]||""===this.grid.data[e][2])return this.toast.open(this.grid.data[e][2]+"Column:C  Row: "+e+" Parameter Label is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][2].charCodeAt(0))return this.toast.open(this.grid.data[e][2]+"Column:C  Row: "+e+" Parameter Label not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][3]||""===this.grid.data[e][3])return this.toast.open("Column:D  Row: "+e+" Parameter Description is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[e][3].charCodeAt(0))return this.toast.open("Column:D  Row: "+e+" Parameter Description not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][4]))return this.toast.open("Column:E  Row: "+e+" Decimal Point must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][4]||""===this.grid.data[e][4])return this.toast.open("Column:E  Row: "+e+" Decimal Point should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][4])))return this.toast.open("Column:E Row: "+e+" Decimal Point should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][4])<0)return this.toast.open("Column:E  Row: "+e+" Decimal Point should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][5]))return this.toast.open("Column:F  Row: "+e+" Multiplication factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][5]||""===this.grid.data[e][5])return this.toast.open("Column:F  Row: "+e+" Multiplication factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][5])<0)return this.toast.open("Column:F  Row: "+e+" Multiplication factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][6]||""===this.grid.data[e][6])return this.toast.open("Column:G  Row: "+e+" Correction factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!0===isNaN(this.grid.data[e][6]))return this.toast.open("Column:G  Row: "+e+" Correction factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][6])<0)return this.toast.open("Column:G  Row: "+e+" Correction factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(u=this.grid.data[e][7],null!=u&&""!==u){let b="";if("boolean"==typeof u?b=JSON.stringify(u).trim().toLowerCase():0==isNaN(u)||(b=u.trim().toLowerCase()),b!==h&&b!==d)return this.toast.open(u+"Column:H  Row: "+e+" Enable Schedule Parameter must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((b==h||b==d)&&(u=b),1==JSON.parse(u)){if(null==this.grid.data[e][8]||""===this.grid.data[e][8])return this.toast.open("Column:I  Row: "+e+" Schedule Parameter should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][9]||""===this.grid.data[e][9])return this.toast.open("Column:J  Row: "+e+" Schedule Parameter Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][10]))return this.toast.open("Column:K  Row: "+e+" Schedule Max value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][10]||""===this.grid.data[e][10])return this.toast.open("Column:K  Row: "+e+" Schedule Max value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][10])))return this.toast.open("Column:K Row: "+e+" Schedule Max value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][10])<0)return this.toast.open("Column:K  Row: "+e+" Schedule Max value should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][11]||""===this.grid.data[e][11])return this.toast.open("Column:L  Row: "+e+" Schedule Parameter Value type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if("Difference"===this.grid.data[e][11]||"Difference"===this.grid.data[e][11]){if(null==this.grid.data[e][12]||""===this.grid.data[e][12])return this.toast.open("Column:M  Row: "+e+" Schedule Parameter Operation type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(null==this.grid.data[e][13]||""===this.grid.data[e][13])return this.toast.open("Column:N  Row: "+e+" Schedule Parameter HeatMap type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}else u=d;if(p=this.grid.data[e][17],o=this.grid.data[e][24],null!=this.grid.data[e][14]&&""!==this.grid.data[e][14]&&1==JSON.parse(this.grid.data[e][14])){if(console.log("vlaue mapping value",p),null==this.grid.data[e][15]||""===this.grid.data[e][15])return this.toast.open("Column:P  Row: "+e+" Number of value mapping should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][15]))return this.toast.open("Column:P  Row: "+e+" No of value mapping must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][15])))return this.toast.open("Column:P Row: "+e+" No of value mapping should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][15])<0)return this.toast.open("Column:P  Row: "+e+" No of value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[e][16]||""===this.grid.data[e][16])return this.toast.open("Column:Q  Row: "+e+" Value mapping Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==p||""===p)return this.toast.open("Column:R  Row: "+e+" Value mapping Value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][15]){if(1===JSON.parse(this.grid.data[e][15])){if(console.log("this.grid.data[allData][16]",this.grid.data[e][17]),!0===JSON.stringify(this.grid.data[e][17]).includes(","))return this.toast.open(p+" Column:S  Row: "+e+" Should be equal in length","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(p=this.grid.data[e][17],1==isNaN(p))return this.toast.open(p+" Column:R  Row: "+e+" Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(p=this.grid.data[e][17].split(","),p)for(let b=0;b<p.length;b++)if(1==isNaN(p[b]))return this.toast.open(b+" Column:R  Row: "+e+" Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(p))return this.toast.open("Column:R  Row: "+e+" Value Mapping value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(p)))return this.toast.open("Column:R Row: "+e+" Value mapping Value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(p)<0)return this.toast.open("Column:R  Row: "+e+" No of value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][15]){if(1===JSON.parse(this.grid.data[e][15])){if(o=this.grid.data[e][24],1==isNaN(o))return this.toast.open("Column:Y  Row: "+e+" Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(o=o.split(","),o)for(let b=0;b<o.length;b++)if(1==isNaN(o[b]))return this.toast.open("Column:Y  Row: "+e+" Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(o))return this.toast.open("Column:Y  Row: "+e+" Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(o)))return this.toast.open("Column:Y Row: "+e+" Font size should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(o)<0)return this.toast.open("Column:Y  Row: "+e+" Font size should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}if(s=this.grid.data[e][28],r=this.grid.data[e][29],V=this.grid.data[e][30],null!=this.grid.data[e][26]&&""!==this.grid.data[e][26]){let b="";if("boolean"==typeof this.grid.data[e][26]?b=JSON.stringify(this.grid.data[e][26]).trim().toLowerCase():0==isNaN(this.grid.data[e][26])||(b=this.grid.data[e][26].trim().toLowerCase()),b!==h&&b!==d)return this.toast.open("Column:AA  Row: "+e+" Enable Scaling must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((b==h||b==d)&&(this.grid.data[e][26]=b),1==JSON.parse(this.grid.data[e][26])){if(null==this.grid.data[e][27]||""===this.grid.data[e][27])return this.toast.open("Column:AB  Row: "+e+" No of scaling table should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[e][27]))return this.toast.open("Column:AB  Row: "+e+" No of scaling table must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[e][27])))return this.toast.open("Column:AB Row: "+e+" No of scaling table should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[e][27])<0)return this.toast.open("Column:AB  Row: "+e+" No of scaling table should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==s||""===s)return this.toast.open("Column:AC  Row: "+e+" Scale threshold should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][27]){if(1===JSON.parse(this.grid.data[e][27])){if(s=this.grid.data[e][28],1==isNaN(s))return this.toast.open("Column:AC  Row: "+e+" Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(s=this.grid.data[e][28].split(","),s)for(let F=0;F<s.length;F++)if(1==isNaN(s[F]))return this.toast.open("Column:AC  Row: "+e+" Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(s))return this.toast.open("Column:AC  Row: "+e+" Scale Threhold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(s)))return this.toast.open("Column:AC Row: "+e+" Scale threshold should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(s)<0)return this.toast.open("Column:AC  Row: "+e+" Scale threshold should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(null==r||""===r)return this.toast.open("Column:AD  Row: "+e+" Multi factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[e][27]){if(1===JSON.parse(this.grid.data[e][27])){if(r=this.grid.data[e][29],1==isNaN(r))return this.toast.open("Column:AD  Row: "+e+" Scaling Multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(r=this.grid.data[e][29].split(","),r)for(let F=0;F<r.length;F++)if(1==isNaN(r[F]))return this.toast.open("Column:AD  Row: "+e+" Scaling multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(r))return this.toast.open("Column:AD  Row: "+e+" Multi factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(r)))return this.toast.open("Column:AD Row: "+e+" Multi factor should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(r)<0)return this.toast.open("Column:AD  Row: "+e+" Multi factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(null==V||""===V)return this.toast.open("Column:AE  Row: "+e+" Scaling Unit should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}this.ADD_finalData.PK=this.grid.data[e][0].trim(),this.ADD_finalData.SK=this.userClientIDCognito.attributes["custom:clientID"],this.ADD_finalData.parameters=[],this.renameKeys[1]="parameterID",this.renameKeys[2]="parameterLabel",this.renameKeys[3]="parameterDescription",this.renameKeys[4]="decimalpoint",this.renameKeys[5]="mX_C_X_Multiplication_Factor",this.renameKeys[6]="mX_C_C_Correction_Factor",this.renameKeys[7]="schedule_parameter",this.renameKeys[8]="schedule_parameter_name",this.renameKeys[9]="schedule_parameter_label",this.renameKeys[10]="schedule_max",this.renameKeys[11]="schedule_value_type",this.renameKeys[12]="schedule_operation_type",this.renameKeys[13]="schedule_heatmap_type",this.renameKeys[14]="value_mapping",this.renameKeys[15]="valuemapping",this.renameKeys[26]="scaling_table",this.renameKeys[27]="scalingtable";let y=[],c=[],n=15,_=1,v=1,w=[],R=[],S=[],k=[],N=[],z=[],L=[],K=[],J=[],U=[],X=[],Y=[],B=27;if(null!=this.grid.data[e][15]&&""!==this.grid.data[e][15])if("string"==typeof this.grid.data[e][n+_]&&!0===this.grid.data[e][n+_].includes(",")){w=this.grid.data[e][n+_].split(","),R=null!=this.grid.data[e][n+_+2]&&""!==this.grid.data[e][n+_+2]?this.grid.data[e][n+_+2].split(","):this.grid.data[e][n+_+2],S=null!=this.grid.data[e][n+_+3]&&""!==this.grid.data[e][n+_+3]?this.grid.data[e][n+_+3].split(","):this.grid.data[e][n+_+3],k=null!=this.grid.data[e][n+_+4]&&""!==this.grid.data[e][n+_+4]?this.grid.data[e][n+_+4].split(","):this.grid.data[e][n+_+4],N=null!=this.grid.data[e][n+_+5]&&""!==this.grid.data[e][n+_+5]?this.grid.data[e][n+_+5].split(","):this.grid.data[e][n+_+5],z=null!=this.grid.data[e][n+_+6]&&""!==this.grid.data[e][n+_+6]?this.grid.data[e][n+_+6].split(","):this.grid.data[e][n+_+6],L=null!=this.grid.data[e][n+_+7]&&""!==this.grid.data[e][n+_+7]?this.grid.data[e][n+_+7].split(","):this.grid.data[e][n+_+7],Y=null!=this.grid.data[e][n+_+8]&&""!==this.grid.data[e][n+_+8]?this.grid.data[e][n+_+8].split(","):this.grid.data[e][n+_+8],K=null!=this.grid.data[e][n+_+9]&&""!==this.grid.data[e][n+_+9]?this.grid.data[e][n+_+9].split(","):this.grid.data[e][n+_+9],console.log("splittedLabels",w);for(let b=0;b<this.grid.data[e][15];b++)y.push({vm_label:w[b],vm_value:p[b],vm_equation:null!==R&&""!==R&&void 0!==R?R[b]:R,vm_icon:null!==S&&""!==S&&void 0!==S?S[b]:S,vm_label_color:null!==k&&""!==k&&void 0!==k?k[b]:k,vm_animation:null!==N&&""!==N&&void 0!==N?N[b]:N,vm_font:null!==z&&""!==z&&void 0!==z?z[b]:z,vm_text_color:null!==L&&""!==L&&void 0!==L?L[b]:L,vm_font_size:null!==Y&&""!==Y&&void 0!==Y?Y[b]:Y,vm_align_type:null!==K&&""!==K&&void 0!==K?K[b]:K})}else 0!=this.grid.data[e][15]&&y.push({vm_label:this.grid.data[e][n+_],vm_value:this.grid.data[e][n+_+1],vm_equation:this.grid.data[e][n+_+2],vm_icon:this.grid.data[e][n+_+3],vm_label_color:this.grid.data[e][n+_+4],vm_animation:this.grid.data[e][n+_+5],vm_font:this.grid.data[e][n+_+6],vm_text_color:this.grid.data[e][n+_+7],vm_font_size:this.grid.data[e][n+_+8],vm_align_type:this.grid.data[e][n+_+9]});else y=[];if(null!=this.grid.data[e][27]&&""!==this.grid.data[e][27])if("string"==typeof this.grid.data[e][B+v]&&!0===this.grid.data[e][B+v].includes(",")){J=this.grid.data[e][B+v].split(","),U=this.grid.data[e][B+v+1].split(","),X=this.grid.data[e][B+v+2].split(",");for(let b=0;b<this.grid.data[e][27];b++)c.push({scale_threshold:s[b],sc_multiply:r[b],sc_unit:X[b]})}else 0!=this.grid.data[e][27]?c.push({scale_threshold:this.grid.data[e][B+v],sc_multiply:this.grid.data[e][B+v+1],sc_unit:this.grid.data[e][B+v+2]}):c=[];else c=[];for(let b=0;b<this.grid.data[0].length;b++)null==this.grid.data[e][b]?this.grid.data[e][b]=null:this.ADD_finalData[this.renameKeys[b]]=this.grid.data[e][b];delete this.ADD_finalData.undefined,this.ADD_finalData.updated=new Date,this.ADD_finalData.valuemapping=y,this.ADD_finalData.scalingtable=c,this.ADD_finalData.schedule_parameter=u,i.push(this.ADD_finalData),console.log("allParameter details",i);let O=[];for(let b=0;b<i.length;b++)O.push({PK:i[b].PK,SK:i[b].SK,updated:i[b].updated});const P=O.map(b=>b.PK),g=O.filter(({PK:b},F)=>!P.includes(b,F+1));console.log("filtered",g);let M=[];for(let b=0;b<g.length;b++)M.push({PK:g[b].PK,SK:g[b].SK,parameters:[],updated:g[b].updated});for(let b=0;b<i.length;b++)for(let F=0;F<M.length;F++)"PK"in M[F]&&M[F].PK==i[b].PK?M[F].parameters.push({parameterID:i[b].parameterID,parameterLabel:i[b].parameterLabel,parameterDescription:i[b].parameterDescription,decimalpoint:i[b].decimalpoint,mX_C_X_Multiplication_Factor:i[b].mX_C_X_Multiplication_Factor,mX_C_C_Correction_Factor:i[b].mX_C_C_Correction_Factor,schedule_parameter:i[b].schedule_parameter,schedule_parameter_name:i[b].schedule_parameter_name,schedule_parameter_label:i[b].schedule_parameter_label,schedule_max:i[b].schedule_max,schedule_value_type:i[b].schedule_value_type,schedule_operation_type:i[b].schedule_operation_type,schedule_heatmap_type:i[b].schedule_heatmap_type,value_mapping:i[b].value_mapping,valuemapping:i[b].valuemapping,scaling_table:i[b].scaling_table,scalingtable:i[b].scalingtable}):"PK"in M[F]||(M[F].PK=i[b].PK,M[F].parameters=[],M[F].parameters.push({parameterID:i[b].parameterID,parameterLabel:i[b].parameterLabel,parameterDescription:i[b].parameterDescription,decimalpoint:i[b].decimalpoint,mX_C_X_Multiplication_Factor:i[b].mX_C_X_Multiplication_Factor,mX_C_C_Correction_Factor:i[b].mX_C_C_Correction_Factor,schedule_parameter:i[b].schedule_parameter,schedule_parameter_name:i[b].schedule_parameter_name,schedule_parameter_label:i[b].schedule_parameter_label,schedule_max:i[b].schedule_max,schedule_value_type:i[b].schedule_value_type,schedule_operation_type:i[b].schedule_operation_type,schedule_heatmap_type:i[b].schedule_heatmap_type,value_mapping:i[b].value_mapping,valuemapping:i[b].valuemapping,scaling_table:i[b].scaling_table,scalingtable:i[b].scalingtable}));console.log("new object",M),this.tempMultiParams=M;for(let b=0;b<this.tempMultiParams.length;b++)this.tempMultiParams[b].parameters=JSON.stringify(this.tempMultiParams[b].parameters)}console.log("Value mapping to be updated are here ",this.tempMultiParams),this.updateMultipleRDTParamsDB(0)}var e,t;if("virtualParameter_xlsx"==a){let i=[],h=[],d="",u="true",f="false",p="",o="",s="",r="";if(0===this.previewData[0].length)return this.toast.open(" Error :No file is selected","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!this.grid.data||this.grid.data.length<2||""===this.grid.data[1][0]||void 0===this.grid.data[1][0])return this.toast.open("Column:A  Row: 1 RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let t=1;t<this.grid.data.length;t++)null!=this.grid.data[t][1]&&h.push(this.grid.data[t][1]);let m=(t=h).filter((D,e)=>t.indexOf(D)!=e);if(0!=m.length)return this.toast.open("Column:B  Row:  "+m+" Duplicate Virtual Parameter ID not allowed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let t=1;t<=this.grid.data.length;t++)if(this.grid.data&&this.grid.data[t]&&0==this.filteredDevices.includes(this.grid.data[t][0])&&!this.showAlldevice)return $().fire({title:`${this.grid.data[t][0]} RDT not found or You Dont have Access to update this RDT`});for(let t=1;t<this.grid.data.length;t++)if(this.ADD_finalData={},this.grid.data[t][0]&&this.grid.data[t][0].trim().length>=2){if(null==this.grid.data[t][0]||""===this.grid.data[t][0])return this.toast.open("Column:A  Row: "+t+" RDT ID needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][0].charCodeAt(0))return this.toast.open("Column:A  Row: "+t+" RDT ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});for(let g=0;g<this.uniqueRDTList.length&&this.uniqueRDTList[g]!==this.grid.data[t][0].trim();g++)if(g==this.uniqueRDTList.length-1)return void this.toast.open("Column:A  RDT ID not exists","Add Correct RDT ID",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][1]||""===this.grid.data[t][1])return this.toast.open("Column:B  Row: "+t+" Virtual Parameter ID is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][1].charCodeAt(0))return this.toast.open("Column:B  Row: "+t+" Virtual Parameter ID not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][2]||""===this.grid.data[t][2])return this.toast.open("Column:C  Row: "+t+" Virtual Parameter Label is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][2].charCodeAt(0))return this.toast.open("Column:C  Row: "+t+" Virtual Parameter Label not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][3]||""===this.grid.data[t][3])return this.toast.open("Column:D  Row: "+t+" Virtual Parameter Description is needed","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(32===this.grid.data[t][3].charCodeAt(0))return this.toast.open("Column:D  Row: "+t+" Virtual Parameter Description not starts with space","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][4]))return this.toast.open("Column:E  Row: "+t+" Virtual Decimal Point must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][4]||""===this.grid.data[t][4])return this.toast.open("Column:E  Row: "+t+" Virtual Decimal Point should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][4])))return this.toast.open("Column:E Row: "+t+" Virtual Decimal Point should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][4])<0)return this.toast.open("Column:E  Row: "+t+" Virtual Decimal Point should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][5]||""===this.grid.data[t][5])return this.toast.open("Column:F  Row: "+t+" Virtual Multiplication factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!0===isNaN(this.grid.data[t][5]))return this.toast.open("Column:F  Row: "+t+" Virtual Multiplication factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][5])<0)return this.toast.open("Column:F  Row: "+t+" Virtual Multiplication factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][6]||""===this.grid.data[t][6])return this.toast.open("Column:G  Row: "+t+" Virtual Correction factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!0===isNaN(this.grid.data[t][6]))return this.toast.open("Column:G  Row: "+t+" Virtual Correction factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][6])<0)return this.toast.open("Column:G  Row: "+t+" Virtual Correction factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(d=this.grid.data[t][8],null!=d&&""!==d){let g="";if("boolean"==typeof d?g=JSON.stringify(d).trim().toLowerCase():0==isNaN(d)||(g=d.trim().toLowerCase()),g!==u&&g!==f)return this.toast.open("Column:I  Row: "+t+" Enable Schedule Parameter must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(g!==f&&g!==u)return this.toast.open("Column:I  Row: "+t+" Enable Schedule Parameter must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((g==u||g==f)&&(d=g),1==JSON.parse(d)){if(null==this.grid.data[t][9]||""===this.grid.data[t][9])return this.toast.open("Column:J  Row: "+t+" Virtual Schedule Parameter should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][10]||""===this.grid.data[t][10])return this.toast.open("Column:K  Row: "+t+" Virtual Schedule Parameter Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][11]))return this.toast.open("Column:L  Row: "+t+" Virtual Schedule Max value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][11]||""===this.grid.data[t][11])return this.toast.open("Column:L  Row: "+t+" Virtual Schedule Max value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][11])))return this.toast.open("Column:L Row: "+t+" Virtual Schedule Max value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][11])<0)return this.toast.open("Column:L  Row: "+t+" Virtual Schedule Max value should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][12]||""===this.grid.data[t][12])return this.toast.open("Column:M  Row: "+t+" Virtual Schedule Parameter Value type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][13]||""===this.grid.data[t][13])return this.toast.open("Column:N  Row: "+t+" Virtual Schedule Parameter Operation type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][14]||""===this.grid.data[t][14])return this.toast.open("Column:O  Row: "+t+" Virtual Schedule Parameter HeatMap type should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}else d=f;if(p=this.grid.data[t][17],o=this.grid.data[t][25],null!=this.grid.data[t][15]&&""!==this.grid.data[t][15]){let g="";if("boolean"==typeof this.grid.data[t][15]?g=JSON.stringify(this.grid.data[t][15]).trim().toLowerCase():0==isNaN(this.grid.data[t][15])||(g=this.grid.data[t][15].trim().toLowerCase()),g!==u&&g!==f)return this.toast.open("Column:P  Row: "+t+" Enable Virtual Value mapping must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((g==u||g==f)&&(this.grid.data[t][15]=g),1==JSON.parse(this.grid.data[t][15])){if(console.log("vlaue mapping value",p),null==this.grid.data[t][16]||""===this.grid.data[t][16])return this.toast.open("Column:Q  Row: "+t+" Number of virtual value mapping should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][16]))return this.toast.open("Column:Q  Row: "+t+" No of virtual value mapping must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][16])))return this.toast.open("Column:Q Row: "+t+" No of virtual value mapping should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][16])<0)return this.toast.open("Column:Q  Row: "+t+" No of virtual value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==this.grid.data[t][17]||""===this.grid.data[t][17])return this.toast.open("Column:R  Row: "+t+" Virtual Value mapping Label should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==p||""===p)return this.toast.open("Column:S  Row: "+t+" Virtual Value mapping Value should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][16]){if(1===JSON.parse(this.grid.data[t][16])){if(!0===this.grid.data[t][17].includes(",")||(p=this.grid.data[t][18]),1==isNaN(p))return this.toast.open("Column:S  Row: "+t+" Virtual Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(p=this.grid.data[t][18].split(","),p)for(let M=0;M<p.length;M++)if(1==isNaN(p[M]))return this.toast.open("Column:S  Row: "+t+" Virtual Value Mapping Value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(p))return this.toast.open("Column:S  Row: "+t+" Virtual Value Mapping value must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(p)))return this.toast.open("Column:S Row: "+t+" Virtual Value mapping Value should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(p)<0)return this.toast.open("Column:S  Row: "+t+" No of virtual value mapping should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][16]){if(1===JSON.parse(this.grid.data[t][16])){if(!0===this.grid.data[t][24].includes(","))return this.toast.open(o+" Column:R  Row: "+t+" Should be equal in length","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(o=this.grid.data[t][25],1==isNaN(o))return this.toast.open("Column:Z  Row: "+t+" Virtual Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(o=this.grid.data[t][25].split(","),o)for(let M=0;M<o.length;M++)if(1==isNaN(o[M]))return this.toast.open("Column:Z  Row: "+t+" Virtual Value Mapping Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(o))return this.toast.open("Column:Z  Row: "+t+" Virtual Font size must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(o)))return this.toast.open("Column:Z Row: "+t+" Virtual Font size should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(o)<0)return this.toast.open("Column:Z  Row: "+t+" Virtual Font size should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}}if(s=this.grid.data[t][29],r=this.grid.data[t][30],null!=this.grid.data[t][27]&&""!==this.grid.data[t][27]){let g="";if("boolean"==typeof this.grid.data[t][27]?g=JSON.stringify(this.grid.data[t][27]).trim().toLowerCase():0==isNaN(this.grid.data[t][27])||(g=this.grid.data[t][27].trim().toLowerCase()),g!==u&&g!==f)return this.toast.open("Column:AB  Row: "+t+" Enable Virtual Scaling must be boolean","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if((g==u||g==f)&&(this.grid.data[t][27]=g),1==JSON.parse(this.grid.data[t][27])){if(null==this.grid.data[t][28]||""===this.grid.data[t][28])return this.toast.open("Column:AC  Row: "+t+" No of Virtual scaling table should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(!1!==isNaN(this.grid.data[t][28]))return this.toast.open("Column:AC  Row: "+t+" No of Virtual scaling table must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(this.grid.data[t][28])))return this.toast.open("Column:AC Row: "+t+" No of Virtual scaling table should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(this.grid.data[t][28])<0)return this.toast.open("Column:AC  Row: "+t+" No of Virtual scaling table should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(null==s||""===s)return this.toast.open("Column:AD  Row: "+t+" Virtual Scale threshold should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][28]){if(1===JSON.parse(this.grid.data[t][28])){if(s=this.grid.data[t][29],1==isNaN(s))return this.toast.open("Column:AD  Row: "+t+" Virtual Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(s=this.grid.data[t][29].split(","),s)for(let M=0;M<s.length;M++)if(1==isNaN(s[M]))return this.toast.open("Column:AD  Row: "+t+" Virtual Scaling threshold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(s))return this.toast.open("Column:AD  Row: "+t+" Virtual Scale Threhold must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(s)))return this.toast.open("Column:AD Row: "+t+" Virtual Scale threshold should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(s)<0)return this.toast.open("Column:AD  Row: "+t+" Virtual Scale threshold should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}if(null==r||""===r)return this.toast.open("Column:AE  Row: "+t+" Virtual Multi factor should not be empty","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0!=this.grid.data[t][28]){if(1===JSON.parse(this.grid.data[t][28])){if(r=this.grid.data[t][30],1==isNaN(r))return this.toast.open("Column:AE  Row: "+t+" Virtual Scaling Multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else if(r=this.grid.data[t][30].split(","),r)for(let M=0;M<r.length;M++)if(1==isNaN(r[M]))return this.toast.open("Column:AD  Row: "+t+" Virtual Scaling multiplication must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}else{if(!1!==isNaN(r))return this.toast.open("Column:AD  Row: "+t+" Virtual Multi factor must be number","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(0==Number.isInteger(JSON.parse(r)))return this.toast.open("Column:AD Row: "+t+" Virtual Multi factor should not be in decimal","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});if(JSON.parse(r)<0)return this.toast.open("Column:AD  Row: "+t+" Virtual Multi factor should not be negative","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}}}this.ADD_finalData.PK=this.grid.data[t][0].trim(),this.ADD_finalData.SK=this.userClientIDCognito.attributes["custom:clientID"],this.ADD_finalData.virtual_parameters=[],this.renameKeys[1]="v_parameterID",this.renameKeys[2]="v_parameterLabel",this.renameKeys[3]="v_parameterDescription",this.renameKeys[4]="v_decimalPoint",this.renameKeys[5]="v_mX_C_X_Multiplication_Factor",this.renameKeys[6]="v_mX_C_C_Correction_Factor",this.renameKeys[7]="virtual_equation_textarea",this.renameKeys[8]="v_schedule_parameter",this.renameKeys[9]="v_schedule_parameter_name",this.renameKeys[10]="v_schedule_parameter_label",this.renameKeys[11]="v_schedule_max",this.renameKeys[12]="v_schedule_value_type",this.renameKeys[13]="v_schedule_operation_type",this.renameKeys[14]="v_schedule_heatmap_type",this.renameKeys[15]="v_valuemappingBoolean",this.renameKeys[16]="v_value_mapping",this.renameKeys[27]="v_scalingtableBoolean",this.renameKeys[28]="v_scaling_table";let e=[],y=[],c=16,n=1,_=1,v=[],w=[],R=[],S=[],k=[],N=[],z=[],L=[],K=[],J=[],U=28;if(null!=this.grid.data[t][16]&&""!==this.grid.data[t][16])if("string"==typeof this.grid.data[t][c+n]&&!0===this.grid.data[t][c+n].includes(",")){v=this.grid.data[t][c+n].split(","),w=null!=this.grid.data[t][c+n+2]&&""!==this.grid.data[t][c+n+2]?this.grid.data[t][c+n+2].split(","):this.grid.data[t][c+n+2],R=null!=this.grid.data[t][c+n+3]&&""!==this.grid.data[t][c+n+3]?this.grid.data[t][c+n+3].split(","):this.grid.data[t][c+n+3],S=null!=this.grid.data[t][c+n+4]&&""!==this.grid.data[t][c+n+4]?this.grid.data[t][c+n+4].split(","):this.grid.data[t][c+n+4],k=null!=this.grid.data[t][c+n+5]&&""!==this.grid.data[t][c+n+5]?this.grid.data[t][c+n+5].split(","):this.grid.data[t][c+n+5],N=null!=this.grid.data[t][c+n+6]&&""!==this.grid.data[t][c+n+6]?this.grid.data[t][c+n+6].split(","):this.grid.data[t][c+n+6],z=null!=this.grid.data[t][c+n+7]&&""!==this.grid.data[t][c+n+7]?this.grid.data[t][c+n+7].split(","):this.grid.data[t][c+n+7],K=null!=this.grid.data[t][c+n+8]&&""!==this.grid.data[t][c+n+8]?this.grid.data[t][c+n+8].split(","):this.grid.data[t][c+n+8],L=null!=this.grid.data[t][c+n+9]&&""!==this.grid.data[t][c+n+9]?this.grid.data[t][c+n+9].split(","):this.grid.data[t][c+n+9],console.log("splittedLabels",v);for(let g=0;g<this.grid.data[t][16];g++)e.push({v_vm_label:v[g],v_vm_value:(0,lt.toInteger)(p[g]),v_vm_equation:null!==w&&""!==w&&void 0!==w?w[g]:w,v_vm_icon:null!==R&&""!==R&&void 0!==R?R[g]:R,v_vm_label_color:null!==S&&""!==S&&void 0!==S?S[g]:S,v_vm_animation:null!==k&&""!==k&&void 0!==k?k[g]:k,v_vm_font:null!==N&&""!==N&&void 0!==N?N[g]:N,v_vm_text_color:null!==z&&""!==z&&void 0!==z?z[g]:z,v_vm_font_size:null!==K&&""!==K&&void 0!==K?K[g]:K,v_vm_align_type:null!==L&&""!==L&&void 0!==L?L[g]:L})}else e.push({v_vm_label:this.grid.data[t][c+n],v_vm_value:this.grid.data[t][c+n+1],v_vm_equation:this.grid.data[t][c+n+2],v_vm_icon:this.grid.data[t][c+n+3],v_vm_label_color:this.grid.data[t][c+n+4],v_vm_animation:this.grid.data[t][c+n+5],v_vm_font:this.grid.data[t][c+n+6],v_vm_text_color:this.grid.data[t][c+n+7],v_vm_font_size:this.grid.data[t][c+n+8],v_vm_align_type:this.grid.data[t][c+n+9]});else e=[];if(null!=this.grid.data[t][28]&&""!==this.grid.data[t][28])if("string"==typeof this.grid.data[t][U+_]&&!0===this.grid.data[t][U+_].includes(",")){J=this.grid.data[t][U+_+2].split(",");for(let g=0;g<this.grid.data[t][28];g++)y.push({v_scale_threshold:s[g],v_sc_multiply:r[g],v_sc_unit:J[g]})}else y.push({v_scale_threshold:this.grid.data[t][U+_],v_sc_multiply:this.grid.data[t][U+_+1],v_sc_unit:this.grid.data[t][U+_+2]});else y=[];for(let g=0;g<this.grid.data[0].length;g++)null==this.grid.data[t][g]?this.grid.data[t][g]=null:this.ADD_finalData[this.renameKeys[g]]=this.grid.data[t][g];delete this.ADD_finalData.undefined,this.ADD_finalData.updated=new Date,this.ADD_finalData.v_value_mapping=e,this.ADD_finalData.v_scaling_table=y,i.push(this.ADD_finalData);let X=[];for(let g=0;g<i.length;g++)X.push({PK:i[g].PK,SK:i[g].SK,updated:i[g].updated});const B=X.map(g=>g.PK),O=X.filter(({PK:g},M)=>!B.includes(g,M+1));console.log("filtered",O);let P=[];for(let g=0;g<O.length;g++)P.push({PK:O[g].PK,SK:O[g].SK,virtual_parameters:[],updated:O[g].updated});for(let g=0;g<i.length;g++)for(let M=0;M<P.length;M++)"PK"in P[M]&&P[M].PK==i[g].PK?P[M].virtual_parameters.push({v_parameterID:i[g].v_parameterID,v_parameterLabel:i[g].v_parameterLabel,v_parameterDescription:i[g].v_parameterDescription,v_decimalPoint:i[g].v_decimalPoint,v_mX_C_X_Multiplication_Factor:i[g].v_mX_C_X_Multiplication_Factor,v_mX_C_C_Correction_Factor:i[g].v_mX_C_C_Correction_Factor,virtual_equation_textarea:i[g].virtual_equation_textarea,v_schedule_parameter:i[g].v_schedule_parameter,v_schedule_parameter_name:i[g].v_schedule_parameter_name,v_schedule_parameter_label:i[g].v_schedule_parameter_label,v_schedule_max:i[g].v_schedule_max,v_schedule_value_type:i[g].v_schedule_value_type,v_schedule_operation_type:i[g].v_schedule_operation_type,v_schedule_heatmap_type:i[g].v_schedule_heatmap_type,v_valuemappingBoolean:i[g].v_valuemappingBoolean,v_value_mapping:i[g].v_value_mapping,v_scalingtableBoolean:i[g].v_scalingtableBoolean,v_scaling_table:i[g].v_scaling_table}):"PK"in P[M]||(P[M].PK=i[g].PK,P[M].virtual_parameters=[],P[M].virtual_parameters.push({v_parameterID:i[g].v_parameterID,v_parameterLabel:i[g].v_parameterLabel,v_parameterDescription:i[g].v_parameterDescription,v_decimalPoint:i[g].v_decimalPoint,v_mX_C_X_Multiplication_Factor:i[g].v_mX_C_X_Multiplication_Factor,v_mX_C_C_Correction_Factor:i[g].v_mX_C_C_Correction_Factor,virtual_equation_textarea:i[g].virtual_equation_textarea,v_schedule_parameter:i[g].v_schedule_parameter,v_schedule_parameter_name:i[g].v_schedule_parameter_name,v_schedule_parameter_label:i[g].v_schedule_parameter_label,v_schedule_max:i[g].v_schedule_max,v_schedule_value_type:i[g].v_schedule_value_type,v_schedule_operation_type:i[g].v_schedule_operation_type,v_schedule_heatmap_type:i[g].v_schedule_heatmap_type,v_valuemappingBoolean:i[g].v_valuemappingBoolean,v_value_mapping:i[g].v_value_mapping,v_scalingtableBoolean:i[g].v_scalingtableBoolean,v_scaling_table:i[g].v_scaling_table}));this.tempMultiParams=P;for(let g=0;g<this.tempMultiParams.length;g++)this.tempMultiParams[g].virtual_parameters=JSON.stringify(this.tempMultiParams[g].virtual_parameters)}this.updateMultipleRDTVirtualParamsDB(0)}}updateMultipleRDTParamsDB(a){var i=this;if(this.spinner.show(),a<this.tempMultiParams.length){console.log("this.multi alerts index",this.tempMultiParams[a]);let h=JSON.parse(this.tempMultiParams[a].parameters),d="";d=1==h.length?h[0].parameterID:h.length>1?h[0].parameterID+"...("+h.length+")":"...(0)";const f=Math.ceil((new Date).getTime()/1e3),p={P1:this.tempMultiParams[a].PK,P2:this.tempMultiParams[a].PK,P3:d,P4:f};this.api.UpdateReadingDeviceType(this.tempMultiParams[a]).then(function(){var o=(0,Z.Z)(function*(s){s?(yield i.fetchTimeMachineById(1,p.P1,"update",p),i.updateMultipleRDTParamsDB(a+1)):alert("Error in updating Parameter Configuration")});return function(s){return o.apply(this,arguments)}}()).catch(o=>{this.spinner.hide(),console.log("err for creation",a),this.toast.open("Error in updating Parameter Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}else this.spinner.hide(),this.toast.open(this.tempMultiParams.length+" RDT's Parameters updated successfully "," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})}updateMultipleRDTVirtualParamsDB(a){var i=this;this.spinner.show(),a<this.tempMultiParams.length?this.api.UpdateReadingDeviceType(this.tempMultiParams[a]).then(function(){var h=(0,Z.Z)(function*(d){const u=Math.ceil((new Date).getTime()/1e3),f={P1:i.tempMultiParams[a].PK,P2:i.tempMultiParams[a].PK,P3:"...(0)",P4:u};d?(yield i.fetchTimeMachineById(1,f.P1,"update",f),i.updateMultipleRDTVirtualParamsDB(a+1)):alert("Error in updating Virtual Parameter Configuration")});return function(d){return h.apply(this,arguments)}}()).catch(h=>{this.spinner.hide(),console.log("err for creation",a),this.toast.open("Error in updating Virtual Parameter Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})}):(this.spinner.hide(),this.toast.open(this.tempMultiParams.length+" RDT's Virtual Parameters updated successfully "," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"}))}updateMultiRDTDB(a){var i=this;if(this.spinner.show(),a<this.tempMultiData.length){const h=Math.ceil((new Date).getTime()/1e3),d={P1:this.tempMultiData[a].PK,P2:this.tempMultiData[a].rdtLabel,P3:"...(0)",P4:h};console.log("I will get execute :"),this.api.UpdateReadingDeviceType(this.tempMultiData[a]).then(function(){var u=(0,Z.Z)(function*(f){f?(yield i.fetchTimeMachineById(1,d.P1,"update",d),i.updateMultiRDTDB(a+1)):alert("Error in updating RDT")});return function(f){return u.apply(this,arguments)}}()).catch(u=>{console.log("error for updating",u)})}else this.spinner.hide(),this.toast.open("RDT updated successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})}fetchTimeMachineById(a,i,h,d){var u=this;return(0,Z.Z)(function*(){try{const f=yield u.api.GetLookupMasterTable(u.clientID,a);if(f&&f.items){let p=yield JSON.parse(f.items),o=p.findIndex(s=>s[Object.keys(s)[0]].P1===i);if(-1!==o){if("update"===h){p[o][`L${o+1}`]=d;const r=[];for(let V=0;V<p.length;V++){const m=Object.keys(p[V])[0],t=`L${V+1}`;if(m){const D={[t]:p[V][m]},e=r.findIndex(y=>Object.keys(y)[0]===t);-1!==e?Object.assign(r[e][t],p[V][m]):r.push(D)}else console.error(`Original key not found for renaming in data[${V}].`)}p=r}else"delete"===h&&p.splice(o,1);let s={PK:u.clientID,SK:f.SK,items:JSON.stringify(p)};yield u.api.UpdateLookupMasterTable(s)}else yield new Promise(s=>setTimeout(s,500)),yield u.fetchTimeMachineById(a+1,i,h,d)}else $().fire({position:"top-right",icon:"error",title:`ID ${i} not found`,showConfirmButton:!1,timer:1500})}catch(f){console.error("Error:",f)}})()}updatePagedData(){const a=this.currentPage*this.pageSize;this.pagedPreviewData=this.previewData.slice(a,a+this.pageSize),this.totalPages=Math.ceil(this.previewData.length/this.pageSize),this.grid.data=this.pagedPreviewData,this.cd.detectChanges()}loadGridData(a){this.previewData=a,this.currentPage=0,this.updatePagedData()}nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.updatePagedData())}prevPage(){this.currentPage>0&&(this.currentPage--,this.updatePagedData())}}return x=A,(0,T.Z)(A,"\u0275fac",function(a){return new(a||x)(l.Y36(j.QS),l.Y36(tt.ux),l.Y36(dt.t),l.Y36(rt.F),l.Y36(et.F0),l.Y36(rt.F),l.Y36(ut.G),l.Y36(ht.y),l.Y36(Q.t2),l.Y36(pt),l.Y36(ct.FF),l.Y36(gt),l.Y36(l.sBO))}),(0,T.Z)(A,"\u0275cmp",l.Xpm({type:x,selectors:[["app-readingdevicetype-xlsx"]],viewQuery:function(a,i){if(1&a&&(l.Gf(mt,7),l.Gf(ft,5),l.Gf(_t,7)),2&a){let h;l.iGM(h=l.CRH())&&(i.fileUpload=h.first),l.iGM(h=l.CRH())&&(i.container=h.first),l.iGM(h=l.CRH())&&(i.tabContainer=h.first)}},decls:33,vars:10,consts:[["bdColor","rgba(0, 0, 0, 0.85)","size","medium","color","#ffffff","type","ball-atom",3,"fullScreen"],[1,"spinner-text"],[1,"card","p-5","modern-card","shadow",3,"formGroup"],[1,"mb-4","text-primary","fw-bold"],[1,"row","g-4"],[1,"col-md-6"],[1,"form-label","fw-semibold","text-dark"],[1,"text-danger"],["formControlName","type",1,"form-select","custom-select"],["value","","disabled","","selected",""],["value","rdt_xlsx"],["value","parameter_xlsx"],["class","text-danger",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"scroll-grid-container"],[1,"sticky-toolbar","d-flex","flex-wrap","gap-2","p-2","bg-white","border-bottom","shadow-sm"],[1,"btn","btn-warning","text-dark",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-info text-white",3,"disabled","click",4,"ngIf"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],["class","btn btn-dark",3,"disabled","click",4,"ngIf"],["tabulatorContainer",""],["fileUpload",""],["type","file","accept",".xlsx",1,"form-control","modern-file",3,"change"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-info","text-white",3,"disabled","click"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-dark",3,"disabled","click"],[1,"bi","bi-download","fs-3"],[1,"modal-header","bg-danger","text-white"],[1,"modal-title"],["type","button",1,"btn-close","btn-close-white",3,"click"],[1,"modal-body"],["class","alert alert-danger",4,"ngIf"],["class","validation-errors mt-3",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"alert","alert-danger"],[1,"validation-errors","mt-3"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"badge","bg-danger"],[1,"validation-list","mt-2",2,"max-height","200px","overflow-y","auto"],[1,"table","table-sm","table-bordered","mb-0"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"text-center",2,"width","60px"]],template:function(a,i){if(1&a&&(l.TgZ(0,"ngx-spinner",0)(1,"p",1),l._uU(2,"Loading..."),l.qZA()(),l.TgZ(3,"div",2)(4,"h4",3),l._uU(5,"Reading Device Type"),l.qZA(),l.TgZ(6,"div",4)(7,"div",5)(8,"label",6),l._uU(9,"Type "),l.TgZ(10,"span",7),l._uU(11,"*"),l.qZA()(),l.TgZ(12,"select",8)(13,"option",9),l._uU(14,"Select Type"),l.qZA(),l.TgZ(15,"option",10),l._uU(16,"Reading Device Type"),l.qZA(),l.TgZ(17,"option",11),l._uU(18,"Reading Parameter"),l.qZA()(),l.YNc(19,vt,2,0,"small",12),l.qZA(),l.YNc(20,Pt,4,0,"div",13),l.TgZ(21,"div",14)(22,"div",15)(23,"button",16),l.NdJ("click",function(){let d;return i.exportTemplate(null==(d=i.createRDTXlsx.get("type"))?null:d.value)}),l._uU(24,"\u2b07 Export Template"),l.qZA(),l.YNc(25,bt,2,1,"button",17),l.YNc(26,Ct,2,1,"button",18),l.YNc(27,Dt,2,1,"button",19),l.YNc(28,yt,3,1,"button",20),l.qZA(),l._UZ(29,"div",null,21),l.qZA()(),l.YNc(31,Vt,10,2,"ng-template",null,22,l.W1O),l.qZA()),2&a){let h,d,u;l.Q6J("fullScreen",!0),l.xp6(3),l.Q6J("formGroup",i.createRDTXlsx),l.xp6(16),l.Q6J("ngIf",(null==(h=i.createRDTXlsx.get("type"))?null:h.hasError("required"))&&(null==(h=i.createRDTXlsx.get("type"))?null:h.touched)),l.xp6(1),l.Q6J("ngIf",l.DdM(9,Nt).includes(null==(d=i.createRDTXlsx.get("type"))?null:d.value)),l.xp6(3),l.Q6J("disabled",!(null!=(u=i.createRDTXlsx.get("type"))&&u.value)),l.xp6(2),l.Q6J("ngIf",i.hideUpdateButton&&i.savedFileEvent),l.xp6(1),l.Q6J("ngIf",i.hideGetButton&&i.savedFileEvent),l.xp6(1),l.Q6J("ngIf",i.hideUpdateButton&&i.savedFileEvent),l.xp6(1),l.Q6J("ngIf",i.hideUpdateButton&&i.savedFileEvent)}},dependencies:[H.sg,H.O5,j.YN,j.Kr,j.EJ,j.JJ,j.JL,j.sg,j.u,Q.Ro],styles:[".spinner-text[_ngcontent-%COMP%]{color:#fff;font-size:1rem;text-align:center}button[_ngcontent-%COMP%]{transition:.3s ease-in-out}button[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.invalid-cell[_ngcontent-%COMP%]{background-color:#fdd;border:1px solid red}.invalid-header[_ngcontent-%COMP%]{background-color:#fbb;color:#fff}"]})),A})(),kt=(()=>{var x;class A{}return x=A,(0,T.Z)(A,"\u0275fac",function(a){return new(a||x)}),(0,T.Z)(A,"\u0275mod",l.oAB({type:x})),(0,T.Z)(A,"\u0275inj",l.cJS({imports:[H.ez,tt.ZX,j.UX,Q.ef,j.u5,et.Bz.forChild([{path:"",component:Tt}])]})),A})()}}]);