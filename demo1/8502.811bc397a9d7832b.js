"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[8502],{28502:(M,B,g)=>{g.r(B),g.d(B,{BillingModule:()=>ve});var o=g(86656),Z=g(96814),C=g(64190),S=g(15861),K=g(13519),x=g.n(K),e=g(65879),D=g(65619),J=g(83493);const m={PK:"",SK:"",company:"",name:"",description:"",gstIN:"",gstPercentage:0,fromDetails:"",toDetails:"",otherCharges:[],days:0,template:"",metadata:{}};var U=g(31552),O=g(22939),A=g(5588),k=g(88672),F=g(69862),E=g(26131),f=g(56223),L=g(6472);function Q(a,s){1&a&&(e.TgZ(0,"div"),e._uU(1," ID cannot contain only spaces. "),e.qZA())}function Y(a,s){1&a&&(e.TgZ(0,"div",17),e._uU(1," Whitespace is not allowed "),e.qZA())}function R(a,s){1&a&&(e.TgZ(0,"div",17),e._uU(1," ID is required "),e.qZA())}function G(a,s){1&a&&(e.TgZ(0,"div",17),e._uU(1," Billing Profile Name is required "),e.qZA())}let j=(()=>{var a;class s{constructor(t,i){(0,o.Z)(this,"fb",void 0),(0,o.Z)(this,"spinner",void 0),(0,o.Z)(this,"isEditMode",void 0),(0,o.Z)(this,"updateParentModel",void 0),(0,o.Z)(this,"form",void 0),(0,o.Z)(this,"defaultValues",void 0),(0,o.Z)(this,"unsubscribe",[]),(0,o.Z)(this,"errorForUniqueID",void 0),(0,o.Z)(this,"listofDynamicReportIds",void 0),(0,o.Z)(this,"readBack",void 0),(0,o.Z)(this,"enableSubmitButton",new e.vpe),this.fb=t,this.spinner=i}ngAfterViewInit(){this.initForm(),this.updateParentModel({},this.checkForm()),this.isEditMode&&this.disablePKField()}disablePKField(){const t=this.form.get("PK");t&&t.disable()}ngOnInit(){this.initForm(),this.updateParentModel({},this.checkForm()),console.log("lpb",this.listofDynamicReportIds)}initForm(){this.form=this.fb.group({PK:[this.defaultValues.PK,[f.kI.required,L.l.noSpaceAllowed]],name:[this.defaultValues.name,[f.kI.required]],description:[this.defaultValues.description]});const t=this.form.valueChanges.subscribe(i=>{this.updateParentModel(i,this.checkForm())});this.unsubscribe.push(t)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}checkUniqueIdentifier(t){this.errorForUniqueID="";for(let i=0;i<this.listofDynamicReportIds.length;i++)t===this.listofDynamicReportIds[i]&&(this.errorForUniqueID="Billing Profile ID already exists")}checkForm(){return!(this.form.get("PK")?.hasError("required")||this.form.controls.PK.errors?.noSpaceAllowed||this.errorForUniqueID||this.form.get("name")?.hasError("required"))}enableSubmit(){this.enableSubmitButton.emit("enable")}}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)(e.Y36(f.qu),e.Y36(k.t2))}),(0,o.Z)(s,"\u0275cmp",e.Xpm({type:a,selectors:[["app-step1-b"]],inputs:{isEditMode:"isEditMode",updateParentModel:"updateParentModel",defaultValues:"defaultValues",listofDynamicReportIds:"listofDynamicReportIds",readBack:"readBack"},outputs:{enableSubmitButton:"enableSubmitButton"},decls:27,vars:6,consts:[[1,"pb-10","pb-lg-15"],[1,"fw-bolder","d-flex","align-items-center","text-dark"],["ngbTooltip","Fill all the required fields",1,"fas","fa-exclamation-circle","ms-2","fs-7"],[1,"fv-row",3,"formGroup"],[1,"column"],[1,"col-md-12"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","required"],["ngbTooltip","Please assign a unique identifier to your Billing Profile",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["type","text","placeholder","Enter Billing Profile ID","name","PK","formControlName","PK","required","",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0",3,"change"],[4,"ngIf"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[2,"color","#fc1900"],["ngbTooltip","Provide a name for your Billing Profile",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["type","text","placeholder","Enter Billing Profile Name","name","name","formControlName","name","required","",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],[1,"col-lg-12","col-form-label","fw-bold","fs-6"],["ngbTooltip","Provide a description for your Billing Profile",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["type","text","placeholder","Enter Billing Profile Description","name","description","formControlName","description",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],[1,"fv-plugins-message-container","invalid-feedback"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2," Billing Profile Configuration "),e._UZ(3,"i",2),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8," Billing Profile ID "),e._UZ(9,"i",7),e.qZA(),e.TgZ(10,"input",8),e.NdJ("change",function(){return i.enableSubmit()}),e.qZA(),e.YNc(11,Q,2,0,"div",9),e.YNc(12,Y,2,0,"div",10),e.TgZ(13,"span",11),e._uU(14),e.qZA(),e.YNc(15,R,2,0,"div",10),e.qZA(),e.TgZ(16,"div",5)(17,"label",6),e._uU(18," Billing Profile Name "),e._UZ(19,"i",12),e.qZA(),e._UZ(20,"input",13),e.YNc(21,G,2,0,"div",10),e.qZA(),e.TgZ(22,"div",5)(23,"label",14),e._uU(24," Description "),e._UZ(25,"i",15),e.qZA(),e._UZ(26,"input",16),e.qZA()()()),2&t){let n,d,l;e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",null==(n=i.form.get("PK"))?null:n.hasError("pattern")),e.xp6(1),e.Q6J("ngIf",(null==i.form.controls.PK.errors?null:i.form.controls.PK.errors.noSpaceAllowed)&&i.form.controls.PK.touched),e.xp6(2),e.Oqu(i.errorForUniqueID),e.xp6(1),e.Q6J("ngIf",(null==(d=i.form.get("PK"))?null:d.hasError("required"))&&(null==(d=i.form.get("PK"))?null:d.touched)),e.xp6(6),e.Q6J("ngIf",(null==(l=i.form.get("name"))?null:l.hasError("required"))&&(null==(l=i.form.get("name"))?null:l.touched))}},dependencies:[Z.O5,f.Fj,f.JJ,f.JL,f.Q7,f.sg,f.u],encapsulation:2})),s})();function V(a,s){1&a&&(e.TgZ(0,"div",18),e._uU(1," Company Name is required "),e.qZA())}let X=(()=>{var a;class s{constructor(t){(0,o.Z)(this,"fb",void 0),(0,o.Z)(this,"updateParentModel",void 0),(0,o.Z)(this,"form",void 0),(0,o.Z)(this,"defaultValues",void 0),(0,o.Z)(this,"unsubscribe",[]),this.fb=t}ngOnInit(){this.initForm(),this.updateParentModel({},this.checkForm())}initForm(){this.form=this.fb.group({company:[this.defaultValues?.company,[f.kI.required]],gstIN:[this.defaultValues?.gstIN],gstPercentage:[this.defaultValues?.gstPercentage],fromDetails:[this.defaultValues?.fromDetails],toDetails:[this.defaultValues?.toDetails],otherCharges:[this.defaultValues?.otherCharges],days:[this.defaultValues?.days],template:[this.defaultValues?.template]});const t=this.form.valueChanges.subscribe(i=>{this.updateParentModel(i,this.checkForm())});this.unsubscribe.push(t)}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}checkForm(){return!(this.form.get("company")?.hasError("required")||this.form.get("gstPercentage")?.hasError("required")||this.form.get("otherCharges")?.hasError("required"))}}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)(e.Y36(f.qu))}),(0,o.Z)(s,"\u0275cmp",e.Xpm({type:a,selectors:[["app-step2-b"]],inputs:{updateParentModel:"updateParentModel",defaultValues:"defaultValues"},decls:40,vars:2,consts:[[1,"pb-10","pb-lg-15"],[1,"fw-bolder","d-flex","align-items-center","text-dark"],["ngbTooltip","Fill all the required fields",1,"fas","fa-exclamation-circle","ms-2","fs-7"],[1,"fv-row",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","required"],["ngbTooltip","Provide the company name for your Billing Profile",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["type","text","placeholder","Enter Company Name","name","company","formControlName","company","required","",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[1,"col-lg-12","col-form-label","fw-bold","fs-6"],["type","text","placeholder","Enter GST IN","name","gstIN","formControlName","gstIN",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","number","placeholder","Enter GST Percentage","name","gstPercentage","formControlName","gstPercentage",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","text","placeholder","Enter From Details","name","fromDetails","formControlName","fromDetails",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","text","placeholder","Enter To Details","name","toDetails","formControlName","toDetails",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","text","placeholder","Enter Other Charges","name","otherCharges","formControlName","otherCharges",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","number","placeholder","Enter Number of Days","name","days","formControlName","days",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","text","placeholder","Enter Template","name","template","formControlName","template",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],[1,"fv-plugins-message-container","invalid-feedback"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2," Billing Profile Configuration "),e._UZ(3,"i",2),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),e._uU(8," Company Name "),e._UZ(9,"i",7),e.qZA(),e._UZ(10,"input",8),e.YNc(11,V,2,0,"div",9),e.qZA(),e.TgZ(12,"div",5)(13,"label",10),e._uU(14,"GST IN"),e.qZA(),e._UZ(15,"input",11),e.qZA(),e.TgZ(16,"div",5)(17,"label",10),e._uU(18,"GST Percentage"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.TgZ(20,"div",5)(21,"label",10),e._uU(22,"From Details"),e.qZA(),e._UZ(23,"input",13),e.qZA(),e.TgZ(24,"div",5)(25,"label",10),e._uU(26,"To Details"),e.qZA(),e._UZ(27,"input",14),e.qZA(),e.TgZ(28,"div",5)(29,"label",10),e._uU(30,"Other Charges"),e.qZA(),e._UZ(31,"input",15),e.qZA(),e.TgZ(32,"div",5)(33,"label",10),e._uU(34,"Days"),e.qZA(),e._UZ(35,"input",16),e.qZA(),e.TgZ(36,"div",5)(37,"label",10),e._uU(38,"Template"),e.qZA(),e._UZ(39,"input",17),e.qZA()()()),2&t){let n;e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(7),e.Q6J("ngIf",(null==(n=i.form.get("company"))?null:n.hasError("required"))&&(null==(n=i.form.get("company"))?null:n.touched))}},dependencies:[Z.O5,f.Fj,f.wV,f.JJ,f.JL,f.Q7,f.sg,f.u],encapsulation:2})),s})();function H(a,s){if(1&a){const c=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"label",9),e._uU(3,"Key"),e.qZA(),e._UZ(4,"input",10),e.qZA(),e.TgZ(5,"div",8)(6,"label",9),e._uU(7,"Value"),e.qZA(),e._UZ(8,"input",11),e.qZA(),e.TgZ(9,"div",12)(10,"button",13),e.NdJ("click",function(){const n=e.CHM(c).index,d=e.oxw();return e.KtG(d.removeMetadata(n))}),e._uU(11,"Remove"),e.qZA()()()}2&a&&e.Q6J("formGroupName",s.index)}function W(a,s){1&a&&(e.TgZ(0,"div",14),e._uU(1," Metadata is required "),e.qZA())}let z=(()=>{var a;class s{constructor(t){(0,o.Z)(this,"fb",void 0),(0,o.Z)(this,"updateParentModel",void 0),(0,o.Z)(this,"defaultValues",void 0),(0,o.Z)(this,"readBackCheck",!1),(0,o.Z)(this,"form",void 0),(0,o.Z)(this,"unsubscribe",[]),this.fb=t}ngOnInit(){this.initForm(),this.updateParentModel({},this.checkForm())}ngOnDestroy(){this.unsubscribe.forEach(t=>t.unsubscribe())}initForm(){if(this.form=this.fb.group({metadata:this.fb.array([])}),this.readBackCheck&&this.defaultValues?.metadata){let i=this.defaultValues.metadata;if("string"==typeof i)try{JSON.parse(i).forEach(d=>{this.metadata.push(this.createMetadata(d.key,d.value))})}catch(n){console.error("Invalid JSON string in metadata",n)}else Array.isArray(i)?i.forEach(n=>{this.metadata.push(this.createMetadata(n.key,n.value))}):console.warn("Unexpected metadata format:",i)}else this.metadata.push(this.createMetadata());const t=this.form.valueChanges.subscribe(i=>{this.updateParentModel(i,this.checkForm())});this.unsubscribe.push(t)}createMetadata(t="",i=""){return this.fb.group({key:[t,f.kI.required],value:[i,f.kI.required]})}get metadata(){return this.form.get("metadata")}addMetadata(){this.metadata.push(this.createMetadata())}removeMetadata(t){this.metadata.removeAt(t)}checkForm(){return this.metadata.controls.every(t=>t.valid)}updateMetadataInInits(){return JSON.stringify(this.metadata.value)}}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)(e.Y36(f.qu))}),(0,o.Z)(s,"\u0275cmp",e.Xpm({type:a,selectors:[["app-step3-b"]],inputs:{updateParentModel:"updateParentModel",defaultValues:"defaultValues",readBackCheck:"readBackCheck"},decls:9,vars:3,consts:[[1,"pb-10","pb-lg-12"],[1,"fw-bolder","text-dark"],[1,"fv-row",3,"formGroup"],["formArrayName","metadata"],["class","row mb-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[1,"row","mb-3",3,"formGroupName"],[1,"col-md-5"],[1,"col-form-label","fw-bold","fs-6"],["type","text","formControlName","key","placeholder","Enter Key",1,"form-control","form-control-lg","form-control-solid"],["type","text","formControlName","value","placeholder","Enter Value",1,"form-control","form-control-lg","form-control-solid"],[1,"col-md-2"],["type","button",1,"btn","btn-danger","mt-4",3,"click"],[1,"fv-plugins-message-container","invalid-feedback"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Meta Data Fill and Submit"),e.qZA()(),e.TgZ(3,"div",2)(4,"div",3),e.YNc(5,H,12,1,"div",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.addMetadata()}),e._uU(7,"Add New Key-Value Pair"),e.qZA(),e.YNc(8,W,2,0,"div",6),e.qZA()),2&t){let n;e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngForOf",i.metadata.controls),e.xp6(3),e.Q6J("ngIf",(null==(n=i.form.get("metadata"))?null:n.hasError("required"))&&(null==(n=i.form.get("metadata"))?null:n.touched))}},dependencies:[Z.sg,Z.O5,f.Fj,f.JJ,f.JL,f.sg,f.u,f.x0,f.CE],encapsulation:2})),s})();function ee(a,s){if(1&a){const c=e.EpF();e.ynx(0),e.TgZ(1,"app-step1-b",28),e.NdJ("enableSubmitButton",function(){e.CHM(c);const i=e.oxw();return e.KtG(i.enableSubmitButton())}),e.qZA(),e.BQk()}if(2&a){const c=e.oxw();e.xp6(1),e.Q6J("updateParentModel",c.updateAccount)("defaultValues",c.account$.value)("isEditMode",c.readBackCheck)}}function te(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"app-step2-b",29),e.BQk()),2&a){const c=e.oxw();e.xp6(1),e.Q6J("updateParentModel",c.updateAccount)("defaultValues",c.account$.value)}}function ie(a,s){if(1&a&&(e.ynx(0),e._UZ(1,"app-step3-b",30),e.BQk()),2&a){const c=e.oxw();e.xp6(1),e.Q6J("updateParentModel",c.updateAccount)("defaultValues",c.account$.value)("readBackCheck",c.readBackCheck)}}function oe(a,s){if(1&a){const c=e.EpF();e.ynx(0),e.TgZ(1,"button",31),e.NdJ("click",function(){e.CHM(c);const i=e.oxw();return e.KtG(i.prevStep())}),e._UZ(2,"i",32),e._uU(3," Back "),e.qZA(),e.BQk()}}function ne(a,s){if(1&a){const c=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"button",33),e.NdJ("click",function(){e.CHM(c);const i=e.oxw();return e.KtG(i.nextStep())}),e.TgZ(3,"span",34),e._uU(4," Continue "),e._UZ(5,"i",35),e.qZA()()(),e.BQk()}if(2&a){const c=e.oxw();e.xp6(2),e.Q6J("disabled",!c.isCurrentFormValid$.value)}}function ae(a,s){1&a&&(e.ynx(0),e._uU(1," Submit "),e.BQk())}function le(a,s){if(1&a){const c=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"button",36),e.NdJ("click",function(){e.CHM(c);const i=e.oxw();return i.onSubmit(),e.KtG(i.nextStep())}),e.TgZ(3,"span",34),e.YNc(4,ae,2,0,"ng-container",25),e.qZA()()(),e.BQk()}if(2&a){const c=e.oxw();e.xp6(2),e.Q6J("disabled",!c.isCurrentFormValid$.value||c.submittedCheck),e.xp6(2),e.Q6J("ngIf",3===c.currentStep$.value)}}function re(a,s){1&a&&(e.ynx(0),e._uU(1," Update "),e.BQk())}function se(a,s){if(1&a){const c=e.EpF();e.ynx(0),e.TgZ(1,"div")(2,"button",36),e.NdJ("click",function(){e.CHM(c);const i=e.oxw();return i.onUpdate(),e.KtG(i.nextStep())}),e.TgZ(3,"span",34),e.YNc(4,re,2,0,"ng-container",25),e.qZA()()(),e.BQk()}if(2&a){const c=e.oxw();e.xp6(2),e.Q6J("disabled",!c.isCurrentFormValid$.value||c.submittedCheck),e.xp6(2),e.Q6J("ngIf",3===c.currentStep$.value)}}const N=function(a,s){return{current:a,completed:s}},ce=function(a){return{current:a}};let w=(()=>{var a;class s{constructor(t,i,n,d,l,p,r,u){(0,o.Z)(this,"cdr",void 0),(0,o.Z)(this,"api",void 0),(0,o.Z)(this,"toast",void 0),(0,o.Z)(this,"sharedService",void 0),(0,o.Z)(this,"spinner",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"http",void 0),(0,o.Z)(this,"templateService",void 0),(0,o.Z)(this,"formsCount",3),(0,o.Z)(this,"account$",new D.X(m)),(0,o.Z)(this,"currentStep$",new D.X(1)),(0,o.Z)(this,"isCurrentFormValid$",new D.X(!1)),(0,o.Z)(this,"uploadedFile$",new D.X(null)),(0,o.Z)(this,"dropzoneInstance$",new D.X(null)),(0,o.Z)(this,"extractDevices",void 0),(0,o.Z)(this,"listofPowerboardIds",void 0),(0,o.Z)(this,"powerBoardIdsForAcroll",void 0),(0,o.Z)(this,"loadPB",new e.vpe),(0,o.Z)(this,"submitConfirm",new e.vpe),(0,o.Z)(this,"editConfirm",new e.vpe),(0,o.Z)(this,"step1Component",void 0),(0,o.Z)(this,"unsubscribe",[]),(0,o.Z)(this,"SK_clientID",void 0),(0,o.Z)(this,"maxlength",500),(0,o.Z)(this,"readBackCheck",!1),(0,o.Z)(this,"submittedCheck",!1),(0,o.Z)(this,"powerBoardID",void 0),(0,o.Z)(this,"lookup_data_temp1",[]),(0,o.Z)(this,"isNewModel",!1),(0,o.Z)(this,"updateAccount",(h,v)=>{const _={...this.account$.value,...h};this.account$.next(_),this.isCurrentFormValid$.next(v)}),this.cdr=t,this.api=i,this.toast=n,this.sharedService=d,this.spinner=l,this.router=p,this.http=r,this.templateService=u}ngOnInit(){const t=this.sharedService.getLoggedUserDetails();this.SK_clientID=t.attributes["custom:clientID"],this.fetchPBData(1)}nextStep(){const t=this.currentStep$.value+1;t>this.formsCount||this.currentStep$.next(t)}prevStep(){const t=this.currentStep$.value-1;0!==t&&this.currentStep$.next(t)}ngOnDestroy(){this.uploadedFile$.next(null),this.uploadedFile$.complete(),this.unsubscribe.forEach(t=>t.unsubscribe())}readBack(t){if(m.PK=t.PK,m.SK=t.SK,m.company=t.company||"",m.name=t.name||"",m.description=t.description||"",m.gstIN=t.gstIN||"",m.gstPercentage=t.gstPercentage||0,m.fromDetails=t.fromDetails||"",m.toDetails=t.toDetails||"",m.otherCharges=t.otherCharges||[],m.days=t.days||0,m.template=t.template||"",t.metadata)if("string"==typeof t.metadata)try{m.metadata=JSON.stringify(JSON.parse(t.metadata))}catch(i){console.error("Invalid JSON string in metadata",i),m.metadata=JSON.stringify({})}else m.metadata=JSON.stringify(t.metadata);else m.metadata=JSON.stringify({});console.log("inits",m),this.account$.next(m),this.readBackCheck=!0,this.cdr.detectChanges(),this.currentStep$.next(1)}onSubmit(){this.powerBoardID=this.account$.value.PK,this.createNewPowerBoard()}createNewPowerBoard(){let t;t={PK:this.account$.value.PK,SK:this.SK_clientID,company:this.account$.value.company,name:this.account$.value.name,description:this.account$.value.description,gstIN:this.account$.value.gstIN,gstPercentage:this.account$.value.gstPercentage,fromDetails:this.account$.value.fromDetails,toDetails:this.account$.value.toDetails,otherCharges:this.account$.value.otherCharges||[],days:this.account$.value.days,template:this.account$.value.template,metadata:JSON.stringify(this.account$.value.metadata||{})};const n=Math.ceil((new Date).getTime()/1e3),d={P1:this.account$.value.PK,P2:this.account$.value.name,P3:this.account$.value.company,P4:n,P5:this.account$.value.company};this.api.CreateBilling(t).then(l=>{l?(this.createLookUpPowerBoard(d,1),this.toast.open("Billing profile created successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})):alert("Error in Billing profileConfiguration")}).catch(l=>{console.log("err for creation",l),this.toast.open("Error in Billing profile Configuration","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}updateDynamicReport(){let t;t={PK:this.account$.value.PK,SK:this.SK_clientID,company:this.account$.value.company,name:this.account$.value.name,description:this.account$.value.description,gstIN:this.account$.value.gstIN,gstPercentage:this.account$.value.gstPercentage,fromDetails:this.account$.value.fromDetails,toDetails:this.account$.value.toDetails,otherCharges:this.account$.value.otherCharges||[],days:this.account$.value.days,template:this.account$.value.template,metadata:JSON.stringify(this.account$.value.metadata||{})};const n=Math.ceil((new Date).getTime()/1e3),d={P1:this.account$.value.PK,P2:this.account$.value.name,P3:this.account$.value.description,P4:n,P5:this.account$.value.company};this.api.UpdateBilling(t).then(l=>{l?(this.fetchPowerBoardById(1,this.account$.value.PK,"update",d),this.toast.open("Billing Profile updated successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})):alert("Error in Updating Configuration")}).catch(l=>{console.log("Error in updating",l),this.toast.open("Error in Updating Configuration","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}createLookUpPowerBoard(t,i){this.api.GetLookupMasterTable(this.SK_clientID+"#billing",i).then(n=>{let d=[];if(null!=n&&n.items&&"string"==typeof n.items&&(d=JSON.parse(n.items)),null!=n&&d.length<this.maxlength){let l=[];n.items&&"string"==typeof n.items&&JSON.parse(n.items).forEach(u=>{for(const h in u)Object.prototype.hasOwnProperty.call(u,h)&&l.push(u[h])}),l.unshift(t),l=l.map((r,u)=>({[`L${u+1}`]:r})),console.log("newdata 11111111 :>> ",l);let p={PK:this.SK_clientID+"#billing",SK:n.SK,createdTime:"",updatedTime:"",items:JSON.stringify(l)};this.api.UpdateLookupMasterTable(p).then(r=>{console.log("createResponse :>> ",r),this.submitConfirm.emit("submit")}).catch(r=>{console.log("err :>> ",r)})}else if(null==n){let l=[];l.push(t),l=l.map((r,u)=>({[`L${u+1}`]:r}));let p={SK:i,PK:this.SK_clientID+"#billing",items:JSON.stringify(l)};this.api.CreateLookupMasterTable(p).then(r=>{this.submitConfirm.emit("submit")}).catch(r=>{console.log("err :>> ",r)})}else this.createLookUpPowerBoard(t,i+1)})}enableSubmitButton(){this.submittedCheck=!1,this.cdr.detectChanges()}loadDashboard(t){this.router.navigate([`/TimeMachine/TemplateWorkLab/${this.account$.value.PK}`])}fetchPBData(t){var i=this;return(0,S.Z)(function*(){try{const n=yield i.api.GetLookupMasterTable(i.SK_clientID+"#billing",t);if(n&&n.items)if("string"==typeof n.items){let d=JSON.parse(n.items);if(Array.isArray(d)){for(let l=0;l<d.length;l++){const p=d[l];if(null==p)break;{const r=Object.keys(p)[0],{P1:u,P2:h,P3:v,P4:b,P5:_}=p[r];i.lookup_data_temp1.push([u,h,v,b,_])}}yield i.fetchPBData(t+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else i.lookup_data_temp1.sort((d,l)=>l[2]-d[2]),i.listofPowerboardIds=i.lookup_data_temp1.map(d=>d[0])}catch(n){console.error("Error:",n)}})()}newModel(){this.isNewModel=!0,m.PK="",m.SK="",m.company="",m.name="",m.description="",m.gstIN="",m.gstPercentage=0,m.fromDetails="",m.toDetails="",m.otherCharges=[],m.days=0,m.template="",m.metadata=JSON.stringify({}),this.account$.next(m),this.currentStep$.next(1),this.cdr.detectChanges(),this.spinner.hide("step1")}closeModal(){this.isNewModel=!1,this.readBackCheck=!1,this.currentStep$.next(1),this.cdr.detectChanges()}onUpdate(){this.updateDynamicReport()}showSpinner(){}fetchPowerBoardById(t,i,n,d){var l=this;return(0,S.Z)(function*(){try{const p=yield l.api.GetLookupMasterTable(l.SK_clientID+"#billing",t);if(p&&p.items){let r=yield JSON.parse(p.items),u=r.findIndex(h=>h[Object.keys(h)[0]].P1===i);if(-1!==u){if("update"===n){r[u][`L${u+1}`]=d;const v=[];for(let b=0;b<r.length;b++){const _=Object.keys(r[b])[0],y=`L${b+1}`;if(_){const P={[y]:r[b][_]},T=v.findIndex(I=>Object.keys(I)[0]===y);-1!==T?Object.assign(v[T][y],r[b][_]):v.push(P)}else console.error(`Original key not found for renaming in data[${b}].`)}r=v}else"delete"===n&&(r.splice(u,1),console.log("Data after deleted deleted",r));let h={PK:l.SK_clientID+"#billing",SK:p.SK,items:JSON.stringify(r)};yield l.api.UpdateLookupMasterTable(h),l.editConfirm.emit("edit")}else yield new Promise(h=>setTimeout(h,500)),yield l.fetchPowerBoardById(t+1,i,n,d)}else x().fire({position:"top-right",icon:"error",title:`ID ${i} not found`,showConfirmButton:!1,timer:1500})}catch(p){console.error("Error:",p)}})()}}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)(e.Y36(e.sBO),e.Y36(U.t),e.Y36(O.ux),e.Y36(A.F),e.Y36(k.t2),e.Y36(C.F0),e.Y36(F.eN),e.Y36(E.E))}),(0,o.Z)(s,"\u0275cmp",e.Xpm({type:a,selectors:[["app-billing-stepper"]],viewQuery:function(t,i){if(1&t&&e.Gf(J.J,5),2&t){let n;e.iGM(n=e.CRH())&&(i.step1Component=n.first)}},inputs:{extractDevices:"extractDevices",powerBoardIdsForAcroll:"powerBoardIdsForAcroll"},outputs:{loadPB:"loadPB",submitConfirm:"submitConfirm",editConfirm:"editConfirm"},decls:62,vars:18,consts:[["id","billingModal","tabindex","-1","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"ki-duotone","ki-cross","fs-1"],[1,"path1"],[1,"path2"],[1,"modal-body","py-lg-10","px-lg-10"],["id","kt_create_account_stepper",1,"stepper","stepper-pills","stepper-column","d-flex","flex-column","flex-xl-row","flex-row-fluid"],[1,"card","d-flex","justify-content-center","justify-content-xl-start","flex-row-auto","w-100","w-xl-300px","w-xxl-400px","me-9"],[1,"card-body","px-6","px-lg-10","px-xxl-15","py-20"],[1,"stepper-nav"],[1,"stepper-item",3,"ngClass"],[1,"stepper-wrapper"],[1,"stepper-icon","w-40px","h-40px"],[1,"stepper-check","fas","fa-check"],[1,"stepper-number"],[1,"stepper-label"],[1,"stepper-title"],[1,"stepper-desc","fw-semibold"],[1,"stepper-line","h-40px"],[1,"d-flex","flex-row-fluid","flex-center","bg-body","rounded"],["noValidate","","id","kt_create_account_form",1,"py-20","w-100","w-xl-700px","px-9"],[1,"current"],[4,"ngIf"],[1,"d-flex","flex-stack","pt-10"],[1,"mr-2"],[1,"w-100",3,"updateParentModel","defaultValues","isEditMode","enableSubmitButton"],[1,"w-100",3,"updateParentModel","defaultValues"],[1,"w-100",3,"updateParentModel","defaultValues","readBackCheck"],["type","button",1,"btn","btn-lg","btn-light-primary","me-3",3,"click"],[1,"fa-solid","fa-arrow-left"],["type","button",1,"btn","btn-lg","btn-primary","me-3",3,"disabled","click"],[1,"indicator-label"],[1,"fa-solid","fa-chevron-right"],["type","button",1,"btn","fw-bold","btn-lg","btn-primary","me-3",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),e._uU(5,"Create Billing Profile"),e.qZA(),e.TgZ(6,"div",4),e.NdJ("click",function(){return i.closeModal()}),e.TgZ(7,"i",5),e._UZ(8,"span",6)(9,"span",7),e.qZA()()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),e._UZ(18,"i",16),e.TgZ(19,"span",17),e._uU(20,"1"),e.qZA()(),e.TgZ(21,"div",18)(22,"h3",19),e._uU(23,"Billing Profile Details"),e.qZA(),e.TgZ(24,"div",20),e._uU(25,"Provide the basic details of your billing profile, such as ID, Company Name, and Billing Profile Name."),e.qZA()()(),e._UZ(26,"div",21),e.qZA(),e.TgZ(27,"div",13)(28,"div",14)(29,"div",15),e._UZ(30,"i",16),e.TgZ(31,"span",17),e._uU(32,"2"),e.qZA()(),e.TgZ(33,"div",18)(34,"h3",19),e._uU(35,"Billing Profile Settings"),e.qZA(),e.TgZ(36,"div",20),e._uU(37,"Configure the GST, additional charges, and template options for your billing profile."),e.qZA()()(),e._UZ(38,"div",21),e.qZA(),e.TgZ(39,"div",13)(40,"div",14)(41,"div",15),e._UZ(42,"i",16),e.TgZ(43,"span",17),e._uU(44,"3"),e.qZA()(),e.TgZ(45,"div",18)(46,"h3",19),e._uU(47,"Meta Data Fill and Submit"),e.qZA(),e.TgZ(48,"div",20),e._uU(49,"Fill in the metadata as key-value pairs and submit your billing profile."),e.qZA()()()()()()(),e.TgZ(50,"div",22)(51,"form",23)(52,"div",24),e.YNc(53,ee,2,3,"ng-container",25),e.YNc(54,te,2,2,"ng-container",25),e.YNc(55,ie,2,3,"ng-container",25),e.qZA(),e.TgZ(56,"div",26)(57,"div",27),e.YNc(58,oe,4,0,"ng-container",25),e.qZA(),e.YNc(59,ne,6,1,"ng-container",25),e.YNc(60,le,5,2,"ng-container",25),e.YNc(61,se,5,2,"ng-container",25),e.qZA()()()()()()()()),2&t&&(e.xp6(15),e.Q6J("ngClass",e.WLB(10,N,1===i.currentStep$.value,i.currentStep$.value>1)),e.xp6(12),e.Q6J("ngClass",e.WLB(13,N,2===i.currentStep$.value,i.currentStep$.value>2)),e.xp6(12),e.Q6J("ngClass",e.VKq(16,ce,3===i.currentStep$.value)),e.xp6(14),e.Q6J("ngIf",1===i.currentStep$.value&&i.readBackCheck||1===i.currentStep$.value&&i.isNewModel),e.xp6(1),e.Q6J("ngIf",2===i.currentStep$.value),e.xp6(1),e.Q6J("ngIf",3===i.currentStep$.value),e.xp6(3),e.Q6J("ngIf",1!==i.currentStep$.value),e.xp6(1),e.Q6J("ngIf",3!==i.currentStep$.value),e.xp6(1),e.Q6J("ngIf",3===i.currentStep$.value&&!i.readBackCheck),e.xp6(1),e.Q6J("ngIf",3===i.currentStep$.value&&i.readBackCheck))},dependencies:[Z.mk,Z.O5,f._Y,f.JL,f.F,j,X,z]})),s})();var de=g(74260),pe=g(18704);function ue(a,s){if(1&a){const c=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){e.CHM(c);const i=e.oxw();return e.KtG(i.openModal())}),e.TgZ(1,"a",18),e._UZ(2,"app-keenicon",19),e._uU(3," Create Profile "),e.qZA()()}}function me(a,s){1&a&&(e.TgZ(0,"tr",20)(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Description"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Company"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Updated At"),e.qZA(),e.TgZ(11,"th",21),e._uU(12,"Edit"),e.qZA(),e.TgZ(13,"th",21),e._uU(14,"Delete"),e.qZA()())}function fe(a,s){1&a&&(e.TgZ(0,"tr",20)(1,"th"),e._uU(2,"ID"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Description"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Company"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Updated At"),e.qZA()())}let q=(()=>{var a;class s{constructor(t,i,n,d,l,p){(0,o.Z)(this,"api",void 0),(0,o.Z)(this,"sharedService",void 0),(0,o.Z)(this,"cdr",void 0),(0,o.Z)(this,"spinner",void 0),(0,o.Z)(this,"locationPermissionService",void 0),(0,o.Z)(this,"router",void 0),(0,o.Z)(this,"billingStepperComponent",void 0),(0,o.Z)(this,"hideDeleteButton",!0),(0,o.Z)(this,"getLoggedUser",void 0),(0,o.Z)(this,"SK_clientID",void 0),(0,o.Z)(this,"user_companyID",void 0),(0,o.Z)(this,"username",void 0),(0,o.Z)(this,"extractDevices",[]),(0,o.Z)(this,"lookup_data_temp_bill",[]),(0,o.Z)(this,"listofDRIds",void 0),(0,o.Z)(this,"maxlength",void 0),(0,o.Z)(this,"powerboard_table",[]),(0,o.Z)(this,"columnDatatable",void 0),(0,o.Z)(this,"pbTableData",void 0),(0,o.Z)(this,"isModalOpen",!1),(0,o.Z)(this,"routerSubscription",void 0),(0,o.Z)(this,"allPermissions_user",void 0),(0,o.Z)(this,"hidingLink",!0),this.api=t,this.sharedService=i,this.cdr=n,this.spinner=d,this.locationPermissionService=l,this.router=p}ngOnInit(){this.getLoggedUser=this.sharedService.getLoggedUserDetails(),this.SK_clientID=this.getLoggedUser.attributes["custom:clientID"],this.user_companyID=this.getLoggedUser.attributes["custom:companyID"],this.username=this.getLoggedUser.attributes["custom:username"];const t=localStorage.getItem("permissionDetails");this.allPermissions_user=t?JSON.parse(t):[],this.loadInitData(),this.routerSubscription=this.router.events.subscribe(i=>{})}ngAfterViewInit(){}checkPermission(){const t=this.allPermissions_user,i=t.includes("DynamicHtmlTemplate - Update"),n=t.includes("DynamicHtmlTemplate - View");this.hidingLink=i,console.log("CHECK PERMISSION - Update:",i),console.log("CHECK PERMISSION - View:",n),i||n?this.hideDeleteButton=i:(console.warn("User lacks required permissions. Redirecting to 404."),this.router.navigate(["/404"]))}loadInitData(){var t=this;return(0,S.Z)(function*(){t.spinner.show();try{t.extractValidDevices(),yield Promise.all([t.fetchDRData_redirect(1)]),console.log("All data loaded successfully")}catch(i){console.error("Error loading data:",i)}})()}extractValidDevices(){this.locationPermissionService.fetchGlobalLocationTree().then(t=>{if(!t)throw new Error("No data returned");t.forEach(i=>{"device"===i.node_type&&(Array.isArray(i.text)&&(i.text=i.text[0]),this.extractDevices.push({mn:i.mn,label:i.text+"-"+i.mn}))}),console.log("Extracted Devices:",this.extractDevices)}).catch(t=>{console.error("Failed to fetch or process data",t)})}fetchDRData_redirect(t){var i=this;return(0,S.Z)(function*(){yield i.coreFetchData("billing",t,"lookup_data_temp_bill","desc")})()}coreFetchData(t,i,n,d){var l=this;return(0,S.Z)(function*(){try{const p=yield l.api.GetLookupMasterTable(`${l.SK_clientID}#${t}`,i);if(p&&p.items)if("string"==typeof p.items){const r=JSON.parse(p.items);if(Array.isArray(r)){for(const u of r)if(u){const h=Object.keys(u)[0],{P1:v,P2:b,P3:_,P4:y,P5:P}=u[h];l[n].push([v,b,_,y,P])}yield l.coreFetchData(t,i+1,n,d)}else console.error("Invalid data format - not an array.")}else console.error("response.items is not a string.");else l[n].sort((r,u)=>"asc"===d?r[3]-u[3]:u[3]-r[3]),"billing"===t&&(l.listofDRIds=l[n].map(r=>r[0]),console.log("checkk",l.lookup_data_temp_bill),l.showDatatable(l.lookup_data_temp_bill))}catch(p){l.spinner.hide(),console.error(`Error in coreFetchData for ${t}:`,p)}})()}createLookUpDynamicReport(t,i){this.api.GetLookupMasterTable(this.SK_clientID+"#billing",i).then(n=>{let d=[];if(null!=n&&n.items&&"string"==typeof n.items&&(d=JSON.parse(n.items)),null!=n&&d.length<this.maxlength){let l=[];n.items&&"string"==typeof n.items&&JSON.parse(n.items).forEach(u=>{for(const h in u)Object.prototype.hasOwnProperty.call(u,h)&&l.push(u[h])}),l.unshift(t),l=l.map((r,u)=>({[`L${u+1}`]:r})),console.log("newdata 11111111 :>> ",l);let p={PK:this.SK_clientID+"#billing",SK:n.SK,createdTime:"",updatedTime:"",items:JSON.stringify(l)};this.api.UpdateLookupMasterTable(p).then(r=>{console.log("createResponse :>> ",r)}).catch(r=>{console.log("err :>> ",r)})}else if(null==n){let l=[];l.push(t),l=l.map((r,u)=>({[`L${u+1}`]:r}));let p={SK:i,PK:this.SK_clientID+"#billing",items:JSON.stringify(l)};this.api.CreateLookupMasterTable(p).then(r=>{}).catch(r=>{})}else this.createLookUpDynamicReport(t,i+1)})}fetchPowerBoardById(t,i,n,d){var l=this;return(0,S.Z)(function*(){try{const p=yield l.api.GetLookupMasterTable(l.SK_clientID+"#billing",t);if(p&&p.items){let r=yield JSON.parse(p.items),u=r.findIndex(h=>h[Object.keys(h)[0]].P1===i);if(-1!==u){if("update"===n){r[u][`L${u+1}`]=d;const v=[];for(let b=0;b<r.length;b++){const _=Object.keys(r[b])[0],y=`L${b+1}`;if(_){const P={[y]:r[b][_]},T=v.findIndex(I=>Object.keys(I)[0]===y);-1!==T?Object.assign(v[T][y],r[b][_]):v.push(P)}else console.error(`Original key not found for renaming in data[${b}].`)}r=v}else"delete"===n&&(r.splice(u,1),console.log("Data after deleted deleted",r));let h={PK:l.SK_clientID+"#billing",SK:p.SK,items:JSON.stringify(r)};yield l.api.UpdateLookupMasterTable(h)}else yield new Promise(h=>setTimeout(h,500)),yield l.fetchPowerBoardById(t+1,i,n,d)}else x().fire({position:"top-right",icon:"error",title:`ID ${i} not found`,showConfirmButton:!1,timer:1500})}catch(p){console.error("Error:",p)}})()}createNewDynamicReport(t){}updateDynamicReport(t){}deleteDynamicReport(t){if(t?.id){const i={PK:t.id,SK:this.SK_clientID},d={P1:t.id,P2:t.name,P3:t.fileName,P4:Math.ceil((new Date).getTime()/1e3)};x().fire({position:"center",title:"Are you sure?",text:"You won\u2019t get these details back again",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think",allowOutsideClick:!1}).then(l=>{l.isConfirmed?this.api.DeleteBilling(i).then(()=>{this.fetchPowerBoardById(1,t.id,"delete",d),x().fire("Removed!","Powerboard removed successfully.","success");const p=this.lookup_data_temp_bill.findIndex(r=>r[0]===t.id);this.lookup_data_temp_bill.splice(p,1),console.log("lookup_data_temp_pb :>> ",this.lookup_data_temp_bill),this.showDatatable(this.lookup_data_temp_bill)}).catch(p=>console.error("Delete error:",p)):x().fire("Cancelled","Powerboard not removed","error")})}}goToWorkSpace(t){}showDatatable(t){this.columnDatatable=[{data:"id"},{data:"name"},{data:"fileName"},{data:"type"},{data:"updatedData"}];let n="btn btn-sm btn-primary editdelete ",l="btn btn-sm btn-danger editdelete ";if(this.powerboard_table=[],typeof t<"u")for(let r=0;r<t.length;r++){let _=t[r][3];this.powerboard_table.push({id:t[r][0],name:t[r][1],fileName:t[r][2],type:t[r][4],updatedData:new Date(1e3*_).toDateString()+" "+new Date(1e3*_).toLocaleTimeString()})}else this.powerboard_table=[];$("#billing_table").off("click"),$("#billing_table").on("click",".editdelete",function(){let r=$(this).closest("tr"),u=p.pbTableData.row(r);this.className==l&&p.deleteDynamicReport(u.data()),this.className==n&&(p.editHelper(u.data()),this.captureStatus=!1)}),!0===this.hideDeleteButton?this.columnDatatable.push({defaultContent:"<button class='"+n+"' data-bs-toggle='modal' data-bs-target='#billingModal' ><i class='fa fa-edit'></i></button>"},{defaultContent:"<button class='"+l+"'><i class='fa fa-trash'></i></button>"}):this.columnDatatable.push({defaultContent:"<button class='btn btn-sm btn-primary editdelete' data-bs-dismiss='modal' ><i class='fa-solid fa-flask'></i></button>"}),this.getLookupTableData(this.powerboard_table,this.columnDatatable);let p=this}getLookupTableData(t,i){this.pbTableData=$("#billing_table").DataTable({pagingType:"full_numbers",destroy:!0,lengthChange:!0,responsive:!0,data:t,order:[[3,"date"]],columnDefs:[{type:"date",targets:3}],columns:i,drawCallback:function(){$("div.dataTables_wrapper").css("margin","0")}}),this.spinner.hide()}openModal(){this.billingStepperComponent.showSpinner(),this.isModalOpen=!0,this.billingStepperComponent.newModel()}closeModal(){this.isModalOpen=!1}editHelper(t){this.billingStepperComponent.showSpinner(),this.api.GetBilling(t.id,this.SK_clientID).then(i=>{i&&(this.billingStepperComponent.readBack(i),this.cdr.detectChanges())})}onConfirmSubmit(t){this.lookup_data_temp_bill=[],this.fetchDRData_redirect(1)}onConfirmUpdate(t){this.lookup_data_temp_bill=[],this.fetchDRData_redirect(1)}handleXlsxAction(t){switch(t){case"upload":this.openUploadModal();break;case"update":this.openUpdateModal();break;case"download":this.downloadXlsx();break;default:console.log("Unknown action:",t)}}openUploadModal(){console.log("Opening upload modal...")}openUpdateModal(){console.log("Opening update modal...")}downloadXlsx(){this.api.BatchGetBilling([{PK:"electricity",SK:"joy_clientID"},{PK:"new",SK:"joy_clientID"}]).then(i=>{console.log("profiles :>> ",i)}).catch(i=>{console.error(i)}),console.log("Downloading XLSX...")}}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)(e.Y36(U.t),e.Y36(A.F),e.Y36(e.sBO),e.Y36(k.t2),e.Y36(de.G),e.Y36(C.F0))}),(0,o.Z)(s,"\u0275cmp",e.Xpm({type:a,selectors:[["app-billing-config"]],viewQuery:function(t,i){if(1&t&&e.Gf(w,5),2&t){let n;e.iGM(n=e.CRH())&&(i.billingStepperComponent=n.first)}},decls:23,vars:5,consts:[["id","kt_wrapper",1,"d-flex","flex-column","flex-row-fluid","wrapper"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[1,"d-flex","flex-column-fluid"],[1,"container"],[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"card-toolbar","d-flex","justify-content-end","align-items-center","w-100"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-trigger","hover","title","Click to add a Model",3,"click",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],["id","billing_table",1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4"],["class","fw-bolder",4,"ngIf"],[3,"extractDevices","submitConfirm","editConfirm","loadPB"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-trigger","hover","title","Click to add a Model",3,"click"],["data-bs-toggle","modal","data-bs-target","#billingModal",1,"btn","btn-sm","btn-light-primary"],["name","plus",1,"fs-3"],[1,"fw-bolder"],[1,"w-100px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6)(7,"span",7),e._uU(8,"Billing Profile Creator"),e.qZA()(),e.TgZ(9,"div",8)(10,"div"),e.YNc(11,ue,4,0,"div",9),e.qZA()()(),e.TgZ(12,"div",10)(13,"div",11)(14,"table",12)(15,"thead"),e.YNc(16,me,15,0,"tr",13),e.YNc(17,fe,11,0,"tr",13),e.qZA(),e._UZ(18,"tbody"),e.qZA()()()()()()()(),e.TgZ(19,"app-billing-stepper",14),e.NdJ("submitConfirm",function(d){return i.onConfirmSubmit(d)})("editConfirm",function(d){return i.onConfirmUpdate(d)})("loadPB",function(d){return i.goToWorkSpace(d)}),e.qZA(),e.TgZ(20,"ngx-spinner",15)(21,"p",16),e._uU(22,"loading Billing Profiles... "),e.qZA()()),2&t&&(e.xp6(11),e.Q6J("ngIf",i.hidingLink),e.xp6(5),e.Q6J("ngIf",!0===i.hideDeleteButton),e.xp6(1),e.Q6J("ngIf",!1===i.hideDeleteButton),e.xp6(2),e.Q6J("extractDevices",i.extractDevices),e.xp6(1),e.Q6J("fullScreen",!0))},dependencies:[Z.O5,pe.q,k.Ro,w]})),s})();const he=[{path:"",component:q,pathMatch:"full"},{path:"config",component:q},{path:"stepper",component:w},{path:"xlsx",component:(()=>{var a;class s{}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)}),(0,o.Z)(s,"\u0275cmp",e.Xpm({type:a,selectors:[["app-billing-xlsx"]],decls:2,vars:0,template:function(t,i){1&t&&(e.TgZ(0,"p"),e._uU(1,"billing-xlsx works!"),e.qZA())}})),s})()}];let ge=(()=>{var a;class s{}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)}),(0,o.Z)(s,"\u0275mod",e.oAB({type:a})),(0,o.Z)(s,"\u0275inj",e.cJS({imports:[C.Bz.forChild(he),C.Bz]})),s})();var be=g(94955);let ve=(()=>{var a;class s{}return a=s,(0,o.Z)(s,"\u0275fac",function(t){return new(t||a)}),(0,o.Z)(s,"\u0275mod",e.oAB({type:a})),(0,o.Z)(s,"\u0275inj",e.cJS({imports:[Z.ez,ge,f.u5,be.m,f.UX,k.ef]})),s})()},6472:(M,B,g)=>{g.d(B,{l:()=>o});class o{static noSpaceAllowed(C){return C.value.indexOf(" ")>=0?(console.log("important Space",C.value),{noSpaceAllowed:!0}):null}}}}]);