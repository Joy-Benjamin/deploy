(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[8913],{68701:(oe,ue,re)=>{"use strict";re.d(ue,{a:()=>ke});var O=re(86656),S=re(69025),m=re(65879),X=re(96814),x=re(18704);function z(me,l){if(1&me&&(m.TgZ(0,"span",41),m._uU(1),m.qZA()),2&me){const Me=m.oxw();m.xp6(1),m.Oqu(null==Me.alertData||null==Me.alertData.Extra_Data?null:Me.alertData.Extra_Data.Alert_ID)}}function H(me,l){if(1&me&&(m.TgZ(0,"div",42)(1,"h3",43),m._uU(2),m.qZA()()),2&me){const Me=m.oxw();m.xp6(1),m.Q6J("ngClass",Me.setMyStyles1),m.xp6(1),m.hij("Alert Status: ",null==Me.alertData||null==Me.alertData.Extra_Data?null:Me.alertData.Extra_Data.status,"")}}function G(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(" : ",null==Me.alertData?null:Me.alertData.Device_Label,"")}}function D(me,l){if(1&me&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2," Device Info "),m.qZA(),m.YNc(3,G,3,1,"div",46),m.qZA()),2&me){const Me=m.oxw();m.xp6(3),m.Q6J("ngIf",Me.alertData)}}function U(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(": ",null==Me.alertData?null:Me.alertData.Alert_text,"")}}function R(me,l){if(1&me&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"About Alert"),m.qZA(),m.YNc(3,U,3,1,"div",46),m.qZA()),2&me){const Me=m.oxw();m.xp6(3),m.Q6J("ngIf",Me.alertData)}}function T(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(": ",null==Me.alertData?null:Me.alertData.Reason,"")}}function N(me,l){if(1&me&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Reason"),m.qZA(),m.YNc(3,T,3,1,"div",46),m.qZA()),2&me){const Me=m.oxw();m.xp6(3),m.Q6J("ngIf",Me.alertData)}}function L(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(": ",null==Me.alertData?null:Me.alertData.Alert_Value,"")}}function Y(me,l){if(1&me&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Triggered Value"),m.qZA(),m.YNc(3,L,3,1,"div",46),m.qZA()),2&me){const Me=m.oxw();m.xp6(3),m.Q6J("ngIf",Me.alertData)}}function ee(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(": ",null==Me.alertData||null==Me.alertData.Extra_Data?null:Me.alertData.Extra_Data.Created_Time,"")}}function te(me,l){if(1&me&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Created At"),m.qZA(),m.YNc(3,ee,3,1,"div",46),m.qZA()),2&me){const Me=m.oxw();m.xp6(3),m.Q6J("ngIf",Me.alertData)}}function pe(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(": ",null==Me.alertData||null==Me.alertData.Extra_Data?null:Me.alertData.Extra_Data.Updated_Time,"")}}function we(me,l){if(1&me&&(m.TgZ(0,"div",17)(1,"div",18)(2,"span",19),m._UZ(3,"app-keenicon",49),m.qZA()(),m.TgZ(4,"div",21)(5,"div",44)(6,"label",45),m._uU(7,"Updated At "),m.qZA(),m.YNc(8,pe,3,1,"div",46),m.qZA()()()),2&me){const Me=m.oxw();m.xp6(8),m.Q6J("ngIf",Me.alertData)}}function Te(me,l){if(1&me&&(m.TgZ(0,"div",47)(1,"span",48),m._uU(2),m.qZA()()),2&me){const Me=m.oxw(2);m.xp6(2),m.hij(": ",null==Me.alertData||null==Me.alertData.Extra_Data?null:Me.alertData.Extra_Data.Duration,"")}}function ge(me,l){if(1&me&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Duration "),m.qZA(),m.YNc(3,Te,3,1,"div",46),m.qZA()),2&me){const Me=m.oxw();m.xp6(3),m.Q6J("ngIf",Me.alertData)}}function Ce(me,l){if(1&me&&(m.TgZ(0,"tr")(1,"td")(2,"a",51),m._uU(3),m.qZA()(),m.TgZ(4,"td")(5,"a",51),m._uU(6),m.qZA()(),m.TgZ(7,"td")(8,"a",51),m._uU(9),m.qZA()()()),2&me){const Me=l.$implicit;m.xp6(3),m.hij(" ",Me.label," "),m.xp6(3),m.hij(" ",Me.latest_value," "),m.xp6(3),m.hij(" ",Me.incident_value," ")}}function Oe(me,l){if(1&me&&(m.TgZ(0,"tbody"),m.YNc(1,Ce,10,3,"tr",50),m.qZA()),2&me){const Me=m.oxw();m.xp6(1),m.Q6J("ngForOf",null==Me.alertData||null==Me.alertData.Extra_Data?null:Me.alertData.Extra_Data.Binding_parameter)}}function je(me,l){if(1&me&&m._UZ(0,"map-marker",56,57),2&me){const Me=l.$implicit,Ze=m.oxw(3);m.Q6J("position",Me)("options",Ze.markerOptions)}}function Ue(me,l){if(1&me&&(m.TgZ(0,"google-map",54),m.ynx(1),m.YNc(2,je,2,2,"map-marker",55),m.BQk(),m.qZA()),2&me){const Me=m.oxw(2);m.Q6J("height",400)("width",350)("center",Me.Cordinates[0])("zoom",5)("options",Me.mapOptions),m.xp6(2),m.Q6J("ngForOf",Me.Cordinates)}}function Le(me,l){if(1&me&&(m.TgZ(0,"div",52)(1,"div"),m.YNc(2,Ue,3,6,"google-map",53),m.qZA()()),2&me){const Me=m.oxw();m.xp6(2),m.Q6J("ngIf",Me.showMap)}}let ke=(()=>{var me;class l{constructor(Ze){(0,O.Z)(this,"cd",void 0),(0,O.Z)(this,"alertData",void 0),(0,O.Z)(this,"previousData",void 0),(0,O.Z)(this,"darkThemeStyles",[]),(0,O.Z)(this,"markerOptions",void 0),(0,O.Z)(this,"mapOptions",void 0),(0,O.Z)(this,"info",void 0),(0,O.Z)(this,"center",{lat:12.9716,lng:77.5946}),(0,O.Z)(this,"zoom",1),(0,O.Z)(this,"display",void 0),(0,O.Z)(this,"markerPositions",[]),(0,O.Z)(this,"positionArray",[]),(0,O.Z)(this,"disabled",!1),(0,O.Z)(this,"max",100),(0,O.Z)(this,"min",0),(0,O.Z)(this,"showTicks",!1),(0,O.Z)(this,"step",1),(0,O.Z)(this,"thumbLabel",!1),(0,O.Z)(this,"value",0),(0,O.Z)(this,"previousCordinates",void 0),(0,O.Z)(this,"mapKey",void 0),(0,O.Z)(this,"showMap",!0),this.cd=Ze}ngOnChanges(Ze){this.reinitializeMap()}ngAfterViewInit(){this.reinitializeMap()}get setMyStyles1(){let Ze={};return this.alertData&&"Active"===this.alertData?.Extra_Data?.status?Ze="text-danger badge-light-danger":this.alertData&&"Closed"===this.alertData?.Extra_Data?.status&&(Ze="text-success badge-light-success"),Ze}get Cordinates(){if(this.alertData&&this.alertData.Extra_Data){const Ze=this.alertData.Extra_Data.Binding_parameter;if(this.previousData===Ze)return this.previousCordinates;let ut={lat:0,lng:0};if(Ze)return Ze.forEach($e=>{/lat/i.test($e.label)?ut.lat=$e.incident_value:/lng/i.test($e.label)&&(ut.lng=$e.incident_value)}),this.previousData=Ze,this.previousCordinates=[ut],[ut]}return[]}trackByFn(Ze,ut){return ut.lat+"-"+ut.lng}reinitializeMap(){this.showMap=!1,this.cd.detectChanges(),setTimeout(()=>{this.showMap=!0,this.cd.detectChanges()},0)}}return me=l,(0,O.Z)(l,"\u0275fac",function(Ze){return new(Ze||me)(m.Y36(m.sBO))}),(0,O.Z)(l,"\u0275cmp",m.Xpm({type:me,selectors:[["app-alert-info-modal"]],viewQuery:function(Ze,ut){if(1&Ze&&m.Gf(S.ch,5),2&Ze){let $e;m.iGM($e=m.CRH())&&(ut.info=$e.first)}},inputs:{alertData:"alertData"},features:[m.TTD],decls:74,vars:12,consts:[["id","alert_info_tm","aria-labelledby","alert_info_tm",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content",2,"width","900px","transform","translate(-20%, 0px)"],[1,"modal-header"],[1,"modal-title"],["class","btn btn-sm btn-dark fw-bolder ms-2 fs-8 py-1 px-3",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"card","shadow-none","rounded-0","w-100"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto",2,"justify-content","space-between"],[1,"card-body","pt-5"],["id","kt_wrapper",1,"col-lg-12","col-xl-12","col-md-12","mb-3","card","p-2",3,"ngClass"],[1,"d-flex","container","justify-content-between","py-1"],[1,"d-flex"],[1,"container"],[1,"row"],["class","col","style","align-items: center;",4,"ngIf"],[1,"d-flex","align-items-center","mb-2"],[1,"symbol","symbol-60px","me-5"],[1,"symbol-label","bg-light-primary"],["name","devices",1,"fs-2x","text-primary"],[1,"d-flex","flex-column","col-md-12"],["class","row mb-1 ",4,"ngIf"],["name","book-square",1,"fs-2x","text-primary"],["name","information-4",1,"fs-2x","text-primary"],["name","double-check",1,"fs-2x","text-primary"],["name","calendar-add",1,"fs-2x","text-primary"],["class","d-flex align-items-center  mb-2",4,"ngIf"],["name","timer",1,"fs-2x","text-primary"],[1,"modal-footer"],[1,"card","mb-5","mb-xl-12"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"card-body","py-3","row"],[1,"table-responsive","col-md-6"],[1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"fw-bolder","text-muted","bg-light"],[1,"min-w-125px"],[4,"ngIf"],["class","container col-md-6 p-1","style","display: flex; justify-content: space-between; padding-right: 0px;",4,"ngIf"],[1,"btn","btn-sm","btn-dark","fw-bolder","ms-2","fs-8","py-1","px-3"],[1,"col",2,"align-items","center"],[3,"ngClass"],[1,"row","mb-1"],[1,"col-lg-3","text-dark","text-hover-primary","fs-6","fw-bolder"],["class","col-lg-9",4,"ngIf"],[1,"col-lg-9"],[1,"fs-6","text-dark"],["name","calendar-edit",1,"fs-2x","text-primary"],[4,"ngFor","ngForOf"],["href","#",1,"text-dark","fw-bolder","text-hover-primary","d-block","mb-1","fs-6"],[1,"container","col-md-6","p-1",2,"display","flex","justify-content","space-between","padding-right","0px"],[3,"height","width","center","zoom","options",4,"ngIf"],[3,"height","width","center","zoom","options"],[3,"position","options",4,"ngFor","ngForOf"],[3,"position","options"],["marker","mapMarker"]],template:function(Ze,ut){1&Ze&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),m._uU(5,"Alerts Details - "),m.YNc(6,z,2,1,"span",5),m.qZA(),m._UZ(7,"button",6),m.qZA(),m.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"div",15),m.YNc(17,H,3,2,"div",16),m.qZA()()()()(),m.TgZ(18,"div",17)(19,"div",18)(20,"span",19),m._UZ(21,"app-keenicon",20),m.qZA()(),m.TgZ(22,"div",21),m.YNc(23,D,4,1,"div",22),m.qZA()(),m.TgZ(24,"div",17)(25,"div",18)(26,"span",19),m._UZ(27,"app-keenicon",23),m.qZA()(),m.TgZ(28,"div",21),m.YNc(29,R,4,1,"div",22),m.qZA()(),m.TgZ(30,"div",17)(31,"div",18)(32,"span",19),m._UZ(33,"app-keenicon",24),m.qZA()(),m.TgZ(34,"div",21),m.YNc(35,N,4,1,"div",22),m.qZA()(),m.TgZ(36,"div",17)(37,"div",18)(38,"span",19),m._UZ(39,"app-keenicon",25),m.qZA()(),m.TgZ(40,"div",21),m.YNc(41,Y,4,1,"div",22),m.qZA()(),m.TgZ(42,"div",17)(43,"div",18)(44,"span",19),m._UZ(45,"app-keenicon",26),m.qZA()(),m.TgZ(46,"div",21),m.YNc(47,te,4,1,"div",22),m.qZA()(),m.YNc(48,we,9,1,"div",27),m.TgZ(49,"div",17)(50,"div",18)(51,"span",19),m._UZ(52,"app-keenicon",28),m.qZA()(),m.TgZ(53,"div",21),m.YNc(54,ge,4,1,"div",22),m.qZA()()(),m.TgZ(55,"div",29)(56,"div",30)(57,"div",31)(58,"h3",32)(59,"span",33),m._uU(60,"Binding Parameters"),m.qZA()()(),m.TgZ(61,"div",34)(62,"div",35)(63,"table",36)(64,"thead")(65,"tr",37)(66,"th",38),m._uU(67,"Label"),m.qZA(),m.TgZ(68,"th",38),m._uU(69,"Latest Value"),m.qZA(),m.TgZ(70,"th",38),m._uU(71,"Incident Value"),m.qZA()()(),m.YNc(72,Oe,2,1,"tbody",39),m.qZA()(),m.YNc(73,Le,3,1,"div",40),m.qZA()()()()()()()()()),2&Ze&&(m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(6),m.Q6J("ngClass",ut.setMyStyles1),m.xp6(5),m.Q6J("ngIf",ut.alertData),m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(1),m.Q6J("ngIf",ut.alertData&&(null==ut.alertData||null==ut.alertData.Extra_Data?null:ut.alertData.Extra_Data.Created_Time)!==(null==ut.alertData||null==ut.alertData.Extra_Data?null:ut.alertData.Extra_Data.Updated_Time)),m.xp6(6),m.Q6J("ngIf",ut.alertData),m.xp6(18),m.Q6J("ngIf",ut.alertData),m.xp6(1),m.Q6J("ngIf",ut.Cordinates&&ut.Cordinates.length>0))},dependencies:[X.mk,X.sg,X.O5,S.b6,S.O_,x.q]})),l})()},64142:(oe,ue,re)=>{"use strict";re.d(ue,{T:()=>G});var O=re(86656),S=re(65879),m=re(56223),X=re(95195),x=re(93083);const z=["cronEditorDemo1"],H=["cronEditorDemo2"];let G=(()=>{var D;class U{constructor(T){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"timeSelectionControl",void 0),(0,O.Z)(this,"cronEditorDemo1",void 0),(0,O.Z)(this,"cronEditorDemo2",void 0),(0,O.Z)(this,"cronExpression","5/3 3 1/1 * *"),(0,O.Z)(this,"isCronDisabled",!1),(0,O.Z)(this,"cronOptions",{hideMinutesTab:!0,hideHourlyTab:!0,hideDailyTab:!1,hideWeeklyTab:!0,hideMonthlyTab:!0,hideYearlyTab:!0,hideAdvancedTab:!0,defaultTime:"",hideSpecificWeekDayTab:!0,hideSpecificMonthWeekTab:!0,use24HourTime:!0,hideSeconds:!0,cronFlavor:"standard"}),(0,O.Z)(this,"cronForm",void 0),this.fb=T}cronFlavorChange(){this.cronEditorDemo1.options=this.cronOptions,this.cronEditorDemo2.options=this.cronOptions}ngOnInit(){this.cronForm=this.fb.group({expression:[this.cronExpression]}),this.timeSelectionControl&&this.cronForm.get("expression")?.valueChanges.subscribe(T=>{this.timeSelectionControl.setValue(T)})}}return D=U,(0,O.Z)(U,"\u0275fac",function(T){return new(T||D)(S.Y36(m.qu))}),(0,O.Z)(U,"\u0275cmp",S.Xpm({type:D,selectors:[["app-cron-editor-tm"]],viewQuery:function(T,N){if(1&T&&(S.Gf(z,5),S.Gf(H,5)),2&T){let L;S.iGM(L=S.CRH())&&(N.cronEditorDemo1=L.first),S.iGM(L=S.CRH())&&(N.cronEditorDemo2=L.first)}},inputs:{timeSelectionControl:"timeSelectionControl"},decls:7,vars:2,consts:function(){let R;return R=$localize`Cron here...`,[[1,"mat-typography","demo-container","specific-component-container"],["appearance","outlined",1,"demo-card",3,"formGroup"],[1,"demo-card-content"],["formControlName","expression",3,"options"],["cronEditorDemo2",""],R]},template:function(T,N){1&T&&(S.TgZ(0,"section",0)(1,"form")(2,"mat-card",1)(3,"mat-card-content",2)(4,"cron-editor",3,4),S.SDv(6,5),S.qZA()()()()()),2&T&&(S.xp6(2),S.Q6J("formGroup",N.cronForm),S.xp6(2),S.Q6J("options",N.cronOptions))},dependencies:[m._Y,m.JJ,m.JL,m.F,m.sg,m.u,X.a8,X.dn,x.HA]})),U})()},1754:(oe,ue,re)=>{"use strict";re.d(ue,{x:()=>x});var O=re(86656),S=re(65619),m=re(65879),X=re(69862);let x=(()=>{var z;class H{constructor(D){(0,O.Z)(this,"http",void 0),(0,O.Z)(this,"apiUrl","https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/reports/dynamic-excel-reports"),(0,O.Z)(this,"uploadedFile$",new S.X(null)),this.http=D}uploadFileToS3(D,U){console.log("action :>> ",U),console.log("data :>> ",D);const R=this.uploadedFile$.value,T=new FileReader;T.onloadend=()=>{const N=T.result,Y={action:U,bucket:"dynamic-excel-reports",type:"xlsx",folder:`${D.SK}/${D.PK}`,fileName:D.file_name};switch(U){case"upload":case"update":if(!R)return void console.error("No file provided for upload or update");Y.fileName=R.name,Y.fileContent=N.split(",")[1];break;case"read":case"delete":Y.fileName=D.file_name,delete Y.fileContent;break;default:return void console.error("Unsupported action:",U)}this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",Y,{headers:{"Content-Type":"application/json","x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(ee=>{console.log(`${U} operation successful:`,ee)},ee=>{console.error(`${U} operation failed:`,ee)})},"upload"===U||"update"===U?T.readAsDataURL(R):T.onloadend=()=>{}}deleteFileFromS3(D){this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",{action:"delete",bucket:"dynamic-excel-reports",type:"xlsx",folder:`${D.SK}/${D.PK}`,fileName:D.file_name},{headers:{"Content-Type":"application/json","x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(T=>{console.log("File deleted successfully:",T)},T=>{console.error("File delete failed:",T)})}downloadFileFromS3(D){this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",{action:"download",bucket:"dynamic-excel-reports",type:"xlsx",folder:`${D.SK}/${D.PK}`,fileName:D.file_name},{headers:{"Content-Type":"application/json","x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(T=>{console.log("File downloaded successfully:",T)},T=>{console.error("File download failed:",T)})}uploadFile(D){this.uploadFileToS3(D,"upload")}readFile(D){this.uploadFileToS3(D,"read")}updateFile(D){this.uploadFileToS3(D,"update")}deleteFile(D){this.deleteFileFromS3(D)}downloadFile(D){this.downloadFileFromS3(D)}generateReport(D,U){return this.http.post(this.apiUrl,{body:U},{headers:{"Content-Type":"application/json","x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}})}}return z=H,(0,O.Z)(H,"\u0275fac",function(D){return new(D||z)(m.LFG(X.eN))}),(0,O.Z)(H,"\u0275prov",m.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"})),H})()},28613:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>DynamicTemplateWorkLabComponent});var _Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(15861),_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(86656),_angular_forms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(56223),grapesjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(10369),grapesjs_blocks_bootstrap4__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(33587),grapesjs_blocks_bootstrap4__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(grapesjs_blocks_bootstrap4__WEBPACK_IMPORTED_MODULE_0__),grapesjs_signature_pad__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52597),grapesjs_signature_pad__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(grapesjs_signature_pad__WEBPACK_IMPORTED_MODULE_1__),handlebars__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(28539),handlebars__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(handlebars__WEBPACK_IMPORTED_MODULE_2__),src_app_metronic_kt_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20759),moment__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(16676),moment__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__),sweetalert2__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(13519),sweetalert2__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_5__),html2pdf_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65364),html2pdf_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(html2pdf_js__WEBPACK_IMPORTED_MODULE_6__),number_to_words__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(74145),number_to_words__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(number_to_words__WEBPACK_IMPORTED_MODULE_7__),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(65879),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(14934),_angular_common_http__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(69862),src_services_reports_api_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(23365),_angular_router__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(64190),_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(22939),src_app_pages_shared_service__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5588),src_app_API_service__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(31552),_template_service__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(26131),ngx_spinner__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(88672),_angular_platform_browser__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(6593),_angular_common__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(96814),_metronic_shared_keenicon_keenicon_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(18704),ngx_select_ex__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(81127);const _c0=["generatePDF"];function DynamicTemplateWorkLabComponent_li_10_span_5_Template(oe,ue){1&oe&&_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(0,"span",60)}const _c1=function(oe){return{"btn-active-color-primary":oe}};function DynamicTemplateWorkLabComponent_li_10_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"li",11)(1,"a",57),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).$implicit,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw(),x=_angular_core__WEBPACK_IMPORTED_MODULE_11__.MAs(32);let z;return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.isReport?"Parameters"==(null==(z=X.reportForm.get("reportsType"))?null:z.value)?X.reportsBodyReady(x,m.title):X.reportsBodyReadyForSchedule(x,m.text):X.closeAllDrawers(m.title))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(2,"i"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(3,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(5,DynamicTemplateWorkLabComponent_li_10_span_5_Template,1,0,"span",59),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()}if(2&oe){const re=ue.$implicit,O=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("id",re.isReport?null:"kt_forms_toggle")("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_11__.VKq(9,_c1,O.isDrawerOpen&&!re.isReport||re.isReport)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.uIk("data-bs-toggle",re.isReport?null:"pill")("href",re.isReport?null:"#"+re.id,_angular_core__WEBPACK_IMPORTED_MODULE_11__.LSH)("role",re.isReport?null:"tab"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Tol(re.icon+" fs-5  p-1"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Oqu(re.text),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",O.isDrawerOpen)}}function DynamicTemplateWorkLabComponent_a_12_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"a",61),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(S.updateDynamicTemplate())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(1,"i",62),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(2,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(3,"Save"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()}}function DynamicTemplateWorkLabComponent_form_14_div_3_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div")(1,"small",65),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(2,"Please select a device."),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()())}function DynamicTemplateWorkLabComponent_form_14_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"form",null,63)(2,"ngx-select",64),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("ngModelChange",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.selectedDeviceForRdtType=S)})("select",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.liveDataChange(S))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(3,DynamicTemplateWorkLabComponent_form_14_div_3_Template,3,0,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()}if(2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.MAs(1),O=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngModel",O.selectedDeviceForRdtType)("allowClear",!1)("items",O.allDeviceWithSameRdt),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",(null==re.controls.device?null:re.controls.device.invalid)&&(null==re.controls.device?null:re.controls.device.touched))}}function DynamicTemplateWorkLabComponent_ng_template_31_option_19_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"option",88),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()),2&oe){const re=ue.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("value",re),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Oqu(re)}}function DynamicTemplateWorkLabComponent_ng_template_31_div_20_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",89),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(1," Report Type is required. "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA())}function DynamicTemplateWorkLabComponent_ng_template_31_option_28_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"option",88),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()),2&oe){const re=ue.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("value",re),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Oqu(re)}}function DynamicTemplateWorkLabComponent_ng_template_31_div_29_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",89),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(1," Date Type is required. "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA())}function DynamicTemplateWorkLabComponent_ng_template_31_div_30_div_5_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",89),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(1," Start Date and Time is required. "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA())}function DynamicTemplateWorkLabComponent_ng_template_31_div_30_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",76)(1,"label",77),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(2,"Start Date and Time"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(3,"div",78),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(4,"input",90),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(5,DynamicTemplateWorkLabComponent_ng_template_31_div_30_div_5_Template,2,0,"div",82),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw(2);let O;_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",(null==(O=re.reportForm.get("startDateTime"))?null:O.invalid)&&(null==(O=re.reportForm.get("startDateTime"))?null:O.touched))}}function DynamicTemplateWorkLabComponent_ng_template_31_div_31_div_5_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",89),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(1," End Date and Time is required. "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA())}function DynamicTemplateWorkLabComponent_ng_template_31_div_31_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",76)(1,"label",77),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(2,"End Date and Time"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(3,"div",78),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(4,"input",91),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(5,DynamicTemplateWorkLabComponent_ng_template_31_div_31_div_5_Template,2,0,"div",82),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw(2);let O;_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",(null==(O=re.reportForm.get("endDateTime"))?null:O.invalid)&&(null==(O=re.reportForm.get("endDateTime"))?null:O.touched))}}function DynamicTemplateWorkLabComponent_ng_template_31_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",66)(1,"h5",67),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(2,"Reports"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(3,"button",68),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.dismiss())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"div",69)(5,"div",70)(6,"div",71)(7,"div",72)(8,"h3",73),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(9,"Generate Report"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(10,"form",74),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("ngSubmit",function(){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(S.generateReport())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(11,"div",75)(12,"div",76)(13,"label",77),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(14,"Reports Type"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(15,"div",78)(16,"select",79)(17,"option",80),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(18,"Select Reports Type"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(19,DynamicTemplateWorkLabComponent_ng_template_31_option_19_Template,2,2,"option",81),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(20,DynamicTemplateWorkLabComponent_ng_template_31_div_20_Template,2,0,"div",82),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(21,"div",76)(22,"label",77),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(23,"Date Type"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(24,"div",78)(25,"select",83)(26,"option",80),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(27,"Select Date Type"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(28,DynamicTemplateWorkLabComponent_ng_template_31_option_28_Template,2,2,"option",81),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(29,DynamicTemplateWorkLabComponent_ng_template_31_div_29_Template,2,0,"div",82),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(30,DynamicTemplateWorkLabComponent_ng_template_31_div_30_Template,6,1,"div",84),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(31,DynamicTemplateWorkLabComponent_ng_template_31_div_31_Template,6,1,"div",84),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(32,"div",85)(33,"div",86)(34,"button",87),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(35,"Generate Report"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()()()()()()}if(2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();let O,S,m,X;_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("formGroup",re.reportForm),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("value",null)("selected",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngForOf",re.allReportsPermissions),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",(null==(O=re.reportForm.get("reportsType"))?null:O.invalid)&&(null==(O=re.reportForm.get("reportsType"))?null:O.touched)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("value",null)("selected",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngForOf",re.dateTypes),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",(null==(S=re.reportForm.get("dateType"))?null:S.invalid)&&(null==(S=re.reportForm.get("dateType"))?null:S.touched)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf","between time"==(null==(m=re.reportForm.get("dateType"))?null:m.value)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf","between time"==(null==(X=re.reportForm.get("dateType"))?null:X.value)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("disabled",re.reportForm.invalid)}}function DynamicTemplateWorkLabComponent_div_47_div_5_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",109)(1,"div",110)(2,"label",111),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(3,"Device"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(4,"ngx-select",112),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("allowClear",!0)("items",re.allDeviceWithSameRdt)}}function DynamicTemplateWorkLabComponent_div_47_div_7_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",113)(1,"div",114)(2,"div",115),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(3,"input",116),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"div",115),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(5,"input",117),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(6,"div",118)(7,"button",119),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw().index,x=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(x.copyToClipboard(X,m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(8,"i",106),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(9,"div",118)(10,"button",120),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw().index,x=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(x.removeKeyValuePair(X,m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(11,"i",121),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()}2&oe&&_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("formGroupName",ue.index)}function DynamicTemplateWorkLabComponent_div_47_div_13_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",113)(1,"div",114)(2,"div",115),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(3,"input",116),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"div",115),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(5,"input",117),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(6,"div",118)(7,"button",119),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw().index,x=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(x.copyToClipboardAdditional(X,m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(8,"i",106),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(9,"div",118)(10,"button",120),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw().index,x=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(x.removeAdditionalKeyValuePair(X,m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(11,"i",121),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()}2&oe&&_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("formGroupName",ue.index)}function DynamicTemplateWorkLabComponent_div_47_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",92)(1,"div",93)(2,"h5",94),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(3,"Device Configuration"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"div",95),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(5,DynamicTemplateWorkLabComponent_div_47_div_5_Template,5,2,"div",96),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(6,"div",97),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(7,DynamicTemplateWorkLabComponent_div_47_div_7_Template,12,1,"div",98),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(8,"div",99)(9,"button",100),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(X.addKeyValuePair(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(10,"i",101),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(11," Add Key-Value Pair "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(12,"div",102),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(13,DynamicTemplateWorkLabComponent_div_47_div_13_Template,12,1,"div",98),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(14,"div",99)(15,"button",100),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(X.addAdditionalKeyValuePair(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(16,"i",101),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(17," Add Additional Key-Value Pair "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(18,"div",103)(19,"div",104)(20,"button",105),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(X.duplicateConfig(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(21,"i",106),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(22," Clone "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(23,"button",107),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).index,X=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(X.removeFormEntry(m))}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(24,"i",108),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(25," Remove "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()}if(2&oe){const re=ue.index,O=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("formGroupName",re),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",O.allDeviceWithSameRdt.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngForOf",O.getKeyValuePairs(re).controls),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngForOf",O.getAdditionalKeyValuePairs(re).controls)}}function DynamicTemplateWorkLabComponent_form_60_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"form",122)(1,"div",123)(2,"label",124),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(3,"Parameters:"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"ngx-select",125),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("ngModelChange",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.selectedRP=S)}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(5,"div",126)(6,"button",127),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(S.copyToClipboardRP())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(7," Copy to Clipboard "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()}if(2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngModel",re.selectedRP)("allowClear",!1)("items",re.All_RDTs_Configuration[0].parameters)}}function DynamicTemplateWorkLabComponent_form_61_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"form",122)(1,"div",123)(2,"label",124),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(3,"Schedule Parameters:"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"ngx-select",128),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("ngModelChange",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.selectedSP=S)}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(5,"div",126)(6,"button",127),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(S.copyToClipboardSP())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(7," Copy to Clipboard "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()}if(2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngModel",re.selectedSP)("allowClear",!1)("items",re.All_RDTs_Configuration[0].parameters)}}function DynamicTemplateWorkLabComponent_ng_template_65_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",66)(1,"h5",67),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(2,"HTML Preview"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(3,"button",68),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.close())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(4,"div",69),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(5,"div",129),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(6,"div",130)(7,"button",131),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){const m=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(m.close())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(8,"Close"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(9,"button",132),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_11__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_11__.KtG(S.downloadPdf())}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(10,"Download PDF"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()}if(2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_11__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("innerHTML",re.previewForPDF,_angular_core__WEBPACK_IMPORTED_MODULE_11__.oJD)}}const _c2=function(){return{id:"kt_stats_widget_16_tab_1",icon:"fas fa-table",text:"Device",title:"Adding Devices"}},_c3=function(){return{id:"kt_stats_widget_16_tab_2",icon:"fas fa-columns",text:"Params",title:"Adding Reading Params"}},_c4=function(){return{id:"kt_stats_widget_16_tab_3",icon:"bi bi-calculator",text:"Calc",title:"Adding Calculations"}},_c5=function(){return{id:"kt_stats_widget_16_tab_6L",icon:"bi bi-file-earmark-spreadsheet",text:"Report",isReport:!0}},_c6=function(oe,ue,re,O){return[oe,ue,re,O]},_c7=function(oe,ue){return{"col-md-12 col-lg-12 col-xl-12 col-xxl-12":oe,"col-md-9 col-lg-9 col-xl-9 col-xxl-9":ue}},_c8=function(oe){return{"margin-right":oe}};let DynamicTemplateWorkLabComponent=(()=>{var _class;class DynamicTemplateWorkLabComponent{toggleToolbar(oe){this.isToolbarVisible=oe.target.checked}constructor(oe,ue,re,O,S,m,X,x,z,H,G,D,U,R,T){(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"modalService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"http",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"reportApi",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"renderer",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"router",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"snackBar",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"toast",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"sharedService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"route",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"api",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"templateService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"spinner",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"sanitizer",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"fb",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"cdr",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"previewModal",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"editor",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"originalComponents",""),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"isToolbarVisible",!0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"isDrawerOpen",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"drawerInstance",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"tableForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"deviceForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"columnForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"colCalForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"totalForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"expCalForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"reportForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"globalParameterMapping",{}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"All_Devices_Configuration",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"All_RDTs_Configuration",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"globalParameterMappingByDevice",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"globalScheduleParameterMappingByDevice",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"AllParameterList",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"AllScheduleList",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"drawerTile",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"allReportsPermissions",["Parameters","Hourly consumption","Daily consumption","Monthly consumption"]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"dateTypes",["today","yesterday","last month","between time"]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"devices",["Device 1","Device 2","Device 3"]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"routeId",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"allPacketDetailsForUpdate",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"lookup_data_temp_dev",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"SK_clientID",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"listofdeviceIds",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"flattenedDeviceConfig",{}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"flattenedDynamicValues",{}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"allDeviceWithSameRdt",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"selectedDeviceForRdtType",""),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"selectedRP",""),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"selectedSP",""),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"tableData",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"previewForPDF",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"previewCss",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"allPermissions_user",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"hidingLink",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(this,"hideDeleteButton",void 0),this.modalService=oe,this.http=ue,this.reportApi=re,this.renderer=O,this.router=S,this.snackBar=m,this.toast=X,this.sharedService=x,this.route=z,this.api=H,this.templateService=G,this.spinner=D,this.sanitizer=U,this.fb=R,this.cdr=T}ngOnInit(){var oe=this;const ue=this.sharedService.getLoggedUserDetails();this.SK_clientID=ue.attributes["custom:clientID"];const re=localStorage.getItem("permissionDetails");this.allPermissions_user=re?JSON.parse(re):[],this.checkPermission(),this.reportForm=this.fb.group({reportsType:["Parameters",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],dateType:["today",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],startDateTime:[new Date,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],endDateTime:[new Date,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required]}),this.deviceForm=this.fb.group({device_configs:this.fb.array([])}),this.route.paramMap.subscribe(function(){var O=(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_14__.Z)(function*(S){oe.routeId=S.get("id"),oe.routeId&&(yield Promise.all([oe.fetchDeviceLookUp_redirect(1)]),oe.loadDynamicWorkspace(oe.routeId))});return function(S){return O.apply(this,arguments)}}())}loadDynamicWorkspace(oe){this.api.GetDynamicReports(oe,this.SK_clientID+"#dynamic_template").then(ue=>{if(ue)if(this.allPacketDetailsForUpdate=ue,this.batchRequest(ue),this.fetchFileFromS3(ue),ue.filters&&"string"==typeof ue.filters){const re=JSON.parse(JSON.parse(ue.filters)).device_configs;re&&this.setDeviceFormValues(re)}else{let re;ue.filters&&(re=ue.filters),re&&this.setDeviceFormValues(re)}})}checkPermission(){const oe=this.allPermissions_user,ue=oe.includes("DynamicHtmlTemplate - Update"),re=oe.includes("DynamicHtmlTemplate - View");this.hidingLink=ue,console.log("CHECK PERMISSION - Update:",ue),console.log("CHECK PERMISSION - View:",re),ue||re?this.hideDeleteButton=ue:(console.warn("User lacks required permissions. Redirecting to 404."),this.router.navigate(["/404"]))}ngAfterViewInit(){document.getElementById("kt_forms")&&setTimeout(()=>{this.drawerInstance=src_app_metronic_kt_components__WEBPACK_IMPORTED_MODULE_3__.hg.getInstance("kt_forms"),this.drawerInstance&&(this.drawerInstance.on("kt.drawer.shown",()=>{this.isDrawerOpen=!0,this.cdr.detectChanges()}),this.drawerInstance.on("kt.drawer.after.hidden",()=>{this.isDrawerOpen=!1,this.cdr.detectChanges()}))},500),this.editor=grapesjs__WEBPACK_IMPORTED_MODULE_15__.ZP.init({container:"#gjs",height:"100vh",width:"auto",fromElement:!1,storageManager:!1,canvas:{styles:["https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0-alpha1/css/bootstrap.min.css","https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css"]},plugins:[grapesjs_blocks_bootstrap4__WEBPACK_IMPORTED_MODULE_0___default(),grapesjs_signature_pad__WEBPACK_IMPORTED_MODULE_1___default()],pluginsOpts:{[grapesjs_blocks_bootstrap4__WEBPACK_IMPORTED_MODULE_0___default()]:{},[grapesjs_signature_pad__WEBPACK_IMPORTED_MODULE_1___default()]:{}}}),this.addInvoiceBlocksForBills(),this.addCodeEditorCommand(),this.modifyDefaultPreviewCommand()}addInvoiceBlocks(){const oe=this.editor.BlockManager,ue=re=>`\n      <div class="card mb-3 border-0 shadow-sm" data-type="handlebars-component">\n        <div class="card-body p-4">\n          ${re}\n        </div>\n      </div>\n    `;oe.add("invoice-header",{label:'<i class="bi bi-file-earmark-text"></i> Invoice Header',content:ue('\n        <div class="row align-items-center">\n          <div class="col-6">\n            <h1 class="text-primary mb-0">Invoice</h1>\n          </div>\n          <div class="col-6 text-end">\n            <p><strong>Invoice Number:</strong> {{invoiceNumber}}</p>\n            <p><strong>Invoice Date:</strong> {{invoiceDate}}</p>\n            <p><strong>Due Date:</strong> {{dueDate}}</p>\n            <p><strong>Company Name:</strong> {{companyName}}</p>\n          </div>\n        </div>\n      '),category:"Invoice Blocks"}),oe.add("client-info",{label:'<i class="bi bi-person"></i> Client Info',content:ue('\n        <div>\n          <h4 class="text-secondary mb-3"><i class="bi bi-person-circle"></i> Bill To</h4>\n          <div>\n            <p><strong>Name:</strong> {{clientName}}</p>\n            <p><strong>Address:</strong> {{clientAddress}}</p>\n            <p><strong>Email:</strong> {{clientEmail}}</p>\n            <p><strong>Phone:</strong> {{clientPhone}}</p>\n          </div>\n        </div>\n      '),category:"Invoice Blocks"}),oe.add("invoice-items",{label:'<i class="bi bi-table"></i> Items Table',content:'\n    <div class="card mb-3 border-0 shadow-sm" data-type="handlebars-component">\n      <div class="card-body p-4">\n        <h4 class="text-secondary mb-3"><i class="bi bi-card-list"></i> Invoice Items</h4>\n        <table class="table table-bordered table-hover table-sm">\n          <thead class="table-dark">\n            <tr>\n              <th>Item</th>\n              <th>Quantity</th>\n              <th>Price</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            {{#each items}}\n            <tr>\n              <td>{{items.name}}</td>\n              <td>{{items.quantity}}</td>\n              <td>{{items.price}}</td>\n              <td>{{items.total}}</td>\n            </tr>\n            {{/each}}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  ',category:"Invoice Blocks"}),oe.add("invoice-footer",{label:'<i class="bi bi-receipt"></i> Footer',content:ue('\n        <div class="row align-items-center">\n          <div class="col-6">\n            <p><strong>Total Amount:</strong> {{totalAmount}}</p>\n          </div>\n          <div class="col-6 text-end">\n            <p><strong>Signature:</strong> ______________________</p>\n          </div>\n        </div>\n      '),category:"Invoice Blocks"}),oe.add("logo-block",{label:'<i class="bi bi-image"></i> Logo',content:ue('\n        <div class="text-center">\n          <img src="{{logoUrl}}" alt="Company Logo" class="img-fluid mb-3" style="max-width: 150px;">\n        </div>\n      '),category:"Invoice Blocks"}),console.log("All Improved & Professional Invoice Blocks Added Successfully.")}addInvoiceBlocksForBills(){const oe=this.editor.BlockManager,ue=re=>`\n      <div data-type="handlebars-component" class="p-2">\n          ${re}\n      </div>\n    `;oe.add("bill-header",{label:'<i class="bi bi-file-earmark-text"></i> Bill Header',content:ue('\n        <div class="text-center mb-4">\n          <h3>C. D. Prabhakar Reddy</h3>\n          <p>No. 54, 2nd main, Vyalikaval Bangalore - 560003</p>\n          <h5>Electricity Bill for the Month of {{billMonth}}</h5>\n        </div>\n      '),category:"Electricity Bill Blocks"}),oe.add("bill-info",{label:'<i class="bi bi-info-circle"></i> Bill Info',content:ue('\n        <table class="table table-bordered table-sm ">\n          <tbody>\n            <tr>\n              <td><strong>Bill No</strong></td>\n              <td><div  >{{billNo}}</div></td>\n              <td><strong>Date</strong></td>\n              <td><div  >{{billDate}}</div></td>\n            </tr>\n            <tr>\n              <td><strong>Name</strong></td>\n              <td colspan="3"><div  >{{customerName}}</div></td>\n            </tr>\n            <tr>\n              <td><strong>Address</strong></td>\n              <td colspan="3"><div  >{{customerAddress}}</div></td>\n            </tr>\n            <tr>\n              <td><strong>Billing period</strong></td>\n              <td colspan="3"><div  >{{billingPeriod}}</div></td>\n            </tr>\n            <tr>\n              <td><strong>Date of reading</strong></td>\n              <td colspan="3"><div  >{{readingDate}}</div></td>\n            </tr>\n          </tbody>\n        </table>\n      '),category:"Electricity Bill Blocks"}),oe.add("readings",{label:'<i class="bi bi-speedometer2"></i> Readings',content:ue('\n        <table class="table table-bordered table-sm ">\n          <tbody>\n            <tr>\n              <td><strong>Present Reading</strong></td>\n              <td><div  >{{presentReading}}</div></td>\n            </tr>\n            <tr>\n              <td><strong>Initial Reading</strong></td>\n              <td><div  >{{initialReading}}</div></td>\n            </tr>\n            <tr>\n              <td><strong>Units Consumed</strong></td>\n              <td><div  >{{unitsConsumed}}</div></td>\n            </tr>\n          </tbody>\n        </table>\n      '),category:"Electricity Bill Blocks"}),oe.add("cost-calculation",{label:'<i class="bi bi-cash"></i> Cost Calculation',content:ue('\n        <table class="table table-bordered table-sm ">\n          <thead>\n            <tr>\n              <th>From</th>\n              <th>To</th>\n              <th>Total Units</th>\n              <th>Cost/Unit (Rs.)</th>\n              <th>Total Cost (Rs.)</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td><div  >10</div></td>\n              <td><div  >20</div></td>\n              <td><div  >30</div></td>\n              <td><div  >40</div></td>\n              <td><div  >50</div></td>\n            </tr>\n            <tr>\n              <td colspan="4"><strong>Fixed Charges - 25kW @ 210/kW</strong></td>\n              <td><div  >{{fixedCharges}}</div></td>\n            </tr>\n            <tr>\n              <td colspan="4" class="text-end"><strong>Sub Total</strong></td>\n              <td><div  >{{subTotal}}</div></td>\n            </tr>\n            <tr>\n              <td colspan="4" class="text-end"><strong>Taxes ({{taxPercentage}}%)</strong></td>\n              <td><div  >{{taxAmount}}</div></td>\n            </tr>\n            <tr>\n              <td colspan="4" class="text-end"><strong>Grand Total</strong></td>\n              <td><div  >{{grandTotal}}</div></td>\n            </tr>\n          </tbody>\n        </table>\n      '),category:"Electricity Bill Blocks"}),oe.add("footer",{label:'<i class="bi bi-pencil"></i> Footer',content:ue('\n        <div class="text-center mt-4">\n          <p><strong>(Rupees {{amountInWords}} Only)</strong></p>\n          <p><strong>Authorised Signatory</strong></p>\n          <div><img src="{{signatureUrl}}" alt="Signature" style="max-width: 100px;"></div>\n        </div>\n      '),category:"Electricity Bill Blocks"}),console.log("Electricity Bill Blocks Added Successfully.")}preventHtmlPaste(){const oe=this.editor;oe.on("canvas:drop",O=>{const S=O.getData("text/html"),m=O.getData("text/plain");return S&&console.log("HTML content detected. Stripping HTML and pasting only plain text."),m});const ue=oe.Canvas.getFrameEl(),re=ue.contentDocument||ue.contentWindow?.document;re&&re.addEventListener("paste",O=>{O.preventDefault();const S=O.clipboardData?.getData("text/plain");if(S){const m=re.getSelection();m?.rangeCount&&(m.deleteFromDocument(),m.getRangeAt(0).insertNode(re.createTextNode(S)))}})}modifyDefaultPreviewCommand(){const editor=this.editor;handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("sum",function(...oe){return oe.pop(),oe.reduce((ue,re)=>ue+parseFloat(re)||0,0)}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("average",function(...oe){oe.pop();const ue=oe.map(O=>parseFloat(O)||0);return ue.reduce((O,S)=>O+S,0)/ue.length}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("multiply",function(oe,ue){return parseFloat(oe)*parseFloat(ue)}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("divide",function(oe,ue){return parseFloat(oe)/parseFloat(ue)}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("subtract",function(oe,ue){return parseFloat(oe)-parseFloat(ue)}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("formatCurrency",function(oe){const ue=parseFloat(oe);return isNaN(ue)?"Invalid value":ue.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("calculate",function(expression,context){let evaluatedExpression=expression;for(const oe in context.data.root)context.data.root.hasOwnProperty(oe)&&(evaluatedExpression=evaluatedExpression.replace(new RegExp(`${oe}`,"g"),context.data.root[oe]));try{return eval(evaluatedExpression)}catch(oe){return console.error("Error evaluating expression:",oe),null}}),handlebars__WEBPACK_IMPORTED_MODULE_2__.registerHelper("calculateCurrency",function(expression,context){let evaluatedExpression=expression;for(const oe in context.data.root)context.data.root.hasOwnProperty(oe)&&(evaluatedExpression=evaluatedExpression.replace(new RegExp(`${oe}`,"g"),context.data.root[oe]));try{const numberValue=parseFloat(eval(evaluatedExpression));if(isNaN(numberValue))return"Invalid value";const words=(0,number_to_words__WEBPACK_IMPORTED_MODULE_7__.toWords)(numberValue);return words}catch(oe){return console.error("Error evaluating expression:",oe),null}}),editor.Commands.add("preview",{run:oe=>{const ue=oe.getHtml(),re=oe.getCss(),O={...this.flattenedDeviceConfig,...this.flattenedDynamicValues},S=this.preprocessTemplate(ue),X=handlebars__WEBPACK_IMPORTED_MODULE_2__.compile(S)(O),x=oe.Canvas.getFrameEl(),z=x.contentDocument||x.contentWindow?.document;if(z){const H=z.querySelector('[data-gjs-type="wrapper"]');if(H){H.style.display="none";const G=z.getElementById("preview-container");G&&G.remove();const D=z.createElement("div");D.innerHTML=X,D.id="preview-container",z.body.appendChild(D);let U=z.querySelector("#preview-style");U?U.textContent=re:(U=z.createElement("style"),U.id="preview-style",U.textContent=re,z.head.appendChild(U))}}},stop:oe=>{const ue=oe.Canvas.getFrameEl(),re=ue.contentDocument||ue.contentWindow?.document,O=re?.querySelector('[data-gjs-type="wrapper"]'),S=re?.getElementById("preview-container");O&&S&&(S.remove(),O.style.display="block")}})}preprocessTemplate(oe){return oe.replace(/\{\{\$(.*?)\$\}\}/g,"{{$1}}")}fetchFileFromS3(oe){this.templateService.downloadJsonFromS3({SK:oe.SK,PK:oe.PK,file_name:`${oe.PK}.json`}).subscribe(re=>{if(re&&re.body){const O=JSON.parse(re.body);this.editor.setComponents(O.html),this.editor.setStyle(O.css)}},re=>{console.error("Error fetching file from S3:",re)})}updateDynamicTemplate(){if(!this.allPacketDetailsForUpdate||!this.allPacketDetailsForUpdate.PK||!this.SK_clientID)return console.error("\u274c Error: PK or SK is missing. Update cannot proceed."),void this.toast.open("Error: Missing required identifiers (PK or SK)","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});const oe=String(this.allPacketDetailsForUpdate.PK).trim(),ue=String(this.allPacketDetailsForUpdate.SK).trim();if(!oe||!ue)return void console.error("\u274c Error: PK or SK is empty after conversion.");let re="[]",O="{}";try{re="string"==typeof this.allPacketDetailsForUpdate.devices?this.allPacketDetailsForUpdate.devices:JSON.stringify(this.allPacketDetailsForUpdate.devices||[]),O="string"==typeof this.deviceForm.value?this.deviceForm.value:JSON.stringify(JSON.stringify(this.deviceForm.value)||{})}catch(m){console.error("\u274c Error converting JSON fields:",m)}const S={PK:oe,SK:ue,file_name:this.allPacketDetailsForUpdate.file_name||"unknown",file_location_path_URl:oe,devices:re,filters:O};console.log("\u{1f680} Sending payload:",S),this.api.UpdateDynamicReports(S).then(m=>{console.log("\u2705 API Response:",m),m&&(this.saveTemplate(),this.toast.open("\u2705 Updated Config successfully","",{duration:1e3,horizontalPosition:"right",verticalPosition:"top"}))}).catch(m=>{console.error("\u274c Error in update:",m),this.toast.open("\u274c Error in Updating Configuration","Check again",{duration:1e3,horizontalPosition:"right",verticalPosition:"top"})})}saveTemplate(){const O={html:this.editor.getHtml(),css:this.editor.getCss(),js:this.editor.getJs(),templateName:`${this.allPacketDetailsForUpdate.PK}`,updatedAt:(new Date).toISOString()};this.templateService.uploadFileToS3({SK:this.allPacketDetailsForUpdate.SK,PK:this.allPacketDetailsForUpdate.PK,file_name:`${this.allPacketDetailsForUpdate.PK}.json`},"update",O).subscribe(m=>{console.log("Template saved successfully:",m),this.toast.open("\u2705 Template saved successfully!","",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})},m=>{console.error("Error saving template:",m),this.toast.open("\u274c Failed to save template. Please try again!","",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})})}addCodeEditorCommand(){const oe=this.editor,ue=oe.getConfig().stylePrefix,re=oe.Modal,O=oe.Commands,S=oe.CodeManager.getViewer("CodeMirror").clone(),m=oe.Panels,X=document.createElement("div"),x=document.createElement("button");S.set({codeName:"htmlmixed",readOnly:0,theme:"hopscotch",autoBeautify:!0,autoCloseTags:!0,autoCloseBrackets:!0,lineWrapping:!0,styleActiveLine:!0,smartIndent:!0,indentWithTabs:!0}),x.innerHTML="Save Changes",x.className=ue+"btn-prim "+ue+"btn-import",x.onclick=function(){const z=S.editor.getValue();oe.DomComponents.getWrapper().set("content",""),oe.setComponents(z.trim()),re.close()},O.add("html-edit",{run:function(z,H){H&&H.set("active",0);const G=S.editor;if(re.setTitle("Edit code"),!G){const R=document.createElement("textarea");X.appendChild(R),X.appendChild(x),S.init(R)}const D=z.getHtml(),U=z.getCss();re.setContent(""),re.setContent(X),S.setContent(D+"<style>"+U+"</style>"),re.open(),S.editor.refresh()}}),m.addButton("options",[{id:"edit",className:"fa fa-edit",command:"html-edit",attributes:{title:"Edit Code"}}])}exitProcessingMode(){console.log("Exiting to /TimeMachine/DynamicTemplateCreator"),this.router.navigate(["/TimeMachine/DynamicTemplateCreator"])}generateReport(){let oe=[];const O=this.extractHandlebarsParams(this.editor.getHtml()),S=this.extractHandlebarsScheduleParams(this.editor.getHtml());O.forEach(X=>{const x=this.globalParameterMappingByDevice[this.selectedDeviceForRdtType].findIndex(z=>z===X);oe.push(`P${x+1}`)}),S.forEach(X=>{const x=this.globalScheduleParameterMappingByDevice[this.selectedDeviceForRdtType].findIndex(z=>z===X);oe.push(`P${x+1}`)}),console.log("c1",O);let m={reportsType:this.reportForm.value.reportsType,device:[this.selectedDeviceForRdtType],paramFilter:"Parameters"!=this.reportForm.value.reportsType?S:O,paramFilterDB:[oe],dateType:this.reportForm.value.dateType,start_time:this.reportForm.value.startDateTime,end_time:this.reportForm.value.endDateTime,rdt:JSON.stringify(this.All_RDTs_Configuration)};console.log("formData :>> ",m),"Parameters"===m.reportsType?this.handleParameterData(m):this.handleShedhuleData(m)}toggleExpand(oe){oe.isExpanded=!oe.isExpanded}reportsBodyReady(oe,ue){var re=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_14__.Z)(function*(){re.modalService.open(oe,{size:"lg",backdrop:"static",centered:!0})})()}reportsBodyReadyForSchedule(oe,ue){var re=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_14__.Z)(function*(){re.modalService.open(oe,{size:"lg",backdrop:"static",centered:!0})})()}closeAllDrawers(oe){this.drawerTile=oe,src_app_metronic_kt_components__WEBPACK_IMPORTED_MODULE_3__.hg.hideAll(),src_app_metronic_kt_components__WEBPACK_IMPORTED_MODULE_3__.hg.reinitialization()}get device_configs(){return this.deviceForm.get("device_configs")}getKeyValuePairs(oe){return this.device_configs.at(oe).get("keyValuePairs")}getAdditionalKeyValuePairs(oe){return this.device_configs.at(oe).get("additionalKeyValuePairs")}addFormEntry(){const oe=this.fb.group({device:["",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],keyValuePairs:this.fb.array([]),additionalKeyValuePairs:this.fb.array([])});this.device_configs.push(oe)}addKeyValuePair(oe){this.getKeyValuePairs(oe).push(this.fb.group({key:["",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],value:["",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required]}))}addAdditionalKeyValuePair(oe){this.getAdditionalKeyValuePairs(oe).push(this.fb.group({key:["",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],value:["",_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required]}))}removeKeyValuePair(oe,ue){this.getKeyValuePairs(oe).removeAt(ue)}removeAdditionalKeyValuePair(oe,ue){this.getAdditionalKeyValuePairs(oe).removeAt(ue)}removeFormEntry(oe){this.device_configs.removeAt(oe)}duplicateConfig(oe){const ue=this.device_configs.at(oe),re=this.fb.group({device:ue.get("device")?.value,keyValuePairs:this.fb.array([]),additionalKeyValuePairs:this.fb.array([])});this.getKeyValuePairs(oe).controls.forEach(m=>{re.get("keyValuePairs").push(this.fb.group({key:m.get("key")?.value,value:m.get("value")?.value}))}),this.getAdditionalKeyValuePairs(oe).controls.forEach(m=>{re.get("additionalKeyValuePairs").push(this.fb.group({key:m.get("key")?.value,value:m.get("value")?.value}))}),this.device_configs.push(re)}copyToClipboard(oe,ue){const re=this.deviceForm.get(["device_configs",oe,"keyValuePairs",ue,"key"]);re?.value&&navigator.clipboard.writeText(`{{${re.value}}}`).then(()=>{console.log("Copied to clipboard: ",re.value)}).catch(O=>{console.error("Failed to copy text: ",O)})}copyToClipboardAdditional(oe,ue){const re=this.deviceForm.get(["device_configs",oe,"additionalKeyValuePairs",ue,"key"]);re?.value&&navigator.clipboard.writeText(`{{${re.value}}}`).then(()=>{console.log("Copied to clipboard: ",re.value)}).catch(O=>{console.error("Failed to copy text: ",O)})}onSubmit(){console.log(this.deviceForm.value)}setDeviceFormValues(oe){oe.forEach(ue=>{const re=this.fb.group({device:[ue.device,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],keyValuePairs:this.fb.array([]),additionalKeyValuePairs:this.fb.array([])});ue.keyValuePairs.forEach(O=>{const S=this.fb.group({key:[O.key,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],value:[O.value,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required]});re.get("keyValuePairs").push(S)}),ue.additionalKeyValuePairs.forEach(O=>{const S=this.fb.group({key:[O.key,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required],value:[O.value,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.kI.required]});re.get("additionalKeyValuePairs").push(S)}),this.device_configs.push(re)})}batchRequest(oe){if(oe&&oe.devices)try{const ue=JSON.parse(oe.devices),re=new Set,O=ue.filter(m=>m&&m.mn).map(m=>re.has(m.mn)?null:(re.add(m.mn),{PK:m.mn,SK:this.SK_clientID})).filter(Boolean);if(0===O.length)return void console.warn("No valid or unique device data to process.");const S={type:"batchGet",table_name:"device_configuration",keys:O};this.All_Devices_Configuration=[],this.sharedService.postData(S).subscribe({next:m=>this.handleBatchDeviceResponse(m,oe),error:m=>this.handleBatchDeviceError(m)})}catch(ue){console.error("Error parsing devices or processing batch request:",ue)}else console.error("Invalid input: keys or devices are missing.")}handleBatchDeviceResponse(oe,ue){this.All_Devices_Configuration=oe;const re=[...new Set(this.All_Devices_Configuration.map(O=>O.reading_device_type))];console.log("Batch Request Successful:",this.All_Devices_Configuration),this.batchRDtRequest(re)}handleBatchDeviceError(oe){console.error("Error during batch request:",oe),this.spinner.hide()}batchRDtRequest(oe){if(!oe||!Array.isArray(oe))return void console.error("Invalid input: keys must be an array.");const ue=new Set,re=oe.filter(S=>S&&!ue.has(S)).map(S=>(ue.add(S),{PK:S,SK:this.SK_clientID}));if(0===re.length)return void console.warn("No unique keys to process.");const O={type:"batchGet",table_name:"reading_device_type",keys:re};this.All_RDTs_Configuration=[],this.sharedService.postData(O).subscribe({next:S=>this.handleBatchResponse(S),error:S=>this.handleBatchError(S)})}handleBatchResponse(oe){this.All_RDTs_Configuration=oe.map(X=>({allDetails:X,parameters:X.parameters}));const ue=this.All_Devices_Configuration[0].reading_device_type;this.selectedDeviceForRdtType=this.All_Devices_Configuration[0].mn,this.lookup_data_temp_dev.forEach(X=>{X[2]==ue&&this.allDeviceWithSameRdt.push({text:X[1],value:X[0]})}),this.flattenKeyValuePairsByDevice(this.selectedDeviceForRdtType),this.cdr.detectChanges(),console.log("rdt data>>>:",oe);const re=oe.reduce((X,x)=>(X[x.PK]=x.parameters.map(z=>z.parameterLabel),X),{}),O=oe.reduce((X,x)=>(X[x.PK]=x.parameters.map(z=>z.schedule_parameter_label).filter(z=>null!=z&&""!==z),X),{}),S=oe.reduce((X,x)=>(X[x.PK]=x.parameters.map(z=>({text:z.parameterLabel,value:z.parameterID})),X),{}),m=oe.reduce((X,x)=>(X[x.PK]=x.parameters.map(z=>({text:z.schedule_parameter_label,value:z.schedule_parameter_label})).filter(z=>z.text&&""!==z.text.trim()),X),{});this.globalParameterMapping=re,this.All_Devices_Configuration.forEach(X=>{const x=re[X.reading_device_type],z=O[X.reading_device_type];x&&(this.allDeviceWithSameRdt.forEach(H=>{this.globalParameterMappingByDevice[H.value]=x}),this.AllParameterList[X.mn]=S[X.reading_device_type]),z&&(this.allDeviceWithSameRdt.forEach(H=>{this.globalScheduleParameterMappingByDevice[H.value]=z}),this.AllScheduleList[X.mn]=m[X.reading_device_type])}),console.log(" this.globalParameterMappingByDevice",this.globalParameterMappingByDevice),this.spinner.hide()}handleBatchError(oe){console.error("Error during RDT batch request:",oe),this.spinner.hide()}fetchDeviceLookUp_redirect(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_14__.Z)(function*(){yield ue.coreFetchData("device",oe,"lookup_data_temp_dev","desc")})()}coreFetchData(oe,ue,re,O){var S=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_14__.Z)(function*(){try{const m=yield S.api.GetLookupMasterTable(`${S.SK_clientID}#${oe}`,ue);if(m&&m.items)if("string"==typeof m.items){const X=JSON.parse(m.items);if(Array.isArray(X)){for(const x of X)if(x)if("device"!==oe){const z=Object.keys(x)[0],{P1:H,P2:G,P3:D}=x[z];S[re].push([H,G,D])}else{const z=Object.keys(x)[0],{P1:H,P2:G,P3:D,P4:U,P5:R,P6:T,P7:N,P8:L}=x[z];S[re].push([H,G,D,U,R,T,N,L])}yield S.coreFetchData(oe,ue+1,re,O)}else console.error("Invalid data format - not an array.")}else console.error("response.items is not a string.");else S[re].sort((X,x)=>"asc"===O?X[2]-x[2]:x[2]-X[2]),"device"===oe&&(S.listofdeviceIds=S[re].map(X=>X[0]))}catch(m){console.error(`Error in coreFetchData for ${oe}:`,m)}})()}flattenKeyValuePairsByDevice(oe){const ue=this.device_configs.controls.findIndex(S=>S.get("device")?.value===oe);if(-1===ue)return void console.log("Device not found");const re=this.getKeyValuePairs(ue).value,O=this.getAdditionalKeyValuePairs(ue).value;this.flattenedDeviceConfig={},re.forEach(S=>{this.flattenedDeviceConfig[S.key]=S.value}),O.forEach(S=>{this.flattenedDeviceConfig[S.key]=S.value}),console.log("Flattened Device Config:",this.flattenedDeviceConfig)}liveDataChange(oe){this.resetPreview(),this.flattenKeyValuePairsByDevice(this.selectedDeviceForRdtType)}resetPreview(){const ue=this.editor.Panels._config.defaults.find(O=>"options"===O.id);console.log(ue?.buttons);const re=ue?.buttons.find(O=>"preview"===O.id);if(console.log(re),re){re.active=!1,console.log("Preview button reset:",re);const O=this.editor.Panels.getButton("options","preview");O&&O.set("active",!1),this.cdr.detectChanges()}}updatePreviewWithNewDeviceData(){this.editor.Commands.run("preview")}copyToClipboardRP(){if(this.selectedRP){const oe=`{{$${this.selectedRP}$}}`;navigator.clipboard.writeText(oe).then(()=>{console.log(`Copied to clipboard: ${oe}`)}).catch(ue=>{console.error("Failed to copy text: ",ue)})}else alert("No device selected!")}copyToClipboardSP(){if(this.selectedSP){const oe=`{{$${this.selectedSP}$}}`;navigator.clipboard.writeText(oe).then(()=>{console.log(`Copied to clipboard: ${oe}`)}).catch(ue=>{console.error("Failed to copy text: ",ue)})}else alert("No device selected!")}handleShedhuleData(oe){this.spinner.show(),this.tableData=[];let ue=oe.paramFilter;console.log("Time Machine Data",oe);let re=JSON.parse(oe.rdt);re=re[0].parameters,console.log("Parameters",re);let O=JSON.parse(oe.rdt);console.log("Before mulActualData",O);let m={};for(let X=0;X<O.length;X++){const x=O[X]?.parameters,z=O[X]?.allDetails?.PK;x&&z&&(m[z]=x)}console.log("Extracted Parameters",m),console.log(" After mulActualData",O),this.reportApi.dynamicTemplateData(oe).then(X=>{if(1===X.length){const x=X[0]?.data||[];console.log("historicalData",x);const z=Array.from(new Set(x.flatMap(Y=>Object.keys(Y.MM))));console.log("propertyNames",z);const H={};x.forEach(Y=>{const ee=1e3*Y.SK;z.forEach(te=>{H[te]||(H[te]=[]),H[te].push([ee,Y.MM[te]])})}),console.log("groupedData",H);const G=Object.entries(H).map(([Y,ee])=>{const te=parseInt(Y.slice(1))-1,pe=re[te];return{name:pe?pe.schedule_parameter_label:Y,data:ee.filter(ge=>"string"!=typeof ge[1])}});console.log("Formatted Highcharts Series:",G);const D=G.filter(Y=>{const ee=Y.name;return ue.some(te=>te.includes(ee))});console.log("highchartsSeries paramFilter",D);const U=z.map(Y=>{const ee=parseInt(Y.slice(1))-1;return re[ee]&&void 0!==re[ee].schedule_parameter_label?re[ee].schedule_parameter_label:Y});z.unshift("Device label","Date & time","Calculated Time","Time Generated"),U.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("TABLE NAMES",U);const R={columns:U,data:x.map(Y=>{const ee={};return z.forEach(te=>{if("Device label"!==te&&"Date & time"!==te&&"Calculated Time"!==te&&"Time Generated"!==te){const pe=parseInt(te.slice(1))-1;re[pe]&&void 0!==re[pe].schedule_parameter_label?ee[re[pe].schedule_parameter_label]=Y.MM[te]??" ":ee[te]=Y.MM[te]??" "}else if("Device label"===te){let pe=Y.PK;pe=pe.split("#")[1],ee["Device label"]=pe??"Unknown Device"}else"Date & time"===te?ee["Date & time"]=new Date(1e3*(Y.SK-19800)).toDateString():"Calculated Time"===te?ee["Calculated Time"]=this.convertToReadableFormat(Y.time_calculated):"Time Generated"===te?ee["Time Generated"]=this.convertToReadableFormat1(Y.time_generated):console.log("Invialid column")}),ee})};if(console.log("angularDataTable:>>",R),R.data.length>1){const Y=Object.keys(R.data[0]).reduce((te,pe)=>(te[`${pe}_l`]=R.data[0][pe],te),{}),ee=Object.keys(R.data[1]).reduce((te,pe)=>(te[`${pe}_c`]=R.data[1][pe],te),{});this.flattenedDynamicValues={...Y,...ee}}else this.flattenedDynamicValues=R.data[0];this.openModal(),this.cdr.detectChanges(),console.log("Angular DataTable Format:",R);const L=R.columns.filter(Y=>{const ee=Y;return ue.some(te=>te.includes(ee))});L.unshift("Device label","Date & time","Calculated Time","Time Generated"),R.columns=L,R.data=this.sanitizeData(R.data),this.tableData.push(R)}else if(X.length>1){const z=X.reduce((L,Y)=>L.concat(Y?.data||[]),[]);console.log("allhistoricalData",z);const H={};z.forEach(L=>{let Y=L.PK;Y=Y.split("#")[1];const te=Y,pe=Object.keys(L.MM);H[te]||(H[te]=new Set),pe.forEach(we=>{H[te].add(we)})}),console.log("propertyNamesByDevice",H);const G={};Object.keys(H).sort((L,Y)=>H[Y].size-H[L].size).forEach(L=>{const Y=H[L];G[L]={},Y.forEach(ee=>{G[L][ee]=[],z.forEach(te=>{const pe=1e3*te.SK,we=te.MM[ee];let Te=te.PK;Te=Te.split("#")[1],"number"==typeof we&&Te===L&&G[L][ee].push({x:pe,y:we})})})}),console.log("Matched Data By Device:",G);const U=Object.entries(G).map(([L,Y],ee)=>{const te=this.All_Devices_Configuration.find(Te=>Te.PK===L).reading_device_type;return Object.keys(Y).sort((Te,ge)=>parseInt(Te.replace(/\D/g,""),10)-parseInt(ge.replace(/\D/g,""),10)).map(Te=>{const ge=parseInt(Te.replace(/\D/g,""),10)-1,Oe=m[te]?.[ge]?.schedule_parameter_label||Te,je=(Y[Te]||[]).filter(Ue=>Ue?.y&&"string"!=typeof Ue.y);return{name:`${L} : ${Oe}`,data:je}})}).flat();console.log("all Formatted Highcharts Series:",U),ue=ue.map(L=>L.map(ee=>ee.trim())),U.filter(L=>{const Y=L.name.split(":")[1].trim();return ue.some(ee=>ee.includes(Y))});const T={},N=Object.keys(H).sort((L,Y)=>H[Y].size-H[L].size);console.log("PROPERTY NAME DEVICE:",H),console.log("SD",N),Object.keys(H).forEach((L,Y)=>{const te=this.All_Devices_Configuration.find(Ce=>Ce.PK===L)?.reading_device_type??"default",pe=Array.from(H[L]).sort((Ce,Oe)=>parseInt(Ce.replace(/\D/g,""),10)-parseInt(Oe.replace(/\D/g,""),10)),we=pe.map(Ce=>{const Oe=parseInt(Ce.slice(1))-1;return m[te]?.[Oe]?.schedule_parameter_label??Ce});we.unshift("Device label","Date & time","Calculated Time","Time Generated"),pe.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("Device:",L,"findRDT:",te,"Properties:",pe);const Te={columns:we,data:z.map(Ce=>{let Oe=Ce.PK;if(Oe=Oe.split("#")[1],Ce&&L===Oe){const Ue={};return pe.forEach(Le=>{const ke=parseInt(Le.slice(1))-1;["Device label","Date & time","Calculated Time","Time Generated"].includes(Le)?"Device label"===Le?Ue["Device label"]=Oe:"Date & time"===Le?Ue["Date & time"]=new Date(1e3*(Ce.SK-19800)).toDateString()+" "+new Date(1e3*(Ce.SK-19800)).toLocaleTimeString():"Calculated Time"===Le?Ue["Calculated Time"]=this.convertToReadableFormat(Ce.time_calculated):"Time Generated"===Le&&(Ue["Time Generated"]=this.convertToReadableFormat1(Ce.time_generated)):void 0!==m[te]?.[ke]?.schedule_parameter_label?Ue[m[te][ke].schedule_parameter_label]=Ce.MM[Le]??" ":Ue[Le]=Ce.MM[Le]??" "}),Ue}return null}).filter(Ce=>null!==Ce)};T[L]=Te,console.log("Data Tables:",T);const ge=T[L].columns.filter(Ce=>ue[Y].some(Oe=>Oe.includes(Ce.trim())));ge.unshift("Device label","Date & time","Calculated Time","Time Generated"),T[L].columns=ge,T[L].data=this.sanitizeData(T[L].data),this.tableData.push(T[L]),console.log("Final Table Structure:",this.tableData)}),console.log("Data Tables:",T)}else this.cdr.detectChanges()}).catch(X=>{this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_5___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",X)})}convertToReadableFormat(oe){const[ue,re]=oe.split(" to ");return`${moment__WEBPACK_IMPORTED_MODULE_4___default()(ue).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")} to ${moment__WEBPACK_IMPORTED_MODULE_4___default()(re).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")}`}convertToReadableFormat1(oe){return moment__WEBPACK_IMPORTED_MODULE_4___default()(oe).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")}sanitizeData(oe){return oe.map(ue=>{const re={};return Object.keys(ue).forEach(O=>{const S=this.sanitizeKey(O);re[S]=ue[O]}),re})}sanitizeKey(oe){let ue=oe.replace(/\./g,"_");return ue=ue.replace(/\[/g,"_").replace(/\]/g,""),ue}handleParameterData(oe){this.spinner.show(),this.tableData=[];let ue=oe.paramFilter;console.log("filteredData :",ue),console.log("Time Machine Data",oe);let re=JSON.parse(oe.rdt);re=re[0].parameters,console.log("Parameters",re);let O=JSON.parse(oe.rdt);console.log("Before mulActualData",O);let m=[];for(let H=0;H<O.length;H++)m.push(O[H].parameters);console.log("Extracted Parameters",m),console.log("After mulActualData",O);const z=performance.now();this.reportApi.dynamicTemplateData(oe).then(H=>{const G=performance.now();if(console.log(`API call took ${G-z} milliseconds`),console.log("response chk",H),1===H.length&&null===H[0])return sweetalert2__WEBPACK_IMPORTED_MODULE_5___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),void this.cdr.detectChanges();if(1===H.length){for(let Te=0;Te<H.length;Te++)null===H[Te]?this.cdr.detectChanges():console.log("continue the process");const D=H[0]?.data||[];console.log("historicalData",D);const U=performance.now(),R=Array.from(new Set(D.flatMap(Te=>Te.packet_info&&Te.packet_info.MM?Object.keys(Te.packet_info.MM):[])));console.log("propertyNames",R);const T={};D.forEach(Te=>{const ge=1e3*Te.SK;R.forEach(Ce=>{T[Ce]||(T[Ce]=[]),Te.packet_info&&Te.packet_info.MM&&Te.packet_info.MM[Ce]?T[Ce].push([ge,Te.packet_info.MM[Ce]]):console.warn(`packet.packet_info.MM or property ${Ce} is not defined`)})});const N=performance.now();console.log(`Grouping data took ${N-U} milliseconds`),console.log("groupedData",T);const L=Object.entries(T).map(([Te,ge])=>{const Ce=parseInt(Te.slice(1))-1,Oe=re[Ce];return{name:Oe?Oe.parameterLabel:Te,data:ge.filter(Le=>"string"!=typeof Le[1])}});console.log("Formatted Highcharts Series:",L);let Y=L.filter(Te=>{const ge=Te.name;return ue.some(Ce=>Ce.includes(ge))});console.log(Y.data),console.log(ue),console.log("highchartsSeries paramFilter",Y);const ee=R.map(Te=>{const ge=parseInt(Te.slice(1))-1;return re[ge]&&void 0!==re[ge].parameterLabel?re[ge].parameterLabel:Te});R.unshift("Device label","Date & time"),ee.unshift("Device label","Date & time"),console.log("TABLE NAMES",ee);const te={columns:ee,data:D.map(Te=>{const ge={};return R.forEach(Ce=>{if("Device label"!==Ce&&"Date & time"!==Ce){const Oe=parseInt(Ce.slice(1))-1;re[Oe]&&void 0!==re[Oe].parameterLabel?Te.packet_info&&Te.packet_info.MM&&Ce in Te.packet_info.MM?ge[re[Oe].parameterLabel]=Te.packet_info.MM[Ce]:(ge[re[Oe].parameterLabel]=" ",console.warn(`Missing data for property: ${Ce}`)):Te.packet_info&&Te.packet_info.MM&&Ce in Te.packet_info.MM?ge[Ce]=Te.packet_info.MM[Ce]??" ":(ge[Ce]=" ",console.warn(`Missing data for property: ${Ce}`))}else"Device label"===Ce?ge["Device label"]=Te.packet_info?.MN??"Unknown Device":"Date & time"===Ce?ge["Date & time"]=new Date(1e3*(Te.SK-19800)).toDateString()+" "+new Date(1e3*(Te.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),ge})};console.log("angularDataTable:>>",te),this.flattenedDynamicValues=te.data[0],this.openModal(),this.cdr.detectChanges()}else if(H.length>1){const U=H.reduce((pe,we)=>pe.concat(we?.data||[]),[]);console.log("allhistoricalData",U);const R={};U.forEach(pe=>{const we=pe.packet_info.MN;if(pe.packet_info&&pe.packet_info.MM){const Te=Object.keys(pe.packet_info.MM);R[we]||(R[we]=new Set),Te.forEach(ge=>{R[we].add(ge)})}}),console.log("propertyNamesByDevice",R);const T={};Object.keys(R).sort((pe,we)=>R[we].size-R[pe].size).forEach(pe=>{const we=R[pe];T[pe]={},we.forEach(Te=>{T[pe][Te]=[],U.forEach(ge=>{if(ge.packet_info&&ge.packet_info.MM){const Oe=ge.packet_info.MM[Te];"number"==typeof Oe&&ge.packet_info.MN===pe&&T[pe][Te].push({x:1e3*ge.SK,y:Oe})}})})}),console.log("Matched Data By Device:",T);const L=Object.entries(T).map(([pe,we],Te)=>Object.entries(we).map(([Ce,Oe])=>{const je=parseInt(Ce.slice(1))-1,Ue=m[Te][je],Le=Ue?Ue.parameterLabel:Ce,ke=Oe.filter(me=>"string"!=typeof me.y);return{name:`${pe} : ${Le}`,data:ke}})).flat();console.log("all Formatted Highcharts Series:",L),ue=ue.map(pe=>pe.map(Te=>Te.trim()));let Y=L.filter(pe=>{const we=pe.name.split(":")[1].trim();return ue.some(Te=>Te.includes(we))});console.log("param Filter",Y);const ee={};Object.keys(R).sort((pe,we)=>R[we].size-R[pe].size),Object.keys(R).forEach((pe,we)=>{const Te=Array.from(R[pe]),ge=Te.map(je=>{const Ue=parseInt(je.slice(1))-1;return m[we][Ue]&&void 0!==m[we][Ue].parameterLabel?m[we][Ue].parameterLabel:je});ge.unshift("Device label","Date & time"),Te.unshift("Device label","Date & time");const Ce={columns:ge,data:U.map(je=>{if(je&&pe===je.packet_info.MN){const Ue={};return Te.forEach(Le=>{if("Device label"!==Le&&"Date & time"!==Le){const ke=parseInt(Le.slice(1))-1;m[we]&&m[we][ke]&&void 0!==m[we][ke].parameterLabel?Ue[m[we][ke].parameterLabel]=je&&je.packet_info.MM&&void 0!==je.packet_info.MM[Le]?je.packet_info.MM[Le]:" ":Ue[Le]=je&&je.packet_info.MM&&void 0!==je.packet_info.MM[Le]?je.packet_info.MM[Le]:" "}else"Device label"===Le?Ue["Device label"]=je.packet_info?.MN??"Unknown Device":"Date & time"===Le?Ue["Date & time"]=new Date(1e3*(je.SK-19800)).toDateString()+" "+new Date(1e3*(je.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),Ue}return null}).filter(je=>null!==je)};ee[pe]=Ce,console.log("Data Tables:",ee);const Oe=ee[pe].columns.filter(je=>{const Ue=je;return ue[we].some(Le=>Le.includes(Ue))});Oe.unshift("Device label","Date & time"),ee[pe].columns=Oe,ee[pe].data=this.sanitizeData(ee[pe].data),this.tableData.push(ee[pe])}),console.log("structure check",this.tableData),console.log("Data Tables:",ee)}else this.cdr.detectChanges()}).catch(H=>{this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_5___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",H)})}extractHandlebarsParams(oe){const ue=/\{\{\$(.*?)\$\}\}/g,re=[];let O;for(;null!==(O=ue.exec(oe));)O[1]&&re.push(O[1]),O[2]&&re.push(O[2]);return re}extractHandlebarsScheduleParams(oe){const ue=/\{\{\$(.*?)\$\}\}/g,re=[];let O;for(;null!==(O=ue.exec(oe));)O[1]&&re.push(O[1]),O[2]&&re.push(O[2]);return re}openModal(){const oe={...this.flattenedDeviceConfig,...this.flattenedDynamicValues},ue=this.preprocessTemplate(this.editor.getHtml()),re=this.editor.getCss(),S=handlebars__WEBPACK_IMPORTED_MODULE_2__.compile(ue)(oe);this.previewForPDF=this.sanitizer.bypassSecurityTrustHtml(`\n                <style>${re}</style>\n                <div>${S}</div>\n            `),this.previewCss=re,this.modalService.open(this.previewModal,{size:"lg"})}downloadPdf(){const oe=document.createElement("div");oe.innerHTML=this.previewForPDF.changingThisBreaksApplicationSecurity;const re=document.createElement("style");re.innerHTML=this.previewCss,oe.appendChild(re),html2pdf_js__WEBPACK_IMPORTED_MODULE_6___default()().from(oe).save("preview.pdf")}}return _class=DynamicTemplateWorkLabComponent,(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(DynamicTemplateWorkLabComponent,"\u0275fac",function oe(ue){return new(ue||_class)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_16__.FF),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_common_http__WEBPACK_IMPORTED_MODULE_17__.eN),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(src_services_reports_api_service__WEBPACK_IMPORTED_MODULE_8__.H),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_11__.Qsj),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_18__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_19__.ux),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_19__.ux),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(src_app_pages_shared_service__WEBPACK_IMPORTED_MODULE_9__.F),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_18__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(src_app_API_service__WEBPACK_IMPORTED_MODULE_20__.t),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_template_service__WEBPACK_IMPORTED_MODULE_21__.E),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(ngx_spinner__WEBPACK_IMPORTED_MODULE_22__.t2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_platform_browser__WEBPACK_IMPORTED_MODULE_23__.H7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_forms__WEBPACK_IMPORTED_MODULE_13__.qu),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_11__.sBO))}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_12__.Z)(DynamicTemplateWorkLabComponent,"\u0275cmp",_angular_core__WEBPACK_IMPORTED_MODULE_11__.Xpm({type:_class,selectors:[["app-dynamic-template-work-lab"]],viewQuery:function oe(ue,re){if(1&ue&&_angular_core__WEBPACK_IMPORTED_MODULE_11__.Gf(_c0,5),2&ue){let O;_angular_core__WEBPACK_IMPORTED_MODULE_11__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_11__.CRH())&&(re.previewModal=O.first)}},decls:67,vars:31,consts:[[1,"d-flex","flex-column","flex-root"],[1,"d-flex","flex-row","flex-column-fluid","page"],["id","kt_aside",1,"aside","aside-left","aside-fixed"],["id","kt_wrapper",1,"d-flex","flex-column","flex-row-fluid","wrapper"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[1,"d-flex","flex-column-fluid"],["id","kt_app_toolbar",1,"fixed-toolbar","py-1","py-lg-2"],["id","kt_app_toolbar_container",1,"container-fluid","d-flex","align-items-center","justify-content-between","flex-wrap"],[1,"d-flex","align-items-center","flex-wrap","gap-3"],["role","tablist",1,"nav","nav-pills","nav-pills-custom","d-flex","align-items-center","gap-2"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"nav-item"],["class","nav-link btn btn-outline btn-sm btn-flex btn-color-muted btn-active-color-primary flex-column w-65px h-50px p-2 text-center","id","export-excel-tab","aria-selected","false",3,"click",4,"ngIf"],[1,"d-flex","align-items-center","gap-3","flex-wrap"],[4,"ngIf"],[1,"form-check","form-switch","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"form-check-label"],[1,"d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-sm","btn-flex","btn-secondary","fw-bold",3,"click"],[1,"bi","bi-house-door","fs-5","me-1"],[1,"container-xl","content-with-fixed-toolbar"],[1,"card",2,"width","100%","height","100vh","background-color","var(--bs-app-bg-color) !important"],[1,"card-body","p-0","pb-0",2,"background-color","var(--bs-app-bg-color) !important","padding","0 !important"],[1,"row","g-5","g-xl-10"],[3,"ngClass","ngStyle"],[1,"col-xl-12","mb-5","mb-xl-10"],["id","gjs"],["ReportsModal",""],["id","kt_forms","data-kt-drawer","true","data-kt-drawer-activate","true","data-kt-drawer-overlay","false","data-kt-drawer-width","{default:'300px', 'lg': '350px'}","data-kt-drawer-direction","end",1,"bg-body","shadow-sm"],[1,"card","shadow-none","rounded-0","w-100"],["id","kt_forms_header",1,"card-header"],[1,"card-title","fw-bold","text-gray-600"],[1,"card-toolbar"],["type","button","id","kt_forms_close",1,"btn","btn-sm","btn-icon","explore-btn-dismiss","me-n5"],["name","cross",1,"fs-2"],["id","kt_forms_body",1,"card-body"],["id","kt_forms_scroll","data-kt-scroll","true","data-kt-scroll-height","auto","data-kt-scroll-offset","5px",1,"hover-scroll-overlay-y"],[1,"tab-content"],["id","kt_stats_widget_16_tab_1","role","tabpanel",1,"tab-pane","fade"],[1,"p-3",2,"max-width","350px","width","100%",3,"formGroup","ngSubmit"],["formArrayName","device_configs"],["class","card mb-3 shadow-sm",3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-center","mb-3"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-plus"],[1,"d-flex","justify-content-between","mt-3"],["type","submit",1,"btn","btn-success","btn-sm"],[1,"fas","fa-save"],["type","reset",1,"btn","btn-secondary","btn-sm"],[1,"fas","fa-undo"],["id","kt_stats_widget_16_tab_2","role","tabpanel",1,"tab-pane","fade"],["class","d-flex flex-column align-items-center",4,"ngIf"],["id","kt_stats_widget_16_tab_3","role","tabpanel",1,"tab-pane","fade"],["id","kt_stats_widget_16_tab_4","role","tabpanel",1,"tab-pane","fade"],["id","kt_stats_widget_16_tab_5","role","tabpanel",1,"tab-pane","fade"],["generatePDF",""],["aria-selected","false",1,"nav-link","btn","btn-outline","btn-sm","btn-flex","btn-color-muted","flex-column","w-65px","h-50px","p-2","text-center",3,"id","ngClass","click"],[1,"nav-text","text-gray-800","fw-bold","lh-1"],["class","bullet-custom position-absolute bottom-0 w-100 h-4px bg-primary",4,"ngIf"],[1,"bullet-custom","position-absolute","bottom-0","w-100","h-4px","bg-primary"],["id","export-excel-tab","aria-selected","false",1,"nav-link","btn","btn-outline","btn-sm","btn-flex","btn-color-muted","btn-active-color-primary","flex-column","w-65px","h-50px","p-2","text-center",3,"click"],[1,"fa-solid","fa-floppy-disk","fs-5","p-1"],["deviceForm","ngForm"],["name","device","optionValueField","value","optionTextField","text","placeholder","Select Device",3,"ngModel","allowClear","items","ngModelChange","select"],[1,"text-danger"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row","g-5"],[1,"col-md-9"],[1,"card","shadow-sm","border","border-light","p-4"],[1,"mb-4","text-center"],[1,"form",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group","row","mb-4"],[1,"col-form-label","text-right","col-lg-3","col-sm-12","required","fw-bold"],[1,"col-lg-6","col-md-12","col-sm-12"],["formControlName","reportsType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["disabled","",3,"value","selected"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger mt-1",4,"ngIf"],["formControlName","dateType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["class","form-group row mb-4",4,"ngIf"],[1,"form-group","row"],[1,"col-lg-6","offset-lg-3","col-md-12","col-sm-12","text-center"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],[3,"value"],[1,"text-danger","mt-1"],["type","datetime-local","formControlName","startDateTime",1,"form-control","form-control-solid"],["type","datetime-local","formControlName","endDateTime",1,"form-control","form-control-solid"],[1,"card","mb-3","shadow-sm",3,"formGroupName"],[1,"card-header","py-2"],[1,"card-title","mb-0"],[1,"card-body","px-2","py-1"],["class","row mb-3",4,"ngIf"],["formArrayName","keyValuePairs"],["class","mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-center","mb-2"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"fas","fa-plus-circle"],["formArrayName","additionalKeyValuePairs"],[1,"card-footer","text-end","py-1"],[1,"d-flex","justify-content-between"],["type","button",1,"btn","btn-warning","btn-sm","w-100",3,"click"],[1,"fas","fa-copy"],["type","button",1,"btn","btn-danger","btn-sm","ms-2","w-100",3,"click"],[1,"fas","fa-minus-circle"],[1,"row","mb-3"],[1,"col-12"],["for","device",1,"form-label"],["formControlName","device","optionValueField","value","optionTextField","text","placeholder","Select Device",3,"allowClear","items"],[1,"mb-2",3,"formGroupName"],[1,"row","mb-2"],[1,"col-4"],["formControlName","key","placeholder","Key",1,"form-control","form-control-sm"],["formControlName","value","placeholder","Value",1,"form-control","form-control-sm"],[1,"col-2"],["type","button",1,"btn","btn-info","btn-sm","w-100",3,"click"],["type","button",1,"btn","btn-danger","btn-sm","w-100",3,"click"],[1,"fas","fa-trash-alt"],[1,"d-flex","flex-column","align-items-center"],[1,"mb-3","w-100",2,"max-width","350px"],[1,"col-form-label","fw-bold","me-2"],["name","device","optionValueField","parameterID","optionTextField","parameterLabel","placeholder","Select Device",1,"w-100",3,"ngModel","allowClear","items","ngModelChange"],[1,"text-center"],[1,"btn","btn-primary","btn-sm",3,"click"],["name","device","optionValueField","schedule_parameter_label","optionTextField","schedule_parameter_label","placeholder","Select Device",1,"w-100",3,"ngModel","allowClear","items","ngModelChange"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function oe(ue,re){1&ue&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(2,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(10,DynamicTemplateWorkLabComponent_li_10_Template,6,11,"li",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(11,"li",11),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(12,DynamicTemplateWorkLabComponent_a_12_Template,4,0,"a",12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(13,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(14,DynamicTemplateWorkLabComponent_form_14_Template,4,4,"form",14),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(15,"div")(16,"label",15)(17,"input",16),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("change",function(S){return re.toggleToolbar(S)}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(18,"span",17),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(19),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(20,"div",18)(21,"button",19),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){return re.exitProcessingMode()}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(22,"i",20),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(23," Home "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(24,"div",21)(25,"div",22)(26,"div",23)(27,"div",24)(28,"div",25)(29,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(30,"div",27),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(31,DynamicTemplateWorkLabComponent_ng_template_31_Template,36,12,"ng-template",null,28,_angular_core__WEBPACK_IMPORTED_MODULE_11__.W1O),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(33,"div",29)(34,"div",30)(35,"div",31)(36,"h5",32),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(37),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(38,"div",33)(39,"button",34),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(40,"app-keenicon",35),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(41,"div",36)(42,"div",37)(43,"div",38)(44,"div",39)(45,"form",40),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("ngSubmit",function(){return re.onSubmit()}),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(46,"div",41),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(47,DynamicTemplateWorkLabComponent_div_47_Template,26,4,"div",42),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(48,"div",43)(49,"button",44),_angular_core__WEBPACK_IMPORTED_MODULE_11__.NdJ("click",function(){return re.addFormEntry()}),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(50,"i",45),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(51," Add New Device Entry "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(52,"div",46)(53,"button",47),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(54,"i",48),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(55," Save Template "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(56,"button",49),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(57,"i",50),_angular_core__WEBPACK_IMPORTED_MODULE_11__._uU(58," Reset "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.TgZ(59,"div",51),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(60,DynamicTemplateWorkLabComponent_form_60_Template,8,3,"form",52),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(61,DynamicTemplateWorkLabComponent_form_61_Template,8,3,"form",52),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_11__._UZ(62,"div",53)(63,"div",54)(64,"div",55),_angular_core__WEBPACK_IMPORTED_MODULE_11__.qZA()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.YNc(65,DynamicTemplateWorkLabComponent_ng_template_65_Template,11,1,"ng-template",null,56,_angular_core__WEBPACK_IMPORTED_MODULE_11__.W1O)),2&ue&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngForOf",_angular_core__WEBPACK_IMPORTED_MODULE_11__.l5B(21,_c6,_angular_core__WEBPACK_IMPORTED_MODULE_11__.DdM(17,_c2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DdM(18,_c3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DdM(19,_c4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DdM(20,_c5))),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",re.hidingLink),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",re.allDeviceWithSameRdt.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("checked",re.isToolbarVisible),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.hij(" ",re.isToolbarVisible?"Hide Side Panel":"Show Side Panel"," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_11__.WLB(26,_c7,re.isToolbarVisible&&!re.isDrawerOpen,re.isDrawerOpen))("ngStyle",_angular_core__WEBPACK_IMPORTED_MODULE_11__.VKq(29,_c8,re.isDrawerOpen?"calc(400px + var(--bs-gutter-x) * 0.5)":"0")),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.uIk("data-kt-drawer-name","forms_config")("data-kt-drawer-toggle","#kt_forms_toggle")("data-kt-drawer-close","#kt_forms_close"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.hij(" ",re.drawerTile," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.uIk("data-kt-scroll-wrappers","#kt_forms_body")("data-kt-scroll-dependencies","#kt_forms_header"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("formGroup",re.deviceForm),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngForOf",re.device_configs.controls),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",re.All_RDTs_Configuration.length>0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Q6J("ngIf",re.All_RDTs_Configuration.length>0))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_24__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_24__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_24__.O5,_angular_common__WEBPACK_IMPORTED_MODULE_24__.PC,_angular_forms__WEBPACK_IMPORTED_MODULE_13__._Y,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.Kr,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.EJ,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.JL,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.On,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.F,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.sg,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.u,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.x0,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.CE,_metronic_shared_keenicon_keenicon_component__WEBPACK_IMPORTED_MODULE_10__.q,ngx_select_ex__WEBPACK_IMPORTED_MODULE_25__.O2],styles:['@charset "UTF-8";.dz-default-message[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:10px;color:#6c757d}.dz-default-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:auto;margin-bottom:10px}.dz-default-message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#007bff;margin-bottom:5px}.dz-default-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;margin:0}  dropzone>.dropzone.dz-wrapper .dz-message{min-height:200px!important;border-radius:10px!important}.dz-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px;border:1px solid #e2e5ec;background-color:#fff;border-radius:8px}.dz-image[_ngcontent-%COMP%]{background:none!important;display:flex;justify-content:center;align-items:center;width:100%}.dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:auto;margin-bottom:10px;display:block}.header-input[_ngcontent-%COMP%]{border:1px solid #ddd;background:#fff;font-size:14px;font-weight:700;text-align:center;padding:2px;outline:none;border-radius:4px}.header-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;padding:5px}.device-parameters[_ngcontent-%COMP%]{font-size:.9rem}.toggle-button[_ngcontent-%COMP%]{transition:background-color .3s ease}.fixed-toolbar[_ngcontent-%COMP%]{position:fixed;top:var(--bs-app-header-height, 70px);left:auto;width:100%;z-index:50;background-color:var(--bs-body-bg, #fff);box-shadow:0 2px 6px #0000001a;border-top:1px dashed var(--bs-border-dashed-color, #009ef7)!important;border-radius:0 0 10px 10px;padding-left:1%;padding-right:10%}.content-with-fixed-toolbar[_ngcontent-%COMP%]{margin-top:60px}.progress-container[_ngcontent-%COMP%]{width:80%;height:8px;background:rgba(255,255,255,.2);border-radius:10px;overflow:hidden;margin:10px auto}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4caf50,#00bcd4);transition:width .4s ease-in-out;border-radius:10px}.dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:60px;height:auto}.scrollable-accordion-content[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;padding-right:10px}.scrollable-accordion-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollable-accordion-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc;border-radius:3px}.scrollable-accordion-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#999}.main-content-wrapper[_ngcontent-%COMP%]{transition:margin-right .3s ease-in-out;padding-top:60px}']})),DynamicTemplateWorkLabComponent})()},77159:(oe,ue,re)=>{"use strict";re.d(ue,{Z:()=>Y});var O=re(86656),S=re(65879),m=re(81845),x=re(61492),z=re.n(x),H=re(85748),G=re.n(H),D=re(5789),U=re.n(D),R=re(13519),T=re.n(R),N=re(7745),L=re.n(N);z()(m),G()(m),U()(m),L()(m);let Y=(()=>{var ee;class te{ngAfterViewInit(){}constructor(){(0,O.Z)(this,"defaultChartOptions",void 0),(0,O.Z)(this,"chart",void 0),(0,O.Z)(this,"chartsData",void 0),(0,O.Z)(this,"item",void 0),(0,O.Z)(this,"itemChange",new S.vpe),(0,O.Z)(this,"chartInstance",new S.vpe)}ngOnChanges(we){console.log("IN chart ",this.chartsData)}ngOnInit(){}createHighchartsLineChart(we,Te,ge){console.log("I HAVE RECIEVED THIS FORMAT",we),we=this.updateHighchartsSeries(we,ge);try{let Ce;"line"==Te||"spline"==Te||"bar"==Te||"column"==Te||"area"==Te||"areaspline"==Te?Ce={chart:{renderTo:"chart_preview1",type:Te},exporting:{enabled:!0},title:{text:""},xAxis:{type:"datetime",dateTimeLabelFormats:{hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},title:{text:null}},yAxis:{title:{text:null}},tooltip:{xDateFormat:"%A, %b %e, %Y %H:%M:%S"},plotOptions:{series:{turboThreshold:0,marker:{enabled:!0,radius:7}}},series:we.map(Oe=>({type:Te,name:Oe.name,data:Oe.data})),credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:1e4},chartOptions:{legend:{layout:"vertical",align:"right",verticalAlign:"middle"}}}]}}:"pie"==Te?Ce={chart:{renderTo:"chart_preview1",type:"pie"},exporting:{enabled:!0},title:{text:""},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.y}"}}},series:[{name:"Value :",colorByPoint:!0,data:we.map(Oe=>{const je=Oe.data[0];return{name:Oe.name,y:je.y||je[1]}})}],credits:{enabled:!1},responsive:{rules:[{condition:{maxWidth:1e4},chartOptions:{legend:{itemStyle:{color:"var(--bs-body-color)"},layout:"vertical",align:"right",verticalAlign:"middle"}}}]}}:"timeline"==Te&&(Ce={chart:{zooming:{type:"x"},type:"timeline"},xAxis:{type:"datetime",visible:!1},yAxis:{gridLineWidth:1,title:null,labels:{enabled:!1}},legend:{enabled:!1},title:{text:"Audit Trail Time Line"},tooltip:{style:{width:300}},series:[{data:we}]}),this.chart=m.chart("chart_preview1",Ce),this.chart&&this.chartInstance.emit(this.chart)}catch(Ce){console.log(Ce),T().fire({icon:"error",title:"Warning: Data formmat is not correct for Chart",text:"Something went wrong,user another chart type",confirmButtonText:"Understood"})}}updateHighchartsSeries(we,Te){return we.forEach(ge=>{if(ge.name.includes(" : ")){const[Ce,Oe]=ge.name.split(" : "),je=Te.find(Ue=>Ue.mn===Ce);je&&(ge.name=`${je.mn_label} : ${Oe}`)}}),we}}return ee=te,(0,O.Z)(te,"\u0275fac",function(we){return new(we||ee)}),(0,O.Z)(te,"\u0275cmp",S.Xpm({type:ee,selectors:[["app-reports-charts"]],inputs:{chartsData:"chartsData",item:"item"},outputs:{itemChange:"itemChange",chartInstance:"chartInstance"},features:[S.TTD],decls:1,vars:0,consts:[["id","chart_preview1",2,"width","100%","height","100%","margin-top","10px"]],template:function(we,Te){1&we&&S._UZ(0,"div",0)}})),te})()},51793:(oe,ue,re)=>{"use strict";re.d(ue,{c:()=>jt});var O=re(15861),S=re(86656),m=re(65879),X=re(56223),x=re(77988),z=re(13519),H=re.n(z),G=re(78645),D=re(47394),U=re(97328),R=re(59773),T=re(89433),N=re(20759),L=re(5588),Y=re(31552),ee=re(64190),te=re(23365),pe=re(96814),we=re(60540),Te=re(64170),ge=re(98525),Ce=re(23680),Oe=re(95392);function je(gt,Fr){1&gt&&(m.TgZ(0,"div")(1,"label",7),m._uU(2,"Chart Type :"),m.qZA(),m.TgZ(3,"select",8)(4,"option",9),m._uU(5,"Select Chart Type"),m.qZA(),m.TgZ(6,"option",10),m._uU(7," Line Chart "),m.qZA(),m.TgZ(8,"option",10),m._uU(9," Spline Chart "),m.qZA(),m.TgZ(10,"option",10),m._uU(11," Bar Chart "),m.qZA(),m.TgZ(12,"option",10),m._uU(13," Column Chart "),m.qZA(),m.TgZ(14,"option",10),m._uU(15," Pie Chart "),m.qZA(),m.TgZ(16,"option",10),m._uU(17," Area Chart "),m.qZA(),m.TgZ(18,"option",10),m._uU(19," Area Spline "),m.qZA()()()),2&gt&&(m.xp6(4),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("value","line"),m.xp6(2),m.Q6J("value","spline"),m.xp6(2),m.Q6J("value","bar"),m.xp6(2),m.Q6J("value","column"),m.xp6(2),m.Q6J("value","pie"),m.xp6(2),m.Q6J("value","area"),m.xp6(2),m.Q6J("value","areaspline"))}function Ue(gt,Fr){1&gt&&(m.TgZ(0,"div")(1,"label",7),m._uU(2,"Filer Type :"),m.qZA(),m.TgZ(3,"select",11)(4,"option",9),m._uU(5,"Select Operator"),m.qZA(),m.TgZ(6,"option",10),m._uU(7," == "),m.qZA(),m.TgZ(8,"option",10),m._uU(9," != "),m.qZA(),m.TgZ(10,"option",10),m._uU(11," >= "),m.qZA(),m.TgZ(12,"option",10),m._uU(13," <= "),m.qZA(),m.TgZ(14,"option",10),m._uU(15," > "),m.qZA(),m.TgZ(16,"option",10),m._uU(17," < "),m.qZA(),m.TgZ(18,"option",10),m._uU(19," Contains "),m.qZA()()()),2&gt&&(m.xp6(4),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("value","=="),m.xp6(2),m.Q6J("value","!="),m.xp6(2),m.Q6J("value",">="),m.xp6(2),m.Q6J("value","<="),m.xp6(2),m.Q6J("value",">"),m.xp6(2),m.Q6J("value","<"),m.xp6(2),m.Q6J("value","Contains"))}function Le(gt,Fr){1&gt&&(m.TgZ(0,"div")(1,"label",7),m._uU(2,"Value Filter :"),m.qZA(),m._UZ(3,"input",12),m.qZA())}let ke=(()=>{var gt;class Fr{constructor(){(0,S.Z)(this,"class","menu menu-sub menu-sub-dropdown w-300px w-md-400px"),(0,S.Z)(this,"dataKtMenu","true"),(0,S.Z)(this,"reportsForm",void 0),(0,S.Z)(this,"extactedStoredPermissions",void 0),(0,S.Z)(this,"label",void 0),(0,S.Z)(this,"type",void 0),(0,S.Z)(this,"i",void 0),(0,S.Z)(this,"confirmEvent",new m.vpe)}ngOnInit(){console.log("reportsForm:",this.reportsForm),console.log("extactedStoredPermissions",this.extactedStoredPermissions)}}return gt=Fr,(0,S.Z)(Fr,"\u0275fac",function(wt){return new(wt||gt)}),(0,S.Z)(Fr,"\u0275cmp",m.Xpm({type:gt,selectors:[["app-advance-menu"]],hostVars:3,hostBindings:function(wt,St){2&wt&&(m.uIk("data-kt-menu",St.dataKtMenu),m.Tol(St.class))},inputs:{reportsForm:"reportsForm",extactedStoredPermissions:"extactedStoredPermissions",label:"label",type:"type",i:"i"},outputs:{confirmEvent:"confirmEvent"},decls:11,vars:4,consts:[[1,"px-7","py-5"],[1,"separator","border-gray-200"],[1,"px-7","py-5",3,"formGroup"],[1,"mb-10"],[4,"ngIf"],[1,"d-flex","justify-content-end"],["type","submit","data-kt-menu-dismiss","true",1,"btn","btn-sm","btn-primary"],[1,"form-label","fw-bold"],["formControlName","chart_type",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["disabled","",3,"value","selected"],[3,"value"],["formControlName","relationalOperators",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["type","text","placeholder","Enter Value","name","filter_value","formControlName","filter_value",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"]],template:function(wt,St){if(1&wt&&(m.TgZ(0,"div",0),m._uU(1,"\nAdvanced Options "),m.qZA(),m._UZ(2,"div",1),m.TgZ(3,"div",2)(4,"div",3),m.YNc(5,je,20,9,"div",4),m.YNc(6,Ue,20,9,"div",4),m.YNc(7,Le,4,0,"div",4),m.qZA(),m.TgZ(8,"div",5)(9,"button",6),m._uU(10,"\nOk "),m.qZA()()()),2&wt){let vr,fn,Ko;m.xp6(3),m.Q6J("formGroup",St.reportsForm),m.xp6(2),m.Q6J("ngIf","Alerts"!==(null==(vr=St.reportsForm.get("reportsType"))?null:vr.value)&&"Audit trails"!==(null==(vr=St.reportsForm.get("reportsType"))?null:vr.value)),m.xp6(1),m.Q6J("ngIf",(null==St.extactedStoredPermissions?null:St.extactedStoredPermissions.includes("value_filter"))&&"Parameters"===(null==(fn=St.reportsForm.get("reportsType"))?null:fn.value)),m.xp6(1),m.Q6J("ngIf",(null==St.extactedStoredPermissions?null:St.extactedStoredPermissions.includes("value_filter"))&&"Parameters"===(null==(Ko=St.reportsForm.get("reportsType"))?null:Ko.value))}},dependencies:[pe.O5,X.YN,X.Kr,X.Fj,X.EJ,X.JJ,X.JL,X.sg,X.u]})),Fr})();const me=["scrollContainer"];function l(gt,Fr){1&gt&&(m.TgZ(0,"strong"),m._uU(1," - "),m.qZA())}function Me(gt,Fr){if(1&gt&&(m.TgZ(0,"a",37),m._uU(1),m.qZA()),2&gt){const tr=m.oxw();m.xp6(1),m.Oqu(tr.reportsDisplayID)}}function Ze(gt,Fr){1&gt&&(m.TgZ(0,"button",38)(1,"i",39),m._UZ(2,"span",40)(3,"span",41),m.qZA(),m._uU(4," Advanced Options "),m.qZA())}function ut(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.Oqu(tr)}}function $e(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.Oqu(tr)}}const Ct=function(gt){return{"is-invalid":gt}},Ke=function(){return["Hour","Day"]};function Wt(gt,Fr){if(1&gt){const tr=m.EpF();m.ynx(0),m.TgZ(1,"label",10),m._uU(2,"Custom Type"),m.qZA(),m.TgZ(3,"div",11)(4,"select",43),m.NdJ("change",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.clearField())}),m.TgZ(5,"option",13),m._uU(6,"Select Custom Type"),m.qZA(),m.YNc(7,$e,2,2,"option",14),m.qZA()(),m.BQk()}if(2&gt){const tr=m.oxw();let wt;m.xp6(4),m.Q6J("ngClass",m.VKq(4,Ct,(null==(wt=tr.reportsForm.get("customType"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("customType"))?null:wt.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",m.DdM(6,Ke))}}function mr(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr[0]),m.xp6(1),m.hij(" ",tr[1]," ")}}function nr(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Template "),m.qZA(),m.TgZ(3,"div",46)(4,"select",47),m.NdJ("change",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.clearField())}),m.TgZ(5,"option",13),m._uU(6,"Select template"),m.qZA(),m.YNc(7,mr,2,2,"option",14),m.qZA()()()}if(2&gt){const tr=m.oxw();let wt;m.xp6(4),m.Q6J("ngClass",m.VKq(4,Ct,(null==(wt=tr.reportsForm.get("templateID"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("templateID"))?null:wt.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",tr.lookup_data_temp_dr)}}function Kr(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.hij(" ",tr," ")}}const Pn=function(){return["Parameters","Hourly consumption","Daily consumption","Monthly consumption"]};function Kn(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",48)(1,"label",45),m._uU(2,"Billing Type"),m.qZA(),m.TgZ(3,"div",46)(4,"select",49),m.NdJ("change",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.clearField())}),m.TgZ(5,"option",13),m._uU(6,"Select Reports Type"),m.qZA(),m.YNc(7,Kr,2,2,"option",14),m.qZA()()()}if(2&gt){const tr=m.oxw();let wt;m.xp6(4),m.Q6J("ngClass",m.VKq(4,Ct,(null==(wt=tr.reportsForm.get("billingType"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("billingType"))?null:wt.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",m.DdM(6,Pn))}}function Mo(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr[0]),m.xp6(1),m.hij(" ",tr[1]," ")}}function mo(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Template "),m.qZA(),m.TgZ(3,"div",46)(4,"select",50),m.NdJ("change",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.clearField())}),m.TgZ(5,"option",13),m._uU(6,"Select template"),m.qZA(),m.YNc(7,Mo,2,2,"option",14),m.qZA()()()}if(2&gt){const tr=m.oxw();let wt;m.xp6(4),m.Q6J("ngClass",m.VKq(4,Ct,(null==(wt=tr.reportsForm.get("modelID"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("modelID"))?null:wt.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",tr.lookup_data_temp_dre)}}function No(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.hij(" ",tr," ")}}function Di(gt,Fr){if(1&gt&&(m.TgZ(0,"div",48)(1,"label",45),m._uU(2,"Excel Report Type"),m.qZA(),m.TgZ(3,"div",46)(4,"select",51)(5,"option",13),m._uU(6,"Select Reports Type"),m.qZA(),m.YNc(7,No,2,2,"option",14),m.qZA()()()),2&gt){const tr=m.oxw();let wt;m.xp6(4),m.Q6J("ngClass",m.VKq(4,Ct,(null==(wt=tr.reportsForm.get("excelReportType"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("excelReportType"))?null:wt.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",tr.validExcelTypes)}}function ci(gt,Fr){1&gt&&(m.TgZ(0,"div",44)(1,"label",45),m._uU(2,"Alerts Type"),m.qZA(),m.TgZ(3,"div",46)(4,"select",52)(5,"option",13),m._uU(6,"Select Alerts Type"),m.qZA(),m.TgZ(7,"option",42),m._uU(8," Live "),m.qZA(),m.TgZ(9,"option",42),m._uU(10," Historical "),m.qZA()()()()),2&gt&&(m.xp6(5),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("value","Live"),m.xp6(2),m.Q6J("value","Historical"))}const zn=function(gt,Fr){return{"btn-danger":gt,"btn-primary":Fr}};function Wn(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",53)(1,"label",45),m._uU(2," Devices Location\n"),m.qZA(),m.TgZ(3,"div",46)(4,"button",54),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.readBackLocationTree())}),m._UZ(5,"i",55),m._uU(6),m.qZA()()()}if(2&gt){const tr=m.oxw();m.xp6(4),m.Q6J("ngClass",m.WLB(2,zn,tr.mnListTouched,!tr.mnListTouched)),m.xp6(2),m.hij(" ",(null==tr.mnList?null:tr.mnList.length)>0?tr.formatMNList(tr.mnList):"Select Device"," ")}}function an(gt,Fr){if(1&gt&&(m.TgZ(0,"div",56)(1,"label",45),m._uU(2,"Users "),m.qZA(),m.TgZ(3,"div",46)(4,"div",57),m._UZ(5,"ng-multiselect-dropdown",58),m.qZA()()()),2&gt){const tr=m.oxw();m.xp6(5),m.Q6J("placeholder","Select Users")("settings",tr.dropdownSettings3)("data",tr.UserList)("formControl",tr.reportsForm.controls.user_list)}}const lr=function(gt){return{disabled:gt}};function Pr(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"button",68),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw(2);return m.KtG(St.scrollLeft())}),m._UZ(1,"i",69),m.qZA()}if(2&gt){const tr=m.oxw(2);m.Q6J("ngClass",m.VKq(1,lr,tr.isAtStart))}}function Mn(gt,Fr){if(1&gt&&(m.TgZ(0,"mat-option",42)(1,"mat-checkbox",77),m._uU(2),m.qZA()()),2&gt){const tr=Fr.$implicit,wt=m.oxw().$implicit;let St;m.Q6J("value",tr.value),m.xp6(1),m.Q6J("checked",null==(St=wt.get("selectedParameters"))?null:St.value.includes(tr.value)),m.xp6(1),m.hij(" ",tr.text," ")}}function dn(gt,Fr){1&gt&&(m.TgZ(0,"mat-error"),m._uU(1," Please select at least one parameter "),m.qZA())}const sn=function(gt){return{"mat-form-field-invalid":gt}};function kn(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",70)(1,"div",71)(2,"label",72),m._uU(3),m.qZA(),m.TgZ(4,"i",73),m.NdJ("click",function(){const St=m.CHM(tr),vr=St.$implicit,fn=St.index,Ko=m.oxw(2);let Ro;return m.KtG(Ko.removeForm(null==(Ro=vr.get("device"))?null:Ro.value,fn))}),m.qZA()(),m.TgZ(5,"mat-form-field",74)(6,"mat-label"),m._uU(7),m.qZA(),m.TgZ(8,"mat-select",75)(9,"mat-option")(10,"ngx-mat-select-search",76),m.NdJ("toggleAll",function(){const vr=m.CHM(tr).$implicit,fn=m.oxw(2);let Ko;return m.KtG(fn.toggleSelectAll(null==(Ko=vr.get("device"))?null:Ko.value))}),m.qZA()(),m.YNc(11,Mn,3,3,"mat-option",14),m.ALo(12,"async"),m.ALo(13,"async"),m.ALo(14,"async"),m.ALo(15,"async"),m.qZA(),m.YNc(16,dn,2,0,"mat-error",3),m.qZA()()}if(2&gt){const tr=Fr.$implicit,wt=Fr.index,St=m.oxw(2);let vr,fn,Ko,Ro,Ln,yr,kr,or;m.Q6J("formGroupName",wt),m.xp6(3),m.Oqu(null==(vr=tr.get("deviceLabel"))?null:vr.value),m.xp6(2),m.Q6J("ngClass",m.VKq(20,sn,(null==(fn=tr.get("selectedParameters"))?null:fn.invalid)&&(null==(fn=tr.get("selectedParameters"))?null:fn.touched))),m.xp6(2),m.hij(" Select Parameters (",St.getSelectedCount(null==(Ko=tr.get("device"))?null:Ko.value),") "),m.xp6(1),m.Q6J("disableOptionCentering",!0),m.xp6(2),m.Q6J("formControl",St.searchControls[null==(Ro=tr.get("device"))?null:Ro.value])("noEntriesFoundLabel","No results found")("showToggleAllCheckbox",!0)("toggleAllCheckboxIndeterminate",St.isIndeterminate[null==(Ln=tr.get("device"))?null:Ln.value])("toggleAllCheckboxChecked",St.isChecked[null==(yr=tr.get("device"))?null:yr.value]),m.xp6(1),m.Q6J("ngForOf","Billing and Invoices"!==(null==(kr=St.reportsForm.get("reportsType"))?null:kr.value)?"Parameters"!==(null==(kr=St.reportsForm.get("reportsType"))?null:kr.value)?m.lcZ(12,12,St.filteredParameterListsScedhule[null==(kr=tr.get("device"))?null:kr.value]):m.lcZ(13,14,St.filteredParameterLists[null==(kr=tr.get("device"))?null:kr.value]):"Parameters"!==(null==(kr=St.reportsForm.get("billingType"))?null:kr.value)?m.lcZ(14,16,St.filteredParameterListsScedhule[null==(kr=tr.get("device"))?null:kr.value]):m.lcZ(15,18,St.filteredParameterLists[null==(kr=tr.get("device"))?null:kr.value])),m.xp6(5),m.Q6J("ngIf",(null==(or=tr.get("selectedParameters"))?null:or.invalid)&&(null==(or=tr.get("selectedParameters"))?null:or.touched))}}function xo(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"button",78),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw(2);return m.KtG(St.scrollRight())}),m._UZ(1,"i",79),m.qZA()}if(2&gt){const tr=m.oxw(2);m.Q6J("ngClass",m.VKq(1,lr,tr.isAtEnd))}}function Vo(gt,Fr){if(1&gt&&(m.TgZ(0,"form",59)(1,"div",60),m.YNc(2,Pr,2,3,"button",61),m.TgZ(3,"div",62)(4,"div",63,64)(6,"div",65),m.YNc(7,kn,17,22,"div",66),m.qZA()()(),m.YNc(8,xo,2,3,"button",67),m.qZA()()),2&gt){const tr=m.oxw();m.Q6J("formGroup",tr.myForm),m.xp6(2),m.Q6J("ngIf",tr.deviceSettingsControls.length>3),m.xp6(5),m.Q6J("ngForOf",tr.deviceSettingsControls),m.xp6(1),m.Q6J("ngIf",tr.deviceSettingsControls.length>3)}}function aa(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.hij(" ",tr," ")}}function Fa(gt,Fr){if(1&gt&&(m.TgZ(0,"div",82),m._UZ(1,"input",83)(2,"input",84),m.qZA()),2&gt){const tr=m.oxw(2);let wt,St;m.xp6(1),m.Q6J("ngClass",m.VKq(2,Ct,(null==(wt=tr.reportsForm.get("start_range"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("start_range"))?null:wt.touched))),m.xp6(1),m.Q6J("ngClass",m.VKq(4,Ct,(null==(St=tr.reportsForm.get("end_range"))?null:St.invalid)&&(null==(St=tr.reportsForm.get("end_range"))?null:St.touched)))}}function Qr(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.Oqu(tr)}}function ze(gt,Fr){if(1&gt&&(m.TgZ(0,"option",42),m._uU(1),m.qZA()),2&gt){const tr=Fr.$implicit;m.Q6J("value",tr),m.xp6(1),m.Oqu(tr)}}function Xe(gt,Fr){if(1&gt&&(m.TgZ(0,"div",82)(1,"select",85),m.YNc(2,Qr,2,2,"option",14),m.qZA(),m.TgZ(3,"select",86),m.YNc(4,ze,2,2,"option",14),m.qZA()()),2&gt){const tr=m.oxw(2);m.xp6(2),m.Q6J("ngForOf",tr.optionsList),m.xp6(2),m.Q6J("ngForOf",tr.optionsList)}}function at(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",56)(1,"label",45),m._uU(2,"Date Type"),m.qZA(),m.TgZ(3,"div",46)(4,"select",80),m.NdJ("change",function(St){m.CHM(tr);const vr=m.oxw();return m.KtG(vr.manipulateDates(St))}),m.TgZ(5,"option",13),m._uU(6,"Select Date Type"),m.qZA(),m.YNc(7,aa,2,2,"option",14),m.qZA()(),m.YNc(8,Fa,3,6,"div",81),m.YNc(9,Xe,5,2,"div",81),m.qZA()}if(2&gt){const tr=m.oxw();let wt;m.xp6(4),m.Q6J("ngClass",m.VKq(6,Ct,(null==(wt=tr.reportsForm.get("dateType"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("dateType"))?null:wt.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",tr.allDatePermissions),m.xp6(1),m.Q6J("ngIf",tr.shouldDisplayTimeInputs()),m.xp6(1),m.Q6J("ngIf",tr.shouldDisplayReports())}}function gr(gt,Fr){if(1&gt&&(m.TgZ(0,"div",56)(1,"div",87)(2,"label",88),m._uU(3,"Start Date"),m.qZA(),m.TgZ(4,"div",89),m._UZ(5,"input",90),m.qZA()(),m.TgZ(6,"div",87)(7,"label",88),m._uU(8,"End Date"),m.qZA(),m.TgZ(9,"div",89),m._UZ(10,"input",91),m.qZA()()()),2&gt){const tr=m.oxw();let wt,St;m.xp6(5),m.Q6J("ngClass",m.VKq(2,Ct,(null==(wt=tr.reportsForm.get("start_time"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("start_time"))?null:wt.touched))),m.xp6(5),m.Q6J("ngClass",m.VKq(4,Ct,(null==(St=tr.reportsForm.get("end_time"))?null:St.invalid)&&(null==(St=tr.reportsForm.get("end_time"))?null:St.touched)))}}function Pt(gt,Fr){if(1&gt&&(m.TgZ(0,"div",56)(1,"div",87)(2,"label",88),m._uU(3,"Start Date"),m.qZA(),m.TgZ(4,"div",89),m._UZ(5,"input",92),m.qZA()(),m.TgZ(6,"div",87)(7,"label",88),m._uU(8,"End Date"),m.qZA(),m.TgZ(9,"div",89),m._UZ(10,"input",93),m.qZA()()()),2&gt){const tr=m.oxw();let wt,St;m.xp6(5),m.Q6J("ngClass",m.VKq(2,Ct,(null==(wt=tr.reportsForm.get("start_time"))?null:wt.invalid)&&(null==(wt=tr.reportsForm.get("start_time"))?null:wt.touched))),m.xp6(5),m.Q6J("ngClass",m.VKq(4,Ct,(null==(St=tr.reportsForm.get("end_time"))?null:St.invalid)&&(null==(St=tr.reportsForm.get("end_time"))?null:St.touched)))}}function mt(gt,Fr){1&gt&&(m.TgZ(0,"div",56)(1,"label",45),m._uU(2,"Date"),m.qZA(),m.TgZ(3,"div",46),m._UZ(4,"input",94),m.qZA()())}function Zt(gt,Fr){1&gt&&(m.TgZ(0,"div",56)(1,"label",45),m._uU(2,"Date"),m.qZA(),m.TgZ(3,"div",46),m._UZ(4,"input",95),m.qZA()())}function ln(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"div",56)(1,"label",45),m._uU(2,"Date"),m.qZA(),m.TgZ(3,"div",46)(4,"input",96),m.NdJ("change",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.isType())}),m.qZA()()()}}function no(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"button",97),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.saveButtonConfig())}),m._uU(1,"Save"),m.qZA()}}function oo(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"button",98),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.triggerEdit())}),m._uU(1,"Edit"),m.qZA()}}function Ki(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"button",99),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.sendTrigger())}),m._uU(1," Test Now "),m.qZA()}}function li(gt,Fr){if(1&gt){const tr=m.EpF();m.TgZ(0,"button",100),m.NdJ("click",function(){m.CHM(tr);const St=m.oxw();return m.KtG(St.triggerDownload())}),m._uU(1," Download XLSX "),m.qZA()}}function ts(gt,Fr){if(1&gt&&(m.TgZ(0,"button",101,102),m._uU(2," Exports "),m.qZA()),2&gt){m.oxw();const tr=m.MAs(47);m.Q6J("matMenuTriggerFor",tr)}}function Nt(gt,Fr){if(1&gt&&(m.TgZ(0,"button",101,102),m._uU(2," Exports "),m.qZA()),2&gt){m.oxw();const tr=m.MAs(59);m.Q6J("matMenuTriggerFor",tr)}}let jt=(()=>{var gt;class Fr{formatMNList(wt){const St=this.All_Devices_Configuration.filter(Ko=>wt.includes(Ko.mn)).map(Ko=>Ko.mn_label);if(0===St.length)return"Select Location";const vr=St.slice(0,3),fn=St.length;return fn>0?`${vr.join(", ")},...(${fn})`:vr.join(", ")}scrollLeft(){this.scrollContainer&&this.scrollContainer.nativeElement.scrollBy({left:-300,behavior:"smooth"})}scrollRight(){this.scrollContainer&&this.scrollContainer.nativeElement.scrollBy({left:300,behavior:"smooth"})}updateScrollButtons(){if(!this.scrollContainer)return;const wt=this.scrollContainer.nativeElement;this.isAtStart=wt.scrollLeft<=0,this.isAtEnd=wt.scrollLeft+wt.clientWidth>=wt.scrollWidth,this.cdr.detectChanges()}ngOnInit(){this.optionsList=Array.from({length:24},(St,vr)=>vr),this.initializeForm(),this.reportsForm.get("modelID")?.valueChanges.subscribe(()=>{this.validExcelTypes=this.getValidList()}),this.allReportsPermissions=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("ReportsPermissions")))),this.allDatePermissions=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("DatePermissions"))));let wt=localStorage.getItem("TM_permissions");"string"==typeof wt&&(wt=JSON.parse(wt)),this.extactedStoredPermissions=null!=wt?wt.map(St=>St.value):[],this.getLoggedUser=this.getPowerBoard.getLoggedUserDetails(),this.SK_clientID=this.getLoggedUser.attributes["custom:clientID"],this.dropdownSettings=this.getListSettings.getSettings3(),this.dropdownSettings1=this.getListSettings.getSettings_new(),this.dropdownSettings3=this.getListSettings.getSettings5(),this.username=this.getLoggedUser.attributes["custom:username"],console.log("reports Form Comp",this.extractedDevices),this.subscription=this.data$.subscribe({next:St=>{this.All_Devices_Configuration=St,console.log("crcr",this.All_Devices_Configuration)},error:St=>{}})}initializeForm(){this.reportsForm=this.fb.group({reportsType:[null,X.kI.required],templateID:[null,X.kI.required],billingType:["Parameters"],modelID:[null,X.kI.required],excelReportType:["",X.kI.required],customType:["Hour"],dateType:[null,X.kI.required],start_time:["",X.kI.required],end_time:["",X.kI.required],start_range:["00:00",X.kI.required],end_range:["23:59",X.kI.required],custom_from_time_hour:[0,X.kI.required],custom_to_time_hour:[23,X.kI.required],selectedParams:[[]],chart_type:["line",X.kI.required],user_list:[[],X.kI.required],alerts_type:["Historical",X.kI.required],filter_value:["",X.kI.required],relationalOperators:["=="]})}constructor(wt,St,vr,fn,Ko,Ro,Ln,yr,kr,or,Tr,ht){(0,S.Z)(this,"fb",void 0),(0,S.Z)(this,"cdr",void 0),(0,S.Z)(this,"renderer",void 0),(0,S.Z)(this,"rdtConfig",void 0),(0,S.Z)(this,"getPowerBoard",void 0),(0,S.Z)(this,"getListSettings",void 0),(0,S.Z)(this,"rdt",void 0),(0,S.Z)(this,"api",void 0),(0,S.Z)(this,"router",void 0),(0,S.Z)(this,"rdtParams",void 0),(0,S.Z)(this,"reportsService",void 0),(0,S.Z)(this,"route",void 0),(0,S.Z)(this,"searchQuery",{}),(0,S.Z)(this,"filteredParameterLists",{}),(0,S.Z)(this,"filteredParameterListsScedhule",{}),(0,S.Z)(this,"searchControls",{}),(0,S.Z)(this,"isIndeterminate",{}),(0,S.Z)(this,"isChecked",{}),(0,S.Z)(this,"lookup_data_temp_dr",[]),(0,S.Z)(this,"lookup_data_temp_dre",[]),(0,S.Z)(this,"lookup_data_temp_form",[]),(0,S.Z)(this,"userInfo",[]),(0,S.Z)(this,"enableDownloadXLSX",!1),(0,S.Z)(this,"validExcelTypes",[]),(0,S.Z)(this,"selectedDevice",void 0),(0,S.Z)(this,"temp_RDT_params",void 0),(0,S.Z)(this,"parameterLists",{}),(0,S.Z)(this,"reportsDisplayID",void 0),(0,S.Z)(this,"testNowID",""),(0,S.Z)(this,"from_readBack",!1),(0,S.Z)(this,"_onDestroy",new G.x),(0,S.Z)(this,"scrollContainer",void 0),(0,S.Z)(this,"triggerBtn",void 0),(0,S.Z)(this,"customEvent",new m.vpe),(0,S.Z)(this,"triggerMethod",new m.vpe),(0,S.Z)(this,"triggerDownloadExcelReport",new m.vpe),(0,S.Z)(this,"triggerMethodAlerts",new m.vpe),(0,S.Z)(this,"errorEvent",new m.vpe),(0,S.Z)(this,"saveButtonCheck",new m.vpe),(0,S.Z)(this,"clear",new m.vpe),(0,S.Z)(this,"sendSavedQueryForm",new m.vpe),(0,S.Z)(this,"saveQuery",new m.vpe),(0,S.Z)(this,"loadConfirm",new m.vpe),(0,S.Z)(this,"readBackLocation",new m.vpe),(0,S.Z)(this,"getGridPositions",new m.vpe),(0,S.Z)(this,"loadSpinner",new m.vpe),(0,S.Z)(this,"refreshMNList",new m.vpe),(0,S.Z)(this,"hidingLink",void 0),(0,S.Z)(this,"optionsList",[]),(0,S.Z)(this,"gridPositions",void 0),(0,S.Z)(this,"reportsForm",void 0),(0,S.Z)(this,"SK_clientID",void 0),(0,S.Z)(this,"username",void 0),(0,S.Z)(this,"getLoggedUser",void 0),(0,S.Z)(this,"data$",void 0),(0,S.Z)(this,"All_Devices_Configuration",void 0),(0,S.Z)(this,"Devices_chart",void 0),(0,S.Z)(this,"dropdownSettings",void 0),(0,S.Z)(this,"dropdownSettings3",void 0),(0,S.Z)(this,"dropdownSettings1",void 0),(0,S.Z)(this,"myForm",void 0),(0,S.Z)(this,"All_Devices",void 0),(0,S.Z)(this,"All_RDTs",void 0),(0,S.Z)(this,"All_RDTs_Configuration",void 0),(0,S.Z)(this,"All_Devices_valid",void 0),(0,S.Z)(this,"devices",["Laptop","Phone","Tablet","Desktop"]),(0,S.Z)(this,"parameterList",void 0),(0,S.Z)(this,"UserList",[]),(0,S.Z)(this,"compareList",!0),(0,S.Z)(this,"hasPR1",!1),(0,S.Z)(this,"hasPR2",!1),(0,S.Z)(this,"hasPR3",void 0),(0,S.Z)(this,"hasPR4",void 0),(0,S.Z)(this,"hasPR5",void 0),(0,S.Z)(this,"item",void 0),(0,S.Z)(this,"editQueryChk",!1),(0,S.Z)(this,"allReportsPermissions",void 0),(0,S.Z)(this,"allDatePermissions",void 0),(0,S.Z)(this,"selectedDateType",void 0),(0,S.Z)(this,"startTimeSubscription",void 0),(0,S.Z)(this,"endTimeSubscription",void 0),(0,S.Z)(this,"tempQueryData",void 0),(0,S.Z)(this,"mnList",void 0),(0,S.Z)(this,"extractedDevices",void 0),(0,S.Z)(this,"pdfSettingChange",new m.vpe),(0,S.Z)(this,"extactedStoredPermissions",[]),(0,S.Z)(this,"subscription",new D.w0),(0,S.Z)(this,"enableSaveButton",!1),(0,S.Z)(this,"parameterListsScedhule",{}),(0,S.Z)(this,"isAtStart",!0),(0,S.Z)(this,"isAtEnd",!1),(0,S.Z)(this,"mnListTouched",!1),this.fb=wt,this.cdr=St,this.renderer=vr,this.rdtConfig=fn,this.getPowerBoard=Ko,this.getListSettings=Ro,this.rdt=Ln,this.api=yr,this.router=kr,this.rdtParams=or,this.reportsService=Tr,this.route=ht,this.myForm=this.fb.group({selectedParameter:[[]],deviceSettings:this.fb.array([],X.kI.required)})}ngOnChanges(wt){wt.All_Devices_Configuration&&this.All_Devices_Configuration.length>0&&(console.log("change Confirmation",this.All_Devices_Configuration),this.loadConfirm.emit("confirm"))}ngAfterViewInit(){this.scrollContainer&&this.renderer.listen(this.scrollContainer.nativeElement,"scroll",()=>{requestAnimationFrame(()=>this.updateScrollButtons())})}sendData(){var wt=this;return(0,O.Z)(function*(){wt.All_Devices=[...new Set(wt.mnList)];let St=[];for(let fn=0;fn<wt.All_Devices.length;fn++)for(let Ko=0;Ko<wt.All_Devices_Configuration.length;Ko++)if(wt.All_Devices[fn]===wt.All_Devices_Configuration[Ko].mn){St.push(wt.All_Devices_Configuration[Ko].reading_device_type);break}wt.All_RDTs=[...new Set(St)],console.log("All_RDTs",wt.All_RDTs);const vr={};for(let fn=0;fn<wt.All_Devices.length;fn++){const Ko=wt.All_Devices[fn];let Ro=!1;for(let Ln=0;Ln<wt.All_Devices_Configuration.length;Ln++)if(Ko===wt.All_Devices_Configuration[Ln].mn){const yr=wt.All_Devices_Configuration[Ln].reading_device_type;vr[yr]?vr[yr].count++:vr[yr]={count:1},Ro=!0;break}}console.log("Device RDT Count:",vr),yield wt.batchRDtRequest(wt.All_RDTs,vr)})()}sendAlertData(){let wt={};wt={reportsType:this.reportsForm.value.reportsType,templateID:this.reportsForm.value.templateID,billingType:this.reportsForm.value.billingType,modelID:this.reportsForm.value.modelID,excelReportType:this.reportsForm.value.excelReportType,customType:this.reportsForm.value.customType,device:this.mnList,paramFilter:[],dateType:this.reportsForm.value.dateType,start_time:this.reportsForm.value.start_time,end_time:this.reportsForm.value.end_time,start_range:this.reportsForm.value.start_range,end_range:this.reportsForm.value.end_range,custom_from_time_hour:this.reportsForm.value.custom_from_time_hour,custom_to_time_hour:this.reportsForm.value.custom_to_time_hour,rdtIDs:this.All_RDTs,user_info:JSON.stringify(this.reportsForm.value.user_list),alerts_type:this.reportsForm.value.alerts_type,filter_value:this.reportsForm.value.filter_value,relationalOperators:this.reportsForm.value.relationalOperators,chart_type:this.reportsForm.value.chart_type,rdt:JSON.stringify([])},this.customEvent.emit({arg1:wt,arg2:this.gridPositions,arg3:this.tempQueryData})}sendExcelData(){let wt={};this.enableDownloadXLSX=!0,wt={reportsType:this.reportsForm.value.reportsType,templateID:this.reportsForm.value.templateID,billingType:this.reportsForm.value.billingType,modelID:this.reportsForm.value.modelID,excelReportType:this.reportsForm.value.excelReportType,customType:this.reportsForm.value.customType,device:this.mnList,paramFilter:[],dateType:this.reportsForm.value.dateType,start_time:this.reportsForm.value.start_time,end_time:this.reportsForm.value.end_time,start_range:this.reportsForm.value.start_range,end_range:this.reportsForm.value.end_range,custom_from_time_hour:this.reportsForm.value.custom_from_time_hour,custom_to_time_hour:this.reportsForm.value.custom_to_time_hour,rdtIDs:this.All_RDTs,user_info:JSON.stringify(this.reportsForm.value.user_list),alerts_type:this.reportsForm.value.alerts_type,filter_value:this.reportsForm.value.filter_value,relationalOperators:this.reportsForm.value.relationalOperators,chart_type:this.reportsForm.value.chart_type,rdt:JSON.stringify([])},this.customEvent.emit({arg1:wt,arg2:this.gridPositions,arg3:this.tempQueryData})}sendAuditData(){let wt={};wt={reportsType:this.reportsForm.value.reportsType,templateID:this.reportsForm.value.templateID,billingType:this.reportsForm.value.billingType,modelID:this.reportsForm.value.modelID,excelReportType:this.reportsForm.value.excelReportType,customType:this.reportsForm.value.customType,device:this.mnList,paramFilter:[],dateType:this.reportsForm.value.dateType,start_time:this.reportsForm.value.start_time,end_time:this.reportsForm.value.end_time,rdtIDs:this.All_RDTs,user_info:JSON.stringify(this.reportsForm.value.user_list),alerts_type:this.reportsForm.value.alerts_type,filter_value:this.reportsForm.value.filter_value,relationalOperators:this.reportsForm.value.relationalOperators,chart_type:this.reportsForm.value.chart_type,rdt:JSON.stringify([])},this.customEvent.emit({arg1:wt,arg2:this.gridPositions,arg3:this.tempQueryData})}updateFormInputs(wt,St){var vr=this;return(0,O.Z)(function*(){const fn=vr.myForm.get("deviceSettings"),Ko=Array.from(new Set(wt)),Ro=fn.controls.map(Ln=>Ln.get("device")?.value);for(let Ln=fn.length-1;Ln>=0;Ln--){const yr=fn.at(Ln).get("device")?.value;Ko.includes(yr)||fn.removeAt(Ln)}for(const Ln of Ko){if(Ro.includes(Ln))continue;let yr="";vr.compareList&&St&&(yield vr.selectDeviceParams(Ln));for(let or=0;or<vr.All_Devices_Configuration.length;or++)if(vr.All_Devices_Configuration[or].mn===Ln){yr=`${vr.All_Devices_Configuration[or].mn_label} :`;break}const kr=vr.fb.group({device:[Ln,[]],deviceLabel:[yr],selectedParameters:[[],X.kI.required]});fn.push(kr),vr.searchControls[Ln]=new X.NI(""),vr.filteredParameterLists[Ln]=new U.t(1),vr.filteredParameterLists[Ln].next(vr.parameterLists[Ln]),vr.filteredParameterListsScedhule[Ln]=new U.t(1),vr.filteredParameterListsScedhule[Ln].next(vr.parameterListsScedhule[Ln]),vr.isIndeterminate[Ln]=!1,vr.isChecked[Ln]=!1,vr.searchControls[Ln].valueChanges.pipe((0,R.R)(vr._onDestroy)).subscribe(()=>{"Parameters"===vr.reportsForm.get("reportsType")?.value||"Billing and Invoices"===vr.reportsForm.get("reportsType")?.value&&"Parameters"===vr.reportsForm.get("billingType")?.value?vr.filterParameters(Ln):vr.filterParametersSchedule(Ln)}),kr.get("selectedParameters")?.valueChanges.pipe((0,R.R)(vr._onDestroy)).subscribe(()=>{vr.setToggleAllCheckboxState(Ln)})}vr.scrollContainer&&vr.scrollContainer.nativeElement&&vr.renderer.listen(vr.scrollContainer.nativeElement,"scroll",()=>{requestAnimationFrame(()=>vr.updateScrollButtons())}),vr.updateScrollButtons(),vr.cdr.detectChanges(),console.log("Device settings array length after population:",fn.length),vr.compareList=!0})()}get allfields(){return this.myForm.get("deviceSettings")}isType(){this.reportsForm.get("end_time")?.setValue(this.reportsForm.get("start_time")?.value)}get deviceSettingsControls(){return this.myForm.get("deviceSettings").controls}selectDeviceParams(wt){var St=this;return(0,O.Z)(function*(){if(console.log("\u{1f527} Selected Device:",wt),console.log("\u{1f4e6} Device Config List:",St.All_Devices_Configuration),!wt)return;const vr=St.All_Devices_Configuration.find(Ko=>Ko.mn===wt);if(!vr)return void console.warn("\u274c No config found for device:",wt);const fn=vr.reading_device_type;fn?(console.log("\u{1f4e5} Fetching parameters for RDT:",fn),yield St.fetchRDTParameters(fn,wt)):yield H().fire({position:"center",title:"\u26a0\ufe0f For selected device, RDT is not configured",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,cancelButtonText:"Cancel"})})()}fetchRDTParameters(wt,St){var vr=this;return(0,O.Z)(function*(){console.log("Fetching RDT parameters for:",wt);try{const fn=yield vr.rdtParams.getBatchRdt(wt,vr.SK_clientID);if(fn&&fn.parameters){console.log("Fetched RDT parameters:",fn),vr.temp_RDT_params=fn;const Ko=JSON.parse(vr.temp_RDT_params.parameters);let Ro=[],Ln=[];Ko&&Ko.length>0?(Ko.forEach((yr,kr)=>{Ro.push({text:yr.parameterLabel,value:yr.parameterLabel}),yr.schedule_parameter_label&&Ln.push({text:yr.schedule_parameter_label,value:yr.schedule_parameter_label,index:kr})}),vr.parameterListsScedhule[St]=Ln,vr.parameterLists[St]=Ro,vr.cdr.detectChanges(),console.log("Parameter List Schedule:",vr.parameterListsScedhule[St]),console.log("Parameter List:",vr.parameterLists[St])):yield H().fire({position:"center",title:"For Selected Device, No parameters added",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,cancelButtonText:"Cancel"})}else console.error("RDT parameters not found.")}catch(fn){console.error("Failed to fetch RDT parameters:",fn)}})()}checkParams(){let wt=this.myForm.get("deviceSettings")?.value;console.log("formArray",wt)}exportChartAndInsertIntoExcel(){this.triggerMethod.emit("excel")}exportToPDF(){this.triggerMethod.emit("pdf")}exportChartAndInsertIntoExcelAlerts(){this.triggerMethodAlerts.emit("excel")}exportToPDFAlerts(){this.triggerMethodAlerts.emit("pdf")}exportToCSV(){this.triggerMethod.emit("csv")}resetForm(){this.editQueryChk=!1,this.updateFormInputs([],!1),this.enableDownloadXLSX=!1,this.reportsForm.reset(),this.clear.emit("clear"),this.enableSaveButton=!1,this.router.navigate(["/TimeMachine/reports/"])}OnchangeDropdown(wt,St,vr){var fn=this;return(0,O.Z)(function*(){console.log("Starting form input update..."),fn.isMnListValid(),yield fn.updateFormInputs(wt,St),console.log("Form input update completed, now executing callback..."),"function"==typeof vr&&(yield vr())})()}removeForm(wt,St){const vr=this.myForm.get("deviceSettings"),Ko=vr.controls[St].get("device")?.value;vr.removeAt(St);const Ro=this.mnList;for(let yr=0;yr<Ro.length;yr++)Ro[yr]===Ko?(Ro.splice(yr,1),console.log("Device removed from reportsForm:",Ko)):console.log("Device not found in reportsForm:",Ko);this.compareList=!1,delete this.searchControls[wt],delete this.filteredParameterLists[wt],delete this.filteredParameterListsScedhule[wt],delete this.isIndeterminate[wt],delete this.isChecked[wt],console.log("temp vcjhh",void 0),this.mnList=Ro,this.refreshMNList.emit(this.mnList)}ReportPermissions(wt){}manipulateDates(wt){const St=wt.target;if(St){this.selectedDateType=St.value,console.log("Chheeekuu",this.selectedDateType);const vr=new Date;if("today"===this.selectedDateType){const fn=new Date(vr.getFullYear(),vr.getMonth(),vr.getDate(),0,0,0,0),Ko=this.formatDate(fn);this.reportsForm.get("start_time")?.setValue(Ko);const Ro=new Date(vr.getFullYear(),vr.getMonth(),vr.getDate(),23,59,59,999),Ln=this.formatDate(Ro);this.reportsForm.get("end_time")?.setValue(Ln)}else if(">="===this.selectedDateType){const fn=new Date(this.reportsForm.get("start_time")?.value),Ko=new Date(fn);Ko.setFullYear(fn.getFullYear()+1);const Ro=this.formatDate(Ko);this.reportsForm.get("end_time")?.setValue(Ro)}else if("<="===this.selectedDateType){const fn=new Date(this.reportsForm.get("end_time")?.value),Ko=new Date(fn);Ko.setFullYear(fn.getFullYear()-1);const Ro=this.formatDate(Ko);this.reportsForm.get("start_time")?.setValue(Ro)}else if("is"!==this.selectedDateType)if("yesterday"===this.selectedDateType){const fn=new Date(vr);fn.setDate(vr.getDate()-1);const Ko=new Date(fn.getFullYear(),fn.getMonth(),fn.getDate(),0,0,0,0),Ro=this.formatDate(Ko);this.reportsForm.get("start_time")?.setValue(Ro);const Ln=new Date(fn.getFullYear(),fn.getMonth(),fn.getDate(),23,59,59,999),yr=this.formatDate(Ln);this.reportsForm.get("end_time")?.setValue(yr)}else if("last week"===this.selectedDateType){console.log("last week is called");const fn=new Date,Ko=fn.getDay(),Ro=new Date(fn),Ln=new Date(fn),yr=Ko-1+(0===Ko?-6:1);Ro.setDate(fn.getDate()-yr-7),Ln.setDate(Ro.getDate()+6);const kr=new Date(Ro.getFullYear(),Ro.getMonth(),Ro.getDate(),0,0,0,0),or=this.formatDate(kr);this.reportsForm.get("start_time")?.setValue(or);const Tr=new Date(Ln.getFullYear(),Ln.getMonth(),Ln.getDate(),23,59,59,999),ht=this.formatDate(Tr);this.reportsForm.get("end_time")?.setValue(ht)}else if("this week"===this.selectedDateType){console.log("this week is called");const fn=new Date,Ko=fn.getDay(),Ro=new Date(fn),Ln=0===Ko?-6:1-Ko;Ro.setDate(fn.getDate()+Ln);const yr=new Date(Ro);yr.setDate(Ro.getDate()+6);const kr=new Date(Ro.getFullYear(),Ro.getMonth(),Ro.getDate(),0,0,0,0),or=this.formatDate(kr);this.reportsForm.get("start_time")?.setValue(or);const Tr=new Date(yr.getFullYear(),yr.getMonth(),yr.getDate(),23,59,59,999),ht=this.formatDate(Tr);this.reportsForm.get("end_time")?.setValue(ht)}else if("this year"===this.selectedDateType){console.log("this year is called");const fn=new Date,Ko=new Date(fn.getFullYear(),0,1,0,0,0,0),Ro=new Date(fn.getFullYear(),11,31,23,59,59,999),Ln=this.formatDate(Ko),yr=this.formatDate(Ro);this.reportsForm.get("start_time")?.setValue(Ln),this.reportsForm.get("end_time")?.setValue(yr)}else if("this month"===this.selectedDateType){const fn=new Date,Ko=new Date(fn.getFullYear(),fn.getMonth(),1),Ro=new Date(fn.getFullYear(),fn.getMonth()+1,0);let Ln=this.formatDate(Ko);this.reportsForm.get("start_time")?.setValue(Ln);let yr=this.formatDate(Ro);this.reportsForm.get("end_time")?.setValue(yr)}else if("last month"===this.selectedDateType){const fn=new Date,Ko=new Date(fn.getFullYear(),fn.getMonth()-1,1),Ro=new Date(Ko.getFullYear(),Ko.getMonth(),1),Ln=new Date(Ko.getFullYear(),Ko.getMonth()+1,0);let yr=this.formatDate(Ro);this.reportsForm.get("start_time")?.setValue(yr);let kr=this.formatDate(Ln);this.reportsForm.get("end_time")?.setValue(kr)}}}formatDate(wt){return`${wt.getFullYear()}-${(wt.getMonth()+1).toString().padStart(2,"0")}-${wt.getDate().toString().padStart(2,"0")}T${wt.getHours().toString().padStart(2,"0")}:${wt.getMinutes().toString().padStart(2,"0")}`}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete(),this.subscription.unsubscribe(),this.startTimeSubscription&&this.startTimeSubscription.unsubscribe(),this.endTimeSubscription&&this.endTimeSubscription.unsubscribe()}markDeviceSettingsAsTouched(){this.myForm.get("deviceSettings").controls.forEach(St=>{St.markAsTouched()})}submitClicked(){const wt=this.reportsForm.get("reportsType")?.value,St=this.reportsForm.get("alerts_type")?.value;switch(wt){case"Parameters":case"Hourly consumption":case"Daily consumption":case"Monthly consumption":case"Custom Schedule Daily":case"Custom":this.handleParameterConsumptionSubmission();break;case"Billing and Invoices":this.handleParameterConsumptionSubmissionForBilling();break;case"Dynamic Excel Report":this.handleDynamicExcelreport();break;case"Alerts":"Historical"===St?this.handleHistoricalAlertsSubmission():"Live"===St?this.handleLiveAlertsSubmission():this.showComingSoonAlert();break;case"Audit trails":this.handleAuditTrailsSubmission();break;default:this.reportsForm.markAllAsTouched(),this.isMnListValid(),this.showComingSoonAlert()}}handleParameterConsumptionSubmission(){this.isMnListValid(),this.reportsForm.markAllAsTouched(),this.areRequiredControlsParamInvalid()||!this.isMnListValid()?this.showValidationAlert("Please fill in all required fields before submitting."):(this.sendData(),this.enableSaveButton=!0,this.loadSpinner.emit("load"))}markAllFormControlsTouched(wt){Object.values(wt.controls).forEach(St=>{St.markAsTouched(),St.updateValueAndValidity()})}handleParameterConsumptionSubmissionForBilling(){this.reportsForm.markAllAsTouched(),this.areRequiredControlsBillingParamInvalid()||!this.isMnListValid()?this.showValidationAlert("Please fill in all required fields before submitting."):(this.sendData(),this.enableSaveButton=!0,this.loadSpinner.emit("load"))}handleDynamicExcelreport(){this.reportsForm.markAllAsTouched(),this.areRequiredControlsDynamicExcelReport()?this.showValidationAlert("Please fill in all required fields before submitting."):(this.sendExcelData(),this.enableSaveButton=!0,this.loadSpinner.emit("load"))}handleHistoricalAlertsSubmission(){this.reportsForm.markAllAsTouched(),this.areRequiredControlsInvalid()||!this.isMnListValid()?this.showValidationAlert("Please fill in all required fields before submitting."):(this.sendAlertData(),this.enableSaveButton=!0,this.loadSpinner.emit("load"))}handleLiveAlertsSubmission(){this.reportsForm.markAllAsTouched(),this.areRequiredControlsInvalidForLive()||!this.isMnListValid()?this.showValidationAlert("Please fill in all required fields before submitting."):(this.sendAlertData(),this.enableSaveButton=!0,this.loadSpinner.emit("load"))}handleAuditTrailsSubmission(){this.reportsForm.markAllAsTouched(),this.areRequiredControlsForAuditInvalid()?this.showValidationAlert("Please fill in all required fields before submitting."):(this.sendAuditData(),this.enableSaveButton=!0,this.loadSpinner.emit("load"))}showValidationAlert(wt){H().fire({icon:"info",title:wt,showConfirmButton:!1,timer:2e3})}showComingSoonAlert(){H().fire({icon:"warning",title:"Please fill in all required fields before submitting. ",showConfirmButton:!1,timer:2e3})}isMnListValid(){const wt=null!=this.mnList&&this.mnList.length>0;return this.mnListTouched=!wt,this.cdr.detectChanges(),wt}areRequiredControlsInvalid(){return["reportsType","dateType","start_time","end_time","alerts_type"].some(St=>{const vr=this.reportsForm.get(St);return!(!vr||!vr.invalid||(vr.markAsTouched(),0))})}areRequiredControlsInvalidForLive(){return["reportsType","alerts_type"].some(St=>{const vr=this.reportsForm.get(St);return!(!vr||!vr.invalid||(vr.markAsTouched(),vr.updateValueAndValidity(),0))})}areRequiredControlsParamInvalid(){let St=["reportsType","dateType","start_time","end_time","chart_type"].some(Ko=>{const Ro=this.reportsForm.get(Ko);return!(!Ro||!Ro.invalid||(Ro.markAsTouched(),Ro.updateValueAndValidity(),0))});const vr=this.myForm.get("deviceSettings");let fn=!1;return vr.controls.forEach(Ko=>{const Ro=Ko.get("selectedParameters");Ro&&Ro.invalid&&(Ro.markAsTouched(),fn=!0)}),St||fn}areRequiredControlsBillingParamInvalid(){return["reportsType","dateType","start_time","end_time","chart_type","templateID","billingType"].some(St=>{const vr=this.reportsForm.get(St);return!(!vr||!vr.invalid||(vr.markAsTouched(),vr.updateValueAndValidity(),0))})}areRequiredControlsDynamicExcelReport(){return["reportsType","dateType","start_time","end_time","modelID","excelReportType"].some(St=>{const vr=this.reportsForm.get(St);return!(!vr||!vr.invalid||(vr.markAsTouched(),vr.updateValueAndValidity(),0))})}areRequiredControlsForAuditInvalid(){return["reportsType","dateType","start_time","end_time","user_list"].some(St=>{const vr=this.reportsForm.get(St);return!(!vr||!vr.invalid||(vr.markAsTouched(),vr.updateValueAndValidity(),0))})}getSavedQuery(wt){var St=this;return(0,O.Z)(function*(){St.reportsDisplayID="",St.gridPositions=[],console.log("rowData",wt),St.reportsDisplayID=wt.id,St.testNowID=wt.id,St.api.GetReportsSavedQuery(wt.id,St.SK_clientID).then(function(){var vr=(0,O.Z)(function*(fn){if(fn&&fn.others){St.reportsDisplayID=fn.name,St.gridPositions=JSON.parse(fn.gridster_config),St.editQueryChk=!0,St.tempQueryData=fn,console.log("GetReportsSavedQuery",fn);let Ro=JSON.parse(fn.others);switch("string"==typeof Ro&&(Ro=JSON.parse(Ro)),console.log("formData[0].reportType :> ",Ro[0].reportsType),Ro[0].reportsType){case"Parameters":console.log("CP1 reached"),yield St.readBackCase1(Ro[0]);break;case"Hourly consumption":case"Daily consumption":case"Monthly consumption":case"Custom Schedule Daily":case"Custom":yield St.readBackCase1(Ro[0]);break;case"Alerts":yield St.readBackCase2(Ro[0]);break;case"Audit trails":yield St.readBackCase3(Ro[0]);break;case"Dynamic Excel Report":yield St.readBackCase4(Ro[0])}return yield St.mnList}St.router.navigate(["/TimeMachine/reports/"]),H().fire({icon:"error",title:"Saved Query Not Found",text:"The requested saved query does not exist or could not be retrieved.",confirmButtonText:"OK"})});return function(fn){return vr.apply(this,arguments)}}()).catch(vr=>{console.log("No GetReportsSavedQuery configuration",vr)})})()}triggerEdit(){this.tempQueryData?this.sendSavedQueryForm.emit(this.tempQueryData):alert("select ID")}batchRDtRequest(wt,St){var vr=this;return(0,O.Z)(function*(){try{let fn=[];fn=wt;const Ko=new Set,Ro=fn.map(yr=>Ko.has(yr)?(console.warn(`Duplicate PK found: ${yr}`),null):(Ko.add(yr),{PK:yr,SK:vr.SK_clientID})).filter(yr=>null!==yr);console.log("BatchReq",wt),console.log("r1",Ro);const Ln={type:"batchGet",table_name:"reading_device_type",keys:Ro};vr.All_RDTs_Configuration=[],vr.rdtConfig.postData(Ln).subscribe({next:yr=>{console.log("c1",yr);let kr=yr;for(let Un=0;Un<kr.length;Un++)vr.All_RDTs_Configuration.push({allDetails:kr[Un],parameters:kr[Un].parameters});console.log("r2",vr.All_RDTs_Configuration);let or={};vr.All_Devices_valid=[];for(let Un=0;Un<vr.All_Devices_Configuration.length;Un++)for(let Yn=0;Yn<vr.All_RDTs_Configuration.length;Yn++)vr.All_Devices_Configuration[Un].reading_device_type==vr.All_RDTs_Configuration[Yn].allDetails.reading_device_type_id&&vr.All_Devices_valid.push({MN:vr.All_Devices_Configuration[Un].mn,RDT:vr.All_RDTs_Configuration[Yn]});let Tr=[];for(let Un=0;Un<vr.deviceSettingsControls.length;Un++){console.log("this.allfields.value[index].selectedParameters:",vr.allfields.value[Un].selectedParameters);const Yn=vr.allfields.value[Un].selectedParameters;let dr;dr=Yn.length>0&&"object"==typeof Yn[0]&&"value"in Yn[0]?Yn.map(pn=>pn.value):Yn,Tr.push(dr)}let ht=[],Lt=[];vr.deviceSettingsControls.forEach((Un,Yn)=>{const dr=Un.get("device")?.value;let pn=[],Xt=[];if(dr){const Ft=vr.allfields.value[Yn]?.selectedParameters;console.log("in batch request this.parameterLists",vr.parameterLists),Ft.forEach(Ft.length>0&&"object"==typeof Ft[0]&&"value"in Ft[0]?Zn=>{pn.push("P"+(vr.parameterLists[dr].findIndex(Jt=>Jt.value===Zn.value)+1));const Do=vr.parameterListsScedhule[dr].find(Jt=>Jt.value===Zn.value);Do&&Xt.push("P"+(Do.index+1))}:Zn=>{console.log("this.parameterListsScedhule :>> ",vr.parameterListsScedhule),pn.push("P"+(vr.parameterLists[dr].findIndex(Jt=>Jt.value===Zn)+1));const Do=vr.parameterListsScedhule[dr].find(Jt=>Jt.value===Zn);Do&&Xt.push("P"+(Do.index+1))}),pn&&ht.push(pn),Xt&&Lt.push(Xt)}}),console.log("value_test",ht),console.log("this.All_RDTs_Configuration)",vr.All_RDTs_Configuration);const Dr=[];for(const[Un,{count:Yn}]of Object.entries(St)){const dr=vr.All_RDTs_Configuration.find(pn=>pn.allDetails.reading_device_type_id===Un);if(dr)for(let pn=0;pn<Yn;pn++){const Xt={...dr};Dr.push(Xt)}}console.log("Duplicate RDT Configurations:",Dr),vr.mnList=[...new Set(vr.mnList)],or={templateID:vr.reportsForm.value.templateID,billingType:vr.reportsForm.value.billingType,modelID:vr.reportsForm.value.modelID,excelReportType:vr.reportsForm.value.excelReportType,reportsType:vr.reportsForm.value.reportsType,customType:vr.reportsForm.value.customType,device:vr.mnList,paramFilter:Tr,paramFilterDB:"Parameters"!==vr.reportsForm.value.reportsType?Lt:ht,dateType:vr.reportsForm.value.dateType,start_time:vr.reportsForm.value.start_time,end_time:vr.reportsForm.value.end_time,start_range:vr.reportsForm.value.start_range,end_range:vr.reportsForm.value.end_range,custom_from_time_hour:vr.reportsForm.value.custom_from_time_hour,custom_to_time_hour:vr.reportsForm.value.custom_to_time_hour,rdtIDs:vr.All_RDTs,user_info:JSON.stringify(vr.reportsForm.value.user_list),alerts_type:vr.reportsForm.value.alerts_type,filter_value:vr.reportsForm.value.filter_value,relationalOperators:vr.reportsForm.value.relationalOperators,chart_type:vr.reportsForm.value.chart_type,rdt:JSON.stringify(Dr)},vr.customEvent.emit({arg1:or,arg2:vr.gridPositions,arg3:vr.tempQueryData})},error:yr=>{console.error("Error rdt Batch:",yr),vr.errorEvent.emit("BatchError"),H().fire({icon:"error",title:"Oops...",text:"Something went wrong with the batch request!",footer:'<a href="mailto:joy.benjamin@wimate.in">Contact support</a> if the problem persists.'})}})}catch(fn){console.error("Error in batchRDtRequest:",fn),H().fire({icon:"error",title:"Oops...",text:"An unexpected error occurred!",footer:'<a href="mailto:joy.benjamin@wimate.in">Contact support</a> if the problem persists.'})}})()}readBackLocationTree(){console.log("mnList laba ",this.mnList);let wt=$("#MultiJSTree").jstree(!0),St=[];if(this.mnList.length>0){for(let fn=0;fn<this.mnList.length;fn++)for(let Ko=0;Ko<this.All_Devices_Configuration.length;Ko++)this.All_Devices_Configuration[Ko].mn===this.mnList[fn]&&St.push(this.All_Devices_Configuration[Ko].mn_label);console.log("get Labels",St);let vr=wt.get_json(null,{flat:!0});console.log("treeNodes:",vr),St.forEach(fn=>{console.log("node text",fn);let Ko=vr.find(Ro=>("object"==typeof Ro.text&&(Ro.text=Ro.text[0]),Ro.text===fn));if(console.log("foundNode",Ko),Ko){let Ro=Ko.id;console.log("nodeId",Ro),Ro&&wt.get_node(Ro)?wt.select_node(Ro):console.warn(`Node with text "${fn}" not found in the jstree.`)}else console.warn(`Node with text "${fn}" not found in the jstree.`)})}else console.warn("mnList is empty.")}readBack(wt,St){var vr=this;this.menuReinitialization(),this.reportsDisplayID="",this.reportsDisplayID=St.name,this.tempQueryData=St,this.editQueryChk=!0,console.log("parsedData",wt);let fn=wt;"string"==typeof fn&&(fn=JSON.parse(fn)),this.mnList=fn.device,console.log("get This MN List",this.mnList),this.readBackLocation.emit(this.mnList),console.log("GetReportsSavedQuery form data",fn),this.OnchangeDropdown(this.mnList,!0,(0,O.Z)(function*(){const Ko=vr.myForm.get("deviceSettings");console.log("setParms length:new",Ko.length),console.log("formData.paramFilter length:",fn.paramFilter.length);for(let Ro=0;Ro<fn.paramFilter.length;Ro++){const Ln=Ko.controls[Ro];console.log(`Patching value for device ${Ro}`),Ln.get("selectedParameters")?.patchValue(fn.paramFilter[Ro])}console.log("Callback execution completed successfully."),vr.reportsForm.patchValue({reportsType:fn.reportsType,customType:fn.customType,dateType:fn.dateType,start_time:fn.start_time,end_time:fn.end_time,start_range:fn.start_range,end_range:fn.end_range,custom_from_time_hour:fn.custom_from_time_hour,custom_to_time_hour:fn.custom_to_time_hour,chart_type:fn.chart_type,alerts_type:fn.alerts_type,filter_value:fn.filter_value,relationalOperators:fn.relationalOperators,user_list:fn.user_info}),vr.selectedDateType=fn.dateType,vr.cdr.detectChanges()}))}saveButtonConfig(){this.saveButtonCheck.emit("enableSaveTo")}readBackCase1(wt){var St=this;return(0,O.Z)(function*(){St.from_readBack=!0,St.mnList=wt.device,console.log("get This MN List",St.mnList),St.readBackLocation.emit(St.mnList),console.log("GetReportsSavedQuery form data",wt),St.OnchangeDropdown(St.mnList,!0,(0,O.Z)(function*(){const vr=St.myForm.get("deviceSettings");console.log("setParms length:",vr.length),console.log("formData.paramFilter length:",wt.paramFilter.length);for(let fn=0;fn<wt.paramFilter.length;fn++){const Ko=vr.controls[fn];console.log(`Patching value for device ${fn}`),Ko.get("selectedParameters")?.patchValue(wt.paramFilter[fn])}St.reportsForm.patchValue({reportsType:wt.reportsType,filter_value:wt.filter_value,relationalOperators:wt.relationalOperators,customType:wt.customType,start_range:wt.start_range||"00:00",end_range:wt.end_range||"23:59",custom_from_time_hour:wt.custom_from_time_hour||0,custom_to_time_hour:wt.custom_to_time_hour||23,dateType:wt.dateType,start_time:wt.start_time,end_time:wt.end_time,chart_type:wt.chart_type}),St.selectedDateType=wt.dateType,St.cdr.detectChanges(),St.submitClicked(),console.log("Callback execution completed successfully.")}))})()}readBackCase2(wt){var St=this;return(0,O.Z)(function*(){St.mnList=wt.device,St.readBackLocation.emit(St.mnList),St.reportsForm.patchValue({reportsType:wt.reportsType,alerts_type:wt.alerts_type,filter_value:wt.filter_value,relationalOperators:wt.relationalOperators,start_range:wt.start_range||"00:00",end_range:wt.end_range||"23:59",custom_from_time_hour:wt.custom_from_time_hour||0,custom_to_time_hour:wt.custom_to_time_hour||23,dateType:wt.dateType,start_time:wt.start_time,end_time:wt.end_time}),St.selectedDateType=wt.dateType,St.cdr.detectChanges(),St.submitClicked()})()}readBackCase3(wt){var St=this;return(0,O.Z)(function*(){console.log("CP3"),console.log("formData.user_info[0]   check chei:",wt.user_info),St.mnList=[],St.reportsForm.patchValue({reportsType:wt.reportsType,start_range:wt.start_range||"00:00",end_range:wt.end_range||"23:59",custom_from_time_hour:wt.custom_from_time_hour||0,custom_to_time_hour:wt.custom_to_time_hour||23,filter_value:wt.filter_value,relationalOperators:wt.relationalOperators,user_list:wt.user_info,dateType:wt.dateType,start_time:wt.start_time,end_time:wt.end_time}),console.log("nooo iam first"),St.selectedDateType=wt.dateType,St.cdr.detectChanges(),St.submitClicked()})()}readBackCase4(wt){var St=this;return(0,O.Z)(function*(){console.log("CP3"),console.log("formData.user_info[0]   check chei:",wt.user_info),St.mnList=[],St.reportsForm.patchValue({reportsType:wt.reportsType,modelID:wt.modelID,start_range:wt.start_range||"00:00",end_range:wt.end_range||"23:59",custom_from_time_hour:wt.custom_from_time_hour||0,custom_to_time_hour:wt.custom_to_time_hour||23,filter_value:wt.filter_value,relationalOperators:wt.relationalOperators,user_list:wt.user_info,dateType:wt.dateType,start_time:wt.start_time,end_time:wt.end_time,excelReportType:wt.reportsQueryType}),setTimeout(()=>{St.getValidList().includes(wt.reportsQueryType)?St.reportsForm.get("excelReportType")?.setValue(wt.reportsQueryType):(console.warn(`\u26a0\ufe0f '${wt.reportsQueryType}' not in valid list. Resetting excelReportType.`),St.reportsForm.get("excelReportType")?.reset())},0),console.log("nooo iam first"),St.selectedDateType=wt.dateType,St.cdr.detectChanges(),St.submitClicked()})()}clearField(){"Alerts"!==this.reportsForm.value.reportsType&&this.reportsForm.get("alerts_type")?.setValue("Historical"),this.reportsForm.get("excelReportType")?.setValue(null)}menuReinitialization(){setTimeout(()=>{T.M.reinitialization(),N.hg.reinitialization(),N.n$.reinitialization(),N.lg.reinitialization()},50)}shouldDisplayReports(){const wt=this.reportsForm.get("reportsType")?.value;return["today","yesterday","this week","last week","this month","last month","between","between time"].includes(this.selectedDateType)&&"Custom Schedule Daily"===wt}shouldDisplayTimeInputs(){const wt=this.reportsForm.get("reportsType")?.value;return("today"===this.selectedDateType||"yesterday"===this.selectedDateType)&&"Custom Schedule Daily"!==wt||"Custom Schedule Hour"==wt||"Custom"==wt||"Dynamic Excel Report"==wt}onPdfSettingChange(wt){this.pdfSettingChange.emit(wt)}filterParameters(wt){const St=this.searchControls[wt]?.value?.toLowerCase()||"";this.filteredParameterLists[wt].next(this.parameterLists[wt].filter(vr=>vr.text.toLowerCase().includes(St)))}filterParametersSchedule(wt){const St=this.searchControls[wt]?.value?.toLowerCase()||"";this.filteredParameterListsScedhule[wt].next(this.parameterListsScedhule[wt].filter(vr=>vr.text.toLowerCase().includes(St)))}setToggleAllCheckboxState(wt){const St=this.deviceSettingsControls.find(Ko=>Ko.get("device")?.value===wt)?.get("selectedParameters")?.value||[],vr=this.parameterLists[wt]?.length||0,fn=St.length;this.isIndeterminate[wt]=fn>0&&fn<vr,this.isChecked[wt]=fn===vr}setToggleAllCheckboxStateSchedule(wt){const St=this.deviceSettingsControls.find(Ko=>Ko.get("device")?.value===wt)?.get("selectedParameters")?.value||[],vr=this.parameterListsScedhule[wt]?.length||0,fn=St.length;this.isIndeterminate[wt]=fn>0&&fn<vr,this.isChecked[wt]=fn===vr}toggleSelectAll(wt){const St=this.deviceSettingsControls.find(vr=>vr.get("device")?.value===wt)?.get("selectedParameters");this.isChecked[wt]?St.setValue([]):"Parameters"===this.reportsForm.get("reportsType")?.value||"Billing and Invoices"===this.reportsForm.get("reportsType")?.value&&"Billing and Invoices"===this.reportsForm.get("reportsType")?.value&&"Parameters"===this.reportsForm.get("billingType")?.value?St.setValue(this.parameterLists[wt].map(vr=>vr.value)):St.setValue(this.parameterListsScedhule[wt].map(vr=>vr.value)),"Parameters"===this.reportsForm.get("reportsType")?.value||"Billing and Invoices"===this.reportsForm.get("reportsType")?.value&&"Parameters"===this.reportsForm.get("billingType")?.value?this.setToggleAllCheckboxState(wt):this.setToggleAllCheckboxStateSchedule(wt)}getSelectedCount(wt){return(this.deviceSettingsControls.find(vr=>vr.get("device")?.value===wt)?.get("selectedParameters")?.value).length}getValidList(){const wt=this.reportsForm.get("modelID")?.value;if(!wt)return console.warn("\u26a0\ufe0f modelID is missing or invalid."),["Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"];if(!Array.isArray(this.lookup_data_temp_dre))return console.error("\u274c lookup_data_temp_dre is not an array."),["Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"];const St=this.lookup_data_temp_dre.find(fn=>Array.isArray(fn)&&fn[0]===wt);return St?"Parameters"===St[4]?["Parameters"]:["Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"]:(console.warn(`\u26a0\ufe0f No matching entry found for modelID: ${wt}`),["Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"])}triggerDownload(){this.triggerDownloadExcelReport.emit("")}sendTrigger(){console.log("this.lookup_data_temp_form :>> ",this.lookup_data_temp_form);const wt=this.route.snapshot.paramMap.get("id"),St=this.lookup_data_temp_form.find(fn=>fn.P1===wt);if(!St)return void H().fire({icon:"warning",title:"Data Not Found",text:`No item found with P1 = ${wt}`});const vr={...St,SK:this.SK_clientID};H().fire({title:"Sending...",allowOutsideClick:!1,didOpen:()=>{H().showLoading()}}),this.reportsService.triggerReport(vr).subscribe({next:fn=>{H().fire({icon:"success",title:"Mail Sent",text:"Mail sent successfully!",confirmButtonColor:"#3085d6"})},error:fn=>{console.error("\u274c API Error:",fn),H().fire({icon:"error",title:"Error",text:"Failed to send mail!",confirmButtonColor:"#d33"})}})}}return gt=Fr,(0,S.Z)(Fr,"\u0275fac",function(wt){return new(wt||gt)(m.Y36(X.qu),m.Y36(m.sBO),m.Y36(m.Qsj),m.Y36(L.F),m.Y36(L.F),m.Y36(L.F),m.Y36(Y.t),m.Y36(Y.t),m.Y36(ee.F0),m.Y36(L.F),m.Y36(te.H),m.Y36(ee.gz))}),(0,S.Z)(Fr,"\u0275cmp",m.Xpm({type:gt,selectors:[["app-reports-form"]],viewQuery:function(wt,St){if(1&wt&&(m.Gf(me,5),m.Gf(x.p6,5)),2&wt){let vr;m.iGM(vr=m.CRH())&&(St.scrollContainer=vr.first),m.iGM(vr=m.CRH())&&(St.triggerBtn=vr.first)}},inputs:{lookup_data_temp_dr:"lookup_data_temp_dr",lookup_data_temp_dre:"lookup_data_temp_dre",lookup_data_temp_form:"lookup_data_temp_form",hidingLink:"hidingLink",data$:"data$",UserList:"UserList",hasPR1:"hasPR1",hasPR2:"hasPR2",hasPR3:"hasPR3",hasPR4:"hasPR4",hasPR5:"hasPR5",item:"item",mnList:"mnList",extractedDevices:"extractedDevices"},outputs:{customEvent:"customEvent",triggerMethod:"triggerMethod",triggerDownloadExcelReport:"triggerDownloadExcelReport",triggerMethodAlerts:"triggerMethodAlerts",errorEvent:"errorEvent",saveButtonCheck:"saveButtonCheck",clear:"clear",sendSavedQueryForm:"sendSavedQueryForm",saveQuery:"saveQuery",loadConfirm:"loadConfirm",readBackLocation:"readBackLocation",getGridPositions:"getGridPositions",loadSpinner:"loadSpinner",refreshMNList:"refreshMNList",pdfSettingChange:"pdfSettingChange"},features:[m.TTD],decls:66,vars:37,consts:[[1,"card","mb-5","mb-xl-10"],[1,"card-header","align-items-center","py-5","gap-5"],[1,"card-title"],[4,"ngIf"],["class","btn btn-sm btn-success fw-bolder ms-2 fs-8 py-1 px-3",4,"ngIf"],["type","button","class","btn btn-sm btn-flex btn-secondary fw-bold","data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end","data-kt-menu-flip","top-end","ngbTooltip","Grid options it will helps to control moment of widgetsby applying those checks",4,"ngIf"],[1,"gridster-item-content",3,"reportsForm","extactedStoredPermissions"],[1,"form","gridster-item-content",3,"formGroup"],[1,"card-body"],[1,"form-group","row","align-items-center"],[1,"col-form-label","text-right","col-lg-2","required","fw-bold"],[1,"col-lg-4"],["formControlName","reportsType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass","change"],["disabled","",3,"value","selected"],[3,"value",4,"ngFor","ngForOf"],["class","form-group row","style","margin-top: 10px;margin-bottom: 10px;",4,"ngIf"],["class","form-group row",4,"ngIf"],["class","form-group row align-items-center my-2",4,"ngIf"],["class","form-group row","style","padding-top: 10px;",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"card-footer"],["type","submit",1,"btn","fw-bold","btn-primary","translatey","gridster-item-content",3,"click"],["type","button",1,"btn","fw-bold","btn-warning","translatey","gridster-item-content",2,"margin-left","10px",3,"click"],["type","button","style","margin-left: 10px;","class","btn btn-success translatey fw-bold gridster-item-content","data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click",4,"ngIf"],["type","button","style","margin-left: 10px;","class","btn btn-secondary translatey fw-bold gridster-item-content","data-bs-toggle","modal","data-bs-target","#exampleModal",3,"click",4,"ngIf"],["class","btn btn-success translatey fw-bold ","style","margin-left: 10px;",3,"click",4,"ngIf"],["class","btn btn-info translatey fw-bold ","style","margin-left: 10px;",3,"click",4,"ngIf"],["class","btn btn-dark translatey fw-bold ","style","margin-left: 10px;",3,"matMenuTriggerFor",4,"ngIf"],[3,"xPosition","yPosition"],["normalMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"fas","fa-file-excel"],[1,"fa-solid","fa-file-csv"],[1,"fa-solid","fa-file-pdf"],["normalMenu1","matMenu"],[1,"bi","bi-file-excel"],[1,"bi-file-earmark-pdf"],[1,"btn","btn-sm","btn-success","fw-bolder","ms-2","fs-8","py-1","px-3"],["type","button","data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end","data-kt-menu-flip","top-end","ngbTooltip","Grid options it will helps to control moment of widgetsby applying those checks",1,"btn","btn-sm","btn-flex","btn-secondary","fw-bold"],[1,"ki-duotone","ki-filter","fs-6","text-dark","me-1"],[1,"path1"],[1,"path2"],[3,"value"],["formControlName","customType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass","change"],[1,"form-group","row",2,"margin-top","10px","margin-bottom","10px"],[1,"col-form-label","text-right","col-lg-2","col-sm-12","required","fw-bold"],[1,"col-lg-4","col-md-9","col-sm-12"],["formControlName","templateID",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass","change"],[1,"form-group","row"],["formControlName","billingType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass","change"],["formControlName","modelID",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass","change"],["formControlName","excelReportType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass"],["formControlName","alerts_type",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],[1,"form-group","row","align-items-center","my-2"],["type","button","data-bs-toggle","modal","title","Select Location","data-bs-target","#myLocationTM",1,"btn","compact-btn",3,"ngClass","click"],[1,"fas","fa-server","me-1"],[1,"form-group","row",2,"padding-top","10px"],[1,"custom-multiselect"],["required","",1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl"],[3,"formGroup"],["formArrayName","deviceSettings",1,"position-relative"],["type","button","class","scroll-btn left",3,"ngClass","click",4,"ngIf"],[1,"horizontal-scroll-container"],[1,"horizontal-scroll","p-4"],["scrollContainer",""],[1,"d-flex","flex-nowrap"],["class","device-card shadow-sm p-3 bg-white rounded",3,"formGroupName",4,"ngFor","ngForOf"],["type","button","class","scroll-btn right",3,"ngClass","click",4,"ngIf"],["type","button",1,"scroll-btn","left",3,"ngClass","click"],[1,"bi","bi-chevron-left","fs-2","text-dark"],[1,"device-card","shadow-sm","p-3","bg-white","rounded",3,"formGroupName"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold","fs-6","text-primary"],[1,"bi","bi-x-circle-fill","text-danger","fs-5","cursor-pointer",3,"click"],["appearance","outline",1,"w-100",3,"ngClass"],["formControlName","selectedParameters","multiple","","panelClass","mat-select-panel-with-search",3,"disableOptionCentering"],["placeholderLabel","Search Parameters",3,"formControl","noEntriesFoundLabel","showToggleAllCheckbox","toggleAllCheckboxIndeterminate","toggleAllCheckboxChecked","toggleAll"],[3,"checked"],["type","button",1,"scroll-btn","right",3,"ngClass","click"],[1,"bi","bi-chevron-right","fs-2","text-dark"],["formControlName","dateType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass","change"],["class","col-lg-5 col-md-12 col-sm-12 d-flex align-items-center",4,"ngIf"],[1,"col-lg-5","col-md-12","col-sm-12","d-flex","align-items-center"],["type","time","formControlName","start_range","placeholder","Start Time",1,"form-control","form-control-solid","me-2","gridster-item-content",3,"ngClass"],["type","time","formControlName","end_range","placeholder","End Time",1,"form-control","form-control-solid","gridster-item-content",3,"ngClass"],["formControlName","custom_from_time_hour",1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content","me-3"],["formControlName","custom_to_time_hour",1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content"],[1,"col-md-4"],[1,"col-form-label","fs-6","required","fw-bold"],[1,"col-lg-12","col-md-6","col-sm-6"],["type","datetime-local","placeholder","Select date & time","formControlName","start_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass"],["type","datetime-local","placeholder","Select date & time","formControlName","end_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass"],["type","date","placeholder","Select date & time","formControlName","start_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass"],["type","date","placeholder","Select date & time","formControlName","end_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"ngClass"],["type","datetime-local","placeholder","Select date & time","formControlName","start_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["type","datetime-local","placeholder","Select date & time","formControlName","end_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["type","date","placeholder","Select date & time","formControlName","start_time",1,"form-select","form-select-solid","form-select-lg","gridster-item-content",3,"change"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-success","translatey","fw-bold","gridster-item-content",2,"margin-left","10px",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-secondary","translatey","fw-bold","gridster-item-content",2,"margin-left","10px",3,"click"],[1,"btn","btn-success","translatey","fw-bold",2,"margin-left","10px",3,"click"],[1,"btn","btn-info","translatey","fw-bold",2,"margin-left","10px",3,"click"],[1,"btn","btn-dark","translatey","fw-bold",2,"margin-left","10px",3,"matMenuTriggerFor"],["triggerBtn",""]],template:function(wt,St){if(1&wt&&(m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",2)(4,"strong"),m._uU(5,"Reports"),m.qZA(),m.YNc(6,l,2,0,"strong",3),m.YNc(7,Me,2,1,"a",4),m.qZA(),m.TgZ(8,"span"),m.YNc(9,Ze,5,0,"button",5),m._UZ(10,"app-advance-menu",6),m.qZA()()(),m.TgZ(11,"form",7)(12,"div",8)(13,"div",9)(14,"label",10),m._uU(15,"Reports Type"),m.qZA(),m.TgZ(16,"div",11)(17,"select",12),m.NdJ("change",function(){return St.clearField()}),m.TgZ(18,"option",13),m._uU(19,"Select Reports Type"),m.qZA(),m.YNc(20,ut,2,2,"option",14),m.qZA()(),m.YNc(21,Wt,8,7,"ng-container",3),m.qZA(),m.YNc(22,nr,8,6,"div",15),m.YNc(23,Kn,8,7,"div",16),m.YNc(24,mo,8,6,"div",15),m.YNc(25,Di,8,6,"div",16),m.YNc(26,ci,11,4,"div",15),m.YNc(27,Wn,7,5,"div",17),m.YNc(28,an,6,4,"div",18),m.YNc(29,Vo,9,4,"form",19),m.YNc(30,at,10,8,"div",18),m.YNc(31,gr,11,6,"div",18),m.YNc(32,Pt,11,6,"div",18),m.YNc(33,mt,5,0,"div",18),m.YNc(34,Zt,5,0,"div",18),m.YNc(35,ln,5,0,"div",18),m.qZA(),m.TgZ(36,"div",20)(37,"button",21),m.NdJ("click",function(){return St.submitClicked()}),m._uU(38,"Apply"),m.qZA(),m.TgZ(39,"button",22),m.NdJ("click",function(){return St.resetForm()}),m._uU(40,"clear"),m.qZA(),m.YNc(41,no,2,0,"button",23),m.YNc(42,oo,2,0,"button",24),m.YNc(43,Ki,2,0,"button",25),m.YNc(44,li,2,0,"button",26),m.YNc(45,ts,3,1,"button",27),m.TgZ(46,"mat-menu",28,29)(48,"button",30),m.NdJ("click",function(){return St.exportChartAndInsertIntoExcel()}),m._UZ(49,"i",31),m._uU(50," Excel"),m.qZA(),m.TgZ(51,"button",30),m.NdJ("click",function(){return St.exportToCSV()}),m._UZ(52,"i",32),m._uU(53," CSV"),m.qZA(),m.TgZ(54,"button",30),m.NdJ("click",function(){return St.exportToPDF()}),m._UZ(55,"i",33),m._uU(56," PDF"),m.qZA()(),m.YNc(57,Nt,3,1,"button",27),m.TgZ(58,"mat-menu",28,34)(60,"button",30),m.NdJ("click",function(){return St.exportChartAndInsertIntoExcelAlerts()}),m._UZ(61,"i",35),m._uU(62,"Excel"),m.qZA(),m.TgZ(63,"button",30),m.NdJ("click",function(){return St.exportToPDFAlerts()}),m._UZ(64,"i",36),m._uU(65,"PDF"),m.qZA()()()()()),2&wt){let vr,fn,Ko,Ro,Ln,yr,kr,or,Tr,ht,Lt,Dr,hn,Un,Yn,dr;m.xp6(6),m.Q6J("ngIf",St.reportsDisplayID),m.xp6(1),m.Q6J("ngIf",St.reportsDisplayID),m.xp6(2),m.Q6J("ngIf",St.hidingLink),m.xp6(1),m.Q6J("reportsForm",St.reportsForm)("extactedStoredPermissions",St.extactedStoredPermissions),m.xp6(1),m.Q6J("formGroup",St.reportsForm),m.xp6(6),m.Q6J("ngClass",m.VKq(35,Ct,(null==(vr=St.reportsForm.get("reportsType"))?null:vr.invalid)&&(null==(vr=St.reportsForm.get("reportsType"))?null:vr.touched))),m.xp6(1),m.Q6J("value",null)("selected",!0),m.xp6(2),m.Q6J("ngForOf",St.allReportsPermissions),m.xp6(1),m.Q6J("ngIf","Custom"===(null==(fn=St.reportsForm.get("reportsType"))?null:fn.value)),m.xp6(1),m.Q6J("ngIf",St.lookup_data_temp_dr.length>0&&"Billing and Invoices"==(null==(Ko=St.reportsForm.get("reportsType"))?null:Ko.value)),m.xp6(1),m.Q6J("ngIf","Billing and Invoices"==(null==(Ro=St.reportsForm.get("reportsType"))?null:Ro.value)),m.xp6(1),m.Q6J("ngIf",St.lookup_data_temp_dre.length>0&&"Dynamic Excel Report"==(null==(Ln=St.reportsForm.get("reportsType"))?null:Ln.value)),m.xp6(1),m.Q6J("ngIf","Dynamic Excel Report"==(null==(yr=St.reportsForm.get("reportsType"))?null:yr.value)),m.xp6(1),m.Q6J("ngIf","Alerts"===(null==(kr=St.reportsForm.get("reportsType"))?null:kr.value)),m.xp6(1),m.Q6J("ngIf","Audit trails"!==(null==(or=St.reportsForm.get("reportsType"))?null:or.value)&&"Dynamic Excel Report"!==(null==(or=St.reportsForm.get("reportsType"))?null:or.value)),m.xp6(1),m.Q6J("ngIf",St.UserList.length>0&&"Audit trails"==(null==(Tr=St.reportsForm.get("reportsType"))?null:Tr.value)),m.xp6(1),m.Q6J("ngIf","Alerts"!==(null==(ht=St.reportsForm.get("reportsType"))?null:ht.value)&&"Audit trails"!==(null==(ht=St.reportsForm.get("reportsType"))?null:ht.value)&&St.deviceSettingsControls.length>0&&"Billing and Invoices"!==(null==(ht=St.reportsForm.get("reportsType"))?null:ht.value)&&"Dynamic Excel Report"!==(null==(ht=St.reportsForm.get("reportsType"))?null:ht.value)),m.xp6(1),m.Q6J("ngIf","Live"!==(null==(Lt=St.reportsForm.get("alerts_type"))?null:Lt.value)),m.xp6(1),m.Q6J("ngIf","between time"==St.selectedDateType&&"Historical"===(null==(Dr=St.reportsForm.get("alerts_type"))?null:Dr.value)||"between time"==St.selectedDateType&&"Alerts"!==(null==(Dr=St.reportsForm.get("reportsType"))?null:Dr.value)),m.xp6(1),m.Q6J("ngIf","between"==St.selectedDateType&&"Historical"===(null==(hn=St.reportsForm.get("alerts_type"))?null:hn.value)||"between "==St.selectedDateType&&"Alerts"!==(null==(hn=St.reportsForm.get("reportsType"))?null:hn.value)),m.xp6(1),m.Q6J("ngIf",">="==St.selectedDateType),m.xp6(1),m.Q6J("ngIf","<="==St.selectedDateType),m.xp6(1),m.Q6J("ngIf","is"==St.selectedDateType),m.xp6(6),m.Q6J("ngIf",!St.editQueryChk&&St.enableSaveButton&&St.hidingLink),m.xp6(1),m.Q6J("ngIf",St.editQueryChk&&St.hidingLink),m.xp6(1),m.Q6J("ngIf",St.editQueryChk&&St.hidingLink),m.xp6(1),m.Q6J("ngIf","Dynamic Excel Report"===(null==(Un=St.reportsForm.get("reportsType"))?null:Un.value)&&St.enableDownloadXLSX),m.xp6(1),m.Q6J("ngIf","Alerts"!==(null==(Yn=St.reportsForm.get("reportsType"))?null:Yn.value)&&"Dynamic Excel Report"!==(null==(Yn=St.reportsForm.get("reportsType"))?null:Yn.value)),m.xp6(1),m.Q6J("xPosition","before")("yPosition","below"),m.xp6(11),m.Q6J("ngIf","Alerts"===(null==(dr=St.reportsForm.get("reportsType"))?null:dr.value)),m.xp6(1),m.Q6J("xPosition","before")("yPosition","below")}},dependencies:[pe.mk,pe.sg,pe.O5,X._Y,X.YN,X.Kr,X.Fj,X.EJ,X.JJ,X.JL,X.Q7,X.oH,X.sg,X.u,X.x0,X.CE,x.VK,x.OP,x.p6,we.O,Te.KE,Te.hX,Te.TO,ge.gD,Ce.ey,Oe.nu,ke,pe.Ov],styles:[".translatey[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.device-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a}.device-card[_ngcontent-%COMP%]{flex:0 0 auto;min-width:320px;max-width:350px;margin-right:12px;border:1px solid #ddd;padding:15px;border-radius:8px;background:var(--bs-body-bg);transition:.3s ease-in-out;display:flex;flex-direction:column}.mat-select-panel[_ngcontent-%COMP%]{min-width:250px!important}.mat-form-field[_ngcontent-%COMP%]{width:100%!important;min-width:250px}.scroll-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);border:none;background:var(--bs-primary);color:#fff;width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:background .2s ease-in-out,opacity .2s,box-shadow .2s;box-shadow:0 4px 6px #00000026}.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{color:#dc3545!important;border-color:#dc3545!important}.scroll-btn[_ngcontent-%COMP%]:hover{background:var(--bs-primary-dark, #0056b3);box-shadow:0 6px 8px #00000040}.scroll-btn.disabled[_ngcontent-%COMP%]{background:var(--bs-gray-300)!important;cursor:not-allowed;opacity:.5;box-shadow:none}.scroll-btn.left[_ngcontent-%COMP%]{left:12px}.scroll-btn.right[_ngcontent-%COMP%]{right:12px}.horizontal-scroll-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;overflow:hidden;padding:0 50px;border-radius:8px}.horizontal-scroll[_ngcontent-%COMP%]{display:flex;overflow-x:auto;scrollbar-width:none;scroll-behavior:smooth}.horizontal-scroll[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})),Fr})()},34636:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>ReportsMainComponent});var _Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(15861),_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(86656),angular_gridster2__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(35024),handlebars__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(28539),handlebars__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(handlebars__WEBPACK_IMPORTED_MODULE_0__),angular_datatables__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(627),rxjs__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(65619),exceljs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(90775),exceljs__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(exceljs__WEBPACK_IMPORTED_MODULE_2__),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(57069),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3__),pdfmake_build_vfs_fonts__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(36236),highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(61492),highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5__),highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(85748),highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_6__),highcharts_modules_accessibility__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5789),highcharts_modules_accessibility__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(highcharts_modules_accessibility__WEBPACK_IMPORTED_MODULE_7__),highcharts__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(81845),highcharts__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(highcharts__WEBPACK_IMPORTED_MODULE_8__),xlsx__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(11486),_angular_forms__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(56223),sweetalert2__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(13519),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(sweetalert2__WEBPACK_IMPORTED_MODULE_9__),_angular_common__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(96814),moment__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(16676),moment__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__),rxjs__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(47394),_reports_charts_reports_charts_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(77159),_reports_form_reports_form_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(51793),_reports_table_reports_table_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(35317),_cron_editor_tm_cron_editor_tm_component__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(64142),html2pdf_js__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(65364),html2pdf_js__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(html2pdf_js__WEBPACK_IMPORTED_MODULE_14__),number_to_words__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(74145),number_to_words__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(number_to_words__WEBPACK_IMPORTED_MODULE_15__),_angular_core__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(65879),src_services_reports_api_service__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(23365),src_app_API_service__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(31552),ngx_spinner__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(88672),_angular_router__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(64190),_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(22939),_shared_service__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5588),_angular_platform_browser__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(6593),_dynamic_template_components_template_service__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(26131),src_services_location_premission_service__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(74260),_angular_common_http__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(69862),_dynamic_excel_components_excel_service__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(1754),ng_multiselect_dropdown__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(60540),_alert_info_modal_alert_info_modal_component__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(68701);const _c0=["pdfPreviewIframe"],_c1=function(){return{"background-color":"var(--bs-body-bg)","border-radius":"10px",border:"1px solid #dee2e6"}};function ReportsMainComponent_gridster_item_10_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"gridster-item",123)(1,"app-reports-form",124),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("customEvent",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.handleFormData(S))})("pdfSettingChange",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.customPdfSetting(S))})("triggerMethod",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.triggerMethod(S))})("triggerMethodAlerts",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.triggerMethodAlerts(S))})("loadSpinner",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.showSpinner(S))})("loadConfirm",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.handleLoadConfirm(S))})("clear",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.clearAll(S))})("refreshMNList",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.selectNodesFromMnList(S))})("sendSavedQueryForm",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.edit_form(S))})("errorEvent",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.handlingErrors(S))})("triggerDownloadExcelReport",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.genrateDynamicEXcel(S))})("readBackLocation",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.selectNodesFromMnList(S))})("getGridPositions",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.updatePositions(S))})("saveButtonCheck",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.handleFTdontUpdate(S))}),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(2,"div",125),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()}if(2&oe){const re=ue.$implicit,O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngStyle",_angular_core__WEBPACK_IMPORTED_MODULE_20__.DdM(11,_c1))("item",re),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("item",re)("lookup_data_temp_dr",O.lookup_data_temp_dr)("lookup_data_temp_dre",O.lookup_data_temp_dre)("lookup_data_temp_form",O.lookup_data_temp_form)("mnList",O.mnList)("hidingLink",O.hidingLink)("UserList",O.UserList)("extractedDevices",O.extractDevices)("data$",O.data$)}}function ReportsMainComponent_div_11_gridster_item_1_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"gridster-item",123)(1,"app-reports-charts",126),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("chartInstance",function(S){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(m.getChartInstanceData(S))}),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()}if(2&oe){const re=ue.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngStyle",_angular_core__WEBPACK_IMPORTED_MODULE_20__.DdM(3,_c1))("item",re),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("item",re)}}function ReportsMainComponent_div_11_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(1,ReportsMainComponent_div_11_gridster_item_1_Template,2,4,"gridster-item",8),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngForOf",re.charts)}}function ReportsMainComponent_div_12_gridster_item_1_div_1_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(1,"app-reports-table",130),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw(),O=re.$implicit,S=re.index,m=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("item",O)("dynamicColumns",m.dynamicColumns)("dynamicRowData",m.dynamicRowData)("index",S)}}function ReportsMainComponent_div_12_gridster_item_1_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"gridster-item",128),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(1,ReportsMainComponent_div_12_gridster_item_1_div_1_Template,2,4,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(2,"div",129),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()),2&oe){const re=ue.$implicit,O=ue.index,S=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngStyle",_angular_core__WEBPACK_IMPORTED_MODULE_20__.DdM(4,_c1))("item",re),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",S.dynamicColumns),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.MGl("id","dynamic-height-",O,"")}}function ReportsMainComponent_div_12_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(1,ReportsMainComponent_div_12_gridster_item_1_Template,3,5,"gridster-item",127),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngForOf",re.table)}}function ReportsMainComponent_h2_20_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"h2",63),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(1,"Create New Query"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA())}function ReportsMainComponent_h2_21_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"h2",63),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(1,"Edit Query"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA())}function ReportsMainComponent_div_52_div_4_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div",132),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(1,"ng-multiselect-dropdown",133),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("placeholder","Select User ")("settings",re.dropdownSettings)("data",re.getAllUsersNamesAndMails)("formControl",re.saveQuery.controls.save_to)}}function ReportsMainComponent_div_52_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div",31)(1,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(2,"Save To"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(3,"div",33),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(4,ReportsMainComponent_div_52_div_4_Template,2,4,"div",131),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()),2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",re.getAllUsersNamesAndMails.length>0)}}function ReportsMainComponent_button_115_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"button",134),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(S.onSaveQuery())}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(1,"Submit"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()}if(2&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("disabled",re.errorForUniqueID)}}function ReportsMainComponent_button_116_Template(oe,ue){if(1&oe){const re=_angular_core__WEBPACK_IMPORTED_MODULE_20__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"button",135),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_20__.CHM(re);const S=_angular_core__WEBPACK_IMPORTED_MODULE_20__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_20__.KtG(S.onUpdateQuery())}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(1,"Update"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()}}function ReportsMainComponent_tr_128_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"tr")(1,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(2,"ID"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(3,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(4,"Name"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(5,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(6,"updated Data"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(7,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(8,"Edit"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(9,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(10,"Delete"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()())}function ReportsMainComponent_tr_129_Template(oe,ue){1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"tr")(1,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(2,"ID"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(3,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(4,"Name"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(5,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(6,"updated Data"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(7,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(8,"Edit"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()())}function ReportsMainComponent_div_200_Template(oe,ue){if(1&oe&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div",136)(1,"div",97)(2,"div",137),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(4,"div",137),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(5,"input",138),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()),2&oe){const re=ue.$implicit;let S;_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("formGroupName",ue.index),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Oqu(null==(S=re.get("key"))?null:S.value)}}const _c2=function(oe){return{active:oe}};highcharts_modules_exporting__WEBPACK_IMPORTED_MODULE_5___default()(highcharts__WEBPACK_IMPORTED_MODULE_8___default()),highcharts_modules_export_data__WEBPACK_IMPORTED_MODULE_6___default()(highcharts__WEBPACK_IMPORTED_MODULE_8___default()),highcharts_modules_accessibility__WEBPACK_IMPORTED_MODULE_7___default()(highcharts__WEBPACK_IMPORTED_MODULE_8___default()),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3___default().vfs=pdfmake_build_vfs_fonts__WEBPACK_IMPORTED_MODULE_4__.I.vfs;let ReportsMainComponent=(()=>{var _class;class ReportsMainComponent{handleFTdontUpdate(oe){console.log("iam ready to creste"),this.saveButtonCase=!0,this.cdr.detectChanges()}handlingErrors(oe){oe&&(this.spinner.hide(),this.clearAll("error"))}cancelButton(){$("#MultiJSTree").jstree(!0).deselect_all()}handleLoadConfirm(oe){"confirm"==oe&&(console.log("confirmed"),this.cdr.detectChanges())}constructor(oe,ue,re,O,S,m,X,x,z,H,G,D,U,R,T,N,L,Y,ee){(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"reportApi",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"api",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"cdr",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"spinner",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"router",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"fb",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"toast",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"getTM",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"dropdown",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"sanitizer",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"templateService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"sharedService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"renderer",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"document",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"deviceConfig",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"locationPermissionService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"http",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"excelService",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"route",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"pdfPreviewIframe",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"uploadedFile$",new rxjs__WEBPACK_IMPORTED_MODULE_22__.X(null)),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"helpersRegistered",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"saveButtonCase",!0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"allowDrag",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"companyLogo",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"UserList",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"routeId",""),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"checPDFStyle",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"companyDetails",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"isOnline",!0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"listofDRIds",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"previewForPDF",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"parsedCss",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"parsedHtml",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"selectDevicforBillInvoice",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"flattenedDeviceConfig",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"deviceForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"allPacketDetailsForUpdate",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"currentRowDataForPDF",{}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"previewHtmlContent",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"renderedHtml",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"All_Devices_ConfigurationDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"All_RDTs_ConfigurationDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"reportFormDRE",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"globalParameterMappingDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"globalParameterMappingByDeviceDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"AllParameterListDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"globalScheduleParameterMappingByDeviceDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"AllScheduleListDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"userInputDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"condFormatFormDRE",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"listofDREIds",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"parsedTables",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"summarizedTablesDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"extractedColumnsDRE",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"chartConfigs",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"lookup_data_temp_form",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"errorForUniqueID",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"userInfo",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"dropdownSettings",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"lookup_data_tempForIdFilter",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"lookup_data_temp_dr",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"lookup_data_temp_dre",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"FT_dontUpdate",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"userAssignedCache",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"ownerUserName",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"PDF_options",{}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"superAdmin",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"email_me",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"treeInstance",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"location_button_chk",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"listofTimeMachineIds",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"lookup_data_temp1",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"savedForPDF",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"getLoggedUser",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"SK_clientID",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"maxlength",10),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"userCreated",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"userAssigned",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"filterAllTimeMachineIds",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"cronEditorTMComponent",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"gridsterItems",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"reportChartComponent",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"reportFormComponent",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"reportTableComponent",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"datatableElement",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"activeTab","Datatype"),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"options",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"table",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"form",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"charts",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"subscription",new rxjs__WEBPACK_IMPORTED_MODULE_23__.w0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"chartsData",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"chartInstance",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"dynamicColumns",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"dynamicRowData",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"dataTableInstances",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"tableData",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"maxPageWidth",1e3),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"allPermissions_user",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"allReportsPermissions",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hidingLink",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hideDeleteButton",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"formPostionCheck",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hasPR1",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hasPR2",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hasPR3",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hasPR4",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"hasPR5",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"saveQuery",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"saveQueryData",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"dataSubject",new rxjs__WEBPACK_IMPORTED_MODULE_22__.X(null)),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"data$",this.dataSubject.asObservable()),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"currentRowData",{}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"pdfOptions",{AttributeUpdates:{template:{content:[{image:"mageBase64",alignment:"center",width:500,margin:[0,20]},{text:"Daily Generation Report",style:"header",alignment:"center",fontSize:30,italics:!0,color:"gray"},{stack:[{text:["Bangalore- Wimate"],fontSize:20,alignment:"center"},{text:["Thursday 25 August 2023"],alignment:"center",fontSize:20}],style:"superMargin"},{text:["Chart"],margin:[0,10],fontSize:20,alignment:"center"},{image:"imageData",alignment:"center",width:500},{text:"Table",alignment:"center",margin:[0,10],fontSize:20,style:"subheader"}]}}}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"lookItems",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"pbTableData",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"powerboard_table",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"columnDatatable",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"edit_delete",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"updateButtonChK",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"onUpdateButton",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"final_list",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"parentID_selected_node",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"enableLocationButton",!1),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"user_companyID",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"temp",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"getAllUsersNamesAndMails",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"extractDevices",[]),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"cronForm",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"mnList",void 0),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(this,"All_Devices_Configuration",[]),this.reportApi=oe,this.api=ue,this.cdr=re,this.spinner=O,this.router=S,this.fb=m,this.toast=X,this.getTM=x,this.dropdown=z,this.sanitizer=H,this.templateService=G,this.sharedService=D,this.renderer=U,this.document=R,this.deviceConfig=T,this.locationPermissionService=N,this.http=L,this.excelService=Y,this.route=ee,console.log("\u{1f4e6} ReportsMainComponent created")}ngAfterViewInit(){}resizeGridItems(){this.gridsterItems.forEach((oe,ue)=>{const re=document.getElementById(`dynamic-height-${ue}`),O=re?re.clientHeight:0;console.log("contentDiv",re);const m=Math.ceil(O/(this.options.fixedRowHeight||100));console.log("gridItem",oe),console.log("rowsNeeded",m),oe.item.rows=Math.max(m,1),oe.updateItemSize()})}resizeGridItemForm(){this.gridsterItems.forEach((oe,ue)=>{const re=document.getElementById("dynamic-height-form"),m=Math.ceil((re?re.clientHeight:0)/(this.options.fixedRowHeight||100));oe.item.rows=Math.max(m,1),oe.updateItemSize()})}ngOnChanges(oe){throw new Error("Method not implemented.")}ngOnInit(){this.initializeSaveQueryForm(),this.dropdownSettings=this.dropdown.getSettings4(),this.allReportsPermissions=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("ReportsPermissions")))),this.allPermissions_user=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("permissionDetails")))),this.options={gridType:angular_gridster2__WEBPACK_IMPORTED_MODULE_24__.tQ.ScrollVertical,displayGrid:angular_gridster2__WEBPACK_IMPORTED_MODULE_24__.KY.Always,compactType:angular_gridster2__WEBPACK_IMPORTED_MODULE_24__.RU.None,itemIntCallback:this.itemOnint.bind(this),itemChangeCallback:this.itemChange.bind(this),itemResizeCallback:this.itemResize.bind(this),margin:0,outerMargin:!0,outerMarginTop:0,outerMarginRight:0,outerMarginBottom:0,outerMarginLeft:0,useTransformPositioning:!0,mobileBreakpoint:200,minCols:25,maxCols:25,minRows:1,maxRows:1e3,maxItemCols:1e3,minItemCols:1,maxItemRows:20,minItemRows:1,maxItemArea:1e3,minItemArea:12,defaultItemCols:1,defaultItemRows:1,fixedColWidth:100,fixedRowHeight:100,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,scrollSensitivity:10,scrollSpeed:20,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{enabled:this.allowDrag},resizable:{enabled:this.allowDrag},swap:!0,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!1,south:!0,west:!1},pushResizeItems:!1,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1},this.form=[{id:"form",cols:25,rows:12,y:0,x:1,minItemArea:10}],this.getLoggedUser=this.getTM.getLoggedUserDetails(),this.ownerUserName=this.getLoggedUser.attributes["custom:username"],this.SK_clientID=this.getLoggedUser.attributes["custom:clientID"],this.user_companyID=this.getLoggedUser.attributes["custom:companyID"],this.email_me=[{user_name:"me",mailId:this.getLoggedUser.attributes.email}],this.userCreated=[{user_name:this.getLoggedUser.attributes["custom:username"],mailId:this.getLoggedUser.attributes.email}],this.checkPermission(),this.fetchTMData(1),this.addFromService(),this.fetchDRData_redirect(1),this.deviceForm=this.fb.group({device_configs:this.fb.array([])}),this.api.GetCompany(this.user_companyID,this.SK_clientID).then(oe=>{oe&&(this.companyLogo=oe.companyLogo1,this.companyDetails=oe)}),this.getAllUsersForm(1),this.reportFormDRE=this.fb.group({reportsType:["Parameters",_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],dateType:["today",_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],startDateTime:[new Date,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],endDateTime:[new Date,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required]}),this.condFormatFormDRE=this.fb.group({rulesDRE:this.fb.array([])})}getAllUsers(oe,ue){var re=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{console.log("ehat is thismagic",re.SK_clientID+"#user",oe);const O=yield re.api.GetLookupMasterTable(re.SK_clientID+"#user",oe);if(console.log("c1",O),O&&O.items)if(console.log("c1",O),"string"==typeof O.items){let S=JSON.parse(O.items);if(Array.isArray(S)){for(let m=0;m<S.length;m++){const X=S[m];if(null==X)break;{const x=Object.keys(X)[0];re.userInfo.push(X[x])}}yield re.getAllUsers(oe+1,ue)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else{let S=localStorage.getItem("TM_permissions");const m=re.getLoggedUser.attributes["custom:username"];"string"==typeof S&&(S=JSON.parse(S));let X=[];X=null!=S?S.map(x=>x.value):[],console.log("userInfo",re.userInfo),console.log("storedPermissions",S),console.log("idFilter >>>",ue),re.filterPermissions(m,X,ue)}}catch(O){console.error("Error:",O)}})()}filterPermissions(oe,ue,re){ue.includes("mail_permission")&&!ue.includes("All_TM")?(this.filterUserCreatedAndAssignedIds(oe,re),this.handleMail(),this.showDatatable(this.filteredIdFilter(re))):!ue.includes("mail_permission")&&ue.includes("All_TM")?this.handleAllTM():ue.includes("mail_permission")&&ue.includes("All_TM")?(this.superAdmin=!0,this.handleMailAndAllTM()):!ue.includes("mail_permission")&&!ue.includes("All_TM")&&(this.filterUserCreatedAndAssignedIds(oe,re),this.showDatatable(this.filteredIdFilter(re)))}filterUserCreatedAndAssignedIds(oe,ue){this.filterAllTimeMachineIds=[],this.getAllUsersNamesAndMails.unshift(this.email_me[0]),ue.forEach(re=>{if(re.P11&&"string"==typeof re.P11){const O=JSON.parse(re.P11);O&&O[0].user_name===oe&&this.filterAllTimeMachineIds.push(re.P1)}re.P12&&"string"==typeof re.P12&&JSON.parse(re.P12).forEach(S=>{S.P1===oe&&this.filterAllTimeMachineIds.push(re.P1)})})}filteredIdFilter(oe){return oe.filter(ue=>this.filterAllTimeMachineIds.includes(ue.P1))}handleAllTM(){this.getAllUsersNamesAndMails.unshift(this.email_me[0]),this.showDatatable(this.lookup_data_temp1)}handleMail(){this.userInfo.sort((oe,ue)=>ue.P8-oe.P8),this.userInfo.forEach(oe=>{this.getAllUsersNamesAndMails.push({user_name:oe.P1,mailId:oe.P3})}),this.getAllUsersNamesAndMails.unshift(this.email_me[0])}handleMailAndAllTM(){this.userInfo.sort((oe,ue)=>ue.P8-oe.P8),this.userInfo.forEach(oe=>{this.getAllUsersNamesAndMails.push({user_name:oe.P1,mailId:oe.P3})}),this.getAllUsersNamesAndMails.unshift(this.email_me[0]),this.showDatatable(this.lookup_data_temp1)}handleFormData(oe){"Dynamic Excel Report"!=oe.arg1.reportsType&&this.formPostionCheck&&this.form&&null!==this.form&&oe.arg2&&oe.arg2.form[0]&&(this.form=[],this.form.push(oe.arg2.form[0]||{id:"form",cols:25,rows:12,y:0,x:0}),setTimeout(()=>{this.reportFormComponent.readBack(oe.arg1,oe.arg3),this.formPostionCheck=!1},1e3)),this.cdr.detectChanges(),"Parameters"==oe.arg1.reportsType?this.handleParameterData(oe.arg1,oe.arg2):"Hourly consumption"===oe.arg1.reportsType||"Daily consumption"==oe.arg1.reportsType||"Monthly consumption"==oe.arg1.reportsType?this.handleShedhuleData(oe.arg1,oe.arg2):"Custom Schedule Daily"==oe.arg1.reportsType?this.handleCustomOnSpot(oe.arg1,oe.arg2):"Custom"==oe.arg1.reportsType?this.handleCustomOnSpotDayLive(oe.arg1,oe.arg2):"Billing and Invoices"==oe.arg1.reportsType?"Parameters"==oe.arg1.billingType?this.handleParameterDataForBilling(oe.arg1,oe.arg2):this.handleShedhuleDataForBilling(oe.arg1,oe.arg2):"Dynamic Excel Report"==oe.arg1.reportsType?(this.userInputDRE=oe.arg1,this.cdr.detectChanges(),this.loadDynamicWorkspaceDRE(oe.arg1)):"Alerts"==oe.arg1.reportsType?this.handleAlertsData(oe.arg1,oe.arg2):"Audit trails"==oe.arg1.reportsType?this.handleAuditTrailData(oe.arg1,oe.arg2):alert("you have choose wrong reports")}handleShedhuleDataForBilling(oe,ue){this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[];const re=oe.reportsType;if(this.loadDynamicWorkspace(oe.templateID),this.selectDevicforBillInvoice=oe.device[0],ue&&null!=ue.table)ue.table.forEach(z=>{this.table.push(z)});else for(let z=0;z<oe.device.length;z++)this.table.push({id:`table${z+1}`,cols:25,rows:12,y:0,x:1,index:z});let O=oe.paramFilter;console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let x={};for(let z=0;z<m.length;z++){const H=m[z]?.parameters,G=m[z]?.allDetails?.PK;H&&G&&(x[G]=H)}console.log("Extracted Parameters",x),console.log(" After mulActualData",m),this.reportApi.batchWiseResponses(oe).then(z=>{if(1===z.length){if(1===z.length&&null===z[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"}),this.table=[],void this.cdr.detectChanges();for(let N=0;N<z.length;N++)null===z[N]?(this.table=[],this.cdr.detectChanges(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${oe.device[N]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",O),console.log("continue the process"));const G=z[0].map(N=>{const[L,Y]=2===N.length?N:[null,null];return{firstBatchData:L&&L.response?.data?L.response.data:[],secondBatchData:Y&&Y.response?.data&&Y.response.data.length>0?Y.response.data:[],device:L?L.device:null,timestamp:L?L.timestamp:null,batchType:{firstBatch:L?L.batchType:null,secondBatch:Y?Y.batchType:null}}})||[];console.log("historicalData",G);const D=Array.from(new Set(G.flatMap(N=>[...(N.firstBatchData||[]).flatMap(L=>L.MM?Object.keys(L.MM):[]),...(N.secondBatchData||[]).flatMap(L=>L.MM?Object.keys(L.MM):[])])));console.log("Property Names",D);const U=D.map(N=>{const L=parseInt(N.slice(1))-1;return S[L]&&void 0!==S[L].schedule_parameter_label?S[L].schedule_parameter_label:N});D.unshift("Device label","Date & time","Calculated Time","Time Generated"),D.push("Generate"),D.push("extraData"),U.unshift("Device label","Date & time","Calculated Time","Time Generated"),D.push("Generate"),U.push("extraData"),console.log("TABLE NAMES",U);const R={columns:U,data:G.map(N=>{const L={};return N.firstBatchData[0].metaData={},N.firstBatchData.forEach(Y=>{D.forEach(ee=>{if("Device label"!==ee&&"Date & time"!==ee&&"Calculated Time"!==ee&&"Time Generated"!==ee){const te=parseInt(ee.slice(1))-1;S[te]&&void 0!==S[te].schedule_parameter_label?N.firstBatchData[0].metaData[S[te].schedule_parameter_label]=Y.MM[ee]??" ":N.firstBatchData[0].metaData[ee]=Y.MM[ee]??" "}})}),N.secondBatchData.forEach(Y=>{D.forEach(ee=>{if("Device label"!==ee&&"Date & time"!==ee&&"Calculated Time"!==ee&&"Time Generated"!==ee&&"Generate"!==ee&&"extraData"!=ee){const te=parseInt(ee.slice(1))-1;S[te]&&void 0!==S[te].schedule_parameter_label?L[S[te].schedule_parameter_label]=Y.MM[ee]??" ":L[ee]=Y.MM[ee]??" "}})}),D.forEach(Y=>{if("Device label"===Y){let ee=N.secondBatchData[0].PK;ee=ee.split("#")[1];const pe=this.All_Devices_Configuration.find(we=>we.mn===ee);L["Device label"]=pe?.mn_label??"Unknown Device"}else"Date & time"===Y?L["Date & time"]=new Date(1e3*(N.secondBatchData[0].SK-19800)).toDateString()+" "+new Date(1e3*(N.secondBatchData[0].SK-19800)).toLocaleTimeString():"Calculated Time"===Y?L["Calculated Time"]=this.convertToReadableFormat(N.secondBatchData[0].time_calculated):"Time Generated"===Y?L["Time Generated"]=this.convertToReadableFormat1(N.secondBatchData[0].time_generated):"extraData"!==Y?L.extraData=N.firstBatchData:"Generate"!==Y&&(L.Generate='<button class = "btn fw-bold btn-primary btn-sm px-4" data-bs-toggle="modal" title="more info" data-bs-target="#dynamictemplatePDF" ><i class="bi bi-arrow-repeat"></i>Generate</button>')}),L})};console.log("Angular DataTable Format:",R),console.log("Angular DataTable Format:",R);const T=R.columns.filter(N=>{const L=N;return O.some(Y=>Y.includes(L))});T.unshift("Device label","Date & time","Calculated Time","Time Generated"),T.push("Generate"),R.columns=T,R.data=this.sanitizeData(R.data),this.tableData.push(R),this.getDataFromTM(R,0,"schedule"),this.spinner.hide()}else if(z.length>1){let H=[];this.table=[];for(let N=0;N<z.length;N++)null!==z[N]?(ue&&null!=ue.table?(this.table=[],ue.table.forEach(L=>{this.table.push(L||{id:`table${N}`,cols:25,rows:12,y:0,x:1,index:N})})):this.table.push({id:`table${N}`,cols:25,rows:12,y:0,x:1,index:N}),this.cdr.detectChanges()):(null===z[N]&&(H.push(oe.device[N]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${H.join(", ")} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",O));const G=z.map(N=>N.map(L=>{const[Y,ee]=2===L.length?L:[null,null];return{firstBatchData:Y&&Y.response?.data?Y.response.data:[],secondBatchData:ee&&ee.response?.data&&ee.response.data.length>0?ee.response.data:[],device:Y?Y.device:null,timestamp:Y?Y.timestamp:null,batchType:{firstBatch:Y?Y.batchType:null,secondBatch:ee?ee.batchType:null}}}));console.log("combinedData :>> ",G);const D=G.flat();console.log("allhistoricalData",D);const U={};D.forEach(N=>{let L=N.firstBatchData[0].PK;L=L.split("#")[1];const ee=L,te=Object.keys(N.firstBatchData[0].MM);U[ee]||(U[ee]=new Set),te.forEach(pe=>{U[ee].add(pe)})}),console.log("propertyNamesByDevice",U);const R={},T=Object.keys(U).sort((N,L)=>U[L].size-U[N].size);console.log("PROPERTY NAME DEVICE:",U),console.log("SD",T),Object.keys(U).forEach((N,L)=>{const ee=this.All_Devices_Configuration.find(ge=>ge.PK===N)?.reading_device_type??"default",te=Array.from(U[N]).sort((ge,Ce)=>parseInt(ge.replace(/\D/g,""),10)-parseInt(Ce.replace(/\D/g,""),10)),pe=te.map(ge=>{const Ce=parseInt(ge.slice(1))-1;return x[ee]?.[Ce]?.schedule_parameter_label??ge});pe.unshift("Device label","Date & time","Calculated Time","Time Generated"),pe.push("Generate"),pe.push("extraData"),te.unshift("Device label","Date & time","Calculated Time","Time Generated"),te.push("Generate"),te.push("extraData"),console.log("Device:",N,"findRDT:",ee,"Properties:",te);const we={columns:pe,data:D.map(ge=>{let Ce=ge.firstBatchData[0].PK;Ce=Ce.split("#")[1];const je=this.All_Devices_Configuration.find(me=>me.mn===Ce);ge.firstBatchData[0]&&N===Ce&&(ge.firstBatchData[0].metaData={},te.forEach(me=>{const l=parseInt(me.slice(1))-1;["Device label","Date & time","Calculated Time","Time Generated"].includes(me)?"Device label"===me?ge.firstBatchData[0].metaData["Device label"]=je?.mn_label||Ce:"Date & time"===me?ge.firstBatchData[0].metaData["Date & time"]=new Date(1e3*(ge.firstBatchData[0].SK-19800)).toDateString()+" "+new Date(1e3*(ge.firstBatchData[0].SK-19800)).toLocaleTimeString():"Calculated Time"===me?ge.firstBatchData[0].metaData["Calculated Time"]=this.convertToReadableFormat(ge.firstBatchData[0].time_calculated):"Time Generated"===me&&(ge.firstBatchData[0].metaData["Time Generated"]=this.convertToReadableFormat1(ge.firstBatchData[0].time_generated)):void 0!==x[ee]?.[l]?.schedule_parameter_label?ge.firstBatchData[0].metaData[x[ee][l].schedule_parameter_label]=ge.firstBatchData[0].MM[me]??" ":ge.firstBatchData[0].metaData[me]=ge.firstBatchData[0].MM[me]??" "}));let Ue=ge.secondBatchData[0].PK;Ue=Ue.split("#")[1];const ke=this.All_Devices_Configuration.find(me=>me.mn===Ue);if(ge.secondBatchData[0]&&N===Ue){const me={};return te.forEach(l=>{const Me=parseInt(l.slice(1))-1;["Device label","Date & time","Calculated Time","Time Generated","Generate","extraData"].includes(l)?"Device label"===l?me["Device label"]=ke?.mn_label||Ue:"Date & time"===l?me["Date & time"]=new Date(1e3*(ge.secondBatchData[0].SK-19800)).toDateString()+" "+new Date(1e3*(ge.secondBatchData[0].SK-19800)).toLocaleTimeString():"Calculated Time"===l?me["Calculated Time"]=this.convertToReadableFormat(ge.secondBatchData[0].time_calculated):"Time Generated"===l?me["Time Generated"]=this.convertToReadableFormat1(ge.secondBatchData[0].time_generated):"Generate"===l?me.Generate='<button class = "btn fw-bold btn-primary btn-sm px-4" data-bs-toggle="modal" title="more info" data-bs-target="#dynamictemplatePDF" ><i class="bi bi-arrow-repeat"></i>Generate</button>':"extraData"===l&&(me.extraData=ge.firstBatchData):void 0!==x[ee]?.[Me]?.schedule_parameter_label?me[x[ee][Me].schedule_parameter_label]=ge.secondBatchData[0].MM[l]??" ":me[l]=ge.secondBatchData[0].MM[l]??" "}),me}return null}).filter(ge=>null!==ge)};R[N]=we,console.log("Data Tables:",R);const Te=R[N].columns.filter(ge=>O[L].some(Ce=>Ce.includes(ge.trim())));Te.unshift("Device label","Date & time","Calculated Time","Time Generated"),Te.push("Generate"),R[N].columns=Te,R[N].data=this.sanitizeData(R[N].data),this.getDataFromTM(R[N],L,"schedule"),this.tableData.push(R[N]),console.log("Final Table Structure:",this.tableData)}),console.log("Data Tables:",R)}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(z=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",z)})}handleParameterDataForBilling(oe,ue){this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[];const re=oe.reportsType;if(this.loadDynamicWorkspace(oe.templateID),this.selectDevicforBillInvoice=oe.device[0],ue&&null!=ue.table)ue.table.forEach(z=>{this.table.push(z)});else for(let z=0;z<oe.device.length;z++)this.table.push({id:`table${z+1}`,cols:25,rows:12,y:0,x:1,index:z});let O=oe.paramFilter;console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let x={};for(let z=0;z<m.length;z++){const H=m[z]?.parameters,G=m[z]?.allDetails?.PK;H&&G&&(x[G]=H)}console.log("Extracted Parameters",x),console.log(" After mulActualData",m),this.reportApi.batchWiseResponses(oe).then(z=>{if(1===z.length){if(1===z.length&&null===z[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"}),this.table=[],void this.cdr.detectChanges();for(let N=0;N<z.length;N++)null===z[N]?(this.table=[],this.cdr.detectChanges(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${oe.device[N]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",O),console.log("continue the process"));const G=z[0].map(N=>{const[L,Y]=2===N.length?N:[null,null];return{firstBatchData:L&&L.response?.data?L.response.data:[],secondBatchData:Y&&Y.response?.data&&Y.response.data.length>0?Y.response.data:[],device:L?L.device:null,timestamp:L?L.timestamp:null,batchType:{firstBatch:L?L.batchType:null,secondBatch:Y?Y.batchType:null}}})||[];console.log("historicalData",G);const D=Array.from(new Set(G.flatMap(N=>[...(N.firstBatchData||[]).flatMap(L=>L.MM?Object.keys(L.MM):[]),...(N.secondBatchData||[]).flatMap(L=>L.MM?Object.keys(L.MM):[])])));console.log("Property Names",D);const U=D.map(N=>{const L=parseInt(N.slice(1))-1;return S[L]&&void 0!==S[L].parameterLabel?S[L].parameterLabel:N});D.unshift("Device label","Date & time"),D.push("Generate"),D.push("extraData"),U.unshift("Device label","Date & time"),D.push("Generate"),U.push("extraData"),console.log("TABLE NAMES",U);const R={columns:U,data:G.map(N=>{const L={};return N.firstBatchData[0].metaData={},N.firstBatchData.forEach(Y=>{D.forEach(ee=>{if("Device label"!==ee&&"Date & time"!==ee){const te=parseInt(ee.slice(1))-1;S[te]&&void 0!==S[te].parameterLabel?N.firstBatchData[0].metaData[S[te].parameterLabel]=Y.MM[ee]??" ":N.firstBatchData[0].metaData[ee]=Y.MM[ee]??" "}})}),N.secondBatchData.forEach(Y=>{D.forEach(ee=>{if("Device label"!==ee&&"Date & time"!==ee&&"Generate"!==ee&&"extraData"!=ee){const te=parseInt(ee.slice(1))-1;S[te]&&void 0!==S[te].parameterLabel?L[S[te].parameterLabel]=Y.MM[ee]??" ":L[ee]=Y.MM[ee]??" "}})}),D.forEach(Y=>{if("Device label"===Y){let ee=N.secondBatchData[0].PK;ee=ee.split("#")[1];const pe=this.All_Devices_Configuration.find(we=>we.mn===ee);L["Device label"]=pe?.mn_label??"Unknown Device"}else"Date & time"===Y?L["Date & time"]=new Date(1e3*(N.secondBatchData[0].SK-19800)).toDateString()+" "+new Date(1e3*(N.secondBatchData[0].SK-19800)).toLocaleTimeString():"extraData"!==Y?L.extraData=N.firstBatchData:"Generate"!==Y&&(L.Generate='<button class = "btn fw-bold btn-primary btn-sm px-4" data-bs-toggle="modal" title="more info" data-bs-target="#dynamictemplatePDF" ><i class="bi bi-arrow-repeat"></i>Generate</button>')}),L})};console.log("Angular DataTable Format:",R),console.log("Angular DataTable Format:",R);const T=R.columns.filter(N=>{const L=N;return O.some(Y=>Y.includes(L))});T.unshift("Device label","Date & time"),T.push("Generate"),R.columns=T,R.data=this.sanitizeData(R.data),this.tableData.push(R),this.getDataFromTM(R,0,"schedule"),this.spinner.hide()}else if(z.length>1){let H=[];this.table=[];for(let N=0;N<z.length;N++)null!==z[N]?(ue&&null!=ue.table?(this.table=[],ue.table.forEach(L=>{this.table.push(L||{id:`table${N}`,cols:25,rows:12,y:0,x:1,index:N})})):this.table.push({id:`table${N}`,cols:25,rows:12,y:0,x:1,index:N}),this.cdr.detectChanges()):(null===z[N]&&(H.push(oe.device[N]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${H.join(", ")} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",O));const G=z.map(N=>N.map(L=>{const[Y,ee]=2===L.length?L:[null,null];return{firstBatchData:Y&&Y.response?.data?Y.response.data:[],secondBatchData:ee&&ee.response?.data&&ee.response.data.length>0?ee.response.data:[],device:Y?Y.device:null,timestamp:Y?Y.timestamp:null,batchType:{firstBatch:Y?Y.batchType:null,secondBatch:ee?ee.batchType:null}}}));console.log("combinedData :>> ",G);const D=G.flat();console.log("allhistoricalData",D);const U={};D.forEach(N=>{let L=N.firstBatchData[0].PK;L=L.split("#")[1];const ee=L,te=Object.keys(N.firstBatchData[0].MM);U[ee]||(U[ee]=new Set),te.forEach(pe=>{U[ee].add(pe)})}),console.log("propertyNamesByDevice",U);const R={},T=Object.keys(U).sort((N,L)=>U[L].size-U[N].size);console.log("PROPERTY NAME DEVICE:",U),console.log("SD",T),Object.keys(U).forEach((N,L)=>{const ee=this.All_Devices_Configuration.find(ge=>ge.PK===N)?.reading_device_type??"default",te=Array.from(U[N]).sort((ge,Ce)=>parseInt(ge.replace(/\D/g,""),10)-parseInt(Ce.replace(/\D/g,""),10)),pe=te.map(ge=>{const Ce=parseInt(ge.slice(1))-1;return x[ee]?.[Ce]?.parameterLabel??ge});pe.unshift("Device label","Date & time"),pe.push("Generate"),pe.push("extraData"),te.unshift("Device label","Date & time"),te.push("Generate"),te.push("extraData"),console.log("Device:",N,"findRDT:",ee,"Properties:",te);const we={columns:pe,data:D.map(ge=>{let Ce=ge.firstBatchData[0].PK;Ce=Ce.split("#")[1];const je=this.All_Devices_Configuration.find(me=>me.mn===Ce);ge.firstBatchData[0]&&N===Ce&&(ge.firstBatchData[0].metaData={},te.forEach(me=>{const l=parseInt(me.slice(1))-1;["Device label","Date & time"].includes(me)?"Device label"===me?ge.firstBatchData[0].metaData["Device label"]=je?.mn_label||Ce:"Date & time"===me&&(ge.firstBatchData[0].metaData["Date & time"]=new Date(1e3*(ge.firstBatchData[0].SK-19800)).toDateString()+" "+new Date(1e3*(ge.firstBatchData[0].SK-19800)).toLocaleTimeString()):void 0!==x[ee]?.[l]?.parameterLabel?ge.firstBatchData[0].metaData[x[ee][l].parameterLabel]=ge.firstBatchData[0].MM[me]??" ":ge.firstBatchData[0].metaData[me]=ge.firstBatchData[0].MM[me]??" "}));let Ue=ge.secondBatchData[0].PK;Ue=Ue.split("#")[1];const ke=this.All_Devices_Configuration.find(me=>me.mn===Ue);if(ge.secondBatchData[0]&&N===Ue){const me={};return te.forEach(l=>{const Me=parseInt(l.slice(1))-1;["Device label","Date & time","Generate","extraData"].includes(l)?"Device label"===l?me["Device label"]=ke?.mn_label||Ue:"Date & time"===l?me["Date & time"]=new Date(1e3*(ge.secondBatchData[0].SK-19800)).toDateString()+" "+new Date(1e3*(ge.secondBatchData[0].SK-19800)).toLocaleTimeString():"Generate"===l?me.Generate='<button class = "btn fw-bold btn-primary btn-sm px-4" data-bs-toggle="modal" title="more info" data-bs-target="#dynamictemplatePDF" ><i class="bi bi-arrow-repeat"></i>Generate</button>':"extraData"===l&&(me.extraData=ge.firstBatchData):void 0!==x[ee]?.[Me]?.parameterLabel?me[x[ee][Me].parameterLabel]=ge.secondBatchData[0].MM[l]??" ":me[l]=ge.secondBatchData[0].MM[l]??" "}),me}return null}).filter(ge=>null!==ge)};R[N]=we,console.log("Data Tables:",R);const Te=R[N].columns.filter(ge=>O[L].some(Ce=>Ce.includes(ge.trim())));Te.unshift("Device label","Date & time"),Te.push("Generate"),R[N].columns=Te,R[N].data=this.sanitizeData(R[N].data),this.getDataFromTM(R[N],L,"schedule"),this.tableData.push(R[N]),console.log("Final Table Structure:",this.tableData)}),console.log("Data Tables:",R)}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(z=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",z)})}convertToReadableFormat(oe){const[ue,re]=oe.split(" to ");return`${moment__WEBPACK_IMPORTED_MODULE_10___default()(ue).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")} to ${moment__WEBPACK_IMPORTED_MODULE_10___default()(re).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")}`}convertToReadableFormat1(oe){return moment__WEBPACK_IMPORTED_MODULE_10___default()(oe).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")}itemChange(oe,ue){console.info("itemChanged",oe,ue),this.updateItem(oe)}itemResize(oe,ue){console.info("itemResized",oe,ue),this.updateItem(oe)}updateItem(oe){let ue=this.form.findIndex(re=>re.id===oe.id);return console.log("ckkk",ue),-1!==ue?(this.form[ue]=oe,void console.log("Form configuration changed:",this.form)):(ue=this.charts.findIndex(re=>re.id===oe.id),-1!==ue?(this.charts[ue]=oe,void console.log("Chart configuration changed:",this.charts)):(ue=this.table.findIndex(re=>re.id===oe.id),void(-1!==ue&&(this.table[ue]=oe,console.log("Table configuration changed:",this.table)))))}handleFormConfigChange(oe){console.log("Form configuration changed:",oe),this.form=oe}handleChartConfigChange(oe){console.log("Chart configuration changed:",oe),this.charts=oe}handleTableConfigChange(oe){console.log("Table configuration changed:",oe),this.table=oe}sanitizeKey(oe){let ue=oe.replace(/\./g,"_");return ue=ue.replace(/\[/g,"_").replace(/\]/g,""),ue}sanitizeData(oe){return oe.map(ue=>{const re={};return Object.keys(ue).forEach(O=>{const S=this.sanitizeKey(O);re[S]=ue[O]}),re})}handleParameterData(oe,ue){console.log("data>>>",oe,"positions>>",ue),this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[];const re=oe.reportsType;if(ue&&null!=ue.charts[0]?(this.charts.push(ue.charts[0]),this.cdr.detectChanges()):(this.charts.push({id:"chart",cols:25,rows:10,y:0,x:1}),this.cdr.detectChanges()),ue&&null!=ue.table)ue.table.forEach(U=>{this.table.push(U)});else for(let U=0;U<oe.device.length;U++)this.table.push({id:`table${U+1}`,cols:25,rows:12,y:0,x:0,index:U});let O=oe.paramFilter;const S={};oe.device.forEach((U,R)=>{S[U]=oe.paramFilter[R]||[]}),console.log("filteredData :",O),console.log("Time Machine Data",oe);let m=JSON.parse(oe.rdt);m=m[0].parameters,console.log("Parameters",m);let X=JSON.parse(oe.rdt);console.log("Before mulActualData",X);let x=oe.chart_type,z={};const H=oe.filter_value,G=oe.relationalOperators;for(let U=0;U<X.length;U++){const R=X[U]?.parameters,T=X[U]?.allDetails?.PK;R&&T&&(z[T]=R)}console.log("Extracted Parameters:",z),console.log("Extracted Parameters",z),console.log("After mulActualData",X);const D=performance.now();this.reportApi.getReportsData(oe).then(U=>{const R=performance.now();if(console.log(`API call took ${R-D} milliseconds`),console.log("response chk",U),1===U.length&&null===U[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"}),this.table=[],this.charts=[],void this.cdr.detectChanges();if(1===U.length){for(let Ce=0;Ce<U.length;Ce++)null===U[Ce]?(this.table=[],this.charts=[],this.cdr.detectChanges()):console.log("continue the process");const T=U[0]?.data||[];console.log("historicalData",T);const N=performance.now(),L=Array.from(new Set(T.flatMap(Ce=>Ce.packet_info&&Ce.packet_info.MM?Object.keys(Ce.packet_info.MM):[]))).sort((Ce,Oe)=>parseInt(Ce.replace(/\D/g,""),10)-parseInt(Oe.replace(/\D/g,""),10));console.log("propertyNames",L);const Y={};T.forEach(Ce=>{const Oe=1e3*Ce.SK;L.forEach(je=>{Y[je]||(Y[je]=[]),Ce.packet_info&&Ce.packet_info.MM&&null!=Ce.packet_info.MM[je]?Y[je].push([Oe,Ce.packet_info.MM[je]]):console.warn(`packet.packet_info.MM or property ${je} is not defined`)})});const ee=performance.now();console.log(`Grouping data took ${ee-N} milliseconds`),console.log("groupedData",Y);const te=Object.entries(Y).map(([Ce,Oe])=>{const je=parseInt(Ce.slice(1))-1,Ue=m[je];return{name:Ue?Ue.parameterLabel:Ce,data:Oe.filter(me=>"string"!=typeof me[1])}});console.log("Formatted Highcharts Series:",te);let pe=te.filter(Ce=>{const Oe=Ce.name;return O.some(je=>je.includes(Oe))});if(""!==H&&null!=H){const Ce=G,Oe=H.trim().toLowerCase(),je=H.includes(",")?H.split(",").map(Ue=>Ue.trim().toLowerCase()):[Oe];pe.data=pe.filter(Ue=>(Ue.data=Ue.data.filter(Le=>{const ke=String(Le[1]).toLowerCase();switch(Ce){case"!=":return!je.some(me=>me===ke);case"==":return je.includes(ke);case">":return je.some(me=>{const l=Number(ke),Me=Number(me);return!isNaN(l)&&!isNaN(Me)&&l>Me});case">=":return je.some(me=>{const l=Number(ke),Me=Number(me);return!isNaN(l)&&!isNaN(Me)&&l>=Me});case"<":return je.some(me=>{const l=Number(ke),Me=Number(me);return!isNaN(l)&&!isNaN(Me)&&l<Me});case"<=":return je.some(me=>{const l=Number(ke),Me=Number(me);return!isNaN(l)&&!isNaN(Me)&&l<=Me});case"Contains":return je.some(me=>ke.includes(me));default:return!0}}),Ue.data.length>0)),console.log("Filtered Chart Data:",pe.data)}console.log(pe.data),console.log(O),console.log("highchartsSeries paramFilter",pe),this.reportChartComponent.createHighchartsLineChart(pe,x,this.All_Devices_Configuration);const we=L.map(Ce=>{const Oe=parseInt(Ce.slice(1))-1;return m[Oe]&&void 0!==m[Oe].parameterLabel?m[Oe].parameterLabel:Ce});L.unshift("Device label","Date & time"),we.unshift("Device label","Date & time"),console.log("TABLE NAMES",we);const Te={columns:we,data:T.map(Ce=>{const Oe={};return L.forEach(je=>{if("Device label"!==je&&"Date & time"!==je){const Ue=parseInt(je.slice(1))-1;m[Ue]&&void 0!==m[Ue].parameterLabel?Ce.packet_info&&Ce.packet_info.MM&&je in Ce.packet_info.MM?Oe[m[Ue].parameterLabel]=Ce.packet_info.MM[je]:(Oe[m[Ue].parameterLabel]=" ",console.warn(`Missing data for property: ${je}`)):Ce.packet_info&&Ce.packet_info.MM&&je in Ce.packet_info.MM?Oe[je]=Ce.packet_info.MM[je]??" ":(Oe[je]=" ",console.warn(`Missing data for property: ${je}`))}else if("Device label"===je){const Ue=this.All_Devices_Configuration.find(Le=>Le.mn===Ce.packet_info?.MN);Oe["Device label"]=Ue?.mn_label??"Unknown Device"}else"Date & time"===je?Oe["Date & time"]=new Date(1e3*(Ce.SK-19800)).toDateString()+" "+new Date(1e3*(Ce.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),Oe})};if(console.log("angularDataTable:>>",Te),""!==H&&null!=H){const Ce=G,Oe=H.trim().toLowerCase(),je=H.includes(",")?H.split(",").map(Ue=>Ue.trim().toLowerCase()):[Oe];Te.data=Te.data.filter(Ue=>"=="===Ce||"Contains"===Ce?Object.keys(Ue).some(Le=>{if("Date & time"===Le||"Device label"===Le)return!1;const ke=String(Ue[Le]).toLowerCase();return"=="===Ce?je.includes(ke):"Contains"===Ce?je.some(me=>ke.includes(me)):void 0}):Object.keys(Ue).every(ke=>{if("Date & time"===ke||"Device label"===ke)return!0;const me=String(Ue[ke]).toLowerCase();switch(Ce){case"!=":return!je.some(l=>l===me);case">":return je.some(l=>{const Me=Number(me),Ze=Number(l);return!isNaN(Me)&&!isNaN(Ze)&&Me>Ze});case">=":return je.some(l=>{const Me=Number(me),Ze=Number(l);return!isNaN(Me)&&!isNaN(Ze)&&Me>=Ze});case"<":return je.some(l=>{const Me=Number(me),Ze=Number(l);return!isNaN(Me)&&!isNaN(Ze)&&Me<Ze});case"<=":return je.some(l=>{const Me=Number(me),Ze=Number(l);return!isNaN(Me)&&!isNaN(Ze)&&Me<=Ze});default:return!0}})),console.log("Filtered Data:",Te.data)}console.log("After filtering:",Te.data),console.log("Angular DataTable Format:",Te);const ge=Te.columns.filter(Ce=>{const Oe=Ce;return O.some(je=>je.includes(Oe))});ge.unshift("Device label","Date & time"),Te.columns=ge,Te.data=this.sanitizeData(Te.data),this.tableData.push(Te),console.log("structure check",this.tableData),this.getDataFromTM(Te,0,"parameters")}else if(U.length>1){let T=[];this.table=[];for(let ge=0;ge<U.length;ge++)null!==U[ge]?(ue&&null!=ue.table?(this.table=[],ue.table.forEach(Ce=>{this.table.push(Ce||{id:`table${ge}`,cols:25,rows:12,y:0,x:1,index:ge})})):this.table.push({id:`table${ge}`,cols:25,rows:12,y:0,x:0,index:ge}),this.cdr.detectChanges()):null===U[ge]?(T.push(oe.device[ge]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${T.join(", ")} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"})):console.log("filteredData after removeed",O);const N=U.reduce((ge,Ce)=>ge.concat(Ce?.data||[]),[]);console.log("allhistoricalData",N);const L={};N.forEach(ge=>{const Ce=ge.packet_info.MN;if(ge.packet_info&&ge.packet_info.MM){const Oe=Object.keys(ge.packet_info.MM);L[Ce]||(L[Ce]=new Set),Oe.forEach(je=>{L[Ce].add(je)})}}),console.log("propertyNamesByDevice",L);const Y={};Object.keys(L).sort((ge,Ce)=>L[Ce].size-L[ge].size).forEach(ge=>{const Ce=L[ge];Y[ge]={},Ce.forEach(Oe=>{Y[ge][Oe]=[],N.forEach(je=>{if(je.packet_info&&je.packet_info.MM){const Le=je.packet_info.MM[Oe];"number"==typeof Le&&je.packet_info.MN===ge&&Y[ge][Oe].push({x:1e3*je.SK,y:Le})}})})}),console.log("Matched Data By Device:",Y);const te=Object.entries(Y).map(([ge,Ce],Oe)=>{const je=Object.keys(Ce).sort((ke,me)=>parseInt(ke.replace(/\D/g,""),10)-parseInt(me.replace(/\D/g,""),10)),Ue=this.All_Devices_Configuration.find(ke=>ke.PK===ge).reading_device_type;return je.map(ke=>{const me=parseInt(ke.replace(/\D/g,""),10)-1,Me=z[Ue]?.[me]?.parameterLabel||ke,Ze=(Ce[ke]||[]).filter(ut=>null!=ut?.y&&"string"!=typeof ut.y);return{name:`${ge} : ${Me}`,data:Ze}})}).flat();console.log("all Formatted Highcharts Series:",te),O=O.map(ge=>ge.map(Oe=>Oe.trim()));let pe=te.filter(ge=>{const Ce=ge.name.split(":")[1].trim();return O.some(Oe=>Oe.includes(Ce))});if(""!==H&&null!=H){const ge=G,Ce=H.trim().toLowerCase(),Oe=H.includes(",")?H.split(",").map(je=>je.trim().toLowerCase()):[Ce];pe.data=pe.filter(je=>(je.data=je.data.filter(Ue=>{const Le=String(Ue.y).toLowerCase();switch(ge){case"!=":return!Oe.some(ke=>ke===Le);case"==":return Oe.includes(Le);case">":return Oe.some(ke=>{const me=Number(Le),l=Number(ke);return!isNaN(me)&&!isNaN(l)&&me>l});case">=":return Oe.some(ke=>{const me=Number(Le),l=Number(ke);return!isNaN(me)&&!isNaN(l)&&me>=l});case"<":return Oe.some(ke=>{const me=Number(Le),l=Number(ke);return!isNaN(me)&&!isNaN(l)&&me<l});case"<=":return Oe.some(ke=>{const me=Number(Le),l=Number(ke);return!isNaN(me)&&!isNaN(l)&&me<=l});case"Contains":return Oe.some(ke=>Le.includes(ke));default:return!0}}),je.data.length>0)),console.log("Filtered Chart Data:",pe.data)}console.log("param Filter",pe),this.reportChartComponent.createHighchartsLineChart(pe,x,this.All_Devices_Configuration);const we={};Object.keys(L).sort((ge,Ce)=>L[Ce].size-L[ge].size),Object.keys(L).forEach((ge,Ce)=>{const Oe=Array.from(L[ge]).sort((l,Me)=>parseInt(l.replace(/\D/g,""),10)-parseInt(Me.replace(/\D/g,""),10)),je=this.All_Devices_Configuration.find(l=>l.PK===ge)?.reading_device_type,Ue=Oe.map(l=>{const Me=parseInt(l.slice(1))-1;return void 0!==z[je]?.[Me]?.parameterLabel?z[je][Me].parameterLabel:l});Ue.unshift("Device label","Date & time"),Oe.unshift("Device label","Date & time");const Le={columns:Ue,data:N.map(l=>{if(l&&ge===l.packet_info.MN){const Me={};return Oe.forEach(Ze=>{const ut=parseInt(Ze.slice(1))-1;if("Device label"===Ze){const $e=this.All_Devices_Configuration.find(Ct=>Ct.mn===l.packet_info?.MN);Me["Device label"]=$e?.mn_label??"Unknown Device"}else"Date & time"===Ze?Me["Date & time"]=new Date(1e3*(l.SK-19800)).toDateString()+" "+new Date(1e3*(l.SK-19800)).toLocaleTimeString():void 0!==z[je]?.[ut]?.parameterLabel?Me[z[je][ut].parameterLabel]=l?.packet_info?.MM?.[Ze]??" ":Me[Ze]=l?.packet_info?.MM?.[Ze]??" "}),Me}return null}).filter(l=>null!==l)};H&&""!==H.trim()&&(Le.data=this.applyDataFilter(Le.data,H,G)),we[ge]=Le,console.log("Data Tables:",we);const ke=S[ge]||[],me=we[ge].columns.filter(l=>ke.some(Me=>Me.includes(l.trim())));me.unshift("Device label","Date & time"),we[ge].columns=me,we[ge].data=this.sanitizeData(we[ge].data),this.getDataFromTM(we[ge],Ce,"parameters"),this.tableData.push(we[ge])}),console.log("structure check",this.tableData),console.log("Data Tables:",we)}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(U=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",U)})}applyDataFilter(oe,ue,re){const O=ue.trim().toLowerCase(),S=ue.includes(",")?ue.split(",").map(m=>m.trim().toLowerCase()):[O];return oe.filter(m=>"=="===re||"Contains"===re?Object.keys(m).some(X=>{if("Date & time"===X||"Device label"===X)return!1;const x=String(m[X]).toLowerCase();return"=="===re?S.includes(x):S.some(z=>x.includes(z))}):Object.keys(m).every(X=>{if("Date & time"===X||"Device label"===X)return!0;const x=String(m[X]).toLowerCase();return S.some(z=>{const H=Number(x),G=Number(z);return!isNaN(H)&&!isNaN(G)&&this.evaluateFilter(re,H,G)})}))}evaluateFilter(oe,ue,re){switch(oe){case"!=":return ue!==re;case">":return ue>re;case">=":return ue>=re;case"<":return ue<re;case"<=":return ue<=re;default:return!0}}handleAlertsData(oe,ue){console.log("data>>>",oe,"positions>>",ue),this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[],ue&&null!=ue.table?ue.table.forEach(O=>{this.table.push(O)}):this.table.push({id:"table1",cols:25,rows:12,y:0,x:0,index:1});const re=performance.now();this.reportApi.getReportsData(oe).then(O=>{const S=performance.now();if(console.log(`API call took ${S-re} milliseconds`),console.log("response chk",O),1===O.length&&null===O[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),this.table=[],this.charts=[],void this.cdr.detectChanges();if(O.length>0){const X=O.reduce((N,L)=>N.concat(L?.data||[]),[]).reduce((N,L)=>N.concat(L),[]);console.log("combineAgain",X);const x=performance.now(),z=this.extractTableData(X);console.log("All_ModifedData",z);const H=performance.now();console.log(`Grouping data took ${H-x} milliseconds`);const D={columns:this.generateColumnsForAlerts(z[0]),data:z},U=z.map(N=>{const L=N.Satus.match(/>(.*?)</),Y=L?L[1]:"";return{...N,...N.Extra_Data,Satus:Y}});U.forEach(N=>{delete N.Edit,delete N.View,delete N.Extra_Data,delete N.Satus});const T={columns:["Alert_ID","Created_Time",...Object.keys(U[0]||{}).filter(N=>"Alert_ID"!==N&&"Created_Time"!==N)],data:U};this.tableData.push(T),this.getDataFromTMAlerts(D,0,"Alerts")}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(O=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",O)})}handleAuditTrailData(oe,ue){console.log("data>>>",oe,"positions>>",ue),this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[],ue&&null!=ue.charts[0]?(this.charts.push(ue.charts[0]),this.cdr.detectChanges()):(this.charts.push({id:"chart",cols:25,rows:10,y:0,x:1}),this.cdr.detectChanges()),ue&&null!=ue.table?ue.table.forEach(O=>{this.table.push(O)}):this.table.push({id:"table1",cols:25,rows:12,y:0,x:1,index:1});const re=performance.now();this.reportApi.getAuditData(oe).then(O=>{const S=performance.now();if(console.log(`API call took ${S-re} milliseconds`),console.log("response chk",O),1===O.length&&null===O[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),this.table=[],this.charts=[],void this.cdr.detectChanges();if(O.length>0){const m=O.reduce((U,R)=>U.concat(R||[]),[]);console.log("historicalData",m);const X=performance.now(),x=this.extractAuditTrailTableData(m);console.log("All_ModifedData",x);const z=x.map(U=>({x:new Date(U.Date).getTime()/1e3,name:U.Action,label:U.Module,description:`\n                    <strong>Action:</strong> ${U.Action}<br>\n                    <strong>Module:</strong> ${U.Module}<br>\n                    <strong>Description:</strong> ${U.Description}<br>\n                    <strong>User:</strong> ${U.User_Name} (${U.User_ID})<br>\n                    <strong>Client:</strong> ${U.Client}<br>\n                    <strong>Module Version:</strong> ${U.Module_Version}<br>\n                    <strong>Web Version:</strong> ${U.Web_Version}<br>\n                    <strong>URL:</strong> ${U.URL}<br>\n                    <strong>Platform:</strong> ${U.Platform}<br>\n                    <strong>App Version:</strong> ${U.App_Version}<br>\n                    <strong>App Name:</strong> ${U.App_Name}\n                `}));this.reportChartComponent.createHighchartsLineChart(z,"timeline",this.All_Devices_Configuration);const H=performance.now();console.log(`Grouping data took ${H-X} milliseconds`);const D={columns:this.generateColumnsForAuditTrail(x[0]),data:x};if(x[0]){const U={columns:Object.keys(x[0]),data:x};this.tableData.push(U)}this.getDataFromTM(D,0,"Alerts")}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(O=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",O)})}extractTableData(oe){return oe.map(ue=>({Alert_ID:ue.alert_info.alertID,Gateway_ID:ue.record_body?ue.record_body.UI:" ",Device_Label:ue.record_body.MN,GeneratedTime:new Date(1e3*(ue.SK-19800)).toDateString()+" "+new Date(1e3*(ue.SK-19800)).toLocaleTimeString(),Severity:ue.alert_info?ue.alert_info.severity:" ",Satus:"Active"==ue.stat?`<button class="btn btn-sm btn-danger fw-bolder ms-2 fs-8 py-1 px-3" >${ue.stat}</button>`:`<button class="btn btn-sm btn-success fw-bolder ms-2 fs-8 py-1 px-3" >${ue.stat}</button>`,Created_Time:new Date(ue.createdTime).toDateString()+" "+new Date(ue.createdTime).toLocaleTimeString(),Updated_Time:new Date(ue.updatedTime).toDateString()+" "+new Date(ue.updatedTime).toLocaleTimeString(),Reason:ue.alert_info.reason,Duration:this.calculateDuration(ue.createdTime,ue.updatedTime),Alert_text:this.getAlertText(ue),Alert_Parameter:ue.alert_info.parameterID?ue.alert_info.parameterID:" ",Alert_Value:ue.paramValue,View:'<button class = "btn fw-bold btn-primary btn-sm px-4" data-bs-toggle="modal" title="more info" data-bs-target="#alert_info_tm" ><i class="bi bi-eye-fill"></i></button>',Edit:'<button class = "btn fw-bold btn-success btn-sm px-4" ><i class="bi bi-pencil-square"></i></button>',Extra_Data:{Reason:ue.alert_info.reason,Duration:this.calculateDuration(ue.createdTime,ue.updatedTime),Binding_parameter:ue.alert_info.binding_parameter,Created_Time:new Date(ue.createdTime).toDateString()+" "+new Date(ue.createdTime).toLocaleTimeString(),Updated_Time:new Date(ue.updatedTime).toDateString()+" "+new Date(ue.updatedTime).toLocaleTimeString(),Alert_ID:ue.alert_info.alertID,status:ue.stat}}))}extractAuditTrailTableData(oe){return oe.sort((ue,re)=>new Date(ue.SK).getTime()-new Date(re.SK).getTime()).map(ue=>({Date:ue.SK?new Date(ue.SK).toDateString()+" "+new Date(ue.SK).toLocaleTimeString():" ",Module:ue.module?ue.module:" ",Action:ue.action?ue.action:" ",Description:ue.description?ue.description:" ",User_Name:ue.username?ue.username:" ",User_ID:ue.user_id?ue.user_id:" ",Client:ue.client?ue.client:" ",Module_Version:ue.module_version?ue.module_version:" ",Web_Version:ue.web_version?ue.web_version:" ",URL:ue.url?ue.url:" ",Language:ue.language?ue.language:" ",Platform:ue.platform?ue.platform:" ",Screen_Width:ue.screenWidth?ue.screenWidth:" ",ScreenHeight:ue.screenHeight?ue.screenHeight:" ",Region:ue.region?ue.region:" ",IP:ue.ip?ue.ip:" ",Location:ue.loc?ue.loc:" ",Postal:ue.postal?ue.postal:" ",Hostname:ue.hostname?ue.hostname:" ",Timezone:ue.timezone?ue.timezone:" ",Org:ue.org?ue.org:" ",App_Version:ue.appVersion?ue.appVersion:" ",App_Name:ue.module_version?ue.appName:" "}))}generateColumnsForAlerts(oe){const ue=[];for(const re in oe)if(oe.hasOwnProperty(re)&&"View"!==re&&"Edit"!==re&&"Extra_Data"!==re)if("object"==typeof oe[re]&&null!==oe[re])for(const O in oe[re])oe[re].hasOwnProperty(O)&&ue.push({title:this.formatTitle(O),data:`${re}.${O}`});else ue.push({title:this.formatTitle(re),data:re});return ue.push({title:"View",data:"View"}),ue.push({title:"Edit",data:"Edit"}),ue}generateColumnsForAuditTrail(oe){const ue=[];for(const re in oe)if(oe.hasOwnProperty(re))if("object"==typeof oe[re]&&null!==oe[re])for(const O in oe[re])oe[re].hasOwnProperty(O)&&ue.push({title:this.formatTitle(O),data:`${re}.${O}`});else ue.push({title:this.formatTitle(re),data:re});return ue}formatTitle(oe){return oe.replace(/_/g," ")}getAlertText(oe){return"Active"===oe.stat?oe.alert_info?oe.alert_info.alert_text_active:" ":"Closed"===oe.stat?oe.alert_info?oe.alert_info.alert_text_closed:" ":"Snoozed"===oe.stat&&oe.alert_info?oe.alert_info.alert_text_snoozed:" "}calculateDuration(oe,ue){const re=Math.abs(new Date(ue).getTime()-new Date(oe).getTime());return`${Math.floor(re/36e5)} hours, ${Math.floor(re%36e5/6e4)} minutes, ${Math.floor(re%6e4/1e3)} seconds`}getReason(oe){return"Parameter"===oe.alert_info.alert_variabletype?oe.alert_info.parameterID1+" "+oe.alert_info.operator+" "+oe.alert_info.parameterID1:"Constant"===oe.alert_info.alert_variabletype?oe.alert_info.parameterID1+" "+oe.alert_info.operator+" "+oe.paramValue:"Equation"===oe.alert_info.alert_variabletype?oe.alert_info.equTextarea:" "}handleShedhuleData(oe,ue){this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[];const re=oe.reportsType;if(this.charts.push(ue&&null!=ue.charts[0]?ue.charts[0]:{id:"chart",cols:25,rows:10,y:0,x:1}),ue&&null!=ue.table)ue.table.forEach(H=>{this.table.push(H)});else for(let H=0;H<oe.device.length;H++)this.table.push({id:`table${H+1}`,cols:25,rows:12,y:0,x:1,index:H});let O=oe.paramFilter;const S={};oe.device.forEach((H,G)=>{S[H]=oe.paramFilter[G]||[]}),console.log("Time Machine Data",oe);let m=JSON.parse(oe.rdt);m=m[0].parameters,console.log("Parameters",m);let X=JSON.parse(oe.rdt);console.log("Before mulActualData",X);let x=oe.chart_type,z={};for(let H=0;H<X.length;H++){const G=X[H]?.parameters,D=X[H]?.allDetails?.PK;G&&D&&(z[D]=G)}console.log("Extracted Parameters",z),console.log(" After mulActualData",X),this.reportApi.getReportsData(oe).then(H=>{if(1===H.length){if(1===H.length&&null===H[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"}),this.table=[],this.charts=[],void this.cdr.detectChanges();for(let ee=0;ee<H.length;ee++)null===H[ee]?(this.table=[],this.charts=[],this.cdr.detectChanges(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${oe.device[ee]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",O),console.log("continue the process"));const G=H[0]?.data||[];console.log("historicalData",G);const D=Array.from(new Set(G.flatMap(ee=>Object.keys(ee.MM)))).sort((ee,te)=>parseInt(ee.replace(/\D/g,""),10)-parseInt(te.replace(/\D/g,""),10));console.log("propertyNames",D);const U={};G.forEach(ee=>{const te=1e3*ee.SK;D.forEach(pe=>{U[pe]||(U[pe]=[]),U[pe].push([te,ee.MM[pe]])})}),console.log("groupedData",U);const R=Object.entries(U).map(([ee,te])=>{const pe=parseInt(ee.slice(1))-1,we=m[pe];return{name:we?we.schedule_parameter_label:ee,data:te.filter(Ce=>"string"!=typeof Ce[1])}});console.log("Formatted Highcharts Series:",R),console.log(this.charts);const T=R.filter(ee=>{const te=ee.name;return O.some(pe=>pe.includes(te))});console.log("highchartsSeries paramFilter",T),this.reportChartComponent.createHighchartsLineChart(T,x,this.All_Devices_Configuration);const N=D.map(ee=>{const te=parseInt(ee.slice(1))-1;return m[te]&&void 0!==m[te].schedule_parameter_label?m[te].schedule_parameter_label:ee});D.unshift("Device label","Date & time","Calculated Time","Time Generated"),N.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("TABLE NAMES",N);const L={columns:N,data:G.map(ee=>{const te={};return D.forEach(pe=>{if("Device label"!==pe&&"Date & time"!==pe&&"Calculated Time"!==pe&&"Time Generated"!==pe){const we=parseInt(pe.slice(1))-1;m[we]&&void 0!==m[we].schedule_parameter_label?te[m[we].schedule_parameter_label]=ee.MM[pe]??" ":te[pe]=ee.MM[pe]??" "}else if("Device label"===pe){let we=ee.PK;we=we.split("#")[1];const ge=this.All_Devices_Configuration.find(Ce=>Ce.mn===we);te["Device label"]=ge?.mn_label??"Unknown Device"}else"Date & time"===pe?te["Date & time"]=new Date(1e3*(ee.SK-19800)).toDateString()+" "+new Date(1e3*(ee.SK-19800)).toLocaleTimeString():"Calculated Time"===pe?te["Calculated Time"]=this.convertToReadableFormat(ee.time_calculated):"Time Generated"===pe?te["Time Generated"]=this.convertToReadableFormat1(ee.time_generated):console.log("Invialid column")}),te})};console.log("Angular DataTable Format:",L);const Y=L.columns.filter(ee=>{const te=ee;return O.some(pe=>pe.includes(te))});Y.unshift("Device label","Date & time","Calculated Time","Time Generated"),L.columns=Y,L.data=this.sanitizeData(L.data),this.tableData.push(L),this.getDataFromTM(L,0,"schedule")}else if(H.length>1){let G=[];this.table=[];for(let te=0;te<H.length;te++)null!==H[te]?(ue&&null!=ue.table?(this.table=[],ue.table.forEach(pe=>{this.table.push(pe||{id:`table${te}`,cols:25,rows:12,y:0,x:1,index:te})})):this.table.push({id:`table${te}`,cols:25,rows:12,y:0,x:1,index:te}),this.cdr.detectChanges()):(null===H[te]&&(G.push(oe.device[te]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${G.join(", ")} does not have any data.${this.getDeviceDataWarning(re)}`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",O));const D=H.reduce((te,pe)=>te.concat(pe?.data||[]),[]);console.log("allhistoricalData",D);const U={};D.forEach(te=>{let pe=te.PK;pe=pe.split("#")[1];const Te=pe,ge=Object.keys(te.MM);U[Te]||(U[Te]=new Set),ge.forEach(Ce=>{U[Te].add(Ce)})}),console.log("propertyNamesByDevice",U);const R={};Object.keys(U).sort((te,pe)=>U[pe].size-U[te].size).forEach(te=>{const pe=U[te];R[te]={},pe.forEach(we=>{R[te][we]=[],D.forEach(Te=>{const ge=1e3*Te.SK,Ce=Te.MM[we];let Oe=Te.PK;Oe=Oe.split("#")[1],"number"==typeof Ce&&Oe===te&&R[te][we].push({x:ge,y:Ce})})})}),console.log("Matched Data By Device:",R);const N=Object.entries(R).map(([te,pe],we)=>{const Te=this.All_Devices_Configuration.find(Oe=>Oe.PK===te).reading_device_type;return Object.keys(pe).sort((Oe,je)=>parseInt(Oe.replace(/\D/g,""),10)-parseInt(je.replace(/\D/g,""),10)).map(Oe=>{const je=parseInt(Oe.replace(/\D/g,""),10)-1,Le=z[Te]?.[je]?.schedule_parameter_label||Oe,ke=(pe[Oe]||[]).filter(l=>l?.y&&"string"!=typeof l.y);return{name:`${this.All_Devices_Configuration.find(l=>l.mn===te)?.mn_label||te} : ${Le}`,data:ke}})}).flat();console.log("check this.table",this.table),console.log("all Formatted Highcharts Series:",N),O=O.map(te=>te.map(we=>we.trim()));const L=N.filter(te=>{const pe=te.name.split(":")[1].trim();return O.some(we=>we.includes(pe))});this.reportChartComponent.createHighchartsLineChart(L,x,this.All_Devices_Configuration);const Y={},ee=Object.keys(U).sort((te,pe)=>U[pe].size-U[te].size);console.log("PROPERTY NAME DEVICE:",U),console.log("SD",ee),Object.keys(U).forEach((te,pe)=>{const Te=this.All_Devices_Configuration.find(Le=>Le.PK===te)?.reading_device_type??"default",ge=Array.from(U[te]).sort((Le,ke)=>parseInt(Le.replace(/\D/g,""),10)-parseInt(ke.replace(/\D/g,""),10)),Ce=ge.map(Le=>{const ke=parseInt(Le.slice(1))-1;return z[Te]?.[ke]?.schedule_parameter_label??Le});Ce.unshift("Device label","Date & time","Calculated Time","Time Generated"),ge.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("Device:",te,"findRDT:",Te,"Properties:",ge);const Oe={columns:Ce,data:D.map(Le=>{let ke=Le.PK;ke=ke.split("#")[1];const l=this.All_Devices_Configuration.find(Me=>Me.mn===ke);if(Le&&te===ke){const Me={};return ge.forEach(Ze=>{const ut=parseInt(Ze.slice(1))-1;["Device label","Date & time","Calculated Time","Time Generated"].includes(Ze)?"Device label"===Ze?Me["Device label"]=l?.mn_label||ke:"Date & time"===Ze?Me["Date & time"]=new Date(1e3*(Le.SK-19800)).toDateString()+" "+new Date(1e3*(Le.SK-19800)).toLocaleTimeString():"Calculated Time"===Ze?Me["Calculated Time"]=this.convertToReadableFormat(Le.time_calculated):"Time Generated"===Ze&&(Me["Time Generated"]=this.convertToReadableFormat1(Le.time_generated)):void 0!==z[Te]?.[ut]?.schedule_parameter_label?Me[z[Te][ut].schedule_parameter_label]=Le.MM[Ze]??" ":Me[Ze]=Le.MM[Ze]??" "}),Me}return null}).filter(Le=>null!==Le)};Y[te]=Oe,console.log("Data Tables:",Y);const je=S[te]||[],Ue=Y[te].columns.filter(Le=>je.some(ke=>ke.includes(Le.trim())));Ue.unshift("Device label","Date & time","Calculated Time","Time Generated"),Y[te].columns=Ue,Y[te].data=this.sanitizeData(Y[te].data),this.getDataFromTM(Y[te],pe,"schedule"),this.tableData.push(Y[te]),console.log("Final Table Structure:",this.tableData)}),console.log("Data Tables:",Y)}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(H=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",H)})}getDeviceDataWarning(oe){switch(oe){case"Parameters":return"Please check whether the device is communicating and if it is enabled in the configuration.";case"Hourly consumption":return" Please check if at least one parameter data point is available for both the current hour and the previous hour. Ensure that the schedule type is enabled in the reading device type.";case"Daily consumption":return"Please check if at least one hourly data point is available for both the current day and the previous day. Ensure that the schedule type is enabled in the reading device type.";case"Monthly consumption":return" Please check if at least one daily data point is available for both the current month and the last month. Also, ensure that hourly data is available for these days. Make sure the schedule type is enabled in the reading device type.";default:return'The provided data type is not recognized. Please provide one of the following: "parameter", "hourly", "daily", "monthly".'}}getDeviceLabel(oe){return this.All_Devices_Configuration.find(re=>re.mn===oe).mn_label}handleCustomOnSpot(oe,ue){if(this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[],this.charts.push(ue&&null!=ue.charts[0]?ue.charts[0]:{id:"chart",cols:25,rows:10,y:0,x:1}),ue&&null!=ue.table)ue.table.forEach(z=>{this.table.push(z)});else for(let z=0;z<oe.device.length;z++)this.table.push({id:`table${z+1}`,cols:25,rows:12,y:0,x:1,index:z});let re=oe.paramFilter;const O={};oe.device.forEach((z,H)=>{O[z]=oe.paramFilter[H]||[]}),console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let X=oe.chart_type,x=[];for(let z=0;z<m.length;z++)x.push(m[z].parameters);console.log("Extracted Parameters",x),console.log(" After mulActualData",m),this.reportApi.getReportsData(oe).then(z=>{if(1===z.length){if(1===z.length&&null===z[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),this.table=[],this.charts=[],void this.cdr.detectChanges();for(let Y=0;Y<z.length;Y++)null===z[Y]?(this.table=[],this.charts=[],this.cdr.detectChanges(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${oe.device[Y]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",re),console.log("continue the process"));const H=z?.[0]?.data?.data||[];console.log("historicalData",H);const G=Array.from(new Set(Object.values(H).flatMap(Y=>Object.keys(Y.MM))));console.log("Property Names:",G);const D={};Object.entries(H).forEach(([Y,ee])=>{const te=new Date(Y).getTime();console.log(`Processing packet for date ${Y} with timestamp ${te}:`,ee.MM),G.forEach(pe=>{D[pe]||(D[pe]=[]);const we=ee.MM[pe];console.log(`Adding data point for ${pe}:`,{x:te,y:we}),D[pe].push([te,we])})}),console.log("Grouped Data:",D);const U=Object.entries(D).map(([Y,ee])=>{const te=parseInt(Y.slice(1))-1,pe=S[te];return{name:pe?pe.schedule_parameter_label:Y,data:ee.filter(ge=>"string"!=typeof ge[1])}});console.log("Formatted Highcharts Series:",U),console.log(this.charts);const R=U.filter(Y=>{const ee=Y.name;return re.some(te=>te.includes(ee))});console.log("highchartsSeries paramFilter",R),this.reportChartComponent.createHighchartsLineChart(R,X,this.All_Devices_Configuration);const T=G.map(Y=>{const ee=parseInt(Y.slice(1))-1;return S[ee]&&void 0!==S[ee].schedule_parameter_label?S[ee].schedule_parameter_label:Y});G.unshift("Device label","Date & time","Calculated Time"),T.unshift("Device label","Date & time","Calculated Time"),console.log("TABLE NAMES",T);const N={columns:T,data:Object.entries(H).map(([Y,ee])=>{const te={};return G.forEach(pe=>{if("Device label"!==pe&&"Date & time"!==pe&&"Calculated Time"!==pe){const we=parseInt(pe.slice(1))-1;S[we]&&void 0!==S[we].schedule_parameter_label?te[S[we].schedule_parameter_label]=ee.MM[pe]??" ":te[pe]=ee.MM[pe]??" "}else if("Device label"===pe){const we=this.All_Devices_Configuration.find(Te=>Te.mn===ee.MN);te["Device label"]=we.mn_label}else"Date & time"===pe?te["Date & time"]=ee.DT:"Calculated Time"===pe?te["Calculated Time"]=ee.time_calculated:console.log("Invialid column")}),te})};console.log("Angular DataTable Format:",N);const L=N.columns.filter(Y=>{const ee=Y;return re.some(te=>te.includes(ee))});L.unshift("Device label","Date & time","Calculated Time"),N.columns=L,N.data=this.sanitizeData(N.data).sort((Y,ee)=>new Date(ee["Date & time"]).getTime()-new Date(Y["Date & time"]).getTime()),this.tableData.push(N),this.getDataFromTM(N,0,"schedule")}else if(z.length>1){let H=[];this.table=[];for(let ee=0;ee<z.length;ee++)null!==z[ee]?(ue&&null!=ue.table?(this.table=[],ue.table.forEach(te=>{this.table.push(te||{id:`table${ee}`,cols:25,rows:12,y:0,x:1,index:ee})})):this.table.push({id:`table${ee}`,cols:25,rows:12,y:0,x:1,index:ee}),this.cdr.detectChanges()):(null===z[ee]&&(H.push(oe.device[ee]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${H.join(", ")} does not have any data.`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",re));const G=z.reduce((ee,te)=>ee.concat(te?.data?.data||[]),[]);console.log("allhistoricalData",G);const D={};G.forEach(ee=>{Object.entries(ee).forEach(([te,pe])=>{if(pe&&pe.MM&&pe.MN){const we=pe.MN,Te=Object.keys(pe.MM);D[we]||(D[we]=new Set),Te.forEach(ge=>{D[we].add(ge)})}else console.warn(`Skipping invalid packet for date ${te}:`,pe)})}),console.log("propertyNamesByDevice",D);const U={};Object.keys(D).sort((ee,te)=>D[te].size-D[ee].size).forEach(ee=>{const te=D[ee];U[ee]={},te.forEach(pe=>{U[ee][pe]=[],G.forEach(we=>{Object.values(we).forEach(Te=>{const ge=Te.DT,Ce=Te.MM?.[pe];"number"==typeof Ce&&Te.MN===ee&&U[ee][pe].push({x:ge,y:Ce})})})})}),console.log("Matched Data By Device:",U);const T=Object.entries(U).map(([ee,te],pe)=>Object.entries(te).map(([Te,ge])=>{const Ce=parseInt(Te.slice(1))-1,Oe=x[pe][Ce],je=Oe?Oe.schedule_parameter_label:Te,Ue=ge.filter(Le=>"string"!=typeof Le.y);return{name:`${ee} : ${je}`,data:Ue.map(Le=>[Le.x,Le.y])}})).flat();console.log("check this.table",this.table),console.log("all Formatted Highcharts Series:",T);const N=T.filter(ee=>{const te=ee.name.split(":")[1].trim();return re.some(pe=>pe.includes(te))});this.reportChartComponent.createHighchartsLineChart(N,X,this.All_Devices_Configuration);const L={},Y=Object.keys(D).sort((ee,te)=>D[te].size-D[ee].size);console.log("PROPERTY NAME DEVICE:",D),console.log("SD",Y),Object.keys(D).forEach((ee,te)=>{const pe=Array.from(D[ee]),we=pe.map(Oe=>{const je=parseInt(Oe.slice(1))-1;return x[te][je]&&void 0!==x[te][je].schedule_parameter_label?x[te][je].schedule_parameter_label:Oe});console.log("Check Props",pe),console.log("Check Result"),we.unshift("Device label","Date & time","Calculated Time"),pe.unshift("Device label","Date & time","Calculated Time");const Te={columns:we,data:G.flatMap(Oe=>Object.values(Oe).map(je=>{if(je&&ee===je.MN){const Ue={};return pe.forEach(Le=>{if("Device label"!==Le&&"Date & time"!==Le&&"Calculated Time"!==Le&&"Time Generated"!==Le){const ke=parseInt(Le.slice(1))-1;x[te]?.[ke]&&void 0!==x[te][ke].schedule_parameter_label?Ue[x[te][ke].schedule_parameter_label]=je.MM?.[Le]??" ":Ue[Le]=je.MM?.[Le]??" "}else if("Device label"===Le){const ke=this.All_Devices_Configuration.find(me=>me.mn===je.MN);Ue["Device label"]=ke.mn_label}else"Date & time"===Le?Ue["Date & time"]=je.DT:"Calculated Time"===Le?Ue["Calculated Time"]=je.time_calculated:console.log("Invalid column:",Le)}),Ue}return null})).filter(Oe=>null!==Oe)};L[ee]=Te,console.log("Data Tables:",L);const ge=O[ee]||[],Ce=L[ee].columns.filter(Oe=>ge.some(je=>je.includes(Oe.trim())));Ce.unshift("Device label","Date & time","Calculated Time"),L[ee].columns=Ce,L[ee].data=this.sanitizeData(L[ee].data).sort((Oe,je)=>new Date(je["Date & time"]).getTime()-new Date(Oe["Date & time"]).getTime()),this.getDataFromTM(L[ee],te,"schedule"),this.tableData.push(L[ee]),console.log("structure check",this.tableData)}),console.log("Data Tables:",L)}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(z=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",z)})}handleCustomOnSpotDayLive(oe,ue){if(this.saveQueryData=[],this.saveQueryData.push(oe),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[],console.log("positions checking :>> ",ue),this.charts.push(ue&&null!=ue.charts[0]?ue.charts[0]:{id:"chart",cols:25,rows:10,y:0,x:1}),ue&&null!=ue.table)ue.table.forEach(z=>{this.table.push(z)});else for(let z=0;z<oe.device.length;z++)this.table.push({id:`table${z+1}`,cols:25,rows:12,y:0,x:1,index:z});let re=oe.paramFilter;const O={};oe.device.forEach((z,H)=>{O[z]=oe.paramFilter[H]||[]}),console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let X=oe.chart_type,x=[];for(let z=0;z<m.length;z++)x.push(m[z].parameters);console.log("Extracted Parameters",x),console.log(" After mulActualData",m),this.reportApi.getReportsData(oe).then(z=>{if(1===z.length){if(1===z.length&&null===z[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),this.table=[],this.charts=[],void this.cdr.detectChanges();for(let Y=0;Y<z.length;Y++)null===z[Y]?(this.table=[],this.charts=[],this.cdr.detectChanges(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${oe.device[Y]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",re),console.log("continue the process"));const H=z?.[0]?.data||[];console.log("historicalData",H);const G=Array.from(new Set(Object.values(H).flatMap(Y=>Object.keys(Y.MM)))).sort((Y,ee)=>parseInt(Y.replace(/\D/g,""),10)-parseInt(ee.replace(/\D/g,""),10));console.log("Property Names:",G);const D={};Object.entries(H).forEach(([Y,ee])=>{const te=new Date(Y).getTime();console.log(`Processing packet for date ${Y} with timestamp ${te}:`,ee.MM),G.forEach(pe=>{D[pe]||(D[pe]=[]);const we=ee.MM[pe];console.log(`Adding data point for ${pe}:`,{x:te,y:we}),D[pe].push([te,we])})}),console.log("Grouped Data:",D);const U=Object.entries(D).map(([Y,ee])=>{const te=parseInt(Y.slice(1))-1,pe=S[te];return{name:pe?pe.schedule_parameter_label:Y,data:ee.filter(ge=>"string"!=typeof ge[1])}});console.log("Formatted Highcharts Series:",U),console.log(this.charts);const R=U.filter(Y=>{const ee=Y.name;return re.some(te=>te.includes(ee))});console.log("highchartsSeries paramFilter",R),this.reportChartComponent.createHighchartsLineChart(R,X,this.All_Devices_Configuration);const T=G.map(Y=>{const ee=parseInt(Y.slice(1))-1;return S[ee]&&void 0!==S[ee].schedule_parameter_label?S[ee].schedule_parameter_label:Y});G.unshift("Device label","Date & time","Calculated Time"),T.unshift("Device label","Date & time","Calculated Time"),console.log("TABLE NAMES",T);const N={columns:T,data:Object.entries(H).map(([Y,ee])=>{const te={};return G.forEach(pe=>{if("Device label"!==pe&&"Date & time"!==pe&&"Calculated Time"!==pe){const we=parseInt(pe.slice(1))-1;S[we]&&void 0!==S[we].schedule_parameter_label?te[S[we].schedule_parameter_label]=ee.MM[pe]??" ":te[pe]=ee.MM[pe]??" "}else if("Device label"===pe){const we=this.All_Devices_Configuration.find(Te=>Te.mn===ee.MN);te["Device label"]=we.mn_label}else"Date & time"===pe?te["Date & time"]=ee.DT:"Calculated Time"===pe?te["Calculated Time"]=ee.time_calculated:console.log("Invialid column")}),te})};console.log("Angular DataTable Format:",N);const L=N.columns.filter(Y=>{const ee=Y;return re.some(te=>te.includes(ee))});L.unshift("Device label","Date & time","Calculated Time"),N.columns=L,N.data=this.sanitizeData(N.data).sort((Y,ee)=>new Date(ee["Date & time"]).getTime()-new Date(Y["Date & time"]).getTime()),this.tableData.push(N),this.getDataFromTM(N,0,"schedule")}else if(z.length>1){let H=[];this.table=[];for(let ee=0;ee<z.length;ee++)null!==z[ee]?(ue&&null!=ue.table?(this.table=[],ue.table.forEach(te=>{this.table.push(te||{id:`table${ee}`,cols:25,rows:12,y:0,x:1,index:ee})})):this.table.push({id:`table${ee}`,cols:25,rows:12,y:0,x:1,index:ee}),this.cdr.detectChanges()):(null===z[ee]&&(H.push(oe.device[ee]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${H.join(", ")} does not have any data.`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",re));const G=z.reduce((ee,te)=>ee.concat(te?.data||[]),[]);console.log("allhistoricalData",G);const D={};G.forEach(ee=>{Object.entries(ee).forEach(([te,pe])=>{if(pe&&pe.MM&&pe.MN){const we=pe.MN,Te=Object.keys(pe.MM);D[we]||(D[we]=new Set),Te.forEach(ge=>{D[we].add(ge)})}else console.warn(`Skipping invalid packet for date ${te}:`,pe)})}),console.log("propertyNamesByDevice",D);const U={};Object.keys(D).sort((ee,te)=>D[te].size-D[ee].size).forEach(ee=>{const te=D[ee];U[ee]={},te.forEach(pe=>{U[ee][pe]=[],G.forEach(we=>{Object.values(we).forEach(Te=>{const ge=Te.DT,Ce=Te.MM?.[pe];"number"==typeof Ce&&Te.MN===ee&&U[ee][pe].push({x:ge,y:Ce})})})})}),console.log("Matched Data By Device:",U);const T=Object.entries(U).map(([ee,te],pe)=>Object.entries(te).map(([Te,ge])=>{const Ce=parseInt(Te.slice(1))-1,Oe=x[pe][Ce],je=Oe?Oe.schedule_parameter_label:Te,Ue=ge.filter(Le=>"string"!=typeof Le.y);return{name:`${ee} : ${je}`,data:Ue.map(Le=>[Le.x,Le.y])}})).flat();console.log("check this.table",this.table),console.log("all Formatted Highcharts Series:",T);const N=T.filter(ee=>{const te=ee.name.split(":")[1].trim();return re.some(pe=>pe.includes(te))});this.reportChartComponent.createHighchartsLineChart(N,X,this.All_Devices_Configuration);const L={},Y=Object.keys(D).sort((ee,te)=>D[te].size-D[ee].size);console.log("PROPERTY NAME DEVICE:",D),console.log("SD",Y),Object.keys(D).forEach((ee,te)=>{const pe=Array.from(D[ee]).sort((Oe,je)=>parseInt(Oe.replace(/\D/g,""),10)-parseInt(je.replace(/\D/g,""),10)),we=pe.map(Oe=>{const je=parseInt(Oe.slice(1))-1;return x[te][je]&&void 0!==x[te][je].schedule_parameter_label?x[te][je].schedule_parameter_label:Oe});console.log("Check Props",pe),console.log("Check Result"),we.unshift("Device label","Date & time","Calculated Time"),pe.unshift("Device label","Date & time","Calculated Time");const Te={columns:we,data:G.flatMap(Oe=>Object.values(Oe).map(je=>{if(je&&ee===je.MN){const Ue={};return pe.forEach(Le=>{if("Device label"!==Le&&"Date & time"!==Le&&"Calculated Time"!==Le&&"Time Generated"!==Le){const ke=parseInt(Le.slice(1))-1;x[te]?.[ke]&&void 0!==x[te][ke].schedule_parameter_label?Ue[x[te][ke].schedule_parameter_label]=je.MM?.[Le]??" ":Ue[Le]=je.MM?.[Le]??" "}else if("Device label"===Le){const ke=this.All_Devices_Configuration.find(me=>me.mn===je.MN);Ue["Device label"]=ke.mn_label}else"Date & time"===Le?Ue["Date & time"]=je.DT:"Calculated Time"===Le?Ue["Calculated Time"]=je.time_calculated:console.log("Invalid column:",Le)}),Ue}return null})).filter(Oe=>null!==Oe)};L[ee]=Te,console.log("Data Tables:",L);const ge=O[ee]||[],Ce=L[ee].columns.filter(Oe=>ge.some(je=>je.includes(Oe.trim())));Ce.unshift("Device label","Date & time","Calculated Time"),L[ee].columns=Ce,L[ee].data=this.sanitizeData(L[ee].data).sort((Oe,je)=>new Date(je["Date & time"]).getTime()-new Date(Oe["Date & time"]).getTime()),console.log("dataTables[device]",L[ee]),this.getDataFromTM(L[ee],te,"schedule"),this.tableData.push(L[ee]),console.log("structure check",this.tableData)}),console.log("Data Tables:",L)}else this.table=[],this.charts=[],this.cdr.detectChanges();this.spinner.hide()}).catch(z=>{this.spinner.hide(),this.table=[],this.charts=[],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",z)})}getDataFromTM(oe,ue,re){console.log("this.table",this.table),Array.isArray(oe.data)&&oe.data.length?this.dynamicRowData=oe.data:(console.error("Data is not an array or is empty:",oe.data),this.dynamicRowData=[]),this.dynamicColumns=oe.columns,this.reinitializeDataTable(this.dynamicColumns,this.dynamicRowData,ue,re),this.cdr.detectChanges()}getDataFromTMAlerts(oe,ue,re){console.log("this.table",this.table),Array.isArray(oe.data)&&oe.data.length?this.dynamicRowData=oe.data:(console.error("Data is not an array or is empty:",oe.data),this.dynamicRowData=[]),this.dynamicColumns=oe.columns,this.reinitializeDataTableAlerts(this.dynamicColumns,this.dynamicRowData,ue,re),this.cdr.detectChanges()}ngOnDestroy(){console.log("destroied :>> "),this.subscription.unsubscribe()}generateColumns(oe){return oe.map(ue=>({title:ue,data:ue}))}reinitializeDataTable(oe,ue,re,O){let S=[];S="schedule"==O||"parameters"==O?oe.map(x=>({title:x,data:this.sanitizeKey(x),width:100*x.length+"px"})):oe;const m={pagingType:"full_numbers",lengthChange:!1,responsive:!0,paging:!0,destroy:!0,dom:"Bftrip",createdRow:function(x,z,H){$(x).addClass(H%2?"dt1-row-odd":"dt1-row-even").addClass("dt1-row-hover")},buttons:[{extend:"colvis",className:"btn btn-default btn-outline",text:'<i class="fa fa-columns text-dark"></i> Columns',titleAttr:"Show/Hide Columns"},{extend:"copy",className:"btn btn-primary btn-outline",text:'<i class="fa fa-copy text-dark"></i> Copy',titleAttr:"Copy to Clipboard"},{extend:"print",className:"btn btn-success btn-outline",text:'<i class="fa fa-print text-dark"></i> Print',titleAttr:"Print Table"}],processing:!0,data:ue,search:!1,columns:S,initComplete:function(x,z){$("#table_data"+re+" thead").addClass("thead-background"),$(".dataTables_filter").css({padding:"5px",position:"fixed",right:"20px",top:"0px","z-index":"100"}),$(".dataTables_filter input").css({padding:"5px 10px",border:"2px solid #0073aa","border-radius":"25px",outline:"none","box-shadow":"0 0 5px rgba(0, 115, 170, 0.5)","font-size":"16px","font-family":"Arial, sans-serif"}),$(".dataTables_filter label").css({"font-weight":"bold","margin-right":"10px","font-family":"Arial, sans-serif","font-size":"16px",color:"#0073aa"}),$("#table_data"+re).css({border:"2px solid #0073aa !important","border-collapse":"collapse"}),$("#table_data"+re).css({"border-collapse":"collapse"}),$(`#table_data${re}, #table_data${re} th, #table_data${re} td`).css({border:"1px solid #0073aa","white-space":"nowrap"}),$(`#table_data${re} thead th`).css({"border-bottom":"2px solid #0073aa"})},drawCallback:function(){this.api(),$("#table_data"+re).css({border:"2px solid #0073aa !important","border-collapse":"collapse"}),$("#table_data"+re).css({"border-collapse":"collapse"}),$(`#table_data${re}, #table_data${re} th, #table_data${re} td`).css({border:"1px solid #0073aa"}),$(`#table_data${re} thead th`).css({"border-bottom":"2px solid #0073aa"}),$(".dataTables_paginate").css({position:"fixed",right:"10px",bottom:"10px","z-index":"100"}),$(".dataTables_info").css({position:"fixed",left:"10px",bottom:"10px","z-index":"100"}),$(".dt-buttons").css({position:"fixed",left:"20px",top:"10px","z-index":"100","margin-bottom":"20px"})}};this.dataTableInstances[re]&&this.dataTableInstances[re].destroy();let X=this;$(document).ready(function(){X.dataTableInstances[re]=$("#table_data"+re).DataTable(m),$("#table_data"+re).on("init.dt",function(){$(".dt-custom-footer:gt(0)").remove()}),$("#table_data"+re+"_filter input").addClass("gridster-item-content"),$("#table_data"+re+"_wrapper").addClass("custom-datatable-wrapper"),$("#table_data"+re+" tbody").on("click","tr",x=>{let z=X.dataTableInstances[re].row(x.currentTarget).data();X.currentRowData=z,X.currentRowDataForPDF=z,X.selectDevicforBillInvoice=z.extraData[0].PK.split("#")[1],X.loadPDF(z)})})}reinitializeDataTableAlerts(oe,ue,re,O){let S=[];S="schedule"==O||"parameters"==O?oe.map(x=>({title:x,data:this.sanitizeKey(x),width:100*x.length+"px"})):oe;const m={pagingType:"full_numbers",lengthChange:!1,responsive:!0,paging:!0,destroy:!0,dom:"Bftrip",createdRow:function(x,z,H){$(x).addClass(H%2?"dt1-row-odd":"dt1-row-even").addClass("dt1-row-hover")},buttons:[{extend:"colvis",className:"btn btn-default btn-outline",text:'<i class="fa fa-columns text-dark"></i> Columns',titleAttr:"Show/Hide Columns"},{extend:"copy",className:"btn btn-primary btn-outline",text:'<i class="fa fa-copy text-dark"></i> Copy',titleAttr:"Copy to Clipboard"},{extend:"print",className:"btn btn-success btn-outline",text:'<i class="fa fa-print text-dark"></i> Print',titleAttr:"Print Table"},{extend:"excel",className:"btn btn-info btn-outline",text:'<i class="fa fa-file-excel text-dark"></i> Excel',titleAttr:"Export to Excel"},{extend:"pdf",className:"btn btn-danger btn-outline",text:'<i class="fa fa-file-pdf text-dark"></i> PDF',titleAttr:"Export to PDF"},{extend:"csv",className:"btn btn-warning btn-outline",text:'<i class="fa fa-file-csv text-dark"></i> CSV',titleAttr:"Export to CSV"}],processing:!0,data:ue,search:!1,columns:S,columnDefs:[{targets:[1,3,6,10,8,9,10],visible:!1,searchable:!1}],initComplete:function(x,z){$("#table_data"+re+" thead").addClass("thead-background"),$(".dataTables_filter").css({padding:"5px",position:"fixed",right:"20px",top:"0px","z-index":"100"}),$(".dataTables_filter input").css({padding:"5px 10px",border:"2px solid #0073aa","border-radius":"25px",outline:"none","box-shadow":"0 0 5px rgba(0, 115, 170, 0.5)","font-size":"16px","font-family":"Arial, sans-serif"}),$(".dataTables_filter label").css({"font-weight":"bold","margin-right":"10px","font-family":"Arial, sans-serif","font-size":"16px",color:"#0073aa"}),$("#table_data"+re).css({border:"2px solid #0073aa !important","border-collapse":"collapse"}),$("#table_data"+re).css({"border-collapse":"collapse"}),$(`#table_data${re}, #table_data${re} th, #table_data${re} td`).css({border:"1px solid #0073aa","white-space":"nowrap"}),$(`#table_data${re} thead th`).css({"border-bottom":"2px solid #0073aa"})},drawCallback:function(){this.api(),$("#table_data"+re).css({border:"2px solid #0073aa !important","border-collapse":"collapse"}),$("#table_data"+re).css({"border-collapse":"collapse"}),$(`#table_data${re}, #table_data${re} th, #table_data${re} td`).css({border:"1px solid #0073aa"}),$(`#table_data${re} thead th`).css({"border-bottom":"2px solid #0073aa"}),$(".dataTables_paginate").css({position:"fixed",right:"10px",bottom:"10px","z-index":"100"}),$(".dataTables_info").css({position:"fixed",left:"10px",bottom:"10px","z-index":"100"}),$(".dt-buttons").css({position:"fixed",left:"20px",top:"10px","z-index":"100","margin-bottom":"20px"})}};this.dataTableInstances[re]&&this.dataTableInstances[re].destroy();let X=this;$(document).ready(function(){X.dataTableInstances[re]=$("#table_data"+re).DataTable(m),$("#table_data"+re).on("init.dt",function(){$(".dt-custom-footer:gt(0)").remove()}),$("#table_data"+re+"_filter input").addClass("gridster-item-content"),$("#table_data"+re+"_wrapper").addClass("custom-datatable-wrapper"),$("#table_data"+re+" tbody").on("click","tr",x=>{let z=X.dataTableInstances[re].row(x.currentTarget).data();X.currentRowData=z,$("#alert_info_tm").modal("show")}),X.dataTableInstances[re].on("column-visibility.dt",function(){X.dataTableInstances[re].draw()})})}getChartInstanceData(oe){this.chartInstance=oe}insertImageIntoExcel(oe,ue,re,O,S){const m=ue.addImage({base64:re,extension:"jpeg"});oe.addImage(m,{tl:{col:S,row:O},br:{col:S+20,row:O+40},editAs:"oneCell"})}exportChartAsImage(oe){return new Promise((ue,re)=>{const O=oe.getSVG();console.log("SVG Output:",O);const S=new Blob([O],{type:"image/svg+xml;charset=utf-8"}),m=URL.createObjectURL(S),X=new Image;X.onload=()=>{const z=document.createElement("canvas");z.width=3*X.width,z.height=3*X.height;const H=z.getContext("2d");if(!H)return void re(new Error("2D rendering context is not available"));H.scale(3,3),H.drawImage(X,0,0),URL.revokeObjectURL(m);const G=z.toDataURL("image/jpeg");ue(G)},X.onerror=x=>{console.error("Image loading error:",x),URL.revokeObjectURL(m),re(new Error("Failed to load SVG image"))},X.src=m})}exportChartAndInsertIntoExcel(){var oe=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const ue=yield oe.exportChartAsImage(oe.chartInstance);console.log("Image Data",ue);const re=new exceljs__WEBPACK_IMPORTED_MODULE_2__.Workbook;console.log("Check Format",oe.tableData);const O=re.addWorksheet("ChartSheet");oe.insertImageIntoExcel(O,re,ue,1,1);for(let S in oe.tableData)if(oe.tableData.hasOwnProperty(S)){const m=oe.tableData[S],X=oe.sanitizeWorksheetName(m.data[0]["Device label"]),x=re.addWorksheet(X);x.columns=m.columns.map(H=>({header:H,key:oe.sanitizeKey(H),width:30})),m.data.forEach(H=>{x.addRow(H)}),x.getRow(1).eachCell(H=>{H.font={bold:!0}})}re.xlsx.writeBuffer().then(S=>{const m=new Blob([S],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),X=window.URL.createObjectURL(m),x=document.createElement("a");document.body.appendChild(x),x.href=X,x.download="chart_data.xlsx",x.click(),window.URL.revokeObjectURL(X),document.body.removeChild(x)}),oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"success",title:"Excel Generated Sucessfully",showConfirmButton:!1,timer:2e3})}catch{oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong,Excel not Genrated ",confirmButtonText:"Understood"}),console.log("error")}})()}exportChartAndInsertIntoExcelAlerts(){var oe=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const ue=new exceljs__WEBPACK_IMPORTED_MODULE_2__.Workbook;console.log("Check Format",oe.tableData);for(let re in oe.tableData)if(oe.tableData.hasOwnProperty(re)){const O=oe.tableData[re],S=ue.addWorksheet(`Table_${re}`);S.columns=O.columns.map(X=>({header:X,key:oe.sanitizeKey(X),width:30})),O.data.forEach(X=>{const x=S.addRow(X),z=O.columns.indexOf("status")+1,H=x.getCell(z);"Active"===H.value?H.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF0000"}}:"Closed"===H.value&&(H.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF00FF00"}})}),S.getRow(1).eachCell(X=>{X.font={bold:!0}})}ue.xlsx.writeBuffer().then(re=>{const O=new Blob([re],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),S=window.URL.createObjectURL(O),m=document.createElement("a");document.body.appendChild(m),m.href=S,m.download="chart_data.xlsx",m.click(),window.URL.revokeObjectURL(S),document.body.removeChild(m)}),oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"success",title:"Excel Generated Successfully",showConfirmButton:!1,timer:2e3})}catch(ue){oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong, Excel not Generated",confirmButtonText:"Understood"}),console.log("error",ue)}})()}exportToCSV(){var oe=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){let ue="";for(let m in oe.tableData)if(oe.tableData.hasOwnProperty(m)){const X=oe.tableData[m];ue+=X.columns.join(",")+"\n",X.data.forEach(x=>{const z=X.columns.map(H=>x[H]);ue+=z.join(",")+"\n"}),ue+="\n"}const re=new Blob([ue],{type:"text/csv"}),O=window.URL.createObjectURL(re),S=document.createElement("a");document.body.appendChild(S),S.href=O,S.download="chart_data.csv",S.click(),window.URL.revokeObjectURL(O),document.body.removeChild(S)})()}getImageBase64(oe){return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){const re=yield(yield fetch(oe)).blob();return new Promise((O,S)=>{const m=new FileReader;m.onloadend=()=>O(m.result),m.onerror=S,m.readAsDataURL(re)})})()}sanitizeWorksheetName(oe){return oe.replace(/[\\\/\*\?\:\[\]]/g,"_")}isValidBase64Image(oe){return"string"==typeof oe&&oe.startsWith("data:image/")}exportToPDF(){var oe=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const ue=oe.saveQueryData[0].reportsType;let re;const O=oe.saveQueryData[0].start_time,S=oe.saveQueryData[0].end_time,m=moment__WEBPACK_IMPORTED_MODULE_10___default()(O).format("MMMM Do YYYY, h:mm:ss a"),X=moment__WEBPACK_IMPORTED_MODULE_10___default()(S).format("MMMM Do YYYY, h:mm:ss a");switch(ue){case"Parameters":re="Live Data Report";break;case"Hourly consumption":re="Schedule Hour Data Report";break;case"Schedhule Daily consumption":re="Daily Data Report";break;case"Month consumption":re="Schedule Monthly Data Report";break;case"Alerts":re="Alerts Data report";break;case"Audit trails":re="Audit trails Data Report"}console.log("reportType",ue),console.log("Title ",re);const x=(yield oe.exportChartAsImage(oe.chartInstance))||(yield oe.getImageBase64("/assets/media/Wimate_latest.png"));console.log("this.companyLogo",oe.companyLogo);let z=oe.companyLogo||(yield oe.getImageBase64("/assets/media/Wimate_latest.png"));try{z=oe.isValidBase64Image(oe.companyLogo)?oe.companyLogo:yield oe.getImageBase64("/assets/media/Wimate_latest.png"),console.log("Company logo:",z)}catch(N){console.error("Error loading company logo:",N)}const H=yield oe.getImageBase64("/assets/media/wimate.png"),G={pageOrientation:"landscape",content:[{image:z,alignment:"center",width:300,margin:[0,20]},{text:re,style:"header",alignment:"center",fontSize:30,italics:!0,color:"gray"},{stack:[{text:"Bangalore - Wimate",fontSize:20,alignment:"center"},{text:["From : "+m+" To : "+X],alignment:"center",fontSize:20}],style:"superMargin",pageBreak:"after"},{text:"Chart",margin:[0,10],fontSize:20,alignment:"center"},{image:x,alignment:"center",width:700,pageBreak:"after"},{text:"Table",alignment:"center",margin:[20,10],fontSize:10,style:"subheader"}],footer:function(N,L){return{columns:[{image:H,width:30,margin:[20,0,0,0]},{text:`Page ${N} of ${L}`,alignment:"right",margin:[0,0,20,0]}]}}},D=4,U=30,R=[["#E3F2FD","#BBDEFB","#1976D2"],["#FCE4EC","#F8BBD0","#D81B60"],["#E8F5E9","#C8E6C9","#388E3C"],["#FFF3E0","#FFE0B2","#F57C00"],["#F3E5F5","#E1BEE7","#8E24AA"],["#FFEBEE","#FFCDD2","#D32F2F"],["#E0F7FA","#B2EBF2","#00838F"],["#F1F8E9","#DCEDC8","#388E3C"],["#FBE9E7","#FFCCBC","#D84315"],["#F9FBE7","#F0F4C3","#AFB42B"]];console.log("structure check follow1",oe.tableData);let T=0;for(let N in oe.tableData)if(oe.tableData.hasOwnProperty(N)){const L=oe.tableData[N];console.log("structure check follow 2",L),oe.splitDataIntoChunks(L,D,U).forEach((ee,te)=>{te>0&&G.content.push({text:"",margin:[20,10],pageBreak:"auto"});const pe=oe.createTableHeader(ee.columns,R[T%R.length][2]);G.content.push(pe),G.content.push(oe.createTable(ee,R[T%R.length]))}),T++}console.log("docDefinition",G),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3___default().createPdf(G).download(`${re}_from_${m}_to${X}.pdf`),oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"success",title:"PDF Generated Sucessfully",showConfirmButton:!1,timer:2e3})}catch(ue){oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong,PDF not Genrated ",confirmButtonText:"Understood"}),console.log("error",ue)}})()}exportToPDFAlerts(){var oe=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const ue=oe.saveQueryData[0].reportsType;let re;const O=oe.saveQueryData[0].start_time,S=oe.saveQueryData[0].end_time,m=moment__WEBPACK_IMPORTED_MODULE_10___default()(O).format("MMMM Do YYYY, h:mm:ss a"),X=moment__WEBPACK_IMPORTED_MODULE_10___default()(S).format("MMMM Do YYYY, h:mm:ss a");switch(ue){case"Parameters":re="Live Data Report";break;case"Hourly consumption":re="Schedule Hour Data Report";break;case"Schedhule Daily consumption":re="Daily Data Report";break;case"Month consumption":re="Schedule Monthly Data Report";break;case"Alerts":re="Alerts Data report";break;case"Audit trails":re="Audit trails Data Report"}console.log("reportType",ue),console.log("Title ",re),console.log("this.companyLogo",oe.companyLogo);let x=oe.companyLogo||(yield oe.getImageBase64("/assets/media/Wimate_latest.png"));try{x=oe.isValidBase64Image(oe.companyLogo)?oe.companyLogo:yield oe.getImageBase64("/assets/media/Wimate_latest.png"),console.log("Company logo:",x)}catch(T){console.error("Error loading company logo:",T)}const z=yield oe.getImageBase64("/assets/media/wimate.png"),H={pageOrientation:"landscape",content:[{image:x,alignment:"center",width:300,margin:[0,20]},{text:re,style:"header",alignment:"center",fontSize:30,italics:!0,color:"gray"},{stack:[{text:"Bangalore - Wimate",fontSize:20,alignment:"center"},{text:["From : "+m+" To : "+X],alignment:"center",fontSize:20}],style:"superMargin",pageBreak:"after"},{text:"Alerts",alignment:"center",margin:[20,10],fontSize:10,style:"subheader"}],footer:function(T,N){return{columns:[{image:z,width:30,margin:[20,0,0,0]},{text:`Page ${T} of ${N}`,alignment:"right",margin:[0,0,20,0]}]}}},G=1,D=30,U=[["#E3F2FD","#BBDEFB","#1976D2"],["#FCE4EC","#F8BBD0","#D81B60"],["#E8F5E9","#C8E6C9","#388E3C"],["#FFF3E0","#FFE0B2","#F57C00"],["#F3E5F5","#E1BEE7","#8E24AA"],["#FFEBEE","#FFCDD2","#D32F2F"],["#E0F7FA","#B2EBF2","#00838F"],["#F1F8E9","#DCEDC8","#388E3C"],["#FBE9E7","#FFCCBC","#D84315"],["#F9FBE7","#F0F4C3","#AFB42B"]];console.log("structure check follow1",oe.tableData);let R=0;for(let T in oe.tableData)if(oe.tableData.hasOwnProperty(T)){const N=oe.tableData[T];console.log("structure check follow 2",N),oe.splitDataIntoChunks(N,G,D).forEach((Y,ee)=>{ee>0&&H.content.push({text:"",margin:[20,10],pageBreak:"auto"});const te=oe.createTableHeader(Y.columns,U[R%U.length][2]);H.content.push(te),H.content.push(oe.createTableAlert(Y,U[R%U.length]))}),R++}console.log("docDefinition",H),pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3___default().createPdf(H).download(`${re}_from_${m}_to${X}.pdf`),oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"success",title:"PDF Generated Sucessfully",showConfirmButton:!1,timer:2e3})}catch(ue){oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong,PDF not Genrated ",confirmButtonText:"Understood"}),console.log("error",ue)}})()}splitDataIntoChunks(oe,ue,re){const O=oe.data,S=oe.columns,m=[],X=S.slice(0,2);for(let x=0;x<O.length;x+=re)for(let z=2;z<S.length;z+=ue){const H=X.concat(S.slice(z,z+ue)),G=O.slice(x,x+re).map(D=>{const U={};return H.forEach(R=>{U[R]=D[R]}),U});m.push({columns:H,data:G})}return m}addWordBreaks(oe){return oe.replace(/_/g,"_\u200b")}createTableHeader(oe,ue){return{table:{widths:oe.map(()=>"auto"),body:[[{text:"Columns:",bold:!0,colSpan:oe.length,alignment:"left",fillColor:ue,color:"white"},...Array(oe.length-1).fill("")],[{text:oe.join(", "),colSpan:oe.length,alignment:"left"},...Array(oe.length-1).fill("")]]},layout:"noBorders",margin:[0,5,0,5]}}createTable(oe,ue){const re=[oe.columns.map(S=>({text:this.addWordBreaks(S),bold:!0,fillColor:ue[2],color:"white",alignment:"center",noWrap:!1,wordWrap:!0,maxWidth:100}))];oe.data.forEach(S=>{const m=oe.columns.map(X=>({text:S[X],wordWrap:!0}));re.push(m)});const O={margin:[0,10,0,10],fontSize:8,alignment:"center",fillColor:function(S,m,X){return 0===S?ue[2]:S%2==0?ue[0]:ue[1]}};return{table:{body:re,headerRows:1,widths:Array(oe.columns.length).fill("auto")},layout:O}}createTableAlert(oe,ue){const re=[oe.columns.map(S=>({text:this.addWordBreaks(S),bold:!0,fillColor:ue[2],color:"white",alignment:"center",noWrap:!1,wordWrap:!0,maxWidth:100}))];oe.data.forEach(S=>{const m=oe.columns.map(X=>{let x=S[X];"string"!=typeof x&&(x=JSON.stringify(x));let z=null;return x.includes("Active")?z="#FF0000":x.includes("Closed")&&(z="#00FF00"),{text:x,wordWrap:!0,fillColor:z}});re.push(m)});const O={margin:[0,10,0,10],fontSize:8,alignment:"center",fillColor:function(S){return 0===S?ue[2]:S%2==0?ue[0]:ue[1]}};return{table:{body:re,headerRows:1,widths:Array(oe.columns.length).fill("auto")},layout:O}}getColumnWidth(oe){const O=this.tableData.map(D=>D.data.map(U=>U[oe])).flat().filter(D=>null!=D).map(D=>D.toString());if(0===O.length)return 100;const S=Math.max(...O.map(D=>D.length)),X=Math.min(S,800),G=Math.min(Math.max(8*X,50),200);return console.log("calculatedWidth",G),isNaN(G)?100:G}calculateImageWidth(){let oe=0;for(let S in this.tableData)this.tableData.hasOwnProperty(S)&&(oe+=this.tableData[S].columns.length);return 100*oe+20}calculateImageHeight(){let oe=0;for(let S in this.tableData)this.tableData.hasOwnProperty(S)&&(oe+=this.tableData[S].data.length);return 30*oe+20}triggerMethod(oe){if("excel"===oe&&(this.spinner.show(),this.exportChartAndInsertIntoExcel()),"pdf"===oe){if(null==this.tableData||0===this.tableData.length)return void sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:"Table data not found. Check again",confirmButtonText:"Understood"});this.spinner.show(),this.exportToPDFAllData()}if("csv"===oe){if(null==this.tableData||0===this.tableData.length)return void sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:"Table data not found. Check again",confirmButtonText:"Understood"});this.exportToCSV()}}triggerMethodAlerts(oe){"excel"===oe&&(this.spinner.show(),this.exportChartAndInsertIntoExcelAlerts()),"pdf"===oe&&(this.spinner.show(),this.exportToPDFAlerts()),"csv"===oe&&this.exportToCSV()}clearAll(oe){this.charts=[],this.table=[],this.updateButtonChK=!1,this.initializeSaveQueryForm(),$("#MultiJSTree").jstree(!0).deselect_all(),this.mnList=[],this.cdr.detectChanges()}itemOnint(oe,ue){console.log("Item Componets Check",oe)}checkPermission(){let oe=!1,ue=!1;for(let re=0;re<this.allPermissions_user.length;re++)"TimeMachine - Update"===this.allPermissions_user[re]?(oe=!0,this.hidingLink=oe,console.log("CHECK PERMISSION hasDeviceUpdate",oe)):"TimeMachine - View"===this.allPermissions_user[re]&&(ue=!0,console.log("CHECK PERMISSION hasDeviceViewhasDeviceView",ue));oe&&ue||oe?this.hideDeleteButton=!0:ue?this.hideDeleteButton=!1:(console.log("CHECK PERMISSION hasDeviceUpdate",oe),this.router.navigate(["/404"]));for(let re=0;re<this.allReportsPermissions.length;re++)"Parameters"===this.allReportsPermissions[re]?(console.log("Parameter permiasion"),this.hasPR1=!0):"Hourly consumption"===this.allReportsPermissions[re]?this.hasPR2=!0:"Daily consumption"===this.allReportsPermissions[re]?this.hasPR3=!0:"Monthly consumption"===this.allReportsPermissions[re]&&(this.hasPR4=!0)}initializeSaveQueryForm(){this.saveQuery=this.fb.group({PK:[""],name:[""],save_to:[[]],mail:[!1],SMS:[!1],Telegram:[!1],Reserved1:[""],Reserved2:[""],Reserved3:[""],chart_enable:[!0],description:[""],mail_type:[null],time_selection:[""],pdf_type:["Compress"],SMS_options:[{}],Telegram_options:[{}],others:[{}]})}fetchTMData(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const re=yield ue.api.GetLookupMasterTable(ue.SK_clientID+"#time_machine",oe);if(re&&re.items)if("string"==typeof re.items){let O=JSON.parse(re.items);if(Array.isArray(O)){for(let S=0;S<O.length;S++){const m=O[S];if(null==m)break;{const X=Object.keys(m)[0];ue.lookup_data_temp1.push(m[X]),ue.lookup_data_temp_form.push(m[X])}}yield ue.fetchTMData(oe+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else ue.lookup_data_temp1.sort((O,S)=>S.P3-O.P3),ue.lookup_data_temp_form.sort((O,S)=>S.P3-O.P3),ue.listofTimeMachineIds=ue.lookup_data_temp_form.map(O=>O.PK),ue.getAllUsers(1,ue.lookup_data_temp1)}catch(re){console.error("Error:",re)}})()}fetchDataOnInitFilter(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const re=yield ue.api.GetLookupMasterTable(ue.SK_clientID+"#time_machine",oe);if(re&&re.items)if("string"==typeof re.items){let O=JSON.parse(re.items);if(Array.isArray(O)){for(let S=0;S<O.length;S++){const m=O[S];if(null==m)break;{const X=Object.keys(m)[0];ue.lookup_data_tempForIdFilter.push(m[X])}}yield ue.fetchDataOnInitFilter(oe+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else ue.lookup_data_tempForIdFilter.sort((O,S)=>S.P3-O.P3),ue.getAllUsers(1,ue.lookup_data_tempForIdFilter)}catch(re){console.error("Error:",re)}})()}showDatatable(oe){this.lookup_data_temp1=[];let re="btn btn-sm btn-primary editdelete ",O="btn btn-sm btn-danger editdelete ";if(typeof oe<"u")for(let m=0;m<oe.length;m++){let H,X=oe[m].P1,x=oe[m].P2,z=oe[m].P3,G=[],D=!1,U="";if(oe[m].P11&&"string"==typeof oe[m].P11&&(G=JSON.parse(oe[m].P11)),void 0!==oe[m].P11){const R=!0===this.decideOwner(this.ownerUserName,oe[m].P11);H=R?`${x} <strong > - </strong> <a class="btn btn-sm btn-warning fw-bolder ms-2 fs-8 py-1 px-3">${G[0].user_name}</a>`:`${x} <strong > - </strong> <a class="btn btn-sm btn-success fw-bolder ms-2 fs-8 py-1 px-3">me</a>`,D=R,U=G[0].user_name}else D=!1,H=`${x} <strong > - </strong> <a class="btn btn-sm btn-danger fw-bolder ms-2 fs-8 py-1 px-3"> old IDs</a>`;this.powerboard_table.push({id:X,name:H,updatedData:new Date(1e3*z).toDateString()+" "+new Date(1e3*z).toLocaleTimeString(),canDelete:D,creator:U})}else this.powerboard_table=[];$("#time_machine").off("click"),$("#time_machine").on("click",".editdelete",function(){let m=$(this).closest("tr"),X=S.pbTableData.row(m);this.className==O&&S.deleteTimeMachine(X.data()),this.className==re&&(S.hide_edit_delete("from_TS"),$("#MultiJSTree").jstree(!0).deselect_all(),void 0!==X.data().id&&null!==X.data().id&&""!==X.data().id&&S.router.navigate([`/TimeMachine/reports/${X.data().id}`]),console.log("row.data() :>> ",X.data().id),S.getSavedQueryHelper(X.data()),this.captureStatus=!1)}),!0===this.hideDeleteButton?this.columnDatatable.push({defaultContent:"<button class='"+re+"' data-bs-dismiss='modal' ><i class='fa fa-edit'></i></button>"},{defaultContent:"<button class='"+O+"'><i class='fa fa-trash'></i></button>"}):this.columnDatatable.push({defaultContent:"<button class='"+re+"' data-bs-dismiss='modal' ><i class='fa fa-edit'></i></button>"}),this.getLookupTableData(this.powerboard_table,this.columnDatatable),this.addFromService();let S=this;this.spinner.hide()}createLookUpTimeMachine(oe,ue){this.api.GetLookupMasterTable(this.SK_clientID+"#time_machine",ue).then(re=>{let O=[];if(null!=re&&re.items&&"string"==typeof re.items&&(O=JSON.parse(re.items)),null!=re&&O.length<this.maxlength){let S=[];re.items&&"string"==typeof re.items&&JSON.parse(re.items).forEach(x=>{for(const z in x)Object.prototype.hasOwnProperty.call(x,z)&&S.push(x[z])}),S.unshift(oe),S=S.map((X,x)=>({[`L${x+1}`]:X})),console.log("newdata 11111111 :>> ",S);let m={PK:this.SK_clientID+"#time_machine",SK:re.SK,createdTime:"",updatedTime:"",items:JSON.stringify(S)};this.api.UpdateLookupMasterTable(m).then(X=>{console.log("createResponse :>> ",X)}).catch(X=>{console.log("err :>> ",X)})}else if(null==re){let S=[];S.push(oe),S=S.map((X,x)=>({[`L${x+1}`]:X}));let m={SK:ue,PK:this.SK_clientID+"#time_machine",items:JSON.stringify(S)};this.api.CreateLookupMasterTable(m).then(X=>{}).catch(X=>{})}else this.createLookUpTimeMachine(oe,ue+1)})}fetchTimeMachineById(oe,ue,re,O){var S=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const m=yield S.api.GetLookupMasterTable(S.SK_clientID+"#time_machine",oe);if(m&&m.items){let X=yield JSON.parse(m.items),x=X.findIndex(z=>z[Object.keys(z)[0]].P1===ue);if(-1!==x){if("update"===re){X[x][`L${x+1}`]=O;const H=[];for(let G=0;G<X.length;G++){const D=Object.keys(X[G])[0],U=`L${G+1}`;if(D){const R={[U]:X[G][D]},T=H.findIndex(N=>Object.keys(N)[0]===U);-1!==T?Object.assign(H[T][U],X[G][D]):H.push(R)}else console.error(`Original key not found for renaming in data[${G}].`)}X=H}else"delete"===re&&(X.splice(x,1),console.log("Data after deleted deleted",X));let z={PK:S.SK_clientID+"#time_machine",SK:m.SK,items:JSON.stringify(X)};console.log("update data review >>>",z),yield S.api.UpdateLookupMasterTable(z)}else yield new Promise(z=>setTimeout(z,500)),yield S.fetchTimeMachineById(oe+1,ue,re,O)}else sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({position:"top-right",icon:"error",title:`ID ${ue} not found`,showConfirmButton:!1,timer:1500})}catch(m){console.error("Error:",m)}})()}onSaveQuery(){this.saveQueryData[0].rdt="";const oe=this.userAssignedFilter(this.saveQuery.value.save_to);this.userAssignedFilterForLookup(this.saveQuery.value.save_to),this.PDF_options={pdf_type:this.saveQuery.value.pdf_type};const re={PK:this.saveQuery.value.PK,SK:this.SK_clientID,name:this.saveQuery.value.name,save_to:JSON.stringify(this.saveQuery.value.save_to),mail:this.saveQuery.value.mail,SMS:this.saveQuery.value.SMS,Telegram:this.saveQuery.value.Telegram,Reserved1:!1,Reserved2:!1,Reserved3:!1,chart_enable:this.saveQuery.value.chart_enable,user_created:JSON.stringify(this.userCreated),user_assigned:JSON.stringify(oe),gridster_config:this.getGridsterConfig(this.form,this.charts,this.table),description:this.saveQuery.value.description,mail_type:this.saveQuery.value.mail_type,time_selection:this.saveQuery.value.time_selection,PDF_options:JSON.stringify(this.PDF_options),SMS_options:JSON.stringify(this.saveQuery.value.SMS_options),Telegram_options:JSON.stringify(this.saveQuery.value.Telegram_options),others:JSON.stringify(this.saveQueryData)};let O=this.saveQuery.value.PK,S=this.saveQuery.value.name,m=this.saveQuery.value.time_selection;const X=Math.ceil((new Date).getTime()/1e3);this.lookItems={P1:O,P2:S,P3:X,P4:m,P5:this.saveQuery.value.mail,P6:this.saveQuery.value.SMS,P7:this.saveQuery.value.Telegram,P8:!1,P9:!1,P10:!1,P11:re.user_created,P12:re.user_assigned};let x={id:re.PK};console.log("All Data Query",re),this.api.CreateReportsSavedQuery(re).then(z=>{z?(this.createLookUpTimeMachine(this.lookItems,1),this.toast.open("New Reports Query Saved successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"}),this.formPostionCheck=!0,this.reportFormComponent.getSavedQuery(x),this.cdr.detectChanges()):alert("Error in Creating Dashboard Configuration")}).catch(z=>{console.log("err for creation",z),this.toast.open("Error in Creating New Dashboard Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}onUpdateQuery(){this.PDF_options={pdf_type:this.saveQuery.value.pdf_type},this.route.paramMap.subscribe(z=>{this.routeId={id:z.get("id")}}),""!==this.routeId&&this.cancelButton(),this.saveQueryData[0].rdt="";let oe=[],re=[];if(oe="string"==typeof this.PDF_options?JSON.parse(this.PDF_options):this.PDF_options,"string"==typeof this.saveQuery.value.save_to)try{re=JSON.parse(this.saveQuery.value.save_to)}catch(z){console.error("Invalid JSON string:",z),re=this.userCreated}"string"==typeof this.saveQueryData&&JSON.parse(this.saveQueryData);let O=[],S=[];!this.FT_dontUpdate||this.superAdmin?(O=this.userAssignedFilter(this.saveQuery.value.save_to),S=this.saveQuery.value.save_to):(O=this.userAssignedFilter(this.userAssignedCache),S=this.userAssignedCache),this.userAssignedFilterForLookup(this.saveQuery.value.save_to),this.saveQuery.get("PK")?.enable();const X={PK:this.saveQuery.value.PK,SK:this.SK_clientID,name:this.saveQuery.value.name,save_to:JSON.stringify(S),user_created:this.userCreated,user_assigned:JSON.stringify(O),mail:this.saveQuery.value.mail,SMS:this.saveQuery.value.SMS,Telegram:this.saveQuery.value.Telegram,Reserved1:"",Reserved2:"",Reserved3:"",chart_enable:this.saveQuery.value.chart_enable,description:this.saveQuery.value.description,gridster_config:this.getGridsterConfig(this.form,this.charts,this.table),mail_type:this.saveQuery.value.mail_type,time_selection:this.saveQuery.value.time_selection,PDF_options:JSON.stringify(JSON.stringify(oe)),others:JSON.stringify(JSON.stringify(this.saveQueryData))};let x={id:X.PK};this.api.UpdateReportsSavedQuery(X).then(z=>{if(z){this.formPostionCheck=!0,this.reportFormComponent.getSavedQuery(x);let H=X.PK;const U=Math.ceil((new Date).getTime()/1e3);this.fetchTimeMachineById(1,H,"update",{P1:X.PK,P2:X.name,P3:U,P4:X.time_selection,P5:X.mail,P6:X.SMS,P7:X.Telegram,P8:!1,P9:!1,P10:!1,P11:X.user_created,P12:X.user_assigned}),setTimeout(()=>{this.fetchDataOnInitFilter(1)},1e3),this.toast.open("Reports Query updated successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})}else alert("Error in Updating Dashboard Configuration")}).catch(z=>{console.log("err for updation",z),z.errors[0].message.includes("One or more parameter values are not valid. The AttributeValue for a key attribute cannot contain an empty string value.")?this.toast.open("Add  TimeMachine Configuration first","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"}):this.toast.open("Error in Updating Dashboard Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}userAssignedFilter(oe){let ue=new Set;console.log("selectedUsers >> ",oe),oe.forEach(m=>{ue.add(m.user_name)}),console.log("filteredUsers >> ",Array.from(ue));const re=this.userInfo;console.log("All Users >> ",re);const O=new Set;re.forEach(m=>{ue.has(m.P1)&&O.add(JSON.stringify(m))});const S=Array.from(O).map(m=>JSON.parse(m));return console.log("filter Fun >>> ",S),S}userAssignedFilterForLookup(oe){let ue=[];console.log("selectedUsers >> ",oe),oe.forEach(S=>{ue.push(S.user_name)}),console.log("filteredUsers >> ",ue);const re=this.getAllUsersNamesAndMails;console.log("All Users >> ",re);const O=re.filter(S=>ue.includes(S.P1));return console.log("filter Fun >>> ",O),O}hide_edit_delete(oe){null!=this.saveQuery.controls.PK.value&&""!==this.saveQuery.controls.PK.value&&this.router.navigate([`/TimeMachine/reports/${this.saveQuery.controls.PK.value}`]),"from_HTML"===oe?this.edit_delete=!this.edit_delete:"from_TS"===oe&&(!1===this.hideDeleteButton?this.edit_delete=!1:!0===this.hideDeleteButton&&(this.edit_delete=!0))}getLookupTableData(oe,ue){console.log("chk1 tm",oe),console.log("chk2 tm",ue),this.pbTableData=$("#time_machine").DataTable({pagingType:"full_numbers",destroy:!0,lengthChange:!0,responsive:!0,data:oe,order:[[3,"date"]],columnDefs:[{type:"date",targets:3}],columns:ue})}addFromService(){this.columnDatatable=[],this.columnDatatable=[{data:"id"},{data:"name"},{data:"updatedData"}],this.checkPermission(),this.locationPermissionService.fetchGlobalLocationTree().then(oe=>{if(!oe)throw new Error("No data returned");this.temp=oe,console.log("Data from location:",oe),this.createJSTree(oe),this.extractDevices=[],oe.forEach(ue=>{"device"===ue.node_type&&void 0!==ue.mn&&(Array.isArray(ue.text)&&(ue.text=ue.text[0]),this.extractDevices.push({mn:ue.mn,label:ue.text+"-"+ue.mn}))}),console.log("Extracted Devices:",this.extractDevices),this.batchRequest(this.extractDevices)}).catch(oe=>{console.error("Failed to fetch or process data",oe),this.spinner.hide()})}edit_form(oe){this.saveButtonCase=!1,this.FT_dontUpdate=this.decideOwner(this.getLoggedUser.attributes["custom:username"],oe.user_created),console.log("getValues>>OnEDit :>>",oe),console.log("getFormValues>>>",oe.save_to),this.setActiveTab("Datatype");let re=JSON.parse(oe.save_to);this.userAssignedCache=re;let O=JSON.stringify(JSON.parse(oe.PDF_options),null,2);"string"==typeof O&&(O=JSON.parse(O)),"string"==typeof O&&(O=JSON.parse(O)),this.PDF_options=O,this.userCreated=oe.user_created,this.updateButtonChK=!0,this.saveQuery.get("PK")?.disable(),this.saveQuery.patchValue({PK:oe.PK,name:oe.name,save_to:re,mail:oe.mail,SMS:oe.SMS,Telegram:oe.Telegram,chart_enable:oe.chart_enable,pdf_type:O&&O.pdf_type?O.pdf_type:{},description:oe.description,mail_type:oe.mail_type,time_selection:oe.time_selection,SMS_options:oe.SMS_options,Telegram_options:oe.Telegram_options}),this.cronEditorTMComponent.cronForm.get("expression")?.setValue(oe.time_selection),this.cronEditorTMComponent.cronExpression=oe.time_selection}decideOwner(oe,ue){let re;return re="string"==typeof ue?JSON.parse(ue):ue,oe!==re[0].user_name}loading(){this.userInfo=[],this.spinner.show(),$("#time_machine").DataTable().destroy(),this.powerboard_table=[],this.lookup_data_temp1=[],this.getAllUsersNamesAndMails=[],this.fetchTMData(1)}createJSTree(oe){this.treeInstance=$("#MultiJSTree").jstree({core:{check_callback:!0,data:oe,multiple:!0},search:{show_only_matches:!0},plugins:["contextmenu","search","checkbox","wholerow"],contextmenu:{items:function(O){let S=$("#MultiJSTree").jstree(!0);return{submenu:{Child:{seperator_before:!1,seperator_after:!1,label:"Child",action:function(m){S.get_selected().forEach(x=>{let z=S.create_node(x,{text:"New Child",type:"file",icon:"glyphicon glyphicon-file"});S.deselect_node(x),S.select_node(z)})}},Parent:{seperator_before:!1,seperator_after:!1,label:"Parent",action:function(m){S.get_selected().forEach(x=>{let z=S.create_node(x,{text:"New Parent",type:"default"});S.deselect_node(x),S.select_node(z)})}}},Rename:{separator_before:!1,separator_after:!1,label:"Edit Location",action:function(m){S.get_selected().forEach(x=>{S.edit(x)})}},Remove:{separator_before:!1,separator_after:!1,label:"Remove Location",action:function(m){S.get_selected().forEach(x=>{S.delete_node(x)})}}}}}}).on("changed.jstree",(O,S)=>{let m=S.instance.get_selected();if(m.length>0){let X=S.instance.get_node(m[0]);if(X&&X.text){this.parentID_selected_node=X.parent,this.final_list=m.map(z=>S.instance.get_node(z));const x=this.final_list.filter(z=>z.original&&"device"===z.original.node_type).map(z=>z.original.mn);this.mnList=x,this.enableLocationButton=m.length>0,this.cdr.detectChanges()}else this.enableLocationButton=!1}else this.enableLocationButton=!1,this.cdr.detectChanges()});let re=!1;$("#search").on("input",()=>{re&&clearTimeout(re),re=setTimeout(()=>{const O=$("#search").val()?.toString().trim()||"";$("#MultiJSTree").jstree(!0).search(O),setTimeout(()=>{const m=$("#MultiJSTree .jstree-search").length;O&&0===m?$("#no-results").show():$("#no-results").hide()},200)},250)})}processLocation(oe){this.reportFormComponent.compareList=!0,this.reportFormComponent.OnchangeDropdown(oe,!0,(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){console.log("OnchangeDropdown has completed its operations.")}))}batchRequest(oe){let ue=[];ue=oe;const re=new Set,O=ue.map(m=>re.has(m.mn)?(console.warn(`Duplicate PK found: ${m.mn}`),null):(re.add(m.mn),{PK:m.mn,SK:this.SK_clientID})).filter(m=>null!==m);console.log("BatchReq",oe),console.log("b1",O);const S={type:"batchGet",table_name:"device_configuration",keys:O};this.All_Devices_Configuration=[],this.deviceConfig.postData(S).subscribe({next:m=>{if(this.dataSubject.next(m),this.All_Devices_Configuration=m,console.log("b2",this.All_Devices_Configuration),this.route.paramMap.subscribe(X=>{this.routeId=X.get("id")}),this.routeId){const X={id:this.routeId};this.cancelButton(),this.getSavedQueryHelper(X)}this.spinner.hide()},error:m=>{console.error("Error:",m),this.spinner.hide()}})}deleteTimeMachine(oe){let ue=oe,re=ue.id;if(oe.canDelete)if(this.superAdmin){if(ue&&ue.id){let S={PK:ue.id,SK:this.SK_clientID};var O=[ue.id,oe.name,Math.ceil((new Date).getTime()/1e3)];sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({position:"center",title:"Are you sure to delete user ID?",text:"Since, you have Admin rights you can delete ",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think"}).then(X=>{X.dismiss!==sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().DismissReason.cancel?this.api.DeleteReportsSavedQuery(S).then(x=>{this.addFromService(),x&&(this.fetchTimeMachineById(1,re,"delete",O),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire("Removed!"," TimeMachine removed successfully.","success"),setTimeout(()=>{this.loading()},1e3))}).catch(x=>{console.log("error for deleting",x)}):X.dismiss===sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().DismissReason.cancel&&sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire("Cancelled","TimeMachine not removed","error")})}}else sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire(`Contact ${oe.creator} !!`,"You dont have permission to delete","warning");else if(ue&&ue.id){let S={PK:ue.id,SK:this.SK_clientID};O=[ue.id,oe.name,Math.ceil((new Date).getTime()/1e3)],sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({position:"center",title:"Are you sure?",text:"You wont get these details back again",icon:"warning",showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think"}).then(m=>{m.dismiss!==sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().DismissReason.cancel?this.api.DeleteReportsSavedQuery(S).then(X=>{this.addFromService(),X&&(this.fetchTimeMachineById(1,re,"delete",O),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire("Removed!"," TimeMachine removed successfully.","success"),setTimeout(()=>{this.loading()},1e3))}).catch(X=>{console.log("error for deleting",X)}):m.dismiss===sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().DismissReason.cancel&&sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire("Cancelled","TimeMachine not removed","error")})}}setActiveTab(oe){this.activeTab=oe}get time_selectionFormControl(){return this.saveQuery.get("time_selection")}selectNodesFromMnList(oe){console.log("mnList laba ",oe),$("#MultiJSTree").jstree(!0).deselect_all();let ue=$("#MultiJSTree").jstree(!0);oe.length>0?oe.forEach(re=>{let O=re.id;console.log("node",re),O&&ue.get_node(O)?ue.select_node(O):console.warn(`Node with ID ${O} not found in the jstree.`)}):console.warn("mnList is empty."),this.cdr.detectChanges()}getSavedQueryHelper(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){ue.formPostionCheck=!0;let re=yield ue.reportFormComponent.getSavedQuery(oe);console.log("from table chk the mn list",re)})()}updateContent(){setTimeout(()=>{this.resizeGridItems()},300)}serializeGridsterItems(oe){return Array.isArray(oe)?oe.map((ue,re)=>ue&&"object"==typeof ue?{id:ue.id??`item-${re}`,x:"number"==typeof ue.x?ue.x:0,y:"number"==typeof ue.y?ue.y:0,cols:"number"==typeof ue.cols?ue.cols:1,rows:"number"==typeof ue.rows?ue.rows:1}:(console.warn(`\u26a0\ufe0f Skipping invalid item at index ${re}:`,ue),null)).filter(ue=>null!==ue):(console.warn("\u274c Invalid items input, expected an array."),[])}getGridsterConfig(oe,ue,re){const O={form:this.serializeGridsterItems(oe),charts:this.serializeGridsterItems(ue),table:this.serializeGridsterItems(re)};return JSON.stringify(O)}updatePositions(oe){console.log("positions",oe),oe=JSON.parse(oe),setTimeout(()=>{this.form=oe.form,this.charts=oe.charts,this.table=oe.table},3e3),this.cdr.detectChanges()}showSpinner(oe){oe&&this.spinner.show()}getAllUsersForm(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{console.log("ehat is thismagic",ue.SK_clientID+"#user",oe);const re=yield ue.api.GetLookupMasterTable(ue.SK_clientID+"#user",oe);if(console.log("c1",re),re&&re.items)if(console.log("c1",re),"string"==typeof re.items){let O=JSON.parse(re.items);if(Array.isArray(O)){for(let S=0;S<O.length;S++){const m=O[S];if(null==m)break;{const X=Object.keys(m)[0];ue.userInfo.push(m[X])}}yield ue.getAllUsersForm(oe+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else console.log("this.userInfo",ue.userInfo),ue.userInfo.forEach(O=>{ue.UserList.push({user_name:O.P1,user_id:O.P9})}),console.log("iam firt are yours")}catch(re){console.error("Error:",re)}})()}customPdfSetting(oe){console.log("pdfsettingform :>> ",oe),null!=this.tableData&&0!==this.tableData.length?(this.checPDFStyle=oe.option,this.spinner.show(),this.exportToPDFAllData()):sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Connot generate PDF",text:"Table data not detected, check again..."})}exportToPDFAllData(){var oe=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){if(null==oe.tableData||0===oe.tableData.length)return sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:"Table data not found. Check again",confirmButtonText:"Understood"}),void oe.spinner.hide();console.log(" this.saveQueryData[0]:>> ",oe.companyDetails),console.log(" this.saveQueryData[0] name:>> ",oe.companyDetails.companyName);const ue=oe.saveQueryData[0].reportsType;let re;const O=oe.saveQueryData[0].start_time,S=oe.saveQueryData[0].end_time,m=moment__WEBPACK_IMPORTED_MODULE_10___default()(O).format("MMMM Do YYYY, h:mm:ss a"),X=moment__WEBPACK_IMPORTED_MODULE_10___default()(S).format("MMMM Do YYYY, h:mm:ss a");switch(ue){case"Parameters":re="Live Data Report";break;case"Hourly consumption":re="Schedule Hour Data Report";break;case"Daily consumption":re="Daily Data Report";break;case"Monthly consumption":re="Schedule Monthly Data Report";break;case"Alerts":re="Alerts Data report";break;case"Audit trails":re="Audit trails Data Report"}const x=yield oe.exportChartAsImage(oe.chartInstance),z=oe.tableData;console.log("this.tableData :>> ",oe.tableData);let H=0;z.forEach(Ue=>{H=Math.max(H,Ue.columns.reduce((Le,ke)=>Le+oe.getColumnWidthAllData(oe.tableData[0].columns),0))}),Math.min(Math.max(H+40,595),800),console.log("this.companyLogo",oe.companyLogo);let R=oe.companyLogo||(yield oe.getImageBase64("/assets/media/Wimate_latest.png"));try{R=oe.isValidBase64Image(oe.companyLogo)?oe.companyLogo:yield oe.getImageBase64("/assets/media/Wimate_latest.png"),console.log("Company logo:",R)}catch(Ue){console.error("Error loading company logo:",Ue)}const T=yield oe.getImageBase64("/assets/media/wimate.png"),N={content:[{image:R,alignment:"center",width:300,margin:[0,20]},{stack:[{table:{widths:["10%","80%","10%"],body:[[{text:"",border:[!1,!1,!1,!1]},{stack:[{table:{widths:["100%"],body:[[{text:"General Information",bold:!0,fontSize:25,margin:[0,10,0,10],alignment:"center",fillColor:"#4e73df",color:"#fff",border:[!0,!0,!0,!0]}]]}},{table:{widths:["30%","70%"],body:[[{text:"Report Type",bold:!0,fontSize:25,margin:[0,10,0,10],alignment:"left",fillColor:"#f1f1f1",border:[!0,!0,!0,!0]},{text:`${re}`,fontSize:25,margin:[0,10,0,10],alignment:"left",fillColor:"#f1f1f1",border:[!0,!0,!0,!0]}],[{text:"Location",bold:!0,fontSize:25,margin:[0,10,0,10],alignment:"left"},{text:"Bangalore - Wimate",fontSize:25,margin:[0,10,0,10],alignment:"left"}],[{text:"Date Range",bold:!0,fontSize:25,margin:[0,10,0,10],alignment:"left",fillColor:"#f8f9fc"},{text:`From: ${m} To: ${X}`,fontSize:25,margin:[0,10,0,10],alignment:"left",fillColor:"#f8f9fc"}],[{text:"Company Name",bold:!0,fontSize:25,margin:[0,10,0,10],alignment:"left"},{text:`${oe.companyDetails.companyName}`,fontSize:25,margin:[0,10,0,10],alignment:"left"}]]},layout:{paddingLeft:()=>5,paddingRight:()=>5,paddingTop:()=>5,paddingBottom:()=>5}}],alignment:"center",margin:[0,50,0,100],pageBreak:"after"},{text:"",border:[!1,!1,!1,!1]}]]},layout:"noBorders"}]},{text:"Chart",margin:[0,100,0,20],fontSize:20,alignment:"center"},{image:x,alignment:"center",width:700,pageBreak:"after"}],footer:function(Ue,Le){return{columns:[{image:T,width:30,margin:[20,0,0,0]},{text:`Page ${Ue} of ${Le}`,alignment:"right",margin:[0,0,20,0]}]}},pageSize:{width:500,height:1e3}},L=[["#E3F2FD","#BBDEFB","#1976D2"],["#FCE4EC","#F8BBD0","#D81B60"],["#E8F5E9","#C8E6C9","#388E3C"],["#FFF3E0","#FFE0B2","#F57C00"],["#F3E5F5","#E1BEE7","#8E24AA"],["#FFEBEE","#FFCDD2","#D32F2F"],["#E0F7FA","#B2EBF2","#00838F"],["#F1F8E9","#DCEDC8","#388E3C"],["#FBE9E7","#FFCCBC","#D84315"],["#F9FBE7","#F0F4C3","#AFB42B"]];let Y=0;z.forEach((Ue,Le)=>{const ke=L[Y],[me,l,Me]=ke,ut=Ue.data[0][Ue.columns[0]],$e=Ue.columns.slice(1),Ct=[];for(let Ke=0;Ke<Ue.data.length;Ke+=50)Ct.push(Ue.data.slice(Ke,Ke+50));Ct.forEach((Ke,Wt)=>{const mr=[$e.map(nr=>({text:nr,style:{fontSize:15,bold:!0,alignment:"center",fillColor:Me,color:"white"}}))];Ke.forEach(nr=>{const Kr=$e.map(Pn=>nr[Pn]);mr.push(Kr)}),N.content.push({text:`Device Label: ${ut}`,style:"deviceLabel",margin:[0,10,0,10],alignment:"center",pageBreak:Le>0||Wt>0?"before":void 0},{table:{widths:Array($e.length+1).fill("*"),body:mr},layout:{fillColor:function(nr){return nr%2==0?me:l}},margin:[0,5,0,15],alignment:"center"})}),Y=(Y+1)%L.length}),N.styles={deviceLabel:{fontSize:16,bold:!0}};let te=0,pe=0;oe.tableData.forEach(Ue=>{Ue.data&&(te=Math.max(te,Ue.data.length)),Ue.columns&&(pe=Math.max(pe,Ue.columns.length))});let we=oe.calculatePageWidth(pe),Te=0;Te=pe>=50?2100+50*pe:pe<50&&pe>=10?2100+25*pe:1e3,we<595.28&&(we=595.28),Te<841.89&&(Te=841.89),N.pageSize={width:we,height:Te},console.log("tableData.column :>> ",oe.tableData[0]),N.content[0].width=Math.min(.35*Te,.35*we),N.content[3].width=Math.min(.6*Te,.6*we),N.content[3].margin=[0,200,0,20],pdfmake_build_pdfmake__WEBPACK_IMPORTED_MODULE_3___default().createPdf(N).download(`${re}_from_${m}_to${X}.pdf`),oe.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"success",title:"PDF Generated Sucessfully",showConfirmButton:!1,timer:2e3})})()}getColumnWidthAllData(oe){const O=this.tableData.map(D=>D.data.map(U=>U[oe])).flat().filter(D=>null!=D).map(D=>D.toString());if(0===O.length)return 100;const S=Math.max(...O.map(D=>D.length)),X=Math.min(S,800),G=Math.min(Math.max(8*X,50),200);return console.log("calculatedWidth",G),isNaN(G)?100:G}calculatePageWidth(oe){const[ue,re,O,S]=[12,510,950,35500];return Math.max(O,Math.min(O+(oe-ue)*(S-O)/(re-ue),S))}fetchDRData_redirect(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){yield ue.coreFetchData("dynamic_template",oe,"lookup_data_temp_dr","desc"),yield ue.coreFetchData("dynamic_report",oe,"lookup_data_temp_dre","desc")})()}coreFetchData(oe,ue,re,O){var S=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const m=yield S.api.GetLookupMasterTable(`${S.SK_clientID}#${oe}`,ue);if(m&&m.items)if("string"==typeof m.items){const X=JSON.parse(m.items);if(Array.isArray(X)){for(const x of X)if(x){const z=Object.keys(x)[0],{P1:H,P2:G,P3:D,P4:U,P5:R}=x[z];S[re].push([H,G,D,U,R])}yield S.coreFetchData(oe,ue+1,re,O)}else console.error("Invalid data format - not an array.")}else console.error("response.items is not a string.");else S[re].sort((X,x)=>"asc"===O?X[3]-x[3]:x[3]-X[3]),"dynamic_template"===oe?(S.listofDRIds=S[re].map(X=>X[0]),console.log("checkk",S.lookup_data_temp_dr)):"dynamic_report"===oe&&(S.listofDREIds=S[re].map(X=>X[0]),console.log("checkk",S.lookup_data_temp_dre))}catch(m){console.error(`Error in coreFetchData for ${oe}:`,m)}})()}loadDynamicWorkspace(oe){this.api.GetDynamicReports(oe,this.SK_clientID+"#dynamic_template").then(ue=>{if(ue)if(this.allPacketDetailsForUpdate=ue,this.fetchFileFromS3(ue),ue.filters&&"string"==typeof ue.filters){const re=JSON.parse(JSON.parse(ue.filters)).device_configs;re&&this.setDeviceFormValues(re)}else{let re;ue.filters&&(re=ue.filters),re&&this.setDeviceFormValues(re)}})}fetchFileFromS3(oe){this.templateService.downloadJsonFromS3({SK:oe.SK,PK:oe.PK,file_name:`${oe.PK}.json`}).subscribe(re=>{if(re&&re.body){const O=JSON.parse(re.body);this.parsedHtml=O.html,this.parsedCss=O.css}},re=>{console.error("Error fetching file from S3:",re)})}setDeviceFormValues(oe){oe.forEach(ue=>{const re=this.fb.group({device:[ue.device,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],keyValuePairs:this.fb.array([]),additionalKeyValuePairs:this.fb.array([])});ue.keyValuePairs.forEach(O=>{const S=this.fb.group({key:[O.key,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],value:[O.value,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required]});re.get("keyValuePairs").push(S)}),ue.additionalKeyValuePairs.forEach(O=>{const S=this.fb.group({key:[O.key,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],value:[O.value,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required]});re.get("additionalKeyValuePairs").push(S)}),this.device_configs.push(re)})}get device_configs(){return this.deviceForm.get("device_configs")}flattenKeyValuePairsByDevice(oe){const ue=this.device_configs.controls.findIndex(S=>S.get("device")?.value===oe);if(-1===ue)return void console.log("Device not found");const re=this.getKeyValuePairs(ue).value,O=this.getAdditionalKeyValuePairs(ue).value;this.flattenedDeviceConfig={},re.forEach(S=>{this.flattenedDeviceConfig[S.key]=S.value}),O.forEach(S=>{this.flattenedDeviceConfig[S.key]=S.value}),console.log("Flattened Device Config:",this.flattenedDeviceConfig)}getKeyValuePairs(oe){return this.device_configs?.at(oe)?.get("keyValuePairs")}getAdditionalKeyValuePairs(oe){return this.device_configs?.at(oe)?.get("additionalKeyValuePairs")}showChosenOne(){return this.device_configs?.controls.findIndex(ue=>ue.get("device")?.value===this.selectDevicforBillInvoice)}loadPDF(oe){this.helpersRegistered||(this.registerHandlebarsHelpers(),this.helpersRegistered=!0);const re=(me=>{const l={};return Object.entries(me).forEach(([Me,Ze])=>{"extraData"!==Me&&(l[Me]=Ze)}),Array.isArray(me.extraData)&&me.extraData.forEach(Me=>{"object"==typeof Me&&null!==Me&&Object.entries(Me).forEach(([Ze,ut])=>{"metaData"===Ze?"object"==typeof ut&&null!==ut&&!Array.isArray(ut)&&Object.entries(ut).forEach(([$e,Ct])=>{l[`${$e}_s`]=Ct}):"MM"===Ze||"MMv2"===Ze?"object"==typeof ut&&null!==ut&&!Array.isArray(ut)&&Object.entries(ut).forEach(([$e,Ct])=>{l[$e]=Ct}):l[Ze]=ut})}),l})(oe);this.flattenKeyValuePairsByDevice(this.selectDevicforBillInvoice);const m=1e3*(Number(re.SK)-19800),X=new Date(m).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),z=new Date(re["Date & time"]).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),H=new Date(re["Date & time"]),D=new Date(H.getFullYear(),H.getMonth()+1,1).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),U=new Date(re["Date & time"]),{financialYear:R,financialMonth:T,billNo1:N,billNo2:L,billNo3:Y}=this.getFinancialDetailsFromDate(U);let ee="";switch(this.flattenedDeviceConfig.billNo){case"1":ee=N;break;case"2":ee=L;break;case"3":ee=Y}const[te,pe,we]=z.split("/"),ge=new Date(`${we}-${pe}-${te}`).toLocaleDateString("en-GB",{month:"long",year:"numeric"}),Ce={...this.flattenedDeviceConfig,...re,currentDate:(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"2-digit",year:"numeric"}),fromDate:X,toDate:z,billingDate:D,financialYear:R,financialMonth:T,formattedMonthYear:ge,autoBillNo:ee},Oe=this.preprocessTemplate(this.parsedHtml),je=this.parsedCss,Ue=handlebars__WEBPACK_IMPORTED_MODULE_0__.compile(Oe);this.renderedHtml=Ue(Ce);const Le=`\n      <html>\n        <head>\n          <meta charset="UTF-8" />\n          <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n          <link\n            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"\n            rel="stylesheet"\n            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"\n            crossorigin="anonymous"\n          />\n          <style>${je}</style>\n        </head>\n        <body>${this.renderedHtml}</body>\n      </html>\n    `;this.previewHtmlContent=Le,this.pdfPreviewIframe.nativeElement.srcdoc=Le}downloadPdf(){const oe=document.createElement("div");oe.style.position="fixed",oe.style.left="-9999px";const ue=oe.attachShadow({mode:"open"}),re=document.createElement("style");re.textContent=this.parsedCss;const O=document.createElement("div");O.innerHTML=this.renderedHtml,ue.appendChild(re),ue.appendChild(O),document.body.appendChild(oe),setTimeout(()=>{html2pdf_js__WEBPACK_IMPORTED_MODULE_14___default()().set({filename:"BillingInvoice.pdf",html2canvas:{scale:4,useCORS:!0,allowTaint:!1,logging:!1}}).from(O).save().then(()=>{oe.remove()})},300)}preprocessTemplate(oe){return oe.replace(/\{\{\$(.*?)\$\}\}/g,"{{$1}}")}registerHandlebarsHelpers(){handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("sum",function(...oe){return oe.pop(),oe.reduce((ue,re)=>ue+parseFloat(re)||0,0)}),handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("average",function(...oe){oe.pop();const ue=oe.map(re=>parseFloat(re)||0);return ue.reduce((re,O)=>re+O,0)/ue.length}),handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("multiply",(oe,ue)=>parseFloat(oe)*parseFloat(ue)),handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("divide",(oe,ue)=>parseFloat(oe)/parseFloat(ue)),handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("subtract",(oe,ue)=>parseFloat(oe)-parseFloat(ue)),handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("formatCurrency",oe=>{const ue=parseFloat(oe);return isNaN(ue)?"Invalid value":ue.toLocaleString("en-IN",{style:"currency",currency:"INR"})}),handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("calculate",function(expression,context){let evaluated=expression;for(const oe in context.data.root)evaluated=evaluated.replace(new RegExp(`\\b${oe}\\b`,"g"),context.data.root[oe]);try{return eval(evaluated)}catch(oe){return console.error("Error evaluating:",oe),null}});let _currentRef=this;handlebars__WEBPACK_IMPORTED_MODULE_0__.registerHelper("calculateCurrency",function(expression,context){let evaluated=expression;for(const oe in context.data.root)evaluated=evaluated.replace(new RegExp(`\\b${oe}\\b`,"g"),context.data.root[oe]);try{const numberValue=parseFloat(eval(evaluated));if(isNaN(numberValue))return"Invalid value";const words=(0,number_to_words__WEBPACK_IMPORTED_MODULE_15__.toWords)(numberValue);return _currentRef.toTitleCase(words)}catch(oe){return console.error("Error evaluating expression:",oe),null}})}toTitleCase(oe){return oe.toLowerCase().replace(/\b\w/g,ue=>ue.toUpperCase())}getFinancialDetailsFromDate(oe=new Date){const ue=oe.getMonth()>=3?oe.getFullYear():oe.getFullYear()-1,re=`${ue}-${ue+1}`,O=oe.getMonth(),S=O>=3?O-2:O+10;return{financialYear:re,financialMonth:S,billNo1:S,billNo2:S+1,billNo3:S+2}}loadDynamicWorkspaceDRE(oe){this.All_Devices_ConfigurationDRE=[],this.All_RDTs_ConfigurationDRE=[],this.globalParameterMappingDRE=[],this.globalParameterMappingByDeviceDRE=[],this.AllParameterListDRE=[],this.globalScheduleParameterMappingByDeviceDRE=[],this.AllScheduleListDRE=[],this.parsedTables=[],this.summarizedTablesDRE=[],this.extractedColumnsDRE=[],this.reportFormDRE=this.fb.group({reportsType:["Parameters",_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],dateType:["today",_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],startDateTime:[new Date,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required],endDateTime:[new Date,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.kI.required]}),this.condFormatFormDRE=this.fb.group({rulesDRE:this.fb.array([])}),this.api.GetDynamicReports(oe.modelID,this.SK_clientID).then(ue=>{if(ue){if(this.allPacketDetailsForUpdate=ue,"string"==typeof ue.Others){const re=JSON.parse(ue.Others);"Parameters"==re[0].reportsType?(this.allReportsPermissions=["Parameters"],this.reportFormDRE.get("reportsType")?.setValue("Parameters")):"Schedule"==re[0].reportsType?(this.allReportsPermissions=["Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"],this.reportFormDRE.get("reportsType")?.setValue("Hourly consumption")):(this.allReportsPermissions=["Parameters","Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"],this.reportFormDRE.get("reportsType")?.setValue("Parameters"))}if(ue.Values)if("string"==typeof ue.Values)try{let re=JSON.parse(ue.Values);this.chartConfigs="string"==typeof re?JSON.parse(re):re}catch(re){console.error("\u274c Error parsing formulas:",re),this.chartConfigs=[]}else this.chartConfigs=ue.formulas;else console.warn("No formulas found in the response"),this.chartConfigs=[];this.loadExistingRulesDRE(JSON.parse(ue.filters)),this.batchRequestDRE(ue,oe,ue)}})}fetchFileFromS3DRE(oe,ue){this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",{action:"download",type:"xlsx",bucket:"dynamic-excel-reports",folder:`${oe.SK}/${oe.PK}`,fileName:oe.file_location_path_URl},{headers:{"x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(O=>{console.log("response>>:",O);let S=O.body;if(S)try{const m=atob(S),X=[];for(let H=0;H<m.length;H+=1024){const G=m.slice(H,H+1024),D=new Array(G.length);for(let U=0;U<G.length;U++)D[U]=G.charCodeAt(U);X.push(new Uint8Array(D))}const x=new Blob(X,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),z=new File([x],oe.file_location_path_URl,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.uploadedFile$.next(z),this.parseExcelFileforExtract(z,ue),console.log("File successfully retrieved and decoded:",z)}catch(m){this.spinner.hide(),console.error("Error decoding base64 string:",m),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({title:"Error",text:"There was an error processing the file.",icon:"error"})}else this.spinner.hide(),console.error("Invalid base64 string:",S),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({title:"Error",text:"The file format is invalid.",icon:"error"})},O=>{this.spinner.hide(),console.error("Error fetching file from S3:",O),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({title:"Error",text:"Unable to fetch file from the server.",icon:"error"})})}batchRequestDRE(oe,ue,re){if(oe&&oe.devices)try{const O=JSON.parse(oe.devices),S=new Set,m=O.filter(x=>x&&x.mn).map(x=>S.has(x.mn)?null:(S.add(x.mn),{PK:x.mn,SK:this.SK_clientID})).filter(Boolean);if(0===m.length)return void console.warn("No valid or unique device data to process.");const X={type:"batchGet",table_name:"device_configuration",keys:m};this.All_Devices_ConfigurationDRE=[],this.sharedService.postData(X).subscribe({next:x=>this.handleBatchDeviceResponseDRE(x,ue,re),error:x=>this.handleBatchDeviceErrorDRE(x)})}catch(O){console.error("Error parsing devices or processing batch request:",O)}else console.error("Invalid input: keys or devices are missing.")}handleBatchDeviceResponseDRE(oe,ue,re){this.All_Devices_ConfigurationDRE=oe;const O=[...new Set(this.All_Devices_ConfigurationDRE.map(S=>S.reading_device_type))];console.log("Batch Request Successful:",this.All_Devices_Configuration),this.batchRDtRequestDRE(O,ue,re)}handleBatchDeviceErrorDRE(oe){console.error("Error during batch request:",oe),this.spinner.hide()}batchRDtRequestDRE(oe,ue,re){if(!oe||!Array.isArray(oe))return void console.error("Invalid input: keys must be an array.");const O=new Set,S=oe.filter(X=>X&&!O.has(X)).map(X=>(O.add(X),{PK:X,SK:this.SK_clientID}));if(0===S.length)return void console.warn("No unique keys to process.");const m={type:"batchGet",table_name:"reading_device_type",keys:S};this.All_RDTs_ConfigurationDRE=[],this.sharedService.postData(m).subscribe({next:X=>this.handleBatchResponseDRE(X,ue,re),error:X=>this.handleBatchErrorDRE(X)})}handleBatchResponseDRE(oe,ue,re){this.All_RDTs_ConfigurationDRE=oe.map(x=>({allDetails:x,parameters:x.parameters})),console.log("rdt data>>>:",oe);const O=oe.reduce((x,z)=>(x[z.PK]=z.parameters.map(H=>H.parameterLabel),x),{}),S=oe.reduce((x,z)=>(x[z.PK]=z.parameters.map(H=>H.schedule_parameter_label).filter(H=>null!=H&&""!==H),x),{}),m=oe.reduce((x,z)=>(x[z.PK]=z.parameters.map(H=>({text:H.parameterLabel,value:H.parameterID})),x),{}),X=oe.reduce((x,z)=>(x[z.PK]=z.parameters.map((H,G)=>({text:H.schedule_parameter_label,value:H.schedule_parameter_label,index:G})).filter(H=>H.text&&""!==H.text.trim()),x),{});this.globalParameterMappingDRE=O,this.All_Devices_ConfigurationDRE.forEach(x=>{const z=O[x.reading_device_type],H=S[x.reading_device_type];z&&(this.globalParameterMappingByDeviceDRE[x.mn]=z,this.AllParameterListDRE[x.mn]=m[x.reading_device_type]),H&&(this.globalScheduleParameterMappingByDeviceDRE[x.mn]=H,this.AllScheduleListDRE[x.mn]=X[x.reading_device_type])}),console.log(" this.globalParameterMappingByDevice",this.globalParameterMappingByDeviceDRE),this.fetchFileFromS3DRE(re,ue),this.spinner.hide()}handleBatchErrorDRE(oe){console.error("Error during RDT batch request:",oe),this.spinner.hide()}addRule(){const oe=this.fb.group({device:[""],column:[""],operator:[">"],value:[""],valueFrom:[""],valueTo:[""],color:["#00FF00"]});this.rulesDRE.push(oe)}removeRule(oe){this.rulesDRE.removeAt(oe)}loadExistingRulesDRE(oe){"string"==typeof oe&&(oe=JSON.parse(oe)),oe&&oe.rules&&oe.rules.length>0?oe.rules.forEach(ue=>{this.rulesDRE.push(this.fb.group({device:[ue.device],column:[ue.column],operator:[ue.operator],value:["between"===ue.operator?"":ue.value??""],valueFrom:[ue.valueFrom],valueTo:[ue.valueTo],color:[ue.color]}))}):(console.warn("\u26a0\ufe0f No existing rules found. Initializing with an empty form."),this.addRule())}get rulesDRE(){return this.condFormatFormDRE.get("rulesDRE")}parseExcelFileforExtract(oe,ue){var re=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const O=yield oe.arrayBuffer(),S=xlsx__WEBPACK_IMPORTED_MODULE_27__.ij(O,{type:"array"});re.processSheetData(S.Sheets[S.SheetNames[0]],ue)}catch(O){console.error("Error reading file:",O)}})()}processSheetData(oe,ue){const re=xlsx__WEBPACK_IMPORTED_MODULE_27__.P6.sheet_to_json(oe,{header:1});this.parsedTables=this.parseData(re,oe["!merges"]||[]),console.log("this.parsedTables :>> ",this.parsedTables),"Parameters"===ue.excelReportType?this.reportsBodyReady(ue):this.reportsBodyReadyForSchedule(ue),this.cdr.detectChanges()}parseData(oe,ue){const re=[];let O=null,S=!1,m=[],X=!1,x=0;return oe.forEach((H,G)=>{const D=H[0]?.toString()||"";if(D.startsWith("#TABLESTART"))S=D.includes("_GROUPED"),O={headers:[],rows:[],merges:[],level:0},m=[],X=!1,x=G+1;else if(D.startsWith("#TABLEEND")){if(O){for(;m.length&&m[m.length-1].every(R=>!R||""===R);)m.pop();S&&m.length>1&&(O.groupHeaders=m.slice(0,-1),O.level=m.length-1),O.headers=(m[m.length-1]||[]).map((R,T)=>R&&""!==R.toString().trim()?R:`Column ${T+1}`),O.merges=ue.filter(R=>R.s.r>=x&&R.e.r<=G),re.push(O),O=null}}else O&&(X?O.rows.push(H.map(U=>U??"")):(m.push(H.map(R=>R??"")),H.some(R=>"string"==typeof R&&R.startsWith("$"))&&(X=!0)))}),re}reportsBodyReady(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){yield ue.reportsSection(oe),ue.generateReportDRE(oe)})()}reportsBodyReadyForSchedule(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){yield ue.reportsSectionSchedule(oe),ue.generateReportDRE(oe)})()}extractHeadersFromTabulator(oe){return this.parsedTables[oe]?this.parsedTables[oe].headers.map(O=>O.replace(/#.*?#/g,"").trim()).map(O=>{const[S,m]=O.replace("$","").split(".");return this.globalParameterMappingByDeviceDRE[S]&&this.globalParameterMappingByDeviceDRE[S].includes(m)?{device:S,parameter:m}:{}}):(console.error("Tabulator instance not found for tableIndex:",oe),[])}extractHeadersFromTabulatorSchedule(oe){return this.parsedTables[oe]?this.parsedTables[oe].headers.map(O=>O.replace(/#.*?#/g,"").trim()).map(O=>{const[S,m]=O.replace("$","").split(".");return this.globalScheduleParameterMappingByDeviceDRE[S]&&this.globalScheduleParameterMappingByDeviceDRE[S].includes(m)?{device:S,parameter:m}:{}}):(console.error("Tabulator instance not found for tableIndex:",oe),[])}reportsSection(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){ue.parsedTables.forEach((re,O)=>{ue.extractedColumnsDRE[`Table${O+1}`]=ue.extractHeadersFromTabulator(O)}),console.log("this.extractedColumns :>> ",ue.extractedColumnsDRE),ue.summarizeTables(ue.extractedColumnsDRE,2)})()}reportsSectionSchedule(oe){var ue=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){ue.parsedTables.forEach((re,O)=>{ue.extractedColumnsDRE[`Table${O+1}`]=ue.extractHeadersFromTabulatorSchedule(O)}),console.log("this.extractedColumns :>> ",ue.extractedColumnsDRE),ue.summarizeTables(ue.extractedColumnsDRE,2)})()}summarizeTables(oe,ue){this.summarizedTablesDRE=Object.keys(oe).map(re=>{const S={};return oe[re].forEach(X=>{X.device&&X.parameter&&(S[X.device]||(S[X.device]=[]),S[X.device].push(X.parameter))}),{tableName:re,devices:Object.keys(S).map(X=>{const x=S[X];return{device:X,totalParameters:x.length,parameters:x,isExpanded:!1,parametersToShow:x.slice(0,ue)}})}})}generateReportDRE(oe){const ue={};this.summarizedTablesDRE.forEach(H=>{H.devices.forEach(G=>{ue[G.device]||(ue[G.device]=[]),ue[G.device]=[...new Set([...ue[G.device],...G.parameters])]})}),console.log("Grouped Parameters by Device:",ue),this.summarizedTablesDRE.forEach(H=>{H.devices.forEach(G=>{const D=ue[G.device]||[];console.log(`Table: ${H.tableName}, Device: ${G.device}`),console.log(`Total Parameters (Grouped): ${D.length}`),console.log(`Parameters (Grouped): ${D}`)})});let re=[],O=[];Object.keys(ue).forEach((H,G)=>{const D=H;let U=[],R=[];if(D){const T=ue[H];T.length>0&&T.forEach(N=>{U.push("P"+(this.globalParameterMappingByDeviceDRE[D].findIndex(Y=>Y===N)+1));const L=this.AllScheduleListDRE?.[D];if(Array.isArray(L)){const Y=L.find(ee=>ee.value===N);Y&&"number"==typeof Y.index&&R.push("P"+(Y.index+1))}}),U&&(re.push(U),O.push(R))}}),console.log("value_test",re);const S={};Object.keys(ue).forEach(H=>{let G=!1;this.All_Devices_ConfigurationDRE.forEach(D=>{if(H===D.mn){const U=D.reading_device_type;S[U]?S[U].count++:S[U]={count:1},G=!0}}),G||console.warn(`Device ${H} does not have a corresponding RDT configuration.`)}),console.log("deviceRDTCount :>> ",S);const m=[];for(const[H,{count:G}]of Object.entries(S)){const D=this.All_RDTs_ConfigurationDRE.find(U=>U.allDetails.reading_device_type_id===H);if(D)for(let U=0;U<G;U++){const R={...D};m.push(R)}}let X=[],x=[];console.log("tempRDTConfigurations :>> ",m),Object.keys(ue).forEach((H,G)=>{X.push(H),x.push(ue[H])});let z={reportsType:oe.excelReportType,device:X,paramFilter:x,paramFilterDB:"Parameters"===oe.excelReportType?re:O,dateType:oe.dateType,start_time:oe.start_time,end_time:oe.end_time,start_range:oe.start_range,end_range:oe.end_range,modelID:oe.modelID,rdt:JSON.stringify(m)};console.log("formData :>> ",z),"Parameters"===oe.excelReportType?this.handleParameterDataDRE(z):"Custom Schedule Hour"===oe.excelReportType||"Custom Schedule Day"===oe.excelReportType?this.handleCustomOnSpotDayLiveDRE(z):this.handleShedhuleDataDRE(z)}handleParameterDataDRE(oe){this.saveQueryData=[];const ue=JSON.parse(JSON.stringify(oe));ue.reportsType="Dynamic Excel Report",ue.reportsQueryType=oe.reportsType,this.saveQueryData.push(ue),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[];let re=oe.paramFilter;const O={};oe.device.forEach((D,U)=>{O[D]=oe.paramFilter[U]||[]}),console.log("filteredData :",re),console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let x=[];for(let D=0;D<m.length;D++)x.push(m[D].parameters);console.log("Extracted Parameters",x),console.log("After mulActualData",m);const G=performance.now();this.reportApi.getReportsData(oe).then(D=>{const U=performance.now();if(console.log(`API call took ${U-G} milliseconds`),console.log("response chk",D),1===D.length&&null===D[0])return sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),void this.cdr.detectChanges();if(1===D.length){for(let Ue=0;Ue<D.length;Ue++)null===D[Ue]?this.cdr.detectChanges():console.log("continue the process");const R=D[0]?.data||[];console.log("historicalData",R);const T=performance.now(),N=Array.from(new Set(R.flatMap(Ue=>Ue.packet_info&&Ue.packet_info.MM?Object.keys(Ue.packet_info.MM):[])));console.log("propertyNames",N);const L={};R.forEach(Ue=>{const Le=1e3*Ue.SK;N.forEach(ke=>{L[ke]||(L[ke]=[]),Ue.packet_info&&Ue.packet_info.MM&&Ue.packet_info.MM[ke]?L[ke].push([Le,Ue.packet_info.MM[ke]]):console.warn(`packet.packet_info.MM or property ${ke} is not defined`)})});const Y=performance.now();console.log(`Grouping data took ${Y-T} milliseconds`),console.log("groupedData",L);const ee=Object.entries(L).map(([Ue,Le])=>{const ke=parseInt(Ue.slice(1))-1,me=S[ke];return{name:me?me.parameterLabel:Ue,data:Le.filter(Ze=>"string"!=typeof Ze[1])}});console.log("Formatted Highcharts Series:",ee);let te=ee.filter(Ue=>{const Le=Ue.name;return re.some(ke=>ke.includes(Le))});console.log(te.data),console.log(re),console.log("highchartsSeries paramFilter",te);const pe=N.map(Ue=>{const Le=parseInt(Ue.slice(1))-1;return S[Le]&&void 0!==S[Le].parameterLabel?S[Le].parameterLabel:Ue});N.unshift("Device label","Date & time"),pe.unshift("Device label","Date & time"),console.log("TABLE NAMES",pe);const we={columns:pe,data:R.map(Ue=>{const Le={};return N.forEach(ke=>{if("Device label"!==ke&&"Date & time"!==ke){const me=parseInt(ke.slice(1))-1,l=S&&Array.isArray(S)&&S[me]&&S[me].valuemapping?S[me].valuemapping:[];S[me]&&void 0!==S[me].parameterLabel?Ue.packet_info&&Ue.packet_info.MM&&ke in Ue.packet_info.MM?Le[S[me].parameterLabel]=this.getParamterValueDRE(Ue,ke,"Parameters",l):(Le[S[me].parameterLabel]=" ",console.warn(`Missing data for property: ${ke}`)):Ue.packet_info&&Ue.packet_info.MM&&ke in Ue.packet_info.MM?Le[ke]=Ue.packet_info.MM[ke]??" ":(Le[ke]=" ",console.warn(`Missing data for property: ${ke}`))}else"Device label"===ke?Le["Device label"]=Ue.packet_info?.MN??"Unknown Device":"Date & time"===ke?Le["Date & time"]=new Date(1e3*(Ue.SK-19800)).toDateString()+" "+new Date(1e3*(Ue.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),Le})},Te=we.data[0]["Device label"];let ge={};const Ce=this.All_Devices_Configuration.find(Ue=>Ue.mn===Te);ge[Te]=we,ge[Te].label=Ce.mn_label,console.log("angularDataTable:>>",we);const Oe=this.uploadedFile$.value;Oe&&this.parseExcelFileforExtractProcessMulti(Oe,ge),console.log("After filtering:",we.data),console.log("Angular DataTable Format:",we);const je=we.columns.filter(Ue=>{const Le=Ue;return re.some(ke=>ke.includes(Le))});je.unshift("Device label","Date & time"),we.columns=je,this.tableData.push(we),console.log("structure check",this.tableData)}else if(D.length>1){const T=D.reduce((ge,Ce)=>ge.concat(Ce?.data||[]),[]);console.log("allhistoricalData",T);const N={};T.forEach(ge=>{const Ce=ge.packet_info.MN;if(ge.packet_info&&ge.packet_info.MM){const Oe=Object.keys(ge.packet_info.MM);N[Ce]||(N[Ce]=new Set),Oe.forEach(je=>{N[Ce].add(je)})}}),console.log("propertyNamesByDevice",N);const L={};Object.keys(N).sort((ge,Ce)=>N[Ce].size-N[ge].size).forEach(ge=>{const Ce=N[ge];L[ge]={},Ce.forEach(Oe=>{L[ge][Oe]=[],T.forEach(je=>{if(je.packet_info&&je.packet_info.MM){const Le=je.packet_info.MM[Oe];"number"==typeof Le&&je.packet_info.MN===ge&&L[ge][Oe].push({x:1e3*je.SK,y:Le})}})})}),console.log("Matched Data By Device:",L);const ee=Object.entries(L).map(([ge,Ce],Oe)=>Object.entries(Ce).map(([Ue,Le])=>{const ke=parseInt(Ue.slice(1))-1,me=x[Oe][ke],l=me?me.parameterLabel:Ue,Me=Le.filter(Ze=>"string"!=typeof Ze.y);return{name:`${ge} : ${l}`,data:Me}})).flat();console.log("all Formatted Highcharts Series:",ee),re=re.map(ge=>ge.map(Oe=>Oe.trim()));let te=ee.filter(ge=>{const Ce=ge.name.split(":")[1].trim();return re.some(Oe=>Oe.includes(Ce))});console.log("param Filter",te);const pe={};Object.keys(N).sort((ge,Ce)=>N[Ce].size-N[ge].size),Object.keys(N).forEach((ge,Ce)=>{const Oe=Array.from(N[ge]),je=Oe.map(l=>{const Me=parseInt(l.slice(1))-1;return x[Ce][Me]&&void 0!==x[Ce][Me].parameterLabel?x[Ce][Me].parameterLabel:l});je.unshift("Device label","Date & time"),Oe.unshift("Device label","Date & time");const Ue={columns:je,data:T.map(l=>{if(l&&ge===l.packet_info.MN){const Me={};return Oe.forEach(Ze=>{if("Device label"!==Ze&&"Date & time"!==Ze){const ut=parseInt(Ze.slice(1))-1,$e=S&&Array.isArray(x[Ce])&&x[Ce][ut]&&x[Ce][ut].valuemapping?x[Ce][ut].valuemapping:[];x[Ce]&&x[Ce][ut]&&void 0!==x[Ce][ut].parameterLabel?Me[x[Ce][ut].parameterLabel]=l&&l.packet_info.MM&&void 0!==l.packet_info.MM[Ze]?this.getParamterValueDRE(l,Ze,"Parameters",$e):" ":Me[Ze]=l&&l.packet_info.MM&&void 0!==l.packet_info.MM[Ze]?l.packet_info.MM[Ze]:" "}else"Device label"===Ze?Me["Device label"]=l.packet_info?.MN??"Unknown Device":"Date & time"===Ze?Me["Date & time"]=new Date(1e3*(l.SK-19800)).toDateString()+" "+new Date(1e3*(l.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),Me}return null}).filter(l=>null!==l)},Le=this.All_Devices_Configuration.find(l=>l.mn===ge);pe[ge]=Ue,pe[ge].label=Le.mn_label,console.log("Data Tables:",pe);const ke=O[ge]||[],me=pe[ge].columns.filter(l=>ke.some(Me=>Me.includes(l.trim())));me.unshift("Device label","Date & time"),pe[ge].columns=me,this.tableData.push(pe[ge])}),console.log("structure check",this.tableData),console.log("Data Tables:",pe);const Te=this.uploadedFile$.value;Te&&this.parseExcelFileforExtractProcessMulti(Te,pe)}else this.cdr.detectChanges()}).catch(D=>{this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",D)})}getParamterValueDRE(oe,ue,re,O){try{return this.getGeneratedHtmlDRE(O,oe?.packet_info?.MM[ue]||"")}catch{return oe?.packet_info?.MM?.[ue]??" "}}getGeneratedHtmlDRE(oe,ue){if(oe&&Array.isArray(oe)){const re=oe.find(O=>O.vm_value===ue);if(re)return re.vm_label}return ue}handleShedhuleDataDRE(oe){this.saveQueryData=[];const ue=JSON.parse(JSON.stringify(oe));ue.reportsType="Dynamic Excel Report",ue.reportsQueryType=oe.reportsType,this.saveQueryData.push(ue),this.spinner.show(),this.charts=[],this.table=[],this.tableData=[];let re=oe.paramFilter;const O={};oe.device.forEach((z,H)=>{O[z]=oe.paramFilter[H]||[]}),console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let x={};for(let z=0;z<m.length;z++){const H=m[z]?.parameters,G=m[z]?.allDetails?.PK;H&&G&&(x[G]=H)}console.log("Extracted Parameters",x),console.log(" After mulActualData",m),this.reportApi.getReportsData(oe).then(z=>{if(1===z.length){const H=z[0]?.data||[];console.log("historicalData",H);const G=Array.from(new Set(H.flatMap(we=>Object.keys(we.MM))));console.log("propertyNames",G);const D={};H.forEach(we=>{const Te=1e3*we.SK;G.forEach(ge=>{D[ge]||(D[ge]=[]),D[ge].push([Te,we.MM[ge]])})}),console.log("groupedData",D);const U=Object.entries(D).map(([we,Te])=>{const ge=parseInt(we.slice(1))-1,Ce=S[ge];return{name:Ce?Ce.schedule_parameter_label:we,data:Te.filter(Ue=>"string"!=typeof Ue[1])}});console.log("Formatted Highcharts Series:",U);const R=U.filter(we=>{const Te=we.name;return re.some(ge=>ge.includes(Te))});console.log("highchartsSeries paramFilter",R);const T=G.map(we=>{const Te=parseInt(we.slice(1))-1;return S[Te]&&void 0!==S[Te].schedule_parameter_label?S[Te].schedule_parameter_label:we});G.unshift("Device label","Date & time","Calculated Time","Time Generated"),T.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("TABLE NAMES",T);const N={columns:T,data:H.map(we=>{const Te={};return G.forEach(ge=>{if("Device label"!==ge&&"Date & time"!==ge&&"Calculated Time"!==ge&&"Time Generated"!==ge){const Ce=parseInt(ge.slice(1))-1;S[Ce]&&void 0!==S[Ce].schedule_parameter_label?Te[S[Ce].schedule_parameter_label]=we.MM[ge]??" ":Te[ge]=we.MM[ge]??" "}else if("Device label"===ge){let Ce=we.PK;Ce=Ce.split("#")[1],Te["Device label"]=Ce??"Unknown Device"}else"Date & time"===ge?Te["Date & time"]=new Date(1e3*(we.SK-19800)).toDateString()+" "+new Date(1e3*(we.SK-19800)).toLocaleTimeString():"Calculated Time"===ge?Te["Calculated Time"]=this.convertToReadableFormat(we.time_calculated):"Time Generated"===ge?Te["Time Generated"]=this.convertToReadableFormat1(we.time_generated):console.log("Invialid column")}),Te})},L=N.data[0]["Device label"];let Y={};const ee=this.All_Devices_Configuration.find(we=>we.mn===L);Y[L]=N,Y[L].label=ee.mn_label,console.log("angularDataTable:>>",N);const te=this.uploadedFile$.value;te&&this.parseExcelFileforExtractProcessMulti(te,Y),console.log("Angular DataTable Format:",N);const pe=N.columns.filter(we=>{const Te=we;return re.some(ge=>ge.includes(Te))});pe.unshift("Device label","Date & time","Calculated Time","Time Generated"),N.columns=pe,this.tableData.push(N)}else if(z.length>1){const G=z.reduce((te,pe)=>te.concat(pe?.data||[]),[]);console.log("allhistoricalData",G);const D={};G.forEach(te=>{let pe=te.PK;pe=pe.split("#")[1];const Te=pe,ge=Object.keys(te.MM);D[Te]||(D[Te]=new Set),ge.forEach(Ce=>{D[Te].add(Ce)})}),console.log("propertyNamesByDevice",D);const U={};Object.keys(D).sort((te,pe)=>D[pe].size-D[te].size).forEach(te=>{const pe=D[te];U[te]={},pe.forEach(we=>{U[te][we]=[],G.forEach(Te=>{const ge=1e3*Te.SK,Ce=Te.MM[we];let Oe=Te.PK;Oe=Oe.split("#")[1],"number"==typeof Ce&&Oe===te&&U[te][we].push({x:ge,y:Ce})})})}),console.log("Matched Data By Device:",U);const T=Object.entries(U).map(([te,pe],we)=>{const Te=this.All_Devices_Configuration.find(Oe=>Oe.PK===te).reading_device_type;return Object.keys(pe).sort((Oe,je)=>parseInt(Oe.replace(/\D/g,""),10)-parseInt(je.replace(/\D/g,""),10)).map(Oe=>{const je=parseInt(Oe.replace(/\D/g,""),10)-1,Le=x[Te]?.[je]?.schedule_parameter_label||Oe,ke=(pe[Oe]||[]).filter(me=>me?.y&&"string"!=typeof me.y);return{name:`${te} : ${Le}`,data:ke}})}).flat();console.log("all Formatted Highcharts Series:",T),re=re.map(te=>te.map(we=>we.trim())),T.filter(te=>{const pe=te.name.split(":")[1].trim();return re.some(we=>we.includes(pe))});const L={},Y=Object.keys(D).sort((te,pe)=>D[pe].size-D[te].size);console.log("PROPERTY NAME DEVICE:",D),console.log("SD",Y),Object.keys(D).forEach((te,pe)=>{const Te=this.All_Devices_Configuration.find(ke=>ke.PK===te)?.reading_device_type??"default",ge=Array.from(D[te]).sort((ke,me)=>parseInt(ke.replace(/\D/g,""),10)-parseInt(me.replace(/\D/g,""),10)),Ce=ge.map(ke=>{const me=parseInt(ke.slice(1))-1;return x[Te]?.[me]?.schedule_parameter_label??ke});Ce.unshift("Device label","Date & time","Calculated Time","Time Generated"),ge.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("Device:",te,"findRDT:",Te,"Properties:",ge);const Oe={columns:Ce,data:G.map(ke=>{let me=ke.PK;if(me=me.split("#")[1],ke&&te===me){const Me={};return ge.forEach(Ze=>{const ut=parseInt(Ze.slice(1))-1;["Device label","Date & time","Calculated Time","Time Generated"].includes(Ze)?"Device label"===Ze?Me["Device label"]=me:"Date & time"===Ze?Me["Date & time"]=new Date(1e3*(ke.SK-19800)).toDateString()+" "+new Date(1e3*(ke.SK-19800)).toLocaleTimeString():"Calculated Time"===Ze?Me["Calculated Time"]=this.convertToReadableFormat(ke.time_calculated):"Time Generated"===Ze&&(Me["Time Generated"]=this.convertToReadableFormat1(ke.time_generated)):void 0!==x[Te]?.[ut]?.schedule_parameter_label?Me[x[Te][ut].schedule_parameter_label]=ke.MM[Ze]??" ":Me[Ze]=ke.MM[Ze]??" "}),Me}return null}).filter(ke=>null!==ke)},je=this.All_Devices_Configuration.find(ke=>ke.mn===te);L[te]=Oe,L[te].label=je.mn_label,console.log("Data Tables:",L),console.log("Data Tables:",L);const Ue=O[te]||[],Le=L[te].columns.filter(ke=>Ue.some(me=>me.includes(ke.trim())));Le.unshift("Device label","Date & time","Calculated Time","Time Generated"),L[te].columns=Le,this.tableData.push(L[te]),console.log("Final Table Structure:",this.tableData)});const ee=this.uploadedFile$.value;ee&&this.parseExcelFileforExtractProcessMulti(ee,L),console.log("Data Tables:",L)}else this.cdr.detectChanges()}).catch(z=>{this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",z)})}handleCustomOnSpotDayLiveDRE(oe){this.saveQueryData=[];const ue=JSON.parse(JSON.stringify(oe));ue.reportsType="Dynamic Excel Report",ue.reportsQueryType=oe.reportsType,this.saveQueryData.push(ue),this.spinner.show(),this.tableData=[],this.charts=[],this.table=[];let re=oe.paramFilter;const O={};oe.device.forEach((z,H)=>{O[z]=oe.paramFilter[H]||[]}),console.log("Time Machine Data",oe);let S=JSON.parse(oe.rdt);S=S[0].parameters,console.log("Parameters",S);let m=JSON.parse(oe.rdt);console.log("Before mulActualData",m);let x=[];for(let z=0;z<m.length;z++)x.push(m[z].parameters);console.log("Extracted Parameters",x),console.log(" After mulActualData",m),this.reportApi.getReportsData(oe).then(z=>{if(1===z.length){if(1===z.length&&null===z[0])return this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:`${oe.device[0]} does not have any data.`,confirmButtonText:"Understood"}),void this.cdr.detectChanges();for(let we=0;we<z.length;we++)null===z[we]?(this.cdr.detectChanges(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${oe.device[we]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",re),console.log("continue the process"));const H=z?.[0]?.data||[];console.log("historicalData",H);const G=Array.from(new Set(Object.values(H).flatMap(we=>Object.keys(we.MM))));console.log("Property Names:",G);const D={};Object.entries(H).forEach(([we,Te])=>{const ge=new Date(we).getTime();console.log(`Processing packet for date ${we} with timestamp ${ge}:`,Te.MM),G.forEach(Ce=>{D[Ce]||(D[Ce]=[]);const Oe=Te.MM[Ce];console.log(`Adding data point for ${Ce}:`,{x:ge,y:Oe}),D[Ce].push([ge,Oe])})}),console.log("Grouped Data:",D);const U=Object.entries(D).map(([we,Te])=>{const ge=parseInt(we.slice(1))-1,Ce=S[ge];return{name:Ce?Ce.schedule_parameter_label:we,data:Te.filter(Ue=>"string"!=typeof Ue[1])}});console.log("Formatted Highcharts Series:",U);const R=U.filter(we=>{const Te=we.name;return re.some(ge=>ge.includes(Te))});console.log("highchartsSeries paramFilter",R);const T=G.map(we=>{const Te=parseInt(we.slice(1))-1;return S[Te]&&void 0!==S[Te].schedule_parameter_label?S[Te].schedule_parameter_label:we});G.unshift("Device label","Date & time","Calculated Time"),T.unshift("Device label","Date & time","Calculated Time"),console.log("TABLE NAMES",T);const N={columns:T,data:Object.entries(H).map(([we,Te])=>{const ge={};return G.forEach(Ce=>{if("Device label"!==Ce&&"Date & time"!==Ce&&"Calculated Time"!==Ce){const Oe=parseInt(Ce.slice(1))-1;S[Oe]&&void 0!==S[Oe].schedule_parameter_label?ge[S[Oe].schedule_parameter_label]=Te.MM[Ce]??" ":ge[Ce]=Te.MM[Ce]??" "}else"Device label"===Ce?ge["Device label"]=Te.MN:"Date & time"===Ce?ge["Date & time"]=Te.DT:"Calculated Time"===Ce?ge["Calculated Time"]=Te.time_calculated:console.log("Invialid column")}),ge})};console.log("Angular DataTable Format:",N);const L=N.data[0]["Device label"];let Y={};const ee=this.All_Devices_Configuration.find(we=>we.mn===L);Y[L]=N,Y[L].label=ee.mn_label,console.log("angularDataTable:>>",N);const te=this.uploadedFile$.value;te&&this.parseExcelFileforExtractProcessMulti(te,Y);const pe=N.columns.filter(we=>{const Te=we;return re.some(ge=>ge.includes(Te))});pe.unshift("Device label","Date & time","Calculated Time"),N.columns=pe,this.tableData.push(N)}else if(z.length>1){let H=[];for(let te=0;te<z.length;te++)null!==z[te]?this.cdr.detectChanges():(null===z[te]&&(H.push(oe.device[te]),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"warning",title:"Warning: No Data",text:` ${H.join(", ")} does not have any data.`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",re));const G=z.reduce((te,pe)=>te.concat(pe?.data||[]),[]);console.log("allhistoricalData",G);const D={};G.forEach(te=>{Object.entries(te).forEach(([pe,we])=>{if(we&&we.MM&&we.MN){const Te=we.MN,ge=Object.keys(we.MM);D[Te]||(D[Te]=new Set),ge.forEach(Ce=>{D[Te].add(Ce)})}else console.warn(`Skipping invalid packet for date ${pe}:`,we)})}),console.log("propertyNamesByDevice",D);const U={};Object.keys(D).sort((te,pe)=>D[pe].size-D[te].size).forEach(te=>{const pe=D[te];U[te]={},pe.forEach(we=>{U[te][we]=[],G.forEach(Te=>{Object.values(Te).forEach(ge=>{const Ce=ge.DT,Oe=ge.MM?.[we];"number"==typeof Oe&&ge.MN===te&&U[te][we].push({x:Ce,y:Oe})})})})}),console.log("Matched Data By Device:",U);const T=Object.entries(U).map(([te,pe],we)=>Object.entries(pe).map(([ge,Ce])=>{const Oe=parseInt(ge.slice(1))-1,je=x[we][Oe],Ue=je?je.schedule_parameter_label:ge,Le=Ce.filter(ke=>"string"!=typeof ke.y);return{name:`${te} : ${Ue}`,data:Le.map(ke=>[ke.x,ke.y])}})).flat();console.log("all Formatted Highcharts Series:",T),T.filter(te=>{const pe=te.name.split(":")[1].trim();return re.some(we=>we.includes(pe))});const L={},Y=Object.keys(D).sort((te,pe)=>D[pe].size-D[te].size);console.log("PROPERTY NAME DEVICE:",D),console.log("SD",Y),Object.keys(D).forEach((te,pe)=>{const we=Array.from(D[te]),Te=we.map(Ue=>{const Le=parseInt(Ue.slice(1))-1;return x[pe][Le]&&void 0!==x[pe][Le].schedule_parameter_label?x[pe][Le].schedule_parameter_label:Ue});console.log("Check Props",we),console.log("Check Result"),Te.unshift("Device label","Date & time","Calculated Time"),we.unshift("Device label","Date & time","Calculated Time");const ge={columns:Te,data:G.flatMap(Ue=>Object.values(Ue).map(Le=>{if(Le&&te===Le.MN){const ke={};return we.forEach(me=>{if("Device label"!==me&&"Date & time"!==me&&"Calculated Time"!==me&&"Time Generated"!==me){const l=parseInt(me.slice(1))-1;x[pe]?.[l]&&void 0!==x[pe][l].schedule_parameter_label?ke[x[pe][l].schedule_parameter_label]=Le.MM?.[me]??" ":ke[me]=Le.MM?.[me]??" "}else"Device label"===me?ke["Device label"]=Le.MN:"Date & time"===me?ke["Date & time"]=Le.DT:"Calculated Time"===me?ke["Calculated Time"]=Le.time_calculated:console.log("Invalid column:",me)}),ke}return null})).filter(Ue=>null!==Ue)},Ce=this.All_Devices_Configuration.find(Ue=>Ue.mn===te);L[te]=ge,L[te].label=Ce.mn_label,console.log("Data Tables:",L);const Oe=O[te]||[],je=L[te].columns.filter(Ue=>Oe.some(Le=>Le.includes(Ue.trim())));je.unshift("Device label","Date & time","Calculated Time"),L[te].columns=je,this.tableData.push(L[te]),console.log("structure check",this.tableData)});const ee=this.uploadedFile$.value;ee&&this.parseExcelFileforExtractProcessMulti(ee,L),console.log("Data Tables:",L)}else this.cdr.detectChanges();this.spinner.hide()}).catch(z=>{this.spinner.hide(),sweetalert2__WEBPACK_IMPORTED_MODULE_9___default().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",z)})}parseExcelFileforExtractProcessMulti(oe,ue){var re=this;return(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_26__.Z)(function*(){try{const O=yield oe.arrayBuffer(),S=xlsx__WEBPACK_IMPORTED_MODULE_27__.ij(O,{type:"array"});re.processSheetDataProcessMulti(S.Sheets[S.SheetNames[0]],ue)}catch(O){re.spinner.hide(),console.error("Error reading file:",O)}})()}processSheetDataProcessMulti(oe,ue){const re=xlsx__WEBPACK_IMPORTED_MODULE_27__.P6.sheet_to_json(oe,{header:1});console.log("Sheet Data:>>",re),console.log("fetchedData>>",ue);const S=this.parseData(re,oe["!merges"]||[]),m={},X={};S.forEach((G,D)=>{G.groupHeaders&&(m[D]=G.groupHeaders.length),G.merges&&(X[D]=G.merges,delete G.merges)});const x={sheetData:re,mergeInfo:m,mergeRanges:X,fetchedData:ue,conditionalFormatting:this.formatRulesForLambdaDRE(),chartConfig:{charts:this.chartConfigs}},z={mergeInfo:m,mergeRanges:X,sheetData:re,conditionalFormatting:this.formatRulesForLambdaDRE(),chartConfig:{charts:this.chartConfigs}};this.saveQueryData[1]=JSON.stringify(z),this.excelService.generateReport("k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH",x).subscribe(G=>{this.spinner.hide();const D=G.body;if(D)try{const U=atob(D),R=[];for(let Y=0;Y<U.length;Y+=1024){const ee=U.slice(Y,Y+1024),te=new Array(ee.length);for(let pe=0;pe<ee.length;pe++)te[pe]=ee.charCodeAt(pe);R.push(new Uint8Array(te))}const T=new Blob(R,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),N=new File([T],"dynamic_report.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),L=document.createElement("a");L.href=URL.createObjectURL(N),L.download="dynamic_report.xlsx",L.click()}catch(U){console.error("Error processing the Base64 file:",U)}},G=>{this.spinner.hide(),console.error("Error generating report:",G)})}formatRulesForLambdaDRE(){const oe={};return this.rulesDRE.value.forEach(ue=>{const re=ue.device,O=ue.column;if(!re||!O)return;oe[re]||(oe[re]={}),oe[re][O]||(oe[re][O]=[]);let S="between"===ue.operator?[Number(ue.valueFrom),Number(ue.valueTo)]:Number(ue.value);oe[re][O].push({operator:ue.operator,value:S,color:ue.color.replace("#","")})}),oe}genrateDynamicEXcel(oe){this.userInputDRE&&this.generateReportDRE(this.userInputDRE)}toggleDragMode(){this.allowDrag=!this.allowDrag,this.options&&this.options.draggable&&(this.options.draggable.enabled=this.allowDrag),this.options&&this.options.resizable&&(this.options.resizable.enabled=this.allowDrag),this.options.api&&this.options.api.optionsChanged&&this.options.api.optionsChanged()}checkUniqueIdentifier(oe){this.errorForUniqueID="";for(let ue=0;ue<this.listofTimeMachineIds.length;ue++)oe===this.listofTimeMachineIds[ue]&&(this.errorForUniqueID="Saved Query already exists")}}return _class=ReportsMainComponent,(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(ReportsMainComponent,"\u0275fac",function oe(ue){return new(ue||_class)(_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(src_services_reports_api_service__WEBPACK_IMPORTED_MODULE_16__.H),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(src_app_API_service__WEBPACK_IMPORTED_MODULE_28__.t),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_20__.sBO),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(ngx_spinner__WEBPACK_IMPORTED_MODULE_29__.t2),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_30__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_forms__WEBPACK_IMPORTED_MODULE_25__.qu),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_material_snack_bar__WEBPACK_IMPORTED_MODULE_31__.ux),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_shared_service__WEBPACK_IMPORTED_MODULE_17__.F),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_shared_service__WEBPACK_IMPORTED_MODULE_17__.F),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_platform_browser__WEBPACK_IMPORTED_MODULE_32__.H7),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_dynamic_template_components_template_service__WEBPACK_IMPORTED_MODULE_33__.E),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_shared_service__WEBPACK_IMPORTED_MODULE_17__.F),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_core__WEBPACK_IMPORTED_MODULE_20__.Qsj),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_common__WEBPACK_IMPORTED_MODULE_34__.K0),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_shared_service__WEBPACK_IMPORTED_MODULE_17__.F),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(src_services_location_premission_service__WEBPACK_IMPORTED_MODULE_18__.G),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_common_http__WEBPACK_IMPORTED_MODULE_35__.eN),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_dynamic_excel_components_excel_service__WEBPACK_IMPORTED_MODULE_36__.x),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_30__.gz))}),(0,_Users_joy_Desktop_Final_Clouser_Cv2_main_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_21__.Z)(ReportsMainComponent,"\u0275cmp",_angular_core__WEBPACK_IMPORTED_MODULE_20__.Xpm({type:_class,selectors:[["app-reports-main"]],viewQuery:function oe(ue,re){if(1&ue&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(_c0,5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(_cron_editor_tm_cron_editor_tm_component__WEBPACK_IMPORTED_MODULE_37__.T,5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(_reports_charts_reports_charts_component__WEBPACK_IMPORTED_MODULE_11__.Z,5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(_reports_form_reports_form_component__WEBPACK_IMPORTED_MODULE_12__.c,5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(_reports_table_reports_table_component__WEBPACK_IMPORTED_MODULE_13__.j,5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(angular_datatables__WEBPACK_IMPORTED_MODULE_1__.G,5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Gf(angular_gridster2__WEBPACK_IMPORTED_MODULE_24__.IM,5)),2&ue){let O;_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.pdfPreviewIframe=O.first),_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.cronEditorTMComponent=O.first),_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.reportChartComponent=O.first),_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.reportFormComponent=O.first),_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.reportTableComponent=O.first),_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.datatableElement=O.first),_angular_core__WEBPACK_IMPORTED_MODULE_20__.iGM(O=_angular_core__WEBPACK_IMPORTED_MODULE_20__.CRH())&&(re.gridsterItems=O)}},features:[_angular_core__WEBPACK_IMPORTED_MODULE_20__.TTD],decls:210,vars:38,consts:[[1,"d-flex","flex-column","flex-root"],[1,"d-flex","flex-row","flex-column-fluid","page"],["id","kt_aside",1,"aside","aside-left","aside-fixed"],["id","kt_wrapper",1,"d-flex","flex-column","flex-row-fluid","wrapper"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[1,"card",2,"width","100%","height","100vh","background-color","var(--bs-app-bg-color) !important"],[1,"card-body","p-0","pb-0",2,"background-color","var(--bs-app-bg-color) !important","padding","1% !important"],[2,"background","var(--bs-gray-200) !important","border-radius","5px","padding","1%",3,"options"],[3,"ngStyle","item",4,"ngFor","ngForOf"],[4,"ngIf"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["id","exampleModal","aria-labelledby","exampleModal",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content",2,"width","900px","transform","translate(-20%, 0px)"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"card","shadow-none","rounded-0","w-100"],[1,"card","card-custom"],[1,"card-header","card-header-stretch","overflow-auto","d-flex","justify-content-between"],[1,"d-flex","flex-grow-1","justify-content-around"],["role","tablist",1,"nav","nav-stretch","nav-line-tabs","fw-bold","border-transparent"],[1,"nav-item"],["role","Datatype",1,"nav-link","cursor-pointer",3,"ngClass","click"],["role","Settings",1,"nav-link","cursor-pointer",3,"ngClass","click"],[1,"tab-content",3,"formGroup"],[1,"tab-pane",3,"ngClass"],[1,"fv-row"],[1,"card-body"],[1,"container"],[1,"row","mb-6"],[1,"col-lg-4","col-form-label","required","fw-bold","fs-6"],[1,"col-lg-8","fv-row"],["type","text","placeholder","ID","formControlName","PK",1,"form-control","form-control-lg","form-control-solid",3,"keyup"],[2,"color","#fc1900"],["type","text","placeholder","Name","formControlName","name",1,"form-control","form-control-lg","form-control-solid"],["class","row mb-6",4,"ngIf"],[1,"form-check","form-check-inline"],["type","checkbox","id","mailCheckbox","formControlName","mail",1,"form-check-input"],["for","mailCheckbox",1,"form-check-label"],["type","checkbox","id","smsCheckbox","formControlName","SMS",1,"form-check-input"],["for","smsCheckbox",1,"form-check-label"],["type","checkbox","id","telegramCheckbox","formControlName","Telegram",1,"form-check-input"],["for","telegramCheckbox",1,"form-check-label"],["type","text","placeholder","Description","formControlName","description",1,"form-control","form-control-lg","form-control-solid"],[1,"row","mb-2"],[3,"timeSelectionControl"],[1,"form-check","form-check-inline","mt-2"],["type","checkbox","id","chart_enable","formControlName","chart_enable",1,"form-check-input"],["name","mail_type","formControlName","mail_type",1,"form-select","form-select-solid","form-select-lg"],["disabled","true",3,"value","selected"],[3,"value"],["type","radio","id","a4Page","value","A4","formControlName","pdf_type",1,"form-check-input"],["for","a4Page",1,"form-check-label"],["type","radio","id","compressColumn","value","Compress","formControlName","pdf_type",1,"form-check-input"],["for","compressColumn",1,"form-check-label"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-danger"],["closeModal",""],["type","button","class","btn btn-sm btn-primary not-allowed","data-bs-dismiss","modal",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-sm btn-primary not-allowed","data-bs-dismiss","modal",3,"click",4,"ngIf"],["id","view_modal_lookup1","aria-labelledby","view_modal_lookup1",1,"modal","fade"],[1,"modal-title"],[1,"card-body","py-3"],[1,"table-responsive",2,"margin","20px"],["id","time_machine",1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4"],[1,"d-flex","position-fixed","fw-bolder","zindex-2","mt-20","gap-2",2,"top","1%","z-index","100","right","44px","flex-direction","column"],[1,"myMenu"],["type","checkbox","href","#","name","myMenu-open","id","myMenu-open",1,"myMenu-open"],["for","myMenu-open",1,"myMenu-open-button"],[1,"hamburger","hamburger-1"],[1,"hamburger","hamburger-2"],[1,"hamburger","hamburger-3"],["data-bs-toggle","modal","title","Search Query","data-bs-target","#view_modal_lookup1",1,"myMenu-item",3,"click"],[1,"fa","fa-search",2,"color","white"],["title","Toggle Drag Mode",1,"myMenu-item",3,"click"],[2,"color","white",3,"ngClass"],["data-bs-toggle","modal","title","Help guide",1,"myMenu-item"],[1,"bi","bi-question-circle",2,"color","white"],["xmlns","http://www.w3.org/2000/svg","version","1.1"],["id","shadowed-goo"],["in","SourceGraphic","result","blur","stdDeviation","10"],["in","blur","mode","matrix","values","1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7","result","goo"],["in","goo","stdDeviation","3","result","shadow"],["in","shadow","mode","matrix","values","0 0 0 0 0  0 0 0 0 0  0 0 0 0 0  0 0 0 1 -0.2","result","shadow"],["in","shadow","dx","1","dy","1","result","shadow"],["in2","shadow","in","goo","result","goo"],["in2","goo","in","SourceGraphic","result","mix"],["id","goo"],["id","myLocationTM","data-bs-backdrop","static","tabindex","-1",1,"modal"],[1,"modal-content",2,"width","400px","transform","translate(30%, 0px)"],[1,"modal-header",2,"padding-bottom","15px"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],["type","search","id","search","name","search-devices","value","","placeholder","Search For Devices","autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",1,"col-md-12","input",2,"margin","0em auto 1em auto","padding","4px","border-radius","4px","border","1px solid silver"],["id","MultiJSTree",1,"container","scroll-y","h-300px"],["id","no-results",2,"display","none","text-align","center","color","red","margin-top","10px"],[1,"row"],[1,"col-md-6"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-primary",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-danger",3,"click"],[3,"alertData"],["id","dynamictemplatePDF","aria-labelledby","dynamictemplatePDF","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-fullscreen"],[1,"modal-content"],[1,"modal-body",3,"formGroup"],[1,"split-container"],[1,"split-area","left-area"],[2,"width","100%","height","100%","border","none"],["pdfPreviewIframe",""],[1,"split-area","right-area"],["formArrayName","device_configs"],[1,"card","mb-3","shadow-sm",3,"formGroupName"],[1,"card-header","py-2"],[1,"card-title","mb-0"],[1,"card-body","px-2","py-1"],["formArrayName","additionalKeyValuePairs"],["class","mb-2",3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-center","mb-2"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"fas","fa-plus-circle"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[3,"ngStyle","item"],[3,"item","lookup_data_temp_dr","lookup_data_temp_dre","lookup_data_temp_form","mnList","hidingLink","UserList","extractedDevices","data$","customEvent","pdfSettingChange","triggerMethod","triggerMethodAlerts","loadSpinner","loadConfirm","clear","refreshMNList","sendSavedQueryForm","errorEvent","triggerDownloadExcelReport","readBackLocation","getGridPositions","saveButtonCheck"],["id","dynamic-height-form",1,"dynamic-content"],[3,"item","chartInstance"],["class","gridster-item-content",3,"ngStyle","item",4,"ngFor","ngForOf"],[1,"gridster-item-content",3,"ngStyle","item"],[1,"dynamic-content",3,"id"],[3,"item","dynamicColumns","dynamicRowData","index"],["class","custom-multiselect",4,"ngIf"],[1,"custom-multiselect"],["required","",1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-primary","not-allowed",3,"disabled","click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-sm","btn-primary","not-allowed",3,"click"],[1,"mb-2",3,"formGroupName"],[1,"col-4"],["formControlName","value","placeholder","Value",1,"form-control","form-control-sm"]],template:function oe(ue,re){if(1&ue&&(_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(2,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(3,"div",3)(4,"div",4)(5,"div")(6,"div")(7,"div",5)(8,"div",6)(9,"gridster",7),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(10,ReportsMainComponent_gridster_item_10_Template,3,12,"gridster-item",8),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(11,ReportsMainComponent_div_11_Template,2,1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(12,ReportsMainComponent_div_12_Template,2,1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(13,"ngx-spinner",10)(14,"p",11),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(15,"Please Wait your Time Machine is loading data for you... "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(20,ReportsMainComponent_h2_20_Template,2,0,"h2",16),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(21,ReportsMainComponent_h2_21_Template,2,0,"h2",16),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(22,"button",17),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(23,"div",18)(24,"div",19)(25,"div",20)(26,"div",21)(27,"ul",22)(28,"li",23)(29,"a",24),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.setActiveTab("Datatype")}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(30," Report Configuartion "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(31,"ul",22)(32,"li",23)(33,"a",25),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.setActiveTab("Settings")}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(34," Mail Settings "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(35,"div",26)(36,"div",27)(37,"div",28)(38,"div",29)(39,"div",30)(40,"div",31)(41,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(42,"Id"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(43,"div",33)(44,"input",34),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("keyup",function(){let S;return re.checkUniqueIdentifier(null==(S=re.saveQuery.get("PK"))?null:S.value)}),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(45,"span",35),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(46),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(47,"div",31)(48,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(49,"Name"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(50,"div",33),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(51,"input",36),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(52,ReportsMainComponent_div_52_Template,5,1,"div",37),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(53,"div",31)(54,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(55,"Notification Preferences"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(56,"div",33)(57,"div",38),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(58,"input",39),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(59,"label",40),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(60,"Mail"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(61,"div",38),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(62,"input",41),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(63,"label",42),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(64,"SMS"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(65,"div",38),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(66,"input",43),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(67,"label",44),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(68,"Telegram"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(69,"div",31)(70,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(71,"Description"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(72,"div",33),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(73,"input",45),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(74,"div",27)(75,"div",28)(76,"div",29)(77,"div",30)(78,"div",46)(79,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(80,"Time Configuartion"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(81,"app-cron-editor-tm",47),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(82,"div",31)(83,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(84,"Enable Chart"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(85,"div",33)(86,"div",48),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(87,"input",49),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(88,"div",31)(89,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(90,"Mail Type"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(91,"div",33)(92,"select",50)(93,"option",51),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(94,"select file type"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(95,"option",52),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(96,"PDF"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(97,"option",52),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(98,"Excel"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(99,"option",52),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(100," Dynamic Excel"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(101,"label",32),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(102,"PDF Options"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(103,"div",38),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(104,"input",53),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(105,"label",54),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(106,"A4 Page"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(107,"div",38),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(108,"input",55),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(109,"label",56),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(110,"Dynamic"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(111,"div",57)(112,"button",58,59),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(114,"Cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(115,ReportsMainComponent_button_115_Template,2,1,"button",60),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(116,ReportsMainComponent_button_116_Template,2,0,"button",61),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(117,"div",62)(118,"div",13)(119,"div",14)(120,"div",15)(121,"h2",63),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(122,"Saved Queries"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(123,"button",17),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(124,"div",64)(125,"div",65)(126,"table",66)(127,"thead"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(128,ReportsMainComponent_tr_128_Template,11,0,"tr",9),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(129,ReportsMainComponent_tr_129_Template,9,0,"tr",9),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(130,"div",67)(131,"nav",68),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(132,"input",69),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(133,"label",70),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(134,"span",71)(135,"span",72)(136,"span",73),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(137,"a",74),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.loading()}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(138,"i",75),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(139,"a",76),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.toggleDragMode()}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(140,"i",77),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(141,"a",78),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(142,"i",79),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(143,"svg",80)(144,"defs")(145,"filter",81),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(146,"feGaussianBlur",82)(147,"feColorMatrix",83)(148,"feGaussianBlur",84)(149,"feColorMatrix",85)(150,"feOffset",86)(151,"feComposite",87)(152,"feComposite",88),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(153,"filter",89),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(154,"feGaussianBlur",82)(155,"feColorMatrix",83)(156,"feComposite",88),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(157,"div",90)(158,"div",13)(159,"div",91)(160,"div",92)(161,"h2",63),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(162," Location "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(163,"button",93),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.cancelButton()}),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(164,"br"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(165,"div",30),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(166,"input",94),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(167,"div",95),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(168,"div",96),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(169," No results found. "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(170,"div",57)(171,"div",30)(172,"div",97)(173,"div",98)(174,"button",99),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.processLocation(re.mnList)}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(175," Ok "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(176," \xa0 "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(177,"button",100),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.cancelButton()}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(178," Cancel "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(179,"app-alert-info-modal",101),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(180,"div",102)(181,"div",103)(182,"div",104)(183,"div",15)(184,"h5",63),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(185,"PDF Configuration"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(186,"button",17),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(187,"div",105)(188,"div",106)(189,"div",107),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(190,"iframe",108,109),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(192,"div",110)(193,"div",111)(194,"div",112)(195,"div",113)(196,"h5",114),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(197,"Configuration"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(198,"div",115)(199,"div",116),_angular_core__WEBPACK_IMPORTED_MODULE_20__.YNc(200,ReportsMainComponent_div_200_Template,6,2,"div",117),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(201,"div",118)(202,"button",119),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.loadPDF(re.currentRowDataForPDF)}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._UZ(203,"i",120),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(204," Apply Changes "),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(205,"div",57)(206,"button",121),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(207,"Close"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_20__.TgZ(208,"button",122),_angular_core__WEBPACK_IMPORTED_MODULE_20__.NdJ("click",function(){return re.downloadPdf()}),_angular_core__WEBPACK_IMPORTED_MODULE_20__._uU(209,"Generate PDF"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.qZA()()()()()),2&ue){let O;_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("options",re.options),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngForOf",re.form),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",re.charts),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",re.table),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("fullScreen",!0),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",!re.updateButtonChK),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",re.updateButtonChK),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_20__.VKq(30,_c2,"Datatype"===re.activeTab)),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_20__.VKq(32,_c2,"Settings"===re.activeTab)),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("formGroup",re.saveQuery),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_20__.VKq(34,_c2,"Datatype"===re.activeTab)),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(10),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Oqu(re.errorForUniqueID),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",!re.FT_dontUpdate||re.superAdmin),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(22),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_20__.VKq(36,_c2,"Settings"===re.activeTab)),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("timeSelectionControl",re.time_selectionFormControl),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(12),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("value",null)("selected",!0),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("value","PDF"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("value","Excel"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("value","Dynamic Excel"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(16),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",!re.updateButtonChK),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",re.updateButtonChK),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(12),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",!0===re.hideDeleteButton),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngIf",!1===re.hideDeleteButton),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(11),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngClass",re.allowDrag?"fa fa-lock-open":"fa fa-lock"),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(34),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("disabled",!re.enableLocationButton),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("alertData",re.currentRowData),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("formGroup",re.deviceForm),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("formGroupName",re.showChosenOne()),_angular_core__WEBPACK_IMPORTED_MODULE_20__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_20__.Q6J("ngForOf",null==(O=re.getAdditionalKeyValuePairs(re.showChosenOne()))?null:O.controls)}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_34__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_34__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_34__.O5,_angular_common__WEBPACK_IMPORTED_MODULE_34__.PC,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.Kr,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.Wl,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.EJ,_angular_forms__WEBPACK_IMPORTED_MODULE_25__._,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.JL,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.Q7,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.oH,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.sg,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.u,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.x0,_angular_forms__WEBPACK_IMPORTED_MODULE_25__.CE,angular_gridster2__WEBPACK_IMPORTED_MODULE_24__.sm,angular_gridster2__WEBPACK_IMPORTED_MODULE_24__.IM,ngx_spinner__WEBPACK_IMPORTED_MODULE_29__.Ro,ng_multiselect_dropdown__WEBPACK_IMPORTED_MODULE_38__.O,_reports_form_reports_form_component__WEBPACK_IMPORTED_MODULE_12__.c,_reports_charts_reports_charts_component__WEBPACK_IMPORTED_MODULE_11__.Z,_reports_table_reports_table_component__WEBPACK_IMPORTED_MODULE_13__.j,_cron_editor_tm_cron_editor_tm_component__WEBPACK_IMPORTED_MODULE_37__.T,_alert_info_modal_alert_info_modal_component__WEBPACK_IMPORTED_MODULE_19__.a],styles:["div.dataTables_wrapper[_ngcontent-%COMP%]{position:relative;margin:20px!important}.dragging[_ngcontent-%COMP%]{z-index:1000;position:relative}.split-container[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.split-area.left-area[_ngcontent-%COMP%]{flex:7;padding:0 10px;overflow:auto;background-color:#f4f4f4}.split-area.right-area[_ngcontent-%COMP%]{flex:3;padding:0 10px;overflow:auto;background-color:#f4f4f4}.split-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#no-results[_ngcontent-%COMP%]{display:none;text-align:center;color:red;font-weight:600;margin-top:10px;font-size:14px}.myMenu[_ngcontent-%COMP%]{filter:url(#shadowed-goo)}.myMenu-item[_ngcontent-%COMP%], .myMenu-open-button[_ngcontent-%COMP%]{background:#009EF7;border-radius:100%;width:50px;height:50px;margin-left:-40px;position:absolute;top:20px;color:#fff;text-align:center;line-height:50px;transform:translateZ(0);transition:transform ease-out .2s}.myMenu-open[_ngcontent-%COMP%]{display:none}.hamburger[_ngcontent-%COMP%]{width:25px;height:3px;background:white;display:block;position:absolute;top:50%;left:50%;margin-left:-12.5px;margin-top:-1.5px;transition:transform .2s}.hamburger-1[_ngcontent-%COMP%]{transform:translate3d(0,-8px,0)}.hamburger-2[_ngcontent-%COMP%]{transform:translateZ(0)}.hamburger-3[_ngcontent-%COMP%]{transform:translate3d(0,8px,0)}.myMenu-open[_ngcontent-%COMP%]:checked + .myMenu-open-button[_ngcontent-%COMP%]   .hamburger-1[_ngcontent-%COMP%]{transform:translateZ(0) rotate(45deg)}.myMenu-open[_ngcontent-%COMP%]:checked + .myMenu-open-button[_ngcontent-%COMP%]   .hamburger-2[_ngcontent-%COMP%]{transform:translateZ(0) scaleX(.1)}.myMenu-open[_ngcontent-%COMP%]:checked + .myMenu-open-button[_ngcontent-%COMP%]   .hamburger-3[_ngcontent-%COMP%]{transform:translateZ(0) rotate(-45deg)}.myMenu[_ngcontent-%COMP%]{position:absolute;left:50%;margin-left:-40px;padding-top:20px;padding-left:40px;width:45px;height:50px;box-sizing:border-box;font-size:20px;text-align:left}.myMenu-item[_ngcontent-%COMP%]:hover{background:black;color:#009ef7}.myMenu-item[_ngcontent-%COMP%]:nth-child(3){transition-duration:.18s}.myMenu-item[_ngcontent-%COMP%]:nth-child(4){transition-duration:.18s}.myMenu-item[_ngcontent-%COMP%]:nth-child(5){transition-duration:.18s}.myMenu-item[_ngcontent-%COMP%]:nth-child(6){transition-duration:.18s}.myMenu-item[_ngcontent-%COMP%]:nth-child(7){transition-duration:.18s}.myMenu-open-button[_ngcontent-%COMP%]{z-index:2;transition-timing-function:cubic-bezier(.175,.885,.32,1.275);transition-duration:.4s;transform:scale(1.1) translateZ(0);cursor:pointer}.myMenu-open-button[_ngcontent-%COMP%]:hover{transform:scale(1.2) translateZ(0)}.myMenu-open[_ngcontent-%COMP%]:checked + .myMenu-open-button[_ngcontent-%COMP%]{transition-timing-function:linear;transition-duration:.2s;transform:scale(.8) translateZ(0)}.myMenu-open[_ngcontent-%COMP%]:checked ~ .myMenu-item[_ngcontent-%COMP%]{transition-timing-function:cubic-bezier(.165,.84,.44,1)}.myMenu-open[_ngcontent-%COMP%]:checked ~ .myMenu-item[_ngcontent-%COMP%]:nth-child(3){transition-duration:.19s;transform:translate3d(0,90px,0)}.myMenu-open[_ngcontent-%COMP%]:checked ~ .myMenu-item[_ngcontent-%COMP%]:nth-child(4){transition-duration:.29s;transform:translate3d(0,180px,0)}.myMenu-open[_ngcontent-%COMP%]:checked ~ .myMenu-item[_ngcontent-%COMP%]:nth-child(5){transition-duration:.39s;transform:translate3d(0,270px,0)}.myMenu-open[_ngcontent-%COMP%]:checked ~ .myMenu-item[_ngcontent-%COMP%]:nth-child(6){transition-duration:.49s;transform:translate3d(0,360px,0)}.myMenu-open[_ngcontent-%COMP%]:checked ~ .myMenu-item[_ngcontent-%COMP%]:nth-child(7){transition-duration:.59s;transform:translate3d(0,450px,0)}.title[_ngcontent-%COMP%]{color:#1a1a1a;text-align:center;margin-bottom:10px}.content1[_ngcontent-%COMP%]{position:relative;width:90%;max-width:400px;margin:auto;overflow:hidden}.content1[_ngcontent-%COMP%]   .content1-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.7);position:absolute;height:99%;width:100%;inset:0;opacity:0;transition:all .4s ease-in-out 0s}.content1[_ngcontent-%COMP%]:hover   .content1-overlay[_ngcontent-%COMP%]{opacity:1}.content1-image[_ngcontent-%COMP%]{width:100%}.content1-details[_ngcontent-%COMP%]{position:absolute;text-align:center;padding-left:1em;padding-right:1em;width:100%;top:50%;left:50%;opacity:0;transform:translate(-50%,-50%);transition:all .3s ease-in-out 0s}.content1[_ngcontent-%COMP%]:hover   .content1-details[_ngcontent-%COMP%]{top:50%;left:50%;opacity:1}.content1-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff;font-weight:500;letter-spacing:.15em;margin-bottom:.5em;text-transform:uppercase}.content1-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:.8em}.fadeIn-bottom[_ngcontent-%COMP%]{top:80%}.fadeIn-top[_ngcontent-%COMP%]{top:20%}.fadeIn-left[_ngcontent-%COMP%]{left:20%}.fadeIn-right[_ngcontent-%COMP%]{left:80%}.is-dragging[_ngcontent-%COMP%]   .gridster-item-inner[_ngcontent-%COMP%]{box-shadow:0 2px 6px #f10d0d3d,0 2px 4px #d90b0b7a;top:-3px;bottom:13px}.input-cart[_ngcontent-%COMP%]{margin-bottom:12px;width:780px}.input-card-content[_ngcontent-%COMP%]{padding-top:12px;display:flex;flex-direction:column;align-items:flex-start}.demo-container[_ngcontent-%COMP%]{margin:30px}.demo-card[_ngcontent-%COMP%]{margin-bottom:12px}.demo-card[_ngcontent-%COMP%]   mat-button-toggle[_ngcontent-%COMP%]{margin-left:7px}.demo-card-header[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:8px;align-items:center}.demo-card-footer[_ngcontent-%COMP%]{margin:0;padding:16px}"]})),ReportsMainComponent})()},35317:(oe,ue,re)=>{"use strict";re.d(ue,{j:()=>z});var O=re(86656),S=re(627),m=re(65879),X=re(96814);function x(H,G){1&H&&(m.TgZ(0,"div",4),m._uU(1," No data available to display.\n"),m.qZA())}let z=(()=>{var H;class G{constructor(){(0,O.Z)(this,"dtElement",void 0),(0,O.Z)(this,"item",void 0),(0,O.Z)(this,"dynamicColumns",[]),(0,O.Z)(this,"dynamicRowData",[]),(0,O.Z)(this,"index",void 0)}applySearch(U){console.log("Applying search:",U),$("#table_data").DataTable().search(U).draw()}}return H=G,(0,O.Z)(G,"\u0275fac",function(U){return new(U||H)}),(0,O.Z)(G,"\u0275cmp",m.Xpm({type:H,selectors:[["app-reports-table"]],viewQuery:function(U,R){if(1&U&&m.Gf(S.G,5),2&U){let T;m.iGM(T=m.CRH())&&(R.dtElement=T.first)}},inputs:{item:"item",dynamicColumns:"dynamicColumns",dynamicRowData:"dynamicRowData",index:"index"},decls:5,vars:2,consts:[[2,"text-align","center","margin-top","10px"],[1,"table-responsive",2,"margin","20px"],[3,"id"],["class","alert alert-info",4,"ngIf"],[1,"alert","alert-info"]],template:function(U,R){1&U&&(m.TgZ(0,"h3",0),m._uU(1,"Table"),m.qZA(),m.TgZ(2,"div",1),m._UZ(3,"table",2),m.qZA(),m.YNc(4,x,2,0,"div",3)),2&U&&(m.xp6(3),m.MGl("id","table_data",R.index,""),m.xp6(1),m.Q6J("ngIf",0===R.dynamicRowData.length))},dependencies:[X.O5],styles:[".table-responsive[_ngcontent-%COMP%]{position:relative;max-height:1000px;overflow-y:auto}"]})),G})()},58913:(oe,ue,re)=>{"use strict";re.r(ue),re.d(ue,{TimeMachineModule:()=>lh});var O=re(86656),S=re(96814),m=re(69862),X=re(56223),x=re(22939),z=re(35024),H=re(66469),G=re(88672),D=re(76630),U=re(94955),R=re(95392),T=re(627),N=re(60540),L=re(30617),Y=re(77988),ee=re(25313),te=re(32296),pe=re(98525),we=re(92202),Te=re(95195),ge=re(64170),Ce=re(73176),Oe=re(93083),je=re(2032),Ue=re(59038),l=(re(4300),re(42495),re(78337),re(65879)),Me=re(23680);let Kn=(()=>{var le;class ye{}return(le=ye).\u0275fac=function(E){return new(E||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[Me.BQ,Me.si,Me.BQ]}),ye})();var Mo=re(69025),mo=re(64190),No=re(18704);function Di(le,ye){if(1&le&&(l.TgZ(0,"div",2),l._UZ(1,"app-keenicon",3),l.TgZ(2,"h3"),l._uU(3),l.qZA(),l.TgZ(4,"p"),l._uU(5),l.qZA(),l.TgZ(6,"a",4),l._uU(7,"Open App"),l.qZA()()),2&le){const K=ye.$implicit;l.xp6(1),l.Tol(K.class),l.Q6J("name",K.icon),l.xp6(2),l.Oqu(K.title),l.xp6(2),l.Oqu(K.description),l.xp6(1),l.Q6J("routerLink",K.link)}}let ci=(()=>{var le;class ye{constructor(){(0,O.Z)(this,"apps",[])}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-home-menu"]],inputs:{apps:"apps"},decls:2,vars:1,consts:[[1,"app-container"],["class","app-card",4,"ngFor","ngForOf"],[1,"app-card"],[3,"name"],[3,"routerLink"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0),l.YNc(1,Di,8,6,"div",1),l.qZA()),2&E&&(l.xp6(1),l.Q6J("ngForOf",F.apps))},dependencies:[S.sg,mo.rH,No.q],styles:[".app-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;width:80%;max-width:1200px;margin:0 auto;padding:20px}.app-card[_ngcontent-%COMP%]{text-align:center;background:white;border:none;border-radius:12px;box-shadow:0 4px 15px #0000001a;padding:20px;transition:transform .3s ease,box-shadow .3s ease}.app-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px);box-shadow:0 8px 20px #0003}.app-card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px;color:#5a5cff}.app-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:15px 0 10px;font-size:22px;color:#333}.app-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:20px}.app-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-weight:700;color:#fff;background-color:#5a5cff;padding:10px 15px;border-radius:6px;transition:background-color .3s ease}.app-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#3b40cc}"]})),ye})(),zn=(()=>{var le;class ye{constructor(E){(0,O.Z)(this,"router",void 0),(0,O.Z)(this,"allPermissions_user",[]),(0,O.Z)(this,"apps",[{icon:"chart-pie-3",class:"text-primary fs-4x",title:"Reports",description:"View and manage your reports efficiently.",link:"reports",requiredPermissionView:"TimeMachine - View",requiredPermissionUpdate:"TimeMachine - Update"},{icon:"file-sheet",title:"Dynamic Excel Creator",class:"text-success fs-4x",description:"Create customized Excel reports dynamically.",link:"DynamicExcelReport",requiredPermissionView:"DynamicExcelReports - View",requiredPermissionUpdate:"DynamicExcelReports - Update"},{icon:"html",title:"Dynamic Template Creator",class:"text-danger fs-4x",description:"Create customized Template reports dynamically.",link:"DynamicTemplateCreator",requiredPermissionView:"DynamicHtmlTemplate - View",requiredPermissionUpdate:"DynamicHtmlTemplate - Update"}]),this.router=E}ngOnInit(){const E=localStorage.getItem("permissionDetails");this.allPermissions_user=E?JSON.parse(E):[],this.filterAppsBasedOnPermissions()}filterAppsBasedOnPermissions(){this.apps=this.apps.filter(E=>{const F=this.allPermissions_user.includes(E.requiredPermissionView),_e=this.allPermissions_user.includes(E.requiredPermissionUpdate);return F||_e})}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(mo.F0))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-time-machine"]],decls:2,vars:1,consts:[[3,"apps"]],template:function(E,F){1&E&&l._UZ(0,"app-home-menu",0)(1,"router-outlet"),2&E&&l.Q6J("apps",F.apps)},dependencies:[mo.lC,ci]})),ye})();var Wn=re(34636),an=re(15861),lr=re(13519),Pr=re.n(lr),Mn=re(65619);const dn={PK:"",SK:"",devices:[],file_name:"",file_location_path_URl:"",formulas:[],Values:[],filters:[],rows:[],reportsType:"",columns:[],Others:[]};var sn=re(6472);function kn(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1," ID cannot contain only spaces. "),l.qZA())}function xo(le,ye){1&le&&(l.TgZ(0,"div",14),l._uU(1,"Whitespace is not allowed"),l.qZA())}function Vo(le,ye){1&le&&(l.TgZ(0,"div",14),l._uU(1," Id is required "),l.qZA())}function aa(le,ye){1&le&&(l.TgZ(0,"div",14),l._uU(1," Name is required "),l.qZA())}let Fa=(()=>{var le;class ye{constructor(E,F){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"spinner",void 0),(0,O.Z)(this,"isEditMode",void 0),(0,O.Z)(this,"updateParentModel",void 0),(0,O.Z)(this,"form",void 0),(0,O.Z)(this,"defaultValues",void 0),(0,O.Z)(this,"unsubscribe",[]),(0,O.Z)(this,"errorForUniqueID",void 0),(0,O.Z)(this,"listofDynamicReportIds",void 0),(0,O.Z)(this,"readBack",void 0),(0,O.Z)(this,"enableSubmitButton",new l.vpe),this.fb=E,this.spinner=F}ngAfterViewInit(){this.initForm(),this.updateParentModel({},this.checkForm()),this.isEditMode&&this.disablePKField()}disablePKField(){const E=this.form.get("PK");E&&E.disable()}ngOnInit(){this.initForm(),this.updateParentModel({},this.checkForm()),console.log("lpb",this.listofDynamicReportIds)}initForm(){this.form=this.fb.group({PK:[this.defaultValues.PK,[X.kI.required,sn.l.noSpaceAllowed]],file_name:[this.defaultValues.file_name,[X.kI.required]]});const E=this.form.valueChanges.subscribe(F=>{this.updateParentModel(F,this.checkForm())});this.unsubscribe.push(E)}ngOnDestroy(){this.unsubscribe.forEach(E=>E.unsubscribe())}checkUniqueIdentifier(E){this.errorForUniqueID="";for(let F=0;F<this.listofDynamicReportIds.length;F++)E===this.listofDynamicReportIds[F]&&(this.errorForUniqueID="Model ID already exists")}checkForm(){return!(this.form.get("PK")?.hasError("required")||this.form.controls.PK.errors?.noSpaceAllowed||this.errorForUniqueID||this.form.get("file_name")?.hasError("required"))}enableSubmit(){this.enableSubmitButton.emit("enable")}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(X.qu),l.Y36(G.t2))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step1-dr"]],inputs:{isEditMode:"isEditMode",updateParentModel:"updateParentModel",defaultValues:"defaultValues",listofDynamicReportIds:"listofDynamicReportIds",readBack:"readBack"},outputs:{enableSubmitButton:"enableSubmitButton"},decls:22,vars:6,consts:[[1,"pb-10","pb-lg-15"],[1,"fw-bolder","d-flex","align-items-center","text-dark"],["ngbTooltip","fill all the required fields ",1,"fas","fa-exclamation-circle","ms-2","fs-7"],[1,"fv-row",3,"formGroup"],[1,"column"],[1,"col-md-12"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","required"],["ngbTooltip","Please assign a unique identifier to your Model",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["type","text","placeholder","Enter Model Id","name","PK","formControlName","PK","required","",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0",3,"change"],[4,"ngIf"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[2,"color","#fc1900"],["ngbTooltip","Provide a name for your Model",1,"fas","fa-exclamation-circle","ms-2","fs-7"],["type","text","placeholder","Enter Model Name","name","file_name","formControlName","file_name","required","",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],[1,"fv-plugins-message-container","invalid-feedback"]],template:function(E,F){if(1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2," Model Configuration "),l._UZ(3,"i",2),l.qZA()(),l.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),l._uU(8," ID "),l._UZ(9,"i",7),l.qZA(),l.TgZ(10,"input",8),l.NdJ("change",function(){return F.enableSubmit()}),l.qZA(),l.YNc(11,kn,2,0,"div",9),l.YNc(12,xo,2,0,"div",10),l.TgZ(13,"span",11),l._uU(14),l.qZA(),l.YNc(15,Vo,2,0,"div",10),l.qZA(),l.TgZ(16,"div",5)(17,"label",6),l._uU(18," Model Name "),l._UZ(19,"i",12),l.qZA(),l._UZ(20,"input",13),l.YNc(21,aa,2,0,"div",10),l.qZA()()()),2&E){let _e,Ge,st;l.xp6(4),l.Q6J("formGroup",F.form),l.xp6(7),l.Q6J("ngIf",null==(_e=F.form.get("PK"))?null:_e.hasError("pattern")),l.xp6(1),l.Q6J("ngIf",(null==F.form.controls.PK.errors?null:F.form.controls.PK.errors.noSpaceAllowed)&&F.form.controls.PK.touched),l.xp6(2),l.Oqu(F.errorForUniqueID),l.xp6(1),l.Q6J("ngIf",(null==(Ge=F.form.get("PK"))?null:Ge.hasError("required"))&&(null==(Ge=F.form.get("PK"))?null:Ge.touched)),l.xp6(6),l.Q6J("ngIf",(null==(st=F.form.get("file_name"))?null:st.hasError("required"))&&(null==(st=F.form.get("file_name"))?null:st.touched))}},dependencies:[S.O5,X.Fj,X.JJ,X.JL,X.Q7,X.sg,X.u],encapsulation:2})),ye})();var Qr=re(31552),ze=re(5588),Xe=re(1754),at=re(56504);function gr(le,ye){if(1&le&&(l.TgZ(0,"div",16)(1,"label",17),l._uU(2,"Devices "),l._UZ(3,"i",18),l.qZA(),l.TgZ(4,"div",19)(5,"div",20),l._UZ(6,"ng-multiselect-dropdown",21),l.qZA()()()),2&le){const K=l.oxw();l.xp6(6),l.Q6J("placeholder","Select Device")("settings",K.dropdownSettings)("data",K.extractDevices)("formControl",K.form.controls.devices)}}function Pt(le,ye){1&le&&(l.TgZ(0,"div",22),l._uU(1," Device is required "),l.qZA())}let mt=(()=>{var le;class ye{constructor(E,F,_e){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"dataSharingService",void 0),(0,O.Z)(this,"updateParentModel",void 0),(0,O.Z)(this,"form",void 0),(0,O.Z)(this,"dropdownSettings",{singleSelection:!1,idField:"mn",textField:"label",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0}),(0,O.Z)(this,"dropdownSettingsSingleSelection",{singleSelection:!0,idField:"mn",textField:"label",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0}),(0,O.Z)(this,"extractDevices",void 0),(0,O.Z)(this,"rdtList",void 0),(0,O.Z)(this,"defaultValues",void 0),(0,O.Z)(this,"unsubscribe",[]),this.fb=E,this.sharedService=F,this.dataSharingService=_e}ngOnInit(){this.initForm(),this.updateParentModel({},this.checkForm())}initForm(){"string"==typeof this.defaultValues.devices&&(this.defaultValues.devices=JSON.parse(this.defaultValues.devices)),"string"==typeof this.defaultValues.Others&&(this.defaultValues.Others=JSON.parse(this.defaultValues.Others)),this.form=this.fb.group({devices:[this.defaultValues?.devices?this.defaultValues.devices:[],[X.kI.required]],reportsType:[this.defaultValues?.Others&&this.defaultValues?.Others?.[0]?.reportsType?this.defaultValues?.Others?.[0]?.reportsType:"Parameters",[X.kI.required]]});const E=this.form.valueChanges.subscribe(F=>{this.updateParentModel(F,this.checkForm())});this.unsubscribe.push(E)}checkForm(){return!this.form.get("devices")?.hasError("required")}onModuleSelect(E){const F=this.dataSharingService.getCurrentdevieInfo();console.log("device_info :>> ",F)}onDeSelect(E){}ngOnDestroy(){this.unsubscribe.forEach(E=>E.unsubscribe())}set_value(){throw new Error("Method not implemented.")}checkUniqueIdentifier(E){throw new Error("Method not implemented.")}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(X.qu),l.Y36(ze.F),l.Y36(at.j))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step2-dr"]],inputs:{updateParentModel:"updateParentModel",extractDevices:"extractDevices",defaultValues:"defaultValues"},decls:23,vars:3,consts:[[1,"pb-10","pb-lg-15"],[1,"fw-bolder","d-flex","align-items-center","text-dark"],["ngbTooltip","SetUp a Devices for your Model",1,"fas","fa-exclamation-circle","ms-2","fs-7"],[1,"fv-row",3,"formGroup"],["data-kt-buttons","true",1,"row","mb-2"],[1,"col"],["type","radio","id","parametersType","value","Parameters","formControlName","reportsType",1,"btn-check"],["for","parametersType",1,"btn","btn-outline","btn-outline-dashed","btn-active-light-primary","w-100","p-4"],[1,"fw-bold","fs-5","d-block"],[1,"bi","bi-gear-fill","fs-2","mb-2"],["type","radio","id","scheduleType","value","Schedule","formControlName","reportsType",1,"btn-check"],["for","scheduleType",1,"btn","btn-outline","btn-outline-dashed","btn-active-light-primary","w-100","p-4"],[1,"bi","bi-calendar-check-fill","fs-2","mb-2"],[1,"column"],["class","col-md-12","style","padding-top: 10px;",4,"ngIf"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[1,"col-md-12",2,"padding-top","10px"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","required","fw-bold"],["ngbTooltip","Choose the devices you want to include in your dashboard (List displaying Device Label - Device Model Number).",1,"fas","fa-exclamation-circle","ms-2","fs-7","text-warning"],[1,"col-lg-12"],[1,"custom-multiselect"],["required","",1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl"],[1,"fv-plugins-message-container","invalid-feedback"]],template:function(E,F){if(1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2," Device Configuration "),l._UZ(3,"i",2),l.qZA()(),l.TgZ(4,"div",3)(5,"div",4)(6,"div",5),l._UZ(7,"input",6),l.TgZ(8,"label",7)(9,"span",8),l._UZ(10,"i",9)(11,"br"),l._uU(12," Parameters Type "),l.qZA()()(),l.TgZ(13,"div",5),l._UZ(14,"input",10),l.TgZ(15,"label",11)(16,"span",8),l._UZ(17,"i",12)(18,"br"),l._uU(19," Schedule Type "),l.qZA()()()(),l.TgZ(20,"div",13),l.YNc(21,gr,7,4,"div",14),l.YNc(22,Pt,2,0,"div",15),l.qZA()()),2&E){let _e;l.xp6(4),l.Q6J("formGroup",F.form),l.xp6(17),l.Q6J("ngIf",F.extractDevices.length>0),l.xp6(1),l.Q6J("ngIf",(null==(_e=F.form.get("devices"))?null:_e.hasError("required"))&&(null==(_e=F.form.get("devices"))?null:_e.touched))}},dependencies:[S.O5,X.Fj,X._,X.JJ,X.JL,X.Q7,X.oH,X.sg,X.u,N.O],encapsulation:2})),ye})();var Zt=re(11486),ln=re(14934),no=re(1870);function oo(le,ye){if(1&le&&l._UZ(0,"div",4),2&le){const K=l.oxw();l.Udp("background-image",K.getPlaceholder())}}const Ki=["*"],li=new l.OlP("DROPZONE_CONFIG"),ts=["error","success","sending","canceled","complete","processing","drop","dragStart","dragEnd","dragEnter","dragOver","dragLeave","thumbnail","addedFile","addedFiles","removedFile","uploadProgress","maxFilesReached","maxFilesExceeded","errorMultiple","successMultiple","sendingMultiple","canceledMultiple","completeMultiple","processingMultiple","reset","queueComplete","totalUploadProgress"];class Nt{constructor(ye={}){(0,O.Z)(this,"timeout",void 0),(0,O.Z)(this,"autoReset",void 0),(0,O.Z)(this,"errorReset",void 0),(0,O.Z)(this,"cancelReset",void 0),(0,O.Z)(this,"url",void 0),(0,O.Z)(this,"method",void 0),(0,O.Z)(this,"params",void 0),(0,O.Z)(this,"headers",void 0),(0,O.Z)(this,"init",void 0),(0,O.Z)(this,"accept",void 0),(0,O.Z)(this,"resize",void 0),(0,O.Z)(this,"fallback",void 0),(0,O.Z)(this,"renameFile",void 0),(0,O.Z)(this,"transformFile",void 0),(0,O.Z)(this,"chunksUploaded",void 0),(0,O.Z)(this,"withCredentials",void 0),(0,O.Z)(this,"previewsContainer",void 0),(0,O.Z)(this,"hiddenInputContainer",void 0),(0,O.Z)(this,"clickable",void 0),(0,O.Z)(this,"paramName",void 0),(0,O.Z)(this,"capture",void 0),(0,O.Z)(this,"maxFiles",void 0),(0,O.Z)(this,"maxFilesize",void 0),(0,O.Z)(this,"filesizeBase",void 0),(0,O.Z)(this,"acceptedFiles",void 0),(0,O.Z)(this,"forceFallback",void 0),(0,O.Z)(this,"addRemoveLinks",void 0),(0,O.Z)(this,"uploadMultiple",void 0),(0,O.Z)(this,"parallelUploads",void 0),(0,O.Z)(this,"resizeWidth",void 0),(0,O.Z)(this,"resizeHeight",void 0),(0,O.Z)(this,"resizeMethod",void 0),(0,O.Z)(this,"resizeQuality",void 0),(0,O.Z)(this,"resizeMimeType",void 0),(0,O.Z)(this,"thumbnailWidth",void 0),(0,O.Z)(this,"thumbnailHeight",void 0),(0,O.Z)(this,"thumbnailMethod",void 0),(0,O.Z)(this,"previewTemplate",void 0),(0,O.Z)(this,"autoQueue",void 0),(0,O.Z)(this,"autoProcessQueue",void 0),(0,O.Z)(this,"ignoreHiddenFiles",void 0),(0,O.Z)(this,"maxThumbnailFilesize",void 0),(0,O.Z)(this,"createImageThumbnails",void 0),(0,O.Z)(this,"chunking",void 0),(0,O.Z)(this,"chunkSize",void 0),(0,O.Z)(this,"retryChunks",void 0),(0,O.Z)(this,"forceChunking",void 0),(0,O.Z)(this,"retryChunksLimit",void 0),(0,O.Z)(this,"parallelChunkUploads",void 0),(0,O.Z)(this,"dictFileSizeUnits",void 0),(0,O.Z)(this,"dictDefaultMessage",void 0),(0,O.Z)(this,"dictFallbackMessage",void 0),(0,O.Z)(this,"dictFileTooBig",void 0),(0,O.Z)(this,"dictResponseError",void 0),(0,O.Z)(this,"dictInvalidFileType",void 0),(0,O.Z)(this,"dictRemoveFile",void 0),(0,O.Z)(this,"dictCancelUpload",void 0),(0,O.Z)(this,"dictUploadCanceled",void 0),(0,O.Z)(this,"dictFallbackText",void 0),(0,O.Z)(this,"dictMaxFilesExceeded",void 0),(0,O.Z)(this,"dictRemoveFileConfirmation",void 0),(0,O.Z)(this,"dictCancelUploadConfirmation",void 0),this.assign(ye)}assign(ye={},K){K=K||this;for(const E in ye)null==ye[E]||Array.isArray(ye[E])||"object"!=typeof ye[E]||ye[E]instanceof HTMLElement?K[E]=ye[E]:(K[E]={},this.assign(ye[E],K[E]))}}let jt=(()=>{var le;class ye{constructor(E,F,_e,Ge,st,Tt){(0,O.Z)(this,"zone",void 0),(0,O.Z)(this,"renderer",void 0),(0,O.Z)(this,"elementRef",void 0),(0,O.Z)(this,"differs",void 0),(0,O.Z)(this,"platformId",void 0),(0,O.Z)(this,"defaults",void 0),(0,O.Z)(this,"instance",void 0),(0,O.Z)(this,"configDiff",null),(0,O.Z)(this,"disabled",!1),(0,O.Z)(this,"config",void 0),(0,O.Z)(this,"DZ_INIT",new l.vpe),(0,O.Z)(this,"DZ_ERROR",new l.vpe),(0,O.Z)(this,"DZ_SUCCESS",new l.vpe),(0,O.Z)(this,"DZ_SENDING",new l.vpe),(0,O.Z)(this,"DZ_CANCELED",new l.vpe),(0,O.Z)(this,"DZ_COMPLETE",new l.vpe),(0,O.Z)(this,"DZ_PROCESSING",new l.vpe),(0,O.Z)(this,"DZ_DROP",new l.vpe),(0,O.Z)(this,"DZ_DRAGSTART",new l.vpe),(0,O.Z)(this,"DZ_DRAGEND",new l.vpe),(0,O.Z)(this,"DZ_DRAGENTER",new l.vpe),(0,O.Z)(this,"DZ_DRAGOVER",new l.vpe),(0,O.Z)(this,"DZ_DRAGLEAVE",new l.vpe),(0,O.Z)(this,"DZ_THUMBNAIL",new l.vpe),(0,O.Z)(this,"DZ_ADDEDFILE",new l.vpe),(0,O.Z)(this,"DZ_ADDEDFILES",new l.vpe),(0,O.Z)(this,"DZ_REMOVEDFILE",new l.vpe),(0,O.Z)(this,"DZ_UPLOADPROGRESS",new l.vpe),(0,O.Z)(this,"DZ_MAXFILESREACHED",new l.vpe),(0,O.Z)(this,"DZ_MAXFILESEXCEEDED",new l.vpe),(0,O.Z)(this,"DZ_ERRORMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_SUCCESSMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_SENDINGMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_CANCELEDMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_COMPLETEMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_PROCESSINGMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_RESET",new l.vpe),(0,O.Z)(this,"DZ_QUEUECOMPLETE",new l.vpe),(0,O.Z)(this,"DZ_TOTALUPLOADPROGRESS",new l.vpe),this.zone=E,this.renderer=F,this.elementRef=_e,this.differs=Ge,this.platformId=st,this.defaults=Tt,no.Dropzone.autoDiscover=!1}ngOnInit(){if(!(0,S.NF)(this.platformId))return;const E=new Nt(this.defaults);E.assign(this.config),this.renderer.addClass(this.elementRef.nativeElement,1===E.maxFiles?"dz-single":"dz-multiple"),this.renderer.removeClass(this.elementRef.nativeElement,1===E.maxFiles?"dz-multiple":"dz-single"),Object.keys(E).forEach(F=>void 0===E[F]&&delete E[F]),this.zone.runOutsideAngular(()=>{this.instance=new no.Dropzone(this.elementRef.nativeElement,E)}),this.disabled&&this.instance.disable(),this.DZ_INIT.observers.length&&this.zone.run(()=>{this.DZ_INIT.emit(this.instance)}),this.instance.on("success",()=>{null!=E.autoReset&&setTimeout(()=>this.reset(),E.autoReset)}),this.instance.on("error",()=>{null!=E.errorReset&&setTimeout(()=>this.reset(),E.errorReset)}),this.instance.on("canceled",()=>{null!=E.cancelReset&&setTimeout(()=>this.reset(),E.cancelReset)}),ts.forEach(F=>{this.instance.on(F.toLowerCase(),(..._e)=>{_e=1===_e.length?_e[0]:_e;const st=this[`DZ_${F.toUpperCase()}`];st.observers.length>0&&this.zone.run(()=>{st.emit(_e)})})}),this.configDiff||(this.configDiff=this.differs.find(this.config||{}).create(),this.configDiff.diff(this.config||{}))}ngOnDestroy(){this.instance&&(this.zone.runOutsideAngular(()=>{this.instance.destroy()}),this.instance=null)}ngDoCheck(){!this.disabled&&this.configDiff&&this.configDiff.diff(this.config||{})&&this.instance&&(this.ngOnDestroy(),this.ngOnInit())}ngOnChanges(E){this.instance&&E.disabled&&E.disabled.currentValue!==E.disabled.previousValue&&(!1===E.disabled.currentValue?this.zone.runOutsideAngular(()=>{this.instance.enable()}):!0===E.disabled.currentValue&&this.zone.runOutsideAngular(()=>{this.instance.disable()}))}dropzone(){return this.instance}reset(E){this.instance&&this.zone.runOutsideAngular(()=>{this.instance.removeAllFiles(E)})}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(l.R0b),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(l.aQg),l.Y36(l.Lbi),l.Y36(li,8))}),(0,O.Z)(ye,"\u0275dir",l.lG2({type:le,selectors:[["","dropzone",""]],inputs:{disabled:"disabled",config:["dropzone","config"]},outputs:{DZ_INIT:"init",DZ_ERROR:"error",DZ_SUCCESS:"success",DZ_SENDING:"sending",DZ_CANCELED:"canceled",DZ_COMPLETE:"complete",DZ_PROCESSING:"processing",DZ_DROP:"drop",DZ_DRAGSTART:"dragStart",DZ_DRAGEND:"dragEnd",DZ_DRAGENTER:"dragEnter",DZ_DRAGOVER:"dragOver",DZ_DRAGLEAVE:"dragLeave",DZ_THUMBNAIL:"thumbnail",DZ_ADDEDFILE:"addedFile",DZ_ADDEDFILES:"addedFiles",DZ_REMOVEDFILE:"removedFile",DZ_UPLOADPROGRESS:"uploadProgress",DZ_MAXFILESREACHED:"maxFilesReached",DZ_MAXFILESEXCEEDED:"maxFilesExceeded",DZ_ERRORMULTIPLE:"errorMultiple",DZ_SUCCESSMULTIPLE:"successMultiple",DZ_SENDINGMULTIPLE:"sendingMultiple",DZ_CANCELEDMULTIPLE:"canceledMultiple",DZ_COMPLETEMULTIPLE:"completeMultiple",DZ_PROCESSINGMULTIPLE:"processingMultiple",DZ_RESET:"reset",DZ_QUEUECOMPLETE:"queueComplete",DZ_TOTALUPLOADPROGRESS:"totalUploadProgress"},exportAs:["ngxDropzone"],features:[l.TTD]})),ye})(),gt=(()=>{var le;class ye{constructor(E){(0,O.Z)(this,"platformId",void 0),(0,O.Z)(this,"disabled",!1),(0,O.Z)(this,"config",void 0),(0,O.Z)(this,"message","Click or drag files to upload"),(0,O.Z)(this,"placeholder",""),(0,O.Z)(this,"useDropzoneClass",!0),(0,O.Z)(this,"DZ_INIT",new l.vpe),(0,O.Z)(this,"DZ_ERROR",new l.vpe),(0,O.Z)(this,"DZ_SUCCESS",new l.vpe),(0,O.Z)(this,"DZ_SENDING",new l.vpe),(0,O.Z)(this,"DZ_CANCELED",new l.vpe),(0,O.Z)(this,"DZ_COMPLETE",new l.vpe),(0,O.Z)(this,"DZ_PROCESSING",new l.vpe),(0,O.Z)(this,"DZ_DROP",new l.vpe),(0,O.Z)(this,"DZ_DRAGSTART",new l.vpe),(0,O.Z)(this,"DZ_DRAGEND",new l.vpe),(0,O.Z)(this,"DZ_DRAGENTER",new l.vpe),(0,O.Z)(this,"DZ_DRAGOVER",new l.vpe),(0,O.Z)(this,"DZ_DRAGLEAVE",new l.vpe),(0,O.Z)(this,"DZ_THUMBNAIL",new l.vpe),(0,O.Z)(this,"DZ_ADDEDFILE",new l.vpe),(0,O.Z)(this,"DZ_ADDEDFILES",new l.vpe),(0,O.Z)(this,"DZ_REMOVEDFILE",new l.vpe),(0,O.Z)(this,"DZ_UPLOADPROGRESS",new l.vpe),(0,O.Z)(this,"DZ_MAXFILESREACHED",new l.vpe),(0,O.Z)(this,"DZ_MAXFILESEXCEEDED",new l.vpe),(0,O.Z)(this,"DZ_ERRORMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_SUCCESSMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_SENDINGMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_CANCELEDMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_COMPLETEMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_PROCESSINGMULTIPLE",new l.vpe),(0,O.Z)(this,"DZ_RESET",new l.vpe),(0,O.Z)(this,"DZ_QUEUECOMPLETE",new l.vpe),(0,O.Z)(this,"DZ_TOTALUPLOADPROGRESS",new l.vpe),(0,O.Z)(this,"directiveRef",void 0),this.platformId=E}ngOnInit(){(0,S.NF)(this.platformId)&&window.setTimeout(()=>{ts.forEach(E=>{if(this.directiveRef){const F=`DZ_${E.toUpperCase()}`;this.directiveRef[F]=this[F]}})},0)}getPlaceholder(){return"url("+encodeURI(this.placeholder)+")"}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(l.Lbi))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["dropzone"]],viewQuery:function(E,F){if(1&E&&l.Gf(jt,7),2&E){let _e;l.iGM(_e=l.CRH())&&(F.directiveRef=_e.first)}},inputs:{disabled:"disabled",config:"config",message:"message",placeholder:"placeholder",useDropzoneClass:"useDropzoneClass"},outputs:{DZ_INIT:"init",DZ_ERROR:"error",DZ_SUCCESS:"success",DZ_SENDING:"sending",DZ_CANCELED:"canceled",DZ_COMPLETE:"complete",DZ_PROCESSING:"processing",DZ_DROP:"drop",DZ_DRAGSTART:"dragStart",DZ_DRAGEND:"dragEnd",DZ_DRAGENTER:"dragEnter",DZ_DRAGOVER:"dragOver",DZ_DRAGLEAVE:"dragLeave",DZ_THUMBNAIL:"thumbnail",DZ_ADDEDFILE:"addedFile",DZ_ADDEDFILES:"addedFiles",DZ_REMOVEDFILE:"removedFile",DZ_UPLOADPROGRESS:"uploadProgress",DZ_MAXFILESREACHED:"maxFilesReached",DZ_MAXFILESEXCEEDED:"maxFilesExceeded",DZ_ERRORMULTIPLE:"errorMultiple",DZ_SUCCESSMULTIPLE:"successMultiple",DZ_SENDINGMULTIPLE:"sendingMultiple",DZ_CANCELEDMULTIPLE:"canceledMultiple",DZ_COMPLETEMULTIPLE:"completeMultiple",DZ_PROCESSINGMULTIPLE:"processingMultiple",DZ_RESET:"reset",DZ_QUEUECOMPLETE:"queueComplete",DZ_TOTALUPLOADPROGRESS:"totalUploadProgress"},exportAs:["ngxDropzone"],ngContentSelectors:Ki,decls:5,vars:10,consts:[[1,"dz-wrapper",3,"dropzone","disabled","init"],[1,"dz-message"],[1,"dz-text",3,"innerHTML"],["class","dz-image",3,"background-image",4,"ngIf"],[1,"dz-image"]],template:function(E,F){1&E&&(l.F$t(),l.TgZ(0,"div",0),l.NdJ("init",function(Ge){return F.DZ_INIT.emit(Ge)}),l.TgZ(1,"div",1),l._UZ(2,"div",2),l.YNc(3,oo,1,2,"div",3),l.qZA(),l.Hsn(4),l.qZA()),2&E&&(l.ekj("dropzone",F.useDropzoneClass),l.Q6J("dropzone",F.config)("disabled",F.disabled),l.xp6(1),l.ekj("disabled",F.disabled)("dz-placeholder",F.placeholder),l.xp6(1),l.Q6J("innerHTML",(null==F.config?null:F.config.dictDefaultMessage)||F.message,l.oJD),l.xp6(1),l.Q6J("ngIf",F.placeholder))},dependencies:[S.O5,jt],styles:["dropzone{display:block;width:100%;height:auto}dropzone.flex{display:flex;flex-direction:inherit;min-width:0;min-height:0;-webkit-box-direction:inherit;-webkit-box-orient:inherit}dropzone.flex>.dropzone.dz-wrapper{flex:1 1 auto;min-width:0;min-height:0;-webkit-box-flex:1}dropzone.flex{align-items:inherit;align-content:inherit;justify-content:inherit;-webkit-box-align:inherit;-webkit-box-pack:inherit}dropzone.flex>.dropzone.dz-wrapper.dz-single{display:flex;flex-direction:column;align-items:center;align-content:center;justify-content:center;-webkit-box-align:center;-webkit-box-direction:column;-webkit-box-orient:column;-webkit-box-pack:center}dropzone.flex>.dropzone.dz-wrapper.dz-multiple{display:flex;flex-flow:row wrap;align-items:flex-start;align-content:flex-start;justify-content:space-between;-webkit-box-align:flex-start;-webkit-box-direction:row;-webkit-box-orient:row;-webkit-box-pack:flex-start}dropzone>.dropzone.dz-wrapper{position:relative;overflow:auto;width:100%;min-height:0;max-height:100%;padding:0;border:none;color:#666;background:transparent}dropzone>.dropzone.dz-wrapper .dz-message{position:relative;display:inline-block;overflow:auto;width:calc(100% - 16px);min-width:calc(100% - 16px);min-height:40px;max-width:calc(100% - 16px);max-height:100%;margin:8px;border:2px dashed #aaa;background-color:#eee}dropzone>.dropzone.dz-wrapper .dz-message .dz-text{position:absolute;top:50%;width:100%;padding:8px 16px;text-align:center;transform:translateY(-50%)}dropzone>.dropzone.dz-wrapper .dz-message .dz-image{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:50% 50%}dropzone>.dropzone.dz-wrapper .dz-message.disabled{cursor:not-allowed}dropzone>.dropzone.dz-wrapper .dz-message.disabled .dz-text{opacity:.5}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder{border-color:rgba(#aaa,0)}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder .dz-text{position:absolute;z-index:1;top:0;right:10%;left:10%;opacity:0;font-weight:700;background-color:rgba(#fff,.5);transform:translateY(-50%);transition:filter .25s ease-in-out,opacity .25s ease-in-out,border-color .25s ease-in-out}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled){border-color:#aaa}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-text{opacity:1}dropzone>.dropzone.dz-wrapper .dz-message.dz-placeholder:hover:not(.disabled) .dz-image{-webkit-filter:blur(8px);filter:blur(8px)}dropzone>.dropzone.dz-wrapper .dz-preview{margin:8px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-details{padding:24px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress{width:80%;margin-left:-40%;border:1px solid #aaa;border-radius:4px}dropzone>.dropzone.dz-wrapper .dz-preview .dz-progress .dz-upload{background-color:#666}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span{display:block;overflow:hidden;width:100%;max-width:100%;text-overflow:ellipsis}dropzone>.dropzone.dz-wrapper .dz-preview .dz-filename span:hover{overflow:visible;white-space:normal;word-wrap:break-word}dropzone>.dropzone.dz-wrapper.dz-single .dz-message{width:100%;height:100%}dropzone>.dropzone.dz-wrapper.dz-single.dz-started .dz-message{display:none}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview{width:calc(100% - 16px);height:100%}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image{width:100%;height:100%;border-radius:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-preview .dz-image img{display:block;width:100%;height:auto;margin:0}dropzone>.dropzone.dz-wrapper.dz-single .dz-error-message{top:50%;left:50%;transform:translate(-50%) translateY(100%)}dropzone>.dropzone.dz-wrapper.dz-multiple.dz-started .dz-message{display:inline-block}\n",'@-webkit-keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@-moz-keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@keyframes passing-through{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%,70%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(-40px);-moz-transform:translateY(-40px);-ms-transform:translateY(-40px);-o-transform:translateY(-40px);transform:translateY(-40px)}}@-webkit-keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@-moz-keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@keyframes slide-in{0%{opacity:0;-webkit-transform:translateY(40px);-moz-transform:translateY(40px);-ms-transform:translateY(40px);-o-transform:translateY(40px);transform:translateY(40px)}30%{opacity:1;-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-ms-transform:translateY(0px);-o-transform:translateY(0px);transform:translateY(0)}}@-webkit-keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@-moz-keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}@keyframes pulse{0%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}10%{-webkit-transform:scale(1.1);-moz-transform:scale(1.1);-ms-transform:scale(1.1);-o-transform:scale(1.1);transform:scale(1.1)}20%{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}}.dropzone,.dropzone *{box-sizing:border-box}.dropzone{min-height:150px;border:2px solid rgba(0,0,0,.3);background:#fff;padding:20px}.dropzone.dz-clickable{cursor:pointer}.dropzone.dz-clickable *{cursor:default}.dropzone.dz-clickable .dz-message,.dropzone.dz-clickable .dz-message *{cursor:pointer}.dropzone.dz-started .dz-message{display:none}.dropzone.dz-drag-hover{border-style:solid}.dropzone.dz-drag-hover .dz-message{opacity:.5}.dropzone .dz-message{text-align:center;margin:2em 0}.dropzone .dz-message .dz-button{background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit}.dropzone .dz-preview{position:relative;display:inline-block;vertical-align:top;margin:16px;min-height:100px}.dropzone .dz-preview:hover{z-index:1000}.dropzone .dz-preview.dz-file-preview .dz-image{border-radius:20px;background:#999;background:linear-gradient(to bottom,#eee,#ddd)}.dropzone .dz-preview.dz-file-preview .dz-details{opacity:1}.dropzone .dz-preview.dz-image-preview{background:#fff}.dropzone .dz-preview.dz-image-preview .dz-details{-webkit-transition:opacity .2s linear;-moz-transition:opacity .2s linear;-ms-transition:opacity .2s linear;-o-transition:opacity .2s linear;transition:opacity .2s linear}.dropzone .dz-preview .dz-remove{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone .dz-preview .dz-remove:hover{text-decoration:underline}.dropzone .dz-preview:hover .dz-details{opacity:1}.dropzone .dz-preview .dz-details{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:#000000e6;line-height:150%}.dropzone .dz-preview .dz-details .dz-size{margin-bottom:1em;font-size:16px}.dropzone .dz-preview .dz-details .dz-filename{white-space:nowrap}.dropzone .dz-preview .dz-details .dz-filename:hover span{border:1px solid rgba(200,200,200,.8);background-color:#fffc}.dropzone .dz-preview .dz-details .dz-filename:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone .dz-preview .dz-details .dz-filename:not(:hover) span{border:1px solid transparent}.dropzone .dz-preview .dz-details .dz-filename span,.dropzone .dz-preview .dz-details .dz-size span{background-color:#fff6;padding:0 .4em;border-radius:3px}.dropzone .dz-preview:hover .dz-image img{-webkit-transform:scale(1.05,1.05);-moz-transform:scale(1.05,1.05);-ms-transform:scale(1.05,1.05);-o-transform:scale(1.05,1.05);transform:scale(1.05);-webkit-filter:blur(8px);filter:blur(8px)}.dropzone .dz-preview .dz-image{border-radius:20px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone .dz-preview .dz-image img{display:block}.dropzone .dz-preview.dz-success .dz-success-mark{-webkit-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-moz-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-ms-animation:passing-through 3s cubic-bezier(.77,0,.175,1);-o-animation:passing-through 3s cubic-bezier(.77,0,.175,1);animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview.dz-error .dz-error-mark{opacity:1;-webkit-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-moz-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-ms-animation:slide-in 3s cubic-bezier(.77,0,.175,1);-o-animation:slide-in 3s cubic-bezier(.77,0,.175,1);animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone .dz-preview .dz-success-mark,.dropzone .dz-preview .dz-error-mark{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone .dz-preview .dz-success-mark svg,.dropzone .dz-preview .dz-error-mark svg{display:block;width:54px;height:54px}.dropzone .dz-preview.dz-processing .dz-progress{opacity:1;-webkit-transition:all .2s linear;-moz-transition:all .2s linear;-ms-transition:all .2s linear;-o-transition:all .2s linear;transition:all .2s linear}.dropzone .dz-preview.dz-complete .dz-progress{opacity:0;-webkit-transition:opacity .4s ease-in;-moz-transition:opacity .4s ease-in;-ms-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.dropzone .dz-preview:not(.dz-processing) .dz-progress{-webkit-animation:pulse 6s ease infinite;-moz-animation:pulse 6s ease infinite;-ms-animation:pulse 6s ease infinite;-o-animation:pulse 6s ease infinite;animation:pulse 6s ease infinite}.dropzone .dz-preview .dz-progress{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:#ffffffe6;-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone .dz-preview .dz-progress .dz-upload{background:#333;background:linear-gradient(to bottom,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;-webkit-transition:width .3s ease-in-out;-moz-transition:width .3s ease-in-out;-ms-transition:width .3s ease-in-out;-o-transition:width .3s ease-in-out;transition:width .3s ease-in-out}.dropzone .dz-preview.dz-error .dz-error-message{display:block}.dropzone .dz-preview.dz-error:hover .dz-error-message{opacity:1;pointer-events:auto}.dropzone .dz-preview .dz-error-message{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;-webkit-transition:opacity .3s ease;-moz-transition:opacity .3s ease;-ms-transition:opacity .3s ease;-o-transition:opacity .3s ease;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(to bottom,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone .dz-preview .dz-error-message:after{content:"";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}\n'],encapsulation:2})),ye})(),Fr=(()=>{var le;class ye{}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)}),(0,O.Z)(ye,"\u0275mod",l.oAB({type:le})),(0,O.Z)(ye,"\u0275inj",l.cJS({imports:[S.ez,S.ez]})),ye})();function tr(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",7)(1,"p",8)(2,"strong"),l._uU(3,"Uploaded File:"),l.qZA(),l.TgZ(4,"a",9),l.NdJ("click",function(){l.CHM(K);const F=l.oxw(),_e=l.MAs(10);return l.KtG(F.openPreviewModal(_e))}),l._uU(5),l.qZA()(),l.TgZ(6,"p",8)(7,"strong"),l._uU(8,"File Size:"),l.qZA(),l._uU(9),l.qZA(),l.TgZ(10,"button",10),l.NdJ("click",function(){l.CHM(K);const F=l.oxw(),_e=l.MAs(10);return l.KtG(F.openPreviewModal(_e))}),l._UZ(11,"i",11),l._uU(12," Preview "),l.qZA(),l.TgZ(13,"button",12),l.NdJ("click",function(){const _e=l.CHM(K).ngIf,Ge=l.oxw();return l.KtG(Ge.confirmFileRemoval(_e))}),l._UZ(14,"i",13),l._uU(15," Remove File "),l.qZA()()}if(2&le){const K=ye.ngIf;l.xp6(5),l.Oqu(K.name),l.xp6(4),l.hij(" ",(K.size/1024).toFixed(2)," KB ")}}function wt(le,ye){if(1&le&&(l.TgZ(0,"th"),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.xp6(1),l.Oqu(K)}}function St(le,ye){if(1&le&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.xp6(1),l.Oqu(K)}}function vr(le,ye){if(1&le&&(l.TgZ(0,"tr"),l.YNc(1,St,2,1,"td",20),l.qZA()),2&le){const K=ye.$implicit;l.xp6(1),l.Q6J("ngForOf",K)}}function fn(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",14)(1,"h5",15),l._uU(2,"Excel File Preview"),l.qZA(),l.TgZ(3,"button",16),l.NdJ("click",function(){const _e=l.CHM(K).$implicit;return l.KtG(_e.dismiss())}),l.qZA()(),l.TgZ(4,"div",17)(5,"div",18)(6,"table",19)(7,"thead")(8,"tr"),l.YNc(9,wt,2,1,"th",20),l.qZA()(),l.TgZ(10,"tbody"),l.YNc(11,vr,2,1,"tr",20),l.qZA()()()()}if(2&le){const K=l.oxw();l.xp6(9),l.Q6J("ngForOf",null==K.modalPreview?null:K.modalPreview.headers),l.xp6(2),l.Q6J("ngForOf",null==K.modalPreview?null:K.modalPreview.data)}}let Ko=(()=>{var le;class ye{constructor(E,F){(0,O.Z)(this,"modalService",void 0),(0,O.Z)(this,"http",void 0),(0,O.Z)(this,"updateParentModel",void 0),(0,O.Z)(this,"uploadedFile$",void 0),(0,O.Z)(this,"dropzoneInstance$",void 0),(0,O.Z)(this,"defaultValues",void 0),(0,O.Z)(this,"dropzoneConfig",void 0),(0,O.Z)(this,"modalPreview",void 0),(0,O.Z)(this,"s3ApiUrl","https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory"),this.modalService=E,this.http=F,this.dropzoneConfig={acceptedFiles:".xlsx",maxFiles:1,addRemoveLinks:!1,dictDefaultMessage:"Drop your Excel file here or click to upload",previewTemplate:'<div class="dz-preview dz-file-preview p-3 rounded shadow-sm">\n                          <div class="row align-items-center">\n                            <div class="col-2">\n                              <div class="dz-image">\n                                <img src="assets/media/excel.png" class="img-thumbnail" alt="Excel File Thumbnail" />\n                              </div>\n                            </div>\n                            <div class="col-6">\n                              <div class="dz-details">\n                                <div class="dz-filename">\n                                  <strong>File:</strong> <span data-dz-name></span>\n                                </div>\n                                <div class="dz-size text-muted">\n                                  <strong>Size:</strong> <span data-dz-size></span>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>'}}ngOnInit(){const E=this.uploadedFile$.value;E&&this.addFileToDropzone(E)}ngOnDestroy(){const E=this.dropzoneInstance$.value;E&&this.dropzoneInstance$.next(E)}onFileAdded(E){this.uploadedFile$.value&&this.uploadedFile$.value.name===E.name||(this.uploadedFile$.next(E),this.parseExcelFile(E))}confirmFileRemoval(E){var F=this;return(0,an.Z)(function*(){if((yield Pr().fire({title:"Are you sure?",text:"Do you want to remove the uploaded file?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, keep it"})).isConfirmed){F.uploadedFile$.next(null);const Ge=F.dropzoneInstance$.value;Ge&&Ge.removeAllFiles(!0)}})()}onDropzoneInit(E){this.dropzoneInstance$.next(E);const F=this.uploadedFile$.value;F&&(this.parseExcelFile(F),this.addFileToDropzone(F))}addFileToDropzone(E){const F=this.dropzoneInstance$.value;if(F){const _e=new File([E],E.name,{type:E.type});F.emit("addedfile",_e),F.emit("complete",_e),F.files.push(_e)}}parseExcelFile(E){var F=this;return(0,an.Z)(function*(){try{const _e=yield E.arrayBuffer(),Ge=Zt.ij(_e,{type:"array"}),Kt=Zt.P6.sheet_to_json(Ge.Sheets[Ge.SheetNames[0]],{header:1}),fr=Kt[0],nn=Kt.slice(1);F.modalPreview={headers:fr,data:nn}}catch(_e){console.error("Error parsing Excel file:",_e),Pr().fire({title:"Error",text:"Unable to parse the Excel file.",icon:"error"})}})()}openPreviewModal(E){this.modalService.open(E,{size:"lg",backdrop:"static",centered:!0})}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(ln.FF),l.Y36(m.eN))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step3-dr"]],inputs:{updateParentModel:"updateParentModel",uploadedFile$:"uploadedFile$",dropzoneInstance$:"dropzoneInstance$",defaultValues:"defaultValues"},decls:11,vars:4,consts:[[1,"pb-10","pb-lg-12"],[1,"fw-bolder","text-dark"],[1,"mt-4"],[1,"text-primary"],[1,"dropzone-custom",3,"config","addedFile","init"],["class","mt-3",4,"ngIf"],["previewModal",""],[1,"mt-3"],[1,"text-muted"],[1,"btn","btn-active-color-primary",3,"click"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"fas","fa-trash-alt"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table-responsive"],[1,"table","table-bordered"],[4,"ngFor","ngForOf"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Upload Excel"),l.qZA()(),l.TgZ(3,"div",2)(4,"h3",3),l._uU(5,"Upload File"),l.qZA(),l.TgZ(6,"dropzone",4),l.NdJ("addedFile",function(Ge){return F.onFileAdded(Ge)})("init",function(Ge){return F.onDropzoneInit(Ge)}),l.qZA(),l.YNc(7,tr,16,2,"div",5),l.ALo(8,"async"),l.qZA(),l.YNc(9,fn,12,2,"ng-template",null,6,l.W1O)),2&E&&(l.xp6(6),l.Q6J("config",F.dropzoneConfig),l.xp6(1),l.Q6J("ngIf",l.lcZ(8,2,F.uploadedFile$)))},dependencies:[S.sg,S.O5,gt,S.Ov],encapsulation:2})),ye})();function Ro(le,ye){if(1&le&&(l.TgZ(0,"th",31),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.xp6(1),l.hij(" ",K.split(".")[1]," ")}}function Ln(le,ye){if(1&le&&(l.TgZ(0,"td",35),l._uU(1),l.qZA()),2&le){const K=ye.$implicit,E=l.oxw(2).$implicit,F=l.oxw();l.Q6J("ngClass",F.isFormula(K,E)),l.xp6(1),l.hij(" ",K," ")}}const yr=function(le,ye){return{"bg-primary":le,"bg-light":ye}};function kr(le,ye){if(1&le&&(l.TgZ(0,"tr",35)(1,"td",35),l._uU(2),l.qZA(),l.TgZ(3,"td",35),l._uU(4),l.qZA(),l.YNc(5,Ln,2,2,"td",33),l.qZA()),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw().$implicit,_e=l.oxw();l.Q6J("ngClass",l.WLB(6,yr,E%2==0,E%2!=0)),l.xp6(1),l.Q6J("ngClass",_e.isFormula(K[0],F)),l.xp6(1),l.Oqu(K[0]),l.xp6(1),l.Q6J("ngClass",_e.isFormula(K[1],F)),l.xp6(1),l.Oqu(K[1]),l.xp6(1),l.Q6J("ngForOf",K.slice(2))}}function or(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula sums all values for the specified parameter."),l.qZA())}function Tr(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula sums multiple values for the given parameters."),l.qZA())}function ht(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula calculates the sum of all parameters for the device."),l.qZA())}function Lt(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula performs arithmetic operations on the specified parameters."),l.qZA())}function Dr(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula finds the maximum value from the specified parameters."),l.qZA())}function hn(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula finds the minimum value from the specified parameters."),l.qZA())}function Un(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula calculates the average of the specified parameters."),l.qZA())}function Yn(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula multiplies the values of the specified parameters."),l.qZA())}function dr(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula calculates the range between the max and min values of the specified parameters."),l.qZA())}function pn(le,ye){if(1&le&&(l.TgZ(0,"div",22)(1,"h2",23)(2,"button",38)(3,"span",39),l._uU(4),l.qZA()()(),l.TgZ(5,"div",40)(6,"div",41)(7,"strong"),l._uU(8,"Formula: "),l.qZA(),l._uU(9),l._UZ(10,"br"),l.TgZ(11,"strong"),l._uU(12,"Parameters: "),l.qZA(),l._uU(13),l._UZ(14,"br"),l.TgZ(15,"strong"),l._uU(16,"Column: "),l.qZA(),l._uU(17),l._UZ(18,"br"),l.TgZ(19,"strong"),l._uU(20,"Type: "),l.qZA(),l._uU(21),l._UZ(22,"br"),l.YNc(23,or,2,0,"div",42),l.YNc(24,Tr,2,0,"div",42),l.YNc(25,ht,2,0,"div",42),l.YNc(26,Lt,2,0,"div",42),l.YNc(27,Dr,2,0,"div",42),l.YNc(28,hn,2,0,"div",42),l.YNc(29,Un,2,0,"div",42),l.YNc(30,Yn,2,0,"div",42),l.YNc(31,dr,2,0,"div",42),l.qZA()()()),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw(2).index;l.xp6(1),l.hYB("id","formulaHeader",F,"-",E,""),l.xp6(1),l.Q6J("ngClass",K.color),l.uIk("data-bs-target","#formulaDetailsCollapse"+F+"-"+E)("aria-controls","formulaDetailsCollapse"+F+"-"+E),l.xp6(2),l.Oqu(K.type),l.xp6(1),l.Q6J("id","formulaDetailsCollapse"+F+"-"+E),l.uIk("aria-labelledby","formulaHeader"+F+"-"+E)("data-bs-parent","#formulaAccordion"+F),l.xp6(1),l.Q6J("ngClass",K.color.split("-")[0]+"-light-"+K.color.split("-")[1]),l.xp6(3),l.Oqu(K.formula),l.xp6(4),l.Oqu(K.parameters.join(", ")),l.xp6(4),l.Oqu(K.column),l.xp6(4),l.Oqu(K.type),l.xp6(2),l.Q6J("ngIf","SUM"===K.type),l.xp6(1),l.Q6J("ngIf","SUM with multiple parameters"===K.type),l.xp6(1),l.Q6J("ngIf","TOTAL"===K.type),l.xp6(1),l.Q6J("ngIf","Operator-based"===K.type),l.xp6(1),l.Q6J("ngIf","MAX"===K.type),l.xp6(1),l.Q6J("ngIf","MIN"===K.type),l.xp6(1),l.Q6J("ngIf","AVG"===K.type),l.xp6(1),l.Q6J("ngIf","PRODUCT"===K.type),l.xp6(1),l.Q6J("ngIf","RANGE"===K.type)}}function Xt(le,ye){if(1&le&&(l.TgZ(0,"div",22)(1,"h2",23)(2,"button",24)(3,"span",36),l._uU(4,"Formulas"),l.qZA()()(),l.TgZ(5,"div",26)(6,"div",27)(7,"div",37),l.YNc(8,pn,32,23,"div",21),l.qZA()()()()),2&le){const K=l.oxw(),E=K.index,F=K.$implicit,_e=l.oxw();l.xp6(1),l.MGl("id","formulaHeading",E,""),l.xp6(1),l.uIk("data-bs-target","#formulaCollapse"+E)("aria-controls","formulaCollapse"+E),l.xp6(3),l.Q6J("id","formulaCollapse"+E),l.uIk("aria-labelledby","formulaHeading"+E),l.xp6(2),l.MGl("id","formulaAccordion",E,""),l.xp6(1),l.Q6J("ngForOf",_e.tables[F].formulas)}}function Ft(le,ye){if(1&le&&(l.TgZ(0,"div",22)(1,"h2",23)(2,"button",24)(3,"strong"),l._uU(4,"Data Overview : "),l.qZA(),l.TgZ(5,"span",25),l._uU(6),l.qZA()()(),l.TgZ(7,"div",26)(8,"div",27)(9,"div",3)(10,"div",4)(11,"div",28)(12,"table",29)(13,"thead",30)(14,"tr",31)(15,"th",31),l._uU(16,"Device"),l.qZA(),l.TgZ(17,"th",31),l._uU(18,"Date"),l.qZA(),l.YNc(19,Ro,2,1,"th",32),l.qZA()(),l.TgZ(20,"tbody"),l.YNc(21,kr,6,9,"tr",33),l.qZA()()()()()()(),l.YNc(22,Xt,9,7,"div",34),l.qZA()),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw();l.xp6(1),l.MGl("id","tableHeading",E,""),l.xp6(1),l.uIk("data-bs-target","#tableCollapse"+E)("aria-controls","tableCollapse"+E),l.xp6(4),l.hij(" Table ",K,""),l.xp6(1),l.Q6J("id","tableCollapse"+E),l.uIk("aria-labelledby","tableHeading"+E),l.xp6(12),l.Q6J("ngForOf",F.tables[K].headers.slice(2)),l.xp6(2),l.Q6J("ngForOf",F.tables[K].rows),l.xp6(1),l.Q6J("ngIf",F.tables[K].formulas.length>0)}}let Zn=(()=>{var le;class ye{constructor(E,F,_e){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"excelService",void 0),(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"updateParentModel",void 0),(0,O.Z)(this,"form",void 0),(0,O.Z)(this,"defaultValues",void 0),(0,O.Z)(this,"uploadedFile$",void 0),(0,O.Z)(this,"dropzoneInstance$",void 0),(0,O.Z)(this,"categories",{}),(0,O.Z)(this,"calculations",[]),(0,O.Z)(this,"unsubscribe",[]),(0,O.Z)(this,"areCategoriesExpanded",!1),(0,O.Z)(this,"areCalculationsExpanded",!1),(0,O.Z)(this,"tables",{}),this.fb=E,this.excelService=F,this.cdr=_e}ngOnInit(){this.uploadedFile$.subscribe(E=>{E&&this.parseExcelFile(E)})}initForm(){const E=this.form.valueChanges.subscribe(F=>{this.updateParentModel(F,this.checkForm())});this.unsubscribe.push(E)}checkForm(){return!0}ngOnDestroy(){this.unsubscribe.forEach(E=>E.unsubscribe())}parseExcelFile(E){var F=this;return(0,an.Z)(function*(){try{const _e=yield E.arrayBuffer(),Ge=Zt.ij(_e,{type:"array"});F.processSheetData(Ge.Sheets[Ge.SheetNames[0]])}catch(_e){console.error("Error reading file:",_e)}})()}processSheetData(E){const F=Zt.P6.sheet_to_json(E,{header:1});this.categorizeData(F)}categorizeData(E){this.tables={};let F=!1,_e=null,Ge=[];const st=/\$(SUM|AVG|MAX|MIN|PRODUCT|RANGE)\(([^)]+)\)/i,Tt=/\$(SUM|AVG|MAX|MIN|PRODUCT|RANGE)\$([a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*)/i,Kt=/\$(EXP)\(([^)]+)\)/,fr=/\$(Sum|Avg|Max|Min|Product|Range)\s+of\s+([a-zA-Z0-9_]+(?:\.[a-zA-Z0-9_]+)*)/i;E.forEach((nn,Yr)=>{const io=nn.find(Vn=>"string"==typeof Vn&&Vn.startsWith("#TABLESTART")),Go=nn.find(Vn=>"string"==typeof Vn&&Vn.startsWith("#TABLEEND"));return io?(F=!0,_e=io.replace("#TABLESTART","").trim(),this.tables[_e]={headers:[],rows:[],calculations:[],formulas:[]},Ge=E[Yr+1].map(Vn=>"string"==typeof Vn?Vn.replace(/\$(\w+)\$(\w+)/,"$2 ($1)"):""),void(this.tables[_e].headers=Ge)):Go?(F=!1,void(_e=null)):void(F&&_e&&(nn.forEach((Vn,yi)=>{if(console.log("Checking cell for formula or calculation:",Vn),"string"==typeof Vn&&st.test(Vn)){const ai=Vn.match(st);if(ai){const Ui=ai[2];return console.log("Formula detected:",ai[1],Ui),void this.tables[_e].formulas.push({formula:Vn,type:"SUM with multiple parameters",parameters:Ui.split(",").map(vi=>vi.trim()),column:this.tables[_e].headers[yi],color:"bg-success"})}}if("string"==typeof Vn&&Kt.test(Vn)){const ai=Vn.match(Kt);if(ai){const Ui=ai[2];return console.log("EXP formula detected:",ai[1],Ui),void this.tables[_e].formulas.push({formula:Vn,type:"EXP with operators",parameters:[Ui],column:this.tables[_e].headers[yi],color:"bg-danger"})}}if("string"==typeof Vn&&Tt.test(Vn)){const ai=Vn.match(Tt);if(ai){const Ti=ai[1],Ui=ai[2];return console.log("Formula detected:",Ti,Ui),void this.tables[_e].formulas.push({formula:Vn,type:Ti,parameters:[Ui],column:this.tables[_e].headers[yi],color:"bg-info"})}}if("string"==typeof Vn&&fr.test(Vn)){const ai=Vn.match(fr);if(ai){const Ui=ai[2];return console.log("Phrase-based formula detected:",ai[1],Ui),void this.tables[_e].formulas.push({formula:Vn,type:"TOTAL",parameters:[Ui],column:this.tables[_e].headers[yi],color:"bg-warning"})}}}),this.tables[_e].rows.push(nn)))}),console.log("Parsed Tables:",this.tables),this.cdr.detectChanges()}isFormula(E,F){const st=this.tables[F].formulas.find(Tt=>Tt.formula===E);return st?st.color:E?"":"bg-light"}isFormulaInRow(E,F){return E.some(_e=>""!==this.isFormula(_e,F))}getObjectKeys(E){return Object.keys(E)}expandAll(){this.areCategoriesExpanded=!0,this.areCalculationsExpanded=!0}collapseAll(){this.areCategoriesExpanded=!1,this.areCalculationsExpanded=!1}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(X.qu),l.Y36(Xe.x),l.Y36(l.sBO))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step4-dr"]],inputs:{updateParentModel:"updateParentModel",defaultValues:"defaultValues",uploadedFile$:"uploadedFile$",dropzoneInstance$:"dropzoneInstance$"},decls:53,vars:1,consts:[[1,"pb-1","pb-lg-5"],[1,"fw-bolder","text-dark"],[1,"container-fluid"],[1,"card","card-custom","gutter-b"],[1,"card-body"],["id","legendCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active","mb-2"],[1,"row"],[1,"col-md-4"],[1,"p-3","bg-dark","text-light","rounded",2,"height","200px"],[1,"p-3","bg-primary","text-light","rounded",2,"height","200px"],[1,"p-3","bg-info","text-light","rounded",2,"height","200px"],[1,"carousel-item"],[1,"p-3","bg-warning","text-light","rounded",2,"height","200px"],[1,"p-3","bg-success","text-light","rounded",2,"height","200px"],[1,"p-3","bg-danger","text-light","rounded",2,"height","200px"],[1,"carousel-indicators","p-0","m-0"],["type","button","data-bs-target","#legendCarousel","data-bs-slide-to","0","aria-label","Slide 1",1,"carousel-indicators-bullet","active"],["type","button","data-bs-target","#legendCarousel","data-bs-slide-to","1","aria-label","Slide 2",1,"carousel-indicators-bullet"],["id","tablesAccordion",1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed"],[1,"text-primary"],["data-bs-parent","#tablesAccordion",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"table-responsive"],[1,"table","table-bordered","align-middle"],[1,"table-light"],[1,"bg-dark","text-light"],["class","bg-dark text-light",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],["class","accordion-item",4,"ngIf"],[3,"ngClass"],[1,"text-danger"],[1,"accordion",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed",3,"ngClass"],[1,"text-white"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body",3,"ngClass"],[4,"ngIf"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2," Extracted properties from file "),l.qZA()(),l.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"strong"),l._uU(13,"Table Header (bg-dark)"),l.qZA(),l.TgZ(14,"div"),l._uU(15,"This color represents the header row of the table, including columns like Device, Date, and Parameters."),l.qZA()()(),l.TgZ(16,"div",9)(17,"div",11)(18,"strong"),l._uU(19,"Data Rows (bg-primary)"),l.qZA(),l.TgZ(20,"div"),l._uU(21,"This color represents alternating rows of data. Odd and even rows alternate for better readability."),l.qZA()()(),l.TgZ(22,"div",9)(23,"div",12)(24,"strong"),l._uU(25,"Formula (bg-info)"),l.qZA(),l.TgZ(26,"div"),l._uU(27,"This color represents cells containing formulas such as SUM, AVG, etc."),l.qZA()()()()(),l.TgZ(28,"div",13)(29,"div",8)(30,"div",9)(31,"div",14)(32,"strong"),l._uU(33,"Total Formula (bg-warning)"),l.qZA(),l.TgZ(34,"div"),l._uU(35,"This formula sums all parameters for a specific device (e.g., `$Sum of Total$Device1`)."),l.qZA()()(),l.TgZ(36,"div",9)(37,"div",15)(38,"strong"),l._uU(39,"SUM with Multiple Parameters (bg-success)"),l.qZA(),l.TgZ(40,"div"),l._uU(41,"This formula sums multiple specified parameters (e.g., `$SUM(Device1.P1, Device1.P2)`)."),l.qZA()()(),l.TgZ(42,"div",9)(43,"div",16)(44,"strong"),l._uU(45,"Operator Formula (bg-danger)"),l.qZA(),l.TgZ(46,"div"),l._uU(47,"This formula uses operators like `+`, `-`, `*`, `/` between parameters (e.g., `$EXP(Device1.P1 + Device2.P2)`)."),l.qZA()()()()()(),l.TgZ(48,"div",17),l._UZ(49,"button",18)(50,"button",19),l.qZA()()()(),l.TgZ(51,"div",20),l.YNc(52,Ft,23,9,"div",21),l.qZA()()),2&E&&(l.xp6(52),l.Q6J("ngForOf",F.getObjectKeys(F.tables)))},dependencies:[S.mk,S.sg,S.O5],encapsulation:2})),ye})(),Do=(()=>{var le;class ye{constructor(){(0,O.Z)(this,"getPowerBoardID",void 0),(0,O.Z)(this,"redirectPowerBoard",new l.vpe)}redirectPB(){this.redirectPowerBoard.emit()}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step5-dr"]],inputs:{getPowerBoardID:"getPowerBoardID"},outputs:{redirectPowerBoard:"redirectPowerBoard"},decls:21,vars:1,consts:[[1,"pb-8","pb-lg-10"],[1,"fw-bolder","text-dark"],[1,"text-gray-400","fw-bold","fs-6"],[1,"link-primary","fw-bolder","cursor-pointer"],[1,"mb-0"],["type","button","data-bs-dismiss","modal",1,"btn","fw-bold","btn-lg","btn-success","me-3","me-3","d-flex","mb-5",3,"click"],[1,"indicator-label"],[1,"fa-solid","fa-angles-right","fs-2"],[1,"notice","d-flex","bg-light-warning","rounded","border-warning","border","border-dashed","p-6"],[1,"svg-icon","fs-2tx","text-warning","me-4"],[1,"d-flex","flex-stack","flex-grow-1"],[1,"fw-bold"],[1,"text-gray-800","fw-bolder"],[1,"fs-6","text-gray-600"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Your Are Done!"),l.qZA(),l.TgZ(3,"div",2),l._uU(4," If you need more info, please "),l.TgZ(5,"a",3),l._uU(6," Sign In"),l.qZA(),l._uU(7,". "),l.qZA()(),l.TgZ(8,"div",4)(9,"button",5),l.NdJ("click",function(){return F.redirectPB()}),l.TgZ(10,"span",6),l._uU(11),l._UZ(12,"i",7),l.qZA()(),l.TgZ(13,"div",8),l._UZ(14,"span",9),l.TgZ(15,"div",10)(16,"div",11)(17,"h4",12),l._uU(18,"Note :"),l.qZA(),l.TgZ(19,"div",13),l._uU(20," see you can go back and even add another Model "),l.qZA()()()()()),2&E&&(l.xp6(11),l.hij(" GoTo WorkSpace "," "," "))},encapsulation:2})),ye})();function Jt(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"app-step1-dr",30),l.NdJ("enableSubmitButton",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.enableSubmitButton())}),l.qZA(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(1),l.Q6J("updateParentModel",K.updateAccount)("defaultValues",K.account$.value)("isEditMode",K.readBackCheck)}}function Jn(le,ye){if(1&le&&(l.ynx(0),l._UZ(1,"app-step2-dr",31),l.BQk()),2&le){const K=l.oxw();l.xp6(1),l.Q6J("updateParentModel",K.updateAccount)("defaultValues",K.account$.value)("extractDevices",K.extractDevices)}}function Qn(le,ye){if(1&le&&(l.ynx(0),l._UZ(1,"app-step3-dr",32),l.BQk()),2&le){const K=l.oxw();l.xp6(1),l.Q6J("updateParentModel",K.updateAccount)("defaultValues",K.account$.value)("powerBoardIdsForAcroll",K.powerBoardIdsForAcroll)("uploadedFile$",K.uploadedFile$)("dropzoneInstance$",K.dropzoneInstance$)}}function Io(le,ye){if(1&le&&(l.ynx(0),l._UZ(1,"app-step4-dr",33),l.BQk()),2&le){const K=l.oxw();l.xp6(1),l.Q6J("updateParentModel",K.updateAccount)("defaultValues",K.account$.value)("uploadedFile$",K.uploadedFile$)("dropzoneInstance$",K.dropzoneInstance$)}}function ri(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"app-step5-dr",34),l.NdJ("redirectPowerBoard",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.loadDashboard(F))}),l.qZA(),l.BQk()}}function Ka(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"button",35),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.prevStep())}),l._UZ(2,"i",36),l._uU(3," Back "),l.qZA(),l.BQk()}}function Ei(le,ye){1&le&&(l.ynx(0),l._uU(1),l.BQk()),2&le&&(l.xp6(1),l.hij(" Continue "," "," "))}function ui(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"div")(2,"button",37),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.nextStep())}),l.TgZ(3,"span",38),l.YNc(4,Ei,2,1,"ng-container",25),l._UZ(5,"i",39),l.qZA()()(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(2),l.Q6J("disabled",!K.isCurrentFormValid$.value),l.xp6(2),l.Q6J("ngIf",K.currentStep$.value<K.formsCount-1)}}function ns(le,ye){1&le&&(l.ynx(0),l._uU(1," Submit "),l.BQk())}function nl(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"div")(2,"button",40),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return F.onSubmit(),l.KtG(F.nextStep())}),l.TgZ(3,"span",38),l.YNc(4,ns,2,0,"ng-container",25),l.qZA()()(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(2),l.Q6J("disabled",!K.isCurrentFormValid$.value||K.submittedCheck),l.xp6(2),l.Q6J("ngIf",K.currentStep$.value===K.formsCount-1)}}function Bs(le,ye){1&le&&(l.ynx(0),l._uU(1," Update "),l.BQk())}function To(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"div")(2,"button",40),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return F.onUpdate(),l.KtG(F.nextStep())}),l.TgZ(3,"span",38),l.YNc(4,Bs,2,0,"ng-container",25),l.qZA()()(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(2),l.Q6J("disabled",!K.isCurrentFormValid$.value||K.submittedCheck),l.xp6(2),l.Q6J("ngIf",K.currentStep$.value===K.formsCount-1)}}const rs=function(le,ye){return{current:le,completed:ye}},el=function(le){return{current:le}};let gc=(()=>{var le;class ye{constructor(E,F,_e,Ge,st,Tt,Kt,fr){(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"api",void 0),(0,O.Z)(this,"toast",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"spinner",void 0),(0,O.Z)(this,"router",void 0),(0,O.Z)(this,"http",void 0),(0,O.Z)(this,"excelService",void 0),(0,O.Z)(this,"formsCount",5),(0,O.Z)(this,"account$",new Mn.X(dn)),(0,O.Z)(this,"currentStep$",new Mn.X(1)),(0,O.Z)(this,"isCurrentFormValid$",new Mn.X(!1)),(0,O.Z)(this,"uploadedFile$",new Mn.X(null)),(0,O.Z)(this,"dropzoneInstance$",new Mn.X(null)),(0,O.Z)(this,"extractDevices",void 0),(0,O.Z)(this,"listofPowerboardIds",void 0),(0,O.Z)(this,"powerBoardIdsForAcroll",void 0),(0,O.Z)(this,"loadPB",new l.vpe),(0,O.Z)(this,"submitConfirm",new l.vpe),(0,O.Z)(this,"editConfirm",new l.vpe),(0,O.Z)(this,"step1Component",void 0),(0,O.Z)(this,"unsubscribe",[]),(0,O.Z)(this,"SK_clientID",void 0),(0,O.Z)(this,"maxlength",500),(0,O.Z)(this,"readBackCheck",!1),(0,O.Z)(this,"submittedCheck",!1),(0,O.Z)(this,"powerBoardID",void 0),(0,O.Z)(this,"lookup_data_temp1",[]),(0,O.Z)(this,"isNewModel",!1),(0,O.Z)(this,"updateAccount",(nn,Yr)=>{const Go={...this.account$.value,...nn};this.account$.next(Go),this.isCurrentFormValid$.next(Yr)}),this.cdr=E,this.api=F,this.toast=_e,this.sharedService=Ge,this.spinner=st,this.router=Tt,this.http=Kt,this.excelService=fr}ngOnInit(){const E=this.sharedService.getLoggedUserDetails();this.SK_clientID=E.attributes["custom:clientID"],this.fetchPBData(1)}nextStep(){const E=this.currentStep$.value+1;E>this.formsCount||this.currentStep$.next(E)}prevStep(){const E=this.currentStep$.value-1;0!==E&&this.currentStep$.next(E)}ngOnDestroy(){this.uploadedFile$.next(null),this.uploadedFile$.complete(),this.unsubscribe.forEach(E=>E.unsubscribe())}readBack(E){if(dn.PK=E.PK,dn.SK=E.SK,dn.file_name=E.file_name,dn.file_location_path_URl=E.file_location_path_URl,dn.Others=E.Others,"string"==typeof E.Others){const F=JSON.parse(E.Others);dn.reportsType=F[0].reportsType}else dn.reportsType=E.Others[0].reportsType;dn.devices=E.devices,console.log("initssss",dn),this.fetchFileFromS3(dn),this.account$.next(dn),this.readBackCheck=!0,this.cdr.detectChanges(),this.currentStep$.next(1)}onSubmit(){this.powerBoardID=this.account$.value.PK,this.createNewPowerBoard()}createNewPowerBoard(){let E,F;this.excelService.uploadedFile$.next(this.uploadedFile$.value),F="object"==typeof this.account$.value.devices?JSON.stringify(this.account$.value.devices):this.account$.value.devices;const _e=[{reportsType:this.account$.value.reportsType}];E={PK:this.account$.value.PK,SK:this.SK_clientID,file_name:this.account$.value.file_name,file_location_path_URl:this.uploadedFile$.value.name,devices:JSON.stringify(this.account$.value.devices),Others:JSON.stringify(_e)};const st=Math.ceil((new Date).getTime()/1e3),Kt={P1:this.account$.value.PK,P2:this.account$.value.file_name,P3:this.uploadedFile$.value.name,P5:this.account$.value.reportsType,P4:st};this.api.CreateDynamicReports(E).then(fr=>{fr?(this.excelService.uploadFile(E),this.createLookUpPowerBoard(Kt,1),this.toast.open("New Powerboard configuration created successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})):alert("Error in Creating Dashboard Configuration")}).catch(fr=>{console.log("err for creation",fr),this.toast.open("Error in Creating New Dashboard Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}updateDynamicReport(){let E,F;this.excelService.uploadedFile$.next(this.uploadedFile$.value),F="object"==typeof this.account$.value.devices?JSON.stringify(this.account$.value.devices):this.account$.value.devices;const _e=[{reportsType:this.account$.value.reportsType}];E={PK:this.account$.value.PK,SK:this.SK_clientID,file_name:this.account$.value.file_name,file_location_path_URl:this.uploadedFile$.value.name,devices:JSON.stringify(this.account$.value.devices),Others:JSON.stringify(_e)};const st=Math.ceil((new Date).getTime()/1e3),Kt={P1:this.account$.value.PK,P2:this.account$.value.file_name,P3:this.uploadedFile$.value.name,P5:this.account$.value.reportsType,P4:st};this.api.UpdateDynamicReports(E).then(fr=>{fr&&(this.excelService.updateFile(E),this.fetchPowerBoardById(1,this.account$.value.PK,"update",Kt),this.toast.open("Dynamic Reports updated successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"}))}).catch(fr=>{console.log("err for creation",fr),this.toast.open("Error in  Updating Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}createLookUpPowerBoard(E,F){this.api.GetLookupMasterTable(this.SK_clientID+"#dynamic_report",F).then(_e=>{let Ge=[];if(null!=_e&&_e.items&&"string"==typeof _e.items&&(Ge=JSON.parse(_e.items)),null!=_e&&Ge.length<this.maxlength){let st=[];_e.items&&"string"==typeof _e.items&&JSON.parse(_e.items).forEach(fr=>{for(const nn in fr)Object.prototype.hasOwnProperty.call(fr,nn)&&st.push(fr[nn])}),st.unshift(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt})),console.log("newdata 11111111 :>> ",st);let Tt={PK:this.SK_clientID+"#dynamic_report",SK:_e.SK,createdTime:"",updatedTime:"",items:JSON.stringify(st)};this.api.UpdateLookupMasterTable(Tt).then(Kt=>{console.log("createResponse :>> ",Kt),this.submitConfirm.emit("submit")}).catch(Kt=>{console.log("err :>> ",Kt)})}else if(null==_e){let st=[];st.push(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt}));let Tt={SK:F,PK:this.SK_clientID+"#dynamic_report",items:JSON.stringify(st)};this.api.CreateLookupMasterTable(Tt).then(Kt=>{this.submitConfirm.emit("submit")}).catch(Kt=>{console.log("err :>> ",Kt)})}else this.createLookUpPowerBoard(E,F+1)})}enableSubmitButton(){this.submittedCheck=!1,this.cdr.detectChanges()}loadDashboard(E){this.router.navigate([`/TimeMachine/WorkLab/${this.account$.value.PK}`])}fetchPBData(E){var F=this;return(0,an.Z)(function*(){try{const _e=yield F.api.GetLookupMasterTable(F.SK_clientID+"#dynamic_report",E);if(_e&&_e.items)if("string"==typeof _e.items){let Ge=JSON.parse(_e.items);if(Array.isArray(Ge)){for(let st=0;st<Ge.length;st++){const Tt=Ge[st];if(null==Tt)break;{const Kt=Object.keys(Tt)[0],{P1:fr,P2:nn,P3:Yr,P4:io,P5:Go}=Tt[Kt];F.lookup_data_temp1.push([fr,nn,Yr,io,Go])}}yield F.fetchPBData(E+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else F.lookup_data_temp1.sort((Ge,st)=>st[2]-Ge[2]),F.listofPowerboardIds=F.lookup_data_temp1.map(Ge=>Ge[0])}catch(_e){console.error("Error:",_e)}})()}fetchFileFromS3(E){this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",{action:"download",type:"xlsx",bucket:"dynamic-excel-reports",folder:`${E.SK}/${E.PK}`,fileName:E.file_location_path_URl},{headers:{"x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(_e=>{console.log("response>>:",_e);let Ge=_e.body;if(Ge)try{const st=atob(Ge),Tt=[];for(let nn=0;nn<st.length;nn+=1024){const Yr=st.slice(nn,nn+1024),io=new Array(Yr.length);for(let Go=0;Go<Yr.length;Go++)io[Go]=Yr.charCodeAt(Go);Tt.push(new Uint8Array(io))}const Kt=new Blob(Tt,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),fr=new File([Kt],E.file_location_path_URl,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.uploadedFile$.next(fr),this.spinner.hide("step1"),console.log("File successfully retrieved and decoded:",fr)}catch(st){this.spinner.hide("step1"),console.error("Error decoding base64 string:",st),Pr().fire({title:"Error",text:"There was an error processing the file.",icon:"error"})}else this.spinner.hide("step1"),console.error("Invalid base64 string:",Ge),Pr().fire({title:"Error",text:"The file format is invalid.",icon:"error"})},_e=>{this.spinner.hide("step1"),console.error("Error fetching file from S3:",_e),Pr().fire({title:"Error",text:"Unable to fetch file from the server.",icon:"error"})})}newModel(){this.isNewModel=!0,dn.PK="",dn.SK="",dn.devices=[],dn.file_name="",dn.file_location_path_URl="",dn.formulas=[],dn.Values=[],dn.filters=[],dn.rows=[],dn.columns=[],dn.Others=[],this.account$.next(dn),this.uploadedFile$.next(null),this.currentStep$.next(1),this.cdr.detectChanges(),this.spinner.hide("step1")}closeModal(){this.isNewModel=!1,this.readBackCheck=!1,this.currentStep$.next(1),this.cdr.detectChanges()}onUpdate(){this.updateDynamicReport()}showSpinner(){this.spinner.show("step1")}fetchPowerBoardById(E,F,_e,Ge){var st=this;return(0,an.Z)(function*(){try{const Tt=yield st.api.GetLookupMasterTable(st.SK_clientID+"#dynamic_report",E);if(Tt&&Tt.items){let Kt=yield JSON.parse(Tt.items),fr=Kt.findIndex(nn=>nn[Object.keys(nn)[0]].P1===F);if(-1!==fr){if("update"===_e){Kt[fr][`L${fr+1}`]=Ge;const Yr=[];for(let io=0;io<Kt.length;io++){const Go=Object.keys(Kt[io])[0],Vn=`L${io+1}`;if(Go){const yi={[Vn]:Kt[io][Go]},ai=Yr.findIndex(Ti=>Object.keys(Ti)[0]===Vn);-1!==ai?Object.assign(Yr[ai][Vn],Kt[io][Go]):Yr.push(yi)}else console.error(`Original key not found for renaming in data[${io}].`)}Kt=Yr}else"delete"===_e&&(Kt.splice(fr,1),console.log("Data after deleted deleted",Kt));let nn={PK:st.SK_clientID+"#dynamic_report",SK:Tt.SK,items:JSON.stringify(Kt)};yield st.api.UpdateLookupMasterTable(nn),st.editConfirm.emit("edit")}else yield new Promise(nn=>setTimeout(nn,500)),yield st.fetchPowerBoardById(E+1,F,_e,Ge)}else Pr().fire({position:"top-right",icon:"error",title:`ID ${F} not found`,showConfirmButton:!1,timer:1500})}catch(Tt){console.error("Error:",Tt)}})()}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(l.sBO),l.Y36(Qr.t),l.Y36(x.ux),l.Y36(ze.F),l.Y36(G.t2),l.Y36(mo.F0),l.Y36(m.eN),l.Y36(Xe.x))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dynamic-report-stepper"]],viewQuery:function(E,F){if(1&E&&l.Gf(Fa,5),2&E){let _e;l.iGM(_e=l.CRH())&&(F.step1Component=_e.first)}},inputs:{extractDevices:"extractDevices",powerBoardIdsForAcroll:"powerBoardIdsForAcroll"},outputs:{loadPB:"loadPB",submitConfirm:"submitConfirm",editConfirm:"editConfirm"},decls:91,vars:30,consts:[["id","dynamic_report_stepperModal","tabindex","-1","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"ki-duotone","ki-cross","fs-1"],[1,"path1"],[1,"path2"],[1,"modal-body","py-lg-10","px-lg-10"],["id","kt_create_account_stepper",1,"stepper","stepper-pills","stepper-column","d-flex","flex-column","flex-xl-row","flex-row-fluid"],[1,"card","d-flex","justify-content-center","justify-content-xl-start","flex-row-auto","w-100","w-xl-300px","w-xxl-400px","me-9"],[1,"card-body","px-6","px-lg-10","px-xxl-15","py-20"],[1,"stepper-nav"],[1,"stepper-item",3,"ngClass"],[1,"stepper-wrapper"],[1,"stepper-icon","w-40px","h-40px"],[1,"stepper-check","fas","fa-check"],[1,"stepper-number"],[1,"stepper-label"],[1,"stepper-title"],[1,"stepper-desc","fw-semibold"],[1,"stepper-line","h-40px"],[1,"d-flex","flex-row-fluid","flex-center","bg-body","rounded"],["noValidate","","id","kt_create_account_form",1,"py-20","w-100","w-xl-700px","px-9"],[1,"current"],[4,"ngIf"],[1,"d-flex","flex-stack","pt-10"],[1,"mr-2"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen","name"],[2,"color","white"],[1,"w-100",3,"updateParentModel","defaultValues","isEditMode","enableSubmitButton"],[1,"w-100",3,"updateParentModel","defaultValues","extractDevices"],[1,"w-100",3,"updateParentModel","defaultValues","powerBoardIdsForAcroll","uploadedFile$","dropzoneInstance$"],[1,"w-100",3,"updateParentModel","defaultValues","uploadedFile$","dropzoneInstance$"],[1,"w-100",3,"redirectPowerBoard"],["type","button",1,"btn","btn-lg","btn-light-primary","me-3",3,"click"],[1,"fa-solid","fa-arrow-left"],["type","button",1,"btn","fw-bold","btn-lg","btn-primary","me-3","me-3","d-flex",3,"disabled","click"],[1,"indicator-label"],[1,"fa-solid","fa-chevron-right"],["type","button",1,"btn","fw-bold","btn-lg","btn-primary","me-3",3,"disabled","click"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),l._uU(5,"Create Model"),l.qZA(),l.TgZ(6,"div",4),l.NdJ("click",function(){return F.closeModal()}),l.TgZ(7,"i",5),l._UZ(8,"span",6)(9,"span",7),l.qZA()()(),l.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),l._UZ(18,"i",16),l.TgZ(19,"span",17),l._uU(20,"1"),l.qZA()(),l.TgZ(21,"div",18)(22,"h3",19),l._uU(23," Model Details "),l.qZA(),l.TgZ(24,"div",20),l._uU(25," Here You can Name your Model "),l.qZA()()(),l._UZ(26,"div",21),l.qZA(),l.TgZ(27,"div",13)(28,"div",14)(29,"div",15),l._UZ(30,"i",16),l.TgZ(31,"span",17),l._uU(32,"2"),l.qZA()(),l.TgZ(33,"div",18)(34,"h3",19),l._uU(35," Device Configuartion "),l.qZA(),l.TgZ(36,"div",20),l._uU(37," Here you can change your device for Model "),l.qZA()()(),l._UZ(38,"div",21),l.qZA(),l.TgZ(39,"div",13)(40,"div",14)(41,"div",15),l._UZ(42,"i",16),l.TgZ(43,"span",17),l._uU(44,"3"),l.qZA()(),l.TgZ(45,"div",18)(46,"h3",19),l._uU(47," file Upload "),l.qZA(),l.TgZ(48,"div",20),l._uU(49," upload the xlsx file "),l.qZA()()(),l._UZ(50,"div",21),l.qZA(),l.TgZ(51,"div",13)(52,"div",14)(53,"div",15),l._UZ(54,"i",16),l.TgZ(55,"span",17),l._uU(56,"4"),l.qZA()(),l.TgZ(57,"div",18)(58,"h3",19),l._uU(59," Extracted Properties Info "),l.qZA(),l.TgZ(60,"div",20),l._uU(61," here you change the configured device "),l.qZA()()(),l._UZ(62,"div",21),l.qZA(),l.TgZ(63,"div",13)(64,"div",14)(65,"div",15),l._UZ(66,"i",16),l.TgZ(67,"span",17),l._uU(68,"5"),l.qZA()(),l.TgZ(69,"div",18)(70,"h3",19),l._uU(71," Completed "),l.qZA(),l.TgZ(72,"div",20),l._uU(73," Woah, we are here "),l.qZA()()()()()()(),l.TgZ(74,"div",22)(75,"form",23)(76,"div",24),l.YNc(77,Jt,2,3,"ng-container",25),l.YNc(78,Jn,2,3,"ng-container",25),l.YNc(79,Qn,2,5,"ng-container",25),l.YNc(80,Io,2,4,"ng-container",25),l.YNc(81,ri,2,0,"ng-container",25),l.qZA(),l.TgZ(82,"div",26)(83,"div",27),l.YNc(84,Ka,4,0,"ng-container",25),l.qZA(),l.YNc(85,ui,6,2,"ng-container",25),l.YNc(86,nl,5,2,"ng-container",25),l.YNc(87,To,5,2,"ng-container",25),l.qZA()()()()()()(),l.TgZ(88,"ngx-spinner",28)(89,"p",29),l._uU(90,"Loading all the assets Please Wait... "),l.qZA()()()),2&E&&(l.xp6(15),l.Q6J("ngClass",l.WLB(16,rs,1===F.currentStep$.value,F.currentStep$.value>1)),l.xp6(12),l.Q6J("ngClass",l.WLB(19,rs,2===F.currentStep$.value,F.currentStep$.value>2)),l.xp6(12),l.Q6J("ngClass",l.WLB(22,rs,3===F.currentStep$.value,F.currentStep$.value>3)),l.xp6(12),l.Q6J("ngClass",l.WLB(25,rs,4===F.currentStep$.value,F.currentStep$.value>4)),l.xp6(12),l.Q6J("ngClass",l.VKq(28,el,5===F.currentStep$.value)),l.xp6(14),l.Q6J("ngIf",1===F.currentStep$.value&&F.readBackCheck||1===F.currentStep$.value&&F.isNewModel),l.xp6(1),l.Q6J("ngIf",2===F.currentStep$.value),l.xp6(1),l.Q6J("ngIf",3===F.currentStep$.value),l.xp6(1),l.Q6J("ngIf",4===F.currentStep$.value),l.xp6(1),l.Q6J("ngIf",5===F.currentStep$.value),l.xp6(3),l.Q6J("ngIf",1!==F.currentStep$.value),l.xp6(1),l.Q6J("ngIf",F.currentStep$.value!==F.formsCount&&F.currentStep$.value<F.formsCount-1),l.xp6(1),l.Q6J("ngIf",F.currentStep$.value!==F.formsCount&&F.currentStep$.value===F.formsCount-1&&!F.readBackCheck),l.xp6(1),l.Q6J("ngIf",F.currentStep$.value!==F.formsCount&&F.currentStep$.value===F.formsCount-1&&F.readBackCheck),l.xp6(1),l.Q6J("fullScreen",!0)("name","step1"))},dependencies:[S.mk,S.O5,X._Y,X.JL,X.F,G.Ro,mt,Fa,Ko,Zn,Do]})),ye})();var Qo=re(74260);function Ba(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",17),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.openModal())}),l.TgZ(1,"a",18),l._UZ(2,"app-keenicon",19),l._uU(3," New Model "),l.qZA()()}}function Et(le,ye){1&le&&(l.TgZ(0,"tr",20)(1,"th"),l._uU(2,"ID"),l.qZA(),l.TgZ(3,"th"),l._uU(4,"Name"),l.qZA(),l.TgZ(5,"th"),l._uU(6,"File Name"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Report Type"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Updated At"),l.qZA(),l.TgZ(11,"th",21),l._uU(12,"Work Lab"),l.qZA(),l.TgZ(13,"th",21),l._uU(14,"Edit"),l.qZA(),l.TgZ(15,"th",21),l._uU(16,"Delete"),l.qZA()())}function Mr(le,ye){1&le&&(l.TgZ(0,"tr",20)(1,"th"),l._uU(2,"ID"),l.qZA(),l.TgZ(3,"th"),l._uU(4,"Name"),l.qZA(),l.TgZ(5,"th"),l._uU(6,"File Name"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Report Type"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Updated At"),l.qZA(),l.TgZ(11,"th",21),l._uU(12,"Work Lab"),l.qZA()())}let Ao=(()=>{var le;class ye{constructor(E,F,_e,Ge,st,Tt,Kt){(0,O.Z)(this,"api",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"spinner",void 0),(0,O.Z)(this,"locationPermissionService",void 0),(0,O.Z)(this,"excelService",void 0),(0,O.Z)(this,"router",void 0),(0,O.Z)(this,"dynamicReportStepperComponent",void 0),(0,O.Z)(this,"hideDeleteButton",!0),(0,O.Z)(this,"getLoggedUser",void 0),(0,O.Z)(this,"SK_clientID",void 0),(0,O.Z)(this,"user_companyID",void 0),(0,O.Z)(this,"username",void 0),(0,O.Z)(this,"extractDevices",[]),(0,O.Z)(this,"lookup_data_temp_dr",[]),(0,O.Z)(this,"listofDRIds",void 0),(0,O.Z)(this,"maxlength",void 0),(0,O.Z)(this,"powerboard_table",[]),(0,O.Z)(this,"columnDatatable",void 0),(0,O.Z)(this,"pbTableData",void 0),(0,O.Z)(this,"isModalOpen",!1),(0,O.Z)(this,"routerSubscription",void 0),(0,O.Z)(this,"allPermissions_user",void 0),(0,O.Z)(this,"hidingLink",void 0),this.api=E,this.sharedService=F,this.cdr=_e,this.spinner=Ge,this.locationPermissionService=st,this.excelService=Tt,this.router=Kt}ngOnInit(){this.getLoggedUser=this.sharedService.getLoggedUserDetails(),this.SK_clientID=this.getLoggedUser.attributes["custom:clientID"],this.user_companyID=this.getLoggedUser.attributes["custom:companyID"],this.username=this.getLoggedUser.attributes["custom:username"];const E=localStorage.getItem("permissionDetails");this.allPermissions_user=E?JSON.parse(E):[],this.checkPermission(),this.loadInitData(),this.routerSubscription=this.router.events.subscribe(F=>{})}ngAfterViewInit(){}checkPermission(){const E=this.allPermissions_user,F=E.includes("DynamicExcelReports - Update"),_e=E.includes("DynamicExcelReports - View");this.hidingLink=F,console.log("CHECK PERMISSION - Update:",F),console.log("CHECK PERMISSION - View:",_e),F||_e?this.hideDeleteButton=F:(console.warn("User lacks required permissions. Redirecting to 404."),this.router.navigate(["/404"]))}loadInitData(){var E=this;return(0,an.Z)(function*(){E.spinner.show();try{E.extractValidDevices(),yield Promise.all([E.fetchDRData_redirect(1)]),console.log("All data loaded successfully")}catch(F){console.error("Error loading data:",F)}})()}extractValidDevices(){this.locationPermissionService.fetchGlobalLocationTree().then(E=>{if(!E)throw new Error("No data returned");E.forEach(F=>{"device"===F.node_type&&(Array.isArray(F.text)&&(F.text=F.text[0]),this.extractDevices.push({mn:F.mn,label:F.text+"-"+F.mn}))}),console.log("Extracted Devices:",this.extractDevices)}).catch(E=>{console.error("Failed to fetch or process data",E)})}fetchDRData_redirect(E){var F=this;return(0,an.Z)(function*(){yield F.coreFetchData("dynamic_report",E,"lookup_data_temp_dr","desc")})()}coreFetchData(E,F,_e,Ge){var st=this;return(0,an.Z)(function*(){try{const Tt=yield st.api.GetLookupMasterTable(`${st.SK_clientID}#${E}`,F);if(Tt&&Tt.items)if("string"==typeof Tt.items){const Kt=JSON.parse(Tt.items);if(Array.isArray(Kt)){for(const fr of Kt)if(fr){const nn=Object.keys(fr)[0],{P1:Yr,P2:io,P3:Go,P4:Vn,P5:yi}=fr[nn];st[_e].push([Yr,io,Go,Vn,yi])}yield st.coreFetchData(E,F+1,_e,Ge)}else console.error("Invalid data format - not an array.")}else console.error("response.items is not a string.");else st[_e].sort((Kt,fr)=>"asc"===Ge?Kt[3]-fr[3]:fr[3]-Kt[3]),"dynamic_report"===E&&(st.listofDRIds=st[_e].map(Kt=>Kt[0]),console.log("checkk",st.lookup_data_temp_dr),st.showDatatable(st.lookup_data_temp_dr))}catch(Tt){st.spinner.show(),console.error(`Error in coreFetchData for ${E}:`,Tt)}})()}createLookUpDynamicReport(E,F){this.api.GetLookupMasterTable(this.SK_clientID+"#dynamic_report",F).then(_e=>{let Ge=[];if(null!=_e&&_e.items&&"string"==typeof _e.items&&(Ge=JSON.parse(_e.items)),null!=_e&&Ge.length<this.maxlength){let st=[];_e.items&&"string"==typeof _e.items&&JSON.parse(_e.items).forEach(fr=>{for(const nn in fr)Object.prototype.hasOwnProperty.call(fr,nn)&&st.push(fr[nn])}),st.unshift(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt})),console.log("newdata 11111111 :>> ",st);let Tt={PK:this.SK_clientID+"#dynamic_report",SK:_e.SK,createdTime:"",updatedTime:"",items:JSON.stringify(st)};this.api.UpdateLookupMasterTable(Tt).then(Kt=>{console.log("createResponse :>> ",Kt)}).catch(Kt=>{console.log("err :>> ",Kt)})}else if(null==_e){let st=[];st.push(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt}));let Tt={SK:F,PK:this.SK_clientID+"#dynamic_report",items:JSON.stringify(st)};this.api.CreateLookupMasterTable(Tt).then(Kt=>{}).catch(Kt=>{})}else this.createLookUpDynamicReport(E,F+1)})}fetchPowerBoardById(E,F,_e,Ge){var st=this;return(0,an.Z)(function*(){try{const Tt=yield st.api.GetLookupMasterTable(st.SK_clientID+"#dynamic_report",E);if(Tt&&Tt.items){let Kt=yield JSON.parse(Tt.items),fr=Kt.findIndex(nn=>nn[Object.keys(nn)[0]].P1===F);if(-1!==fr){if("update"===_e){Kt[fr][`L${fr+1}`]=Ge;const Yr=[];for(let io=0;io<Kt.length;io++){const Go=Object.keys(Kt[io])[0],Vn=`L${io+1}`;if(Go){const yi={[Vn]:Kt[io][Go]},ai=Yr.findIndex(Ti=>Object.keys(Ti)[0]===Vn);-1!==ai?Object.assign(Yr[ai][Vn],Kt[io][Go]):Yr.push(yi)}else console.error(`Original key not found for renaming in data[${io}].`)}Kt=Yr}else"delete"===_e&&(Kt.splice(fr,1),console.log("Data after deleted deleted",Kt));let nn={PK:st.SK_clientID+"#dynamic_report",SK:Tt.SK,items:JSON.stringify(Kt)};yield st.api.UpdateLookupMasterTable(nn)}else yield new Promise(nn=>setTimeout(nn,500)),yield st.fetchPowerBoardById(E+1,F,_e,Ge)}else Pr().fire({position:"top-right",icon:"error",title:`ID ${F} not found`,showConfirmButton:!1,timer:1500})}catch(Tt){console.error("Error:",Tt)}})()}createNewDynamicReport(E){}updateDynamicReport(E){}deleteDynamicReport(E){if(E?.id){const F={PK:E.id,SK:this.SK_clientID};this.excelService.deleteFile({PK:E.id,SK:this.SK_clientID,file_name:E.fileName});const Ge={P1:E.id,P2:E.name,P3:E.fileName,P4:Math.ceil((new Date).getTime()/1e3)};Pr().fire({position:"center",title:"Are you sure?",text:"You won\u2019t get these details back again",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think",allowOutsideClick:!1}).then(st=>{st.isConfirmed?this.api.DeleteDynamicReports(F).then(()=>{this.fetchPowerBoardById(1,E.id,"delete",Ge),Pr().fire("Removed!","Powerboard removed successfully.","success");const Tt=this.lookup_data_temp_dr.findIndex(Kt=>Kt[0]===E.id);this.lookup_data_temp_dr.splice(Tt,1),console.log("lookup_data_temp_pb :>> ",this.lookup_data_temp_dr),this.showDatatable(this.lookup_data_temp_dr)}).catch(Tt=>console.error("Delete error:",Tt)):Pr().fire("Cancelled","Powerboard not removed","error")})}}goToWorkSpace(E){}showDatatable(E){this.columnDatatable=[{data:"id"},{data:"name"},{data:"fileName"},{data:"type"},{data:"updatedData"}];let _e="btn btn-sm btn-primary editdelete ",Ge="btn btn-sm btn-primary editdelete",st="btn btn-sm btn-danger editdelete ";if(this.powerboard_table=[],typeof E<"u")for(let Kt=0;Kt<E.length;Kt++){let Go=E[Kt][3];this.powerboard_table.push({id:E[Kt][0],name:E[Kt][1],fileName:E[Kt][2],type:E[Kt][4],updatedData:new Date(1e3*Go).toDateString()+" "+new Date(1e3*Go).toLocaleTimeString()})}else this.powerboard_table=[];$("#dynamic_report_table").off("click"),$("#dynamic_report_table").on("click",".editdelete",function(){let Kt=$(this).closest("tr"),fr=Tt.pbTableData.row(Kt);this.className==st&&Tt.deleteDynamicReport(fr.data()),this.className==_e&&(Tt.editHelper(fr.data()),this.captureStatus=!1),this.className==Ge&&Tt.router.navigateByUrl(`TimeMachine/WorkLab/${fr.data().id}`)}),!0===this.hideDeleteButton?this.columnDatatable.push({defaultContent:"<button class='"+Ge+"' data-bs-dismiss='modal' ><i class='fa-solid fa-flask'></i></button>"},{defaultContent:"<button class='"+_e+"' data-bs-toggle='modal' data-bs-target='#dynamic_report_stepperModal' ><i class='fa fa-edit'></i></button>"},{defaultContent:"<button class='"+st+"'><i class='fa fa-trash'></i></button>"}):this.columnDatatable.push({defaultContent:"<button class='"+Ge+"' data-bs-dismiss='modal' ><i class='fa-solid fa-flask'></i></button>"}),this.getLookupTableData(this.powerboard_table,this.columnDatatable);let Tt=this}getLookupTableData(E,F){this.pbTableData=$("#dynamic_report_table").DataTable({pagingType:"full_numbers",destroy:!0,lengthChange:!0,responsive:!0,data:E,order:[[3,"date"]],columnDefs:[{type:"date",targets:3}],columns:F,drawCallback:function(){$("div.dataTables_wrapper").css("margin","0")}}),this.spinner.hide()}openModal(){this.dynamicReportStepperComponent.showSpinner(),this.isModalOpen=!0,this.dynamicReportStepperComponent.newModel()}closeModal(){this.isModalOpen=!1}editHelper(E){this.dynamicReportStepperComponent.showSpinner(),this.api.GetDynamicReports(E.id,this.SK_clientID).then(F=>{F&&(this.dynamicReportStepperComponent.readBack(F),this.cdr.detectChanges())})}onConfirmSubmit(E){this.lookup_data_temp_dr=[],this.fetchDRData_redirect(1)}onConfirmUpdate(E){this.lookup_data_temp_dr=[],this.fetchDRData_redirect(1)}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(Qr.t),l.Y36(ze.F),l.Y36(l.sBO),l.Y36(G.t2),l.Y36(Qo.G),l.Y36(Xe.x),l.Y36(mo.F0))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dynamic-excel-creator"]],viewQuery:function(E,F){if(1&E&&l.Gf(gc,5),2&E){let _e;l.iGM(_e=l.CRH())&&(F.dynamicReportStepperComponent=_e.first)}},decls:22,vars:5,consts:[["id","kt_wrapper",1,"d-flex","flex-column","flex-row-fluid","wrapper"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[1,"d-flex","flex-column-fluid"],[1,"container"],[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],["class","card-toolbar","data-bs-toggle","tooltip","data-bs-placement","top","data-bs-trigger","hover","title","Click to add a Model",3,"click",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],["id","dynamic_report_table",1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4"],["class","fw-bolder",4,"ngIf"],[3,"extractDevices","submitConfirm","editConfirm","loadPB"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-trigger","hover","title","Click to add a Model",1,"card-toolbar",3,"click"],["data-bs-toggle","modal","data-bs-target","#dynamic_report_stepperModal",1,"btn","btn-sm","btn-light-primary"],["name","plus",1,"fs-3"],[1,"fw-bolder"],[1,"w-100px"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6)(7,"span",7),l._uU(8,"Dynamic Excel Model Configuartion"),l.qZA(),l.TgZ(9,"span",8),l._uU(10,"here you can create model for your dynamic report"),l.qZA()(),l.YNc(11,Ba,4,0,"div",9),l.qZA(),l.TgZ(12,"div",10)(13,"div",11)(14,"table",12)(15,"thead"),l.YNc(16,Et,17,0,"tr",13),l.YNc(17,Mr,13,0,"tr",13),l.qZA()()()()()()()()(),l.TgZ(18,"app-dynamic-report-stepper",14),l.NdJ("submitConfirm",function(Ge){return F.onConfirmSubmit(Ge)})("editConfirm",function(Ge){return F.onConfirmUpdate(Ge)})("loadPB",function(Ge){return F.goToWorkSpace(Ge)}),l.qZA(),l.TgZ(19,"ngx-spinner",15)(20,"p",16),l._uU(21,"loading Dynamic Reports Creator... "),l.qZA()()),2&E&&(l.xp6(11),l.Q6J("ngIf",F.hidingLink),l.xp6(5),l.Q6J("ngIf",!0===F.hideDeleteButton),l.xp6(1),l.Q6J("ngIf",!1===F.hideDeleteButton),l.xp6(1),l.Q6J("extractDevices",F.extractDevices),l.xp6(1),l.Q6J("fullScreen",!0))},dependencies:[S.O5,G.Ro,No.q,gc]})),ye})();var oa=re(89362),ba=re(20759),Vi=re(16676),hl=re.n(Vi),ul=re(34423),Oc=re(34004),Yl=re(2664),Wc=re(22096),Vd=re(63019),Od=re(65592),Ml=re(78645),id=re(37398),Ac=re(93997),Ea=re(27921),du=re(83620),Js=re(32181),ad=re(94664),Ql=re(48180),Yc=re(99397),Qc=re(6593);const kc=["container"];function zl(le,ye){}function Xc(le,ye){1&le&&l._UZ(0,"formly-field",1),2&le&&l.Q6J("field",ye.$implicit)}const eu=["*"],Oa=["fieldComponent"];function ql(le,ye,K){if(ye.id)return ye.id;let E=ye.type;return!E&&ye.template&&(E="template"),E instanceof l.DyG&&(E=E.prototype.constructor.name),[le,E,ye.key,K].join("_")}function as(le){return!dt(le.key)&&""!==le.key&&(!Array.isArray(le.key)||le.key.length>0)}function El(le){if(!as(le))return[];if(le._keyPath?.key!==le.key){let ye=[];if("string"==typeof le.key){const K=-1===le.key.indexOf("[")?le.key:le.key.replace(/\[(\w+)\]/g,".$1");ye=-1!==K.indexOf(".")?K.split("."):[K]}else ye=Array.isArray(le.key)?le.key.slice(0):[`${le.key}`];Ri(le,"_keyPath",{key:le.key,path:ye})}return le._keyPath.path.slice(0)}const Gu=["required","pattern","minLength","maxLength","min","max"];function Lc(le,ye){let K=El(le);if(0===K.length)return;let E=le;for(;E.parent;)E=E.parent,K=[...El(E),...K];if(void 0===ye&&le.resetOnHide){const F=K.pop();delete K.reduce((Ge,st)=>Ge[st]||{},E.model)[F]}else!function Cf(le,ye,K){for(let E=0;E<ye.length-1;E++){const F=ye[E];(!le[F]||!Jo(le[F]))&&(le[F]=/^\d+$/.test(ye[E+1])?[]:{}),le=le[F]}le[ye[ye.length-1]]=ra(K)}(E.model,K,ye)}function et(le){let ye=le.parent?le.parent.model:le.model;for(const K of El(le)){if(!ye)return ye;ye=ye[K]}return ye}function Ye(le,...ye){return ye.forEach(K=>{for(const E in K)dt(le[E])||tn(le[E])?le[E]=ra(K[E]):ao(le[E],K[E])&&Ye(le[E],K[E])}),le}function dt(le){return null==le}function Dt(le){return void 0===le}function tn(le){return""===le}function uo(le){return"function"==typeof le}function ao(le,ye){return Jo(le)&&Jo(ye)&&Object.getPrototypeOf(le)===Object.getPrototypeOf(ye)&&!(Array.isArray(le)||Array.isArray(ye))}function Jo(le){return null!=le&&"object"==typeof le}function ra(le){if(!Jo(le)||(0,Yl.b)(le)||le instanceof l.Rgc||le.changingThisBreaksApplicationSecurity||-1!==["RegExp","FileList","File","Blob"].indexOf(le.constructor?.name))return le;if(le instanceof Set)return new Set(le);if(le instanceof Map)return new Map(le);if(le instanceof Uint8Array)return new Uint8Array(le);if(le instanceof Uint16Array)return new Uint16Array(le);if(le instanceof Uint32Array)return new Uint32Array(le);if(le._isAMomentObject&&uo(le.clone))return le.clone();if(le instanceof X.TO)return null;if(le instanceof Date)return new Date(le.getTime());if(Array.isArray(le))return le.slice(0).map(E=>ra(E));const ye=Object.getPrototypeOf(le);let K=Object.create(ye);return K=Object.setPrototypeOf(K,ye),Object.keys(le).reduce((E,F)=>{const _e=Object.getOwnPropertyDescriptor(le,F);return _e.get?Object.defineProperty(E,F,_e):E[F]=ra(le[F]),E},K)}function Ri(le,ye,K){Object.defineProperty(le,ye,{enumerable:!1,writable:!0,configurable:!0}),le[ye]=K}function ls(le,ye,K){let E=[];const F=()=>{E.forEach(Ge=>Ge()),E=[]},_e=Ra(le,ye,({firstChange:Ge,currentValue:st})=>{!Ge&&K(),F(),Jo(st)&&"Object"===st.constructor.name&&Object.keys(st).forEach(Tt=>{E.push(ls(le,[...ye,Tt],K))})});return()=>{_e.unsubscribe(),F()}}function Ra(le,ye,K){le._observers||Ri(le,"_observers",{});let E=le;for(let st=0;st<ye.length-1;st++)(!E[ye[st]]||!Jo(E[ye[st]]))&&(E[ye[st]]=/^\d+$/.test(ye[st+1])?[]:{}),E=E[ye[st]];const F=ye[ye.length-1],_e=ye.join(".");le._observers[_e]||(le._observers[_e]={value:E[F],onChange:[]});const Ge=le._observers[_e];if(E[F]!==Ge.value&&(Ge.value=E[F]),K&&-1===Ge.onChange.indexOf(K)&&(Ge.onChange.push(K),K({currentValue:Ge.value,firstChange:!0}),Ge.onChange.length>=1&&Jo(E))){const{enumerable:st}=Object.getOwnPropertyDescriptor(E,F)||{enumerable:!0};Object.defineProperty(E,F,{enumerable:st,configurable:!0,get:()=>Ge.value,set:Tt=>{if(Tt!==Ge.value){const Kt=Ge.value;Ge.value=Tt,Ge.onChange.forEach(fr=>fr({previousValue:Kt,currentValue:Tt,firstChange:!1}))}}})}return{setValue(st,Tt=!0){if(st===Ge.value)return;const Kt=Ge.value;Ge.value=st,Ge.onChange.forEach(fr=>{fr!==K&&Tt&&fr({previousValue:Kt,currentValue:st,firstChange:!1})})},unsubscribe(){Ge.onChange=Ge.onChange.filter(st=>st!==K),0===Ge.onChange.length&&delete le._observers[_e]}}}function es(le,ye){if(ye=Array.isArray(ye)?ye.join("."):ye,le.fieldGroup)for(let K=0,E=le.fieldGroup.length;K<E;K++){const F=le.fieldGroup[K],_e=Array.isArray(F.key)?F.key.join("."):F.key;if(_e===ye)return F;if(F.fieldGroup&&(dt(_e)||0===ye.indexOf(`${_e}.`))){const Ge=es(F,dt(_e)?ye:ye.slice(_e.length+1));if(Ge)return Ge}}}function Xi(le){le._componentRefs?.forEach(ye=>{ye instanceof l.UuU?ye.injector.get(l.sBO).markForCheck():ye.markForCheck()})}function cc(le){const ye=E=>E.hide||E.expressions?.hide||E.hideExpression;let K=!le.resetOnHide||!ye(le);if(!ye(le)&&le.resetOnHide){let E=le.parent;for(;E&&!ye(E);)E=E.parent;K=!E||!ye(E)}return!K}function Il(){return+l.q4F.major>18||+l.q4F.major>=18&&+l.q4F.minor>=1}const vc=new l.OlP("FORMLY_CONFIG");let Aa=(()=>{class le{constructor(){this.types={},this.validators={},this.wrappers={},this.messages={},this.extras={checkExpressionOn:"modelChange",lazyRender:!0,resetFieldOnHide:!0,renderFormlyFieldElement:!0,showError:K=>K.formControl?.invalid&&(K.formControl?.touched||K.options.parentForm?.submitted||!!K.field.validation?.show)},this.extensions={},this.presets={},this.extensionsByPriority={}}addConfig(K){K.types&&K.types.forEach(E=>this.setType(E)),K.validators&&K.validators.forEach(E=>this.setValidator(E)),K.wrappers&&K.wrappers.forEach(E=>this.setWrapper(E)),K.validationMessages&&K.validationMessages.forEach(E=>this.addValidatorMessage(E.name,E.message)),K.extensions&&this.setSortedExtensions(K.extensions),K.extras&&(this.extras={...this.extras,...K.extras}),K.presets&&(this.presets={...this.presets,...K.presets.reduce((E,F)=>({...E,[F.name]:F.config}),{})})}setType(K){Array.isArray(K)?K.forEach(E=>this.setType(E)):(this.types[K.name]||(this.types[K.name]={name:K.name}),["component","extends","defaultOptions","wrappers"].forEach(E=>{K.hasOwnProperty(E)&&(this.types[K.name][E]=K[E])}))}getType(K,E=!1){if(K instanceof l.DyG)return{component:K,name:K.prototype.constructor.name};if(!this.types[K]){if(E)throw new Error(`[Formly Error] The type "${K}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return null}return this.mergeExtendedType(K),this.types[K]}getMergedField(K={}){const E=this.getType(K.type);if(!E)return;E.defaultOptions&&Ye(K,E.defaultOptions);const F=E.extends&&this.getType(E.extends).defaultOptions;F&&Ye(K,F),K?.optionsTypes&&K.optionsTypes.forEach(Ge=>{const st=this.getType(Ge).defaultOptions;st&&Ye(K,st)});const _e=this.resolveFieldTypeRef(K);_e?.instance?.defaultOptions&&Ye(K,_e.instance.defaultOptions),!K.wrappers&&E.wrappers&&(K.wrappers=[...E.wrappers])}resolveFieldTypeRef(K={}){const E=this.getType(K.type);if(!E)return null;if(!E.component||E._componentRef)return E._componentRef;const{_viewContainerRef:F,_injector:_e}=K.options;if(!F||!_e)return null;const Ge=F.createComponent(E.component,{injector:_e});Ri(E,"_componentRef",Ge);try{Ge.destroy()}catch(st){console.error(`An error occurred while destroying the Formly component type "${K.type}"`,st)}return E._componentRef}setWrapper(K){this.wrappers[K.name]=K,K.types&&K.types.forEach(E=>{this.setTypeWrapper(E,K.name)})}getWrapper(K){if(K instanceof l.DyG)return{component:K,name:K.prototype.constructor.name};if(!this.wrappers[K])throw new Error(`[Formly Error] The wrapper "${K}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.wrappers[K]}setTypeWrapper(K,E){this.types[K]||(this.types[K]={}),this.types[K].wrappers||(this.types[K].wrappers=[]),-1===this.types[K].wrappers.indexOf(E)&&this.types[K].wrappers.push(E)}setValidator(K){this.validators[K.name]=K}getValidator(K){if(!this.validators[K])throw new Error(`[Formly Error] The validator "${K}" could not be found. Please make sure that is registered through the FormlyModule declaration.`);return this.validators[K]}addValidatorMessage(K,E){this.messages[K]=E}getValidatorMessage(K){return this.messages[K]}setSortedExtensions(K){K.forEach(E=>{const F=E.priority??1;this.extensionsByPriority[F]={...this.extensionsByPriority[F],[E.name]:E.extension}}),this.extensions=Object.keys(this.extensionsByPriority).map(Number).sort((E,F)=>E-F).reduce((E,F)=>({...E,...this.extensionsByPriority[F]}),{})}mergeExtendedType(K){if(!this.types[K].extends)return;const E=this.getType(this.types[K].extends);this.types[K].component||(this.types[K].component=E.component),this.types[K].wrappers||(this.types[K].wrappers=E.wrappers)}}return le.\u0275fac=function(K){return new(K||le)},le.\u0275prov=l.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})(),uc=(()=>{class le{constructor(K,E,F,_e){this.config=K,this.injector=E,this.viewContainerRef=F,this.parentForm=_e}buildForm(K,E=[],F,_e){this.build({fieldGroup:E,model:F,form:K,options:_e})}build(K){if(!this.config.extensions.core)throw new Error("NgxFormly: missing `forRoot()` call. use `forRoot()` when registering the `FormlyModule`.");K.parent||this._setOptions(K),function Ll(le,ye){const K=le._updateTreeValidity.bind(le);le._updateTreeValidity=()=>{},ye(),le._updateTreeValidity=K}(K.form,()=>{if(this._build(K),!K.parent||K.fieldArray){const E=K.options;K.parent&&cc(K)&&E._hiddenFieldsForCheck?.push({field:K,default:!1}),E.checkExpressions?.(K,!0),E._detectChanges?.(K)}})}_build(K){if(!K)return;const E=Object.values(this.config.extensions);E.forEach(F=>F.prePopulate?.(K)),E.forEach(F=>F.onPopulate?.(K)),K.fieldGroup?.forEach(F=>this._build(F)),E.forEach(F=>F.postPopulate?.(K))}_setOptions(K){K.form=K.form||new X.cw({}),K.model=K.model||{},K.options=K.options||{};const E=K.options;E._viewContainerRef||Ri(E,"_viewContainerRef",this.viewContainerRef),E._injector||Ri(E,"_injector",this.injector),E.build||(E._buildForm=()=>{console.warn("Formly: 'options._buildForm' is deprecated since v6.0, use 'options.build' instead."),this.build(K)},E.build=(F=K)=>(this.build(F),F)),!E.parentForm&&this.parentForm&&(Ri(E,"parentForm",this.parentForm),Il()||Ra(E,["parentForm","submitted"],({firstChange:F})=>{F||E.detectChanges(K)}))}}return le.\u0275fac=function(K){return new(K||le)(l.LFG(Aa),l.LFG(l.zs3),l.LFG(l.s_b,8),l.LFG(X.sg,8))},le.\u0275prov=l.Yz7({token:le,factory:le.\u0275fac,providedIn:"root"}),le})();function Rc(le,ye,K=!1){if((ye=ye||le.formControl)._fields||Ri(ye,"_fields",[]),-1===ye._fields.indexOf(le)&&ye._fields.push(le),!le.formControl&&ye){Ri(le,"formControl",ye),ye.setValidators(null),ye.setAsyncValidators(null),le.props.disabled=!!le.props.disabled;const st=Ra(le,["props","disabled"],({firstChange:Tt,currentValue:Kt})=>{Tt||(Kt?le.formControl.disable():le.formControl.enable())});ye instanceof X.NI&&ye.registerOnDisabledChange(st.setValue)}if(!le.form||!as(le))return;let E=le.form;const F=El(le),_e=et(le);(!dt(ye.value)||!dt(_e))&&ye.value!==_e&&ye instanceof X.NI&&ye.patchValue(_e);for(let st=0;st<F.length-1;st++){const Tt=F[st];E.get([Tt])||E.setControl(Tt,new X.cw({}),{emitEvent:K}),E=E.get([Tt])}const Ge=F[F.length-1];!le._hide&&E.get([Ge])!==ye&&E.setControl(Ge,ye,{emitEvent:K})}function Dd(le,ye=!1){const K=le.status,E=le.value;le.updateValueAndValidity({emitEvent:!1,onlySelf:ye}),K!==le.status&&le.statusChanges.emit(le.status),E!==le.value&&le.valueChanges.emit(le.value)}function zd(le){delete le?._fields,le.setValidators(null),le.setAsyncValidators(null),(le instanceof X.cw||le instanceof X.Oe)&&Object.values(le.controls).forEach(ye=>zd(ye))}let Jp=(()=>{class le{constructor(K){this.ref=K}ngOnChanges(){this.name=this.name||"formly-group"}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(l.Rgc))},le.\u0275dir=l.lG2({type:le,selectors:[["","formlyTemplate",""]],inputs:{name:["formlyTemplate","name"]},features:[l.TTD]}),le})(),Ks=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275prov=l.Yz7({token:le,factory:le.\u0275fac}),le})(),dl=(()=>{class le{constructor(K,E,F,_e,Ge){this.config=K,this.renderer=E,this._elementRef=F,this.hostContainerRef=_e,this.form=Ge,this.hostObservers=[],this.componentRefs=[],this.hooksObservers=[],this.detectFieldBuild=!1,this.valueChangesUnsubscribe=()=>{}}get containerRef(){return this.config.extras.renderFormlyFieldElement?this.viewContainerRef:this.hostContainerRef}get elementRef(){return this.config.extras.renderFormlyFieldElement?this._elementRef:this.componentRefs?.[0]instanceof l.UuU?this.componentRefs[0].location:null}ngAfterContentInit(){this.triggerHook("afterContentInit")}ngAfterViewInit(){this.triggerHook("afterViewInit")}ngDoCheck(){this.detectFieldBuild&&this.field&&this.field.options&&this.render()}ngOnInit(){this.triggerHook("onInit")}ngOnChanges(K){this.triggerHook("onChanges",K)}ngOnDestroy(){this.resetRefs(this.field),this.hostObservers.forEach(K=>K.unsubscribe()),this.hooksObservers.forEach(K=>K()),this.valueChangesUnsubscribe(),this.triggerHook("onDestroy")}renderField(K,E,F=[]){if(this.containerRef===K&&(this.resetRefs(this.field),this.containerRef.clear(),F=this.field?.wrappers),F?.length>0){const[_e,...Ge]=F,{component:st}=this.config.getWrapper(_e),Tt=K.createComponent(st);this.attachComponentRef(Tt,E),Ra(Tt.instance,["fieldComponent"],({currentValue:Kt,previousValue:fr,firstChange:nn})=>{if(Kt){if(fr&&fr._lContainer===Kt._lContainer)return;const Yr=fr?fr.detach():null;Yr&&!Yr.destroyed?Kt.insert(Yr):this.renderField(Kt,E,Ge),!nn&&Tt.changeDetectorRef.detectChanges()}})}else if(E?.type){const _e=this.form?.templates?.find(st=>st.name===E.type);let Ge;if(_e)Ge=K.createEmbeddedView(_e.ref,{$implicit:E});else{const{component:st}=this.config.getType(E.type,!0);Ge=K.createComponent(st)}this.attachComponentRef(Ge,E)}}triggerHook(K,E){if(("onInit"===K||"onChanges"===K&&E.field&&!E.field.firstChange)&&(this.valueChangesUnsubscribe(),this.valueChangesUnsubscribe=this.fieldChanges(this.field)),this.field?.hooks?.[K]&&(!E||E.field)){const F=this.field.hooks[K](this.field);if((0,Yl.b)(F)&&-1!==["onInit","afterContentInit","afterViewInit"].indexOf(K)){const _e=F.subscribe();this.hooksObservers.push(()=>_e.unsubscribe())}}"onChanges"===K&&E.field&&(this.resetRefs(E.field.previousValue),this.render())}attachComponentRef(K,E){this.componentRefs.push(K),E._componentRefs.push(K),K instanceof l.UuU&&Object.assign(K.instance,{field:E})}render(){if(this.field){if(!this.field.options)return void(this.detectFieldBuild=!0);if(this.detectFieldBuild=!1,this.hostObservers.forEach(K=>K.unsubscribe()),this.hostObservers=[Ra(this.field,["hide"],({firstChange:K,currentValue:E})=>{const F=this.containerRef;!1===this.config.extras.lazyRender?(K&&this.renderField(F,this.field),(!K||K&&E)&&this.elementRef&&this.renderer.setStyle(this.elementRef.nativeElement,"display",E?"none":"")):E?(F.clear(),this.field.className&&this.renderer.removeAttribute(this.elementRef.nativeElement,"class")):(this.renderField(F,this.field),this.field.className&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",this.field.className)),!K&&this.field.options.detectChanges(this.field)}),Ra(this.field,["className"],({firstChange:K,currentValue:E})=>{(!K||K&&E)&&(!this.config.extras.lazyRender||!0!==this.field.hide)&&this.elementRef&&this.renderer.setAttribute(this.elementRef.nativeElement,"class",E)})],Il()){if(this.field.formControl){const K=this.field.formControl.events.subscribe(()=>Xi(this.field));this.hostObservers.push(K)}}else["touched","pristine","status"].forEach(K=>this.hostObservers.push(Ra(this.field,["formControl",K],({firstChange:E})=>!E&&Xi(this.field))))}}resetRefs(K){K&&(K._localFields?K._localFields=[]:Ri(this.field,"_localFields",[]),K._componentRefs?K._componentRefs=K._componentRefs.filter(E=>-1===this.componentRefs.indexOf(E)):Ri(this.field,"_componentRefs",[])),this.componentRefs=[]}fieldChanges(K){if(!K)return()=>{};const E=ls(K,["props"],()=>K.options.detectChanges(K));let F=[()=>{E()}];for(const Ge of Object.keys(K._expressions||{})){const st=Ra(K,["_expressions",Ge],({currentValue:Tt,previousValue:Kt})=>{Kt?.subscription&&(Kt.subscription.unsubscribe(),Kt.subscription=null),(0,Yl.b)(Tt.value$)&&(Tt.subscription=Tt.value$.subscribe())});F.push(()=>{K._expressions[Ge]?.subscription&&K._expressions[Ge].subscription.unsubscribe(),st.unsubscribe()})}for(const Ge of[["focus"],["template"],["fieldGroupClassName"],["validation","show"]]){const st=Ra(K,Ge,({firstChange:Tt})=>!Tt&&K.options.detectChanges(K));F.push(()=>st.unsubscribe())}if(K.formControl&&!K.fieldGroup){const Ge=K.formControl;let st=Ge.valueChanges.pipe((0,id.U)(nn=>(K.parsers?.map(Yr=>nn=Yr(nn,K)),Object.is(nn,K.formControl.value)||K.formControl.setValue(nn),nn)),(0,Ac.x)((nn,Yr)=>!(nn!==Yr||Array.isArray(nn)||Jo(nn))));Ge.value!==et(K)&&(st=st.pipe((0,Ea.O)(Ge.value)));const{updateOn:Tt,debounce:Kt}=K.modelOptions;(!Tt||"change"===Tt)&&Kt?.default>0&&(st=Ge.valueChanges.pipe((0,du.b)(Kt.default)));const fr=st.subscribe(nn=>{Ge._fields?.length>1&&Ge instanceof X.NI&&Ge.patchValue(nn,{emitEvent:!1,onlySelf:!0}),as(K)&&Lc(K,nn),K.options.fieldChanges.next({value:nn,field:K,type:"valueChanges"})});F.push(()=>fr.unsubscribe())}let _e=[];return Ra(K,["_localFields"],({currentValue:Ge})=>{_e.forEach(st=>st()),_e=(Ge||[]).map(st=>this.fieldChanges(st))}),()=>{F.forEach(Ge=>Ge()),_e.forEach(Ge=>Ge())}}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(Aa),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(l.s_b),l.Y36(Ks,8))},le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field"]],viewQuery:function(K,E){if(1&K&&l.Gf(kc,7,l.s_b),2&K){let F;l.iGM(F=l.CRH())&&(E.viewContainerRef=F.first)}},inputs:{field:"field"},features:[l.TTD],decls:2,vars:0,consts:[["container",""]],template:function(K,E){1&K&&l.YNc(0,zl,0,0,"ng-template",null,0,l.W1O)},styles:["[_nghost-%COMP%]:empty{display:none}"]}),le})(),Rl=(()=>{class le{constructor(K,E,F,_e){this.builder=K,this.config=E,this.ngZone=F,this.fieldTemplates=_e,this.modelChange=new l.vpe,this.field={type:"formly-group"},this._modelChangeValue={},this.valueChangesUnsubscribe=()=>{}}set form(K){this.field.form=K}get form(){return this.field.form}set model(K){this.config.extras.immutable&&this._modelChangeValue===K||this.setField({model:K})}get model(){return this.field.model}set fields(K){this.setField({fieldGroup:K})}get fields(){return this.field.fieldGroup}set options(K){this.setField({options:K})}get options(){return this.field.options}set templates(K){this.fieldTemplates.templates=K}ngDoCheck(){"changeDetectionCheck"===this.config.extras.checkExpressionOn&&this.checkExpressionChange()}ngOnChanges(K){K.fields&&this.form&&zd(this.form),(K.fields||K.form||K.model&&this._modelChangeValue!==K.model.currentValue)&&(this.valueChangesUnsubscribe(),this.builder.build(this.field),this.valueChangesUnsubscribe=this.valueChanges())}ngOnDestroy(){this.valueChangesUnsubscribe()}checkExpressionChange(){this.field.options.checkExpressions?.(this.field)}valueChanges(){this.valueChangesUnsubscribe();let K=null;if(Il()){let _e=this.options?.parentForm?.submitted;K=this.form.events.subscribe(()=>{_e!==this.options?.parentForm?.submitted&&(this.options.detectChanges(this.field),_e=this.options?.parentForm?.submitted)})}let E=[ls(this.field.options,["formState"],()=>this.field.options.detectChanges(this.field))];const F=this.field.options.fieldChanges.pipe((0,Js.h)(({field:_e,type:Ge})=>as(_e)&&"valueChanges"===Ge),(0,ad.w)(()=>function cs(le){return le instanceof l.o17}(this.ngZone)?(0,Wc.of)(null):this.ngZone.onStable.asObservable().pipe((0,Ql.q)(1)))).subscribe(()=>this.ngZone.runGuarded(()=>{this.checkExpressionChange(),this.modelChange.emit(this._modelChangeValue=ra(this.model))}));return()=>{E.forEach(_e=>_e()),K?.unsubscribe(),F.unsubscribe()}}setField(K){this.config.extras.immutable?this.field={...this.field,...ra(K)}:Object.keys(K).forEach(E=>this.field[E]=K[E])}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(uc),l.Y36(Aa),l.Y36(l.R0b),l.Y36(Ks))},le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-form"]],contentQueries:function(K,E,F){if(1&K&&l.Suo(F,Jp,4),2&K){let _e;l.iGM(_e=l.CRH())&&(E.templates=_e)}},inputs:{form:"form",model:"model",fields:"fields",options:"options"},outputs:{modelChange:"modelChange"},features:[l._Bn([uc,Ks]),l.TTD],decls:1,vars:1,consts:[[3,"field"]],template:function(K,E){1&K&&l._UZ(0,"formly-field",0),2&K&&l.Q6J("field",E.field)},dependencies:[dl],encapsulation:2,changeDetection:0}),le})(),Gl=(()=>{class le{constructor(K,E,F){this.renderer=K,this.elementRef=E,this.uiAttributesCache={},this.uiEvents={listeners:[],events:["click","keyup","keydown","keypress","focus","blur","change"],callback:(_e,Ge)=>{switch(_e){case"focus":return this.onFocus(Ge);case"blur":return this.onBlur(Ge);case"change":return this.onChange(Ge);default:return this.props[_e](this.field,Ge)}}},this.document=F}get props(){return this.field.props||{}}get fieldAttrElements(){return this.field?._elementRefs||[]}ngOnChanges(K){K.field&&(this.field.name&&this.setAttribute("name",this.field.name),this.uiEvents.listeners.forEach(E=>E()),this.uiEvents.events.forEach(E=>{(this.props?.[E]||-1!==["focus","blur","change"].indexOf(E))&&this.uiEvents.listeners.push(this.renderer.listen(this.elementRef.nativeElement,E,F=>this.uiEvents.callback(E,F)))}),this.props?.attributes&&Ra(this.field,["props","attributes"],({currentValue:E,previousValue:F})=>{F&&Object.keys(F).forEach(_e=>this.removeAttribute(_e)),E&&Object.keys(E).forEach(_e=>{null!=E[_e]&&this.setAttribute(_e,E[_e])})}),this.detachElementRef(K.field.previousValue),this.attachElementRef(K.field.currentValue),1===this.fieldAttrElements.length&&(!this.id&&this.field.id&&this.setAttribute("id",this.field.id),this.focusObserver=Ra(this.field,["focus"],({currentValue:E})=>{this.toggleFocus(E)}))),K.id&&this.setAttribute("id",this.id)}ngDoCheck(){if(!this.uiAttributes){const K=this.elementRef.nativeElement;this.uiAttributes=[...Gu,"tabindex","placeholder","readonly","disabled","step"].filter(E=>!K.hasAttribute||!K.hasAttribute(E))}for(let K=0;K<this.uiAttributes.length;K++){const E=this.uiAttributes[K],F=this.props[E];this.uiAttributesCache[E]!==F&&(!this.props.attributes||!this.props.attributes.hasOwnProperty(E.toLowerCase()))&&(this.uiAttributesCache[E]=F,F||0===F?this.setAttribute(E,!0===F?E:`${F}`):this.removeAttribute(E))}}ngOnDestroy(){this.uiEvents.listeners.forEach(K=>K()),this.detachElementRef(this.field),this.focusObserver?.unsubscribe()}toggleFocus(K){const E=this.fieldAttrElements?this.fieldAttrElements[0]:null;if(!E||!E.nativeElement.focus)return;const F=!!this.document.activeElement&&this.fieldAttrElements.some(({nativeElement:_e})=>this.document.activeElement===_e||_e.contains(this.document.activeElement));K&&!F?Promise.resolve().then(()=>E.nativeElement.focus()):!K&&F&&Promise.resolve().then(()=>E.nativeElement.blur())}onFocus(K){this.focusObserver?.setValue(!0),this.props.focus?.(this.field,K)}onBlur(K){this.focusObserver?.setValue(!1),this.props.blur?.(this.field,K)}onHostChange(K){K instanceof Event||this.onChange(K)}onChange(K){this.props.change?.(this.field,K),this.field.formControl?.markAsDirty()}attachElementRef(K){K&&(-1===K._elementRefs?.indexOf(this.elementRef)?K._elementRefs.push(this.elementRef):Ri(K,"_elementRefs",[this.elementRef]))}detachElementRef(K){const E=K?._elementRefs?this.fieldAttrElements.indexOf(this.elementRef):-1;-1!==E&&K._elementRefs.splice(E,1)}setAttribute(K,E){this.renderer.setAttribute(this.elementRef.nativeElement,K,E)}removeAttribute(K){this.renderer.removeAttribute(this.elementRef.nativeElement,K)}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(S.K0))},le.\u0275dir=l.lG2({type:le,selectors:[["","formlyAttributes",""]],hostBindings:function(K,E){1&K&&l.NdJ("change",function(_e){return E.onHostChange(_e)})},inputs:{field:["formlyAttributes","field"],id:"id"},features:[l.TTD]}),le})(),ld=(()=>{class le{constructor(){this.field={}}set _formlyControls(K){this.field._localFields=K.map(F=>F.control._fields||[]).flat().filter(F=>F.formControl!==this.field.formControl)}get model(){return this.field.model}get form(){return this.field.form}get options(){return this.field.options}get key(){return this.field.key}get formControl(){return this.field.formControl}get props(){return this.field.props||{}}get to(){return this.props}get showError(){return this.options.showError(this)}get id(){return this.field.id}get formState(){return this.options?.formState||{}}}return le.\u0275fac=function(K){return new(K||le)},le.\u0275dir=l.lG2({type:le,viewQuery:function(K,E){if(1&K&&l.Gf(X.a5,5),2&K){let F;l.iGM(F=l.CRH())&&(E._formlyControls=F)}},inputs:{field:"field"}}),le})(),qu=(()=>{class le extends ld{}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-group"]],hostVars:2,hostBindings:function(K,E){2&K&&l.Tol(E.field.fieldGroupClassName||"")},features:[l.qOj],ngContentSelectors:eu,decls:2,vars:1,consts:[[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(K,E){1&K&&(l.F$t(),l.YNc(0,Xc,1,1,"formly-field",0),l.Hsn(1)),2&K&&l.Q6J("ngForOf",E.field.fieldGroup)},dependencies:[dl,S.sg],encapsulation:2,changeDetection:0}),le})(),xu=(()=>{class le{constructor(K){this.config=K}ngOnChanges(){const K=Gu.map(E=>`templateOptions.${E}`);this.errorMessage$=(0,Vd.T)(this.field.formControl.statusChanges,this.field.options?this.field.options.fieldChanges.pipe((0,Js.h)(({field:E,type:F,property:_e})=>E===this.field&&"expressionChanges"===F&&(-1!==_e.indexOf("validation")||-1!==K.indexOf(_e)))):(0,Wc.of)(null)).pipe((0,Ea.O)(null),(0,ad.w)(()=>(0,Yl.b)(this.errorMessage)?this.errorMessage:(0,Wc.of)(this.errorMessage)))}get errorMessage(){const K=this.field.formControl;for(const E in K.errors)if(K.errors.hasOwnProperty(E)){let F=this.config.getValidatorMessage(E);if(Jo(K.errors[E])){if(K.errors[E].errorPath)return;K.errors[E].message&&(F=K.errors[E].message)}return this.field.validation?.messages?.[E]&&(F=this.field.validation.messages[E]),this.field.validators?.[E]?.message&&(F=this.field.validators[E].message),this.field.asyncValidators?.[E]?.message&&(F=this.field.asyncValidators[E].message),"function"==typeof F?F(K.errors[E],this.field):F}}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(Aa))},le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-validation-message"]],inputs:{field:"field"},features:[l.TTD],decls:2,vars:3,template:function(K,E){1&K&&(l._uU(0),l.ALo(1,"async")),2&K&&l.Oqu(l.lcZ(1,1,E.errorMessage$))},dependencies:[S.Ov],encapsulation:2,changeDetection:0}),le})(),Dc=(()=>{class le extends ld{set _formlyControls(K){}set _staticContent(K){this.fieldComponent=K}}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275dir=l.lG2({type:le,viewQuery:function(K,E){if(1&K&&(l.Gf(Oa,5,l.s_b),l.Gf(Oa,7,l.s_b)),2&K){let F;l.iGM(F=l.CRH())&&(E.fieldComponent=F.first),l.iGM(F=l.CRH())&&(E._staticContent=F.first)}},features:[l.qOj]}),le})(),cd=(()=>{class le extends ld{constructor(K){super(),this.sanitizer=K,this.innerHtml={}}get template(){return this.field&&this.field.template!==this.innerHtml.template&&(this.innerHtml={template:this.field.template,content:this.props.safeHtml?this.sanitizer.bypassSecurityTrustHtml(this.field.template):this.field.template}),this.innerHtml.content}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(Qc.H7))},le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-template"]],features:[l.qOj],decls:1,vars:1,consts:[[3,"innerHtml"]],template:function(K,E){1&K&&l._UZ(0,"div",0),2&K&&l.Q6J("innerHtml",E.template,l.oJD)},encapsulation:2,changeDetection:0}),le})();class Tp{onPopulate(ye){if(ye._expressions)return;Ri(ye,"_expressions",{}),Ra(ye,["hide"],({currentValue:E,firstChange:F})=>{Ri(ye,"_hide",!!E),(!F||F&&!0===E)&&(ye.props.hidden=E,ye.options._hiddenFieldsForCheck.push({field:ye}))}),ye.hideExpression&&Ra(ye,["hideExpression"],({currentValue:E})=>{ye._expressions.hide=this.parseExpressions(ye,"hide","boolean"==typeof E?()=>E:E)});const K=(E,F)=>{"string"==typeof F||uo(F)?ye._expressions[E]=this.parseExpressions(ye,E,F):F instanceof Od.y&&(ye._expressions[E]={value$:F.pipe((0,Yc.b)(_e=>{this.evalExpr(ye,E,_e),ye.options._detectChanges(ye)}))})};ye.expressions=ye.expressions||{};for(const E of Object.keys(ye.expressions))Ra(ye,["expressions",E],({currentValue:F})=>{K(E,uo(F)?(..._e)=>F(ye,_e[3]):F)});ye.expressionProperties=ye.expressionProperties||{};for(const E of Object.keys(ye.expressionProperties))Ra(ye,["expressionProperties",E],({currentValue:F})=>K(E,F))}postPopulate(ye){if(!ye.parent&&!ye.options.checkExpressions){let K=!1;ye.options.checkExpressions=(E,F)=>{if(K)return;K=!0;const _e=this.checkExpressions(E,F),Ge=ye.options;Ge._hiddenFieldsForCheck.sort(st=>st.field.hide?-1:1).forEach(st=>this.changeHideState(st.field,st.field.hide??st.default,!F)),Ge._hiddenFieldsForCheck=[],_e&&this.checkExpressions(ye),K=!1},ye.options._checkField=(E,F)=>{console.warn("Formly: 'options._checkField' is deprecated since v6.0, use 'options.checkExpressions' instead."),ye.options.checkExpressions(E,F)}}}parseExpressions(ye,K,E){let F,_e;if(ye.parent&&["hide","props.disabled"].includes(K)){const Ge=st=>"hide"===K?st.hide:st.props.disabled;F=()=>{let st=ye.parent;for(;st.parent&&!Ge(st);)st=st.parent;return Ge(st)}}return"string"==typeof(E=E||(()=>!1))&&(E=function Ef(le,ye){try{return Function(...ye,`return ${le};`)}catch(K){console.error(K)}}(E,["model","formState","field"])),{callback:Ge=>{try{const st=function oc(le,ye,K){return"function"==typeof le?le.apply(ye,K):!!le}(F?(...Tt)=>F(ye)||E(...Tt):E,{field:ye},[ye.model,ye.options.formState,ye,Ge]);return!(!Ge&&(_e===st||Jo(st)&&!(0,Yl.b)(st)&&JSON.stringify(st)===JSON.stringify(_e))||(_e=st,this.evalExpr(ye,K,st),0))}catch(st){throw st.message=`[Formly Error] [Expression "${K}"] ${st.message}`,st}}}}checkExpressions(ye,K=!1){if(!ye)return!1;let E=!1;if(ye._expressions)for(const F of Object.keys(ye._expressions))ye._expressions[F].callback?.(K)&&(E=!0);return ye.fieldGroup?.forEach(F=>this.checkExpressions(F,K)&&(E=!0)),E}changeDisabledState(ye,K){ye.fieldGroup&&ye.fieldGroup.filter(E=>!E._expressions.hasOwnProperty("props.disabled")).forEach(E=>this.changeDisabledState(E,K)),as(ye)&&ye.props.disabled!==K&&(ye.props.disabled=K)}changeHideState(ye,K,E){if(ye.fieldGroup&&ye.fieldGroup.filter(F=>F&&!F._expressions.hide).forEach(F=>this.changeHideState(F,K,E)),ye.formControl&&as(ye)){Ri(ye,"_hide",!(!K&&!ye.hide));const F=ye.formControl;F._fields?.length>1&&Dd(F),!0!==K||F._fields&&!F._fields.every(_e=>!!_e._hide)?!1===K&&(ye.resetOnHide&&!Dt(ye.defaultValue)&&Dt(et(ye))&&Lc(ye,ye.defaultValue),Rc(ye,void 0,!0),ye.resetOnHide&&ye.fieldArray&&ye.fieldGroup?.length!==ye.model?.length&&ye.options.build(ye)):(function Ic(le,ye=!1){const K=le.formControl,E=K._fields?K._fields.indexOf(le):-1;-1!==E&&K._fields.splice(E,1);const F=K.parent;if(!F)return;const _e={emitEvent:ye};if(F instanceof X.Oe){const Ge=F.controls.findIndex(st=>st===K);-1!==Ge&&F.removeAt(Ge,_e)}else if(F instanceof X.cw){const Ge=El(le),st=Ge[Ge.length-1];F.get([st])===K&&F.removeControl(st,_e)}K.setParent(null)}(ye,!0),E&&ye.resetOnHide&&(Lc(ye,void 0),ye.formControl.reset({value:void 0,disabled:ye.formControl.disabled}),ye.options.fieldChanges.next({value:void 0,field:ye,type:"valueChanges"}),ye.fieldGroup&&ye.formControl instanceof X.Oe&&(ye.fieldGroup.length=0)))}ye.options.fieldChanges&&ye.options.fieldChanges.next({field:ye,type:"hidden",value:K})}evalExpr(ye,K,E){if(0===K.indexOf("model.")){const F=K.replace(/^model\./,""),_e=ye.fieldGroup?ye:ye.parent;let Ge=ye?.key===F?ye.formControl:ye.form.get(F);!Ge&&ye.get(F)&&(Ge=ye.get(F).formControl),Lc({key:F,parent:_e,model:ye.model},E),Ge&&(!dt(Ge.value)||!dt(E))&&Ge.value!==E&&Ge.patchValue(E)}else{try{let F=ye;const _e=this._evalExpressionPath(ye,K),Ge=_e.length-1;for(let st=0;st<Ge;st++)F=F[_e[st]];F[_e[Ge]]=E}catch(F){throw F.message=`[Formly Error] [Expression "${K}"] ${F.message}`,F}["templateOptions.disabled","props.disabled"].includes(K)&&as(ye)&&this.changeDisabledState(ye,E)}this.emitExpressionChanges(ye,K,E)}emitExpressionChanges(ye,K,E){ye.options.fieldChanges&&ye.options.fieldChanges.next({field:ye,type:"expressionChanges",property:K,value:E})}_evalExpressionPath(ye,K){if(ye._expressions[K]&&ye._expressions[K].paths)return ye._expressions[K].paths;let E=[];return-1===K.indexOf("[")?E=K.split("."):K.split(/[[\]]{1,2}/).filter(F=>F).forEach(F=>{const _e=F.match(/['|"](.*?)['|"]/);_e?E.push(_e[1]):E.push(...F.split(".").filter(Ge=>Ge))}),ye._expressions[K]&&(ye._expressions[K].paths=E),E}}class ml{constructor(ye){this.config=ye}onPopulate(ye){this.initFieldValidation(ye,"validators"),this.initFieldValidation(ye,"asyncValidators")}initFieldValidation(ye,K){const E=[];if("validators"===K&&!(ye.hasOwnProperty("fieldGroup")&&!as(ye))&&E.push(this.getPredefinedFieldValidation(ye)),ye[K])for(const F of Object.keys(ye[K]))"validation"===F?E.push(...ye[K].validation.map(_e=>this.wrapNgValidatorFn(ye,_e))):E.push(this.wrapNgValidatorFn(ye,ye[K][F],F));Ri(ye,"_"+K,E)}getPredefinedFieldValidation(ye){let K=[];return Gu.forEach(E=>Ra(ye,["props",E],({currentValue:F,firstChange:_e})=>{K=K.filter(Ge=>Ge!==E),"required"===E&&null!=F&&"boolean"!=typeof F&&console.warn(`Formly: Invalid prop 'required' of type '${typeof F}', expected 'boolean' (Field:${ye.key}).`),null!=F&&!1!==F&&K.push(E),!_e&&ye.formControl&&Dd(ye.formControl)})),E=>0===K.length?null:X.kI.compose(K.map(F=>()=>{const _e=ye.props[F];switch(F){case"required":return X.kI.required(E);case"pattern":return X.kI.pattern(_e)(E);case"minLength":const Ge=X.kI.minLength(_e)(E),st=this.config.getValidatorMessage("minlength")||ye.validation?.messages?.minlength?"minlength":"minLength";return Ge?{[st]:Ge.minlength}:null;case"maxLength":const Tt=X.kI.maxLength(_e)(E),Kt=this.config.getValidatorMessage("maxlength")||ye.validation?.messages?.maxlength?"maxlength":"maxLength";return Tt?{[Kt]:Tt.maxlength}:null;case"min":return X.kI.min(_e)(E);case"max":return X.kI.max(_e)(E);default:return null}}))(E)}wrapNgValidatorFn(ye,K,E){let F;if("string"==typeof K&&(F=ra(this.config.getValidator(K))),"object"==typeof K&&K.name&&(F=ra(this.config.getValidator(K.name)),K.options&&(F.options=K.options)),"object"==typeof K&&K.expression){const{expression:_e,...Ge}=K;F={name:E,validation:_e,options:Object.keys(Ge).length>0?Ge:null}}return"function"==typeof K&&(F={name:E,validation:K}),_e=>{const Ge=F.validation(_e,ye,F.options);return function ko(le){return!!le&&"function"==typeof le.then}(Ge)?Ge.then(st=>this.handleResult(ye,E?!!st:st,F)):(0,Yl.b)(Ge)?Ge.pipe((0,id.U)(st=>this.handleResult(ye,E?!!st:st,F))):this.handleResult(ye,E?!!Ge:Ge,F)}}handleResult(ye,K,{name:E,options:F}){"boolean"==typeof K&&(K=K?null:{[E]:F||!0});const _e=ye.formControl;return _e?._childrenErrors?.[E]?.(),Jo(K)&&Object.keys(K).forEach(Ge=>{const st=K[Ge].errorPath?K[Ge].errorPath:F?.errorPath,Tt=st?ye.formControl.get(st):null;if(Tt){const{errorPath:Kt,...fr}=K[Ge];Tt.setErrors({...Tt.errors||{},[Ge]:fr}),!_e._childrenErrors&&Ri(_e,"_childrenErrors",{}),_e._childrenErrors[Ge]=()=>{const{[Ge]:nn,...Yr}=Tt.errors||{};Tt.setErrors(0===Object.keys(Yr).length?null:Yr)}}}),K}}class Yp{prePopulate(ye){this.root||(this.root=ye),ye.parent&&Object.defineProperty(ye,"form",{get:()=>ye.parent.formControl,configurable:!0})}onPopulate(ye){ye.hasOwnProperty("fieldGroup")&&!as(ye)?Ri(ye,"formControl",ye.form):this.addFormControl(ye)}postPopulate(ye){if(this.root===ye&&(this.root=null,this.setValidators(ye)&&ye.parent)){let E=ye.parent;for(;E;)(as(E)||!E.parent)&&Dd(E.formControl,!0),E=E.parent}}addFormControl(ye){let K=function sd(le){return le.formControl?le.formControl:!1===le.shareFormControl?null:le.form?.get(El(le))}(ye);if(!ye.fieldArray){if(K){if(K instanceof X.NI){const E=as(ye)?et(ye):ye.defaultValue;K.defaultValue=E}}else{const E={updateOn:ye.modelOptions.updateOn};if(ye.fieldGroup)K=new X.cw({},E);else{const F=as(ye)?et(ye):ye.defaultValue;K=new X.NI({value:F,disabled:!!ye.props.disabled},{...E,initialValueIsDefault:!0})}}Rc(ye,K)}}setValidators(ye,K=!1){!1===K&&as(ye)&&ye.props?.disabled&&(K=!0);let E=!1;if(ye.fieldGroup?.forEach(F=>F&&this.setValidators(F,K)&&(E=!0)),as(ye)||!ye.parent||!as(ye)&&!ye.fieldGroup){const{formControl:F}=ye;if(F&&(as(ye)&&F instanceof X.NI&&(K&&F.enabled&&(F.disable({emitEvent:!1,onlySelf:!0}),E=!0),!K&&F.disabled&&(F.enable({emitEvent:!1,onlySelf:!0}),E=!0)),null===F.validator&&this.hasValidators(ye,"_validators")&&(F.setValidators(()=>{const _e=X.kI.compose(this.mergeValidators(ye,"_validators"));return _e?_e(F):null}),E=!0),null===F.asyncValidator&&this.hasValidators(ye,"_asyncValidators")&&(F.setAsyncValidators(()=>{const _e=X.kI.composeAsync(this.mergeValidators(ye,"_asyncValidators"));return _e?_e(F):(0,Wc.of)(null)}),E=!0),E)){Dd(F,!0);let _e=F.parent;for(let Ge=1;Ge<El(ye).length;Ge++)_e&&(Dd(_e,!0),_e=_e.parent)}}return E}hasValidators(ye,K){const E=ye.formControl;return!!(E?._fields?.length>1&&E._fields.some(F=>F[K].length>0)||ye[K].length>0)||ye.fieldGroup?.some(F=>F?.fieldGroup&&!as(F)&&this.hasValidators(F,K))}mergeValidators(ye,K){const E=[],F=ye.formControl;return F?._fields?.length>1?F._fields.filter(_e=>!_e._hide).forEach(_e=>E.push(..._e[K])):ye[K]&&E.push(...ye[K]),ye.fieldGroup&&ye.fieldGroup.filter(_e=>_e?.fieldGroup&&!as(_e)).forEach(_e=>E.push(...this.mergeValidators(_e,K))),E}}class Mu{constructor(ye){this.config=ye,this.formId=0}prePopulate(ye){const K=ye.parent;this.initRootOptions(ye),this.initFieldProps(ye),K&&(Object.defineProperty(ye,"options",{get:()=>K.options,configurable:!0}),Object.defineProperty(ye,"model",{get:()=>as(ye)&&ye.fieldGroup?et(ye):K.model,configurable:!0})),Object.defineProperty(ye,"get",{value:E=>es(ye,E),configurable:!0}),this.getFieldComponentInstance(ye).prePopulate?.(ye)}onPopulate(ye){this.initFieldOptions(ye),this.getFieldComponentInstance(ye).onPopulate?.(ye),ye.fieldGroup&&ye.fieldGroup.forEach((K,E)=>{K&&(Object.defineProperty(K,"parent",{get:()=>ye,configurable:!0}),Object.defineProperty(K,"index",{get:()=>E,configurable:!0})),this.formId++})}postPopulate(ye){this.getFieldComponentInstance(ye).postPopulate?.(ye)}initFieldProps(ye){ye.props??(ye.props=ye.templateOptions),Object.defineProperty(ye,"templateOptions",{get:()=>ye.props,set:K=>ye.props=K,configurable:!0})}initRootOptions(ye){if(ye.parent)return;const K=ye.options;ye.options.formState=ye.options.formState||{},K.showError||(K.showError=this.config.extras.showError),K.fieldChanges||Ri(K,"fieldChanges",new Ml.x),K._hiddenFieldsForCheck||(K._hiddenFieldsForCheck=[]),K._markForCheck=E=>{console.warn("Formly: 'options._markForCheck' is deprecated since v6.0, use 'options.detectChanges' instead."),K.detectChanges(E)},K._detectChanges=E=>{E._componentRefs&&Xi(E),E.fieldGroup?.forEach(F=>F&&K._detectChanges(F))},K.detectChanges=E=>{E.options.checkExpressions?.(E),K._detectChanges(E)},K.resetModel=E=>{E=ra(E??K._initialModel),ye.model&&(Object.keys(ye.model).forEach(F=>delete ye.model[F]),Object.assign(ye.model,E||{})),Il()||Ra(K,["parentForm","submitted"]).setValue(!1,!1),K.build(ye),ye.form.reset(ye.model)},K.updateInitialValue=E=>K._initialModel=ra(E??ye.model),ye.options.updateInitialValue()}initFieldOptions(ye){Ye(ye,{id:ql(`formly_${this.formId}`,ye,ye.index),hooks:{},modelOptions:{},validation:{messages:{}},props:ye.type&&as(ye)?{label:"",placeholder:"",disabled:!1}:{}}),this.config.extras.resetFieldOnHide&&!1!==ye.resetOnHide&&(ye.resetOnHide=!0),"formly-template"!==ye.type&&(ye.template||ye.expressions?.template||ye.expressionProperties?.template)&&(ye.type="formly-template"),!ye.type&&ye.fieldGroup&&(ye.type="formly-group"),ye.type&&this.config.getMergedField(ye),as(ye)&&!Dt(ye.defaultValue)&&Dt(et(ye))&&!cc(ye)&&Lc(ye,ye.defaultValue),ye.wrappers=ye.wrappers||[]}getFieldComponentInstance(ye){const K=()=>{let E=this.config.resolveFieldTypeRef(ye);const F=ye._componentRefs?.slice(-1)[0];return F instanceof l.UuU&&F?.componentType===E?.componentType&&(E=F),E?.instance};return ye._proxyInstance||Ri(ye,"_proxyInstance",new Proxy({},{get:(E,F)=>K()?.[F],set:(E,F,_e)=>K()[F]=_e})),ye._proxyInstance}}function pu(le){return{types:[{name:"formly-group",component:qu},{name:"formly-template",component:cd}],extensions:[{name:"core",extension:new Mu(le),priority:-250},{name:"field-validation",extension:new ml(le),priority:-200},{name:"field-form",extension:new Yp,priority:-150},{name:"field-expression",extension:new Tp,priority:-100}]}}let Zc=(()=>{class le{constructor(K,E=[]){E&&E.forEach(F=>K.addConfig(F))}static forRoot(K={}){return{ngModule:le,providers:[{provide:vc,multi:!0,useFactory:pu,deps:[Aa]},{provide:vc,useValue:K,multi:!0},Aa,uc]}}static forChild(K={}){return{ngModule:le,providers:[{provide:vc,multi:!0,useFactory:pu,deps:[Aa]},{provide:vc,useValue:K,multi:!0},uc]}}}return le.\u0275fac=function(K){return new(K||le)(l.LFG(Aa),l.LFG(vc,8))},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez]]}),le})();const ud=function(le){return[le]};function dd(le,ye){if(1&le&&l._UZ(0,"formly-form",33),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw();l.Q6J("form",F.getControlAt(E))("fields",l.VKq(4,ud,K))("model",F.model[E])("options",F.options)}}function Fs(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"button",34),l.NdJ("click",function(F){l.CHM(K);const _e=l.oxw();return _e.onSubmitData(),l.KtG(_e.closeTemplateModal(F))}),l._uU(1," Save "),l.qZA()}if(2&le){const K=l.oxw();l.Q6J("disabled",!K.formulaFields.valid)}}function Tc(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"button",34),l.NdJ("click",function(F){l.CHM(K);const _e=l.oxw();return _e.onUpdateData(),l.KtG(_e.closeTemplateModal(F))}),l._uU(1," Update\n"),l.qZA()}if(2&le){const K=l.oxw();l.Q6J("disabled",!K.form.valid)("disabled",!K.formulaFields.valid)}}let tu=(()=>{var le;class ye{closeTemplateModal(E){this.close.emit()}set initialData(E){E&&this.readBack(E)}constructor(E,F){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"onSubmit",new l.vpe),(0,O.Z)(this,"onUpdate",new l.vpe),(0,O.Z)(this,"close",new l.vpe),(0,O.Z)(this,"All_Devices_Configuration",[]),(0,O.Z)(this,"AllParams",[]),(0,O.Z)(this,"form",void 0),(0,O.Z)(this,"options",{}),(0,O.Z)(this,"model",[]),(0,O.Z)(this,"fields",[]),(0,O.Z)(this,"formulaId",void 0),(0,O.Z)(this,"formulaName","Formula Example"),(0,O.Z)(this,"inputTypes",[]),(0,O.Z)(this,"selectedFieldType","number"),(0,O.Z)(this,"useOperator",!0),(0,O.Z)(this,"readBackCheck",!1),(0,O.Z)(this,"allParameterList",[{value:1,text:"Parameter 1"},{value:2,text:"Parameter 2"},{value:3,text:"Parameter 3"}]),this.fb=E,this.cdr=F,this.form=this.fb.group({formulaFields:this.fb.array([])})}ngOnInit(){this.readBackCheck||(this.formulaId=(0,Oc.Z)(),this.addInput())}get formulaFields(){return this.form.get("formulaFields")}getControlAt(E){return this.formulaFields.at(E)}addInput(){const E=this.createFormGroupForSelectedType();E&&(this.formulaFields.push(E),this.model.push(this.getInitialModelValue()),this.inputTypes.push(this.selectedFieldType),this.generateDynamicFields())}createFormGroupForSelectedType(){let E;switch(this.selectedFieldType){case"singleColumnCalculation":const F=this.createSingleColumnCalculationField(1),_e=this.fb.group({});F.fieldGroup.forEach(fr=>{const nn=fr.key.split(".")[2];_e.addControl(nn,this.fb.control(null))}),E=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:_e});break;case"singleDerivedCalculation":const Ge=this.createSingleDerivedCalculationField(1),st=this.fb.group({});Ge.fieldGroup.forEach(fr=>{const nn=fr.key.split(".")[2];st.addControl(nn,this.fb.control(null))}),E=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:st});break;case"multiColumnCalculation":const Tt=this.createSingleDerivedCalculationField(1),Kt=this.fb.group({});Tt.fieldGroup.forEach(fr=>{const nn=fr.key.split(".")[2];Kt.addControl(nn,this.fb.control(null))}),E=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:Kt});break;case"multiselect":E=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:this.fb.control([])});break;default:E=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:this.fb.control(null)})}return E}getInitialModelValue(){return"singleColumnCalculation"===this.selectedFieldType?{value:{device:null,parameter:null,calcType:null},operator:this.useOperator?"+":null,parentheses:"none"}:"multiselect"===this.selectedFieldType?{value:[],operator:this.useOperator?"+":null,parentheses:"none"}:{value:null,operator:this.useOperator?"+":null,parentheses:"none"}}removeInput(){this.formulaFields.length>0&&(this.formulaFields.removeAt(this.formulaFields.length-1),this.model.pop(),this.inputTypes.pop(),this.generateDynamicFields())}fieldTypeChanged(){}generateDynamicFields(){this.fields=this.formulaFields.controls.map((E,F)=>{const _e=[];switch(this.inputTypes[F]||"number"){case"text":_e.push(this.createTextInput(F));break;case"number":default:_e.push(this.createNumberInput(F));break;case"multiselect":_e.push(this.createMultiSelectField(F));break;case"singleColumnCalculation":_e.push(this.createSingleColumnCalculationField(F));break;case"multiColumnCalculation":_e.push(this.createMultiColumnCalculationField(F));break;case"singleDerivedCalculation":_e.push(this.createSingleDerivedCalculationField(F));break;case"multiDerivedCalculation":_e.push(this.createMultiDerivedCalculationField(F))}return this.useOperator&&_e.push(this.createOperatorField(F)),_e.push(this.createParenthesesDropdown(F)),{fieldGroupClassName:"row g-3 align-items-center",fieldGroup:_e}}),this.cdr.detectChanges()}createSingleColumnCalculationField(E){const F=this.All_Devices_Configuration.map(_e=>({value:_e.PK,text:_e.mn_label}));return console.log("options :>> ",F),{fieldGroupClassName:"row",fieldGroup:[{key:"value.device",type:"ngx-select-formly",templateOptions:{label:"Select Device",items:F,placeholder:"Select a device",id:`device-${E}`,index:E,required:!0,change:(_e,Ge)=>{this.onDeviceSelect(_e,Ge)}},className:"col-4"},{key:"value.parameter",type:"ngx-select-formly",templateOptions:{label:"Select Parameter",items:[],placeholder:"Select a parameter",id:`parameters-${E}`,required:!0},className:"col-4"},{key:"value.calcType",type:"ngx-select-formly",templateOptions:{label:"Select Calculation Type",items:[{value:"SUM",text:"Sum"},{value:"AVG",text:"Average"},{value:"MAX",text:"Maximum"},{value:"MIN",text:"Minimum"}],placeholder:"Select a calculation type",id:`calcType-${E}`,required:!0},className:"col-4"}]}}createTextInput(E){return{key:"value",type:"input",templateOptions:{label:"Enter Text",placeholder:"Enter text",required:!0},className:"col-4"}}createNumberInput(E){return{key:"value",type:"input",templateOptions:{label:"Enter Number",placeholder:"Enter number",type:"number",required:!0},className:"col-2"}}createMultiSelectField(E){return{key:"value",type:"select",templateOptions:{label:"Select Parameters",options:this.allParameterList.map(F=>({label:F.text,value:F.value})),multiple:!0,required:!0,placeholder:"Select parameters"},className:"col-4"}}createMultiColumnCalculationField(E){const F=this.All_Devices_Configuration.map(_e=>({value:_e.PK,text:_e.mn_label}));return console.log("options :>> ",F),{fieldGroupClassName:"row",fieldGroup:[{key:"value.device",type:"ngx-select-formly",templateOptions:{label:"Select Device",items:F,placeholder:"Select a device",id:`device-${E}`,index:E,required:!0,change:(_e,Ge)=>{this.onDeviceSelectSDC(_e,Ge)}},className:"col-4"},{key:"value.parameter",type:"ng-multiselect-formly",templateOptions:{label:"Select Parameter",data:[],dropdownSettings:{singleSelection:!1,idField:"value",textField:"text",selectAllText:"All",unSelectAllText:"All",itemsShowLimit:1,allowSearchFilter:!0},placeholder:"Select a parameter",id:`parameters-${E}`,required:!0},className:"col-4"},{key:"value.calcType",type:"ngx-select-formly",templateOptions:{label:"Select Calculation Type",items:[{value:"SUM",text:"Sum"},{value:"AVG",text:"Average"},{value:"MAX",text:"Maximum"},{value:"MIN",text:"Minimum"}],placeholder:"Select a calculation type",id:`calcType-${E}`,required:!0},className:"col-4"}]}}createSingleDerivedCalculationField(E){const F=this.All_Devices_Configuration.map(_e=>({value:_e.PK,text:_e.mn_label}));return console.log("options :>> ",F),{fieldGroupClassName:"row",fieldGroup:[{key:"value.device",type:"ngx-select-formly",templateOptions:{label:"Select Device",items:F,placeholder:"Select a device",id:`device-${E}`,index:E,required:!0,change:(_e,Ge)=>{this.onDeviceSelectSDC(_e,Ge)}},className:"col-4"},{key:"value.parameter",type:"ng-multiselect-formly",templateOptions:{label:"Select Parameter",data:[],dropdownSettings:{singleSelection:!1,idField:"value",textField:"text",selectAllText:"All",unSelectAllText:"All",itemsShowLimit:1,allowSearchFilter:!0},placeholder:"Select a parameter",id:`parameters-${E}`,required:!0},className:"col-4"},{key:"value.operator",type:"ngx-select-formly",templateOptions:{label:"Operator for params",items:[{text:"Addition (+)",value:"+"},{text:"Subtraction (-)",value:"-"},{text:"Multiplication (*)",value:"*"},{text:"Division (/)",value:"/"}],placeholder:"Select operator",required:!0},className:"col-4"},{key:"value.calcType",type:"ngx-select-formly",templateOptions:{label:"Select Calculation Type",items:[{value:"SUM_DERIVED",text:"Sum"},{value:"AVG_DERIVED",text:"Average"},{value:"MAX_DERIVED",text:"Maximum"},{value:"MIN_DERIVED",text:"Minimum"}],placeholder:"Select a calculation type",id:`calcType-${E}`,required:!0},className:"col-4"}]}}onDeviceSelectSDC(E,F){if(console.log("Selected device PK for index "+F,E),this.fields?.[F]?.fieldGroup?.[0]?.fieldGroup?.[1]?.templateOptions){const Ge=(this.fields[F]?.fieldGroup)[0]?.fieldGroup[1]?.templateOptions;Ge&&(Ge.data=[...this.AllParams[E]||[]],console.log("Updated parameter options for device:",this.AllParams[E]),this.cdr.markForCheck())}else console.warn(`Field or parameter field does not exist at index ${F}`)}createMultiDerivedCalculationField(E){return{key:"value",type:"input",templateOptions:{label:"Multi Derived Column Calculation",placeholder:"Enter derived values",required:!0},className:"col-4"}}createOperatorField(E){return{key:"operator",type:"ngx-select-formly",templateOptions:{label:"Operator",items:[{text:"Addition (+)",value:"+"},{text:"Subtraction (-)",value:"-"},{text:"Multiplication (*)",value:"*"},{text:"Division (/)",value:"/"}],placeholder:"Select operator",required:!0},className:"col-2"}}createParenthesesDropdown(E){return{key:"parentheses",type:"ngx-select-formly",templateOptions:{label:"Parentheses",items:[{text:"None",value:"none"},{text:"Left",value:"left"},{text:"Right",value:"right"},{text:"Full",value:"full"}],placeholder:"Select parentheses"},className:"col-2"}}generateFormula(){let E="";for(let F=0;F<this.formulaFields.length;F++){const _e=this.formulaFields.at(F),Ge=this.inputTypes[F]||"number",st=_e.get("operator")?.value,Tt=_e.get("parentheses")?.value;let Kt="";if("singleColumnCalculation"===Ge){const fr=_e.get("value.device")?.value,nn=_e.get("value.parameter")?.value,Yr=_e.get("value.calcType")?.value;fr&&nn&&Yr&&(Kt=`$${Yr}$${fr}.${nn}`)}else if("singleDerivedCalculation"===Ge){const fr=_e.get("value.device")?.value,nn=_e.get("value.parameter")?.value,Yr=_e.get("value.operator")?.value||"+",io=_e.get("value.calcType")?.value;fr&&nn&&io&&(Kt=`$${io}((${Array.isArray(nn)?nn.map(Vn=>`${fr}.${Vn.text}`).join(` ${Yr} `):`${fr}.${nn}`}))`)}else if("multiColumnCalculation"===Ge){const fr=_e.get("value.device")?.value,nn=_e.get("value.parameter")?.value,Yr=_e.get("value.calcType")?.value;fr&&nn&&Yr&&(Kt=`$${Yr}(${Array.isArray(nn)?nn.map(Go=>`${fr}.${Go.text}`).join(" , "):`${fr}.${nn}`})`)}else{const fr=_e.get("value")?.value;if(null==fr||""===fr)continue;Kt=Array.isArray(fr)?fr.length?fr.join(","):"":fr.toString()}switch(Tt){case"left":Kt=`(${Kt}`;break;case"right":Kt=`${Kt})`;break;case"full":Kt=`(${Kt})`}E+=this.useOperator&&F<this.formulaFields.length-1&&st?`${Kt} ${st} `:Kt}return`$CALC(${E.trim()})`}submit(){this.form.valid?(console.log("Form Model:",this.model),console.log("Form Value:",this.form.value),console.log(" this.fields :>> ",this.fields),console.log("Generated Formula:",this.generateFormula()),console.log("this.createPacket() :>> ",this.createPacket()),this.onSubmit.emit()):alert("Please fill all required fields.")}drop(E){const F=this.formulaFields.at(E.previousIndex);this.formulaFields.removeAt(E.previousIndex),this.formulaFields.insert(E.currentIndex,F),(0,ul.bA)(this.fields,E.previousIndex,E.currentIndex),(0,ul.bA)(this.model,E.previousIndex,E.currentIndex),(0,ul.bA)(this.inputTypes,E.previousIndex,E.currentIndex),this.fields.forEach((_e,Ge)=>{const st=_e.fieldGroup;st&&Array.isArray(st)?st.forEach(Tt=>{const Kt=Tt?.fieldGroup;if(Kt&&Array.isArray(Kt)){const fr=Kt.find(io=>"value.device"===io.key);fr&&fr.templateOptions&&(fr.templateOptions.index=Ge);const nn=Kt.find(io=>"value.parameter"===io.key);nn&&nn.templateOptions&&(nn.templateOptions.index=Ge);const Yr=Kt.find(io=>"value.calcType"===io.key);Yr&&Yr.templateOptions&&(Yr.templateOptions.index=Ge)}}):console.warn(`Field at index ${Ge} does not have the expected 'fieldGroup' structure.`)}),this.cdr.detectChanges()}createPacket(){const E=this.generateFormula(),F=Date.now();return{formulaId:this.formulaId,formulaName:this.formulaName,formulaData:this.formulaFields.value,fieldsTypes:this.inputTypes,genratedFormula:E,updatedTime:F}}readBack(E){this.readBackCheck=!0,this.form=this.fb.group({formulaFields:this.fb.array([])}),this.model=E.formulaData,this.formulaId=E.formulaId,this.formulaName=E.formulaName,this.inputTypes=E.fieldsTypes,this.readingBackGroups(E.fieldsTypes),this.generateDynamicFields(),this.formulaFields.setValue(E.formulaData)}readingBackGroups(E){this.form=this.fb.group({formulaFields:this.fb.array([])}),E.forEach(F=>{const _e=this.createFieldGroupForType(F);this.form.get("formulaFields").push(_e)})}createFieldGroupForType(E){let F;switch(E){case"singleColumnCalculation":const _e=this.createSingleColumnCalculationField(1),Ge=this.fb.group({});_e.fieldGroup.forEach(nn=>{const Yr=nn.key.split(".")[2];Ge.addControl(Yr,this.fb.control(null))}),F=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:Ge});break;case"singleDerivedCalculation":const st=this.createSingleDerivedCalculationField(1),Tt=this.fb.group({});st.fieldGroup.forEach(nn=>{const Yr=nn.key.split(".")[2];Tt.addControl(Yr,this.fb.control(null))}),F=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:Tt});break;case"multiColumnCalculation":const Kt=this.createSingleDerivedCalculationField(1),fr=this.fb.group({});Kt.fieldGroup.forEach(nn=>{const Yr=nn.key.split(".")[2];fr.addControl(Yr,this.fb.control(null))}),F=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:fr});break;case"multiselect":F=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:this.fb.control([])});break;default:F=this.fb.group({operator:this.useOperator?"+":null,parentheses:"none",value:this.fb.control(null)})}return F}onUpdateData(){const E=this.createPacket();this.onUpdate.emit(E)}onSubmitData(){const E=this.createPacket();this.onSubmit.emit(E)}onDeviceSelect(E,F){if(console.log("Selected device PK for index "+F,E),this.fields?.[F]?.fieldGroup?.[0]?.fieldGroup?.[1]?.templateOptions){const Ge=(this.fields[F]?.fieldGroup)[0]?.fieldGroup[1]?.templateOptions;Ge&&(Ge.items=[...this.AllParams[E]||[]],console.log("Updated parameter options for device:",this.AllParams[E]),this.cdr.markForCheck())}else console.warn(`Field or parameter field does not exist at index ${F}`)}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(X.qu),l.Y36(l.sBO))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dyanmic-formula-builder"]],inputs:{initialData:"initialData",All_Devices_Configuration:"All_Devices_Configuration",AllParams:"AllParams"},outputs:{onSubmit:"onSubmit",onUpdate:"onUpdate",close:"close"},decls:49,vars:9,consts:[[1,"my-modal-template-panel"],[1,"modal-header"],[1,"mt-1","fs-2x","text-center"],[1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"ki-duotone","ki-cross","fs-1"],[1,"path1"],[1,"path2"],[1,"modal-body"],[1,"row"],[1,"col-md-6","mb-3"],["for","formulaName",1,"form-label"],["type","text","id","formulaName","placeholder","Enter Formula Name",1,"form-control",3,"ngModel","ngModelChange"],["for","formulaId",1,"form-label"],["type","text","id","formulaId","readonly","",1,"form-control",3,"value"],["for","fieldType",1,"form-label","fw-bold"],["id","fieldType",1,"form-select","form-select-lg",3,"ngModel","ngModelChange","change"],["value","number"],["value","text"],["value","singleColumnCalculation"],["value","multiColumnCalculation"],["value","singleDerivedCalculation"],[1,"col-md-6","mb-3","mt-3","d-flex","gap-2"],["type","button",1,"btn","btn-success","btn-sm","flex-grow-1",3,"click"],["type","button",1,"btn","btn-danger","flex-grow-1",3,"disabled","click"],[1,"bi","bi-dash"],[1,"mb-3"],["for","formulaPreview",1,"form-label","fw-bold"],["type","text","readonly","","id","formulaPreview",1,"form-control",3,"value"],[3,"formGroup"],["cdkDropList","",1,"d-flex","flex-column","gap-3",3,"cdkDropListDropped"],["cdkDrag","","class","card p-3 ","style","cursor: move;",3,"form","fields","model","options",4,"ngFor","ngForOf"],[1,"modal-footer","flex-end"],["type","button","class","btn btn-primary mt-3",3,"disabled","click",4,"ngIf"],["cdkDrag","",1,"card","p-3",2,"cursor","move",3,"form","fields","model","options"],["type","button",1,"btn","btn-primary","mt-3",3,"disabled","click"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"div",1)(2,"strong",2),l._uU(3,"Formula Builder"),l.qZA(),l.TgZ(4,"div",3),l.NdJ("click",function(Ge){return F.closeTemplateModal(Ge)}),l.TgZ(5,"i",4),l._UZ(6,"span",5)(7,"span",6),l.qZA()()(),l.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),l._uU(12,"Formula Name:"),l.qZA(),l.TgZ(13,"input",11),l.NdJ("ngModelChange",function(Ge){return F.formulaName=Ge}),l.qZA()(),l.TgZ(14,"div",9)(15,"label",12),l._uU(16,"Formula ID:"),l.qZA(),l._UZ(17,"input",13),l.qZA()(),l.TgZ(18,"div",8)(19,"div",9)(20,"label",14),l._uU(21,"Select Field Type:"),l.qZA(),l.TgZ(22,"select",15),l.NdJ("ngModelChange",function(Ge){return F.selectedFieldType=Ge})("change",function(){return F.fieldTypeChanged()}),l.TgZ(23,"option",16),l._uU(24,"Number"),l.qZA(),l.TgZ(25,"option",17),l._uU(26,"Text"),l.qZA(),l.TgZ(27,"option",18),l._uU(28,"Single Column Calculation"),l.qZA(),l.TgZ(29,"option",19),l._uU(30,"Multi Column Calculation"),l.qZA(),l.TgZ(31,"option",20),l._uU(32,"Single Derived Column Calculation"),l.qZA()()(),l.TgZ(33,"div",21)(34,"button",22),l.NdJ("click",function(){return F.addInput()}),l._uU(35,"Add Field"),l.qZA(),l.TgZ(36,"button",23),l.NdJ("click",function(){return F.removeInput()}),l._UZ(37,"i",24),l._uU(38," Remove Last Input "),l.qZA()()(),l.TgZ(39,"div",25)(40,"label",26),l._uU(41,"Formula Preview:"),l.qZA(),l._UZ(42,"input",27),l.qZA(),l.TgZ(43,"form",28)(44,"div",29),l.NdJ("cdkDropListDropped",function(Ge){return F.drop(Ge)}),l.YNc(45,dd,1,6,"formly-form",30),l.qZA()()(),l.TgZ(46,"div",31),l.YNc(47,Fs,2,1,"button",32),l.YNc(48,Tc,2,2,"button",32),l.qZA()()),2&E&&(l.xp6(13),l.Q6J("ngModel",F.formulaName),l.xp6(4),l.Q6J("value",F.formulaId),l.xp6(5),l.Q6J("ngModel",F.selectedFieldType),l.xp6(14),l.Q6J("disabled",0===F.formulaFields.length),l.xp6(6),l.Q6J("value",F.generateFormula()),l.xp6(1),l.Q6J("formGroup",F.form),l.xp6(2),l.Q6J("ngForOf",F.fields),l.xp6(2),l.Q6J("ngIf",!F.readBackCheck),l.xp6(1),l.Q6J("ngIf",F.readBackCheck))},dependencies:[S.sg,S.O5,X._Y,X.YN,X.Kr,X.Fj,X.EJ,X.JJ,X.JL,X.On,X.sg,Rl,ul.Wj,ul.Zt],styles:[".container.card[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 4px 16px #0000001a;padding:30px}h2[_ngcontent-%COMP%]{font-size:24px;font-weight:600;color:#343a40;margin-bottom:20px}#fieldType[_ngcontent-%COMP%]{background-color:#f8f9fa;border:1px solid #ced4da;border-radius:6px;padding:10px;font-size:14px}#fieldType[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .25rem #268fff40}.form-check-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%], input.form-control[_ngcontent-%COMP%], select.form-control[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ced4da;border-radius:6px;padding:10px;font-size:14px;transition:border-color .2s ease-in-out}.form-check-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus, input.form-control[_ngcontent-%COMP%]:focus, select.form-control[_ngcontent-%COMP%]:focus{border-color:#80bdff;box-shadow:0 0 0 .25rem #268fff40}button.btn[_ngcontent-%COMP%]{font-size:14px;font-weight:600;padding:10px 20px;border-radius:6px;transition:background-color .3s ease-in-out}button.btn-success[_ngcontent-%COMP%]{background-color:#28a745;border:none}button.btn-success[_ngcontent-%COMP%]:hover{background-color:#218838}button.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none}button.btn-danger[_ngcontent-%COMP%]:hover{background-color:#c82333}button.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;border:none}button.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}#formulaPreview[_ngcontent-%COMP%]{background-color:#f1f3f5;border:1px solid #ced4da;border-radius:6px;padding:10px;font-size:14px;color:#6c757d}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003;border-radius:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:#e9ecef;border-radius:8px}.card[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:8px;margin-bottom:15px;padding:20px;background-color:#fff;box-shadow:0 2px 5px #0000001a}.card[_ngcontent-%COMP%]   .col-4[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]{padding:10px}.card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{margin-bottom:10px}.mt-3[_ngcontent-%COMP%]{margin-top:20px!important}.mt-4[_ngcontent-%COMP%]{margin-top:30px!important}.mb-3[_ngcontent-%COMP%]{margin-bottom:20px!important}.gap-3[_ngcontent-%COMP%]{gap:1.5rem}.form-check[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.form-check-input[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:10px}.form-label[_ngcontent-%COMP%]{font-size:14px;font-weight:600;color:#495057}ngx-select[_ngcontent-%COMP%]{z-index:1101!important}.dark-backdrop[_ngcontent-%COMP%]{background:rgba(0,0,0,.6)}"]})),ye})();var Td=re(9473),Sd=re(23365),pd=re(69594),Nl=re(68484);class ic{constructor(ye){(0,O.Z)(this,"overlayRef",void 0),this.overlayRef=ye}close(){this.overlayRef.dispose()}}const Ve={hasBackdrop:!0,backdropClass:"my-overlay-modal-template-backdrop",panelClass:"my-modal-template-panel"},kt={hasBackdropClick:!1,isCentered:!0,size:null};let Br=(()=>{var le;class ye{constructor(E,F){(0,O.Z)(this,"injector",void 0),(0,O.Z)(this,"overlay",void 0),(0,O.Z)(this,"dialogRef",void 0),(0,O.Z)(this,"customConfig",void 0),this.injector=E,this.overlay=F}open(E,F={},_e={}){this.customConfig={...kt,..._e};const Ge={...Ve,...F},st=this.createOverlay(Ge),Tt=new ic(st);return this.attachModalContainer(st,Ge,Tt,E),st.backdropClick().subscribe(()=>{this.customConfig.hasBackdropClick&&Tt.close()}),this.dialogRef=Tt,Tt}attachModalContainer(E,F,_e,Ge){this.createInjector(F,_e),E.attach(Ge)}createInjector(E,F){const _e=new WeakMap;return _e.set(ic,F),new Nl.nK(this.injector,_e)}getOverlayConfig(E){let F=this.overlay.position().global();return this.customConfig.isCentered&&(F=F.centerHorizontally().centerVertically()),this.customConfig.size&&(F=F.width(this.customConfig.size.width).height(this.customConfig.size.height)),this.customConfig.top&&(F=F.centerVertically("0px").centerHorizontally("0px")),new pd.X_({hasBackdrop:E.hasBackdrop,backdropClass:E.backdropClass,panelClass:E.panelClass,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:F})}createOverlay(E){const F=this.getOverlayConfig(E);return this.overlay.create(F)}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.LFG(l.zs3),l.LFG(pd.aV))}),(0,O.Z)(ye,"\u0275prov",l.Yz7({token:le,factory:le.\u0275fac})),ye})();var qr=re(81127);function vn(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Please select a chart type. "),l.qZA())}function On(le,ye){if(1&le&&(l.TgZ(0,"option",40),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.Q6J("value",K.value),l.xp6(1),l.Oqu(K.text)}}function oi(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Please select a Table "),l.qZA())}function ji(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Chart title is required. "),l.qZA())}function Cs(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Column letter is required. "),l.qZA())}function Ls(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Start row is required. "),l.qZA())}function gl(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," End row is required. "),l.qZA())}function _c(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Column letter is required. "),l.qZA())}function fu(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," Start row is required. "),l.qZA())}function hu(le,ye){1&le&&(l.TgZ(0,"div",39),l._uU(1," End row is required. "),l.qZA())}let Jf=(()=>{var le;class ye{constructor(E){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"chartConfig",void 0),(0,O.Z)(this,"chartConfigChange",new l.vpe),(0,O.Z)(this,"chartForm",void 0),(0,O.Z)(this,"isNewChart",!1),(0,O.Z)(this,"optionsForChart",void 0),this.fb=E}ngOnInit(){this.chartConfig?this.isNewChart=!1:(this.isNewChart=!0,this.chartConfig={id:(0,Oc.Z)(),chartType:"PieChart",title:"",tableIndex:"",xAxisLabel:"Date & Time",yAxisLabel:"Parameter Values",columnLetterX:"",startRowX:0,endRowX:0,columnLetterY:"",startRowY:0,endRowY:0,position:"I"}),this.chartForm=this.fb.group({id:[this.chartConfig.id],chartType:[this.chartConfig.chartType,X.kI.required],title:[this.chartConfig.title,X.kI.required],tableIndex:[this.chartConfig.tableIndex,X.kI.required],xAxisLabel:[this.chartConfig.xAxisLabel],yAxisLabel:[this.chartConfig.yAxisLabel],columnLetterX:[this.chartConfig.columnLetterX,X.kI.required],startRowX:[this.chartConfig.startRowX,X.kI.required],endRowX:[this.chartConfig.endRowX,X.kI.required],columnLetterY:[this.chartConfig.columnLetterY,X.kI.required],startRowY:[this.chartConfig.startRowY,X.kI.required],endRowY:[this.chartConfig.endRowY,X.kI.required],position:[this.chartConfig.position,X.kI.required]})}getColumnLetter(E){return E.replace(/\d+/g,"").replace("$","")}getRowNumber(E,F){const _e=E.match(/\$(\d+):\$(\d+)/);return _e?"start"===F?_e[1]:_e[2]:""}submitChartConfig(){if(this.chartForm.valid){const _e={...this.chartForm.value,xRange:`$${this.chartForm.value.columnLetterX}$${this.chartForm.value.startRowX}:$${this.chartForm.value.columnLetterX}$${this.chartForm.value.endRowX}`,yRange:`$${this.chartForm.value.columnLetterY}$${this.chartForm.value.startRowY}:$${this.chartForm.value.columnLetterY}$${this.chartForm.value.endRowY}`};this.chartConfigChange.emit(_e)}else console.log("Form is invalid")}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(X.qu))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dynamic-chart-builder"]],inputs:{chartConfig:"chartConfig",optionsForChart:"optionsForChart"},outputs:{chartConfigChange:"chartConfigChange"},decls:78,vars:12,consts:[[1,"card","card-custom"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","chartType",1,"font-weight-bold"],["formControlName","chartType","id","chartType",1,"form-control"],["value","LineChart"],["value","BarChart"],["value","PieChart"],["class","text-danger mt-1",4,"ngIf"],["for","tableIndex",1,"font-weight-bold"],["formControlName","tableIndex","id","tableIndex",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","title",1,"font-weight-bold"],["formControlName","title","id","title","placeholder","Enter chart title",1,"form-control"],["for","xAxisLabel",1,"font-weight-bold"],["formControlName","xAxisLabel","id","xAxisLabel","placeholder","Enter X-axis label",1,"form-control"],["for","yAxisLabel",1,"font-weight-bold"],["formControlName","yAxisLabel","id","yAxisLabel","placeholder","Enter Y-axis label",1,"form-control"],["for","xRange",1,"font-weight-bold"],[1,"row"],[1,"col-md-4"],["for","columnLetterX",1,"font-weight-bold"],["formControlName","columnLetterX","placeholder","Enter column letter (e.g., C)","maxlength","2",1,"form-control"],["for","startRowX",1,"font-weight-bold"],["formControlName","startRowX","type","number","placeholder","Enter start row (e.g., 15)",1,"form-control"],["for","endRowX",1,"font-weight-bold"],["formControlName","endRowX","type","number","placeholder","Enter end row (e.g., 41)",1,"form-control"],["for","yRange",1,"font-weight-bold"],["for","columnLetterY",1,"font-weight-bold"],["formControlName","columnLetterY","placeholder","Enter column letter (e.g., D)","maxlength","2",1,"form-control"],["for","startRowY",1,"font-weight-bold"],["formControlName","startRowY","type","number","placeholder","Enter start row (e.g., 15)",1,"form-control"],["for","endRowY",1,"font-weight-bold"],["formControlName","endRowY","type","number","placeholder","Enter end row (e.g., 41)",1,"form-control"],["for","position",1,"font-weight-bold"],["formControlName","position","id","position","placeholder","Enter position (e.g., I)",1,"form-control"],[1,"form-group","text-right"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"text-danger","mt-1"],[3,"value"]],template:function(E,F){if(1&E&&(l.TgZ(0,"div",0)(1,"div",1)(2,"form",2),l.NdJ("ngSubmit",function(){return F.submitChartConfig()}),l.TgZ(3,"div",3)(4,"label",4),l._uU(5,"Chart Type"),l.qZA(),l.TgZ(6,"select",5)(7,"option",6),l._uU(8,"Line Chart"),l.qZA(),l.TgZ(9,"option",7),l._uU(10,"Bar Chart"),l.qZA(),l.TgZ(11,"option",8),l._uU(12,"Pie Chart"),l.qZA()(),l.YNc(13,vn,2,0,"div",9),l.qZA(),l.TgZ(14,"div",3)(15,"label",10),l._uU(16,"Choose Table"),l.qZA(),l.TgZ(17,"select",11),l.YNc(18,On,2,2,"option",12),l.qZA(),l.YNc(19,oi,2,0,"div",9),l.qZA(),l.TgZ(20,"div",3)(21,"label",13),l._uU(22,"Chart Title"),l.qZA(),l._UZ(23,"input",14),l.YNc(24,ji,2,0,"div",9),l.qZA(),l.TgZ(25,"div",3)(26,"label",15),l._uU(27,"X-axis Label"),l.qZA(),l._UZ(28,"input",16),l.qZA(),l.TgZ(29,"div",3)(30,"label",17),l._uU(31,"Y-axis Label"),l.qZA(),l._UZ(32,"input",18),l.qZA(),l.TgZ(33,"div",3)(34,"label",19),l._uU(35,"X-range (Column and Row Range)"),l.qZA(),l.TgZ(36,"div",20)(37,"div",21)(38,"label",22),l._uU(39,"Column Letter"),l.qZA(),l._UZ(40,"input",23),l.YNc(41,Cs,2,0,"div",9),l.qZA(),l.TgZ(42,"div",21)(43,"label",24),l._uU(44,"Start Row"),l.qZA(),l._UZ(45,"input",25),l.YNc(46,Ls,2,0,"div",9),l.qZA(),l.TgZ(47,"div",21)(48,"label",26),l._uU(49,"End Row"),l.qZA(),l._UZ(50,"input",27),l.YNc(51,gl,2,0,"div",9),l.qZA()()(),l.TgZ(52,"div",3)(53,"label",28),l._uU(54,"Y-range (Column and Row Range)"),l.qZA(),l.TgZ(55,"div",20)(56,"div",21)(57,"label",29),l._uU(58,"Column Letter"),l.qZA(),l._UZ(59,"input",30),l.YNc(60,_c,2,0,"div",9),l.qZA(),l.TgZ(61,"div",21)(62,"label",31),l._uU(63,"Start Row"),l.qZA(),l._UZ(64,"input",32),l.YNc(65,fu,2,0,"div",9),l.qZA(),l.TgZ(66,"div",21)(67,"label",33),l._uU(68,"End Row"),l.qZA(),l._UZ(69,"input",34),l.YNc(70,hu,2,0,"div",9),l.qZA()()(),l.TgZ(71,"div",3)(72,"label",35),l._uU(73,"Position"),l.qZA(),l._UZ(74,"input",36),l.qZA(),l.TgZ(75,"div",37)(76,"button",38),l._uU(77," Submit "),l.qZA()()()()()),2&E){let _e,Ge,st,Tt,Kt,fr,nn,Yr,io;l.xp6(2),l.Q6J("formGroup",F.chartForm),l.xp6(11),l.Q6J("ngIf",(null==(_e=F.chartForm.get("chartType"))?null:_e.invalid)&&(null==(_e=F.chartForm.get("chartType"))?null:_e.touched)),l.xp6(5),l.Q6J("ngForOf",F.optionsForChart),l.xp6(1),l.Q6J("ngIf",(null==(Ge=F.chartForm.get("tableIndex"))?null:Ge.invalid)&&(null==(Ge=F.chartForm.get("tableIndex"))?null:Ge.touched)),l.xp6(5),l.Q6J("ngIf",(null==(st=F.chartForm.get("title"))?null:st.invalid)&&(null==(st=F.chartForm.get("title"))?null:st.touched)),l.xp6(17),l.Q6J("ngIf",(null==(Tt=F.chartForm.get("columnLetterX"))?null:Tt.invalid)&&(null==(Tt=F.chartForm.get("columnLetterX"))?null:Tt.touched)),l.xp6(5),l.Q6J("ngIf",(null==(Kt=F.chartForm.get("startRowX"))?null:Kt.invalid)&&(null==(Kt=F.chartForm.get("startRowX"))?null:Kt.touched)),l.xp6(5),l.Q6J("ngIf",(null==(fr=F.chartForm.get("endRowX"))?null:fr.invalid)&&(null==(fr=F.chartForm.get("endRowX"))?null:fr.touched)),l.xp6(9),l.Q6J("ngIf",(null==(nn=F.chartForm.get("columnLetterY"))?null:nn.invalid)&&(null==(nn=F.chartForm.get("columnLetterY"))?null:nn.touched)),l.xp6(5),l.Q6J("ngIf",(null==(Yr=F.chartForm.get("startRowY"))?null:Yr.invalid)&&(null==(Yr=F.chartForm.get("startRowY"))?null:Yr.touched)),l.xp6(5),l.Q6J("ngIf",(null==(io=F.chartForm.get("endRowY"))?null:io.invalid)&&(null==(io=F.chartForm.get("endRowY"))?null:io.touched)),l.xp6(6),l.Q6J("disabled",F.chartForm.invalid)}},dependencies:[S.sg,S.O5,X._Y,X.YN,X.Kr,X.Fj,X.wV,X.EJ,X.JJ,X.JL,X.nD,X.sg,X.u]})),ye})();const Dm=["formulaModal"];function Vs(le,ye){1&le&&l._UZ(0,"span",21)}const _g=function(le){return{"btn-active-color-primary":le}};function fd(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"li",11)(1,"a",151),l.NdJ("click",function(){const _e=l.CHM(K).$implicit,Ge=l.oxw(),st=l.MAs(297);let Tt;return l.KtG(_e.isReport?"Parameters"==(null==(Tt=Ge.reportForm.get("reportsType"))?null:Tt.value)?Ge.reportsBodyReady(st,_e.title):Ge.reportsBodyReadyForSchedule(st,_e.text):Ge.closeAllDrawers(_e.title))}),l._UZ(2,"i"),l.TgZ(3,"span",14),l._uU(4),l.qZA(),l.YNc(5,Vs,1,0,"span",152),l.qZA()()}if(2&le){const K=ye.$implicit,E=l.oxw();l.xp6(1),l.Q6J("id",K.isReport?null:"kt_forms_toggle")("ngClass",l.VKq(9,_g,E.isDrawerOpen&&!K.isReport||K.isReport)),l.uIk("data-bs-toggle",K.isReport?null:"pill")("href",K.isReport?null:"#"+K.id,l.LSH)("role",K.isReport?null:"tab"),l.xp6(1),l.Tol(K.icon+" fs-5  p-1"),l.xp6(2),l.Oqu(K.text),l.xp6(1),l.Q6J("ngIf",E.isDrawerOpen)}}function qm(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"a",12),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.exportToExcelAndUpdateDropzone())}),l._UZ(1,"i",153),l.TgZ(2,"span",14),l._uU(3,"Save"),l.qZA()()}}function Of(le,ye){if(1&le&&(l.TgZ(0,"option",154),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.Q6J("value",K),l.xp6(1),l.Oqu(K)}}function Sh(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",184)(1,"p",185)(2,"strong"),l._uU(3,"Uploaded File:"),l.qZA(),l.TgZ(4,"a",186),l.NdJ("click",function(){l.CHM(K);const F=l.oxw(2),_e=l.MAs(68);return l.KtG(F.openPreviewModal(_e))}),l._uU(5),l.qZA()(),l.TgZ(6,"p",187)(7,"strong"),l._uU(8,"File Size:"),l.qZA(),l._uU(9),l.qZA()()}if(2&le){const K=ye.ngIf;l.xp6(5),l.Oqu(K.name),l.xp6(4),l.hij(" ",(K.size/1024).toFixed(2)," KB ")}}function wl(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",188)(1,"button",189),l.NdJ("click",function(){l.CHM(K);const F=l.oxw(2),_e=l.MAs(68);return l.KtG(F.openPreviewModal(_e))}),l._UZ(2,"i",190),l.TgZ(3,"span"),l._uU(4,"Preview File"),l.qZA()(),l.TgZ(5,"button",191),l.NdJ("click",function(){const _e=l.CHM(K).ngIf,Ge=l.oxw(2);return l.KtG(Ge.confirmFileRemoval(_e))}),l._UZ(6,"i",192),l.TgZ(7,"span"),l._uU(8,"Remove File"),l.qZA()()()}}function Au(le,ye){if(1&le&&(l.TgZ(0,"th",207),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.xp6(1),l.hij(" ",K.split(".")[1]," ")}}function Df(le,ye){if(1&le&&(l.TgZ(0,"td",210),l._uU(1),l.qZA()),2&le){const K=ye.$implicit,E=l.oxw(3).$implicit,F=l.oxw(2);l.Q6J("ngClass",F.isFormula(K,E)),l.xp6(1),l.hij(" ",K," ")}}const Yf=function(le,ye){return{"bg-primary":le,"bg-light":ye}};function Tf(le,ye){if(1&le&&(l.TgZ(0,"tr",210)(1,"td",210),l._uU(2),l.qZA(),l.TgZ(3,"td",210),l._uU(4),l.qZA(),l.YNc(5,Df,2,2,"td",209),l.qZA()),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw(2).$implicit,_e=l.oxw(2);l.Q6J("ngClass",l.WLB(6,Yf,E%2==0,E%2!=0)),l.xp6(1),l.Q6J("ngClass",_e.isFormula(K[0],F)),l.xp6(1),l.Oqu(K[0]),l.xp6(1),l.Q6J("ngClass",_e.isFormula(K[1],F)),l.xp6(1),l.Oqu(K[1]),l.xp6(1),l.Q6J("ngForOf",K.slice(2))}}function yg(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",201)(1,"h5",202),l._uU(2,"Identified Data Preview"),l.qZA(),l.TgZ(3,"button",203),l.NdJ("click",function(){const _e=l.CHM(K).$implicit;return l.KtG(_e.dismiss())}),l.qZA()(),l.TgZ(4,"div",204)(5,"div",133)(6,"table",205)(7,"thead",206)(8,"tr",207)(9,"th",207),l._uU(10,"Device"),l.qZA(),l.TgZ(11,"th",207),l._uU(12,"Date"),l.qZA(),l.YNc(13,Au,2,1,"th",208),l.qZA()(),l.TgZ(14,"tbody"),l.YNc(15,Tf,6,9,"tr",209),l.qZA()()()()}if(2&le){const K=l.oxw().$implicit,E=l.oxw(2);l.xp6(13),l.Q6J("ngForOf",E.tables[K].headers.slice(2)),l.xp6(2),l.Q6J("ngForOf",E.tables[K].rows)}}function Ul(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula sums all values for the specified parameter."),l.qZA())}function Hd(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula sums multiple values for the given parameters."),l.qZA())}function Qf(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula calculates the sum of all parameters for the device."),l.qZA())}function Cu(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula performs arithmetic operations on the specified parameters."),l.qZA())}function Tm(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula finds the maximum value from the specified parameters."),l.qZA())}function Gd(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula finds the minimum value from the specified parameters."),l.qZA())}function Qp(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula calculates the average of the specified parameters."),l.qZA())}function qd(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula multiplies the values of the specified parameters."),l.qZA())}function zg(le,ye){1&le&&(l.TgZ(0,"div"),l._uU(1,"This formula calculates the range between the max and min values of the specified parameters."),l.qZA())}function Sp(le,ye){if(1&le&&(l.TgZ(0,"div",193)(1,"h2",194)(2,"button",213)(3,"span",214),l._uU(4),l.qZA()()(),l.TgZ(5,"div",215)(6,"div",216)(7,"strong"),l._uU(8,"Formula: "),l.qZA(),l._uU(9),l._UZ(10,"br"),l.TgZ(11,"strong"),l._uU(12,"Parameters: "),l.qZA(),l._uU(13),l._UZ(14,"br"),l.TgZ(15,"strong"),l._uU(16,"Column: "),l.qZA(),l._uU(17),l._UZ(18,"br"),l.TgZ(19,"strong"),l._uU(20,"Type: "),l.qZA(),l._uU(21),l._UZ(22,"br"),l.YNc(23,Ul,2,0,"div",217),l.YNc(24,Hd,2,0,"div",217),l.YNc(25,Qf,2,0,"div",217),l.YNc(26,Cu,2,0,"div",217),l.YNc(27,Tm,2,0,"div",217),l.YNc(28,Gd,2,0,"div",217),l.YNc(29,Qp,2,0,"div",217),l.YNc(30,qd,2,0,"div",217),l.YNc(31,zg,2,0,"div",217),l.qZA()()()),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw(2).index;l.xp6(1),l.hYB("id","formulaHeader",F,"-",E,""),l.xp6(1),l.Q6J("ngClass",K.color),l.uIk("data-bs-target","#formulaDetailsCollapse"+F+"-"+E)("aria-controls","formulaDetailsCollapse"+F+"-"+E),l.xp6(2),l.Oqu(K.type),l.xp6(1),l.Q6J("id","formulaDetailsCollapse"+F+"-"+E),l.uIk("aria-labelledby","formulaHeader"+F+"-"+E)("data-bs-parent","#formulaAccordion"+F),l.xp6(1),l.Q6J("ngClass",K.color.split("-")[0]+"-light-"+K.color.split("-")[1]),l.xp6(3),l.Oqu(K.formula),l.xp6(4),l.Oqu(K.parameters.join(", ")),l.xp6(4),l.Oqu(K.column),l.xp6(4),l.Oqu(K.type),l.xp6(2),l.Q6J("ngIf","SUM"===K.type),l.xp6(1),l.Q6J("ngIf","SUM with multiple parameters"===K.type),l.xp6(1),l.Q6J("ngIf","TOTAL"===K.type),l.xp6(1),l.Q6J("ngIf","Operator-based"===K.type),l.xp6(1),l.Q6J("ngIf","MAX"===K.type),l.xp6(1),l.Q6J("ngIf","MIN"===K.type),l.xp6(1),l.Q6J("ngIf","AVG"===K.type),l.xp6(1),l.Q6J("ngIf","PRODUCT"===K.type),l.xp6(1),l.Q6J("ngIf","RANGE"===K.type)}}function Hg(le,ye){if(1&le&&(l.TgZ(0,"div",193)(1,"h2",194)(2,"button",195)(3,"span",211),l._uU(4,"Formulas"),l.qZA()()(),l.TgZ(5,"div",197)(6,"div",198)(7,"div",212),l.YNc(8,Sp,32,23,"div",183),l.qZA()()()()),2&le){const K=l.oxw(),E=K.index,F=K.$implicit,_e=l.oxw(2);l.xp6(1),l.MGl("id","formulaHeading",E,""),l.xp6(1),l.uIk("data-bs-target","#formulaCollapse"+E)("aria-controls","formulaCollapse"+E),l.xp6(3),l.Q6J("id","formulaCollapse"+E),l.uIk("aria-labelledby","formulaHeading"+E),l.xp6(2),l.MGl("id","formulaAccordion",E,""),l.xp6(1),l.Q6J("ngForOf",_e.tables[F].formulas)}}function hd(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",193)(1,"h2",194)(2,"button",195)(3,"strong"),l._uU(4,"Data Overview : "),l.qZA(),l.TgZ(5,"span",196),l._uU(6),l.qZA()()(),l.TgZ(7,"div",197)(8,"div",198)(9,"div",166)(10,"div",144)(11,"button",189),l.NdJ("click",function(){l.CHM(K);const F=l.MAs(16),_e=l.oxw(2);return l.KtG(_e.openPreviewModal(F))}),l._UZ(12,"i",190),l.TgZ(13,"span"),l._uU(14),l.qZA()(),l.YNc(15,yg,16,2,"ng-template",null,199,l.W1O),l.qZA()()()(),l.YNc(17,Hg,9,7,"div",200),l.qZA()}if(2&le){const K=ye.$implicit,E=ye.index,F=l.oxw(2);l.xp6(1),l.MGl("id","tableHeading",E,""),l.xp6(1),l.uIk("data-bs-target","#tableCollapse"+E)("aria-controls","tableCollapse"+E),l.xp6(4),l.hij(" Table ",K,""),l.xp6(1),l.Q6J("id","tableCollapse"+E),l.uIk("aria-labelledby","tableHeading"+E),l.xp6(7),l.hij("Preview Table ",K,""),l.xp6(3),l.Q6J("ngIf",F.tables[K].formulas.length>0)}}function $d(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",155)(1,"div",156)(2,"div",157)(3,"div",158)(4,"span",159)(5,"strong",160),l._uU(6,"Model Name:"),l.qZA(),l._uU(7),l.qZA()()(),l.TgZ(8,"div",144)(9,"div",161)(10,"dropzone",162),l.NdJ("addedFile",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.onFileAdded(F))})("init",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.onDropzoneInit(F))}),l.qZA(),l.YNc(11,Sh,10,2,"div",163),l.ALo(12,"async"),l.YNc(13,wl,9,0,"div",164),l.ALo(14,"async"),l.qZA(),l.TgZ(15,"div",165)(16,"div",166)(17,"div",144)(18,"div",167)(19,"div",168)(20,"div",169)(21,"div",80)(22,"div",81)(23,"div",170)(24,"strong"),l._uU(25,"Table Header (bg-dark)"),l.qZA(),l.TgZ(26,"div"),l._uU(27,"This color represents the header row of the table, including columns like Device, Date, and Parameters."),l.qZA()()()()(),l.TgZ(28,"div",171)(29,"div",80)(30,"div",81)(31,"div",172)(32,"strong"),l._uU(33,"Data Rows (bg-primary)"),l.qZA(),l.TgZ(34,"div"),l._uU(35,"This color represents alternating rows of data. Odd and even rows alternate for better readability."),l.qZA()()()()(),l.TgZ(36,"div",171)(37,"div",80)(38,"div",81)(39,"div",173)(40,"strong"),l._uU(41,"Formula (bg-info)"),l.qZA(),l.TgZ(42,"div"),l._uU(43,"This color represents cells containing formulas such as SUM, AVG, etc."),l.qZA()()()()(),l.TgZ(44,"div",171)(45,"div",80)(46,"div",81)(47,"div",174)(48,"strong"),l._uU(49,"Total Formula (bg-warning)"),l.qZA(),l.TgZ(50,"div"),l._uU(51,"This formula sums all parameters for a specific device (e.g., `$Sum of Total$Device1`)."),l.qZA()()()()(),l.TgZ(52,"div",171)(53,"div",80)(54,"div",81)(55,"div",175)(56,"strong"),l._uU(57,"SUM with Multiple Parameters (bg-success)"),l.qZA(),l.TgZ(58,"div"),l._uU(59,"This formula sums multiple specified parameters (e.g., `$SUM(Device1.P1, Device1.P2)`)."),l.qZA()()()()(),l.TgZ(60,"div",171)(61,"div",80)(62,"div",81)(63,"div",176)(64,"strong"),l._uU(65,"Operator Formula (bg-danger)"),l.qZA(),l.TgZ(66,"div"),l._uU(67,"This formula uses operators like `+`, `-`, `*`, `/` between parameters (e.g., `$EXP(Device1.P1 + Device2.P2)`)."),l.qZA()()()()()(),l.TgZ(68,"button",177),l._UZ(69,"span",178),l.TgZ(70,"span",179),l._uU(71,"Previous"),l.qZA()(),l.TgZ(72,"button",180),l._UZ(73,"span",181),l.TgZ(74,"span",179),l._uU(75,"Next"),l.qZA()()()()(),l.TgZ(76,"div",182),l.YNc(77,hd,18,8,"div",183),l.qZA()()()()()}if(2&le){const K=l.oxw();l.xp6(7),l.hij(" ",K.allPacketDetailsForUpdate.file_name," "),l.xp6(3),l.Q6J("config",K.dropzoneConfig),l.xp6(1),l.Q6J("ngIf",l.lcZ(12,5,K.uploadedFile$)),l.xp6(2),l.Q6J("ngIf",l.lcZ(14,7,K.uploadedFile$)),l.xp6(64),l.Q6J("ngForOf",K.getObjectKeys(K.tables))}}function $m(le,ye){if(1&le&&(l.TgZ(0,"li",11)(1,"button",218),l._uU(2),l.qZA()()),2&le){const K=ye.index;l.xp6(1),l.ekj("active",0===K),l.MGl("id","tab-",K,"-tab"),l.uIk("data-bs-target","#tab-"+K)("aria-controls","tab-"+K)("aria-selected",0===K),l.xp6(1),l.hij(" Table ",K+1," ")}}function Jm(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",222)(1,"button",223),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.addRow(F))}),l._UZ(2,"i",139),l._uU(3," Add Row "),l.qZA(),l.TgZ(4,"button",224),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.addColumn(F))}),l._UZ(5,"i",139),l._uU(6," Add Column "),l.qZA()()}}function bg(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",222)(1,"button",225),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.deleteTable(F))}),l._UZ(2,"i",192),l._uU(3," Delete Table "),l.qZA(),l.TgZ(4,"button",225),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.deleteRow(F))}),l._UZ(5,"i",226),l._uU(6," Delete Row "),l.qZA(),l.TgZ(7,"button",227),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.deleteColumn(F))}),l._UZ(8,"i",226),l._uU(9," Delete Column "),l.qZA(),l.TgZ(10,"button",228),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.groupSelectedColumns(F))}),l._UZ(11,"i",229),l._uU(12," Group Selected Columns "),l.qZA(),l.TgZ(13,"button",230),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.ungroupSelectedColumns(F))}),l._UZ(14,"i",231),l._uU(15," Ungroup Selected "),l.qZA()()}}function Sm(le,ye){if(1&le&&(l.TgZ(0,"div",219),l.YNc(1,Jm,7,0,"div",220),l.YNc(2,bg,16,0,"div",220),l._UZ(3,"div",221),l.qZA()),2&le){const K=ye.index,E=l.oxw();l.ekj("show",0===K)("active",0===K),l.MGl("id","tab-",K,""),l.uIk("aria-labelledby","tab-"+K+"-tab"),l.xp6(1),l.Q6J("ngIf",E.editMode),l.xp6(1),l.Q6J("ngIf",!E.editMode),l.xp6(1),l.MGl("id","tabulator-table-",K,"")}}function Pp(le,ye){if(1&le&&(l.TgZ(0,"th"),l._uU(1),l.qZA()),2&le){const K=ye.index,E=l.oxw(2);l.xp6(1),l.Oqu(E.getColumnName(K))}}function Eu(le,ye){if(1&le&&(l.TgZ(0,"td"),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.xp6(1),l.Oqu(K)}}function Uu(le,ye){if(1&le&&(l.TgZ(0,"tr")(1,"td",232),l._uU(2),l.qZA(),l.YNc(3,Eu,2,1,"td",136),l.qZA()),2&le){const K=ye.$implicit,E=ye.index;l.xp6(2),l.Oqu(E+1),l.xp6(1),l.Q6J("ngForOf",K)}}function Xp(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",201)(1,"h5",202),l._uU(2,"Excel File Preview"),l.qZA(),l.TgZ(3,"button",203),l.NdJ("click",function(){const _e=l.CHM(K).$implicit;return l.KtG(_e.dismiss())}),l.qZA()(),l.TgZ(4,"div",204)(5,"div",133)(6,"table",146)(7,"thead")(8,"tr"),l._UZ(9,"th"),l.YNc(10,Pp,2,1,"th",136),l.qZA()(),l.TgZ(11,"tbody"),l.YNc(12,Uu,4,2,"tr",136),l.qZA()()()()}if(2&le){const K=l.oxw();l.xp6(10),l.Q6J("ngForOf",null==K.modalPreview||null==K.modalPreview.data?null:K.modalPreview.data[0]),l.xp6(2),l.Q6J("ngForOf",null==K.modalPreview?null:K.modalPreview.data)}}function Mp(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"button",240),l.NdJ("click",function(){l.CHM(K);const F=l.oxw(2);return l.KtG(F.addDeviceTable())}),l._UZ(1,"i",241),l._uU(2," Add Device "),l.qZA()}}function em(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"button",242),l.NdJ("click",function(){l.CHM(K);const F=l.oxw().index,_e=l.oxw();return l.KtG(_e.removeDeviceTable(F))}),l._UZ(1,"i",243),l._uU(2," Remove "),l.qZA()}}function Gg(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",233)(1,"div",81)(2,"label",234),l._uU(3,"Device"),l.qZA(),l.TgZ(4,"ngx-select",235),l.NdJ("selectionChanges",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.getParametersList(F))}),l.qZA()(),l.TgZ(5,"div",81)(6,"label",234),l._uU(7,"Parameters"),l.qZA(),l.TgZ(8,"div",105),l._UZ(9,"ng-multiselect-dropdown",236),l.qZA()(),l.TgZ(10,"div",237),l.YNc(11,Mp,3,0,"button",238),l.YNc(12,em,3,0,"button",239),l.qZA()()}if(2&le){const K=ye.$implicit,E=ye.index,F=l.oxw();let _e;l.Q6J("formGroupName",E),l.xp6(4),l.Q6J("allowClear",!0)("items",F.All_Devices_Configuration),l.xp6(5),l.Q6J("placeholder","Select Parameters")("settings",F.dropdownSettings)("data","Parameters"===(null==(_e=F.reportForm.get("reportsType"))?null:_e.value)?F.AllParameterList[null==(_e=K.get("device"))?null:_e.value]:F.AllScheduleList[null==(_e=K.get("device"))?null:_e.value])("formControl",K.get("parameters")),l.xp6(2),l.Q6J("ngIf",E===F.devices.controls.length-1),l.xp6(1),l.Q6J("ngIf",F.devices.controls.length>1)}}function Xf(le,ye){1&le&&(l.TgZ(0,"div",247)(1,"label",245),l._uU(2,"Value"),l.qZA(),l._UZ(3,"input",258),l.qZA())}function Sf(le,ye){1&le&&(l.TgZ(0,"div",247)(1,"label",245),l._uU(2,"From"),l.qZA(),l._UZ(3,"input",259),l.qZA()),2&le&&(l.xp6(3),l.Q6J("formControlName","valueFrom"))}function Q(le,ye){1&le&&(l.TgZ(0,"div",247)(1,"label",245),l._uU(2,"To"),l.qZA(),l._UZ(3,"input",260),l.qZA()),2&le&&(l.xp6(3),l.Q6J("formControlName","valueTo"))}function j(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"button",240),l.NdJ("click",function(){l.CHM(K);const F=l.oxw(2);return l.KtG(F.addRule())}),l._UZ(1,"i",241),l._uU(2," Add Rule "),l.qZA()}}function J(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",244)(1,"div",81)(2,"label",245),l._uU(3,"Device"),l.qZA(),l.TgZ(4,"ngx-select",235),l.NdJ("selectionChanges",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.generateSingleColumnExpression())}),l.qZA()(),l.TgZ(5,"div",81)(6,"label",245),l._uU(7,"Parmeter"),l.qZA(),l._UZ(8,"ngx-select",246),l.qZA(),l.TgZ(9,"div",247)(10,"label",245),l._uU(11,"Operator"),l.qZA(),l.TgZ(12,"select",248)(13,"option",249),l._uU(14,">"),l.qZA(),l.TgZ(15,"option",250),l._uU(16,"<"),l.qZA(),l.TgZ(17,"option",251),l._uU(18,"\u2265"),l.qZA(),l.TgZ(19,"option",252),l._uU(20,"\u2264"),l.qZA(),l.TgZ(21,"option",253),l._uU(22,"="),l.qZA(),l.TgZ(23,"option",254),l._uU(24,"Between"),l.qZA()()(),l.YNc(25,Xf,4,0,"div",255),l.YNc(26,Sf,4,1,"div",255),l.YNc(27,Q,4,1,"div",255),l.TgZ(28,"div",247)(29,"label",245),l._uU(30,"Color"),l.qZA(),l._UZ(31,"input",256),l.qZA(),l.TgZ(32,"div",237),l.YNc(33,j,3,0,"button",238),l.TgZ(34,"button",257),l.NdJ("click",function(){const _e=l.CHM(K).index,Ge=l.oxw();return l.KtG(Ge.removeRule(_e))}),l._UZ(35,"i",192),l._uU(36," Remove "),l.qZA()()()}if(2&le){const K=ye.$implicit,E=ye.index,F=l.oxw();let _e,Ge,st,Tt;l.Q6J("formGroupName",E),l.xp6(4),l.Q6J("allowClear",!0)("items",F.All_Devices_Configuration),l.xp6(4),l.Q6J("items","Parameters"===(null==(_e=F.reportForm.get("reportsType"))?null:_e.value)?F.AllParameterList[null==(_e=K.get("device"))?null:_e.value]:F.AllScheduleList[null==(_e=K.get("device"))?null:_e.value]),l.xp6(17),l.Q6J("ngIf","between"!==(null==(Ge=K.get("operator"))?null:Ge.value)),l.xp6(1),l.Q6J("ngIf","between"===(null==(st=K.get("operator"))?null:st.value)),l.xp6(1),l.Q6J("ngIf","between"===(null==(Tt=K.get("operator"))?null:Tt.value)),l.xp6(6),l.Q6J("ngIf",E===F.rules.controls.length-1)}}function se(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"button",77),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.exportToExcelAndUpdateDropzone())}),l._UZ(1,"i",78),l._uU(2," Save Rules "),l.qZA()}}function xe(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"tr")(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td",261)(6,"button",262),l.NdJ("click",function(){const _e=l.CHM(K).$implicit,Ge=l.oxw();return l.KtG(Ge.openModalEdit(_e))}),l._UZ(7,"i",263),l.qZA(),l.TgZ(8,"button",264),l.NdJ("click",function(){const _e=l.CHM(K).$implicit,Ge=l.oxw();return l.KtG(Ge.deleteFormula(_e.formulaId))}),l._UZ(9,"i",192),l.qZA()()()}if(2&le){const K=ye.$implicit;l.xp6(2),l.Oqu(K.formulaName),l.xp6(2),l.Oqu(K.genratedFormula)}}function fe(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"tr")(1,"td"),l._uU(2),l.qZA(),l.TgZ(3,"td"),l._uU(4),l.qZA(),l.TgZ(5,"td"),l._uU(6),l.qZA(),l.TgZ(7,"td"),l._uU(8),l.qZA(),l.TgZ(9,"td"),l._uU(10),l.qZA(),l.TgZ(11,"td")(12,"button",265),l.NdJ("click",function(){const _e=l.CHM(K).$implicit,Ge=l.oxw(),st=l.MAs(295);return l.KtG(Ge.openChartConfigModal(_e,st))}),l._uU(13,"Edit"),l.qZA(),l.TgZ(14,"button",266),l.NdJ("click",function(){const _e=l.CHM(K).$implicit,Ge=l.oxw();return l.KtG(Ge.deleteChartConfig(_e.id))}),l._uU(15,"Delete"),l.qZA()()()}if(2&le){const K=ye.$implicit;l.xp6(2),l.Oqu(K.chartType),l.xp6(2),l.Oqu(K.title),l.xp6(2),l.Oqu(K.xAxisLabel),l.xp6(2),l.Oqu(K.yAxisLabel),l.xp6(2),l.Oqu(K.position)}}function De(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",201)(1,"h5",202),l._uU(2),l.qZA(),l.TgZ(3,"button",203),l.NdJ("click",function(){const _e=l.CHM(K).$implicit;return l.KtG(_e.dismiss())}),l.qZA()(),l.TgZ(4,"div",204)(5,"app-dynamic-chart-builder",267),l.NdJ("chartConfigChange",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.saveChartConfig(F))}),l.qZA()()}if(2&le){const K=l.oxw();l.xp6(2),l.Oqu(K.selectedChartConfig?"Edit Chart Configuration":"Create New Chart"),l.xp6(3),l.Q6J("chartConfig",K.selectedChartConfig)("optionsForChart",K.optionsForChart)}}function Ae(le,ye){if(1&le&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&le){const K=l.oxw().$implicit;l.xp6(1),l.hij(" ... and ",K.totalParameters-K.parametersToShow.length," more ")}}function Ne(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",292)(1,"div",293)(2,"span",294),l._uU(3,"Device:"),l.qZA(),l.TgZ(4,"span",295),l._uU(5),l.qZA()(),l.TgZ(6,"div",293)(7,"span",296),l._uU(8,"Total Parameters:"),l.qZA(),l.TgZ(9,"span",297),l._uU(10),l.qZA()(),l.TgZ(11,"div",187)(12,"span"),l._uU(13,"Parameters:"),l.qZA(),l.TgZ(14,"span",298),l._uU(15),l.YNc(16,Ae,2,1,"span",217),l.qZA()(),l.TgZ(17,"button",299),l.NdJ("click",function(){const _e=l.CHM(K).$implicit,Ge=l.oxw(3);return l.KtG(Ge.toggleExpand(_e))}),l._uU(18),l.qZA()()}if(2&le){const K=ye.$implicit;l.xp6(5),l.Oqu(K.device),l.xp6(5),l.Oqu(K.totalParameters),l.xp6(5),l.hij(" ",K.isExpanded?K.parameters.join(", "):K.parametersToShow.join(", ")," "),l.xp6(1),l.Q6J("ngIf",!K.isExpanded&&K.totalParameters>K.parametersToShow.length),l.xp6(2),l.hij(" ",K.isExpanded?"Show Less":"Show More"," ")}}function tt(le,ye){if(1&le&&(l.TgZ(0,"div",193)(1,"h2",194)(2,"button",287),l._uU(3),l.qZA()(),l.TgZ(4,"div",288)(5,"div",289)(6,"div",42)(7,"div",290),l.YNc(8,Ne,19,5,"div",291),l.qZA()()()()()),2&le){const K=ye.$implicit,E=ye.index;l.xp6(1),l.MGl("id","heading",E,""),l.xp6(1),l.uIk("data-bs-target","#collapse"+E)("aria-controls","collapse"+E),l.xp6(1),l.hij(" Table: ",K.tableName," "),l.xp6(1),l.ekj("show",0===E),l.MGl("id","collapse",E,""),l.uIk("aria-labelledby","heading"+E),l.xp6(4),l.Q6J("ngForOf",K.devices)}}function _t(le,ye){if(1&le&&(l.TgZ(0,"option",154),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.Q6J("value",K),l.xp6(1),l.Oqu(K)}}function vt(le,ye){1&le&&(l.TgZ(0,"div",300),l._uU(1," Date Type is required. "),l.qZA())}function Ht(le,ye){1&le&&(l.TgZ(0,"div",300),l._uU(1," Start Date and Time is required. "),l.qZA())}function Qe(le,ye){if(1&le&&(l.TgZ(0,"div",275)(1,"label",276),l._uU(2,"Start Date and Time"),l.qZA(),l.TgZ(3,"div",277),l._UZ(4,"input",301),l.YNc(5,Ht,2,0,"div",279),l.qZA()()),2&le){const K=l.oxw(2);let E;l.xp6(5),l.Q6J("ngIf",(null==(E=K.reportForm.get("startDateTime"))?null:E.invalid)&&(null==(E=K.reportForm.get("startDateTime"))?null:E.touched))}}function Ar(le,ye){1&le&&(l.TgZ(0,"div",300),l._uU(1," End Date and Time is required. "),l.qZA())}function pr(le,ye){if(1&le&&(l.TgZ(0,"div",275)(1,"label",276),l._uU(2,"End Date and Time"),l.qZA(),l.TgZ(3,"div",277),l._UZ(4,"input",302),l.YNc(5,Ar,2,0,"div",279),l.qZA()()),2&le){const K=l.oxw(2);let E;l.xp6(5),l.Q6J("ngIf",(null==(E=K.reportForm.get("endDateTime"))?null:E.invalid)&&(null==(E=K.reportForm.get("endDateTime"))?null:E.touched))}}function Sr(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",201)(1,"h5",202),l._uU(2,"Reports"),l.qZA(),l.TgZ(3,"button",203),l.NdJ("click",function(){const _e=l.CHM(K).$implicit;return l.KtG(_e.dismiss())}),l.qZA()(),l.TgZ(4,"div",204)(5,"div",268)(6,"div",269)(7,"div",270),l.YNc(8,tt,9,9,"div",183),l.qZA()(),l.TgZ(9,"div",271)(10,"div",272)(11,"h3",273),l._uU(12,"Generate Report"),l.qZA(),l.TgZ(13,"form",274),l.NdJ("ngSubmit",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.generateReport())}),l.TgZ(14,"div",144)(15,"div",275)(16,"label",276),l._uU(17,"Date Type"),l.qZA(),l.TgZ(18,"div",277)(19,"select",278)(20,"option",27),l._uU(21,"Select Date Type"),l.qZA(),l.YNc(22,_t,2,2,"option",28),l.qZA(),l.YNc(23,vt,2,0,"div",279),l.qZA()(),l.YNc(24,Qe,6,1,"div",280),l.YNc(25,pr,6,1,"div",280),l.TgZ(26,"div",275)(27,"label",276),l._uU(28,"Date Range"),l.qZA(),l.TgZ(29,"div",281),l._UZ(30,"input",282)(31,"input",283),l.qZA()(),l.TgZ(32,"div",284)(33,"div",285)(34,"button",286),l._uU(35,"Generate Report"),l.qZA()()()()()()()()()}if(2&le){const K=l.oxw();let E,F,_e;l.xp6(8),l.Q6J("ngForOf",K.summarizedTables),l.xp6(5),l.Q6J("formGroup",K.reportForm),l.xp6(7),l.Q6J("value",null)("selected",!0),l.xp6(2),l.Q6J("ngForOf",K.dateTypes),l.xp6(1),l.Q6J("ngIf",(null==(E=K.reportForm.get("dateType"))?null:E.invalid)&&(null==(E=K.reportForm.get("dateType"))?null:E.touched)),l.xp6(1),l.Q6J("ngIf","between time"==(null==(F=K.reportForm.get("dateType"))?null:F.value)),l.xp6(1),l.Q6J("ngIf","between time"==(null==(_e=K.reportForm.get("dateType"))?null:_e.value)),l.xp6(9),l.Q6J("disabled",K.reportForm.invalid)}}function Qt(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"app-dyanmic-formula-builder",303),l.NdJ("close",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.closeTemplateModal(F))})("onSubmit",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.onSubmitFormula(F))})("onUpdate",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.onUpdateFormula(F))}),l.qZA()}if(2&le){const K=l.oxw();let E;l.Q6J("All_Devices_Configuration",K.All_Devices_Configuration)("AllParams","Parameters"===(null==(E=K.reportForm.get("reportsType"))?null:E.value)?K.AllParameterList:K.AllScheduleList)("initialData",K.selectedFormula)}}const Lr=function(){return{id:"kt_stats_widget_16_tab_1",icon:"fas fa-table",text:"Table",title:"Creating Tables"}},En=function(){return{id:"kt_stats_widget_16_tab_2",icon:"fas fa-columns",text:"Column",title:"Generate Column Headers"}},qn=function(){return{id:"kt_stats_widget_16_tab_3",icon:"bi bi-calculator",text:"Col Cal",title:"Gernerate Column Calculations"}},Fo=function(){return{id:"kt_stats_widget_16_tab_4",icon:"fas fa-pencil-ruler",text:"Rule",title:"Conditional Formatting"}},gi=function(){return{id:"kt_stats_widget_16_tab_5",icon:"fas fa-square-root-alt",text:"Formula",title:"Formula Builder"}},po=function(){return{id:"kt_stats_widget_16_tab_6",icon:"fas fa-chart-pie",text:"Charts",title:"Chart Builder"}},Jr=function(){return{id:"kt_stats_widget_16_tab_6L",icon:"bi bi-file-earmark-spreadsheet",text:"Report",isReport:!0}},lo=function(le,ye,K,E,F,_e,Ge){return[le,ye,K,E,F,_e,Ge]},zo=function(le,ye,K){return{"col-md-9 col-lg-9 col-xl-9 col-xxl-9":le,"col-md-8 col-lg-8 col-xl-8 col-xxl-8":ye,"col-md-12 col-lg-12 col-xl-12 col-xxl-12":K}},cr=function(le){return{"margin-right":le}};let hr=(()=>{var le;class ye{toggleToolbar(E){this.isToolbarVisible=E.target.checked}startLoading(){this.completedTasks=0,this.loadingProgress=0,this.loadingMessage=this.loadingMessages[0];let E=setInterval(()=>{this.loadingProgress=Math.round(this.completedTasks/this.totalTasks*100),this.completedTasks<this.totalTasks&&(this.loadingMessage=this.loadingMessages[this.completedTasks]),this.loadingProgress>=100&&(clearInterval(E),this.loadingProgress=100,this.loadingMessage="\u2705 Reports Playground Ready!"),this.cdr.detectChanges()},500)}getColumnName(E){let F="";for(;E>=0;)F=String.fromCharCode(65+E%26)+F,E=Math.floor(E/26)-1;return F}updateProgress(){this.completedTasks<this.totalTasks&&(this.completedTasks++,this.loadingProgress=Math.round(this.completedTasks/this.totalTasks*100),this.loadingMessage=this.loadingMessages[this.completedTasks]||"\u2705 Reports Playground Ready!",this.cdr.detectChanges())}get devices(){return this.tableForm.get("devices")}closeAllDrawers(E){this.drawerTile=E,ba.hg.hideAll(),ba.hg.reinitialization()}addDeviceTable(){const E=this.fb.group({device:[null,X.kI.required],parameters:[[],X.kI.required]});this.devices.push(E)}removeDeviceTable(E){this.devices.removeAt(E)}createDeviceTable(){const E=this.devices.value.map(Kt=>Kt.device),F=this.devices.value.map(Kt=>Kt.parameters.map(fr=>fr.text));if(0===E.length)return void alert("Please select at least one device.");const _e=E[0],Ge=[`$Device$${_e}`,`$Date$${_e}`,...E.flatMap((Kt,fr)=>F[fr].map(nn=>`$${Kt}.${nn}`))],st={headers:Ge,rows:[new Array(Ge.length).fill(null)]};this.parsedTables.push(st);const Tt=this.parsedTables.length-1;setTimeout(()=>{const Kt=st.headers.map((Yr,io)=>({title:Yr,field:`field${io}`,editor:"input",editableTitle:this.editMode,headerSort:!1})),fr=st.rows.map(Yr=>Yr.reduce((io,Go,Vn)=>(io[`field${Vn}`]=Go,io),{})),nn=new oa.Ae(`#tabulator-table-${Tt}`,{data:fr,columns:Kt,layout:"fitColumns",reactiveData:!0,selectable:!0,height:"500px"});this.tabulatorInstances[Tt]=nn},0)}getParametersList(E){}constructor(E,F,_e,Ge,st,Tt,Kt,fr,nn,Yr,io,Go,Vn,yi){(0,O.Z)(this,"modalService",void 0),(0,O.Z)(this,"http",void 0),(0,O.Z)(this,"reportApi",void 0),(0,O.Z)(this,"router",void 0),(0,O.Z)(this,"snackBar",void 0),(0,O.Z)(this,"toast",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"route",void 0),(0,O.Z)(this,"api",void 0),(0,O.Z)(this,"excelService",void 0),(0,O.Z)(this,"spinner",void 0),(0,O.Z)(this,"customModal",void 0),(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"formulaModalTemplate",void 0),(0,O.Z)(this,"cdkScrollable",void 0),(0,O.Z)(this,"dyanmicFormulaBuilderComponent",void 0),(0,O.Z)(this,"highlightTimeout",void 0),(0,O.Z)(this,"headerSyntax",""),(0,O.Z)(this,"headerExpression",""),(0,O.Z)(this,"multiColumnExpression",""),(0,O.Z)(this,"isToolbarVisible",!0),(0,O.Z)(this,"isDrawerOpen",!1),(0,O.Z)(this,"selectedFormula",{}),(0,O.Z)(this,"drawerInstance",void 0),(0,O.Z)(this,"drawerTile",void 0),(0,O.Z)(this,"allPermissions_user",void 0),(0,O.Z)(this,"hidingLink",void 0),(0,O.Z)(this,"hideDeleteButton",void 0),(0,O.Z)(this,"formulas",[]),(0,O.Z)(this,"templateRef",void 0),(0,O.Z)(this,"chartConfigs",[]),(0,O.Z)(this,"selectedChartConfig",null),(0,O.Z)(this,"optionsForChart",[]),(0,O.Z)(this,"selectedColumnFields",[]),(0,O.Z)(this,"editMode",!0),(0,O.Z)(this,"updateParentModel",void 0),(0,O.Z)(this,"uploadedFile$",new Mn.X(null)),(0,O.Z)(this,"dropzoneInstance$",new Mn.X(null)),(0,O.Z)(this,"defaultValues",void 0),(0,O.Z)(this,"parsedTables",[]),(0,O.Z)(this,"selectedColumn",{tableIndex:-1,field:null}),(0,O.Z)(this,"addedData",{}),(0,O.Z)(this,"addedColumns",{}),(0,O.Z)(this,"derivedHeaderSyntax",""),(0,O.Z)(this,"globalParameterMapping",{}),(0,O.Z)(this,"dropzoneConfig",void 0),(0,O.Z)(this,"modalPreview",void 0),(0,O.Z)(this,"s3ApiUrl","https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory"),(0,O.Z)(this,"tableForm",void 0),(0,O.Z)(this,"columnForm",void 0),(0,O.Z)(this,"colCalForm",void 0),(0,O.Z)(this,"totalForm",void 0),(0,O.Z)(this,"expCalForm",void 0),(0,O.Z)(this,"reportForm",void 0),(0,O.Z)(this,"tabulatorInstances",[]),(0,O.Z)(this,"tables",{}),(0,O.Z)(this,"All_Devices_Configuration",void 0),(0,O.Z)(this,"tableData",void 0),(0,O.Z)(this,"routeId",void 0),(0,O.Z)(this,"SK_clientID",void 0),(0,O.Z)(this,"allPacketDetailsForUpdate",[]),(0,O.Z)(this,"processingMode",!1),(0,O.Z)(this,"All_RDTs_Configuration",[]),(0,O.Z)(this,"globalParameterMappingByDevice",[]),(0,O.Z)(this,"globalScheduleParameterMappingByDevice",[]),(0,O.Z)(this,"AllParameterList",[]),(0,O.Z)(this,"AllScheduleList",[]),(0,O.Z)(this,"extractedColumns",[]),(0,O.Z)(this,"summarizedTables",[]),(0,O.Z)(this,"allReportsPermissions",["Parameters","Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"]),(0,O.Z)(this,"dateTypes",["today","yesterday","between time"]),(0,O.Z)(this,"AllDevicesList",void 0),(0,O.Z)(this,"dropdownSettings",{singleSelection:!1,idField:"value",textField:"text",enableCheckAll:!0,itemsShowLimit:1,allowSearchFilter:!0}),(0,O.Z)(this,"condFormatForm",void 0),(0,O.Z)(this,"loadingProgress",0),(0,O.Z)(this,"totalTasks",4),(0,O.Z)(this,"completedTasks",0),(0,O.Z)(this,"loadingMessages",["\u{1f4c2} Fetching data from the database...","\u{1f4d1} Formatting sheets and tables...","\u2699\ufe0f Fetching Device Configuration...","\u{1f3ae} Loading Reports Playground..."]),(0,O.Z)(this,"loadingMessage",this.loadingMessages[0]),(0,O.Z)(this,"conditionalFormatting",{joy_test_device:{RDT_RP1:{operator:">",value:50,color:"#00FF00"},RDT_RP2:{operator:"<",value:30,color:"#FF0000"}},Joy_test2:{RDT_RP1:{operator:">=",value:40,color:"#FFFF00"},RDT_RP2:{operator:"<=",value:20,color:"#FF00FF"}}}),(0,O.Z)(this,"availableColumns",[]),this.modalService=E,this.http=F,this.reportApi=_e,this.router=Ge,this.snackBar=st,this.toast=Tt,this.sharedService=Kt,this.route=fr,this.api=nn,this.excelService=Yr,this.spinner=io,this.customModal=Go,this.fb=Vn,this.cdr=yi,this.dropzoneConfig={acceptedFiles:".xlsx",maxFiles:1,addRemoveLinks:!1,dictDefaultMessage:'\n        <div class="dz-default-message d-flex flex-column align-items-center justify-content-center">\n\n          <h5 class="text-primary mb-2">Drop your Excel file here or click to upload</h5>\n          <p class="text-muted">Supported format: .xlsx | Max 1 file</p>\n        </div>\n      ',previewTemplate:'\n  <div class="dz-image">\n   <img src="assets/media/excel.png" style="width:100px;height:100px" class="img-thumbnail" alt="Excel File Thumbnail" />\n   </div>\n      '}}ngAfterViewInit(){document.getElementById("kt_forms")&&setTimeout(()=>{this.drawerInstance=ba.hg.getInstance("kt_forms"),this.drawerInstance&&(this.drawerInstance.on("kt.drawer.shown",()=>{this.isDrawerOpen=!0,this.cdr.detectChanges()}),this.drawerInstance.on("kt.drawer.after.hidden",()=>{this.isDrawerOpen=!1,this.cdr.detectChanges()}))},500)}ngOnInit(){const E=this.sharedService.getLoggedUserDetails();this.SK_clientID=E.attributes["custom:clientID"];const F=localStorage.getItem("permissionDetails");this.allPermissions_user=F?JSON.parse(F):[],this.checkPermission(),this.condFormatForm=this.fb.group({rules:this.fb.array([])}),this.tableForm=this.fb.group({devices:this.fb.array([]),parameters:[""],noOfCols:[2],noOfRows:[2]}),this.columnForm=this.fb.group({device_tab1:[""],parameters_tab1:[""],device_tab2:[""],parameters_tab2:[""],columnName:[""],columnType:[""],operator_tab2:[""]}),this.colCalForm=this.fb.group({device_tab1:[""],parameters_tab1:[""],calculationType_tab1:[""],calculationType_tab2:[""],device_tab2:[""],parameters_tab2:[""],columnName:[""],columnType:[""],operator_tab2:[""]}),this.totalForm=this.fb.group({totalValue:[""]}),this.expCalForm=this.fb.group({expression:[""]}),this.reportForm=this.fb.group({reportsType:["Parameters",X.kI.required],dateType:["today",X.kI.required],startDateTime:[new Date,X.kI.required],endDateTime:[new Date,X.kI.required],customType:["Hour"],start_range:["00:00",X.kI.required],end_range:["23:59",X.kI.required],custom_from_time_hour:[0,X.kI.required],custom_to_time_hour:[23,X.kI.required]}),this.route.paramMap.subscribe(_e=>{this.routeId=_e.get("id"),this.routeId&&this.loadDynamicWorkspace(this.routeId)}),this.addDeviceTable()}toggleProcessingMode(){this.processingMode=!this.processingMode,this.processingMode?console.log("Switched to Processing Mode"):console.log("Switched to Edit Mode")}checkPermission(){const E=this.allPermissions_user,F=E.includes("DynamicExcelReports - Update"),_e=E.includes("DynamicExcelReports - View");this.hidingLink=F,console.log("CHECK PERMISSION - Update:",F),console.log("CHECK PERMISSION - View:",_e),F||_e?this.hideDeleteButton=F:(console.warn("User lacks required permissions. Redirecting to 404."),this.router.navigate(["/404"]))}exitProcessingMode(){console.log("Exiting to /TimeMachine/DynamicExcelReport"),this.router.navigate(["/TimeMachine/DynamicExcelReport"])}ngOnDestroy(){const E=this.dropzoneInstance$.value;E&&this.dropzoneInstance$.next(E),this.drawerInstance&&(this.drawerInstance.off("kt.drawer.shown","drawer-shown-handler"),this.drawerInstance.off("kt.drawer.after.hidden","drawer-hidden-handler"))}onFileAdded(E){this.uploadedFile$.value&&this.uploadedFile$.value.name===E.name||(this.uploadedFile$.next(E),this.parseExcelFile(E))}confirmFileRemoval(E){var F=this;return(0,an.Z)(function*(){if((yield Pr().fire({title:"Are you sure?",text:"Do you want to remove the uploaded file?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, keep it"})).isConfirmed){F.uploadedFile$.next(null);const Ge=F.dropzoneInstance$.value;Ge&&Ge.removeAllFiles(!0)}})()}onDropzoneInit(E){this.dropzoneInstance$.next(E);const F=this.uploadedFile$.value;F&&(this.parseExcelFile(F),this.addFileToDropzone(F))}addFileToDropzone(E){const F=this.dropzoneInstance$.value;if(F.removeAllFiles(),F){const _e=new File([E],E.name,{type:E.type});F.emit("addedfile",_e),F.emit("complete",_e),F.files.push(_e)}}parseExcelFile(E){var F=this;return(0,an.Z)(function*(){try{const _e=yield E.arrayBuffer(),Ge=Zt.ij(_e,{type:"array"}),Kt=Zt.P6.sheet_to_json(Ge.Sheets[Ge.SheetNames[0]],{header:1}),fr=Kt[0],nn=Kt.slice(1);F.modalPreview={headers:fr,data:nn}}catch(_e){console.error("Error parsing Excel file:",_e),Pr().fire({title:"Error",text:"Unable to parse the Excel file.",icon:"error"})}})()}openPreviewModal(E){this.modalService.open(E,{size:"lg",backdrop:"static",centered:!0})}parseExcelFileforExtract(E){var F=this;return(0,an.Z)(function*(){try{const _e=yield E.arrayBuffer(),Ge=Zt.ij(_e,{type:"array"});F.processSheetData(Ge.Sheets[Ge.SheetNames[0]])}catch(_e){console.error("Error reading file:",_e)}})()}processSheetData(E){const F=Zt.P6.sheet_to_json(E,{header:1});this.parsedTables=this.parseData(F,E["!merges"]||[]),this.cdr.detectChanges(),console.log("this.parsedTables>>>",this.parsedTables),this.renderTabulators()}categorizeData(E){this.tables={};let F=!1,_e=null,Ge=[];const st=/\$(SUM|AVG|MAX|MIN|PRODUCT|RANGE)\(([^)]+)\)/i,Tt=/\$(SUM|AVG|MAX|MIN|PRODUCT|RANGE)\$([a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*)/i,Kt=/\$(EXP)\(([^)]+)\)/,fr=/\$(Sum|Avg|Max|Min|Product|Range)\s+of\s+([a-zA-Z0-9_]+(?:\.[a-zA-Z0-9_]+)*)/i;E.forEach((nn,Yr)=>{const io=nn.find(Vn=>"string"==typeof Vn&&Vn.startsWith("#TABLESTART")),Go=nn.find(Vn=>"string"==typeof Vn&&Vn.startsWith("#TABLEEND"));return io?(F=!0,_e=io.replace("#TABLESTART","").trim(),this.tables[_e]={headers:[],rows:[],calculations:[],formulas:[]},Ge=E[Yr+1].map(Vn=>"string"==typeof Vn?Vn.replace(/\$(\w+)\$(\w+)/,"$2 ($1)"):""),void(this.tables[_e].headers=Ge)):Go?(F=!1,void(_e=null)):void(F&&_e&&(nn.forEach((Vn,yi)=>{if(console.log("Checking cell for formula or calculation:",Vn),"string"==typeof Vn&&st.test(Vn)){const ai=Vn.match(st);if(ai){const Ui=ai[2];return console.log("Formula detected:",ai[1],Ui),void this.tables[_e].formulas.push({formula:Vn,type:"SUM with multiple parameters",parameters:Ui.split(",").map(vi=>vi.trim()),column:this.tables[_e].headers[yi],color:"bg-success"})}}if("string"==typeof Vn&&Kt.test(Vn)){const ai=Vn.match(Kt);if(ai){const Ui=ai[2];return console.log("EXP formula detected:",ai[1],Ui),void this.tables[_e].formulas.push({formula:Vn,type:"EXP with operators",parameters:[Ui],column:this.tables[_e].headers[yi],color:"bg-danger"})}}if("string"==typeof Vn&&Tt.test(Vn)){const ai=Vn.match(Tt);if(ai){const Ti=ai[1],Ui=ai[2];return console.log("Formula detected:",Ti,Ui),void this.tables[_e].formulas.push({formula:Vn,type:Ti,parameters:[Ui],column:this.tables[_e].headers[yi],color:"bg-info"})}}if("string"==typeof Vn&&fr.test(Vn)){const ai=Vn.match(fr);if(ai){const Ui=ai[2];return console.log("Phrase-based formula detected:",ai[1],Ui),void this.tables[_e].formulas.push({formula:Vn,type:"TOTAL",parameters:[Ui],column:this.tables[_e].headers[yi],color:"bg-warning"})}}}),this.tables[_e].rows.push(nn)))}),console.log("Parsed Tables:",this.tables),this.cdr.detectChanges()}getObjectKeys(E){return Object.keys(E)}isFormula(E,F){const st=this.tables[F].formulas.find(Tt=>Tt.formula===E);return st?st.color:E?"":"bg-light"}isFormulaInRow(E,F){return E.some(_e=>""!==this.isFormula(_e,F))}parseData(E,F){const _e=[];let Ge=null,st=!1,Tt=[],Kt=!1,fr=0;return E.forEach((Yr,io)=>{const Go=Yr[0]?.toString()||"";if(Go.startsWith("#TABLESTART"))st=Go.includes("_GROUPED"),Ge={headers:[],rows:[],merges:[],level:0},Tt=[],Kt=!1,fr=io+1;else if(Go.startsWith("#TABLEEND")){if(Ge){for(;Tt.length&&Tt[Tt.length-1].every(yi=>!yi||""===yi);)Tt.pop();st&&Tt.length>1&&(Ge.groupHeaders=Tt.slice(0,-1),Ge.level=Tt.length-1),Ge.headers=(Tt[Tt.length-1]||[]).map((yi,ai)=>yi&&""!==yi.toString().trim()?yi:`Column ${ai+1}`),Ge.merges=F.filter(yi=>yi.s.r>=fr&&yi.e.r<=io),_e.push(Ge),Ge=null}}else Ge&&(Kt?Ge.rows.push(Yr.map(Vn=>Vn??"")):(Tt.push(Yr.map(yi=>yi??"")),Yr.some(yi=>"string"==typeof yi&&yi.startsWith("$"))&&(Kt=!0)))}),_e}renderTabulators(){this.parsedTables.forEach((E,F)=>{const{headers:_e,groupHeaders:Ge,rows:st}=E;let Tt=[];if(Array.isArray(Ge)&&Ge.length>0){const nn=Ge.length,io=(Go,Vn,yi)=>{const ai={};for(let Ti=Vn;Ti<=yi;Ti++){const Ui=Ge[Go][Ti]||"";ai[Ui]||(ai[Ui]=[]),ai[Ui].push(Ti)}return Object.entries(ai).map(([Ti,Ui])=>({title:Ti||"",columns:Go===nn-1?Ui.map(Uo=>({title:_e[Uo],field:`field${Uo}`,editor:!!this.editMode&&"input",editableTitle:this.editMode,headerSort:!1,headerClick:(go,pi)=>{this.editMode||this.toggleColumnSelection(pi.getField(),F)}})):io(Go+1,Ui[0],Ui[Ui.length-1])}))};Tt=io(0,0,_e.length-1)}else Tt=_e.map((nn,Yr)=>({title:nn,field:`field${Yr}`,editor:!!this.editMode&&"input",editableTitle:this.editMode,headerSort:!1,headerClick:(io,Go)=>{this.editMode||this.toggleColumnSelection(Go.getField(),F)}}));const Kt=st.map(nn=>nn.reduce((Yr,io,Go)=>(Yr[`field${Go}`]=io,Yr),{})),fr=this.tabulatorInstances[F];if(fr)fr.setColumns(Tt),fr.replaceData(Kt),fr.options.selectable=!this.editMode||"highlight",fr.redraw(!0),this.attachListeners(fr,F);else{const nn=new oa.Ae(`#tabulator-table-${F}`,{data:Kt,columns:Tt,layout:"fitColumns",reactiveData:!0,height:"500px",selectable:!this.editMode||"highlight"});this.attachListeners(nn,F),this.tabulatorInstances[F]=nn,console.log("this.tabulatorInstances[index] :>> ",this.tabulatorInstances[F])}})}toggleMode(){this.editMode=!this.editMode,this.tabulatorInstances.forEach((E,F)=>{if(!E)return;const _e=E.getColumnDefinitions(),Ge=this.updateColumnDefinitionsRecursive(_e,F,this.editMode);E.setColumns(Ge),this.highlightSelectedHeaders(F)})}updateColumnDefinitionsRecursive(E,F,_e){return E.map(Ge=>{const st={...Ge,editor:!!_e&&"input",editableTitle:_e,headerClick:(Tt,Kt)=>{const fr=Kt.getField();!_e&&fr&&this.toggleColumnSelection(fr,F)}};return Ge.columns&&Array.isArray(Ge.columns)&&(st.columns=this.updateColumnDefinitionsRecursive(Ge.columns,F,_e)),st})}toggleColumnSelection(E,F){this.selectedColumnFields[F]||(this.selectedColumnFields[F]=new Set);const _e=this.selectedColumnFields[F];_e.has(E)?_e.delete(E):_e.add(E),this.highlightSelectedHeaders(F)}highlightSelectedHeaders(E){const F=this.tabulatorInstances[E];F&&F.getColumns().forEach(_e=>{const Ge=_e.getField(),st=_e.getElement()?.querySelector(".tabulator-col-content");st&&Ge&&(this.selectedColumnFields[E]?.has(Ge)?st.classList.add("selected-column"):st.classList.remove("selected-column"))})}addRow(E){if(this.editMode){const F=this.tabulatorInstances[E];if(!F)return;const _e={};F.getColumns().forEach(Ge=>{const st=Ge.getField();st&&(_e[st]=null)}),F.addRow(_e,!1)}}deleteRow(E){if(!this.editMode){const F=this.tabulatorInstances[E];if(!F)return;const _e=F.getRows().filter(Ge=>Ge.getElement()?.classList.contains("selected-row"));_e.length?_e.forEach(Ge=>Ge.delete()):console.warn("No rows selected for deletion.")}}addColumn(E){if(this.editMode){const F=this.tabulatorInstances[E];if(!F)return;const _e=`field${F.getColumns().length}`,Ge={title:`Column ${_e}`,field:_e,editor:"input",editableTitle:this.editMode,headerSort:!1},st=[...F.getColumnDefinitions(),Ge];F.setColumns(st),F.getRows().forEach(Tt=>{Tt.update({[_e]:null})}),this.attachListeners(F,E)}}deleteColumn(E){if(!this.editMode){const F=this.tabulatorInstances[E],_e=this.selectedColumnFields[E];if(!F||!_e||0===_e.size)return;_e.forEach(Ge=>{F.deleteColumn(Ge),F.getRows().forEach(st=>{st.update({[Ge]:void 0})})}),this.selectedColumnFields[E].clear(),this.highlightSelectedHeaders(E)}}groupSelectedColumns(E){const F=this.selectedColumnFields[E];if(!F||F.size<2)return void alert("Please select at least 2 columns to group.");const _e=prompt("Enter group name:");if(!_e)return;const Ge=this.tabulatorInstances[E];if(!Ge)return;const st=Ge.getColumnDefinitions(),Tt=this.groupFieldsInTree(st,F,_e);Ge.setColumns(Tt),this.attachListeners(Ge,E),this.selectedColumnFields[E]=new Set}groupFieldsInTree(E,F,_e){const Ge=[],st=[];for(const Tt of E)if(Tt.columns){const Kt=this.groupFieldsInTree(Tt.columns,F,_e);Ge.push({...Tt,columns:Kt})}else F.has(Tt.field)?st.push(Tt):Ge.push(Tt);return st.length&&Ge.push({title:_e,columns:st}),Ge}ungroupSelectedColumns(E){const F=this.selectedColumnFields[E];if(!F||0===F.size)return void alert("Select at least one column to ungroup.");const _e=this.tabulatorInstances[E];if(!_e)return;const Ge=_e.getColumnDefinitions(),st=this.ungroupFieldsInTree(Ge,F);_e.setColumns(st),this.attachListeners(_e,E),this.selectedColumnFields[E]=new Set}ungroupFieldsInTree(E,F){const _e=[];for(const Ge of E)if(Ge.columns){const st=this.ungroupFieldsInTree(Ge.columns,F);Ge.columns.every(Kt=>!!Kt.field&&F.has(Kt.field))?_e.push(...st):_e.push({...Ge,columns:st})}else _e.push(Ge);return _e}attachListeners(E,F){E.off("cellEdited"),E.off("rowClick"),E.on("rowClick",(_e,Ge)=>{this.handleRowSelection(Ge)})}handleRowSelection(E){if(!this.editMode){const F=E.getElement();F&&F.classList.toggle("selected-row")}}handleColumnSelection(E,F){this.selectedColumn=this.selectedColumn&&this.selectedColumn.tableIndex===E&&this.selectedColumn.field===F?{tableIndex:-1,field:null}:{tableIndex:E,field:F},clearTimeout(this.highlightTimeout),this.highlightTimeout=setTimeout(()=>{this.updateColumnHighlight(E)},100)}updateColumnHighlight(E){const F=this.tabulatorInstances[E];if(F&&(F.getColumns().forEach(_e=>{_e.getCells().forEach(Ge=>{const st=Ge.getElement();st&&st.classList.remove("selected-column")})}),this.selectedColumn&&this.selectedColumn.tableIndex===E&&this.selectedColumn.field)){const _e=F.getColumn(this.selectedColumn.field);_e&&_e.getCells().forEach(Ge=>{const st=Ge.getElement();st&&st.classList.add("selected-column")})}}editHeader(E,F){Pr().fire({title:"Edit Column Header",input:"text",inputValue:E.getDefinition().title,showCancelButton:!0,confirmButtonText:"Save",preConfirm:_e=>{if(_e.trim())return _e.trim();Pr().showValidationMessage("Header cannot be empty")}}).then(_e=>{_e.isConfirmed&&(E.updateDefinition({title:_e.value}),this.parsedTables.forEach((Ge,st)=>{if(st===F){const Tt=parseInt(E.getField().replace("field",""),10);Ge.headers[Tt]=_e.value}}),Pr().fire("Success","Column header updated","success"))})}createNewTable(){const E=this.tableForm.get("noOfCols")?.value||2,F=this.tableForm.get("noOfRows")?.value||2,st={headers:Array.from({length:E},(Kt,fr)=>`Column ${fr+1}`),rows:Array.from({length:F},()=>Array(E).fill(null))};this.parsedTables.push(st);const Tt=this.parsedTables.length-1;setTimeout(()=>{const Kt=st.headers.map((io,Go)=>({title:io,field:`field${Go}`,editor:!!this.editMode&&"input",editableTitle:this.editMode,headerSort:!1})),fr=st.rows.map(io=>io.reduce((Go,Vn,yi)=>(Go[`field${yi}`]=Vn,Go),{}));console.log("tabulator check :>> ",fr);const nn=new oa.Ae(`#tabulator-table-${Tt}`,{data:fr,columns:Kt,layout:"fitColumns",height:"500px",reactiveData:!0,selectable:!this.editMode||"highlight"});this.attachListeners(nn,Tt),this.tabulatorInstances[Tt]=nn;const Yr=document.querySelector(`#tab-${Tt}-tab`);Yr&&Yr.click()},0)}deleteTable(E){Pr().fire({title:"Are you sure?",text:"Once deleted, your data will be lost!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!"}).then(F=>{F.isConfirmed&&(this.parsedTables.length>1?(this.parsedTables.splice(E,1),this.tabulatorInstances[E]&&(this.tabulatorInstances[E].destroy(),delete this.tabulatorInstances[E]),this.tabulatorInstances=this.tabulatorInstances.filter((_e,Ge)=>Ge!==E),setTimeout(()=>{if(this.parsedTables.length>0){const _e=document.querySelector("#tab-0-tab");_e&&_e.click()}},0),this.cdr.detectChanges(),Pr().fire("Deleted!","Your table has been deleted.","success")):Pr().fire("Warning!","At least one table must remain.","error"))})}handleParameterData(E){this.spinner.show(),this.tableData=[];let F=E.paramFilter;console.log("filteredData :",F),console.log("Time Machine Data",E);let _e=JSON.parse(E.rdt);_e=_e[0].parameters,console.log("Parameters",_e);let Ge=JSON.parse(E.rdt);console.log("Before mulActualData",Ge);let Tt=[];for(let Yr=0;Yr<Ge.length;Yr++)Tt.push(Ge[Yr].parameters);console.log("Extracted Parameters",Tt),console.log("After mulActualData",Ge);const nn=performance.now();this.reportApi.getReportsData(E).then(Yr=>{const io=performance.now();if(console.log(`API call took ${io-nn} milliseconds`),console.log("response chk",Yr),1===Yr.length&&null===Yr[0])return Pr().fire({icon:"warning",title:"Warning: No Data",text:`${E.device[0]} does not have any data.`,confirmButtonText:"Understood"}),void this.cdr.detectChanges();if(1===Yr.length){for(let qi=0;qi<Yr.length;qi++)null===Yr[qi]?this.cdr.detectChanges():console.log("continue the process");const Go=Yr[0]?.data||[];console.log("historicalData",Go);const Vn=performance.now(),yi=Array.from(new Set(Go.flatMap(qi=>qi.packet_info&&qi.packet_info.MM?Object.keys(qi.packet_info.MM):[])));console.log("propertyNames",yi);const ai={};Go.forEach(qi=>{const xa=1e3*qi.SK;yi.forEach(Da=>{ai[Da]||(ai[Da]=[]),qi.packet_info&&qi.packet_info.MM&&qi.packet_info.MM[Da]?ai[Da].push([xa,qi.packet_info.MM[Da]]):console.warn(`packet.packet_info.MM or property ${Da} is not defined`)})});const Ti=performance.now();console.log(`Grouping data took ${Ti-Vn} milliseconds`),console.log("groupedData",ai);const Ui=Object.entries(ai).map(([qi,xa])=>{const Da=parseInt(qi.slice(1))-1,hs=_e[Da];return{name:hs?hs.parameterLabel:qi,data:xa.filter(Pc=>"string"!=typeof Pc[1])}});console.log("Formatted Highcharts Series:",Ui);let vi=Ui.filter(qi=>{const xa=qi.name;return F.some(Da=>Da.includes(xa))});console.log(vi.data),console.log(F),console.log("highchartsSeries paramFilter",vi);const Uo=yi.map(qi=>{const xa=parseInt(qi.slice(1))-1;return _e[xa]&&void 0!==_e[xa].parameterLabel?_e[xa].parameterLabel:qi});yi.unshift("Device label","Date & time"),Uo.unshift("Device label","Date & time"),console.log("TABLE NAMES",Uo);const go={columns:Uo,data:Go.map(qi=>{const xa={};return yi.forEach(Da=>{if("Device label"!==Da&&"Date & time"!==Da){const hs=parseInt(Da.slice(1))-1;_e&&Array.isArray(_e),_e[hs]&&void 0!==_e[hs].parameterLabel?qi.packet_info&&qi.packet_info.MM&&Da in qi.packet_info.MM?xa[_e[hs].parameterLabel]=qi?.packet_info?.MM?.[Da]??" ":(xa[_e[hs].parameterLabel]=" ",console.warn(`Missing data for property: ${Da}`)):qi.packet_info&&qi.packet_info.MM&&Da in qi.packet_info.MM?xa[Da]=qi.packet_info.MM[Da]??" ":(xa[Da]=" ",console.warn(`Missing data for property: ${Da}`))}else"Device label"===Da?xa["Device label"]=qi.packet_info?.MN??"Unknown Device":"Date & time"===Da?xa["Date & time"]=new Date(1e3*(qi.SK-19800)).toDateString()+" "+new Date(1e3*(qi.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),xa})},pi=go.data[0]["Device label"];let Co={};const hi=this.All_Devices_Configuration.find(qi=>qi.mn===pi);Co[pi]=go,Co[pi].label=hi.mn_label,console.log("angularDataTable:>>",go);const Gi=this.uploadedFile$.value;Gi&&this.parseExcelFileforExtractProcessMulti(Gi,Co),console.log("After filtering:",go.data),console.log("Angular DataTable Format:",go);const Va=go.columns.filter(qi=>{const xa=qi;return F.some(Da=>Da.includes(xa))});Va.unshift("Device label","Date & time"),go.columns=Va,this.tableData.push(go),console.log("structure check",this.tableData)}else if(Yr.length>1){const Vn=Yr.reduce((Co,hi)=>Co.concat(hi?.data||[]),[]);console.log("allhistoricalData",Vn);const yi={};Vn.forEach(Co=>{const hi=Co.packet_info.MN;if(Co.packet_info&&Co.packet_info.MM){const Gi=Object.keys(Co.packet_info.MM);yi[hi]||(yi[hi]=new Set),Gi.forEach(Va=>{yi[hi].add(Va)})}}),console.log("propertyNamesByDevice",yi);const ai={};Object.keys(yi).sort((Co,hi)=>yi[hi].size-yi[Co].size).forEach(Co=>{const hi=yi[Co];ai[Co]={},hi.forEach(Gi=>{ai[Co][Gi]=[],Vn.forEach(Va=>{if(Va.packet_info&&Va.packet_info.MM){const xa=Va.packet_info.MM[Gi];"number"==typeof xa&&Va.packet_info.MN===Co&&ai[Co][Gi].push({x:1e3*Va.SK,y:xa})}})})}),console.log("Matched Data By Device:",ai);const Ui=Object.entries(ai).map(([Co,hi],Gi)=>Object.entries(hi).map(([qi,xa])=>{const Da=parseInt(qi.slice(1))-1,hs=Tt[Gi][Da],Dl=hs?hs.parameterLabel:qi,Tl=xa.filter(Pc=>"string"!=typeof Pc.y);return{name:`${Co} : ${Dl}`,data:Tl}})).flat();console.log("all Formatted Highcharts Series:",Ui),F=F.map(Co=>Co.map(Gi=>Gi.trim()));let vi=Ui.filter(Co=>{const hi=Co.name.split(":")[1].trim();return F.some(Gi=>Gi.includes(hi))});console.log("param Filter",vi);const Uo={};Object.keys(yi).sort((Co,hi)=>yi[hi].size-yi[Co].size),Object.keys(yi).forEach((Co,hi)=>{const Gi=Array.from(yi[Co]),Va=Gi.map(hs=>{const Dl=parseInt(hs.slice(1))-1;return Tt[hi][Dl]&&void 0!==Tt[hi][Dl].parameterLabel?Tt[hi][Dl].parameterLabel:hs});Va.unshift("Device label","Date & time"),Gi.unshift("Device label","Date & time");const qi={columns:Va,data:Vn.map(hs=>{if(hs&&Co===hs.packet_info.MN){const Dl={};return Gi.forEach(Tl=>{if("Device label"!==Tl&&"Date & time"!==Tl){const Pc=parseInt(Tl.slice(1))-1,Mh=_e&&Array.isArray(Tt[hi])&&Tt[hi][Pc]&&Tt[hi][Pc].valuemapping?Tt[hi][Pc].valuemapping:[];Tt[hi]&&Tt[hi][Pc]&&void 0!==Tt[hi][Pc].parameterLabel?Dl[Tt[hi][Pc].parameterLabel]=hs&&hs.packet_info.MM&&void 0!==hs.packet_info.MM[Tl]?this.getParamterValue(hs,Tl,"Parameters",Mh):" ":Dl[Tl]=hs&&hs.packet_info.MM&&void 0!==hs.packet_info.MM[Tl]?hs.packet_info.MM[Tl]:" "}else"Device label"===Tl?Dl["Device label"]=hs.packet_info?.MN??"Unknown Device":"Date & time"===Tl?Dl["Date & time"]=new Date(1e3*(hs.SK-19800)).toDateString()+" "+new Date(1e3*(hs.SK-19800)).toLocaleTimeString():console.log("Invalid column")}),Dl}return null}).filter(hs=>null!==hs)},xa=this.All_Devices_Configuration.find(hs=>hs.mn===Co);Uo[Co]=qi,Uo[Co].label=xa.mn_label,console.log("Data Tables:",Uo);const Da=Uo[Co].columns.filter(hs=>{const Dl=hs;return F[hi].some(Tl=>Tl.includes(Dl))});Da.unshift("Device label","Date & time"),Uo[Co].columns=Da,this.tableData.push(Uo[Co])}),console.log("structure check",this.tableData),console.log("Data Tables:",Uo);const pi=this.uploadedFile$.value;pi&&this.parseExcelFileforExtractProcessMulti(pi,Uo)}else this.cdr.detectChanges()}).catch(Yr=>{this.spinner.hide(),Pr().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",Yr)})}getParamterValue(E,F,_e,Ge){try{return this.getGeneratedHtml(Ge,E?.packet_info?.MM[F]||"")}catch{return E?.packet_info?.MM?.[F]??" "}}getGeneratedHtml(E,F){if(E&&Array.isArray(E)){const _e=E.find(Ge=>Ge.vm_value===F);if(_e)return _e.vm_label}return F}handleShedhuleData(E){this.spinner.show(),this.tableData=[];let F=E.paramFilter;console.log("Time Machine Data",E);let _e=JSON.parse(E.rdt);_e=_e[0].parameters,console.log("Parameters",_e);let Ge=JSON.parse(E.rdt);console.log("Before mulActualData",Ge);let Tt={};for(let Kt=0;Kt<Ge.length;Kt++){const fr=Ge[Kt]?.parameters,nn=Ge[Kt]?.allDetails?.PK;fr&&nn&&(Tt[nn]=fr)}console.log("Extracted Parameters",Tt),console.log(" After mulActualData",Ge),this.reportApi.getReportsData(E).then(Kt=>{if(1===Kt.length){const fr=Kt[0]?.data||[];console.log("historicalData",fr);const nn=Array.from(new Set(fr.flatMap(go=>Object.keys(go.MM))));console.log("propertyNames",nn);const Yr={};fr.forEach(go=>{const pi=1e3*go.SK;nn.forEach(Co=>{Yr[Co]||(Yr[Co]=[]),Yr[Co].push([pi,go.MM[Co]])})}),console.log("groupedData",Yr);const io=Object.entries(Yr).map(([go,pi])=>{const Co=parseInt(go.slice(1))-1,hi=_e[Co];return{name:hi?hi.schedule_parameter_label:go,data:pi.filter(qi=>"string"!=typeof qi[1])}});console.log("Formatted Highcharts Series:",io);const Go=io.filter(go=>{const pi=go.name;return F.some(Co=>Co.includes(pi))});console.log("highchartsSeries paramFilter",Go);const Vn=nn.map(go=>{const pi=parseInt(go.slice(1))-1;return _e[pi]&&void 0!==_e[pi].schedule_parameter_label?_e[pi].schedule_parameter_label:go});nn.unshift("Device label","Date & time","Calculated Time","Time Generated"),Vn.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("TABLE NAMES",Vn);const yi={columns:Vn,data:fr.map(go=>{const pi={};return nn.forEach(Co=>{if("Device label"!==Co&&"Date & time"!==Co&&"Calculated Time"!==Co&&"Time Generated"!==Co){const hi=parseInt(Co.slice(1))-1;_e[hi]&&void 0!==_e[hi].schedule_parameter_label?pi[_e[hi].schedule_parameter_label]=go.MM[Co]??" ":pi[Co]=go.MM[Co]??" "}else if("Device label"===Co){let hi=go.PK;hi=hi.split("#")[1],pi["Device label"]=hi??"Unknown Device"}else"Date & time"===Co?pi["Date & time"]=new Date(1e3*(go.SK-19800)).toDateString()+" "+new Date(1e3*(go.SK-19800)).toLocaleTimeString():"Calculated Time"===Co?pi["Calculated Time"]=this.convertToReadableFormat(go.time_calculated):"Time Generated"===Co?pi["Time Generated"]=this.convertToReadableFormat1(go.time_generated):console.log("Invialid column")}),pi})},ai=yi.data[0]["Device label"];let Ti={};const Ui=this.All_Devices_Configuration.find(go=>go.mn===ai);Ti[ai]=yi,Ti[ai].label=Ui.mn_label,console.log("angularDataTable:>>",yi);const vi=this.uploadedFile$.value;vi&&this.parseExcelFileforExtractProcessMulti(vi,Ti),console.log("Angular DataTable Format:",yi);const Uo=yi.columns.filter(go=>{const pi=go;return F.some(Co=>Co.includes(pi))});Uo.unshift("Device label","Date & time","Calculated Time","Time Generated"),yi.columns=Uo,this.tableData.push(yi)}else if(Kt.length>1){const nn=Kt.reduce((vi,Uo)=>vi.concat(Uo?.data||[]),[]);console.log("allhistoricalData",nn);const Yr={};nn.forEach(vi=>{let Uo=vi.PK;Uo=Uo.split("#")[1];const pi=Uo,Co=Object.keys(vi.MM);Yr[pi]||(Yr[pi]=new Set),Co.forEach(hi=>{Yr[pi].add(hi)})}),console.log("propertyNamesByDevice",Yr);const io={};Object.keys(Yr).sort((vi,Uo)=>Yr[Uo].size-Yr[vi].size).forEach(vi=>{const Uo=Yr[vi];io[vi]={},Uo.forEach(go=>{io[vi][go]=[],nn.forEach(pi=>{const Co=1e3*pi.SK,hi=pi.MM[go];let Gi=pi.PK;Gi=Gi.split("#")[1],"number"==typeof hi&&Gi===vi&&io[vi][go].push({x:Co,y:hi})})})}),console.log("Matched Data By Device:",io);const Vn=Object.entries(io).map(([vi,Uo],go)=>{const pi=this.All_Devices_Configuration.find(Gi=>Gi.PK===vi).reading_device_type;return Object.keys(Uo).sort((Gi,Va)=>parseInt(Gi.replace(/\D/g,""),10)-parseInt(Va.replace(/\D/g,""),10)).map(Gi=>{const Va=parseInt(Gi.replace(/\D/g,""),10)-1,xa=Tt[pi]?.[Va]?.schedule_parameter_label||Gi,Da=(Uo[Gi]||[]).filter(hs=>hs?.y&&"string"!=typeof hs.y);return{name:`${vi} : ${xa}`,data:Da}})}).flat();console.log("all Formatted Highcharts Series:",Vn),F=F.map(vi=>vi.map(go=>go.trim())),Vn.filter(vi=>{const Uo=vi.name.split(":")[1].trim();return F.some(go=>go.includes(Uo))});const ai={},Ti=Object.keys(Yr).sort((vi,Uo)=>Yr[Uo].size-Yr[vi].size);console.log("PROPERTY NAME DEVICE:",Yr),console.log("SD",Ti),Object.keys(Yr).forEach((vi,Uo)=>{const pi=this.All_Devices_Configuration.find(xa=>xa.PK===vi)?.reading_device_type??"default",Co=Array.from(Yr[vi]).sort((xa,Da)=>parseInt(xa.replace(/\D/g,""),10)-parseInt(Da.replace(/\D/g,""),10)),hi=Co.map(xa=>{const Da=parseInt(xa.slice(1))-1;return Tt[pi]?.[Da]?.schedule_parameter_label??xa});hi.unshift("Device label","Date & time","Calculated Time","Time Generated"),Co.unshift("Device label","Date & time","Calculated Time","Time Generated"),console.log("Device:",vi,"findRDT:",pi,"Properties:",Co);const Gi={columns:hi,data:nn.map(xa=>{let Da=xa.PK;if(Da=Da.split("#")[1],xa&&vi===Da){const Dl={};return Co.forEach(Tl=>{const Pc=parseInt(Tl.slice(1))-1;["Device label","Date & time","Calculated Time","Time Generated"].includes(Tl)?"Device label"===Tl?Dl["Device label"]=Da:"Date & time"===Tl?Dl["Date & time"]=new Date(1e3*(xa.SK-19800)).toDateString()+" "+new Date(1e3*(xa.SK-19800)).toLocaleTimeString():"Calculated Time"===Tl?Dl["Calculated Time"]=this.convertToReadableFormat(xa.time_calculated):"Time Generated"===Tl&&(Dl["Time Generated"]=this.convertToReadableFormat1(xa.time_generated)):void 0!==Tt[pi]?.[Pc]?.schedule_parameter_label?Dl[Tt[pi][Pc].schedule_parameter_label]=xa.MM[Tl]??" ":Dl[Tl]=xa.MM[Tl]??" "}),Dl}return null}).filter(xa=>null!==xa)},Va=this.All_Devices_Configuration.find(xa=>xa.mn===vi);ai[vi]=Gi,ai[vi].label=Va.mn_label,console.log("Data Tables:",ai);const qi=ai[vi].columns.filter(xa=>F[Uo].some(Da=>Da.includes(xa.trim())));qi.unshift("Device label","Date & time","Calculated Time","Time Generated"),ai[vi].columns=qi,this.tableData.push(ai[vi]),console.log("Final Table Structure:",this.tableData)});const Ui=this.uploadedFile$.value;Ui&&this.parseExcelFileforExtractProcessMulti(Ui,ai),console.log("Data Tables:",ai)}else this.cdr.detectChanges()}).catch(Kt=>{this.spinner.hide(),Pr().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",Kt)})}sanitizeData(E){return E.map(F=>{const _e={};return Object.keys(F).forEach(Ge=>{const st=this.sanitizeKey(Ge);_e[st]=F[Ge]}),_e})}sanitizeKey(E){let F=E.replace(/\./g,"_");return F=F.replace(/\[/g,"_").replace(/\]/g,""),F}convertToReadableFormat(E){const[F,_e]=E.split(" to ");return`${hl()(F).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")} to ${hl()(_e).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")}`}convertToReadableFormat1(E){return hl()(E).subtract(5.5,"hours").format("MMMM D, YYYY, h:mm A")}loadDynamicWorkspace(E){this.spinner.show(),this.startLoading(),this.api.GetDynamicReports(E,this.SK_clientID).then(F=>{if(F){if(this.updateProgress(),this.allPacketDetailsForUpdate=F,"string"==typeof F.Others){const _e=JSON.parse(F.Others);"Parameters"==_e[0].reportsType?(this.allReportsPermissions=["Parameters"],this.reportForm.get("reportsType")?.setValue("Parameters")):"Schedule"==_e[0].reportsType?(this.allReportsPermissions=["Hourly consumption","Daily consumption","Monthly consumption","Custom Schedule Hour","Custom Schedule Day"],this.reportForm.get("reportsType")?.setValue("Hourly consumption")):(this.allReportsPermissions=["Parameters","Hourly consumption","Daily consumption","Monthly consumption"],this.reportForm.get("reportsType")?.setValue("Parameters"))}if(F.formulas)if("string"==typeof F.formulas)try{let _e=JSON.parse(F.formulas);this.formulas="string"==typeof _e?JSON.parse(_e):_e}catch(_e){console.error("\u274c Error parsing formulas:",_e),this.formulas=[]}else this.formulas=F.formulas;else console.warn("No formulas found in the response"),this.formulas=[];if(F.Values)if("string"==typeof F.Values)try{let _e=JSON.parse(F.Values);this.chartConfigs="string"==typeof _e?JSON.parse(_e):_e}catch(_e){console.error("\u274c Error parsing formulas:",_e),this.chartConfigs=[]}else this.chartConfigs=F.formulas;else console.warn("No formulas found in the response"),this.chartConfigs=[];this.loadExistingRules(JSON.parse(F.filters)),this.batchRequest(F),this.fetchFileFromS3(F)}})}fetchFileFromS3(E){this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",{action:"download",type:"xlsx",bucket:"dynamic-excel-reports",folder:`${E.SK}/${E.PK}`,fileName:E.file_location_path_URl},{headers:{"x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(_e=>{console.log("response>>:",_e);let Ge=_e.body;if(Ge)try{const st=atob(Ge),Tt=[];for(let Yr=0;Yr<st.length;Yr+=1024){const io=st.slice(Yr,Yr+1024),Go=new Array(io.length);for(let Vn=0;Vn<io.length;Vn++)Go[Vn]=io.charCodeAt(Vn);Tt.push(new Uint8Array(Go))}const Kt=new Blob(Tt,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),fr=new File([Kt],E.file_location_path_URl,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.uploadedFile$.next(fr);const nn=this.uploadedFile$.value;nn&&this.addFileToDropzone(nn),this.uploadedFile$.subscribe(Yr=>{Yr&&(this.tabulatorInstances=[],this.parseExcelFile(Yr),this.parseExcelFileforExtract(Yr))}),this.updateProgress(),console.log("File successfully retrieved and decoded:",fr)}catch(st){this.spinner.hide(),console.error("Error decoding base64 string:",st),Pr().fire({title:"Error",text:"There was an error processing the file.",icon:"error"})}else this.spinner.hide(),console.error("Invalid base64 string:",Ge),Pr().fire({title:"Error",text:"The file format is invalid.",icon:"error"})},_e=>{this.spinner.hide(),console.error("Error fetching file from S3:",_e),Pr().fire({title:"Error",text:"Unable to fetch file from the server.",icon:"error"})})}batchRequest(E){if(E&&E.devices)try{const F=JSON.parse(E.devices),_e=new Set,Ge=F.filter(Tt=>Tt&&Tt.mn).map(Tt=>_e.has(Tt.mn)?null:(_e.add(Tt.mn),{PK:Tt.mn,SK:this.SK_clientID})).filter(Boolean);if(0===Ge.length)return void console.warn("No valid or unique device data to process.");const st={type:"batchGet",table_name:"device_configuration",keys:Ge};this.All_Devices_Configuration=[],this.sharedService.postData(st).subscribe({next:Tt=>this.handleBatchDeviceResponse(Tt,E),error:Tt=>this.handleBatchDeviceError(Tt)})}catch(F){console.error("Error parsing devices or processing batch request:",F)}else console.error("Invalid input: keys or devices are missing.")}handleBatchDeviceResponse(E,F){this.All_Devices_Configuration=E;const _e=[...new Set(this.All_Devices_Configuration.map(Ge=>Ge.reading_device_type))];console.log("Batch Request Successful:",this.All_Devices_Configuration),this.updateProgress(),this.batchRDtRequest(_e)}handleBatchDeviceError(E){console.error("Error during batch request:",E),this.spinner.hide()}batchRDtRequest(E){if(!E||!Array.isArray(E))return void console.error("Invalid input: keys must be an array.");const F=new Set,_e=E.filter(st=>st&&!F.has(st)).map(st=>(F.add(st),{PK:st,SK:this.SK_clientID}));if(0===_e.length)return void console.warn("No unique keys to process.");const Ge={type:"batchGet",table_name:"reading_device_type",keys:_e};this.All_RDTs_Configuration=[],this.sharedService.postData(Ge).subscribe({next:st=>this.handleBatchResponse(st),error:st=>this.handleBatchError(st)})}handleBatchResponse(E){this.All_RDTs_Configuration=E.map(Tt=>({allDetails:Tt,parameters:Tt.parameters})),console.log("rdt data>>>:",E);const F=E.reduce((Tt,Kt)=>(Tt[Kt.PK]=Kt.parameters.map(fr=>fr.parameterLabel),Tt),{}),_e=E.reduce((Tt,Kt)=>(Tt[Kt.PK]=Kt.parameters.map(fr=>fr.schedule_parameter_label).filter(fr=>null!=fr&&""!==fr),Tt),{}),Ge=E.reduce((Tt,Kt)=>(Tt[Kt.PK]=Kt.parameters.map(fr=>({text:fr.parameterLabel,value:fr.parameterID})),Tt),{}),st=E.reduce((Tt,Kt)=>(Tt[Kt.PK]=Kt.parameters.map((fr,nn)=>({text:fr.schedule_parameter_label,value:fr.schedule_parameter_label,index:nn})).filter(fr=>fr.text&&""!==fr.text.trim()),Tt),{});this.globalParameterMapping=F,this.All_Devices_Configuration.forEach(Tt=>{const Kt=F[Tt.reading_device_type],fr=_e[Tt.reading_device_type];Kt&&(this.globalParameterMappingByDevice[Tt.mn]=Kt,this.AllParameterList[Tt.mn]=Ge[Tt.reading_device_type]),fr&&(this.globalScheduleParameterMappingByDevice[Tt.mn]=fr,this.AllScheduleList[Tt.mn]=st[Tt.reading_device_type])}),console.log(" this.globalParameterMappingByDevice",this.globalParameterMappingByDevice),this.updateProgress(),this.spinner.hide()}handleBatchError(E){console.error("Error during RDT batch request:",E),this.spinner.hide()}reportsBodyReady(E,F){var _e=this;return(0,an.Z)(function*(){_e.modalService.open(E,{size:"lg",backdrop:"static",centered:!0}),yield _e.reportsSection()})()}reportsBodyReadyForSchedule(E,F){var _e=this;return(0,an.Z)(function*(){_e.modalService.open(E,{size:"lg",backdrop:"static",centered:!0}),yield _e.reportsSectionSchedule()})()}extractHeadersFromTabulator(E){return this.tabulatorInstances[E]?this.tabulatorInstances[E].getColumns().map(st=>st.getDefinition().title.replace(/#.*?#/g,"").trim()).map(st=>{const[Tt,Kt]=st.replace("$","").split(".");return this.globalParameterMappingByDevice[Tt]&&this.globalParameterMappingByDevice[Tt].includes(Kt)?{device:Tt,parameter:Kt}:{}}):(console.error("Tabulator instance not found for tableIndex:",E),[])}extractHeadersFromTabulatorSchedule(E){return this.tabulatorInstances[E]?this.tabulatorInstances[E].getColumns().map(st=>st.getDefinition().title.replace(/#.*?#/g,"").trim()).map(st=>{const[Tt,Kt]=st.replace("$","").split(".");return this.globalScheduleParameterMappingByDevice[Tt]&&this.globalScheduleParameterMappingByDevice[Tt].includes(Kt)?{device:Tt,parameter:Kt}:{}}):(console.error("Tabulator instance not found for tableIndex:",E),[])}reportsSection(){var E=this;return(0,an.Z)(function*(){E.tabulatorInstances.forEach((F,_e)=>{E.extractedColumns[`Table${_e+1}`]=E.extractHeadersFromTabulator(_e)}),console.log("this.extractedColumns :>> ",E.extractedColumns),E.summarizeTables(E.extractedColumns,2)})()}reportsSectionSchedule(){var E=this;return(0,an.Z)(function*(){E.tabulatorInstances.forEach((F,_e)=>{E.extractedColumns[`Table${_e+1}`]=E.extractHeadersFromTabulatorSchedule(_e)}),console.log("this.extractedColumns :>> ",E.extractedColumns),E.summarizeTables(E.extractedColumns,2)})()}summarizeTables(E,F){this.summarizedTables=Object.keys(E).map(_e=>{const st={};return E[_e].forEach(Kt=>{Kt.device&&Kt.parameter&&(st[Kt.device]||(st[Kt.device]=[]),st[Kt.device].push(Kt.parameter))}),{tableName:_e,devices:Object.keys(st).map(Kt=>{const fr=st[Kt];return{device:Kt,totalParameters:fr.length,parameters:fr,isExpanded:!1,parametersToShow:fr.slice(0,F)}})}})}toggleExpand(E){E.isExpanded=!E.isExpanded}generateReport(){const E={};this.summarizedTables.forEach(nn=>{nn.devices.forEach(Yr=>{E[Yr.device]||(E[Yr.device]=[]),E[Yr.device]=[...new Set([...E[Yr.device],...Yr.parameters])]})}),console.log("Grouped Parameters by Device:",E),this.summarizedTables.forEach(nn=>{nn.devices.forEach(Yr=>{const io=E[Yr.device]||[];console.log(`Table: ${nn.tableName}, Device: ${Yr.device}`),console.log(`Total Parameters (Grouped): ${io.length}`),console.log(`Parameters (Grouped): ${io}`)})});let F=[],_e=[];Object.keys(E).forEach((nn,Yr)=>{const io=nn;let Go=[],Vn=[];if(io){const yi=E[nn];yi.length>0&&yi.forEach(ai=>{Go.push("P"+(this.globalParameterMappingByDevice[io].findIndex(Ui=>Ui===ai)+1));const Ti=this.AllScheduleList?.[io];if(Array.isArray(Ti)){const Ui=Ti.find(vi=>vi.value===ai);Ui&&"number"==typeof Ui.index&&Vn.push("P"+(Ui.index+1))}}),Go&&(F.push(Go),_e.push(Vn))}}),console.log("value_test",F);const Ge={};Object.keys(E).forEach(nn=>{let Yr=!1;this.All_Devices_Configuration.forEach(io=>{if(nn===io.mn){const Go=io.reading_device_type;Ge[Go]?Ge[Go].count++:Ge[Go]={count:1},Yr=!0}}),Yr||console.warn(`Device ${nn} does not have a corresponding RDT configuration.`)}),console.log("deviceRDTCount :>> ",Ge);const st=[];for(const[nn,{count:Yr}]of Object.entries(Ge)){const io=this.All_RDTs_Configuration.find(Go=>Go.allDetails.reading_device_type_id===nn);if(io)for(let Go=0;Go<Yr;Go++){const Vn={...io};st.push(Vn)}}let Tt=[],Kt=[];console.log("tempRDTConfigurations :>> ",st),Object.keys(E).forEach((nn,Yr)=>{Tt.push(nn),Kt.push(E[nn])});let fr={reportsType:this.reportForm.value.reportsType,device:Tt,paramFilter:Kt,paramFilterDB:"Parameters"===this.reportForm.value.reportsType?F:_e,dateType:this.reportForm.value.dateType,start_time:this.reportForm.value.startDateTime,end_time:this.reportForm.value.endDateTime,start_range:this.reportForm.value.start_range,end_range:this.reportForm.value.end_range,rdt:JSON.stringify(st)};console.log("formData :>> ",fr),"Parameters"===fr.reportsType?this.handleParameterData(fr):"Custom Schedule Hour"===fr.reportsType||"Custom Schedule Day"===fr.reportsType?this.handleCustomOnSpotDayLive(fr):this.handleShedhuleData(fr)}generateDynamicExcel(E,F){const _e=Zt.P6.book_new(),Ge=[],{columns:st,data:Tt}=F,Kt=Tt[0]["Device label"],fr=/\$(SUM|AVG|MAX|MIN|PRODUCT|EXP)\(([^)]+)\)/i,nn=/\$(SUM|AVG|MAX|MIN|PRODUCT|EXP)\$([a-zA-Z0-9_]+(\.[a-zA-Z0-9_]+)*)/i,Yr=/\$Sum\s+of\s+Total\$(\w+(\.\w+)?)/i,Go=E[1].reduce((Ui,vi,Uo)=>(Ui[vi]=String.fromCharCode(65+Uo),Ui),{}),yi=((Ui,vi)=>{const Uo={};return Object.keys(Ui).forEach(go=>{let pi;pi=go.startsWith(`$Device$${vi}`)?"Device label":go.startsWith(`$Date$${vi}`)?"Date & time":go.startsWith(`$${vi}`)?go.split(".")[1]:go,Uo[pi]=Ui[go]}),Uo})(Go,Kt);console.log("columnLetterMap :>> ",Go),E.forEach((Ui,vi)=>{const Uo=[];Ui.forEach((go,pi)=>{if("string"==typeof go)if(go.startsWith(`$Device$${Kt}`))Uo.push("Device label");else if(go.startsWith(`$Date$${Kt}`))Uo.push("Date & time");else if(go.startsWith(`$${Kt}`)){const Co=go.replace(new RegExp(`\\$${Kt}\\.(\\w+)`),"$1");st.includes(Co)?Uo.push(Co):Uo.push("INVALID_COLUMN")}else if(nn.test(go)){const Co=go.match(nn);if(Co){let hi=Co[1];"AVG"===hi&&(hi="AVERAGE");const Gi=Co[2].split(".")[1],Va=yi[Gi];Uo.push(Va?{f:`=${hi}(${Va}2:${Va}${Tt.length+1})`}:"")}}else if(fr.test(go)){const Co=go.match(fr);if(Co){let hi=Co[1];"AVG"===hi&&(hi="AVERAGE");const Gi=Co[2].split(",").map(Va=>{const qi=Va.trim().split(".")[1],xa=yi[qi];return xa?`${xa}2:${xa}${Tt.length+1}`:""}).filter(Boolean).join(",");Uo.push(Gi?{f:`=${hi}(${Gi})`}:"")}}else if(Yr.test(go)){const Co=go.match(Yr);if(Co){const hi=Co[1].split(".")[1],Gi=yi[hi];Uo.push(Gi?{f:`=SUM(${Gi}2:${Gi}${Tt.length+1})`}:"")}}else Uo.push(go);else Uo.push(go)}),Ge.push(Uo),1===vi&&Tt.forEach(go=>{const pi=[];Ui.forEach(Co=>{if(Co.startsWith(`$Device$${Kt}`))pi.push(go["Device label"]||"");else if(Co.startsWith(`$Date$${Kt}`))pi.push(go["Date & time"]||"");else{const hi=Co.startsWith("$")?Co.replace(new RegExp(`\\$${Kt}\\.(\\w+)`),"$1"):Co;st.includes(hi)?pi.push(go[hi]||""):pi.push("INVALID_COLUMN"===Co?"INVALID_COLUMN":"")}}),Ge.push(pi)})});const ai=Zt.P6.aoa_to_sheet(Ge);Zt.P6.book_append_sheet(_e,ai,"Dynamic Report");const Ti="dynamic_report_fixed.xlsx";Zt.NC(_e,Ti),console.log(`File written: ${Ti}`)}generateDynamicExcelForMultipleDevices(E,F){const _e=Zt.P6.book_new(),Ge=[];let st=!1,Tt="";const Kt=Object.keys(F);let fr={},nn=[],Yr=[],io=2,Go=0,Vn=!1;if(E.forEach((ai,Ti)=>{const Ui=ai[0]?.trim();if(Ui?.startsWith("#TABLESTART")){st=!0,Tt="",fr={},nn=[],Yr=[],Vn=!1;for(let vi=Ti+1;vi<E.length;vi++){const go=E[vi][0]?.trim();if(go?.startsWith("$Device$")&&(Tt=Kt.find(pi=>go.includes(pi))||"",Tt)){const{data:Co}=F[Tt];nn=E[Ti+1].map(Gi=>Gi.startsWith("(")&&Gi.includes("+")?Gi.trim():Gi.startsWith(`$${Tt}.`)?Gi.split(".")[1]:Gi),Yr=Co,fr=nn.reduce((Gi,Va,qi)=>(Gi[`$${Tt}.${Va}`]=String.fromCharCode(65+qi),Gi),{});break}}console.log("currentColumnLetterMap :>> ",fr),Tt||(console.warn(`Warning: No matching device label found for "${Ui}". Skipping table.`),st=!1)}else if(Ui?.startsWith("#TABLEEND"))st=!1,Vn=!1;else if(st&&Tt)if(Vn){const vi=ai.map(Uo=>{if("string"==typeof Uo){if(Uo.startsWith("$SUM(")){const go=Uo.match(/\$SUM\((.*?)\)/);if(go)return{f:`=SUM(${go[1].split(",").map(Co=>{const hi=Co.trim().split(".")[1],Gi=fr[`$${Tt}.${hi}`];return Gi?`${Gi}${io-Yr.length}:${Gi}${io-1}`:""}).join(",")})`}}if(Uo.startsWith("$SUM$")){const go=Uo.split("$"),pi=go[1],Co=go[2].split(".")[1],hi=fr[`$${Tt}.${Co}`];if(hi)return{f:`=${pi}(${hi}${io-Yr.length}:${hi}${io-1})`}}if(Uo.startsWith("$AVG$")){const go=Uo.split("$")[2].split(".")[1],pi=fr[`$${Tt}.${go}`];if(pi)return{f:`=AVERAGE(${pi}${io-Yr.length}:${pi}${io-1})`}}if(Uo.startsWith("$EXP(")){const go=Uo.match(/\$EXP\((.*?)\)/);if(go){const pi=go[1].split("+").map(Co=>{const Gi=Co.trim().split(".")[1],Va=fr[`$${Tt}.${Gi}`];return Va?`${Va}${io-Yr.length}:${Va}${io-1}`:""}).filter(Boolean).join(",");if(pi)return{f:`=EXP(SUM(${pi}))`}}}return Uo}return Uo});Ge.push(vi),Go++}else{const vi=ai.map(Uo=>Uo.startsWith(`$Device$${Tt}`)?"Device label":Uo.startsWith(`$Date$${Tt}`)?"Date & time":Uo.startsWith(`$${Tt}`)?Uo.replace(new RegExp(`\\$${Tt}\\.(\\w+)`),"$1"):Uo);console.log("processedHeaders :>> ",vi),Ge.push(vi),Vn=!0,Go++,Yr.forEach((Uo,go)=>{const pi=nn.map((Co,hi)=>{if(Co===`$Device$${Tt}`)return Tt;if(Co===`$Date$${Tt}`)return Uo["Date & time"]||"";if(Co.startsWith("(")&&Co.includes("+")){const Gi=Co.match(/\((.*?)\)/);if(Gi){const qi=Gi[1].split("+").map(xa=>xa.trim()).map(xa=>{const Da=xa.split(".")[1];return fr[`$${Tt}.${Da}`]});if(qi.every(Boolean))return{f:`=${qi.map(Da=>`${Da}${Go+1}`).join("+")}`}}}return Uo[Co]||0});Ge.push(pi),Go++}),io=Go+1}}),Ge.length>0){const ai=Zt.P6.aoa_to_sheet(Ge);Zt.P6.book_append_sheet(_e,ai,"Dynamic Report")}else console.error("Error: No valid data to add to the worksheet.");const yi="dynamic_report_multiple_devices_fixed.xlsx";Zt.NC(_e,yi),console.log(`File written: ${yi}`)}parseExcelFileforExtractProcess(E,F){var _e=this;return(0,an.Z)(function*(){try{const Ge=yield E.arrayBuffer(),st=Zt.ij(Ge,{type:"array"});_e.processSheetDataProcess(st.Sheets[st.SheetNames[0]],F)}catch(Ge){console.error("Error reading file:",Ge)}})()}processSheetDataProcess(E,F){const _e=Zt.P6.sheet_to_json(E,{header:1});this.generateDynamicExcel(_e,F)}parseExcelFileforExtractProcessMulti(E,F){var _e=this;return(0,an.Z)(function*(){try{const Ge=yield E.arrayBuffer(),st=Zt.ij(Ge,{type:"array"});_e.processSheetDataProcessMulti(st.Sheets[st.SheetNames[0]],F)}catch(Ge){_e.spinner.hide(),console.error("Error reading file:",Ge)}})()}processSheetDataProcessMulti(E,F){const _e=Zt.P6.sheet_to_json(E,{header:1}),st=this.parseData(_e,E["!merges"]||[]),Tt={},Kt={};st.forEach((Yr,io)=>{Yr.groupHeaders&&(Tt[io]=Yr.groupHeaders.length),Yr.merges&&(Kt[io]=Yr.merges,delete Yr.merges)}),console.log("Sheet Data:>>",_e),console.log("fetchedData>>",F);const fr={sheetData:_e,fetchedData:F,mergeInfo:Tt,mergeRanges:Kt,conditionalFormatting:this.formatRulesForLambda(),chartConfig:{charts:this.chartConfigs}};console.log("requestBody :>> ",fr),this.excelService.generateReport("k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH",fr).subscribe(Yr=>{this.spinner.hide();const io=Yr.body;if(io)try{const Go=atob(io),Vn=[];for(let Ui=0;Ui<Go.length;Ui+=1024){const vi=Go.slice(Ui,Ui+1024),Uo=new Array(vi.length);for(let go=0;go<vi.length;go++)Uo[go]=vi.charCodeAt(go);Vn.push(new Uint8Array(Uo))}const yi=new Blob(Vn,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ai=new File([yi],"dynamic_report.xlsx",{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Ti=document.createElement("a");Ti.href=URL.createObjectURL(ai),Ti.download="dynamic_report.xlsx",Ti.click()}catch(Go){console.error("Error processing the Base64 file:",Go)}},Yr=>{this.spinner.hide(),console.error("Error generating report:",Yr)})}exportToExcel(){const E=Zt.P6.book_new(),F=[],_e=[];this.tabulatorInstances.forEach((st,Tt)=>{const Kt=st.getData(),fr=st.getColumnDefinitions(),nn=fr.some(yi=>yi.columns);F.push([nn?`#TABLESTART_GROUPED${Tt+1}`:`#TABLESTART${Tt+1}`]);const io=[],Go=[],Vn=(yi,ai)=>{io[ai]||(io[ai]=[]),yi.forEach(Ti=>{if(Ti.columns){const Ui=Go.length;Vn(Ti.columns,ai+1);const vi=Go.length-1;for(let Uo=Ui;Uo<=vi;Uo++)io[ai][Uo]=Ti.title||"";_e.push({s:{r:F.length+ai,c:Ui},e:{r:F.length+ai,c:vi}})}else{Go.push(Ti.title||""),io[ai][Go.length-1]=Ti.title||"";for(let Ui=0;Ui<ai;Ui++)io[Ui]||(io[Ui]=[]),io[Ui][Go.length-1]=io[Ui][Go.length-1]||""}})};if(nn)Vn(fr,0),io.forEach(yi=>{for(let ai=0;ai<Go.length;ai++)yi[ai]=yi[ai]||"";F.push(yi)});else{const yi=fr.map(ai=>ai.title||"");Go.push(...yi),F.push(yi)}Kt.forEach(yi=>{const ai=Go.map((Ti,Ui)=>yi[`field${Ui}`]??"");F.push(ai)}),F.push([`#TABLEEND${Tt+1}`]),F.push([])});const Ge=Zt.P6.aoa_to_sheet(F);Ge["!merges"]=_e,Zt.P6.book_append_sheet(E,Ge,"Model_Data"),Zt.NC(E,"Model.xlsx")}updateDropzoneWithNewFile(E){this.dropzoneInstance$.subscribe(F=>{F&&(F.removeAllFiles(),F.addFile(E))}),this.uploadedFile$.next(E)}exportToExcelAndUpdateDropzone(){const E=Zt.P6.book_new(),F=this.uploadedFile$.value,_e=[],Ge=[];this.tabulatorInstances.forEach((Yr,io)=>{const Go=Yr.getData(),Vn=Yr.getColumnDefinitions(),yi=Vn.some(Uo=>Uo.columns);_e.push([yi?`#TABLESTART_GROUPED${io+1}`:`#TABLESTART${io+1}`]);const Ti=[],Ui=[],vi=(Uo,go)=>{Ti[go]||(Ti[go]=[]),Uo.forEach(pi=>{if(pi.columns){const Co=Ui.length;vi(pi.columns,go+1);const hi=Ui.length-1;for(let Gi=Co;Gi<=hi;Gi++)Ti[go][Gi]=pi.title||"";Ge.push({s:{r:_e.length+go,c:Co},e:{r:_e.length+go,c:hi}})}else{Ui.push(pi.title||""),Ti[go][Ui.length-1]=pi.title||"";for(let Co=0;Co<go;Co++)Ti[Co]||(Ti[Co]=[]),Ti[Co][Ui.length-1]=Ti[Co][Ui.length-1]||""}})};if(yi)vi(Vn,0),Ti.forEach((Uo,go)=>{for(let pi=0;pi<Ui.length;pi++)Uo[pi]=Uo[pi]||"";_e.push(Uo)});else{const Uo=Vn.map(go=>go.title||"");Ui.push(...Uo),_e.push(Uo)}Go.forEach(Uo=>{const go=Ui.map((pi,Co)=>Uo[`field${Co}`]??"");_e.push(go)}),_e.push([`#TABLEEND${io+1}`]),_e.push([])});const st=Zt.P6.aoa_to_sheet(_e);st["!merges"]=Ge,Zt.P6.book_append_sheet(E,st,"Tabulator_Data");const Tt=Zt.cW(E,{bookType:"xlsx",type:"array"}),Kt=new Blob([Tt],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),nn=new File([Kt],`${F.name||"debug-export.xlsx"}`,{type:Kt.type});this.updateDropzoneWithNewFile(nn),this.updateDynamicReport()}simulateDBFetch(E){const F=this.uploadedFile$.value;if(E)try{const _e=atob(E),Ge=[];for(let Kt=0;Kt<_e.length;Kt+=1024){const fr=_e.slice(Kt,Kt+1024),nn=new Array(fr.length);for(let Yr=0;Yr<fr.length;Yr++)nn[Yr]=fr.charCodeAt(Yr);Ge.push(new Uint8Array(nn))}const st=new Blob(Ge,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),Tt=new File([st],`${F.name}`,{type:st.type});this.updateDropzoneWithNewFile(Tt),this.uploadedFile$.subscribe(Kt=>{Kt&&(this.tabulatorInstances=[],this.parseExcelFile(Kt),this.parseExcelFileforExtract(Kt))})}catch(_e){console.error("Error decoding Base64 file:",_e)}}updateHeaderSyntax(){const E=this.columnForm.get("device_tab1")?.value,F=this.columnForm.get("parameters_tab1")?.value;this.headerSyntax=E&&F?`$${E}.${F}`:"",this.cdr.detectChanges()}copyHeaderToClipboard(){this.headerSyntax?navigator.clipboard.writeText(this.headerSyntax).then(()=>{this.showCopySuccessMessage()}).catch(E=>{console.error("Failed to copy:",E)}):alert("Please select both Device and Parameter before copying!")}showCopySuccessMessage(){this.snackBar.open("Header Copied to Clipboard!","OK",{duration:2e3,panelClass:["snackbar-success"]})}updateDerivedHeader(){const E=this.columnForm.get("device_tab2")?.value,F=this.columnForm.get("parameters_tab2")?.value,_e=this.columnForm.get("operator_tab2")?.value||"+";if(E&&F?.length){const Ge=F.map(st=>`$${E}.${st.text}`).join(` ${_e} `);this.derivedHeaderSyntax=`(${Ge})`}else this.derivedHeaderSyntax=""}copyDerivedHeader(){this.derivedHeaderSyntax?navigator.clipboard.writeText(this.derivedHeaderSyntax).then(()=>{this.showCopySuccessMessage()}).catch(E=>{console.error("Failed to copy:",E)}):alert("Please select Device, Parameters, and Operator before copying!")}generateSingleColumnExpression(){const E=this.colCalForm.get("device_tab1")?.value,F=this.colCalForm.get("parameters_tab1")?.value,_e=this.colCalForm.get("calculationType_tab1")?.value;this.headerExpression=E&&F&&_e?`$${_e}$${E}.${F}`:""}generateMultiColumnExpression(){const E=this.colCalForm.get("device_tab2")?.value,F=this.colCalForm.get("parameters_tab2")?.value,_e=this.colCalForm.get("calculationType_tab2")?.value;if(E&&F?.length&&_e){const Ge=F.map(st=>`${E}.${st.text}`).join(" , ");this.multiColumnExpression=`$${_e}(${Ge})`}else this.multiColumnExpression=""}copySingleColumnExpression(){this.headerExpression&&navigator.clipboard.writeText(this.headerExpression)}copyMultiColumnExpression(){this.multiColumnExpression&&navigator.clipboard.writeText(this.multiColumnExpression)}get rules(){return this.condFormatForm.get("rules")}addRule(){const E=this.fb.group({device:[""],column:[""],operator:[">"],value:[""],valueFrom:[""],valueTo:[""],color:["#00FF00"]});this.rules.push(E)}removeRule(E){this.rules.removeAt(E)}loadExistingRules(E){"string"==typeof E&&(E=JSON.parse(E)),E&&E.rules&&E.rules.length>0?E.rules.forEach(F=>{this.rules.push(this.fb.group({device:[F.device],column:[F.column],operator:[F.operator],value:["between"===F.operator?"":F.value??""],valueFrom:[F.valueFrom],valueTo:[F.valueTo],color:[F.color]}))}):(console.warn("\u26a0\ufe0f No existing rules found. Initializing with an empty form."),this.addRule())}getConditionalKeys(){return Object.keys(this.conditionalFormatting||{})}formatRulesForLambda(){const E={};return this.rules.value.forEach(F=>{const _e=F.device,Ge=F.column;if(!_e||!Ge)return;E[_e]||(E[_e]={}),E[_e][Ge]||(E[_e][Ge]=[]);let st="between"===F.operator?[Number(F.valueFrom),Number(F.valueTo)]:Number(F.value);E[_e][Ge].push({operator:F.operator,value:st,color:F.color.replace("#","")})}),E}updateDynamicReport(){if(this.excelService.uploadedFile$.next(this.uploadedFile$.value),!this.allPacketDetailsForUpdate||!this.allPacketDetailsForUpdate.PK||!this.SK_clientID)return console.error("\u274c Error: PK or SK is missing. Update cannot proceed."),void this.toast.open("Error: Missing required identifiers (PK or SK)","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"});const E=String(this.allPacketDetailsForUpdate.PK).trim(),F=String(this.SK_clientID).trim();if(!E||!F)return void console.error("\u274c Error: PK or SK is empty after conversion.");let _e="[]",Ge="{}";try{_e="string"==typeof this.allPacketDetailsForUpdate.devices?this.allPacketDetailsForUpdate.devices:JSON.stringify(this.allPacketDetailsForUpdate.devices||[]),Ge="string"==typeof this.condFormatForm.value?this.condFormatForm.value:JSON.stringify(JSON.stringify(this.condFormatForm.value)||{})}catch(fr){console.error("\u274c Error converting JSON fields:",fr)}let st="[]";try{Array.isArray(this.formulas)||"object"==typeof this.formulas?st=JSON.stringify(this.formulas):"string"==typeof this.formulas?st=this.formulas:console.warn("Formulas is not in a valid format"),st=JSON.stringify(st)}catch(fr){console.error("\u274c Error parsing formulas:",fr)}let Tt="[]";try{Array.isArray(this.chartConfigs)||"object"==typeof this.chartConfigs?Tt=JSON.stringify(this.chartConfigs):"string"==typeof this.chartConfigs?Tt=this.chartConfigs:console.warn("Formulas is not in a valid format"),Tt=JSON.stringify(Tt)}catch(fr){console.error("\u274c Error parsing formulas:",fr)}const Kt={PK:E,SK:F,file_name:this.allPacketDetailsForUpdate.file_name||"unknown",file_location_path_URl:this.uploadedFile$.value?.name||this.allPacketDetailsForUpdate.file_location_path_URl||"unknown",devices:_e,filters:Ge,Values:Tt,formulas:st};console.log("\u{1f680} Sending payload:",Kt),this.api.UpdateDynamicReports(Kt).then(fr=>{console.log("\u2705 API Response:",fr),fr&&(this.excelService.updateFile(Kt),this.toast.open("\u2705 Updated Dynamic Reports successfully","",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"}))}).catch(fr=>{console.error("\u274c Error in update:",fr),this.toast.open("\u274c Error in Updating Configuration","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}openModal(){this.selectedFormula=null,this.templateRef=this.customModal.open(this.formulaModalTemplate,{},{hasBackdropClick:!0})}openModalEdit(E){this.selectedFormula=JSON.parse(JSON.stringify(E)),this.templateRef=this.customModal.open(this.formulaModalTemplate,{},{hasBackdropClick:!0})}onSubmitFormula(E){if(console.log("Received Formula Data:",E),this.selectedFormula){const F=this.formulas.findIndex(_e=>_e.formulaId===E.formulaId);-1!==F&&(this.formulas[F]=E)}else this.formulas.push(E);this.updateDynamicReport()}deleteFormula(E){this.formulas=this.formulas.filter(F=>F.formulaId!==E)}onUpdateFormula(E){console.log("Updated Formula Data:",E);const F=this.formulas.findIndex(_e=>_e.formulaId===E.formulaId);-1!==F&&(this.formulas[F]=E),this.updateDynamicReport()}closeTemplateModal(E){this.templateRef.close()}openChartConfigModal(E=null,F){this.selectedChartConfig=E,this.optionsForChart=[],this.parsedTables.forEach((_e,Ge)=>{this.optionsForChart.push({text:`Table ${Ge+1}`,value:Ge+1})}),this.modalService.open(F,{ariaLabelledBy:"modal-basic-title"})}saveChartConfig(E){if(null===this.selectedChartConfig)this.chartConfigs.push(E);else{const F=this.chartConfigs.findIndex(_e=>_e.id===E.id);-1!==F&&(this.chartConfigs[F]={...E})}this.updateDynamicReport()}deleteChartConfig(E){confirm("Are you sure you want to delete this chart configuration?")&&(this.chartConfigs=this.chartConfigs.filter(F=>F.id!==E))}handleCustomOnSpotDayLive(E){this.spinner.show(),this.tableData=[];let F=E.paramFilter;console.log("Time Machine Data",E);let _e=JSON.parse(E.rdt);_e=_e[0].parameters,console.log("Parameters",_e);let Ge=JSON.parse(E.rdt);console.log("Before mulActualData",Ge);let Tt=[];for(let Kt=0;Kt<Ge.length;Kt++)Tt.push(Ge[Kt].parameters);console.log("Extracted Parameters",Tt),console.log(" After mulActualData",Ge),this.reportApi.getReportsData(E).then(Kt=>{if(1===Kt.length){if(1===Kt.length&&null===Kt[0])return this.spinner.hide(),Pr().fire({icon:"warning",title:"Warning: No Data",text:`${E.device[0]} does not have any data.`,confirmButtonText:"Understood"}),void this.cdr.detectChanges();for(let go=0;go<Kt.length;go++)null===Kt[go]?(this.cdr.detectChanges(),Pr().fire({icon:"warning",title:"Warning: No Data",text:` ${E.device[go]} does not have any data.`,confirmButtonText:"Understood"})):(console.log("filteredData after removeed",F),console.log("continue the process"));const fr=Kt?.[0]?.data||[];console.log("historicalData",fr);const nn=Array.from(new Set(Object.values(fr).flatMap(go=>Object.keys(go.MM))));console.log("Property Names:",nn);const Yr={};Object.entries(fr).forEach(([go,pi])=>{const Co=new Date(go).getTime();console.log(`Processing packet for date ${go} with timestamp ${Co}:`,pi.MM),nn.forEach(hi=>{Yr[hi]||(Yr[hi]=[]);const Gi=pi.MM[hi];console.log(`Adding data point for ${hi}:`,{x:Co,y:Gi}),Yr[hi].push([Co,Gi])})}),console.log("Grouped Data:",Yr);const io=Object.entries(Yr).map(([go,pi])=>{const Co=parseInt(go.slice(1))-1,hi=_e[Co];return{name:hi?hi.schedule_parameter_label:go,data:pi.filter(qi=>"string"!=typeof qi[1])}});console.log("Formatted Highcharts Series:",io);const Go=io.filter(go=>{const pi=go.name;return F.some(Co=>Co.includes(pi))});console.log("highchartsSeries paramFilter",Go);const Vn=nn.map(go=>{const pi=parseInt(go.slice(1))-1;return _e[pi]&&void 0!==_e[pi].schedule_parameter_label?_e[pi].schedule_parameter_label:go});nn.unshift("Device label","Date & time","Calculated Time"),Vn.unshift("Device label","Date & time","Calculated Time"),console.log("TABLE NAMES",Vn);const yi={columns:Vn,data:Object.entries(fr).map(([go,pi])=>{const Co={};return nn.forEach(hi=>{if("Device label"!==hi&&"Date & time"!==hi&&"Calculated Time"!==hi){const Gi=parseInt(hi.slice(1))-1;_e[Gi]&&void 0!==_e[Gi].schedule_parameter_label?Co[_e[Gi].schedule_parameter_label]=pi.MM[hi]??" ":Co[hi]=pi.MM[hi]??" "}else"Device label"===hi?Co["Device label"]=pi.MN:"Date & time"===hi?Co["Date & time"]=pi.DT:"Calculated Time"===hi?Co["Calculated Time"]=pi.time_calculated:console.log("Invialid column")}),Co})};console.log("Angular DataTable Format:",yi);const ai=yi.data[0]["Device label"];let Ti={};const Ui=this.All_Devices_Configuration.find(go=>go.mn===ai);Ti[ai]=yi,Ti[ai].label=Ui.mn_label;const vi=this.uploadedFile$.value;vi&&this.parseExcelFileforExtractProcessMulti(vi,Ti);const Uo=yi.columns.filter(go=>{const pi=go;return F.some(Co=>Co.includes(pi))});Uo.unshift("Device label","Date & time","Calculated Time"),yi.columns=Uo,this.tableData.push(yi)}else if(Kt.length>1){let fr=[];for(let vi=0;vi<Kt.length;vi++)null!==Kt[vi]?this.cdr.detectChanges():(null===Kt[vi]&&(fr.push(E.device[vi]),Pr().fire({icon:"warning",title:"Warning: No Data",text:` ${fr.join(", ")} does not have any data.`,confirmButtonText:"Understood"})),console.log("filteredData after removeed",F));const nn=Kt.reduce((vi,Uo)=>vi.concat(Uo?.data||[]),[]);console.log("allhistoricalData",nn);const Yr={};nn.forEach(vi=>{Object.entries(vi).forEach(([Uo,go])=>{if(go&&go.MM&&go.MN){const pi=go.MN,Co=Object.keys(go.MM);Yr[pi]||(Yr[pi]=new Set),Co.forEach(hi=>{Yr[pi].add(hi)})}else console.warn(`Skipping invalid packet for date ${Uo}:`,go)})}),console.log("propertyNamesByDevice",Yr);const io={};Object.keys(Yr).sort((vi,Uo)=>Yr[Uo].size-Yr[vi].size).forEach(vi=>{const Uo=Yr[vi];io[vi]={},Uo.forEach(go=>{io[vi][go]=[],nn.forEach(pi=>{Object.values(pi).forEach(Co=>{const hi=Co.DT,Gi=Co.MM?.[go];"number"==typeof Gi&&Co.MN===vi&&io[vi][go].push({x:hi,y:Gi})})})})}),console.log("Matched Data By Device:",io);const Vn=Object.entries(io).map(([vi,Uo],go)=>Object.entries(Uo).map(([Co,hi])=>{const Gi=parseInt(Co.slice(1))-1,Va=Tt[go][Gi],qi=Va?Va.schedule_parameter_label:Co,xa=hi.filter(Da=>"string"!=typeof Da.y);return{name:`${vi} : ${qi}`,data:xa.map(Da=>[Da.x,Da.y])}})).flat();console.log("all Formatted Highcharts Series:",Vn),Vn.filter(vi=>{const Uo=vi.name.split(":")[1].trim();return F.some(go=>go.includes(Uo))});const ai={},Ti=Object.keys(Yr).sort((vi,Uo)=>Yr[Uo].size-Yr[vi].size);console.log("PROPERTY NAME DEVICE:",Yr),console.log("SD",Ti),Object.keys(Yr).forEach((vi,Uo)=>{const go=Array.from(Yr[vi]),pi=go.map(Va=>{const qi=parseInt(Va.slice(1))-1;return Tt[Uo][qi]&&void 0!==Tt[Uo][qi].schedule_parameter_label?Tt[Uo][qi].schedule_parameter_label:Va});console.log("Check Props",go),console.log("Check Result"),pi.unshift("Device label","Date & time","Calculated Time"),go.unshift("Device label","Date & time","Calculated Time");const Co={columns:pi,data:nn.flatMap(Va=>Object.values(Va).map(qi=>{if(qi&&vi===qi.MN){const xa={};return go.forEach(Da=>{if("Device label"!==Da&&"Date & time"!==Da&&"Calculated Time"!==Da&&"Time Generated"!==Da){const hs=parseInt(Da.slice(1))-1;Tt[Uo]?.[hs]&&void 0!==Tt[Uo][hs].schedule_parameter_label?xa[Tt[Uo][hs].schedule_parameter_label]=qi.MM?.[Da]??" ":xa[Da]=qi.MM?.[Da]??" "}else"Device label"===Da?xa["Device label"]=qi.MN:"Date & time"===Da?xa["Date & time"]=qi.DT:"Calculated Time"===Da?xa["Calculated Time"]=qi.time_calculated:console.log("Invalid column:",Da)}),xa}return null})).filter(Va=>null!==Va)},hi=this.All_Devices_Configuration.find(Va=>Va.mn===vi);ai[vi]=Co,ai[vi].label=hi.mn_label,console.log("Data Tables:",ai);const Gi=ai[vi].columns.filter(Va=>{const qi=Va;return console.log("corfirming Index",Uo),F[Uo].some(xa=>xa.includes(qi))});Gi.unshift("Device label","Date & time","Calculated Time"),ai[vi].columns=Gi,this.tableData.push(ai[vi]),console.log("structure check",this.tableData)});const Ui=this.uploadedFile$.value;Ui&&this.parseExcelFileforExtractProcessMulti(Ui,ai),console.log("Data Tables:",ai)}else this.cdr.detectChanges();this.spinner.hide()}).catch(Kt=>{this.spinner.hide(),Pr().fire({icon:"error",title:"Warning: No Data",text:"Something went wrong ",confirmButtonText:"Understood"}),console.error("Error:",Kt)})}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(ln.FF),l.Y36(m.eN),l.Y36(Sd.H),l.Y36(mo.F0),l.Y36(x.ux),l.Y36(x.ux),l.Y36(ze.F),l.Y36(mo.gz),l.Y36(Qr.t),l.Y36(Xe.x),l.Y36(G.t2),l.Y36(Br),l.Y36(X.qu),l.Y36(l.sBO))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dynamic-report-work-lab"]],viewQuery:function(E,F){if(1&E&&(l.Gf(Dm,5),l.Gf(Td.PQ,5),l.Gf(tu,5)),2&E){let _e;l.iGM(_e=l.CRH())&&(F.formulaModalTemplate=_e.first),l.iGM(_e=l.CRH())&&(F.cdkScrollable=_e.first),l.iGM(_e=l.CRH())&&(F.dyanmicFormulaBuilderComponent=_e.first)}},inputs:{updateParentModel:"updateParentModel",defaultValues:"defaultValues"},decls:300,vars:84,consts:[[1,"d-flex","flex-column","flex-root"],[1,"d-flex","flex-row","flex-column-fluid","page"],["id","kt_aside",1,"aside","aside-left","aside-fixed"],["id","kt_wrapper",1,"d-flex","flex-column","flex-row-fluid","wrapper"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[1,"d-flex","flex-column-fluid"],["id","kt_app_toolbar",1,"fixed-toolbar","py-1","py-lg-2"],["id","kt_app_toolbar_container",1,"container-fluid","d-flex","align-items-center","justify-content-between","flex-wrap"],[1,"d-flex","align-items-center","flex-wrap","gap-3"],["role","tablist",1,"nav","nav-pills","nav-pills-custom","d-flex","align-items-center","gap-2"],["class","nav-item","role","presentation",4,"ngFor","ngForOf"],["role","presentation",1,"nav-item"],["id","export-excel-tab","aria-selected","false",1,"nav-link","btn","btn-outline","btn-sm","btn-flex","btn-color-muted","btn-active-color-primary","flex-column","w-65px","h-50px","p-2","text-center",3,"click"],[1,"fas","fa-file-download","fs-5","p-1"],[1,"nav-text","text-gray-800","fw-bold","lh-1"],["class","nav-link btn btn-outline btn-sm btn-flex btn-color-muted btn-active-color-primary flex-column w-65px h-50px p-2 text-center","id","export-excel-tab","aria-selected","false",3,"click",4,"ngIf"],["id","toggle-mode-tab","role","tab","aria-selected","false","data-bs-toggle","tooltip",1,"nav-link","btn","btn-outline","btn-sm","btn-flex","btn-color-muted","flex-column","w-130px","h-50px","p-2","text-center",3,"ngClass","click"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],[1,"fas","fs-5",3,"ngClass"],[1,"fw-bold","text-gray-800"],[1,"text-gray-600"],[1,"bullet-custom","position-absolute","bottom-0","w-100","h-4px","bg-primary"],[1,"d-flex","align-items-center","gap-3","flex-wrap"],[1,"d-flex","align-items-center",3,"formGroup"],[1,"form-group","d-flex","align-items-center"],[1,"col-form-label","fw-bold","me-2"],["formControlName","reportsType",1,"form-select","form-select-sm","form-select-solid","w-auto"],["disabled","",3,"value","selected"],[3,"value",4,"ngFor","ngForOf"],[1,"form-check","form-switch","form-check-custom","form-check-solid"],["type","checkbox",1,"form-check-input",3,"checked","change"],[1,"form-check-label"],[1,"d-flex","align-items-center","gap-2"],["type","button",1,"btn","btn-sm","btn-flex","btn-secondary","fw-bold",3,"click"],[1,"bi","bi-house-door","fs-5","me-1"],[1,"container-xl","content-with-fixed-toolbar"],[1,"card",2,"width","100%","height","100vh","background-color","var(--bs-app-bg-color) !important"],[1,"card-body","p-0","pb-0",2,"background-color","var(--bs-app-bg-color) !important","padding","0 !important"],[1,"row","g-5","g-xl-10"],["class","col-md-3 col-lg-3 col-xl-3 col-xxl-3 mb-md-5 ",4,"ngIf"],[3,"ngClass","ngStyle"],[1,"col-xl-12","mb-5","mb-xl-10"],[1,"card"],[1,"card-body","p-3"],["id","tableTabs","role","tablist",1,"nav","nav-tabs","justify-content-center","mb-3"],[1,"tab-content"],["class","tab-pane fade","role","tabpanel",3,"show","active","id",4,"ngFor","ngForOf"],[1,"row","g-5","g-xl-10","mb-5","mb-xl-10"],[1,"col-md-3","col-lg-3","col-xl-3","col-xxl-3","mb-md-5","mb-xl-10"],[1,"col-md-9","col-lg-9","col-xl-9","col-xxl-9","mb-md-5","mb-xl-10"],["bdColor","rgba(0, 0, 0, 0.5)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"text-align","center","color","white","font-size","18px","font-weight","bold"],[1,"progress-container"],[1,"progress-bar"],[1,"text-white","text-center"],["previewModal",""],["id","kt_forms","data-kt-drawer","true","data-kt-drawer-activate","true","data-kt-drawer-overlay","false","data-kt-drawer-width","{default:'300px', 'lg': '450px'}","data-kt-drawer-direction","end",1,"bg-body","shadow-sm"],[1,"card","shadow-none","rounded-0","w-100"],["id","kt_forms_header",1,"card-header"],[1,"card-title","fw-bold","text-gray-600"],[1,"card-toolbar"],["type","button","id","kt_forms_close",1,"btn","btn-sm","btn-icon","explore-btn-dismiss","me-n5"],["name","cross",1,"fs-2"],["id","kt_forms_body",1,"card-body"],["id","kt_forms_scroll","data-kt-scroll","true","data-kt-scroll-height","auto","data-kt-scroll-offset","5px",1,"hover-scroll-overlay-y"],["id","kt_stats_widget_16_tab_1","role","tabpanel",1,"tab-pane","fade"],[3,"formGroup"],["id","tableTabs","role","tablist",1,"nav","nav-tabs"],[1,"nav-item"],["id","selected-table-tab","data-bs-toggle","tab","href","#selectedTable","role","tab",1,"nav-link","active"],["id","new-table-tab","data-bs-toggle","tab","href","#newTable","role","tab",1,"nav-link"],["id","tableTabsContent",1,"tab-content","mt-3"],["id","selectedTable","role","tabpanel",1,"tab-pane","fade","show","active","p-3","shadow-sm","rounded"],["formArrayName","devices"],["class","row mb-4 p-3 border rounded  shadow-sm",3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mt-4"],[1,"col-md-12","mx-auto"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"bi","bi-table"],["id","newTable","role","tabpanel",1,"tab-pane","fade"],[1,"row"],[1,"col-md-12"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","required"],["type","text","placeholder","Enter No.of Columns","name","noOfCols","formControlName","noOfCols",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],["type","text","placeholder","Enter No.of Rows","name","noOfRows","formControlName","noOfRows",1,"form-control","form-control-lg","form-control-solid","mb-3","mb-lg-0"],[1,"col-md-12","d-flex","align-items-end"],[1,"btn","btn-info","btn-sm","me-2",3,"click"],[1,"fas","fa-table"],["id","kt_stats_widget_16_tab_2","role","tabpanel",1,"tab-pane","fade"],["id","headerTabs","role","tablist",1,"nav","nav-tabs"],["id","header-builder-tab","data-bs-toggle","tab","href","#headerBuilder","role","tab",1,"nav-link","active"],["id","derive-column-tab","data-bs-toggle","tab","href","#deriveColumn","role","tab",1,"nav-link"],["id","headerTabsContent",1,"tab-content","mt-3"],["id","headerBuilder","role","tabpanel",1,"tab-pane","fade","show","active"],[1,"col-lg-12","col-form-label","fw-bold","fs-6"],["formControlName","device_tab1","optionValueField","PK","optionTextField","name","placeholder","Select Device",3,"allowClear","items","selectionChanges"],["formControlName","parameters_tab1","optionValueField","text","optionTextField","text","placeholder","Select Parameter",3,"allowClear","items","select"],[1,"col-md-12","d-flex","flex-column","align-items-start"],[1,"input-group"],["type","text","readonly","",1,"form-control",3,"value"],["type","button",1,"btn","btn-success",3,"click"],["id","deriveColumn","role","tabpanel",1,"tab-pane","fade"],["formControlName","device_tab2","optionValueField","PK","optionTextField","name","placeholder","Select Device",3,"allowClear","items","selectionChanges"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","fw-bold"],[1,"col-lg-12"],[1,"custom-multiselect"],[1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl","onSelect","onDeSelect"],["formControlName","operator_tab2",1,"form-select",3,"change"],["value","+"],["value","-"],["value","*"],["value","/"],["id","kt_stats_widget_16_tab_3","role","tabpanel",1,"tab-pane","fade"],["id","colCalTabs","role","tablist",1,"nav","nav-tabs"],["id","header-builder-tab","data-bs-toggle","tab","href","#singleCol","role","tab",1,"nav-link","active"],["id","derive-column-tab","data-bs-toggle","tab","href","#doubleCol","role","tab",1,"nav-link"],["id","colCalTabsContent",1,"tab-content","mt-3"],["id","singleCol","role","tabpanel",1,"tab-pane","fade","show","active"],["formControlName","parameters_tab1","optionValueField","text","optionTextField","text","placeholder","Select Parameter",3,"allowClear","items","selectionChanges"],["formControlName","calculationType_tab1",1,"form-select",3,"change"],["value","SUM"],["value","AVG"],["value","MIN"],["value","MAX"],["id","doubleCol","role","tabpanel",1,"tab-pane","fade"],["formControlName","calculationType_tab2",1,"form-select",3,"change"],["id","kt_stats_widget_16_tab_4","role","tabpanel",1,"tab-pane","fade"],["formArrayName","rules"],["class","row g-3 align-items-end border-bottom pb-3 mb-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button","class","btn btn-primary w-100",3,"click",4,"ngIf"],["id","kt_stats_widget_16_tab_5","role","tabpanel",1,"tab-pane","fade"],[1,"container","mt-4"],[1,"mb-4","text-center","text-primary"],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],[1,"thead-dark"],[4,"ngFor","ngForOf"],[1,"text-center","mt-4"],[1,"btn","btn-primary","btn-lg",3,"click"],[1,"fas","fa-plus"],["id","kt_stats_widget_16_tab_6","role","tabpanel",1,"tab-pane","fade"],[1,"card","card-custom"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"btn","btn-success","mb-3",3,"click"],[1,"table","table-bordered"],["chartModal",""],["ReportsModal",""],["cdkPortal",""],["formulaModal","cdkPortal"],["aria-selected","false",1,"nav-link","btn","btn-outline","btn-sm","btn-flex","btn-color-muted","flex-column","w-65px","h-50px","p-2","text-center",3,"id","ngClass","click"],["class","bullet-custom position-absolute bottom-0 w-100 h-4px bg-primary",4,"ngIf"],[1,"fa-solid","fa-floppy-disk","fs-5","p-1"],[3,"value"],[1,"col-md-3","col-lg-3","col-xl-3","col-xxl-3","mb-md-5"],[1,"card","shadow-sm"],[1,"card-header","min-h-auto"],[1,"d-flex","align-items-center","ms-3","card-title"],[1,"fs-6","text-gray-700","fw-semibold","d-none","d-md-block"],[1,"text-dark"],[1,"mb-10"],[1,"dropzone-custom","w-100",3,"config","addedFile","init"],["class","mt-4",4,"ngIf"],["class","d-flex justify-content-between mt-4",4,"ngIf"],[1,"shadow-sm"],[1,"card","card-custom","gutter-b"],["id","legendCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active","mb-2"],[1,"p-3","bg-dark","text-light","rounded",2,"height","200px"],[1,"carousel-item","mb-2"],[1,"p-3","bg-primary","text-light","rounded",2,"height","200px"],[1,"p-3","bg-info","text-light","rounded",2,"height","200px"],[1,"p-3","bg-warning","text-light","rounded",2,"height","200px"],[1,"p-3","bg-success","text-light","rounded",2,"height","200px"],[1,"p-3","bg-danger","text-light","rounded",2,"height","200px"],["type","button","data-bs-target","#legendCarousel","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#legendCarousel","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["id","tablesAccordion",1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"text-muted","mb-2"],[1,"btn","btn-link","btn-active-color-primary","p-0",3,"click"],[1,"text-muted"],[1,"d-flex","justify-content-between","mt-4"],[1,"btn","btn-sm","btn-light-primary","mt-3","d-flex","align-items-center",3,"click"],[1,"fas","fa-eye"],[1,"btn","btn-sm","btn-light-danger","mt-3","d-flex","align-items-center",3,"click"],[1,"fas","fa-trash-alt"],[1,"accordion-item"],[1,"accordion-header",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed"],[1,"text-primary"],["data-bs-parent","#tablesAccordion",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],["previewTableModal",""],["class","accordion-item",4,"ngIf"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"table","table-bordered","align-middle"],[1,"table-light"],[1,"bg-dark","text-light"],["class","bg-dark text-light",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-danger"],[1,"accordion",3,"id"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed",3,"ngClass"],[1,"text-white"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body",3,"ngClass"],[4,"ngIf"],["data-bs-toggle","tab","type","button","role","tab",1,"nav-link",3,"id"],["role","tabpanel",1,"tab-pane","fade",3,"id"],["class","d-flex justify-content-end mb-3",4,"ngIf"],[1,"table-responsive",2,"width","100%","height","400px",3,"id"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-success","btn-sm","me-2",3,"click"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],[1,"btn","btn-danger","btn-sm","me-2",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-warning","btn-sm","me-2",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[1,"fas","fa-object-group"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"fas","fa-unlink"],[1,"sticky-col"],[1,"row","mb-4","p-3","border","rounded","shadow-sm",3,"formGroupName"],[1,"col-form-label","fw-bold","fs-6"],["formControlName","device","optionValueField","PK","optionTextField","name","placeholder","Select Device",3,"allowClear","items","selectionChanges"],[1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl"],[1,"col-md-12","d-flex","align-items-end","gap-2","mt-3"],["type","button","class","btn btn-success flex-grow-1",3,"click",4,"ngIf"],["type","button","class","btn btn-danger flex-grow-1",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","flex-grow-1",3,"click"],[1,"bi","bi-plus-lg"],["type","button",1,"btn","btn-danger","flex-grow-1",3,"click"],[1,"bi","bi-trash"],[1,"row","g-3","align-items-end","border-bottom","pb-3","mb-3",3,"formGroupName"],[1,"fw-bold","form-label"],["formControlName","column","placeholder","Select Parmeter",3,"items"],[1,"col-md-4"],["formControlName","operator",1,"form-select"],["value",">"],["value","<"],["value",">="],["value","<="],["value","=="],["value","between"],["class","col-md-4",4,"ngIf"],["type","color","formControlName","color",1,"form-control","form-control-color"],["type","button","title","Remove Rule",1,"btn","btn-danger","mt-4","flex-grow-1",3,"click"],["type","number","formControlName","value","placeholder","Enter Value",1,"form-control"],["type","number","placeholder","Min",1,"form-control",3,"formControlName"],["type","number","placeholder","Max",1,"form-control",3,"formControlName"],[1,"d-flex","gap-2"],[1,"btn","btn-warning","btn-sm",3,"click"],[1,"fas","fa-edit"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"],[3,"chartConfig","optionsForChart","chartConfigChange"],[1,"row","g-5"],[1,"col-md-3"],["id","tableAccordion",1,"accordion"],[1,"col-md-9"],[1,"card","shadow-sm","border","border-light","p-4"],[1,"mb-4","text-center"],[1,"form",3,"formGroup","ngSubmit"],[1,"form-group","row","mb-4"],[1,"col-form-label","text-right","col-lg-3","col-sm-12","required","fw-bold"],[1,"col-lg-6","col-md-12","col-sm-12"],["formControlName","dateType",1,"form-select","form-select-solid","form-select-lg","gridster-item-content"],["class","text-danger mt-1",4,"ngIf"],["class","form-group row mb-4",4,"ngIf"],[1,"col-lg-5","col-md-12","col-sm-12","d-flex","align-items-center"],["type","time","formControlName","start_range","placeholder","Start Time",1,"form-control","form-control-solid","me-2","gridster-item-content"],["type","time","formControlName","end_range","placeholder","End Time",1,"form-control","form-control-solid","gridster-item-content"],[1,"form-group","row"],[1,"col-lg-6","offset-lg-3","col-md-12","col-sm-12","text-center"],["type","submit",1,"btn","btn-primary","w-100",3,"disabled"],["type","button","data-bs-toggle","collapse","aria-expanded","true",1,"accordion-button","bg-primary","text-white"],["data-bs-parent","#tableAccordion",1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body","rounded","border","border-light","shadow-sm","scrollable-accordion-content"],[1,"card-body","p-1"],["class","mb-4",4,"ngFor","ngForOf"],[1,"mb-4"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-semibold","text-dark"],[1,"fw-bold","text-primary"],[1,"fw-semibold","text-muted"],[1,"fw-bold","text-success"],[1,"fw-bold","text-dark"],[1,"btn","btn-sm","btn-light-primary","mt-3",3,"click"],[1,"text-danger","mt-1"],["type","datetime-local","formControlName","startDateTime",1,"form-control","form-control-solid"],["type","datetime-local","formControlName","endDateTime",1,"form-control","form-control-solid"],[3,"All_Devices_Configuration","AllParams","initialData","close","onSubmit","onUpdate"]],template:function(E,F){if(1&E){const _e=l.EpF();l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"div",2),l.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9),l.YNc(10,fd,6,11,"li",10),l.TgZ(11,"li",11)(12,"a",12),l.NdJ("click",function(){return F.exportToExcel()}),l._UZ(13,"i",13),l.TgZ(14,"span",14),l._uU(15,"Export"),l.qZA()()(),l.TgZ(16,"li",11),l.YNc(17,qm,4,0,"a",15),l.qZA(),l.TgZ(18,"li",11)(19,"a",16),l.NdJ("click",function(){return F.toggleMode()}),l.TgZ(20,"div",17),l._UZ(21,"i",18),l.TgZ(22,"span",19),l._uU(23),l.qZA()(),l.TgZ(24,"small",20),l._uU(25,"Click to switch mode"),l.qZA(),l._UZ(26,"span",21),l.qZA()()()(),l.TgZ(27,"div",22)(28,"div",23)(29,"div",24)(30,"label",25),l._uU(31,"Reports :"),l.qZA(),l.TgZ(32,"select",26)(33,"option",27),l._uU(34,"Select Type "),l.qZA(),l.YNc(35,Of,2,2,"option",28),l.qZA()()(),l.TgZ(36,"div")(37,"label",29)(38,"input",30),l.NdJ("change",function(st){return F.toggleToolbar(st)}),l.qZA(),l.TgZ(39,"span",31),l._uU(40),l.qZA()()(),l.TgZ(41,"div",32)(42,"button",33),l.NdJ("click",function(){return F.exitProcessingMode()}),l._UZ(43,"i",34),l.qZA()()()()(),l.TgZ(44,"div",35)(45,"div",36)(46,"div",37)(47,"div",38),l.YNc(48,$d,78,9,"div",39),l.TgZ(49,"div",40)(50,"div",41)(51,"div",42)(52,"div",43)(53,"ul",44),l.YNc(54,$m,3,7,"li",10),l.qZA(),l.TgZ(55,"div",45),l.YNc(56,Sm,4,9,"div",46),l.qZA()()()()()(),l.TgZ(57,"div",47),l._UZ(58,"div",48)(59,"div",49),l.qZA()()()()()()()()(),l.TgZ(60,"ngx-spinner",50)(61,"div",51),l._uU(62),l.qZA(),l.TgZ(63,"div",52),l._UZ(64,"div",53),l.qZA(),l.TgZ(65,"p",54),l._uU(66),l.qZA()(),l.YNc(67,Xp,13,2,"ng-template",null,55,l.W1O),l.TgZ(69,"div",56)(70,"div",57)(71,"div",58)(72,"h5",59),l._uU(73),l.qZA(),l.TgZ(74,"div",60)(75,"button",61),l._UZ(76,"app-keenicon",62),l.qZA()()(),l.TgZ(77,"div",63)(78,"div",64)(79,"div",45)(80,"div",65)(81,"form",66)(82,"ul",67)(83,"li",68)(84,"a",69),l._uU(85," Device Table "),l.qZA()(),l.TgZ(86,"li",68)(87,"a",70),l._uU(88," New Table "),l.qZA()()(),l.TgZ(89,"div",71)(90,"div",72)(91,"div",73),l.YNc(92,Gg,13,9,"div",74),l.qZA(),l.TgZ(93,"div",75)(94,"div",76)(95,"button",77),l.NdJ("click",function(){return F.createDeviceTable()}),l._UZ(96,"i",78),l._uU(97," Generate Table "),l.qZA()()()(),l.TgZ(98,"div",79)(99,"div",80)(100,"div",81)(101,"label",82),l._uU(102," No.of Columns "),l.qZA(),l._UZ(103,"input",83),l.qZA(),l.TgZ(104,"div",81)(105,"label",82),l._uU(106,"No.of Rows "),l.qZA(),l._UZ(107,"input",84),l.qZA(),l.TgZ(108,"div",85)(109,"button",86),l.NdJ("click",function(){return F.createNewTable()}),l._UZ(110,"i",87),l._uU(111," Add New Table "),l.qZA()()()()()()(),l.TgZ(112,"div",88)(113,"form",66)(114,"ul",89)(115,"li",68)(116,"a",90),l._uU(117," Header Builder "),l.qZA()(),l.TgZ(118,"li",68)(119,"a",91),l._uU(120," Derive Column "),l.qZA()()(),l.TgZ(121,"div",92)(122,"div",93)(123,"div",80)(124,"div",81)(125,"label",94),l._uU(126," Device "),l.qZA(),l.TgZ(127,"ngx-select",95),l.NdJ("selectionChanges",function(st){return F.getParametersList(st)}),l.qZA()(),l.TgZ(128,"div",81)(129,"label",94),l._uU(130," Parmeters "),l.qZA(),l.TgZ(131,"ngx-select",96),l.NdJ("select",function(){return F.updateHeaderSyntax()}),l.qZA()(),l.TgZ(132,"div",97)(133,"label",94),l._uU(134,"Generated Header"),l.qZA(),l.TgZ(135,"div",98),l._UZ(136,"input",99),l.TgZ(137,"button",100),l.NdJ("click",function(){return F.copyHeaderToClipboard()}),l._uU(138," Copy "),l.qZA()()()()(),l.TgZ(139,"div",101)(140,"div",80)(141,"div",81)(142,"label",94),l._uU(143," Device "),l.qZA(),l.TgZ(144,"ngx-select",102),l.NdJ("selectionChanges",function(){return F.updateDerivedHeader()}),l.qZA()(),l.TgZ(145,"div",81)(146,"div",81)(147,"label",103),l._uU(148,"Parameters "),l.qZA(),l.TgZ(149,"div",104)(150,"div",105)(151,"ng-multiselect-dropdown",106),l.NdJ("onSelect",function(){return F.updateDerivedHeader()})("onDeSelect",function(){return F.updateDerivedHeader()}),l._uU(152," > "),l.qZA()()()()(),l.TgZ(153,"div",81)(154,"label",94),l._uU(155," Operator "),l.qZA(),l.TgZ(156,"select",107),l.NdJ("change",function(){return F.updateDerivedHeader()}),l.TgZ(157,"option",108),l._uU(158,"+"),l.qZA(),l.TgZ(159,"option",109),l._uU(160,"-"),l.qZA(),l.TgZ(161,"option",110),l._uU(162,"*"),l.qZA(),l.TgZ(163,"option",111),l._uU(164,"/"),l.qZA()()(),l.TgZ(165,"div",97)(166,"label",94),l._uU(167," Derived Header "),l.qZA(),l.TgZ(168,"div",98),l._UZ(169,"input",99),l.TgZ(170,"button",100),l.NdJ("click",function(){return F.copyDerivedHeader()}),l._uU(171," Copy "),l.qZA()()()()()()()(),l.TgZ(172,"div",112)(173,"form",66)(174,"ul",113)(175,"li",68)(176,"a",114),l._uU(177," Single Calc "),l.qZA()(),l.TgZ(178,"li",68)(179,"a",115),l._uU(180," Multi Calc "),l.qZA()()(),l.TgZ(181,"div",116)(182,"div",117)(183,"div",80)(184,"div",81)(185,"label",94),l._uU(186," Device "),l.qZA(),l.TgZ(187,"ngx-select",95),l.NdJ("selectionChanges",function(){return F.generateSingleColumnExpression()}),l.qZA()(),l.TgZ(188,"div",81)(189,"label",94),l._uU(190," Parameter "),l.qZA(),l.TgZ(191,"ngx-select",118),l.NdJ("selectionChanges",function(){return F.generateSingleColumnExpression()}),l.qZA()(),l.TgZ(192,"div",81)(193,"label",94),l._uU(194," Calculation Type "),l.qZA(),l.TgZ(195,"select",119),l.NdJ("change",function(){return F.generateSingleColumnExpression()}),l.TgZ(196,"option",120),l._uU(197,"SUM"),l.qZA(),l.TgZ(198,"option",121),l._uU(199,"AVG"),l.qZA(),l.TgZ(200,"option",122),l._uU(201,"MIN"),l.qZA(),l.TgZ(202,"option",123),l._uU(203,"MAX"),l.qZA()()(),l.TgZ(204,"div",97)(205,"label",94),l._uU(206," Generated Formula "),l.qZA(),l.TgZ(207,"div",98),l._UZ(208,"input",99),l.TgZ(209,"button",100),l.NdJ("click",function(){return F.copySingleColumnExpression()}),l._uU(210," Copy "),l.qZA()()()()(),l.TgZ(211,"div",124)(212,"div",80)(213,"div",81)(214,"label",94),l._uU(215," Device "),l.qZA(),l.TgZ(216,"ngx-select",102),l.NdJ("selectionChanges",function(){return F.generateMultiColumnExpression()}),l.qZA()(),l.TgZ(217,"div",81)(218,"div",104)(219,"div",105)(220,"label",103),l._uU(221,"Parameters "),l.qZA(),l.TgZ(222,"ng-multiselect-dropdown",106),l.NdJ("onSelect",function(){return F.generateMultiColumnExpression()})("onDeSelect",function(){return F.generateMultiColumnExpression()}),l.qZA()()()(),l.TgZ(223,"div",81)(224,"label",94),l._uU(225," Calculation Type "),l.qZA(),l.TgZ(226,"select",125),l.NdJ("change",function(){return F.generateMultiColumnExpression()}),l.TgZ(227,"option",120),l._uU(228,"SUM"),l.qZA(),l.TgZ(229,"option",121),l._uU(230,"AVG"),l.qZA(),l.TgZ(231,"option",122),l._uU(232,"MIN"),l.qZA(),l.TgZ(233,"option",123),l._uU(234,"MAX"),l.qZA()()(),l.TgZ(235,"div",97)(236,"label",94),l._uU(237," Generated Formula "),l.qZA(),l.TgZ(238,"div",98),l._UZ(239,"input",99),l.TgZ(240,"button",100),l.NdJ("click",function(){return F.copyMultiColumnExpression()}),l._uU(241," Copy "),l.qZA()()()()()()()(),l.TgZ(242,"div",126)(243,"form",66)(244,"div",127),l.YNc(245,J,37,8,"div",128),l.qZA()(),l.TgZ(246,"div",75)(247,"div",76),l.YNc(248,se,3,0,"button",129),l.qZA()()(),l.TgZ(249,"div",130)(250,"div",131)(251,"h2",132),l._uU(252,"Formulas List"),l.qZA(),l.TgZ(253,"div",133)(254,"table",134)(255,"thead",135)(256,"tr")(257,"th"),l._uU(258,"Name"),l.qZA(),l.TgZ(259,"th"),l._uU(260,"Formula"),l.qZA(),l.TgZ(261,"th"),l._uU(262,"Actions"),l.qZA()()(),l.TgZ(263,"tbody"),l.YNc(264,xe,10,2,"tr",136),l.qZA()()(),l.TgZ(265,"div",137)(266,"button",138),l.NdJ("click",function(){return F.openModal()}),l._UZ(267,"i",139),l._uU(268," Create New Formula "),l.qZA()()()(),l.TgZ(269,"div",140)(270,"div",141)(271,"div",142)(272,"h3",143),l._uU(273,"Chart Container"),l.qZA()(),l.TgZ(274,"div",144)(275,"button",145),l.NdJ("click",function(){l.CHM(_e);const st=l.MAs(295);return l.KtG(F.openChartConfigModal(null,st))}),l._uU(276,"Create New Chart"),l.qZA(),l.TgZ(277,"table",146)(278,"thead")(279,"tr")(280,"th"),l._uU(281,"Chart Type"),l.qZA(),l.TgZ(282,"th"),l._uU(283,"Title"),l.qZA(),l.TgZ(284,"th"),l._uU(285,"X-Axis Label"),l.qZA(),l.TgZ(286,"th"),l._uU(287,"Y-Axis Label"),l.qZA(),l.TgZ(288,"th"),l._uU(289,"Position"),l.qZA(),l.TgZ(290,"th"),l._uU(291,"Actions"),l.qZA()()(),l.TgZ(292,"tbody"),l.YNc(293,fe,16,5,"tr",136),l.qZA()(),l.YNc(294,De,6,3,"ng-template",null,147,l.W1O),l.qZA()()()()()()()(),l.YNc(296,Sr,36,9,"ng-template",null,148,l.W1O),l.YNc(298,Qt,1,3,"ng-template",149,150,l.W1O)}if(2&E){let _e,Ge,st,Tt;l.xp6(10),l.Q6J("ngForOf",l.Hh0(68,lo,l.DdM(61,Lr),l.DdM(62,En),l.DdM(63,qn),l.DdM(64,Fo),l.DdM(65,gi),l.DdM(66,po),l.DdM(67,Jr))),l.xp6(7),l.Q6J("ngIf",F.hidingLink),l.xp6(2),l.Q6J("ngClass",l.VKq(76,_g,F.editMode)),l.uIk("title",F.editMode?"Currently in Edit Mode. Click to switch to Selection Mode":"Currently in Selection Mode. Click to switch to Edit Mode"),l.xp6(2),l.Q6J("ngClass",F.editMode?"fa-edit text-warning":"fa-mouse-pointer text-success"),l.xp6(2),l.Oqu(F.editMode?"Editing":"Selecting"),l.xp6(5),l.Q6J("formGroup",F.reportForm),l.xp6(5),l.Q6J("value",null)("selected",!0),l.xp6(2),l.Q6J("ngForOf",F.allReportsPermissions),l.xp6(3),l.Q6J("checked",F.isToolbarVisible),l.xp6(2),l.hij(" ",F.isToolbarVisible?"Hide Panel":"Show Panel"," "),l.xp6(8),l.Q6J("ngIf",F.isToolbarVisible&&!F.isDrawerOpen),l.xp6(1),l.Q6J("ngClass",l.kEZ(78,zo,F.isToolbarVisible&&!F.isDrawerOpen,F.isDrawerOpen,!F.isToolbarVisible&&!F.isDrawerOpen))("ngStyle",l.VKq(82,cr,F.isDrawerOpen?"calc(400px + var(--bs-gutter-x) * 0.5)":"0")),l.xp6(5),l.Q6J("ngForOf",F.parsedTables),l.xp6(2),l.Q6J("ngForOf",F.parsedTables),l.xp6(4),l.Q6J("fullScreen",!0),l.xp6(2),l.hij(" Loading Reports Playground... ",F.loadingProgress,"% \u23f3 "),l.xp6(2),l.Udp("width",F.loadingProgress,"%"),l.xp6(2),l.hij(" ",F.loadingMessage," "),l.xp6(3),l.uIk("data-kt-drawer-name","forms_config")("data-kt-drawer-toggle","#kt_forms_toggle")("data-kt-drawer-close","#kt_forms_close"),l.xp6(4),l.hij(" ",F.drawerTile," "),l.xp6(5),l.uIk("data-kt-scroll-wrappers","#kt_forms_body")("data-kt-scroll-dependencies","#kt_forms_header"),l.xp6(3),l.Q6J("formGroup",F.tableForm),l.xp6(11),l.Q6J("ngForOf",null==F.devices?null:F.devices.controls),l.xp6(21),l.Q6J("formGroup",F.columnForm),l.xp6(14),l.Q6J("allowClear",!0)("items",F.All_Devices_Configuration),l.xp6(4),l.Q6J("allowClear",!0)("items","Parameters"===(null==(_e=F.reportForm.get("reportsType"))?null:_e.value)?F.AllParameterList[null==(_e=F.columnForm.get("device_tab1"))?null:_e.value]:F.AllScheduleList[null==(_e=F.columnForm.get("device_tab1"))?null:_e.value]),l.xp6(5),l.Q6J("value",F.headerSyntax),l.xp6(8),l.Q6J("allowClear",!0)("items",F.All_Devices_Configuration),l.xp6(7),l.Q6J("placeholder","Select Parameters")("settings",F.dropdownSettings)("data","Parameters"===(null==(Ge=F.reportForm.get("reportsType"))?null:Ge.value)?F.AllParameterList[null==(Ge=F.columnForm.get("device_tab2"))?null:Ge.value]:F.AllScheduleList[null==(Ge=F.columnForm.get("device_tab2"))?null:Ge.value])("formControl",F.columnForm.controls.parameters_tab2),l.xp6(18),l.Q6J("value",F.derivedHeaderSyntax),l.xp6(4),l.Q6J("formGroup",F.colCalForm),l.xp6(14),l.Q6J("allowClear",!0)("items",F.All_Devices_Configuration),l.xp6(4),l.Q6J("allowClear",!0)("items","Parameters"===(null==(st=F.reportForm.get("reportsType"))?null:st.value)?F.AllParameterList[null==(st=F.colCalForm.get("device_tab1"))?null:st.value]:F.AllScheduleList[null==(st=F.colCalForm.get("device_tab1"))?null:st.value]),l.xp6(17),l.Q6J("value",F.headerExpression),l.xp6(8),l.Q6J("allowClear",!0)("items",F.All_Devices_Configuration),l.xp6(6),l.Q6J("placeholder","Select Parameters")("settings",F.dropdownSettings)("data","Parameters"===(null==(Tt=F.reportForm.get("reportsType"))?null:Tt.value)?F.AllParameterList[null==(Tt=F.colCalForm.get("device_tab2"))?null:Tt.value]:F.AllScheduleList[null==(Tt=F.colCalForm.get("device_tab2"))?null:Tt.value])("formControl",F.colCalForm.controls.parameters_tab2),l.xp6(17),l.Q6J("value",F.multiColumnExpression),l.xp6(4),l.Q6J("formGroup",F.condFormatForm),l.xp6(2),l.Q6J("ngForOf",null==F.rules?null:F.rules.controls),l.xp6(3),l.Q6J("ngIf",F.hidingLink),l.xp6(16),l.Q6J("ngForOf",F.formulas),l.xp6(29),l.Q6J("ngForOf",F.chartConfigs)}},dependencies:[S.mk,S.sg,S.O5,S.PC,X._Y,X.YN,X.Kr,X.Fj,X.wV,X.EJ,X.JJ,X.JL,X.oH,X.sg,X.u,X.x0,X.CE,G.Ro,N.O,Nl.ig,No.q,gt,qr.O2,tu,Jf,S.Ov],styles:['@charset "UTF-8";.dz-default-message[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:10px;color:#6c757d}.dz-default-message[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:auto;margin-bottom:10px}.dz-default-message[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#007bff;margin-bottom:5px}.dz-default-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;color:#6c757d;margin:0}  dropzone>.dropzone.dz-wrapper .dz-message{min-height:200px!important;border-radius:10px!important}.dz-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:20px;border:1px solid #e2e5ec;background-color:#fff;border-radius:8px}.dz-image[_ngcontent-%COMP%]{background:none!important;display:flex;justify-content:center;align-items:center;width:100%}.dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:auto;margin-bottom:10px;display:block}.header-input[_ngcontent-%COMP%]{border:1px solid #ddd;background:#fff;font-size:14px;font-weight:700;text-align:center;padding:2px;outline:none;border-radius:4px}.header-title[_ngcontent-%COMP%]{text-align:center;font-weight:700;padding:5px}.device-parameters[_ngcontent-%COMP%]{font-size:.9rem}.toggle-button[_ngcontent-%COMP%]{transition:background-color .3s ease}.fixed-toolbar[_ngcontent-%COMP%]{position:fixed;top:var(--bs-app-header-height, 70px);left:auto;width:100%;z-index:50;background-color:var(--bs-body-bg, #fff);box-shadow:0 2px 6px #0000001a;border-top:1px dashed var(--bs-border-dashed-color, #009ef7)!important;border-radius:0 0 10px 10px;padding-left:1%;padding-right:10%}.content-with-fixed-toolbar[_ngcontent-%COMP%]{margin-top:60px}.progress-container[_ngcontent-%COMP%]{width:80%;height:8px;background:rgba(255,255,255,.2);border-radius:10px;overflow:hidden;margin:10px auto}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#4caf50,#00bcd4);transition:width .4s ease-in-out;border-radius:10px}.dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:60px;height:auto}.scrollable-accordion-content[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;padding-right:10px}.scrollable-accordion-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.scrollable-accordion-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#ccc;border-radius:3px}.scrollable-accordion-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background-color:#999}.main-content-wrapper[_ngcontent-%COMP%]{transition:margin-right .3s ease-in-out;padding-top:60px}.sticky-col[_ngcontent-%COMP%]{position:sticky;left:0;background-color:#fff;z-index:1}']})),ye})();const Xr={PK:"",SK:"",devices:[],file_name:"",file_location_path_URl:"",formulas:[],Values:[],filters:[],rows:[],reportsType:"",columns:[],Others:[]};var rn=re(83493),jo=re(26131);function So(le,ye){if(1&le&&(l.TgZ(0,"div",17)(1,"label",18),l._uU(2,"Devices "),l._UZ(3,"i",19),l.qZA(),l.TgZ(4,"div",20)(5,"div",21),l._UZ(6,"ng-multiselect-dropdown",22),l.qZA()()()),2&le){const K=l.oxw(2);l.xp6(6),l.Q6J("placeholder","Select Device")("settings",K.dropdownSettings)("data",K.extractDevices)("formControl",K.form.controls.devices)}}function Zo(le,ye){1&le&&(l.TgZ(0,"div",23),l._uU(1," Device is required "),l.qZA())}function ro(le,ye){if(1&le&&(l.TgZ(0,"div"),l.YNc(1,So,7,4,"div",15),l.YNc(2,Zo,2,0,"div",16),l.qZA()),2&le){const K=l.oxw();let E;l.xp6(1),l.Q6J("ngIf",K.extractDevices.length>0),l.xp6(1),l.Q6J("ngIf",(null==(E=K.form.get("devices"))?null:E.hasError("required"))&&(null==(E=K.form.get("devices"))?null:E.touched))}}function Ho(le,ye){if(1&le&&(l.TgZ(0,"div",17)(1,"label",18),l._uU(2,"Choose Default Device"),l._UZ(3,"i",19),l.qZA(),l.TgZ(4,"div",20)(5,"div",21),l._UZ(6,"ng-multiselect-dropdown",22),l.qZA()()()),2&le){const K=l.oxw(2);l.xp6(6),l.Q6J("placeholder","Select Device")("settings",K.dropdownSettingsSingleSelection)("data",K.extractDevices)("formControl",K.form.controls.devices)}}function Xo(le,ye){1&le&&(l.TgZ(0,"div",23),l._uU(1," Device is required "),l.qZA())}function ka(le,ye){if(1&le&&(l.TgZ(0,"div"),l.YNc(1,Ho,7,4,"div",15),l.YNc(2,Xo,2,0,"div",16),l.qZA()),2&le){const K=l.oxw();let E;l.xp6(1),l.Q6J("ngIf",K.extractDevices.length>0),l.xp6(1),l.Q6J("ngIf",(null==(E=K.form.get("devices"))?null:E.hasError("required"))&&(null==(E=K.form.get("devices"))?null:E.touched))}}let zt=(()=>{var le;class ye{constructor(E,F,_e){(0,O.Z)(this,"fb",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"dataSharingService",void 0),(0,O.Z)(this,"updateParentModel",void 0),(0,O.Z)(this,"form",void 0),(0,O.Z)(this,"dropdownSettings",{singleSelection:!1,idField:"mn",textField:"label",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0}),(0,O.Z)(this,"dropdownSettingsSingleSelection",{singleSelection:!0,idField:"mn",textField:"label",enableCheckAll:!1,itemsShowLimit:1,allowSearchFilter:!0}),(0,O.Z)(this,"extractDevices",void 0),(0,O.Z)(this,"rdtList",void 0),(0,O.Z)(this,"defaultValues",void 0),(0,O.Z)(this,"unsubscribe",[]),this.fb=E,this.sharedService=F,this.dataSharingService=_e}ngOnInit(){this.initForm(),this.updateParentModel({},this.checkForm())}initForm(){"string"==typeof this.defaultValues.devices&&(this.defaultValues.devices=JSON.parse(this.defaultValues.devices)),"string"==typeof this.defaultValues.Others&&(this.defaultValues.Others=JSON.parse(this.defaultValues.Others)),this.form=this.fb.group({devices:[this.defaultValues?.devices?this.defaultValues.devices:[],[X.kI.required]],reportsType:[this.defaultValues?.Others&&this.defaultValues?.Others?.[0]?.reportsType?this.defaultValues?.Others?.[0]?.reportsType:"Parameters",[X.kI.required]]});const E=this.form.valueChanges.subscribe(F=>{this.updateParentModel(F,this.checkForm())});this.unsubscribe.push(E)}checkForm(){return!this.form.get("devices")?.hasError("required")}onModuleSelect(E){const F=this.dataSharingService.getCurrentdevieInfo();console.log("device_info :>> ",F)}onDeSelect(E){}ngOnDestroy(){this.unsubscribe.forEach(E=>E.unsubscribe())}set_value(){throw new Error("Method not implemented.")}checkUniqueIdentifier(E){throw new Error("Method not implemented.")}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(X.qu),l.Y36(ze.F),l.Y36(at.j))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step2-dt"]],inputs:{updateParentModel:"updateParentModel",extractDevices:"extractDevices",defaultValues:"defaultValues"},decls:23,vars:3,consts:[[1,"pb-10","pb-lg-15"],[1,"fw-bolder","d-flex","align-items-center","text-dark"],["ngbTooltip","SetUp a Devices for your Model",1,"fas","fa-exclamation-circle","ms-2","fs-7"],[1,"fv-row",3,"formGroup"],["data-kt-buttons","true",1,"row","mb-2"],[1,"col"],["type","radio","id","parametersType","value","Device Type","formControlName","reportsType",1,"btn-check"],["for","parametersType",1,"btn","btn-outline","btn-outline-dashed","btn-active-light-primary","w-100","p-4"],[1,"fw-bold","fs-5","d-block"],[1,"bi","bi-gear-fill","fs-2","mb-2"],["type","radio","id","scheduleType","value","Reading Device Type","formControlName","reportsType",1,"btn-check"],["for","scheduleType",1,"btn","btn-outline","btn-outline-dashed","btn-active-light-primary","w-100","p-4"],[1,"bi","bi-calendar-check-fill","fs-2","mb-2"],[1,"column"],[4,"ngIf"],["class","col-md-12","style","padding-top: 10px;",4,"ngIf"],["class","fv-plugins-message-container invalid-feedback",4,"ngIf"],[1,"col-md-12",2,"padding-top","10px"],[1,"col-lg-12","col-form-label","fw-bold","fs-6","required","fw-bold"],["ngbTooltip","Choose the devices you want to include in your dashboard (List displaying Device Label - Device Model Number).",1,"fas","fa-exclamation-circle","ms-2","fs-7","text-warning"],[1,"col-lg-12"],[1,"custom-multiselect"],["required","",1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl"],[1,"fv-plugins-message-container","invalid-feedback"]],template:function(E,F){if(1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2," Device Configuration "),l._UZ(3,"i",2),l.qZA()(),l.TgZ(4,"div",3)(5,"div",4)(6,"div",5),l._UZ(7,"input",6),l.TgZ(8,"label",7)(9,"span",8),l._UZ(10,"i",9)(11,"br"),l._uU(12," Device Type "),l.qZA()()(),l.TgZ(13,"div",5),l._UZ(14,"input",10),l.TgZ(15,"label",11)(16,"span",8),l._UZ(17,"i",12)(18,"br"),l._uU(19," Reading Device Type "),l.qZA()()()(),l.TgZ(20,"div",13),l.YNc(21,ro,3,2,"div",14),l.YNc(22,ka,3,2,"div",14),l.qZA()()),2&E){let _e,Ge;l.xp6(4),l.Q6J("formGroup",F.form),l.xp6(17),l.Q6J("ngIf","Device Type"==(null==(_e=F.form.get("reportsType"))?null:_e.value)),l.xp6(1),l.Q6J("ngIf","Reading Device Type"==(null==(Ge=F.form.get("reportsType"))?null:Ge.value))}},dependencies:[S.O5,X.Fj,X._,X.JJ,X.JL,X.Q7,X.oH,X.sg,X.u,N.O],encapsulation:2})),ye})(),Ir=(()=>{var le;class ye{constructor(){(0,O.Z)(this,"getPowerBoardID",void 0),(0,O.Z)(this,"redirectPowerBoard",new l.vpe)}redirectPB(){this.redirectPowerBoard.emit()}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-step5-dt"]],inputs:{getPowerBoardID:"getPowerBoardID"},outputs:{redirectPowerBoard:"redirectPowerBoard"},decls:21,vars:1,consts:[[1,"pb-8","pb-lg-10"],[1,"fw-bolder","text-dark"],[1,"text-gray-400","fw-bold","fs-6"],[1,"link-primary","fw-bolder","cursor-pointer"],[1,"mb-0"],["type","button","data-bs-dismiss","modal",1,"btn","fw-bold","btn-lg","btn-success","me-3","me-3","d-flex","mb-5",3,"click"],[1,"indicator-label"],[1,"fa-solid","fa-angles-right","fs-2"],[1,"notice","d-flex","bg-light-warning","rounded","border-warning","border","border-dashed","p-6"],[1,"svg-icon","fs-2tx","text-warning","me-4"],[1,"d-flex","flex-stack","flex-grow-1"],[1,"fw-bold"],[1,"text-gray-800","fw-bolder"],[1,"fs-6","text-gray-600"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"h2",1),l._uU(2,"Your Are Done!"),l.qZA(),l.TgZ(3,"div",2),l._uU(4," If you need more info, please "),l.TgZ(5,"a",3),l._uU(6," Sign In"),l.qZA(),l._uU(7,". "),l.qZA()(),l.TgZ(8,"div",4)(9,"button",5),l.NdJ("click",function(){return F.redirectPB()}),l.TgZ(10,"span",6),l._uU(11),l._UZ(12,"i",7),l.qZA()(),l.TgZ(13,"div",8),l._UZ(14,"span",9),l.TgZ(15,"div",10)(16,"div",11)(17,"h4",12),l._uU(18,"Note :"),l.qZA(),l.TgZ(19,"div",13),l._uU(20," see you can go back and even add another Model "),l.qZA()()()()()),2&E&&(l.xp6(11),l.hij(" GoTo WorkSpace "," "," "))},encapsulation:2})),ye})();function Gr(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"app-step1-dt",30),l.NdJ("enableSubmitButton",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.enableSubmitButton())}),l.qZA(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(1),l.Q6J("updateParentModel",K.updateAccount)("defaultValues",K.account$.value)("isEditMode",K.readBackCheck)}}function on(le,ye){if(1&le&&(l.ynx(0),l._UZ(1,"app-step2-dt",31),l.BQk()),2&le){const K=l.oxw();l.xp6(1),l.Q6J("updateParentModel",K.updateAccount)("defaultValues",K.account$.value)("extractDevices",K.extractDevices)}}function bn(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"app-step5-dt",32),l.NdJ("redirectPowerBoard",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.loadDashboard(F))}),l.qZA(),l.BQk()}}function Xn(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"button",33),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.prevStep())}),l._UZ(2,"i",34),l._uU(3," Back "),l.qZA(),l.BQk()}}function so(le,ye){1&le&&(l.ynx(0),l._uU(1),l.BQk()),2&le&&(l.xp6(1),l.hij(" Continue "," "," "))}function Po(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"div")(2,"button",35),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.nextStep())}),l.TgZ(3,"span",36),l.YNc(4,so,2,1,"ng-container",25),l._UZ(5,"i",37),l.qZA()()(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(2),l.Q6J("disabled",!K.isCurrentFormValid$.value),l.xp6(2),l.Q6J("ngIf",K.currentStep$.value<K.formsCount-1)}}function $i(le,ye){1&le&&(l.ynx(0),l._uU(1," Submit "),l.BQk())}function Ni(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"div")(2,"button",38),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return F.onSubmit(),l.KtG(F.nextStep())}),l.TgZ(3,"span",36),l.YNc(4,$i,2,0,"ng-container",25),l.qZA()()(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(2),l.Q6J("disabled",!K.isCurrentFormValid$.value||K.submittedCheck),l.xp6(2),l.Q6J("ngIf",K.currentStep$.value===K.formsCount-1)}}function ga(le,ye){1&le&&(l.ynx(0),l._uU(1," Update "),l.BQk())}function _a(le,ye){if(1&le){const K=l.EpF();l.ynx(0),l.TgZ(1,"div")(2,"button",38),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return F.onUpdate(),l.KtG(F.nextStep())}),l.TgZ(3,"span",36),l.YNc(4,ga,2,0,"ng-container",25),l.qZA()()(),l.BQk()}if(2&le){const K=l.oxw();l.xp6(2),l.Q6J("disabled",!K.isCurrentFormValid$.value||K.submittedCheck),l.xp6(2),l.Q6J("ngIf",K.currentStep$.value===K.formsCount-1)}}const vs=function(le,ye){return{current:le,completed:ye}},ei=function(le){return{current:le}};let Hr=(()=>{var le;class ye{constructor(E,F,_e,Ge,st,Tt,Kt,fr){(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"api",void 0),(0,O.Z)(this,"toast",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"spinner",void 0),(0,O.Z)(this,"router",void 0),(0,O.Z)(this,"http",void 0),(0,O.Z)(this,"templateService",void 0),(0,O.Z)(this,"formsCount",3),(0,O.Z)(this,"account$",new Mn.X(Xr)),(0,O.Z)(this,"currentStep$",new Mn.X(1)),(0,O.Z)(this,"isCurrentFormValid$",new Mn.X(!1)),(0,O.Z)(this,"uploadedFile$",new Mn.X(null)),(0,O.Z)(this,"dropzoneInstance$",new Mn.X(null)),(0,O.Z)(this,"extractDevices",void 0),(0,O.Z)(this,"listofPowerboardIds",void 0),(0,O.Z)(this,"powerBoardIdsForAcroll",void 0),(0,O.Z)(this,"loadPB",new l.vpe),(0,O.Z)(this,"submitConfirm",new l.vpe),(0,O.Z)(this,"editConfirm",new l.vpe),(0,O.Z)(this,"step1Component",void 0),(0,O.Z)(this,"unsubscribe",[]),(0,O.Z)(this,"SK_clientID",void 0),(0,O.Z)(this,"maxlength",500),(0,O.Z)(this,"readBackCheck",!1),(0,O.Z)(this,"submittedCheck",!1),(0,O.Z)(this,"powerBoardID",void 0),(0,O.Z)(this,"lookup_data_temp1",[]),(0,O.Z)(this,"isNewModel",!1),(0,O.Z)(this,"updateAccount",(nn,Yr)=>{const Go={...this.account$.value,...nn};this.account$.next(Go),this.isCurrentFormValid$.next(Yr)}),this.cdr=E,this.api=F,this.toast=_e,this.sharedService=Ge,this.spinner=st,this.router=Tt,this.http=Kt,this.templateService=fr}ngOnInit(){const E=this.sharedService.getLoggedUserDetails();this.SK_clientID=E.attributes["custom:clientID"],this.fetchPBData(1)}nextStep(){const E=this.currentStep$.value+1;E>this.formsCount||this.currentStep$.next(E)}prevStep(){const E=this.currentStep$.value-1;0!==E&&this.currentStep$.next(E)}ngOnDestroy(){this.uploadedFile$.next(null),this.uploadedFile$.complete(),this.unsubscribe.forEach(E=>E.unsubscribe())}readBack(E){if(Xr.PK=E.PK,Xr.SK=E.SK,Xr.file_name=E.file_name,Xr.file_location_path_URl=E.file_location_path_URl,Xr.Others=E.Others,"string"==typeof E.Others){const F=JSON.parse(E.Others);Xr.reportsType=F[0].reportsType}else Xr.reportsType=E.Others[0].reportsType;Xr.devices=E.devices,console.log("initssss",Xr),this.account$.next(Xr),this.readBackCheck=!0,this.cdr.detectChanges(),this.currentStep$.next(1)}onSubmit(){this.powerBoardID=this.account$.value.PK,this.createNewPowerBoard()}createNewPowerBoard(){let E,F;this.templateService.uploadedFile$.next(this.uploadedFile$.value),F="object"==typeof this.account$.value.devices?JSON.stringify(this.account$.value.devices):this.account$.value.devices;const _e=[{reportsType:this.account$.value.reportsType}];E={PK:this.account$.value.PK,SK:this.SK_clientID+"#dynamic_template",file_name:this.account$.value.file_name,file_location_path_URl:this.account$.value.PK,devices:JSON.stringify(this.account$.value.devices),Others:JSON.stringify(_e)};const st=Math.ceil((new Date).getTime()/1e3),Kt={P1:this.account$.value.PK,P2:this.account$.value.file_name,P3:this.account$.value.PK,P5:this.account$.value.reportsType,P4:st};this.api.CreateDynamicReports(E).then(fr=>{fr?(this.templateService.uploadJsonToS3(E,{}),this.createLookUpPowerBoard(Kt,1),this.toast.open("New Powerboard configuration created successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"})):alert("Error in Creating Dashboard Configuration")}).catch(fr=>{console.log("err for creation",fr),this.toast.open("Error in Creating New Dashboard Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}updateDynamicReport(){let E,F;this.templateService.uploadedFile$.next(this.uploadedFile$.value),F="object"==typeof this.account$.value.devices?JSON.stringify(this.account$.value.devices):this.account$.value.devices;const _e=[{reportsType:this.account$.value.reportsType}];E={PK:this.account$.value.PK,SK:this.SK_clientID+"#dynamic_template",file_name:this.account$.value.file_name,file_location_path_URl:this.account$.value.PK,devices:JSON.stringify(this.account$.value.devices),Others:JSON.stringify(_e)};const st=Math.ceil((new Date).getTime()/1e3),Kt={P1:this.account$.value.PK,P2:this.account$.value.file_name,P3:this.account$.value.PK,P5:this.account$.value.reportsType,P4:st};this.api.UpdateDynamicReports(E).then(fr=>{fr&&(this.fetchPowerBoardById(1,this.account$.value.PK,"update",Kt),this.toast.open("Dynamic Reports updated successfully"," ",{duration:2e3,horizontalPosition:"right",verticalPosition:"top"}))}).catch(fr=>{console.log("err for creation",fr),this.toast.open("Error in  Updating Configuration ","Check again",{duration:5e3,horizontalPosition:"right",verticalPosition:"top"})})}createLookUpPowerBoard(E,F){this.api.GetLookupMasterTable(this.SK_clientID+"#dynamic_template",F).then(_e=>{let Ge=[];if(null!=_e&&_e.items&&"string"==typeof _e.items&&(Ge=JSON.parse(_e.items)),null!=_e&&Ge.length<this.maxlength){let st=[];_e.items&&"string"==typeof _e.items&&JSON.parse(_e.items).forEach(fr=>{for(const nn in fr)Object.prototype.hasOwnProperty.call(fr,nn)&&st.push(fr[nn])}),st.unshift(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt})),console.log("newdata 11111111 :>> ",st);let Tt={PK:this.SK_clientID+"#dynamic_template",SK:_e.SK,createdTime:"",updatedTime:"",items:JSON.stringify(st)};this.api.UpdateLookupMasterTable(Tt).then(Kt=>{console.log("createResponse :>> ",Kt),this.submitConfirm.emit("submit")}).catch(Kt=>{console.log("err :>> ",Kt)})}else if(null==_e){let st=[];st.push(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt}));let Tt={SK:F,PK:this.SK_clientID+"#dynamic_template",items:JSON.stringify(st)};this.api.CreateLookupMasterTable(Tt).then(Kt=>{this.submitConfirm.emit("submit")}).catch(Kt=>{console.log("err :>> ",Kt)})}else this.createLookUpPowerBoard(E,F+1)})}enableSubmitButton(){this.submittedCheck=!1,this.cdr.detectChanges()}loadDashboard(E){this.router.navigate([`/TimeMachine/TemplateWorkLab/${this.account$.value.PK}`])}fetchPBData(E){var F=this;return(0,an.Z)(function*(){try{const _e=yield F.api.GetLookupMasterTable(F.SK_clientID+"#dynamic_template",E);if(_e&&_e.items)if("string"==typeof _e.items){let Ge=JSON.parse(_e.items);if(Array.isArray(Ge)){for(let st=0;st<Ge.length;st++){const Tt=Ge[st];if(null==Tt)break;{const Kt=Object.keys(Tt)[0],{P1:fr,P2:nn,P3:Yr,P4:io,P5:Go}=Tt[Kt];F.lookup_data_temp1.push([fr,nn,Yr,io,Go])}}yield F.fetchPBData(E+1)}else console.error("Invalid data format - not an array.")}else console.error("response.listOfItems is not a string.");else F.lookup_data_temp1.sort((Ge,st)=>st[2]-Ge[2]),F.listofPowerboardIds=F.lookup_data_temp1.map(Ge=>Ge[0])}catch(_e){console.error("Error:",_e)}})()}fetchFileFromS3(E){this.http.post("https://tbauqko0od.execute-api.ap-south-1.amazonaws.com/directory",{action:"download",type:"xlsx",bucket:"dynamic-excel-reports",folder:`${E.SK}/${E.PK}`,fileName:E.file_location_path_URl},{headers:{"x-api-key":"k41M7KSGwNanITgPP2meB8UibL70kGRj50wTVujH"}}).subscribe(_e=>{console.log("response>>:",_e);let Ge=_e.body;if(Ge)try{const st=atob(Ge),Tt=[];for(let nn=0;nn<st.length;nn+=1024){const Yr=st.slice(nn,nn+1024),io=new Array(Yr.length);for(let Go=0;Go<Yr.length;Go++)io[Go]=Yr.charCodeAt(Go);Tt.push(new Uint8Array(io))}const Kt=new Blob(Tt,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),fr=new File([Kt],E.file_location_path_URl,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.uploadedFile$.next(fr),this.spinner.hide("step1"),console.log("File successfully retrieved and decoded:",fr)}catch(st){this.spinner.hide("step1"),console.error("Error decoding base64 string:",st),Pr().fire({title:"Error",text:"There was an error processing the file.",icon:"error"})}else this.spinner.hide("step1"),console.error("Invalid base64 string:",Ge),Pr().fire({title:"Error",text:"The file format is invalid.",icon:"error"})},_e=>{this.spinner.hide("step1"),console.error("Error fetching file from S3:",_e),Pr().fire({title:"Error",text:"Unable to fetch file from the server.",icon:"error"})})}newModel(){this.isNewModel=!0,Xr.PK="",Xr.SK="",Xr.devices=[],Xr.file_name="",Xr.file_location_path_URl="",Xr.formulas=[],Xr.Values=[],Xr.filters=[],Xr.rows=[],Xr.columns=[],Xr.Others=[],this.account$.next(Xr),this.uploadedFile$.next(null),this.currentStep$.next(1),this.cdr.detectChanges(),this.spinner.hide("step1")}closeModal(){this.isNewModel=!1,this.readBackCheck=!1,this.currentStep$.next(1),this.cdr.detectChanges()}onUpdate(){this.updateDynamicReport()}showSpinner(){}fetchPowerBoardById(E,F,_e,Ge){var st=this;return(0,an.Z)(function*(){try{const Tt=yield st.api.GetLookupMasterTable(st.SK_clientID+"#dynamic_template",E);if(Tt&&Tt.items){let Kt=yield JSON.parse(Tt.items),fr=Kt.findIndex(nn=>nn[Object.keys(nn)[0]].P1===F);if(-1!==fr){if("update"===_e){Kt[fr][`L${fr+1}`]=Ge;const Yr=[];for(let io=0;io<Kt.length;io++){const Go=Object.keys(Kt[io])[0],Vn=`L${io+1}`;if(Go){const yi={[Vn]:Kt[io][Go]},ai=Yr.findIndex(Ti=>Object.keys(Ti)[0]===Vn);-1!==ai?Object.assign(Yr[ai][Vn],Kt[io][Go]):Yr.push(yi)}else console.error(`Original key not found for renaming in data[${io}].`)}Kt=Yr}else"delete"===_e&&(Kt.splice(fr,1),console.log("Data after deleted deleted",Kt));let nn={PK:st.SK_clientID+"#dynamic_template",SK:Tt.SK,items:JSON.stringify(Kt)};yield st.api.UpdateLookupMasterTable(nn),st.editConfirm.emit("edit")}else yield new Promise(nn=>setTimeout(nn,500)),yield st.fetchPowerBoardById(E+1,F,_e,Ge)}else Pr().fire({position:"top-right",icon:"error",title:`ID ${F} not found`,showConfirmButton:!1,timer:1500})}catch(Tt){console.error("Error:",Tt)}})()}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(l.sBO),l.Y36(Qr.t),l.Y36(x.ux),l.Y36(ze.F),l.Y36(G.t2),l.Y36(mo.F0),l.Y36(m.eN),l.Y36(jo.E))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dynamic-template-stepper"]],viewQuery:function(E,F){if(1&E&&l.Gf(rn.J,5),2&E){let _e;l.iGM(_e=l.CRH())&&(F.step1Component=_e.first)}},inputs:{extractDevices:"extractDevices",powerBoardIdsForAcroll:"powerBoardIdsForAcroll"},outputs:{loadPB:"loadPB",submitConfirm:"submitConfirm",editConfirm:"editConfirm"},decls:65,vars:20,consts:[["id","dynamic_template_stepperModal","tabindex","-1","aria-hidden","true","data-bs-backdrop","static",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-xl"],[1,"modal-content"],[1,"modal-header"],["data-bs-dismiss","modal",1,"btn","btn-sm","btn-icon","btn-active-color-primary",3,"click"],[1,"ki-duotone","ki-cross","fs-1"],[1,"path1"],[1,"path2"],[1,"modal-body","py-lg-10","px-lg-10"],["id","kt_create_account_stepper",1,"stepper","stepper-pills","stepper-column","d-flex","flex-column","flex-xl-row","flex-row-fluid"],[1,"card","d-flex","justify-content-center","justify-content-xl-start","flex-row-auto","w-100","w-xl-300px","w-xxl-400px","me-9"],[1,"card-body","px-6","px-lg-10","px-xxl-15","py-20"],[1,"stepper-nav"],[1,"stepper-item",3,"ngClass"],[1,"stepper-wrapper"],[1,"stepper-icon","w-40px","h-40px"],[1,"stepper-check","fas","fa-check"],[1,"stepper-number"],[1,"stepper-label"],[1,"stepper-title"],[1,"stepper-desc","fw-semibold"],[1,"stepper-line","h-40px"],[1,"d-flex","flex-row-fluid","flex-center","bg-body","rounded"],["noValidate","","id","kt_create_account_form",1,"py-20","w-100","w-xl-700px","px-9"],[1,"current"],[4,"ngIf"],[1,"d-flex","flex-stack","pt-10"],[1,"mr-2"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen","name"],[2,"color","white"],[1,"w-100",3,"updateParentModel","defaultValues","isEditMode","enableSubmitButton"],[1,"w-100",3,"updateParentModel","defaultValues","extractDevices"],[1,"w-100",3,"redirectPowerBoard"],["type","button",1,"btn","btn-lg","btn-light-primary","me-3",3,"click"],[1,"fa-solid","fa-arrow-left"],["type","button",1,"btn","fw-bold","btn-lg","btn-primary","me-3","me-3","d-flex",3,"disabled","click"],[1,"indicator-label"],[1,"fa-solid","fa-chevron-right"],["type","button",1,"btn","fw-bold","btn-lg","btn-primary","me-3",3,"disabled","click"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2"),l._uU(5,"Create Invoice"),l.qZA(),l.TgZ(6,"div",4),l.NdJ("click",function(){return F.closeModal()}),l.TgZ(7,"i",5),l._UZ(8,"span",6)(9,"span",7),l.qZA()()(),l.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),l._UZ(18,"i",16),l.TgZ(19,"span",17),l._uU(20,"1"),l.qZA()(),l.TgZ(21,"div",18)(22,"h3",19),l._uU(23," Invoice Details "),l.qZA(),l.TgZ(24,"div",20),l._uU(25," Here You can Name your Model "),l.qZA()()(),l._UZ(26,"div",21),l.qZA(),l.TgZ(27,"div",13)(28,"div",14)(29,"div",15),l._UZ(30,"i",16),l.TgZ(31,"span",17),l._uU(32,"2"),l.qZA()(),l.TgZ(33,"div",18)(34,"h3",19),l._uU(35," Device Configuartion "),l.qZA(),l.TgZ(36,"div",20),l._uU(37," Here you can change your device for Model "),l.qZA()()(),l._UZ(38,"div",21),l.qZA(),l.TgZ(39,"div",13)(40,"div",14)(41,"div",15),l._UZ(42,"i",16),l.TgZ(43,"span",17),l._uU(44,"3"),l.qZA()(),l.TgZ(45,"div",18)(46,"h3",19),l._uU(47," Completed "),l.qZA(),l.TgZ(48,"div",20),l._uU(49," Woah, we are here "),l.qZA()()()()()()(),l.TgZ(50,"div",22)(51,"form",23)(52,"div",24),l.YNc(53,Gr,2,3,"ng-container",25),l.YNc(54,on,2,3,"ng-container",25),l.YNc(55,bn,2,0,"ng-container",25),l.qZA(),l.TgZ(56,"div",26)(57,"div",27),l.YNc(58,Xn,4,0,"ng-container",25),l.qZA(),l.YNc(59,Po,6,2,"ng-container",25),l.YNc(60,Ni,5,2,"ng-container",25),l.YNc(61,_a,5,2,"ng-container",25),l.qZA()()()()()()(),l.TgZ(62,"ngx-spinner",28)(63,"p",29),l._uU(64,"Loading all the assets Please Wait... "),l.qZA()()()),2&E&&(l.xp6(15),l.Q6J("ngClass",l.WLB(12,vs,1===F.currentStep$.value,F.currentStep$.value>1)),l.xp6(12),l.Q6J("ngClass",l.WLB(15,vs,2===F.currentStep$.value,F.currentStep$.value>2)),l.xp6(12),l.Q6J("ngClass",l.VKq(18,ei,3===F.currentStep$.value)),l.xp6(14),l.Q6J("ngIf",1===F.currentStep$.value&&F.readBackCheck||1===F.currentStep$.value&&F.isNewModel),l.xp6(1),l.Q6J("ngIf",2===F.currentStep$.value),l.xp6(1),l.Q6J("ngIf",3===F.currentStep$.value),l.xp6(3),l.Q6J("ngIf",1!==F.currentStep$.value),l.xp6(1),l.Q6J("ngIf",F.currentStep$.value!==F.formsCount&&F.currentStep$.value<F.formsCount-1),l.xp6(1),l.Q6J("ngIf",F.currentStep$.value!==F.formsCount&&F.currentStep$.value===F.formsCount-1&&!F.readBackCheck),l.xp6(1),l.Q6J("ngIf",F.currentStep$.value!==F.formsCount&&F.currentStep$.value===F.formsCount-1&&F.readBackCheck),l.xp6(1),l.Q6J("fullScreen",!0)("name","step1"))},dependencies:[S.mk,S.O5,X._Y,X.JL,X.F,G.Ro,zt,rn.J,Ir]})),ye})();function Is(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",17),l.NdJ("click",function(){l.CHM(K);const F=l.oxw();return l.KtG(F.openModal())}),l.TgZ(1,"a",18),l._UZ(2,"app-keenicon",19),l._uU(3," Create Invoice "),l.qZA()()}}function qa(le,ye){1&le&&(l.TgZ(0,"tr",20)(1,"th"),l._uU(2,"ID"),l.qZA(),l.TgZ(3,"th"),l._uU(4,"Name"),l.qZA(),l.TgZ(5,"th"),l._uU(6,"File Name"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Report Type"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Updated At"),l.qZA(),l.TgZ(11,"th",21),l._uU(12,"Work Lab"),l.qZA(),l.TgZ(13,"th",21),l._uU(14,"Edit"),l.qZA(),l.TgZ(15,"th",21),l._uU(16,"Delete"),l.qZA()())}function Bi(le,ye){1&le&&(l.TgZ(0,"tr",20)(1,"th"),l._uU(2,"ID"),l.qZA(),l.TgZ(3,"th"),l._uU(4,"Name"),l.qZA(),l.TgZ(5,"th"),l._uU(6,"File Name"),l.qZA(),l.TgZ(7,"th"),l._uU(8,"Report Type"),l.qZA(),l.TgZ(9,"th"),l._uU(10,"Updated At"),l.qZA(),l.TgZ(11,"th",21),l._uU(12,"Work Lab"),l.qZA()())}let ua=(()=>{var le;class ye{constructor(E,F,_e,Ge,st,Tt,Kt){(0,O.Z)(this,"api",void 0),(0,O.Z)(this,"sharedService",void 0),(0,O.Z)(this,"cdr",void 0),(0,O.Z)(this,"spinner",void 0),(0,O.Z)(this,"locationPermissionService",void 0),(0,O.Z)(this,"templateService",void 0),(0,O.Z)(this,"router",void 0),(0,O.Z)(this,"dynamicTemplateStepperComponent",void 0),(0,O.Z)(this,"hideDeleteButton",!0),(0,O.Z)(this,"getLoggedUser",void 0),(0,O.Z)(this,"SK_clientID",void 0),(0,O.Z)(this,"user_companyID",void 0),(0,O.Z)(this,"username",void 0),(0,O.Z)(this,"extractDevices",[]),(0,O.Z)(this,"lookup_data_temp_dr",[]),(0,O.Z)(this,"listofDRIds",void 0),(0,O.Z)(this,"maxlength",void 0),(0,O.Z)(this,"powerboard_table",[]),(0,O.Z)(this,"columnDatatable",void 0),(0,O.Z)(this,"pbTableData",void 0),(0,O.Z)(this,"isModalOpen",!1),(0,O.Z)(this,"routerSubscription",void 0),(0,O.Z)(this,"allPermissions_user",void 0),(0,O.Z)(this,"hidingLink",void 0),this.api=E,this.sharedService=F,this.cdr=_e,this.spinner=Ge,this.locationPermissionService=st,this.templateService=Tt,this.router=Kt}ngOnInit(){this.getLoggedUser=this.sharedService.getLoggedUserDetails(),this.SK_clientID=this.getLoggedUser.attributes["custom:clientID"],this.user_companyID=this.getLoggedUser.attributes["custom:companyID"],this.username=this.getLoggedUser.attributes["custom:username"];const E=localStorage.getItem("permissionDetails");this.allPermissions_user=E?JSON.parse(E):[],this.checkPermission(),this.loadInitData(),this.routerSubscription=this.router.events.subscribe(F=>{})}ngAfterViewInit(){}checkPermission(){const E=this.allPermissions_user,F=E.includes("DynamicHtmlTemplate - Update"),_e=E.includes("DynamicHtmlTemplate - View");this.hidingLink=F,console.log("CHECK PERMISSION - Update:",F),console.log("CHECK PERMISSION - View:",_e),F||_e?this.hideDeleteButton=F:(console.warn("User lacks required permissions. Redirecting to 404."),this.router.navigate(["/404"]))}loadInitData(){var E=this;return(0,an.Z)(function*(){E.spinner.show();try{E.extractValidDevices(),yield Promise.all([E.fetchDRData_redirect(1)]),console.log("All data loaded successfully")}catch(F){console.error("Error loading data:",F)}})()}extractValidDevices(){this.locationPermissionService.fetchGlobalLocationTree().then(E=>{if(!E)throw new Error("No data returned");E.forEach(F=>{"device"===F.node_type&&(Array.isArray(F.text)&&(F.text=F.text[0]),this.extractDevices.push({mn:F.mn,label:F.text+"-"+F.mn}))}),console.log("Extracted Devices:",this.extractDevices)}).catch(E=>{console.error("Failed to fetch or process data",E)})}fetchDRData_redirect(E){var F=this;return(0,an.Z)(function*(){yield F.coreFetchData("dynamic_template",E,"lookup_data_temp_dr","desc")})()}coreFetchData(E,F,_e,Ge){var st=this;return(0,an.Z)(function*(){try{const Tt=yield st.api.GetLookupMasterTable(`${st.SK_clientID}#${E}`,F);if(Tt&&Tt.items)if("string"==typeof Tt.items){const Kt=JSON.parse(Tt.items);if(Array.isArray(Kt)){for(const fr of Kt)if(fr){const nn=Object.keys(fr)[0],{P1:Yr,P2:io,P3:Go,P4:Vn,P5:yi}=fr[nn];st[_e].push([Yr,io,Go,Vn,yi])}yield st.coreFetchData(E,F+1,_e,Ge)}else console.error("Invalid data format - not an array.")}else console.error("response.items is not a string.");else st[_e].sort((Kt,fr)=>"asc"===Ge?Kt[3]-fr[3]:fr[3]-Kt[3]),"dynamic_template"===E&&(st.listofDRIds=st[_e].map(Kt=>Kt[0]),console.log("checkk",st.lookup_data_temp_dr),st.showDatatable(st.lookup_data_temp_dr))}catch(Tt){st.spinner.show(),console.error(`Error in coreFetchData for ${E}:`,Tt)}})()}createLookUpDynamicReport(E,F){this.api.GetLookupMasterTable(this.SK_clientID+"#dynamic_template",F).then(_e=>{let Ge=[];if(null!=_e&&_e.items&&"string"==typeof _e.items&&(Ge=JSON.parse(_e.items)),null!=_e&&Ge.length<this.maxlength){let st=[];_e.items&&"string"==typeof _e.items&&JSON.parse(_e.items).forEach(fr=>{for(const nn in fr)Object.prototype.hasOwnProperty.call(fr,nn)&&st.push(fr[nn])}),st.unshift(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt})),console.log("newdata 11111111 :>> ",st);let Tt={PK:this.SK_clientID+"#dynamic_template",SK:_e.SK,createdTime:"",updatedTime:"",items:JSON.stringify(st)};this.api.UpdateLookupMasterTable(Tt).then(Kt=>{console.log("createResponse :>> ",Kt)}).catch(Kt=>{console.log("err :>> ",Kt)})}else if(null==_e){let st=[];st.push(E),st=st.map((Kt,fr)=>({[`L${fr+1}`]:Kt}));let Tt={SK:F,PK:this.SK_clientID+"#dynamic_template",items:JSON.stringify(st)};this.api.CreateLookupMasterTable(Tt).then(Kt=>{}).catch(Kt=>{})}else this.createLookUpDynamicReport(E,F+1)})}fetchPowerBoardById(E,F,_e,Ge){var st=this;return(0,an.Z)(function*(){try{const Tt=yield st.api.GetLookupMasterTable(st.SK_clientID+"#dynamic_template",E);if(Tt&&Tt.items){let Kt=yield JSON.parse(Tt.items),fr=Kt.findIndex(nn=>nn[Object.keys(nn)[0]].P1===F);if(-1!==fr){if("update"===_e){Kt[fr][`L${fr+1}`]=Ge;const Yr=[];for(let io=0;io<Kt.length;io++){const Go=Object.keys(Kt[io])[0],Vn=`L${io+1}`;if(Go){const yi={[Vn]:Kt[io][Go]},ai=Yr.findIndex(Ti=>Object.keys(Ti)[0]===Vn);-1!==ai?Object.assign(Yr[ai][Vn],Kt[io][Go]):Yr.push(yi)}else console.error(`Original key not found for renaming in data[${io}].`)}Kt=Yr}else"delete"===_e&&(Kt.splice(fr,1),console.log("Data after deleted deleted",Kt));let nn={PK:st.SK_clientID+"#dynamic_template",SK:Tt.SK,items:JSON.stringify(Kt)};yield st.api.UpdateLookupMasterTable(nn)}else yield new Promise(nn=>setTimeout(nn,500)),yield st.fetchPowerBoardById(E+1,F,_e,Ge)}else Pr().fire({position:"top-right",icon:"error",title:`ID ${F} not found`,showConfirmButton:!1,timer:1500})}catch(Tt){console.error("Error:",Tt)}})()}createNewDynamicReport(E){}updateDynamicReport(E){}deleteDynamicReport(E){if(E?.id){const F={PK:E.id,SK:this.SK_clientID+"#dynamic_template"};this.templateService.deleteJsonFromS3({PK:E.id,SK:this.SK_clientID+"#dynamic_template",file_name:E.fileName});const Ge={P1:E.id,P2:E.name,P3:E.fileName,P4:Math.ceil((new Date).getTime()/1e3)};Pr().fire({position:"center",title:"Are you sure?",text:"You won\u2019t get these details back again",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, let me think",allowOutsideClick:!1}).then(st=>{st.isConfirmed?this.api.DeleteDynamicReports(F).then(()=>{this.fetchPowerBoardById(1,E.id,"delete",Ge),Pr().fire("Removed!","Powerboard removed successfully.","success");const Tt=this.lookup_data_temp_dr.findIndex(Kt=>Kt[0]===E.id);this.lookup_data_temp_dr.splice(Tt,1),console.log("lookup_data_temp_pb :>> ",this.lookup_data_temp_dr),this.showDatatable(this.lookup_data_temp_dr)}).catch(Tt=>console.error("Delete error:",Tt)):Pr().fire("Cancelled","Powerboard not removed","error")})}}goToWorkSpace(E){}showDatatable(E){this.columnDatatable=[{data:"id"},{data:"name"},{data:"fileName"},{data:"type"},{data:"updatedData"}];let _e="btn btn-sm btn-primary editdelete ",Ge="btn btn-sm btn-primary editdelete",st="btn btn-sm btn-danger editdelete ";if(this.powerboard_table=[],typeof E<"u")for(let Kt=0;Kt<E.length;Kt++){let Go=E[Kt][3];this.powerboard_table.push({id:E[Kt][0],name:E[Kt][1],fileName:E[Kt][2],type:E[Kt][4],updatedData:new Date(1e3*Go).toDateString()+" "+new Date(1e3*Go).toLocaleTimeString()})}else this.powerboard_table=[];$("#dynamic_template_table").off("click"),$("#dynamic_template_table").on("click",".editdelete",function(){let Kt=$(this).closest("tr"),fr=Tt.pbTableData.row(Kt);this.className==st&&Tt.deleteDynamicReport(fr.data()),this.className==_e&&(Tt.editHelper(fr.data()),this.captureStatus=!1),this.className==Ge&&Tt.router.navigateByUrl(`TimeMachine/TemplateWorkLab/${fr.data().id}`)}),!0===this.hideDeleteButton?this.columnDatatable.push({defaultContent:"<button class='"+Ge+"' data-bs-dismiss='modal' ><i class='fa-solid fa-flask'></i></button>"},{defaultContent:"<button class='"+_e+"' data-bs-toggle='modal' data-bs-target='#dynamic_template_stepperModal' ><i class='fa fa-edit'></i></button>"},{defaultContent:"<button class='"+st+"'><i class='fa fa-trash'></i></button>"}):this.columnDatatable.push({defaultContent:"<button class='"+Ge+"' data-bs-dismiss='modal' ><i class='fa-solid fa-flask'></i></button>"}),this.getLookupTableData(this.powerboard_table,this.columnDatatable);let Tt=this}getLookupTableData(E,F){this.pbTableData=$("#dynamic_template_table").DataTable({pagingType:"full_numbers",destroy:!0,lengthChange:!0,responsive:!0,data:E,order:[[3,"date"]],columnDefs:[{type:"date",targets:3}],columns:F,drawCallback:function(){$("div.dataTables_wrapper").css("margin","0")}}),this.spinner.hide()}openModal(){this.dynamicTemplateStepperComponent.showSpinner(),this.isModalOpen=!0,this.dynamicTemplateStepperComponent.newModel()}closeModal(){this.isModalOpen=!1}editHelper(E){this.dynamicTemplateStepperComponent.showSpinner(),this.api.GetDynamicReports(E.id,this.SK_clientID+"#dynamic_template").then(F=>{F&&(this.dynamicTemplateStepperComponent.readBack(F),this.cdr.detectChanges())})}onConfirmSubmit(E){this.lookup_data_temp_dr=[],this.fetchDRData_redirect(1)}onConfirmUpdate(E){this.lookup_data_temp_dr=[],this.fetchDRData_redirect(1)}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)(l.Y36(Qr.t),l.Y36(ze.F),l.Y36(l.sBO),l.Y36(G.t2),l.Y36(Qo.G),l.Y36(jo.E),l.Y36(mo.F0))}),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-dynamic-template-creator"]],viewQuery:function(E,F){if(1&E&&l.Gf(Hr,5),2&E){let _e;l.iGM(_e=l.CRH())&&(F.dynamicTemplateStepperComponent=_e.first)}},decls:22,vars:5,consts:[["id","kt_wrapper",1,"d-flex","flex-column","flex-row-fluid","wrapper"],["id","kt_content",1,"content","d-flex","flex-column","flex-column-fluid"],[1,"d-flex","flex-column-fluid"],[1,"container"],[1,"card","mb-5","mb-xl-8"],[1,"card-header","border-0","pt-5"],[1,"card-title","align-items-start","flex-column"],[1,"card-label","fw-bolder","fs-3","mb-1"],[1,"text-muted","mt-1","fw-bold","fs-7"],["class","card-toolbar","data-bs-toggle","tooltip","data-bs-placement","top","data-bs-trigger","hover","title","Click to add a Model",3,"click",4,"ngIf"],[1,"card-body","py-3"],[1,"table-responsive"],["id","dynamic_template_table",1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4"],["class","fw-bolder",4,"ngIf"],[3,"extractDevices","submitConfirm","editConfirm","loadPB"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],["data-bs-toggle","tooltip","data-bs-placement","top","data-bs-trigger","hover","title","Click to add a Model",1,"card-toolbar",3,"click"],["data-bs-toggle","modal","data-bs-target","#dynamic_template_stepperModal",1,"btn","btn-sm","btn-light-primary"],["name","plus",1,"fs-3"],[1,"fw-bolder"],[1,"w-100px"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6)(7,"span",7),l._uU(8,"Inovice template Creator"),l.qZA(),l.TgZ(9,"span",8),l._uU(10,"here you can create invoices for your Bills"),l.qZA()(),l.YNc(11,Is,4,0,"div",9),l.qZA(),l.TgZ(12,"div",10)(13,"div",11)(14,"table",12)(15,"thead"),l.YNc(16,qa,17,0,"tr",13),l.YNc(17,Bi,13,0,"tr",13),l.qZA()()()()()()()()(),l.TgZ(18,"app-dynamic-template-stepper",14),l.NdJ("submitConfirm",function(Ge){return F.onConfirmSubmit(Ge)})("editConfirm",function(Ge){return F.onConfirmUpdate(Ge)})("loadPB",function(Ge){return F.goToWorkSpace(Ge)}),l.qZA(),l.TgZ(19,"ngx-spinner",15)(20,"p",16),l._uU(21,"loading Dynamic Reports Creator... "),l.qZA()()),2&E&&(l.xp6(11),l.Q6J("ngIf",F.hidingLink),l.xp6(5),l.Q6J("ngIf",!0===F.hideDeleteButton),l.xp6(1),l.Q6J("ngIf",!1===F.hideDeleteButton),l.xp6(1),l.Q6J("extractDevices",F.extractDevices),l.xp6(1),l.Q6J("fullScreen",!0))},dependencies:[S.O5,G.Ro,No.q,Hr]})),ye})();var va=re(28613);const da=[{path:"",component:zn},{path:"reports",component:Wn.X},{path:"reports/:id",component:Wn.X,runGuardsAndResolvers:"always"},{path:"DynamicExcelReport",component:Ao},{path:"WorkLab",component:hr},{path:"WorkLab/:id",component:hr},{path:"DynamicTemplateCreator",component:ua},{path:"TemplateWorkLab",component:va.Z},{path:"TemplateWorkLab/:id",component:va.Z}];let os=(()=>{var le;class ye{}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)}),(0,O.Z)(ye,"\u0275mod",l.oAB({type:le})),(0,O.Z)(ye,"\u0275inj",l.cJS({imports:[mo.Bz.forChild(da),mo.Bz]})),ye})(),Es=(()=>{var le;class ye extends ld{constructor(...E){super(...E),(0,O.Z)(this,"_value",void 0)}writeValue(E){this._value=E}registerOnChange(E){this.onChange=E}registerOnTouched(E){this.onTouched=E}onChange(E){this._value=E}onTouched(){}getName(){return this.field.key?this.field.key.toString():""}get formControlInstance1(){return this.formControl}onSelect(E,F){this.onChange(E[0].value),this.field?.templateOptions?.change?this.field.templateOptions.change(E[0].value,F):console.warn("Change handler is not defined in templateOptions")}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(){let K;return function(F){return(K||(K=l.n5z(le)))(F||le)}}()),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-ngx-select-formly"]],features:[l._Bn([{provide:X.JU,useExisting:(0,l.Gpc)(()=>le),multi:!0}]),l.qOj],decls:1,vars:7,consts:[[1,"custom-select-dropdown",3,"name","formControl","allowClear","items","optionValueField","optionTextField","placeholder","selectionChanges"]],template:function(E,F){1&E&&(l.TgZ(0,"ngx-select",0),l.NdJ("selectionChanges",function(Ge){return F.onSelect(Ge,null==F.field.templateOptions?null:F.field.templateOptions.index)}),l.qZA()),2&E&&l.Q6J("name",F.getName())("formControl",F.formControlInstance1)("allowClear",(null==F.field.templateOptions?null:F.field.templateOptions.allowClear)||!1)("items",null==F.field.templateOptions?null:F.field.templateOptions.items)("optionValueField",(null==F.field.templateOptions?null:F.field.templateOptions.optionValueField)||"value")("optionTextField",(null==F.field.templateOptions?null:F.field.templateOptions.optionTextField)||"text")("placeholder",(null==F.field.templateOptions?null:F.field.templateOptions.placeholder)||"Select...")},dependencies:[X.JJ,X.oH,qr.O2],encapsulation:2})),ye})();function Ts(le,ye){1&le&&(l.TgZ(0,"span",9),l._uU(1,"*"),l.qZA())}function js(le,ye){if(1&le&&(l.TgZ(0,"label",7),l._uU(1),l.YNc(2,Ts,2,0,"span",8),l.qZA()),2&le){const K=l.oxw(2);l.uIk("for",K.id),l.xp6(1),l.hij(" ",K.props.label," "),l.xp6(1),l.Q6J("ngIf",K.props.required&&!0!==K.props.hideRequiredMarker)}}function pl(le,ye){if(1&le&&l.YNc(0,js,3,3,"label",6),2&le){const K=l.oxw();l.Q6J("ngIf",K.props.label&&!0!==K.props.hideLabel)}}function zs(le,ye){if(1&le&&(l.ynx(0),l.GkF(1,10),l.BQk()),2&le){l.oxw();const K=l.MAs(1);l.xp6(1),l.Q6J("ngTemplateOutlet",K)}}function As(le,ye){}function tl(le,ye){if(1&le&&(l.ynx(0),l.GkF(1,10),l.BQk()),2&le){l.oxw();const K=l.MAs(1);l.xp6(1),l.Q6J("ngTemplateOutlet",K)}}function wa(le,ye){if(1&le&&(l.TgZ(0,"div",11),l._UZ(1,"formly-validation-message",12),l.qZA()),2&le){const K=l.oxw();l.Udp("display","block"),l.xp6(1),l.MGl("id","",K.id,"-formly-validation-error"),l.Q6J("field",K.field)}}function Al(le,ye){if(1&le&&(l.TgZ(0,"small",13),l._uU(1),l.qZA()),2&le){const K=l.oxw();l.xp6(1),l.Oqu(K.props.description)}}const $a=["fieldTypeTemplate"];let Kc=(()=>{class le extends Dc{}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-wrapper-form-field"]],features:[l.qOj],decls:9,vars:8,consts:[["labelTemplate",""],[1,"mb-3"],[4,"ngIf"],["fieldComponent",""],["class","invalid-feedback",3,"display",4,"ngIf"],["class","form-text text-muted",4,"ngIf"],["class","form-label",4,"ngIf"],[1,"form-label"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"],[3,"ngTemplateOutlet"],[1,"invalid-feedback"],["role","alert",3,"id","field"],[1,"form-text","text-muted"]],template:function(K,E){1&K&&(l.YNc(0,pl,1,1,"ng-template",null,0,l.W1O),l.TgZ(2,"div",1),l.YNc(3,zs,2,1,"ng-container",2),l.YNc(4,As,0,0,"ng-template",null,3,l.W1O),l.YNc(6,tl,2,1,"ng-container",2),l.YNc(7,wa,2,4,"div",4),l.YNc(8,Al,2,1,"small",5),l.qZA()),2&K&&(l.xp6(2),l.ekj("form-floating","floating"===E.props.labelPosition)("has-error",E.showError),l.xp6(1),l.Q6J("ngIf","floating"!==E.props.labelPosition),l.xp6(3),l.Q6J("ngIf","floating"===E.props.labelPosition),l.xp6(1),l.Q6J("ngIf",E.showError),l.xp6(1),l.Q6J("ngIf",E.props.description))},dependencies:[xu,S.O5,S.tP],encapsulation:2}),le})(),Ws=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Zc.forChild({wrappers:[{name:"form-field",component:Kc}]})]]}),le})(),al=(()=>{class le extends ld{constructor(K){super(),this.hostContainerRef=K}set content(K){K&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(K)}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(l.s_b,8))},le.\u0275dir=l.lG2({type:le,viewQuery:function(K,E){if(1&K&&l.Gf($a,7),2&K){let F;l.iGM(F=l.CRH())&&(E.content=F.first)}},features:[l.qOj]}),le})();function Jd(le,ye){if(1&le&&l._UZ(0,"input",3),2&le){const K=l.oxw(2);l.ekj("is-invalid",K.showError),l.Q6J("type",K.type)("formControl",K.formControl)("formlyAttributes",K.field),l.uIk("aria-describedby",K.id+"-formly-validation-error")("aria-invalid",K.showError)}}function Ol(le,ye){if(1&le&&l._UZ(0,"input",4),2&le){const K=l.oxw(2);l.ekj("is-invalid",K.showError),l.Q6J("formControl",K.formControl)("formlyAttributes",K.field),l.uIk("aria-describedby",K.id+"-formly-validation-error")("aria-invalid",K.showError)}}function ku(le,ye){if(1&le&&(l.YNc(0,Jd,1,7,"input",1),l.YNc(1,Ol,1,6,"ng-template",null,2,l.W1O)),2&le){const K=l.MAs(2),E=l.oxw();l.Q6J("ngIf","number"!==E.type)("ngIfElse",K)}}let dc=(()=>{class le extends al{get type(){return this.props.type||"text"}}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field-input"]],features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-control",3,"type","formControl","formlyAttributes","is-invalid",4,"ngIf","ngIfElse"],["numberTmp",""],[1,"form-control",3,"type","formControl","formlyAttributes"],["type","number",1,"form-control",3,"formControl","formlyAttributes"]],template:function(K,E){1&K&&l.YNc(0,ku,3,2,"ng-template",null,0,l.W1O)},dependencies:[S.O5,X.Fj,X.JJ,X.oH,Gl,X.wV],encapsulation:2,changeDetection:0}),le})(),vl=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Ws,Zc.forChild({types:[{name:"input",component:dc,wrappers:["form-field"]},{name:"string",extends:"input"},{name:"number",extends:"input",defaultOptions:{props:{type:"number"}}},{name:"integer",extends:"input",defaultOptions:{props:{type:"number"}}}]})]]}),le})();function Pd(le,ye){if(1&le&&l._UZ(0,"textarea",1),2&le){const K=l.oxw();l.ekj("is-invalid",K.showError),l.Q6J("formControl",K.formControl)("cols",K.props.cols)("rows",K.props.rows)("formlyAttributes",K.field),l.uIk("aria-describedby",K.id+"-formly-validation-error")("aria-invalid",K.showError)}}let yc=(()=>{class le extends al{constructor(){super(...arguments),this.defaultOptions={props:{cols:1,rows:1}}}}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field-textarea"]],features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-control",3,"formControl","cols","rows","formlyAttributes"]],template:function(K,E){1&K&&l.YNc(0,Pd,1,8,"ng-template",null,0,l.W1O)},dependencies:[X.Fj,X.JJ,X.oH,Gl],encapsulation:2,changeDetection:0}),le})(),Ss=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Ws,Zc.forChild({types:[{name:"textarea",component:yc,wrappers:["form-field"]}]})]]}),le})(),Ys=(()=>{class le{transform(K,E){return K instanceof Od.y?this.dispose():K=this.observableOf(K,E),K.pipe((0,id.U)(F=>this.transformOptions(F,E)))}ngOnDestroy(){this.dispose()}transformOptions(K,E){const F=this.transformSelectProps(E),_e=[],Ge={};return K?.forEach(st=>{const Tt=this.transformOption(st,F);if(Tt.group){const Kt=Ge[Tt.label];void 0===Kt?Ge[Tt.label]=_e.push(Tt)-1:Tt.group.forEach(fr=>_e[Kt].group.push(fr))}else _e.push(Tt)}),_e}transformOption(K,E){const F=E.groupProp(K);return Array.isArray(F)?{label:E.labelProp(K),group:F.map(_e=>this.transformOption(_e,E))}:(K={label:E.labelProp(K),value:E.valueProp(K),disabled:!!E.disabledProp(K)},F?{label:F,group:[K]}:K)}transformSelectProps(K){const E=K?.props||K?.templateOptions||{},F=_e=>"function"==typeof _e?_e:Ge=>Ge[_e];return{groupProp:F(E.groupProp||"group"),labelProp:F(E.labelProp||"label"),valueProp:F(E.valueProp||"value"),disabledProp:F(E.disabledProp||"disabled")}}dispose(){this._options&&(this._options.complete(),this._options=null),this._subscription&&(this._subscription.unsubscribe(),this._subscription=null)}observableOf(K,E){return this.dispose(),E&&E.options&&E.options.fieldChanges&&(this._subscription=E.options.fieldChanges.pipe((0,Js.h)(({property:F,type:_e,field:Ge})=>"expressionChanges"===_e&&(0===F.indexOf("templateOptions.options")||0===F.indexOf("props.options"))&&Ge===E&&Array.isArray(Ge.props.options)&&!!this._options),(0,Yc.b)(()=>this._options.next(E.props.options))).subscribe()),this._options=new Mn.X(K),this._options.asObservable()}}return le.\u0275fac=function(K){return new(K||le)},le.\u0275pipe=l.Yjl({name:"formlySelectOptions",type:le,pure:!0}),le})(),Ap=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({}),le})();function Ou(le,ye){if(1&le&&(l.TgZ(0,"div",2),l._UZ(1,"input",3),l.TgZ(2,"label",4),l._uU(3),l.qZA()()),2&le){const K=ye.$implicit,E=ye.index,F=l.oxw(2);l.ekj("form-check-inline","inline"===F.props.formCheck),l.xp6(1),l.ekj("is-invalid",F.showError),l.Q6J("id",F.id+"_"+E)("name",F.field.name||F.id)("value",K.value)("formControl",K.disabled?F.disabledControl:F.formControl)("formlyAttributes",F.field),l.uIk("value",K.value)("aria-describedby",F.id+"-formly-validation-error")("aria-invalid",F.showError),l.xp6(1),l.Q6J("for",F.id+"_"+E),l.xp6(1),l.hij(" ",K.label," ")}}function kp(le,ye){if(1&le&&(l.YNc(0,Ou,4,14,"div",1),l.ALo(1,"async"),l.ALo(2,"formlySelectOptions")),2&le){const K=l.oxw();l.Q6J("ngForOf",l.lcZ(1,1,l.xi3(2,3,K.props.options,K.field)))}}let Bu=(()=>{class le extends al{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}get disabledControl(){return new X.NI({value:this.formControl.value,disabled:!0})}}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field-radio"]],features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"form-check-inline",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio",1,"form-check-input",3,"id","name","value","formControl","formlyAttributes"],[1,"form-check-label",3,"for"]],template:function(K,E){1&K&&l.YNc(0,kp,3,6,"ng-template",null,0,l.W1O)},dependencies:[S.sg,X._,X.Fj,X.JJ,X.oH,Gl,S.Ov,Ys],encapsulation:2,changeDetection:0}),le})(),us=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Ws,Ap,Zc.forChild({types:[{name:"radio",component:Bu,wrappers:["form-field"]}]})]]}),le})();function Yd(le,ye){1&le&&(l.TgZ(0,"span",6),l._uU(1,"*"),l.qZA())}function Wu(le,ye){if(1&le&&(l.TgZ(0,"label",4),l._uU(1),l.YNc(2,Yd,2,0,"span",5),l.qZA()),2&le){const K=l.oxw(2);l.Q6J("for",K.id),l.xp6(1),l.hij(" ",K.props.label," "),l.xp6(1),l.Q6J("ngIf",K.props.required&&!0!==K.props.hideRequiredMarker)}}const Du=function(le,ye){return{"form-check-inline":le,"form-switch":ye}};function pc(le,ye){if(1&le&&(l.TgZ(0,"div",1),l._UZ(1,"input",2),l.YNc(2,Wu,3,3,"label",3),l.qZA()),2&le){const K=l.oxw();l.Q6J("ngClass",l.WLB(11,Du,"inline"===K.props.formCheck||"inline-switch"===K.props.formCheck,"switch"===K.props.formCheck||"inline-switch"===K.props.formCheck)),l.xp6(1),l.ekj("is-invalid",K.showError)("position-static","nolabel"===K.props.formCheck),l.Q6J("indeterminate",K.props.indeterminate&&null==K.formControl.value)("formControl",K.formControl)("formlyAttributes",K.field),l.uIk("aria-describedby",K.id+"-formly-validation-error")("aria-invalid",K.showError),l.xp6(1),l.Q6J("ngIf","nolabel"!==K.props.formCheck)}}let Vc=(()=>{class le extends al{constructor(){super(...arguments),this.defaultOptions={props:{indeterminate:!0,hideLabel:!0,formCheck:"default"}}}}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field-checkbox"]],features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"indeterminate","formControl","formlyAttributes"],["class","form-check-label",3,"for",4,"ngIf"],[1,"form-check-label",3,"for"],["aria-hidden","true",4,"ngIf"],["aria-hidden","true"]],template:function(K,E){1&K&&l.YNc(0,pc,3,14,"ng-template",null,0,l.W1O)},dependencies:[S.mk,X.Wl,X.JJ,X.oH,Gl,S.O5],encapsulation:2,changeDetection:0}),le})(),Lu=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Ws,Zc.forChild({types:[{name:"checkbox",component:Vc,wrappers:["form-field"]},{name:"boolean",extends:"checkbox"}]})]]}),le})();const eh=function(le,ye){return{"form-check-inline":le,"form-switch":ye}};function Lp(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",2)(1,"input",3),l.NdJ("change",function(F){const Ge=l.CHM(K).$implicit,st=l.oxw(2);return l.KtG(st.onChange(Ge.value,F.target.checked))}),l.qZA(),l.TgZ(2,"label",4),l._uU(3),l.qZA()()}if(2&le){const K=ye.$implicit,E=ye.index,F=l.oxw(2);l.Q6J("ngClass",l.WLB(12,eh,"inline"===F.props.formCheck||"inline-switch"===F.props.formCheck,"switch"===F.props.formCheck||"inline-switch"===F.props.formCheck)),l.xp6(1),l.ekj("is-invalid",F.showError),l.Q6J("id",F.id+"_"+E)("value",K.value)("checked",F.isChecked(K))("formlyAttributes",F.field)("disabled",F.formControl.disabled||K.disabled),l.uIk("aria-describedby",F.id+"-formly-validation-error")("aria-invalid",F.showError),l.xp6(1),l.Q6J("for",F.id+"_"+E),l.xp6(1),l.hij(" ",K.label," ")}}function md(le,ye){if(1&le&&(l.YNc(0,Lp,4,15,"div",1),l.ALo(1,"async"),l.ALo(2,"formlySelectOptions")),2&le){const K=l.oxw();l.Q6J("ngForOf",l.lcZ(1,1,l.xi3(2,3,K.props.options,K.field)))}}let gd=(()=>{class le extends al{constructor(){super(...arguments),this.defaultOptions={props:{formCheck:"default"}}}onChange(K,E){this.formControl.markAsDirty(),this.formControl.patchValue("array"===this.props.type?E?[...this.formControl.value||[],K]:[...this.formControl.value||[]].filter(F=>F!==K):{...this.formControl.value,[K]:E}),this.formControl.markAsTouched()}isChecked(K){const E=this.formControl.value;return E&&("array"===this.props.type?-1!==E.indexOf(K.value):E[K.value])}}return le.\u0275fac=function(){let ye;return function(E){return(ye||(ye=l.n5z(le)))(E||le)}}(),le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field-multicheckbox"]],features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-check",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-check",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"id","value","checked","formlyAttributes","disabled","change"],[1,"form-check-label",3,"for"]],template:function(K,E){1&K&&l.YNc(0,md,3,6,"ng-template",null,0,l.W1O)},dependencies:[S.sg,S.mk,Gl,S.Ov,Ys],encapsulation:2,changeDetection:0}),le})(),zc=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Ws,Ap,Zc.forChild({types:[{name:"multicheckbox",component:gd,wrappers:["form-field"]}]})]]}),le})();function Iu(le,ye){if(1&le&&(l.TgZ(0,"option",8),l._uU(1),l.qZA()),2&le){const K=l.oxw().$implicit;l.Q6J("ngValue",K.value)("disabled",K.disabled),l.xp6(1),l.hij(" ",K.label," ")}}function ru(le,ye){if(1&le&&(l.TgZ(0,"option",8),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.Q6J("ngValue",K.value)("disabled",K.disabled),l.xp6(1),l.hij(" ",K.label," ")}}function Qd(le,ye){if(1&le&&(l.TgZ(0,"optgroup",9),l.YNc(1,ru,2,3,"option",10),l.qZA()),2&le){const K=l.oxw().$implicit;l.Q6J("label",K.label),l.xp6(1),l.Q6J("ngForOf",K.group)}}function fp(le,ye){if(1&le&&(l.ynx(0),l.YNc(1,Iu,2,3,"option",6),l.YNc(2,Qd,2,2,"ng-template",null,7,l.W1O),l.BQk()),2&le){const K=ye.$implicit,E=l.MAs(3);l.xp6(1),l.Q6J("ngIf",!K.group)("ngIfElse",E)}}function th(le,ye){if(1&le&&(l.ynx(0),l.YNc(1,fp,4,2,"ng-container",5),l.BQk()),2&le){const K=ye.ngIf;l.xp6(1),l.Q6J("ngForOf",K)}}function rh(le,ye){if(1&le&&(l.TgZ(0,"select",3),l.YNc(1,th,2,1,"ng-container",4),l.ALo(2,"async"),l.ALo(3,"formlySelectOptions"),l.qZA()),2&le){const K=l.oxw(2);l.ekj("is-invalid",K.showError),l.Q6J("formControl",K.formControl)("compareWith",K.props.compareWith)("formlyAttributes",K.field),l.uIk("aria-describedby",K.id+"-formly-validation-error")("aria-invalid",K.showError),l.xp6(1),l.Q6J("ngIf",l.lcZ(2,8,l.xi3(3,10,K.props.options,K.field)))}}function nh(le,ye){if(1&le&&(l.TgZ(0,"option",13),l._uU(1),l.qZA()),2&le){const K=l.oxw(3);l.Q6J("ngValue",void 0),l.xp6(1),l.Oqu(K.props.placeholder)}}function Xl(le,ye){if(1&le&&(l.TgZ(0,"option",8),l._uU(1),l.qZA()),2&le){const K=l.oxw().$implicit;l.Q6J("ngValue",K.value)("disabled",K.disabled),l.xp6(1),l.hij(" ",K.label," ")}}function oh(le,ye){if(1&le&&(l.TgZ(0,"option",8),l._uU(1),l.qZA()),2&le){const K=ye.$implicit;l.Q6J("ngValue",K.value)("disabled",K.disabled),l.xp6(1),l.hij(" ",K.label," ")}}function Pm(le,ye){if(1&le&&(l.TgZ(0,"optgroup",9),l.YNc(1,oh,2,3,"option",10),l.qZA()),2&le){const K=l.oxw().$implicit;l.Q6J("label",K.label),l.xp6(1),l.Q6J("ngForOf",K.group)}}function Mm(le,ye){if(1&le&&(l.ynx(0),l.YNc(1,Xl,2,3,"option",6),l.YNc(2,Pm,2,2,"ng-template",null,7,l.W1O),l.BQk()),2&le){const K=ye.$implicit,E=l.MAs(3);l.xp6(1),l.Q6J("ngIf",!K.group)("ngIfElse",E)}}function ih(le,ye){if(1&le&&(l.ynx(0),l.YNc(1,Mm,4,2,"ng-container",5),l.BQk()),2&le){const K=ye.ngIf;l.xp6(1),l.Q6J("ngForOf",K)}}function Ip(le,ye){if(1&le&&(l.TgZ(0,"select",11),l.YNc(1,nh,2,2,"option",12),l.YNc(2,ih,2,1,"ng-container",4),l.ALo(3,"async"),l.ALo(4,"formlySelectOptions"),l.qZA()),2&le){const K=l.oxw(2);l.ekj("is-invalid",K.showError),l.Q6J("formControl",K.formControl)("compareWith",K.props.compareWith)("formlyAttributes",K.field),l.uIk("aria-describedby",K.id+"-formly-validation-error")("aria-invalid",K.showError),l.xp6(1),l.Q6J("ngIf",K.props.placeholder),l.xp6(1),l.Q6J("ngIf",l.lcZ(3,9,l.xi3(4,11,K.props.options,K.field)))}}function Ph(le,ye){if(1&le&&(l.YNc(0,rh,4,13,"select",1),l.YNc(1,Ip,5,14,"ng-template",null,2,l.W1O)),2&le){const K=l.MAs(2),E=l.oxw();l.Q6J("ngIf",E.props.multiple)("ngIfElse",K)}}let $u=(()=>{class le extends al{constructor(K,E){super(E),this.ngZone=K,this.defaultOptions={props:{compareWith:(F,_e)=>F===_e}}}set selectAccessor(K){if(!K)return;const E=K.writeValue.bind(K);null===K._getOptionId(K.value)&&E(K.value),K.writeValue=F=>{const _e=K._idCounter;E(F),null===F&&this.ngZone.onStable.asObservable().pipe((0,Ql.q)(1)).subscribe(()=>{_e!==K._idCounter&&null===K._getOptionId(F)&&-1!==K._elementRef.nativeElement.selectedIndex&&E(F)})}}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(l.R0b),l.Y36(l.s_b))},le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-field-select"]],viewQuery:function(K,E){if(1&K&&l.Gf(X.EJ,5),2&K){let F;l.iGM(F=l.CRH())&&(E.selectAccessor=F.first)}},features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],["class","form-select","multiple","",3,"formControl","compareWith","is-invalid","formlyAttributes",4,"ngIf","ngIfElse"],["singleSelect",""],["multiple","",1,"form-select",3,"formControl","compareWith","formlyAttributes"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngValue","disabled",4,"ngIf","ngIfElse"],["optgroup",""],[3,"ngValue","disabled"],[3,"label"],[3,"ngValue","disabled",4,"ngFor","ngForOf"],[1,"form-select",3,"formControl","compareWith","formlyAttributes"],[3,"ngValue",4,"ngIf"],[3,"ngValue"]],template:function(K,E){1&K&&l.YNc(0,Ph,3,2,"ng-template",null,0,l.W1O)},dependencies:[S.O5,X.K7,X.JJ,X.oH,Gl,S.sg,X.YN,X.Kr,X.EJ,S.Ov,Ys],encapsulation:2,changeDetection:0}),le})(),Am=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Ws,Ap,Zc.forChild({types:[{name:"select",component:$u,wrappers:["form-field"]},{name:"enum",extends:"select"}]})]]}),le})();const $l=["fieldTypeTemplate"];function Pf(le,ye){if(1&le&&l._UZ(0,"i",7),2&le){const K=l.oxw(3);l.Q6J("ngClass",K.props.addonLeft.class)}}function ah(le,ye){if(1&le&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&le){const K=l.oxw(3);l.xp6(1),l.Oqu(K.props.addonLeft.text)}}function sh(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",4),l.NdJ("click",function(F){l.CHM(K);const _e=l.oxw(2);return l.KtG(_e.addonLeftClick(F))}),l.YNc(1,Pf,1,1,"i",5),l.YNc(2,ah,2,1,"span",6),l.qZA()}if(2&le){const K=l.oxw(2);l.ekj("input-group-btn",K.props.addonLeft.onClick),l.xp6(1),l.Q6J("ngIf",K.props.addonLeft.class),l.xp6(1),l.Q6J("ngIf",K.props.addonLeft.text)}}function Fc(le,ye){if(1&le&&l._UZ(0,"i",7),2&le){const K=l.oxw(3);l.Q6J("ngClass",K.props.addonRight.class)}}function Mf(le,ye){if(1&le&&(l.TgZ(0,"span"),l._uU(1),l.qZA()),2&le){const K=l.oxw(3);l.xp6(1),l.Oqu(K.props.addonRight.text)}}function km(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"div",4),l.NdJ("click",function(F){l.CHM(K);const _e=l.oxw(2);return l.KtG(_e.addonRightClick(F))}),l.YNc(1,Fc,1,1,"i",5),l.YNc(2,Mf,2,1,"span",6),l.qZA()}if(2&le){const K=l.oxw(2);l.ekj("input-group-btn",K.props.addonRight.onClick),l.xp6(1),l.Q6J("ngIf",K.props.addonRight.class),l.xp6(1),l.Q6J("ngIf",K.props.addonRight.text)}}function ef(le,ye){if(1&le&&(l.TgZ(0,"div",1),l.YNc(1,sh,3,4,"div",2),l.GkF(2,null,3),l.YNc(4,km,3,4,"div",2),l.qZA()),2&le){const K=l.oxw();l.ekj("has-validation",K.showError),l.xp6(1),l.Q6J("ngIf",K.props.addonLeft),l.xp6(3),l.Q6J("ngIf",K.props.addonRight)}}let tf=(()=>{class le extends Dc{constructor(K){super(),this.hostContainerRef=K}set content(K){K&&this.hostContainerRef&&this.hostContainerRef.createEmbeddedView(K)}addonRightClick(K){this.props.addonRight.onClick?.(this.field,K)}addonLeftClick(K){this.props.addonLeft.onClick?.(this.field,K)}}return le.\u0275fac=function(K){return new(K||le)(l.Y36(l.s_b))},le.\u0275cmp=l.Xpm({type:le,selectors:[["formly-wrapper-addons"]],viewQuery:function(K,E){if(1&K&&l.Gf($l,7),2&K){let F;l.iGM(F=l.CRH())&&(E.content=F.first)}},features:[l.qOj],decls:2,vars:0,consts:[["fieldTypeTemplate",""],[1,"input-group"],["class","input-group-text",3,"input-group-btn","click",4,"ngIf"],["fieldComponent",""],[1,"input-group-text",3,"click"],[3,"ngClass",4,"ngIf"],[4,"ngIf"],[3,"ngClass"]],template:function(K,E){1&K&&l.YNc(0,ef,5,4,"ng-template",null,0,l.W1O)},dependencies:[S.O5,S.mk],styles:["formly-wrapper-form-field .input-group-btn{cursor:pointer}\n"],encapsulation:2}),le})();function Lm(le){!le.props||le.wrappers&&-1!==le.wrappers.indexOf("addons")||(le.props.addonLeft||le.props.addonRight)&&(le.wrappers=[...le.wrappers||[],"addons"])}let Xd=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[S.ez,X.UX,Zc.forChild({wrappers:[{name:"addons",component:tf}],extensions:[{name:"addons",extension:{postPopulate:Lm}}]})]]}),le})(),Rp=(()=>{class le{}return le.\u0275fac=function(K){return new(K||le)},le.\u0275mod=l.oAB({type:le}),le.\u0275inj=l.cJS({imports:[[Ws,vl,Ss,us,Lu,zc,Am,Xd]]}),le})();function Sc(le,ye){if(1&le){const K=l.EpF();l.TgZ(0,"ng-multiselect-dropdown",2),l.NdJ("onSelect",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.onSelect(F))})("onDeSelect",function(F){l.CHM(K);const _e=l.oxw();return l.KtG(_e.onDeSelect(F))}),l.qZA()}if(2&le){const K=l.oxw();l.Q6J("placeholder",(null==K.field.templateOptions?null:K.field.templateOptions.placeholder)||"Select...")("settings",null==K.field.templateOptions?null:K.field.templateOptions.dropdownSettings)("data",null==K.field.templateOptions?null:K.field.templateOptions.data)("formControl",K.formControlInstance)}}let rf=(()=>{var le;class ye extends ld{constructor(...E){super(...E),(0,O.Z)(this,"selectedItems",[])}onSelect(E){console.log("onSelect event:",E)}onDeSelect(E){console.log("onDeSelect event:",E)}get formControlInstance(){return this.formControl}ngOnInit(){console.log("Field Items:",this.field.templateOptions?.data)}}return le=ye,(0,O.Z)(ye,"\u0275fac",function(){let K;return function(F){return(K||(K=l.n5z(le)))(F||le)}}()),(0,O.Z)(ye,"\u0275cmp",l.Xpm({type:le,selectors:[["app-ng-multiselect-formly"]],features:[l._Bn([{provide:X.JU,useExisting:(0,l.Gpc)(()=>le),multi:!0}]),l.qOj],decls:2,vars:1,consts:[[1,"custom-multiselect"],["class","form-select form-select-solid form-select-lg fw-bold gridster-item-content","style","    display: inline-block; \n                          width: 100%;\n                          padding: 0px ;\n                          margin-bottom: 0;\n                          font-weight: 0px;\n                          line-height: 1.52857143;\n                          text-align: left;\n                          vertical-align: middle;\n                          cursor: pointer;\n                          background-image: none;\n                          border-radius: 4px;",3,"placeholder","settings","data","formControl","onSelect","onDeSelect",4,"ngIf"],[1,"form-select","form-select-solid","form-select-lg","fw-bold","gridster-item-content",2,"display","inline-block","width","100%","padding","0px","margin-bottom","0","font-weight","0px","line-height","1.52857143","text-align","left","vertical-align","middle","cursor","pointer","background-image","none","border-radius","4px",3,"placeholder","settings","data","formControl","onSelect","onDeSelect"]],template:function(E,F){1&E&&(l.TgZ(0,"div",0),l.YNc(1,Sc,1,4,"ng-multiselect-dropdown",1),l.qZA()),2&E&&(l.xp6(1),l.Q6J("ngIf",(null==F.field.templateOptions||null==F.field.templateOptions.data?null:F.field.templateOptions.data.length)>0))},dependencies:[S.O5,X.JJ,X.oH,N.O],encapsulation:2})),ye})();const vd={url:"https://httpbin.org/post",maxFilesize:50,acceptedFiles:"image/*"};let lh=(()=>{var le;class ye{}return le=ye,(0,O.Z)(ye,"\u0275fac",function(E){return new(E||le)}),(0,O.Z)(ye,"\u0275mod",l.oAB({type:le})),(0,O.Z)(ye,"\u0275inj",l.cJS({providers:[{provide:li,useValue:vd},Br,{provide:ge.o2,useValue:{appearance:"outline"}}],imports:[S.ez,X.u5,X.UX,x.ZX,z.IX,H.SD,T.T,G.ef,D.QX,m.JF,ee.p0,G.ef,Y.Tx,L.Ps,N.Z,Te.QW,pe.LD,we.KP,Ce.N6,Mo.Y4,te.ot,Oe.g$,je.c,Ue.ie,Kn,os,pd.U8,Nl.eL,D.Dg,U.m,Fr,qr.i4,pd.U8,Zc.forRoot({types:[{name:"ngx-select-formly",component:Es,wrappers:["form-field"]},{name:"ng-multiselect-formly",component:rf,wrappers:["form-field"]}]}),Rp,ge.lN,R.Co,ul._t]})),ye})()},1870:oe=>{self,oe.exports=function(){var ue={3099:function(m){m.exports=function(X){if("function"!=typeof X)throw TypeError(String(X)+" is not a function");return X}},6077:function(m,X,x){var z=x(111);m.exports=function(H){if(!z(H)&&null!==H)throw TypeError("Can't set "+String(H)+" as a prototype");return H}},1223:function(m,X,x){var z=x(5112),H=x(30),G=x(3070),D=z("unscopables"),U=Array.prototype;null==U[D]&&G.f(U,D,{configurable:!0,value:H(null)}),m.exports=function(R){U[D][R]=!0}},1530:function(m,X,x){"use strict";var z=x(8710).charAt;m.exports=function(H,G,D){return G+(D?z(H,G).length:1)}},5787:function(m){m.exports=function(X,x,z){if(!(X instanceof x))throw TypeError("Incorrect "+(z?z+" ":"")+"invocation");return X}},9670:function(m,X,x){var z=x(111);m.exports=function(H){if(!z(H))throw TypeError(String(H)+" is not an object");return H}},4019:function(m){m.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},260:function(m,X,x){"use strict";var Ze,z=x(4019),H=x(9781),G=x(7854),D=x(111),U=x(6656),R=x(648),T=x(8880),N=x(1320),L=x(3070).f,Y=x(9518),ee=x(7674),te=x(5112),pe=x(9711),we=G.Int8Array,Te=we&&we.prototype,ge=G.Uint8ClampedArray,Ce=ge&&ge.prototype,Oe=we&&Y(we),je=Te&&Y(Te),Ue=Object.prototype,Le=Ue.isPrototypeOf,ke=te("toStringTag"),me=pe("TYPED_ARRAY_TAG"),l=z&&!!ee&&"Opera"!==R(G.opera),Me=!1,ut={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$e={BigInt64Array:8,BigUint64Array:8},Ke=function(Pn){if(!D(Pn))return!1;var Kn=R(Pn);return U(ut,Kn)||U($e,Kn)};for(Ze in ut)G[Ze]||(l=!1);if((!l||"function"!=typeof Oe||Oe===Function.prototype)&&(Oe=function(){throw TypeError("Incorrect invocation")},l))for(Ze in ut)G[Ze]&&ee(G[Ze],Oe);if((!l||!je||je===Ue)&&(je=Oe.prototype,l))for(Ze in ut)G[Ze]&&ee(G[Ze].prototype,je);if(l&&Y(Ce)!==je&&ee(Ce,je),H&&!U(je,ke))for(Ze in Me=!0,L(je,ke,{get:function(){return D(this)?this[me]:void 0}}),ut)G[Ze]&&T(G[Ze],me,Ze);m.exports={NATIVE_ARRAY_BUFFER_VIEWS:l,TYPED_ARRAY_TAG:Me&&me,aTypedArray:function(Pn){if(Ke(Pn))return Pn;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(Pn){if(ee){if(Le.call(Oe,Pn))return Pn}else for(var Kn in ut)if(U(ut,Ze)){var Mo=G[Kn];if(Mo&&(Pn===Mo||Le.call(Mo,Pn)))return Pn}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(Pn,Kn,Mo){if(H){if(Mo)for(var mo in ut){var No=G[mo];No&&U(No.prototype,Pn)&&delete No.prototype[Pn]}(!je[Pn]||Mo)&&N(je,Pn,Mo?Kn:l&&Te[Pn]||Kn)}},exportTypedArrayStaticMethod:function(Pn,Kn,Mo){var mo,No;if(H){if(ee){if(Mo)for(mo in ut)(No=G[mo])&&U(No,Pn)&&delete No[Pn];if(Oe[Pn]&&!Mo)return;try{return N(Oe,Pn,Mo?Kn:l&&we[Pn]||Kn)}catch{}}for(mo in ut)(No=G[mo])&&(!No[Pn]||Mo)&&N(No,Pn,Kn)}},isView:function(Kn){if(!D(Kn))return!1;var Mo=R(Kn);return"DataView"===Mo||U(ut,Mo)||U($e,Mo)},isTypedArray:Ke,TypedArray:Oe,TypedArrayPrototype:je}},3331:function(m,X,x){"use strict";var z=x(7854),H=x(9781),G=x(4019),D=x(8880),U=x(2248),R=x(7293),T=x(5787),N=x(9958),L=x(7466),Y=x(7067),ee=x(1179),te=x(9518),pe=x(7674),we=x(8006).f,Te=x(3070).f,ge=x(1285),Ce=x(8003),Oe=x(9909),je=Oe.get,Ue=Oe.set,Le="ArrayBuffer",ke="DataView",me="prototype",Me="Wrong index",Ze=z[Le],ut=Ze,$e=z[ke],Ct=$e&&$e[me],Ke=Object.prototype,Wt=z.RangeError,mr=ee.pack,nr=ee.unpack,Kr=function(sn){return[255&sn]},Pn=function(sn){return[255&sn,sn>>8&255]},Kn=function(sn){return[255&sn,sn>>8&255,sn>>16&255,sn>>24&255]},Mo=function(sn){return sn[3]<<24|sn[2]<<16|sn[1]<<8|sn[0]},mo=function(sn){return mr(sn,23,4)},No=function(sn){return mr(sn,52,8)},Di=function(sn,kn){Te(sn[me],kn,{get:function(){return je(this)[kn]}})},ci=function(sn,kn,xo,Vo){var aa=Y(xo),Fa=je(sn);if(aa+kn>Fa.byteLength)throw Wt(Me);var Qr=je(Fa.buffer).bytes,ze=aa+Fa.byteOffset,Xe=Qr.slice(ze,ze+kn);return Vo?Xe:Xe.reverse()},zn=function(sn,kn,xo,Vo,aa,Fa){var Qr=Y(xo),ze=je(sn);if(Qr+kn>ze.byteLength)throw Wt(Me);for(var Xe=je(ze.buffer).bytes,at=Qr+ze.byteOffset,gr=Vo(+aa),Pt=0;Pt<kn;Pt++)Xe[at+Pt]=gr[Fa?Pt:kn-Pt-1]};if(G){if(!R(function(){Ze(1)})||!R(function(){new Ze(-1)})||R(function(){return new Ze,new Ze(1.5),new Ze(NaN),Ze.name!=Le})){for(var Pr,Wn=(ut=function(kn){return T(this,ut),new Ze(Y(kn))})[me]=Ze[me],an=we(Ze),lr=0;an.length>lr;)(Pr=an[lr++])in ut||D(ut,Pr,Ze[Pr]);Wn.constructor=ut}pe&&te(Ct)!==Ke&&pe(Ct,Ke);var Mn=new $e(new ut(2)),dn=Ct.setInt8;Mn.setInt8(0,2147483648),Mn.setInt8(1,2147483649),(Mn.getInt8(0)||!Mn.getInt8(1))&&U(Ct,{setInt8:function(kn,xo){dn.call(this,kn,xo<<24>>24)},setUint8:function(kn,xo){dn.call(this,kn,xo<<24>>24)}},{unsafe:!0})}else ut=function(kn){T(this,ut,Le);var xo=Y(kn);Ue(this,{bytes:ge.call(new Array(xo),0),byteLength:xo}),H||(this.byteLength=xo)},$e=function(kn,xo,Vo){T(this,$e,ke),T(kn,ut,ke);var aa=je(kn).byteLength,Fa=N(xo);if(Fa<0||Fa>aa)throw Wt("Wrong offset");if(Fa+(Vo=void 0===Vo?aa-Fa:L(Vo))>aa)throw Wt("Wrong length");Ue(this,{buffer:kn,byteLength:Vo,byteOffset:Fa}),H||(this.buffer=kn,this.byteLength=Vo,this.byteOffset=Fa)},H&&(Di(ut,"byteLength"),Di($e,"buffer"),Di($e,"byteLength"),Di($e,"byteOffset")),U($e[me],{getInt8:function(kn){return ci(this,1,kn)[0]<<24>>24},getUint8:function(kn){return ci(this,1,kn)[0]},getInt16:function(kn){var xo=ci(this,2,kn,arguments.length>1?arguments[1]:void 0);return(xo[1]<<8|xo[0])<<16>>16},getUint16:function(kn){var xo=ci(this,2,kn,arguments.length>1?arguments[1]:void 0);return xo[1]<<8|xo[0]},getInt32:function(kn){return Mo(ci(this,4,kn,arguments.length>1?arguments[1]:void 0))},getUint32:function(kn){return Mo(ci(this,4,kn,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(kn){return nr(ci(this,4,kn,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(kn){return nr(ci(this,8,kn,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(kn,xo){zn(this,1,kn,Kr,xo)},setUint8:function(kn,xo){zn(this,1,kn,Kr,xo)},setInt16:function(kn,xo){zn(this,2,kn,Pn,xo,arguments.length>2?arguments[2]:void 0)},setUint16:function(kn,xo){zn(this,2,kn,Pn,xo,arguments.length>2?arguments[2]:void 0)},setInt32:function(kn,xo){zn(this,4,kn,Kn,xo,arguments.length>2?arguments[2]:void 0)},setUint32:function(kn,xo){zn(this,4,kn,Kn,xo,arguments.length>2?arguments[2]:void 0)},setFloat32:function(kn,xo){zn(this,4,kn,mo,xo,arguments.length>2?arguments[2]:void 0)},setFloat64:function(kn,xo){zn(this,8,kn,No,xo,arguments.length>2?arguments[2]:void 0)}});Ce(ut,Le),Ce($e,ke),m.exports={ArrayBuffer:ut,DataView:$e}},1048:function(m,X,x){"use strict";var z=x(7908),H=x(1400),G=x(7466),D=Math.min;m.exports=[].copyWithin||function(R,T){var N=z(this),L=G(N.length),Y=H(R,L),ee=H(T,L),te=arguments.length>2?arguments[2]:void 0,pe=D((void 0===te?L:H(te,L))-ee,L-Y),we=1;for(ee<Y&&Y<ee+pe&&(we=-1,ee+=pe-1,Y+=pe-1);pe-- >0;)ee in N?N[Y]=N[ee]:delete N[Y],Y+=we,ee+=we;return N}},1285:function(m,X,x){"use strict";var z=x(7908),H=x(1400),G=x(7466);m.exports=function(U){for(var R=z(this),T=G(R.length),N=arguments.length,L=H(N>1?arguments[1]:void 0,T),Y=N>2?arguments[2]:void 0,ee=void 0===Y?T:H(Y,T);ee>L;)R[L++]=U;return R}},8533:function(m,X,x){"use strict";var z=x(2092).forEach,G=x(9341)("forEach");m.exports=G?[].forEach:function(U){return z(this,U,arguments.length>1?arguments[1]:void 0)}},8457:function(m,X,x){"use strict";var z=x(9974),H=x(7908),G=x(3411),D=x(7659),U=x(7466),R=x(6135),T=x(1246);m.exports=function(L){var Ce,Oe,je,Ue,Le,ke,Y=H(L),ee="function"==typeof this?this:Array,te=arguments.length,pe=te>1?arguments[1]:void 0,we=void 0!==pe,Te=T(Y),ge=0;if(we&&(pe=z(pe,te>2?arguments[2]:void 0,2)),null==Te||ee==Array&&D(Te))for(Oe=new ee(Ce=U(Y.length));Ce>ge;ge++)ke=we?pe(Y[ge],ge):Y[ge],R(Oe,ge,ke);else for(Le=(Ue=Te.call(Y)).next,Oe=new ee;!(je=Le.call(Ue)).done;ge++)ke=we?G(Ue,pe,[je.value,ge],!0):je.value,R(Oe,ge,ke);return Oe.length=ge,Oe}},1318:function(m,X,x){var z=x(5656),H=x(7466),G=x(1400),D=function(U){return function(R,T,N){var te,L=z(R),Y=H(L.length),ee=G(N,Y);if(U&&T!=T){for(;Y>ee;)if((te=L[ee++])!=te)return!0}else for(;Y>ee;ee++)if((U||ee in L)&&L[ee]===T)return U||ee||0;return!U&&-1}};m.exports={includes:D(!0),indexOf:D(!1)}},2092:function(m,X,x){var z=x(9974),H=x(8361),G=x(7908),D=x(7466),U=x(5417),R=[].push,T=function(N){var L=1==N,Y=2==N,ee=3==N,te=4==N,pe=6==N,we=7==N,Te=5==N||pe;return function(ge,Ce,Oe,je){for(var ut,$e,Ue=G(ge),Le=H(Ue),ke=z(Ce,Oe,3),me=D(Le.length),l=0,Me=je||U,Ze=L?Me(ge,me):Y||we?Me(ge,0):void 0;me>l;l++)if((Te||l in Le)&&($e=ke(ut=Le[l],l,Ue),N))if(L)Ze[l]=$e;else if($e)switch(N){case 3:return!0;case 5:return ut;case 6:return l;case 2:R.call(Ze,ut)}else switch(N){case 4:return!1;case 7:R.call(Ze,ut)}return pe?-1:ee||te?te:Ze}};m.exports={forEach:T(0),map:T(1),filter:T(2),some:T(3),every:T(4),find:T(5),findIndex:T(6),filterOut:T(7)}},6583:function(m,X,x){"use strict";var z=x(5656),H=x(9958),G=x(7466),D=x(9341),U=Math.min,R=[].lastIndexOf,T=!!R&&1/[1].lastIndexOf(1,-0)<0,N=D("lastIndexOf");m.exports=T||!N?function(ee){if(T)return R.apply(this,arguments)||0;var te=z(this),pe=G(te.length),we=pe-1;for(arguments.length>1&&(we=U(we,H(arguments[1]))),we<0&&(we=pe+we);we>=0;we--)if(we in te&&te[we]===ee)return we||0;return-1}:R},1194:function(m,X,x){var z=x(7293),H=x(5112),G=x(7392),D=H("species");m.exports=function(U){return G>=51||!z(function(){var R=[];return(R.constructor={})[D]=function(){return{foo:1}},1!==R[U](Boolean).foo})}},9341:function(m,X,x){"use strict";var z=x(7293);m.exports=function(H,G){var D=[][H];return!!D&&z(function(){D.call(null,G||function(){throw 1},1)})}},3671:function(m,X,x){var z=x(3099),H=x(7908),G=x(8361),D=x(7466),U=function(R){return function(T,N,L,Y){z(N);var ee=H(T),te=G(ee),pe=D(ee.length),we=R?pe-1:0,Te=R?-1:1;if(L<2)for(;;){if(we in te){Y=te[we],we+=Te;break}if(we+=Te,R?we<0:pe<=we)throw TypeError("Reduce of empty array with no initial value")}for(;R?we>=0:pe>we;we+=Te)we in te&&(Y=N(Y,te[we],we,ee));return Y}};m.exports={left:U(!1),right:U(!0)}},5417:function(m,X,x){var z=x(111),H=x(3157),D=x(5112)("species");m.exports=function(U,R){var T;return H(U)&&("function"!=typeof(T=U.constructor)||T!==Array&&!H(T.prototype)?z(T)&&null===(T=T[D])&&(T=void 0):T=void 0),new(void 0===T?Array:T)(0===R?0:R)}},3411:function(m,X,x){var z=x(9670),H=x(9212);m.exports=function(G,D,U,R){try{return R?D(z(U)[0],U[1]):D(U)}catch(T){throw H(G),T}}},7072:function(m,X,x){var H=x(5112)("iterator"),G=!1;try{var D=0,U={next:function(){return{done:!!D++}},return:function(){G=!0}};U[H]=function(){return this},Array.from(U,function(){throw 2})}catch{}m.exports=function(R,T){if(!T&&!G)return!1;var N=!1;try{var L={};L[H]=function(){return{next:function(){return{done:N=!0}}}},R(L)}catch{}return N}},4326:function(m){var X={}.toString;m.exports=function(x){return X.call(x).slice(8,-1)}},648:function(m,X,x){var z=x(1694),H=x(4326),D=x(5112)("toStringTag"),U="Arguments"==H(function(){return arguments}());m.exports=z?H:function(T){var N,L,Y;return void 0===T?"Undefined":null===T?"Null":"string"==typeof(L=function(T,N){try{return T[N]}catch{}}(N=Object(T),D))?L:U?H(N):"Object"==(Y=H(N))&&"function"==typeof N.callee?"Arguments":Y}},9920:function(m,X,x){var z=x(6656),H=x(3887),G=x(1236),D=x(3070);m.exports=function(U,R){for(var T=H(R),N=D.f,L=G.f,Y=0;Y<T.length;Y++){var ee=T[Y];z(U,ee)||N(U,ee,L(R,ee))}}},8544:function(m,X,x){var z=x(7293);m.exports=!z(function(){function H(){}return H.prototype.constructor=null,Object.getPrototypeOf(new H)!==H.prototype})},4994:function(m,X,x){"use strict";var z=x(3383).IteratorPrototype,H=x(30),G=x(9114),D=x(8003),U=x(7497),R=function(){return this};m.exports=function(T,N,L){var Y=N+" Iterator";return T.prototype=H(z,{next:G(1,L)}),D(T,Y,!1,!0),U[Y]=R,T}},8880:function(m,X,x){var z=x(9781),H=x(3070),G=x(9114);m.exports=z?function(D,U,R){return H.f(D,U,G(1,R))}:function(D,U,R){return D[U]=R,D}},9114:function(m){m.exports=function(X,x){return{enumerable:!(1&X),configurable:!(2&X),writable:!(4&X),value:x}}},6135:function(m,X,x){"use strict";var z=x(7593),H=x(3070),G=x(9114);m.exports=function(D,U,R){var T=z(U);T in D?H.f(D,T,G(0,R)):D[T]=R}},654:function(m,X,x){"use strict";var z=x(2109),H=x(4994),G=x(9518),D=x(7674),U=x(8003),R=x(8880),T=x(1320),N=x(5112),L=x(1913),Y=x(7497),ee=x(3383),te=ee.IteratorPrototype,pe=ee.BUGGY_SAFARI_ITERATORS,we=N("iterator"),ge="values",Ce="entries",Oe=function(){return this};m.exports=function(je,Ue,Le,ke,me,l,Me){H(Le,Ue,ke);var nr,Kr,Pn,Ze=function(Kn){if(Kn===me&&Wt)return Wt;if(!pe&&Kn in Ct)return Ct[Kn];switch(Kn){case"keys":case ge:case Ce:return function(){return new Le(this,Kn)}}return function(){return new Le(this)}},ut=Ue+" Iterator",$e=!1,Ct=je.prototype,Ke=Ct[we]||Ct["@@iterator"]||me&&Ct[me],Wt=!pe&&Ke||Ze(me),mr="Array"==Ue&&Ct.entries||Ke;if(mr&&(nr=G(mr.call(new je)),te!==Object.prototype&&nr.next&&(!L&&G(nr)!==te&&(D?D(nr,te):"function"!=typeof nr[we]&&R(nr,we,Oe)),U(nr,ut,!0,!0),L&&(Y[ut]=Oe))),me==ge&&Ke&&Ke.name!==ge&&($e=!0,Wt=function(){return Ke.call(this)}),(!L||Me)&&Ct[we]!==Wt&&R(Ct,we,Wt),Y[Ue]=Wt,me)if(Kr={values:Ze(ge),keys:l?Wt:Ze("keys"),entries:Ze(Ce)},Me)for(Pn in Kr)(pe||$e||!(Pn in Ct))&&T(Ct,Pn,Kr[Pn]);else z({target:Ue,proto:!0,forced:pe||$e},Kr);return Kr}},9781:function(m,X,x){var z=x(7293);m.exports=!z(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},317:function(m,X,x){var z=x(7854),H=x(111),G=z.document,D=H(G)&&H(G.createElement);m.exports=function(U){return D?G.createElement(U):{}}},8324:function(m){m.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8113:function(m,X,x){var z=x(5005);m.exports=z("navigator","userAgent")||""},7392:function(m,X,x){var R,T,z=x(7854),H=x(8113),G=z.process,D=G&&G.versions,U=D&&D.v8;U?T=(R=U.split("."))[0]+R[1]:H&&(!(R=H.match(/Edge\/(\d+)/))||R[1]>=74)&&(R=H.match(/Chrome\/(\d+)/))&&(T=R[1]),m.exports=T&&+T},748:function(m){m.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(m,X,x){var z=x(7854),H=x(1236).f,G=x(8880),D=x(1320),U=x(3505),R=x(9920),T=x(4705);m.exports=function(N,L){var we,Te,ge,Ce,Oe,Y=N.target,ee=N.global,te=N.stat;if(we=ee?z:te?z[Y]||U(Y,{}):(z[Y]||{}).prototype)for(Te in L){if(Ce=L[Te],ge=N.noTargetGet?(Oe=H(we,Te))&&Oe.value:we[Te],!T(ee?Te:Y+(te?".":"#")+Te,N.forced)&&void 0!==ge){if(typeof Ce==typeof ge)continue;R(Ce,ge)}(N.sham||ge&&ge.sham)&&G(Ce,"sham",!0),D(we,Te,Ce,N)}}},7293:function(m){m.exports=function(X){try{return!!X()}catch{return!0}}},7007:function(m,X,x){"use strict";x(4916);var z=x(1320),H=x(7293),G=x(5112),D=x(2261),U=x(8880),R=G("species"),T=!H(function(){var te=/./;return te.exec=function(){var pe=[];return pe.groups={a:"7"},pe},"7"!=="".replace(te,"$<a>")}),N="$0"==="a".replace(/./,"$0"),L=G("replace"),Y=!!/./[L]&&""===/./[L]("a","$0"),ee=!H(function(){var te=/(?:)/,pe=te.exec;te.exec=function(){return pe.apply(this,arguments)};var we="ab".split(te);return 2!==we.length||"a"!==we[0]||"b"!==we[1]});m.exports=function(te,pe,we,Te){var ge=G(te),Ce=!H(function(){var me={};return me[ge]=function(){return 7},7!=""[te](me)}),Oe=Ce&&!H(function(){var me=!1,l=/a/;return"split"===te&&((l={}).constructor={},l.constructor[R]=function(){return l},l.flags="",l[ge]=/./[ge]),l.exec=function(){return me=!0,null},l[ge](""),!me});if(!Ce||!Oe||"replace"===te&&(!T||!N||Y)||"split"===te&&!ee){var je=/./[ge],Ue=we(ge,""[te],function(me,l,Me,Ze,ut){return l.exec===D?Ce&&!ut?{done:!0,value:je.call(l,Me,Ze)}:{done:!0,value:me.call(Me,l,Ze)}:{done:!1}},{REPLACE_KEEPS_$0:N,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Y}),ke=Ue[1];z(String.prototype,te,Ue[0]),z(RegExp.prototype,ge,2==pe?function(me,l){return ke.call(me,this,l)}:function(me){return ke.call(me,this)})}Te&&U(RegExp.prototype[ge],"sham",!0)}},9974:function(m,X,x){var z=x(3099);m.exports=function(H,G,D){if(z(H),void 0===G)return H;switch(D){case 0:return function(){return H.call(G)};case 1:return function(U){return H.call(G,U)};case 2:return function(U,R){return H.call(G,U,R)};case 3:return function(U,R,T){return H.call(G,U,R,T)}}return function(){return H.apply(G,arguments)}}},5005:function(m,X,x){var z=x(857),H=x(7854),G=function(D){return"function"==typeof D?D:void 0};m.exports=function(D,U){return arguments.length<2?G(z[D])||G(H[D]):z[D]&&z[D][U]||H[D]&&H[D][U]}},1246:function(m,X,x){var z=x(648),H=x(7497),D=x(5112)("iterator");m.exports=function(U){if(null!=U)return U[D]||U["@@iterator"]||H[z(U)]}},8554:function(m,X,x){var z=x(9670),H=x(1246);m.exports=function(G){var D=H(G);if("function"!=typeof D)throw TypeError(String(G)+" is not iterable");return z(D.call(G))}},647:function(m,X,x){var z=x(7908),H=Math.floor,G="".replace,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,U=/\$([$&'`]|\d\d?)/g;m.exports=function(R,T,N,L,Y,ee){var te=N+R.length,pe=L.length,we=U;return void 0!==Y&&(Y=z(Y),we=D),G.call(ee,we,function(Te,ge){var Ce;switch(ge.charAt(0)){case"$":return"$";case"&":return R;case"`":return T.slice(0,N);case"'":return T.slice(te);case"<":Ce=Y[ge.slice(1,-1)];break;default:var Oe=+ge;if(0===Oe)return Te;if(Oe>pe){var je=H(Oe/10);return 0===je?Te:je<=pe?void 0===L[je-1]?ge.charAt(1):L[je-1]+ge.charAt(1):Te}Ce=L[Oe-1]}return void 0===Ce?"":Ce})}},7854:function(m,X,x){var z=function(H){return H&&H.Math==Math&&H};m.exports=z("object"==typeof globalThis&&globalThis)||z("object"==typeof window&&window)||z("object"==typeof self&&self)||z("object"==typeof x.g&&x.g)||function(){return this}()||Function("return this")()},6656:function(m){var X={}.hasOwnProperty;m.exports=function(x,z){return X.call(x,z)}},3501:function(m){m.exports={}},490:function(m,X,x){var z=x(5005);m.exports=z("document","documentElement")},4664:function(m,X,x){var z=x(9781),H=x(7293),G=x(317);m.exports=!z&&!H(function(){return 7!=Object.defineProperty(G("div"),"a",{get:function(){return 7}}).a})},1179:function(m){var X=Math.abs,x=Math.pow,z=Math.floor,H=Math.log,G=Math.LN2;m.exports={pack:function(R,T,N){var ge,Ce,Oe,L=new Array(N),Y=8*N-T-1,ee=(1<<Y)-1,te=ee>>1,pe=23===T?x(2,-24)-x(2,-77):0,we=R<0||0===R&&1/R<0?1:0,Te=0;for((R=X(R))!=R||R===1/0?(Ce=R!=R?1:0,ge=ee):(ge=z(H(R)/G),R*(Oe=x(2,-ge))<1&&(ge--,Oe*=2),(R+=ge+te>=1?pe/Oe:pe*x(2,1-te))*Oe>=2&&(ge++,Oe/=2),ge+te>=ee?(Ce=0,ge=ee):ge+te>=1?(Ce=(R*Oe-1)*x(2,T),ge+=te):(Ce=R*x(2,te-1)*x(2,T),ge=0));T>=8;L[Te++]=255&Ce,Ce/=256,T-=8);for(ge=ge<<T|Ce,Y+=T;Y>0;L[Te++]=255&ge,ge/=256,Y-=8);return L[--Te]|=128*we,L},unpack:function(R,T){var ge,N=R.length,L=8*N-T-1,Y=(1<<L)-1,ee=Y>>1,te=L-7,pe=N-1,we=R[pe--],Te=127&we;for(we>>=7;te>0;Te=256*Te+R[pe],pe--,te-=8);for(ge=Te&(1<<-te)-1,Te>>=-te,te+=T;te>0;ge=256*ge+R[pe],pe--,te-=8);if(0===Te)Te=1-ee;else{if(Te===Y)return ge?NaN:we?-1/0:1/0;ge+=x(2,T),Te-=ee}return(we?-1:1)*ge*x(2,Te-T)}}},8361:function(m,X,x){var z=x(7293),H=x(4326),G="".split;m.exports=z(function(){return!Object("z").propertyIsEnumerable(0)})?function(D){return"String"==H(D)?G.call(D,""):Object(D)}:Object},9587:function(m,X,x){var z=x(111),H=x(7674);m.exports=function(G,D,U){var R,T;return H&&"function"==typeof(R=D.constructor)&&R!==U&&z(T=R.prototype)&&T!==U.prototype&&H(G,T),G}},2788:function(m,X,x){var z=x(5465),H=Function.toString;"function"!=typeof z.inspectSource&&(z.inspectSource=function(G){return H.call(G)}),m.exports=z.inspectSource},9909:function(m,X,x){var Y,ee,te,z=x(8536),H=x(7854),G=x(111),D=x(8880),U=x(6656),R=x(5465),T=x(6200),N=x(3501);if(z){var Te=R.state||(R.state=new(0,H.WeakMap)),ge=Te.get,Ce=Te.has,Oe=Te.set;Y=function(Ue,Le){return Le.facade=Ue,Oe.call(Te,Ue,Le),Le},ee=function(Ue){return ge.call(Te,Ue)||{}},te=function(Ue){return Ce.call(Te,Ue)}}else{var je=T("state");N[je]=!0,Y=function(Ue,Le){return Le.facade=Ue,D(Ue,je,Le),Le},ee=function(Ue){return U(Ue,je)?Ue[je]:{}},te=function(Ue){return U(Ue,je)}}m.exports={set:Y,get:ee,has:te,enforce:function(Ue){return te(Ue)?ee(Ue):Y(Ue,{})},getterFor:function(Ue){return function(Le){var ke;if(!G(Le)||(ke=ee(Le)).type!==Ue)throw TypeError("Incompatible receiver, "+Ue+" required");return ke}}}},7659:function(m,X,x){var z=x(5112),H=x(7497),G=z("iterator"),D=Array.prototype;m.exports=function(U){return void 0!==U&&(H.Array===U||D[G]===U)}},3157:function(m,X,x){var z=x(4326);m.exports=Array.isArray||function(G){return"Array"==z(G)}},4705:function(m,X,x){var z=x(7293),H=/#|\.prototype\./,G=function(N,L){var Y=U[D(N)];return Y==T||Y!=R&&("function"==typeof L?z(L):!!L)},D=G.normalize=function(N){return String(N).replace(H,".").toLowerCase()},U=G.data={},R=G.NATIVE="N",T=G.POLYFILL="P";m.exports=G},111:function(m){m.exports=function(X){return"object"==typeof X?null!==X:"function"==typeof X}},1913:function(m){m.exports=!1},7850:function(m,X,x){var z=x(111),H=x(4326),D=x(5112)("match");m.exports=function(U){var R;return z(U)&&(void 0!==(R=U[D])?!!R:"RegExp"==H(U))}},9212:function(m,X,x){var z=x(9670);m.exports=function(H){var G=H.return;if(void 0!==G)return z(G.call(H)).value}},3383:function(m,X,x){"use strict";var Y,ee,te,z=x(7293),H=x(9518),G=x(8880),D=x(6656),U=x(5112),R=x(1913),T=U("iterator"),N=!1;[].keys&&("next"in(te=[].keys())?(ee=H(H(te)))!==Object.prototype&&(Y=ee):N=!0);var pe=null==Y||z(function(){var we={};return Y[T].call(we)!==we});pe&&(Y={}),(!R||pe)&&!D(Y,T)&&G(Y,T,function(){return this}),m.exports={IteratorPrototype:Y,BUGGY_SAFARI_ITERATORS:N}},7497:function(m){m.exports={}},133:function(m,X,x){var z=x(7293);m.exports=!!Object.getOwnPropertySymbols&&!z(function(){return!String(Symbol())})},590:function(m,X,x){var z=x(7293),H=x(5112),G=x(1913),D=H("iterator");m.exports=!z(function(){var U=new URL("b?a=1&b=2&c=3","http://a"),R=U.searchParams,T="";return U.pathname="c%20d",R.forEach(function(N,L){R.delete("b"),T+=L+N}),G&&!U.toJSON||!R.sort||"http://a/c%20d?a=1&c=3"!==U.href||"3"!==R.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!R[D]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://\u0442\u0435\u0441\u0442").host||"#%D0%B1"!==new URL("http://a#\u0431").hash||"a1c3"!==T||"x"!==new URL("http://x",void 0).host})},8536:function(m,X,x){var z=x(7854),H=x(2788),G=z.WeakMap;m.exports="function"==typeof G&&/native code/.test(H(G))},1574:function(m,X,x){"use strict";var z=x(9781),H=x(7293),G=x(1956),D=x(5181),U=x(5296),R=x(7908),T=x(8361),N=Object.assign,L=Object.defineProperty;m.exports=!N||H(function(){if(z&&1!==N({b:1},N(L({},"a",{enumerable:!0,get:function(){L(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var Y={},ee={},te=Symbol(),pe="abcdefghijklmnopqrst";return Y[te]=7,pe.split("").forEach(function(we){ee[we]=we}),7!=N({},Y)[te]||G(N({},ee)).join("")!=pe})?function(ee,te){for(var pe=R(ee),we=arguments.length,Te=1,ge=D.f,Ce=U.f;we>Te;)for(var ke,Oe=T(arguments[Te++]),je=ge?G(Oe).concat(ge(Oe)):G(Oe),Ue=je.length,Le=0;Ue>Le;)ke=je[Le++],(!z||Ce.call(Oe,ke))&&(pe[ke]=Oe[ke]);return pe}:N},30:function(m,X,x){var Ce,z=x(9670),H=x(6048),G=x(748),D=x(3501),U=x(490),R=x(317),T=x(6200),Y="prototype",ee="script",te=T("IE_PROTO"),pe=function(){},we=function(je){return"<script>"+je+"</"+ee+">"},Oe=function(){try{Ce=document.domain&&new ActiveXObject("htmlfile")}catch{}Oe=Ce?function(je){je.write(we("")),je.close();var Ue=je.parentWindow.Object;return je=null,Ue}(Ce):function(){var Le,je=R("iframe");return je.style.display="none",U.appendChild(je),je.src=String("javascript:"),(Le=je.contentWindow.document).open(),Le.write(we("document.F=Object")),Le.close(),Le.F}();for(var je=G.length;je--;)delete Oe[Y][G[je]];return Oe()};D[te]=!0,m.exports=Object.create||function(Ue,Le){var ke;return null!==Ue?(pe[Y]=z(Ue),ke=new pe,pe[Y]=null,ke[te]=Ue):ke=Oe(),void 0===Le?ke:H(ke,Le)}},6048:function(m,X,x){var z=x(9781),H=x(3070),G=x(9670),D=x(1956);m.exports=z?Object.defineProperties:function(R,T){G(R);for(var ee,N=D(T),L=N.length,Y=0;L>Y;)H.f(R,ee=N[Y++],T[ee]);return R}},3070:function(m,X,x){var z=x(9781),H=x(4664),G=x(9670),D=x(7593),U=Object.defineProperty;X.f=z?U:function(T,N,L){if(G(T),N=D(N,!0),G(L),H)try{return U(T,N,L)}catch{}if("get"in L||"set"in L)throw TypeError("Accessors not supported");return"value"in L&&(T[N]=L.value),T}},1236:function(m,X,x){var z=x(9781),H=x(5296),G=x(9114),D=x(5656),U=x(7593),R=x(6656),T=x(4664),N=Object.getOwnPropertyDescriptor;X.f=z?N:function(Y,ee){if(Y=D(Y),ee=U(ee,!0),T)try{return N(Y,ee)}catch{}if(R(Y,ee))return G(!H.f.call(Y,ee),Y[ee])}},8006:function(m,X,x){var z=x(6324),G=x(748).concat("length","prototype");X.f=Object.getOwnPropertyNames||function(U){return z(U,G)}},5181:function(m,X){X.f=Object.getOwnPropertySymbols},9518:function(m,X,x){var z=x(6656),H=x(7908),G=x(6200),D=x(8544),U=G("IE_PROTO"),R=Object.prototype;m.exports=D?Object.getPrototypeOf:function(T){return T=H(T),z(T,U)?T[U]:"function"==typeof T.constructor&&T instanceof T.constructor?T.constructor.prototype:T instanceof Object?R:null}},6324:function(m,X,x){var z=x(6656),H=x(5656),G=x(1318).indexOf,D=x(3501);m.exports=function(U,R){var Y,T=H(U),N=0,L=[];for(Y in T)!z(D,Y)&&z(T,Y)&&L.push(Y);for(;R.length>N;)z(T,Y=R[N++])&&(~G(L,Y)||L.push(Y));return L}},1956:function(m,X,x){var z=x(6324),H=x(748);m.exports=Object.keys||function(D){return z(D,H)}},5296:function(m,X){"use strict";var x={}.propertyIsEnumerable,z=Object.getOwnPropertyDescriptor,H=z&&!x.call({1:2},1);X.f=H?function(D){var U=z(this,D);return!!U&&U.enumerable}:x},7674:function(m,X,x){var z=x(9670),H=x(6077);m.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var U,G=!1,D={};try{(U=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(D,[]),G=D instanceof Array}catch{}return function(T,N){return z(T),H(N),G?U.call(T,N):T.__proto__=N,T}}():void 0)},288:function(m,X,x){"use strict";var z=x(1694),H=x(648);m.exports=z?{}.toString:function(){return"[object "+H(this)+"]"}},3887:function(m,X,x){var z=x(5005),H=x(8006),G=x(5181),D=x(9670);m.exports=z("Reflect","ownKeys")||function(R){var T=H.f(D(R)),N=G.f;return N?T.concat(N(R)):T}},857:function(m,X,x){var z=x(7854);m.exports=z},2248:function(m,X,x){var z=x(1320);m.exports=function(H,G,D){for(var U in G)z(H,U,G[U],D);return H}},1320:function(m,X,x){var z=x(7854),H=x(8880),G=x(6656),D=x(3505),U=x(2788),R=x(9909),T=R.get,N=R.enforce,L=String(String).split("String");(m.exports=function(Y,ee,te,pe){var Ce,we=!!pe&&!!pe.unsafe,Te=!!pe&&!!pe.enumerable,ge=!!pe&&!!pe.noTargetGet;"function"==typeof te&&("string"==typeof ee&&!G(te,"name")&&H(te,"name",ee),(Ce=N(te)).source||(Ce.source=L.join("string"==typeof ee?ee:""))),Y!==z?(we?!ge&&Y[ee]&&(Te=!0):delete Y[ee],Te?Y[ee]=te:H(Y,ee,te)):Te?Y[ee]=te:D(ee,te)})(Function.prototype,"toString",function(){return"function"==typeof this&&T(this).source||U(this)})},7651:function(m,X,x){var z=x(4326),H=x(2261);m.exports=function(G,D){var U=G.exec;if("function"==typeof U){var R=U.call(G,D);if("object"!=typeof R)throw TypeError("RegExp exec method returned something other than an Object or null");return R}if("RegExp"!==z(G))throw TypeError("RegExp#exec called on incompatible receiver");return H.call(G,D)}},2261:function(m,X,x){"use strict";var Y,ee,z=x(7066),H=x(2999),G=RegExp.prototype.exec,D=String.prototype.replace,U=G,R=(ee=/b*/g,G.call(Y=/a/,"a"),G.call(ee,"a"),0!==Y.lastIndex||0!==ee.lastIndex),T=H.UNSUPPORTED_Y||H.BROKEN_CARET,N=void 0!==/()??/.exec("")[1];(R||N||T)&&(U=function(ee){var pe,we,Te,ge,te=this,Ce=T&&te.sticky,Oe=z.call(te),je=te.source,Ue=0,Le=ee;return Ce&&(-1===(Oe=Oe.replace("y","")).indexOf("g")&&(Oe+="g"),Le=String(ee).slice(te.lastIndex),te.lastIndex>0&&(!te.multiline||te.multiline&&"\n"!==ee[te.lastIndex-1])&&(je="(?: "+je+")",Le=" "+Le,Ue++),we=new RegExp("^(?:"+je+")",Oe)),N&&(we=new RegExp("^"+je+"$(?!\\s)",Oe)),R&&(pe=te.lastIndex),Te=G.call(Ce?we:te,Le),Ce?Te?(Te.input=Te.input.slice(Ue),Te[0]=Te[0].slice(Ue),Te.index=te.lastIndex,te.lastIndex+=Te[0].length):te.lastIndex=0:R&&Te&&(te.lastIndex=te.global?Te.index+Te[0].length:pe),N&&Te&&Te.length>1&&D.call(Te[0],we,function(){for(ge=1;ge<arguments.length-2;ge++)void 0===arguments[ge]&&(Te[ge]=void 0)}),Te}),m.exports=U},7066:function(m,X,x){"use strict";var z=x(9670);m.exports=function(){var H=z(this),G="";return H.global&&(G+="g"),H.ignoreCase&&(G+="i"),H.multiline&&(G+="m"),H.dotAll&&(G+="s"),H.unicode&&(G+="u"),H.sticky&&(G+="y"),G}},2999:function(m,X,x){"use strict";var z=x(7293);function H(G,D){return RegExp(G,D)}X.UNSUPPORTED_Y=z(function(){var G=H("a","y");return G.lastIndex=2,null!=G.exec("abcd")}),X.BROKEN_CARET=z(function(){var G=H("^r","gy");return G.lastIndex=2,null!=G.exec("str")})},4488:function(m){m.exports=function(X){if(null==X)throw TypeError("Can't call method on "+X);return X}},3505:function(m,X,x){var z=x(7854),H=x(8880);m.exports=function(G,D){try{H(z,G,D)}catch{z[G]=D}return D}},6340:function(m,X,x){"use strict";var z=x(5005),H=x(3070),G=x(5112),D=x(9781),U=G("species");m.exports=function(R){var T=z(R);D&&T&&!T[U]&&(0,H.f)(T,U,{configurable:!0,get:function(){return this}})}},8003:function(m,X,x){var z=x(3070).f,H=x(6656),D=x(5112)("toStringTag");m.exports=function(U,R,T){U&&!H(U=T?U:U.prototype,D)&&z(U,D,{configurable:!0,value:R})}},6200:function(m,X,x){var z=x(2309),H=x(9711),G=z("keys");m.exports=function(D){return G[D]||(G[D]=H(D))}},5465:function(m,X,x){var z=x(7854),H=x(3505),G="__core-js_shared__",D=z[G]||H(G,{});m.exports=D},2309:function(m,X,x){var z=x(1913),H=x(5465);(m.exports=function(G,D){return H[G]||(H[G]=void 0!==D?D:{})})("versions",[]).push({version:"3.9.0",mode:z?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},6707:function(m,X,x){var z=x(9670),H=x(3099),D=x(5112)("species");m.exports=function(U,R){var N,T=z(U).constructor;return void 0===T||null==(N=z(T)[D])?R:H(N)}},8710:function(m,X,x){var z=x(9958),H=x(4488),G=function(D){return function(U,R){var Y,ee,T=String(H(U)),N=z(R),L=T.length;return N<0||N>=L?D?"":void 0:(Y=T.charCodeAt(N))<55296||Y>56319||N+1===L||(ee=T.charCodeAt(N+1))<56320||ee>57343?D?T.charAt(N):Y:D?T.slice(N,N+2):ee-56320+(Y-55296<<10)+65536}};m.exports={codeAt:G(!1),charAt:G(!0)}},3197:function(m){"use strict";var X=2147483647,N=/[^\0-\u007E]/,L=/[.\u3002\uFF0E\uFF61]/g,Y="Overflow: input needs wider integers to process",te=Math.floor,pe=String.fromCharCode,Te=function(Oe){return Oe+22+75*(Oe<26)},ge=function(Oe,je,Ue){var Le=0;for(Oe=Ue?te(Oe/700):Oe>>1,Oe+=te(Oe/je);Oe>455;Le+=36)Oe=te(Oe/35);return te(Le+36*Oe/(Oe+38))},Ce=function(Oe){var l,Me,je=[],Ue=(Oe=function(Oe){for(var je=[],Ue=0,Le=Oe.length;Ue<Le;){var ke=Oe.charCodeAt(Ue++);if(ke>=55296&&ke<=56319&&Ue<Le){var me=Oe.charCodeAt(Ue++);56320==(64512&me)?je.push(((1023&ke)<<10)+(1023&me)+65536):(je.push(ke),Ue--)}else je.push(ke)}return je}(Oe)).length,Le=128,ke=0,me=72;for(l=0;l<Oe.length;l++)(Me=Oe[l])<128&&je.push(pe(Me));var Ze=je.length,ut=Ze;for(Ze&&je.push("-");ut<Ue;){var $e=X;for(l=0;l<Oe.length;l++)(Me=Oe[l])>=Le&&Me<$e&&($e=Me);var Ct=ut+1;if($e-Le>te((X-ke)/Ct))throw RangeError(Y);for(ke+=($e-Le)*Ct,Le=$e,l=0;l<Oe.length;l++){if((Me=Oe[l])<Le&&++ke>X)throw RangeError(Y);if(Me==Le){for(var Ke=ke,Wt=36;;Wt+=36){var mr=Wt<=me?1:Wt>=me+26?26:Wt-me;if(Ke<mr)break;var nr=Ke-mr,Kr=36-mr;je.push(pe(Te(mr+nr%Kr))),Ke=te(nr/Kr)}je.push(pe(Te(Ke))),me=ge(ke,Ct,ut==Ze),ke=0,++ut}}++ke,++Le}return je.join("")};m.exports=function(Oe){var Le,ke,je=[],Ue=Oe.toLowerCase().replace(L,".").split(".");for(Le=0;Le<Ue.length;Le++)je.push(N.test(ke=Ue[Le])?"xn--"+Ce(ke):ke);return je.join(".")}},6091:function(m,X,x){var z=x(7293),H=x(1361);m.exports=function(D){return z(function(){return!!H[D]()||"\u200b\x85\u180e"!="\u200b\x85\u180e"[D]()||H[D].name!==D})}},3111:function(m,X,x){var z=x(4488),G="["+x(1361)+"]",D=RegExp("^"+G+G+"*"),U=RegExp(G+G+"*$"),R=function(T){return function(N){var L=String(z(N));return 1&T&&(L=L.replace(D,"")),2&T&&(L=L.replace(U,"")),L}};m.exports={start:R(1),end:R(2),trim:R(3)}},1400:function(m,X,x){var z=x(9958),H=Math.max,G=Math.min;m.exports=function(D,U){var R=z(D);return R<0?H(R+U,0):G(R,U)}},7067:function(m,X,x){var z=x(9958),H=x(7466);m.exports=function(G){if(void 0===G)return 0;var D=z(G),U=H(D);if(D!==U)throw RangeError("Wrong length or index");return U}},5656:function(m,X,x){var z=x(8361),H=x(4488);m.exports=function(G){return z(H(G))}},9958:function(m){var X=Math.ceil,x=Math.floor;m.exports=function(z){return isNaN(z=+z)?0:(z>0?x:X)(z)}},7466:function(m,X,x){var z=x(9958),H=Math.min;m.exports=function(G){return G>0?H(z(G),9007199254740991):0}},7908:function(m,X,x){var z=x(4488);m.exports=function(H){return Object(z(H))}},4590:function(m,X,x){var z=x(3002);m.exports=function(H,G){var D=z(H);if(D%G)throw RangeError("Wrong offset");return D}},3002:function(m,X,x){var z=x(9958);m.exports=function(H){var G=z(H);if(G<0)throw RangeError("The argument can't be less than 0");return G}},7593:function(m,X,x){var z=x(111);m.exports=function(H,G){if(!z(H))return H;var D,U;if(G&&"function"==typeof(D=H.toString)&&!z(U=D.call(H))||"function"==typeof(D=H.valueOf)&&!z(U=D.call(H))||!G&&"function"==typeof(D=H.toString)&&!z(U=D.call(H)))return U;throw TypeError("Can't convert object to primitive value")}},1694:function(m,X,x){var G={};G[x(5112)("toStringTag")]="z",m.exports="[object z]"===String(G)},9843:function(m,X,x){"use strict";var z=x(2109),H=x(7854),G=x(9781),D=x(3832),U=x(260),R=x(3331),T=x(5787),N=x(9114),L=x(8880),Y=x(7466),ee=x(7067),te=x(4590),pe=x(7593),we=x(6656),Te=x(648),ge=x(111),Ce=x(30),Oe=x(7674),je=x(8006).f,Ue=x(7321),Le=x(2092).forEach,ke=x(6340),me=x(3070),l=x(1236),Me=x(9909),Ze=x(9587),ut=Me.get,$e=Me.set,Ct=me.f,Ke=l.f,Wt=Math.round,mr=H.RangeError,nr=R.ArrayBuffer,Kr=R.DataView,Pn=U.NATIVE_ARRAY_BUFFER_VIEWS,Kn=U.TYPED_ARRAY_TAG,Mo=U.TypedArray,mo=U.TypedArrayPrototype,No=U.aTypedArrayConstructor,Di=U.isTypedArray,ci="BYTES_PER_ELEMENT",zn="Wrong length",Wn=function(sn,kn){for(var xo=0,Vo=kn.length,aa=new(No(sn))(Vo);Vo>xo;)aa[xo]=kn[xo++];return aa},an=function(sn,kn){Ct(sn,kn,{get:function(){return ut(this)[kn]}})},lr=function(sn){var kn;return sn instanceof nr||"ArrayBuffer"==(kn=Te(sn))||"SharedArrayBuffer"==kn},Pr=function(sn,kn){return Di(sn)&&"symbol"!=typeof kn&&kn in sn&&String(+kn)==String(kn)},Mn=function(kn,xo){return Pr(kn,xo=pe(xo,!0))?N(2,kn[xo]):Ke(kn,xo)},dn=function(kn,xo,Vo){return!(Pr(kn,xo=pe(xo,!0))&&ge(Vo)&&we(Vo,"value"))||we(Vo,"get")||we(Vo,"set")||Vo.configurable||we(Vo,"writable")&&!Vo.writable||we(Vo,"enumerable")&&!Vo.enumerable?Ct(kn,xo,Vo):(kn[xo]=Vo.value,kn)};G?(Pn||(l.f=Mn,me.f=dn,an(mo,"buffer"),an(mo,"byteOffset"),an(mo,"byteLength"),an(mo,"length")),z({target:"Object",stat:!0,forced:!Pn},{getOwnPropertyDescriptor:Mn,defineProperty:dn}),m.exports=function(sn,kn,xo){var Vo=sn.match(/\d+$/)[0]/8,aa=sn+(xo?"Clamped":"")+"Array",Fa="get"+sn,Qr="set"+sn,ze=H[aa],Xe=ze,at=Xe&&Xe.prototype,gr={},Zt=function(ln,no){Ct(ln,no,{get:function(){return function(ln,no){var oo=ut(ln);return oo.view[Fa](no*Vo+oo.byteOffset,!0)}(this,no)},set:function(oo){return function(ln,no,oo){var Ki=ut(ln);xo&&(oo=(oo=Wt(oo))<0?0:oo>255?255:255&oo),Ki.view[Qr](no*Vo+Ki.byteOffset,oo,!0)}(this,no,oo)},enumerable:!0})};Pn?D&&(Xe=kn(function(ln,no,oo,Ki){return T(ln,Xe,aa),Ze(ge(no)?lr(no)?void 0!==Ki?new ze(no,te(oo,Vo),Ki):void 0!==oo?new ze(no,te(oo,Vo)):new ze(no):Di(no)?Wn(Xe,no):Ue.call(Xe,no):new ze(ee(no)),ln,Xe)}),Oe&&Oe(Xe,Mo),Le(je(ze),function(ln){ln in Xe||L(Xe,ln,ze[ln])}),Xe.prototype=at):(Xe=kn(function(ln,no,oo,Ki){T(ln,Xe,aa);var Nt,jt,gt,li=0,ts=0;if(ge(no)){if(!lr(no))return Di(no)?Wn(Xe,no):Ue.call(Xe,no);Nt=no,ts=te(oo,Vo);var Fr=no.byteLength;if(void 0===Ki){if(Fr%Vo||(jt=Fr-ts)<0)throw mr(zn)}else if((jt=Y(Ki)*Vo)+ts>Fr)throw mr(zn);gt=jt/Vo}else gt=ee(no),Nt=new nr(jt=gt*Vo);for($e(ln,{buffer:Nt,byteOffset:ts,byteLength:jt,length:gt,view:new Kr(Nt)});li<gt;)Zt(ln,li++)}),Oe&&Oe(Xe,Mo),at=Xe.prototype=Ce(mo)),at.constructor!==Xe&&L(at,"constructor",Xe),Kn&&L(at,Kn,aa),gr[aa]=Xe,z({global:!0,forced:Xe!=ze,sham:!Pn},gr),ci in Xe||L(Xe,ci,Vo),ci in at||L(at,ci,Vo),ke(aa)}):m.exports=function(){}},3832:function(m,X,x){var z=x(7854),H=x(7293),G=x(7072),D=x(260).NATIVE_ARRAY_BUFFER_VIEWS,U=z.ArrayBuffer,R=z.Int8Array;m.exports=!D||!H(function(){R(1)})||!H(function(){new R(-1)})||!G(function(T){new R,new R(null),new R(1.5),new R(T)},!0)||H(function(){return 1!==new R(new U(2),1,void 0).length})},3074:function(m,X,x){var z=x(260).aTypedArrayConstructor,H=x(6707);m.exports=function(G,D){for(var U=H(G,G.constructor),R=0,T=D.length,N=new(z(U))(T);T>R;)N[R]=D[R++];return N}},7321:function(m,X,x){var z=x(7908),H=x(7466),G=x(1246),D=x(7659),U=x(9974),R=x(260).aTypedArrayConstructor;m.exports=function(N){var we,Te,ge,Ce,Oe,je,L=z(N),Y=arguments.length,ee=Y>1?arguments[1]:void 0,te=void 0!==ee,pe=G(L);if(null!=pe&&!D(pe))for(je=(Oe=pe.call(L)).next,L=[];!(Ce=je.call(Oe)).done;)L.push(Ce.value);for(te&&Y>2&&(ee=U(ee,arguments[2],2)),Te=H(L.length),ge=new(R(this))(Te),we=0;Te>we;we++)ge[we]=te?ee(L[we],we):L[we];return ge}},9711:function(m){var X=0,x=Math.random();m.exports=function(z){return"Symbol("+String(void 0===z?"":z)+")_"+(++X+x).toString(36)}},3307:function(m,X,x){var z=x(133);m.exports=z&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5112:function(m,X,x){var z=x(7854),H=x(2309),G=x(6656),D=x(9711),U=x(133),R=x(3307),T=H("wks"),N=z.Symbol,L=R?N:N&&N.withoutSetter||D;m.exports=function(Y){return G(T,Y)||(T[Y]=U&&G(N,Y)?N[Y]:L("Symbol."+Y)),T[Y]}},1361:function(m){m.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},8264:function(m,X,x){"use strict";var z=x(2109),H=x(7854),G=x(3331),D=x(6340),U="ArrayBuffer",R=G[U];z({global:!0,forced:H[U]!==R},{ArrayBuffer:R}),D(U)},2222:function(m,X,x){"use strict";var z=x(2109),H=x(7293),G=x(3157),D=x(111),U=x(7908),R=x(7466),T=x(6135),N=x(5417),L=x(1194),Y=x(5112),ee=x(7392),te=Y("isConcatSpreadable"),pe=9007199254740991,we="Maximum allowed index exceeded",Te=ee>=51||!H(function(){var je=[];return je[te]=!1,je.concat()[0]!==je}),ge=L("concat"),Ce=function(je){if(!D(je))return!1;var Ue=je[te];return void 0!==Ue?!!Ue:G(je)};z({target:"Array",proto:!0,forced:!Te||!ge},{concat:function(Ue){var l,Me,Ze,ut,$e,Le=U(this),ke=N(Le,0),me=0;for(l=-1,Ze=arguments.length;l<Ze;l++)if(Ce($e=-1===l?Le:arguments[l])){if(me+(ut=R($e.length))>pe)throw TypeError(we);for(Me=0;Me<ut;Me++,me++)Me in $e&&T(ke,me,$e[Me])}else{if(me>=pe)throw TypeError(we);T(ke,me++,$e)}return ke.length=me,ke}})},7327:function(m,X,x){"use strict";var z=x(2109),H=x(2092).filter;z({target:"Array",proto:!0,forced:!x(1194)("filter")},{filter:function(R){return H(this,R,arguments.length>1?arguments[1]:void 0)}})},2772:function(m,X,x){"use strict";var z=x(2109),H=x(1318).indexOf,G=x(9341),D=[].indexOf,U=!!D&&1/[1].indexOf(1,-0)<0,R=G("indexOf");z({target:"Array",proto:!0,forced:U||!R},{indexOf:function(N){return U?D.apply(this,arguments)||0:H(this,N,arguments.length>1?arguments[1]:void 0)}})},6992:function(m,X,x){"use strict";var z=x(5656),H=x(1223),G=x(7497),D=x(9909),U=x(654),R="Array Iterator",T=D.set,N=D.getterFor(R);m.exports=U(Array,"Array",function(L,Y){T(this,{type:R,target:z(L),index:0,kind:Y})},function(){var L=N(this),Y=L.target,ee=L.kind,te=L.index++;return!Y||te>=Y.length?(L.target=void 0,{value:void 0,done:!0}):"keys"==ee?{value:te,done:!1}:"values"==ee?{value:Y[te],done:!1}:{value:[te,Y[te]],done:!1}},"values"),G.Arguments=G.Array,H("keys"),H("values"),H("entries")},1249:function(m,X,x){"use strict";var z=x(2109),H=x(2092).map;z({target:"Array",proto:!0,forced:!x(1194)("map")},{map:function(R){return H(this,R,arguments.length>1?arguments[1]:void 0)}})},7042:function(m,X,x){"use strict";var z=x(2109),H=x(111),G=x(3157),D=x(1400),U=x(7466),R=x(5656),T=x(6135),N=x(5112),Y=x(1194)("slice"),ee=N("species"),te=[].slice,pe=Math.max;z({target:"Array",proto:!0,forced:!Y},{slice:function(Te,ge){var Le,ke,me,Ce=R(this),Oe=U(Ce.length),je=D(Te,Oe),Ue=D(void 0===ge?Oe:ge,Oe);if(G(Ce)&&("function"!=typeof(Le=Ce.constructor)||Le!==Array&&!G(Le.prototype)?H(Le)&&null===(Le=Le[ee])&&(Le=void 0):Le=void 0,Le===Array||void 0===Le))return te.call(Ce,je,Ue);for(ke=new(void 0===Le?Array:Le)(pe(Ue-je,0)),me=0;je<Ue;je++,me++)je in Ce&&T(ke,me,Ce[je]);return ke.length=me,ke}})},561:function(m,X,x){"use strict";var z=x(2109),H=x(1400),G=x(9958),D=x(7466),U=x(7908),R=x(5417),T=x(6135),L=x(1194)("splice"),Y=Math.max,ee=Math.min;z({target:"Array",proto:!0,forced:!L},{splice:function(Te,ge){var Le,ke,me,l,Me,Ze,Ce=U(this),Oe=D(Ce.length),je=H(Te,Oe),Ue=arguments.length;if(0===Ue?Le=ke=0:1===Ue?(Le=0,ke=Oe-je):(Le=Ue-2,ke=ee(Y(G(ge),0),Oe-je)),Oe+Le-ke>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(me=R(Ce,ke),l=0;l<ke;l++)(Me=je+l)in Ce&&T(me,l,Ce[Me]);if(me.length=ke,Le<ke){for(l=je;l<Oe-ke;l++)Ze=l+Le,(Me=l+ke)in Ce?Ce[Ze]=Ce[Me]:delete Ce[Ze];for(l=Oe;l>Oe-ke+Le;l--)delete Ce[l-1]}else if(Le>ke)for(l=Oe-ke;l>je;l--)Ze=l+Le-1,(Me=l+ke-1)in Ce?Ce[Ze]=Ce[Me]:delete Ce[Ze];for(l=0;l<Le;l++)Ce[l+je]=arguments[l+2];return Ce.length=Oe-ke+Le,me}})},8309:function(m,X,x){var z=x(9781),H=x(3070).f,G=Function.prototype,D=G.toString,U=/^\s*function ([^ (]*)/,R="name";z&&!(R in G)&&H(G,R,{configurable:!0,get:function(){try{return D.call(this).match(U)[1]}catch{return""}}})},489:function(m,X,x){var z=x(2109),H=x(7293),G=x(7908),D=x(9518),U=x(8544);z({target:"Object",stat:!0,forced:H(function(){D(1)}),sham:!U},{getPrototypeOf:function(N){return D(G(N))}})},1539:function(m,X,x){var z=x(1694),H=x(1320),G=x(288);z||H(Object.prototype,"toString",G,{unsafe:!0})},4916:function(m,X,x){"use strict";var z=x(2109),H=x(2261);z({target:"RegExp",proto:!0,forced:/./.exec!==H},{exec:H})},9714:function(m,X,x){"use strict";var z=x(1320),H=x(9670),G=x(7293),D=x(7066),U="toString",R=RegExp.prototype,T=R[U];(G(function(){return"/a/b"!=T.call({source:"a",flags:"b"})})||T.name!=U)&&z(RegExp.prototype,U,function(){var ee=H(this),te=String(ee.source),pe=ee.flags;return"/"+te+"/"+String(void 0===pe&&ee instanceof RegExp&&!("flags"in R)?D.call(ee):pe)},{unsafe:!0})},8783:function(m,X,x){"use strict";var z=x(8710).charAt,H=x(9909),G=x(654),D="String Iterator",U=H.set,R=H.getterFor(D);G(String,"String",function(T){U(this,{type:D,string:String(T),index:0})},function(){var ee,N=R(this),L=N.string,Y=N.index;return Y>=L.length?{value:void 0,done:!0}:(ee=z(L,Y),N.index+=ee.length,{value:ee,done:!1})})},4723:function(m,X,x){"use strict";var z=x(7007),H=x(9670),G=x(7466),D=x(4488),U=x(1530),R=x(7651);z("match",1,function(T,N,L){return[function(ee){var te=D(this),pe=ee?.[T];return void 0!==pe?pe.call(ee,te):new RegExp(ee)[T](String(te))},function(Y){var ee=L(N,Y,this);if(ee.done)return ee.value;var te=H(Y),pe=String(this);if(!te.global)return R(te,pe);var we=te.unicode;te.lastIndex=0;for(var Ce,Te=[],ge=0;null!==(Ce=R(te,pe));){var Oe=String(Ce[0]);Te[ge]=Oe,""===Oe&&(te.lastIndex=U(pe,G(te.lastIndex),we)),ge++}return 0===ge?null:Te}]})},5306:function(m,X,x){"use strict";var z=x(7007),H=x(9670),G=x(7466),D=x(9958),U=x(4488),R=x(1530),T=x(647),N=x(7651),L=Math.max,Y=Math.min,ee=function(te){return void 0===te?te:String(te)};z("replace",2,function(te,pe,we,Te){var ge=Te.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Ce=Te.REPLACE_KEEPS_$0,Oe=ge?"$":"$0";return[function(Ue,Le){var ke=U(this),me=Ue?.[te];return void 0!==me?me.call(Ue,ke,Le):pe.call(String(ke),Ue,Le)},function(je,Ue){if(!ge&&Ce||"string"==typeof Ue&&-1===Ue.indexOf(Oe)){var Le=we(pe,je,this,Ue);if(Le.done)return Le.value}var ke=H(je),me=String(this),l="function"==typeof Ue;l||(Ue=String(Ue));var Me=ke.global;if(Me){var Ze=ke.unicode;ke.lastIndex=0}for(var ut=[];;){var $e=N(ke,me);if(null===$e||(ut.push($e),!Me))break;""===String($e[0])&&(ke.lastIndex=R(me,G(ke.lastIndex),Ze))}for(var Ke="",Wt=0,mr=0;mr<ut.length;mr++){$e=ut[mr];for(var nr=String($e[0]),Kr=L(Y(D($e.index),me.length),0),Pn=[],Kn=1;Kn<$e.length;Kn++)Pn.push(ee($e[Kn]));var Mo=$e.groups;if(l){var mo=[nr].concat(Pn,Kr,me);void 0!==Mo&&mo.push(Mo);var No=String(Ue.apply(void 0,mo))}else No=T(nr,me,Kr,Pn,Mo,Ue);Kr>=Wt&&(Ke+=me.slice(Wt,Kr)+No,Wt=Kr+nr.length)}return Ke+me.slice(Wt)}]})},3123:function(m,X,x){"use strict";var z=x(7007),H=x(7850),G=x(9670),D=x(4488),U=x(6707),R=x(1530),T=x(7466),N=x(7651),L=x(2261),Y=x(7293),ee=[].push,te=Math.min,pe=4294967295,we=!Y(function(){return!RegExp(pe,"y")});z("split",2,function(Te,ge,Ce){var Oe;return Oe="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(je,Ue){var Le=String(D(this)),ke=void 0===Ue?pe:Ue>>>0;if(0===ke)return[];if(void 0===je)return[Le];if(!H(je))return ge.call(Le,je,ke);for(var ut,$e,Ct,me=[],Me=0,Ze=new RegExp(je.source,(je.ignoreCase?"i":"")+(je.multiline?"m":"")+(je.unicode?"u":"")+(je.sticky?"y":"")+"g");(ut=L.call(Ze,Le))&&!(($e=Ze.lastIndex)>Me&&(me.push(Le.slice(Me,ut.index)),ut.length>1&&ut.index<Le.length&&ee.apply(me,ut.slice(1)),Ct=ut[0].length,Me=$e,me.length>=ke));)Ze.lastIndex===ut.index&&Ze.lastIndex++;return Me===Le.length?(Ct||!Ze.test(""))&&me.push(""):me.push(Le.slice(Me)),me.length>ke?me.slice(0,ke):me}:"0".split(void 0,0).length?function(je,Ue){return void 0===je&&0===Ue?[]:ge.call(this,je,Ue)}:ge,[function(Ue,Le){var ke=D(this),me=Ue?.[Te];return void 0!==me?me.call(Ue,ke,Le):Oe.call(String(ke),Ue,Le)},function(je,Ue){var Le=Ce(Oe,je,this,Ue,Oe!==ge);if(Le.done)return Le.value;var ke=G(je),me=String(this),l=U(ke,RegExp),Me=ke.unicode,ut=new l(we?ke:"^(?:"+ke.source+")",(ke.ignoreCase?"i":"")+(ke.multiline?"m":"")+(ke.unicode?"u":"")+(we?"y":"g")),$e=void 0===Ue?pe:Ue>>>0;if(0===$e)return[];if(0===me.length)return null===N(ut,me)?[me]:[];for(var Ct=0,Ke=0,Wt=[];Ke<me.length;){ut.lastIndex=we?Ke:0;var nr,mr=N(ut,we?me:me.slice(Ke));if(null===mr||(nr=te(T(ut.lastIndex+(we?0:Ke)),me.length))===Ct)Ke=R(me,Ke,Me);else{if(Wt.push(me.slice(Ct,Ke)),Wt.length===$e)return Wt;for(var Kr=1;Kr<=mr.length-1;Kr++)if(Wt.push(mr[Kr]),Wt.length===$e)return Wt;Ke=Ct=nr}}return Wt.push(me.slice(Ct)),Wt}]},!we)},3210:function(m,X,x){"use strict";var z=x(2109),H=x(3111).trim;z({target:"String",proto:!0,forced:x(6091)("trim")},{trim:function(){return H(this)}})},2990:function(m,X,x){"use strict";var z=x(260),H=x(1048),G=z.aTypedArray;(0,z.exportTypedArrayMethod)("copyWithin",function(R,T){return H.call(G(this),R,T,arguments.length>2?arguments[2]:void 0)})},8927:function(m,X,x){"use strict";var z=x(260),H=x(2092).every,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("every",function(R){return H(G(this),R,arguments.length>1?arguments[1]:void 0)})},3105:function(m,X,x){"use strict";var z=x(260),H=x(1285),G=z.aTypedArray;(0,z.exportTypedArrayMethod)("fill",function(R){return H.apply(G(this),arguments)})},5035:function(m,X,x){"use strict";var z=x(260),H=x(2092).filter,G=x(3074),D=z.aTypedArray;(0,z.exportTypedArrayMethod)("filter",function(T){var N=H(D(this),T,arguments.length>1?arguments[1]:void 0);return G(this,N)})},7174:function(m,X,x){"use strict";var z=x(260),H=x(2092).findIndex,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("findIndex",function(R){return H(G(this),R,arguments.length>1?arguments[1]:void 0)})},4345:function(m,X,x){"use strict";var z=x(260),H=x(2092).find,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("find",function(R){return H(G(this),R,arguments.length>1?arguments[1]:void 0)})},2846:function(m,X,x){"use strict";var z=x(260),H=x(2092).forEach,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("forEach",function(R){H(G(this),R,arguments.length>1?arguments[1]:void 0)})},4731:function(m,X,x){"use strict";var z=x(260),H=x(1318).includes,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("includes",function(R){return H(G(this),R,arguments.length>1?arguments[1]:void 0)})},7209:function(m,X,x){"use strict";var z=x(260),H=x(1318).indexOf,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("indexOf",function(R){return H(G(this),R,arguments.length>1?arguments[1]:void 0)})},6319:function(m,X,x){"use strict";var z=x(7854),H=x(260),G=x(6992),U=x(5112)("iterator"),R=z.Uint8Array,T=G.values,N=G.keys,L=G.entries,Y=H.aTypedArray,ee=H.exportTypedArrayMethod,te=R&&R.prototype[U],pe=!!te&&("values"==te.name||null==te.name),we=function(){return T.call(Y(this))};ee("entries",function(){return L.call(Y(this))}),ee("keys",function(){return N.call(Y(this))}),ee("values",we,!pe),ee(U,we,!pe)},8867:function(m,X,x){"use strict";var z=x(260),H=z.aTypedArray,D=[].join;(0,z.exportTypedArrayMethod)("join",function(R){return D.apply(H(this),arguments)})},7789:function(m,X,x){"use strict";var z=x(260),H=x(6583),G=z.aTypedArray;(0,z.exportTypedArrayMethod)("lastIndexOf",function(R){return H.apply(G(this),arguments)})},3739:function(m,X,x){"use strict";var z=x(260),H=x(2092).map,G=x(6707),D=z.aTypedArray,U=z.aTypedArrayConstructor;(0,z.exportTypedArrayMethod)("map",function(N){return H(D(this),N,arguments.length>1?arguments[1]:void 0,function(L,Y){return new(U(G(L,L.constructor)))(Y)})})},4483:function(m,X,x){"use strict";var z=x(260),H=x(3671).right,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("reduceRight",function(R){return H(G(this),R,arguments.length,arguments.length>1?arguments[1]:void 0)})},9368:function(m,X,x){"use strict";var z=x(260),H=x(3671).left,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("reduce",function(R){return H(G(this),R,arguments.length,arguments.length>1?arguments[1]:void 0)})},2056:function(m,X,x){"use strict";var z=x(260),H=z.aTypedArray,D=Math.floor;(0,z.exportTypedArrayMethod)("reverse",function(){for(var Y,R=this,T=H(R).length,N=D(T/2),L=0;L<N;)Y=R[L],R[L++]=R[--T],R[T]=Y;return R})},3462:function(m,X,x){"use strict";var z=x(260),H=x(7466),G=x(4590),D=x(7908),U=x(7293),R=z.aTypedArray;(0,z.exportTypedArrayMethod)("set",function(Y){R(this);var ee=G(arguments.length>1?arguments[1]:void 0,1),te=this.length,pe=D(Y),we=H(pe.length),Te=0;if(we+ee>te)throw RangeError("Wrong length");for(;Te<we;)this[ee+Te]=pe[Te++]},U(function(){new Int8Array(1).set({})}))},678:function(m,X,x){"use strict";var z=x(260),H=x(6707),G=x(7293),D=z.aTypedArray,U=z.aTypedArrayConstructor,T=[].slice;(0,z.exportTypedArrayMethod)("slice",function(Y,ee){for(var te=T.call(D(this),Y,ee),pe=H(this,this.constructor),we=0,Te=te.length,ge=new(U(pe))(Te);Te>we;)ge[we]=te[we++];return ge},G(function(){new Int8Array(1).slice()}))},7462:function(m,X,x){"use strict";var z=x(260),H=x(2092).some,G=z.aTypedArray;(0,z.exportTypedArrayMethod)("some",function(R){return H(G(this),R,arguments.length>1?arguments[1]:void 0)})},3824:function(m,X,x){"use strict";var z=x(260),H=z.aTypedArray,D=[].sort;(0,z.exportTypedArrayMethod)("sort",function(R){return D.call(H(this),R)})},5021:function(m,X,x){"use strict";var z=x(260),H=x(7466),G=x(1400),D=x(6707),U=z.aTypedArray;(0,z.exportTypedArrayMethod)("subarray",function(N,L){var Y=U(this),ee=Y.length,te=G(N,ee);return new(D(Y,Y.constructor))(Y.buffer,Y.byteOffset+te*Y.BYTES_PER_ELEMENT,H((void 0===L?ee:G(L,ee))-te))})},2974:function(m,X,x){"use strict";var z=x(7854),H=x(260),G=x(7293),D=z.Int8Array,U=H.aTypedArray,R=H.exportTypedArrayMethod,T=[].toLocaleString,N=[].slice,L=!!D&&G(function(){T.call(new D(1))});R("toLocaleString",function(){return T.apply(L?N.call(U(this)):U(this),arguments)},G(function(){return[1,2].toLocaleString()!=new D([1,2]).toLocaleString()})||!G(function(){D.prototype.toLocaleString.call([1,2])}))},5016:function(m,X,x){"use strict";var z=x(260).exportTypedArrayMethod,H=x(7293),D=x(7854).Uint8Array,U=D&&D.prototype||{},R=[].toString,T=[].join;H(function(){R.call({})})&&(R=function(){return T.call(this)}),z("toString",R,U.toString!=R)},2472:function(m,X,x){x(9843)("Uint8",function(H){return function(D,U,R){return H(this,D,U,R)}})},4747:function(m,X,x){var z=x(7854),H=x(8324),G=x(8533),D=x(8880);for(var U in H){var R=z[U],T=R&&R.prototype;if(T&&T.forEach!==G)try{D(T,"forEach",G)}catch{T.forEach=G}}},3948:function(m,X,x){var z=x(7854),H=x(8324),G=x(6992),D=x(8880),U=x(5112),R=U("iterator"),T=U("toStringTag"),N=G.values;for(var L in H){var Y=z[L],ee=Y&&Y.prototype;if(ee){if(ee[R]!==N)try{D(ee,R,N)}catch{ee[R]=N}if(ee[T]||D(ee,T,L),H[L])for(var te in G)if(ee[te]!==G[te])try{D(ee,te,G[te])}catch{ee[te]=G[te]}}}},1637:function(m,X,x){"use strict";x(6992);var z=x(2109),H=x(5005),G=x(590),D=x(1320),U=x(2248),R=x(8003),T=x(4994),N=x(9909),L=x(5787),Y=x(6656),ee=x(9974),te=x(648),pe=x(9670),we=x(111),Te=x(30),ge=x(9114),Ce=x(8554),Oe=x(1246),je=x(5112),Ue=H("fetch"),Le=H("Headers"),ke=je("iterator"),me="URLSearchParams",l=me+"Iterator",Me=N.set,Ze=N.getterFor(me),ut=N.getterFor(l),$e=/\+/g,Ct=Array(4),Ke=function(Wn){return Ct[Wn-1]||(Ct[Wn-1]=RegExp("((?:%[\\da-f]{2}){"+Wn+"})","gi"))},Wt=function(Wn){try{return decodeURIComponent(Wn)}catch{return Wn}},mr=function(Wn){var an=Wn.replace($e," "),lr=4;try{return decodeURIComponent(an)}catch{for(;lr;)an=an.replace(Ke(lr--),Wt);return an}},nr=/[!'()~]|%20/g,Kr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Pn=function(Wn){return Kr[Wn]},Kn=function(Wn){return encodeURIComponent(Wn).replace(nr,Pn)},Mo=function(Wn,an){if(an)for(var Mn,dn,lr=an.split("&"),Pr=0;Pr<lr.length;)(Mn=lr[Pr++]).length&&(dn=Mn.split("="),Wn.push({key:mr(dn.shift()),value:mr(dn.join("="))}))},mo=function(Wn){this.entries.length=0,Mo(this.entries,Wn)},No=function(Wn,an){if(Wn<an)throw TypeError("Not enough arguments")},Di=T(function(an,lr){Me(this,{type:l,iterator:Ce(Ze(an).entries),kind:lr})},"Iterator",function(){var an=ut(this),lr=an.kind,Pr=an.iterator.next(),Mn=Pr.value;return Pr.done||(Pr.value="keys"===lr?Mn.key:"values"===lr?Mn.value:[Mn.key,Mn.value]),Pr}),ci=function(){L(this,ci,me);var Mn,dn,sn,kn,xo,Vo,aa,Fa,Qr,an=arguments.length>0?arguments[0]:void 0,Pr=[];if(Me(this,{type:me,entries:Pr,updateURL:function(){},updateSearchParams:mo}),void 0!==an)if(we(an))if("function"==typeof(Mn=Oe(an)))for(sn=(dn=Mn.call(an)).next;!(kn=sn.call(dn)).done;){if((aa=(Vo=(xo=Ce(pe(kn.value))).next).call(xo)).done||(Fa=Vo.call(xo)).done||!Vo.call(xo).done)throw TypeError("Expected sequence with length 2");Pr.push({key:aa.value+"",value:Fa.value+""})}else for(Qr in an)Y(an,Qr)&&Pr.push({key:Qr,value:an[Qr]+""});else Mo(Pr,"string"==typeof an?"?"===an.charAt(0)?an.slice(1):an:an+"")},zn=ci.prototype;U(zn,{append:function(an,lr){No(arguments.length,2);var Pr=Ze(this);Pr.entries.push({key:an+"",value:lr+""}),Pr.updateURL()},delete:function(Wn){No(arguments.length,1);for(var an=Ze(this),lr=an.entries,Pr=Wn+"",Mn=0;Mn<lr.length;)lr[Mn].key===Pr?lr.splice(Mn,1):Mn++;an.updateURL()},get:function(an){No(arguments.length,1);for(var lr=Ze(this).entries,Pr=an+"",Mn=0;Mn<lr.length;Mn++)if(lr[Mn].key===Pr)return lr[Mn].value;return null},getAll:function(an){No(arguments.length,1);for(var lr=Ze(this).entries,Pr=an+"",Mn=[],dn=0;dn<lr.length;dn++)lr[dn].key===Pr&&Mn.push(lr[dn].value);return Mn},has:function(an){No(arguments.length,1);for(var lr=Ze(this).entries,Pr=an+"",Mn=0;Mn<lr.length;)if(lr[Mn++].key===Pr)return!0;return!1},set:function(an,lr){No(arguments.length,1);for(var Vo,Pr=Ze(this),Mn=Pr.entries,dn=!1,sn=an+"",kn=lr+"",xo=0;xo<Mn.length;xo++)(Vo=Mn[xo]).key===sn&&(dn?Mn.splice(xo--,1):(dn=!0,Vo.value=kn));dn||Mn.push({key:sn,value:kn}),Pr.updateURL()},sort:function(){var Mn,dn,sn,an=Ze(this),lr=an.entries,Pr=lr.slice();for(lr.length=0,sn=0;sn<Pr.length;sn++){for(Mn=Pr[sn],dn=0;dn<sn;dn++)if(lr[dn].key>Mn.key){lr.splice(dn,0,Mn);break}dn===sn&&lr.push(Mn)}an.updateURL()},forEach:function(an){for(var dn,lr=Ze(this).entries,Pr=ee(an,arguments.length>1?arguments[1]:void 0,3),Mn=0;Mn<lr.length;)Pr((dn=lr[Mn++]).value,dn.key,this)},keys:function(){return new Di(this,"keys")},values:function(){return new Di(this,"values")},entries:function(){return new Di(this,"entries")}},{enumerable:!0}),D(zn,ke,zn.entries),D(zn,"toString",function(){for(var Mn,an=Ze(this).entries,lr=[],Pr=0;Pr<an.length;)Mn=an[Pr++],lr.push(Kn(Mn.key)+"="+Kn(Mn.value));return lr.join("&")},{enumerable:!0}),R(ci,me),z({global:!0,forced:!G},{URLSearchParams:ci}),!G&&"function"==typeof Ue&&"function"==typeof Le&&z({global:!0,enumerable:!0,forced:!0},{fetch:function(an){var Pr,Mn,dn,lr=[an];return arguments.length>1&&(we(Pr=arguments[1])&&te(Mn=Pr.body)===me&&((dn=Pr.headers?new Le(Pr.headers):new Le).has("content-type")||dn.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Pr=Te(Pr,{body:ge(0,String(Mn)),headers:ge(0,dn)})),lr.push(Pr)),Ue.apply(this,lr)}}),m.exports={URLSearchParams:ci,getState:Ze}},285:function(m,X,x){"use strict";x(8783);var mo,z=x(2109),H=x(9781),G=x(590),D=x(7854),U=x(6048),R=x(1320),T=x(5787),N=x(6656),L=x(1574),Y=x(8457),ee=x(8710).codeAt,te=x(3197),pe=x(8003),we=x(1637),Te=x(9909),ge=D.URL,Ce=we.URLSearchParams,Oe=we.getState,je=Te.set,Ue=Te.getterFor("URL"),Le=Math.floor,ke=Math.pow,l="Invalid scheme",Me="Invalid host",Ze="Invalid port",ut=/[A-Za-z]/,$e=/[\d+-.A-Za-z]/,Ct=/\d/,Ke=/^(0x|0X)/,Wt=/^[0-7]+$/,mr=/^\d+$/,nr=/^[\dA-Fa-f]+$/,Kr=/[\u0000\t\u000A\u000D #%/:?@[\\]]/,Pn=/[\u0000\t\u000A\u000D #/:?@[\\]]/,Kn=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Mo=/[\t\u000A\u000D]/g,No=function(Jt,Jn){var Qn,Io,ri;if("["==Jn.charAt(0)){if("]"!=Jn.charAt(Jn.length-1)||!(Qn=ci(Jn.slice(1,-1))))return Me;Jt.host=Qn}else if(kn(Jt)){if(Jn=te(Jn),Kr.test(Jn)||null===(Qn=Di(Jn)))return Me;Jt.host=Qn}else{if(Pn.test(Jn))return Me;for(Qn="",Io=Y(Jn),ri=0;ri<Io.length;ri++)Qn+=dn(Io[ri],an);Jt.host=Qn}},Di=function(Jt){var Qn,Io,ri,Ka,Ei,ui,ns,Jn=Jt.split(".");if(Jn.length&&""==Jn[Jn.length-1]&&Jn.pop(),(Qn=Jn.length)>4)return Jt;for(Io=[],ri=0;ri<Qn;ri++){if(""==(Ka=Jn[ri]))return Jt;if(Ei=10,Ka.length>1&&"0"==Ka.charAt(0)&&(Ei=Ke.test(Ka)?16:8,Ka=Ka.slice(8==Ei?1:2)),""===Ka)ui=0;else{if(!(10==Ei?mr:8==Ei?Wt:nr).test(Ka))return Jt;ui=parseInt(Ka,Ei)}Io.push(ui)}for(ri=0;ri<Qn;ri++)if(ui=Io[ri],ri==Qn-1){if(ui>=ke(256,5-Qn))return null}else if(ui>255)return null;for(ns=Io.pop(),ri=0;ri<Io.length;ri++)ns+=Io[ri]*ke(256,3-ri);return ns},ci=function(Jt){var Ka,Ei,ui,ns,nl,Bs,To,Jn=[0,0,0,0,0,0,0,0],Qn=0,Io=null,ri=0,rs=function(){return Jt.charAt(ri)};if(":"==rs()){if(":"!=Jt.charAt(1))return;ri+=2,Io=++Qn}for(;rs();){if(8==Qn)return;if(":"!=rs()){for(Ka=Ei=0;Ei<4&&nr.test(rs());)Ka=16*Ka+parseInt(rs(),16),ri++,Ei++;if("."==rs()){if(0==Ei||(ri-=Ei,Qn>6))return;for(ui=0;rs();){if(ns=null,ui>0){if(!("."==rs()&&ui<4))return;ri++}if(!Ct.test(rs()))return;for(;Ct.test(rs());){if(nl=parseInt(rs(),10),null===ns)ns=nl;else{if(0==ns)return;ns=10*ns+nl}if(ns>255)return;ri++}Jn[Qn]=256*Jn[Qn]+ns,(2==++ui||4==ui)&&Qn++}if(4!=ui)return;break}if(":"==rs()){if(ri++,!rs())return}else if(rs())return;Jn[Qn++]=Ka}else{if(null!==Io)return;ri++,Io=++Qn}}if(null!==Io)for(Bs=Qn-Io,Qn=7;0!=Qn&&Bs>0;)To=Jn[Qn],Jn[Qn--]=Jn[Io+Bs-1],Jn[Io+--Bs]=To;else if(8!=Qn)return;return Jn},Wn=function(Jt){var Jn,Qn,Io,ri;if("number"==typeof Jt){for(Jn=[],Qn=0;Qn<4;Qn++)Jn.unshift(Jt%256),Jt=Le(Jt/256);return Jn.join(".")}if("object"==typeof Jt){for(Jn="",Io=function(Jt){for(var Jn=null,Qn=1,Io=null,ri=0,Ka=0;Ka<8;Ka++)0!==Jt[Ka]?(ri>Qn&&(Jn=Io,Qn=ri),Io=null,ri=0):(null===Io&&(Io=Ka),++ri);return ri>Qn&&(Jn=Io,Qn=ri),Jn}(Jt),Qn=0;Qn<8;Qn++)ri&&0===Jt[Qn]||(ri&&(ri=!1),Io===Qn?(Jn+=Qn?":":"::",ri=!0):(Jn+=Jt[Qn].toString(16),Qn<7&&(Jn+=":")));return"["+Jn+"]"}return Jt},an={},lr=L({},an,{" ":1,'"':1,"<":1,">":1,"`":1}),Pr=L({},lr,{"#":1,"?":1,"{":1,"}":1}),Mn=L({},Pr,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),dn=function(Jt,Jn){var Qn=ee(Jt,0);return Qn>32&&Qn<127&&!N(Jn,Jt)?Jt:encodeURIComponent(Jt)},sn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},kn=function(Jt){return N(sn,Jt.scheme)},xo=function(Jt){return""!=Jt.username||""!=Jt.password},Vo=function(Jt){return!Jt.host||Jt.cannotBeABaseURL||"file"==Jt.scheme},aa=function(Jt,Jn){var Qn;return 2==Jt.length&&ut.test(Jt.charAt(0))&&(":"==(Qn=Jt.charAt(1))||!Jn&&"|"==Qn)},Fa=function(Jt){var Jn;return Jt.length>1&&aa(Jt.slice(0,2))&&(2==Jt.length||"/"===(Jn=Jt.charAt(2))||"\\"===Jn||"?"===Jn||"#"===Jn)},Qr=function(Jt){var Jn=Jt.path,Qn=Jn.length;Qn&&("file"!=Jt.scheme||1!=Qn||!aa(Jn[0],!0))&&Jn.pop()},ze=function(Jt){return"."===Jt||"%2e"===Jt.toLowerCase()},Xe=function(Jt){return".."===(Jt=Jt.toLowerCase())||"%2e."===Jt||".%2e"===Jt||"%2e%2e"===Jt},at={},gr={},Pt={},mt={},Zt={},ln={},no={},oo={},Ki={},li={},ts={},Nt={},jt={},gt={},Fr={},tr={},wt={},St={},vr={},fn={},Ko={},Ro=function(Jt,Jn,Qn,Io){var Bs,To,rs,el,ri=Qn||at,Ka=0,Ei="",ui=!1,ns=!1,nl=!1;for(Qn||(Jt.scheme="",Jt.username="",Jt.password="",Jt.host=null,Jt.port=null,Jt.path=[],Jt.query=null,Jt.fragment=null,Jt.cannotBeABaseURL=!1,Jn=Jn.replace(Kn,"")),Jn=Jn.replace(Mo,""),Bs=Y(Jn);Ka<=Bs.length;){switch(To=Bs[Ka],ri){case at:if(!To||!ut.test(To)){if(Qn)return l;ri=Pt;continue}Ei+=To.toLowerCase(),ri=gr;break;case gr:if(To&&($e.test(To)||"+"==To||"-"==To||"."==To))Ei+=To.toLowerCase();else{if(":"!=To){if(Qn)return l;Ei="",ri=Pt,Ka=0;continue}if(Qn&&(kn(Jt)!=N(sn,Ei)||"file"==Ei&&(xo(Jt)||null!==Jt.port)||"file"==Jt.scheme&&!Jt.host))return;if(Jt.scheme=Ei,Qn)return void(kn(Jt)&&sn[Jt.scheme]==Jt.port&&(Jt.port=null));Ei="","file"==Jt.scheme?ri=gt:kn(Jt)&&Io&&Io.scheme==Jt.scheme?ri=mt:kn(Jt)?ri=oo:"/"==Bs[Ka+1]?(ri=Zt,Ka++):(Jt.cannotBeABaseURL=!0,Jt.path.push(""),ri=vr)}break;case Pt:if(!Io||Io.cannotBeABaseURL&&"#"!=To)return l;if(Io.cannotBeABaseURL&&"#"==To){Jt.scheme=Io.scheme,Jt.path=Io.path.slice(),Jt.query=Io.query,Jt.fragment="",Jt.cannotBeABaseURL=!0,ri=Ko;break}ri="file"==Io.scheme?gt:ln;continue;case mt:if("/"!=To||"/"!=Bs[Ka+1]){ri=ln;continue}ri=Ki,Ka++;break;case Zt:if("/"==To){ri=li;break}ri=St;continue;case ln:if(Jt.scheme=Io.scheme,To==mo)Jt.username=Io.username,Jt.password=Io.password,Jt.host=Io.host,Jt.port=Io.port,Jt.path=Io.path.slice(),Jt.query=Io.query;else if("/"==To||"\\"==To&&kn(Jt))ri=no;else if("?"==To)Jt.username=Io.username,Jt.password=Io.password,Jt.host=Io.host,Jt.port=Io.port,Jt.path=Io.path.slice(),Jt.query="",ri=fn;else{if("#"!=To){Jt.username=Io.username,Jt.password=Io.password,Jt.host=Io.host,Jt.port=Io.port,Jt.path=Io.path.slice(),Jt.path.pop(),ri=St;continue}Jt.username=Io.username,Jt.password=Io.password,Jt.host=Io.host,Jt.port=Io.port,Jt.path=Io.path.slice(),Jt.query=Io.query,Jt.fragment="",ri=Ko}break;case no:if(!kn(Jt)||"/"!=To&&"\\"!=To){if("/"!=To){Jt.username=Io.username,Jt.password=Io.password,Jt.host=Io.host,Jt.port=Io.port,ri=St;continue}ri=li}else ri=Ki;break;case oo:if(ri=Ki,"/"!=To||"/"!=Ei.charAt(Ka+1))continue;Ka++;break;case Ki:if("/"!=To&&"\\"!=To){ri=li;continue}break;case li:if("@"==To){ui&&(Ei="%40"+Ei),ui=!0,rs=Y(Ei);for(var gc=0;gc<rs.length;gc++){var Qo=rs[gc];if(":"!=Qo||nl){var Ba=dn(Qo,Mn);nl?Jt.password+=Ba:Jt.username+=Ba}else nl=!0}Ei=""}else if(To==mo||"/"==To||"?"==To||"#"==To||"\\"==To&&kn(Jt)){if(ui&&""==Ei)return"Invalid authority";Ka-=Y(Ei).length+1,Ei="",ri=ts}else Ei+=To;break;case ts:case Nt:if(Qn&&"file"==Jt.scheme){ri=tr;continue}if(":"!=To||ns){if(To==mo||"/"==To||"?"==To||"#"==To||"\\"==To&&kn(Jt)){if(kn(Jt)&&""==Ei)return Me;if(Qn&&""==Ei&&(xo(Jt)||null!==Jt.port))return;if(el=No(Jt,Ei))return el;if(Ei="",ri=wt,Qn)return;continue}"["==To?ns=!0:"]"==To&&(ns=!1),Ei+=To}else{if(""==Ei)return Me;if(el=No(Jt,Ei))return el;if(Ei="",ri=jt,Qn==Nt)return}break;case jt:if(!Ct.test(To)){if(To==mo||"/"==To||"?"==To||"#"==To||"\\"==To&&kn(Jt)||Qn){if(""!=Ei){var Et=parseInt(Ei,10);if(Et>65535)return Ze;Jt.port=kn(Jt)&&Et===sn[Jt.scheme]?null:Et,Ei=""}if(Qn)return;ri=wt;continue}return Ze}Ei+=To;break;case gt:if(Jt.scheme="file","/"==To||"\\"==To)ri=Fr;else{if(!Io||"file"!=Io.scheme){ri=St;continue}if(To==mo)Jt.host=Io.host,Jt.path=Io.path.slice(),Jt.query=Io.query;else if("?"==To)Jt.host=Io.host,Jt.path=Io.path.slice(),Jt.query="",ri=fn;else{if("#"!=To){Fa(Bs.slice(Ka).join(""))||(Jt.host=Io.host,Jt.path=Io.path.slice(),Qr(Jt)),ri=St;continue}Jt.host=Io.host,Jt.path=Io.path.slice(),Jt.query=Io.query,Jt.fragment="",ri=Ko}}break;case Fr:if("/"==To||"\\"==To){ri=tr;break}Io&&"file"==Io.scheme&&!Fa(Bs.slice(Ka).join(""))&&(aa(Io.path[0],!0)?Jt.path.push(Io.path[0]):Jt.host=Io.host),ri=St;continue;case tr:if(To==mo||"/"==To||"\\"==To||"?"==To||"#"==To){if(!Qn&&aa(Ei))ri=St;else if(""==Ei){if(Jt.host="",Qn)return;ri=wt}else{if(el=No(Jt,Ei))return el;if("localhost"==Jt.host&&(Jt.host=""),Qn)return;Ei="",ri=wt}continue}Ei+=To;break;case wt:if(kn(Jt)){if(ri=St,"/"!=To&&"\\"!=To)continue}else if(Qn||"?"!=To)if(Qn||"#"!=To){if(To!=mo&&(ri=St,"/"!=To))continue}else Jt.fragment="",ri=Ko;else Jt.query="",ri=fn;break;case St:if(To==mo||"/"==To||"\\"==To&&kn(Jt)||!Qn&&("?"==To||"#"==To)){if(Xe(Ei)?(Qr(Jt),"/"!=To&&!("\\"==To&&kn(Jt))&&Jt.path.push("")):ze(Ei)?"/"!=To&&!("\\"==To&&kn(Jt))&&Jt.path.push(""):("file"==Jt.scheme&&!Jt.path.length&&aa(Ei)&&(Jt.host&&(Jt.host=""),Ei=Ei.charAt(0)+":"),Jt.path.push(Ei)),Ei="","file"==Jt.scheme&&(To==mo||"?"==To||"#"==To))for(;Jt.path.length>1&&""===Jt.path[0];)Jt.path.shift();"?"==To?(Jt.query="",ri=fn):"#"==To&&(Jt.fragment="",ri=Ko)}else Ei+=dn(To,Pr);break;case vr:"?"==To?(Jt.query="",ri=fn):"#"==To?(Jt.fragment="",ri=Ko):To!=mo&&(Jt.path[0]+=dn(To,an));break;case fn:Qn||"#"!=To?To!=mo&&("'"==To&&kn(Jt)?Jt.query+="%27":Jt.query+="#"==To?"%23":dn(To,an)):(Jt.fragment="",ri=Ko);break;case Ko:To!=mo&&(Jt.fragment+=dn(To,lr))}Ka++}},Ln=function(Jn){var Ei,ui,Qn=T(this,Ln,"URL"),Io=arguments.length>1?arguments[1]:void 0,ri=String(Jn),Ka=je(Qn,{type:"URL"});if(void 0!==Io)if(Io instanceof Ln)Ei=Ue(Io);else if(ui=Ro(Ei={},String(Io)))throw TypeError(ui);if(ui=Ro(Ka,ri,null,Ei))throw TypeError(ui);var ns=Ka.searchParams=new Ce,nl=Oe(ns);nl.updateSearchParams(Ka.query),nl.updateURL=function(){Ka.query=String(ns)||null},H||(Qn.href=kr.call(Qn),Qn.origin=or.call(Qn),Qn.protocol=Tr.call(Qn),Qn.username=ht.call(Qn),Qn.password=Lt.call(Qn),Qn.host=Dr.call(Qn),Qn.hostname=hn.call(Qn),Qn.port=Un.call(Qn),Qn.pathname=Yn.call(Qn),Qn.search=dr.call(Qn),Qn.searchParams=pn.call(Qn),Qn.hash=Xt.call(Qn))},yr=Ln.prototype,kr=function(){var Jt=Ue(this),Jn=Jt.scheme,Qn=Jt.username,Io=Jt.password,ri=Jt.host,Ka=Jt.port,Ei=Jt.path,ui=Jt.query,ns=Jt.fragment,nl=Jn+":";return null!==ri?(nl+="//",xo(Jt)&&(nl+=Qn+(Io?":"+Io:"")+"@"),nl+=Wn(ri),null!==Ka&&(nl+=":"+Ka)):"file"==Jn&&(nl+="//"),nl+=Jt.cannotBeABaseURL?Ei[0]:Ei.length?"/"+Ei.join("/"):"",null!==ui&&(nl+="?"+ui),null!==ns&&(nl+="#"+ns),nl},or=function(){var Jt=Ue(this),Jn=Jt.scheme,Qn=Jt.port;if("blob"==Jn)try{return new URL(Jn.path[0]).origin}catch{return"null"}return"file"!=Jn&&kn(Jt)?Jn+"://"+Wn(Jt.host)+(null!==Qn?":"+Qn:""):"null"},Tr=function(){return Ue(this).scheme+":"},ht=function(){return Ue(this).username},Lt=function(){return Ue(this).password},Dr=function(){var Jt=Ue(this),Jn=Jt.host,Qn=Jt.port;return null===Jn?"":null===Qn?Wn(Jn):Wn(Jn)+":"+Qn},hn=function(){var Jt=Ue(this).host;return null===Jt?"":Wn(Jt)},Un=function(){var Jt=Ue(this).port;return null===Jt?"":String(Jt)},Yn=function(){var Jt=Ue(this),Jn=Jt.path;return Jt.cannotBeABaseURL?Jn[0]:Jn.length?"/"+Jn.join("/"):""},dr=function(){var Jt=Ue(this).query;return Jt?"?"+Jt:""},pn=function(){return Ue(this).searchParams},Xt=function(){var Jt=Ue(this).fragment;return Jt?"#"+Jt:""},Ft=function(Jt,Jn){return{get:Jt,set:Jn,configurable:!0,enumerable:!0}};if(H&&U(yr,{href:Ft(kr,function(Jt){var Jn=Ue(this),Qn=String(Jt),Io=Ro(Jn,Qn);if(Io)throw TypeError(Io);Oe(Jn.searchParams).updateSearchParams(Jn.query)}),origin:Ft(or),protocol:Ft(Tr,function(Jt){var Jn=Ue(this);Ro(Jn,String(Jt)+":",at)}),username:Ft(ht,function(Jt){var Jn=Ue(this),Qn=Y(String(Jt));if(!Vo(Jn)){Jn.username="";for(var Io=0;Io<Qn.length;Io++)Jn.username+=dn(Qn[Io],Mn)}}),password:Ft(Lt,function(Jt){var Jn=Ue(this),Qn=Y(String(Jt));if(!Vo(Jn)){Jn.password="";for(var Io=0;Io<Qn.length;Io++)Jn.password+=dn(Qn[Io],Mn)}}),host:Ft(Dr,function(Jt){var Jn=Ue(this);Jn.cannotBeABaseURL||Ro(Jn,String(Jt),ts)}),hostname:Ft(hn,function(Jt){var Jn=Ue(this);Jn.cannotBeABaseURL||Ro(Jn,String(Jt),Nt)}),port:Ft(Un,function(Jt){var Jn=Ue(this);Vo(Jn)||(""==(Jt=String(Jt))?Jn.port=null:Ro(Jn,Jt,jt))}),pathname:Ft(Yn,function(Jt){var Jn=Ue(this);Jn.cannotBeABaseURL||(Jn.path=[],Ro(Jn,Jt+"",wt))}),search:Ft(dr,function(Jt){var Jn=Ue(this);""==(Jt=String(Jt))?Jn.query=null:("?"==Jt.charAt(0)&&(Jt=Jt.slice(1)),Jn.query="",Ro(Jn,Jt,fn)),Oe(Jn.searchParams).updateSearchParams(Jn.query)}),searchParams:Ft(pn),hash:Ft(Xt,function(Jt){var Jn=Ue(this);""!=(Jt=String(Jt))?("#"==Jt.charAt(0)&&(Jt=Jt.slice(1)),Jn.fragment="",Ro(Jn,Jt,Ko)):Jn.fragment=null})}),R(yr,"toJSON",function(){return kr.call(this)},{enumerable:!0}),R(yr,"toString",function(){return kr.call(this)},{enumerable:!0}),ge){var Zn=ge.createObjectURL,Do=ge.revokeObjectURL;Zn&&R(Ln,"createObjectURL",function(Jn){return Zn.apply(ge,arguments)}),Do&&R(Ln,"revokeObjectURL",function(Jn){return Do.apply(ge,arguments)})}pe(Ln,"URL"),z({global:!0,forced:!G,sham:!H},{URL:Ln})}},re={};function O(m){if(re[m])return re[m].exports;var X=re[m]={exports:{}};return ue[m](X,X.exports,O),X.exports}O.d=function(m,X){for(var x in X)O.o(X,x)&&!O.o(m,x)&&Object.defineProperty(m,x,{enumerable:!0,get:X[x]})},O.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),O.o=function(m,X){return Object.prototype.hasOwnProperty.call(m,X)},O.r=function(m){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var S={};return function(){"use strict";function Wn(yr,kr){var or;if(typeof Symbol>"u"||null==yr[Symbol.iterator]){if(Array.isArray(yr)||(or=function an(yr,kr){if(yr){if("string"==typeof yr)return lr(yr,kr);var or=Object.prototype.toString.call(yr).slice(8,-1);if("Object"===or&&yr.constructor&&(or=yr.constructor.name),"Map"===or||"Set"===or)return Array.from(yr);if("Arguments"===or||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or))return lr(yr,kr)}}(yr))||kr&&yr&&"number"==typeof yr.length){or&&(yr=or);var Tr=0,ht=function(){};return{s:ht,n:function(){return Tr>=yr.length?{done:!0}:{done:!1,value:yr[Tr++]}},e:function(Yn){throw Yn},f:ht}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var hn,Lt=!0,Dr=!1;return{s:function(){or=yr[Symbol.iterator]()},n:function(){var Yn=or.next();return Lt=Yn.done,Yn},e:function(Yn){Dr=!0,hn=Yn},f:function(){try{!Lt&&null!=or.return&&or.return()}finally{if(Dr)throw hn}}}}function lr(yr,kr){(null==kr||kr>yr.length)&&(kr=yr.length);for(var or=0,Tr=new Array(kr);or<kr;or++)Tr[or]=yr[or];return Tr}function Mn(yr,kr){for(var or=0;or<kr.length;or++){var Tr=kr[or];Tr.enumerable=Tr.enumerable||!1,Tr.configurable=!0,"value"in Tr&&(Tr.writable=!0),Object.defineProperty(yr,Tr.key,Tr)}}O.r(S),O.d(S,{Dropzone:function(){return gt},default:function(){return Ln}}),O(2222),O(7327),O(2772),O(6992),O(1249),O(7042),O(561),O(8264),O(8309),O(489),O(1539),O(4916),O(9714),O(8783),O(4723),O(5306),O(3123),O(3210),O(2472),O(2990),O(8927),O(3105),O(5035),O(4345),O(7174),O(2846),O(4731),O(7209),O(6319),O(8867),O(7789),O(3739),O(9368),O(4483),O(2056),O(3462),O(678),O(7462),O(3824),O(5021),O(2974),O(5016),O(4747),O(3948),O(285);var sn=function(){function yr(){!function Pr(yr,kr){if(!(yr instanceof kr))throw new TypeError("Cannot call a class as a function")}(this,yr)}return function dn(yr,kr,or){return kr&&Mn(yr.prototype,kr),or&&Mn(yr,or),yr}(yr,[{key:"on",value:function(or,Tr){return this._callbacks=this._callbacks||{},this._callbacks[or]||(this._callbacks[or]=[]),this._callbacks[or].push(Tr),this}},{key:"emit",value:function(or){this._callbacks=this._callbacks||{};for(var Tr=this._callbacks[or],ht=arguments.length,Lt=new Array(ht>1?ht-1:0),Dr=1;Dr<ht;Dr++)Lt[Dr-1]=arguments[Dr];if(Tr){var Un,hn=Wn(Tr,!0);try{for(hn.s();!(Un=hn.n()).done;)Un.value.apply(this,Lt)}catch(dr){hn.e(dr)}finally{hn.f()}}return this.element&&this.element.dispatchEvent(this.makeEvent("dropzone:"+or,{args:Lt})),this}},{key:"makeEvent",value:function(or,Tr){var ht={bubbles:!0,cancelable:!0,detail:Tr};if("function"==typeof window.CustomEvent)return new CustomEvent(or,ht);var Lt=document.createEvent("CustomEvent");return Lt.initCustomEvent(or,ht.bubbles,ht.cancelable,ht.detail),Lt}},{key:"off",value:function(or,Tr){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var ht=this._callbacks[or];if(!ht)return this;if(1===arguments.length)return delete this._callbacks[or],this;for(var Lt=0;Lt<ht.length;Lt++)if(ht[Lt]===Tr){ht.splice(Lt,1);break}return this}}]),yr}();function Vo(yr,kr){var or;if(typeof Symbol>"u"||null==yr[Symbol.iterator]){if(Array.isArray(yr)||(or=function aa(yr,kr){if(yr){if("string"==typeof yr)return Fa(yr,kr);var or=Object.prototype.toString.call(yr).slice(8,-1);if("Object"===or&&yr.constructor&&(or=yr.constructor.name),"Map"===or||"Set"===or)return Array.from(yr);if("Arguments"===or||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or))return Fa(yr,kr)}}(yr))||kr&&yr&&"number"==typeof yr.length){or&&(yr=or);var Tr=0,ht=function(){};return{s:ht,n:function(){return Tr>=yr.length?{done:!0}:{done:!1,value:yr[Tr++]}},e:function(Yn){throw Yn},f:ht}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var hn,Lt=!0,Dr=!1;return{s:function(){or=yr[Symbol.iterator]()},n:function(){var Yn=or.next();return Lt=Yn.done,Yn},e:function(Yn){Dr=!0,hn=Yn},f:function(){try{!Lt&&null!=or.return&&or.return()}finally{if(Dr)throw hn}}}}function Fa(yr,kr){(null==kr||kr>yr.length)&&(kr=yr.length);for(var or=0,Tr=new Array(kr);or<kr;or++)Tr[or]=yr[or];return Tr}var ze={url:null,method:"post",withCredentials:!1,timeout:null,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,disablePreviews:!1,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(kr,or,Tr){if(Tr)return{dzuuid:Tr.file.upload.uuid,dzchunkindex:Tr.index,dztotalfilesize:Tr.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:Tr.file.upload.totalChunkCount,dzchunkbyteoffset:Tr.index*this.options.chunkSize}},accept:function(kr,or){return or()},chunksUploaded:function(kr,or){or()},fallback:function(){var kr;this.element.className="".concat(this.element.className," dz-browser-not-supported");var Tr,or=Vo(this.element.getElementsByTagName("div"),!0);try{for(or.s();!(Tr=or.n()).done;){var ht=Tr.value;if(/(^| )dz-message($| )/.test(ht.className)){kr=ht,ht.className="dz-message";break}}}catch(Dr){or.e(Dr)}finally{or.f()}kr||(kr=gt.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(kr));var Lt=kr.getElementsByTagName("span")[0];return Lt&&(null!=Lt.textContent?Lt.textContent=this.options.dictFallbackMessage:null!=Lt.innerText&&(Lt.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(kr,or,Tr,ht){var Lt={srcX:0,srcY:0,srcWidth:kr.width,srcHeight:kr.height},Dr=kr.width/kr.height;null==or&&null==Tr?(or=Lt.srcWidth,Tr=Lt.srcHeight):null==or?or=Tr*Dr:null==Tr&&(Tr=or/Dr);var hn=(or=Math.min(or,Lt.srcWidth))/(Tr=Math.min(Tr,Lt.srcHeight));if(Lt.srcWidth>or||Lt.srcHeight>Tr)if("crop"===ht)Dr>hn?(Lt.srcHeight=kr.height,Lt.srcWidth=Lt.srcHeight*hn):(Lt.srcWidth=kr.width,Lt.srcHeight=Lt.srcWidth/hn);else{if("contain"!==ht)throw new Error("Unknown resizeMethod '".concat(ht,"'"));Dr>hn?Tr=or/Dr:or=Tr*Dr}return Lt.srcX=(kr.width-Lt.srcWidth)/2,Lt.srcY=(kr.height-Lt.srcHeight)/2,Lt.trgWidth=or,Lt.trgHeight=Tr,Lt},transformFile:function(kr,or){return(this.options.resizeWidth||this.options.resizeHeight)&&kr.type.match(/image.*/)?this.resizeImage(kr,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,or):or(kr)},previewTemplate:'<div class="dz-preview dz-file-preview"> <div class="dz-image"><img data-dz-thumbnail/></div> <div class="dz-details"> <div class="dz-size"><span data-dz-size></span></div> <div class="dz-filename"><span data-dz-name></span></div> </div> <div class="dz-progress"> <span class="dz-upload" data-dz-uploadprogress></span> </div> <div class="dz-error-message"><span data-dz-errormessage></span></div> <div class="dz-success-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Check</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF"></path> </g> </svg> </div> <div class="dz-error-mark"> <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>Error</title> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475"> <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z"></path> </g> </g> </svg> </div> </div> ',drop:function(kr){return this.element.classList.remove("dz-drag-hover")},dragstart:function(kr){},dragend:function(kr){return this.element.classList.remove("dz-drag-hover")},dragenter:function(kr){return this.element.classList.add("dz-drag-hover")},dragover:function(kr){return this.element.classList.add("dz-drag-hover")},dragleave:function(kr){return this.element.classList.remove("dz-drag-hover")},paste:function(kr){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(kr){var or=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer&&!this.options.disablePreviews){kr.previewElement=gt.createElement(this.options.previewTemplate.trim()),kr.previewTemplate=kr.previewElement,this.previewsContainer.appendChild(kr.previewElement);var ht,Tr=Vo(kr.previewElement.querySelectorAll("[data-dz-name]"),!0);try{for(Tr.s();!(ht=Tr.n()).done;){var Lt=ht.value;Lt.textContent=kr.name}}catch(Xt){Tr.e(Xt)}finally{Tr.f()}var hn,Dr=Vo(kr.previewElement.querySelectorAll("[data-dz-size]"),!0);try{for(Dr.s();!(hn=Dr.n()).done;)(Lt=hn.value).innerHTML=this.filesize(kr.size)}catch(Xt){Dr.e(Xt)}finally{Dr.f()}this.options.addRemoveLinks&&(kr._removeLink=gt.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'.concat(this.options.dictRemoveFile,"</a>")),kr.previewElement.appendChild(kr._removeLink));var dr,Un=function(Ft){return Ft.preventDefault(),Ft.stopPropagation(),kr.status===gt.UPLOADING?gt.confirm(or.options.dictCancelUploadConfirmation,function(){return or.removeFile(kr)}):or.options.dictRemoveFileConfirmation?gt.confirm(or.options.dictRemoveFileConfirmation,function(){return or.removeFile(kr)}):or.removeFile(kr)},Yn=Vo(kr.previewElement.querySelectorAll("[data-dz-remove]"),!0);try{for(Yn.s();!(dr=Yn.n()).done;)dr.value.addEventListener("click",Un)}catch(Xt){Yn.e(Xt)}finally{Yn.f()}}},removedfile:function(kr){return null!=kr.previewElement&&null!=kr.previewElement.parentNode&&kr.previewElement.parentNode.removeChild(kr.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(kr,or){if(kr.previewElement){kr.previewElement.classList.remove("dz-file-preview");var ht,Tr=Vo(kr.previewElement.querySelectorAll("[data-dz-thumbnail]"),!0);try{for(Tr.s();!(ht=Tr.n()).done;){var Lt=ht.value;Lt.alt=kr.name,Lt.src=or}}catch(Dr){Tr.e(Dr)}finally{Tr.f()}return setTimeout(function(){return kr.previewElement.classList.add("dz-image-preview")},1)}},error:function(kr,or){if(kr.previewElement){kr.previewElement.classList.add("dz-error"),"string"!=typeof or&&or.error&&(or=or.error);var ht,Tr=Vo(kr.previewElement.querySelectorAll("[data-dz-errormessage]"),!0);try{for(Tr.s();!(ht=Tr.n()).done;)ht.value.textContent=or}catch(Dr){Tr.e(Dr)}finally{Tr.f()}}},errormultiple:function(){},processing:function(kr){if(kr.previewElement&&(kr.previewElement.classList.add("dz-processing"),kr._removeLink))return kr._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(kr,or,Tr){if(kr.previewElement){var Lt,ht=Vo(kr.previewElement.querySelectorAll("[data-dz-uploadprogress]"),!0);try{for(ht.s();!(Lt=ht.n()).done;){var Dr=Lt.value;"PROGRESS"===Dr.nodeName?Dr.value=or:Dr.style.width="".concat(or,"%")}}catch(hn){ht.e(hn)}finally{ht.f()}}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(kr){if(kr.previewElement)return kr.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(kr){return this.emit("error",kr,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(kr){if(kr._removeLink&&(kr._removeLink.innerHTML=this.options.dictRemoveFile),kr.previewElement)return kr.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}};function Xe(yr){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(or){return typeof or}:function(or){return or&&"function"==typeof Symbol&&or.constructor===Symbol&&or!==Symbol.prototype?"symbol":typeof or})(yr)}function at(yr,kr){var or;if(typeof Symbol>"u"||null==yr[Symbol.iterator]){if(Array.isArray(yr)||(or=function gr(yr,kr){if(yr){if("string"==typeof yr)return Pt(yr,kr);var or=Object.prototype.toString.call(yr).slice(8,-1);if("Object"===or&&yr.constructor&&(or=yr.constructor.name),"Map"===or||"Set"===or)return Array.from(yr);if("Arguments"===or||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(or))return Pt(yr,kr)}}(yr))||kr&&yr&&"number"==typeof yr.length){or&&(yr=or);var Tr=0,ht=function(){};return{s:ht,n:function(){return Tr>=yr.length?{done:!0}:{done:!1,value:yr[Tr++]}},e:function(Yn){throw Yn},f:ht}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var hn,Lt=!0,Dr=!1;return{s:function(){or=yr[Symbol.iterator]()},n:function(){var Yn=or.next();return Lt=Yn.done,Yn},e:function(Yn){Dr=!0,hn=Yn},f:function(){try{!Lt&&null!=or.return&&or.return()}finally{if(Dr)throw hn}}}}function Pt(yr,kr){(null==kr||kr>yr.length)&&(kr=yr.length);for(var or=0,Tr=new Array(kr);or<kr;or++)Tr[or]=yr[or];return Tr}function mt(yr,kr){if(!(yr instanceof kr))throw new TypeError("Cannot call a class as a function")}function Zt(yr,kr){for(var or=0;or<kr.length;or++){var Tr=kr[or];Tr.enumerable=Tr.enumerable||!1,Tr.configurable=!0,"value"in Tr&&(Tr.writable=!0),Object.defineProperty(yr,Tr.key,Tr)}}function ln(yr,kr,or){return kr&&Zt(yr.prototype,kr),or&&Zt(yr,or),yr}function no(yr,kr){if("function"!=typeof kr&&null!==kr)throw new TypeError("Super expression must either be null or a function");yr.prototype=Object.create(kr&&kr.prototype,{constructor:{value:yr,writable:!0,configurable:!0}}),kr&&oo(yr,kr)}function oo(yr,kr){return(oo=Object.setPrototypeOf||function(Tr,ht){return Tr.__proto__=ht,Tr})(yr,kr)}function Ki(yr){var kr=function Nt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}();return function(){var ht,Tr=jt(yr);if(kr){var Lt=jt(this).constructor;ht=Reflect.construct(Tr,arguments,Lt)}else ht=Tr.apply(this,arguments);return li(this,ht)}}function li(yr,kr){return!kr||"object"!==Xe(kr)&&"function"!=typeof kr?ts(yr):kr}function ts(yr){if(void 0===yr)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return yr}function jt(yr){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(or){return or.__proto__||Object.getPrototypeOf(or)})(yr)}var gt=function(yr){no(or,yr);var kr=Ki(or);function or(Tr,ht){var Lt,Dr,hn;if(mt(this,or),(Lt=kr.call(this)).element=Tr,Lt.version=or.version,Lt.clickableElements=[],Lt.listeners=[],Lt.files=[],"string"==typeof Lt.element&&(Lt.element=document.querySelector(Lt.element)),!Lt.element||null==Lt.element.nodeType)throw new Error("Invalid dropzone element.");if(Lt.element.dropzone)throw new Error("Dropzone already attached.");or.instances.push(ts(Lt)),Lt.element.dropzone=ts(Lt);var Un=null!=(hn=or.optionsForElement(Lt.element))?hn:{};if(Lt.options=or.extend({},ze,Un,ht??{}),Lt.options.previewTemplate=Lt.options.previewTemplate.replace(/\n*/g,""),Lt.options.forceFallback||!or.isBrowserSupported())return li(Lt,Lt.options.fallback.call(ts(Lt)));if(null==Lt.options.url&&(Lt.options.url=Lt.element.getAttribute("action")),!Lt.options.url)throw new Error("No URL provided.");if(Lt.options.acceptedFiles&&Lt.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(Lt.options.uploadMultiple&&Lt.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return Lt.options.acceptedMimeTypes&&(Lt.options.acceptedFiles=Lt.options.acceptedMimeTypes,delete Lt.options.acceptedMimeTypes),null!=Lt.options.renameFilename&&(Lt.options.renameFile=function(Yn){return Lt.options.renameFilename.call(ts(Lt),Yn.name,Yn)}),"string"==typeof Lt.options.method&&(Lt.options.method=Lt.options.method.toUpperCase()),(Dr=Lt.getExistingFallback())&&Dr.parentNode&&Dr.parentNode.removeChild(Dr),!1!==Lt.options.previewsContainer&&(Lt.previewsContainer=Lt.options.previewsContainer?or.getElement(Lt.options.previewsContainer,"previewsContainer"):Lt.element),Lt.options.clickable&&(Lt.clickableElements=!0===Lt.options.clickable?[Lt.element]:or.getElements(Lt.options.clickable,"clickable")),Lt.init(),Lt}return ln(or,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(ht){return ht.accepted}).map(function(ht){return ht})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(ht){return!ht.accepted}).map(function(ht){return ht})}},{key:"getFilesWithStatus",value:function(ht){return this.files.filter(function(Lt){return Lt.status===ht}).map(function(Lt){return Lt})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(or.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(or.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(or.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(ht){return ht.status===or.UPLOADING||ht.status===or.QUEUED}).map(function(ht){return ht})}},{key:"init",value:function(){var ht=this;"form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(or.createElement('<div class="dz-default dz-message"><button class="dz-button" type="button">'.concat(this.options.dictDefaultMessage,"</button></div>"))),this.clickableElements.length&&function pn(){ht.hiddenFileInput&&ht.hiddenFileInput.parentNode.removeChild(ht.hiddenFileInput),ht.hiddenFileInput=document.createElement("input"),ht.hiddenFileInput.setAttribute("type","file"),(null===ht.options.maxFiles||ht.options.maxFiles>1)&&ht.hiddenFileInput.setAttribute("multiple","multiple"),ht.hiddenFileInput.className="dz-hidden-input",null!==ht.options.acceptedFiles&&ht.hiddenFileInput.setAttribute("accept",ht.options.acceptedFiles),null!==ht.options.capture&&ht.hiddenFileInput.setAttribute("capture",ht.options.capture),ht.hiddenFileInput.setAttribute("tabindex","-1"),ht.hiddenFileInput.style.visibility="hidden",ht.hiddenFileInput.style.position="absolute",ht.hiddenFileInput.style.top="0",ht.hiddenFileInput.style.left="0",ht.hiddenFileInput.style.height="0",ht.hiddenFileInput.style.width="0",or.getElement(ht.options.hiddenInputContainer,"hiddenInputContainer").appendChild(ht.hiddenFileInput),ht.hiddenFileInput.addEventListener("change",function(){var Xt=ht.hiddenFileInput.files;if(Xt.length){var Zn,Ft=at(Xt,!0);try{for(Ft.s();!(Zn=Ft.n()).done;)ht.addFile(Zn.value)}catch(Jt){Ft.e(Jt)}finally{Ft.f()}}ht.emit("addedfiles",Xt),pn()})}(),this.URL=null!==window.URL?window.URL:window.webkitURL;var hn,Dr=at(this.events,!0);try{for(Dr.s();!(hn=Dr.n()).done;){var Un=hn.value;this.on(Un,this.options[Un])}}catch(pn){Dr.e(pn)}finally{Dr.f()}this.on("uploadprogress",function(){return ht.updateTotalUploadProgress()}),this.on("removedfile",function(){return ht.updateTotalUploadProgress()}),this.on("canceled",function(pn){return ht.emit("complete",pn)}),this.on("complete",function(pn){if(0===ht.getAddedFiles().length&&0===ht.getUploadingFiles().length&&0===ht.getQueuedFiles().length)return setTimeout(function(){return ht.emit("queuecomplete")},0)});var dr=function(Xt){if(function(Xt){if(Xt.dataTransfer.types)for(var Ft=0;Ft<Xt.dataTransfer.types.length;Ft++)if("Files"===Xt.dataTransfer.types[Ft])return!0;return!1}(Xt))return Xt.stopPropagation(),Xt.preventDefault?Xt.preventDefault():Xt.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(Xt){return ht.emit("dragstart",Xt)},dragenter:function(Xt){return dr(Xt),ht.emit("dragenter",Xt)},dragover:function(Xt){var Ft;try{Ft=Xt.dataTransfer.effectAllowed}catch{}return Xt.dataTransfer.dropEffect="move"===Ft||"linkMove"===Ft?"move":"copy",dr(Xt),ht.emit("dragover",Xt)},dragleave:function(Xt){return ht.emit("dragleave",Xt)},drop:function(Xt){return dr(Xt),ht.drop(Xt)},dragend:function(Xt){return ht.emit("dragend",Xt)}}}],this.clickableElements.forEach(function(pn){return ht.listeners.push({element:pn,events:{click:function(Ft){return(pn!==ht.element||Ft.target===ht.element||or.elementInside(Ft.target,ht.element.querySelector(".dz-message")))&&ht.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),null!=this.hiddenFileInput&&this.hiddenFileInput.parentNode&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,or.instances.splice(or.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var ht,Lt=0,Dr=0;if(this.getActiveFiles().length){var Yn,Un=at(this.getActiveFiles(),!0);try{for(Un.s();!(Yn=Un.n()).done;){var dr=Yn.value;Lt+=dr.upload.bytesSent,Dr+=dr.upload.total}}catch(pn){Un.e(pn)}finally{Un.f()}ht=100*Lt/Dr}else ht=100;return this.emit("totaluploadprogress",ht,Dr,Lt)}},{key:"_getParamName",value:function(ht){return"function"==typeof this.options.paramName?this.options.paramName(ht):"".concat(this.options.paramName).concat(this.options.uploadMultiple?"[".concat(ht,"]"):"")}},{key:"_renameFile",value:function(ht){return"function"!=typeof this.options.renameFile?ht.name:this.options.renameFile(ht)}},{key:"getFallbackForm",value:function(){var ht,Lt;if(ht=this.getExistingFallback())return ht;var Dr='<div class="dz-fallback">';this.options.dictFallbackText&&(Dr+="<p>".concat(this.options.dictFallbackText,"</p>")),Dr+='<input type="file" name="'.concat(this._getParamName(0),'" ').concat(this.options.uploadMultiple?'multiple="multiple"':void 0,' /><input type="submit" value="Upload!"></div>');var hn=or.createElement(Dr);return"FORM"!==this.element.tagName?(Lt=or.createElement('<form action="'.concat(this.options.url,'" enctype="multipart/form-data" method="').concat(this.options.method,'"></form>'))).appendChild(hn):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),Lt??hn}},{key:"getExistingFallback",value:function(){for(var ht=function(dr){var Xt,pn=at(dr,!0);try{for(pn.s();!(Xt=pn.n()).done;){var Ft=Xt.value;if(/(^| )fallback($| )/.test(Ft.className))return Ft}}catch(Zn){pn.e(Zn)}finally{pn.f()}},Lt=0,Dr=["div","form"];Lt<Dr.length;Lt++){var Un;if(Un=ht(this.element.getElementsByTagName(Dr[Lt])))return Un}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(ht){return function(){var Lt=[];for(var Dr in ht.events)Lt.push(ht.element.addEventListener(Dr,ht.events[Dr],!1));return Lt}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(ht){return function(){var Lt=[];for(var Dr in ht.events)Lt.push(ht.element.removeEventListener(Dr,ht.events[Dr],!1));return Lt}()})}},{key:"disable",value:function(){var ht=this;return this.clickableElements.forEach(function(Lt){return Lt.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(Lt){return ht.cancelUpload(Lt)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(ht){return ht.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(ht){var Lt=0,Dr="b";if(ht>0){for(var hn=["tb","gb","mb","kb","b"],Un=0;Un<hn.length;Un++){var Yn=hn[Un];if(ht>=Math.pow(this.options.filesizeBase,4-Un)/10){Lt=ht/Math.pow(this.options.filesizeBase,4-Un),Dr=Yn;break}}Lt=Math.round(10*Lt)/10}return"<strong>".concat(Lt,"</strong> ").concat(this.options.dictFileSizeUnits[Dr])}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(ht){if(ht.dataTransfer){this.emit("drop",ht);for(var Lt=[],Dr=0;Dr<ht.dataTransfer.files.length;Dr++)Lt[Dr]=ht.dataTransfer.files[Dr];if(Lt.length){var hn=ht.dataTransfer.items;hn&&hn.length&&null!=hn[0].webkitGetAsEntry?this._addFilesFromItems(hn):this.handleFiles(Lt)}this.emit("addedfiles",Lt)}}},{key:"paste",value:function(ht){if(null!=function Ko(yr,kr){return typeof yr<"u"&&null!==yr?kr(yr):void 0}(ht?.clipboardData,function(Dr){return Dr.items})){this.emit("paste",ht);var Lt=ht.clipboardData.items;if(Lt.length)return this._addFilesFromItems(Lt)}}},{key:"handleFiles",value:function(ht){var Dr,Lt=at(ht,!0);try{for(Lt.s();!(Dr=Lt.n()).done;)this.addFile(Dr.value)}catch(Un){Lt.e(Un)}finally{Lt.f()}}},{key:"_addFilesFromItems",value:function(ht){var Lt=this;return function(){var Un,Dr=[],hn=at(ht,!0);try{for(hn.s();!(Un=hn.n()).done;){var dr,Yn=Un.value;null!=Yn.webkitGetAsEntry&&(dr=Yn.webkitGetAsEntry())?Dr.push(dr.isFile?Lt.addFile(Yn.getAsFile()):dr.isDirectory?Lt._addFilesFromDirectory(dr,dr.name):void 0):Dr.push(null==Yn.getAsFile||null!=Yn.kind&&"file"!==Yn.kind?void 0:Lt.addFile(Yn.getAsFile()))}}catch(pn){hn.e(pn)}finally{hn.f()}return Dr}()}},{key:"_addFilesFromDirectory",value:function(ht,Lt){var Dr=this,hn=ht.createReader(),Un=function(pn){return function Ro(yr,kr,or){if(typeof yr<"u"&&null!==yr&&"function"==typeof yr[kr])return or(yr,kr)}(console,"log",function(Xt){return Xt.log(pn)})};return function dr(){return hn.readEntries(function(pn){if(pn.length>0){var Ft,Xt=at(pn,!0);try{for(Xt.s();!(Ft=Xt.n()).done;){var Zn=Ft.value;Zn.isFile?Zn.file(function(Do){if(!Dr.options.ignoreHiddenFiles||"."!==Do.name.substring(0,1))return Do.fullPath="".concat(Lt,"/").concat(Do.name),Dr.addFile(Do)}):Zn.isDirectory&&Dr._addFilesFromDirectory(Zn,"".concat(Lt,"/").concat(Zn.name))}}catch(Do){Xt.e(Do)}finally{Xt.f()}dr()}return null},Un)}()}},{key:"accept",value:function(ht,Lt){this.options.maxFilesize&&ht.size>1024*this.options.maxFilesize*1024?Lt(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(ht.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):or.isValidFile(ht,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(Lt(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",ht)):this.options.accept.call(this,ht,Lt):Lt(this.options.dictInvalidFileType)}},{key:"addFile",value:function(ht){var Lt=this;ht.upload={uuid:or.uuidv4(),progress:0,total:ht.size,bytesSent:0,filename:this._renameFile(ht)},this.files.push(ht),ht.status=or.ADDED,this.emit("addedfile",ht),this._enqueueThumbnail(ht),this.accept(ht,function(Dr){Dr?(ht.accepted=!1,Lt._errorProcessing([ht],Dr)):(ht.accepted=!0,Lt.options.autoQueue&&Lt.enqueueFile(ht)),Lt._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(ht){var Dr,Lt=at(ht,!0);try{for(Lt.s();!(Dr=Lt.n()).done;)this.enqueueFile(Dr.value)}catch(Un){Lt.e(Un)}finally{Lt.f()}return null}},{key:"enqueueFile",value:function(ht){var Lt=this;if(ht.status!==or.ADDED||!0!==ht.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(ht.status=or.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return Lt.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(ht){var Lt=this;if(this.options.createImageThumbnails&&ht.type.match(/image.*/)&&ht.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(ht),setTimeout(function(){return Lt._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var ht=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var Lt=this._thumbnailQueue.shift();return this.createThumbnail(Lt,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(Dr){return ht.emit("thumbnail",Lt,Dr),ht._processingThumbnail=!1,ht._processThumbnailQueue()})}}},{key:"removeFile",value:function(ht){if(ht.status===or.UPLOADING&&this.cancelUpload(ht),this.files=Fr(this.files,ht),this.emit("removedfile",ht),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(ht){null==ht&&(ht=!1);var Dr,Lt=at(this.files.slice(),!0);try{for(Lt.s();!(Dr=Lt.n()).done;){var hn=Dr.value;(hn.status!==or.UPLOADING||ht)&&this.removeFile(hn)}}catch(Un){Lt.e(Un)}finally{Lt.f()}return null}},{key:"resizeImage",value:function(ht,Lt,Dr,hn,Un){var Yn=this;return this.createThumbnail(ht,Lt,Dr,hn,!0,function(dr,pn){if(null==pn)return Un(ht);var Xt=Yn.options.resizeMimeType;null==Xt&&(Xt=ht.type);var Ft=pn.toDataURL(Xt,Yn.options.resizeQuality);return("image/jpeg"===Xt||"image/jpg"===Xt)&&(Ft=vr.restore(ht.dataURL,Ft)),Un(or.dataURItoBlob(Ft))})}},{key:"createThumbnail",value:function(ht,Lt,Dr,hn,Un,Yn){var dr=this,pn=new FileReader;pn.onload=function(){ht.dataURL=pn.result,"image/svg+xml"!==ht.type?dr.createThumbnailFromUrl(ht,Lt,Dr,hn,Un,Yn):Yn?.(pn.result)},pn.readAsDataURL(ht)}},{key:"displayExistingFile",value:function(ht,Lt,Dr,hn){var Un=this,Yn=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this.emit("addedfile",ht),this.emit("complete",ht),Yn){ht.dataURL=Lt,this.createThumbnailFromUrl(ht,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,this.options.fixOrientation,function(Xt){Un.emit("thumbnail",ht,Xt),Dr&&Dr()},hn)}else this.emit("thumbnail",ht,Lt),Dr&&Dr()}},{key:"createThumbnailFromUrl",value:function(ht,Lt,Dr,hn,Un,Yn,dr){var pn=this,Xt=document.createElement("img");return dr&&(Xt.crossOrigin=dr),Un="from-image"!=getComputedStyle(document.body).imageOrientation&&Un,Xt.onload=function(){var Ft=function(Do){return Do(1)};return typeof EXIF<"u"&&null!==EXIF&&Un&&(Ft=function(Do){return EXIF.getData(Xt,function(){return Do(EXIF.getTag(this,"Orientation"))})}),Ft(function(Zn){ht.width=Xt.width,ht.height=Xt.height;var Do=pn.options.resize.call(pn,ht,Lt,Dr,hn),Jt=document.createElement("canvas"),Jn=Jt.getContext("2d");switch(Jt.width=Do.trgWidth,Jt.height=Do.trgHeight,Zn>4&&(Jt.width=Do.trgHeight,Jt.height=Do.trgWidth),Zn){case 2:Jn.translate(Jt.width,0),Jn.scale(-1,1);break;case 3:Jn.translate(Jt.width,Jt.height),Jn.rotate(Math.PI);break;case 4:Jn.translate(0,Jt.height),Jn.scale(1,-1);break;case 5:Jn.rotate(.5*Math.PI),Jn.scale(1,-1);break;case 6:Jn.rotate(.5*Math.PI),Jn.translate(0,-Jt.width);break;case 7:Jn.rotate(.5*Math.PI),Jn.translate(Jt.height,-Jt.width),Jn.scale(-1,1);break;case 8:Jn.rotate(-.5*Math.PI),Jn.translate(-Jt.height,0)}St(Jn,Xt,null!=Do.srcX?Do.srcX:0,null!=Do.srcY?Do.srcY:0,Do.srcWidth,Do.srcHeight,null!=Do.trgX?Do.trgX:0,null!=Do.trgY?Do.trgY:0,Do.trgWidth,Do.trgHeight);var Qn=Jt.toDataURL("image/png");if(null!=Yn)return Yn(Qn,Jt)})},null!=Yn&&(Xt.onerror=Yn),Xt.src=ht.dataURL}},{key:"processQueue",value:function(){var ht=this.options.parallelUploads,Lt=this.getUploadingFiles().length,Dr=Lt;if(!(Lt>=ht)){var hn=this.getQueuedFiles();if(hn.length>0){if(this.options.uploadMultiple)return this.processFiles(hn.slice(0,ht-Lt));for(;Dr<ht;){if(!hn.length)return;this.processFile(hn.shift()),Dr++}}}}},{key:"processFile",value:function(ht){return this.processFiles([ht])}},{key:"processFiles",value:function(ht){var Dr,Lt=at(ht,!0);try{for(Lt.s();!(Dr=Lt.n()).done;){var hn=Dr.value;hn.processing=!0,hn.status=or.UPLOADING,this.emit("processing",hn)}}catch(Un){Lt.e(Un)}finally{Lt.f()}return this.options.uploadMultiple&&this.emit("processingmultiple",ht),this.uploadFiles(ht)}},{key:"_getFilesWithXhr",value:function(ht){return this.files.filter(function(Dr){return Dr.xhr===ht}).map(function(Dr){return Dr})}},{key:"cancelUpload",value:function(ht){if(ht.status===or.UPLOADING){var hn,Lt=this._getFilesWithXhr(ht.xhr),Dr=at(Lt,!0);try{for(Dr.s();!(hn=Dr.n()).done;)hn.value.status=or.CANCELED}catch(Xt){Dr.e(Xt)}finally{Dr.f()}typeof ht.xhr<"u"&&ht.xhr.abort();var dr,Yn=at(Lt,!0);try{for(Yn.s();!(dr=Yn.n()).done;)this.emit("canceled",dr.value)}catch(Xt){Yn.e(Xt)}finally{Yn.f()}this.options.uploadMultiple&&this.emit("canceledmultiple",Lt)}else(ht.status===or.ADDED||ht.status===or.QUEUED)&&(ht.status=or.CANCELED,this.emit("canceled",ht),this.options.uploadMultiple&&this.emit("canceledmultiple",[ht]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(ht){if("function"==typeof ht){for(var Lt=arguments.length,Dr=new Array(Lt>1?Lt-1:0),hn=1;hn<Lt;hn++)Dr[hn-1]=arguments[hn];return ht.apply(this,Dr)}return ht}},{key:"uploadFile",value:function(ht){return this.uploadFiles([ht])}},{key:"uploadFiles",value:function(ht){var Lt=this;this._transformFiles(ht,function(Dr){if(Lt.options.chunking){var hn=Dr[0];ht[0].upload.chunked=Lt.options.chunking&&(Lt.options.forceChunking||hn.size>Lt.options.chunkSize),ht[0].upload.totalChunkCount=Math.ceil(hn.size/Lt.options.chunkSize)}if(ht[0].upload.chunked){var Un=ht[0],Yn=Dr[0];Un.upload.chunks=[];var pn=function(){for(var Jt=0;void 0!==Un.upload.chunks[Jt];)Jt++;if(!(Jt>=Un.upload.totalChunkCount)){var Jn=Jt*Lt.options.chunkSize,Qn=Math.min(Jn+Lt.options.chunkSize,Yn.size),Io={name:Lt._getParamName(0),data:Yn.webkitSlice?Yn.webkitSlice(Jn,Qn):Yn.slice(Jn,Qn),filename:Un.upload.filename,chunkIndex:Jt};Un.upload.chunks[Jt]={file:Un,index:Jt,dataBlock:Io,status:or.UPLOADING,progress:0,retries:0},Lt._uploadData(ht,[Io])}};if(Un.upload.finishedChunkUpload=function(Do,Jt){var Jn=!0;Do.status=or.SUCCESS,Do.dataBlock=null,Do.xhr=null;for(var Qn=0;Qn<Un.upload.totalChunkCount;Qn++){if(void 0===Un.upload.chunks[Qn])return pn();Un.upload.chunks[Qn].status!==or.SUCCESS&&(Jn=!1)}Jn&&Lt.options.chunksUploaded(Un,function(){Lt._finished(ht,Jt,null)})},Lt.options.parallelChunkUploads)for(var Xt=0;Xt<Un.upload.totalChunkCount;Xt++)pn();else pn()}else{for(var Ft=[],Zn=0;Zn<ht.length;Zn++)Ft[Zn]={name:Lt._getParamName(Zn),data:Dr[Zn],filename:ht[Zn].upload.filename};Lt._uploadData(ht,Ft)}})}},{key:"_getChunk",value:function(ht,Lt){for(var Dr=0;Dr<ht.upload.totalChunkCount;Dr++)if(void 0!==ht.upload.chunks[Dr]&&ht.upload.chunks[Dr].xhr===Lt)return ht.upload.chunks[Dr]}},{key:"_uploadData",value:function(ht,Lt){var Yn,Dr=this,hn=new XMLHttpRequest,Un=at(ht,!0);try{for(Un.s();!(Yn=Un.n()).done;)Yn.value.xhr=hn}catch(rs){Un.e(rs)}finally{Un.f()}ht[0].upload.chunked&&(ht[0].upload.chunks[Lt[0].chunkIndex].xhr=hn);var pn=this.resolveOption(this.options.method,ht),Xt=this.resolveOption(this.options.url,ht);hn.open(pn,Xt,!0),this.resolveOption(this.options.timeout,ht)&&(hn.timeout=this.resolveOption(this.options.timeout,ht)),hn.withCredentials=!!this.options.withCredentials,hn.onload=function(rs){Dr._finishedUploading(ht,hn,rs)},hn.ontimeout=function(){Dr._handleUploadError(ht,hn,"Request timedout after ".concat(Dr.options.timeout/1e3," seconds"))},hn.onerror=function(){Dr._handleUploadError(ht,hn)},(null!=hn.upload?hn.upload:hn).onprogress=function(rs){return Dr._updateFilesUploadProgress(ht,hn,rs)};var Do={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var Jt in this.options.headers&&or.extend(Do,this.options.headers),Do){var Jn=Do[Jt];Jn&&hn.setRequestHeader(Jt,Jn)}var Qn=new FormData;if(this.options.params){var Io=this.options.params;for(var ri in"function"==typeof Io&&(Io=Io.call(this,ht,hn,ht[0].upload.chunked?this._getChunk(ht[0],hn):null)),Io){var Ka=Io[ri];if(Array.isArray(Ka))for(var Ei=0;Ei<Ka.length;Ei++)Qn.append(ri,Ka[Ei]);else Qn.append(ri,Ka)}}var ns,ui=at(ht,!0);try{for(ui.s();!(ns=ui.n()).done;)this.emit("sending",ns.value,hn,Qn)}catch(rs){ui.e(rs)}finally{ui.f()}this.options.uploadMultiple&&this.emit("sendingmultiple",ht,hn,Qn),this._addFormElementData(Qn);for(var Bs=0;Bs<Lt.length;Bs++){var To=Lt[Bs];Qn.append(To.name,To.data,To.filename)}this.submitRequest(hn,Qn,ht)}},{key:"_transformFiles",value:function(ht,Lt){for(var Dr=this,hn=[],Un=0,Yn=function(Xt){Dr.options.transformFile.call(Dr,ht[Xt],function(Ft){hn[Xt]=Ft,++Un===ht.length&&Lt(hn)})},dr=0;dr<ht.length;dr++)Yn(dr)}},{key:"_addFormElementData",value:function(ht){if("FORM"===this.element.tagName){var Dr,Lt=at(this.element.querySelectorAll("input, textarea, select, button"),!0);try{for(Lt.s();!(Dr=Lt.n()).done;){var hn=Dr.value,Un=hn.getAttribute("name"),Yn=hn.getAttribute("type");if(Yn&&(Yn=Yn.toLowerCase()),!(typeof Un>"u"||null===Un))if("SELECT"===hn.tagName&&hn.hasAttribute("multiple")){var pn,dr=at(hn.options,!0);try{for(dr.s();!(pn=dr.n()).done;){var Xt=pn.value;Xt.selected&&ht.append(Un,Xt.value)}}catch(Ft){dr.e(Ft)}finally{dr.f()}}else(!Yn||"checkbox"!==Yn&&"radio"!==Yn||hn.checked)&&ht.append(Un,hn.value)}}catch(Ft){Lt.e(Ft)}finally{Lt.f()}}}},{key:"_updateFilesUploadProgress",value:function(ht,Lt,Dr){if(ht[0].upload.chunked){var dr=ht[0],pn=this._getChunk(dr,Lt);Dr?(pn.progress=100*Dr.loaded/Dr.total,pn.total=Dr.total,pn.bytesSent=Dr.loaded):(pn.progress=100,pn.bytesSent=pn.total),dr.upload.progress=0,dr.upload.total=0,dr.upload.bytesSent=0;for(var Xt=0;Xt<dr.upload.totalChunkCount;Xt++)dr.upload.chunks[Xt]&&typeof dr.upload.chunks[Xt].progress<"u"&&(dr.upload.progress+=dr.upload.chunks[Xt].progress,dr.upload.total+=dr.upload.chunks[Xt].total,dr.upload.bytesSent+=dr.upload.chunks[Xt].bytesSent);dr.upload.progress=dr.upload.progress/dr.upload.totalChunkCount,this.emit("uploadprogress",dr,dr.upload.progress,dr.upload.bytesSent)}else{var Un,hn=at(ht,!0);try{for(hn.s();!(Un=hn.n()).done;){var Yn=Un.value;Yn.upload.total&&Yn.upload.bytesSent&&Yn.upload.bytesSent==Yn.upload.total||(Dr?(Yn.upload.progress=100*Dr.loaded/Dr.total,Yn.upload.total=Dr.total,Yn.upload.bytesSent=Dr.loaded):(Yn.upload.progress=100,Yn.upload.bytesSent=Yn.upload.total),this.emit("uploadprogress",Yn,Yn.upload.progress,Yn.upload.bytesSent))}}catch(Ft){hn.e(Ft)}finally{hn.f()}}}},{key:"_finishedUploading",value:function(ht,Lt,Dr){var hn;if(ht[0].status!==or.CANCELED&&4===Lt.readyState){if("arraybuffer"!==Lt.responseType&&"blob"!==Lt.responseType&&(hn=Lt.responseText,Lt.getResponseHeader("content-type")&&~Lt.getResponseHeader("content-type").indexOf("application/json")))try{hn=JSON.parse(hn)}catch(Un){Dr=Un,hn="Invalid JSON response from server."}this._updateFilesUploadProgress(ht,Lt),200<=Lt.status&&Lt.status<300?ht[0].upload.chunked?ht[0].upload.finishedChunkUpload(this._getChunk(ht[0],Lt),hn):this._finished(ht,hn,Dr):this._handleUploadError(ht,Lt,hn)}}},{key:"_handleUploadError",value:function(ht,Lt,Dr){if(ht[0].status!==or.CANCELED){if(ht[0].upload.chunked&&this.options.retryChunks){var hn=this._getChunk(ht[0],Lt);if(hn.retries++<this.options.retryChunksLimit)return void this._uploadData(ht,[hn.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}this._errorProcessing(ht,Dr||this.options.dictResponseError.replace("{{statusCode}}",Lt.status),Lt)}}},{key:"submitRequest",value:function(ht,Lt,Dr){1==ht.readyState?ht.send(Lt):console.warn("Cannot send this request because the XMLHttpRequest.readyState is not OPENED.")}},{key:"_finished",value:function(ht,Lt,Dr){var Un,hn=at(ht,!0);try{for(hn.s();!(Un=hn.n()).done;){var Yn=Un.value;Yn.status=or.SUCCESS,this.emit("success",Yn,Lt,Dr),this.emit("complete",Yn)}}catch(dr){hn.e(dr)}finally{hn.f()}if(this.options.uploadMultiple&&(this.emit("successmultiple",ht,Lt,Dr),this.emit("completemultiple",ht)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(ht,Lt,Dr){var Un,hn=at(ht,!0);try{for(hn.s();!(Un=hn.n()).done;){var Yn=Un.value;Yn.status=or.ERROR,this.emit("error",Yn,Lt,Dr),this.emit("complete",Yn)}}catch(dr){hn.e(dr)}finally{hn.f()}if(this.options.uploadMultiple&&(this.emit("errormultiple",ht,Lt,Dr),this.emit("completemultiple",ht)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"initClass",value:function(){this.prototype.Emitter=sn,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(ht){for(var Lt=arguments.length,Dr=new Array(Lt>1?Lt-1:0),hn=1;hn<Lt;hn++)Dr[hn-1]=arguments[hn];for(var Un=0,Yn=Dr;Un<Yn.length;Un++){var dr=Yn[Un];for(var pn in dr)ht[pn]=dr[pn]}return ht}},{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(ht){var Lt=16*Math.random()|0;return("x"===ht?Lt:3&Lt|8).toString(16)})}}]),or}(sn);gt.initClass(),gt.version="5.9.3",gt.options={},gt.optionsForElement=function(yr){if(yr.getAttribute("id"))return gt.options[tr(yr.getAttribute("id"))]},gt.instances=[],gt.forElement=function(yr){if("string"==typeof yr&&(yr=document.querySelector(yr)),null==yr?.dropzone)throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return yr.dropzone},gt.autoDiscover=!0,gt.discover=function(){var yr;if(document.querySelectorAll)yr=document.querySelectorAll(".dropzone");else{yr=[];var kr=function(Tr){return function(){var Dr,ht=[],Lt=at(Tr,!0);try{for(Lt.s();!(Dr=Lt.n()).done;){var hn=Dr.value;/(^| )dropzone($| )/.test(hn.className)?ht.push(yr.push(hn)):ht.push(void 0)}}catch(Un){Lt.e(Un)}finally{Lt.f()}return ht}()};kr(document.getElementsByTagName("div")),kr(document.getElementsByTagName("form"))}return function(){var ht,or=[],Tr=at(yr,!0);try{for(Tr.s();!(ht=Tr.n()).done;){var Lt=ht.value;!1!==gt.optionsForElement(Lt)?or.push(new gt(Lt)):or.push(void 0)}}catch(Dr){Tr.e(Dr)}finally{Tr.f()}return or}()},gt.blockedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],gt.isBrowserSupported=function(){var yr=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a")){void 0!==gt.blacklistedBrowsers&&(gt.blockedBrowsers=gt.blacklistedBrowsers);var or,kr=at(gt.blockedBrowsers,!0);try{for(kr.s();!(or=kr.n()).done;)or.value.test(navigator.userAgent)&&(yr=!1)}catch(ht){kr.e(ht)}finally{kr.f()}}else yr=!1;else yr=!1;return yr},gt.dataURItoBlob=function(yr){for(var kr=atob(yr.split(",")[1]),or=yr.split(",")[0].split(":")[1].split(";")[0],Tr=new ArrayBuffer(kr.length),ht=new Uint8Array(Tr),Lt=0,Dr=kr.length,hn=0<=Dr;hn?Lt<=Dr:Lt>=Dr;hn?Lt++:Lt--)ht[Lt]=kr.charCodeAt(Lt);return new Blob([Tr],{type:or})};var Fr=function(kr,or){return kr.filter(function(Tr){return Tr!==or}).map(function(Tr){return Tr})},tr=function(kr){return kr.replace(/[\-_](\w)/g,function(or){return or.charAt(1).toUpperCase()})};gt.createElement=function(yr){var kr=document.createElement("div");return kr.innerHTML=yr,kr.childNodes[0]},gt.elementInside=function(yr,kr){if(yr===kr)return!0;for(;yr=yr.parentNode;)if(yr===kr)return!0;return!1},gt.getElement=function(yr,kr){var or;if("string"==typeof yr?or=document.querySelector(yr):null!=yr.nodeType&&(or=yr),null==or)throw new Error("Invalid `".concat(kr,"` option provided. Please provide a CSS selector or a plain HTML element."));return or},gt.getElements=function(yr,kr){var Tr;if(yr instanceof Array){Tr=[];try{var Lt,ht=at(yr,!0);try{for(ht.s();!(Lt=ht.n()).done;)Tr.push(this.getElement(Lt.value,kr))}catch(Un){ht.e(Un)}finally{ht.f()}}catch{Tr=null}}else if("string"==typeof yr){Tr=[];var hn,Dr=at(document.querySelectorAll(yr),!0);try{for(Dr.s();!(hn=Dr.n()).done;)Tr.push(hn.value)}catch(Un){Dr.e(Un)}finally{Dr.f()}}else null!=yr.nodeType&&(Tr=[yr]);if(null==Tr||!Tr.length)throw new Error("Invalid `".concat(kr,"` option provided. Please provide a CSS selector, a plain HTML element or a list of those."));return Tr},gt.confirm=function(yr,kr,or){return window.confirm(yr)?kr():null!=or?or():void 0},gt.isValidFile=function(yr,kr){if(!kr)return!0;kr=kr.split(",");var Lt,or=yr.type,Tr=or.replace(/\/.*$/,""),ht=at(kr,!0);try{for(ht.s();!(Lt=ht.n()).done;){var Dr=Lt.value;if("."===(Dr=Dr.trim()).charAt(0)){if(-1!==yr.name.toLowerCase().indexOf(Dr.toLowerCase(),yr.name.length-Dr.length))return!0}else if(/\/\*$/.test(Dr)){if(Tr===Dr.replace(/\/.*$/,""))return!0}else if(or===Dr)return!0}}catch(hn){ht.e(hn)}finally{ht.f()}return!1},typeof jQuery<"u"&&null!==jQuery&&(jQuery.fn.dropzone=function(yr){return this.each(function(){return new gt(this,yr)})}),gt.ADDED="added",gt.QUEUED="queued",gt.ACCEPTED=gt.QUEUED,gt.UPLOADING="uploading",gt.PROCESSING=gt.UPLOADING,gt.CANCELED="canceled",gt.ERROR="error",gt.SUCCESS="success";var St=function(kr,or,Tr,ht,Lt,Dr,hn,Un,Yn,dr){var pn=function(kr){var Tr=kr.naturalHeight,ht=document.createElement("canvas");ht.width=1,ht.height=Tr;var Lt=ht.getContext("2d");Lt.drawImage(kr,0,0);for(var hn=Lt.getImageData(1,0,1,Tr).data,Un=0,Yn=Tr,dr=Tr;dr>Un;)0===hn[4*(dr-1)+3]?Yn=dr:Un=dr,dr=Yn+Un>>1;var Xt=dr/Tr;return 0===Xt?1:Xt}(or);return kr.drawImage(or,Tr,ht,Lt,Dr,hn,Un,Yn,dr/pn)},vr=function(){function yr(){mt(this,yr)}return ln(yr,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(or){for(var Tr="",ht=void 0,Lt=void 0,Dr="",hn=void 0,Un=void 0,Yn=void 0,dr="",pn=0;hn=(ht=or[pn++])>>2,Un=(3&ht)<<4|(Lt=or[pn++])>>4,Yn=(15&Lt)<<2|(Dr=or[pn++])>>6,dr=63&Dr,isNaN(Lt)?Yn=dr=64:isNaN(Dr)&&(dr=64),Tr=Tr+this.KEY_STR.charAt(hn)+this.KEY_STR.charAt(Un)+this.KEY_STR.charAt(Yn)+this.KEY_STR.charAt(dr),ht=Lt=Dr="",hn=Un=Yn=dr="",pn<or.length;);return Tr}},{key:"restore",value:function(or,Tr){if(!or.match("data:image/jpeg;base64,"))return Tr;var ht=this.decode64(or.replace("data:image/jpeg;base64,","")),Lt=this.slice2Segments(ht),Dr=this.exifManipulation(Tr,Lt);return"data:image/jpeg;base64,".concat(this.encode64(Dr))}},{key:"exifManipulation",value:function(or,Tr){var ht=this.getExifArray(Tr),Lt=this.insertExif(or,ht);return new Uint8Array(Lt)}},{key:"getExifArray",value:function(or){for(var Tr=void 0,ht=0;ht<or.length;){if(255===(Tr=or[ht])[0]&225===Tr[1])return Tr;ht++}return[]}},{key:"insertExif",value:function(or,Tr){var ht=or.replace("data:image/jpeg;base64,",""),Lt=this.decode64(ht),Dr=Lt.indexOf(255,3),hn=Lt.slice(0,Dr),Un=Lt.slice(Dr),Yn=hn;return(Yn=Yn.concat(Tr)).concat(Un)}},{key:"slice2Segments",value:function(or){for(var Tr=0,ht=[];!(255===or[Tr]&218===or[Tr+1]);){if(255===or[Tr]&216===or[Tr+1])Tr+=2;else{var Dr=Tr+(256*or[Tr+2]+or[Tr+3])+2,hn=or.slice(Tr,Dr);ht.push(hn),Tr=Dr}if(Tr>or.length)break}return ht}},{key:"decode64",value:function(or){var Lt=void 0,Dr="",hn=void 0,Un=void 0,Yn=void 0,dr="",pn=0,Xt=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(or)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),or=or.replace(/[^A-Za-z0-9\+\/\=]/g,"");hn=this.KEY_STR.indexOf(or.charAt(pn++)),Lt=(15&(Un=this.KEY_STR.indexOf(or.charAt(pn++))))<<4|(Yn=this.KEY_STR.indexOf(or.charAt(pn++)))>>2,Dr=(3&Yn)<<6|(dr=this.KEY_STR.indexOf(or.charAt(pn++))),Xt.push(hn<<2|Un>>4),64!==Yn&&Xt.push(Lt),64!==dr&&Xt.push(Dr),Lt=Dr="",hn=Un=Yn=dr="",pn<or.length;);return Xt}}]),yr}();vr.initClass();gt._autoDiscoverFunction=function(){if(gt.autoDiscover)return gt.discover()},function(kr,or){var Tr=!1,ht=!0,Lt=kr.document,Dr=Lt.documentElement,hn=Lt.addEventListener?"addEventListener":"attachEvent",Un=Lt.addEventListener?"removeEventListener":"detachEvent",Yn=Lt.addEventListener?"":"on",dr=function Xt(Ft){if(("readystatechange"!==Ft.type||"complete"===Lt.readyState)&&(("load"===Ft.type?kr:Lt)[Un](Yn+Ft.type,Xt,!1),!Tr&&(Tr=!0)))return or.call(kr,Ft.type||Ft)};if("complete"!==Lt.readyState){if(Lt.createEventObject&&Dr.doScroll){try{ht=!kr.frameElement}catch{}ht&&function Xt(){try{Dr.doScroll("left")}catch{return void setTimeout(Xt,50)}return dr("poll")}()}Lt[hn](Yn+"DOMContentLoaded",dr,!1),Lt[hn](Yn+"readystatechange",dr,!1),kr[hn](Yn+"load",dr,!1)}}(window,gt._autoDiscoverFunction),window.Dropzone=gt;var Ln=gt}(),S}()},33587:(oe,ue,re)=>{var O;self,oe.exports=(O=re(1221),(()=>{"use strict";var S={520:z=>{z.exports=O}},m={};function X(z){if(m[z])return m[z].exports;var H=m[z]={exports:{}};return S[z](H,H.exports,X),H.exports}X.n=z=>{var H=z&&z.__esModule?()=>z.default:()=>z;return X.d(H,{a:H}),H},X.d=(z,H)=>{for(var G in H)X.o(H,G)&&!X.o(z,G)&&Object.defineProperty(z,G,{enumerable:!0,get:H[G]})},X.o=(z,H)=>Object.prototype.hasOwnProperty.call(z,H),X.r=z=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(z,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(z,"__esModule",{value:!0})};var x={};return(()=>{X.r(x),X.d(x,{default:()=>Cf});var z=X(520),H=X.n(z);function T(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function N(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?T(Object(dt),!0).forEach(function(Dt){L(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):T(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function L(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}var te="tabs-",pe="".concat(te,"container"),we="".concat(te,"navigation"),Te="".concat(te,"panes"),ge="".concat(te,"tab"),Ce="".concat(te,"tab-pane");const Oe={navigationName:we,tabPanesName:Te,tabName:ge,tabPaneName:Ce,navigationSelector:'[data-gjs-type="'.concat(we,'"]'),tabPanesSelector:'[data-gjs-type="'.concat(Te,'"]'),tabSelector:'[data-gjs-type="'.concat(ge,'"]'),tabPaneSelector:'[data-gjs-type="'.concat(Ce,'"]'),containerId:"data-".concat(pe),navigationId:"data-".concat(we),tabPanesId:"data-".concat(Te),tabId:"data-".concat(ge),tabPaneId:"data-".concat(Ce)};var je=function(et,Ye){var dt=et.className;if((dt=dt&&dt.toString())&&dt.split(" ").indexOf(Ye)>=0)return 1},Ue=function(et){return et.toLowerCase().split(" ").map(function(Ye){return Ye.charAt(0).toUpperCase()+Ye.slice(1)}).join(" ")};const Le='<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="window-maximize" class="svg-inline--fa fa-window-maximize fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm-16 160H64v-84c0-6.6 5.4-12 12-12h360c6.6 0 12 5.4 12 12v84z"></path></svg>\n';function ke(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function me(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?ke(Object(dt),!0).forEach(function(Dt){l(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):ke(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function l(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function ut(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function $e(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?ut(Object(dt),!0).forEach(function(Dt){Ct(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):ut(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function Ct(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function Wt(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function mr(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Wt(Object(dt),!0).forEach(function(Dt){nr(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Wt(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function nr(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function Pn(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function Kn(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Pn(Object(dt),!0).forEach(function(Dt){Mo(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Pn(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function Mo(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function No(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function Di(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?No(Object(dt),!0).forEach(function(Dt){ci(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):No(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function ci(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function an(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function lr(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?an(Object(dt),!0).forEach(function(Dt){Pr(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):an(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function Pr(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function sn(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function kn(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?sn(Object(dt),!0).forEach(function(Dt){xo(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):sn(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function xo(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function Fa(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function Qr(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Fa(Object(dt),!0).forEach(function(Dt){ze(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Fa(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function ze(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function gr(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function Pt(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?gr(Object(dt),!0).forEach(function(Dt){mt(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):gr(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function mt(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function no(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function oo(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?no(Object(dt),!0).forEach(function(Dt){Ki(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):no(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function Ki(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function Nt(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function jt(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Nt(Object(dt),!0).forEach(function(Dt){gt(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Nt(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function gt(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}const wt=["primary","secondary","success","info","warning","danger","light","dark"],St={lg:"Large",sm:"Small"},vr='<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n    <rect class="gjs-block-svg-path" x="4" y="11.5" width="16" height="1"></rect>\n</svg>\n';function fn(et){return function(Ye){if(Array.isArray(Ye))return Ko(Ye)}(et)||function(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}(et)||function(Ye,dt){if(Ye){if("string"==typeof Ye)return Ko(Ye,undefined);var Dt=Object.prototype.toString.call(Ye).slice(8,-1);if("Object"===Dt&&Ye.constructor&&(Dt=Ye.constructor.name),"Map"===Dt||"Set"===Dt)return Array.from(Ye);if("Arguments"===Dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return Ko(Ye,undefined)}}(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(et,Ye){(null==Ye||Ye>et.length)&&(Ye=et.length);for(var dt=0,Dt=new Array(Ye);dt<Ye;dt++)Dt[dt]=et[dt];return Dt}function Ro(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function Ln(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Ro(Object(dt),!0).forEach(function(Dt){yr(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Ro(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function yr(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function Tr(et){return function(Ye){if(Array.isArray(Ye))return ht(Ye)}(et)||function(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}(et)||function(Ye,dt){if(Ye){if("string"==typeof Ye)return ht(Ye,undefined);var Dt=Object.prototype.toString.call(Ye).slice(8,-1);if("Object"===Dt&&Ye.constructor&&(Dt=Ye.constructor.name),"Map"===Dt||"Set"===Dt)return Array.from(Ye);if("Arguments"===Dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return ht(Ye,undefined)}}(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(et,Ye){(null==Ye||Ye>et.length)&&(Ye=et.length);for(var dt=0,Dt=new Array(Ye);dt<Ye;dt++)Dt[dt]=et[dt];return Dt}function Yn(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function dr(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Yn(Object(dt),!0).forEach(function(Dt){pn(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Yn(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function pn(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}function Jt(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function Jn(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?Jt(Object(dt),!0).forEach(function(Dt){Qn(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):Jt(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function Qn(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}const gc='<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="credit-card" class="svg-inline--fa fa-credit-card fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"></path></svg>\n';function Et(et){return function(Ye){if(Array.isArray(Ye))return Mr(Ye)}(et)||function(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}(et)||function(Ye,dt){if(Ye){if("string"==typeof Ye)return Mr(Ye,undefined);var Dt=Object.prototype.toString.call(Ye).slice(8,-1);if("Object"===Dt&&Ye.constructor&&(Dt=Ye.constructor.name),"Map"===Dt||"Set"===Dt)return Array.from(Ye);if("Arguments"===Dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return Mr(Ye,undefined)}}(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(et,Ye){(null==Ye||Ye>et.length)&&(Ye=et.length);for(var dt=0,Dt=new Array(Ye);dt<Ye;dt++)Dt[dt]=et[dt];return Dt}function ba(et){return function(Ye){if(Array.isArray(Ye))return Vi(Ye)}(et)||function(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}(et)||function(Ye,dt){if(Ye){if("string"==typeof Ye)return Vi(Ye,undefined);var Dt=Object.prototype.toString.call(Ye).slice(8,-1);if("Object"===Dt&&Ye.constructor&&(Dt=Ye.constructor.name),"Map"===Dt||"Set"===Dt)return Array.from(Ye);if("Arguments"===Dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return Vi(Ye,undefined)}}(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(et,Ye){(null==Ye||Ye>et.length)&&(Ye=et.length);for(var dt=0,Dt=new Array(Ye);dt<Ye;dt++)Dt[dt]=et[dt];return Dt}const Oc='<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="columns" class="svg-inline--fa fa-columns fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64V160h160v256zm224 0H288V160h160v256z"></path></svg>\n';function Ml(et){return function(Ye){if(Array.isArray(Ye))return Ea(Ye)}(et)||function(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}(et)||Ac(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function id(et,Ye){return function(dt){if(Array.isArray(dt))return dt}(et)||function(dt,Dt){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(dt)){var tn=[],uo=!0,ao=!1,Jo=void 0;try{for(var ko,ra=dt[Symbol.iterator]();!(uo=(ko=ra.next()).done)&&(tn.push(ko.value),!Dt||tn.length!==Dt);uo=!0);}catch(Ri){ao=!0,Jo=Ri}finally{try{uo||null==ra.return||ra.return()}finally{if(ao)throw Jo}}return tn}}(et,Ye)||Ac(et,Ye)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ac(et,Ye){if(et){if("string"==typeof et)return Ea(et,Ye);var dt=Object.prototype.toString.call(et).slice(8,-1);return"Object"===dt&&et.constructor&&(dt=et.constructor.name),"Map"===dt||"Set"===dt?Array.from(et):"Arguments"===dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(dt)?Ea(et,Ye):void 0}}function Ea(et,Ye){(null==Ye||Ye>et.length)&&(Ye=et.length);for(var dt=0,Dt=new Array(Ye);dt<Ye;dt++)Dt[dt]=et[dt];return Dt}function Xc(et){return function(Ye){if(Array.isArray(Ye))return eu(Ye)}(et)||function(Ye){if(typeof Symbol<"u"&&Symbol.iterator in Object(Ye))return Array.from(Ye)}(et)||function(Ye,dt){if(Ye){if("string"==typeof Ye)return eu(Ye,undefined);var Dt=Object.prototype.toString.call(Ye).slice(8,-1);if("Object"===Dt&&Ye.constructor&&(Dt=Ye.constructor.name),"Map"===Dt||"Set"===Dt)return Array.from(Ye);if("Arguments"===Dt||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dt))return eu(Ye,undefined)}}(et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eu(et,Ye){(null==Ye||Ye>et.length)&&(Ye=et.length);for(var dt=0,Dt=new Array(Ye);dt<Ye;dt++)Dt[dt]=et[dt];return Dt}const Ll=function(et){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},dt=Ye,Dt=et.DomComponents,tn=dt.blocks,uo=et.BlockManager,ao=dt.blockCategories,Jo={id:{name:"id",label:dt.labels.trait_id},for:{name:"for",label:dt.labels.trait_for},name:{name:"name",label:dt.labels.trait_name},placeholder:{name:"placeholder",label:dt.labels.trait_placeholder},value:{name:"value",label:dt.labels.trait_value},required:{type:"checkbox",name:"required",label:dt.labels.trait_required},checked:{label:dt.labels.trait_checked,type:"checkbox",name:"checked",changeProp:1}};ao.media&&(tn.image&&(function(et,Ye){et.add("bs-image",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="image" class="svg-inline--fa fa-image fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 448H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48zM112 120c-30.928 0-56 25.072-56 56s25.072 56 56 56 56-25.072 56-56-25.072-56-56-56zM64 384h384V272l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L208 320l-55.515-55.515c-4.686-4.686-12.284-4.686-16.971 0L64 336v48z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Media",content:{type:"bs-image"}})}(uo,dt.labels.image),function(et){var Ye=et.getType("image"),dt=Ye.model,Dt=Ye.view,tn="bs-image";et.addType(tn,{extend:"image",model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Image",tagName:"img",resizable:1,attributes:{src:"https://dummyimage.com/800x500/999/222"},classes:["img-fluid"],traits:[{type:"text",label:"Source (URL)",name:"src"},{type:"text",label:"Alternate text",name:"alt"}].concat(dt.prototype.defaults.traits)})},isComponent:function(uo){if(uo&&"IMG"===uo.tagName)return{type:tn}},view:Dt})}(Dt)),tn.video&&(function(et){var dt=et.getType("default").model,Dt="bs-video";et.addType(Dt,{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Embed",tagName:"div",resizable:!1,droppable:!1,classes:["embed-responsive","embed-responsive-16by9"],traits:[{type:"class_select",options:[{value:"embed-responsive-21by9",name:"21:9"},{value:"embed-responsive-16by9",name:"16:9"},{value:"embed-responsive-4by3",name:"4:3"},{value:"embed-responsive-1by1",name:"1:1"}],label:"Aspect Ratio"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&"embed-responsive"===tn.className)return{type:Dt}},view:{init:function(){var tn=["Aspect Ratio"].map(function(ao){return"change:".concat(ao)}).join(" ");this.listenTo(this.model,tn,this.render);var uo=this.model.components();uo.length||uo.add('<iframe class="embed-responsive-item" src="'.concat("https://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4",'"></iframe>'))}}})}(Dt),function(et,Ye){et.add("bs-video",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fab" data-icon="youtube" class="svg-inline--fa fa-youtube fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Media",content:{type:"bs-video"}})}(uo,dt.labels.video),function(et){var Ye=et.getType("video"),Dt=Ye.view,tn="bs-embed-responsive";et.addType(tn,{extend:"video",model:{defaults:Object.assign({},Ye.model.prototype.defaults,{"custom-name":"Video",resizable:!1,droppable:!1,draggable:!1,copyable:!1,provider:"so",classes:["embed-responsive-item"]})},isComponent:function(uo){if(uo&&"embed-responsive-item"===uo.className){var ao={provider:"so",type:tn},Jo=/youtube\.com\/embed/.test(uo.src),ko=/youtube-nocookie\.com\/embed/.test(uo.src),ra=/player\.vimeo\.com\/video/.test(uo.src),Ri=Jo||ko||ra;return("VIDEO"==uo.tagName||"IFRAME"==uo.tagName&&Ri)&&(uo.src&&(ao.src=uo.src),Ri&&(Jo?ao.provider="yt":ko?ao.provider="ytnc":ra&&(ao.provider="vi"))),ao}},view:Dt})}(Dt))),ao.basic&&(tn.default&&function(et){var Ye=wt.concat(["white"]),dt=et.getType("default"),tn=dt.view;et.addType("default",{model:{defaults:Object.assign({},dt.model.prototype.defaults,{tagName:"div",traits:[{type:"class_select",options:[{value:"",name:"Default"}].concat(Xc(Ye.map(function(uo){return{value:"text-"+uo,name:Ue(uo)}}))),label:"Text color"},{type:"class_select",options:[{value:"",name:"Default"}].concat(Xc(Ye.map(function(uo){return{value:"bg-"+uo,name:Ue(uo)}}))),label:"Background color"},{type:"class_select",options:[{value:"",name:"Default"},{value:"border",name:"Full"},{value:"border-top-0",name:"No top"},{value:"border-right-0",name:"No right"},{value:"border-bottom-0",name:"No bottom"},{value:"border-left-0",name:"No left"},{value:"border-0",name:"None"}],label:"Border width"},{type:"class_select",options:[{value:"",name:"Default"}].concat(Xc(Ye.map(function(uo){return{value:"border border-"+uo,name:Ue(uo)}}))),label:"Border color"},{type:"class_select",options:[{value:"",name:"Default"},{value:"rounded",name:"Rounded"},{value:"rounded-top",name:"Rounded top"},{value:"rounded-right",name:"Rounded right"},{value:"rounded-bottom",name:"Rounded bottom"},{value:"rounded-left",name:"Rounded left"},{value:"rounded-circle",name:"Circle"},{value:"rounded-0",name:"Square"}],label:"Border radius"},{type:"text",label:"ID",name:"id",placeholder:"my_element"},{type:"text",label:"Title",name:"title",placeholder:"My Element"}]}),init:function(){var uo=this.get("classes");uo.bind("add",this.classesChanged.bind(this)),uo.bind("change",this.classesChanged.bind(this)),uo.bind("remove",this.classesChanged.bind(this)),this.init2()},init2:function(){},classesChanged:function(){},changeType:function(uo){var ao=this.collection,Jo=ao.indexOf(this),ko={type:uo,style:this.getStyle(),attributes:this.getAttributes(),content:this.view.el.innerHTML};ao.remove(this),ao.add(ko,{at:Jo}),this.destroy()}},view:tn})}(Dt),tn.text&&(function(et,Ye){et.add("text",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="font" class="svg-inline--fa fa-font fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Typography",content:{type:"text",content:"Insert your text here"}})}(uo,dt.labels.text),function(et){var Ye=et.getType("default").model,dt=et.getType("text").view;et.addType("text",{model:{defaults:Object.assign({},Ye.prototype.defaults,{"custom-name":"Text",tagName:"div",droppable:!0,editable:!0})},view:dt})}(Dt)),tn.link&&(function(et,Ye){et.add("link",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="link" class="svg-inline--fa fa-link fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Basic",content:{type:"link",content:"Link text"}})}(uo,dt.labels.link),function(et){var Ye=et.DomComponents,dt=Ye.getType("text").model,Dt=Ye.getType("link").view;Ye.addType("link",{extend:"text",model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Link",tagName:"a",droppable:!0,editable:!0,traits:[{type:"text",label:"Href",name:"href",placeholder:"https://www.grapesjs.com"},{type:"select",options:[{value:"",name:"This window"},{value:"_blank",name:"New window"}],label:"Target",name:"target"},{type:"select",options:[{value:"",name:"None"},{value:"button",name:"Self"},{value:"collapse",name:"Collapse"},{value:"dropdown",name:"Dropdown"}],label:"Toggles",name:"data-toggle",changeProp:1}].concat(dt.prototype.defaults.traits)}),init2:function(){this.listenTo(this,"change:data-toggle",this.setupToggle),this.listenTo(this,"change:attributes",this.setupToggle)},setupToggle:function(tn,uo){var ao=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!0!==ao.ignore||!0===ao.force){console.log("setup toggle");var Jo=this.getAttributes(),ko=Jo.href;if(delete Jo["data-toggle"],delete Jo["aria-expanded"],delete Jo["aria-controls"],delete Jo["aria-haspopup"],ko&&ko.length>0&&ko.match(/^#/)){console.log("link has href");var ra=this.em.get("Editor").DomComponents.getWrapper().find(ko);if(ra.length>0){console.log("referenced el found");var Ra=ra[0].getAttributes().class;if(Ra){console.log("el has classes");var es=Ra.split(" "),Xi=["collapse","dropdown-menu"],cs=es.filter(function(cc){return Xi.includes(cc)});cs.length&&("collapse"===(console.log("link data-toggle matches el class"),cs[0])&&(Jo["data-toggle"]="collapse"),Jo["aria-expanded"]=es.includes("show"),"collapse"===cs[0]&&(Jo["aria-controls"]=ko.substring(1)))}}}this.set("attributes",Jo,{ignore:!0})}},classesChanged:function(tn){console.log("classes changed"),"link"===this.attributes.type&&this.attributes.classes.filter(function(uo){return"btn"===uo.id}).length>0&&this.changeType("button")}},isComponent:function(tn){if(tn&&tn.tagName&&"A"===tn.tagName)return{type:"link"}},view:Dt})}(et))),ao.layout&&(tn.container&&(function(et,Ye){et.add("container").set({label:"\n            ".concat(Le,"\n            <div>").concat(Ye,"</div>\n        "),category:"Layout",content:{type:"container",classes:["container"]}})}(uo,dt.labels.container),function(et){var Ye=et.getType("default"),dt=Ye.model,Dt=Ye.view;et.addType("container",{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Container",tagName:"div",droppable:!0,traits:[{type:"class_select",options:[{value:"container",name:"Fixed"},{value:"container-fluid",name:"Fluid"}],label:"Width"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&(tn.classList.contains("container")||tn.classList.contains("container-fluid")))return{type:"container"}},view:Dt})}(Dt)),tn.row&&(function(et,Ye){et.add("row").set({label:"\n            ".concat(Le,"\n            <div>").concat(Ye,"</div>\n        "),category:"Layout",content:{type:"row",classes:["row"]}})}(uo,dt.labels.row),function(et){var Ye=et.getType("default"),dt=Ye.model,Dt=Ye.view;et.addType("row",{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Row",tagName:"div",draggable:".container, .container-fluid",droppable:!0,traits:[{type:"class_select",options:[{value:"",name:"Yes"},{value:"no-gutters",name:"No"}],label:"Gutters?"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("row"))return{type:"row"}},view:Dt})}(Dt)),tn.column&&(function(et,Ye){et.add("column").set({label:"\n            ".concat(Oc,"\n            <div>").concat(Ye,"</div>\n        "),category:"Layout",content:{type:"column",classes:["col"]}})}(uo,dt.labels.column),function(et,Ye){var dt=et.getType("default"),Dt=dt.model,tn=dt.view,uo=[1,2,3,4,5,6,7,8,9,10,11,12];et.addType("column",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Column",draggable:".row",droppable:!0,resizable:{updateTarget:function(ao,Jo,ko){var ra=Ye.getSelected();if(ra){var Ri=ao.getRootNode().body.offsetWidth,ls="";Ri>=1200?ls="xl":Ri>=992?ls="lg":Ri>=768?ls="md":Ri>=576&&(ls="sm");var Ra=ao.parentElement.offsetWidth/12*.5,es=Jo.w>ao.offsetWidth+Ra;if(es||Jo.w<ao.offsetWidth-Ra){new RegExp("^col-"+ls+"-\\d{1,2}$"),ls||new RegExp("^col-\\d{1,2}$");var cs,cc=!1,Il={},vc=0,Aa=null,uc=function(Gl,ld){var qu;if(typeof Symbol>"u"||null==Gl[Symbol.iterator]){if(Array.isArray(Gl)||(qu=Ac(Gl))){qu&&(Gl=qu);var xu=0,Dp=function(){};return{s:Dp,n:function(){return xu>=Gl.length?{done:!0}:{done:!1,value:Gl[xu++]}},e:function(oc){throw oc},f:Dp}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Dc,cd=!0,Ef=!1;return{s:function(){qu=Gl[Symbol.iterator]()},n:function(){var oc=qu.next();return cd=oc.done,oc},e:function(oc){Ef=!0,Dc=oc},f:function(){try{cd||null==qu.return||qu.return()}finally{if(Ef)throw Dc}}}}(ao.classList);try{for(uc.s();!(cs=uc.n()).done;){var Ic=cs.value;if(0===Ic.indexOf("col-")){var sd=id(Ic.split("-"),3),Rc=sd[1],Dd=sd[2];Dd||(Dd=Rc,Rc=""),Il[Rc]=Dd,Rc===ls&&(Aa=Ic,vc=Dd,cc=!0)}}}catch(Gl){uc.e(Gl)}finally{uc.f()}if(!cc)for(var zd=0,Jp=["","xs","sm","md","lg","xl"];zd<Jp.length;zd++){var Ks=Jp[zd];if(Il[Ks]&&(vc=Il[Ks],cc=!0),Ks===ls)break}var dl=Number(vc);es?dl++:dl--,dl>12&&(dl=12),dl<1&&(dl=1);var Rl="col-"+ls+"-"+dl;ls||(Rl="col-"+dl),ra.addClass(Rl),Aa&&Aa!==Rl&&ra.removeClass(Aa),ra.getTrait((ls||"xs")+"_width").view.postUpdate()}}},tl:0,tc:0,tr:0,cl:0,cr:1,bl:0,bc:0,br:0},traits:[{id:"xs_width",type:"class_select",options:[{value:"col",name:"Equal"},{value:"col-auto",name:"Variable"}].concat(Ml(uo.map(function(ao){return{value:"col-"+ao,name:ao+"/12"}}))),label:"XS Width"},{id:"sm_width",type:"class_select",options:[{value:"",name:"None"},{value:"col-sm",name:"Equal"},{value:"col-sm-auto",name:"Variable"}].concat(Ml(uo.map(function(ao){return{value:"col-sm-"+ao,name:ao+"/12"}}))),label:"SM Width"},{id:"md_width",type:"class_select",options:[{value:"",name:"None"},{value:"col-md",name:"Equal"},{value:"col-md-auto",name:"Variable"}].concat(Ml(uo.map(function(ao){return{value:"col-md-"+ao,name:ao+"/12"}}))),label:"MD Width"},{id:"lg_width",type:"class_select",options:[{value:"",name:"None"},{value:"col-lg",name:"Equal"},{value:"col-lg-auto",name:"Variable"}].concat(Ml(uo.map(function(ao){return{value:"col-lg-"+ao,name:ao+"/12"}}))),label:"LG Width"},{id:"xl_width",type:"class_select",options:[{value:"",name:"None"},{value:"col-xl",name:"Equal"},{value:"col-xl-auto",name:"Variable"}].concat(Ml(uo.map(function(ao){return{value:"col-xl-"+ao,name:ao+"/12"}}))),label:"XL Width"},{type:"class_select",options:[{value:"",name:"None"}].concat(Ml(uo.map(function(ao){return{value:"offset-"+ao,name:ao+"/12"}}))),label:"XS Offset"},{type:"class_select",options:[{value:"",name:"None"}].concat(Ml(uo.map(function(ao){return{value:"offset-sm-"+ao,name:ao+"/12"}}))),label:"SM Offset"},{type:"class_select",options:[{value:"",name:"None"}].concat(Ml(uo.map(function(ao){return{value:"offset-md-"+ao,name:ao+"/12"}}))),label:"MD Offset"},{type:"class_select",options:[{value:"",name:"None"}].concat(Ml(uo.map(function(ao){return{value:"offset-lg-"+ao,name:ao+"/12"}}))),label:"LG Offset"},{type:"class_select",options:[{value:"",name:"None"}].concat(Ml(uo.map(function(ao){return{value:"offset-xl-"+ao,name:ao+"/12"}}))),label:"XL Offset"}].concat(Dt.prototype.defaults.traits)})},isComponent:function(ao){var Jo=!1;if(ao&&ao.classList&&ao.classList.forEach(function(ko){("col"==ko||ko.match(/^col-/))&&(Jo=!0)}),Jo)return{type:"column"}},view:tn})}(Dt,et),function(et,Ye){et.add("column_break").set({label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="equals" class="svg-inline--fa fa-equals fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 304H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32zm0-192H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Layout",content:{type:"column_break"}})}(uo,dt.labels.column_break),function(et){var Ye=et.getType("default"),Dt=Ye.view;et.addType("column_break",{model:{defaults:Object.assign({},Ye.model.prototype.defaults,{"custom-name":"Column Break",tagName:"div",classes:["w-100"]})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("w-100"))return{type:"column_break"}},view:Dt})}(Dt)),tn.media_object&&(function(et,Ye){et.add("media_object").set({label:"\n            ".concat(Oc,"\n            <div>").concat(Ye,"</div>\n        "),category:"Layout",content:'<div class="media">\n                 <img class="mr-3" src="">\n                 <div class="media-body">\n                 <h5>Media heading</h5>\n                 <div>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. Fusce condimentum nunc ac nisi vulputate fringilla. Donec lacinia congue felis in faucibus.</div>\n                 </div>\n                 </div>'})}(uo,dt.labels.media_object),function(et){var Ye=et.getType("default"),dt=Ye.model,Dt=Ye.view;et.addType("media_object",{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Media Object",tagName:"div",classes:["media"]})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("media"))return{type:"media"}},view:Dt}),et.addType("media_body",{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Media Body",tagName:"div",classes:["media-body"]})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("media-body"))return{type:"media_body"}},view:Dt})}(Dt))),ao.components&&(tn.alert&&(function(et,Ye){et.add("alert",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="exclamation-triangle" class="svg-inline--fa fa-exclamation-triangle fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Components",content:{type:"alert",content:"This is an alert\u2014check it out!"}})}(uo,dt.labels.alert),function(et){var Ye=et.getType("text"),dt=Ye.model,Dt=Ye.view;et.addType("alert",{extend:"text",model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Alert",tagName:"div",classes:["alert"],traits:[{type:"class_select",options:[{value:"",name:"None"}].concat(ba(wt.map(function(tn){return{value:"alert-"+tn,name:Ue(tn)}}))),label:"Context"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("alert"))return{type:"alert"}},view:Dt})}(Dt)),tn.tabs&&(function(et,Ye){et.add("tabs",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="ellipsis-h" class="svg-inline--fa fa-ellipsis-h fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zm104-72c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm-352 0c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72z"></path></svg>\n',"\n            <div>").concat(Ye.labels.tabs,"</div>\n        "),category:"Components",content:'\n            <ul class="nav nav-tabs" role="tablist">\n              <li class="nav-item">\n                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Tab 1</a>\n              </li>\n              <li class="nav-item">\n                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Tab 2</a>\n              </li>\n              <li class="nav-item">\n                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Tab 3</a>\n              </li>\n            </ul>\n            <div class="tab-content">\n              <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab"></div>\n              <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab"></div>\n              <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab"></div>\n            </div>\n        '}),et.add("tabs-tab",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg>\n',"\n            <div>").concat(Ye.labels.tab,"</div>\n        "),category:"Components",content:{type:"tabs-tab"}}),et.add("tabs-tab-pane",{label:"\n            ".concat(Le,"\n            <div>").concat(Ye.labels.tabPane,"</div>\n        "),category:"Components",content:{type:"tabs-tab-pane"}})}(uo,dt),function(et){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},dt=et.getType("default"),uo=Oe.tabSelector,ao=Ye.classNavigation,Jo=Oe.navigationName;et.addType(Jo,{model:{defaults:me(me({},dt.model.prototype.defaults),{},{name:"Tabs Navigation",copyable:0,draggable:!0,droppable:uo,traits:[{type:"class_select",options:[{value:"nav-tabs",name:"Tabs"},{value:"nav-pills",name:"Pills"}],label:"Type"},{type:"class_select",options:[{value:"",name:"Left"},{value:"nav-fill",name:"Fill"},{value:"nav-justified",name:"Justify"}],label:"Layout"}]}),init:function(){this.get("classes").pluck("name").indexOf(ao)<0&&this.addClass(ao)}},isComponent:function(ko){if(je(ko,ao))return{type:Jo}},view:{init:function(){var ko=["type","layout"].map(function(Ri){return"change:".concat(Ri)}).join(" ");this.listenTo(this.model,ko,this.render);var ra=this.model.components();ra.length||ra.add('\n                        <ul class="nav nav-tabs" role="tablist">\n                          <li class="nav-item">\n                            <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Tab 1</a>\n                          </li>\n                          <li class="nav-item">\n                            <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Tab 2</a>\n                          </li>\n                          <li class="nav-item">\n                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Tab 3</a>\n                          </li>\n                        </ul>\n                    ')}}})}(Dt,Ye),function(et){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},dt=et.getType("default"),uo=Oe.navigationSelector,ao=Ye.classTab,Jo=Oe.tabName;et.addType(Jo,{model:{defaults:mr(mr({},dt.model.prototype.defaults),{},{name:"Tab",tagName:"li",copyable:!0,draggable:uo}),init:function(){this.get("classes").pluck("name").indexOf(ao)<0&&this.addClass(ao)}},isComponent:function(ko){if(je(ko,ao))return{type:Jo}},view:{init:function(){var ko=this.model.components();ko.length||ko.add('\n              <a class="nav-link active" id="tab-1" data-toggle="tab" href="#tab-pane-1" role="tab" aria-controls="tab" aria-selected="true">Tab</a>\n          ')}}})}(Dt,Ye),function(et){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},dt=et.getType("default"),uo=Oe.tabPaneSelector,ao=Ye.classTabPanes,Jo=Oe.tabPanesName;et.addType(Jo,{model:{defaults:$e($e({},dt.model.prototype.defaults),{},{name:"Tabs Panes",copyable:0,draggable:!0,droppable:uo}),init:function(){this.get("classes").pluck("name").indexOf(ao)<0&&this.addClass(ao)}},isComponent:function(ko){if(je(ko,ao))return{type:Jo}},view:{init:function(){var ko=this.model.components();ko.length||ko.add('\n                        <div class="tab-content" id="myTabContent">\n                          <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">Tab pane 1</div>\n                          <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">Tab pane 2</div>\n                          <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">Tab pane 3</div>\n                        </div>\n                    ')}}})}(Dt,Ye),function(et){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},dt=et.getType("default"),tn=dt.view,ao=Oe.tabPanesSelector,Jo=Ye.classTabPane,ko=Oe.tabPaneName;et.addType(ko,{model:{defaults:Kn(Kn({},dt.model.prototype.defaults),{},{name:"Tab Pane",copyable:!0,draggable:ao,traits:["id",{type:"class_select",options:[{value:"fade",name:"Fade"},{value:"",name:"None"}],label:"Animation"},{type:"class_select",options:[{value:"",name:"Inactive"},{value:"active",name:"Active"}],label:"Is Active"}]}),init:function(){this.get("classes").pluck("name").indexOf(Jo)<0&&this.addClass(Jo)}},isComponent:function(ra){if(je(ra,Jo))return{type:ko}},view:tn})}(Dt,Ye)),tn.badge&&(function(et,Ye){et.add("badge",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="certificate" class="svg-inline--fa fa-certificate fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M458.622 255.92l45.985-45.005c13.708-12.977 7.316-36.039-10.664-40.339l-62.65-15.99 17.661-62.015c4.991-17.838-11.829-34.663-29.661-29.671l-61.994 17.667-15.984-62.671C337.085.197 313.765-6.276 300.99 7.228L256 53.57 211.011 7.229c-12.63-13.351-36.047-7.234-40.325 10.668l-15.984 62.671-61.995-17.667C74.87 57.907 58.056 74.738 63.046 92.572l17.661 62.015-62.65 15.99C.069 174.878-6.31 197.944 7.392 210.915l45.985 45.005-45.985 45.004c-13.708 12.977-7.316 36.039 10.664 40.339l62.65 15.99-17.661 62.015c-4.991 17.838 11.829 34.663 29.661 29.671l61.994-17.667 15.984 62.671c4.439 18.575 27.696 24.018 40.325 10.668L256 458.61l44.989 46.001c12.5 13.488 35.987 7.486 40.325-10.668l15.984-62.671 61.994 17.667c17.836 4.994 34.651-11.837 29.661-29.671l-17.661-62.015 62.65-15.99c17.987-4.302 24.366-27.367 10.664-40.339l-45.984-45.004z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Components",content:{type:"badge",content:"New!"}})}(uo,dt.labels.badge),function(et){var Ye=et.getType("text"),dt=Ye.model,Dt=Ye.view;et.addType("badge",{extend:"text",model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Badge",tagName:"span",classes:["badge"],traits:[{type:"class_select",options:[{value:"",name:"None"}].concat(Et(wt.map(function(tn){return{value:"badge-"+tn,name:Ue(tn)}}))),label:"Context"},{type:"class_select",options:[{value:"",name:"Default"},{value:"badge-pill",name:"Pill"}],label:"Shape"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("badge"))return{type:"badge"}},view:Dt})}(Dt)),tn.card&&(function(et,Ye){et.add("card",{label:"\n            ".concat(gc,"\n            <div>").concat(Ye.labels.card,"</div>\n        "),category:"Components",content:{type:"card"}}),et.add("card_container",{label:"\n            ".concat(gc,"\n            <div>").concat(Ye.labels.card_container,"</div>\n        "),category:"Components",content:{type:"card_container"}})}(uo,dt),function(et,Ye){var dt=Ye.DomComponents.getType("default"),Dt=dt.model,tn=dt.view,uo=et.getType("image"),ao=uo.model,Jo=uo.view;et.addType("card",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Card",classes:["card"],traits:[{type:"checkbox",label:"Image Top",name:"card-img-top",changeProp:1},{type:"checkbox",label:"Header",name:"card-header",changeProp:1},{type:"checkbox",label:"Image",name:"card-img",changeProp:1},{type:"checkbox",label:"Image Overlay",name:"card-img-overlay",changeProp:1},{type:"checkbox",label:"Body",name:"card-body",changeProp:1},{type:"checkbox",label:"Footer",name:"card-footer",changeProp:1},{type:"checkbox",label:"Image Bottom",name:"card-img-bottom",changeProp:1}].concat(Dt.prototype.defaults.traits)}),init2:function(){this.listenTo(this,"change:card-img-top",this.cardImageTop),this.listenTo(this,"change:card-header",this.cardHeader),this.listenTo(this,"change:card-img",this.cardImage),this.listenTo(this,"change:card-img-overlay",this.cardImageOverlay),this.listenTo(this,"change:card-body",this.cardBody),this.listenTo(this,"change:card-footer",this.cardFooter),this.listenTo(this,"change:card-img-bottom",this.cardImageBottom),this.components().comparator="card-order",this.set("card-img-top",!0),this.set("card-body",!0)},cardImageTop:function(){this.createCardComponent("card-img-top")},cardHeader:function(){this.createCardComponent("card-header")},cardImage:function(){this.createCardComponent("card-img")},cardImageOverlay:function(){this.createCardComponent("card-img-overlay")},cardBody:function(){this.createCardComponent("card-body")},cardFooter:function(){this.createCardComponent("card-footer")},cardImageBottom:function(){this.createCardComponent("card-img-bottom")},createCardComponent:function(ko){var ra=this.get(ko),Ri=ko.replace(/-/g,"_").replace(/img/g,"image"),ls=this.components(),Ra=ls.filter(function(Xi){return Xi.attributes.type===Ri})[0];if(ra&&!Ra){var es=ls.add({type:Ri}).components();"card-header"===ko&&es.add({type:"header",tagName:"h4",style:{"margin-bottom":"0px"},content:"Card Header"}),"card-img-overlay"===ko&&(es.add({type:"header",tagName:"h4",classes:["card-title"],content:"Card title"}),es.add({type:"text",tagName:"p",classes:["card-text"],content:"Some quick example text to build on the card title and make up the bulk of the card's content."})),"card-body"===ko&&(es.add({type:"header",tagName:"h4",classes:["card-title"],content:"Card title"}),es.add({type:"header",tagName:"h6",classes:["card-subtitle","text-muted","mb-2"],content:"Card subtitle"}),es.add({type:"text",tagName:"p",classes:["card-text"],content:"Some quick example text to build on the card title and make up the bulk of the card's content."}),es.add({type:"link",classes:["card-link"],href:"#",content:"Card link"}),es.add({type:"link",classes:["card-link"],href:"#",content:"Another link"})),this.order()}else ra||Ra.destroy()},order:function(){}},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card"))return{type:"card"}},view:tn}),et.addType("card_image_top",{extend:"image",model:{defaults:Object.assign({},ao.prototype.defaults,{"custom-name":"Card Image Top",classes:["card-img-top"],"card-order":1})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-img-top"))return{type:"card_image_top"}},view:Jo}),et.addType("card_header",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Card Header",classes:["card-header"],"card-order":2})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-header"))return{type:"card_header"}},view:tn}),et.addType("card_image",{extend:"image",model:{defaults:Object.assign({},ao.prototype.defaults,{"custom-name":"Card Image",classes:["card-img"],"card-order":3})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-img"))return{type:"card_image"}},view:Jo}),et.addType("card_image_overlay",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Card Image Overlay",classes:["card-img-overlay"],"card-order":4})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-img-overlay"))return{type:"card_image_overlay"}},view:tn}),et.addType("card_body",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Card Body",classes:["card-body"],"card-order":5})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-body"))return{type:"card_body"}},view:tn}),et.addType("card_footer",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Card Footer",classes:["card-footer"],"card-order":6})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-footer"))return{type:"card_footer"}},view:tn}),et.addType("card_image_bottom",{extend:"image",model:{defaults:Object.assign({},ao.prototype.defaults,{"custom-name":"Card Image Bottom",classes:["card-img-bottom"],"card-order":7})},isComponent:function(ko){if(ko&&ko.classList&&ko.classList.contains("card-img-bottom"))return{type:"card_image_bottom"}},view:Jo}),et.addType("card_container",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Card Container",classes:["card-group"],droppable:".card",traits:[{type:"class_select",options:[{value:"card-group",name:"Group"},{value:"card-deck",name:"Deck"},{value:"card-columns",name:"Columns"}],label:"Layout"}].concat(Dt.prototype.defaults.traits)})},isComponent:function(ko){var ra=Array.from(ko.classList||[]),Ri=["card-group","card-deck","card-columns"],ls=ra.filter(function(Ra){return Ri.includes(Ra)});if(ko&&ko.classList&&ls.length)return{type:"card_container"}},view:tn})}(Dt,et)),tn.collapse&&(function(et,Ye){et.add("collapse",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="compress" class="svg-inline--fa fa-compress fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Components",content:{type:"collapse"}})}(uo,dt.labels.collapse),function(et){var Ye=et.DomComponents,Dt=Ye.getType("default").model;Ye.addType("collapse",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Dropdown",classes:["collapse"],droppable:!0,traits:[{type:"class_select",options:[{value:"",name:"Closed"},{value:"show",name:"Open"}],label:"Initial state"}].concat(Dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("dropdown"))return{type:"dropdown"}},view:{}})}(et)),tn.dropdown&&(function(et,Ye){et.add("dropdown",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="far" data-icon="caret-square-down" class="svg-inline--fa fa-caret-square-down fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M125.1 208h197.8c10.7 0 16.1 13 8.5 20.5l-98.9 98.3c-4.7 4.7-12.2 4.7-16.9 0l-98.9-98.3c-7.7-7.5-2.3-20.5 8.4-20.5zM448 80v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V80c0-26.5 21.5-48 48-48h352c26.5 0 48 21.5 48 48zm-48 346V86c0-3.3-2.7-6-6-6H54c-3.3 0-6 2.7-6 6v340c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Components",content:{type:"dropdown"}})}(uo,dt.labels.dropdown),function(et){var Ye=et.DomComponents,dt=Ye.getType("default"),Dt=dt.model,tn=dt.view;function uo(ao){var Jo=ao._events["change:attributes"];return!!Jo&&0!==Jo.filter(function(ko){return"setupToggle"===ko.callback.name}).length}Ye.addType("dropdown",{model:{defaults:N(N({},Dt.prototype.defaults),{},{"custom-name":"Dropdown",classes:["dropdown"],droppable:"a, button, .dropdown-menu",traits:[{type:"select",label:"Initial state",name:"initial_state",options:[{value:"",name:"Closed"},{value:"show",name:"Open"}]}].concat(Dt.prototype.defaults.traits)}),init2:function(){this.append({type:"button",content:"Click to toggle",classes:["btn","dropdown-toggle"]}),this.append({type:"dropdown_menu"}),this.setupToggle(null,null,{force:!0});var ao=this.components();ao.bind("add",this.setupToggle.bind(this)),ao.bind("remove",this.setupToggle.bind(this));var Jo=this.get("classes");Jo.bind("add",this.setupToggle.bind(this)),Jo.bind("change",this.setupToggle.bind(this)),Jo.bind("remove",this.setupToggle.bind(this))},setupToggle:function(ao,Jo){var ko=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ra=this.components().filter(function(es){return es.getAttributes().class.split(" ").includes("dropdown-toggle")})[0],Ri=this.components().filter(function(es){return es.getAttributes().class.split(" ").includes("dropdown-menu")})[0];if((!0===ko.force||!0!==ko.ignore)&&ra&&Ri){uo(ra)||this.listenTo(ra,"change:attributes",this.setupToggle),uo(Ri)||this.listenTo(Ri,"change:attributes",this.setupToggle);var ls=ra.getAttributes();ls.role="button";var Ra=Ri.getAttributes();ls.hasOwnProperty("data-toggle")||(ls["data-toggle"]="dropdown"),ls.hasOwnProperty("aria-haspopup")||(ls["aria-haspopup"]=!0),ra.set("attributes",ls,{ignore:!0}),ls.hasOwnProperty("id")?Ra["aria-labelledby"]=ls.id:delete Ra["aria-labelledby"],Ri.set("attributes",Ra,{ignore:!0})}},updated:function(ao,Jo){if(Jo.hasOwnProperty("initial_state")){var ko=this.components().filter(function(Ri){return Ri.getAttributes().class.split(" ").includes("dropdown-menu")})[0],ra=ko.getAttributes();ra.class.split(" ").includes("show")?(ra["aria-expanded"]=!1,ko.removeClass("show")):(ra["aria-expanded"]=!0,ko.addClass("show"))}}},isComponent:function(ao){if(ao&&ao.classList&&ao.classList.contains("dropdown"))return{type:"dropdown"}},view:tn}),Ye.addType("dropdown_menu",{model:{defaults:Object.assign({},Dt.prototype.defaults,{"custom-name":"Dropdown Menu",classes:["dropdown-menu"],draggable:".dropdown",droppable:!0}),init2:function(){var ao={type:"link",classes:["dropdown-item"],content:"Dropdown item"};this.append({type:"header",tagName:"h6",classes:["dropdown-header"],content:"Dropdown header"}),this.append(ao),this.append({type:"default",classes:["dropdown-divider"]}),this.append(ao)}},isComponent:function(ao){if(ao&&ao.classList&&ao.classList.contains("dropdown-menu"))return{type:"dropdown_menu"}},view:tn})}(et))),ao.typography&&(tn.header&&(function(et,Ye){et.add("header",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="heading" class="svg-inline--fa fa-heading fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M448 96v320h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H320a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V288H160v128h32a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H32a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h32V96H32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-32v128h192V96h-32a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h160a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Typography",content:{type:"header",content:"Bootstrap heading"}})}(uo,dt.labels.header),function(et){var Ye=et.getType("text"),dt=Ye.model,Dt=Ye.view;et.addType("header",{extend:"text",model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Header",tagName:"h1",traits:[{type:"select",options:[{value:"h1",name:"One (largest)"},{value:"h2",name:"Two"},{value:"h3",name:"Three"},{value:"h4",name:"Four"},{value:"h5",name:"Five"},{value:"h6",name:"Six (smallest)"}],label:"Size",name:"tagName",changeProp:1},{type:"class_select",options:[{value:"",name:"None"},{value:"display-1",name:"One (largest)"},{value:"display-2",name:"Two "},{value:"display-3",name:"Three "},{value:"display-4",name:"Four (smallest)"}],label:"Display Heading"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&["H1","H2","H3","H4","H5","H6"].includes(tn.tagName))return{type:"header"}},view:Dt})}(Dt)),tn.paragraph&&(function(et,Ye){et.add("paragraph",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="paragraph" class="svg-inline--fa fa-paragraph fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M448 48v32a16 16 0 0 1-16 16h-48v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V96h-32v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V352h-32a160 160 0 0 1 0-320h240a16 16 0 0 1 16 16z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Typography",content:{type:"paragraph",content:"Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Duis mollis, est non commodo luctus."}})}(uo,dt.labels.paragraph),function(et){var Ye=et.getType("text"),dt=Ye.model,Dt=Ye.view;et.addType("paragraph",{extend:"text",model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Paragraph",tagName:"p",traits:[{type:"class_select",options:[{value:"",name:"No"},{value:"lead",name:"Yes"}],label:"Lead?"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.tagName&&"P"===tn.tagName)return{type:"paragraph"}},view:Dt})}(Dt))),ao.forms&&(tn.form&&(function(et,Ye){et.add("form",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,5.5 C22,5.2 21.5,5 20.75,5 L3.25,5 C2.5,5 2,5.2 2,5.5 L2,8.5 C2,8.8 2.5,9 3.25,9 L20.75,9 C21.5,9 22,8.8 22,8.5 L22,5.5 Z M21,8 L3,8 L3,6 L21,6 L21,8 Z" fill-rule="nonzero"></path>\n    <path class="gjs-block-svg-path" d="M22,10.5 C22,10.2 21.5,10 20.75,10 L3.25,10 C2.5,10 2,10.2 2,10.5 L2,13.5 C2,13.8 2.5,14 3.25,14 L20.75,14 C21.5,14 22,13.8 22,13.5 L22,10.5 Z M21,13 L3,13 L3,11 L21,11 L21,13 Z" fill-rule="nonzero"></path>\n    <rect class="gjs-block-svg-path" x="2" y="15" width="10" height="3" rx="0.5"></rect>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:'\n        <form>\n          <div class="form-group">\n            <label>Name</label>\n            <input name="name" placeholder="Type here your name" class="form-control"/>\n          </div>\n          <div class="form-group">\n            <label>Email</label>\n            <input name="email" type="email" placeholder="Type here your email" class="form-control"/>\n          </div>\n          <div class="form-check">\n            <input name="sex" type="checkbox" class="form-check-input" value="M">\n            <label class="form-check-label">M</label>\n          </div>\n          <div class="form-check">\n            <input name="sex" type="checkbox" class="form-check-input" value="F">\n            <label class="form-check-label">F</label>\n          </div>\n          <div class="form-group">\n            <label>Message</label>\n            <textarea name="message" class="form-control"></textarea>\n          </div>\n          <div class="form-group">\n            <button type="submit" class="btn btn-primary">Send</button>\n          </div>\n        </form>\n      '})}(uo,dt.labels.form),function(et,Ye){var dt,Dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},uo=et.getType("default").model;Dt.formPredefinedActions&&Dt.formPredefinedActions.length?(dt={type:"select",label:Dt.labels.trait_action,name:"action",options:[]},Dt.formPredefinedActions.forEach(function(ao){dt.options.push({value:ao.value,name:ao.name})})):dt={label:Dt.labels.trait_action,name:"action"},et.addType("form",{model:{defaults:Di(Di({},uo.prototype.defaults),{},{droppable:":not(form)",draggable:":not(form)",traits:[{type:"select",label:Dt.labels.trait_enctype,name:"enctype",options:[{value:"application/x-www-form-urlencoded",name:"application/x-www-form-urlencoded (default)"},{value:"multipart/form-data",name:"multipart/form-data"},{value:"text/plain",name:"text/plain"}]},{type:"select",label:Dt.labels.trait_method,name:"method",options:[{value:"post",name:"POST"},{value:"get",name:"GET"}]},dt]}),init:function(){this.listenTo(this,"change:formState",this.updateFormState)},updateFormState:function(){switch(this.get("formState")){case"success":this.showState("success");break;case"error":this.showState("error");break;default:this.showState("normal")}},showState:function(ao){var Jo,ko,ra=ao||"normal";"success"===ra?(Jo="none",ko="block"):"error"===ra?(Jo="block",ko="none"):(Jo="none",ko="none");var Ri=this.getStateModel("success"),ls=this.getStateModel("error"),Ra=Ri.getStyle(),es=ls.getStyle();Ra.display=ko,es.display=Jo,Ri.setStyle(Ra),ls.setStyle(es)},getStateModel:function(ao){for(var Jo,ko=ao||"success",ra=this.get("components"),Ri=0;Ri<ra.length;Ri++){var ls=ra.models[Ri];if(ls.get("form-state-type")===ko){Jo=ls;break}}if(!Jo){var Ra=formMsgSuccess;"error"===ko&&(Ra=formMsgError),Jo=ra.add({"form-state-type":ko,type:"text",removable:!1,copyable:!1,draggable:!1,attributes:{"data-form-state":ko},content:Ra})}return Jo}},isComponent:function(ao){if("FORM"===ao.tagName)return{type:"form"}},view:{events:{submit:function(ao){ao.preventDefault()}}}})}(Dt,Jo,Ye)),tn.input&&(function(et,Ye){et.add("input",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z"></path>\n    <polygon class="gjs-block-svg-path" points="4 10 5 10 5 14 4 14"></polygon>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:'<input name="input1" class="form-control"/>'})}(uo,dt.labels.input),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Dt=et.getType("default"),uo=Dt.view;et.addType("input",{model:{defaults:lr(lr({},Dt.model.prototype.defaults),{},{"custom-name":dt.labels.input,tagName:"input",draggable:"form .form-group",droppable:!1,traits:[Ye.value,Ye.name,Ye.placeholder,{label:dt.labels.trait_type,type:"select",name:"type",options:[{value:"text",name:dt.labels.type_text},{value:"email",name:dt.labels.type_email},{value:"password",name:dt.labels.type_password},{value:"number",name:dt.labels.type_number},{value:"date",name:dt.labels.type_date},{value:"hidden",name:dt.labels.type_hidden}]},Ye.required]})},isComponent:function(ao){if("INPUT"===ao.tagName)return{type:"input"}},view:uo})}(Dt,Jo,Ye),function(et,Ye){et.add("file-input",{label:"\n            ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z"></path>\n    <polygon class="gjs-block-svg-path" points="4 10 5 10 5 14 4 14"></polygon>\n</svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Forms",content:'<input type="file" name="file" class="form-control-file" id="exampleFormControlFile1">'})}(uo,dt.labels.file_input),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Dt=et.getType("default"),uo=Dt.view,ao="file-input";et.addType(ao,{model:{defaults:Jn(Jn({},Dt.model.prototype.defaults),{},{"custom-name":dt.labels.input,tagName:"input",draggable:"form .form-group",droppable:!1,traits:[Ye.name,Ye.required,{type:"checkbox",label:dt.labels.trait_multiple,name:"multiple"}]})},isComponent:function(Jo){if("INPUT"===Jo.tagName&&je(Jo,"form-control-file"))return{type:ao}},view:uo})}(Dt,Jo,Ye)),tn.form_group_input&&(function(et,Ye,dt){et.add("form_group_input",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z"></path>\n    <polygon class="gjs-block-svg-path" points="4 10 5 10 5 14 4 14"></polygon>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:'\n      <div class="form-group">\n        <label>Name</label>\n        <input name="name" placeholder="Type here your name" class="form-control"/>\n      </div>\n      '}),et.add("input_group",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z"></path>\n    <polygon class="gjs-block-svg-path" points="4 10 5 10 5 14 4 14"></polygon>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:'\n      <div class="input-group">\n        <div class="input-group-prepend">\n          <span class="input-group-text">$</span>\n        </div>\n        <input name="input1" type="text" class="form-control" aria-label="Amount (to the nearest dollar)">\n        <div class="input-group-append">\n          <span class="input-group-text">.00</span>\n        </div>\n      </div>\n      '})}(uo,dt.labels.form_group_input),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Dt=et.getType("default"),uo=Dt.view;et.addType("input_group",{model:{defaults:kn(kn({},Dt.model.prototype.defaults),{},{"custom-name":dt.labels.input_group,tagName:"div",traits:[]})},isComponent:function(ao){if(ao&&ao.classList&&ao.classList.contains("form_group_input"))return{type:"form_group_input"}},view:uo})}(Dt,Jo,Ye)),tn.textarea&&(function(et,Ye){et.add("textarea",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,7.5 C22,6.6 21.5,6 20.75,6 L3.25,6 C2.5,6 2,6.6 2,7.5 L2,16.5 C2,17.4 2.5,18 3.25,18 L20.75,18 C21.5,18 22,17.4 22,16.5 L22,7.5 Z M21,17 L3,17 L3,7 L21,7 L21,17 Z"></path>\n    <polygon class="gjs-block-svg-path" points="4 8 5 8 5 12 4 12"></polygon>\n    <polygon class="gjs-block-svg-path" points="19 7 20 7 20 17 19 17"></polygon>\n    <polygon class="gjs-block-svg-path" points="20 8 21 8 21 9 20 9"></polygon>\n    <polygon class="gjs-block-svg-path" points="20 15 21 15 21 16 20 16"></polygon>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:'<textarea name="textarea1" class="form-control"></textarea>'})}(uo,dt.labels.textarea),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},tn=et.getType("default").view,uo=et.getType("input");et.addType("textarea",{extend:"input",model:{defaults:Qr(Qr({},uo.model.prototype.defaults),{},{"custom-name":dt.labels.textarea,tagName:"textarea",traits:[Ye.name,Ye.placeholder,Ye.required]})},isComponent:function(Jo){if("TEXTAREA"===Jo.tagName)return{type:"textarea"}},view:tn})}(Dt,Jo,Ye)),tn.select&&(function(et,Ye){et.add("select",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,9 C22,8.4 21.5,8 20.75,8 L3.25,8 C2.5,8 2,8.4 2,9 L2,15 C2,15.6 2.5,16 3.25,16 L20.75,16 C21.5,16 22,15.6 22,15 L22,9 Z M21,15 L3,15 L3,9 L21,9 L21,15 Z" fill-rule="nonzero"></path>\n    <polygon class="gjs-block-svg-path" transform="translate(18.500000, 12.000000) scale(1, -1) translate(-18.500000, -12.000000) " points="18.5 11 20 13 17 13"></polygon>\n    <rect class="gjs-block-svg-path" x="4" y="11.5" width="11" height="1"></rect>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:'<select class="form-control" name="select1">\n        '.concat(Ye?'<option value="">'.concat(Ye,"</option>"):"",'\n        <option value="1">').concat(Ye," 1</option>\n        </select>")})}(uo,dt.labels.select),function(et,Ye,dt){var Dt=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},tn=Ye.getType("default"),uo=Ye.getType("input");Ye.addType("select",{model:{defaults:Pt(Pt({},uo.model.prototype.defaults),{},{"custom-name":Dt.labels.select,tagName:"select",traits:[dt.name,{label:Dt.labels.trait_options,type:"select-options"},dt.required]})},isComponent:function(ra){if("SELECT"===ra.tagName)return{type:"select"}},view:tn.view.extend({events:{mousedown:"handleClick"},handleClick:function(ra){ra.preventDefault()}})}),et.TraitManager.addType("select-options",{events:{keyup:"onChange"},onValueChange:function(){for(var ra=this.model.get("value").trim().split("\n"),Ri=[],ls=0;ls<ra.length;ls++){var Ra=ra[ls].split(Dt.optionsStringSeparator),es={tagName:"option",attributes:{}};Ra[1]?(es.content=Ra[1],es.attributes.value=Ra[0]):(es.content=Ra[0],es.attributes.value=Ra[0]),Ri.push(es)}this.target.get("components").reset(Ri),this.target.view.render()},getInputEl:function(){if(!this.$input){for(var ra="",Ri=this.target.get("components"),ls=0;ls<Ri.length;ls++){var Ra=Ri.models[ls],es=Ra.get("attributes").value||"";ra+="".concat(es).concat(Dt.optionsStringSeparator).concat(Ra.get("content"),"\n")}this.$input=document.createElement("textarea"),this.$input.value=ra}return this.$input}})}(et,Dt,Jo,Ye)),tn.checkbox&&(function(et,Ye){et.add("checkbox",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="fas" data-icon="check-square" class="svg-inline--fa fa-check-square fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Forms",content:'\n        <div class="form-check">\n          <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">\n          <label class="form-check-label" for="defaultCheck1">\n            Default checkbox\n          </label>\n        </div>\n      '})}(uo,dt.labels.checkbox),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},tn=(et.getType("default"),et.getType("input"));et.addType("checkbox",{model:{defaults:oo(oo({},tn.model.prototype.defaults),{},{"custom-name":dt.labels.checkbox_name,copyable:!1,droppable:!1,attributes:{type:"checkbox"},traits:[Ye.id,Ye.name,Ye.value,Ye.required,Ye.checked]}),init:function(){this.listenTo(this,"change:checked",this.handleChecked)},handleChecked:function(){var ao=this.get("checked"),Jo=this.get("attributes"),ko=this.view;ao?Jo.checked=!0:delete Jo.checked,ko&&(ko.el.checked=ao),this.set("attributes",oo({},Jo))}},isComponent:function(ao){if("INPUT"===ao.tagName&&"checkbox"===ao.type)return{type:"checkbox"}},view:{events:{click:"handleClick"},handleClick:function(ao){ao.preventDefault()}}})}(Dt,Jo,Ye)),tn.radio&&(function(et,Ye){et.add("radio",{label:"\n            ".concat('<svg aria-hidden="true" width="24" height="50" focusable="false" data-prefix="far" data-icon="dot-circle" class="svg-inline--fa fa-dot-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80z"></path></svg>\n',"\n            <div>").concat(Ye,"</div>\n        "),category:"Forms",content:'\n        <div class="form-check">\n          <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked>\n          <label class="form-check-label" for="exampleRadios1">\n            Default radio\n          </label>\n        </div>\n      '})}(uo,dt.labels.radio),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Dt=et.getType("checkbox");et.addType("radio",{extend:"checkbox",model:{defaults:jt(jt({},Dt.model.prototype.defaults),{},{"custom-name":dt.labels.radio,attributes:{type:"radio"}})},isComponent:function(tn){if("INPUT"===tn.tagName&&"radio"===tn.type)return{type:"radio"}},view:Dt.view})}(Dt,Jo,Ye)),tn.label&&(function(et,Ye){et.add("label",{label:"\n      ".concat('<svg class="gjs-block-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <path class="gjs-block-svg-path" d="M22,11.875 C22,11.35 21.5,11 20.75,11 L3.25,11 C2.5,11 2,11.35 2,11.875 L2,17.125 C2,17.65 2.5,18 3.25,18 L20.75,18 C21.5,18 22,17.65 22,17.125 L22,11.875 Z M21,17 L3,17 L3,12 L21,12 L21,17 Z" fill-rule="nonzero"></path>\n    <rect class="gjs-block-svg-path" x="2" y="5" width="14" height="5" rx="0.5"></rect>\n    <polygon class="gjs-block-svg-path" fill-rule="nonzero" points="4 13 5 13 5 16 4 16"></polygon>\n</svg>\n',"\n      <div>").concat(Ye,"</div>"),category:"Forms",content:"<label>Label</label>"})}(uo,dt.labels.label),function(et,Ye){var dt=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},Dt=et.getType("text"),uo=Dt.view;et.addType("label",{extend:"text",model:{defaults:dr(dr({},Dt.model.prototype.defaults),{},{"custom-name":dt.labels.label,tagName:"label",traits:[Ye.for]})},isComponent:function(ao){if("LABEL"==ao.tagName)return{type:"label"}},view:uo})}(Dt,Jo,Ye)),tn.button&&(function(et,Ye){et.add("button",{label:"".concat(vr,"<div>").concat(Ye,"</div>"),category:"Forms",content:'<button class="btn btn-primary">Send</button>'})}(uo,dt.labels.button),function(et){var dt=et.getType("default").model;et.addType("button",{model:{defaults:Ln(Ln({},dt.prototype.defaults),{},{"custom-name":"Button",droppable:!1,attributes:{role:"button"},classes:["btn"],traits:[{type:"content",label:"Text"},{label:"Type",type:"select",name:"type",options:[{value:"submit",name:"Submit"},{value:"reset",name:"Reset"},{value:"button",name:"Button"}]},{type:"class_select",options:[{value:"",name:"None"}].concat(fn(wt.map(function(Dt){return{value:"btn-".concat(Dt),name:Ue(Dt)}})),fn(wt.map(function(Dt){return{value:"btn-outline-".concat(Dt),name:Ue(Dt)+" (Outline)"}}))),label:"Context"},{type:"class_select",options:[{value:"",name:"Default"}].concat(fn(Object.keys(St).map(function(Dt){return{value:"btn-".concat(Dt),name:St[Dt]}}))),label:"Size"},{type:"class_select",options:[{value:"",name:"Inline"},{value:"btn-block",name:"Block"}],label:"Width"}].concat(dt.prototype.defaults.traits)}),afterChange:function(Dt){"button"===this.attributes.type&&0===this.attributes.classes.filter(function(tn){return"btn"===tn.id}).length&&this.changeType("link")}},isComponent:function(Dt){if(Dt&&Dt.classList&&Dt.classList.contains("btn"))return{type:"button"}},view:{events:{click:"handleClick"},init:function(){this.listenTo(this.model,"change:content",this.updateContent)},updateContent:function(){this.el.innerHTML=this.model.get("content")},handleClick:function(Dt){Dt.preventDefault()}}})}(Dt)),tn.button_group&&(function(et,Ye){et.add("button_group",{label:"\n            ".concat(vr,"\n            <div>").concat(Ye,"</div>\n        "),category:"Forms",content:{type:"button_group"}})}(uo,dt.labels.button_group),function(et){var Ye=et.getType("default"),dt=Ye.model,Dt=Ye.view;et.addType("button_group",{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Button Group",tagName:"div",classes:["btn-group"],droppable:".btn",attributes:{role:"group"},traits:[{type:"class_select",options:[{value:"",name:"Default"}].concat(Tr(Object.keys(St).map(function(tn){return{value:"btn-group-"+tn,name:St[tn]}}))),label:"Size"},{type:"class_select",options:[{value:"",name:"Horizontal"},{value:"btn-group-vertical",name:"Vertical"}],label:"Size"},{type:"Text",label:"ARIA Label",name:"aria-label",placeholder:"A group of buttons"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("btn-group"))return{type:"button_group"}},view:Dt})}(Dt)),tn.button_toolbar&&(function(et,Ye){et.add("button_toolbar",{label:"\n            ".concat(vr,"\n            <div>").concat(Ye,"</div>\n        "),category:"Forms",content:{type:"button_toolbar"}})}(uo,dt.labels.button_toolbar),function(et){var Ye=et.getType("default"),dt=Ye.model,Dt=Ye.view;et.addType("button_toolbar",{model:{defaults:Object.assign({},dt.prototype.defaults,{"custom-name":"Button Toolbar",tagName:"div",classes:["btn-toolbar"],droppable:".btn-group",attributes:{role:"toolbar"},traits:[{type:"Text",label:"ARIA Label",name:"aria-label",placeholder:"A toolbar of button groups"}].concat(dt.prototype.defaults.traits)})},isComponent:function(tn){if(tn&&tn.classList&&tn.classList.contains("btn-toolbar"))return{type:"button_toolbar"}},view:Dt})}(Dt)))};function as(et,Ye){var dt=Object.keys(et);if(Object.getOwnPropertySymbols){var Dt=Object.getOwnPropertySymbols(et);Ye&&(Dt=Dt.filter(function(tn){return Object.getOwnPropertyDescriptor(et,tn).enumerable})),dt.push.apply(dt,Dt)}return dt}function El(et){for(var Ye=1;Ye<arguments.length;Ye++){var dt=null!=arguments[Ye]?arguments[Ye]:{};Ye%2?as(Object(dt),!0).forEach(function(Dt){Gu(et,Dt,dt[Dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(et,Object.getOwnPropertyDescriptors(dt)):as(Object(dt)).forEach(function(Dt){Object.defineProperty(et,Dt,Object.getOwnPropertyDescriptor(dt,Dt))})}return et}function Gu(et,Ye,dt){return Ye in et?Object.defineProperty(et,Ye,{value:dt,enumerable:!0,configurable:!0,writable:!0}):et[Ye]=dt,et}const Cf=H().plugins.add("grapesjs-blocks-bootstrap4",function(et){var Ye=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.editor=et;var dt=Ye.blocks||{},Dt=Ye.labels||{},tn=Ye.blockCategories||{};delete Ye.blocks,delete Ye.labels,delete Ye.blockCategories;var ko=El(El({},{blocks:Object.assign({default:!0,text:!0,link:!0,image:!0,container:!0,row:!0,column:!0,column_break:!0,media_object:!0,alert:!0,tabs:!0,badge:!0,button:!0,button_group:!0,button_toolbar:!0,card:!0,card_container:!0,collapse:!0,dropdown:!0,video:!0,header:!0,paragraph:!0,list:!0,form:!0,input:!0,form_group_input:!0,input_group:!0,textarea:!0,select:!0,label:!0,checkbox:!0,radio:!0},dt),labels:Object.assign({container:"Container",row:"Row",column:"Column",column_break:"Column Break",media_object:"Media Object",alert:"Alert",tabs:"Tabs",tab:"Tab",tabPane:"Tab Pane",badge:"Badge",button:"Button",button_group:"Button Group",button_toolbar:"Button Toolbar",card:"Card",card_container:"Card Container",collapse:"Collapse",dropdown:"Dropdown",dropdown_menu:"Dropdown Menu",dropdown_item:"Dropdown Item",image:"Image",video:"Video",text:"Text",header:"Header",paragraph:"Paragraph",link:"Link",list:"Simple List",form:"Form",input:"Input",file_input:"File",form_group_input:"Form Group",input_group:"Input group",textarea:"Textarea",select:"Select",select_option:"- Select option -",option:"Option",label:"Label",checkbox:"Checkbox",radio:"Radio",trait_method:"Method",trait_enctype:"Encoding Type",trait_multiple:"Multiple",trait_action:"Action",trait_state:"State",trait_id:"ID",trait_for:"For",trait_name:"Name",trait_placeholder:"Placeholder",trait_value:"Value",trait_required:"Required",trait_type:"Type",trait_options:"Options",trait_checked:"Checked",type_text:"Text",type_email:"Email",type_password:"Password",type_number:"Number",type_date:"Date",type_hidden:"Hidden",type_submit:"Submit",type_reset:"Reset",type_button:"Button"},Dt),blockCategories:Object.assign({layout:!0,media:!0,components:!0,typography:!0,basic:!0,forms:!0},tn),optionsStringSeparator:"::",gridDevices:!0,gridDevicesPanel:!1,classNavigation:"nav",classTabPanes:"tab-content",classTabPane:"tab-pane",classTab:"nav-item"}),Ye);(function(et){var Ye=et.TraitManager;Ye.addType("class_select",{events:{change:"onChange"},createInput:function(Dt){for(var tn=this.model.get("options")||[],uo=document.createElement("select"),ao=this.target.view.el,Jo=function(ra){var Ri=document.createElement("option"),ls=tn[ra].value;""===ls&&(ls="GJS_NO_CLASS"),Ri.text=tn[ra].name,Ri.value=ls;var Ra=Array.from(ao.classList),es=ls.split(" ");Ra.filter(function(Xi){return es.includes(Xi)}).length===es.length&&Ri.setAttribute("selected","selected"),uo.append(Ri)},ko=0;ko<tn.length;ko++)Jo(ko);return uo},onUpdate:function(Dt){for(var tn=Dt.elInput,uo=Dt.component.getClasses(),ao=this.model.get("options")||[],Jo=0;Jo<ao.length;Jo++){var ko=ao[Jo].value;if(ko&&uo.includes(ko))return void(tn.value=ko)}tn.value="GJS_NO_CLASS"},onEvent:function(Dt){for(var tn=Dt.component,uo=this.model.get("options").map(function(Ra){return Ra.value}),ao=0;ao<uo.length;ao++)if(uo[ao].length>0)for(var Jo=uo[ao].split(" "),ko=0;ko<Jo.length;ko++)Jo[ko].length>0&&tn.removeClass(Jo[ko]);var ra=this.model.get("value");if(delete tn.attributes.attributes[""],ra.length>0&&"GJS_NO_CLASS"!==ra)for(var Ri=ra.split(" "),ls=0;ls<Ri.length;ls++)tn.addClass(Ri[ls]);tn.em.trigger("component:toggled")}});var dt=Ye.getType("text");Ye.addType("content",{events:{keyup:"onChange"},onValueChange:function(){var Dt=this.model;Dt.target.set("content",Dt.get("value"))},getInputEl:function(){return this.inputEl||(this.inputEl=dt.prototype.getInputEl.bind(this)(),this.inputEl.value=this.target.get("content")),this.inputEl}}),Ye.addType("content",{events:{keyup:"onChange"},onValueChange:function(){var Dt=this.model;Dt.target.set("content",Dt.get("value"))},getInputEl:function(){return this.inputEl||(this.inputEl=dt.prototype.getInputEl.bind(this)(),this.inputEl.value=this.target.get("content")),this.inputEl}})})(et),Ll(et,ko),function(et){var dt=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},Dt=et.DeviceManager;if(dt.gridDevices&&(Dt.add("Extra Small","575px"),Dt.add("Small","767px"),Dt.add("Medium","991px"),Dt.add("Large","1199px"),Dt.add("Extra Large"),dt.gridDevicesPanel)){var uo=et.Commands;et.Panels.addPanel({id:"devices-buttons"}).get("buttons").add([{id:"deviceXl",command:"set-device-xl",className:"fa fa-desktop",text:"XL",attributes:{title:"Extra Large"},active:1},{id:"deviceLg",command:"set-device-lg",className:"fa fa-desktop",attributes:{title:"Large"}},{id:"deviceMd",command:"set-device-md",className:"fa fa-tablet",attributes:{title:"Medium"}},{id:"deviceSm",command:"set-device-sm",className:"fa fa-mobile",attributes:{title:"Small"}},{id:"deviceXs",command:"set-device-xs",className:"fa fa-mobile",attributes:{title:"Extra Small"}}]),uo.add("set-device-xs",{run:function(ko){ko.setDevice("Extra Small")}}),uo.add("set-device-sm",{run:function(ko){ko.setDevice("Small")}}),uo.add("set-device-md",{run:function(ko){ko.setDevice("Medium")}}),uo.add("set-device-lg",{run:function(ko){ko.setDevice("Large")}}),uo.add("set-device-xl",{run:function(ko){ko.setDevice("Extra Large")}})}}(et,ko),function(et){et.Config.canvasCss+='\n    /* Layout */\n\n    .gjs-dashed .container, .gjs-dashed .container-fluid,\n    .gjs-dashed .row,\n    .gjs-dashed .col, .gjs-dashed [class^="col-"] {\n      min-height: 1.5rem !important;\n    }\n    .gjs-dashed .w-100 {\n      min-height: .25rem !important;\n      background-color: rgba(0,0,0,0.1);\n    }\n    .gjs-dashed img {\n      min-width: 25px;\n      min-height: 25px;\n      background-color: rgba(0,0,0,0.5);\n    }\n\n    /* Components */\n\n    .gjs-dashed .btn-group,\n    .gjs-dashed .btn-toolbar {\n      padding-right: 1.5rem !important;\n      min-height: 1.5rem !important;\n    }\n    .gjs-dashed .card,\n    .gjs-dashed .card-group, .gjs-dashed .card-deck, .gjs-dashed .card-columns {\n      min-height: 1.5rem !important;\n    }\n    .gjs-dashed .collapse {\n      display: block !important;\n      min-height: 1.5rem !important;\n    }\n    .gjs-dashed .dropdown {\n      display: block !important;\n      min-height: 1.5rem !important;\n    }\n    .gjs-dashed .dropdown-menu {\n      min-height: 1.5rem !important;\n      display: block !important;\n    }\n  '}(et)})})(),x})())},52597:function(oe){var re;typeof globalThis<"u"?globalThis:typeof window<"u"&&window,re=()=>(()=>{"use strict";var ue={d:(D,U)=>{for(var R in U)ue.o(U,R)&&!ue.o(D,R)&&Object.defineProperty(D,R,{enumerable:!0,get:U[R]})},o:(D,U)=>Object.prototype.hasOwnProperty.call(D,U),r:D=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(D,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(D,"__esModule",{value:!0})}},re={};function O(D,U,R){return U in D?Object.defineProperty(D,U,{value:R,enumerable:!0,configurable:!0,writable:!0}):D[U]=R,D}ue.r(re),ue.d(re,{default:()=>G});const X={"grapesjs-signature-pad":{name:"Signature Pad","call-to-action":"Please sign here"}},x={"grapesjs-signature-pad":{name:"Unterschriftsfeld","call-to-action":"Bitte hier unterschreiben"}};function z(D,U){var R=Object.keys(D);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(D);U&&(T=T.filter(function(N){return Object.getOwnPropertyDescriptor(D,N).enumerable})),R.push.apply(R,T)}return R}function H(D){for(var U=1;U<arguments.length;U++){var R=null!=arguments[U]?arguments[U]:{};U%2?z(Object(R),!0).forEach(function(T){O(D,T,R[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(R)):z(Object(R)).forEach(function(T){Object.defineProperty(D,T,Object.getOwnPropertyDescriptor(R,T))})}return D}const G=function(D){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},R=H(H({},{i18n:{}}),U);D.I18n&&D.I18n.addMessages(H({en:X,de:x},R.i18n)),function(D){D.DomComponents.addType("signature-pad",{model:{defaults:{tagName:"div",name:D.I18n.t("grapesjs-signature-pad.name"),droppable:!1,resizable:!0,traits:[{name:"id"},{name:"penColor",label:"Pen color",type:"color",changeProp:!0},{name:"backgroundColor",label:"Background color",type:"color",changeProp:!0}],style:{width:"15rem",height:"5rem",background:"#f0f0f0",border:"1px dashed #cacaca",cursor:"pointer"},unstylable:["width","height","max-width","max-height","min-height","padding"],content:'<span class="sp-placeholder">'.concat(D.I18n.t("grapesjs-signature-pad.call-to-action"),"</span>"),script:function(Y){var ee=this,te=function(){ee.addEventListener("click",function(Te){!function(ge){var Ce,Oe=document.createElement("dialog");Oe.id="sp-modal";var je=document.createElement("div");je.innerHTML+='<span class="sp-modal-title">Please sign</span>',je.classList.add("dialog-header"),Oe.appendChild(je);var Ue=document.createElement("button");Ue.id="sp-modal-close",Ue.classList.add("modal-btn"),Ue.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M13.7071 1.70711C14.0976 1.31658 14.0976 0.683417 13.7071 0.292893C13.3166 -0.0976311 12.6834 -0.0976311 12.2929 0.292893L7 5.58579L1.70711 0.292893C1.31658 -0.0976311 0.683417 -0.0976311 0.292893 0.292893C-0.0976311 0.683417 -0.0976311 1.31658 0.292893 1.70711L5.58579 7L0.292893 12.2929C-0.0976311 12.6834 -0.0976311 13.3166 0.292893 13.7071C0.683417 14.0976 1.31658 14.0976 1.70711 13.7071L7 8.41421L12.2929 13.7071C12.6834 14.0976 13.3166 14.0976 13.7071 13.7071C14.0976 13.3166 14.0976 12.6834 13.7071 12.2929L8.41421 7L13.7071 1.70711Z" />\n    </svg>',je.appendChild(Ue);var Le=document.createElement("canvas");Le.id="sp-canvas",Oe.appendChild(Le);var ke=document.createElement("div");ke.classList.add("dialog-footer"),ke.innerHTML+='<span class="sp-helptext">Sign above</span>',Oe.appendChild(ke);var me=document.createElement("div");me.classList.add("btn-container"),ke.appendChild(me);var l=document.createElement("button");l.id="sp-modal-clear",l.classList.add("modal-btn"),l.innerHTML="clear",me.appendChild(l);var Me=document.createElement("button");Me.id="sp-modal-save",Me.classList.add("modal-btn"),Me.innerHTML="save",Me.autofocus=!0,me.appendChild(Me);var Ze=new SignaturePad(Le,{penColor:Y.penColor,backgroundColor:Y.backgroundColor}),ut=ge.querySelector("img");null!==(Ce=ut)&&void 0!==Ce&&Ce.dataset.signature&&Ze.fromData(JSON.parse(ut.dataset.signature));var $e=function(){var Ct=Math.max(window.devicePixelRatio||1,1);Le.width=Le.offsetWidth*Ct,Le.height=Le.offsetHeight*Ct,Le.getContext("2d").scale(Ct,Ct),Ze.fromData(Ze.toData())};Ze.on(),window.onresize=$e,Ue.addEventListener("click",function(){Oe.close(),Oe.remove()}),l.addEventListener("click",function(){Ze.clear()}),Me.addEventListener("click",function(){ut||(ut=document.createElement("img"),ge.appendChild(ut)),Ze.isEmpty()?ut.remove():(ut.src=Ze.toDataURL(),ut.dataset.signature=JSON.stringify(Ze.toData())),Oe.close(),Oe.remove()}),document.body.append(Oe),Oe.showModal(),$e()}(this)})};if(window.SignaturePad)te();else{var pe=document.createElement("script");pe.onload=te,pe.src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.5/dist/signature_pad.umd.min.js",document.body.appendChild(pe);var we=document.createElement("style");we.innerText='\n      #sp-modal {\n        padding: 1rem;\n        border: none;\n        border-radius: 8px;\n        width: 50%;\n        min-width: 20rem;\n        max-width: 40rem;\n        -webkit-box-shadow: 5px 5px 15px 5px rgba(0,0,0,0.35); \n        box-shadow: 5px 5px 15px 5px rgba(0,0,0,0.35);\n        font-family: "Verdana", sans-serif;\n      }\n      #sp-modal::backdrop {\n        background: rgba(0, 0, 0, 0.35);\n        backdrop-filter: blur(2px);\n      }\n      .dialog-header {\n        display: flex;\n        border-bottom: 1px solid #fafafa;\n        margin-botton: 1rem;\n        padding-bottom: 0.5rem;\n      }\n      .sp-modal-title {\n        flex-grow: 1;\n        display: inline-block;\n        align-self: center;\n        text-transform: uppercase;\n      }\n      .btn-container {\n        display: flex;\n        gap: 1rem;\n        margin-top: 1rem;\n      }\n      .btn-container > button {\n        flex-grow: 1;\n      }\n      .sp-helptext {\n        font-size: 0.75rem;\n        display: block;\n        color: #777;\n        text-align: center;\n      }\n      #sp-canvas {\n        width: 100%;\n        height: 100%;\n        margin-top: 1rem;\n        margin-bottom: 1rem;\n        border: 1px solid black;\n        aspect-ratio: 3 / 1;\n      }\n      .signature-pad {\n        position: relative;\n        display: flex;\n      }\n      .signature-pad > img {\n        position: absolute;\n        top: 0;\n        left: 0;\n        background: #fff;\n        width: 100%;\n        height: 100%;\n      }\n      .modal-btn {\n        outline: none;\n        border: none;\n        border-radius: 0.25rem;\n        padding: 0.5rem;\n        cursor: pointer;\n        text-transform: uppercase;\n      }\n      #sp-modal-close {\n        background: rgba(0,0,0,0);\n      }\n      #sp-modal-close > svg {\n        fill: #333;\n        transition: transform 0.3s ease-in;\n      }\n      #sp-modal-close:hover > svg {\n        transform: rotate(90deg);\n      }\n      #sp-modal-save:hover,\n      #sp-modal-clear:hover {\n        background-color: #555;\n        color: white;\n      }\n      #sp-modal-save {\n        background: #333;\n        color: white;\n      }\n      #sp-modal-clear {\n        background: #ddd;\n        color: #333;\n      }\n      .sp-placeholder {\n        display: block;\n        width: 100%;\n        color: #999;\n        text-shadow: 2px 2px rgba(255,255,255,1);\n        padding: 0.5rem;\n        text-align: center;\n        align-self: center;\n      }',document.head.appendChild(we)}},penColor:"black",backgroundColor:null,"script-props":["penColor","backgroundColor"]}},view:{}})}(D),function(D){D.BlockManager.add("SIGNATURE-PAD",{label:D.I18n.t("grapesjs-signature-pad.name"),content:'<div data-gjs-type="signature-pad" data-gjs-editable="false" class="signature-pad"></div>',attributes:{class:"fa fa-pencil-square-o"},select:!0,category:"Extra"})}(D)};return re})(),oe.exports=re()},1221:function(oe){var re;typeof globalThis<"u"?globalThis:typeof window<"u"&&window,re=()=>(()=>{var ue={4729:(m,X,x)=>{var z,H,G;H=[x(5706),x(4193)],void 0===(G="function"==typeof(z=function(D,U){var R=Array.prototype.slice;function T(me,l,Me){return Me.length<=4?me.call(l,Me[0],Me[1],Me[2],Me[3]):me.apply(l,Me)}function N(me,l){return R.call(me,l)}function L(me,l){return null!=me&&(D.isArray(l)||(l=N(arguments,1)),D.all(l,function(Me){return Me in me}))}var me,l,Y=(me=!1,l=-1,function(){return me||function Me(){l++,me=!0,D.defer(function(){me=!1})}(),l});function ee(){this.registeredObjects=[],this.cidIndexes=[]}function te(me,l,Me,Ze){for(var ut,$e=0,Ct=l.length;$e<Ct;$e++)if(ut=l[$e]){if("on"===me){if(!Ze.objectRegistry.register(ut))continue}else if(!Ze.objectRegistry.unregister(ut))continue;D.isFunction(ut[me])&&ut[me]("all",Me,Ze)}}function pe(me,l){var Me=l.type,Ze=l.undoTypes,ut=!Ze[Me]||Ze[Me][me];D.isFunction(ut)&&ut(l.object,l.before,l.after,l.options)}function we(me,l,Me,Ze,ut){if(!(Me.isCurrentlyUndoRedoing||"undo"===me&&-1===Me.pointer||"redo"===me&&Me.pointer===Me.length-1)){Me.isCurrentlyUndoRedoing=!0;var $e,Ct,Ke="undo"===me;for(ut?Ct=Ke&&Me.pointer===Me.length-1||!Ke&&-1===Me.pointer?D.clone(Me.models):R.apply(Me.models,Ke?[0,Me.pointer]:[Me.pointer,Me.length-1]):($e=Me.at(Ke?Me.pointer:Me.pointer+1),Ct=Ze?Me.where({magicFusionIndex:$e.get("magicFusionIndex")}):[$e]),Me.pointer+=(Ke?-1:1)*Ct.length;$e=Ke?Ct.pop():Ct.shift();)$e[me]();Me.isCurrentlyUndoRedoing=!1,l.trigger(me,l)}}ee.prototype={isRegistered:function(me){return me&&me.cid?this.registeredObjects[me.cid]:D.contains(this.registeredObjects,me)},register:function(me){return!this.isRegistered(me)&&(me&&me.cid?(this.registeredObjects[me.cid]=me,this.cidIndexes.push(me.cid)):this.registeredObjects.push(me),!0)},unregister:function(me){if(this.isRegistered(me)){if(me&&me.cid)delete this.registeredObjects[me.cid],this.cidIndexes.splice(D.indexOf(this.cidIndexes,me.cid),1);else{var l=D.indexOf(this.registeredObjects,me);this.registeredObjects.splice(l,1)}return!0}return!1},get:function(){return D.map(this.cidIndexes,function(me){return this.registeredObjects[me]},this).concat(this.registeredObjects)}};var Ce={add:{undo:function(me,l,Me,Ze){me.remove(Me,Ze)},redo:function(me,l,Me,Ze){Ze.index&&(Ze.at=Ze.index),me.add(Me,Ze)},on:function(me,l,Me){return{object:l,before:void 0,after:me,options:D.clone(Me)}}},remove:{undo:function(me,l,Me,Ze){"index"in Ze&&(Ze.at=Ze.index),me.add(l,Ze)},redo:function(me,l,Me,Ze){me.remove(l,Ze)},on:function(me,l,Me){return{object:l,before:me,after:void 0,options:D.clone(Me)}}},change:{undo:function(me,l,Me,Ze){D.isEmpty(l)?D.each(D.keys(Me),me.unset,me):(me.set(l),Ze&&Ze.unsetData&&Ze.unsetData.before&&Ze.unsetData.before.length&&D.each(Ze.unsetData.before,me.unset,me))},redo:function(me,l,Me,Ze){D.isEmpty(Me)?D.each(D.keys(l),me.unset,me):(me.set(Me),Ze&&Ze.unsetData&&Ze.unsetData.after&&Ze.unsetData.after.length&&D.each(Ze.unsetData.after,me.unset,me))},on:function(me,l){var Me=me.changedAttributes(),Ze=D.keys(Me),ut=D.pick(me.previousAttributes(),Ze),$e=D.keys(ut),Ct=(l||(l={})).unsetData={after:[],before:[]};return Ze.length!=$e.length&&(Ze.length>$e.length?D.each(Ze,function(Ke){Ke in ut||Ct.before.push(Ke)},this):D.each($e,function(Ke){Ke in Me||Ct.after.push(Ke)})),{object:me,before:ut,after:Me,options:D.clone(l)}}},reset:{undo:function(me,l,Me){me.reset(l)},redo:function(me,l,Me){me.reset(Me)},on:function(me,l){return{object:me,before:l.previousModels,after:D.clone(me.models)}}}};function Oe(){}function je(me,l,Me,Ze){if("object"==typeof l)return D.each(l,function(ut,$e){2===me?je(me,ut,Me,Ze):je(me,$e,ut,Me)});switch(me){case 0:L(Me,"undo","redo","on")&&D.all(D.pick(Me,"undo","redo","on"),D.isFunction)&&(Ze[l]=Me);break;case 1:Ze[l]&&D.isObject(Me)&&(Ze[l]=D.extend({},Ze[l],Me));break;case 2:delete Ze[l]}return this}Oe.prototype=Ce;var Ue=U.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(me){pe("undo",this.attributes)},redo:function(me){pe("redo",this.attributes)}}),Le=U.Collection.extend({model:Ue,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(me){this.maximumStackLength=me}}),ke=U.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(me){this.stack=new Le,this.objectRegistry=new ee,this.undoTypes=new Oe,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(l,Me){this.stack.setMaxLength(Me)},this),me&&me.track&&this.startTracking(),me&&me.register&&(D.isArray(me.register)||D.isArguments(me.register)?T(this.register,this,me.register):this.register(me.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(me){!function ge(me,l,Me,Ze){if(me.track&&!me.isCurrentlyUndoRedoing&&l in Ze&&function Te(me,l){var Me=me.condition,Ze=typeof Me;return"function"===Ze?!!T(Me,me,l):"boolean"!==Ze||Me}(Ze[l],Me)){var ut=T(Ze[l].on,Ze[l],Me);if(L(ut,"object","before","after")){if(ut.type=l,ut.magicFusionIndex=Y(),ut.undoTypes=Ze,me.pointer<me.length-1)for(var $e=me.length-me.pointer-1;$e--;)me.pop();me.pointer=me.length,me.add(ut),me.length>me.maximumStackLength&&(me.shift(),me.pointer--)}}}(this.stack,me,N(arguments,1),this.undoTypes)},register:function(){te("on",arguments,this._addToStack,this)},unregister:function(){te("off",arguments,this._addToStack,this)},unregisterAll:function(){T(this.unregister,this,this.objectRegistry.get())},undo:function(me){we("undo",this,this.stack,me)},undoAll:function(){we("undo",this,this.stack,!1,!0)},redo:function(me){we("redo",this,this.stack,me)},redoAll:function(){we("redo",this,this.stack,!1,!0)},isAvailable:function(me){var l=this.stack,Me=l.length;switch(me){case"undo":return Me>0&&l.pointer>-1;case"redo":return Me>0&&l.pointer<Me-1;default:return!1}},merge:function(me){for(var l,Me=D.isArray(me)?me:N(arguments);l=Me.pop();)l instanceof ke&&l.stack instanceof Le&&(l.stack=this.stack)},addUndoType:function(me,l){je(0,me,l,this.undoTypes)},changeUndoType:function(me,l){je(1,me,l,this.undoTypes)},removeUndoType:function(me){je(2,me,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return D.extend(ke,{defaults:function(me){D.extend(ke.prototype.defaults,me)},addUndoType:function(me,l){je(0,me,l,Ce)},changeUndoType:function(me,l){je(1,me,l,Ce)},removeUndoType:function(me){je(2,me,void 0,Ce)}}),U.UndoManager=ke})?z.apply(X,H):z)||(m.exports=G)},4193:(m,X,x)=>{var z,H,G;G="object"==typeof self&&self.self===self&&self||"object"==typeof x.g&&x.g.global===x.g&&x.g,z=[x(5706),x(6411),X],H=function(D,U,R){G.Backbone=function(T,N,L,Y){var ee=T.Backbone,te=Array.prototype.slice;N.VERSION="1.4.1",N.$=Y,N.noConflict=function(){return T.Backbone=ee,this},N.emulateHTTP=!1,N.emulateJSON=!1;var pe,we=N.Events={},Te=/\s+/,ge=function(ze,Xe,at,gr,Pt){var mt,Zt=0;if(at&&"object"==typeof at)for((void 0!==gr&&"context"in Pt&&void 0===Pt.context&&(Pt.context=gr),mt=L.keys(at));Zt<mt.length;Zt++)Xe=ge(ze,Xe,mt[Zt],at[mt[Zt]],Pt);else if(at&&Te.test(at))for(mt=at.split(Te);Zt<mt.length;Zt++)Xe=ze(Xe,mt[Zt],gr,Pt);else Xe=ze(Xe,at,gr,Pt);return Xe};we.on=function(ze,Xe,at){return this._events=ge(Ce,this._events||{},ze,Xe,{context:at,ctx:this,listening:pe}),pe&&((this._listeners||(this._listeners={}))[pe.id]=pe,pe.interop=!1),this},we.listenTo=function(ze,Xe,at){if(!ze)return this;var gr=ze._listenId||(ze._listenId=L.uniqueId("l")),Pt=this._listeningTo||(this._listeningTo={}),mt=pe=Pt[gr];mt||(this._listenId||(this._listenId=L.uniqueId("l")),mt=pe=Pt[gr]=new me(this,ze));var Zt=Oe(ze,Xe,at,this);if(pe=void 0,Zt)throw Zt;return mt.interop&&mt.on(Xe,at),this};var Ce=function(ze,Xe,at,gr){if(at){var Pt=ze[Xe]||(ze[Xe]=[]),mt=gr.context,Zt=gr.ctx,ln=gr.listening;ln&&ln.count++,Pt.push({callback:at,context:mt,ctx:mt||Zt,listening:ln})}return ze},Oe=function(ze,Xe,at,gr){try{ze.on(Xe,at,gr)}catch(Pt){return Pt}};we.off=function(ze,Xe,at){return this._events?(this._events=ge(je,this._events,ze,Xe,{context:at,listeners:this._listeners}),this):this},we.stopListening=function(ze,Xe,at){var gr=this._listeningTo;if(!gr)return this;for(var Pt=ze?[ze._listenId]:L.keys(gr),mt=0;mt<Pt.length;mt++){var Zt=gr[Pt[mt]];if(!Zt)break;Zt.obj.off(Xe,at,this),Zt.interop&&Zt.off(Xe,at)}return L.isEmpty(gr)&&(this._listeningTo=void 0),this};var je=function(ze,Xe,at,gr){if(ze){var Pt,mt=gr.context,Zt=gr.listeners,ln=0;if(Xe||mt||at){for(Pt=Xe?[Xe]:L.keys(ze);ln<Pt.length;ln++){var no=ze[Xe=Pt[ln]];if(!no)break;for(var oo=[],Ki=0;Ki<no.length;Ki++){var li=no[Ki];if(at&&at!==li.callback&&at!==li.callback._callback||mt&&mt!==li.context)oo.push(li);else{var ts=li.listening;ts&&ts.off(Xe,at)}}oo.length?ze[Xe]=oo:delete ze[Xe]}return ze}for(Pt=L.keys(Zt);ln<Pt.length;ln++)Zt[Pt[ln]].cleanup()}};we.once=function(ze,Xe,at){var gr=ge(Ue,{},ze,Xe,this.off.bind(this));return"string"==typeof ze&&null==at&&(Xe=void 0),this.on(gr,Xe,at)},we.listenToOnce=function(ze,Xe,at){var gr=ge(Ue,{},Xe,at,this.stopListening.bind(this,ze));return this.listenTo(ze,gr)};var Ue=function(ze,Xe,at,gr){if(at){var Pt=ze[Xe]=L.once(function(){gr(Xe,Pt),at.apply(this,arguments)});Pt._callback=at}return ze};we.trigger=function(ze){if(!this._events)return this;for(var Xe=Math.max(0,arguments.length-1),at=Array(Xe),gr=0;gr<Xe;gr++)at[gr]=arguments[gr+1];return ge(Le,this._events,ze,void 0,at),this};var Le=function(ze,Xe,at,gr){if(ze){var Pt=ze[Xe],mt=ze.all;Pt&&mt&&(mt=mt.slice()),Pt&&ke(Pt,gr),mt&&ke(mt,[Xe].concat(gr))}return ze},ke=function(ze,Xe){var at,gr=-1,Pt=ze.length,mt=Xe[0],Zt=Xe[1],ln=Xe[2];switch(Xe.length){case 0:for(;++gr<Pt;)(at=ze[gr]).callback.call(at.ctx);return;case 1:for(;++gr<Pt;)(at=ze[gr]).callback.call(at.ctx,mt);return;case 2:for(;++gr<Pt;)(at=ze[gr]).callback.call(at.ctx,mt,Zt);return;case 3:for(;++gr<Pt;)(at=ze[gr]).callback.call(at.ctx,mt,Zt,ln);return;default:for(;++gr<Pt;)(at=ze[gr]).callback.apply(at.ctx,Xe);return}},me=function(ze,Xe){this.id=ze._listenId,this.listener=ze,this.obj=Xe,this.interop=!0,this.count=0,this._events=void 0};me.prototype.on=we.on,me.prototype.off=function(ze,Xe){var at;this.interop?(this._events=ge(je,this._events,ze,Xe,{context:void 0,listeners:void 0}),at=!this._events):(this.count--,at=0===this.count),at&&this.cleanup()},me.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},we.bind=we.on,we.unbind=we.off,L.extend(N,we);var l=N.Model=function(ze,Xe){var at=ze||{};Xe||(Xe={}),this.preinitialize.apply(this,arguments),this.cid=L.uniqueId(this.cidPrefix),this.attributes={},Xe.collection&&(this.collection=Xe.collection),Xe.parse&&(at=this.parse(at,Xe)||{});var gr=L.result(this,"defaults");at=L.defaults(L.extend({},gr,at),gr),this.set(at,Xe),this.changed={},this.initialize.apply(this,arguments)};L.extend(l.prototype,we,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(ze){return L.clone(this.attributes)},sync:function(){return N.sync.apply(this,arguments)},get:function(ze){return this.attributes[ze]},escape:function(ze){return L.escape(this.get(ze))},has:function(ze){return null!=this.get(ze)},matches:function(ze){return!!L.iteratee(ze,this)(this.attributes)},set:function(ze,Xe,at){if(null==ze)return this;var gr;if("object"==typeof ze?(gr=ze,at=Xe):(gr={})[ze]=Xe,at||(at={}),!this._validate(gr,at))return!1;var Pt=at.unset,mt=at.silent,Zt=[],ln=this._changing;this._changing=!0,ln||(this._previousAttributes=L.clone(this.attributes),this.changed={});var no=this.attributes,oo=this.changed,Ki=this._previousAttributes;for(var li in gr)L.isEqual(no[li],Xe=gr[li])||Zt.push(li),L.isEqual(Ki[li],Xe)?delete oo[li]:oo[li]=Xe,Pt?delete no[li]:no[li]=Xe;if(this.idAttribute in gr){var ts=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,ts,at)}if(!mt){Zt.length&&(this._pending=at);for(var Nt=0;Nt<Zt.length;Nt++)this.trigger("change:"+Zt[Nt],this,no[Zt[Nt]],at)}if(ln)return this;if(!mt)for(;this._pending;)at=this._pending,this._pending=!1,this.trigger("change",this,at);return this._pending=!1,this._changing=!1,this},unset:function(ze,Xe){return this.set(ze,void 0,L.extend({},Xe,{unset:!0}))},clear:function(ze){var Xe={};for(var at in this.attributes)Xe[at]=void 0;return this.set(Xe,L.extend({},ze,{unset:!0}))},hasChanged:function(ze){return null==ze?!L.isEmpty(this.changed):L.has(this.changed,ze)},changedAttributes:function(ze){if(!ze)return!!this.hasChanged()&&L.clone(this.changed);var Xe,at=this._changing?this._previousAttributes:this.attributes,gr={};for(var Pt in ze){var mt=ze[Pt];L.isEqual(at[Pt],mt)||(gr[Pt]=mt,Xe=!0)}return!!Xe&&gr},previous:function(ze){return null!=ze&&this._previousAttributes?this._previousAttributes[ze]:null},previousAttributes:function(){return L.clone(this._previousAttributes)},fetch:function(ze){ze=L.extend({parse:!0},ze);var Xe=this,at=ze.success;return ze.success=function(gr){var Pt=ze.parse?Xe.parse(gr,ze):gr;if(!Xe.set(Pt,ze))return!1;at&&at.call(ze.context,Xe,gr,ze),Xe.trigger("sync",Xe,gr,ze)},Qr(this,ze),this.sync("read",this,ze)},save:function(ze,Xe,at){var gr;null==ze||"object"==typeof ze?(gr=ze,at=Xe):(gr={})[ze]=Xe;var Pt=(at=L.extend({validate:!0,parse:!0},at)).wait;if(gr&&!Pt){if(!this.set(gr,at))return!1}else if(!this._validate(gr,at))return!1;var mt=this,Zt=at.success,ln=this.attributes;at.success=function(Ki){mt.attributes=ln;var li=at.parse?mt.parse(Ki,at):Ki;if(Pt&&(li=L.extend({},gr,li)),li&&!mt.set(li,at))return!1;Zt&&Zt.call(at.context,mt,Ki,at),mt.trigger("sync",mt,Ki,at)},Qr(this,at),gr&&Pt&&(this.attributes=L.extend({},ln,gr));var no=this.isNew()?"create":at.patch?"patch":"update";"patch"!==no||at.attrs||(at.attrs=gr);var oo=this.sync(no,this,at);return this.attributes=ln,oo},destroy:function(ze){ze=ze?L.clone(ze):{};var Xe=this,at=ze.success,gr=ze.wait,Pt=function(){Xe.stopListening(),Xe.trigger("destroy",Xe,Xe.collection,ze)};ze.success=function(Zt){gr&&Pt(),at&&at.call(ze.context,Xe,Zt,ze),Xe.isNew()||Xe.trigger("sync",Xe,Zt,ze)};var mt=!1;return this.isNew()?L.defer(ze.success):(Qr(this,ze),mt=this.sync("delete",this,ze)),gr||Pt(),mt},url:function(){var ze=L.result(this,"urlRoot")||L.result(this.collection,"url")||Fa();if(this.isNew())return ze;var Xe=this.get(this.idAttribute);return ze.replace(/[^\/]$/,"$&/")+encodeURIComponent(Xe)},parse:function(ze,Xe){return ze},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(ze){return this._validate({},L.extend({},ze,{validate:!0}))},_validate:function(ze,Xe){if(!Xe.validate||!this.validate)return!0;ze=L.extend({},this.attributes,ze);var at=this.validationError=this.validate(ze,Xe)||null;return!at||(this.trigger("invalid",this,at,L.extend(Xe,{validationError:at})),!1)}});var Me=N.Collection=function(ze,Xe){Xe||(Xe={}),this.preinitialize.apply(this,arguments),Xe.model&&(this.model=Xe.model),void 0!==Xe.comparator&&(this.comparator=Xe.comparator),this._reset(),this.initialize.apply(this,arguments),ze&&this.reset(ze,L.extend({silent:!0},Xe))},Ze={add:!0,remove:!0,merge:!0},ut={add:!0,remove:!1},$e=function(ze,Xe,at){at=Math.min(Math.max(at,0),ze.length);var gr,Pt=Array(ze.length-at),mt=Xe.length;for(gr=0;gr<Pt.length;gr++)Pt[gr]=ze[gr+at];for(gr=0;gr<mt;gr++)ze[gr+at]=Xe[gr];for(gr=0;gr<Pt.length;gr++)ze[gr+mt+at]=Pt[gr]};L.extend(Me.prototype,we,{model:l,preinitialize:function(){},initialize:function(){},toJSON:function(ze){return this.map(function(Xe){return Xe.toJSON(ze)})},sync:function(){return N.sync.apply(this,arguments)},add:function(ze,Xe){return this.set(ze,L.extend({merge:!1},Xe,ut))},remove:function(ze,Xe){Xe=L.extend({},Xe);var at=!L.isArray(ze);ze=at?[ze]:ze.slice();var gr=this._removeModels(ze,Xe);return!Xe.silent&&gr.length&&(Xe.changes={added:[],merged:[],removed:gr},this.trigger("update",this,Xe)),at?gr[0]:gr},set:function(ze,Xe){if(null!=ze){(Xe=L.extend({},Ze,Xe)).parse&&!this._isModel(ze)&&(ze=this.parse(ze,Xe)||[]);var at=!L.isArray(ze);ze=at?[ze]:ze.slice();var gr=Xe.at;null!=gr&&(gr=+gr),gr>this.length&&(gr=this.length),gr<0&&(gr+=this.length+1);var Pt,mt,Zt=[],ln=[],no=[],oo=[],Ki={},li=Xe.add,ts=Xe.merge,Nt=Xe.remove,jt=!1,gt=this.comparator&&null==gr&&!1!==Xe.sort,Fr=L.isString(this.comparator)?this.comparator:null;for(mt=0;mt<ze.length;mt++){var tr=this.get(Pt=ze[mt]);if(tr){if(ts&&Pt!==tr){var wt=this._isModel(Pt)?Pt.attributes:Pt;Xe.parse&&(wt=tr.parse(wt,Xe)),tr.set(wt,Xe),no.push(tr),gt&&!jt&&(jt=tr.hasChanged(Fr))}Ki[tr.cid]||(Ki[tr.cid]=!0,Zt.push(tr)),ze[mt]=tr}else li&&(Pt=ze[mt]=this._prepareModel(Pt,Xe))&&(ln.push(Pt),this._addReference(Pt,Xe),Ki[Pt.cid]=!0,Zt.push(Pt))}if(Nt){for(mt=0;mt<this.length;mt++)Ki[(Pt=this.models[mt]).cid]||oo.push(Pt);oo.length&&this._removeModels(oo,Xe)}var St=!1;if(Zt.length&&!gt&&li&&Nt?(St=this.length!==Zt.length||L.some(this.models,function(fn,Ko){return fn!==Zt[Ko]}),this.models.length=0,$e(this.models,Zt,0),this.length=this.models.length):ln.length&&(gt&&(jt=!0),$e(this.models,ln,gr??this.length),this.length=this.models.length),jt&&this.sort({silent:!0}),!Xe.silent){for(mt=0;mt<ln.length;mt++)null!=gr&&(Xe.index=gr+mt),(Pt=ln[mt]).trigger("add",Pt,this,Xe);(jt||St)&&this.trigger("sort",this,Xe),(ln.length||oo.length||no.length)&&(Xe.changes={added:ln,removed:oo,merged:no},this.trigger("update",this,Xe))}return at?ze[0]:ze}},reset:function(ze,Xe){Xe=Xe?L.clone(Xe):{};for(var at=0;at<this.models.length;at++)this._removeReference(this.models[at],Xe);return Xe.previousModels=this.models,this._reset(),ze=this.add(ze,L.extend({silent:!0},Xe)),Xe.silent||this.trigger("reset",this,Xe),ze},push:function(ze,Xe){return this.add(ze,L.extend({at:this.length},Xe))},pop:function(ze){var Xe=this.at(this.length-1);return this.remove(Xe,ze)},unshift:function(ze,Xe){return this.add(ze,L.extend({at:0},Xe))},shift:function(ze){var Xe=this.at(0);return this.remove(Xe,ze)},slice:function(){return te.apply(this.models,arguments)},get:function(ze){if(null!=ze)return this._byId[ze]||this._byId[this.modelId(this._isModel(ze)?ze.attributes:ze,ze.idAttribute)]||ze.cid&&this._byId[ze.cid]},has:function(ze){return null!=this.get(ze)},at:function(ze){return ze<0&&(ze+=this.length),this.models[ze]},where:function(ze,Xe){return this[Xe?"find":"filter"](ze)},findWhere:function(ze){return this.where(ze,!0)},sort:function(ze){var Xe=this.comparator;if(!Xe)throw new Error("Cannot sort a set without a comparator");ze||(ze={});var at=Xe.length;return L.isFunction(Xe)&&(Xe=Xe.bind(this)),1===at||L.isString(Xe)?this.models=this.sortBy(Xe):this.models.sort(Xe),ze.silent||this.trigger("sort",this,ze),this},pluck:function(ze){return this.map(ze+"")},fetch:function(ze){var Xe=(ze=L.extend({parse:!0},ze)).success,at=this;return ze.success=function(gr){at[ze.reset?"reset":"set"](gr,ze),Xe&&Xe.call(ze.context,at,gr,ze),at.trigger("sync",at,gr,ze)},Qr(this,ze),this.sync("read",this,ze)},create:function(ze,Xe){var at=(Xe=Xe?L.clone(Xe):{}).wait;if(!(ze=this._prepareModel(ze,Xe)))return!1;at||this.add(ze,Xe);var gr=this,Pt=Xe.success;return Xe.success=function(mt,Zt,ln){at&&gr.add(mt,ln),Pt&&Pt.call(ln.context,mt,Zt,ln)},ze.save(null,Xe),ze},parse:function(ze,Xe){return ze},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(ze,Xe){return ze[Xe||this.model.prototype.idAttribute||"id"]},values:function(){return new Ke(this,Wt)},keys:function(){return new Ke(this,mr)},entries:function(){return new Ke(this,nr)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(ze,Xe){return this._isModel(ze)?(ze.collection||(ze.collection=this),ze):((Xe=Xe?L.clone(Xe):{}).collection=this,(at=this.model.prototype?new this.model(ze,Xe):this.model(ze,Xe)).validationError?(this.trigger("invalid",this,at.validationError,Xe),!1):at);var at},_removeModels:function(ze,Xe){for(var at=[],gr=0;gr<ze.length;gr++){var Pt=this.get(ze[gr]);if(Pt){var mt=this.indexOf(Pt);this.models.splice(mt,1),this.length--,delete this._byId[Pt.cid];var Zt=this.modelId(Pt.attributes,Pt.idAttribute);null!=Zt&&delete this._byId[Zt],Xe.silent||(Xe.index=mt,Pt.trigger("remove",Pt,this,Xe)),at.push(Pt),this._removeReference(Pt,Xe)}}return at},_isModel:function(ze){return ze instanceof l},_addReference:function(ze,Xe){this._byId[ze.cid]=ze;var at=this.modelId(ze.attributes,ze.idAttribute);null!=at&&(this._byId[at]=ze),ze.on("all",this._onModelEvent,this)},_removeReference:function(ze,Xe){delete this._byId[ze.cid];var at=this.modelId(ze.attributes,ze.idAttribute);null!=at&&delete this._byId[at],this===ze.collection&&delete ze.collection,ze.off("all",this._onModelEvent,this)},_onModelEvent:function(ze,Xe,at,gr){if(Xe){if(("add"===ze||"remove"===ze)&&at!==this)return;if("destroy"===ze&&this.remove(Xe,gr),"changeId"===ze){var Pt=this.modelId(Xe.previousAttributes(),Xe.idAttribute),mt=this.modelId(Xe.attributes,Xe.idAttribute);null!=Pt&&delete this._byId[Pt],null!=mt&&(this._byId[mt]=Xe)}}this.trigger.apply(this,arguments)}});var Ct="function"==typeof Symbol&&Symbol.iterator;Ct&&(Me.prototype[Ct]=Me.prototype.values);var Ke=function(ze,Xe){this._collection=ze,this._kind=Xe,this._index=0},Wt=1,mr=2,nr=3;Ct&&(Ke.prototype[Ct]=function(){return this}),Ke.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var ze,Xe=this._collection.at(this._index);if(this._index++,this._kind===Wt)ze=Xe;else{var at=this._collection.modelId(Xe.attributes,Xe.idAttribute);ze=this._kind===mr?at:[at,Xe]}return{value:ze,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var Kr=N.View=function(ze){this.cid=L.uniqueId("view"),this.preinitialize.apply(this,arguments),L.extend(this,L.pick(ze,Kn)),this._ensureElement(),this.initialize.apply(this,arguments)},Pn=/^(\S+)\s*(.*)$/,Kn=["model","collection","el","id","attributes","className","tagName","events"];L.extend(Kr.prototype,we,{tagName:"div",$:function(ze){return this.$el.find(ze)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(ze){return this.undelegateEvents(),this._setElement(ze),this.delegateEvents(),this},_setElement:function(ze){this.$el=ze instanceof N.$?ze:N.$(ze),this.el=this.$el[0]},delegateEvents:function(ze){if(ze||(ze=L.result(this,"events")),!ze)return this;for(var Xe in this.undelegateEvents(),ze){var at=ze[Xe];if(L.isFunction(at)||(at=this[at]),at){var gr=Xe.match(Pn);this.delegate(gr[1],gr[2],at.bind(this))}}return this},delegate:function(ze,Xe,at){return this.$el.on(ze+".delegateEvents"+this.cid,Xe,at),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(ze,Xe,at){return this.$el.off(ze+".delegateEvents"+this.cid,Xe,at),this},_createElement:function(ze){return document.createElement(ze)},_ensureElement:function(){if(this.el)this.setElement(L.result(this,"el"));else{var ze=L.extend({},L.result(this,"attributes"));this.id&&(ze.id=L.result(this,"id")),this.className&&(ze.class=L.result(this,"className")),this.setElement(this._createElement(L.result(this,"tagName"))),this._setAttributes(ze)}},_setAttributes:function(ze){this.$el.attr(ze)}});var mo=function(ze,Xe,at,gr){L.each(at,function(Pt,mt){Xe[mt]&&(ze.prototype[mt]=function(ze,Xe,at,gr){switch(Xe){case 1:return function(){return ze[at](this[gr])};case 2:return function(Pt){return ze[at](this[gr],Pt)};case 3:return function(Pt,mt){return ze[at](this[gr],No(Pt,this),mt)};case 4:return function(Pt,mt,Zt){return ze[at](this[gr],No(Pt,this),mt,Zt)};default:return function(){var Pt=te.call(arguments);return Pt.unshift(this[gr]),ze[at].apply(ze,Pt)}}}(Xe,Pt,mt,gr))})},No=function(ze,Xe){return L.isFunction(ze)?ze:L.isObject(ze)&&!Xe._isModel(ze)?Di(ze):L.isString(ze)?function(at){return at.get(ze)}:ze},Di=function(ze){var Xe=L.matches(ze);return function(at){return Xe(at.attributes)}};L.each([[Me,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[l,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(ze){var Xe=ze[0],at=ze[1],gr=ze[2];Xe.mixin=function(Pt){var mt=L.reduce(L.functions(Pt),function(Zt,ln){return Zt[ln]=0,Zt},{});mo(Xe,Pt,mt,gr)},mo(Xe,L,at,gr)}),N.sync=function(ze,Xe,at){var gr=Wn[ze];L.defaults(at||(at={}),{emulateHTTP:N.emulateHTTP,emulateJSON:N.emulateJSON});var Pt={type:gr,dataType:"json"};if(at.url||(Pt.url=L.result(Xe,"url")||Fa()),null!=at.data||!Xe||"create"!==ze&&"update"!==ze&&"patch"!==ze||(Pt.contentType="application/json",Pt.data=JSON.stringify(at.attrs||Xe.toJSON(at))),at.emulateJSON&&(Pt.contentType="application/x-www-form-urlencoded",Pt.data=Pt.data?{model:Pt.data}:{}),at.emulateHTTP&&("PUT"===gr||"DELETE"===gr||"PATCH"===gr)){Pt.type="POST",at.emulateJSON&&(Pt.data._method=gr);var mt=at.beforeSend;at.beforeSend=function(no){if(no.setRequestHeader("X-HTTP-Method-Override",gr),mt)return mt.apply(this,arguments)}}"GET"===Pt.type||at.emulateJSON||(Pt.processData=!1);var Zt=at.error;at.error=function(no,oo,Ki){at.textStatus=oo,at.errorThrown=Ki,Zt&&Zt.call(at.context,no,oo,Ki)};var ln=at.xhr=N.ajax(L.extend(Pt,at));return Xe.trigger("request",Xe,ln,at),ln};var Wn={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};N.ajax=function(){return N.$.ajax.apply(N.$,arguments)};var an=N.Router=function(ze){ze||(ze={}),this.preinitialize.apply(this,arguments),ze.routes&&(this.routes=ze.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},lr=/\((.*?)\)/g,Pr=/(\(\?)?:\w+/g,Mn=/\*\w+/g,dn=/[\-{}\[\]+?.,\\\^$|#\s]/g;L.extend(an.prototype,we,{preinitialize:function(){},initialize:function(){},route:function(ze,Xe,at){L.isRegExp(ze)||(ze=this._routeToRegExp(ze)),L.isFunction(Xe)&&(at=Xe,Xe=""),at||(at=this[Xe]);var gr=this;return N.history.route(ze,function(Pt){var mt=gr._extractParameters(ze,Pt);!1!==gr.execute(at,mt,Xe)&&(gr.trigger.apply(gr,["route:"+Xe].concat(mt)),gr.trigger("route",Xe,mt),N.history.trigger("route",gr,Xe,mt))}),this},execute:function(ze,Xe,at){ze&&ze.apply(this,Xe)},navigate:function(ze,Xe){return N.history.navigate(ze,Xe),this},_bindRoutes:function(){if(this.routes){this.routes=L.result(this,"routes");for(var ze,Xe=L.keys(this.routes);null!=(ze=Xe.pop());)this.route(ze,this.routes[ze])}},_routeToRegExp:function(ze){return ze=ze.replace(dn,"\\$&").replace(lr,"(?:$1)?").replace(Pr,function(Xe,at){return at?Xe:"([^/?]+)"}).replace(Mn,"([^?]*?)"),new RegExp("^"+ze+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(ze,Xe){var at=ze.exec(Xe).slice(1);return L.map(at,function(gr,Pt){return Pt===at.length-1?gr||null:gr?decodeURIComponent(gr):null})}});var sn=N.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},kn=/^[#\/]|\s+$/g,xo=/^\/+|\/+$/g,Vo=/#.*$/;sn.started=!1,L.extend(sn.prototype,we,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(ze){return decodeURI(ze.replace(/%25/g,"%2525"))},getSearch:function(){var ze=this.location.href.replace(/#.*/,"").match(/\?.+/);return ze?ze[0]:""},getHash:function(ze){var Xe=(ze||this).location.href.match(/#(.*)$/);return Xe?Xe[1]:""},getPath:function(){var ze=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===ze.charAt(0)?ze.slice(1):ze},getFragment:function(ze){return null==ze&&(ze=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),ze.replace(kn,"")},start:function(ze){if(sn.started)throw new Error("Backbone.history has already been started");if(sn.started=!0,this.options=L.extend({root:"/"},this.options,ze),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(xo,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var Xe=this.root.slice(0,-1)||"/";return this.location.replace(Xe+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var at=document.body,gr=at.insertBefore(this.iframe,at.firstChild).contentWindow;gr.document.open(),gr.document.close(),gr.location.hash="#"+this.fragment}var Pt=window.addEventListener||function(mt,Zt){return attachEvent("on"+mt,Zt)};if(this._usePushState?Pt("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?Pt("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var ze=window.removeEventListener||function(Xe,at){return detachEvent("on"+Xe,at)};this._usePushState?ze("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&ze("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),sn.started=!1},route:function(ze,Xe){this.handlers.unshift({route:ze,callback:Xe})},checkUrl:function(ze){var Xe=this.getFragment();if(Xe===this.fragment&&this.iframe&&(Xe=this.getHash(this.iframe.contentWindow)),Xe===this.fragment)return!1;this.iframe&&this.navigate(Xe),this.loadUrl()},loadUrl:function(ze){return!!this.matchRoot()&&(ze=this.fragment=this.getFragment(ze),L.some(this.handlers,function(Xe){if(Xe.route.test(ze))return Xe.callback(ze),!0}))},navigate:function(ze,Xe){if(!sn.started)return!1;Xe&&!0!==Xe||(Xe={trigger:!!Xe}),ze=this.getFragment(ze||"");var at=this.root;""!==ze&&"?"!==ze.charAt(0)||(at=at.slice(0,-1)||"/");var gr=at+ze;ze=ze.replace(Vo,"");var Pt=this.decodeFragment(ze);if(this.fragment!==Pt){if(this.fragment=Pt,this._usePushState)this.history[Xe.replace?"replaceState":"pushState"]({},document.title,gr);else{if(!this._wantsHashChange)return this.location.assign(gr);if(this._updateHash(this.location,ze,Xe.replace),this.iframe&&ze!==this.getHash(this.iframe.contentWindow)){var mt=this.iframe.contentWindow;Xe.replace||(mt.document.open(),mt.document.close()),this._updateHash(mt.location,ze,Xe.replace)}}return Xe.trigger?this.loadUrl(ze):void 0}},_updateHash:function(ze,Xe,at){if(at){var gr=ze.href.replace(/(javascript:|#).*$/,"");ze.replace(gr+"#"+Xe)}else ze.hash="#"+Xe}}),N.history=new sn,l.extend=Me.extend=an.extend=Kr.extend=sn.extend=function(ze,Xe){var at,gr=this;return at=ze&&L.has(ze,"constructor")?ze.constructor:function(){return gr.apply(this,arguments)},L.extend(at,gr,Xe),at.prototype=L.create(gr.prototype,ze),at.prototype.constructor=at,at.__super__=gr.prototype,at};var Fa=function(){throw new Error('A "url" property or function must be specified')},Qr=function(ze,Xe){var at=Xe.error;Xe.error=function(gr){at&&at.call(Xe.context,ze,gr,Xe),ze.trigger("error",ze,gr,Xe)}};return N}(G,R,D,U)}.apply(X,z),void 0===H||(m.exports=H)},3640:(m,X,x)=>{!function(z){z.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(G,D){return/^[;{}]$/.test(D)}}),z.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(G,D,U,R){return this.jsonMode?/^[\[,{]$/.test(D)||/^}/.test(U):(";"!=D||!R.lexical||")"!=R.lexical.type)&&/^[;{}]$/.test(D)&&!/^;/.test(U)}});var H=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;z.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(G,D,U,R){var T=!1;return"html"==this.configuration&&(T=!!R.context&&H.test(R.context.tagName)),!T&&("tag"==G&&/>$/.test(D)&&R.context||/^</.test(U))}}),z.defineExtension("commentRange",function(G,D,U){var R=this,T=z.innerMode(R.getMode(),R.getTokenAt(D).state).mode;R.operation(function(){if(G)R.replaceRange(T.commentEnd,U),R.replaceRange(T.commentStart,D),D.line==U.line&&D.ch==U.ch&&R.setCursor(D.line,D.ch+T.commentStart.length);else{var N=R.getRange(D,U),L=N.indexOf(T.commentStart),Y=N.lastIndexOf(T.commentEnd);L>-1&&Y>-1&&Y>L&&(N=N.substr(0,L)+N.substring(L+T.commentStart.length,Y)+N.substr(Y+T.commentEnd.length)),R.replaceRange(N,D,U)}})}),z.defineExtension("autoIndentRange",function(G,D){var U=this;this.operation(function(){for(var R=G.line;R<=D.line;R++)U.indentLine(R,"smart")})}),z.defineExtension("autoFormatRange",function(G,D){var U=this,R=U.getMode(),T=U.getRange(G,D).split("\n"),N=z.copyState(R,U.getTokenAt(G).state),L=U.getOption("tabSize"),Y="",ee=0,te=0===G.ch;function pe(){Y+="\n",te=!0,++ee}for(var we=0;we<T.length;++we){for(var Te=new z.StringStream(T[we],L);!Te.eol();){var ge=z.innerMode(R,N),Ce=R.token(Te,N),Oe=Te.current();Te.start=Te.pos,te&&!/\S/.test(Oe)||(Y+=Oe,te=!1),!te&&ge.mode.newlineAfterToken&&ge.mode.newlineAfterToken(Ce,Oe,Te.string.slice(Te.pos)||T[we+1]||"",ge.state)&&pe()}!Te.pos&&R.blankLine&&R.blankLine(N),!te&&we<T.length-1&&pe()}U.operation(function(){U.replaceRange(Y,G,D);for(var je=G.line+1,Ue=G.line+ee;je<=Ue;++je)U.indentLine(je,"smart");U.setSelection(G,U.getCursor(!1))})})}(x(4408))},4408:function(m){m.exports=function(){"use strict";var X=navigator.userAgent,x=navigator.platform,z=/gecko\/\d/i.test(X),H=/MSIE \d/.test(X),G=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(X),D=/Edge\/(\d+)/.exec(X),U=H||G||D,R=U&&(H?document.documentMode||6:+(D||G)[1]),T=!D&&/WebKit\//.test(X),N=T&&/Qt\/\d+\.\d+/.test(X),L=!D&&/Chrome\//.test(X),Y=/Opera\//.test(X),ee=/Apple Computer/.test(navigator.vendor),te=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(X),pe=/PhantomJS/.test(X),we=ee&&(/Mobile\/\w+/.test(X)||navigator.maxTouchPoints>2),Te=/Android/.test(X),ge=we||Te||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(X),Ce=we||/Mac/.test(x),Oe=/\bCrOS\b/.test(X),je=/win/i.test(x),Ue=Y&&X.match(/Version\/(\d*\.\d*)/);Ue&&(Ue=Number(Ue[1])),Ue&&Ue>=15&&(Y=!1,T=!0);var Le=Ce&&(N||Y&&(null==Ue||Ue<12.11)),ke=z||U&&R>=9;function me(f){return new RegExp("(^|\\s)"+f+"(?:$|\\s)\\s*")}var l,Me=function(f,v){var k=f.className,P=me(v).exec(k);if(P){var Z=k.slice(P.index+P[0].length);f.className=k.slice(0,P.index)+(Z?P[1]+Z:"")}};function Ze(f){for(var v=f.childNodes.length;v>0;--v)f.removeChild(f.firstChild);return f}function ut(f,v){return Ze(f).appendChild(v)}function $e(f,v,k,P){var Z=document.createElement(f);if(k&&(Z.className=k),P&&(Z.style.cssText=P),"string"==typeof v)Z.appendChild(document.createTextNode(v));else if(v)for(var he=0;he<v.length;++he)Z.appendChild(v[he]);return Z}function Ct(f,v,k,P){var Z=$e(f,v,k,P);return Z.setAttribute("role","presentation"),Z}function Ke(f,v){if(3==v.nodeType&&(v=v.parentNode),f.contains)return f.contains(v);do{if(11==v.nodeType&&(v=v.host),v==f)return!0}while(v=v.parentNode)}function Wt(){var f;try{f=document.activeElement}catch{f=document.body||null}for(;f&&f.shadowRoot&&f.shadowRoot.activeElement;)f=f.shadowRoot.activeElement;return f}function mr(f,v){var k=f.className;me(v).test(k)||(f.className+=(k?" ":"")+v)}function nr(f,v){for(var k=f.split(" "),P=0;P<k.length;P++)k[P]&&!me(k[P]).test(v)&&(v+=" "+k[P]);return v}l=document.createRange?function(f,v,k,P){var Z=document.createRange();return Z.setEnd(P||f,k),Z.setStart(f,v),Z}:function(f,v,k){var P=document.body.createTextRange();try{P.moveToElementText(f.parentNode)}catch{return P}return P.collapse(!0),P.moveEnd("character",k),P.moveStart("character",v),P};var Kr=function(f){f.select()};function Pn(f){var v=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,v)}}function Kn(f,v,k){for(var P in v||(v={}),f)!f.hasOwnProperty(P)||!1===k&&v.hasOwnProperty(P)||(v[P]=f[P]);return v}function Mo(f,v,k,P,Z){null==v&&-1==(v=f.search(/[^\s\u00a0]/))&&(v=f.length);for(var he=P||0,Fe=Z||0;;){var Be=f.indexOf("\t",he);if(Be<0||Be>=v)return Fe+(v-he);Fe+=Be-he,Fe+=k-Fe%k,he=Be+1}}we?Kr=function(f){f.selectionStart=0,f.selectionEnd=f.value.length}:U&&(Kr=function(f){try{f.select()}catch{}});var mo=function(){this.id=null,this.f=null,this.time=0,this.handler=Pn(this.onTimeout,this)};function No(f,v){for(var k=0;k<f.length;++k)if(f[k]==v)return k;return-1}mo.prototype.onTimeout=function(f){f.id=0,f.time<=+new Date?f.f():setTimeout(f.handler,f.time-+new Date)},mo.prototype.set=function(f,v){this.f=v;var k=+new Date+f;(!this.id||k<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,f),this.time=k)};var Di=50,ci={toString:function(){return"CodeMirror.Pass"}},zn={scroll:!1},Wn={origin:"*mouse"},an={origin:"+move"};function lr(f,v,k){for(var P=0,Z=0;;){var he=f.indexOf("\t",P);-1==he&&(he=f.length);var Fe=he-P;if(he==f.length||Z+Fe>=v)return P+Math.min(Fe,v-Z);if(Z+=he-P,P=he+1,(Z+=k-Z%k)>=v)return P}}var Pr=[""];function Mn(f){for(;Pr.length<=f;)Pr.push(dn(Pr)+" ");return Pr[f]}function dn(f){return f[f.length-1]}function sn(f,v){for(var k=[],P=0;P<f.length;P++)k[P]=v(f[P],P);return k}function xo(){}function Vo(f,v){var k;return Object.create?k=Object.create(f):(xo.prototype=f,k=new xo),v&&Kn(v,k),k}var aa=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Fa(f){return/\w/.test(f)||f>"\x80"&&(f.toUpperCase()!=f.toLowerCase()||aa.test(f))}function Qr(f,v){return v?!!(v.source.indexOf("\\w")>-1&&Fa(f))||v.test(f):Fa(f)}function ze(f){for(var v in f)if(f.hasOwnProperty(v)&&f[v])return!1;return!0}var Xe=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function at(f){return f.charCodeAt(0)>=768&&Xe.test(f)}function gr(f,v,k){for(;(k<0?v>0:v<f.length)&&at(f.charAt(v));)v+=k;return v}function Pt(f,v,k){for(var P=v>k?-1:1;;){if(v==k)return v;var Z=(v+k)/2,he=P<0?Math.ceil(Z):Math.floor(Z);if(he==v)return f(he)?v:k;f(he)?k=he:v=he+P}}var Zt=null;function ln(f,v,k){var P;Zt=null;for(var Z=0;Z<f.length;++Z){var he=f[Z];if(he.from<v&&he.to>v)return Z;he.to==v&&(he.from!=he.to&&"before"==k?P=Z:Zt=Z),he.from==v&&(he.from!=he.to&&"before"!=k?P=Z:Zt=Z)}return P??Zt}var no=function(){function k(ft){return ft<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(ft):1424<=ft&&ft<=1524?"R":1536<=ft&&ft<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(ft-1536):1774<=ft&&ft<=2220?"r":8192<=ft&&ft<=8203?"w":8204==ft?"b":"L"}var P=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Z=/[stwN]/,he=/[LRr]/,Fe=/[Lb1n]/,Be=/[1n]/;function ot(ft,jr,Rr){this.level=ft,this.from=jr,this.to=Rr}return function(ft,jr){var Rr="ltr"==jr?"L":"R";if(0==ft.length||"ltr"==jr&&!P.test(ft))return!1;for(var _n=ft.length,Tn=[],wo=0;wo<_n;++wo)Tn.push(k(ft.charCodeAt(wo)));for(var ni=0,Mi=Rr;ni<_n;++ni){var sa=Tn[ni];"m"==sa?Tn[ni]=Mi:Mi=sa}for(var Ta=0,Fi=Rr;Ta<_n;++Ta){var fa=Tn[Ta];"1"==fa&&"r"==Fi?Tn[Ta]="n":he.test(fa)&&(Fi=fa,"r"==fa&&(Tn[Ta]="R"))}for(var zi=1,na=Tn[0];zi<_n-1;++zi){var Os=Tn[zi];"+"==Os&&"1"==na&&"1"==Tn[zi+1]?Tn[zi]="1":","!=Os||na!=Tn[zi+1]||"1"!=na&&"n"!=na||(Tn[zi]=na),na=Os}for(var _s=0;_s<_n;++_s){var nu=Tn[_s];if(","==nu)Tn[_s]="N";else if("%"==nu){var Hl=void 0;for(Hl=_s+1;Hl<_n&&"%"==Tn[Hl];++Hl);for(var ou=_s&&"!"==Tn[_s-1]||Hl<_n&&"1"==Tn[Hl]?"1":"N",Qu=_s;Qu<Hl;++Qu)Tn[Qu]=ou;_s=Hl-1}}for(var bc=0,Zu=Rr;bc<_n;++bc){var ec=Tn[bc];"L"==Zu&&"1"==ec?Tn[bc]="L":he.test(ec)&&(Zu=ec)}for(var Fl=0;Fl<_n;++Fl)if(Z.test(Tn[Fl])){var fc=void 0;for(fc=Fl+1;fc<_n&&Z.test(Tn[fc]);++fc);for(var wc="L"==(Fl?Tn[Fl-1]:Rr),bd=wc==("L"==(fc<_n?Tn[fc]:Rr))?wc?"L":"R":Rr,ep=Fl;ep<fc;++ep)Tn[ep]=bd;Fl=fc-1}for(var wd,Pu=[],iu=0;iu<_n;)if(Fe.test(Tn[iu])){var Np=iu;for(++iu;iu<_n&&Fe.test(Tn[iu]);++iu);Pu.push(new ot(0,Np,iu))}else{var Up=iu,of=Pu.length,uh="rtl"==jr?1:0;for(++iu;iu<_n&&"L"!=Tn[iu];++iu);for(var au=Up;au<iu;)if(Be.test(Tn[au])){Up<au&&(Pu.splice(of,0,new ot(1,Up,au)),of+=uh);var Um=au;for(++au;au<iu&&Be.test(Tn[au]);++au);Pu.splice(of,0,new ot(2,Um,au)),of+=uh,Up=au}else++au;Up<iu&&Pu.splice(of,0,new ot(1,Up,iu))}return"ltr"==jr&&(1==Pu[0].level&&(wd=ft.match(/^\s+/))&&(Pu[0].from=wd[0].length,Pu.unshift(new ot(0,0,wd[0].length))),1==dn(Pu).level&&(wd=ft.match(/\s+$/))&&(dn(Pu).to-=wd[0].length,Pu.push(new ot(0,_n-wd[0].length,_n)))),"rtl"==jr?Pu.reverse():Pu}}();function oo(f,v){var k=f.order;return null==k&&(k=f.order=no(f.text,v)),k}var Ki=[],li=function(f,v,k){if(f.addEventListener)f.addEventListener(v,k,!1);else if(f.attachEvent)f.attachEvent("on"+v,k);else{var P=f._handlers||(f._handlers={});P[v]=(P[v]||Ki).concat(k)}};function ts(f,v){return f._handlers&&f._handlers[v]||Ki}function Nt(f,v,k){if(f.removeEventListener)f.removeEventListener(v,k,!1);else if(f.detachEvent)f.detachEvent("on"+v,k);else{var P=f._handlers,Z=P&&P[v];if(Z){var he=No(Z,k);he>-1&&(P[v]=Z.slice(0,he).concat(Z.slice(he+1)))}}}function jt(f,v){var k=ts(f,v);if(k.length)for(var P=Array.prototype.slice.call(arguments,2),Z=0;Z<k.length;++Z)k[Z].apply(null,P)}function gt(f,v,k){return"string"==typeof v&&(v={type:v,preventDefault:function(){this.defaultPrevented=!0}}),jt(f,k||v.type,f,v),fn(v)||v.codemirrorIgnore}function Fr(f){var v=f._handlers&&f._handlers.cursorActivity;if(v)for(var k=f.curOp.cursorActivityHandlers||(f.curOp.cursorActivityHandlers=[]),P=0;P<v.length;++P)-1==No(k,v[P])&&k.push(v[P])}function tr(f,v){return ts(f,v).length>0}function wt(f){f.prototype.on=function(v,k){li(this,v,k)},f.prototype.off=function(v,k){Nt(this,v,k)}}function St(f){f.preventDefault?f.preventDefault():f.returnValue=!1}function vr(f){f.stopPropagation?f.stopPropagation():f.cancelBubble=!0}function fn(f){return null!=f.defaultPrevented?f.defaultPrevented:0==f.returnValue}function Ko(f){St(f),vr(f)}function Ro(f){return f.target||f.srcElement}function Ln(f){var v=f.which;return null==v&&(1&f.button?v=1:2&f.button?v=3:4&f.button&&(v=2)),Ce&&f.ctrlKey&&1==v&&(v=3),v}var yr,kr,or=function(){if(U&&R<9)return!1;var f=$e("div");return"draggable"in f||"dragDrop"in f}();function Tr(f){if(null==yr){var v=$e("span","\u200b");ut(f,$e("span",[v,document.createTextNode("x")])),0!=f.firstChild.offsetHeight&&(yr=v.offsetWidth<=1&&v.offsetHeight>2&&!(U&&R<8))}var k=yr?$e("span","\u200b"):$e("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return k.setAttribute("cm-text",""),k}function ht(f){if(null!=kr)return kr;var v=ut(f,document.createTextNode("A\u062eA")),k=l(v,0,1).getBoundingClientRect(),P=l(v,1,2).getBoundingClientRect();return Ze(f),!(!k||k.left==k.right)&&(kr=P.right-k.right<3)}var Lt,Dr=3!="\n\nb".split(/\n/).length?function(f){for(var v=0,k=[],P=f.length;v<=P;){var Z=f.indexOf("\n",v);-1==Z&&(Z=f.length);var he=f.slice(v,"\r"==f.charAt(Z-1)?Z-1:Z),Fe=he.indexOf("\r");-1!=Fe?(k.push(he.slice(0,Fe)),v+=Fe+1):(k.push(he),v=Z+1)}return k}:function(f){return f.split(/\r\n?|\n/)},hn=window.getSelection?function(f){try{return f.selectionStart!=f.selectionEnd}catch{return!1}}:function(f){var v;try{v=f.ownerDocument.selection.createRange()}catch{}return!(!v||v.parentElement()!=f)&&0!=v.compareEndPoints("StartToEnd",v)},Un="oncopy"in(Lt=$e("div"))||(Lt.setAttribute("oncopy","return;"),"function"==typeof Lt.oncopy),Yn=null,pn={},Xt={};function Ft(f,v){arguments.length>2&&(v.dependencies=Array.prototype.slice.call(arguments,2)),pn[f]=v}function Do(f){if("string"==typeof f&&Xt.hasOwnProperty(f))f=Xt[f];else if(f&&"string"==typeof f.name&&Xt.hasOwnProperty(f.name)){var v=Xt[f.name];"string"==typeof v&&(v={name:v}),(f=Vo(v,f)).name=v.name}else{if("string"==typeof f&&/^[\w\-]+\/[\w\-]+\+xml$/.test(f))return Do("application/xml");if("string"==typeof f&&/^[\w\-]+\/[\w\-]+\+json$/.test(f))return Do("application/json")}return"string"==typeof f?{name:f}:f||{name:"null"}}function Jt(f,v){v=Do(v);var k=pn[v.name];if(!k)return Jt(f,"text/plain");var P=k(f,v);if(Jn.hasOwnProperty(v.name)){var Z=Jn[v.name];for(var he in Z)Z.hasOwnProperty(he)&&(P.hasOwnProperty(he)&&(P["_"+he]=P[he]),P[he]=Z[he])}if(P.name=v.name,v.helperType&&(P.helperType=v.helperType),v.modeProps)for(var Fe in v.modeProps)P[Fe]=v.modeProps[Fe];return P}var Jn={};function Qn(f,v){Kn(v,Jn.hasOwnProperty(f)?Jn[f]:Jn[f]={})}function Io(f,v){if(!0===v)return v;if(f.copyState)return f.copyState(v);var k={};for(var P in v){var Z=v[P];Z instanceof Array&&(Z=Z.concat([])),k[P]=Z}return k}function ri(f,v){for(var k;f.innerMode&&(k=f.innerMode(v))&&k.mode!=f;)v=k.state,f=k.mode;return k||{mode:f,state:v}}function Ka(f,v,k){return!f.startState||f.startState(v,k)}var Ei=function(f,v,k){this.pos=this.start=0,this.string=f,this.tabSize=v||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=k};function ui(f,v){if((v-=f.first)<0||v>=f.size)throw new Error("There is no line "+(v+f.first)+" in the document.");for(var k=f;!k.lines;)for(var P=0;;++P){var Z=k.children[P],he=Z.chunkSize();if(v<he){k=Z;break}v-=he}return k.lines[v]}function ns(f,v,k){var P=[],Z=v.line;return f.iter(v.line,k.line+1,function(he){var Fe=he.text;Z==k.line&&(Fe=Fe.slice(0,k.ch)),Z==v.line&&(Fe=Fe.slice(v.ch)),P.push(Fe),++Z}),P}function nl(f,v,k){var P=[];return f.iter(v,k,function(Z){P.push(Z.text)}),P}function Bs(f,v){var k=v-f.height;if(k)for(var P=f;P;P=P.parent)P.height+=k}function To(f){if(null==f.parent)return null;for(var v=f.parent,k=No(v.lines,f),P=v.parent;P;v=P,P=P.parent)for(var Z=0;P.children[Z]!=v;++Z)k+=P.children[Z].chunkSize();return k+v.first}function rs(f,v){var k=f.first;e:do{for(var P=0;P<f.children.length;++P){var Z=f.children[P],he=Z.height;if(v<he){f=Z;continue e}v-=he,k+=Z.chunkSize()}return k}while(!f.lines);for(var Fe=0;Fe<f.lines.length;++Fe){var Be=f.lines[Fe].height;if(v<Be)break;v-=Be}return k+Fe}function el(f,v){return v>=f.first&&v<f.first+f.size}function gc(f,v){return String(f.lineNumberFormatter(v+f.firstLineNumber))}function Qo(f,v,k){if(void 0===k&&(k=null),!(this instanceof Qo))return new Qo(f,v,k);this.line=f,this.ch=v,this.sticky=k}function Ba(f,v){return f.line-v.line||f.ch-v.ch}function Et(f,v){return f.sticky==v.sticky&&0==Ba(f,v)}function Mr(f){return Qo(f.line,f.ch)}function Ao(f,v){return Ba(f,v)<0?v:f}function oa(f,v){return Ba(f,v)<0?f:v}function ba(f,v){return Math.max(f.first,Math.min(v,f.first+f.size-1))}function Vi(f,v){if(v.line<f.first)return Qo(f.first,0);var k=f.first+f.size-1;return v.line>k?Qo(k,ui(f,k).text.length):function hl(f,v){var k=f.ch;return null==k||k>v?Qo(f.line,v):k<0?Qo(f.line,0):f}(v,ui(f,v.line).text.length)}function ul(f,v){for(var k=[],P=0;P<v.length;P++)k[P]=Vi(f,v[P]);return k}Ei.prototype.eol=function(){return this.pos>=this.string.length},Ei.prototype.sol=function(){return this.pos==this.lineStart},Ei.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ei.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ei.prototype.eat=function(f){var v=this.string.charAt(this.pos);if("string"==typeof f?v==f:v&&(f.test?f.test(v):f(v)))return++this.pos,v},Ei.prototype.eatWhile=function(f){for(var v=this.pos;this.eat(f););return this.pos>v},Ei.prototype.eatSpace=function(){for(var f=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>f},Ei.prototype.skipToEnd=function(){this.pos=this.string.length},Ei.prototype.skipTo=function(f){var v=this.string.indexOf(f,this.pos);if(v>-1)return this.pos=v,!0},Ei.prototype.backUp=function(f){this.pos-=f},Ei.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Mo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Mo(this.string,this.lineStart,this.tabSize):0)},Ei.prototype.indentation=function(){return Mo(this.string,null,this.tabSize)-(this.lineStart?Mo(this.string,this.lineStart,this.tabSize):0)},Ei.prototype.match=function(f,v,k){if("string"!=typeof f){var P=this.string.slice(this.pos).match(f);return P&&P.index>0?null:(P&&!1!==v&&(this.pos+=P[0].length),P)}var Z=function(he){return k?he.toLowerCase():he};if(Z(this.string.substr(this.pos,f.length))==Z(f))return!1!==v&&(this.pos+=f.length),!0},Ei.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ei.prototype.hideFirstChars=function(f,v){this.lineStart+=f;try{return v()}finally{this.lineStart-=f}},Ei.prototype.lookAhead=function(f){var v=this.lineOracle;return v&&v.lookAhead(f)},Ei.prototype.baseToken=function(){var f=this.lineOracle;return f&&f.baseToken(this.pos)};var Oc=function(f,v){this.state=f,this.lookAhead=v},Yl=function(f,v,k,P){this.state=v,this.doc=f,this.line=k,this.maxLookAhead=P||0,this.baseTokens=null,this.baseTokenPos=1};function Wc(f,v,k,P){var Z=[f.state.modeGen],he={};ad(f,v.text,f.doc.mode,k,function(ft,jr){return Z.push(ft,jr)},he,P);for(var Fe=k.state,Be=function(ft){k.baseTokens=Z;var jr=f.state.overlays[ft],Rr=1,_n=0;k.state=!0,ad(f,v.text,jr.mode,k,function(Tn,wo){for(var ni=Rr;_n<Tn;){var Mi=Z[Rr];Mi>Tn&&Z.splice(Rr,1,Tn,Z[Rr+1],Mi),Rr+=2,_n=Math.min(Tn,Mi)}if(wo)if(jr.opaque)Z.splice(ni,Rr-ni,Tn,"overlay "+wo),Rr=ni+2;else for(;ni<Rr;ni+=2){var sa=Z[ni+1];Z[ni+1]=(sa?sa+" ":"")+"overlay "+wo}},he),k.state=Fe,k.baseTokens=null,k.baseTokenPos=1},ot=0;ot<f.state.overlays.length;++ot)Be(ot);return{styles:Z,classes:he.bgClass||he.textClass?he:null}}function Vd(f,v,k){if(!v.styles||v.styles[0]!=f.state.modeGen){var P=Od(f,To(v)),Z=v.text.length>f.options.maxHighlightLength&&Io(f.doc.mode,P.state),he=Wc(f,v,P);Z&&(P.state=Z),v.stateAfter=P.save(!Z),v.styles=he.styles,he.classes?v.styleClasses=he.classes:v.styleClasses&&(v.styleClasses=null),k===f.doc.highlightFrontier&&(f.doc.modeFrontier=Math.max(f.doc.modeFrontier,++f.doc.highlightFrontier))}return v.styles}function Od(f,v,k){var P=f.doc,Z=f.display;if(!P.mode.startState)return new Yl(P,!0,v);var he=function Ql(f,v,k){for(var P,Z,he=f.doc,Fe=k?-1:v-(f.doc.mode.innerMode?1e3:100),Be=v;Be>Fe;--Be){if(Be<=he.first)return he.first;var ot=ui(he,Be-1),ft=ot.stateAfter;if(ft&&(!k||Be+(ft instanceof Oc?ft.lookAhead:0)<=he.modeFrontier))return Be;var jr=Mo(ot.text,null,f.options.tabSize);(null==Z||P>jr)&&(Z=Be-1,P=jr)}return Z}(f,v,k),Fe=he>P.first&&ui(P,he-1).stateAfter,Be=Fe?Yl.fromSaved(P,Fe,he):new Yl(P,Ka(P.mode),he);return P.iter(he,v,function(ot){Ml(f,ot.text,Be);var ft=Be.line;ot.stateAfter=ft==v-1||ft%5==0||ft>=Z.viewFrom&&ft<Z.viewTo?Be.save():null,Be.nextLine()}),k&&(P.modeFrontier=Be.line),Be}function Ml(f,v,k,P){var Z=f.doc.mode,he=new Ei(v,f.options.tabSize,k);for(he.start=he.pos=P||0,""==v&&id(Z,k.state);!he.eol();)Ac(Z,he,k.state),he.start=he.pos}function id(f,v){if(f.blankLine)return f.blankLine(v);if(f.innerMode){var k=ri(f,v);return k.mode.blankLine?k.mode.blankLine(k.state):void 0}}function Ac(f,v,k,P){for(var Z=0;Z<10;Z++){P&&(P[0]=ri(f,k).mode);var he=f.token(v,k);if(v.pos>v.start)return he}throw new Error("Mode "+f.name+" failed to advance stream.")}Yl.prototype.lookAhead=function(f){var v=this.doc.getLine(this.line+f);return null!=v&&f>this.maxLookAhead&&(this.maxLookAhead=f),v},Yl.prototype.baseToken=function(f){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=f;)this.baseTokenPos+=2;var v=this.baseTokens[this.baseTokenPos+1];return{type:v&&v.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-f}},Yl.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Yl.fromSaved=function(f,v,k){return v instanceof Oc?new Yl(f,Io(f.mode,v.state),k,v.lookAhead):new Yl(f,Io(f.mode,v),k)},Yl.prototype.save=function(f){var v=!1!==f?Io(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Oc(v,this.maxLookAhead):v};var Ea=function(f,v,k){this.start=f.start,this.end=f.pos,this.string=f.current(),this.type=v||null,this.state=k};function du(f,v,k,P){var Z,he,Fe=f.doc,Be=Fe.mode,ot=ui(Fe,(v=Vi(Fe,v)).line),ft=Od(f,v.line,k),jr=new Ei(ot.text,f.options.tabSize,ft);for(P&&(he=[]);(P||jr.pos<v.ch)&&!jr.eol();)jr.start=jr.pos,Z=Ac(Be,jr,ft.state),P&&he.push(new Ea(jr,Z,Io(Fe.mode,ft.state)));return P?he:new Ea(jr,Z,ft.state)}function Js(f,v){if(f)for(;;){var k=f.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!k)break;f=f.slice(0,k.index)+f.slice(k.index+k[0].length);var P=k[1]?"bgClass":"textClass";null==v[P]?v[P]=k[2]:new RegExp("(?:^|\\s)"+k[2]+"(?:$|\\s)").test(v[P])||(v[P]+=" "+k[2])}return f}function ad(f,v,k,P,Z,he,Fe){var Be=k.flattenSpans;null==Be&&(Be=f.options.flattenSpans);var ot,ft=0,jr=null,Rr=new Ei(v,f.options.tabSize,P),_n=f.options.addModeClass&&[null];for(""==v&&Js(id(k,P.state),he);!Rr.eol();){if(Rr.pos>f.options.maxHighlightLength?(Be=!1,Fe&&Ml(f,v,P,Rr.pos),Rr.pos=v.length,ot=null):ot=Js(Ac(k,Rr,P.state,_n),he),_n){var Tn=_n[0].name;Tn&&(ot="m-"+(ot?Tn+" "+ot:Tn))}if(!Be||jr!=ot){for(;ft<Rr.start;)Z(ft=Math.min(Rr.start,ft+5e3),jr);jr=ot}Rr.start=Rr.pos}for(;ft<Rr.pos;){var wo=Math.min(Rr.pos,ft+5e3);Z(wo,jr),ft=wo}}var Qc=!1,kc=!1;function eu(f,v,k){this.marker=f,this.from=v,this.to=k}function Oa(f,v){if(f)for(var k=0;k<f.length;++k){var P=f[k];if(P.marker==v)return P}}function Ll(f,v){for(var k,P=0;P<f.length;++P)f[P]!=v&&(k||(k=[])).push(f[P]);return k}function Gu(f,v){if(v.full)return null;var k=el(f,v.from.line)&&ui(f,v.from.line).markedSpans,P=el(f,v.to.line)&&ui(f,v.to.line).markedSpans;if(!k&&!P)return null;var Z=v.from.ch,he=v.to.ch,Fe=0==Ba(v.from,v.to),Be=function as(f,v,k){var P;if(f)for(var Z=0;Z<f.length;++Z){var he=f[Z],Fe=he.marker;null!=he.from&&!(Fe.inclusiveLeft?he.from<=v:he.from<v)&&(he.from!=v||"bookmark"!=Fe.type||k&&he.marker.insertLeft)||(P||(P=[])).push(new eu(Fe,he.from,null==he.to||(Fe.inclusiveRight?he.to>=v:he.to>v)?null:he.to))}return P}(k,Z,Fe),ot=function El(f,v,k){var P;if(f)for(var Z=0;Z<f.length;++Z){var he=f[Z],Fe=he.marker;(null==he.to||(Fe.inclusiveRight?he.to>=v:he.to>v)||he.from==v&&"bookmark"==Fe.type&&(!k||he.marker.insertLeft))&&(P||(P=[])).push(new eu(Fe,null==he.from||(Fe.inclusiveLeft?he.from<=v:he.from<v)?null:he.from-v,null==he.to?null:he.to-v))}return P}(P,he,Fe),ft=1==v.text.length,jr=dn(v.text).length+(ft?Z:0);if(Be)for(var Rr=0;Rr<Be.length;++Rr){var _n=Be[Rr];if(null==_n.to){var Tn=Oa(ot,_n.marker);Tn?ft&&(_n.to=null==Tn.to?null:Tn.to+jr):_n.to=Z}}if(ot)for(var wo=0;wo<ot.length;++wo){var ni=ot[wo];null!=ni.to&&(ni.to+=jr),null==ni.from?Oa(Be,ni.marker)||(ni.from=jr,ft&&(Be||(Be=[])).push(ni)):(ni.from+=jr,ft&&(Be||(Be=[])).push(ni))}Be&&(Be=Lc(Be)),ot&&ot!=Be&&(ot=Lc(ot));var Mi=[Be];if(!ft){var sa,Ta=v.text.length-2;if(Ta>0&&Be)for(var Fi=0;Fi<Be.length;++Fi)null==Be[Fi].to&&(sa||(sa=[])).push(new eu(Be[Fi].marker,null,null));for(var fa=0;fa<Ta;++fa)Mi.push(sa);Mi.push(ot)}return Mi}function Lc(f){for(var v=0;v<f.length;++v){var k=f[v];null!=k.from&&k.from==k.to&&!1!==k.marker.clearWhenEmpty&&f.splice(v--,1)}return f.length?f:null}function et(f){var v=f.markedSpans;if(v){for(var k=0;k<v.length;++k)v[k].marker.detachLine(f);f.markedSpans=null}}function Ye(f,v){if(v){for(var k=0;k<v.length;++k)v[k].marker.attachLine(f);f.markedSpans=v}}function dt(f){return f.inclusiveLeft?-1:0}function Dt(f){return f.inclusiveRight?1:0}function tn(f,v){var k=f.lines.length-v.lines.length;if(0!=k)return k;var P=f.find(),Z=v.find(),he=Ba(P.from,Z.from)||dt(f)-dt(v);return he?-he:Ba(P.to,Z.to)||Dt(f)-Dt(v)||v.id-f.id}function uo(f,v){var k,P=kc&&f.markedSpans;if(P)for(var Z=void 0,he=0;he<P.length;++he)(Z=P[he]).marker.collapsed&&null==(v?Z.from:Z.to)&&(!k||tn(k,Z.marker)<0)&&(k=Z.marker);return k}function ao(f){return uo(f,!0)}function Jo(f){return uo(f,!1)}function ko(f,v){var k,P=kc&&f.markedSpans;if(P)for(var Z=0;Z<P.length;++Z){var he=P[Z];he.marker.collapsed&&(null==he.from||he.from<v)&&(null==he.to||he.to>v)&&(!k||tn(k,he.marker)<0)&&(k=he.marker)}return k}function ra(f,v,k,P,Z){var he=ui(f,v),Fe=kc&&he.markedSpans;if(Fe)for(var Be=0;Be<Fe.length;++Be){var ot=Fe[Be];if(ot.marker.collapsed){var ft=ot.marker.find(0),jr=Ba(ft.from,k)||dt(ot.marker)-dt(Z),Rr=Ba(ft.to,P)||Dt(ot.marker)-Dt(Z);if(!(jr>=0&&Rr<=0||jr<=0&&Rr>=0)&&(jr<=0&&(ot.marker.inclusiveRight&&Z.inclusiveLeft?Ba(ft.to,k)>=0:Ba(ft.to,k)>0)||jr>=0&&(ot.marker.inclusiveRight&&Z.inclusiveLeft?Ba(ft.from,P)<=0:Ba(ft.from,P)<0)))return!0}}}function Ri(f){for(var v;v=ao(f);)f=v.find(-1,!0).line;return f}function es(f,v){var k=ui(f,v),P=Ri(k);return k==P?v:To(P)}function Xi(f,v){if(v>f.lastLine())return v;var k,P=ui(f,v);if(!cs(f,P))return v;for(;k=Jo(P);)P=k.find(1,!0).line;return To(P)+1}function cs(f,v){var k=kc&&v.markedSpans;if(k)for(var P=void 0,Z=0;Z<k.length;++Z)if((P=k[Z]).marker.collapsed&&(null==P.from||!P.marker.widgetNode&&0==P.from&&P.marker.inclusiveLeft&&cc(f,v,P)))return!0}function cc(f,v,k){if(null==k.to){var P=k.marker.find(1,!0);return cc(f,P.line,Oa(P.line.markedSpans,k.marker))}if(k.marker.inclusiveRight&&k.to==v.text.length)return!0;for(var Z=void 0,he=0;he<v.markedSpans.length;++he)if((Z=v.markedSpans[he]).marker.collapsed&&!Z.marker.widgetNode&&Z.from==k.to&&(null==Z.to||Z.to!=k.from)&&(Z.marker.inclusiveLeft||k.marker.inclusiveRight)&&cc(f,v,Z))return!0}function Il(f){for(var v=0,k=(f=Ri(f)).parent,P=0;P<k.lines.length;++P){var Z=k.lines[P];if(Z==f)break;v+=Z.height}for(var he=k.parent;he;he=(k=he).parent)for(var Fe=0;Fe<he.children.length;++Fe){var Be=he.children[Fe];if(Be==k)break;v+=Be.height}return v}function vc(f){if(0==f.height)return 0;for(var v,k=f.text.length,P=f;v=ao(P);){var Z=v.find(0,!0);P=Z.from.line,k+=Z.from.ch-Z.to.ch}for(P=f;v=Jo(P);){var he=v.find(0,!0);k-=P.text.length-he.from.ch,k+=(P=he.to.line).text.length-he.to.ch}return k}function Aa(f){var v=f.display,k=f.doc;v.maxLine=ui(k,k.first),v.maxLineLength=vc(v.maxLine),v.maxLineChanged=!0,k.iter(function(P){var Z=vc(P);Z>v.maxLineLength&&(v.maxLineLength=Z,v.maxLine=P)})}var uc=function(f,v,k){this.text=f,Ye(this,v),this.height=k?k(this):1};function sd(f){f.parent=null,et(f)}uc.prototype.lineNo=function(){return To(this)},wt(uc);var Rc={},Dd={};function zd(f,v){if(!f||/^\s*$/.test(f))return null;var k=v.addModeClass?Dd:Rc;return k[f]||(k[f]=f.replace(/\S+/g,"cm-$&"))}function Jp(f,v){var k=Ct("span",null,null,T?"padding-right: .1px":null),P={pre:Ct("pre",[k],"CodeMirror-line"),content:k,col:0,pos:0,cm:f,trailingSpace:!1,splitSpaces:f.getOption("lineWrapping")};v.measure={};for(var Z=0;Z<=(v.rest?v.rest.length:0);Z++){var he=Z?v.rest[Z-1]:v.line,Fe=void 0;P.pos=0,P.addToken=dl,ht(f.display.measure)&&(Fe=oo(he,f.doc.direction))&&(P.addToken=Gl(P.addToken,Fe)),P.map=[],qu(he,P,Vd(f,he,v!=f.display.externalMeasured&&To(he))),he.styleClasses&&(he.styleClasses.bgClass&&(P.bgClass=nr(he.styleClasses.bgClass,P.bgClass||"")),he.styleClasses.textClass&&(P.textClass=nr(he.styleClasses.textClass,P.textClass||""))),0==P.map.length&&P.map.push(0,0,P.content.appendChild(Tr(f.display.measure))),0==Z?(v.measure.map=P.map,v.measure.cache={}):((v.measure.maps||(v.measure.maps=[])).push(P.map),(v.measure.caches||(v.measure.caches=[])).push({}))}if(T){var Be=P.content.lastChild;(/\bcm-tab\b/.test(Be.className)||Be.querySelector&&Be.querySelector(".cm-tab"))&&(P.content.className="cm-tab-wrap-hack")}return jt(f,"renderLine",f,v.line,P.pre),P.pre.className&&(P.textClass=nr(P.pre.className,P.textClass||"")),P}function Ks(f){var v=$e("span","\u2022","cm-invalidchar");return v.title="\\u"+f.charCodeAt(0).toString(16),v.setAttribute("aria-label",v.title),v}function dl(f,v,k,P,Z,he,Fe){if(v){var Be,ot=f.splitSpaces?function Rl(f,v){if(f.length>1&&!/  /.test(f))return f;for(var k=v,P="",Z=0;Z<f.length;Z++){var he=f.charAt(Z);" "!=he||!k||Z!=f.length-1&&32!=f.charCodeAt(Z+1)||(he="\xa0"),P+=he,k=" "==he}return P}(v,f.trailingSpace):v,ft=f.cm.state.specialChars,jr=!1;if(ft.test(v)){Be=document.createDocumentFragment();for(var Rr=0;;){ft.lastIndex=Rr;var _n=ft.exec(v),Tn=_n?_n.index-Rr:v.length-Rr;if(Tn){var wo=document.createTextNode(ot.slice(Rr,Rr+Tn));Be.appendChild(U&&R<9?$e("span",[wo]):wo),f.map.push(f.pos,f.pos+Tn,wo),f.col+=Tn,f.pos+=Tn}if(!_n)break;Rr+=Tn+1;var ni=void 0;if("\t"==_n[0]){var Mi=f.cm.options.tabSize,sa=Mi-f.col%Mi;(ni=Be.appendChild($e("span",Mn(sa),"cm-tab"))).setAttribute("role","presentation"),ni.setAttribute("cm-text","\t"),f.col+=sa}else"\r"==_n[0]||"\n"==_n[0]?((ni=Be.appendChild($e("span","\r"==_n[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",_n[0]),f.col+=1):((ni=f.cm.options.specialCharPlaceholder(_n[0])).setAttribute("cm-text",_n[0]),Be.appendChild(U&&R<9?$e("span",[ni]):ni),f.col+=1);f.map.push(f.pos,f.pos+1,ni),f.pos++}}else f.col+=v.length,Be=document.createTextNode(ot),f.map.push(f.pos,f.pos+v.length,Be),U&&R<9&&(jr=!0),f.pos+=v.length;if(f.trailingSpace=32==ot.charCodeAt(v.length-1),k||P||Z||jr||he||Fe){var Ta=k||"";P&&(Ta+=P),Z&&(Ta+=Z);var Fi=$e("span",[Be],Ta,he);if(Fe)for(var fa in Fe)Fe.hasOwnProperty(fa)&&"style"!=fa&&"class"!=fa&&Fi.setAttribute(fa,Fe[fa]);return f.content.appendChild(Fi)}f.content.appendChild(Be)}}function Gl(f,v){return function(k,P,Z,he,Fe,Be,ot){Z=Z?Z+" cm-force-border":"cm-force-border";for(var ft=k.pos,jr=ft+P.length;;){for(var Rr=void 0,_n=0;_n<v.length&&!((Rr=v[_n]).to>ft&&Rr.from<=ft);_n++);if(Rr.to>=jr)return f(k,P,Z,he,Fe,Be,ot);f(k,P.slice(0,Rr.to-ft),Z,he,null,Be,ot),he=null,P=P.slice(Rr.to-ft),ft=Rr.to}}}function ld(f,v,k,P){var Z=!P&&k.widgetNode;Z&&f.map.push(f.pos,f.pos+v,Z),!P&&f.cm.display.input.needsContentAttribute&&(Z||(Z=f.content.appendChild(document.createElement("span"))),Z.setAttribute("cm-marker",k.id)),Z&&(f.cm.display.input.setUneditable(Z),f.content.appendChild(Z)),f.pos+=v,f.trailingSpace=!1}function qu(f,v,k){var P=f.markedSpans,Z=f.text,he=0;if(P)for(var Fe,Be,ot,ft,jr,Rr,_n,Tn=Z.length,wo=0,ni=1,Mi="",sa=0;;){if(sa==wo){ot=ft=jr=Be="",_n=null,Rr=null,sa=1/0;for(var Ta=[],Fi=void 0,fa=0;fa<P.length;++fa){var zi=P[fa],na=zi.marker;if("bookmark"==na.type&&zi.from==wo&&na.widgetNode)Ta.push(na);else if(zi.from<=wo&&(null==zi.to||zi.to>wo||na.collapsed&&zi.to==wo&&zi.from==wo)){if(null!=zi.to&&zi.to!=wo&&sa>zi.to&&(sa=zi.to,ft=""),na.className&&(ot+=" "+na.className),na.css&&(Be=(Be?Be+";":"")+na.css),na.startStyle&&zi.from==wo&&(jr+=" "+na.startStyle),na.endStyle&&zi.to==sa&&(Fi||(Fi=[])).push(na.endStyle,zi.to),na.title&&((_n||(_n={})).title=na.title),na.attributes)for(var Os in na.attributes)(_n||(_n={}))[Os]=na.attributes[Os];na.collapsed&&(!Rr||tn(Rr.marker,na)<0)&&(Rr=zi)}else zi.from>wo&&sa>zi.from&&(sa=zi.from)}if(Fi)for(var _s=0;_s<Fi.length;_s+=2)Fi[_s+1]==sa&&(ft+=" "+Fi[_s]);if(!Rr||Rr.from==wo)for(var nu=0;nu<Ta.length;++nu)ld(v,0,Ta[nu]);if(Rr&&(Rr.from||0)==wo){if(ld(v,(null==Rr.to?Tn+1:Rr.to)-wo,Rr.marker,null==Rr.from),null==Rr.to)return;Rr.to==wo&&(Rr=!1)}}if(wo>=Tn)break;for(var Hl=Math.min(Tn,sa);;){if(Mi){var ou=wo+Mi.length;if(!Rr){var Qu=ou>Hl?Mi.slice(0,Hl-wo):Mi;v.addToken(v,Qu,Fe?Fe+ot:ot,jr,wo+Qu.length==sa?ft:"",Be,_n)}if(ou>=Hl){Mi=Mi.slice(Hl-wo),wo=Hl;break}wo=ou,jr=""}Mi=Z.slice(he,he=k[ni++]),Fe=zd(k[ni++],v.cm.options)}}else for(var bc=1;bc<k.length;bc+=2)v.addToken(v,Z.slice(he,he=k[bc]),zd(k[bc+1],v.cm.options))}function xu(f,v,k){this.line=v,this.rest=function Ra(f){for(var v,k;v=Jo(f);)f=v.find(1,!0).line,(k||(k=[])).push(f);return k}(v),this.size=this.rest?To(dn(this.rest))-k+1:1,this.node=this.text=null,this.hidden=cs(f,v)}function Dp(f,v,k){for(var P,Z=[],he=v;he<k;he=P){var Fe=new xu(f.doc,ui(f.doc,he),he);P=he+Fe.size,Z.push(Fe)}return Z}var Dc=null,Tp=null;function ml(f,v){var k=ts(f,v);if(k.length){var P,Z=Array.prototype.slice.call(arguments,2);Dc?P=Dc.delayedCallbacks:Tp?P=Tp:(P=Tp=[],setTimeout(Yp,0));for(var he=function(Be){P.push(function(){return k[Be].apply(null,Z)})},Fe=0;Fe<k.length;++Fe)he(Fe)}}function Yp(){var f=Tp;Tp=null;for(var v=0;v<f.length;++v)f[v]()}function Mu(f,v,k,P){for(var Z=0;Z<v.changes.length;Z++){var he=v.changes[Z];"text"==he?dd(f,v):"gutter"==he?Tc(f,v,k,P):"class"==he?Fs(f,v):"widget"==he&&tu(f,v,P)}v.changes=null}function pu(f){return f.node==f.text&&(f.node=$e("div",null,null,"position: relative"),f.text.parentNode&&f.text.parentNode.replaceChild(f.node,f.text),f.node.appendChild(f.text),U&&R<8&&(f.node.style.zIndex=2)),f.node}function ud(f,v){var k=f.display.externalMeasured;return k&&k.line==v.line?(f.display.externalMeasured=null,v.measure=k.measure,k.built):Jp(f,v)}function dd(f,v){var k=v.text.className,P=ud(f,v);v.text==v.node&&(v.node=P.pre),v.text.parentNode.replaceChild(P.pre,v.text),v.text=P.pre,P.bgClass!=v.bgClass||P.textClass!=v.textClass?(v.bgClass=P.bgClass,v.textClass=P.textClass,Fs(f,v)):k&&(v.text.className=k)}function Fs(f,v){(function Zc(f,v){var k=v.bgClass?v.bgClass+" "+(v.line.bgClass||""):v.line.bgClass;if(k&&(k+=" CodeMirror-linebackground"),v.background)k?v.background.className=k:(v.background.parentNode.removeChild(v.background),v.background=null);else if(k){var P=pu(v);v.background=P.insertBefore($e("div",null,k),P.firstChild),f.display.input.setUneditable(v.background)}})(f,v),v.line.wrapClass?pu(v).className=v.line.wrapClass:v.node!=v.text&&(v.node.className=""),v.text.className=(v.textClass?v.textClass+" "+(v.line.textClass||""):v.line.textClass)||""}function Tc(f,v,k,P){if(v.gutter&&(v.node.removeChild(v.gutter),v.gutter=null),v.gutterBackground&&(v.node.removeChild(v.gutterBackground),v.gutterBackground=null),v.line.gutterClass){var Z=pu(v);v.gutterBackground=$e("div",null,"CodeMirror-gutter-background "+v.line.gutterClass,"left: "+(f.options.fixedGutter?P.fixedPos:-P.gutterTotalWidth)+"px; width: "+P.gutterTotalWidth+"px"),f.display.input.setUneditable(v.gutterBackground),Z.insertBefore(v.gutterBackground,v.text)}var he=v.line.gutterMarkers;if(f.options.lineNumbers||he){var Fe=pu(v),Be=v.gutter=$e("div",null,"CodeMirror-gutter-wrapper","left: "+(f.options.fixedGutter?P.fixedPos:-P.gutterTotalWidth)+"px");if(Be.setAttribute("aria-hidden","true"),f.display.input.setUneditable(Be),Fe.insertBefore(Be,v.text),v.line.gutterClass&&(Be.className+=" "+v.line.gutterClass),!f.options.lineNumbers||he&&he["CodeMirror-linenumbers"]||(v.lineNumber=Be.appendChild($e("div",gc(f.options,k),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+P.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.display.lineNumInnerWidth+"px"))),he)for(var ot=0;ot<f.display.gutterSpecs.length;++ot){var ft=f.display.gutterSpecs[ot].className,jr=he.hasOwnProperty(ft)&&he[ft];jr&&Be.appendChild($e("div",[jr],"CodeMirror-gutter-elt","left: "+P.gutterLeft[ft]+"px; width: "+P.gutterWidth[ft]+"px"))}}}function tu(f,v,k){v.alignable&&(v.alignable=null);for(var P=me("CodeMirror-linewidget"),Z=v.node.firstChild,he=void 0;Z;Z=he)he=Z.nextSibling,P.test(Z.className)&&v.node.removeChild(Z);Sd(f,v,k)}function Td(f,v,k,P){var Z=ud(f,v);return v.text=v.node=Z.pre,Z.bgClass&&(v.bgClass=Z.bgClass),Z.textClass&&(v.textClass=Z.textClass),Fs(f,v),Tc(f,v,k,P),Sd(f,v,P),v.node}function Sd(f,v,k){if(pd(f,v.line,v,k,!0),v.rest)for(var P=0;P<v.rest.length;P++)pd(f,v.rest[P],v,k,!1)}function pd(f,v,k,P,Z){if(v.widgets)for(var he=pu(k),Fe=0,Be=v.widgets;Fe<Be.length;++Fe){var ot=Be[Fe],ft=$e("div",[ot.node],"CodeMirror-linewidget"+(ot.className?" "+ot.className:""));ot.handleMouseEvents||ft.setAttribute("cm-ignore-events","true"),Nl(ot,ft,k,P),f.display.input.setUneditable(ft),Z&&ot.above?he.insertBefore(ft,k.gutter||k.text):he.appendChild(ft),ml(ot,"redraw")}}function Nl(f,v,k,P){if(f.noHScroll){(k.alignable||(k.alignable=[])).push(v);var Z=P.wrapperWidth;v.style.left=P.fixedPos+"px",f.coverGutter||(Z-=P.gutterTotalWidth,v.style.paddingLeft=P.gutterTotalWidth+"px"),v.style.width=Z+"px"}f.coverGutter&&(v.style.zIndex=5,v.style.position="relative",f.noHScroll||(v.style.marginLeft=-P.gutterTotalWidth+"px"))}function ic(f){if(null!=f.height)return f.height;var v=f.doc.cm;if(!v)return 0;if(!Ke(document.body,f.node)){var k="position: relative;";f.coverGutter&&(k+="margin-left: -"+v.display.gutters.offsetWidth+"px;"),f.noHScroll&&(k+="width: "+v.display.wrapper.clientWidth+"px;"),ut(v.display.measure,$e("div",[f.node],null,k))}return f.height=f.node.parentNode.offsetHeight}function Ve(f,v){for(var k=Ro(v);k!=f.wrapper;k=k.parentNode)if(!k||1==k.nodeType&&"true"==k.getAttribute("cm-ignore-events")||k.parentNode==f.sizer&&k!=f.mover)return!0}function kt(f){return f.lineSpace.offsetTop}function Br(f){return f.mover.offsetHeight-f.lineSpace.offsetHeight}function qr(f){if(f.cachedPaddingH)return f.cachedPaddingH;var v=ut(f.measure,$e("pre","x","CodeMirror-line-like")),k=window.getComputedStyle?window.getComputedStyle(v):v.currentStyle,P={left:parseInt(k.paddingLeft),right:parseInt(k.paddingRight)};return isNaN(P.left)||isNaN(P.right)||(f.cachedPaddingH=P),P}function vn(f){return Di-f.display.nativeBarWidth}function On(f){return f.display.scroller.clientWidth-vn(f)-f.display.barWidth}function oi(f){return f.display.scroller.clientHeight-vn(f)-f.display.barHeight}function Cs(f,v,k){if(f.line==v)return{map:f.measure.map,cache:f.measure.cache};for(var P=0;P<f.rest.length;P++)if(f.rest[P]==v)return{map:f.measure.maps[P],cache:f.measure.caches[P]};for(var Z=0;Z<f.rest.length;Z++)if(To(f.rest[Z])>k)return{map:f.measure.maps[Z],cache:f.measure.caches[Z],before:!0}}function gl(f,v,k,P){return hu(f,fu(f,v),k,P)}function _c(f,v){if(v>=f.display.viewFrom&&v<f.display.viewTo)return f.display.view[Eu(f,v)];var k=f.display.externalMeasured;return k&&v>=k.lineN&&v<k.lineN+k.size?k:void 0}function fu(f,v){var k=To(v),P=_c(f,k);P&&!P.text?P=null:P&&P.changes&&(Mu(f,P,k,$m(f)),f.curOp.forceUpdate=!0),P||(P=function Ls(f,v){var k=To(v=Ri(v)),P=f.display.externalMeasured=new xu(f.doc,v,k);P.lineN=k;var Z=P.built=Jp(f,P);return P.text=Z.pre,ut(f.display.lineMeasure,Z.pre),P}(f,v));var Z=Cs(P,v,k);return{line:v,view:P,rect:null,map:Z.map,cache:Z.cache,before:Z.before,hasHeights:!1}}function hu(f,v,k,P,Z){v.before&&(k=-1);var he,Fe=k+(P||"");return v.cache.hasOwnProperty(Fe)?he=v.cache[Fe]:(v.rect||(v.rect=v.view.text.getBoundingClientRect()),v.hasHeights||(function ji(f,v,k){var P=f.options.lineWrapping,Z=P&&On(f);if(!v.measure.heights||P&&v.measure.width!=Z){var he=v.measure.heights=[];if(P){v.measure.width=Z;for(var Fe=v.text.firstChild.getClientRects(),Be=0;Be<Fe.length-1;Be++){var ot=Fe[Be],ft=Fe[Be+1];Math.abs(ot.bottom-ft.bottom)>2&&he.push((ot.bottom+ft.top)/2-k.top)}}he.push(k.bottom-k.top)}}(f,v.view,v.rect),v.hasHeights=!0),(he=function fd(f,v,k,P){var Z,he=Vs(v.map,k,P),Fe=he.node,Be=he.start,ot=he.end,ft=he.collapse;if(3==Fe.nodeType){for(var jr=0;jr<4;jr++){for(;Be&&at(v.line.text.charAt(he.coverStart+Be));)--Be;for(;he.coverStart+ot<he.coverEnd&&at(v.line.text.charAt(he.coverStart+ot));)++ot;if((Z=U&&R<9&&0==Be&&ot==he.coverEnd-he.coverStart?Fe.parentNode.getBoundingClientRect():_g(l(Fe,Be,ot).getClientRects(),P)).left||Z.right||0==Be)break;ot=Be,Be-=1,ft="right"}U&&R<11&&(Z=function qm(f,v){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function dr(f){if(null!=Yn)return Yn;var v=ut(f,$e("span","x")),k=v.getBoundingClientRect(),P=l(v,0,1).getBoundingClientRect();return Yn=Math.abs(k.left-P.left)>1}(f))return v;var k=screen.logicalXDPI/screen.deviceXDPI,P=screen.logicalYDPI/screen.deviceYDPI;return{left:v.left*k,right:v.right*k,top:v.top*P,bottom:v.bottom*P}}(f.display.measure,Z))}else{var Rr;Be>0&&(ft=P="right"),Z=f.options.lineWrapping&&(Rr=Fe.getClientRects()).length>1?Rr["right"==P?Rr.length-1:0]:Fe.getBoundingClientRect()}if(U&&R<9&&!Be&&(!Z||!Z.left&&!Z.right)){var _n=Fe.parentNode.getClientRects()[0];Z=_n?{left:_n.left,right:_n.left+$d(f.display),top:_n.top,bottom:_n.bottom}:Dm}for(var Tn=Z.top-v.rect.top,wo=Z.bottom-v.rect.top,ni=(Tn+wo)/2,Mi=v.view.measure.heights,sa=0;sa<Mi.length-1&&!(ni<Mi[sa]);sa++);var fa={left:("right"==ft?Z.right:Z.left)-v.rect.left,right:("left"==ft?Z.left:Z.right)-v.rect.left,top:sa?Mi[sa-1]:0,bottom:Mi[sa]};return Z.left||Z.right||(fa.bogus=!0),f.options.singleCursorHeightPerLine||(fa.rtop=Tn,fa.rbottom=wo),fa}(f,v,k,P)).bogus||(v.cache[Fe]=he)),{left:he.left,right:he.right,top:Z?he.rtop:he.top,bottom:Z?he.rbottom:he.bottom}}var Jf,Dm={left:0,right:0,top:0,bottom:0};function Vs(f,v,k){for(var P,Z,he,Fe,Be,ot,ft=0;ft<f.length;ft+=3)if(ot=f[ft+1],v<(Be=f[ft])?(Z=0,he=1,Fe="left"):v<ot?he=1+(Z=v-Be):(ft==f.length-3||v==ot&&f[ft+3]>v)&&(Z=(he=ot-Be)-1,v>=ot&&(Fe="right")),null!=Z){if(P=f[ft+2],Be==ot&&k==(P.insertLeft?"left":"right")&&(Fe=k),"left"==k&&0==Z)for(;ft&&f[ft-2]==f[ft-3]&&f[ft-1].insertLeft;)P=f[2+(ft-=3)],Fe="left";if("right"==k&&Z==ot-Be)for(;ft<f.length-3&&f[ft+3]==f[ft+4]&&!f[ft+5].insertLeft;)P=f[(ft+=3)+2],Fe="right";break}return{node:P,start:Z,end:he,collapse:Fe,coverStart:Be,coverEnd:ot}}function _g(f,v){var k=Dm;if("left"==v)for(var P=0;P<f.length&&(k=f[P]).left==k.right;P++);else for(var Z=f.length-1;Z>=0&&(k=f[Z]).left==k.right;Z--);return k}function Of(f){if(f.measure&&(f.measure.cache={},f.measure.heights=null,f.rest))for(var v=0;v<f.rest.length;v++)f.measure.caches[v]={}}function Sh(f){f.display.externalMeasure=null,Ze(f.display.lineMeasure);for(var v=0;v<f.display.view.length;v++)Of(f.display.view[v])}function wl(f){Sh(f),f.display.cachedCharWidth=f.display.cachedTextHeight=f.display.cachedPaddingH=null,f.options.lineWrapping||(f.display.maxLineChanged=!0),f.display.lineNumChars=null}function Au(){return L&&Te?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Df(){return L&&Te?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Yf(f){var v=0;if(f.widgets)for(var k=0;k<f.widgets.length;++k)f.widgets[k].above&&(v+=ic(f.widgets[k]));return v}function Tf(f,v,k,P,Z){if(!Z){var he=Yf(v);k.top+=he,k.bottom+=he}if("line"==P)return k;P||(P="local");var Fe=Il(v);if("local"==P?Fe+=kt(f.display):Fe-=f.display.viewOffset,"page"==P||"window"==P){var Be=f.display.lineSpace.getBoundingClientRect();Fe+=Be.top+("window"==P?0:Df());var ot=Be.left+("window"==P?0:Au());k.left+=ot,k.right+=ot}return k.top+=Fe,k.bottom+=Fe,k}function yg(f,v,k){if("div"==k)return v;var P=v.left,Z=v.top;if("page"==k)P-=Au(),Z-=Df();else if("local"==k||!k){var he=f.display.sizer.getBoundingClientRect();P+=he.left,Z+=he.top}var Fe=f.display.lineSpace.getBoundingClientRect();return{left:P-Fe.left,top:Z-Fe.top}}function Ul(f,v,k,P,Z){return P||(P=ui(f.doc,v.line)),Tf(f,P,gl(f,P,v.ch,Z),k)}function Hd(f,v,k,P,Z,he){function Fe(wo,ni){var Mi=hu(f,Z,wo,ni?"right":"left",he);return ni?Mi.left=Mi.right:Mi.right=Mi.left,Tf(f,P,Mi,k)}P=P||ui(f.doc,v.line),Z||(Z=fu(f,P));var Be=oo(P,f.doc.direction),ot=v.ch,ft=v.sticky;if(ot>=P.text.length?(ot=P.text.length,ft="before"):ot<=0&&(ot=0,ft="after"),!Be)return Fe("before"==ft?ot-1:ot,"before"==ft);function jr(wo,ni,Mi){return Fe(Mi?wo-1:wo,1==Be[ni].level!=Mi)}var Rr=ln(Be,ot,ft),_n=Zt,Tn=jr(ot,Rr,"before"==ft);return null!=_n&&(Tn.other=jr(ot,_n,"before"!=ft)),Tn}function Qf(f,v){var k=0;v=Vi(f.doc,v),f.options.lineWrapping||(k=$d(f.display)*v.ch);var P=ui(f.doc,v.line),Z=Il(P)+kt(f.display);return{left:k,right:k,top:Z,bottom:Z+P.height}}function Cu(f,v,k,P,Z){var he=Qo(f,v,k);return he.xRel=Z,P&&(he.outside=P),he}function Tm(f,v,k){var P=f.doc;if((k+=f.display.viewOffset)<0)return Cu(P.first,0,null,-1,-1);var Z=rs(P,k),he=P.first+P.size-1;if(Z>he)return Cu(P.first+P.size-1,ui(P,he).text.length,null,1,1);v<0&&(v=0);for(var Fe=ui(P,Z);;){var Be=zg(f,Fe,Z,v,k),ot=ko(Fe,Be.ch+(Be.xRel>0||Be.outside>0?1:0));if(!ot)return Be;var ft=ot.find(1);if(ft.line==Z)return ft;Fe=ui(P,Z=ft.line)}}function Gd(f,v,k,P){P-=Yf(v);var Z=v.text.length,he=Pt(function(Fe){return hu(f,k,Fe-1).bottom<=P},Z,0);return{begin:he,end:Z=Pt(function(Fe){return hu(f,k,Fe).top>P},he,Z)}}function Qp(f,v,k,P){return k||(k=fu(f,v)),Gd(f,v,k,Tf(f,v,hu(f,k,P),"line").top)}function qd(f,v,k,P){return!(f.bottom<=k)&&(f.top>k||(P?f.left:f.right)>v)}function zg(f,v,k,P,Z){Z-=Il(v);var he=fu(f,v),Fe=Yf(v),Be=0,ot=v.text.length,ft=!0,jr=oo(v,f.doc.direction);if(jr){var Rr=(f.options.lineWrapping?Hg:Sp)(f,v,k,he,jr,P,Z);Be=(ft=1!=Rr.level)?Rr.from:Rr.to-1,ot=ft?Rr.to:Rr.from-1}var _n,Tn,wo=null,ni=null,Mi=Pt(function(zi){var na=hu(f,he,zi);return na.top+=Fe,na.bottom+=Fe,!!qd(na,P,Z,!1)&&(na.top<=Z&&na.left<=P&&(wo=zi,ni=na),!0)},Be,ot),sa=!1;if(ni){var Ta=P-ni.left<ni.right-P,Fi=Ta==ft;Mi=wo+(Fi?0:1),Tn=Fi?"after":"before",_n=Ta?ni.left:ni.right}else{ft||Mi!=ot&&Mi!=Be||Mi++,Tn=0==Mi?"after":Mi==v.text.length?"before":hu(f,he,Mi-(ft?1:0)).bottom+Fe<=Z==ft?"after":"before";var fa=Hd(f,Qo(k,Mi,Tn),"line",v,he);_n=fa.left,sa=Z<fa.top?-1:Z>=fa.bottom?1:0}return Cu(k,Mi=gr(v.text,Mi,1),Tn,sa,P-_n)}function Sp(f,v,k,P,Z,he,Fe){var Be=Pt(function(Rr){var _n=Z[Rr],Tn=1!=_n.level;return qd(Hd(f,Qo(k,Tn?_n.to:_n.from,Tn?"before":"after"),"line",v,P),he,Fe,!0)},0,Z.length-1),ot=Z[Be];if(Be>0){var ft=1!=ot.level,jr=Hd(f,Qo(k,ft?ot.from:ot.to,ft?"after":"before"),"line",v,P);qd(jr,he,Fe,!0)&&jr.top>Fe&&(ot=Z[Be-1])}return ot}function Hg(f,v,k,P,Z,he,Fe){var Be=Gd(f,v,P,Fe),ot=Be.begin,ft=Be.end;/\s/.test(v.text.charAt(ft-1))&&ft--;for(var jr=null,Rr=null,_n=0;_n<Z.length;_n++){var Tn=Z[_n];if(!(Tn.from>=ft||Tn.to<=ot)){var wo=hu(f,P,1!=Tn.level?Math.min(ft,Tn.to)-1:Math.max(ot,Tn.from)).right,ni=wo<he?he-wo+1e9:wo-he;(!jr||Rr>ni)&&(jr=Tn,Rr=ni)}}return jr||(jr=Z[Z.length-1]),jr.from<ot&&(jr={from:ot,to:jr.to,level:jr.level}),jr.to>ft&&(jr={from:jr.from,to:ft,level:jr.level}),jr}function hd(f){if(null!=f.cachedTextHeight)return f.cachedTextHeight;if(null==Jf){Jf=$e("pre",null,"CodeMirror-line-like");for(var v=0;v<49;++v)Jf.appendChild(document.createTextNode("x")),Jf.appendChild($e("br"));Jf.appendChild(document.createTextNode("x"))}ut(f.measure,Jf);var k=Jf.offsetHeight/50;return k>3&&(f.cachedTextHeight=k),Ze(f.measure),k||1}function $d(f){if(null!=f.cachedCharWidth)return f.cachedCharWidth;var v=$e("span","xxxxxxxxxx"),k=$e("pre",[v],"CodeMirror-line-like");ut(f.measure,k);var P=v.getBoundingClientRect(),Z=(P.right-P.left)/10;return Z>2&&(f.cachedCharWidth=Z),Z||10}function $m(f){for(var v=f.display,k={},P={},Z=v.gutters.clientLeft,he=v.gutters.firstChild,Fe=0;he;he=he.nextSibling,++Fe){var Be=f.display.gutterSpecs[Fe].className;k[Be]=he.offsetLeft+he.clientLeft+Z,P[Be]=he.clientWidth}return{fixedPos:Jm(v),gutterTotalWidth:v.gutters.offsetWidth,gutterLeft:k,gutterWidth:P,wrapperWidth:v.wrapper.clientWidth}}function Jm(f){return f.scroller.getBoundingClientRect().left-f.sizer.getBoundingClientRect().left}function bg(f){var v=hd(f.display),k=f.options.lineWrapping,P=k&&Math.max(5,f.display.scroller.clientWidth/$d(f.display)-3);return function(Z){if(cs(f.doc,Z))return 0;var he=0;if(Z.widgets)for(var Fe=0;Fe<Z.widgets.length;Fe++)Z.widgets[Fe].height&&(he+=Z.widgets[Fe].height);return k?he+(Math.ceil(Z.text.length/P)||1)*v:he+v}}function Sm(f){var v=f.doc,k=bg(f);v.iter(function(P){var Z=k(P);Z!=P.height&&Bs(P,Z)})}function Pp(f,v,k,P){var Z=f.display;if(!k&&"true"==Ro(v).getAttribute("cm-not-content"))return null;var he,Fe,Be=Z.lineSpace.getBoundingClientRect();try{he=v.clientX-Be.left,Fe=v.clientY-Be.top}catch{return null}var ot,ft=Tm(f,he,Fe);if(P&&ft.xRel>0&&(ot=ui(f.doc,ft.line).text).length==ft.ch){var jr=Mo(ot,ot.length,f.options.tabSize)-ot.length;ft=Qo(ft.line,Math.max(0,Math.round((he-qr(f.display).left)/$d(f.display))-jr))}return ft}function Eu(f,v){if(v>=f.display.viewTo||(v-=f.display.viewFrom)<0)return null;for(var k=f.display.view,P=0;P<k.length;P++)if((v-=k[P].size)<0)return P}function Uu(f,v,k,P){null==v&&(v=f.doc.first),null==k&&(k=f.doc.first+f.doc.size),P||(P=0);var Z=f.display;if(P&&k<Z.viewTo&&(null==Z.updateLineNumbers||Z.updateLineNumbers>v)&&(Z.updateLineNumbers=v),f.curOp.viewChanged=!0,v>=Z.viewTo)kc&&es(f.doc,v)<Z.viewTo&&Mp(f);else if(k<=Z.viewFrom)kc&&Xi(f.doc,k+P)>Z.viewFrom?Mp(f):(Z.viewFrom+=P,Z.viewTo+=P);else if(v<=Z.viewFrom&&k>=Z.viewTo)Mp(f);else if(v<=Z.viewFrom){var he=em(f,k,k+P,1);he?(Z.view=Z.view.slice(he.index),Z.viewFrom=he.lineN,Z.viewTo+=P):Mp(f)}else if(k>=Z.viewTo){var Fe=em(f,v,v,-1);Fe?(Z.view=Z.view.slice(0,Fe.index),Z.viewTo=Fe.lineN):Mp(f)}else{var Be=em(f,v,v,-1),ot=em(f,k,k+P,1);Be&&ot?(Z.view=Z.view.slice(0,Be.index).concat(Dp(f,Be.lineN,ot.lineN)).concat(Z.view.slice(ot.index)),Z.viewTo+=P):Mp(f)}var ft=Z.externalMeasured;ft&&(k<ft.lineN?ft.lineN+=P:v<ft.lineN+ft.size&&(Z.externalMeasured=null))}function Xp(f,v,k){f.curOp.viewChanged=!0;var P=f.display,Z=f.display.externalMeasured;if(Z&&v>=Z.lineN&&v<Z.lineN+Z.size&&(P.externalMeasured=null),!(v<P.viewFrom||v>=P.viewTo)){var he=P.view[Eu(f,v)];if(null!=he.node){var Fe=he.changes||(he.changes=[]);-1==No(Fe,k)&&Fe.push(k)}}}function Mp(f){f.display.viewFrom=f.display.viewTo=f.doc.first,f.display.view=[],f.display.viewOffset=0}function em(f,v,k,P){var Z,he=Eu(f,v),Fe=f.display.view;if(!kc||k==f.doc.first+f.doc.size)return{index:he,lineN:k};for(var Be=f.display.viewFrom,ot=0;ot<he;ot++)Be+=Fe[ot].size;if(Be!=v){if(P>0){if(he==Fe.length-1)return null;Z=Be+Fe[he].size-v,he++}else Z=Be-v;v+=Z,k+=Z}for(;es(f.doc,k)!=k;){if(he==(P<0?0:Fe.length-1))return null;k+=P*Fe[he-(P<0?1:0)].size,he+=P}return{index:he,lineN:k}}function Xf(f){for(var v=f.display.view,k=0,P=0;P<v.length;P++){var Z=v[P];Z.hidden||Z.node&&!Z.changes||++k}return k}function Sf(f){f.display.input.showSelection(f.display.input.prepareSelection())}function Q(f,v){void 0===v&&(v=!0);for(var k=f.doc,P={},Z=P.cursors=document.createDocumentFragment(),he=P.selection=document.createDocumentFragment(),Fe=0;Fe<k.sel.ranges.length;Fe++)if(v||Fe!=k.sel.primIndex){var Be=k.sel.ranges[Fe];if(!(Be.from().line>=f.display.viewTo||Be.to().line<f.display.viewFrom)){var ot=Be.empty();(ot||f.options.showCursorWhenSelecting)&&j(f,Be.head,Z),ot||se(f,Be,he)}}return P}function j(f,v,k){var P=Hd(f,v,"div",null,null,!f.options.singleCursorHeightPerLine),Z=k.appendChild($e("div","\xa0","CodeMirror-cursor"));if(Z.style.left=P.left+"px",Z.style.top=P.top+"px",Z.style.height=Math.max(0,P.bottom-P.top)*f.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(f.getWrapperElement().className)){var he=Ul(f,v,"div",null,null);he.right-he.left>0&&(Z.style.width=he.right-he.left+"px")}if(P.other){var Fe=k.appendChild($e("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Fe.style.display="",Fe.style.left=P.other.left+"px",Fe.style.top=P.other.top+"px",Fe.style.height=.85*(P.other.bottom-P.other.top)+"px"}}function J(f,v){return f.top-v.top||f.left-v.left}function se(f,v,k){var P=f.display,Z=f.doc,he=document.createDocumentFragment(),Fe=qr(f.display),Be=Fe.left,ot=Math.max(P.sizerWidth,On(f)-P.sizer.offsetLeft)-Fe.right,ft="ltr"==Z.direction;function jr(Fi,fa,zi,na){fa<0&&(fa=0),fa=Math.round(fa),na=Math.round(na),he.appendChild($e("div",null,"CodeMirror-selected","position: absolute; left: "+Fi+"px;\n                             top: "+fa+"px; width: "+(zi??ot-Fi)+"px;\n                             height: "+(na-fa)+"px"))}function Rr(Fi,fa,zi){var na,Os,_s=ui(Z,Fi),nu=_s.text.length;function Hl(bc,Zu){return Ul(f,Qo(Fi,bc),"div",_s,Zu)}function ou(bc,Zu,ec){var Fl=Qp(f,_s,null,bc),fc="ltr"==Zu==("after"==ec)?"left":"right";return Hl("after"==ec?Fl.begin:Fl.end-(/\s/.test(_s.text.charAt(Fl.end-1))?2:1),fc)[fc]}var Qu=oo(_s,Z.direction);return function mt(f,v,k,P){if(!f)return P(v,k,"ltr",0);for(var Z=!1,he=0;he<f.length;++he){var Fe=f[he];(Fe.from<k&&Fe.to>v||v==k&&Fe.to==v)&&(P(Math.max(Fe.from,v),Math.min(Fe.to,k),1==Fe.level?"rtl":"ltr",he),Z=!0)}Z||P(v,k,"ltr")}(Qu,fa||0,zi??nu,function(bc,Zu,ec,Fl){var fc="ltr"==ec,wc=Hl(bc,fc?"left":"right"),bd=Hl(Zu-1,fc?"right":"left"),ep=null==fa&&0==bc,wd=null==zi&&Zu==nu,Pu=0==Fl,iu=!Qu||Fl==Qu.length-1;if(bd.top-wc.top<=3){var Up=(ft?ep:wd)&&Pu?Be:(fc?wc:bd).left;jr(Up,wc.top,((ft?wd:ep)&&iu?ot:(fc?bd:wc).right)-Up,wc.bottom)}else{var uh,au,Um,Xm;fc?(uh=ft&&ep&&Pu?Be:wc.left,au=ft?ot:ou(bc,ec,"before"),Um=ft?Be:ou(Zu,ec,"after"),Xm=ft&&wd&&iu?ot:bd.right):(uh=ft?ou(bc,ec,"before"):Be,au=!ft&&ep&&Pu?ot:wc.right,Um=!ft&&wd&&iu?Be:bd.left,Xm=ft?ou(Zu,ec,"after"):ot),jr(uh,wc.top,au-uh,wc.bottom),wc.bottom<bd.top&&jr(Be,wc.bottom,null,bd.top),jr(Um,bd.top,Xm-Um,bd.bottom)}(!na||J(wc,na)<0)&&(na=wc),J(bd,na)<0&&(na=bd),(!Os||J(wc,Os)<0)&&(Os=wc),J(bd,Os)<0&&(Os=bd)}),{start:na,end:Os}}var _n=v.from(),Tn=v.to();if(_n.line==Tn.line)Rr(_n.line,_n.ch,Tn.ch);else{var wo=ui(Z,_n.line),ni=ui(Z,Tn.line),Mi=Ri(wo)==Ri(ni),sa=Rr(_n.line,_n.ch,Mi?wo.text.length+1:null).end,Ta=Rr(Tn.line,Mi?0:null,Tn.ch).start;Mi&&(sa.top<Ta.top-2?(jr(sa.right,sa.top,null,sa.bottom),jr(Be,Ta.top,Ta.left,Ta.bottom)):jr(sa.right,sa.top,Ta.left-sa.right,sa.bottom)),sa.bottom<Ta.top&&jr(Be,sa.bottom,null,Ta.top)}k.appendChild(he)}function xe(f){if(f.state.focused){var v=f.display;clearInterval(v.blinker);var k=!0;v.cursorDiv.style.visibility="",f.options.cursorBlinkRate>0?v.blinker=setInterval(function(){f.hasFocus()||Ne(f),v.cursorDiv.style.visibility=(k=!k)?"":"hidden"},f.options.cursorBlinkRate):f.options.cursorBlinkRate<0&&(v.cursorDiv.style.visibility="hidden")}}function fe(f){f.hasFocus()||(f.display.input.focus(),f.state.focused||Ae(f))}function De(f){f.state.delayingBlurEvent=!0,setTimeout(function(){f.state.delayingBlurEvent&&(f.state.delayingBlurEvent=!1,f.state.focused&&Ne(f))},100)}function Ae(f,v){f.state.delayingBlurEvent&&!f.state.draggingText&&(f.state.delayingBlurEvent=!1),"nocursor"!=f.options.readOnly&&(f.state.focused||(jt(f,"focus",f,v),f.state.focused=!0,mr(f.display.wrapper,"CodeMirror-focused"),f.curOp||f.display.selForContextMenu==f.doc.sel||(f.display.input.reset(),T&&setTimeout(function(){return f.display.input.reset(!0)},20)),f.display.input.receivedFocus()),xe(f))}function Ne(f,v){f.state.delayingBlurEvent||(f.state.focused&&(jt(f,"blur",f,v),f.state.focused=!1,Me(f.display.wrapper,"CodeMirror-focused")),clearInterval(f.display.blinker),setTimeout(function(){f.state.focused||(f.display.shift=!1)},150))}function tt(f){for(var v=f.display,k=v.lineDiv.offsetTop,P=Math.max(0,v.scroller.getBoundingClientRect().top),Z=v.lineDiv.getBoundingClientRect().top,he=0,Fe=0;Fe<v.view.length;Fe++){var Be=v.view[Fe],ot=f.options.lineWrapping,ft=void 0,jr=0;if(!Be.hidden){if(Z+=Be.line.height,U&&R<8){var Rr=Be.node.offsetTop+Be.node.offsetHeight;ft=Rr-k,k=Rr}else{var _n=Be.node.getBoundingClientRect();ft=_n.bottom-_n.top,!ot&&Be.text.firstChild&&(jr=Be.text.firstChild.getBoundingClientRect().right-_n.left-1)}var Tn=Be.line.height-ft;if((Tn>.005||Tn<-.005)&&(Z<P&&(he-=Tn),Bs(Be.line,ft),_t(Be.line),Be.rest))for(var wo=0;wo<Be.rest.length;wo++)_t(Be.rest[wo]);if(jr>f.display.sizerWidth){var ni=Math.ceil(jr/$d(f.display));ni>f.display.maxLineLength&&(f.display.maxLineLength=ni,f.display.maxLine=Be.line,f.display.maxLineChanged=!0)}}}Math.abs(he)>2&&(v.scroller.scrollTop+=he)}function _t(f){if(f.widgets)for(var v=0;v<f.widgets.length;++v){var k=f.widgets[v],P=k.node.parentNode;P&&(k.height=P.offsetHeight)}}function vt(f,v,k){var P=k&&null!=k.top?Math.max(0,k.top):f.scroller.scrollTop;P=Math.floor(P-kt(f));var Z=k&&null!=k.bottom?k.bottom:P+f.wrapper.clientHeight,he=rs(v,P),Fe=rs(v,Z);if(k&&k.ensure){var Be=k.ensure.from.line,ot=k.ensure.to.line;Be<he?(he=Be,Fe=rs(v,Il(ui(v,Be))+f.wrapper.clientHeight)):Math.min(ot,v.lastLine())>=Fe&&(he=rs(v,Il(ui(v,ot))-f.wrapper.clientHeight),Fe=ot)}return{from:he,to:Math.max(Fe,he+1)}}function pr(f,v){var k=f.display,P=hd(f.display);v.top<0&&(v.top=0);var Z=f.curOp&&null!=f.curOp.scrollTop?f.curOp.scrollTop:k.scroller.scrollTop,he=oi(f),Fe={};v.bottom-v.top>he&&(v.bottom=v.top+he);var Be=f.doc.height+Br(k),ft=v.bottom>Be-P;if(v.top<Z)Fe.scrollTop=v.top<P?0:v.top;else if(v.bottom>Z+he){var jr=Math.min(v.top,(ft?Be:v.bottom)-he);jr!=Z&&(Fe.scrollTop=jr)}var Rr=f.options.fixedGutter?0:k.gutters.offsetWidth,_n=f.curOp&&null!=f.curOp.scrollLeft?f.curOp.scrollLeft:k.scroller.scrollLeft-Rr,Tn=On(f)-k.gutters.offsetWidth,wo=v.right-v.left>Tn;return wo&&(v.right=v.left+Tn),v.left<10?Fe.scrollLeft=0:v.left<_n?Fe.scrollLeft=Math.max(0,v.left+Rr-(wo?0:10)):v.right>Tn+_n-3&&(Fe.scrollLeft=v.right+(wo?0:10)-Tn),Fe}function Sr(f,v){null!=v&&(qn(f),f.curOp.scrollTop=(null==f.curOp.scrollTop?f.doc.scrollTop:f.curOp.scrollTop)+v)}function Qt(f){qn(f);var v=f.getCursor();f.curOp.scrollToPos={from:v,to:v,margin:f.options.cursorScrollMargin}}function Lr(f,v,k){null==v&&null==k||qn(f),null!=v&&(f.curOp.scrollLeft=v),null!=k&&(f.curOp.scrollTop=k)}function qn(f){var v=f.curOp.scrollToPos;v&&(f.curOp.scrollToPos=null,Fo(f,Qf(f,v.from),Qf(f,v.to),v.margin))}function Fo(f,v,k,P){var Z=pr(f,{left:Math.min(v.left,k.left),top:Math.min(v.top,k.top)-P,right:Math.max(v.right,k.right),bottom:Math.max(v.bottom,k.bottom)+P});Lr(f,Z.scrollLeft,Z.scrollTop)}function gi(f,v){Math.abs(f.doc.scrollTop-v)<2||(z||Is(f,{top:v}),po(f,v,!0),z&&Is(f),Po(f,100))}function po(f,v,k){v=Math.max(0,Math.min(f.display.scroller.scrollHeight-f.display.scroller.clientHeight,v)),(f.display.scroller.scrollTop!=v||k)&&(f.doc.scrollTop=v,f.display.scrollbars.setScrollTop(v),f.display.scroller.scrollTop!=v&&(f.display.scroller.scrollTop=v))}function Jr(f,v,k,P){v=Math.max(0,Math.min(v,f.display.scroller.scrollWidth-f.display.scroller.clientWidth)),(k?v==f.doc.scrollLeft:Math.abs(f.doc.scrollLeft-v)<2)&&!P||(f.doc.scrollLeft=v,va(f),f.display.scroller.scrollLeft!=v&&(f.display.scroller.scrollLeft=v),f.display.scrollbars.setScrollLeft(v))}function lo(f){var v=f.display,k=v.gutters.offsetWidth,P=Math.round(f.doc.height+Br(f.display));return{clientHeight:v.scroller.clientHeight,viewHeight:v.wrapper.clientHeight,scrollWidth:v.scroller.scrollWidth,clientWidth:v.scroller.clientWidth,viewWidth:v.wrapper.clientWidth,barLeft:f.options.fixedGutter?k:0,docHeight:P,scrollHeight:P+vn(f)+v.barHeight,nativeBarWidth:v.nativeBarWidth,gutterWidth:k}}var zo=function(f,v,k){this.cm=k;var P=this.vert=$e("div",[$e("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),Z=this.horiz=$e("div",[$e("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");P.tabIndex=Z.tabIndex=-1,f(P),f(Z),li(P,"scroll",function(){P.clientHeight&&v(P.scrollTop,"vertical")}),li(Z,"scroll",function(){Z.clientWidth&&v(Z.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,U&&R<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};zo.prototype.update=function(f){var v=f.scrollWidth>f.clientWidth+1,k=f.scrollHeight>f.clientHeight+1,P=f.nativeBarWidth;return k?(this.vert.style.display="block",this.vert.style.bottom=v?P+"px":"0",this.vert.firstChild.style.height=Math.max(0,f.scrollHeight-f.clientHeight+(f.viewHeight-(v?P:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),v?(this.horiz.style.display="block",this.horiz.style.right=k?P+"px":"0",this.horiz.style.left=f.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,f.scrollWidth-f.clientWidth+(f.viewWidth-f.barLeft-(k?P:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&f.clientHeight>0&&(0==P&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:k?P:0,bottom:v?P:0}},zo.prototype.setScrollLeft=function(f){this.horiz.scrollLeft!=f&&(this.horiz.scrollLeft=f),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},zo.prototype.setScrollTop=function(f){this.vert.scrollTop!=f&&(this.vert.scrollTop=f),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},zo.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Ce&&!te?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new mo,this.disableVert=new mo},zo.prototype.enableZeroWidthBar=function(f,v,k){f.style.pointerEvents="auto",v.set(1e3,function P(){var Z=f.getBoundingClientRect();("vert"==k?document.elementFromPoint(Z.right-1,(Z.top+Z.bottom)/2):document.elementFromPoint((Z.right+Z.left)/2,Z.bottom-1))!=f?f.style.pointerEvents="none":v.set(1e3,P)})},zo.prototype.clear=function(){var f=this.horiz.parentNode;f.removeChild(this.horiz),f.removeChild(this.vert)};var cr=function(){};function hr(f,v){v||(v=lo(f));var k=f.display.barWidth,P=f.display.barHeight;Xr(f,v);for(var Z=0;Z<4&&k!=f.display.barWidth||P!=f.display.barHeight;Z++)k!=f.display.barWidth&&f.options.lineWrapping&&tt(f),Xr(f,lo(f)),k=f.display.barWidth,P=f.display.barHeight}function Xr(f,v){var k=f.display,P=k.scrollbars.update(v);k.sizer.style.paddingRight=(k.barWidth=P.right)+"px",k.sizer.style.paddingBottom=(k.barHeight=P.bottom)+"px",k.heightForcer.style.borderBottom=P.bottom+"px solid transparent",P.right&&P.bottom?(k.scrollbarFiller.style.display="block",k.scrollbarFiller.style.height=P.bottom+"px",k.scrollbarFiller.style.width=P.right+"px"):k.scrollbarFiller.style.display="",P.bottom&&f.options.coverGutterNextToScrollbar&&f.options.fixedGutter?(k.gutterFiller.style.display="block",k.gutterFiller.style.height=P.bottom+"px",k.gutterFiller.style.width=v.gutterWidth+"px"):k.gutterFiller.style.display=""}cr.prototype.update=function(){return{bottom:0,right:0}},cr.prototype.setScrollLeft=function(){},cr.prototype.setScrollTop=function(){},cr.prototype.clear=function(){};var rn={native:zo,null:cr};function jo(f){f.display.scrollbars&&(f.display.scrollbars.clear(),f.display.scrollbars.addClass&&Me(f.display.wrapper,f.display.scrollbars.addClass)),f.display.scrollbars=new rn[f.options.scrollbarStyle](function(v){f.display.wrapper.insertBefore(v,f.display.scrollbarFiller),li(v,"mousedown",function(){f.state.focused&&setTimeout(function(){return f.display.input.focus()},0)}),v.setAttribute("cm-not-content","true")},function(v,k){"horizontal"==k?Jr(f,v):gi(f,v)},f),f.display.scrollbars.addClass&&mr(f.display.wrapper,f.display.scrollbars.addClass)}var So=0;function Zo(f){f.curOp={cm:f,viewChanged:!1,startHeight:f.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++So,markArrays:null},function cd(f){Dc?Dc.ops.push(f):f.ownsGroup=Dc={ops:[f],delayedCallbacks:[]}}(f.curOp)}function ro(f){var v=f.curOp;v&&function oc(f,v){var k=f.ownsGroup;if(k)try{!function Ef(f){var v=f.delayedCallbacks,k=0;do{for(;k<v.length;k++)v[k].call(null);for(var P=0;P<f.ops.length;P++){var Z=f.ops[P];if(Z.cursorActivityHandlers)for(;Z.cursorActivityCalled<Z.cursorActivityHandlers.length;)Z.cursorActivityHandlers[Z.cursorActivityCalled++].call(null,Z.cm)}}while(k<v.length)}(k)}finally{Dc=null,v(k)}}(v,function(k){for(var P=0;P<k.ops.length;P++)k.ops[P].cm.curOp=null;!function Ho(f){for(var v=f.ops,k=0;k<v.length;k++)Xo(v[k]);for(var P=0;P<v.length;P++)ka(v[P]);for(var Z=0;Z<v.length;Z++)zt(v[Z]);for(var he=0;he<v.length;he++)Ir(v[he]);for(var Fe=0;Fe<v.length;Fe++)Gr(v[Fe])}(k)})}function Xo(f){var v=f.cm,k=v.display;(function ga(f){var v=f.display;!v.scrollbarsClipped&&v.scroller.offsetWidth&&(v.nativeBarWidth=v.scroller.offsetWidth-v.scroller.clientWidth,v.heightForcer.style.height=vn(f)+"px",v.sizer.style.marginBottom=-v.nativeBarWidth+"px",v.sizer.style.borderRightWidth=vn(f)+"px",v.scrollbarsClipped=!0)})(v),f.updateMaxLine&&Aa(v),f.mustUpdate=f.viewChanged||f.forceUpdate||null!=f.scrollTop||f.scrollToPos&&(f.scrollToPos.from.line<k.viewFrom||f.scrollToPos.to.line>=k.viewTo)||k.maxLineChanged&&v.options.lineWrapping,f.update=f.mustUpdate&&new Ni(v,f.mustUpdate&&{top:f.scrollTop,ensure:f.scrollToPos},f.forceUpdate)}function ka(f){f.updatedDisplay=f.mustUpdate&&ei(f.cm,f.update)}function zt(f){var v=f.cm,k=v.display;f.updatedDisplay&&tt(v),f.barMeasure=lo(v),k.maxLineChanged&&!v.options.lineWrapping&&(f.adjustWidthTo=gl(v,k.maxLine,k.maxLine.text.length).left+3,v.display.sizerWidth=f.adjustWidthTo,f.barMeasure.scrollWidth=Math.max(k.scroller.clientWidth,k.sizer.offsetLeft+f.adjustWidthTo+vn(v)+v.display.barWidth),f.maxScrollLeft=Math.max(0,k.sizer.offsetLeft+f.adjustWidthTo-On(v))),(f.updatedDisplay||f.selectionChanged)&&(f.preparedSelection=k.input.prepareSelection())}function Ir(f){var v=f.cm;null!=f.adjustWidthTo&&(v.display.sizer.style.minWidth=f.adjustWidthTo+"px",f.maxScrollLeft<v.doc.scrollLeft&&Jr(v,Math.min(v.display.scroller.scrollLeft,f.maxScrollLeft),!0),v.display.maxLineChanged=!1);var k=f.focus&&f.focus==Wt();f.preparedSelection&&v.display.input.showSelection(f.preparedSelection,k),(f.updatedDisplay||f.startHeight!=v.doc.height)&&hr(v,f.barMeasure),f.updatedDisplay&&ua(v,f.barMeasure),f.selectionChanged&&xe(v),v.state.focused&&f.updateInput&&v.display.input.reset(f.typing),k&&fe(f.cm)}function Gr(f){var v=f.cm,k=v.display,P=v.doc;f.updatedDisplay&&Hr(v,f.update),null==k.wheelStartX||null==f.scrollTop&&null==f.scrollLeft&&!f.scrollToPos||(k.wheelStartX=k.wheelStartY=null),null!=f.scrollTop&&po(v,f.scrollTop,f.forceScroll),null!=f.scrollLeft&&Jr(v,f.scrollLeft,!0,!0),f.scrollToPos&&function Ht(f,v){if(!gt(f,"scrollCursorIntoView")){var k=f.display,P=k.sizer.getBoundingClientRect(),Z=null;if(v.top+P.top<0?Z=!0:v.bottom+P.top>(window.innerHeight||document.documentElement.clientHeight)&&(Z=!1),null!=Z&&!pe){var he=$e("div","\u200b",null,"position: absolute;\n                         top: "+(v.top-k.viewOffset-kt(f.display))+"px;\n                         height: "+(v.bottom-v.top+vn(f)+k.barHeight)+"px;\n                         left: "+v.left+"px; width: "+Math.max(2,v.right-v.left)+"px;");f.display.lineSpace.appendChild(he),he.scrollIntoView(Z),f.display.lineSpace.removeChild(he)}}}(v,function Qe(f,v,k,P){var Z;null==P&&(P=0),f.options.lineWrapping||v!=k||(k="before"==v.sticky?Qo(v.line,v.ch+1,"before"):v,v=v.ch?Qo(v.line,"before"==v.sticky?v.ch-1:v.ch,"after"):v);for(var he=0;he<5;he++){var Fe=!1,Be=Hd(f,v),ot=k&&k!=v?Hd(f,k):Be,ft=pr(f,Z={left:Math.min(Be.left,ot.left),top:Math.min(Be.top,ot.top)-P,right:Math.max(Be.left,ot.left),bottom:Math.max(Be.bottom,ot.bottom)+P}),jr=f.doc.scrollTop,Rr=f.doc.scrollLeft;if(null!=ft.scrollTop&&(gi(f,ft.scrollTop),Math.abs(f.doc.scrollTop-jr)>1&&(Fe=!0)),null!=ft.scrollLeft&&(Jr(f,ft.scrollLeft),Math.abs(f.doc.scrollLeft-Rr)>1&&(Fe=!0)),!Fe)break}return Z}(v,Vi(P,f.scrollToPos.from),Vi(P,f.scrollToPos.to),f.scrollToPos.margin));var Z=f.maybeHiddenMarkers,he=f.maybeUnhiddenMarkers;if(Z)for(var Fe=0;Fe<Z.length;++Fe)Z[Fe].lines.length||jt(Z[Fe],"hide");if(he)for(var Be=0;Be<he.length;++Be)he[Be].lines.length&&jt(he[Be],"unhide");k.wrapper.offsetHeight&&(P.scrollTop=v.display.scroller.scrollTop),f.changeObjs&&jt(v,"changes",v,f.changeObjs),f.update&&f.update.finish()}function on(f,v){if(f.curOp)return v();Zo(f);try{return v()}finally{ro(f)}}function bn(f,v){return function(){if(f.curOp)return v.apply(f,arguments);Zo(f);try{return v.apply(f,arguments)}finally{ro(f)}}}function Xn(f){return function(){if(this.curOp)return f.apply(this,arguments);Zo(this);try{return f.apply(this,arguments)}finally{ro(this)}}}function so(f){return function(){var v=this.cm;if(!v||v.curOp)return f.apply(this,arguments);Zo(v);try{return f.apply(this,arguments)}finally{ro(v)}}}function Po(f,v){f.doc.highlightFrontier<f.display.viewTo&&f.state.highlight.set(v,Pn($i,f))}function $i(f){var v=f.doc;if(!(v.highlightFrontier>=f.display.viewTo)){var k=+new Date+f.options.workTime,P=Od(f,v.highlightFrontier),Z=[];v.iter(P.line,Math.min(v.first+v.size,f.display.viewTo+500),function(he){if(P.line>=f.display.viewFrom){var Fe=he.styles,Be=he.text.length>f.options.maxHighlightLength?Io(v.mode,P.state):null,ot=Wc(f,he,P,!0);Be&&(P.state=Be),he.styles=ot.styles;var ft=he.styleClasses,jr=ot.classes;jr?he.styleClasses=jr:ft&&(he.styleClasses=null);for(var Rr=!Fe||Fe.length!=he.styles.length||ft!=jr&&(!ft||!jr||ft.bgClass!=jr.bgClass||ft.textClass!=jr.textClass),_n=0;!Rr&&_n<Fe.length;++_n)Rr=Fe[_n]!=he.styles[_n];Rr&&Z.push(P.line),he.stateAfter=P.save(),P.nextLine()}else he.text.length<=f.options.maxHighlightLength&&Ml(f,he.text,P),he.stateAfter=P.line%5==0?P.save():null,P.nextLine();if(+new Date>k)return Po(f,f.options.workDelay),!0}),v.highlightFrontier=P.line,v.modeFrontier=Math.max(v.modeFrontier,P.line),Z.length&&on(f,function(){for(var he=0;he<Z.length;he++)Xp(f,Z[he],"text")})}}var Ni=function(f,v,k){var P=f.display;this.viewport=v,this.visible=vt(P,f.doc,v),this.editorIsHidden=!P.wrapper.offsetWidth,this.wrapperHeight=P.wrapper.clientHeight,this.wrapperWidth=P.wrapper.clientWidth,this.oldDisplayWidth=On(f),this.force=k,this.dims=$m(f),this.events=[]};function ei(f,v){var k=f.display,P=f.doc;if(v.editorIsHidden)return Mp(f),!1;if(!v.force&&v.visible.from>=k.viewFrom&&v.visible.to<=k.viewTo&&(null==k.updateLineNumbers||k.updateLineNumbers>=k.viewTo)&&k.renderedView==k.view&&0==Xf(f))return!1;da(f)&&(Mp(f),v.dims=$m(f));var Z=P.first+P.size,he=Math.max(v.visible.from-f.options.viewportMargin,P.first),Fe=Math.min(Z,v.visible.to+f.options.viewportMargin);k.viewFrom<he&&he-k.viewFrom<20&&(he=Math.max(P.first,k.viewFrom)),k.viewTo>Fe&&k.viewTo-Fe<20&&(Fe=Math.min(Z,k.viewTo)),kc&&(he=es(f.doc,he),Fe=Xi(f.doc,Fe));var Be=he!=k.viewFrom||Fe!=k.viewTo||k.lastWrapHeight!=v.wrapperHeight||k.lastWrapWidth!=v.wrapperWidth;(function Gg(f,v,k){var P=f.display;0==P.view.length||v>=P.viewTo||k<=P.viewFrom?(P.view=Dp(f,v,k),P.viewFrom=v):(P.viewFrom>v?P.view=Dp(f,v,P.viewFrom).concat(P.view):P.viewFrom<v&&(P.view=P.view.slice(Eu(f,v))),P.viewFrom=v,P.viewTo<k?P.view=P.view.concat(Dp(f,P.viewTo,k)):P.viewTo>k&&(P.view=P.view.slice(0,Eu(f,k)))),P.viewTo=k})(f,he,Fe),k.viewOffset=Il(ui(f.doc,k.viewFrom)),f.display.mover.style.top=k.viewOffset+"px";var ot=Xf(f);if(!Be&&0==ot&&!v.force&&k.renderedView==k.view&&(null==k.updateLineNumbers||k.updateLineNumbers>=k.viewTo))return!1;var ft=function _a(f){if(f.hasFocus())return null;var v=Wt();if(!v||!Ke(f.display.lineDiv,v))return null;var k={activeElt:v};if(window.getSelection){var P=window.getSelection();P.anchorNode&&P.extend&&Ke(f.display.lineDiv,P.anchorNode)&&(k.anchorNode=P.anchorNode,k.anchorOffset=P.anchorOffset,k.focusNode=P.focusNode,k.focusOffset=P.focusOffset)}return k}(f);return ot>4&&(k.lineDiv.style.display="none"),function qa(f,v,k){var P=f.display,Z=f.options.lineNumbers,he=P.lineDiv,Fe=he.firstChild;function Be(wo){var ni=wo.nextSibling;return T&&Ce&&f.display.currentWheelTarget==wo?wo.style.display="none":wo.parentNode.removeChild(wo),ni}for(var ot=P.view,ft=P.viewFrom,jr=0;jr<ot.length;jr++){var Rr=ot[jr];if(!Rr.hidden)if(Rr.node&&Rr.node.parentNode==he){for(;Fe!=Rr.node;)Fe=Be(Fe);var _n=Z&&null!=v&&v<=ft&&Rr.lineNumber;Rr.changes&&(No(Rr.changes,"gutter")>-1&&(_n=!1),Mu(f,Rr,ft,k)),_n&&(Ze(Rr.lineNumber),Rr.lineNumber.appendChild(document.createTextNode(gc(f.options,ft)))),Fe=Rr.node.nextSibling}else{var Tn=Td(f,Rr,ft,k);he.insertBefore(Tn,Fe)}ft+=Rr.size}for(;Fe;)Fe=Be(Fe)}(f,k.updateLineNumbers,v.dims),ot>4&&(k.lineDiv.style.display=""),k.renderedView=k.view,function vs(f){if(f&&f.activeElt&&f.activeElt!=Wt()&&(f.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(f.activeElt.nodeName)&&f.anchorNode&&Ke(document.body,f.anchorNode)&&Ke(document.body,f.focusNode))){var v=window.getSelection(),k=document.createRange();k.setEnd(f.anchorNode,f.anchorOffset),k.collapse(!1),v.removeAllRanges(),v.addRange(k),v.extend(f.focusNode,f.focusOffset)}}(ft),Ze(k.cursorDiv),Ze(k.selectionDiv),k.gutters.style.height=k.sizer.style.minHeight=0,Be&&(k.lastWrapHeight=v.wrapperHeight,k.lastWrapWidth=v.wrapperWidth,Po(f,400)),k.updateLineNumbers=null,!0}function Hr(f,v){for(var k=v.viewport,P=!0;;P=!1){if(P&&f.options.lineWrapping&&v.oldDisplayWidth!=On(f))P&&(v.visible=vt(f.display,f.doc,k));else if(k&&null!=k.top&&(k={top:Math.min(f.doc.height+Br(f.display)-oi(f),k.top)}),v.visible=vt(f.display,f.doc,k),v.visible.from>=f.display.viewFrom&&v.visible.to<=f.display.viewTo)break;if(!ei(f,v))break;tt(f);var Z=lo(f);Sf(f),hr(f,Z),ua(f,Z),v.force=!1}v.signal(f,"update",f),f.display.viewFrom==f.display.reportedViewFrom&&f.display.viewTo==f.display.reportedViewTo||(v.signal(f,"viewportChange",f,f.display.viewFrom,f.display.viewTo),f.display.reportedViewFrom=f.display.viewFrom,f.display.reportedViewTo=f.display.viewTo)}function Is(f,v){var k=new Ni(f,v);if(ei(f,k)){tt(f),Hr(f,k);var P=lo(f);Sf(f),hr(f,P),ua(f,P),k.finish()}}function Bi(f){f.sizer.style.marginLeft=f.gutters.offsetWidth+"px",ml(f,"gutterChanged",f)}function ua(f,v){f.display.sizer.style.minHeight=v.docHeight+"px",f.display.heightForcer.style.top=v.docHeight+"px",f.display.gutters.style.height=v.docHeight+f.display.barHeight+vn(f)+"px"}function va(f){var v=f.display,k=v.view;if(v.alignWidgets||v.gutters.firstChild&&f.options.fixedGutter){for(var P=Jm(v)-v.scroller.scrollLeft+f.doc.scrollLeft,Z=v.gutters.offsetWidth,he=P+"px",Fe=0;Fe<k.length;Fe++)if(!k[Fe].hidden){f.options.fixedGutter&&(k[Fe].gutter&&(k[Fe].gutter.style.left=he),k[Fe].gutterBackground&&(k[Fe].gutterBackground.style.left=he));var Be=k[Fe].alignable;if(Be)for(var ot=0;ot<Be.length;ot++)Be[ot].style.left=he}f.options.fixedGutter&&(v.gutters.style.left=P+Z+"px")}}function da(f){if(!f.options.lineNumbers)return!1;var v=f.doc,k=gc(f.options,v.first+v.size-1),P=f.display;if(k.length!=P.lineNumChars){var Z=P.measure.appendChild($e("div",[$e("div",k)],"CodeMirror-linenumber CodeMirror-gutter-elt")),he=Z.firstChild.offsetWidth,Fe=Z.offsetWidth-he;return P.lineGutter.style.width="",P.lineNumInnerWidth=Math.max(he,P.lineGutter.offsetWidth-Fe)+1,P.lineNumWidth=P.lineNumInnerWidth+Fe,P.lineNumChars=P.lineNumInnerWidth?k.length:-1,P.lineGutter.style.width=P.lineNumWidth+"px",Bi(f.display),!0}return!1}function os(f,v){for(var k=[],P=!1,Z=0;Z<f.length;Z++){var he=f[Z],Fe=null;if("string"!=typeof he&&(Fe=he.style,he=he.className),"CodeMirror-linenumbers"==he){if(!v)continue;P=!0}k.push({className:he,style:Fe})}return v&&!P&&k.push({className:"CodeMirror-linenumbers",style:null}),k}function Es(f){var v=f.gutters,k=f.gutterSpecs;Ze(v),f.lineGutter=null;for(var P=0;P<k.length;++P){var Z=k[P],he=Z.className,Fe=Z.style,Be=v.appendChild($e("div",null,"CodeMirror-gutter "+he));Fe&&(Be.style.cssText=Fe),"CodeMirror-linenumbers"==he&&(f.lineGutter=Be,Be.style.width=(f.lineNumWidth||1)+"px")}v.style.display=k.length?"":"none",Bi(f)}function Ts(f){Es(f.display),Uu(f),va(f)}function js(f,v,k,P){var Z=this;this.input=k,Z.scrollbarFiller=$e("div",null,"CodeMirror-scrollbar-filler"),Z.scrollbarFiller.setAttribute("cm-not-content","true"),Z.gutterFiller=$e("div",null,"CodeMirror-gutter-filler"),Z.gutterFiller.setAttribute("cm-not-content","true"),Z.lineDiv=Ct("div",null,"CodeMirror-code"),Z.selectionDiv=$e("div",null,null,"position: relative; z-index: 1"),Z.cursorDiv=$e("div",null,"CodeMirror-cursors"),Z.measure=$e("div",null,"CodeMirror-measure"),Z.lineMeasure=$e("div",null,"CodeMirror-measure"),Z.lineSpace=Ct("div",[Z.measure,Z.lineMeasure,Z.selectionDiv,Z.cursorDiv,Z.lineDiv],null,"position: relative; outline: none");var he=Ct("div",[Z.lineSpace],"CodeMirror-lines");Z.mover=$e("div",[he],null,"position: relative"),Z.sizer=$e("div",[Z.mover],"CodeMirror-sizer"),Z.sizerWidth=null,Z.heightForcer=$e("div",null,null,"position: absolute; height: "+Di+"px; width: 1px;"),Z.gutters=$e("div",null,"CodeMirror-gutters"),Z.lineGutter=null,Z.scroller=$e("div",[Z.sizer,Z.heightForcer,Z.gutters],"CodeMirror-scroll"),Z.scroller.setAttribute("tabIndex","-1"),Z.wrapper=$e("div",[Z.scrollbarFiller,Z.gutterFiller,Z.scroller],"CodeMirror"),Z.wrapper.setAttribute("translate","no"),U&&R<8&&(Z.gutters.style.zIndex=-1,Z.scroller.style.paddingRight=0),T||z&&ge||(Z.scroller.draggable=!0),f&&(f.appendChild?f.appendChild(Z.wrapper):f(Z.wrapper)),Z.viewFrom=Z.viewTo=v.first,Z.reportedViewFrom=Z.reportedViewTo=v.first,Z.view=[],Z.renderedView=null,Z.externalMeasured=null,Z.viewOffset=0,Z.lastWrapHeight=Z.lastWrapWidth=0,Z.updateLineNumbers=null,Z.nativeBarWidth=Z.barHeight=Z.barWidth=0,Z.scrollbarsClipped=!1,Z.lineNumWidth=Z.lineNumInnerWidth=Z.lineNumChars=null,Z.alignWidgets=!1,Z.cachedCharWidth=Z.cachedTextHeight=Z.cachedPaddingH=null,Z.maxLine=null,Z.maxLineLength=0,Z.maxLineChanged=!1,Z.wheelDX=Z.wheelDY=Z.wheelStartX=Z.wheelStartY=null,Z.shift=!1,Z.selForContextMenu=null,Z.activeTouch=null,Z.gutterSpecs=os(P.gutters,P.lineNumbers),Es(Z),k.init(Z)}Ni.prototype.signal=function(f,v){tr(f,v)&&this.events.push(arguments)},Ni.prototype.finish=function(){for(var f=0;f<this.events.length;f++)jt.apply(null,this.events[f])};var pl=0,zs=null;function As(f){var v=f.wheelDeltaX,k=f.wheelDeltaY;return null==v&&f.detail&&f.axis==f.HORIZONTAL_AXIS&&(v=f.detail),null==k&&f.detail&&f.axis==f.VERTICAL_AXIS?k=f.detail:null==k&&(k=f.wheelDelta),{x:v,y:k}}function tl(f){var v=As(f);return v.x*=zs,v.y*=zs,v}function wa(f,v){var k=As(v),P=k.x,Z=k.y,he=f.display,Fe=he.scroller,ot=Fe.scrollHeight>Fe.clientHeight;if(P&&Fe.scrollWidth>Fe.clientWidth||Z&&ot){if(Z&&Ce&&T)e:for(var ft=v.target,jr=he.view;ft!=Fe;ft=ft.parentNode)for(var Rr=0;Rr<jr.length;Rr++)if(jr[Rr].node==ft){f.display.currentWheelTarget=ft;break e}if(P&&!z&&!Y&&null!=zs)return Z&&ot&&gi(f,Math.max(0,Fe.scrollTop+Z*zs)),Jr(f,Math.max(0,Fe.scrollLeft+P*zs)),(!Z||Z&&ot)&&St(v),void(he.wheelStartX=null);if(Z&&null!=zs){var _n=Z*zs,Tn=f.doc.scrollTop,wo=Tn+he.wrapper.clientHeight;_n<0?Tn=Math.max(0,Tn+_n-50):wo=Math.min(f.doc.height,wo+_n+50),Is(f,{top:Tn,bottom:wo})}pl<20&&(null==he.wheelStartX?(he.wheelStartX=Fe.scrollLeft,he.wheelStartY=Fe.scrollTop,he.wheelDX=P,he.wheelDY=Z,setTimeout(function(){if(null!=he.wheelStartX){var ni=Fe.scrollLeft-he.wheelStartX,Mi=Fe.scrollTop-he.wheelStartY,sa=Mi&&he.wheelDY&&Mi/he.wheelDY||ni&&he.wheelDX&&ni/he.wheelDX;he.wheelStartX=he.wheelStartY=null,sa&&(zs=(zs*pl+sa)/(pl+1),++pl)}},200)):(he.wheelDX+=P,he.wheelDY+=Z))}}U?zs=-.53:z?zs=15:L?zs=-.7:ee&&(zs=-.3333333333333333);var Al=function(f,v){this.ranges=f,this.primIndex=v};Al.prototype.primary=function(){return this.ranges[this.primIndex]},Al.prototype.equals=function(f){if(f==this)return!0;if(f.primIndex!=this.primIndex||f.ranges.length!=this.ranges.length)return!1;for(var v=0;v<this.ranges.length;v++){var k=this.ranges[v],P=f.ranges[v];if(!Et(k.anchor,P.anchor)||!Et(k.head,P.head))return!1}return!0},Al.prototype.deepCopy=function(){for(var f=[],v=0;v<this.ranges.length;v++)f[v]=new $a(Mr(this.ranges[v].anchor),Mr(this.ranges[v].head));return new Al(f,this.primIndex)},Al.prototype.somethingSelected=function(){for(var f=0;f<this.ranges.length;f++)if(!this.ranges[f].empty())return!0;return!1},Al.prototype.contains=function(f,v){v||(v=f);for(var k=0;k<this.ranges.length;k++){var P=this.ranges[k];if(Ba(v,P.from())>=0&&Ba(f,P.to())<=0)return k}return-1};var $a=function(f,v){this.anchor=f,this.head=v};function Kc(f,v,k){var P=f&&f.options.selectionsMayTouch,Z=v[k];v.sort(function(_n,Tn){return Ba(_n.from(),Tn.from())}),k=No(v,Z);for(var he=1;he<v.length;he++){var Fe=v[he],Be=v[he-1],ot=Ba(Be.to(),Fe.from());if(P&&!Fe.empty()?ot>0:ot>=0){var ft=oa(Be.from(),Fe.from()),jr=Ao(Be.to(),Fe.to()),Rr=Be.empty()?Fe.from()==Fe.head:Be.from()==Be.head;he<=k&&--k,v.splice(--he,2,new $a(Rr?jr:ft,Rr?ft:jr))}}return new Al(v,k)}function Ws(f,v){return new Al([new $a(f,v||f)],0)}function al(f){return f.text?Qo(f.from.line+f.text.length-1,dn(f.text).length+(1==f.text.length?f.from.ch:0)):f.to}function Jd(f,v){if(Ba(f,v.from)<0)return f;if(Ba(f,v.to)<=0)return al(v);var k=f.line+v.text.length-(v.to.line-v.from.line)-1,P=f.ch;return f.line==v.to.line&&(P+=al(v).ch-v.to.ch),Qo(k,P)}function Ol(f,v){for(var k=[],P=0;P<f.sel.ranges.length;P++){var Z=f.sel.ranges[P];k.push(new $a(Jd(Z.anchor,v),Jd(Z.head,v)))}return Kc(f.cm,k,f.sel.primIndex)}function ku(f,v,k){return f.line==v.line?Qo(k.line,f.ch-v.ch+k.ch):Qo(k.line+(f.line-v.line),f.ch)}function vl(f){f.doc.mode=Jt(f.options,f.doc.modeOption),Pd(f)}function Pd(f){f.doc.iter(function(v){v.stateAfter&&(v.stateAfter=null),v.styles&&(v.styles=null)}),f.doc.modeFrontier=f.doc.highlightFrontier=f.doc.first,Po(f,100),f.state.modeGen++,f.curOp&&Uu(f)}function yc(f,v){return 0==v.from.ch&&0==v.to.ch&&""==dn(v.text)&&(!f.cm||f.cm.options.wholeLineUpdateBefore)}function Ss(f,v,k,P){function Z(Ta){return k?k[Ta]:null}function he(Ta,Fi,fa){(function Ic(f,v,k,P){f.text=v,f.stateAfter&&(f.stateAfter=null),f.styles&&(f.styles=null),null!=f.order&&(f.order=null),et(f),Ye(f,k);var Z=P?P(f):1;Z!=f.height&&Bs(f,Z)})(Ta,Fi,fa,P),ml(Ta,"change",Ta,v)}function Fe(Ta,Fi){for(var fa=[],zi=Ta;zi<Fi;++zi)fa.push(new uc(ft[zi],Z(zi),P));return fa}var Be=v.from,ot=v.to,ft=v.text,jr=ui(f,Be.line),Rr=ui(f,ot.line),_n=dn(ft),Tn=Z(ft.length-1),wo=ot.line-Be.line;if(v.full)f.insert(0,Fe(0,ft.length)),f.remove(ft.length,f.size-ft.length);else if(yc(f,v)){var ni=Fe(0,ft.length-1);he(Rr,Rr.text,Tn),wo&&f.remove(Be.line,wo),ni.length&&f.insert(Be.line,ni)}else if(jr==Rr)if(1==ft.length)he(jr,jr.text.slice(0,Be.ch)+_n+jr.text.slice(ot.ch),Tn);else{var Mi=Fe(1,ft.length-1);Mi.push(new uc(_n+jr.text.slice(ot.ch),Tn,P)),he(jr,jr.text.slice(0,Be.ch)+ft[0],Z(0)),f.insert(Be.line+1,Mi)}else if(1==ft.length)he(jr,jr.text.slice(0,Be.ch)+ft[0]+Rr.text.slice(ot.ch),Z(0)),f.remove(Be.line+1,wo);else{he(jr,jr.text.slice(0,Be.ch)+ft[0],Z(0)),he(Rr,_n+Rr.text.slice(ot.ch),Tn);var sa=Fe(1,ft.length-1);wo>1&&f.remove(Be.line+1,wo-1),f.insert(Be.line+1,sa)}ml(f,"change",f,v)}function Ys(f,v,k){!function P(Z,he,Fe){if(Z.linked)for(var Be=0;Be<Z.linked.length;++Be){var ot=Z.linked[Be];if(ot.doc!=he){var ft=Fe&&ot.sharedHist;k&&!ft||(v(ot.doc,ft),P(ot.doc,Z,ft))}}}(f,null,!0)}function Ap(f,v){if(v.cm)throw new Error("This document is already in use.");f.doc=v,v.cm=f,Sm(f),vl(f),Ou(f),f.options.direction=v.direction,f.options.lineWrapping||Aa(f),f.options.mode=v.modeOption,Uu(f)}function Ou(f){("rtl"==f.doc.direction?mr:Me)(f.display.lineDiv,"CodeMirror-rtl")}function Bu(f){this.done=[],this.undone=[],this.undoDepth=f?f.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=f?f.maxGeneration:1}function us(f,v){var k={from:Mr(v.from),to:al(v),text:ns(f,v.from,v.to)};return eh(f,k,v.from.line,v.to.line+1),Ys(f,function(P){return eh(P,k,v.from.line,v.to.line+1)},!0),k}function Yd(f){for(;f.length&&dn(f).ranges;)f.pop()}function Du(f,v,k,P){var Z=f.history;Z.undone.length=0;var he,Fe,Be=+new Date;if((Z.lastOp==P||Z.lastOrigin==v.origin&&v.origin&&("+"==v.origin.charAt(0)&&Z.lastModTime>Be-(f.cm?f.cm.options.historyEventDelay:500)||"*"==v.origin.charAt(0)))&&(he=function Wu(f,v){return v?(Yd(f.done),dn(f.done)):f.done.length&&!dn(f.done).ranges?dn(f.done):f.done.length>1&&!f.done[f.done.length-2].ranges?(f.done.pop(),dn(f.done)):void 0}(Z,Z.lastOp==P)))Fe=dn(he.changes),0==Ba(v.from,v.to)&&0==Ba(v.from,Fe.to)?Fe.to=al(v):he.changes.push(us(f,v));else{var ot=dn(Z.done);for(ot&&ot.ranges||Lu(f.sel,Z.done),he={changes:[us(f,v)],generation:Z.generation},Z.done.push(he);Z.done.length>Z.undoDepth;)Z.done.shift(),Z.done[0].ranges||Z.done.shift()}Z.done.push(k),Z.generation=++Z.maxGeneration,Z.lastModTime=Z.lastSelTime=Be,Z.lastOp=Z.lastSelOp=P,Z.lastOrigin=Z.lastSelOrigin=v.origin,Fe||jt(f,"historyAdded")}function Lu(f,v){var k=dn(v);k&&k.ranges&&k.equals(f)||v.push(f)}function eh(f,v,k,P){var Z=v["spans_"+f.id],he=0;f.iter(Math.max(f.first,k),Math.min(f.first+f.size,P),function(Fe){Fe.markedSpans&&((Z||(Z=v["spans_"+f.id]={}))[he]=Fe.markedSpans),++he})}function Lp(f){if(!f)return null;for(var v,k=0;k<f.length;++k)f[k].marker.explicitlyCleared?v||(v=f.slice(0,k)):v&&v.push(f[k]);return v?v.length?v:null:f}function gd(f,v){var k=function md(f,v){var k=v["spans_"+f.id];if(!k)return null;for(var P=[],Z=0;Z<v.text.length;++Z)P.push(Lp(k[Z]));return P}(f,v),P=Gu(f,v);if(!k)return P;if(!P)return k;for(var Z=0;Z<k.length;++Z){var he=k[Z],Fe=P[Z];if(he&&Fe)e:for(var Be=0;Be<Fe.length;++Be){for(var ot=Fe[Be],ft=0;ft<he.length;++ft)if(he[ft].marker==ot.marker)continue e;he.push(ot)}else Fe&&(k[Z]=Fe)}return k}function zc(f,v,k){for(var P=[],Z=0;Z<f.length;++Z){var he=f[Z];if(he.ranges)P.push(k?Al.prototype.deepCopy.call(he):he);else{var Fe=he.changes,Be=[];P.push({changes:Be});for(var ot=0;ot<Fe.length;++ot){var ft=Fe[ot],jr=void 0;if(Be.push({from:ft.from,to:ft.to,text:ft.text}),v)for(var Rr in ft)(jr=Rr.match(/^spans_(\d+)$/))&&No(v,Number(jr[1]))>-1&&(dn(Be)[Rr]=ft[Rr],delete ft[Rr])}}}return P}function Iu(f,v,k,P){if(P){var Z=f.anchor;if(k){var he=Ba(v,Z)<0;he!=Ba(k,Z)<0?(Z=v,v=k):he!=Ba(v,k)<0&&(v=k)}return new $a(Z,v)}return new $a(k||v,v)}function ru(f,v,k,P,Z){null==Z&&(Z=f.cm&&(f.cm.display.shift||f.extend)),Xl(f,new Al([Iu(f.sel.primary(),v,k,Z)],0),P)}function Qd(f,v,k){for(var P=[],Z=f.cm&&(f.cm.display.shift||f.extend),he=0;he<f.sel.ranges.length;he++)P[he]=Iu(f.sel.ranges[he],v[he],null,Z);Xl(f,Kc(f.cm,P,f.sel.primIndex),k)}function fp(f,v,k,P){var Z=f.sel.ranges.slice(0);Z[v]=k,Xl(f,Kc(f.cm,Z,f.sel.primIndex),P)}function th(f,v,k,P){Xl(f,Ws(v,k),P)}function nh(f,v,k){var P=f.history.done,Z=dn(P);Z&&Z.ranges?(P[P.length-1]=v,oh(f,v,k)):Xl(f,v,k)}function Xl(f,v,k){oh(f,v,k),function Vc(f,v,k,P){var Z=f.history,he=P&&P.origin;k==Z.lastSelOp||he&&Z.lastSelOrigin==he&&(Z.lastModTime==Z.lastSelTime&&Z.lastOrigin==he||function pc(f,v,k,P){var Z=v.charAt(0);return"*"==Z||"+"==Z&&k.ranges.length==P.ranges.length&&k.somethingSelected()==P.somethingSelected()&&new Date-f.history.lastSelTime<=(f.cm?f.cm.options.historyEventDelay:500)}(f,he,dn(Z.done),v))?Z.done[Z.done.length-1]=v:Lu(v,Z.done),Z.lastSelTime=+new Date,Z.lastSelOrigin=he,Z.lastSelOp=k,P&&!1!==P.clearRedo&&Yd(Z.undone)}(f,f.sel,f.cm?f.cm.curOp.id:NaN,k)}function oh(f,v,k){(tr(f,"beforeSelectionChange")||f.cm&&tr(f.cm,"beforeSelectionChange"))&&(v=function rh(f,v,k){var P={ranges:v.ranges,update:function(Z){this.ranges=[];for(var he=0;he<Z.length;he++)this.ranges[he]=new $a(Vi(f,Z[he].anchor),Vi(f,Z[he].head))},origin:k&&k.origin};return jt(f,"beforeSelectionChange",f,P),f.cm&&jt(f.cm,"beforeSelectionChange",f.cm,P),P.ranges!=v.ranges?Kc(f.cm,P.ranges,P.ranges.length-1):v}(f,v,k));var P=k&&k.bias||(Ba(v.primary().head,f.sel.primary().head)<0?-1:1);Pm(f,ih(f,v,P,!0)),k&&!1===k.scroll||!f.cm||"nocursor"==f.cm.getOption("readOnly")||Qt(f.cm)}function Pm(f,v){v.equals(f.sel)||(f.sel=v,f.cm&&(f.cm.curOp.updateInput=1,f.cm.curOp.selectionChanged=!0,Fr(f.cm)),ml(f,"cursorActivity",f))}function Mm(f){Pm(f,ih(f,f.sel,null,!1))}function ih(f,v,k,P){for(var Z,he=0;he<v.ranges.length;he++){var Fe=v.ranges[he],Be=v.ranges.length==f.sel.ranges.length&&f.sel.ranges[he],ot=Ph(f,Fe.anchor,Be&&Be.anchor,k,P),ft=Ph(f,Fe.head,Be&&Be.head,k,P);(Z||ot!=Fe.anchor||ft!=Fe.head)&&(Z||(Z=v.ranges.slice(0,he)),Z[he]=new $a(ot,ft))}return Z?Kc(f.cm,Z,v.primIndex):v}function Ip(f,v,k,P,Z){var he=ui(f,v.line);if(he.markedSpans)for(var Fe=0;Fe<he.markedSpans.length;++Fe){var Be=he.markedSpans[Fe],ot=Be.marker,ft="selectLeft"in ot?!ot.selectLeft:ot.inclusiveLeft,jr="selectRight"in ot?!ot.selectRight:ot.inclusiveRight;if((null==Be.from||(ft?Be.from<=v.ch:Be.from<v.ch))&&(null==Be.to||(jr?Be.to>=v.ch:Be.to>v.ch))){if(Z&&(jt(ot,"beforeCursorEnter"),ot.explicitlyCleared)){if(he.markedSpans){--Fe;continue}break}if(!ot.atomic)continue;if(k){var Rr=ot.find(P<0?1:-1),_n=void 0;if((P<0?jr:ft)&&(Rr=$u(f,Rr,-P,Rr&&Rr.line==v.line?he:null)),Rr&&Rr.line==v.line&&(_n=Ba(Rr,k))&&(P<0?_n<0:_n>0))return Ip(f,Rr,v,P,Z)}var Tn=ot.find(P<0?-1:1);return(P<0?ft:jr)&&(Tn=$u(f,Tn,P,Tn.line==v.line?he:null)),Tn?Ip(f,Tn,v,P,Z):null}}return v}function Ph(f,v,k,P,Z){var he=P||1;return Ip(f,v,k,he,Z)||!Z&&Ip(f,v,k,he,!0)||Ip(f,v,k,-he,Z)||!Z&&Ip(f,v,k,-he,!0)||(f.cantEdit=!0,Qo(f.first,0))}function $u(f,v,k,P){return k<0&&0==v.ch?v.line>f.first?Vi(f,Qo(v.line-1)):null:k>0&&v.ch==(P||ui(f,v.line)).text.length?v.line<f.first+f.size-1?Qo(v.line+1,0):null:new Qo(v.line,v.ch+k)}function Am(f){f.setSelection(Qo(f.firstLine(),0),Qo(f.lastLine()),zn)}function $l(f,v,k){var P={canceled:!1,from:v.from,to:v.to,text:v.text,origin:v.origin,cancel:function(){return P.canceled=!0}};return k&&(P.update=function(Z,he,Fe,Be){Z&&(P.from=Vi(f,Z)),he&&(P.to=Vi(f,he)),Fe&&(P.text=Fe),void 0!==Be&&(P.origin=Be)}),jt(f,"beforeChange",f,P),f.cm&&jt(f.cm,"beforeChange",f.cm,P),P.canceled?(f.cm&&(f.cm.curOp.updateInput=2),null):{from:P.from,to:P.to,text:P.text,origin:P.origin}}function Pf(f,v,k){if(f.cm){if(!f.cm.curOp)return bn(f.cm,Pf)(f,v,k);if(f.cm.state.suppressEdits)return}if(!(tr(f,"beforeChange")||f.cm&&tr(f.cm,"beforeChange"))||(v=$l(f,v,!0))){var P=Qc&&!k&&function Cf(f,v,k){var P=null;if(f.iter(v.line,k.line+1,function(Tn){if(Tn.markedSpans)for(var wo=0;wo<Tn.markedSpans.length;++wo){var ni=Tn.markedSpans[wo].marker;!ni.readOnly||P&&-1!=No(P,ni)||(P||(P=[])).push(ni)}}),!P)return null;for(var Z=[{from:v,to:k}],he=0;he<P.length;++he)for(var Fe=P[he],Be=Fe.find(0),ot=0;ot<Z.length;++ot){var ft=Z[ot];if(!(Ba(ft.to,Be.from)<0||Ba(ft.from,Be.to)>0)){var jr=[ot,1],Rr=Ba(ft.from,Be.from),_n=Ba(ft.to,Be.to);(Rr<0||!Fe.inclusiveLeft&&!Rr)&&jr.push({from:ft.from,to:Be.from}),(_n>0||!Fe.inclusiveRight&&!_n)&&jr.push({from:Be.to,to:ft.to}),Z.splice.apply(Z,jr),ot+=jr.length-3}}return Z}(f,v.from,v.to);if(P)for(var Z=P.length-1;Z>=0;--Z)ah(f,{from:P[Z].from,to:P[Z].to,text:Z?[""]:v.text,origin:v.origin});else ah(f,v)}}function ah(f,v){if(1!=v.text.length||""!=v.text[0]||0!=Ba(v.from,v.to)){var k=Ol(f,v);Du(f,v,k,f.cm?f.cm.curOp.id:NaN),Mf(f,v,k,Gu(f,v));var P=[];Ys(f,function(Z,he){he||-1!=No(P,Z.history)||(Xd(Z.history,v),P.push(Z.history)),Mf(Z,v,null,Gu(Z,v))})}}function sh(f,v,k){var P=f.cm&&f.cm.state.suppressEdits;if(!P||k){for(var Z,he=f.history,Fe=f.sel,Be="undo"==v?he.done:he.undone,ot="undo"==v?he.undone:he.done,ft=0;ft<Be.length&&(Z=Be[ft],k?!Z.ranges||Z.equals(f.sel):Z.ranges);ft++);if(ft!=Be.length){for(he.lastOrigin=he.lastSelOrigin=null;;){if(!(Z=Be.pop()).ranges){if(P)return void Be.push(Z);break}if(Lu(Z,ot),k&&!Z.equals(f.sel))return void Xl(f,Z,{clearRedo:!1});Fe=Z}var jr=[];Lu(Fe,ot),ot.push({changes:jr,generation:he.generation}),he.generation=Z.generation||++he.maxGeneration;for(var Rr=tr(f,"beforeChange")||f.cm&&tr(f.cm,"beforeChange"),_n=function(ni){var Mi=Z.changes[ni];if(Mi.origin=v,Rr&&!$l(f,Mi,!1))return Be.length=0,{};jr.push(us(f,Mi));var sa=ni?Ol(f,Mi):dn(Be);Mf(f,Mi,sa,gd(f,Mi)),!ni&&f.cm&&f.cm.scrollIntoView({from:Mi.from,to:al(Mi)});var Ta=[];Ys(f,function(Fi,fa){fa||-1!=No(Ta,Fi.history)||(Xd(Fi.history,Mi),Ta.push(Fi.history)),Mf(Fi,Mi,null,gd(Fi,Mi))})},Tn=Z.changes.length-1;Tn>=0;--Tn){var wo=_n(Tn);if(wo)return wo.v}}}}function Fc(f,v){if(0!=v&&(f.first+=v,f.sel=new Al(sn(f.sel.ranges,function(Z){return new $a(Qo(Z.anchor.line+v,Z.anchor.ch),Qo(Z.head.line+v,Z.head.ch))}),f.sel.primIndex),f.cm)){Uu(f.cm,f.first,f.first-v,v);for(var k=f.cm.display,P=k.viewFrom;P<k.viewTo;P++)Xp(f.cm,P,"gutter")}}function Mf(f,v,k,P){if(f.cm&&!f.cm.curOp)return bn(f.cm,Mf)(f,v,k,P);if(v.to.line<f.first)Fc(f,v.text.length-1-(v.to.line-v.from.line));else if(!(v.from.line>f.lastLine())){if(v.from.line<f.first){var Z=v.text.length-1-(f.first-v.from.line);Fc(f,Z),v={from:Qo(f.first,0),to:Qo(v.to.line+Z,v.to.ch),text:[dn(v.text)],origin:v.origin}}var he=f.lastLine();v.to.line>he&&(v={from:v.from,to:Qo(he,ui(f,he).text.length),text:[v.text[0]],origin:v.origin}),v.removed=ns(f,v.from,v.to),k||(k=Ol(f,v)),f.cm?function km(f,v,k){var P=f.doc,Z=f.display,he=v.from,Fe=v.to,Be=!1,ot=he.line;f.options.lineWrapping||(ot=To(Ri(ui(P,he.line))),P.iter(ot,Fe.line+1,function(Tn){if(Tn==Z.maxLine)return Be=!0,!0})),P.sel.contains(v.from,v.to)>-1&&Fr(f),Ss(P,v,k,bg(f)),f.options.lineWrapping||(P.iter(ot,he.line+v.text.length,function(Tn){var wo=vc(Tn);wo>Z.maxLineLength&&(Z.maxLine=Tn,Z.maxLineLength=wo,Z.maxLineChanged=!0,Be=!1)}),Be&&(f.curOp.updateMaxLine=!0)),function Yc(f,v){if(f.modeFrontier=Math.min(f.modeFrontier,v),!(f.highlightFrontier<v-10)){for(var k=f.first,P=v-1;P>k;P--){var Z=ui(f,P).stateAfter;if(Z&&(!(Z instanceof Oc)||P+Z.lookAhead<v)){k=P+1;break}}f.highlightFrontier=Math.min(f.highlightFrontier,k)}}(P,he.line),Po(f,400);var ft=v.text.length-(Fe.line-he.line)-1;v.full?Uu(f):he.line!=Fe.line||1!=v.text.length||yc(f.doc,v)?Uu(f,he.line,Fe.line+1,ft):Xp(f,he.line,"text");var jr=tr(f,"changes"),Rr=tr(f,"change");if(Rr||jr){var _n={from:he,to:Fe,text:v.text,removed:v.removed,origin:v.origin};Rr&&ml(f,"change",f,_n),jr&&(f.curOp.changeObjs||(f.curOp.changeObjs=[])).push(_n)}f.display.selForContextMenu=null}(f.cm,v,P):Ss(f,v,P),oh(f,k,zn),f.cantEdit&&Ph(f,Qo(f.firstLine(),0))&&(f.cantEdit=!1)}}function ef(f,v,k,P,Z){var he;P||(P=k),Ba(P,k)<0&&(k=(he=[P,k])[0],P=he[1]),"string"==typeof v&&(v=f.splitLines(v)),Pf(f,{from:k,to:P,text:v,origin:Z})}function tf(f,v,k,P){k<f.line?f.line+=P:v<f.line&&(f.line=v,f.ch=0)}function Lm(f,v,k,P){for(var Z=0;Z<f.length;++Z){var he=f[Z],Fe=!0;if(he.ranges){he.copied||((he=f[Z]=he.deepCopy()).copied=!0);for(var Be=0;Be<he.ranges.length;Be++)tf(he.ranges[Be].anchor,v,k,P),tf(he.ranges[Be].head,v,k,P)}else{for(var ot=0;ot<he.changes.length;++ot){var ft=he.changes[ot];if(k<ft.from.line)ft.from=Qo(ft.from.line+P,ft.from.ch),ft.to=Qo(ft.to.line+P,ft.to.ch);else if(v<=ft.to.line){Fe=!1;break}}Fe||(f.splice(0,Z+1),Z=0)}}}function Xd(f,v){var k=v.from.line,P=v.to.line,Z=v.text.length-(P-k)-1;Lm(f.done,k,P,Z),Lm(f.undone,k,P,Z)}function Rp(f,v,k,P){var Z=v,he=v;return"number"==typeof v?he=ui(f,ba(f,v)):Z=To(v),null==Z?null:(P(he,Z)&&f.cm&&Xp(f.cm,Z,k),he)}function Sc(f){this.lines=f,this.parent=null;for(var v=0,k=0;k<f.length;++k)f[k].parent=this,v+=f[k].height;this.height=v}function rf(f){this.children=f;for(var v=0,k=0,P=0;P<f.length;++P){var Z=f[P];v+=Z.chunkSize(),k+=Z.height,Z.parent=this}this.size=v,this.height=k,this.parent=null}$a.prototype.from=function(){return oa(this.anchor,this.head)},$a.prototype.to=function(){return Ao(this.anchor,this.head)},$a.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Sc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(f,v){for(var k=f,P=f+v;k<P;++k){var Z=this.lines[k];this.height-=Z.height,sd(Z),ml(Z,"delete")}this.lines.splice(f,v)},collapse:function(f){f.push.apply(f,this.lines)},insertInner:function(f,v,k){this.height+=k,this.lines=this.lines.slice(0,f).concat(v).concat(this.lines.slice(f));for(var P=0;P<v.length;++P)v[P].parent=this},iterN:function(f,v,k){for(var P=f+v;f<P;++f)if(k(this.lines[f]))return!0}},rf.prototype={chunkSize:function(){return this.size},removeInner:function(f,v){this.size-=v;for(var k=0;k<this.children.length;++k){var P=this.children[k],Z=P.chunkSize();if(f<Z){var he=Math.min(v,Z-f),Fe=P.height;if(P.removeInner(f,he),this.height-=Fe-P.height,Z==he&&(this.children.splice(k--,1),P.parent=null),0==(v-=he))break;f=0}else f-=Z}if(this.size-v<25&&(this.children.length>1||!(this.children[0]instanceof Sc))){var Be=[];this.collapse(Be),this.children=[new Sc(Be)],this.children[0].parent=this}},collapse:function(f){for(var v=0;v<this.children.length;++v)this.children[v].collapse(f)},insertInner:function(f,v,k){this.size+=v.length,this.height+=k;for(var P=0;P<this.children.length;++P){var Z=this.children[P],he=Z.chunkSize();if(f<=he){if(Z.insertInner(f,v,k),Z.lines&&Z.lines.length>50){for(var Fe=Z.lines.length%25+25,Be=Fe;Be<Z.lines.length;){var ot=new Sc(Z.lines.slice(Be,Be+=25));Z.height-=ot.height,this.children.splice(++P,0,ot),ot.parent=this}Z.lines=Z.lines.slice(0,Fe),this.maybeSpill()}break}f-=he}},maybeSpill:function(){if(!(this.children.length<=10)){var f=this;do{var v=new rf(f.children.splice(f.children.length-5,5));if(f.parent){f.size-=v.size,f.height-=v.height;var k=No(f.parent.children,f);f.parent.children.splice(k+1,0,v)}else{var P=new rf(f.children);P.parent=f,f.children=[P,v],f=P}v.parent=f.parent}while(f.children.length>10);f.parent.maybeSpill()}},iterN:function(f,v,k){for(var P=0;P<this.children.length;++P){var Z=this.children[P],he=Z.chunkSize();if(f<he){var Fe=Math.min(v,he-f);if(Z.iterN(f,Fe,k))return!0;if(0==(v-=Fe))break;f=0}else f-=he}}};var vd=function(f,v,k){if(k)for(var P in k)k.hasOwnProperty(P)&&(this[P]=k[P]);this.doc=f,this.node=v};function lh(f,v,k){Il(v)<(f.curOp&&f.curOp.scrollTop||f.doc.scrollTop)&&Sr(f,k)}vd.prototype.clear=function(){var f=this.doc.cm,v=this.line.widgets,k=this.line,P=To(k);if(null!=P&&v){for(var Z=0;Z<v.length;++Z)v[Z]==this&&v.splice(Z--,1);v.length||(k.widgets=null);var he=ic(this);Bs(k,Math.max(0,k.height-he)),f&&(on(f,function(){lh(f,k,-he),Xp(f,P,"widget")}),ml(f,"lineWidgetCleared",f,this,P))}},vd.prototype.changed=function(){var f=this,v=this.height,k=this.doc.cm,P=this.line;this.height=null;var Z=ic(this)-v;Z&&(cs(this.doc,P)||Bs(P,P.height+Z),k&&on(k,function(){k.curOp.forceUpdate=!0,lh(k,P,Z),ml(k,"lineWidgetChanged",k,f,To(P))}))},wt(vd);var ye=0,K=function(f,v){this.lines=[],this.type=v,this.doc=f,this.id=++ye};function E(f,v,k,P,Z){if(P&&P.shared)return function _e(f,v,k,P,Z){(P=Kn(P)).shared=!1;var he=[E(f,v,k,P,Z)],Fe=he[0],Be=P.widgetNode;return Ys(f,function(ot){Be&&(P.widgetNode=Be.cloneNode(!0)),he.push(E(ot,Vi(ot,v),Vi(ot,k),P,Z));for(var ft=0;ft<ot.linked.length;++ft)if(ot.linked[ft].isParent)return;Fe=dn(he)}),new F(he,Fe)}(f,v,k,P,Z);if(f.cm&&!f.cm.curOp)return bn(f.cm,E)(f,v,k,P,Z);var he=new K(f,Z),Fe=Ba(v,k);if(P&&Kn(P,he,!1),Fe>0||0==Fe&&!1!==he.clearWhenEmpty)return he;if(he.replacedWith&&(he.collapsed=!0,he.widgetNode=Ct("span",[he.replacedWith],"CodeMirror-widget"),P.handleMouseEvents||he.widgetNode.setAttribute("cm-ignore-events","true"),P.insertLeft&&(he.widgetNode.insertLeft=!0)),he.collapsed){if(ra(f,v.line,v,k,he)||v.line!=k.line&&ra(f,k.line,v,k,he))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Xc(){kc=!0}()}he.addToHistory&&Du(f,{from:v,to:k,origin:"markText"},f.sel,NaN);var Be,ot=v.line,ft=f.cm;if(f.iter(ot,k.line+1,function(Rr){ft&&he.collapsed&&!ft.options.lineWrapping&&Ri(Rr)==ft.display.maxLine&&(Be=!0),he.collapsed&&ot!=v.line&&Bs(Rr,0),function ql(f,v,k){var P=k&&window.WeakSet&&(k.markedSpans||(k.markedSpans=new WeakSet));P&&P.has(f.markedSpans)?f.markedSpans.push(v):(f.markedSpans=f.markedSpans?f.markedSpans.concat([v]):[v],P&&P.add(f.markedSpans)),v.marker.attachLine(f)}(Rr,new eu(he,ot==v.line?v.ch:null,ot==k.line?k.ch:null),f.cm&&f.cm.curOp),++ot}),he.collapsed&&f.iter(v.line,k.line+1,function(Rr){cs(f,Rr)&&Bs(Rr,0)}),he.clearOnEnter&&li(he,"beforeCursorEnter",function(){return he.clear()}),he.readOnly&&(function zl(){Qc=!0}(),(f.history.done.length||f.history.undone.length)&&f.clearHistory()),he.collapsed&&(he.id=++ye,he.atomic=!0),ft){if(Be&&(ft.curOp.updateMaxLine=!0),he.collapsed)Uu(ft,v.line,k.line+1);else if(he.className||he.startStyle||he.endStyle||he.css||he.attributes||he.title)for(var jr=v.line;jr<=k.line;jr++)Xp(ft,jr,"text");he.atomic&&Mm(ft.doc),ml(ft,"markerAdded",ft,he)}return he}K.prototype.clear=function(){if(!this.explicitlyCleared){var f=this.doc.cm,v=f&&!f.curOp;if(v&&Zo(f),tr(this,"clear")){var k=this.find();k&&ml(this,"clear",k.from,k.to)}for(var P=null,Z=null,he=0;he<this.lines.length;++he){var Fe=this.lines[he],Be=Oa(Fe.markedSpans,this);f&&!this.collapsed?Xp(f,To(Fe),"text"):f&&(null!=Be.to&&(Z=To(Fe)),null!=Be.from&&(P=To(Fe))),Fe.markedSpans=Ll(Fe.markedSpans,Be),null==Be.from&&this.collapsed&&!cs(this.doc,Fe)&&f&&Bs(Fe,hd(f.display))}if(f&&this.collapsed&&!f.options.lineWrapping)for(var ot=0;ot<this.lines.length;++ot){var ft=Ri(this.lines[ot]),jr=vc(ft);jr>f.display.maxLineLength&&(f.display.maxLine=ft,f.display.maxLineLength=jr,f.display.maxLineChanged=!0)}null!=P&&f&&this.collapsed&&Uu(f,P,Z+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,f&&Mm(f.doc)),f&&ml(f,"markerCleared",f,this,P,Z),v&&ro(f),this.parent&&this.parent.clear()}},K.prototype.find=function(f,v){var k,P;null==f&&"bookmark"==this.type&&(f=1);for(var Z=0;Z<this.lines.length;++Z){var he=this.lines[Z],Fe=Oa(he.markedSpans,this);if(null!=Fe.from&&(k=Qo(v?he:To(he),Fe.from),-1==f))return k;if(null!=Fe.to&&(P=Qo(v?he:To(he),Fe.to),1==f))return P}return k&&{from:k,to:P}},K.prototype.changed=function(){var f=this,v=this.find(-1,!0),k=this,P=this.doc.cm;v&&P&&on(P,function(){var Z=v.line,he=To(v.line),Fe=_c(P,he);if(Fe&&(Of(Fe),P.curOp.selectionChanged=P.curOp.forceUpdate=!0),P.curOp.updateMaxLine=!0,!cs(k.doc,Z)&&null!=k.height){var Be=k.height;k.height=null;var ot=ic(k)-Be;ot&&Bs(Z,Z.height+ot)}ml(P,"markerChanged",P,f)})},K.prototype.attachLine=function(f){if(!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;v.maybeHiddenMarkers&&-1!=No(v.maybeHiddenMarkers,this)||(v.maybeUnhiddenMarkers||(v.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(f)},K.prototype.detachLine=function(f){if(this.lines.splice(No(this.lines,f),1),!this.lines.length&&this.doc.cm){var v=this.doc.cm.curOp;(v.maybeHiddenMarkers||(v.maybeHiddenMarkers=[])).push(this)}},wt(K);var F=function(f,v){this.markers=f,this.primary=v;for(var k=0;k<f.length;++k)f[k].parent=this};function Ge(f){return f.findMarks(Qo(f.first,0),f.clipPos(Qo(f.lastLine())),function(v){return v.parent})}function Tt(f){for(var v=function(P){var Z=f[P],he=[Z.primary.doc];Ys(Z.primary.doc,function(ot){return he.push(ot)});for(var Fe=0;Fe<Z.markers.length;Fe++){var Be=Z.markers[Fe];-1==No(he,Be.doc)&&(Be.parent=null,Z.markers.splice(Fe--,1))}},k=0;k<f.length;k++)v(k)}F.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var f=0;f<this.markers.length;++f)this.markers[f].clear();ml(this,"clear")}},F.prototype.find=function(f,v){return this.primary.find(f,v)},wt(F);var Kt=0,fr=function(f,v,k,P,Z){if(!(this instanceof fr))return new fr(f,v,k,P,Z);null==k&&(k=0),rf.call(this,[new Sc([new uc("",null)])]),this.first=k,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=k;var he=Qo(k,0);this.sel=Ws(he),this.history=new Bu(null),this.id=++Kt,this.modeOption=v,this.lineSep=P,this.direction="rtl"==Z?"rtl":"ltr",this.extend=!1,"string"==typeof f&&(f=this.splitLines(f)),Ss(this,{from:he,to:he,text:f}),Xl(this,Ws(he),zn)};fr.prototype=Vo(rf.prototype,{constructor:fr,iter:function(f,v,k){k?this.iterN(f-this.first,v-f,k):this.iterN(this.first,this.first+this.size,f)},insert:function(f,v){for(var k=0,P=0;P<v.length;++P)k+=v[P].height;this.insertInner(f-this.first,v,k)},remove:function(f,v){this.removeInner(f-this.first,v)},getValue:function(f){var v=nl(this,this.first,this.first+this.size);return!1===f?v:v.join(f||this.lineSeparator())},setValue:so(function(f){var v=Qo(this.first,0),k=this.first+this.size-1;Pf(this,{from:v,to:Qo(k,ui(this,k).text.length),text:this.splitLines(f),origin:"setValue",full:!0},!0),this.cm&&Lr(this.cm,0,0),Xl(this,Ws(v),zn)}),replaceRange:function(f,v,k,P){ef(this,f,v=Vi(this,v),k=k?Vi(this,k):v,P)},getRange:function(f,v,k){var P=ns(this,Vi(this,f),Vi(this,v));return!1===k?P:P.join(""===k?"":k||this.lineSeparator())},getLine:function(f){var v=this.getLineHandle(f);return v&&v.text},getLineHandle:function(f){if(el(this,f))return ui(this,f)},getLineNumber:function(f){return To(f)},getLineHandleVisualStart:function(f){return"number"==typeof f&&(f=ui(this,f)),Ri(f)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(f){return Vi(this,f)},getCursor:function(f){var v=this.sel.primary();return null==f||"head"==f?v.head:"anchor"==f?v.anchor:"end"==f||"to"==f||!1===f?v.to():v.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:so(function(f,v,k){th(this,Vi(this,"number"==typeof f?Qo(f,v||0):f),null,k)}),setSelection:so(function(f,v,k){th(this,Vi(this,f),Vi(this,v||f),k)}),extendSelection:so(function(f,v,k){ru(this,Vi(this,f),v&&Vi(this,v),k)}),extendSelections:so(function(f,v){Qd(this,ul(this,f),v)}),extendSelectionsBy:so(function(f,v){Qd(this,ul(this,sn(this.sel.ranges,f)),v)}),setSelections:so(function(f,v,k){if(f.length){for(var P=[],Z=0;Z<f.length;Z++)P[Z]=new $a(Vi(this,f[Z].anchor),Vi(this,f[Z].head||f[Z].anchor));null==v&&(v=Math.min(f.length-1,this.sel.primIndex)),Xl(this,Kc(this.cm,P,v),k)}}),addSelection:so(function(f,v,k){var P=this.sel.ranges.slice(0);P.push(new $a(Vi(this,f),Vi(this,v||f))),Xl(this,Kc(this.cm,P,P.length-1),k)}),getSelection:function(f){for(var v,k=this.sel.ranges,P=0;P<k.length;P++){var Z=ns(this,k[P].from(),k[P].to());v=v?v.concat(Z):Z}return!1===f?v:v.join(f||this.lineSeparator())},getSelections:function(f){for(var v=[],k=this.sel.ranges,P=0;P<k.length;P++){var Z=ns(this,k[P].from(),k[P].to());!1!==f&&(Z=Z.join(f||this.lineSeparator())),v[P]=Z}return v},replaceSelection:function(f,v,k){for(var P=[],Z=0;Z<this.sel.ranges.length;Z++)P[Z]=f;this.replaceSelections(P,v,k||"+input")},replaceSelections:so(function(f,v,k){for(var P=[],Z=this.sel,he=0;he<Z.ranges.length;he++){var Fe=Z.ranges[he];P[he]={from:Fe.from(),to:Fe.to(),text:this.splitLines(f[he]),origin:k}}for(var Be=v&&"end"!=v&&function dc(f,v,k){for(var P=[],Z=Qo(f.first,0),he=Z,Fe=0;Fe<v.length;Fe++){var Be=v[Fe],ot=ku(Be.from,Z,he),ft=ku(al(Be),Z,he);if(Z=Be.to,he=ft,"around"==k){var jr=f.sel.ranges[Fe],Rr=Ba(jr.head,jr.anchor)<0;P[Fe]=new $a(Rr?ft:ot,Rr?ot:ft)}else P[Fe]=new $a(ot,ot)}return new Al(P,f.sel.primIndex)}(this,P,v),ot=P.length-1;ot>=0;ot--)Pf(this,P[ot]);Be?nh(this,Be):this.cm&&Qt(this.cm)}),undo:so(function(){sh(this,"undo")}),redo:so(function(){sh(this,"redo")}),undoSelection:so(function(){sh(this,"undo",!0)}),redoSelection:so(function(){sh(this,"redo",!0)}),setExtending:function(f){this.extend=f},getExtending:function(){return this.extend},historySize:function(){for(var f=this.history,v=0,k=0,P=0;P<f.done.length;P++)f.done[P].ranges||++v;for(var Z=0;Z<f.undone.length;Z++)f.undone[Z].ranges||++k;return{undo:v,redo:k}},clearHistory:function(){var f=this;this.history=new Bu(this.history),Ys(this,function(v){return v.history=f.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(f){return f&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(f){return this.history.generation==(f||this.cleanGeneration)},getHistory:function(){return{done:zc(this.history.done),undone:zc(this.history.undone)}},setHistory:function(f){var v=this.history=new Bu(this.history);v.done=zc(f.done.slice(0),null,!0),v.undone=zc(f.undone.slice(0),null,!0)},setGutterMarker:so(function(f,v,k){return Rp(this,f,"gutter",function(P){var Z=P.gutterMarkers||(P.gutterMarkers={});return Z[v]=k,!k&&ze(Z)&&(P.gutterMarkers=null),!0})}),clearGutter:so(function(f){var v=this;this.iter(function(k){k.gutterMarkers&&k.gutterMarkers[f]&&Rp(v,k,"gutter",function(){return k.gutterMarkers[f]=null,ze(k.gutterMarkers)&&(k.gutterMarkers=null),!0})})}),lineInfo:function(f){var v;if("number"==typeof f){if(!(el(this,f)&&(v=f,f=ui(this,f))))return null}else if(null==(v=To(f)))return null;return{line:v,handle:f,text:f.text,gutterMarkers:f.gutterMarkers,textClass:f.textClass,bgClass:f.bgClass,wrapClass:f.wrapClass,widgets:f.widgets}},addLineClass:so(function(f,v,k){return Rp(this,f,"gutter"==v?"gutter":"class",function(P){var Z="text"==v?"textClass":"background"==v?"bgClass":"gutter"==v?"gutterClass":"wrapClass";if(P[Z]){if(me(k).test(P[Z]))return!1;P[Z]+=" "+k}else P[Z]=k;return!0})}),removeLineClass:so(function(f,v,k){return Rp(this,f,"gutter"==v?"gutter":"class",function(P){var Z="text"==v?"textClass":"background"==v?"bgClass":"gutter"==v?"gutterClass":"wrapClass",he=P[Z];if(!he)return!1;if(null==k)P[Z]=null;else{var Fe=he.match(me(k));if(!Fe)return!1;var Be=Fe.index+Fe[0].length;P[Z]=he.slice(0,Fe.index)+(Fe.index&&Be!=he.length?" ":"")+he.slice(Be)||null}return!0})}),addLineWidget:so(function(f,v,k){return function le(f,v,k,P){var Z=new vd(f,k,P),he=f.cm;return he&&Z.noHScroll&&(he.display.alignWidgets=!0),Rp(f,v,"widget",function(Fe){var Be=Fe.widgets||(Fe.widgets=[]);if(null==Z.insertAt?Be.push(Z):Be.splice(Math.min(Be.length,Math.max(0,Z.insertAt)),0,Z),Z.line=Fe,he&&!cs(f,Fe)){var ot=Il(Fe)<f.scrollTop;Bs(Fe,Fe.height+ic(Z)),ot&&Sr(he,Z.height),he.curOp.forceUpdate=!0}return!0}),he&&ml(he,"lineWidgetAdded",he,Z,"number"==typeof v?v:To(v)),Z}(this,f,v,k)}),removeLineWidget:function(f){f.clear()},markText:function(f,v,k){return E(this,Vi(this,f),Vi(this,v),k,k&&k.type||"range")},setBookmark:function(f,v){var k={replacedWith:v&&(null==v.nodeType?v.widget:v),insertLeft:v&&v.insertLeft,clearWhenEmpty:!1,shared:v&&v.shared,handleMouseEvents:v&&v.handleMouseEvents};return E(this,f=Vi(this,f),f,k,"bookmark")},findMarksAt:function(f){var v=[],k=ui(this,(f=Vi(this,f)).line).markedSpans;if(k)for(var P=0;P<k.length;++P){var Z=k[P];(null==Z.from||Z.from<=f.ch)&&(null==Z.to||Z.to>=f.ch)&&v.push(Z.marker.parent||Z.marker)}return v},findMarks:function(f,v,k){f=Vi(this,f),v=Vi(this,v);var P=[],Z=f.line;return this.iter(f.line,v.line+1,function(he){var Fe=he.markedSpans;if(Fe)for(var Be=0;Be<Fe.length;Be++){var ot=Fe[Be];null!=ot.to&&Z==f.line&&f.ch>=ot.to||null==ot.from&&Z!=f.line||null!=ot.from&&Z==v.line&&ot.from>=v.ch||k&&!k(ot.marker)||P.push(ot.marker.parent||ot.marker)}++Z}),P},getAllMarks:function(){var f=[];return this.iter(function(v){var k=v.markedSpans;if(k)for(var P=0;P<k.length;++P)null!=k[P].from&&f.push(k[P].marker)}),f},posFromIndex:function(f){var v,k=this.first,P=this.lineSeparator().length;return this.iter(function(Z){var he=Z.text.length+P;if(he>f)return v=f,!0;f-=he,++k}),Vi(this,Qo(k,v))},indexFromPos:function(f){var v=(f=Vi(this,f)).ch;if(f.line<this.first||f.ch<0)return 0;var k=this.lineSeparator().length;return this.iter(this.first,f.line,function(P){v+=P.text.length+k}),v},copy:function(f){var v=new fr(nl(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return v.scrollTop=this.scrollTop,v.scrollLeft=this.scrollLeft,v.sel=this.sel,v.extend=!1,f&&(v.history.undoDepth=this.history.undoDepth,v.setHistory(this.getHistory())),v},linkedDoc:function(f){f||(f={});var v=this.first,k=this.first+this.size;null!=f.from&&f.from>v&&(v=f.from),null!=f.to&&f.to<k&&(k=f.to);var P=new fr(nl(this,v,k),f.mode||this.modeOption,v,this.lineSep,this.direction);return f.sharedHist&&(P.history=this.history),(this.linked||(this.linked=[])).push({doc:P,sharedHist:f.sharedHist}),P.linked=[{doc:this,isParent:!0,sharedHist:f.sharedHist}],function st(f,v){for(var k=0;k<v.length;k++){var P=v[k],Z=P.find(),he=f.clipPos(Z.from),Fe=f.clipPos(Z.to);if(Ba(he,Fe)){var Be=E(f,he,Fe,P.primary,P.primary.type);P.markers.push(Be),Be.parent=P}}}(P,Ge(this)),P},unlinkDoc:function(f){if(f instanceof xl&&(f=f.doc),this.linked)for(var v=0;v<this.linked.length;++v)if(this.linked[v].doc==f){this.linked.splice(v,1),f.unlinkDoc(this),Tt(Ge(this));break}if(f.history==this.history){var k=[f.id];Ys(f,function(P){return k.push(P.id)},!0),f.history=new Bu(null),f.history.done=zc(this.history.done,k),f.history.undone=zc(this.history.undone,k)}},iterLinkedDocs:function(f){Ys(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(f){return this.lineSep?f.split(this.lineSep):Dr(f)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:so(function(f){"rtl"!=f&&(f="ltr"),f!=this.direction&&(this.direction=f,this.iter(function(v){return v.order=null}),this.cm&&function kp(f){on(f,function(){Ou(f),Uu(f)})}(this.cm))})}),fr.prototype.eachLine=fr.prototype.iter;var nn=0;function Yr(f){var v=this;if(Vn(v),!gt(v,f)&&!Ve(v.display,f)){St(f),U&&(nn=+new Date);var k=Pp(v,f,!0),P=f.dataTransfer.files;if(k&&!v.isReadOnly())if(P&&P.length&&window.FileReader&&window.File)for(var Z=P.length,he=Array(Z),Fe=0,Be=function(){++Fe==Z&&bn(v,function(){var Tn={from:k=Vi(v.doc,k),to:k,text:v.doc.splitLines(he.filter(function(wo){return null!=wo}).join(v.doc.lineSeparator())),origin:"paste"};Pf(v.doc,Tn),nh(v.doc,Ws(Vi(v.doc,k),Vi(v.doc,al(Tn))))})()},ot=function(Tn,wo){if(v.options.allowDropFileTypes&&-1==No(v.options.allowDropFileTypes,Tn.type))Be();else{var ni=new FileReader;ni.onerror=function(){return Be()},ni.onload=function(){var Mi=ni.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Mi)||(he[wo]=Mi),Be()},ni.readAsText(Tn)}},ft=0;ft<P.length;ft++)ot(P[ft],ft);else{if(v.state.draggingText&&v.doc.sel.contains(k)>-1)return v.state.draggingText(f),void setTimeout(function(){return v.display.input.focus()},20);try{var jr=f.dataTransfer.getData("Text");if(jr){var Rr;if(v.state.draggingText&&!v.state.draggingText.copy&&(Rr=v.listSelections()),oh(v.doc,Ws(k,k)),Rr)for(var _n=0;_n<Rr.length;++_n)ef(v.doc,"",Rr[_n].anchor,Rr[_n].head,"drag");v.replaceSelection(jr,"around","paste"),v.display.input.focus()}}catch{}}}}function Vn(f){f.display.dragCursor&&(f.display.lineSpace.removeChild(f.display.dragCursor),f.display.dragCursor=null)}function yi(f){if(document.getElementsByClassName){for(var v=document.getElementsByClassName("CodeMirror"),k=[],P=0;P<v.length;P++){var Z=v[P].CodeMirror;Z&&k.push(Z)}k.length&&k[0].operation(function(){for(var he=0;he<k.length;he++)f(k[he])})}}var ai=!1;function vi(f){var v=f.display;v.cachedCharWidth=v.cachedTextHeight=v.cachedPaddingH=null,v.scrollbarsClipped=!1,f.setSize()}for(var Uo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},go=0;go<10;go++)Uo[go+48]=Uo[go+96]=String(go);for(var pi=65;pi<=90;pi++)Uo[pi]=String.fromCharCode(pi);for(var Co=1;Co<=12;Co++)Uo[Co+111]=Uo[Co+63235]="F"+Co;var hi={};function Gi(f){var v,k,P,Z,he=f.split(/-(?!$)/);f=he[he.length-1];for(var Fe=0;Fe<he.length-1;Fe++){var Be=he[Fe];if(/^(cmd|meta|m)$/i.test(Be))Z=!0;else if(/^a(lt)?$/i.test(Be))v=!0;else if(/^(c|ctrl|control)$/i.test(Be))k=!0;else{if(!/^s(hift)?$/i.test(Be))throw new Error("Unrecognized modifier name: "+Be);P=!0}}return v&&(f="Alt-"+f),k&&(f="Ctrl-"+f),Z&&(f="Cmd-"+f),P&&(f="Shift-"+f),f}function Va(f){var v={};for(var k in f)if(f.hasOwnProperty(k)){var P=f[k];if(/^(name|fallthrough|(de|at)tach)$/.test(k))continue;if("..."==P){delete f[k];continue}for(var Z=sn(k.split(" "),Gi),he=0;he<Z.length;he++){var Fe=void 0,Be=void 0;he==Z.length-1?(Be=Z.join(" "),Fe=P):(Be=Z.slice(0,he+1).join(" "),Fe="...");var ot=v[Be];if(ot){if(ot!=Fe)throw new Error("Inconsistent bindings for "+Be)}else v[Be]=Fe}delete f[k]}for(var ft in v)f[ft]=v[ft];return f}function qi(f,v,k,P){var Z=(v=Dl(v)).call?v.call(f,P):v[f];if(!1===Z)return"nothing";if("..."===Z)return"multi";if(null!=Z&&k(Z))return"handled";if(v.fallthrough){if("[object Array]"!=Object.prototype.toString.call(v.fallthrough))return qi(f,v.fallthrough,k,P);for(var he=0;he<v.fallthrough.length;he++){var Fe=qi(f,v.fallthrough[he],k,P);if(Fe)return Fe}}}function xa(f){var v="string"==typeof f?f:Uo[f.keyCode];return"Ctrl"==v||"Alt"==v||"Shift"==v||"Mod"==v}function Da(f,v,k){var P=f;return v.altKey&&"Alt"!=P&&(f="Alt-"+f),(Le?v.metaKey:v.ctrlKey)&&"Ctrl"!=P&&(f="Ctrl-"+f),(Le?v.ctrlKey:v.metaKey)&&"Mod"!=P&&(f="Cmd-"+f),!k&&v.shiftKey&&"Shift"!=P&&(f="Shift-"+f),f}function hs(f,v){if(Y&&34==f.keyCode&&f.char)return!1;var k=Uo[f.keyCode];return null!=k&&!f.altGraphKey&&(3==f.keyCode&&f.code&&(k=f.code),Da(k,f,v))}function Dl(f){return"string"==typeof f?hi[f]:f}function Tl(f,v){for(var k=f.doc.sel.ranges,P=[],Z=0;Z<k.length;Z++){for(var he=v(k[Z]);P.length&&Ba(he.from,dn(P).to)<=0;){var Fe=P.pop();if(Ba(Fe.from,he.from)<0){he.from=Fe.from;break}}P.push(he)}on(f,function(){for(var Be=P.length-1;Be>=0;Be--)ef(f.doc,"",P[Be].from,P[Be].to,"+delete");Qt(f)})}function Pc(f,v,k){var P=gr(f.text,v+k,k);return P<0||P>f.text.length?null:P}function Mh(f,v,k){var P=Pc(f,v.ch,k);return null==P?null:new Qo(v.line,P,k<0?"after":"before")}function mu(f,v,k,P,Z){if(f){"rtl"==v.doc.direction&&(Z=-Z);var he=oo(k,v.doc.direction);if(he){var Fe,Be=Z<0?dn(he):he[0],ot=Z<0==(1==Be.level)?"after":"before";if(Be.level>0||"rtl"==v.doc.direction){var ft=fu(v,k),jr=hu(v,ft,Fe=Z<0?k.text.length-1:0).top;Fe=Pt(function(Rr){return hu(v,ft,Rr).top==jr},Z<0==(1==Be.level)?Be.from:Be.to-1,Fe),"before"==ot&&(Fe=Pc(k,Fe,1))}else Fe=Z<0?Be.to:Be.from;return new Qo(P,Fe,ot)}}return new Qo(P,Z<0?k.text.length:0,Z<0?"before":"after")}hi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},hi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},hi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},hi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},hi.default=Ce?hi.macDefault:hi.pcDefault;var hp={selectAll:Am,singleSelection:function(f){return f.setSelection(f.getCursor("anchor"),f.getCursor("head"),zn)},killLine:function(f){return Tl(f,function(v){if(v.empty()){var k=ui(f.doc,v.head.line).text.length;return v.head.ch==k&&v.head.line<f.lastLine()?{from:v.head,to:Qo(v.head.line+1,0)}:{from:v.head,to:Qo(v.head.line,k)}}return{from:v.from(),to:v.to()}})},deleteLine:function(f){return Tl(f,function(v){return{from:Qo(v.from().line,0),to:Vi(f.doc,Qo(v.to().line+1,0))}})},delLineLeft:function(f){return Tl(f,function(v){return{from:Qo(v.from().line,0),to:v.from()}})},delWrappedLineLeft:function(f){return Tl(f,function(v){var k=f.charCoords(v.head,"div").top+5;return{from:f.coordsChar({left:0,top:k},"div"),to:v.from()}})},delWrappedLineRight:function(f){return Tl(f,function(v){var k=f.charCoords(v.head,"div").top+5,P=f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:k},"div");return{from:v.from(),to:P}})},undo:function(f){return f.undo()},redo:function(f){return f.redo()},undoSelection:function(f){return f.undoSelection()},redoSelection:function(f){return f.redoSelection()},goDocStart:function(f){return f.extendSelection(Qo(f.firstLine(),0))},goDocEnd:function(f){return f.extendSelection(Qo(f.lastLine()))},goLineStart:function(f){return f.extendSelectionsBy(function(v){return wg(f,v.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(f){return f.extendSelectionsBy(function(v){return Fp(f,v.head)},{origin:"+move",bias:1})},goLineEnd:function(f){return f.extendSelectionsBy(function(v){return function Ah(f,v){var k=ui(f.doc,v),P=function ls(f){for(var v;v=Jo(f);)f=v.find(1,!0).line;return f}(k);return P!=k&&(v=To(P)),mu(!0,f,k,v,-1)}(f,v.head.line)},{origin:"+move",bias:-1})},goLineRight:function(f){return f.extendSelectionsBy(function(v){var k=f.cursorCoords(v.head,"div").top+5;return f.coordsChar({left:f.display.lineDiv.offsetWidth+100,top:k},"div")},an)},goLineLeft:function(f){return f.extendSelectionsBy(function(v){var k=f.cursorCoords(v.head,"div").top+5;return f.coordsChar({left:0,top:k},"div")},an)},goLineLeftSmart:function(f){return f.extendSelectionsBy(function(v){var k=f.cursorCoords(v.head,"div").top+5,P=f.coordsChar({left:0,top:k},"div");return P.ch<f.getLine(P.line).search(/\S/)?Fp(f,v.head):P},an)},goLineUp:function(f){return f.moveV(-1,"line")},goLineDown:function(f){return f.moveV(1,"line")},goPageUp:function(f){return f.moveV(-1,"page")},goPageDown:function(f){return f.moveV(1,"page")},goCharLeft:function(f){return f.moveH(-1,"char")},goCharRight:function(f){return f.moveH(1,"char")},goColumnLeft:function(f){return f.moveH(-1,"column")},goColumnRight:function(f){return f.moveH(1,"column")},goWordLeft:function(f){return f.moveH(-1,"word")},goGroupRight:function(f){return f.moveH(1,"group")},goGroupLeft:function(f){return f.moveH(-1,"group")},goWordRight:function(f){return f.moveH(1,"word")},delCharBefore:function(f){return f.deleteH(-1,"codepoint")},delCharAfter:function(f){return f.deleteH(1,"char")},delWordBefore:function(f){return f.deleteH(-1,"word")},delWordAfter:function(f){return f.deleteH(1,"word")},delGroupBefore:function(f){return f.deleteH(-1,"group")},delGroupAfter:function(f){return f.deleteH(1,"group")},indentAuto:function(f){return f.indentSelection("smart")},indentMore:function(f){return f.indentSelection("add")},indentLess:function(f){return f.indentSelection("subtract")},insertTab:function(f){return f.replaceSelection("\t")},insertSoftTab:function(f){for(var v=[],k=f.listSelections(),P=f.options.tabSize,Z=0;Z<k.length;Z++){var he=k[Z].from(),Fe=Mo(f.getLine(he.line),he.ch,P);v.push(Mn(P-Fe%P))}f.replaceSelections(v)},defaultTab:function(f){f.somethingSelected()?f.indentSelection("add"):f.execCommand("insertTab")},transposeChars:function(f){return on(f,function(){for(var v=f.listSelections(),k=[],P=0;P<v.length;P++)if(v[P].empty()){var Z=v[P].head,he=ui(f.doc,Z.line).text;if(he)if(Z.ch==he.length&&(Z=new Qo(Z.line,Z.ch-1)),Z.ch>0)Z=new Qo(Z.line,Z.ch+1),f.replaceRange(he.charAt(Z.ch-1)+he.charAt(Z.ch-2),Qo(Z.line,Z.ch-2),Z,"+transpose");else if(Z.line>f.doc.first){var Fe=ui(f.doc,Z.line-1).text;Fe&&(Z=new Qo(Z.line,1),f.replaceRange(he.charAt(0)+f.doc.lineSeparator()+Fe.charAt(Fe.length-1),Qo(Z.line-1,Fe.length-1),Z,"+transpose"))}k.push(new $a(Z,Z))}f.setSelections(k)})},newlineAndIndent:function(f){return on(f,function(){for(var v=f.listSelections(),k=v.length-1;k>=0;k--)f.replaceRange(f.doc.lineSeparator(),v[k].anchor,v[k].head,"+input");v=f.listSelections();for(var P=0;P<v.length;P++)f.indentLine(v[P].from().line,null,!0);Qt(f)})},openLine:function(f){return f.replaceSelection("\n","start")},toggleOverwrite:function(f){return f.toggleOverwrite()}};function wg(f,v){var k=ui(f.doc,v),P=Ri(k);return P!=k&&(v=To(P)),mu(!0,f,P,v,1)}function Fp(f,v){var k=wg(f,v.line),P=ui(f.doc,k.line),Z=oo(P,f.doc.direction);if(!Z||0==Z[0].level){var he=Math.max(k.ch,P.text.search(/\S/));return Qo(k.line,v.line==k.line&&v.ch<=he&&v.ch?0:he,k.sticky)}return k}function kh(f,v,k){if("string"==typeof v&&!(v=hp[v]))return!1;f.display.input.ensurePolled();var P=f.display.shift,Z=!1;try{f.isReadOnly()&&(f.state.suppressEdits=!0),k&&(f.display.shift=!1),Z=v(f)!=ci}finally{f.display.shift=P,f.state.suppressEdits=!1}return Z}var qg=new mo;function Lf(f,v,k,P){var Z=f.state.keySeq;if(Z){if(xa(v))return"handled";if(/\'$/.test(v)?f.state.keySeq=null:qg.set(50,function(){f.state.keySeq==Z&&(f.state.keySeq=null,f.display.input.reset())}),xg(f,Z+" "+v,k,P))return!0}return xg(f,v,k,P)}function xg(f,v,k,P){var Z=function kf(f,v,k){for(var P=0;P<f.state.keyMaps.length;P++){var Z=qi(v,f.state.keyMaps[P],k,f);if(Z)return Z}return f.options.extraKeys&&qi(v,f.options.extraKeys,k,f)||qi(v,f.options.keyMap,k,f)}(f,v,P);return"multi"==Z&&(f.state.keySeq=v),"handled"==Z&&ml(f,"keyHandled",f,v,k),"handled"!=Z&&"multi"!=Z||(St(k),xe(f)),!!Z}function mp(f,v){var k=hs(v,!0);return!!k&&(v.shiftKey&&!f.state.keySeq?Lf(f,"Shift-"+k,v,function(P){return kh(f,P,!0)})||Lf(f,k,v,function(P){if("string"==typeof P?/^go[A-Z]/.test(P):P.motion)return kh(f,P)}):Lf(f,k,v,function(P){return kh(f,P)}))}var Lh=null;function tm(f){var v=this;if(!(f.target&&f.target!=v.display.input.getField()||(v.curOp.focus=Wt(),gt(v,f)))){U&&R<11&&27==f.keyCode&&(f.returnValue=!1);var k=f.keyCode;v.display.shift=16==k||f.shiftKey;var P=mp(v,f);Y&&(Lh=P?k:null,P||88!=k||Un||!(Ce?f.metaKey:f.ctrlKey)||v.replaceSelection("",null,"cut")),z&&!Ce&&!P&&46==k&&f.shiftKey&&!f.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=k||/\bCodeMirror-crosshair\b/.test(v.display.lineDiv.className)||function Im(f){var v=f.display.lineDiv;function k(P){18!=P.keyCode&&P.altKey||(Me(v,"CodeMirror-crosshair"),Nt(document,"keyup",k),Nt(document,"mouseover",k))}mr(v,"CodeMirror-crosshair"),li(document,"keyup",k),li(document,"mouseover",k)}(v)}}function Rm(f){16==f.keyCode&&(this.doc.sel.shift=!1),gt(this,f)}function Fm(f){var v=this;if(!(f.target&&f.target!=v.display.input.getField()||Ve(v.display,f)||gt(v,f)||f.ctrlKey&&!f.altKey||Ce&&f.metaKey)){var k=f.keyCode,P=f.charCode;if(Y&&k==Lh)return Lh=null,void St(f);if(!Y||f.which&&!(f.which<10)||!mp(v,f)){var Z=String.fromCharCode(P??k);"\b"!=Z&&(function Ym(f,v,k){return Lf(f,"'"+k+"'",v,function(P){return kh(f,P,!0)})}(v,f,Z)||v.display.input.onKeyPress(f))}}}var If,Rf,rm=function(f,v,k){this.time=f,this.pos=v,this.button=k};function jm(f){var v=this,k=v.display;if(!(gt(v,f)||k.activeTouch&&k.input.supportsTouch()))if(k.input.ensurePolled(),k.shift=f.shiftKey,Ve(k,f))T||(k.scroller.draggable=!1,setTimeout(function(){return k.scroller.draggable=!0},100));else if(!Ja(v,f)){var P=Pp(v,f),Z=Ln(f),he=P?function Ih(f,v){var k=+new Date;return Rf&&Rf.compare(k,f,v)?(If=Rf=null,"triple"):If&&If.compare(k,f,v)?(Rf=new rm(k,f,v),If=null,"double"):(If=new rm(k,f,v),Rf=null,"single")}(P,Z):"single";window.focus(),1==Z&&v.state.selectingText&&v.state.selectingText(f),P&&function Ee(f,v,k,P,Z){var he="Click";return"double"==P?he="Double"+he:"triple"==P&&(he="Triple"+he),Lf(f,Da(he=(1==v?"Left":2==v?"Middle":"Right")+he,Z),Z,function(Fe){if("string"==typeof Fe&&(Fe=hp[Fe]),!Fe)return!1;var Be=!1;try{f.isReadOnly()&&(f.state.suppressEdits=!0),Be=Fe(f,k)!=ci}finally{f.state.suppressEdits=!1}return Be})}(v,Z,P,he,f)||(1==Z?P?function Ur(f,v,k,P){U?setTimeout(Pn(fe,f),0):f.curOp.focus=Wt();var Z,he=function bt(f,v,k){var P=f.getOption("configureMouse"),Z=P?P(f,v,k):{};return null==Z.unit&&(Z.unit=(Oe?k.shiftKey&&k.metaKey:k.altKey)?"rectangle":"single"==v?"char":"double"==v?"word":"line"),(null==Z.extend||f.doc.extend)&&(Z.extend=f.doc.extend||k.shiftKey),null==Z.addNew&&(Z.addNew=Ce?k.metaKey:k.ctrlKey),null==Z.moveOnDrag&&(Z.moveOnDrag=!(Ce?k.altKey:k.ctrlKey)),Z}(f,k,P),Fe=f.doc.sel;f.options.dragDrop&&or&&!f.isReadOnly()&&"single"==k&&(Z=Fe.contains(v))>-1&&(Ba((Z=Fe.ranges[Z]).from(),v)<0||v.xRel>0)&&(Ba(Z.to(),v)>0||v.xRel<0)?function mn(f,v,k,P){var Z=f.display,he=!1,Fe=bn(f,function(ft){T&&(Z.scroller.draggable=!1),f.state.draggingText=!1,f.state.delayingBlurEvent&&(f.hasFocus()?f.state.delayingBlurEvent=!1:De(f)),Nt(Z.wrapper.ownerDocument,"mouseup",Fe),Nt(Z.wrapper.ownerDocument,"mousemove",Be),Nt(Z.scroller,"dragstart",ot),Nt(Z.scroller,"drop",Fe),he||(St(ft),P.addNew||ru(f.doc,k,null,null,P.extend),T&&!ee||U&&9==R?setTimeout(function(){Z.wrapper.ownerDocument.body.focus({preventScroll:!0}),Z.input.focus()},20):Z.input.focus())}),Be=function(ft){he=he||Math.abs(v.clientX-ft.clientX)+Math.abs(v.clientY-ft.clientY)>=10},ot=function(){return he=!0};T&&(Z.scroller.draggable=!0),f.state.draggingText=Fe,Fe.copy=!P.moveOnDrag,li(Z.wrapper.ownerDocument,"mouseup",Fe),li(Z.wrapper.ownerDocument,"mousemove",Be),li(Z.scroller,"dragstart",ot),li(Z.scroller,"drop",Fe),f.state.delayingBlurEvent=!0,setTimeout(function(){return Z.input.focus()},20),Z.scroller.dragDrop&&Z.scroller.dragDrop()}(f,P,v,he):function Yo(f,v,k,P){U&&De(f);var Z=f.display,he=f.doc;St(v);var Fe,Be,ot=he.sel,ft=ot.ranges;if(P.addNew&&!P.extend?(Be=he.sel.contains(k),Fe=Be>-1?ft[Be]:new $a(k,k)):(Fe=he.sel.primary(),Be=he.sel.primIndex),"rectangle"==P.unit)P.addNew||(Fe=new $a(k,k)),k=Pp(f,v,!0,!0),Be=-1;else{var jr=to(f,k,P.unit);Fe=P.extend?Iu(Fe,jr.anchor,jr.head,P.extend):jr}P.addNew?-1==Be?(Be=ft.length,Xl(he,Kc(f,ft.concat([Fe]),Be),{scroll:!1,origin:"*mouse"})):ft.length>1&&ft[Be].empty()&&"char"==P.unit&&!P.extend?(Xl(he,Kc(f,ft.slice(0,Be).concat(ft.slice(Be+1)),0),{scroll:!1,origin:"*mouse"}),ot=he.sel):fp(he,Be,Fe,Wn):(Be=0,Xl(he,new Al([Fe],0),Wn),ot=he.sel);var Rr=k;var Tn=Z.wrapper.getBoundingClientRect(),wo=0;function ni(Fi){var fa=++wo,zi=Pp(f,Fi,!0,"rectangle"==P.unit);if(zi)if(0!=Ba(zi,Rr)){f.curOp.focus=Wt(),function _n(Fi){if(0!=Ba(Rr,Fi))if(Rr=Fi,"rectangle"==P.unit){for(var fa=[],zi=f.options.tabSize,na=Mo(ui(he,k.line).text,k.ch,zi),Os=Mo(ui(he,Fi.line).text,Fi.ch,zi),_s=Math.min(na,Os),nu=Math.max(na,Os),Hl=Math.min(k.line,Fi.line),ou=Math.min(f.lastLine(),Math.max(k.line,Fi.line));Hl<=ou;Hl++){var Qu=ui(he,Hl).text,bc=lr(Qu,_s,zi);_s==nu?fa.push(new $a(Qo(Hl,bc),Qo(Hl,bc))):Qu.length>bc&&fa.push(new $a(Qo(Hl,bc),Qo(Hl,lr(Qu,nu,zi))))}fa.length||fa.push(new $a(k,k)),Xl(he,Kc(f,ot.ranges.slice(0,Be).concat(fa),Be),{origin:"*mouse",scroll:!1}),f.scrollIntoView(Fi)}else{var Zu,ec=Fe,Fl=to(f,Fi,P.unit),fc=ec.anchor;Ba(Fl.anchor,fc)>0?(Zu=Fl.head,fc=oa(ec.from(),Fl.anchor)):(Zu=Fl.anchor,fc=Ao(ec.to(),Fl.head));var wc=ot.ranges.slice(0);wc[Be]=function Pi(f,v){var k=v.anchor,P=v.head,Z=ui(f.doc,k.line);if(0==Ba(k,P)&&k.sticky==P.sticky)return v;var he=oo(Z);if(!he)return v;var Fe=ln(he,k.ch,k.sticky),Be=he[Fe];if(Be.from!=k.ch&&Be.to!=k.ch)return v;var ot,ft=Fe+(Be.from==k.ch==(1!=Be.level)?0:1);if(0==ft||ft==he.length)return v;if(P.line!=k.line)ot=(P.line-k.line)*("ltr"==f.doc.direction?1:-1)>0;else{var jr=ln(he,P.ch,P.sticky),Rr=jr-Fe||(P.ch-k.ch)*(1==Be.level?-1:1);ot=jr==ft-1||jr==ft?Rr<0:Rr>0}var _n=he[ft+(ot?-1:0)],Tn=ot==(1==_n.level),wo=Tn?_n.from:_n.to,ni=Tn?"after":"before";return k.ch==wo&&k.sticky==ni?v:new $a(new Qo(k.line,wo,ni),P)}(f,new $a(Vi(he,fc),Zu)),Xl(he,Kc(f,wc,Be),Wn)}}(zi);var na=vt(Z,he);(zi.line>=na.to||zi.line<na.from)&&setTimeout(bn(f,function(){wo==fa&&ni(Fi)}),150)}else{var Os=Fi.clientY<Tn.top?-20:Fi.clientY>Tn.bottom?20:0;Os&&setTimeout(bn(f,function(){wo==fa&&(Z.scroller.scrollTop+=Os,ni(Fi))}),50)}}function Mi(Fi){f.state.selectingText=!1,wo=1/0,Fi&&(St(Fi),Z.input.focus()),Nt(Z.wrapper.ownerDocument,"mousemove",sa),Nt(Z.wrapper.ownerDocument,"mouseup",Ta),he.history.lastSelOrigin=null}var sa=bn(f,function(Fi){0!==Fi.buttons&&Ln(Fi)?ni(Fi):Mi(Fi)}),Ta=bn(f,Mi);f.state.selectingText=Ta,li(Z.wrapper.ownerDocument,"mousemove",sa),li(Z.wrapper.ownerDocument,"mouseup",Ta)}(f,P,v,he)}(v,P,he,f):Ro(f)==k.scroller&&St(f):2==Z?(P&&ru(v.doc,P),setTimeout(function(){return k.input.focus()},20)):3==Z&&(ke?v.display.input.onContextMenu(f):De(v)))}}function to(f,v,k){if("char"==k)return new $a(v,v);if("word"==k)return f.findWordAt(v);if("line"==k)return new $a(Qo(v.line,0),Vi(f.doc,Qo(v.line+1,0)));var P=k(f,v);return new $a(P.from,P.to)}function ja(f,v,k,P){var Z,he;if(v.touches)Z=v.touches[0].clientX,he=v.touches[0].clientY;else try{Z=v.clientX,he=v.clientY}catch{return!1}if(Z>=Math.floor(f.display.gutters.getBoundingClientRect().right))return!1;P&&St(v);var Fe=f.display,Be=Fe.lineDiv.getBoundingClientRect();if(he>Be.bottom||!tr(f,k))return fn(v);he-=Be.top-Fe.viewOffset;for(var ot=0;ot<f.display.gutterSpecs.length;++ot){var ft=Fe.gutters.childNodes[ot];if(ft&&ft.getBoundingClientRect().right>=Z)return jt(f,k,f,rs(f.doc,he),f.display.gutterSpecs[ot].className,v),fn(v)}}function Ja(f,v){return ja(f,v,"gutterClick",!0)}function Hs(f,v){Ve(f.display,v)||function Gs(f,v){return!!tr(f,"gutterContextMenu")&&ja(f,v,"gutterContextMenu",!1)}(f,v)||gt(f,v,"contextmenu")||ke||f.display.input.onContextMenu(v)}function Sl(f){f.display.wrapper.className=f.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+f.options.theme.replace(/(^|\s)\s*/g," cm-s-"),wl(f)}rm.prototype.compare=function(f,v,k){return this.time+400>f&&0==Ba(v,this.pos)&&k==this.button};var ac={toString:function(){return"CodeMirror.Init"}},qs={},jc={};function Tu(f,v,k){if(!v!=!(k&&k!=ac)){var P=f.display.dragFunctions,Z=v?li:Nt;Z(f.display.scroller,"dragstart",P.start),Z(f.display.scroller,"dragenter",P.enter),Z(f.display.scroller,"dragover",P.over),Z(f.display.scroller,"dragleave",P.leave),Z(f.display.scroller,"drop",P.drop)}}function Md(f){f.options.lineWrapping?(mr(f.display.wrapper,"CodeMirror-wrap"),f.display.sizer.style.minWidth="",f.display.sizerWidth=null):(Me(f.display.wrapper,"CodeMirror-wrap"),Aa(f)),Sm(f),Uu(f),wl(f),setTimeout(function(){return hr(f)},100)}function xl(f,v){var k=this;if(!(this instanceof xl))return new xl(f,v);this.options=v=v?Kn(v):{},Kn(qs,v,!1);var P=v.value;"string"==typeof P?P=new fr(P,v.mode,null,v.lineSeparator,v.direction):v.mode&&(P.modeOption=v.mode),this.doc=P;var Z=new xl.inputStyles[v.inputStyle](this),he=this.display=new js(f,P,Z,v);for(var Fe in he.wrapper.CodeMirror=this,Sl(this),v.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),jo(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new mo,keySeq:null,specialChars:null},v.autofocus&&!ge&&he.input.focus(),U&&R<11&&setTimeout(function(){return k.display.input.reset(!0)},20),function nf(f){var v=f.display;li(v.scroller,"mousedown",bn(f,jm)),li(v.scroller,"dblclick",U&&R<11?bn(f,function(ot){if(!gt(f,ot)){var ft=Pp(f,ot);if(ft&&!Ja(f,ot)&&!Ve(f.display,ot)){St(ot);var jr=f.findWordAt(ft);ru(f.doc,jr.anchor,jr.head)}}}):function(ot){return gt(f,ot)||St(ot)}),li(v.scroller,"contextmenu",function(ot){return Hs(f,ot)}),li(v.input.getField(),"contextmenu",function(ot){v.scroller.contains(ot.target)||Hs(f,ot)});var k,P={end:0};function Z(){v.activeTouch&&(k=setTimeout(function(){return v.activeTouch=null},1e3),(P=v.activeTouch).end=+new Date)}function Fe(ot,ft){if(null==ft.left)return!0;var jr=ft.left-ot.left,Rr=ft.top-ot.top;return jr*jr+Rr*Rr>400}li(v.scroller,"touchstart",function(ot){if(!gt(f,ot)&&!function he(ot){if(1!=ot.touches.length)return!1;var ft=ot.touches[0];return ft.radiusX<=1&&ft.radiusY<=1}(ot)&&!Ja(f,ot)){v.input.ensurePolled(),clearTimeout(k);var ft=+new Date;v.activeTouch={start:ft,moved:!1,prev:ft-P.end<=300?P:null},1==ot.touches.length&&(v.activeTouch.left=ot.touches[0].pageX,v.activeTouch.top=ot.touches[0].pageY)}}),li(v.scroller,"touchmove",function(){v.activeTouch&&(v.activeTouch.moved=!0)}),li(v.scroller,"touchend",function(ot){var ft=v.activeTouch;if(ft&&!Ve(v,ot)&&null!=ft.left&&!ft.moved&&new Date-ft.start<300){var jr,Rr=f.coordsChar(v.activeTouch,"page");jr=!ft.prev||Fe(ft,ft.prev)?new $a(Rr,Rr):!ft.prev.prev||Fe(ft,ft.prev.prev)?f.findWordAt(Rr):new $a(Qo(Rr.line,0),Vi(f.doc,Qo(Rr.line+1,0))),f.setSelection(jr.anchor,jr.head),f.focus(),St(ot)}Z()}),li(v.scroller,"touchcancel",Z),li(v.scroller,"scroll",function(){v.scroller.clientHeight&&(gi(f,v.scroller.scrollTop),Jr(f,v.scroller.scrollLeft,!0),jt(f,"scroll",f))}),li(v.scroller,"mousewheel",function(ot){return wa(f,ot)}),li(v.scroller,"DOMMouseScroll",function(ot){return wa(f,ot)}),li(v.wrapper,"scroll",function(){return v.wrapper.scrollTop=v.wrapper.scrollLeft=0}),v.dragFunctions={enter:function(ot){gt(f,ot)||Ko(ot)},over:function(ot){gt(f,ot)||(function Go(f,v){var k=Pp(f,v);if(k){var P=document.createDocumentFragment();j(f,k,P),f.display.dragCursor||(f.display.dragCursor=$e("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),f.display.lineSpace.insertBefore(f.display.dragCursor,f.display.cursorDiv)),ut(f.display.dragCursor,P)}}(f,ot),Ko(ot))},start:function(ot){return function io(f,v){if(U&&(!f.state.draggingText||+new Date-nn<100))Ko(v);else if(!gt(f,v)&&!Ve(f.display,v)&&(v.dataTransfer.setData("Text",f.getSelection()),v.dataTransfer.effectAllowed="copyMove",v.dataTransfer.setDragImage&&!ee)){var k=$e("img",null,null,"position: fixed; left: 0; top: 0;");k.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Y&&(k.width=k.height=1,f.display.wrapper.appendChild(k),k._top=k.offsetTop),v.dataTransfer.setDragImage(k,0,0),Y&&k.parentNode.removeChild(k)}}(f,ot)},drop:bn(f,Yr),leave:function(ot){gt(f,ot)||Vn(f)}};var Be=v.input.getField();li(Be,"keyup",function(ot){return Rm.call(f,ot)}),li(Be,"keydown",bn(f,tm)),li(Be,"keypress",bn(f,Fm)),li(Be,"focus",function(ot){return Ae(f,ot)}),li(Be,"blur",function(ot){return Ne(f,ot)})}(this),function Ti(){ai||(function Ui(){var f;li(window,"resize",function(){null==f&&(f=setTimeout(function(){f=null,yi(vi)},100))}),li(window,"blur",function(){return yi(Ne)})}(),ai=!0)}(),Zo(this),this.curOp.forceUpdate=!0,Ap(this,P),v.autofocus&&!ge||this.hasFocus()?setTimeout(function(){k.hasFocus()&&!k.state.focused&&Ae(k)},20):Ne(this),jc)jc.hasOwnProperty(Fe)&&jc[Fe](this,v[Fe],ac);da(this),v.finishInit&&v.finishInit(this);for(var Be=0;Be<nm.length;++Be)nm[Be](this);ro(this),T&&v.lineWrapping&&"optimizelegibility"==getComputedStyle(he.lineDiv).textRendering&&(he.lineDiv.style.textRendering="auto")}xl.defaults=qs,xl.optionHandlers=jc;var nm=[];function _d(f,v,k,P){var Z,he=f.doc;null==k&&(k="add"),"smart"==k&&(he.mode.indent?Z=Od(f,v).state:k="prev");var Fe=f.options.tabSize,Be=ui(he,v),ot=Mo(Be.text,null,Fe);Be.stateAfter&&(Be.stateAfter=null);var ft,jr=Be.text.match(/^\s*/)[0];if(P||/\S/.test(Be.text)){if("smart"==k&&((ft=he.mode.indent(Z,Be.text.slice(jr.length),Be.text))==ci||ft>150)){if(!P)return;k="prev"}}else ft=0,k="not";"prev"==k?ft=v>he.first?Mo(ui(he,v-1).text,null,Fe):0:"add"==k?ft=ot+f.options.indentUnit:"subtract"==k?ft=ot-f.options.indentUnit:"number"==typeof k&&(ft=ot+k),ft=Math.max(0,ft);var Rr="",_n=0;if(f.options.indentWithTabs)for(var Tn=Math.floor(ft/Fe);Tn;--Tn)_n+=Fe,Rr+="\t";if(_n<ft&&(Rr+=Mn(ft-_n)),Rr!=jr)return ef(he,Rr,Qo(v,0),Qo(v,jr.length),"+input"),Be.stateAfter=null,!0;for(var wo=0;wo<he.sel.ranges.length;wo++){var ni=he.sel.ranges[wo];if(ni.head.line==v&&ni.head.ch<jr.length){var Mi=Qo(v,jr.length);fp(he,wo,new $a(Mi,Mi));break}}}xl.defineInitHook=function(f){return nm.push(f)};var yd=null;function ch(f){yd=f}function jp(f,v,k,P,Z){var he=f.doc;f.display.shift=!1,P||(P=he.sel);var Fe=+new Date-200,Be="paste"==Z||f.state.pasteIncoming>Fe,ot=Dr(v),ft=null;if(Be&&P.ranges.length>1)if(yd&&yd.text.join("\n")==v){if(P.ranges.length%yd.text.length==0){ft=[];for(var jr=0;jr<yd.text.length;jr++)ft.push(he.splitLines(yd.text[jr]))}}else ot.length==P.ranges.length&&f.options.pasteLinesPerSelection&&(ft=sn(ot,function(sa){return[sa]}));for(var Rr=f.curOp.updateInput,_n=P.ranges.length-1;_n>=0;_n--){var Tn=P.ranges[_n],wo=Tn.from(),ni=Tn.to();Tn.empty()&&(k&&k>0?wo=Qo(wo.line,wo.ch-k):f.state.overwrite&&!Be?ni=Qo(ni.line,Math.min(ui(he,ni.line).text.length,ni.ch+dn(ot).length)):Be&&yd&&yd.lineWise&&yd.text.join("\n")==ot.join("\n")&&(wo=ni=Qo(wo.line,0)));var Mi={from:wo,to:ni,text:ft?ft[_n%ft.length]:ot,origin:Z||(Be?"paste":f.state.cutIncoming>Fe?"cut":"+input")};Pf(f.doc,Mi),ml(f,"inputRead",f,Mi)}v&&!Be&&Rh(f,v),Qt(f),f.curOp.updateInput<2&&(f.curOp.updateInput=Rr),f.curOp.typing=!0,f.state.pasteIncoming=f.state.cutIncoming=-1}function Nm(f,v){var k=f.clipboardData&&f.clipboardData.getData("Text");if(k)return f.preventDefault(),v.isReadOnly()||v.options.disableInput||on(v,function(){return jp(v,k,0,null,"paste")}),!0}function Rh(f,v){if(f.options.electricChars&&f.options.smartIndent)for(var k=f.doc.sel,P=k.ranges.length-1;P>=0;P--){var Z=k.ranges[P];if(!(Z.head.ch>100||P&&k.ranges[P-1].head.line==Z.head.line)){var he=f.getModeAt(Z.head),Fe=!1;if(he.electricChars){for(var Be=0;Be<he.electricChars.length;Be++)if(v.indexOf(he.electricChars.charAt(Be))>-1){Fe=_d(f,Z.head.line,"smart");break}}else he.electricInput&&he.electricInput.test(ui(f.doc,Z.head.line).text.slice(0,Z.head.ch))&&(Fe=_d(f,Z.head.line,"smart"));Fe&&ml(f,"electricInput",f,Z.head.line)}}}function Su(f){for(var v=[],k=[],P=0;P<f.doc.sel.ranges.length;P++){var Z=f.doc.sel.ranges[P].head.line,he={anchor:Qo(Z,0),head:Qo(Z+1,0)};k.push(he),v.push(f.getRange(he.anchor,he.head))}return{text:v,ranges:k}}function om(f,v,k,P){f.setAttribute("autocorrect",k?"":"off"),f.setAttribute("autocapitalize",P?"":"off"),f.setAttribute("spellcheck",!!v)}function im(){var f=$e("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),v=$e("div",[f],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return T?f.style.width="1000px":f.setAttribute("wrap","off"),we&&(f.style.border="1px solid black"),om(f),v}function sm(f,v,k,P,Z){var he=v,Fe=k,Be=ui(f,v.line),ot=Z&&"rtl"==f.direction?-k:k;function jr(Ta){var Fi;if("codepoint"==P){var fa=Be.text.charCodeAt(v.ch+(k>0?0:-1));Fi=isNaN(fa)?null:new Qo(v.line,Math.max(0,Math.min(Be.text.length,v.ch+k*((k>0?fa>=55296&&fa<56320:fa>=56320&&fa<57343)?2:1))),-k)}else Fi=Z?function Af(f,v,k,P){var Z=oo(v,f.doc.direction);if(!Z)return Mh(v,k,P);k.ch>=v.text.length?(k.ch=v.text.length,k.sticky="before"):k.ch<=0&&(k.ch=0,k.sticky="after");var he=ln(Z,k.ch,k.sticky),Fe=Z[he];if("ltr"==f.doc.direction&&Fe.level%2==0&&(P>0?Fe.to>k.ch:Fe.from<k.ch))return Mh(v,k,P);var Be,ot=function(sa,Ta){return Pc(v,sa instanceof Qo?sa.ch:sa,Ta)},ft=function(sa){return f.options.lineWrapping?(Be=Be||fu(f,v),Qp(f,v,Be,sa)):{begin:0,end:v.text.length}},jr=ft("before"==k.sticky?ot(k,-1):k.ch);if("rtl"==f.doc.direction||1==Fe.level){var Rr=1==Fe.level==P<0,_n=ot(k,Rr?1:-1);if(null!=_n&&(Rr?_n<=Fe.to&&_n<=jr.end:_n>=Fe.from&&_n>=jr.begin))return new Qo(k.line,_n,Rr?"before":"after")}var wo=function(sa,Ta,Fi){for(;sa>=0&&sa<Z.length;sa+=Ta){var zi=Z[sa],na=Ta>0==(1!=zi.level),Os=na?Fi.begin:ot(Fi.end,-1);if(zi.from<=Os&&Os<zi.to||(Os=na?zi.from:ot(zi.to,-1),Fi.begin<=Os&&Os<Fi.end))return _s=Os,na?new Qo(k.line,ot(_s,1),"before"):new Qo(k.line,_s,"after")}var _s},ni=wo(he+P,P,jr);if(ni)return ni;var Mi=P>0?jr.end:ot(jr.begin,-1);return null==Mi||P>0&&Mi==v.text.length||!(ni=wo(P>0?0:Z.length-1,P,ft(Mi)))?null:ni}(f.cm,Be,v,k):Mh(Be,v,k);if(null==Fi){if(Ta||!function ft(){var Ta=v.line+ot;return!(Ta<f.first||Ta>=f.first+f.size)&&(v=new Qo(Ta,v.ch,v.sticky),Be=ui(f,Ta))}())return!1;v=mu(Z,f.cm,Be,v.line,ot)}else v=Fi;return!0}if("char"==P||"codepoint"==P)jr();else if("column"==P)jr(!0);else if("word"==P||"group"==P)for(var Rr=null,_n="group"==P,Tn=f.cm&&f.cm.getHelper(v,"wordChars"),wo=!0;!(k<0)||jr(!wo);wo=!1){var ni=Be.text.charAt(v.ch)||"\n",Mi=Qr(ni,Tn)?"w":_n&&"\n"==ni?"n":!_n||/\s/.test(ni)?null:"p";if(!_n||wo||Mi||(Mi="s"),Rr&&Rr!=Mi){k<0&&(k=1,jr(),v.sticky="after");break}if(Mi&&(Rr=Mi),k>0&&!jr(!wo))break}var sa=Ph(f,v,he,Fe,!0);return Et(he,sa)&&(sa.hitSide=!0),sa}function Ad(f,v,k,P){var Z,he,Fe=f.doc,Be=v.left;if("page"==P){var ot=Math.min(f.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),ft=Math.max(ot-.5*hd(f.display),3);Z=(k>0?v.bottom:v.top)+k*ft}else"line"==P&&(Z=k>0?v.bottom+3:v.top-3);for(;(he=Tm(f,Be,Z)).outside;){if(k<0?Z<=0:Z>=Fe.height){he.hitSide=!0;break}Z+=5*k}return he}var Bl=function(f){this.cm=f,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new mo,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Hc(f,v){var k=_c(f,v.line);if(!k||k.hidden)return null;var P=ui(f.doc,v.line),Z=Cs(k,P,v.line),he=oo(P,f.doc.direction),Fe="left";he&&(Fe=ln(he,v.ch)%2?"right":"left");var Be=Vs(Z.map,v.ch,Fe);return Be.offset="right"==Be.collapse?Be.end:Be.start,Be}function Yu(f,v){return v&&(f.bad=!0),f}function jh(f,v,k){var P;if(v==f.display.lineDiv){if(!(P=f.display.lineDiv.childNodes[k]))return Yu(f.clipPos(Qo(f.display.viewTo-1)),!0);v=null,k=0}else for(P=v;;P=P.parentNode){if(!P||P==f.display.lineDiv)return null;if(P.parentNode&&P.parentNode==f.display.lineDiv)break}for(var Z=0;Z<f.display.view.length;Z++){var he=f.display.view[Z];if(he.node==P)return Qm(he,v,k)}}function Qm(f,v,k){var P=f.text.firstChild,Z=!1;if(!v||!Ke(P,v))return Yu(Qo(To(f.line),0),!0);if(v==P&&(Z=!0,v=P.childNodes[k],k=0,!v)){var he=f.rest?dn(f.rest):f.line;return Yu(Qo(To(he),he.text.length),Z)}var Fe=3==v.nodeType?v:null,Be=v;for(Fe||1!=v.childNodes.length||3!=v.firstChild.nodeType||(Fe=v.firstChild,k&&(k=Fe.nodeValue.length));Be.parentNode!=P;)Be=Be.parentNode;var ot=f.measure,ft=ot.maps;function jr(Mi,sa,Ta){for(var Fi=-1;Fi<(ft?ft.length:0);Fi++)for(var fa=Fi<0?ot.map:ft[Fi],zi=0;zi<fa.length;zi+=3){var na=fa[zi+2];if(na==Mi||na==sa){var Os=To(Fi<0?f.line:f.rest[Fi]),_s=fa[zi]+Ta;return(Ta<0||na!=Mi)&&(_s=fa[zi+(Ta?1:0)]),Qo(Os,_s)}}}var Rr=jr(Fe,Be,k);if(Rr)return Yu(Rr,Z);for(var _n=Be.nextSibling,Tn=Fe?Fe.nodeValue.length-k:0;_n;_n=_n.nextSibling){if(Rr=jr(_n,_n.firstChild,0))return Yu(Qo(Rr.line,Rr.ch-Tn),Z);Tn+=_n.textContent.length}for(var wo=Be.previousSibling,ni=k;wo;wo=wo.previousSibling){if(Rr=jr(wo,wo.firstChild,-1))return Yu(Qo(Rr.line,Rr.ch+ni),Z);ni+=wo.textContent.length}}Bl.prototype.init=function(f){var v=this,k=this,P=k.cm,Z=k.div=f.lineDiv;function he(Be){for(var ot=Be.target;ot;ot=ot.parentNode){if(ot==Z)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(ot.className))break}return!1}function Fe(Be){if(he(Be)&&!gt(P,Be)){if(P.somethingSelected())ch({lineWise:!1,text:P.getSelections()}),"cut"==Be.type&&P.replaceSelection("",null,"cut");else{if(!P.options.lineWiseCopyCut)return;var ot=Su(P);ch({lineWise:!0,text:ot.text}),"cut"==Be.type&&P.operation(function(){P.setSelections(ot.ranges,0,zn),P.replaceSelection("",null,"cut")})}if(Be.clipboardData){Be.clipboardData.clearData();var ft=yd.text.join("\n");if(Be.clipboardData.setData("Text",ft),Be.clipboardData.getData("Text")==ft)return void Be.preventDefault()}var jr=im(),Rr=jr.firstChild;P.display.lineSpace.insertBefore(jr,P.display.lineSpace.firstChild),Rr.value=yd.text.join("\n");var _n=Wt();Kr(Rr),setTimeout(function(){P.display.lineSpace.removeChild(jr),_n.focus(),_n==Z&&k.showPrimarySelection()},50)}}Z.contentEditable=!0,om(Z,P.options.spellcheck,P.options.autocorrect,P.options.autocapitalize),li(Z,"paste",function(Be){!he(Be)||gt(P,Be)||Nm(Be,P)||R<=11&&setTimeout(bn(P,function(){return v.updateFromDOM()}),20)}),li(Z,"compositionstart",function(Be){v.composing={data:Be.data,done:!1}}),li(Z,"compositionupdate",function(Be){v.composing||(v.composing={data:Be.data,done:!1})}),li(Z,"compositionend",function(Be){v.composing&&(Be.data!=v.composing.data&&v.readFromDOMSoon(),v.composing.done=!0)}),li(Z,"touchstart",function(){return k.forceCompositionEnd()}),li(Z,"input",function(){v.composing||v.readFromDOMSoon()}),li(Z,"copy",Fe),li(Z,"cut",Fe)},Bl.prototype.screenReaderLabelChanged=function(f){f?this.div.setAttribute("aria-label",f):this.div.removeAttribute("aria-label")},Bl.prototype.prepareSelection=function(){var f=Q(this.cm,!1);return f.focus=Wt()==this.div,f},Bl.prototype.showSelection=function(f,v){f&&this.cm.display.view.length&&((f.focus||v)&&this.showPrimarySelection(),this.showMultipleSelections(f))},Bl.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Bl.prototype.showPrimarySelection=function(){var f=this.getSelection(),v=this.cm,k=v.doc.sel.primary(),P=k.from(),Z=k.to();if(v.display.viewTo==v.display.viewFrom||P.line>=v.display.viewTo||Z.line<v.display.viewFrom)f.removeAllRanges();else{var he=jh(v,f.anchorNode,f.anchorOffset),Fe=jh(v,f.focusNode,f.focusOffset);if(!he||he.bad||!Fe||Fe.bad||0!=Ba(oa(he,Fe),P)||0!=Ba(Ao(he,Fe),Z)){var Be=v.display.view,ot=P.line>=v.display.viewFrom&&Hc(v,P)||{node:Be[0].measure.map[2],offset:0},ft=Z.line<v.display.viewTo&&Hc(v,Z);if(!ft){var jr=Be[Be.length-1].measure,Rr=jr.maps?jr.maps[jr.maps.length-1]:jr.map;ft={node:Rr[Rr.length-1],offset:Rr[Rr.length-2]-Rr[Rr.length-3]}}if(ot&&ft){var _n,Tn=f.rangeCount&&f.getRangeAt(0);try{_n=l(ot.node,ot.offset,ft.offset,ft.node)}catch{}_n&&(!z&&v.state.focused?(f.collapse(ot.node,ot.offset),_n.collapsed||(f.removeAllRanges(),f.addRange(_n))):(f.removeAllRanges(),f.addRange(_n)),Tn&&null==f.anchorNode?f.addRange(Tn):z&&this.startGracePeriod()),this.rememberSelection()}else f.removeAllRanges()}}},Bl.prototype.startGracePeriod=function(){var f=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){f.gracePeriod=!1,f.selectionChanged()&&f.cm.operation(function(){return f.cm.curOp.selectionChanged=!0})},20)},Bl.prototype.showMultipleSelections=function(f){ut(this.cm.display.cursorDiv,f.cursors),ut(this.cm.display.selectionDiv,f.selection)},Bl.prototype.rememberSelection=function(){var f=this.getSelection();this.lastAnchorNode=f.anchorNode,this.lastAnchorOffset=f.anchorOffset,this.lastFocusNode=f.focusNode,this.lastFocusOffset=f.focusOffset},Bl.prototype.selectionInEditor=function(){var f=this.getSelection();if(!f.rangeCount)return!1;var v=f.getRangeAt(0).commonAncestorContainer;return Ke(this.div,v)},Bl.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()&&Wt()==this.div||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Bl.prototype.blur=function(){this.div.blur()},Bl.prototype.getField=function(){return this.div},Bl.prototype.supportsTouch=function(){return!0},Bl.prototype.receivedFocus=function(){var f=this,v=this;this.selectionInEditor()?setTimeout(function(){return f.pollSelection()},20):on(this.cm,function(){return v.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function k(){v.cm.state.focused&&(v.pollSelection(),v.polling.set(v.cm.options.pollInterval,k))})},Bl.prototype.selectionChanged=function(){var f=this.getSelection();return f.anchorNode!=this.lastAnchorNode||f.anchorOffset!=this.lastAnchorOffset||f.focusNode!=this.lastFocusNode||f.focusOffset!=this.lastFocusOffset},Bl.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var f=this.getSelection(),v=this.cm;if(Te&&L&&this.cm.display.gutterSpecs.length&&function Fh(f){for(var v=f;v;v=v.parentNode)if(/CodeMirror-gutter-wrapper/.test(v.className))return!0;return!1}(f.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var k=jh(v,f.anchorNode,f.anchorOffset),P=jh(v,f.focusNode,f.focusOffset);k&&P&&on(v,function(){Xl(v.doc,Ws(k,P),zn),(k.bad||P.bad)&&(v.curOp.selectionChanged=!0)})}}},Bl.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var f,v,k,P=this.cm,Z=P.display,he=P.doc.sel.primary(),Fe=he.from(),Be=he.to();if(0==Fe.ch&&Fe.line>P.firstLine()&&(Fe=Qo(Fe.line-1,ui(P.doc,Fe.line-1).length)),Be.ch==ui(P.doc,Be.line).text.length&&Be.line<P.lastLine()&&(Be=Qo(Be.line+1,0)),Fe.line<Z.viewFrom||Be.line>Z.viewTo-1)return!1;Fe.line==Z.viewFrom||0==(f=Eu(P,Fe.line))?(v=To(Z.view[0].line),k=Z.view[0].node):(v=To(Z.view[f].line),k=Z.view[f-1].node.nextSibling);var ot,ft,jr=Eu(P,Be.line);if(jr==Z.view.length-1?(ot=Z.viewTo-1,ft=Z.lineDiv.lastChild):(ot=To(Z.view[jr+1].line)-1,ft=Z.view[jr+1].node.previousSibling),!k)return!1;for(var Rr=P.doc.splitLines(function Ff(f,v,k,P,Z){var he="",Fe=!1,Be=f.doc.lineSeparator(),ot=!1;function jr(){Fe&&(he+=Be,ot&&(he+=Be),Fe=ot=!1)}function Rr(Tn){Tn&&(jr(),he+=Tn)}function _n(Tn){if(1==Tn.nodeType){var wo=Tn.getAttribute("cm-text");if(wo)return void Rr(wo);var ni,Mi=Tn.getAttribute("cm-marker");if(Mi){var sa=f.findMarks(Qo(P,0),Qo(Z+1,0),function ft(Tn){return function(wo){return wo.id==Tn}}(+Mi));return void(sa.length&&(ni=sa[0].find(0))&&Rr(ns(f.doc,ni.from,ni.to).join(Be)))}if("false"==Tn.getAttribute("contenteditable"))return;var Ta=/^(pre|div|p|li|table|br)$/i.test(Tn.nodeName);if(!/^br$/i.test(Tn.nodeName)&&0==Tn.textContent.length)return;Ta&&jr();for(var Fi=0;Fi<Tn.childNodes.length;Fi++)_n(Tn.childNodes[Fi]);/^(pre|p)$/i.test(Tn.nodeName)&&(ot=!0),Ta&&(Fe=!0)}else 3==Tn.nodeType&&Rr(Tn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;_n(v),v!=k;)v=v.nextSibling,ot=!1;return he}(P,k,ft,v,ot)),_n=ns(P.doc,Qo(v,0),Qo(ot,ui(P.doc,ot).text.length));Rr.length>1&&_n.length>1;)if(dn(Rr)==dn(_n))Rr.pop(),_n.pop(),ot--;else{if(Rr[0]!=_n[0])break;Rr.shift(),_n.shift(),v++}for(var Tn=0,wo=0,ni=Rr[0],Mi=_n[0],sa=Math.min(ni.length,Mi.length);Tn<sa&&ni.charCodeAt(Tn)==Mi.charCodeAt(Tn);)++Tn;for(var Ta=dn(Rr),Fi=dn(_n),fa=Math.min(Ta.length-(1==Rr.length?Tn:0),Fi.length-(1==_n.length?Tn:0));wo<fa&&Ta.charCodeAt(Ta.length-wo-1)==Fi.charCodeAt(Fi.length-wo-1);)++wo;if(1==Rr.length&&1==_n.length&&v==Fe.line)for(;Tn&&Tn>Fe.ch&&Ta.charCodeAt(Ta.length-wo-1)==Fi.charCodeAt(Fi.length-wo-1);)Tn--,wo++;Rr[Rr.length-1]=Ta.slice(0,Ta.length-wo).replace(/^\u200b+/,""),Rr[0]=Rr[0].slice(Tn).replace(/\u200b+$/,"");var zi=Qo(v,Tn),na=Qo(ot,_n.length?dn(_n).length-wo:0);return Rr.length>1||Rr[0]||Ba(zi,na)?(ef(P.doc,Rr,zi,na,"+input"),!0):void 0},Bl.prototype.ensurePolled=function(){this.forceCompositionEnd()},Bl.prototype.reset=function(){this.forceCompositionEnd()},Bl.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Bl.prototype.readFromDOMSoon=function(){var f=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(f.readDOMTimeout=null,f.composing){if(!f.composing.done)return;f.composing=null}f.updateFromDOM()},80))},Bl.prototype.updateFromDOM=function(){var f=this;!this.cm.isReadOnly()&&this.pollContent()||on(this.cm,function(){return Uu(f.cm)})},Bl.prototype.setUneditable=function(f){f.contentEditable="false"},Bl.prototype.onKeyPress=function(f){0==f.charCode||this.composing||(f.preventDefault(),this.cm.isReadOnly()||bn(this.cm,jp)(this.cm,String.fromCharCode(null==f.charCode?f.keyCode:f.charCode),0))},Bl.prototype.readOnlyChanged=function(f){this.div.contentEditable=String("nocursor"!=f)},Bl.prototype.onContextMenu=function(){},Bl.prototype.resetPosition=function(){},Bl.prototype.needsContentAttribute=!0;var Jl=function(f){this.cm=f,this.prevInput="",this.pollingFast=!1,this.polling=new mo,this.hasSelection=!1,this.composing=null};Jl.prototype.init=function(f){var v=this,k=this,P=this.cm;this.createField(f);var Z=this.textarea;function he(Fe){if(!gt(P,Fe)){if(P.somethingSelected())ch({lineWise:!1,text:P.getSelections()});else{if(!P.options.lineWiseCopyCut)return;var Be=Su(P);ch({lineWise:!0,text:Be.text}),"cut"==Fe.type?P.setSelections(Be.ranges,null,zn):(k.prevInput="",Z.value=Be.text.join("\n"),Kr(Z))}"cut"==Fe.type&&(P.state.cutIncoming=+new Date)}}f.wrapper.insertBefore(this.wrapper,f.wrapper.firstChild),we&&(Z.style.width="0px"),li(Z,"input",function(){U&&R>=9&&v.hasSelection&&(v.hasSelection=null),k.poll()}),li(Z,"paste",function(Fe){gt(P,Fe)||Nm(Fe,P)||(P.state.pasteIncoming=+new Date,k.fastPoll())}),li(Z,"cut",he),li(Z,"copy",he),li(f.scroller,"paste",function(Fe){if(!Ve(f,Fe)&&!gt(P,Fe)){if(!Z.dispatchEvent)return P.state.pasteIncoming=+new Date,void k.focus();var Be=new Event("paste");Be.clipboardData=Fe.clipboardData,Z.dispatchEvent(Be)}}),li(f.lineSpace,"selectstart",function(Fe){Ve(f,Fe)||St(Fe)}),li(Z,"compositionstart",function(){var Fe=P.getCursor("from");k.composing&&k.composing.range.clear(),k.composing={start:Fe,range:P.markText(Fe,P.getCursor("to"),{className:"CodeMirror-composing"})}}),li(Z,"compositionend",function(){k.composing&&(k.poll(),k.composing.range.clear(),k.composing=null)})},Jl.prototype.createField=function(f){this.wrapper=im(),this.textarea=this.wrapper.firstChild},Jl.prototype.screenReaderLabelChanged=function(f){f?this.textarea.setAttribute("aria-label",f):this.textarea.removeAttribute("aria-label")},Jl.prototype.prepareSelection=function(){var f=this.cm,v=f.display,k=f.doc,P=Q(f);if(f.options.moveInputWithCursor){var Z=Hd(f,k.sel.primary().head,"div"),he=v.wrapper.getBoundingClientRect(),Fe=v.lineDiv.getBoundingClientRect();P.teTop=Math.max(0,Math.min(v.wrapper.clientHeight-10,Z.top+Fe.top-he.top)),P.teLeft=Math.max(0,Math.min(v.wrapper.clientWidth-10,Z.left+Fe.left-he.left))}return P},Jl.prototype.showSelection=function(f){var v=this.cm.display;ut(v.cursorDiv,f.cursors),ut(v.selectionDiv,f.selection),null!=f.teTop&&(this.wrapper.style.top=f.teTop+"px",this.wrapper.style.left=f.teLeft+"px")},Jl.prototype.reset=function(f){if(!this.contextMenuPending&&!this.composing){var v=this.cm;if(v.somethingSelected()){this.prevInput="";var k=v.getSelection();this.textarea.value=k,v.state.focused&&Kr(this.textarea),U&&R>=9&&(this.hasSelection=k)}else f||(this.prevInput=this.textarea.value="",U&&R>=9&&(this.hasSelection=null))}},Jl.prototype.getField=function(){return this.textarea},Jl.prototype.supportsTouch=function(){return!1},Jl.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ge||Wt()!=this.textarea))try{this.textarea.focus()}catch{}},Jl.prototype.blur=function(){this.textarea.blur()},Jl.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Jl.prototype.receivedFocus=function(){this.slowPoll()},Jl.prototype.slowPoll=function(){var f=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){f.poll(),f.cm.state.focused&&f.slowPoll()})},Jl.prototype.fastPoll=function(){var f=!1,v=this;v.pollingFast=!0,v.polling.set(20,function k(){v.poll()||f?(v.pollingFast=!1,v.slowPoll()):(f=!0,v.polling.set(60,k))})},Jl.prototype.poll=function(){var f=this,v=this.cm,k=this.textarea,P=this.prevInput;if(this.contextMenuPending||!v.state.focused||hn(k)&&!P&&!this.composing||v.isReadOnly()||v.options.disableInput||v.state.keySeq)return!1;var Z=k.value;if(Z==P&&!v.somethingSelected())return!1;if(U&&R>=9&&this.hasSelection===Z||Ce&&/[\uf700-\uf7ff]/.test(Z))return v.display.input.reset(),!1;if(v.doc.sel==v.display.selForContextMenu){var he=Z.charCodeAt(0);if(8203!=he||P||(P="\u200b"),8666==he)return this.reset(),this.cm.execCommand("undo")}for(var Fe=0,Be=Math.min(P.length,Z.length);Fe<Be&&P.charCodeAt(Fe)==Z.charCodeAt(Fe);)++Fe;return on(v,function(){jp(v,Z.slice(Fe),P.length-Fe,null,f.composing?"*compose":null),Z.length>1e3||Z.indexOf("\n")>-1?k.value=f.prevInput="":f.prevInput=Z,f.composing&&(f.composing.range.clear(),f.composing.range=v.markText(f.composing.start,v.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Jl.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Jl.prototype.onKeyPress=function(){U&&R>=9&&(this.hasSelection=null),this.fastPoll()},Jl.prototype.onContextMenu=function(f){var v=this,k=v.cm,P=k.display,Z=v.textarea;v.contextMenuPending&&v.contextMenuPending();var he=Pp(k,f),Fe=P.scroller.scrollTop;if(he&&!Y){k.options.resetSelectionOnContextMenu&&-1==k.doc.sel.contains(he)&&bn(k,Xl)(k.doc,Ws(he),zn);var Be,ot=Z.style.cssText,ft=v.wrapper.style.cssText,jr=v.wrapper.offsetParent.getBoundingClientRect();if(v.wrapper.style.cssText="position: static",Z.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(f.clientY-jr.top-5)+"px; left: "+(f.clientX-jr.left-5)+"px;\n      z-index: 1000; background: "+(U?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",T&&(Be=window.scrollY),P.input.focus(),T&&window.scrollTo(null,Be),P.input.reset(),k.somethingSelected()||(Z.value=v.prevInput=" "),v.contextMenuPending=Tn,P.selForContextMenu=k.doc.sel,clearTimeout(P.detectingSelectAll),U&&R>=9&&_n(),ke){Ko(f);var Rr=function(){Nt(window,"mouseup",Rr),setTimeout(Tn,20)};li(window,"mouseup",Rr)}else setTimeout(Tn,50)}function _n(){if(null!=Z.selectionStart){var wo=k.somethingSelected(),ni="\u200b"+(wo?Z.value:"");Z.value="\u21da",Z.value=ni,v.prevInput=wo?"":"\u200b",Z.selectionStart=1,Z.selectionEnd=ni.length,P.selForContextMenu=k.doc.sel}}function Tn(){if(v.contextMenuPending==Tn&&(v.contextMenuPending=!1,v.wrapper.style.cssText=ft,Z.style.cssText=ot,U&&R<9&&P.scrollbars.setScrollTop(P.scroller.scrollTop=Fe),null!=Z.selectionStart)){(!U||U&&R<9)&&_n();var wo=0,ni=function(){P.selForContextMenu==k.doc.sel&&0==Z.selectionStart&&Z.selectionEnd>0&&"\u200b"==v.prevInput?bn(k,Am)(k):wo++<10?P.detectingSelectAll=setTimeout(ni,500):(P.selForContextMenu=null,P.input.reset())};P.detectingSelectAll=setTimeout(ni,200)}}},Jl.prototype.readOnlyChanged=function(f){f||this.reset(),this.textarea.disabled="nocursor"==f,this.textarea.readOnly=!!f},Jl.prototype.setUneditable=function(){},Jl.prototype.needsContentAttribute=!1,function Ju(f){var v=f.optionHandlers;function k(P,Z,he,Fe){f.defaults[P]=Z,he&&(v[P]=Fe?function(Be,ot,ft){ft!=ac&&he(Be,ot,ft)}:he)}f.defineOption=k,f.Init=ac,k("value","",function(P,Z){return P.setValue(Z)},!0),k("mode",null,function(P,Z){P.doc.modeOption=Z,vl(P)},!0),k("indentUnit",2,vl,!0),k("indentWithTabs",!1),k("smartIndent",!0),k("tabSize",4,function(P){Pd(P),wl(P),Uu(P)},!0),k("lineSeparator",null,function(P,Z){if(P.doc.lineSep=Z,Z){var he=[],Fe=P.doc.first;P.doc.iter(function(ot){for(var ft=0;;){var jr=ot.text.indexOf(Z,ft);if(-1==jr)break;ft=jr+Z.length,he.push(Qo(Fe,jr))}Fe++});for(var Be=he.length-1;Be>=0;Be--)ef(P.doc,Z,he[Be],Qo(he[Be].line,he[Be].ch+Z.length))}}),k("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(P,Z,he){P.state.specialChars=new RegExp(Z.source+(Z.test("\t")?"":"|\t"),"g"),he!=ac&&P.refresh()}),k("specialCharPlaceholder",Ks,function(P){return P.refresh()},!0),k("electricChars",!0),k("inputStyle",ge?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),k("spellcheck",!1,function(P,Z){return P.getInputField().spellcheck=Z},!0),k("autocorrect",!1,function(P,Z){return P.getInputField().autocorrect=Z},!0),k("autocapitalize",!1,function(P,Z){return P.getInputField().autocapitalize=Z},!0),k("rtlMoveVisually",!je),k("wholeLineUpdateBefore",!0),k("theme","default",function(P){Sl(P),Ts(P)},!0),k("keyMap","default",function(P,Z,he){var Fe=Dl(Z),Be=he!=ac&&Dl(he);Be&&Be.detach&&Be.detach(P,Fe),Fe.attach&&Fe.attach(P,Be||null)}),k("extraKeys",null),k("configureMouse",null),k("lineWrapping",!1,Md,!0),k("gutters",[],function(P,Z){P.display.gutterSpecs=os(Z,P.options.lineNumbers),Ts(P)},!0),k("fixedGutter",!0,function(P,Z){P.display.gutters.style.left=Z?Jm(P.display)+"px":"0",P.refresh()},!0),k("coverGutterNextToScrollbar",!1,function(P){return hr(P)},!0),k("scrollbarStyle","native",function(P){jo(P),hr(P),P.display.scrollbars.setScrollTop(P.doc.scrollTop),P.display.scrollbars.setScrollLeft(P.doc.scrollLeft)},!0),k("lineNumbers",!1,function(P,Z){P.display.gutterSpecs=os(P.options.gutters,Z),Ts(P)},!0),k("firstLineNumber",1,Ts,!0),k("lineNumberFormatter",function(P){return P},Ts,!0),k("showCursorWhenSelecting",!1,Sf,!0),k("resetSelectionOnContextMenu",!0),k("lineWiseCopyCut",!0),k("pasteLinesPerSelection",!0),k("selectionsMayTouch",!1),k("readOnly",!1,function(P,Z){"nocursor"==Z&&(Ne(P),P.display.input.blur()),P.display.input.readOnlyChanged(Z)}),k("screenReaderLabel",null,function(P,Z){P.display.input.screenReaderLabelChanged(Z=""===Z?null:Z)}),k("disableInput",!1,function(P,Z){Z||P.display.input.reset()},!0),k("dragDrop",!0,Tu),k("allowDropFileTypes",null),k("cursorBlinkRate",530),k("cursorScrollMargin",0),k("cursorHeight",1,Sf,!0),k("singleCursorHeightPerLine",!0,Sf,!0),k("workTime",100),k("workDelay",100),k("flattenSpans",!0,Pd,!0),k("addModeClass",!1,Pd,!0),k("pollInterval",100),k("undoDepth",200,function(P,Z){return P.doc.history.undoDepth=Z}),k("historyEventDelay",1250),k("viewportMargin",10,function(P){return P.refresh()},!0),k("maxHighlightLength",1e4,Pd,!0),k("moveInputWithCursor",!0,function(P,Z){Z||P.display.input.resetPosition()}),k("tabindex",null,function(P,Z){return P.display.input.getField().tabIndex=Z||""}),k("autofocus",null),k("direction","ltr",function(P,Z){return P.doc.setDirection(Z)},!0),k("phrases",null)}(xl),function am(f){var v=f.optionHandlers,k=f.helpers={};f.prototype={constructor:f,focus:function(){window.focus(),this.display.input.focus()},setOption:function(P,Z){var he=this.options,Fe=he[P];he[P]==Z&&"mode"!=P||(he[P]=Z,v.hasOwnProperty(P)&&bn(this,v[P])(this,Z,Fe),jt(this,"optionChange",this,P))},getOption:function(P){return this.options[P]},getDoc:function(){return this.doc},addKeyMap:function(P,Z){this.state.keyMaps[Z?"push":"unshift"](Dl(P))},removeKeyMap:function(P){for(var Z=this.state.keyMaps,he=0;he<Z.length;++he)if(Z[he]==P||Z[he].name==P)return Z.splice(he,1),!0},addOverlay:Xn(function(P,Z){var he=P.token?P:f.getMode(this.options,P);if(he.startState)throw new Error("Overlays may not be stateful.");(function kn(f,v,k){for(var P=0,Z=k(v);P<f.length&&k(f[P])<=Z;)P++;f.splice(P,0,v)})(this.state.overlays,{mode:he,modeSpec:P,opaque:Z&&Z.opaque,priority:Z&&Z.priority||0},function(Fe){return Fe.priority}),this.state.modeGen++,Uu(this)}),removeOverlay:Xn(function(P){for(var Z=this.state.overlays,he=0;he<Z.length;++he){var Fe=Z[he].modeSpec;if(Fe==P||"string"==typeof P&&Fe.name==P)return Z.splice(he,1),this.state.modeGen++,void Uu(this)}}),indentLine:Xn(function(P,Z,he){"string"!=typeof Z&&"number"!=typeof Z&&(Z=null==Z?this.options.smartIndent?"smart":"prev":Z?"add":"subtract"),el(this.doc,P)&&_d(this,P,Z,he)}),indentSelection:Xn(function(P){for(var Z=this.doc.sel.ranges,he=-1,Fe=0;Fe<Z.length;Fe++){var Be=Z[Fe];if(Be.empty())Be.head.line>he&&(_d(this,Be.head.line,P,!0),he=Be.head.line,Fe==this.doc.sel.primIndex&&Qt(this));else{var ot=Be.from(),ft=Be.to(),jr=Math.max(he,ot.line);he=Math.min(this.lastLine(),ft.line-(ft.ch?0:1))+1;for(var Rr=jr;Rr<he;++Rr)_d(this,Rr,P);var _n=this.doc.sel.ranges;0==ot.ch&&Z.length==_n.length&&_n[Fe].from().ch>0&&fp(this.doc,Fe,new $a(ot,_n[Fe].to()),zn)}}}),getTokenAt:function(P,Z){return du(this,P,Z)},getLineTokens:function(P,Z){return du(this,Qo(P),Z,!0)},getTokenTypeAt:function(P){P=Vi(this.doc,P);var Z,he=Vd(this,ui(this.doc,P.line)),Fe=0,Be=(he.length-1)/2,ot=P.ch;if(0==ot)Z=he[2];else for(;;){var ft=Fe+Be>>1;if((ft?he[2*ft-1]:0)>=ot)Be=ft;else{if(!(he[2*ft+1]<ot)){Z=he[2*ft+2];break}Fe=ft+1}}var jr=Z?Z.indexOf("overlay "):-1;return jr<0?Z:0==jr?null:Z.slice(0,jr-1)},getModeAt:function(P){var Z=this.doc.mode;return Z.innerMode?f.innerMode(Z,this.getTokenAt(P).state).mode:Z},getHelper:function(P,Z){return this.getHelpers(P,Z)[0]},getHelpers:function(P,Z){var he=[];if(!k.hasOwnProperty(Z))return he;var Fe=k[Z],Be=this.getModeAt(P);if("string"==typeof Be[Z])Fe[Be[Z]]&&he.push(Fe[Be[Z]]);else if(Be[Z])for(var ot=0;ot<Be[Z].length;ot++){var ft=Fe[Be[Z][ot]];ft&&he.push(ft)}else Be.helperType&&Fe[Be.helperType]?he.push(Fe[Be.helperType]):Fe[Be.name]&&he.push(Fe[Be.name]);for(var jr=0;jr<Fe._global.length;jr++){var Rr=Fe._global[jr];Rr.pred(Be,this)&&-1==No(he,Rr.val)&&he.push(Rr.val)}return he},getStateAfter:function(P,Z){var he=this.doc;return Od(this,(P=ba(he,P??he.first+he.size-1))+1,Z).state},cursorCoords:function(P,Z){var he=this.doc.sel.primary();return Hd(this,null==P?he.head:"object"==typeof P?Vi(this.doc,P):P?he.from():he.to(),Z||"page")},charCoords:function(P,Z){return Ul(this,Vi(this.doc,P),Z||"page")},coordsChar:function(P,Z){return Tm(this,(P=yg(this,P,Z||"page")).left,P.top)},lineAtHeight:function(P,Z){return P=yg(this,{top:P,left:0},Z||"page").top,rs(this.doc,P+this.display.viewOffset)},heightAtLine:function(P,Z,he){var Fe,Be=!1;if("number"==typeof P){var ot=this.doc.first+this.doc.size-1;P<this.doc.first?P=this.doc.first:P>ot&&(P=ot,Be=!0),Fe=ui(this.doc,P)}else Fe=P;return Tf(this,Fe,{top:0,left:0},Z||"page",he||Be).top+(Be?this.doc.height-Il(Fe):0)},defaultTextHeight:function(){return hd(this.display)},defaultCharWidth:function(){return $d(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(P,Z,he,Fe,Be){var ot=this.display,ft=(P=Hd(this,Vi(this.doc,P))).bottom,jr=P.left;if(Z.style.position="absolute",Z.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(Z),ot.sizer.appendChild(Z),"over"==Fe)ft=P.top;else if("above"==Fe||"near"==Fe){var Rr=Math.max(ot.wrapper.clientHeight,this.doc.height),_n=Math.max(ot.sizer.clientWidth,ot.lineSpace.clientWidth);("above"==Fe||P.bottom+Z.offsetHeight>Rr)&&P.top>Z.offsetHeight?ft=P.top-Z.offsetHeight:P.bottom+Z.offsetHeight<=Rr&&(ft=P.bottom),jr+Z.offsetWidth>_n&&(jr=_n-Z.offsetWidth)}Z.style.top=ft+"px",Z.style.left=Z.style.right="","right"==Be?(jr=ot.sizer.clientWidth-Z.offsetWidth,Z.style.right="0px"):("left"==Be?jr=0:"middle"==Be&&(jr=(ot.sizer.clientWidth-Z.offsetWidth)/2),Z.style.left=jr+"px"),he&&function Ar(f,v){var k=pr(f,v);null!=k.scrollTop&&gi(f,k.scrollTop),null!=k.scrollLeft&&Jr(f,k.scrollLeft)}(this,{left:jr,top:ft,right:jr+Z.offsetWidth,bottom:ft+Z.offsetHeight})},triggerOnKeyDown:Xn(tm),triggerOnKeyPress:Xn(Fm),triggerOnKeyUp:Rm,triggerOnMouseDown:Xn(jm),execCommand:function(P){if(hp.hasOwnProperty(P))return hp[P].call(null,this)},triggerElectric:Xn(function(P){Rh(this,P)}),findPosH:function(P,Z,he,Fe){var Be=1;Z<0&&(Be=-1,Z=-Z);for(var ot=Vi(this.doc,P),ft=0;ft<Z&&!(ot=sm(this.doc,ot,Be,he,Fe)).hitSide;++ft);return ot},moveH:Xn(function(P,Z){var he=this;this.extendSelectionsBy(function(Fe){return he.display.shift||he.doc.extend||Fe.empty()?sm(he.doc,Fe.head,P,Z,he.options.rtlMoveVisually):P<0?Fe.from():Fe.to()},an)}),deleteH:Xn(function(P,Z){var Fe=this.doc;this.doc.sel.somethingSelected()?Fe.replaceSelection("",null,"+delete"):Tl(this,function(Be){var ot=sm(Fe,Be.head,P,Z,!1);return P<0?{from:ot,to:Be.head}:{from:Be.head,to:ot}})}),findPosV:function(P,Z,he,Fe){var Be=1,ot=Fe;Z<0&&(Be=-1,Z=-Z);for(var ft=Vi(this.doc,P),jr=0;jr<Z;++jr){var Rr=Hd(this,ft,"div");if(null==ot?ot=Rr.left:Rr.left=ot,(ft=Ad(this,Rr,Be,he)).hitSide)break}return ft},moveV:Xn(function(P,Z){var he=this,Fe=this.doc,Be=[],ot=!this.display.shift&&!Fe.extend&&Fe.sel.somethingSelected();if(Fe.extendSelectionsBy(function(jr){if(ot)return P<0?jr.from():jr.to();var Rr=Hd(he,jr.head,"div");null!=jr.goalColumn&&(Rr.left=jr.goalColumn),Be.push(Rr.left);var _n=Ad(he,Rr,P,Z);return"page"==Z&&jr==Fe.sel.primary()&&Sr(he,Ul(he,_n,"div").top-Rr.top),_n},an),Be.length)for(var ft=0;ft<Fe.sel.ranges.length;ft++)Fe.sel.ranges[ft].goalColumn=Be[ft]}),findWordAt:function(P){var Z=ui(this.doc,P.line).text,he=P.ch,Fe=P.ch;if(Z){var Be=this.getHelper(P,"wordChars");"before"!=P.sticky&&Fe!=Z.length||!he?++Fe:--he;for(var ot=Z.charAt(he),ft=Qr(ot,Be)?function(jr){return Qr(jr,Be)}:/\s/.test(ot)?function(jr){return/\s/.test(jr)}:function(jr){return!/\s/.test(jr)&&!Qr(jr)};he>0&&ft(Z.charAt(he-1));)--he;for(;Fe<Z.length&&ft(Z.charAt(Fe));)++Fe}return new $a(Qo(P.line,he),Qo(P.line,Fe))},toggleOverwrite:function(P){null!=P&&P==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?mr(this.display.cursorDiv,"CodeMirror-overwrite"):Me(this.display.cursorDiv,"CodeMirror-overwrite"),jt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Wt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Xn(function(P,Z){Lr(this,P,Z)}),getScrollInfo:function(){var P=this.display.scroller;return{left:P.scrollLeft,top:P.scrollTop,height:P.scrollHeight-vn(this)-this.display.barHeight,width:P.scrollWidth-vn(this)-this.display.barWidth,clientHeight:oi(this),clientWidth:On(this)}},scrollIntoView:Xn(function(P,Z){null==P?(P={from:this.doc.sel.primary().head,to:null},null==Z&&(Z=this.options.cursorScrollMargin)):"number"==typeof P?P={from:Qo(P,0),to:null}:null==P.from&&(P={from:P,to:null}),P.to||(P.to=P.from),P.margin=Z||0,null!=P.from.line?function En(f,v){qn(f),f.curOp.scrollToPos=v}(this,P):Fo(this,P.from,P.to,P.margin)}),setSize:Xn(function(P,Z){var he=this,Fe=function(ot){return"number"==typeof ot||/^\d+$/.test(String(ot))?ot+"px":ot};null!=P&&(this.display.wrapper.style.width=Fe(P)),null!=Z&&(this.display.wrapper.style.height=Fe(Z)),this.options.lineWrapping&&Sh(this);var Be=this.display.viewFrom;this.doc.iter(Be,this.display.viewTo,function(ot){if(ot.widgets)for(var ft=0;ft<ot.widgets.length;ft++)if(ot.widgets[ft].noHScroll){Xp(he,Be,"widget");break}++Be}),this.curOp.forceUpdate=!0,jt(this,"refresh",this)}),operation:function(P){return on(this,P)},startOperation:function(){return Zo(this)},endOperation:function(){return ro(this)},refresh:Xn(function(){var P=this.display.cachedTextHeight;Uu(this),this.curOp.forceUpdate=!0,wl(this),Lr(this,this.doc.scrollLeft,this.doc.scrollTop),Bi(this.display),(null==P||Math.abs(P-hd(this.display))>.5||this.options.lineWrapping)&&Sm(this),jt(this,"refresh",this)}),swapDoc:Xn(function(P){var Z=this.doc;return Z.cm=null,this.state.selectingText&&this.state.selectingText(),Ap(this,P),wl(this),this.display.input.reset(),Lr(this,P.scrollLeft,P.scrollTop),this.curOp.forceScroll=!0,ml(this,"swapDoc",this,Z),Z}),phrase:function(P){var Z=this.options.phrases;return Z&&Object.prototype.hasOwnProperty.call(Z,P)?Z[P]:P},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},wt(f),f.registerHelper=function(P,Z,he){k.hasOwnProperty(P)||(k[P]=f[P]={_global:[]}),k[P][Z]=he},f.registerGlobalHelper=function(P,Z,he,Fe){f.registerHelper(P,Z,Fe),k[P]._global.push({pred:he,val:Fe})}}(xl);var Ld="iter insert remove copy getEditor constructor".split(" ");for(var Id in fr.prototype)fr.prototype.hasOwnProperty(Id)&&No(Ld,Id)<0&&(xl.prototype[Id]=function(f){return function(){return f.apply(this.doc,arguments)}}(fr.prototype[Id]));return wt(fr),xl.inputStyles={textarea:Jl,contenteditable:Bl},xl.defineMode=function(f){xl.defaults.mode||"null"==f||(xl.defaults.mode=f),Ft.apply(this,arguments)},xl.defineMIME=function Zn(f,v){Xt[f]=v},xl.defineMode("null",function(){return{token:function(f){return f.skipToEnd()}}}),xl.defineMIME("text/plain","null"),xl.defineExtension=function(f,v){xl.prototype[f]=v},xl.defineDocExtension=function(f,v){fr.prototype[f]=v},xl.fromTextArea=function Nh(f,v){if((v=v?Kn(v):{}).value=f.value,!v.tabindex&&f.tabIndex&&(v.tabindex=f.tabIndex),!v.placeholder&&f.placeholder&&(v.placeholder=f.placeholder),null==v.autofocus){var k=Wt();v.autofocus=k==f||null!=f.getAttribute("autofocus")&&k==document.body}function P(){f.value=Be.getValue()}var Z;if(f.form&&(li(f.form,"submit",P),!v.leaveSubmitMethodAlone)){var he=f.form;Z=he.submit;try{var Fe=he.submit=function(){P(),he.submit=Z,he.submit(),he.submit=Fe}}catch{}}v.finishInit=function(ot){ot.save=P,ot.getTextArea=function(){return f},ot.toTextArea=function(){ot.toTextArea=isNaN,P(),f.parentNode.removeChild(ot.getWrapperElement()),f.style.display="",f.form&&(Nt(f.form,"submit",P),v.leaveSubmitMethodAlone||"function"!=typeof f.form.submit||(f.form.submit=Z))}},f.style.display="none";var Be=xl(function(ot){return f.parentNode.insertBefore(ot,f.nextSibling)},v);return Be},function kd(f){f.off=Nt,f.on=li,f.wheelEventPixels=tl,f.Doc=fr,f.splitLines=Dr,f.countColumn=Mo,f.findColumn=lr,f.isWordChar=Fa,f.Pass=ci,f.signal=jt,f.Line=uc,f.changeEnd=al,f.scrollbarModel=rn,f.Pos=Qo,f.cmpPos=Ba,f.modes=pn,f.mimeModes=Xt,f.resolveMode=Do,f.getMode=Jt,f.modeExtensions=Jn,f.extendMode=Qn,f.copyState=Io,f.startState=Ka,f.innerMode=ri,f.commands=hp,f.keyMap=hi,f.keyName=hs,f.isModifierKey=xa,f.lookupKey=qi,f.normalizeKeyMap=Va,f.StringStream=Ei,f.SharedTextMarker=F,f.TextMarker=K,f.LineWidget=vd,f.e_preventDefault=St,f.e_stopPropagation=vr,f.e_stop=Ko,f.addClass=mr,f.contains=Ke,f.rmClass=Me,f.keyNames=Uo}(xl),xl.version="5.63.0",xl}()},7389:(m,X,x)=>{!function(z){"use strict";function H(me){for(var l={},Me=0;Me<me.length;++Me)l[me[Me].toLowerCase()]=!0;return l}z.defineMode("css",function(me,l){var Me=l.inline;l.propertyKeywords||(l=z.resolveMode("text/css"));var Ze,ut,$e=me.indentUnit,Ct=l.tokenHooks,Ke=l.documentTypes||{},Wt=l.mediaTypes||{},mr=l.mediaFeatures||{},nr=l.mediaValueKeywords||{},Kr=l.propertyKeywords||{},Pn=l.nonStandardPropertyKeywords||{},Kn=l.fontProperties||{},Mo=l.counterDescriptors||{},mo=l.colorKeywords||{},No=l.valueKeywords||{},Di=l.allowNested,zn=!0===l.supportsAtComponent,Wn=!1!==me.highlightNonStandardPropertyKeywords;function an(Qr,ze){return Ze=ze,Qr}function lr(Qr,ze){var Xe=Qr.next();if(Ct[Xe]){var at=Ct[Xe](Qr,ze);if(!1!==at)return at}return"@"==Xe?(Qr.eatWhile(/[\w\\\-]/),an("def",Qr.current())):"="==Xe||("~"==Xe||"|"==Xe)&&Qr.eat("=")?an(null,"compare"):'"'==Xe||"'"==Xe?(ze.tokenize=Pr(Xe),ze.tokenize(Qr,ze)):"#"==Xe?(Qr.eatWhile(/[\w\\\-]/),an("atom","hash")):"!"==Xe?(Qr.match(/^\s*\w*/),an("keyword","important")):/\d/.test(Xe)||"."==Xe&&Qr.eat(/\d/)?(Qr.eatWhile(/[\w.%]/),an("number","unit")):"-"!==Xe?/[,+>*\/]/.test(Xe)?an(null,"select-op"):"."==Xe&&Qr.match(/^-?[_a-z][_a-z0-9-]*/i)?an("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Xe)?an(null,Xe):Qr.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Qr.current())&&(ze.tokenize=Mn),an("variable callee","variable")):/[\w\\\-]/.test(Xe)?(Qr.eatWhile(/[\w\\\-]/),an("property","word")):an(null,null):/[\d.]/.test(Qr.peek())?(Qr.eatWhile(/[\w.%]/),an("number","unit")):Qr.match(/^-[\w\\\-]*/)?(Qr.eatWhile(/[\w\\\-]/),Qr.match(/^\s*:/,!1)?an("variable-2","variable-definition"):an("variable-2","variable")):Qr.match(/^\w+-/)?an("meta","meta"):void 0}function Pr(Qr){return function(ze,Xe){for(var at,gr=!1;null!=(at=ze.next());){if(at==Qr&&!gr){")"==Qr&&ze.backUp(1);break}gr=!gr&&"\\"==at}return(at==Qr||!gr&&")"!=Qr)&&(Xe.tokenize=null),an("string","string")}}function Mn(Qr,ze){return Qr.next(),ze.tokenize=Qr.match(/^\s*[\"\')]/,!1)?null:Pr(")"),an(null,"(")}function dn(Qr,ze,Xe){this.type=Qr,this.indent=ze,this.prev=Xe}function sn(Qr,ze,Xe,at){return Qr.context=new dn(Xe,ze.indentation()+(!1===at?0:$e),Qr.context),Xe}function kn(Qr){return Qr.context.prev&&(Qr.context=Qr.context.prev),Qr.context.type}function xo(Qr,ze,Xe){return Fa[Xe.context.type](Qr,ze,Xe)}function Vo(Qr,ze,Xe,at){for(var gr=at||1;gr>0;gr--)Xe.context=Xe.context.prev;return xo(Qr,ze,Xe)}function aa(Qr){var ze=Qr.current().toLowerCase();ut=No.hasOwnProperty(ze)?"atom":mo.hasOwnProperty(ze)?"keyword":"variable"}var Fa={top:function(Qr,ze,Xe){if("{"==Qr)return sn(Xe,ze,"block");if("}"==Qr&&Xe.context.prev)return kn(Xe);if(zn&&/@component/i.test(Qr))return sn(Xe,ze,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Qr))return sn(Xe,ze,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Qr))return sn(Xe,ze,"atBlock");if(/^@(font-face|counter-style)/i.test(Qr))return Xe.stateArg=Qr,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Qr))return"keyframes";if(Qr&&"@"==Qr.charAt(0))return sn(Xe,ze,"at");if("hash"==Qr)ut="builtin";else if("word"==Qr)ut="tag";else{if("variable-definition"==Qr)return"maybeprop";if("interpolation"==Qr)return sn(Xe,ze,"interpolation");if(":"==Qr)return"pseudo";if(Di&&"("==Qr)return sn(Xe,ze,"parens")}return Xe.context.type},block:function(Qr,ze,Xe){if("word"==Qr){var at=ze.current().toLowerCase();return Kr.hasOwnProperty(at)?(ut="property","maybeprop"):Pn.hasOwnProperty(at)?(ut=Wn?"string-2":"property","maybeprop"):Di?(ut=ze.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(ut+=" error","maybeprop")}return"meta"==Qr?"block":Di||"hash"!=Qr&&"qualifier"!=Qr?Fa.top(Qr,ze,Xe):(ut="error","block")},maybeprop:function(Qr,ze,Xe){return":"==Qr?sn(Xe,ze,"prop"):xo(Qr,ze,Xe)},prop:function(Qr,ze,Xe){if(";"==Qr)return kn(Xe);if("{"==Qr&&Di)return sn(Xe,ze,"propBlock");if("}"==Qr||"{"==Qr)return Vo(Qr,ze,Xe);if("("==Qr)return sn(Xe,ze,"parens");if("hash"!=Qr||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(ze.current())){if("word"==Qr)aa(ze);else if("interpolation"==Qr)return sn(Xe,ze,"interpolation")}else ut+=" error";return"prop"},propBlock:function(Qr,ze,Xe){return"}"==Qr?kn(Xe):"word"==Qr?(ut="property","maybeprop"):Xe.context.type},parens:function(Qr,ze,Xe){return"{"==Qr||"}"==Qr?Vo(Qr,ze,Xe):")"==Qr?kn(Xe):"("==Qr?sn(Xe,ze,"parens"):"interpolation"==Qr?sn(Xe,ze,"interpolation"):("word"==Qr&&aa(ze),"parens")},pseudo:function(Qr,ze,Xe){return"meta"==Qr?"pseudo":"word"==Qr?(ut="variable-3",Xe.context.type):xo(Qr,ze,Xe)},documentTypes:function(Qr,ze,Xe){return"word"==Qr&&Ke.hasOwnProperty(ze.current())?(ut="tag",Xe.context.type):Fa.atBlock(Qr,ze,Xe)},atBlock:function(Qr,ze,Xe){if("("==Qr)return sn(Xe,ze,"atBlock_parens");if("}"==Qr||";"==Qr)return Vo(Qr,ze,Xe);if("{"==Qr)return kn(Xe)&&sn(Xe,ze,Di?"block":"top");if("interpolation"==Qr)return sn(Xe,ze,"interpolation");if("word"==Qr){var at=ze.current().toLowerCase();ut="only"==at||"not"==at||"and"==at||"or"==at?"keyword":Wt.hasOwnProperty(at)?"attribute":mr.hasOwnProperty(at)?"property":nr.hasOwnProperty(at)?"keyword":Kr.hasOwnProperty(at)?"property":Pn.hasOwnProperty(at)?Wn?"string-2":"property":No.hasOwnProperty(at)?"atom":mo.hasOwnProperty(at)?"keyword":"error"}return Xe.context.type},atComponentBlock:function(Qr,ze,Xe){return"}"==Qr?Vo(Qr,ze,Xe):"{"==Qr?kn(Xe)&&sn(Xe,ze,Di?"block":"top",!1):("word"==Qr&&(ut="error"),Xe.context.type)},atBlock_parens:function(Qr,ze,Xe){return")"==Qr?kn(Xe):"{"==Qr||"}"==Qr?Vo(Qr,ze,Xe,2):Fa.atBlock(Qr,ze,Xe)},restricted_atBlock_before:function(Qr,ze,Xe){return"{"==Qr?sn(Xe,ze,"restricted_atBlock"):"word"==Qr&&"@counter-style"==Xe.stateArg?(ut="variable","restricted_atBlock_before"):xo(Qr,ze,Xe)},restricted_atBlock:function(Qr,ze,Xe){return"}"==Qr?(Xe.stateArg=null,kn(Xe)):"word"==Qr?(ut="@font-face"==Xe.stateArg&&!Kn.hasOwnProperty(ze.current().toLowerCase())||"@counter-style"==Xe.stateArg&&!Mo.hasOwnProperty(ze.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(Qr,ze,Xe){return"word"==Qr?(ut="variable","keyframes"):"{"==Qr?sn(Xe,ze,"top"):xo(Qr,ze,Xe)},at:function(Qr,ze,Xe){return";"==Qr?kn(Xe):"{"==Qr||"}"==Qr?Vo(Qr,ze,Xe):("word"==Qr?ut="tag":"hash"==Qr&&(ut="builtin"),"at")},interpolation:function(Qr,ze,Xe){return"}"==Qr?kn(Xe):"{"==Qr||";"==Qr?Vo(Qr,ze,Xe):("word"==Qr?ut="variable":"variable"!=Qr&&"("!=Qr&&")"!=Qr&&(ut="error"),"interpolation")}};return{startState:function(Qr){return{tokenize:null,state:Me?"block":"top",stateArg:null,context:new dn(Me?"block":"top",Qr||0,null)}},token:function(Qr,ze){if(!ze.tokenize&&Qr.eatSpace())return null;var Xe=(ze.tokenize||lr)(Qr,ze);return Xe&&"object"==typeof Xe&&(Ze=Xe[1],Xe=Xe[0]),ut=Xe,"comment"!=Ze&&(ze.state=Fa[ze.state](Ze,Qr,ze)),ut},indent:function(Qr,ze){var Xe=Qr.context,at=ze&&ze.charAt(0),gr=Xe.indent;return"prop"!=Xe.type||"}"!=at&&")"!=at||(Xe=Xe.prev),Xe.prev&&("}"!=at||"block"!=Xe.type&&"top"!=Xe.type&&"interpolation"!=Xe.type&&"restricted_atBlock"!=Xe.type?(")"!=at||"parens"!=Xe.type&&"atBlock_parens"!=Xe.type)&&("{"!=at||"at"!=Xe.type&&"atBlock"!=Xe.type)||(gr=Math.max(0,Xe.indent-$e)):gr=(Xe=Xe.prev).indent),gr},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:l.lineComment,fold:"brace"}});var G=["domain","regexp","url","url-prefix"],D=H(G),U=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],R=H(U),T=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],N=H(T),L=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],Y=H(L),ee=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],te=H(ee),pe=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],we=H(pe),Te=H(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),ge=H(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),Ce=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],Oe=H(Ce),je=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],Ue=H(je),Le=G.concat(U).concat(T).concat(L).concat(ee).concat(pe).concat(Ce).concat(je);function ke(me,l){for(var Me,Ze=!1;null!=(Me=me.next());){if(Ze&&"/"==Me){l.tokenize=null;break}Ze="*"==Me}return["comment","comment"]}z.registerHelper("hintWords","css",Le),z.defineMIME("text/css",{documentTypes:D,mediaTypes:R,mediaFeatures:N,mediaValueKeywords:Y,propertyKeywords:te,nonStandardPropertyKeywords:we,fontProperties:Te,counterDescriptors:ge,colorKeywords:Oe,valueKeywords:Ue,tokenHooks:{"/":function(me,l){return!!me.eat("*")&&(l.tokenize=ke,ke(me,l))}},name:"css"}),z.defineMIME("text/x-scss",{mediaTypes:R,mediaFeatures:N,mediaValueKeywords:Y,propertyKeywords:te,nonStandardPropertyKeywords:we,colorKeywords:Oe,valueKeywords:Ue,fontProperties:Te,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(me,l){return me.eat("/")?(me.skipToEnd(),["comment","comment"]):me.eat("*")?(l.tokenize=ke,ke(me,l)):["operator","operator"]},":":function(me){return!!me.match(/^\s*\{/,!1)&&[null,null]},$:function(me){return me.match(/^[\w-]+/),me.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(me){return!!me.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),z.defineMIME("text/x-less",{mediaTypes:R,mediaFeatures:N,mediaValueKeywords:Y,propertyKeywords:te,nonStandardPropertyKeywords:we,colorKeywords:Oe,valueKeywords:Ue,fontProperties:Te,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(me,l){return me.eat("/")?(me.skipToEnd(),["comment","comment"]):me.eat("*")?(l.tokenize=ke,ke(me,l)):["operator","operator"]},"@":function(me){return me.eat("{")?[null,"interpolation"]:!me.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(me.eatWhile(/[\w\\\-]/),me.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),z.defineMIME("text/x-gss",{documentTypes:D,mediaTypes:R,mediaFeatures:N,propertyKeywords:te,nonStandardPropertyKeywords:we,fontProperties:Te,counterDescriptors:ge,colorKeywords:Oe,valueKeywords:Ue,supportsAtComponent:!0,tokenHooks:{"/":function(me,l){return!!me.eat("*")&&(l.tokenize=ke,ke(me,l))}},name:"css",helperType:"gss"})}(x(4408))},8253:(m,X,x)=>{!function(z){"use strict";var H={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},D={};function R(Y,ee){var te=Y.match(function U(Y){return D[Y]||(D[Y]=new RegExp("\\s+"+Y+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(ee));return te?/^\s*(.*?)\s*$/.exec(te[2])[1]:""}function T(Y,ee){return new RegExp((ee?"^":"")+"</s*"+Y+"s*>","i")}function N(Y,ee){for(var te in Y)for(var pe=ee[te]||(ee[te]=[]),we=Y[te],Te=we.length-1;Te>=0;Te--)pe.unshift(we[Te])}z.defineMode("htmlmixed",function(Y,ee){var te=z.getMode(Y,{name:"xml",htmlMode:!0,multilineTagIndentFactor:ee.multilineTagIndentFactor,multilineTagIndentPastTag:ee.multilineTagIndentPastTag,allowMissingTagName:ee.allowMissingTagName}),pe={},we=ee&&ee.tags,Te=ee&&ee.scriptTypes;if(N(H,pe),we&&N(we,pe),Te)for(var ge=Te.length-1;ge>=0;ge--)pe.script.unshift(["type",Te[ge].matches,Te[ge].mode]);function Ce(Oe,je){var Ue,Le=te.token(Oe,je.htmlState),ke=/\btag\b/.test(Le);if(ke&&!/[<>\s\/]/.test(Oe.current())&&(Ue=je.htmlState.tagName&&je.htmlState.tagName.toLowerCase())&&pe.hasOwnProperty(Ue))je.inTag=Ue+" ";else if(je.inTag&&ke&&/>$/.test(Oe.current())){var me=/^([\S]+) (.*)/.exec(je.inTag);je.inTag=null;var l=">"==Oe.current()&&function L(Y,ee){for(var te=0;te<Y.length;te++){var pe=Y[te];if(!pe[0]||pe[1].test(R(ee,pe[0])))return pe[2]}}(pe[me[1]],me[2]),Me=z.getMode(Y,l),Ze=T(me[1],!0),ut=T(me[1],!1);je.token=function($e,Ct){return $e.match(Ze,!1)?(Ct.token=Ce,Ct.localState=Ct.localMode=null,null):function G(Y,ee,te){var pe=Y.current(),we=pe.search(ee);return we>-1?Y.backUp(pe.length-we):pe.match(/<\/?$/)&&(Y.backUp(pe.length),Y.match(ee,!1)||Y.match(pe)),te}($e,ut,Ct.localMode.token($e,Ct.localState))},je.localMode=Me,je.localState=z.startState(Me,te.indent(je.htmlState,"",""))}else je.inTag&&(je.inTag+=Oe.current(),Oe.eol()&&(je.inTag+=" "));return Le}return{startState:function(){return{token:Ce,inTag:null,localMode:null,localState:null,htmlState:z.startState(te)}},copyState:function(Oe){var je;return Oe.localState&&(je=z.copyState(Oe.localMode,Oe.localState)),{token:Oe.token,inTag:Oe.inTag,localMode:Oe.localMode,localState:je,htmlState:z.copyState(te,Oe.htmlState)}},token:function(Oe,je){return je.token(Oe,je)},indent:function(Oe,je,Ue){return!Oe.localMode||/^\s*<\//.test(je)?te.indent(Oe.htmlState,je,Ue):Oe.localMode.indent?Oe.localMode.indent(Oe.localState,je,Ue):z.Pass},innerMode:function(Oe){return{state:Oe.localState||Oe.htmlState,mode:Oe.localMode||te}}}},"xml","javascript","css"),z.defineMIME("text/html","htmlmixed")}(x(4408),x(9701),x(6061),x(7389))},6061:(m,X,x)=>{!function(z){"use strict";z.defineMode("javascript",function(H,G){var D,U,R=H.indentUnit,T=G.statementIndent,N=G.jsonld,L=G.json||N,Y=!1!==G.trackScope,ee=G.typescript,te=G.wordCharacters||/[\w$\xa1-\uffff]/,pe=function(){function Et(ul){return{type:ul,style:"keyword"}}var Mr=Et("keyword a"),Ao=Et("keyword b"),oa=Et("keyword c"),ba=Et("keyword d"),Vi=Et("operator"),hl={type:"atom",style:"atom"};return{if:Et("if"),while:Mr,with:Mr,else:Ao,do:Ao,try:Ao,finally:Ao,return:ba,break:ba,continue:ba,new:Et("new"),delete:oa,void:oa,throw:oa,debugger:Et("debugger"),var:Et("var"),const:Et("var"),let:Et("var"),function:Et("function"),catch:Et("catch"),for:Et("for"),switch:Et("switch"),case:Et("case"),default:Et("default"),in:Vi,typeof:Vi,instanceof:Vi,true:hl,false:hl,null:hl,undefined:hl,NaN:hl,Infinity:hl,this:Et("this"),class:Et("class"),super:Et("atom"),yield:oa,export:Et("export"),import:Et("import"),extends:oa,await:oa}}(),we=/[+\-*&%=<>!?|~^@]/,Te=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Ce(Et,Mr,Ao){return D=Et,U=Ao,Mr}function Oe(Et,Mr){var Ao=Et.next();if('"'==Ao||"'"==Ao)return Mr.tokenize=function je(Et){return function(Mr,Ao){var oa,ba=!1;if(N&&"@"==Mr.peek()&&Mr.match(Te))return Ao.tokenize=Oe,Ce("jsonld-keyword","meta");for(;null!=(oa=Mr.next())&&(oa!=Et||ba);)ba=!ba&&"\\"==oa;return ba||(Ao.tokenize=Oe),Ce("string","string")}}(Ao),Mr.tokenize(Et,Mr);if("."==Ao&&Et.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Ce("number","number");if("."==Ao&&Et.match(".."))return Ce("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(Ao))return Ce(Ao);if("="==Ao&&Et.eat(">"))return Ce("=>","operator");if("0"==Ao&&Et.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Ce("number","number");if(/\d/.test(Ao))return Et.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Ce("number","number");if("/"==Ao)return Et.eat("*")?(Mr.tokenize=Ue,Ue(Et,Mr)):Et.eat("/")?(Et.skipToEnd(),Ce("comment","comment")):Ba(Et,Mr,1)?(function ge(Et){for(var Mr,Ao=!1,oa=!1;null!=(Mr=Et.next());){if(!Ao){if("/"==Mr&&!oa)return;"["==Mr?oa=!0:oa&&"]"==Mr&&(oa=!1)}Ao=!Ao&&"\\"==Mr}}(Et),Et.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Ce("regexp","string-2")):(Et.eat("="),Ce("operator","operator",Et.current()));if("`"==Ao)return Mr.tokenize=Le,Le(Et,Mr);if("#"==Ao&&"!"==Et.peek())return Et.skipToEnd(),Ce("meta","meta");if("#"==Ao&&Et.eatWhile(te))return Ce("variable","property");if("<"==Ao&&Et.match("!--")||"-"==Ao&&Et.match("->")&&!/\S/.test(Et.string.slice(0,Et.start)))return Et.skipToEnd(),Ce("comment","comment");if(we.test(Ao))return">"==Ao&&Mr.lexical&&">"==Mr.lexical.type||(Et.eat("=")?"!"!=Ao&&"="!=Ao||Et.eat("="):/[<>*+\-|&?]/.test(Ao)&&(Et.eat(Ao),">"==Ao&&Et.eat(Ao))),"?"==Ao&&Et.eat(".")?Ce("."):Ce("operator","operator",Et.current());if(te.test(Ao)){Et.eatWhile(te);var oa=Et.current();if("."!=Mr.lastType){if(pe.propertyIsEnumerable(oa)){var ba=pe[oa];return Ce(ba.type,ba.style,oa)}if("async"==oa&&Et.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Ce("async","keyword",oa)}return Ce("variable","variable",oa)}}function Ue(Et,Mr){for(var Ao,oa=!1;Ao=Et.next();){if("/"==Ao&&oa){Mr.tokenize=Oe;break}oa="*"==Ao}return Ce("comment","comment")}function Le(Et,Mr){for(var Ao,oa=!1;null!=(Ao=Et.next());){if(!oa&&("`"==Ao||"$"==Ao&&Et.eat("{"))){Mr.tokenize=Oe;break}oa=!oa&&"\\"==Ao}return Ce("quasi","string-2",Et.current())}var ke="([{}])";function me(Et,Mr){Mr.fatArrowAt&&(Mr.fatArrowAt=null);var Ao=Et.string.indexOf("=>",Et.start);if(!(Ao<0)){if(ee){var oa=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(Et.string.slice(Et.start,Ao));oa&&(Ao=oa.index)}for(var ba=0,Vi=!1,hl=Ao-1;hl>=0;--hl){var ul=Et.string.charAt(hl),Oc=ke.indexOf(ul);if(Oc>=0&&Oc<3){if(!ba){++hl;break}if(0==--ba){"("==ul&&(Vi=!0);break}}else if(Oc>=3&&Oc<6)++ba;else if(te.test(ul))Vi=!0;else if(/["'\/`]/.test(ul))for(;;--hl){if(0==hl)return;if(Et.string.charAt(hl-1)==ul&&"\\"!=Et.string.charAt(hl-2)){hl--;break}}else if(Vi&&!ba){++hl;break}}Vi&&!ba&&(Mr.fatArrowAt=hl)}}var l={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Me(Et,Mr,Ao,oa,ba,Vi){this.indented=Et,this.column=Mr,this.type=Ao,this.prev=ba,this.info=Vi,null!=oa&&(this.align=oa)}function Ze(Et,Mr){if(!Y)return!1;for(var Ao=Et.localVars;Ao;Ao=Ao.next)if(Ao.name==Mr)return!0;for(var oa=Et.context;oa;oa=oa.prev)for(Ao=oa.vars;Ao;Ao=Ao.next)if(Ao.name==Mr)return!0}function ut(Et,Mr,Ao,oa,ba){var Vi=Et.cc;for($e.state=Et,$e.stream=ba,$e.marked=null,$e.cc=Vi,$e.style=Mr,Et.lexical.hasOwnProperty("align")||(Et.lexical.align=!0);;)if((Vi.length?Vi.pop():L?Pr:an)(Ao,oa)){for(;Vi.length&&Vi[Vi.length-1].lex;)Vi.pop()();return $e.marked?$e.marked:"variable"==Ao&&Ze(Et,oa)?"variable-2":Mr}}var $e={state:null,column:null,marked:null,cc:null};function Ct(){for(var Et=arguments.length-1;Et>=0;Et--)$e.cc.push(arguments[Et])}function Ke(){return Ct.apply(null,arguments),!0}function Wt(Et,Mr){for(var Ao=Mr;Ao;Ao=Ao.next)if(Ao.name==Et)return!0;return!1}function mr(Et){var Mr=$e.state;if($e.marked="def",Y){if(Mr.context)if("var"==Mr.lexical.info&&Mr.context&&Mr.context.block){var Ao=nr(Et,Mr.context);if(null!=Ao)return void(Mr.context=Ao)}else if(!Wt(Et,Mr.localVars))return void(Mr.localVars=new Kn(Et,Mr.localVars));G.globalVars&&!Wt(Et,Mr.globalVars)&&(Mr.globalVars=new Kn(Et,Mr.globalVars))}}function nr(Et,Mr){if(Mr){if(Mr.block){var Ao=nr(Et,Mr.prev);return Ao?Ao==Mr.prev?Mr:new Pn(Ao,Mr.vars,!0):null}return Wt(Et,Mr.vars)?Mr:new Pn(Mr.prev,new Kn(Et,Mr.vars),!1)}return null}function Kr(Et){return"public"==Et||"private"==Et||"protected"==Et||"abstract"==Et||"readonly"==Et}function Pn(Et,Mr,Ao){this.prev=Et,this.vars=Mr,this.block=Ao}function Kn(Et,Mr){this.name=Et,this.next=Mr}var Mo=new Kn("this",new Kn("arguments",null));function mo(){$e.state.context=new Pn($e.state.context,$e.state.localVars,!1),$e.state.localVars=Mo}function No(){$e.state.context=new Pn($e.state.context,$e.state.localVars,!0),$e.state.localVars=null}function Di(){$e.state.localVars=$e.state.context.vars,$e.state.context=$e.state.context.prev}function ci(Et,Mr){var Ao=function(){var oa=$e.state,ba=oa.indented;if("stat"==oa.lexical.type)ba=oa.lexical.indented;else for(var Vi=oa.lexical;Vi&&")"==Vi.type&&Vi.align;Vi=Vi.prev)ba=Vi.indented;oa.lexical=new Me(ba,$e.stream.column(),Et,null,oa.lexical,Mr)};return Ao.lex=!0,Ao}function zn(){var Et=$e.state;Et.lexical.prev&&(")"==Et.lexical.type&&(Et.indented=Et.lexical.indented),Et.lexical=Et.lexical.prev)}function Wn(Et){return function Mr(Ao){return Ao==Et?Ke():";"==Et||"}"==Ao||")"==Ao||"]"==Ao?Ct():Ke(Mr)}}function an(Et,Mr){return"var"==Et?Ke(ci("vardef",Mr),or,Wn(";"),zn):"keyword a"==Et?Ke(ci("form"),dn,an,zn):"keyword b"==Et?Ke(ci("form"),an,zn):"keyword d"==Et?$e.stream.match(/^\s*$/,!1)?Ke():Ke(ci("stat"),kn,Wn(";"),zn):"debugger"==Et?Ke(Wn(";")):"{"==Et?Ke(ci("}"),No,li,zn,Di):";"==Et?Ke():"if"==Et?("else"==$e.state.lexical.info&&$e.state.cc[$e.state.cc.length-1]==zn&&$e.state.cc.pop()(),Ke(ci("form"),dn,an,zn,Un)):"function"==Et?Ke(Xt):"for"==Et?Ke(ci("form"),No,Yn,an,Di,zn):"class"==Et||ee&&"interface"==Mr?($e.marked="keyword",Ke(ci("form","class"==Et?Et:Mr),Jn,zn)):"variable"==Et?ee&&"declare"==Mr?($e.marked="keyword",Ke(an)):ee&&("module"==Mr||"enum"==Mr||"type"==Mr)&&$e.stream.match(/^\s*\w/,!1)?($e.marked="keyword","enum"==Mr?Ke(el):"type"==Mr?Ke(Zn,Wn("operator"),Fr,Wn(";")):Ke(ci("form"),Tr,Wn("{"),ci("}"),li,zn,zn)):ee&&"namespace"==Mr?($e.marked="keyword",Ke(ci("form"),Pr,an,zn)):ee&&"abstract"==Mr?($e.marked="keyword",Ke(an)):Ke(ci("stat"),Pt):"switch"==Et?Ke(ci("form"),dn,Wn("{"),ci("}","switch"),No,li,zn,zn,Di):"case"==Et?Ke(Pr,Wn(":")):"default"==Et?Ke(Wn(":")):"catch"==Et?Ke(ci("form"),mo,lr,an,zn,Di):"export"==Et?Ke(ci("stat"),Ka,zn):"import"==Et?Ke(ci("stat"),ui,zn):"async"==Et?Ke(an):"@"==Mr?Ke(Pr,an):Ct(ci("stat"),Pr,Wn(";"),zn)}function lr(Et){if("("==Et)return Ke(Do,Wn(")"))}function Pr(Et,Mr){return sn(Et,Mr,!1)}function Mn(Et,Mr){return sn(Et,Mr,!0)}function dn(Et){return"("!=Et?Ct():Ke(ci(")"),kn,Wn(")"),zn)}function sn(Et,Mr,Ao){if($e.state.fatArrowAt==$e.stream.start){var oa=Ao?ze:Qr;if("("==Et)return Ke(mo,ci(")"),oo(Do,")"),zn,Wn("=>"),oa,Di);if("variable"==Et)return Ct(mo,Tr,Wn("=>"),oa,Di)}var ba=Ao?Vo:xo;return l.hasOwnProperty(Et)?Ke(ba):"function"==Et?Ke(Xt,ba):"class"==Et||ee&&"interface"==Mr?($e.marked="keyword",Ke(ci("form"),Jt,zn)):"keyword c"==Et||"async"==Et?Ke(Ao?Mn:Pr):"("==Et?Ke(ci(")"),kn,Wn(")"),zn,ba):"operator"==Et||"spread"==Et?Ke(Ao?Mn:Pr):"["==Et?Ke(ci("]"),rs,zn,ba):"{"==Et?Ki(Zt,"}",null,ba):"quasi"==Et?Ct(aa,ba):"new"==Et?Ke(function Xe(Et){return function(Mr){return"."==Mr?Ke(Et?gr:at):"variable"==Mr&&ee?Ke(Ln,Et?Vo:xo):Ct(Et?Mn:Pr)}}(Ao)):Ke()}function kn(Et){return Et.match(/[;\}\)\],]/)?Ct():Ct(Pr)}function xo(Et,Mr){return","==Et?Ke(kn):Vo(Et,Mr,!1)}function Vo(Et,Mr,Ao){var oa=0==Ao?xo:Vo,ba=0==Ao?Pr:Mn;return"=>"==Et?Ke(mo,Ao?ze:Qr,Di):"operator"==Et?/\+\+|--/.test(Mr)||ee&&"!"==Mr?Ke(oa):ee&&"<"==Mr&&$e.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?Ke(ci(">"),oo(Fr,">"),zn,oa):"?"==Mr?Ke(Pr,Wn(":"),ba):Ke(ba):"quasi"==Et?Ct(aa,oa):";"!=Et?"("==Et?Ki(Mn,")","call",oa):"."==Et?Ke(mt,oa):"["==Et?Ke(ci("]"),kn,Wn("]"),zn,oa):ee&&"as"==Mr?($e.marked="keyword",Ke(Fr,oa)):"regexp"==Et?($e.state.lastType=$e.marked="operator",$e.stream.backUp($e.stream.pos-$e.stream.start-1),Ke(ba)):void 0:void 0}function aa(Et,Mr){return"quasi"!=Et?Ct():"${"!=Mr.slice(Mr.length-2)?Ke(aa):Ke(kn,Fa)}function Fa(Et){if("}"==Et)return $e.marked="string-2",$e.state.tokenize=Le,Ke(aa)}function Qr(Et){return me($e.stream,$e.state),Ct("{"==Et?an:Pr)}function ze(Et){return me($e.stream,$e.state),Ct("{"==Et?an:Mn)}function at(Et,Mr){if("target"==Mr)return $e.marked="keyword",Ke(xo)}function gr(Et,Mr){if("target"==Mr)return $e.marked="keyword",Ke(Vo)}function Pt(Et){return":"==Et?Ke(zn,an):Ct(xo,Wn(";"),zn)}function mt(Et){if("variable"==Et)return $e.marked="property",Ke()}function Zt(Et,Mr){return"async"==Et?($e.marked="property",Ke(Zt)):"variable"==Et||"keyword"==$e.style?($e.marked="property","get"==Mr||"set"==Mr?Ke(ln):(ee&&$e.state.fatArrowAt==$e.stream.start&&(Ao=$e.stream.match(/^\s*:\s*/,!1))&&($e.state.fatArrowAt=$e.stream.pos+Ao[0].length),Ke(no))):"number"==Et||"string"==Et?($e.marked=N?"property":$e.style+" property",Ke(no)):"jsonld-keyword"==Et?Ke(no):ee&&Kr(Mr)?($e.marked="keyword",Ke(Zt)):"["==Et?Ke(Pr,ts,Wn("]"),no):"spread"==Et?Ke(Mn,no):"*"==Mr?($e.marked="keyword",Ke(Zt)):":"==Et?Ct(no):void 0;var Ao}function ln(Et){return"variable"!=Et?Ct(no):($e.marked="property",Ke(Xt))}function no(Et){return":"==Et?Ke(Mn):"("==Et?Ct(Xt):void 0}function oo(Et,Mr,Ao){function oa(ba,Vi){if(Ao?Ao.indexOf(ba)>-1:","==ba){var hl=$e.state.lexical;return"call"==hl.info&&(hl.pos=(hl.pos||0)+1),Ke(function(ul,Oc){return ul==Mr||Oc==Mr?Ct():Ct(Et)},oa)}return ba==Mr||Vi==Mr?Ke():Ao&&Ao.indexOf(";")>-1?Ct(Et):Ke(Wn(Mr))}return function(ba,Vi){return ba==Mr||Vi==Mr?Ke():Ct(Et,oa)}}function Ki(Et,Mr,Ao){for(var oa=3;oa<arguments.length;oa++)$e.cc.push(arguments[oa]);return Ke(ci(Mr,Ao),oo(Et,Mr),zn)}function li(Et){return"}"==Et?Ke():Ct(an,li)}function ts(Et,Mr){if(ee){if(":"==Et)return Ke(Fr);if("?"==Mr)return Ke(ts)}}function Nt(Et,Mr){if(ee&&(":"==Et||"in"==Mr))return Ke(Fr)}function jt(Et){if(ee&&":"==Et)return $e.stream.match(/^\s*\w+\s+is\b/,!1)?Ke(Pr,gt,Fr):Ke(Fr)}function gt(Et,Mr){if("is"==Mr)return $e.marked="keyword",Ke()}function Fr(Et,Mr){return"keyof"==Mr||"typeof"==Mr||"infer"==Mr||"readonly"==Mr?($e.marked="keyword",Ke("typeof"==Mr?Mn:Fr)):"variable"==Et||"void"==Mr?($e.marked="type",Ke(Ro)):"|"==Mr||"&"==Mr?Ke(Fr):"string"==Et||"number"==Et||"atom"==Et?Ke(Ro):"["==Et?Ke(ci("]"),oo(Fr,"]",","),zn,Ro):"{"==Et?Ke(ci("}"),wt,zn,Ro):"("==Et?Ke(oo(Ko,")"),tr,Ro):"<"==Et?Ke(oo(Fr,">"),Fr):"quasi"==Et?Ct(vr,Ro):void 0}function tr(Et){if("=>"==Et)return Ke(Fr)}function wt(Et){return Et.match(/[\}\)\]]/)?Ke():","==Et||";"==Et?Ke(wt):Ct(St,wt)}function St(Et,Mr){return"variable"==Et||"keyword"==$e.style?($e.marked="property",Ke(St)):"?"==Mr||"number"==Et||"string"==Et?Ke(St):":"==Et?Ke(Fr):"["==Et?Ke(Wn("variable"),Nt,Wn("]"),St):"("==Et?Ct(Ft,St):Et.match(/[;\}\)\],]/)?void 0:Ke()}function vr(Et,Mr){return"quasi"!=Et?Ct():"${"!=Mr.slice(Mr.length-2)?Ke(vr):Ke(Fr,fn)}function fn(Et){if("}"==Et)return $e.marked="string-2",$e.state.tokenize=Le,Ke(vr)}function Ko(Et,Mr){return"variable"==Et&&$e.stream.match(/^\s*[?:]/,!1)||"?"==Mr?Ke(Ko):":"==Et?Ke(Fr):"spread"==Et?Ke(Ko):Ct(Fr)}function Ro(Et,Mr){return"<"==Mr?Ke(ci(">"),oo(Fr,">"),zn,Ro):"|"==Mr||"."==Et||"&"==Mr?Ke(Fr):"["==Et?Ke(Fr,Wn("]"),Ro):"extends"==Mr||"implements"==Mr?($e.marked="keyword",Ke(Fr)):"?"==Mr?Ke(Fr,Wn(":"),Fr):void 0}function Ln(Et,Mr){if("<"==Mr)return Ke(ci(">"),oo(Fr,">"),zn,Ro)}function yr(){return Ct(Fr,kr)}function kr(Et,Mr){if("="==Mr)return Ke(Fr)}function or(Et,Mr){return"enum"==Mr?($e.marked="keyword",Ke(el)):Ct(Tr,ts,Dr,hn)}function Tr(Et,Mr){return ee&&Kr(Mr)?($e.marked="keyword",Ke(Tr)):"variable"==Et?(mr(Mr),Ke()):"spread"==Et?Ke(Tr):"["==Et?Ki(Lt,"]"):"{"==Et?Ki(ht,"}"):void 0}function ht(Et,Mr){return"variable"!=Et||$e.stream.match(/^\s*:/,!1)?("variable"==Et&&($e.marked="property"),"spread"==Et?Ke(Tr):"}"==Et?Ct():"["==Et?Ke(Pr,Wn("]"),Wn(":"),ht):Ke(Wn(":"),Tr,Dr)):(mr(Mr),Ke(Dr))}function Lt(){return Ct(Tr,Dr)}function Dr(Et,Mr){if("="==Mr)return Ke(Mn)}function hn(Et){if(","==Et)return Ke(or)}function Un(Et,Mr){if("keyword b"==Et&&"else"==Mr)return Ke(ci("form","else"),an,zn)}function Yn(Et,Mr){return"await"==Mr?Ke(Yn):"("==Et?Ke(ci(")"),dr,zn):void 0}function dr(Et){return"var"==Et?Ke(or,pn):"variable"==Et?Ke(pn):Ct(pn)}function pn(Et,Mr){return")"==Et?Ke():";"==Et?Ke(pn):"in"==Mr||"of"==Mr?($e.marked="keyword",Ke(Pr,pn)):Ct(Pr,pn)}function Xt(Et,Mr){return"*"==Mr?($e.marked="keyword",Ke(Xt)):"variable"==Et?(mr(Mr),Ke(Xt)):"("==Et?Ke(mo,ci(")"),oo(Do,")"),zn,jt,an,Di):ee&&"<"==Mr?Ke(ci(">"),oo(yr,">"),zn,Xt):void 0}function Ft(Et,Mr){return"*"==Mr?($e.marked="keyword",Ke(Ft)):"variable"==Et?(mr(Mr),Ke(Ft)):"("==Et?Ke(mo,ci(")"),oo(Do,")"),zn,jt,Di):ee&&"<"==Mr?Ke(ci(">"),oo(yr,">"),zn,Ft):void 0}function Zn(Et,Mr){return"keyword"==Et||"variable"==Et?($e.marked="type",Ke(Zn)):"<"==Mr?Ke(ci(">"),oo(yr,">"),zn):void 0}function Do(Et,Mr){return"@"==Mr&&Ke(Pr,Do),"spread"==Et?Ke(Do):ee&&Kr(Mr)?($e.marked="keyword",Ke(Do)):ee&&"this"==Et?Ke(ts,Dr):Ct(Tr,ts,Dr)}function Jt(Et,Mr){return"variable"==Et?Jn(Et,Mr):Qn(Et,Mr)}function Jn(Et,Mr){if("variable"==Et)return mr(Mr),Ke(Qn)}function Qn(Et,Mr){return"<"==Mr?Ke(ci(">"),oo(yr,">"),zn,Qn):"extends"==Mr||"implements"==Mr||ee&&","==Et?("implements"==Mr&&($e.marked="keyword"),Ke(ee?Fr:Pr,Qn)):"{"==Et?Ke(ci("}"),Io,zn):void 0}function Io(Et,Mr){return"async"==Et||"variable"==Et&&("static"==Mr||"get"==Mr||"set"==Mr||ee&&Kr(Mr))&&$e.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?($e.marked="keyword",Ke(Io)):"variable"==Et||"keyword"==$e.style?($e.marked="property",Ke(ri,Io)):"number"==Et||"string"==Et?Ke(ri,Io):"["==Et?Ke(Pr,ts,Wn("]"),ri,Io):"*"==Mr?($e.marked="keyword",Ke(Io)):ee&&"("==Et?Ct(Ft,Io):";"==Et||","==Et?Ke(Io):"}"==Et?Ke():"@"==Mr?Ke(Pr,Io):void 0}function ri(Et,Mr){if("!"==Mr||"?"==Mr)return Ke(ri);if(":"==Et)return Ke(Fr,Dr);if("="==Mr)return Ke(Mn);var Ao=$e.state.lexical.prev;return Ct(Ao&&"interface"==Ao.info?Ft:Xt)}function Ka(Et,Mr){return"*"==Mr?($e.marked="keyword",Ke(To,Wn(";"))):"default"==Mr?($e.marked="keyword",Ke(Pr,Wn(";"))):"{"==Et?Ke(oo(Ei,"}"),To,Wn(";")):Ct(an)}function Ei(Et,Mr){return"as"==Mr?($e.marked="keyword",Ke(Wn("variable"))):"variable"==Et?Ct(Mn,Ei):void 0}function ui(Et){return"string"==Et?Ke():"("==Et?Ct(Pr):"."==Et?Ct(xo):Ct(ns,nl,To)}function ns(Et,Mr){return"{"==Et?Ki(ns,"}"):("variable"==Et&&mr(Mr),"*"==Mr&&($e.marked="keyword"),Ke(Bs))}function nl(Et){if(","==Et)return Ke(ns,nl)}function Bs(Et,Mr){if("as"==Mr)return $e.marked="keyword",Ke(ns)}function To(Et,Mr){if("from"==Mr)return $e.marked="keyword",Ke(Pr)}function rs(Et){return"]"==Et?Ke():Ct(oo(Mn,"]"))}function el(){return Ct(ci("form"),Tr,Wn("{"),ci("}"),oo(gc,"}"),zn,zn)}function gc(){return Ct(Tr,Dr)}function Ba(Et,Mr,Ao){return Mr.tokenize==Oe&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Mr.lastType)||"quasi"==Mr.lastType&&/\{\s*$/.test(Et.string.slice(0,Et.pos-(Ao||0)))}return Di.lex=!0,zn.lex=!0,{startState:function(Et){var Mr={tokenize:Oe,lastType:"sof",cc:[],lexical:new Me((Et||0)-R,0,"block",!1),localVars:G.localVars,context:G.localVars&&new Pn(null,null,!1),indented:Et||0};return G.globalVars&&"object"==typeof G.globalVars&&(Mr.globalVars=G.globalVars),Mr},token:function(Et,Mr){if(Et.sol()&&(Mr.lexical.hasOwnProperty("align")||(Mr.lexical.align=!1),Mr.indented=Et.indentation(),me(Et,Mr)),Mr.tokenize!=Ue&&Et.eatSpace())return null;var Ao=Mr.tokenize(Et,Mr);return"comment"==D?Ao:(Mr.lastType="operator"!=D||"++"!=U&&"--"!=U?D:"incdec",ut(Mr,Ao,D,U,Et))},indent:function(Et,Mr){if(Et.tokenize==Ue||Et.tokenize==Le)return z.Pass;if(Et.tokenize!=Oe)return 0;var Ao,oa=Mr&&Mr.charAt(0),ba=Et.lexical;if(!/^\s*else\b/.test(Mr))for(var Vi=Et.cc.length-1;Vi>=0;--Vi){var hl=Et.cc[Vi];if(hl==zn)ba=ba.prev;else if(hl!=Un&&hl!=Di)break}for(;("stat"==ba.type||"form"==ba.type)&&("}"==oa||(Ao=Et.cc[Et.cc.length-1])&&(Ao==xo||Ao==Vo)&&!/^[,\.=+\-*:?[\(]/.test(Mr));)ba=ba.prev;T&&")"==ba.type&&"stat"==ba.prev.type&&(ba=ba.prev);var ul=ba.type,Oc=oa==ul;return"vardef"==ul?ba.indented+("operator"==Et.lastType||","==Et.lastType?ba.info.length+1:0):"form"==ul&&"{"==oa?ba.indented:"form"==ul?ba.indented+R:"stat"==ul?ba.indented+(function Qo(Et,Mr){return"operator"==Et.lastType||","==Et.lastType||we.test(Mr.charAt(0))||/[,.]/.test(Mr.charAt(0))}(Et,Mr)?T||R:0):"switch"!=ba.info||Oc||0==G.doubleIndentSwitch?ba.align?ba.column+(Oc?0:1):ba.indented+(Oc?0:R):ba.indented+(/^(?:case|default)\b/.test(Mr)?R:2*R)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:L?null:"/*",blockCommentEnd:L?null:"*/",blockCommentContinue:L?null:" * ",lineComment:L?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:L?"json":"javascript",jsonldMode:N,jsonMode:L,expressionAllowed:Ba,skipExpression:function(Et){ut(Et,"atom","atom","true",new z.StringStream("",2,null))}}}),z.registerHelper("wordChars","javascript",/[\w$]/),z.defineMIME("text/javascript","javascript"),z.defineMIME("text/ecmascript","javascript"),z.defineMIME("application/javascript","javascript"),z.defineMIME("application/x-javascript","javascript"),z.defineMIME("application/ecmascript","javascript"),z.defineMIME("application/json",{name:"javascript",json:!0}),z.defineMIME("application/x-json",{name:"javascript",json:!0}),z.defineMIME("application/manifest+json",{name:"javascript",json:!0}),z.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),z.defineMIME("text/typescript",{name:"javascript",typescript:!0}),z.defineMIME("application/typescript",{name:"javascript",typescript:!0})}(x(4408))},9701:(m,X,x)=>{!function(z){"use strict";var H={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},G={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};z.defineMode("xml",function(D,U){var R,T,N=D.indentUnit,L={},Y=U.htmlMode?H:G;for(var ee in Y)L[ee]=Y[ee];for(var ee in U)L[ee]=U[ee];function te(Ke,Wt){function mr(Kr){return Wt.tokenize=Kr,Kr(Ke,Wt)}var nr=Ke.next();return"<"==nr?Ke.eat("!")?Ke.eat("[")?Ke.match("CDATA[")?mr(Te("atom","]]>")):null:Ke.match("--")?mr(Te("comment","--\x3e")):Ke.match("DOCTYPE",!0,!0)?(Ke.eatWhile(/[\w\._\-]/),mr(ge(1))):null:Ke.eat("?")?(Ke.eatWhile(/[\w\._\-]/),Wt.tokenize=Te("meta","?>"),"meta"):(R=Ke.eat("/")?"closeTag":"openTag",Wt.tokenize=pe,"tag bracket"):"&"==nr?(Ke.eat("#")?Ke.eat("x")?Ke.eatWhile(/[a-fA-F\d]/)&&Ke.eat(";"):Ke.eatWhile(/[\d]/)&&Ke.eat(";"):Ke.eatWhile(/[\w\.\-:]/)&&Ke.eat(";"))?"atom":"error":(Ke.eatWhile(/[^&<]/),null)}function pe(Ke,Wt){var mr=Ke.next();if(">"==mr||"/"==mr&&Ke.eat(">"))return Wt.tokenize=te,R=">"==mr?"endTag":"selfcloseTag","tag bracket";if("="==mr)return R="equals",null;if("<"==mr){Wt.tokenize=te,Wt.state=Le,Wt.tagName=Wt.tagStart=null;var nr=Wt.tokenize(Ke,Wt);return nr?nr+" tag error":"tag error"}return/[\'\"]/.test(mr)?(Wt.tokenize=function we(Ke){var Wt=function(mr,nr){for(;!mr.eol();)if(mr.next()==Ke){nr.tokenize=pe;break}return"string"};return Wt.isInAttribute=!0,Wt}(mr),Wt.stringStartCol=Ke.column(),Wt.tokenize(Ke,Wt)):(Ke.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Te(Ke,Wt){return function(mr,nr){for(;!mr.eol();){if(mr.match(Wt)){nr.tokenize=te;break}mr.next()}return Ke}}function ge(Ke){return function(Wt,mr){for(var nr;null!=(nr=Wt.next());){if("<"==nr)return mr.tokenize=ge(Ke+1),mr.tokenize(Wt,mr);if(">"==nr){if(1==Ke){mr.tokenize=te;break}return mr.tokenize=ge(Ke-1),mr.tokenize(Wt,mr)}}return"meta"}}function Ce(Ke){return Ke&&Ke.toLowerCase()}function Oe(Ke,Wt,mr){this.prev=Ke.context,this.tagName=Wt||"",this.indent=Ke.indented,this.startOfLine=mr,(L.doNotIndent.hasOwnProperty(Wt)||Ke.context&&Ke.context.noIndent)&&(this.noIndent=!0)}function je(Ke){Ke.context&&(Ke.context=Ke.context.prev)}function Ue(Ke,Wt){for(var mr;;){if(!Ke.context||!L.contextGrabbers.hasOwnProperty(Ce(mr=Ke.context.tagName))||!L.contextGrabbers[Ce(mr)].hasOwnProperty(Ce(Wt)))return;je(Ke)}}function Le(Ke,Wt,mr){return"openTag"==Ke?(mr.tagStart=Wt.column(),ke):"closeTag"==Ke?me:Le}function ke(Ke,Wt,mr){return"word"==Ke?(mr.tagName=Wt.current(),T="tag",Ze):L.allowMissingTagName&&"endTag"==Ke?(T="tag bracket",Ze(Ke,0,mr)):(T="error",ke)}function me(Ke,Wt,mr){if("word"==Ke){var nr=Wt.current();return mr.context&&mr.context.tagName!=nr&&L.implicitlyClosed.hasOwnProperty(Ce(mr.context.tagName))&&je(mr),mr.context&&mr.context.tagName==nr||!1===L.matchClosing?(T="tag",l):(T="tag error",Me)}return L.allowMissingTagName&&"endTag"==Ke?(T="tag bracket",l(Ke,0,mr)):(T="error",Me)}function l(Ke,Wt,mr){return"endTag"!=Ke?(T="error",l):(je(mr),Le)}function Me(Ke,Wt,mr){return T="error",l(Ke,0,mr)}function Ze(Ke,Wt,mr){if("word"==Ke)return T="attribute",ut;if("endTag"==Ke||"selfcloseTag"==Ke){var nr=mr.tagName,Kr=mr.tagStart;return mr.tagName=mr.tagStart=null,"selfcloseTag"==Ke||L.autoSelfClosers.hasOwnProperty(Ce(nr))?Ue(mr,nr):(Ue(mr,nr),mr.context=new Oe(mr,nr,Kr==mr.indented)),Le}return T="error",Ze}function ut(Ke,Wt,mr){return"equals"==Ke?$e:(L.allowMissing||(T="error"),Ze(Ke,0,mr))}function $e(Ke,Wt,mr){return"string"==Ke?Ct:"word"==Ke&&L.allowUnquoted?(T="string",Ze):(T="error",Ze(Ke,0,mr))}function Ct(Ke,Wt,mr){return"string"==Ke?Ct:Ze(Ke,0,mr)}return te.isInText=!0,{startState:function(Ke){var Wt={tokenize:te,state:Le,indented:Ke||0,tagName:null,tagStart:null,context:null};return null!=Ke&&(Wt.baseIndent=Ke),Wt},token:function(Ke,Wt){if(!Wt.tagName&&Ke.sol()&&(Wt.indented=Ke.indentation()),Ke.eatSpace())return null;R=null;var mr=Wt.tokenize(Ke,Wt);return(mr||R)&&"comment"!=mr&&(T=null,Wt.state=Wt.state(R||mr,Ke,Wt),T&&(mr="error"==T?mr+" error":T)),mr},indent:function(Ke,Wt,mr){var nr=Ke.context;if(Ke.tokenize.isInAttribute)return Ke.tagStart==Ke.indented?Ke.stringStartCol+1:Ke.indented+N;if(nr&&nr.noIndent)return z.Pass;if(Ke.tokenize!=pe&&Ke.tokenize!=te)return mr?mr.match(/^(\s*)/)[0].length:0;if(Ke.tagName)return!1!==L.multilineTagIndentPastTag?Ke.tagStart+Ke.tagName.length+2:Ke.tagStart+N*(L.multilineTagIndentFactor||1);if(L.alignCDATA&&/<!\[CDATA\[/.test(Wt))return 0;var Kr=Wt&&/^<(\/)?([\w_:\.-]*)/.exec(Wt);if(Kr&&Kr[1])for(;nr;){if(nr.tagName==Kr[2]){nr=nr.prev;break}if(!L.implicitlyClosed.hasOwnProperty(Ce(nr.tagName)))break;nr=nr.prev}else if(Kr)for(;nr;){var Pn=L.contextGrabbers[Ce(nr.tagName)];if(!Pn||!Pn.hasOwnProperty(Ce(Kr[2])))break;nr=nr.prev}for(;nr&&nr.prev&&!nr.startOfLine;)nr=nr.prev;return nr?nr.indent+N:Ke.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:L.htmlMode?"html":"xml",helperType:L.htmlMode?"html":"xml",skipAttribute:function(Ke){Ke.state==$e&&(Ke.state=Ze)},xmlCurrentTag:function(Ke){return Ke.tagName?{name:Ke.tagName,close:"closeTag"==Ke.type}:null},xmlCurrentContext:function(Ke){for(var Wt=[],mr=Ke.context;mr;mr=mr.prev)Wt.push(mr.tagName);return Wt.reverse()}}}),z.defineMIME("text/xml","xml"),z.defineMIME("application/xml","xml"),z.mimeModes.hasOwnProperty("text/html")||z.defineMIME("text/html",{name:"xml",htmlMode:!0})}(x(4408))},3023:(m,X,x)=>{"use strict";x.d(X,{A:()=>D});var z,H=x(1749),G=(z=function(U,R){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,N){T.__proto__=N}||function(T,N){for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(T[L]=N[L])})(U,R)},function(U,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function T(){this.constructor=U}z(U,R),U.prototype=null===R?Object.create(R):(T.prototype=R.prototype,new T)});const D=function(U){function R(T,N,L){var Y=U.call(this,N,L)||this;return Y._module=T,Y}return G(R,U),Object.defineProperty(R.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),R}(H.Kx)},2820:(m,X,x)=>{"use strict";x.d(X,{A:()=>U,F:()=>H});var z,H,R,G=x(3023),D=(z=function(R,T){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,L){N.__proto__=L}||function(N,L){for(var Y in L)Object.prototype.hasOwnProperty.call(L,Y)&&(N[Y]=L[Y])})(R,T)},function(R,T){if("function"!=typeof T&&null!==T)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");function N(){this.constructor=R}z(R,T),R.prototype=null===T?Object.create(T):(N.prototype=T.prototype,new N)});(R=H||(H={})).Select="select",R.Hover="hover",R.Spacing="spacing",R.Target="target",R.Resize="resize";const U=function(R){function T(){return null!==R&&R.apply(this,arguments)||this}return D(T,R),T.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(T.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"component",{get:function(){var N;return this.get("component")||(null===(N=this.get("componentView"))||void 0===N?void 0:N.model)},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"componentView",{get:function(){var N;return this.get("componentView")||(null===(N=this.get("component"))||void 0===N?void 0:N.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"el",{get:function(){var N;return null===(N=this.componentView)||void 0===N?void 0:N.el},enumerable:!1,configurable:!0}),T.prototype.getBoxRect=function(N){var L=this.el,Y=this.em.Canvas.getCanvasView();return this.get("boxRect")||(L&&Y?Y.getElBoxRect(L,N):{x:0,y:0,width:0,height:0})},T.prototype.getStyle=function(N){void 0===N&&(N={});var L=N.boxRect||this.getBoxRect(N),ee=L.height,te=L.x,pe=L.y;return{width:"".concat(L.width,"px"),height:"".concat(ee,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(te,"px ").concat(pe,"px")}},T.prototype.isType=function(N){return this.type===N},T}(G.A)},8351:(m,X,x)=>{"use strict";var z,G;x.d(X,{A:()=>H}),(G=z||(z={})).run="command:run",G.runCommand="command:run:",G.runBeforeCommand="command:run:before:",G.abort="command:abort:",G.stop="command:stop",G.stopCommand="command:stop:",G.stopBeforeCommand="command:stop:before:",G.call="command:call",G.callCommand="command:call:";const H=z},371:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>z});const z={run:function(H){H.Components.clear(),H.Css.clear()}}},6301:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>D});var z=x(5706),H=x(5633),G=x(2097);const D={run:function(U){(0,z.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=U,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(U){this.toggleMove(),this.disableDragger()},onKeyUp:function(U){" "===(0,G.Ch)(U)&&this.editor.stopCommand(this.id)},enableDragger:function(U){this.toggleDragger(1,U)},disableDragger:function(U){this.toggleDragger(0,U)},toggleDragger:function(U,R){var T=this.canvasModel,N=this.em,L=this.dragger,Y=U?"add":"remove";this.getCanvas().classList[Y]("".concat(this.ppfx,"is__grabbing")),L||(L=new H.A({getPosition:function(){return{x:T.get("x"),y:T.get("y")}},setPosition:function(ee){T.set({x:ee.x,y:ee.y})},onStart:function(ee,te){N.trigger("canvas:move:start",te)},onDrag:function(ee,te){N.trigger("canvas:move",te)},onEnd:function(ee,te){N.trigger("canvas:move:end",te)}}),this.dragger=L),U?L.start(R):L.stop()},toggleMove:function(U){var R=this.ppfx,T=U?"add":"remove",N=U?"on":"off",L={on:G.on,off:G.AU},Y=this.getCanvas(),ee=["".concat(R,"is__grab")];!U&&ee.push("".concat(R,"is__grabbing")),ee.forEach(function(te){return Y.classList[T](te)}),L[N](document,"keyup",this.onKeyUp),L[N](Y,"mousedown",this.enableDragger),L[N](document,"mouseup",this.disableDragger)}}},5301:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>T,defineCommand:()=>R});var z,H=x(1749),G=x(8351),D=(z=function(N,L){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Y,ee){Y.__proto__=ee}||function(Y,ee){for(var te in ee)Object.prototype.hasOwnProperty.call(ee,te)&&(Y[te]=ee[te])})(N,L)},function(N,L){if("function"!=typeof L&&null!==L)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function Y(){this.constructor=N}z(N,L),N.prototype=null===L?Object.create(L):(Y.prototype=L.prototype,new Y)}),U=function(){return U=Object.assign||function(N){for(var L,Y=1,ee=arguments.length;Y<ee;Y++)for(var te in L=arguments[Y])Object.prototype.hasOwnProperty.call(L,te)&&(N[te]=L[te]);return N},U.apply(this,arguments)};function R(N){return N}const T=function(N){function L(Y){var ee=N.call(this,0)||this;ee.config=Y||{},ee.em=ee.config.em||{};var te=ee.config.stylePrefix;return ee.pfx=te,ee.ppfx=ee.config.pStylePrefix,ee.hoverClass="".concat(te,"hover"),ee.badgeClass="".concat(te,"badge"),ee.plhClass="".concat(te,"placeholder"),ee.freezClass="".concat(ee.ppfx,"freezed"),ee.canvas=ee.em.Canvas,ee.init(ee.config),ee}return D(L,N),L.prototype.onFrameScroll=function(Y){},L.prototype.getCanvas=function(){return this.canvas.getElement()},L.prototype.getCanvasBody=function(){return this.canvas.getBody()},L.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},L.prototype.offset=function(Y){var ee=Y.getBoundingClientRect();return{top:ee.top+Y.ownerDocument.body.scrollTop,left:ee.left+Y.ownerDocument.body.scrollLeft}},L.prototype.init=function(Y){},L.prototype.callRun=function(Y,ee){void 0===ee&&(ee={});var te=this.id;if(Y.trigger("".concat(G.A.runBeforeCommand).concat(te),{options:ee}),!ee.abort){var we=this.run(Y,ee.sender||Y,ee),Te={id:te,result:we,options:ee},ge=U(U({},Te),{type:"run"});return this.noStop||(Y.Commands.active[te]=we),Y.trigger("".concat(G.A.runCommand).concat(te),Te),Y.trigger("".concat(G.A.callCommand).concat(te),ge),Y.trigger(G.A.run,Te),Y.trigger(G.A.call,ge),we}Y.trigger("".concat(G.A.abort).concat(te),{options:ee})},L.prototype.callStop=function(Y,ee){void 0===ee&&(ee={});var te=this.id,pe=ee.sender||Y;Y.trigger("".concat(G.A.stopBeforeCommand).concat(te),{options:ee});var we=this.stop(Y,pe,ee),Te={id:te,result:we,options:ee},ge=U(U({},Te),{type:"stop"});return delete Y.Commands.active[te],Y.trigger("".concat(G.A.stopCommand).concat(te),Te),Y.trigger("".concat(G.A.callCommand).concat(te),ge),Y.trigger(G.A.stop,Te),Y.trigger(G.A.call,ge),we},L.prototype.stopCommand=function(Y){this.em.Commands.stop(this.id,Y)},L.prototype.run=function(Y,ee,te){},L.prototype.stop=function(Y,ee,te){},L}(H.Kx)},8542:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>G});var z=x(5706);const G={run:function(D,U,R){var T=this;void 0===R&&(R={});var N=[],L=R.component||D.getSelectedAll();return(L=(0,z.isArray)(L)?function(D,U,R){if(R||2===arguments.length)for(var T,N=0,L=U.length;N<L;N++)!T&&N in U||(T||(T=Array.prototype.slice.call(U,0,N)),T[N]=U[N]);return D.concat(T||Array.prototype.slice.call(U))}([],L,!0):[L]).filter(Boolean).forEach(function(Y){var ee,te;if(!Y.get("removable"))return T.em.logWarning("The element is not removable",{component:Y});N.push(Y),((null===(te=null===(ee=Y.delegate)||void 0===ee?void 0:ee.remove)||void 0===te?void 0:te.call(ee,Y))||Y).remove()}),D.selectRemove(N),N}}},1319:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>U});var z=x(5706),H=x(5633),G=function(){return G=Object.assign||function(R){for(var T,N=1,L=arguments.length;N<L;N++)for(var Y in T=arguments[N])Object.prototype.hasOwnProperty.call(T,Y)&&(R[Y]=T[Y]);return R},G.apply(this,arguments)},D="dmode";const U={run:function(R,T,N){var L=this;void 0===N&&(N={}),(0,z.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var Y=N.target,ee=N.event,te=N.mode,pe=N.dragger,we=void 0===pe?{}:pe,Te=Y.getEl(),ge=G({doc:Te.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return L.guidesStatic},guidesTarget:function(){return L.guidesTarget}},we);this.setupGuides(),this.opts=N,this.editor=R,this.em=R.getModel(),this.target=Y,this.isTran="translate"==te,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var Ce=this.dragger;return Ce?Ce.setOptions(ge):(Ce=new H.A(ge),this.dragger=Ce),ee&&Ce.start(ee),this.toggleDrag(1),this.em.trigger("".concat(D,":start"),this.getEventOpts()),Ce},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(R){var T=R.guide;T&&T.parentNode.removeChild(T)}),this.guides=[]},getGuidesContainer:function(){var R=this,T=this.guidesEl;if(!T){var N=this,L=N.editor,Y=N.em,ee=N.opts,te=L.getConfig().stylePrefix,pe=document.createElement("div"),we=document.createElement("div"),Te='<div class="'.concat(te,"guide-info__line ").concat(te,'danger-bg">\n        <div class="').concat(te,"guide-info__content ").concat(te,'danger-color"></div>\n      </div>');(T=document.createElement("div")).className="".concat(te,"guides"),pe.className="".concat(te,"guide-info ").concat(te,"guide-info__x"),we.className="".concat(te,"guide-info ").concat(te,"guide-info__y"),pe.innerHTML=Te,we.innerHTML=Te,T.appendChild(pe),T.appendChild(we),L.Canvas.getGlobalToolsEl().appendChild(T),this.guidesEl=T,this.elGuideInfoX=pe,this.elGuideInfoY=we,this.elGuideInfoContentX=pe.querySelector(".".concat(te,"guide-info__content")),this.elGuideInfoContentY=we.querySelector(".".concat(te,"guide-info__content")),Y.on("canvas:update frame:scroll",(0,z.debounce)(function(){var ge;R.updateGuides(),ee.debug&&(null===(ge=R.guides)||void 0===ge||ge.forEach(function(Ce){return R.renderGuide(Ce)}))},200))}return T},getGuidesStatic:function(){var R=this,T=[],N=this.target.getEl(),L=N.parentNode,Y=void 0===L?{}:L;return(0,z.each)(Y.children,function(ee){return T=T.concat(N!==ee?R.getElementGuides(ee):[])}),T.concat(this.getElementGuides(Y))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(R){var T,N,L=this;(R||this.guides).forEach(function(Y){var ee=Y.origin,te=T===ee?N:L.getElementPos(ee);T=ee,N=te,(0,z.each)(L.getGuidePosUpdate(Y,te),function(pe,we){return Y[we]=pe}),Y.originRect=te})},getGuidePosUpdate:function(R,T){var N={},L=T.top,Y=T.height,ee=T.left,te=T.width;switch(R.type){case"t":N.y=L;break;case"b":N.y=L+Y;break;case"l":N.x=ee;break;case"r":N.x=ee+te;break;case"x":N.x=ee+te/2;break;case"y":N.y=L+Y/2}return N},renderGuide:function(R){void 0===R&&(R={});var T=R.guide||document.createElement("div"),N="px",L=R.active?2:1,Y=T.children[0];return T.style="position: absolute; background-color: ".concat(R.active?"green":"red",";"),T.children.length||((Y=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",T.appendChild(Y)),R.y?(T.style.width="100%",T.style.height="".concat(L).concat(N),T.style.top="".concat(R.y).concat(N),T.style.left=0):(T.style.width="".concat(L).concat(N),T.style.height="100%",T.style.left="".concat(R.x).concat(N),T.style.top="0".concat(N)),!R.guide&&this.guidesContainer.appendChild(T),T},getElementPos:function(R){return this.editor.Canvas.getElementPos(R,{noScroll:1})},getElementGuides:function(R){var T=this,N=this.opts,L=this.getElementPos(R),Y=L.top,ee=L.height,te=L.left,pe=L.width,we=[{type:"t",y:Y},{type:"b",y:Y+ee},{type:"l",x:te},{type:"r",x:te+pe},{type:"x",x:te+pe/2},{type:"y",y:Y+ee/2}].map(function(Te){return G(G({},Te),{origin:R,originRect:L,guide:N.debug&&T.renderGuide(Te)})});return we.forEach(function(Te){var ge;return null===(ge=T.guides)||void 0===ge?void 0:ge.push(Te)}),we},getTranslate:function(R,T){void 0===T&&(T="x");var N=0;return(R||"").split(" ").forEach(function(L){var Y=L.trim(),ee="translate".concat(T.toUpperCase(),"(");0===Y.indexOf(ee)&&(N=parseFloat(Y.replace(ee,"")))}),N},setTranslate:function(R,T,N){var L="translate".concat(T.toUpperCase(),"("),Y="".concat(L).concat(N,")"),ee=(R||"").split(" ").map(function(te){return 0===te.trim().indexOf(L)&&(te=Y),te}).join(" ");return ee.indexOf(L)<0&&(ee+=" ".concat(Y)),ee},getPosition:function(){var T=this.isTran,N=this.target.getStyle(),L=N.left,Y=N.top,ee=N.transform,te=0,pe=0;return T?(te=this.getTranslate(ee),pe=this.getTranslate(ee,"y")):(te=parseFloat(L||0),pe=parseFloat(Y||0)),{x:te,y:pe}},setPosition:function(R){var N=R.y,L=R.end,Y=R.position,ee=R.width,te=R.height,we=this.target,Te=this.isTran,ge=this.em,Oe=!L,je="".concat(parseInt(R.x,10)).concat("px"),Ue="".concat(parseInt(N,10)).concat("px"),Le={};if(Te){var ke=we.getStyle().transform||"";ke=this.setTranslate(ke,"x",je),Le={transform:ke=this.setTranslate(ke,"y",Ue),__p:Oe},we.addStyle(Le,{avoidStore:!L})}else{var me={position:Y,width:ee,height:te},l={left:je,top:Ue,__p:Oe};(0,z.keys)(me).forEach(function(Me){var Ze=me[Me];Ze&&(l[Me]=Ze)}),we.addStyle(Le=l,{avoidStore:!L})}ge?.Styles.__emitCmpStyleUpdate(Le,{components:ge.getSelected()})},_getDragData:function(){var R=this.target;return{target:R,parent:R.parent(),index:R.index()}},onStart:function(R){var T=this,N=T.target,Y=T.isTran,ee=T.opts,te=ee.center,pe=ee.onStart,we=T.editor.Canvas,Te=N.getStyle(),ge="absolute",Ce=[ge,"relative"];if(pe&&pe(this._getDragData()),!Y&&Te.position!==ge){var Oe=we.offset(N.getEl()),je=Oe.left,Ue=Oe.top,Le=Oe.width,ke=Oe.height,me=N.parent(),l=void 0;do{var Me=me.getStyle();l=Ce.indexOf(Me.position)>=0?me:null,me=me.parent()}while(me&&!l);if(te){var Ze=we.getMouseRelativeCanvas(R);je=Ze.x,Ue=Ze.y}else if(l){var ut=we.offset(l.getEl());je-=ut.left,Ue-=ut.top}this.setPosition({x:je,y:Ue,width:"".concat(Le,"px"),height:"".concat(ke,"px"),position:ge})}},onDrag:function(){for(var R=this,T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];var L=this.guidesTarget,Y=this.opts,ee=Y.onDrag;this.updateGuides(L),Y.debug&&L.forEach(function(te){return R.renderGuide(te)}),Y.guidesInfo&&this.renderGuideInfo(L.filter(function(te){return te.active})),ee&&ee(this._getDragData())},onEnd:function(R,T,N){void 0===N&&(N={});var L=this,Y=L.editor,te=L.id,pe=L.opts.onEnd;pe&&pe(R,N,G(G({event:R},N),this._getDragData())),Y.stopCommand(te),this.hideGuidesInfo(),this.em.trigger("".concat(D,":end"),this.getEventOpts())},hideGuidesInfo:function(){var R=this;["X","Y"].forEach(function(T){var N=R["elGuideInfo".concat(T)];N&&(N.style.display="none")})},renderGuideInfo:function(R){var T=this;void 0===R&&(R=[]);var N=this.guidesStatic;this.hideGuidesInfo(),R.forEach(function(L){var ee=L.x,te=T.getElementPos(L.origin),pe=(0,z.isUndefined)(ee)?"y":"x",we="y"===pe,Te=te[we?"left":"top"],ge=te.rect[we?"left":"top"],Ce=we?Te+te.width:Te+te.height,Oe=we?ge+te.rect.width:ge+te.rect.height,je=T["elGuideInfo".concat(pe.toUpperCase())],Ue=T["elGuideInfoContent".concat(pe.toUpperCase())],Le=je.style,ke=N?.filter(function(No){return No.type===L.type}).map(function(No){var Di=No.originRect,ci=Di.left,Wn=Di.top,lr=we?ci+Di.width:Wn+Di.height;return{gap:lr<Te?Te-lr:(we?ci:Wn)-Ce,guide:No}}).filter(function(No){return No.gap>0}).sort(function(No,Di){return No.gap-Di.gap}).map(function(No){return No.guide})[0];if(ke){var me=ke.originRect,l=me.left,Ze=me.top,$e=me.rect,Ct=we?l<te.left:Ze<te.top,Ke=we?l:Ze,Wt=we?$e.left:$e.top,mr=we?l+me.width:Ze+me.height,nr=we?$e.left+$e.width:$e.top+$e.height,Kr=we?L.y:L.x,Pn=Ct?mr:Ce,Kn="".concat(Kr,"px"),Mo=Ct?Te-mr:Ke-Ce,mo=Ct?ge-nr:Wt-Oe;Le.display="",Le[we?"top":"left"]=Kn,Le[we?"left":"top"]="".concat(Pn,"px"),Le[we?"width":"height"]="".concat(Mo,"px"),Ue.innerHTML="".concat(Math.round(mo),"px"),T.em.trigger("".concat(D,":active"),G(G({},T.getEventOpts()),{guide:L,guidesStatic:N,matched:ke,posFirst:Kr,posSecond:Pn,size:Mo,sizeRaw:mo,elGuideInfo:je,elGuideInfoCnt:Ue}))}})},toggleDrag:function(R){var N=this.editor,L=R?"add":"remove",Y=["".concat(this.ppfx,"is__grabbing")],ee=N.Canvas,te=ee.getBody();Y.forEach(function(pe){return te.classList[L](pe)}),ee[R?"startAutoscroll":"stopAutoscroll"]()}}},1859:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>z});const z={run:function(H){if(H.Canvas.hasFocus()){var G=[];H.getSelectedAll().forEach(function(D){var U=D.components(),R=U&&U.filter(function(T){return T.get("selectable")})[0];R&&G.push(R)}),G.length&&H.select(G)}}}},3709:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>z});const z={run:function(H,G,D){if(void 0===D&&(D={}),H.Canvas.hasFocus()||D.force){var U=[];H.getSelectedAll().forEach(function(R){for(var T=R.parent();T&&!T.get("selectable");)T=T.parent();T&&U.push(T)}),U.length&&H.select(U)}}}},2860:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>z});const z={run:function(H){if(H.Canvas.hasFocus()){var G=[];H.getSelectedAll().forEach(function(D){var U=D.parent();if(U){var R,T=U.components().length,N=0,L=0;do{N++,R=(L=D.index()+N)<=T?U.getChildAt(L):null}while(R&&!R.get("selectable"));G.push(R||D)}}),G.length&&H.select(G)}}}},4944:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>z});const z={run:function(H){if(H.Canvas.hasFocus()){var G=[];H.getSelectedAll().forEach(function(D){var U=D.parent();if(U){var R,T=0,N=0;do{T++,R=(N=D.index()-T)>=0?U.getChildAt(N):null}while(R&&!R.get("selectable"));G.push(R||D)}}),G.length&&H.select(G)}}}},767:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=x(5706);const H={run:function(G,D,U){void 0===U&&(U={});var R=U.target,T=[];if(!R.get("styles"))return T;var N=R.get("type"),L=G.Pages.getAllWrappers();if(!(0,z.flatten)(L.map(function(ee){return ee.findType(N)})).length){var Y=G.CssComposer.getAll();T=Y.filter(function(ee){return ee.get("group")==="cmp:".concat(N)}),Y.remove(T)}return T}}},2126:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});const H={run:function(G){var D=G.getModel(),U=function(G,D,U){if(U||2===arguments.length)for(var R,T=0,N=D.length;T<N;T++)!R&&T in D||(R||(R=Array.prototype.slice.call(D,0,T)),R[T]=D[T]);return G.concat(R||Array.prototype.slice.call(D))}([],G.getSelectedAll(),!0).map(function(R){var T,N;return(null===(N=null===(T=R.delegate)||void 0===T?void 0:T.copy)||void 0===N?void 0:N.call(T,R))||R}).filter(Boolean);U.length&&D.set("clipboard",U)}}},4860:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=x(2097);const H={run:function(G,D,U){var R=this;void 0===U&&(U={}),D&&D.set&&D.set("active",0);var T=G.getConfig(),N=G.Modal,L=T.stylePrefix;if(this.cm=G.CodeManager||null,!this.editors){var Y=this.buildEditor("htmlmixed","hopscotch","HTML"),ee=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=Y.model,this.cssEditor=ee.model;var te=(0,z.a_)("div",{class:"".concat(L,"export-dl")});te.appendChild(Y.el),te.appendChild(ee.el),this.editors=te}N.open({title:T.textViewCode,content:this.editors}).getModel().once("change:open",function(){return G.stopCommand("".concat(R.id))}),this.htmlEditor.setContent(G.getHtml(U.optsHtml)),this.cssEditor.setContent(G.getCss(U.optsCss))},stop:function(G){var D=G.Modal;D&&D.close()},buildEditor:function(G,D,U){var R=this.em.CodeManager,T=R.createViewer({label:U,codeName:G,theme:D});return{model:T,el:new R.EditorView({model:T,config:R.getConfig()}).render().el}}}},1085:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=x(5706);const H={isEnabled:function(){var G=document;return!!(G.fullscreenElement||G.webkitFullscreenElement||G.mozFullScreenElement)},enable:function(G){var D="";return G.requestFullscreen?G.requestFullscreen():G.webkitRequestFullscreen?(D="webkit",G.webkitRequestFullscreen()):G.mozRequestFullScreen?(D="moz",G.mozRequestFullScreen()):G.msRequestFullscreen&&G.msRequestFullscreen(),D},disable:function(){var G=document;this.isEnabled()&&(G.exitFullscreen?G.exitFullscreen():G.webkitExitFullscreen?G.webkitExitFullscreen():G.mozCancelFullScreen?G.mozCancelFullScreen():G.msExitFullscreen&&G.msExitFullscreen())},fsChanged:function(G){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(G||"","fullscreenchange"),this.fsChanged))},run:function(G,D,U){void 0===U&&(U={}),this.sender=D;var R=U.target,T=(0,z.isElement)(R)?R:document.querySelector(R),N=this.enable(T||G.getContainer());this.fsChanged=this.fsChanged.bind(this,N),document.addEventListener(N+"fullscreenchange",this.fsChanged)},stop:function(G,D){D&&D.set&&D.set("active",!1),this.disable()}}},9622:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>R});var z=x(5706),H=x(6411),G=x(2097),D=x(4596),U=x(2983);const R=(0,z.extend)({},U.default,D.default,{init:function(T){D.default.init.apply(this,arguments),(0,z.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=T,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];D.default.enable.apply(this,T),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var L=this.$wrapper;L.css("cursor","move"),L.on("mousedown",this.initSorter),L.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(T){var N=(0,H.default)(T.target).data("model").get("draggable");N&&(this.cacheEl=null,this.startSelectPosition(T.target,this.frameEl.contentDocument),this.sorter.draggable=N,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,G.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(T){var N=T.get("draggable");N&&(this.cacheEl=null,this.startSelectPosition(T.view.el,this.frameEl.contentDocument),this.sorter.draggable=N,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,G.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModels:function(T){this.cacheEl=null;var N=T[T.length-1],L=this.em.getCurrentFrame(),Y=N.getEl(L?.model).ownerDocument,ee=T.map(function(te){var pe;return null===(pe=te?.view)||void 0===pe?void 0:pe.el});this.startSelectPosition(ee,Y,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,G.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,G.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,G.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(T,N){},rollback:function(T,N){(27==(T.which||T.keyCode)||N)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,H.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,H.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var T=[],N=0;N<arguments.length;N++)T[N]=arguments[N];D.default.stop.apply(this,T),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css("cursor","").unbind().removeClass(this.noSelClass)}})},8481:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>G});var z=x(5706),H=x(2097);const G={open:function(D){var U=this,R=this,T=R.editor,N=R.title,Y=R.am,ee=R.config.custom;if((0,z.isFunction)(ee.open))return ee.open(Y.__customData());T.Modal.open({title:N,content:D}).onceClose(function(){return T.stopCommand(U.id)})},close:function(){var D=this.config.custom;if((0,z.isFunction)(D.close))return D.close(this.am.__customData());var U=this.editor.Modal;U&&U.close()},run:function(D,U,R){void 0===R&&(R={});var T=D.AssetManager,N=T.getConfig(),L=R.types,Y=void 0===L?[]:L,ee=R.accept,te=R.select;if(this.title=R.modalTitle||D.t("assetManager.modalTitle")||"",this.editor=D,this.config=N,this.am=T,T.setTarget(R.target),T.onClick(R.onClick),T.onDblClick(R.onDblClick),T.onSelect(R.onSelect),T.__behaviour({select:te,types:Y,options:R}),N.custom)this.rendered=this.rendered||(0,H.a_)("div"),this.rendered.className="".concat(N.stylePrefix,"custom-wrp"),T.__behaviour({container:this.rendered}),T.__trgCustom();else{if(!this.rendered||Y){var pe=T.getAll().filter(function(Te){return Te});Y&&Y.length&&(pe=pe.filter(function(Te){return-1!==Y.indexOf(Te.get("type"))})),T.render(pe),this.rendered=T.getContainer()}if(ee){var we=this.rendered.querySelector("input#".concat(N.stylePrefix,"uploadFile"));we&&we.setAttribute("accept",ee)}}return this.open(this.rendered),this},stop:function(D){this.editor=D,this.close(this.rendered)}}},3666:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>G});var z=x(5706),H=x(2097);const G={open:function(){var D=this,U=D.container,R=D.editor,T=D.bm,N=D.config,L=N.custom,Y=N.appendTo;if((0,z.isFunction)(L.open))return L.open(T.__customData());if(this.firstRender&&!Y){var ee="views-container",te=R.Panels;(te.getPanel(ee)||te.addPanel({id:ee})).set("appendContent",U).trigger("change:appendContent"),L||U.appendChild(T.render())}U&&(U.style.display="block")},close:function(){var D=this.container,U=this.config.custom;if((0,z.isFunction)(U.close))return U.close(this.bm.__customData());D&&(D.style.display="none")},run:function(D){var U=D.Blocks;this.config=U.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,H.a_)("div"),this.editor=D,this.bm=U,U.__behaviour({container:this.container}),this.config.custom&&U.__trgCustom(),this.open()},stop:function(){this.close()}}},5838:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>z});const z={run:function(H){var G=H.LayerManager,D=H.Panels,U=G.getConfig();if(!U.appendTo){if(!this.layers){var R="views-container",T=document.createElement("div"),N=D.getPanel(R)||D.addPanel({id:R});U.custom?G.__trgCustom({container:T}):T.appendChild(G.render()),N.set("appendContent",T).trigger("change:appendContent"),this.layers=T}this.layers.style.display="block"}},stop:function(){var H=this.layers;H&&(H.style.display="none")}}},8692:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=x(6411);const H={run:function(G,D){if(this.sender=D,!this.$cnt){var U=G.getConfig(),R=G.Panels,T=G.DeviceManager,N=G.SelectorManager,L=G.StyleManager,Y="change:appendContent",ee=(0,z.default)("<div></div>"),te=(0,z.default)("<div></div>"),pe=(0,z.default)("<div></div>"),we=(0,z.default)("<div></div>");if(this.$cnt=ee,this.$cntInner=te,te.append(pe),te.append(we),ee.append(te),T&&U.showDevices){var Te=R.addPanel({id:"devices-c"}),ge=T.render();Te.set("appendContent",ge).trigger(Y)}var Ce=N.getConfig();Ce.custom?N.__trgCustom({container:pe.get(0)}):Ce.appendTo||pe.append(N.render([])),this.sm=L;var Oe=L.getConfig();this.$header=(0,z.default)('<div class="'.concat(Oe.stylePrefix,'header">').concat(G.t("styleManager.empty"),"</div>")),ee.append(this.$header),Oe.custom?L.__trgCustom({container:we.get(0)}):Oe.appendTo||we.append(L.render());var Ue="views-container";(R.getPanel(Ue)||R.addPanel({id:Ue})).set("appendContent",ee).trigger(Y);var Le=G.getModel();this.listenTo(Le,L.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var G=this,D=G.sender,U=G.sm,R=G.$cntInner,T=G.$header;D&&D.get&&!D.get("active")||!U||(U.getSelected()?(R?.show(),T?.hide()):(R?.hide(),T?.show()))},stop:function(){var G,D;null===(G=this.$cntInner)||void 0===G||G.hide(),null===(D=this.$header)||void 0===D||D.hide()}}},9163:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=x(6411);const H={run:function(G,D){this.sender=D;var U,R=G.getModel(),T=G.Config.stylePrefix,N=G.TraitManager,L=N.getConfig();if(!L.appendTo){if(!this.$cn){this.$cn=(0,z.default)("<div></div>"),this.$cn2=(0,z.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,z.default)("<div>").append('<div class="'.concat(L.stylePrefix,'header">').concat(R.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),L.custom?N.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(T,'traits-label">').concat(R.t("traitManager.label"),"</div>")),this.$cn2.append(N.render()));var Y=G.Panels;null==(U=Y.getPanel("views-container")?Y.getPanel("views-container"):Y.addPanel({id:"views-container"}))||U.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=G.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var G=this.sender;G&&G.get&&!G.get("active")||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},9298:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=x(5706);const H={run:function(D,U,R){void 0===R&&(R={});var T=D.getModel(),N=T.get("clipboard"),L=D.getSelected();N?.length&&L&&(D.getSelectedAll().forEach(function(Y){var ee,te,pe,we,Te=(null===(te=null===(ee=Y.delegate)||void 0===ee?void 0:ee.copy)||void 0===te?void 0:te.call(ee,Y))||Y,ge=Te.collection;if(ge){var Ce={at:Te.index()+1,action:R.action||"paste-component"};we=(0,z.contains)(N,Te)&&Te.get("copyable")?ge.add(Te.clone(),Ce):G(D,N,Te.parent(),Ce)}else{var Oe=null===(pe=T.Pages.getSelected())||void 0===pe?void 0:pe.getMainComponent();Ce={at:Oe?.components().length||0,action:R.action||"paste-component"},we=G(D,N,Oe,Ce)}(we=(0,z.isArray)(we)?we:[we]).forEach(function(je){return D.trigger("component:paste",je)})}),L.emitUpdate())}};function G(D,U,R,T){var N=U.filter(function(L){return L.get("copyable")}).filter(function(L){return D.Components.canMove(R,L).result});return R.components().add(N.map(function(L){return L.clone()}),T)}},8594:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>D});var z=x(5706),G="core:component-outline";const D={getPanels:function(U){return this.panels||(this.panels=U.Panels.getPanels()),this.panels},preventDrag:function(U){U.abort=1},tglEffects:function(U){var R=this.em,T=U?"on":"off";if(R){var N=R.Canvas,L=N.getBody(),Y=N.getToolbarEl();Y&&(Y.style.display=U?"none":"");var ee=L.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,z.each)(ee,function(te){return te.style.pointerEvents=U?"all":""}),R[T]("run:tlb-move:before",this.preventDrag)}},run:function(U,R){var T=this;this.sender=R,this.selected=function(U,R,T){if(T||2===arguments.length)for(var N,L=0,Y=R.length;L<Y;L++)!N&&L in R||(N||(N=Array.prototype.slice.call(R,0,L)),N[L]=R[L]);return U.concat(N||Array.prototype.slice.call(R))}([],U.getSelectedAll(),!0),U.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=U.Commands.isActive(G)),this.shouldRunSwVisibility&&U.stopCommand(G),U.getModel().stopDefault();var N=this.getPanels(U),L=U.Canvas.getElement(),Y=U.getEl(),ee=U.Config.stylePrefix;if(!this.helper){var te=document.createElement("span");te.className="".concat(ee,"off-prv fa fa-eye-slash"),Y.appendChild(te),te.onclick=function(){return T.stopCommand()},this.helper=te}this.helper.style.display="inline-block",N.forEach(function(we){return we.set("visible",!1)});var pe=L.style;pe.width="100%",pe.height="100%",pe.top="0",pe.left="0",pe.padding="0",pe.margin="0",U.refresh(),this.tglEffects(1)},stop:function(U){var R=this.sender,T=void 0===R?{}:R,N=this.selected;T.set&&T.set("active",0);var L=this.getPanels(U);this.shouldRunSwVisibility&&(U.runCommand(G),this.shouldRunSwVisibility=!1),U.getModel().runDefault(),L.forEach(function(Y){return Y.set("visible",!0)}),U.Canvas.getElement().setAttribute("style",""),N&&U.select(N),delete this.selected,this.helper&&(this.helper.style.display="none"),U.refresh(),this.tglEffects()}}},7604:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>H});var z=function(){return z=Object.assign||function(G){for(var D,U=1,R=arguments.length;U<R;U++)for(var T in D=arguments[U])Object.prototype.hasOwnProperty.call(D,T)&&(G[T]=D[T]);return G},z.apply(this,arguments)};const H={run:function(G,D,U){var R=U||{},T=G.Canvas,N=T.getCanvasView(),L=z({appendTo:T.getResizerEl(),prefix:G.getConfig().stylePrefix,posFetcher:N.getElementPos.bind(N),mousePosFetcher:T.getMouseRelativePos.bind(T)},R.options||{}),Y=this.canvasResizer;return Y&&!R.forceNew||(this.canvasResizer=new G.Utils.Resizer(L),Y=this.canvasResizer),Y.setOptions(L,!0),Y.blur(),Y.focus(R.el),Y},stop:function(){var G;null===(G=this.canvasResizer)||void 0===G||G.blur()}}},4596:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>me});var z,H=x(5706),G=x(1749),D=(z=function(l,Me){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ze,ut){Ze.__proto__=ut}||function(Ze,ut){for(var $e in ut)Object.prototype.hasOwnProperty.call(ut,$e)&&(Ze[$e]=ut[$e])})(l,Me)},function(l,Me){if("function"!=typeof Me&&null!==Me)throw new TypeError("Class extends value "+String(Me)+" is not a constructor or null");function Ze(){this.constructor=l}z(l,Me),l.prototype=null===Me?Object.create(Me):(Ze.prototype=Me.prototype,new Ze)});const U=function(l){function Me(){return null!==l&&l.apply(this,arguments)||this}return D(Me,l),Me.prototype.defaults=function(){return{command:"",attributes:{}}},Me}(G.Kx);var l,R=(l=function(Me,Ze){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,$e){ut.__proto__=$e}||function(ut,$e){for(var Ct in $e)Object.prototype.hasOwnProperty.call($e,Ct)&&(ut[Ct]=$e[Ct])})(Me,Ze)},function(Me,Ze){if("function"!=typeof Ze&&null!==Ze)throw new TypeError("Class extends value "+String(Ze)+" is not a constructor or null");function ut(){this.constructor=Me}l(Me,Ze),Me.prototype=null===Ze?Object.create(Ze):(ut.prototype=Ze.prototype,new ut)}),T=function(l){function Me(){return null!==l&&l.apply(this,arguments)||this}return R(Me,l),Me}(G.pM);const N=T;T.prototype.model=U;var L=x(91),Y=function(){var l=function(Me,Ze){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,$e){ut.__proto__=$e}||function(ut,$e){for(var Ct in $e)Object.prototype.hasOwnProperty.call($e,Ct)&&(ut[Ct]=$e[Ct])})(Me,Ze)};return function(Me,Ze){if("function"!=typeof Ze&&null!==Ze)throw new TypeError("Class extends value "+String(Ze)+" is not a constructor or null");function ut(){this.constructor=Me}l(Me,Ze),Me.prototype=null===Ze?Object.create(Ze):(ut.prototype=Ze.prototype,new ut)}}(),ee=function(){return ee=Object.assign||function(l){for(var Me,Ze=1,ut=arguments.length;Ze<ut;Ze++)for(var $e in Me=arguments[Ze])Object.prototype.hasOwnProperty.call(Me,$e)&&(l[$e]=Me[$e]);return l},ee.apply(this,arguments)};const te=function(l){function Me(Ze){var ut=l.call(this,Ze)||this;return ut.em=Ze.config.em,ut}return Y(Me,l),Me.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},Me.prototype.attributes=function(){return this.model.get("attributes")},Me.prototype.handleClick=function(Ze){Ze.preventDefault(),Ze.stopPropagation();var ut=this.em,$e=ut.Canvas.getFrameEl().getBoundingClientRect(),Ct=$e.left,Ke=$e.top,Wt=ee(ee({},Ze),{clientX:Ze.clientX-Ct,clientY:Ze.clientY-Ke});ut.trigger("toolbar:run:before",{event:Wt}),this.execCommand(Wt)},Me.prototype.execCommand=function(Ze){var ut=this.em,$e={event:Ze},Ct=this.model.get("command"),Ke=ut.Editor;(0,H.isFunction)(Ct)&&Ct(Ke,null,$e),(0,H.isString)(Ct)&&Ke.runCommand(Ct,$e)},Me.prototype.render=function(){var ut=this.em,$e=this.$el,Ct=this.model,Ke=Ct.get("id"),Wt=Ct.get("label"),mr=ut.getConfig().stylePrefix;return $e.addClass("".concat(mr,"toolbar-item")),Ke&&$e.addClass("".concat(mr,"toolbar-item__").concat(Ke)),Wt&&$e.append(Wt),this},Me}(G.Ss);var pe=function(){var l=function(Me,Ze){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ut,$e){ut.__proto__=$e}||function(ut,$e){for(var Ct in $e)Object.prototype.hasOwnProperty.call($e,Ct)&&(ut[Ct]=$e[Ct])})(Me,Ze)};return function(Me,Ze){if("function"!=typeof Ze&&null!==Ze)throw new TypeError("Class extends value "+String(Ze)+" is not a constructor or null");function ut(){this.constructor=Me}l(Me,Ze),Me.prototype=null===Ze?Object.create(Ze):(ut.prototype=Ze.prototype,new ut)}}(),we=function(l){function Me(Ze){var ut=l.call(this,Ze)||this,$e=Ze.em;return ut.em=$e,ut.config={em:$e},ut.listenTo(ut.collection,"reset",ut.render),ut}return pe(Me,l),Me.prototype.onRender=function(){this.el.className="".concat(this.em.config.stylePrefix,"toolbar-items")},Me}(L.A);const Te=we;we.prototype.itemView=te;var ge,Ce=x(2097),Oe=x(9195),je=x(2820),Ue=x(3172),Le=function(){return Le=Object.assign||function(l){for(var Me,Ze=1,ut=arguments.length;Ze<ut;Ze++)for(var $e in Me=arguments[Ze])Object.prototype.hasOwnProperty.call(Me,$e)&&(l[$e]=Me[$e]);return l},Le.apply(this,arguments)};const me={activeResizer:!1,init:function(){this.onSelect=(0,H.debounce)(this.onSelect,0),(0,H.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),ge=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(l){var Me=this,Ze=this.em,ut=this.canvas.getCanvasView().el,$e=Ze.getConfig().listenToEl,Ct=Ze.getContainer().parentNode,Ke=l?"on":"off",Wt={on:Ce.on,off:Ce.AU},mr=Ue.I.update;!$e.length&&Ct&&$e.push(Ct),Wt[Ke](window,"resize",this.onFrameUpdated),Wt[Ke]($e,"scroll",this.onContainerChange),Ze[Ke]("component:toggled ".concat(mr," undo redo"),this.onSelect,this),Ze[Ke]("change:componentHovered",this.onHovered,this),Ze[Ke]("component:resize styleable:change component:input",this.updateGlobalPos,this),Ze[Ke]("".concat(mr,":toolbar"),this._upToolbar,this),Ze[Ke]("frame:updated",this.onFrameUpdated,this),Ze[Ke]("canvas:updateTools",this.onFrameUpdated,this),Ze[Ke](Ze.Canvas.events.refresh,this.updateAttached,this),Ze.Canvas.getFrames().forEach(function(nr){var Kn,Mo,Kr=nr.view,Pn=Kr?.getWindow();Pn&&(Kn=Pn,Mo=Kr?.getBody(),Wt[Ke](ut,"scroll",Me.onCanvasScroll,!0),Wt[Ke](Mo,"mouseover",Me.onHover),Wt[Ke](Mo,"mouseleave",Me.onOut),Wt[Ke](Mo,"click",Me.onClick),Wt[Ke](Kn,"scroll",Me.onFrameScroll,!0),Wt[Ke](Kn,"resize",Me.onFrameResize))})},onHover:function(l){l.stopPropagation();var Me=this.em,Ze=l.target,ut=(0,Oe.getComponentView)(Ze),$e=ut?.frameView,Ct=ut?.model;if(!Ct)for(var Ke=Ze.parentNode;!Ct&&Ke&&!(0,Ce.ZQ)(Ke);)Ct=(0,Oe.getComponentModel)(Ke),Ke=Ke.parentNode;this.currentDoc=Ze.ownerDocument,Me.setHovered(Ct,{useValid:!0}),$e&&Me.setCurrentFrame($e)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(l,Me){var Ze,ut=this,$e={};Me?null===(Ze=Me.views)||void 0===Ze||Ze.forEach(function(Ct){var Ke=Ct.el,Wt=ut.getElementPos(Ke);$e={el:Ke,pos:Wt,component:Me,view:(0,Oe.getViewEl)(Ke)},Ke.ownerDocument===ut.currentDoc&&(ut.elHovered=$e),ut.updateToolsLocal($e)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(Ct){var Ke=Ct.view,Wt=Ke&&Ke.getToolsEl();Wt&&ut.toggleToolsEl(0,0,{el:Wt})}))},onSelect:function(){var l=this.em,Me=l.getSelected(),Ze=l.getCurrentFrame(),ut=Me&&Me.getView(Ze?.model),$e=ut&&ut.el,Ct={};$e&&(0,Ce.zN)($e)&&(Ct={el:$e,pos:this.getElementPos($e),component:Me,view:(0,Oe.getViewEl)($e)}),this.elSelected=Ct,this.updateToolsGlobal(),this.updateLocalPos(Ct),this.initResize(Me)},updateGlobalPos:function(){var l=this.getElSelected();l.el&&(l.pos=this.getElementPos(l.el),this.updateToolsGlobal())},updateLocalPos:function(l){var Me=this.getElHovered();Me.el&&(Me.pos=this.getElementPos(Me.el),this.updateToolsLocal(l))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(l,Me,Ze){void 0===Ze&&(Ze={});var ut=Ze.el||this.canvas.getToolsEl(Me);return ut&&(ut.style.display=l?"":"none"),ut||{}},showElementOffset:function(l,Me,Ze){void 0===Ze&&(Ze={}),ge&&this.editor.runCommand("show-offset",{el:l,elPos:Me,view:Ze.view,force:1,top:0,left:0})},hideElementOffset:function(l){this.editor.stopCommand("show-offset",{view:l})},showFixedElementOffset:function(l,Me){this.editor.runCommand("show-offset",{el:l,elPos:Me,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(l){this.canvas.getHighlighter(l).style.opacity=0},onClick:function(l){l.stopPropagation(),l.preventDefault();var Me=this.em;if(Me.get("_cmpDrag"))return Me.set("_cmpDrag");var Ze=l.target,ut=(0,Oe.getComponentModel)(Ze);if(!ut)for(var $e=Ze.parentNode;!ut&&$e&&!(0,Ce.ZQ)($e);)ut=(0,Oe.getComponentModel)($e),$e=$e.parentNode;if(ut){if(Me.isEditing()&&(!ut.get("textable")&&ut.isChildOf("text")||Me.getEditing()!==ut))return;this.select(ut,l)}},select:function(l,Me){if(void 0===Me&&(Me={}),l){var Ze=this.em;Ze.setSelected(l,{event:Me,useValid:!0}),this.initResize(Ze.getSelected())}},updateBadge:function(l,Me,Ze){void 0===Ze&&(Ze={});var ut=this.canvas,$e=(0,Oe.getComponentModel)(l),Ct=this.getBadge(Ze),Ke=Ct.style;if($e&&$e.get("badgable")){if(!Ze.posOnly){var Wt=this.canvas.getConfig(),mr=$e.getIcon(),Kr="".concat(Wt.pStylePrefix||"","badge"),Pn=Wt.customBadgeLabel,Kn="".concat(mr?'<div class="'.concat(Kr,'__icon">').concat(mr,"</div>"):"",'\n        <div class="').concat(Kr,'__name">').concat($e.getName(),"</div>");Ct.innerHTML=Pn?Pn($e):Kn}Ke.display="block";var mo=ut.getTargetToElementFixed(l,Ct,{pos:Me}).top,No=Ze.leftOff<0?-Ze.leftOff:0;Ke.top=mo+"px",Ke.left=No+"px"}else Ke.display="none"},showHighlighter:function(l){this.canvas.getHighlighter(l).style.opacity=""},initResize:function(l){var Me=this.em,Ze=this.canvas,ut=Me.Editor,$e=!(0,H.isElement)(l)&&(0,Ce.GW)(l)?l:Me.getSelected(),Ct=$e?.get("resizable"),Ke=je.F.Resize,Wt=Ze.hasCustomSpot(Ke);if(Ze.removeSpots({type:Ke}),$e&&Ct){Ze.addSpot({type:Ke,component:$e});var mr,nr=(0,H.isElement)(l)?l:$e.getEl(),Kr=(0,Oe.isObject)(Ct)?Ct:{},Pn=Kr.onStart,Kn=void 0===Pn?function(){}:Pn,Mo=Kr.onMove,mo=void 0===Mo?function(){}:Mo,No=Kr.onEnd,Di=void 0===No?function(){}:No,ci=Kr.updateTarget,zn=void 0===ci?function(){}:ci,Wn=function(l,Me){var Ze={};for(var ut in l)Object.prototype.hasOwnProperty.call(l,ut)&&Me.indexOf(ut)<0&&(Ze[ut]=l[ut]);if(null!=l&&"function"==typeof Object.getOwnPropertySymbols){var $e=0;for(ut=Object.getOwnPropertySymbols(l);$e<ut.length;$e++)Me.indexOf(ut[$e])<0&&Object.prototype.propertyIsEnumerable.call(l,ut[$e])&&(Ze[ut[$e]]=l[ut[$e]])}return Ze}(Kr,["onStart","onMove","onEnd","updateTarget"]);if(Wt||!nr||this.activeResizer)return;var lr="".concat(Me.config.stylePrefix||"","resizing"),Pr=this,Mn={component:$e,el:nr},dn=function(kn,xo,Vo){var aa=Vo.docs;aa&&aa.forEach(function(Fa){var Qr=Fa.body,ze=Qr.className||"";Qr.className=("add"==kn?"".concat(ze," ").concat(lr):ze.replace(lr,"")).trim()})},sn=Le({onStart:function(kn,xo){Kn(kn,xo);var Vo=xo.el,aa=xo.config,Fa=xo.resizer,Qr=aa.keyHeight,ze=aa.keyWidth,Xe=aa.currentUnit,at=aa.keepAutoHeight,gr=aa.keepAutoWidth;dn("add",0,xo),mr=Me.Styles.getModelToStyle($e);var Pt=getComputedStyle(Vo),mt=mr.getStyle(),Zt=mt[ze];aa.autoWidth=gr&&"auto"===Zt,isNaN(parseFloat(Zt))&&(Zt=Pt[ze]);var ln=mt[Qr];aa.autoHeight=at&&"auto"===ln,isNaN(parseFloat(ln))&&(ln=Pt[Qr]),Fa.startDim.w=parseFloat(Zt),Fa.startDim.h=parseFloat(ln),ge=!1,Xe&&(aa.unitHeight=(0,Oe.getUnitFromValue)(ln),aa.unitWidth=(0,Oe.getUnitFromValue)(Zt)),Pr.activeResizer=!0,ut.trigger("component:resize",Le(Le({},Mn),{type:"start"}))},onMove:function(kn){mo(kn),ut.trigger("component:resize",Le(Le({},Mn),{type:"move"}))},onEnd:function(kn,xo){Di(kn,xo),dn("remove",0,xo),ut.trigger("component:resize",Le(Le({},Mn),{type:"end"})),ge=!0,Pr.activeResizer=!1},updateTarget:function(kn,xo,Vo){var aa;if(zn(kn,xo,Vo),mr){var Fa=Vo.store,Qr=Vo.selectedHandler,ze=Vo.config,Xe=ze.keyHeight,at=ze.keyWidth,gr=ze.autoHeight,Pt=ze.autoWidth,mt=ze.unitWidth,Zt=ze.unitHeight,ln=["tc","bc"].indexOf(Qr)>=0,no=["cl","cr"].indexOf(Qr)>=0,oo={};if(!ln){var Ki=(null===(aa=Ze.getBody())||void 0===aa?void 0:aa.offsetWidth)||0;oo[at]=Pt?"auto":"".concat(xo.w<Ki?xo.w:Ki).concat(mt)}no||(oo[Xe]=gr?"auto":"".concat(xo.h).concat(Zt)),Me.getDragMode($e)&&(oo.top="".concat(xo.t).concat(Zt),oo.left="".concat(xo.l).concat(mt));var ts=Le(Le({},oo),{__p:!Fa});mr.addStyle(ts,{avoidStore:!Fa}),Me.Styles.__emitCmpStyleUpdate(ts,{components:Me.getSelected()})}}},Wn);this.resizer=ut.runCommand("resize",{el:nr,options:sn,force:1})}else{if(Wt)return;ut.stopCommand("resize"),this.resizer=null}},updateToolbar:function(l){var Me=this.canvas,Ze=this.config.em,ut=l===Ze?Ze.getSelected():l,$e=Me.getToolbarEl(),Ct=$e.style,Ke=ut.get("toolbar"),Wt=Ze.config.showToolbar,mr=!Me.hasCustomSpot(je.F.Select);if(ut&&Wt&&Ke&&Ke.length&&mr){if(Ct.display="",!this.toolbar){$e.innerHTML="",this.toolbar=new N(Ke);var nr=new Te({collection:this.toolbar,em:Ze});$e.appendChild(nr.render().el)}this.toolbar.reset(Ke),Ct.top="-100px",Ct.left="0"}else Ct.display="none"},updateToolbarPos:function(l){var Ze=this.canvas.getToolbarEl().style;Ze.top="".concat(l.top).concat("px"),Ze.left="".concat(l.left).concat("px"),Ze.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(l){return void 0===l&&(l={}),this.canvas.getBadgeEl(l.view)},onCanvasScroll:function(l){this.onFrameScroll(l),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(l){return l&&"selected"===l.get("status")},updateToolsLocal:function(l){var Me=this.em.getConfig(),Ze=l||this.getElHovered(),ut=Ze.el,$e=Ze.pos,Ct=Ze.view,Ke=Ze.component;if(ut){var Wt=Ke.get("hoverable"),mr=this.lastHovered!==ut,nr=mr?{}:{posOnly:1},Kr=this.canvas.hasCustomSpot(je.F.Hover);mr&&Wt&&(this.lastHovered=ut,Kr?this.hideHighlighter(Ct):this.showHighlighter(Ct),this.showElementOffset(ut,$e,{view:Ct})),this.isCompSelected(Ke)&&(this.hideHighlighter(Ct),!Me.showOffsetsSelected&&this.hideElementOffset(Ct));var Kn=this.toggleToolsEl(1,Ct),Mo=Kn.style,mo=this.canvas.canvasRectOffset(ut,$e),No=mo.top,Di=mo.left;!Kr&&this.updateBadge(ut,$e,Le(Le({},nr),{view:Ct,topOff:No,leftOff:Di})),Mo.top=No+"px",Mo.left=Di+"px",Mo.width=$e.width+"px",Mo.height=$e.height+"px",this._trgToolUp("local",{component:Ke,el:Kn,top:No,left:Di,width:$e.width,height:$e.height})}else this.lastHovered=0},_upToolbar:(0,H.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(l,Me){void 0===Me&&(Me={}),this.em.trigger("canvas:tools:update",Le({type:l},Me))},updateToolsGlobal:function(l){void 0===l&&(l={});var Me=this.getElSelected(),Ze=Me.el,ut=Me.pos,$e=Me.component;if(!Ze)return this.toggleToolsEl(),void(this.lastSelected=0);var Ct=this.canvas;(this.lastSelected!==Ze||l.force)&&(this.lastSelected=Ze,this.updateToolbar($e));var Wt=this.toggleToolsEl(1),mr=Wt.style,nr=Ct.getTargetToElementFixed(Ze,Ct.getToolbarEl(),{pos:ut}),Kr=nr.canvasOffsetTop,Pn=nr.canvasOffsetLeft;mr.top=Kr+"px",mr.left=Pn+"px",mr.width=ut.width+"px",mr.height=ut.height+"px",this.updateToolbarPos({top:nr.top,left:nr.left}),this._trgToolUp("global",{component:$e,el:Wt,top:Kr,left:Pn,width:ut.width,height:ut.height})},updateAttached:(0,H.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,H.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(l){return this.canvas.getCanvasView().getElementPos(l,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(l){l&&l.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(l){(0,Oe.hasWin)()&&(this.editor=l&&l.get("Editor"),this.enable())},stop:function(l,Me,Ze){if(void 0===Ze&&(Ze={}),(0,Oe.hasWin)()){var ut=this.em,$e=this.editor;this.onHovered(),this.stopSelectComponent(),!Ze.preserveSelected&&ut.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),$e&&$e.stopCommand("resize")}}}},2983:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>D});var z=x(6411),H=x(6778),G=x(2128);const D={startSelectPosition:function(U,R,T){void 0===T&&(T={}),this.isPointed=!1;var N=this.em.Utils;N&&(this.sorter=new N.ComponentSorter({em:this.em,treeClass:H.A,containerContext:{container:U[0].ownerDocument.body,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:R,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:G.A.BothDirections,nested:!0}})),T.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=T.onStart),U&&U.length>0&&this.sorter.startSort(U.map(function(Y){return{element:Y}}))},getOffsetDim:function(){var U=this.offset(this.canvas.getFrameEl()),R=this.offset(this.canvas.getElement());return{top:U.top-R.top,left:U.left-R.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex="after"==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&"after"==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?(0,z.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,z.default)(this.cDim[this.posIndex][5]).parent():(0,z.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(U,R,T){var N=U||0,Y=T.length,ee=0!==Y&&"after"==(R||"before")&&N==Y;return 0!==Y&&(!ee&&!T[N][4]||T[N-1]&&!T[N-1][4]||ee&&!T[N-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},9490:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>U});var z=x(5706),H=x(2820),G=x(6411),D=function(){return D=Object.assign||function(R){for(var T,N=1,L=arguments.length;N<L;N++)for(var Y in T=arguments[N])Object.prototype.hasOwnProperty.call(T,Y)&&(R[Y]=T[Y]);return R},D.apply(this,arguments)};const U={getOffsetMethod:function(R){return"get"+(R||"")+"OffsetViewerEl"},run:function(R,T,N){var L=this.canvas,Y=N||{},ee=Y.state||"",te=R.getConfig(),pe=this.em.getZoomDecimal(),we=Y.el;if(te.showOffsets&&we instanceof HTMLElement&&(te.showOffsetsSelected||"Fixed"!=ee)){if(!L.hasCustomSpot(H.F.Spacing)){var Te=D({},Y.elPos||L.getElementPos(we));(0,z.isUndefined)(Y.top)||(Te.top=Y.top),(0,z.isUndefined)(Y.left)||(Te.left=Y.left);var ge=window.getComputedStyle(we),Ce=this.ppfx,Oe=ee+"State",je=L[this.getOffsetMethod(ee)](N.view);je.style.opacity="";var Ue=this["marginT"+ee],Le=this["marginB"+ee],ke=this["marginL"+ee],me=this["marginR"+ee],l=this["padT"+ee],Me=this["padB"+ee],Ze=this["padL"+ee],ut=this["padR"+ee];if(je.childNodes.length&&(this[Oe]="1",Ue=je.querySelector("[data-offset-m-t]"),Le=je.querySelector("[data-offset-m-b]"),ke=je.querySelector("[data-offset-m-l]"),me=je.querySelector("[data-offset-m-r]"),l=je.querySelector("[data-offset-p-t]"),Me=je.querySelector("[data-offset-p-b]"),Ze=je.querySelector("[data-offset-p-l]"),ut=je.querySelector("[data-offset-p-r]")),!this[Oe]){var $e=ee.toLowerCase(),Ct=$e+"margin-v",Ke=$e+"padding-v",Wt=(0,G.default)('<div class="'.concat(Ce,'marginName">')).get(0),mr=(0,G.default)('<div class="'.concat(Ce,'paddingName">')).get(0),nr=Ce+Ke+"-el",Kr="".concat(Ce+Ct+"-el"," ").concat(Ce+Ct),Pn="".concat(nr," ").concat(Ce+Ke);Ue=(0,G.default)('<div class="'.concat(Kr,'-top"></div>')).get(0),Le=(0,G.default)('<div class="'.concat(Kr,'-bottom"></div>')).get(0),ke=(0,G.default)('<div class="'.concat(Kr,'-left"></div>')).get(0),me=(0,G.default)('<div class="'.concat(Kr,'-right"></div>')).get(0),l=(0,G.default)('<div class="'.concat(Pn,'-top"></div>')).get(0),Me=(0,G.default)('<div class="'.concat(Pn,'-bottom"></div>')).get(0),Ze=(0,G.default)('<div class="'.concat(Pn,'-left"></div>')).get(0),ut=(0,G.default)('<div class="'.concat(Pn,'-right"></div>')).get(0),this["marginT"+ee]=Ue,this["marginB"+ee]=Le,this["marginL"+ee]=ke,this["marginR"+ee]=me,this["padT"+ee]=l,this["padB"+ee]=Me,this["padL"+ee]=Ze,this["padR"+ee]=ut,Wt.appendChild(Ue),Wt.appendChild(Le),Wt.appendChild(ke),Wt.appendChild(me),mr.appendChild(l),mr.appendChild(Me),mr.appendChild(Ze),mr.appendChild(ut),je.appendChild(Wt),je.appendChild(mr),this[Oe]="1"}var Kn="px",Mo=parseFloat(ge.marginLeft.replace(Kn,""))*pe,mo=parseFloat(ge.marginRight.replace(Kn,""))*pe,No=parseFloat(ge.marginTop.replace(Kn,""))*pe,Di=parseFloat(ge.marginBottom.replace(Kn,""))*pe,ci=Ue.style,zn=Le.style,Wn=ke.style,an=me.style,lr=l.style,Pr=Me.style,Mn=Ze.style,dn=ut.style,sn=parseFloat(Te.left),kn=parseFloat(ge.width)*pe+Kn;ci.height=No+Kn,ci.width=kn,ci.top=Te.top-No+Kn,ci.left=sn+Kn,zn.height=Di+Kn,zn.width=kn,zn.top=Te.top+Te.height+Kn,zn.left=sn+Kn;var xo=Te.height+No+Di+Kn,Vo=Te.top-No+Kn;Wn.height=xo,Wn.width=Mo+Kn,Wn.top=Vo,Wn.left=sn-Mo+Kn,an.height=xo,an.width=mo+Kn,an.top=Vo,an.left=sn+Te.width+Kn;var aa=parseFloat(ge.paddingTop)*pe;lr.height=aa+Kn;var Fa=parseFloat(ge.paddingBottom)*pe;Pr.height=Fa+Kn;var Qr=Te.height-Fa-aa+Kn,ze=Te.top+aa+Kn;Mn.height=Qr,Mn.width=parseFloat(ge.paddingLeft)*pe+Kn,Mn.top=ze;var Xe=parseFloat(ge.paddingRight)*pe;dn.height=Qr,dn.width=Xe+Kn,dn.top=ze}}else R.stopCommand("".concat(this.id),N)},stop:function(R,T,N){void 0===N&&(N={});var Y=this.getOffsetMethod((N||{}).state||"");this.canvas[Y](N.view).style.opacity=0}}},1396:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>G});var z=x(5706),H=x(9195);const G={init:function(){(0,z.bindAll)(this,"_onFramesChange")},run:function(D){this.toggleVis(D,!0)},stop:function(D){this.toggleVis(D,!1)},toggleVis:function(D,U){if(void 0===U&&(U=!0),!D.Commands.isActive("preview")){var R=D.Canvas,T=U?"on":"off";R.getModel()[T]("change:frames",this._onFramesChange),this.handleFrames(R.getFrames(),U)}},handleFrames:function(D,U){var R=this;D.forEach(function(T){var N;!(null===(N=T.view)||void 0===N)&&N.loaded&&R._upFrame(T,U),T.__ol||(T.on("loaded",function(){return R._upFrame(T)}),T.__ol=!0)})},_onFramesChange:function(D,U){this.handleFrames(U)},_upFrame:function(D,U){var R,T=this,N=T.ppfx,L=T.em,Y=T.id,ee=((0,H.isDef)(U)?U:L.Commands.isActive(Y))?"add":"remove",te="".concat(N,"dashed");null===(R=D.view)||void 0===R||R.getBody().classList[ee](te)}}},1749:(m,X,x)=>{"use strict";x.d(X,{Kx:()=>N,Ss:()=>Y,e2:()=>T,lK:()=>ee,pM:()=>L,x2:()=>H});var z,H,te,G=x(4193),D=x.n(G),U=(z=function(te,pe){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(we,Te){we.__proto__=Te}||function(we,Te){for(var ge in Te)Object.prototype.hasOwnProperty.call(Te,ge)&&(we[ge]=Te[ge])})(te,pe)},function(te,pe){if("function"!=typeof pe&&null!==pe)throw new TypeError("Class extends value "+String(pe)+" is not a constructor or null");function we(){this.constructor=te}z(te,pe),te.prototype=null===pe?Object.create(pe):(we.prototype=pe.prototype,new we)}),R=function(){return R=Object.assign||function(te){for(var pe,we=1,Te=arguments.length;we<Te;we++)for(var ge in pe=arguments[we])Object.prototype.hasOwnProperty.call(pe,ge)&&(te[ge]=pe[ge]);return te},R.apply(this,arguments)},T="add remove reset change",N=function(te){function pe(){return null!==te&&te.apply(this,arguments)||this}return U(pe,te),pe}(D().Model),L=function(te){function pe(){return null!==te&&te.apply(this,arguments)||this}return U(pe,te),pe}(D().Collection),Y=function(te){function pe(){return null!==te&&te.apply(this,arguments)||this}return U(pe,te),pe}(D().View);(te=H||(H={})).Screen="screen",te.World="world";var ee={x:0,y:0};R(R({},ee),{width:0,height:0})},3172:(m,X,x)=>{"use strict";var z,H,G;x.d(X,{I:()=>H,t:()=>z}),(G=z||(z={})).remove="component:remove",G.add="component:add",G.move="component:move",function(G){G.add="component:add",G.remove="component:remove",G.removeBefore="component:remove:before",G.removed="component:removed",G.create="component:create",G.update="component:update",G.updateInside="component:update-inside",G.select="component:select",G.selectBefore="component:select:before",G.scriptMount="component:script:mount",G.scriptMountBefore="component:script:mount:before",G.scriptUnmount="component:script:unmount",G.render="component:render",G.symbolMainAdd="symbol:main:add",G.symbolMainUpdate="symbol:main:update",G.symbolMainUpdateDeep="symbol:main:update-deep",G.symbolMainRemove="symbol:main:remove",G.symbolMain="symbol:main",G.symbolInstanceAdd="symbol:instance:add",G.symbolInstanceRemove="symbol:instance:remove",G.symbolInstance="symbol:instance",G.symbol="symbol"}(H||(H={}))},91:(m,X,x)=>{"use strict";x.d(X,{A:()=>R});var z,H=x(5706),G=x(1749),D=(z=function(T,N){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,Y){L.__proto__=Y}||function(L,Y){for(var ee in Y)Object.prototype.hasOwnProperty.call(Y,ee)&&(L[ee]=Y[ee])})(T,N)},function(T,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function L(){this.constructor=T}z(T,N),T.prototype=null===N?Object.create(N):(L.prototype=N.prototype,new L)}),U=function(T){function N(L,Y,ee){void 0===L&&(L={}),void 0===ee&&(ee=!1);var te=T.call(this,L)||this;return te.itemsView="",te.itemType="type",te.reuseView=!1,te.config=Y||L.config||{},ee&&te.listenTo(te.collection,"add",te.addTo),te.items=[],te}return D(N,T),N.prototype.addTo=function(L){this.add(L)},N.prototype.itemViewNotFound=function(L){var ee=this.ns,te=this.config.em,pe="".concat(ee?"[".concat(ee,"]: "):"","'").concat(L,"' type not found");te&&te.logWarning(pe)},N.prototype.add=function(L,Y){var ee,pe=this.config,we=this.reuseView,Te=this.items,ge=this.itemsView||{},Ce=Y||null,Oe=this.itemView,je=L.get(this.itemType);ge[je]?Oe=ge[je]:!je||ge[je]||(0,H.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],je)||this.itemViewNotFound(je),ee=L.view&&we?L.view:new Oe({model:L,config:pe},pe),Te&&Te.push(ee);var Ue=ee.render().el;Ce?Ce.appendChild(Ue):this.$el.append(Ue)},N.prototype.render=function(){var L=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(Y){this.add(Y,L)},this),this.$el.append(L),this.onRender(),this},N.prototype.onRender=function(){},N.prototype.onRemoveBefore=function(L,Y){},N.prototype.onRemove=function(L,Y){},N.prototype.remove=function(L){void 0===L&&(L={});var Y=this.items;return this.onRemoveBefore(Y,L),this.clearItems(),T.prototype.remove.call(this),this.onRemove(Y,L),this},N.prototype.clearItems=function(){},N}(G.Ss);const R=U;U.prototype.itemView=""},5633:(m,X,x)=>{"use strict";x.d(X,{A:()=>U});var z=x(5706),H=x(2097),G=function(){return G=Object.assign||function(R){for(var T,N=1,L=arguments.length;N<L;N++)for(var Y in T=arguments[N])Object.prototype.hasOwnProperty.call(T,Y)&&(R[Y]=T[Y]);return R},G.apply(this,arguments)},D=["x","y"];const U=function(){function R(T){return void 0===T&&(T={}),this.opts={snapOffset:5,scale:1},(0,z.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(T),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return R.prototype.setOptions=function(T){void 0===T&&(T={}),this.opts=G(G({},this.opts),T)},R.prototype.toggleDrag=function(T){var N=this.getDocumentEl(),L=this.getContainerEl(),Y=this.getWindowEl(),ee=T?"on":"off",te={on:H.on,off:H.AU};te[ee](L,"mousemove dragover",this.drag),te[ee](N,"mouseup dragend touchend",this.stop),te[ee](N,"keydown",this.keyHandle),te[ee](Y,"scroll",this.handleScroll)},R.prototype.handleScroll=function(){var T=this.lastScroll,N=this.delta,L=this.getScrollInfo(),Y={x:L.x-T.x,y:L.y-T.y};this.move(N.x+Y.x,N.y+Y.y),this.lastScrollDiff=Y},R.prototype.start=function(T){var N=this.opts,L=N.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(T),this.guidesStatic=(0,z.result)(N,"guidesStatic")||[],this.guidesTarget=(0,z.result)(N,"guidesTarget")||[],(0,z.isFunction)(L)&&L(T,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(T)},R.prototype.drag=function(T){var N=this,L=this,Y=L.opts,ee=L.lastScrollDiff,te=L.globScrollDiff,pe=Y.onDrag,we=this.startPointer,Te=this.getPointerPos(T),ge={x:te.x+ee.x,y:te.y+ee.y};this.globScrollDiff=ge;var Ce={x:Te.x-we.x+ge.x,y:Te.y-we.y+ge.y};this.lastScrollDiff={x:0,y:0};var Oe=this.lockedAxis;"x"===(Oe=T.shiftKey?!Oe&&this.detectAxisLock(Ce.x,Ce.y):null)?Ce.x=we.x:"y"===Oe&&(Ce.y=we.y);var je=function(Me){D.forEach(function(Ze){return Me[Ze]=Me[Ze]*(0,z.result)(Y,"scale")}),N.delta=Me,N.move(Me.x,Me.y),(0,z.isFunction)(pe)&&pe(T,N)},Ue=G({},Ce);if(this.currentPointer=Te,this.lockedAxis=Oe,this.lastScroll=this.getScrollInfo(),je(Ce),this.guidesTarget.length){var Le=this.snapGuides(Ue);(Le.trgX||Le.trgY)&&je(Le.newDelta)}0===T.which&&this.stop(T)},R.prototype.snapGuides=function(T){var N=this,L=T,Y=this.trgX,ee=this.trgY;return this.guidesTarget.forEach(function(te){te.x&&N.trgX||te.y&&N.trgY||(te.active=!1,N.guidesStatic.forEach(function(pe){if(!(te.y&&pe.x||te.x&&pe.y)){var we=te.y&&pe.y,Te=we?"y":"x",ge=te[Te],Ce=pe[Te],Oe=T[Te],je=we?ee:Y;N.isPointIn(ge,Ce)&&(0,z.isUndefined)(je)&&N.setGuideLock(te,Oe-(ge-Ce))}}))}),Y=this.trgX,ee=this.trgY,D.forEach(function(te){var pe=te.toUpperCase(),we=N["trg".concat(pe)];we&&!N.isPointIn(T[te],we.lock)&&(N.setGuideLock(we,null),we=null),we&&!(0,z.isUndefined)(we.lock)&&(L[te]=we.lock)}),{newDelta:L,trgX:this.trgX,trgY:this.trgY}},R.prototype.isPointIn=function(T,N,L){var Y=(void 0===L?{}:L).offset||this.opts.snapOffset||0;return T>=N&&T<=N+Y||T<=N&&T>=N-Y},R.prototype.setGuideLock=function(T,N){var L=(0,z.isUndefined)(T.x)?"Y":"X",Y="trg".concat(L);return null!==N?(T.active=!0,T.lock=N,this[Y]=T):(delete T.active,delete T.lock,delete this[Y]),T},R.prototype.stop=function(T,N){void 0===N&&(N={});var L=this.delta,Y=!!N.cancel,ee=Y?0:L.x,te=Y?0:L.y;this.toggleDrag(),this.lockedAxis=null,this.move(ee,te,!0);var pe=this.opts.onEnd;(0,z.isFunction)(pe)&&pe(T,this,{cancelled:Y})},R.prototype.keyHandle=function(T){(0,H.v$)(T)&&this.stop(T,{cancel:!0})},R.prototype.move=function(T,N,L){var Y=this.el,te=this.startPosition;if(te){var pe=this.opts.setPosition,we=te.x+T,Te=te.y+N;this.position={x:we,y:Te,end:L},(0,z.isFunction)(pe)&&pe(this.position),Y&&(Y.style.left="".concat(we,"px"),Y.style.top="".concat(Te,"px"))}},R.prototype.getContainerEl=function(){var T=this.opts.container;return T?[T]:this.getDocumentEl()},R.prototype.getWindowEl=function(){return this.getContainerEl().map(function(T){var N=T.ownerDocument||T;return N.defaultView||N.parentWindow})},R.prototype.getDocumentEl=function(T){var N=this.opts.doc;if(T=T||this.el,!this.docs.length){var L=[document];T&&L.push(T.ownerDocument),N&&L.push(N),this.docs=L}return this.docs},R.prototype.getPointerPos=function(T){var N=this.opts.getPointerPosition,L=(0,H.G2)(T);return N?N(T):{x:L.clientX,y:L.clientY}},R.prototype.getStartPosition=function(){var T=this.el,N=this.opts.getPosition,L={x:0,y:0};return(0,z.isFunction)(N)?L=N():T&&(L={x:parseFloat(T.style.left),y:parseFloat(T.style.top)}),L},R.prototype.getScrollInfo=function(){var T=this.opts.doc,N=T&&T.body;return{y:N?N.scrollTop:0,x:N?N.scrollLeft:0}},R.prototype.detectAxisLock=function(T,N){var L=T,Y=N,ee=Math.abs(L),te=Math.abs(Y);return Y>=ee||Y<=-ee?"x":L>te||L<-te?"y":void 0},R}()},6411:(m,X,x)=>{"use strict";x.r(X),x.d(X,{default:()=>ts});var z=typeof document<"u"?document:null,H=typeof window<"u"?window:null,G=Array.prototype,D=G.filter,U=G.indexOf,R=G.map,T=G.push,N=G.reverse,L=G.slice,ee=/^#[\w-]*$/,te=/^\.[\w-]*$/,pe=/<.+>/,we=/^\w+$/;function Te(Nt,jt){return void 0===jt&&(jt=z),te.test(Nt)?jt.getElementsByClassName(Nt.slice(1)):we.test(Nt)?jt.getElementsByTagName(Nt):jt.querySelectorAll(Nt)}function ge(Nt,jt){if(void 0===jt&&(jt=z),Nt){if(Nt.__cash)return Nt;var gt=Nt;if(Ze(Nt)){if(jt.__cash&&(jt=jt[0]),!(gt=ee.test(Nt)?jt.getElementById(Nt.slice(1)):pe.test(Nt)?oo(Nt):Te(Nt,jt)))return}else if(Me(Nt))return this.ready(Nt);(gt.nodeType||gt===H)&&(gt=[gt]),this.length=gt.length;for(var Fr=0,tr=this.length;Fr<tr;Fr++)this[Fr]=gt[Fr]}}function Ce(Nt,jt){return new ge(Nt,jt)}var Oe=Ce.fn=Ce.prototype=ge.prototype={constructor:Ce,__cash:!0,length:0,splice:G.splice};Oe.get=function(Nt){return void 0===Nt?L.call(this):this[Nt<0?Nt+this.length:Nt]},Oe.eq=function(Nt){return Ce(this.get(Nt))},Oe.first=function(){return this.eq(0)},Oe.last=function(){return this.eq(-1)},Oe.map=function(Nt){return Ce(R.call(this,function(jt,gt){return Nt.call(jt,gt,jt)}))},Oe.slice=function(){return Ce(L.apply(this,arguments))};var je=/(?:^\w|[A-Z]|\b\w)/g,Ue=/[\s-_]+/g;function Le(Nt){return Nt.replace(je,function(jt,gt){return jt[gt?"toUpperCase":"toLowerCase"]()}).replace(Ue,"")}function ke(Nt,jt){for(var gt=0,Fr=Nt.length;gt<Fr&&!1!==jt.call(Nt[gt],Nt[gt],gt,Nt);gt++);}Ce.camelCase=Le,Ce.each=ke,Oe.each=function(Nt){return ke(this,function(jt,gt){return Nt.call(jt,gt,jt)}),this},Oe.removeProp=function(Nt){return this.each(function(jt,gt){delete gt[Nt]})},Ce.extend=Oe.extend=function(Nt){void 0===Nt&&(Nt=this);for(var jt=arguments,gt=jt.length,Fr=gt<2?0:1;Fr<gt;Fr++)for(var tr in jt[Fr])Nt[tr]=jt[Fr][tr];return Nt};var me=1;function l(Nt,jt){var gt=Nt&&(Nt.matches||Nt.webkitMatchesSelector||Nt.mozMatchesSelector||Nt.msMatchesSelector||Nt.oMatchesSelector);return!!gt&&gt.call(Nt,jt)}function Me(Nt){return"function"==typeof Nt}function Ze(Nt){return"string"==typeof Nt}function ut(Nt){return!isNaN(parseFloat(Nt))&&isFinite(Nt)}Ce.guid=me,Ce.matches=l,Ce.isFunction=Me,Ce.isString=Ze,Ce.isNumeric=ut;var $e=Array.isArray;function Ct(Nt){return Ze(Nt)?function(jt,gt){return l(gt,Nt)}:Nt.__cash?function(jt,gt){return Nt.is(gt)}:function(jt,gt,Fr){return gt===Fr}}Ce.isArray=$e,Oe.prop=function(Nt,jt){if(Nt){if(Ze(Nt))return arguments.length<2?this[0]&&this[0][Nt]:this.each(function(Fr,tr){tr[Nt]=jt});for(var gt in Nt)this.prop(gt,Nt[gt]);return this}},Oe.filter=function(Nt){if(!Nt)return Ce();var jt=Me(Nt)?Nt:Ct(Nt);return Ce(D.call(this,function(gt,Fr){return jt.call(gt,Fr,gt,Nt)}))};var Ke=/\S+/g;function Wt(Nt){return Ze(Nt)&&Nt.match(Ke)||[]}function mr(Nt){return Nt.filter(function(jt,gt,Fr){return Fr.indexOf(jt)===gt})}function nr(Nt,jt,gt){if(1===Nt.nodeType){var Fr=H.getComputedStyle(Nt,null);return jt?gt?Fr.getPropertyValue(jt):Fr[jt]:Fr}}function Kr(Nt,jt){return parseInt(nr(Nt,jt),10)||0}Oe.hasClass=function(Nt){var jt=Wt(Nt),gt=!1;return jt.length&&this.each(function(Fr,tr){return!(gt=tr.classList.contains(jt[0]))}),gt},Oe.removeAttr=function(Nt){var jt=Wt(Nt);return jt.length?this.each(function(gt,Fr){ke(jt,function(tr){Fr.removeAttribute(tr)})}):this},Oe.attr=function(Nt,jt){if(Nt){if(Ze(Nt)){if(arguments.length<2){if(!this[0])return;var gt=this[0].getAttribute(Nt);return null===gt?void 0:gt}return null===jt?this.removeAttr(Nt):this.each(function(tr,wt){wt.setAttribute(Nt,jt)})}for(var Fr in Nt)this.attr(Fr,Nt[Fr]);return this}},Oe.toggleClass=function(Nt,jt){var gt=Wt(Nt),Fr=void 0!==jt;return gt.length?this.each(function(tr,wt){ke(gt,function(St){Fr?jt?wt.classList.add(St):wt.classList.remove(St):wt.classList.toggle(St)})}):this},Oe.addClass=function(Nt){return this.toggleClass(Nt,!0)},Oe.removeClass=function(Nt){return arguments.length?this.toggleClass(Nt,!1):this.attr("class","")},Ce.unique=mr,Oe.add=function(Nt,jt){return Ce(mr(this.get().concat(Ce(Nt,jt).get())))};var Pn=/^--/;function Kn(Nt){return Pn.test(Nt)}var Mo={},mo=z&&z.createElement("div"),No=mo?mo.style:{},Di=["webkit","moz","ms","o"];function ci(Nt,jt){if(void 0===jt&&(jt=Kn(Nt)),jt)return Nt;if(!Mo[Nt]){var gt=Le(Nt),Fr=""+gt.charAt(0).toUpperCase()+gt.slice(1);ke((gt+" "+Di.join(Fr+" ")+Fr).split(" "),function(tr){if(tr in No)return Mo[Nt]=tr,!1})}return Mo[Nt]}Ce.prefixedProp=ci;var zn={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Wn(Nt,jt,gt){return void 0===gt&&(gt=Kn(Nt)),gt||zn[Nt]||!ut(jt)?jt:jt+"px"}Oe.css=function(Nt,jt){if(Ze(Nt)){var gt=Kn(Nt);return Nt=ci(Nt,gt),arguments.length<2?this[0]&&nr(this[0],Nt,gt):Nt?(jt=Wn(Nt,jt,gt),this.each(function(tr,wt){1===wt.nodeType&&(gt?wt.style.setProperty(Nt,jt):wt.style[Nt]=jt)})):this}for(var Fr in Nt)this.css(Fr,Nt[Fr]);return this};var an="__cashData",lr=/^data-(.*)/;function Pr(Nt){return Nt[an]=Nt[an]||{}}function Mn(Nt,jt){var gt=Pr(Nt);if(jt){if(!(jt in gt)){var Fr=Nt.dataset?Nt.dataset[jt]||Nt.dataset[Le(jt)]:Ce(Nt).attr("data-"+jt);if(void 0!==Fr){try{Fr=JSON.parse(Fr)}catch{}gt[jt]=Fr}}return gt[jt]}return gt}function dn(Nt,jt){return Kr(Nt,"border"+(jt?"Left":"Top")+"Width")+Kr(Nt,"padding"+(jt?"Left":"Top"))+Kr(Nt,"padding"+(jt?"Right":"Bottom"))+Kr(Nt,"border"+(jt?"Right":"Bottom")+"Width")}function sn(Nt,jt){for(var gt=0,Fr=jt.length;gt<Fr;gt++)if(Nt.indexOf(jt[gt])<0)return!1;return!0}function kn(Nt,jt,gt){ke(Nt[gt],function(Fr){jt.removeEventListener(gt,Fr[1])}),delete Nt[gt]}Ce.hasData=function(Nt){return an in Nt},Oe.data=function(Nt,jt){var gt=this;if(!Nt)return this[0]?(ke(this[0].attributes,function(tr){var wt=tr.name.match(lr);wt&&gt.data(wt[1])}),Mn(this[0])):void 0;if(Ze(Nt))return void 0===jt?this[0]&&Mn(this[0],Nt):this.each(function(tr,wt){return vr=Nt,fn=jt,void(Pr(wt)[vr]=fn);var vr,fn});for(var Fr in Nt)this.data(Fr,Nt[Fr]);return this},Oe.removeData=function(Nt){return this.each(function(jt,gt){return Fr=gt,void(void 0===(tr=Nt)?delete Fr[an]:delete Pr(Fr)[tr]);var Fr,tr})},ke(["Width","Height"],function(Nt){Oe["inner"+Nt]=function(){if(this[0])return this[0]===H?H["inner"+Nt]:this[0]["client"+Nt]}}),ke(["width","height"],function(Nt,jt){Oe[Nt]=function(gt){return this[0]?arguments.length?(gt=parseInt(gt,10),this.each(function(Fr,tr){if(1===tr.nodeType){var wt=nr(tr,"boxSizing");tr.style[Nt]=Wn(Nt,gt+("border-box"===wt?dn(tr,!jt):0))}})):this[0]===H?this[0][Le("outer-"+Nt)]:this[0].getBoundingClientRect()[Nt]-dn(this[0],!jt):void 0===gt?void 0:this}}),ke(["Width","Height"],function(Nt,jt){Oe["outer"+Nt]=function(gt){if(this[0])return this[0]===H?H["outer"+Nt]:this[0]["offset"+Nt]+(gt?Kr(this[0],"margin"+(jt?"Top":"Left"))+Kr(this[0],"margin"+(jt?"Bottom":"Right")):0)}});var xo="__cashEvents";function aa(Nt){return Nt[xo]=Nt[xo]||{}}function Fa(Nt){var jt=Nt.split(".");return[jt[0],jt.slice(1).sort()]}function Qr(Nt,jt,gt,Fr){var tr=aa(Nt);if(jt){var wt=tr[jt];if(!wt)return;Fr&&(Fr.guid=Fr.guid||me++),tr[jt]=wt.filter(function(St){var fn=St[1];if(Fr&&fn.guid!==Fr.guid||!sn(St[0],gt))return!0;Nt.removeEventListener(jt,fn)})}else if(gt&&gt.length)for(jt in tr)Qr(Nt,jt,gt,Fr);else for(jt in tr)kn(tr,Nt,jt)}Oe.off=function(Nt,jt){var gt=this;return void 0===Nt?this.each(function(Fr,tr){return Qr(tr)}):ke(Wt(Nt),function(Fr){var tr=Fa(Fr),wt=tr[0],St=tr[1];gt.each(function(vr,fn){return Qr(fn,wt,St,jt)})}),this},Oe.on=function(Nt,jt,gt,Fr){var tr=this;if(!Ze(Nt)){for(var wt in Nt)this.on(wt,jt,Nt[wt]);return this}return Me(jt)&&(gt=jt,jt=!1),ke(Wt(Nt),function(St){var vr=Fa(St),fn=vr[0],Ko=vr[1];tr.each(function(Ro,Ln){var yr=function kr(or){if(!or.namespace||sn(Ko,or.namespace.split("."))){var Tr=Ln;if(jt){for(var ht=or.target;!l(ht,jt);)if(ht===Ln||!(ht=ht.parentNode))return;Tr=ht}or.namespace=or.namespace||"";var Lt=gt.call(Tr,or,or.data);Fr&&Qr(Ln,fn,Ko,kr),!1===Lt&&(or.preventDefault(),or.stopPropagation())}};yr.guid=gt.guid=gt.guid||me++,function(kr,or,Tr,ht){ht.guid=ht.guid||me++;var Lt=aa(kr);Lt[or]=Lt[or]||[],Lt[or].push([Tr,ht]),kr.addEventListener(or,ht)}(Ln,fn,Ko,yr)})}),this},Oe.one=function(Nt,jt,gt){return this.on(Nt,jt,gt,!0)},Oe.ready=function(Nt){var jt=function(){return Nt(Ce)};return"loading"!==z.readyState?setTimeout(jt):z.addEventListener("DOMContentLoaded",jt),this},Oe.trigger=function(Nt,jt){var gt=Nt;if(Ze(Nt)){var Fr=Fa(Nt),tr=Fr[0],wt=Fr[1];(gt=z.createEvent("HTMLEvents")).initEvent(tr,!0,!0),gt.namespace=wt.join(".")}return gt.data=jt,this.each(function(St,vr){vr.dispatchEvent(gt)})};var ze=/select-one/i,Xe=/select-multiple/i;function at(Nt){var gt,jt=Nt.type;return ze.test(jt)?(gt=Nt).selectedIndex<0?null:gt.options[gt.selectedIndex].value:Xe.test(jt)?function(gt){var Fr=[];return ke(gt.options,function(tr){!tr.selected||tr.disabled||tr.parentNode.disabled||Fr.push(tr.value)}),Fr}(Nt):Nt.value}var gr=/%20/g,Pt=/file|reset|submit|button|image/i,mt=/radio|checkbox/i;Oe.serialize=function(){var Nt="";return this.each(function(jt,gt){ke(gt.elements||[gt],function(Fr){if(!Fr.disabled&&Fr.name&&"FIELDSET"!==Fr.tagName&&!Pt.test(Fr.type)&&(!mt.test(Fr.type)||Fr.checked)){var tr=at(Fr);void 0!==tr&&ke($e(tr)?tr:[tr],function(wt){var vr;Nt+=(vr=wt,"&"+encodeURIComponent(Fr.name)+"="+encodeURIComponent(vr).replace(gr,"+"))})}})}),Nt.substr(1)},Oe.val=function(Nt){return void 0===Nt?this[0]&&at(this[0]):this.each(function(jt,gt){var Fr=Xe.test(gt.type),tr=null===Nt?Fr?[]:"":Nt;Fr&&$e(tr)?ke(gt.options,function(wt){wt.selected=tr.indexOf(wt.value)>=0}):gt.value=tr})},Oe.clone=function(){return this.map(function(Nt,jt){return jt.cloneNode(!0)})},Oe.detach=function(){return this.each(function(Nt,jt){jt.parentNode&&jt.parentNode.removeChild(jt)})};var Zt,ln=/^\s*<(\w+)[^>]*>/,no=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function oo(Nt){if(function(){if(!Zt){var Fr=z.createElement("table"),tr=z.createElement("tr");Zt={"*":z.createElement("div"),tr:z.createElement("tbody"),td:tr,th:tr,thead:Fr,tbody:Fr,tfoot:Fr}}}(),!Ze(Nt))return[];if(no.test(Nt))return[z.createElement(RegExp.$1)];var jt=ln.test(Nt)&&RegExp.$1,gt=Zt[jt]||Zt["*"];return gt.innerHTML=Nt,Ce(gt.childNodes).detach().get()}function Ki(Nt,jt,gt){if(void 0!==jt){var Fr=Ze(jt);!Fr&&jt.length?ke(jt,function(tr){return Ki(Nt,tr,gt)}):ke(Nt,Fr?function(tr){tr.insertAdjacentHTML(gt?"afterbegin":"beforeend",jt)}:function(tr,wt){return St=tr,vr=wt?jt.cloneNode(!0):jt,void(gt?St.insertBefore(vr,St.childNodes[0]):St.appendChild(vr));var St,vr})}}Ce.parseHTML=oo,Oe.empty=function(){var Nt=this[0];if(Nt)for(;Nt.firstChild;)Nt.removeChild(Nt.firstChild);return this},Oe.append=function(){var Nt=this;return ke(arguments,function(jt){Ki(Nt,jt)}),this},Oe.appendTo=function(Nt){return Ki(Ce(Nt),this),this},Oe.html=function(Nt){if(void 0===Nt)return this[0]&&this[0].innerHTML;var jt=Nt.nodeType?Nt[0].outerHTML:Nt;return this.each(function(gt,Fr){Fr.innerHTML=jt})},Oe.insertAfter=function(Nt){var jt=this;return Ce(Nt).each(function(gt,Fr){var tr=Fr.parentNode;jt.each(function(wt,St){tr.insertBefore(gt?St.cloneNode(!0):St,Fr.nextSibling)})}),this},Oe.after=function(){var Nt=this;return ke(N.apply(arguments),function(jt){N.apply(Ce(jt).slice()).insertAfter(Nt)}),this},Oe.insertBefore=function(Nt){var jt=this;return Ce(Nt).each(function(gt,Fr){var tr=Fr.parentNode;jt.each(function(wt,St){tr.insertBefore(gt?St.cloneNode(!0):St,Fr)})}),this},Oe.before=function(){var Nt=this;return ke(arguments,function(jt){Ce(jt).insertBefore(Nt)}),this},Oe.prepend=function(){var Nt=this;return ke(arguments,function(jt){Ki(Nt,jt,!0)}),this},Oe.prependTo=function(Nt){return Ki(Ce(Nt),N.apply(this.slice()),!0),this},Oe.remove=function(){return this.detach().off()},Oe.replaceWith=function(Nt){var jt=this;return this.each(function(gt,Fr){var tr=Fr.parentNode;if(tr){var wt=gt?Ce(Nt).clone():Ce(Nt);if(!wt[0])return jt.remove(),!1;tr.replaceChild(wt[0],Fr),Ce(wt[0]).after(wt.slice(1))}})},Oe.replaceAll=function(Nt){return Ce(Nt).replaceWith(this),this},Oe.text=function(Nt){return void 0===Nt?this[0]?this[0].textContent:"":this.each(function(jt,gt){gt.textContent=Nt})};var li=z&&z.documentElement;Oe.offset=function(){var Nt=this[0];if(Nt){var jt=Nt.getBoundingClientRect();return{top:jt.top+H.pageYOffset-li.clientTop,left:jt.left+H.pageXOffset-li.clientLeft}}},Oe.offsetParent=function(){return Ce(this[0]&&this[0].offsetParent)},Oe.position=function(){var Nt=this[0];if(Nt)return{left:Nt.offsetLeft,top:Nt.offsetTop}},Oe.children=function(Nt){var jt=[];return this.each(function(gt,Fr){T.apply(jt,Fr.children)}),jt=Ce(mr(jt)),Nt?jt.filter(function(gt,Fr){return l(Fr,Nt)}):jt},Oe.contents=function(){var Nt=[];return this.each(function(jt,gt){T.apply(Nt,"IFRAME"===gt.tagName?[gt.contentDocument]:gt.childNodes)}),Ce(Nt.length&&mr(Nt))},Oe.find=function(Nt){for(var jt=[],gt=0,Fr=this.length;gt<Fr;gt++){var tr=Te(Nt,this[gt]);tr.length&&T.apply(jt,tr)}return Ce(jt.length&&mr(jt))},Oe.has=function(Nt){var jt=Ze(Nt)?function(gt,Fr){return!!Te(Nt,Fr).length}:function(gt,Fr){return Fr.contains(Nt)};return this.filter(jt)},Oe.is=function(Nt){if(!Nt||!this[0])return!1;var jt=Ct(Nt),gt=!1;return this.each(function(Fr,tr){return!(gt=jt(Fr,tr,Nt))}),gt},Oe.next=function(){return Ce(this[0]&&this[0].nextElementSibling)},Oe.not=function(Nt){if(!Nt||!this[0])return this;var jt=Ct(Nt);return this.filter(function(gt,Fr){return!jt(gt,Fr,Nt)})},Oe.parent=function(){var Nt=[];return this.each(function(jt,gt){gt&&gt.parentNode&&Nt.push(gt.parentNode)}),Ce(mr(Nt))},Oe.index=function(Nt){var jt=Nt?Ce(Nt)[0]:this[0],gt=Nt?this:Ce(jt).parent().children();return U.call(gt,jt)},Oe.closest=function(Nt){return Nt&&this[0]?this.is(Nt)?this.filter(Nt):this.parent().closest(Nt):Ce()},Oe.parents=function(Nt){var jt,gt=[];return this.each(function(Fr,tr){for(jt=tr;jt&&jt.parentNode&&jt!==z.body.parentNode;)jt=jt.parentNode,(!Nt||Nt&&l(jt,Nt))&&gt.push(jt)}),Ce(mr(gt))},Oe.prev=function(){return Ce(this[0]&&this[0].previousElementSibling)},Oe.siblings=function(){var Nt=this[0];return this.parent().children().filter(function(jt,gt){return gt!==Nt})};const ts=Ce},2097:(m,X,x)=>{"use strict";x.d(X,{AU:()=>mr,BC:()=>we,C8:()=>Le,Ch:()=>l,Ci:()=>ut,D8:()=>U,G2:()=>Me,GW:()=>Ue,GZ:()=>ge,I6:()=>L,LJ:()=>Ct,Sc:()=>pe,X6:()=>Y,Xy:()=>ke,YZ:()=>T,ZQ:()=>R,a_:()=>Te,af:()=>Oe,bG:()=>te,cx:()=>N,ir:()=>je,kk:()=>Ke,on:()=>Wt,rp:()=>$e,v$:()=>Ze,yL:()=>Ce,zN:()=>ee});var z=x(5706),H=function(nr,Kr,Pn){if(Pn||2===arguments.length)for(var Kn,Mo=0,mo=Kr.length;Mo<mo;Mo++)!Kn&&Mo in Kr||(Kn||(Kn=Array.prototype.slice.call(Kr,0,Mo)),Kn[Mo]=Kr[Mo]);return nr.concat(Kn||Array.prototype.slice.call(Kr))},U="transitionend oTransitionEnd transitionend webkitTransitionEnd",R=function(nr){return nr?.nodeType===Node.DOCUMENT_NODE},T=function(nr){var Kr=nr&&nr.parentNode;Kr&&Kr.removeChild(nr)};function N(){for(var nr=[],Kr=0;Kr<arguments.length;Kr++)nr[Kr]=arguments[Kr];return(Array.isArray(nr[0])?nr[0]:H([],nr,!0)).filter(Boolean).join(" ")}var L=function(nr,Kr){return nr.querySelectorAll(Kr)},Y=function(nr,Kr){return void 0===Kr&&(Kr={}),nr&&nr.setAttribute&&(0,z.each)(Kr,function(Pn,Kn){return nr.setAttribute(Kn,Pn)})},ee=function(nr){var Kr;return nr&&!!(nr.offsetWidth||nr.offsetHeight||null!==(Kr=nr.getClientRects)&&void 0!==Kr&&Kr.call(nr).length)},te=function(nr,Kr){var Pn;null===(Pn=nr.parentNode)||void 0===Pn||Pn.replaceChild(Kr,nr)},pe=function(nr,Kr,Pn){var Kn=nr.childNodes,Mo=Kn.length,mo=(0,z.isUndefined)(Pn)?Mo:Pn;(0,z.isString)(Kr)&&(nr.insertAdjacentHTML("beforeEnd",Kr),nr.removeChild(Kr=nr.lastChild)),mo>=Mo?nr.appendChild(Kr):nr.insertBefore(Kr,Kn[mo])},we=function(nr,Kr){return pe(nr,Kr)},Te=function(nr,Kr,Pn){void 0===Kr&&(Kr={});var Kn=document.createElement(nr);return Kr&&(0,z.each)(Kr,function(Mo,mo){return Kn.setAttribute(mo,Mo)}),Pn&&((0,z.isString)(Pn)?Kn.innerHTML=Pn:Kn.appendChild(Pn)),Kn},ge=function(nr){return document.createTextNode(nr)},Ce=function(nr,Kr){var Pn,Kn=nr.type;try{Pn=new window[Kr](Kn,nr)}catch{(Pn=document.createEvent(Kr)).initEvent(Kn,!0,!0)}return Pn._parentEvent=nr,0===Kn.indexOf("key")&&(Pn.keyCodeVal=nr.keyCode,["keyCode","which"].forEach(function(Mo){Object.defineProperty(Pn,Mo,{get:function(){return this.keyCodeVal}})})),Pn},Oe=function(nr,Kr){void 0===Kr&&(Kr=[]),(Array.isArray(Kr)?Kr:[Kr]).forEach(function(Pn){var Mo=Pn.attributes||{},mo=document.createElement(Pn.tag||"div");(0,z.each)(Mo,function(No,Di){mo.setAttribute(Di,No)}),nr.appendChild(mo)})},je=function(nr){return nr?.nodeType===Node.TEXT_NODE},Ue=function(nr){return nr&&!je(nr)&&(Kr=nr,!(Kr?.nodeType===Node.COMMENT_NODE));var Kr},Le=function(nr){var Kr,Pn={top:0,left:0,width:0,height:0};if(!nr)return Pn;if(je(nr)){var Kn=document.createRange();Kn.selectNode(nr),Kr=Kn.getBoundingClientRect(),Kn.detach()}return Kr||(nr.getBoundingClientRect?nr.getBoundingClientRect():Pn)},ke=function(nr){var Kr=nr?.ownerDocument||document,Pn=Kr.documentElement,Kn=Kr.defaultView||window;return{x:(Kn.pageXOffset||Pn.scrollLeft||0)-(Pn.clientLeft||0),y:(Kn.pageYOffset||Pn.scrollTop||0)-(Pn.clientTop||0)}},me=function(nr){return nr.which||nr.keyCode},l=function(nr){return String.fromCharCode(me(nr))},Me=function(nr){return nr.touches&&nr.touches[0]?nr.touches[0]:nr},Ze=function(nr){return 27===me(nr)},ut=function(nr){return 13===me(nr)},$e=function(nr){return nr.ctrlKey||nr.metaKey},Ct=function(nr){if(!nr)return"";var Kr=nr.name,Pn=nr.publicId,Kn=nr.systemId,Mo=Pn?' PUBLIC "'.concat(Pn,'"'):"",mo=!Pn&&Kn?' SYSTEM "'.concat(Kn,'"'):"";return"<!DOCTYPE ".concat(Kr).concat(Mo).concat(mo,">")},Ke=function(nr){void 0===nr&&(nr={});var Kr=[];return(0,z.each)(nr,function(Pn,Kn){return Kr.push("".concat(Kn,'="').concat(Pn,'"'))}),Kr.join(" ")},Wt=function(nr,Kr,Pn,Kn){var Mo=Kr.split(/\s+/),mo=(0,z.isArray)(nr)?nr:[nr];Mo.forEach(function(No){mo.forEach(function(Di){return Di?.addEventListener(No,Pn,Kn)})})},mr=function(nr,Kr,Pn,Kn){var Mo=Kr.split(/\s+/),mo=(0,z.isArray)(nr)?nr:[nr];Mo.forEach(function(No){mo.forEach(function(Di){return Di?.removeEventListener(No,Pn,Kn)})})}},9195:(m,X,x)=>{"use strict";x.r(X),x.d(X,{appendStyles:()=>Le,buildBase64UrlFromSvg:()=>an,camelCase:()=>Me,capitalize:()=>Kn,createId:()=>Wn,deepMerge:()=>mr,escape:()=>Ke,escapeNodeContent:()=>Wt,find:()=>Ct,get:()=>L,getComponentModel:()=>ci,getComponentView:()=>Di,getElement:()=>$e,getGlobal:()=>ge,getModel:()=>nr,getUiClass:()=>Ue,getUnitFromValue:()=>me,getViewEl:()=>mo,hasDnd:()=>ut,hasWin:()=>Te,isBultInMethod:()=>ee,isComponent:()=>No,isDef:()=>we,isEmptyObj:()=>Pn,isObject:()=>Kr,isRule:()=>Mo,matches:()=>je,normalizeFloat:()=>Ze,normalizeKey:()=>te,serialize:()=>Y,setViewEl:()=>zn,shallowDiff:()=>ke,stringToPath:()=>N,toLowerCase:()=>Ce,upFirst:()=>l,wait:()=>pe});var z=x(5706),H=x(2097),G=function(){return G=Object.assign||function(lr){for(var Pr,Mn=1,dn=arguments.length;Mn<dn;Mn++)for(var sn in Pr=arguments[Mn])Object.prototype.hasOwnProperty.call(Pr,sn)&&(lr[sn]=Pr[sn]);return lr},G.apply(this,arguments)},U={},R=/\\(\\)?/g,T=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=function(lr){var Pr=[];return 46===lr.charCodeAt(0)&&Pr.push(""),lr.replace(T,function(Mn,dn,sn,kn){return Pr.push(sn?kn.replace(R,"$1"):dn||Mn),""}),Pr},L=function(lr,Pr,Mn){for(var dn,sn=(aa=lr,(0,z.isArray)(Vo=Pr)?Vo:aa.hasOwnProperty(Vo)?[Vo]:N(Vo)),kn=sn.length,xo=0;null!=lr&&xo<kn;)lr=lr["".concat(sn[xo++])];var Vo,aa;return null!==(dn=xo&&xo==kn?lr:void 0)&&void 0!==dn?dn:Mn},Y=function(lr){return JSON.parse(JSON.stringify(lr))},ee=function(lr){return(0,z.isFunction)(U[lr])},te=function(lr){return ee(lr)?"_".concat(lr):lr},pe=function(lr){return void 0===lr&&(lr=0),new Promise(function(Pr){return setTimeout(Pr,lr)})},we=function(lr){return void 0!==lr},Te=function(){return typeof window<"u"},ge=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:x.g},Ce=function(lr){return(lr||"").toLowerCase()},Oe=Te()?window.Element.prototype:{},je=Oe.matches||Oe.webkitMatchesSelector||Oe.mozMatchesSelector||Oe.msMatchesSelector,Ue=function(lr,Pr){var Mn=lr.getConfig();return[Mn.customUI&&"".concat(Mn.stylePrefix,"cui"),Pr].filter(function(sn){return sn}).join(" ")},Le=function(lr,Pr){void 0===Pr&&(Pr={});var Mn=(0,z.isArray)(lr)?function(lr,Pr,Mn){if(Mn||2===arguments.length)for(var dn,sn=0,kn=Pr.length;sn<kn;sn++)!dn&&sn in Pr||(dn||(dn=Array.prototype.slice.call(Pr,0,sn)),dn[sn]=Pr[sn]);return lr.concat(dn||Array.prototype.slice.call(Pr))}([],lr,!0):[lr];if(Mn.length){var dn=Mn.shift();if(dn&&(!Pr.unique||!document.querySelector('link[href="'.concat(dn,'"]')))){var sn=document.head,kn=document.createElement("link");kn.href=dn,kn.rel="stylesheet",Pr.prepand?sn.insertBefore(kn,sn.firstChild):sn.appendChild(kn)}Le(Mn)}},ke=function(lr,Pr){var Mn={},dn=(0,z.keys)(Pr);for(var sn in lr)if(lr.hasOwnProperty(sn)){var kn=lr[sn],xo=Pr[sn];dn.indexOf(sn)>=0?kn!==xo&&(Mn[sn]=xo):Mn[sn]=null}for(var sn in Pr)Pr.hasOwnProperty(sn)&&(0,z.isUndefined)(lr[sn])&&(Mn[sn]=Pr[sn]);return Mn},me=function(lr){return lr.replace(parseFloat(lr),"")},l=function(lr){return lr[0].toUpperCase()+lr.toLowerCase().slice(1)},Me=function(lr){return lr.replace(/-./g,function(Pr){return Pr[1].toUpperCase()})},Ze=function(lr,Pr,Mn){void 0===Pr&&(Pr=1),void 0===Mn&&(Mn=0);var dn=0;if(isNaN(lr))return Mn;if(lr=parseFloat(lr),Math.floor(lr)!==lr){var sn=Pr.toString().split(".")[1];dn=sn?sn.length:0}return dn?parseFloat(lr.toFixed(dn)):lr},ut=function(lr){return"draggable"in document.createElement("i")&&(!lr||lr.config.nativeDnD)},$e=function(lr){return(0,z.isElement)(lr)||(0,H.ir)(lr)?lr:lr&&lr.getEl?lr.getEl():void 0},Ct=function(lr,Pr){var Mn=null;return lr.some(function(dn,sn){return Pr(dn,sn,lr)?(Mn=dn,1):0}),Mn},Ke=function(lr){return void 0===lr&&(lr=""),"".concat(lr).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},Wt=function(lr){return void 0===lr&&(lr=""),"".concat(lr).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},mr=function(){for(var lr=[],Pr=0;Pr<arguments.length;Pr++)lr[Pr]=arguments[Pr];for(var Mn=G({},lr[0]),dn=1;dn<lr.length;dn++){var sn=G({},lr[dn]);for(var kn in sn){var xo=Mn[kn],Vo=sn[kn];Mn[kn]=Kr(xo)&&Kr(Vo)?mr(xo,Vo):Vo}}return Mn},nr=function(lr,Pr){var Mn;return!Pr&&lr&&lr.__cashData?Mn=lr.__cashData.model:Pr&&(0,z.isElement)(lr)&&(Mn=Pr(lr).data("model")),Mn},Kr=function(lr){return lr&&!Array.isArray(lr)&&"object"==typeof lr},Pn=function(lr){return Object.keys(lr).length<=0},Kn=function(lr){return void 0===lr&&(lr=""),lr&&lr.charAt(0).toUpperCase()+lr.substring(1)},Mo=function(lr){return lr&&lr.toCSS},mo=function(lr){return lr?.__gjsv},No=function(lr){return!!lr?.toHTML},Di=function(lr){return mo(lr)},ci=function(lr){var Pr;return null===(Pr=Di(lr))||void 0===Pr?void 0:Pr.model},zn=function(lr,Pr){lr.__gjsv=Pr},Wn=function(lr){void 0===lr&&(lr=16);for(var Pr="",sn=0;sn<lr;sn++)Pr+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return Pr},an=function(lr){if(lr&&"<svg"===lr.substr(0,4)){var Pr="";return Te()?Pr=window.btoa(lr):typeof Buffer<"u"&&(Pr=Buffer.from(lr,"utf8").toString("base64")),Pr?"data:image/svg+xml;base64,".concat(Pr):lr}return lr}},3253:(m,X,x)=>{"use strict";x.d(X,{h:()=>D});var z,H=x(3161),G=(z=function(U,R){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,N){T.__proto__=N}||function(T,N){for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(T[L]=N[L])})(U,R)},function(U,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function T(){this.constructor=U}z(U,R),U.prototype=null===R?Object.create(R):(T.prototype=R.prototype,new T)}),D=function(U){function R(){var T=null!==U&&U.apply(this,arguments)||this;return T.displayCache=new Map,T}return G(R,U),R.prototype.getChildren=function(){return this.getDisplayedChildren()},R.prototype.getDisplayedChildren=function(){var T=this;return this.model.components().filter(function(N){return T.isChildDisplayed(N)}).map(function(N){return new T.constructor(N)})},R.prototype.isChildDisplayed=function(T){if(this.displayCache.has(T))return this.displayCache.get(T);var L,N=!!(L=T.getEl())&&"object"==typeof L&&L.nodeType===Node.ELEMENT_NODE&&"none"!==window.getComputedStyle(L).display&&L.offsetWidth>0&&L.offsetHeight>0;return this.displayCache.set(T,N),N},R.prototype.getParent=function(){var T=this.model.parent();return T?new this.constructor(T):null},R.prototype.addChildAt=function(T,N,L){var Y,ee,te,pe,we,Te,ge,Ce;if(void 0===L&&(L={action:"add-component"}),(null===(ee=null===(Y=this.model)||void 0===Y?void 0:Y.isInstanceOf)||void 0===ee?void 0:ee.call(Y,"text"))&&(null===(pe=null===(te=T?.model)||void 0===te?void 0:te.get)||void 0===pe?void 0:pe.call(te,"textable")))return null===(Ce=null===(ge=null===(Te=null===(we=this.model)||void 0===we?void 0:we.getView)||void 0===Te?void 0:Te.call(we))||void 0===ge?void 0:ge.insertComponent)||void 0===Ce?void 0:Ce.call(ge,T?.model,{action:L.action});var Oe=this.model.components().add(T.model,{at:this.getRealIndex(N),action:L.action});return new this.constructor(Oe)},R.prototype.removeChildAt=function(T,N){void 0===N&&(N={temporary:!1});var L=this.model.components().at(this.getRealIndex(T));L&&this.model.components().remove(L,N)},R.prototype.indexOfChild=function(T){return this.getDisplayIndex(T)},R.prototype.getDisplayIndex=function(T){var N=this.getDisplayedChildren();return N?N.findIndex(function(L){return L.model===T.model}):-1},R.prototype.getRealIndex=function(T){if(-1===T)return-1;for(var N=0,L=this.model.components(),Y=0;Y<L.length;Y++){var ee=L.at(Y);if(this.isChildDisplayed(ee)&&N++,N===T+1)return Y}return-1},R.prototype.canMove=function(T,N){return this.model.em.Components.canMove(this.model,T.model,this.getRealIndex(N)).result},R.prototype.restNodeState=function(){this.clearState();var T=this.model;this.setContentEditable(!1),T.em.getEditing()===T&&this.disableEditing()},R.prototype.setContentEditable=function(T){this.element&&this.isTextNode()&&(this.element.contentEditable=T?"true":"false")},R.prototype.disableEditing=function(){var T,N;null===(N=null===(T=this.view)||void 0===T?void 0:T.disableEditing)||void 0===N||N.call(T)},R.prototype.clearState=function(){var T,N;null===(N=(T=this.model).set)||void 0===N||N.call(T,"status","")},R.prototype.setSelectedParentState=function(){var T,N;null===(N=(T=this.model).set)||void 0===N||N.call(T,"status","selected-parent")},R.prototype.isTextNode=function(){var T,N;return null===(N=(T=this.model).isInstanceOf)||void 0===N?void 0:N.call(T,"text")},R.prototype.isTextable=function(){var T,N;return null===(N=(T=this.model).get)||void 0===N?void 0:N.call(T,"textable")},R}(H.$)},6778:(m,X,x)=>{"use strict";x.d(X,{A:()=>D});var z,H=x(3253),G=(z=function(U,R){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,N){T.__proto__=N}||function(T,N){for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(T[L]=N[L])})(U,R)},function(U,R){if("function"!=typeof R&&null!==R)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function T(){this.constructor=U}z(U,R),U.prototype=null===R?Object.create(R):(T.prototype=R.prototype,new T)});const D=function(U){function R(){var T=null!==U&&U.apply(this,arguments)||this;return T._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},T}return G(R,U),Object.defineProperty(R.prototype,"view",{get:function(){var T,N;return null===(N=(T=this.model).getView)||void 0===N?void 0:N.call(T)},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"element",{get:function(){var T,N;return null===(N=(T=this.model).getEl)||void 0===N?void 0:N.call(T)},enumerable:!1,configurable:!0}),R}(H.h)},3161:(m,X,x)=>{"use strict";x.d(X,{$:()=>z});var z=function(){function H(G,D){void 0===D&&(D={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=G,this._dragSource=D}return Object.defineProperty(H.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(H.prototype,"dropArea",{get:function(){var G,D;return this.getParent()?null===(D=this.nodeDimensions)||void 0===D?void 0:D.getDropArea(this._dropAreaConfig):null===(G=this.nodeDimensions)||void 0===G?void 0:G.clone()},enumerable:!1,configurable:!0}),H.prototype.isWithinDropBounds=function(G,D){return!!this.dropArea&&this.dropArea.isWithinBounds(G,D)},H.prototype.equals=function(G){return!!G?._model&&this._model===G._model},H.prototype.adjustDimensions=function(G){var D,U;0===G.topDifference&&0===G.leftDifference||(null===(D=this.nodeDimensions)||void 0===D||D.adjustDimensions(G),null===(U=this.childrenDimensions)||void 0===U||U.forEach(function(R){return R.adjustDimensions(G)}))},H}()},2128:(m,X,x)=>{"use strict";var z,H;x.d(X,{A:()=>z}),(H=z||(z={})).Vertical="Vertical",H.Horizontal="Horizontal",H.BothDirections="BothDirections"},585:(m,X,x)=>{var z={"./CanvasClear":371,"./CanvasClear.ts":371,"./CanvasMove":6301,"./CanvasMove.ts":6301,"./CommandAbstract":5301,"./CommandAbstract.ts":5301,"./ComponentDelete":8542,"./ComponentDelete.ts":8542,"./ComponentDrag":1319,"./ComponentDrag.ts":1319,"./ComponentEnter":1859,"./ComponentEnter.ts":1859,"./ComponentExit":3709,"./ComponentExit.ts":3709,"./ComponentNext":2860,"./ComponentNext.ts":2860,"./ComponentPrev":4944,"./ComponentPrev.ts":4944,"./ComponentStyleClear":767,"./ComponentStyleClear.ts":767,"./CopyComponent":2126,"./CopyComponent.ts":2126,"./ExportTemplate":4860,"./ExportTemplate.ts":4860,"./Fullscreen":1085,"./Fullscreen.ts":1085,"./MoveComponent":9622,"./MoveComponent.ts":9622,"./OpenAssets":8481,"./OpenAssets.ts":8481,"./OpenBlocks":3666,"./OpenBlocks.ts":3666,"./OpenLayers":5838,"./OpenLayers.ts":5838,"./OpenStyleManager":8692,"./OpenStyleManager.ts":8692,"./OpenTraitManager":9163,"./OpenTraitManager.ts":9163,"./PasteComponent":9298,"./PasteComponent.ts":9298,"./Preview":8594,"./Preview.ts":8594,"./Resize":7604,"./Resize.ts":7604,"./SelectComponent":4596,"./SelectComponent.ts":4596,"./SelectPosition":2983,"./SelectPosition.ts":2983,"./ShowOffset":9490,"./ShowOffset.ts":9490,"./SwitchVisibility":1396,"./SwitchVisibility.ts":1396};function H(D){var U=G(D);return x(U)}function G(D){if(!x.o(z,D)){var U=new Error("Cannot find module '"+D+"'");throw U.code="MODULE_NOT_FOUND",U}return z[D]}H.keys=function(){return Object.keys(z)},H.resolve=G,m.exports=H,H.id=585},5706:(m,X,x)=>{"use strict";x.r(X),x.d(X,{VERSION:()=>H,after:()=>Oa,all:()=>Ra,allKeys:()=>ts,any:()=>es,assign:()=>Dr,before:()=>Ll,bind:()=>Ac,bindAll:()=>Js,chain:()=>Vd,chunk:()=>tu,clone:()=>dr,collect:()=>ao,compact:()=>oc,compose:()=>eu,constant:()=>kn,contains:()=>Xi,countBy:()=>Jp,create:()=>Yn,debounce:()=>kc,default:()=>ic,defaults:()=>hn,defer:()=>Yc,delay:()=>Ql,detect:()=>Dt,difference:()=>ml,drop:()=>cd,each:()=>uo,escape:()=>Ba,every:()=>Ra,extend:()=>Lt,extendOwn:()=>Dr,filter:()=>Ri,find:()=>Dt,findIndex:()=>Gu,findKey:()=>as,findLastIndex:()=>Lc,findWhere:()=>tn,first:()=>Dc,flatten:()=>Tp,foldl:()=>ko,foldr:()=>ra,forEach:()=>uo,functions:()=>Tr,get:()=>Do,groupBy:()=>Dd,has:()=>Jt,head:()=>Dc,identity:()=>Jn,include:()=>Xi,includes:()=>Xi,indexBy:()=>zd,indexOf:()=>Ye,initial:()=>Dp,inject:()=>ko,intersection:()=>Zc,invert:()=>or,invoke:()=>cs,isArguments:()=>Mn,isArray:()=>an,isArrayBuffer:()=>Pn,isBoolean:()=>Ze,isDataView:()=>Wn,isDate:()=>Wt,isElement:()=>ut,isEmpty:()=>Pt,isEqual:()=>li,isError:()=>nr,isFinite:()=>dn,isFunction:()=>mo,isMap:()=>fn,isMatch:()=>mt,isNaN:()=>sn,isNull:()=>l,isNumber:()=>Ke,isObject:()=>me,isRegExp:()=>mr,isSet:()=>Ro,isString:()=>Ct,isSymbol:()=>Kr,isTypedArray:()=>ze,isUndefined:()=>Me,isWeakMap:()=>Ko,isWeakSet:()=>Ln,iteratee:()=>Ei,keys:()=>gr,last:()=>Ef,lastIndexOf:()=>dt,map:()=>ao,mapObject:()=>ns,matcher:()=>Qn,matches:()=>Qn,max:()=>vc,memoize:()=>ad,methods:()=>Tr,min:()=>Aa,mixin:()=>Sd,negate:()=>Xc,noop:()=>nl,now:()=>el,object:()=>Fs,omit:()=>xu,once:()=>ql,pairs:()=>kr,partial:()=>id,partition:()=>Ks,pick:()=>qu,pluck:()=>cc,property:()=>Io,propertyOf:()=>Bs,random:()=>rs,range:()=>Tc,reduce:()=>ko,reduceRight:()=>ra,reject:()=>ls,rest:()=>cd,restArguments:()=>ke,result:()=>Oc,sample:()=>uc,select:()=>Ri,shuffle:()=>Ic,size:()=>Gl,some:()=>es,sortBy:()=>sd,sortedIndex:()=>Cf,tail:()=>cd,take:()=>Dc,tap:()=>pn,template:()=>ul,templateSettings:()=>Mr,throttle:()=>Qc,times:()=>To,toArray:()=>Rl,toPath:()=>Xt,transpose:()=>ud,unescape:()=>Et,union:()=>pu,uniq:()=>Mu,unique:()=>Mu,uniqueId:()=>Wc,unzip:()=>ud,values:()=>yr,where:()=>Il,without:()=>Yp,wrap:()=>zl,zip:()=>dd});var z={};x.r(z),x.d(z,{VERSION:()=>H,after:()=>Oa,all:()=>Ra,allKeys:()=>ts,any:()=>es,assign:()=>Dr,before:()=>Ll,bind:()=>Ac,bindAll:()=>Js,chain:()=>Vd,chunk:()=>tu,clone:()=>dr,collect:()=>ao,compact:()=>oc,compose:()=>eu,constant:()=>kn,contains:()=>Xi,countBy:()=>Jp,create:()=>Yn,debounce:()=>kc,default:()=>pd,defaults:()=>hn,defer:()=>Yc,delay:()=>Ql,detect:()=>Dt,difference:()=>ml,drop:()=>cd,each:()=>uo,escape:()=>Ba,every:()=>Ra,extend:()=>Lt,extendOwn:()=>Dr,filter:()=>Ri,find:()=>Dt,findIndex:()=>Gu,findKey:()=>as,findLastIndex:()=>Lc,findWhere:()=>tn,first:()=>Dc,flatten:()=>Tp,foldl:()=>ko,foldr:()=>ra,forEach:()=>uo,functions:()=>Tr,get:()=>Do,groupBy:()=>Dd,has:()=>Jt,head:()=>Dc,identity:()=>Jn,include:()=>Xi,includes:()=>Xi,indexBy:()=>zd,indexOf:()=>Ye,initial:()=>Dp,inject:()=>ko,intersection:()=>Zc,invert:()=>or,invoke:()=>cs,isArguments:()=>Mn,isArray:()=>an,isArrayBuffer:()=>Pn,isBoolean:()=>Ze,isDataView:()=>Wn,isDate:()=>Wt,isElement:()=>ut,isEmpty:()=>Pt,isEqual:()=>li,isError:()=>nr,isFinite:()=>dn,isFunction:()=>mo,isMap:()=>fn,isMatch:()=>mt,isNaN:()=>sn,isNull:()=>l,isNumber:()=>Ke,isObject:()=>me,isRegExp:()=>mr,isSet:()=>Ro,isString:()=>Ct,isSymbol:()=>Kr,isTypedArray:()=>ze,isUndefined:()=>Me,isWeakMap:()=>Ko,isWeakSet:()=>Ln,iteratee:()=>Ei,keys:()=>gr,last:()=>Ef,lastIndexOf:()=>dt,map:()=>ao,mapObject:()=>ns,matcher:()=>Qn,matches:()=>Qn,max:()=>vc,memoize:()=>ad,methods:()=>Tr,min:()=>Aa,mixin:()=>Sd,negate:()=>Xc,noop:()=>nl,now:()=>el,object:()=>Fs,omit:()=>xu,once:()=>ql,pairs:()=>kr,partial:()=>id,partition:()=>Ks,pick:()=>qu,pluck:()=>cc,property:()=>Io,propertyOf:()=>Bs,random:()=>rs,range:()=>Tc,reduce:()=>ko,reduceRight:()=>ra,reject:()=>ls,rest:()=>cd,restArguments:()=>ke,result:()=>Oc,sample:()=>uc,select:()=>Ri,shuffle:()=>Ic,size:()=>Gl,some:()=>es,sortBy:()=>sd,sortedIndex:()=>Cf,tail:()=>cd,take:()=>Dc,tap:()=>pn,template:()=>ul,templateSettings:()=>Mr,throttle:()=>Qc,times:()=>To,toArray:()=>Rl,toPath:()=>Xt,transpose:()=>ud,unescape:()=>Et,union:()=>pu,uniq:()=>Mu,unique:()=>Mu,uniqueId:()=>Wc,unzip:()=>ud,values:()=>yr,where:()=>Il,without:()=>Yp,wrap:()=>zl,zip:()=>dd});var H="1.13.1",G="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},D=Array.prototype,U=Object.prototype,R=typeof Symbol<"u"?Symbol.prototype:null,T=D.push,N=D.slice,L=U.toString,Y=U.hasOwnProperty,ee=typeof ArrayBuffer<"u",te=typeof DataView<"u",pe=Array.isArray,we=Object.keys,Te=Object.create,ge=ee&&ArrayBuffer.isView,Ce=isNaN,Oe=isFinite,je=!{toString:null}.propertyIsEnumerable("toString"),Ue=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Le=Math.pow(2,53)-1;function ke(Ve,kt){return kt=null==kt?Ve.length-1:+kt,function(){for(var Br=Math.max(arguments.length-kt,0),qr=Array(Br),vn=0;vn<Br;vn++)qr[vn]=arguments[vn+kt];switch(kt){case 0:return Ve.call(this,qr);case 1:return Ve.call(this,arguments[0],qr);case 2:return Ve.call(this,arguments[0],arguments[1],qr)}var On=Array(kt+1);for(vn=0;vn<kt;vn++)On[vn]=arguments[vn];return On[kt]=qr,Ve.apply(this,On)}}function me(Ve){var kt=typeof Ve;return"function"===kt||"object"===kt&&!!Ve}function l(Ve){return null===Ve}function Me(Ve){return void 0===Ve}function Ze(Ve){return!0===Ve||!1===Ve||"[object Boolean]"===L.call(Ve)}function ut(Ve){return!(!Ve||1!==Ve.nodeType)}function $e(Ve){var kt="[object "+Ve+"]";return function(Br){return L.call(Br)===kt}}const Ct=$e("String"),Ke=$e("Number"),Wt=$e("Date"),mr=$e("RegExp"),nr=$e("Error"),Kr=$e("Symbol"),Pn=$e("ArrayBuffer");var Kn=$e("Function");"object"!=typeof Int8Array&&"function"!=typeof(G.document&&G.document.childNodes)&&(Kn=function(Ve){return"function"==typeof Ve||!1});const mo=Kn,No=$e("Object");var Di=te&&No(new DataView(new ArrayBuffer(8))),ci=typeof Map<"u"&&No(new Map),zn=$e("DataView");const Wn=Di?function(Ve){return null!=Ve&&mo(Ve.getInt8)&&Pn(Ve.buffer)}:zn,an=pe||$e("Array");function lr(Ve,kt){return null!=Ve&&Y.call(Ve,kt)}var Pr=$e("Arguments");!function(){Pr(arguments)||(Pr=function(Ve){return lr(Ve,"callee")})}();const Mn=Pr;function dn(Ve){return!Kr(Ve)&&Oe(Ve)&&!isNaN(parseFloat(Ve))}function sn(Ve){return Ke(Ve)&&Ce(Ve)}function kn(Ve){return function(){return Ve}}function xo(Ve){return function(kt){var Br=Ve(kt);return"number"==typeof Br&&Br>=0&&Br<=Le}}function Vo(Ve){return function(kt){return kt?.[Ve]}}const aa=Vo("byteLength"),Fa=xo(aa);var Qr=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const ze=ee?function(Ve){return ge?ge(Ve)&&!Wn(Ve):Fa(Ve)&&Qr.test(L.call(Ve))}:kn(!1),Xe=Vo("length");function at(Ve,kt){kt=function(oi){for(var ji={},Cs=oi.length,Ls=0;Ls<Cs;++Ls)ji[oi[Ls]]=!0;return{contains:function(gl){return ji[gl]},push:function(gl){return ji[gl]=!0,oi.push(gl)}}}(kt);var Br=Ue.length,qr=Ve.constructor,vn=mo(qr)&&qr.prototype||U,On="constructor";for(lr(Ve,On)&&!kt.contains(On)&&kt.push(On);Br--;)(On=Ue[Br])in Ve&&Ve[On]!==vn[On]&&!kt.contains(On)&&kt.push(On)}function gr(Ve){if(!me(Ve))return[];if(we)return we(Ve);var kt=[];for(var Br in Ve)lr(Ve,Br)&&kt.push(Br);return je&&at(Ve,kt),kt}function Pt(Ve){if(null==Ve)return!0;var kt=Xe(Ve);return"number"==typeof kt&&(an(Ve)||Ct(Ve)||Mn(Ve))?0===kt:0===Xe(gr(Ve))}function mt(Ve,kt){var Br=gr(kt),qr=Br.length;if(null==Ve)return!qr;for(var vn=Object(Ve),On=0;On<qr;On++){var oi=Br[On];if(kt[oi]!==vn[oi]||!(oi in vn))return!1}return!0}function Zt(Ve){return Ve instanceof Zt?Ve:this instanceof Zt?void(this._wrapped=Ve):new Zt(Ve)}function ln(Ve){return new Uint8Array(Ve.buffer||Ve,Ve.byteOffset||0,aa(Ve))}Zt.VERSION=H,Zt.prototype.valueOf=Zt.prototype.toJSON=Zt.prototype.value=function(){return this._wrapped},Zt.prototype.toString=function(){return String(this._wrapped)};var no="[object DataView]";function oo(Ve,kt,Br,qr){if(Ve===kt)return 0!==Ve||1/Ve==1/kt;if(null==Ve||null==kt)return!1;if(Ve!=Ve)return kt!=kt;var vn=typeof Ve;return("function"===vn||"object"===vn||"object"==typeof kt)&&Ki(Ve,kt,Br,qr)}function Ki(Ve,kt,Br,qr){Ve instanceof Zt&&(Ve=Ve._wrapped),kt instanceof Zt&&(kt=kt._wrapped);var vn=L.call(Ve);if(vn!==L.call(kt))return!1;if(Di&&"[object Object]"==vn&&Wn(Ve)){if(!Wn(kt))return!1;vn=no}switch(vn){case"[object RegExp]":case"[object String]":return""+Ve==""+kt;case"[object Number]":return+Ve!=+Ve?+kt!=+kt:0==+Ve?1/+Ve==1/kt:+Ve==+kt;case"[object Date]":case"[object Boolean]":return+Ve==+kt;case"[object Symbol]":return R.valueOf.call(Ve)===R.valueOf.call(kt);case"[object ArrayBuffer]":case no:return Ki(ln(Ve),ln(kt),Br,qr)}var On="[object Array]"===vn;if(!On&&ze(Ve)){if(aa(Ve)!==aa(kt))return!1;if(Ve.buffer===kt.buffer&&Ve.byteOffset===kt.byteOffset)return!0;On=!0}if(!On){if("object"!=typeof Ve||"object"!=typeof kt)return!1;var oi=Ve.constructor,ji=kt.constructor;if(oi!==ji&&!(mo(oi)&&oi instanceof oi&&mo(ji)&&ji instanceof ji)&&"constructor"in Ve&&"constructor"in kt)return!1}qr=qr||[];for(var Cs=(Br=Br||[]).length;Cs--;)if(Br[Cs]===Ve)return qr[Cs]===kt;if(Br.push(Ve),qr.push(kt),On){if((Cs=Ve.length)!==kt.length)return!1;for(;Cs--;)if(!oo(Ve[Cs],kt[Cs],Br,qr))return!1}else{var Ls,gl=gr(Ve);if(Cs=gl.length,gr(kt).length!==Cs)return!1;for(;Cs--;)if(!lr(kt,Ls=gl[Cs])||!oo(Ve[Ls],kt[Ls],Br,qr))return!1}return Br.pop(),qr.pop(),!0}function li(Ve,kt){return oo(Ve,kt)}function ts(Ve){if(!me(Ve))return[];var kt=[];for(var Br in Ve)kt.push(Br);return je&&at(Ve,kt),kt}function Nt(Ve){var kt=Xe(Ve);return function(Br){if(null==Br)return!1;var qr=ts(Br);if(Xe(qr))return!1;for(var vn=0;vn<kt;vn++)if(!mo(Br[Ve[vn]]))return!1;return Ve!==St||!mo(Br[jt])}}var jt="forEach",Fr=["clear","delete"],tr=["get","has","set"],wt=Fr.concat(jt,tr),St=Fr.concat(tr),vr=["add"].concat(Fr,jt,"has");const fn=ci?Nt(wt):$e("Map"),Ko=ci?Nt(St):$e("WeakMap"),Ro=ci?Nt(vr):$e("Set"),Ln=$e("WeakSet");function yr(Ve){for(var kt=gr(Ve),Br=kt.length,qr=Array(Br),vn=0;vn<Br;vn++)qr[vn]=Ve[kt[vn]];return qr}function kr(Ve){for(var kt=gr(Ve),Br=kt.length,qr=Array(Br),vn=0;vn<Br;vn++)qr[vn]=[kt[vn],Ve[kt[vn]]];return qr}function or(Ve){for(var kt={},Br=gr(Ve),qr=0,vn=Br.length;qr<vn;qr++)kt[Ve[Br[qr]]]=Br[qr];return kt}function Tr(Ve){var kt=[];for(var Br in Ve)mo(Ve[Br])&&kt.push(Br);return kt.sort()}function ht(Ve,kt){return function(Br){var qr=arguments.length;if(kt&&(Br=Object(Br)),qr<2||null==Br)return Br;for(var vn=1;vn<qr;vn++)for(var On=arguments[vn],oi=Ve(On),ji=oi.length,Cs=0;Cs<ji;Cs++){var Ls=oi[Cs];kt&&void 0!==Br[Ls]||(Br[Ls]=On[Ls])}return Br}}const Lt=ht(ts),Dr=ht(gr),hn=ht(ts,!0);function Un(Ve){if(!me(Ve))return{};if(Te)return Te(Ve);var kt=function(){};kt.prototype=Ve;var Br=new kt;return kt.prototype=null,Br}function Yn(Ve,kt){var Br=Un(Ve);return kt&&Dr(Br,kt),Br}function dr(Ve){return me(Ve)?an(Ve)?Ve.slice():Lt({},Ve):Ve}function pn(Ve,kt){return kt(Ve),Ve}function Xt(Ve){return an(Ve)?Ve:[Ve]}function Ft(Ve){return Zt.toPath(Ve)}function Zn(Ve,kt){for(var Br=kt.length,qr=0;qr<Br;qr++){if(null==Ve)return;Ve=Ve[kt[qr]]}return Br?Ve:void 0}function Do(Ve,kt,Br){var qr=Zn(Ve,Ft(kt));return Me(qr)?Br:qr}function Jt(Ve,kt){for(var Br=(kt=Ft(kt)).length,qr=0;qr<Br;qr++){var vn=kt[qr];if(!lr(Ve,vn))return!1;Ve=Ve[vn]}return!!Br}function Jn(Ve){return Ve}function Qn(Ve){return Ve=Dr({},Ve),function(kt){return mt(kt,Ve)}}function Io(Ve){return Ve=Ft(Ve),function(kt){return Zn(kt,Ve)}}function ri(Ve,kt,Br){if(void 0===kt)return Ve;switch(Br??3){case 1:return function(qr){return Ve.call(kt,qr)};case 3:return function(qr,vn,On){return Ve.call(kt,qr,vn,On)};case 4:return function(qr,vn,On,oi){return Ve.call(kt,qr,vn,On,oi)}}return function(){return Ve.apply(kt,arguments)}}function Ka(Ve,kt,Br){return null==Ve?Jn:mo(Ve)?ri(Ve,kt,Br):me(Ve)&&!an(Ve)?Qn(Ve):Io(Ve)}function Ei(Ve,kt){return Ka(Ve,kt,1/0)}function ui(Ve,kt,Br){return Zt.iteratee!==Ei?Zt.iteratee(Ve,kt):Ka(Ve,kt,Br)}function ns(Ve,kt,Br){kt=ui(kt,Br);for(var qr=gr(Ve),vn=qr.length,On={},oi=0;oi<vn;oi++){var ji=qr[oi];On[ji]=kt(Ve[ji],ji,Ve)}return On}function nl(){}function Bs(Ve){return null==Ve?nl:function(kt){return Do(Ve,kt)}}function To(Ve,kt,Br){var qr=Array(Math.max(0,Ve));kt=ri(kt,Br,1);for(var vn=0;vn<Ve;vn++)qr[vn]=kt(vn);return qr}function rs(Ve,kt){return null==kt&&(kt=Ve,Ve=0),Ve+Math.floor(Math.random()*(kt-Ve+1))}Zt.toPath=Xt,Zt.iteratee=Ei;const el=Date.now||function(){return(new Date).getTime()};function gc(Ve){var kt=function(On){return Ve[On]},Br="(?:"+gr(Ve).join("|")+")",qr=RegExp(Br),vn=RegExp(Br,"g");return function(On){return qr.test(On=null==On?"":""+On)?On.replace(vn,kt):On}}const Qo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ba=gc(Qo),Et=gc(or(Qo)),Mr=Zt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Ao=/(.)^/,oa={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ba=/\\|'|\r|\n|\u2028|\u2029/g;function Vi(Ve){return"\\"+oa[Ve]}var hl=/^\s*(\w|\$)+\s*$/;function ul(Ve,kt,Br){!kt&&Br&&(kt=Br),kt=hn({},kt,Zt.templateSettings);var qr=RegExp([(kt.escape||Ao).source,(kt.interpolate||Ao).source,(kt.evaluate||Ao).source].join("|")+"|$","g"),vn=0,On="__p+='";Ve.replace(qr,function(Ls,gl,_c,fu,hu){return On+=Ve.slice(vn,hu).replace(ba,Vi),vn=hu+Ls.length,gl?On+="'+\n((__t=("+gl+"))==null?'':_.escape(__t))+\n'":_c?On+="'+\n((__t=("+_c+"))==null?'':__t)+\n'":fu&&(On+="';\n"+fu+"\n__p+='"),Ls}),On+="';\n";var oi,ji=kt.variable;if(ji){if(!hl.test(ji))throw new Error("variable is not a bare identifier: "+ji)}else On="with(obj||{}){\n"+On+"}\n",ji="obj";On="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+On+"return __p;\n";try{oi=new Function(ji,"_",On)}catch(Ls){throw Ls.source=On,Ls}var Cs=function(Ls){return oi.call(this,Ls,Zt)};return Cs.source="function("+ji+"){\n"+On+"}",Cs}function Oc(Ve,kt,Br){var qr=(kt=Ft(kt)).length;if(!qr)return mo(Br)?Br.call(Ve):Br;for(var vn=0;vn<qr;vn++){var On=Ve?.[kt[vn]];void 0===On&&(On=Br,vn=qr),Ve=mo(On)?On.call(Ve):On}return Ve}var Yl=0;function Wc(Ve){var kt=++Yl+"";return Ve?Ve+kt:kt}function Vd(Ve){var kt=Zt(Ve);return kt._chain=!0,kt}function Od(Ve,kt,Br,qr,vn){if(!(qr instanceof kt))return Ve.apply(Br,vn);var On=Un(Ve.prototype),oi=Ve.apply(On,vn);return me(oi)?oi:On}var Ml=ke(function(Ve,kt){var Br=Ml.placeholder,qr=function(){for(var vn=0,On=kt.length,oi=Array(On),ji=0;ji<On;ji++)oi[ji]=kt[ji]===Br?arguments[vn++]:kt[ji];for(;vn<arguments.length;)oi.push(arguments[vn++]);return Od(Ve,qr,this,this,oi)};return qr});Ml.placeholder=Zt;const id=Ml,Ac=ke(function(Ve,kt,Br){if(!mo(Ve))throw new TypeError("Bind must be called on a function");var qr=ke(function(vn){return Od(Ve,qr,kt,this,Br.concat(vn))});return qr}),Ea=xo(Xe);function du(Ve,kt,Br,qr){if(qr=qr||[],kt||0===kt){if(kt<=0)return qr.concat(Ve)}else kt=1/0;for(var vn=qr.length,On=0,oi=Xe(Ve);On<oi;On++){var ji=Ve[On];if(Ea(ji)&&(an(ji)||Mn(ji)))if(kt>1)du(ji,kt-1,Br,qr),vn=qr.length;else for(var Cs=0,Ls=ji.length;Cs<Ls;)qr[vn++]=ji[Cs++];else Br||(qr[vn++]=ji)}return qr}const Js=ke(function(Ve,kt){var Br=(kt=du(kt,!1,!1)).length;if(Br<1)throw new Error("bindAll must be passed function names");for(;Br--;){var qr=kt[Br];Ve[qr]=Ac(Ve[qr],Ve)}return Ve});function ad(Ve,kt){var Br=function(qr){var vn=Br.cache,On=""+(kt?kt.apply(this,arguments):qr);return lr(vn,On)||(vn[On]=Ve.apply(this,arguments)),vn[On]};return Br.cache={},Br}const Ql=ke(function(Ve,kt,Br){return setTimeout(function(){return Ve.apply(null,Br)},kt)}),Yc=id(Ql,Zt,1);function Qc(Ve,kt,Br){var qr,vn,On,oi,ji=0;Br||(Br={});var Cs=function(){ji=!1===Br.leading?0:el(),qr=null,oi=Ve.apply(vn,On),qr||(vn=On=null)},Ls=function(){var gl=el();ji||!1!==Br.leading||(ji=gl);var _c=kt-(gl-ji);return vn=this,On=arguments,_c<=0||_c>kt?(qr&&(clearTimeout(qr),qr=null),ji=gl,oi=Ve.apply(vn,On),qr||(vn=On=null)):qr||!1===Br.trailing||(qr=setTimeout(Cs,_c)),oi};return Ls.cancel=function(){clearTimeout(qr),ji=0,qr=vn=On=null},Ls}function kc(Ve,kt,Br){var qr,vn,On,oi,ji,Cs=function(){var gl=el()-vn;kt>gl?qr=setTimeout(Cs,kt-gl):(qr=null,Br||(oi=Ve.apply(ji,On)),qr||(On=ji=null))},Ls=ke(function(gl){return ji=this,On=gl,vn=el(),qr||(qr=setTimeout(Cs,kt),Br&&(oi=Ve.apply(ji,On))),oi});return Ls.cancel=function(){clearTimeout(qr),qr=On=ji=null},Ls}function zl(Ve,kt){return id(kt,Ve)}function Xc(Ve){return function(){return!Ve.apply(this,arguments)}}function eu(){var Ve=arguments,kt=Ve.length-1;return function(){for(var Br=kt,qr=Ve[kt].apply(this,arguments);Br--;)qr=Ve[Br].call(this,qr);return qr}}function Oa(Ve,kt){return function(){if(--Ve<1)return kt.apply(this,arguments)}}function Ll(Ve,kt){var Br;return function(){return--Ve>0&&(Br=kt.apply(this,arguments)),Ve<=1&&(kt=null),Br}}const ql=id(Ll,2);function as(Ve,kt,Br){kt=ui(kt,Br);for(var qr,vn=gr(Ve),On=0,oi=vn.length;On<oi;On++)if(kt(Ve[qr=vn[On]],qr,Ve))return qr}function El(Ve){return function(kt,Br,qr){Br=ui(Br,qr);for(var vn=Xe(kt),On=Ve>0?0:vn-1;On>=0&&On<vn;On+=Ve)if(Br(kt[On],On,kt))return On;return-1}}const Gu=El(1),Lc=El(-1);function Cf(Ve,kt,Br,qr){for(var vn=(Br=ui(Br,qr,1))(kt),On=0,oi=Xe(Ve);On<oi;){var ji=Math.floor((On+oi)/2);Br(Ve[ji])<vn?On=ji+1:oi=ji}return On}function et(Ve,kt,Br){return function(qr,vn,On){var oi=0,ji=Xe(qr);if("number"==typeof On)Ve>0?oi=On>=0?On:Math.max(On+ji,oi):ji=On>=0?Math.min(On+1,ji):On+ji+1;else if(Br&&On&&ji)return qr[On=Br(qr,vn)]===vn?On:-1;if(vn!=vn)return(On=kt(N.call(qr,oi,ji),sn))>=0?On+oi:-1;for(On=Ve>0?oi:ji-1;On>=0&&On<ji;On+=Ve)if(qr[On]===vn)return On;return-1}}const Ye=et(1,Gu,Cf),dt=et(-1,Lc);function Dt(Ve,kt,Br){var qr=(Ea(Ve)?Gu:as)(Ve,kt,Br);if(void 0!==qr&&-1!==qr)return Ve[qr]}function tn(Ve,kt){return Dt(Ve,Qn(kt))}function uo(Ve,kt,Br){var qr,vn;if(kt=ri(kt,Br),Ea(Ve))for(qr=0,vn=Ve.length;qr<vn;qr++)kt(Ve[qr],qr,Ve);else{var On=gr(Ve);for(qr=0,vn=On.length;qr<vn;qr++)kt(Ve[On[qr]],On[qr],Ve)}return Ve}function ao(Ve,kt,Br){kt=ui(kt,Br);for(var qr=!Ea(Ve)&&gr(Ve),vn=(qr||Ve).length,On=Array(vn),oi=0;oi<vn;oi++){var ji=qr?qr[oi]:oi;On[oi]=kt(Ve[ji],ji,Ve)}return On}function Jo(Ve){return function(kt,Br,qr,vn){var On=arguments.length>=3;return function(oi,ji,Cs,Ls){var gl=!Ea(oi)&&gr(oi),_c=(gl||oi).length,fu=Ve>0?0:_c-1;for(Ls||(Cs=oi[gl?gl[fu]:fu],fu+=Ve);fu>=0&&fu<_c;fu+=Ve){var hu=gl?gl[fu]:fu;Cs=ji(Cs,oi[hu],hu,oi)}return Cs}(kt,ri(Br,vn,4),qr,On)}}const ko=Jo(1),ra=Jo(-1);function Ri(Ve,kt,Br){var qr=[];return kt=ui(kt,Br),uo(Ve,function(vn,On,oi){kt(vn,On,oi)&&qr.push(vn)}),qr}function ls(Ve,kt,Br){return Ri(Ve,Xc(ui(kt)),Br)}function Ra(Ve,kt,Br){kt=ui(kt,Br);for(var qr=!Ea(Ve)&&gr(Ve),vn=(qr||Ve).length,On=0;On<vn;On++){var oi=qr?qr[On]:On;if(!kt(Ve[oi],oi,Ve))return!1}return!0}function es(Ve,kt,Br){kt=ui(kt,Br);for(var qr=!Ea(Ve)&&gr(Ve),vn=(qr||Ve).length,On=0;On<vn;On++){var oi=qr?qr[On]:On;if(kt(Ve[oi],oi,Ve))return!0}return!1}function Xi(Ve,kt,Br,qr){return Ea(Ve)||(Ve=yr(Ve)),("number"!=typeof Br||qr)&&(Br=0),Ye(Ve,kt,Br)>=0}const cs=ke(function(Ve,kt,Br){var qr,vn;return mo(kt)?vn=kt:(kt=Ft(kt),qr=kt.slice(0,-1),kt=kt[kt.length-1]),ao(Ve,function(On){var oi=vn;if(!oi){if(qr&&qr.length&&(On=Zn(On,qr)),null==On)return;oi=On[kt]}return null==oi?oi:oi.apply(On,Br)})});function cc(Ve,kt){return ao(Ve,Io(kt))}function Il(Ve,kt){return Ri(Ve,Qn(kt))}function vc(Ve,kt,Br){var qr,vn,On=-1/0,oi=-1/0;if(null==kt||"number"==typeof kt&&"object"!=typeof Ve[0]&&null!=Ve)for(var ji=0,Cs=(Ve=Ea(Ve)?Ve:yr(Ve)).length;ji<Cs;ji++)null!=(qr=Ve[ji])&&qr>On&&(On=qr);else kt=ui(kt,Br),uo(Ve,function(Ls,gl,_c){((vn=kt(Ls,gl,_c))>oi||vn===-1/0&&On===-1/0)&&(On=Ls,oi=vn)});return On}function Aa(Ve,kt,Br){var qr,vn,On=1/0,oi=1/0;if(null==kt||"number"==typeof kt&&"object"!=typeof Ve[0]&&null!=Ve)for(var ji=0,Cs=(Ve=Ea(Ve)?Ve:yr(Ve)).length;ji<Cs;ji++)null!=(qr=Ve[ji])&&qr<On&&(On=qr);else kt=ui(kt,Br),uo(Ve,function(Ls,gl,_c){((vn=kt(Ls,gl,_c))<oi||vn===1/0&&On===1/0)&&(On=Ls,oi=vn)});return On}function uc(Ve,kt,Br){if(null==kt||Br)return Ea(Ve)||(Ve=yr(Ve)),Ve[rs(Ve.length-1)];var qr=Ea(Ve)?dr(Ve):yr(Ve),vn=Xe(qr);kt=Math.max(Math.min(kt,vn),0);for(var On=vn-1,oi=0;oi<kt;oi++){var ji=rs(oi,On),Cs=qr[oi];qr[oi]=qr[ji],qr[ji]=Cs}return qr.slice(0,kt)}function Ic(Ve){return uc(Ve,1/0)}function sd(Ve,kt,Br){var qr=0;return kt=ui(kt,Br),cc(ao(Ve,function(vn,On,oi){return{value:vn,index:qr++,criteria:kt(vn,On,oi)}}).sort(function(vn,On){var oi=vn.criteria,ji=On.criteria;if(oi!==ji){if(oi>ji||void 0===oi)return 1;if(oi<ji||void 0===ji)return-1}return vn.index-On.index}),"value")}function Rc(Ve,kt){return function(Br,qr,vn){var On=kt?[[],[]]:{};return qr=ui(qr,vn),uo(Br,function(oi,ji){var Cs=qr(oi,ji,Br);Ve(On,oi,Cs)}),On}}const Dd=Rc(function(Ve,kt,Br){lr(Ve,Br)?Ve[Br].push(kt):Ve[Br]=[kt]}),zd=Rc(function(Ve,kt,Br){Ve[Br]=kt}),Jp=Rc(function(Ve,kt,Br){lr(Ve,Br)?Ve[Br]++:Ve[Br]=1}),Ks=Rc(function(Ve,kt,Br){Ve[Br?0:1].push(kt)},!0);var dl=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Rl(Ve){return Ve?an(Ve)?N.call(Ve):Ct(Ve)?Ve.match(dl):Ea(Ve)?ao(Ve,Jn):yr(Ve):[]}function Gl(Ve){return null==Ve?0:Ea(Ve)?Ve.length:gr(Ve).length}function ld(Ve,kt,Br){return kt in Br}const qu=ke(function(Ve,kt){var Br={},qr=kt[0];if(null==Ve)return Br;mo(qr)?(kt.length>1&&(qr=ri(qr,kt[1])),kt=ts(Ve)):(qr=ld,kt=du(kt,!1,!1),Ve=Object(Ve));for(var vn=0,On=kt.length;vn<On;vn++){var oi=kt[vn],ji=Ve[oi];qr(ji,oi,Ve)&&(Br[oi]=ji)}return Br}),xu=ke(function(Ve,kt){var Br,qr=kt[0];return mo(qr)?(qr=Xc(qr),kt.length>1&&(Br=kt[1])):(kt=ao(du(kt,!1,!1),String),qr=function(vn,On){return!Xi(kt,On)}),qu(Ve,qr,Br)});function Dp(Ve,kt,Br){return N.call(Ve,0,Math.max(0,Ve.length-(null==kt||Br?1:kt)))}function Dc(Ve,kt,Br){return null==Ve||Ve.length<1?null==kt||Br?void 0:[]:null==kt||Br?Ve[0]:Dp(Ve,Ve.length-kt)}function cd(Ve,kt,Br){return N.call(Ve,null==kt||Br?1:kt)}function Ef(Ve,kt,Br){return null==Ve||Ve.length<1?null==kt||Br?void 0:[]:null==kt||Br?Ve[Ve.length-1]:cd(Ve,Math.max(0,Ve.length-kt))}function oc(Ve){return Ri(Ve,Boolean)}function Tp(Ve,kt){return du(Ve,kt,!1)}const ml=ke(function(Ve,kt){return kt=du(kt,!0,!0),Ri(Ve,function(Br){return!Xi(kt,Br)})}),Yp=ke(function(Ve,kt){return ml(Ve,kt)});function Mu(Ve,kt,Br,qr){Ze(kt)||(qr=Br,Br=kt,kt=!1),null!=Br&&(Br=ui(Br,qr));for(var vn=[],On=[],oi=0,ji=Xe(Ve);oi<ji;oi++){var Cs=Ve[oi],Ls=Br?Br(Cs,oi,Ve):Cs;kt&&!Br?(oi&&On===Ls||vn.push(Cs),On=Ls):Br?Xi(On,Ls)||(On.push(Ls),vn.push(Cs)):Xi(vn,Cs)||vn.push(Cs)}return vn}const pu=ke(function(Ve){return Mu(du(Ve,!0,!0))});function Zc(Ve){for(var kt=[],Br=arguments.length,qr=0,vn=Xe(Ve);qr<vn;qr++){var On=Ve[qr];if(!Xi(kt,On)){var oi;for(oi=1;oi<Br&&Xi(arguments[oi],On);oi++);oi===Br&&kt.push(On)}}return kt}function ud(Ve){for(var kt=Ve&&vc(Ve,Xe).length||0,Br=Array(kt),qr=0;qr<kt;qr++)Br[qr]=cc(Ve,qr);return Br}const dd=ke(ud);function Fs(Ve,kt){for(var Br={},qr=0,vn=Xe(Ve);qr<vn;qr++)kt?Br[Ve[qr]]=kt[qr]:Br[Ve[qr][0]]=Ve[qr][1];return Br}function Tc(Ve,kt,Br){null==kt&&(kt=Ve||0,Ve=0),Br||(Br=kt<Ve?-1:1);for(var qr=Math.max(Math.ceil((kt-Ve)/Br),0),vn=Array(qr),On=0;On<qr;On++,Ve+=Br)vn[On]=Ve;return vn}function tu(Ve,kt){if(null==kt||kt<1)return[];for(var Br=[],qr=0,vn=Ve.length;qr<vn;)Br.push(N.call(Ve,qr,qr+=kt));return Br}function Td(Ve,kt){return Ve._chain?Zt(kt).chain():kt}function Sd(Ve){return uo(Tr(Ve),function(kt){var Br=Zt[kt]=Ve[kt];Zt.prototype[kt]=function(){var qr=[this._wrapped];return T.apply(qr,arguments),Td(this,Br.apply(Zt,qr))}}),Zt}uo(["pop","push","reverse","shift","sort","splice","unshift"],function(Ve){var kt=D[Ve];Zt.prototype[Ve]=function(){var Br=this._wrapped;return null!=Br&&(kt.apply(Br,arguments),"shift"!==Ve&&"splice"!==Ve||0!==Br.length||delete Br[0]),Td(this,Br)}}),uo(["concat","join","slice"],function(Ve){var kt=D[Ve];Zt.prototype[Ve]=function(){var Br=this._wrapped;return null!=Br&&(Br=kt.apply(Br,arguments)),Td(this,Br)}});const pd=Zt;var Nl=Sd(z);Nl._=Nl;const ic=Nl}},re={};function O(m){var X=re[m];if(void 0!==X)return X.exports;var x=re[m]={exports:{}};return ue[m].call(x.exports,x,x.exports,O),x.exports}O.n=m=>{var X=m&&m.__esModule?()=>m.default:()=>m;return O.d(X,{a:X}),X},O.d=(m,X)=>{for(var x in X)O.o(X,x)&&!O.o(m,x)&&Object.defineProperty(m,x,{enumerable:!0,get:X[x]})},O.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),O.o=(m,X)=>Object.prototype.hasOwnProperty.call(m,X),O.r=m=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(m,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(m,"__esModule",{value:!0})};var S={};return(()=>{"use strict";O.d(S,{default:()=>l_});var m=O(5706),X=O(9195);function x(h){for(var s=[],t=1;t<arguments.length;t++)s[t-1]=arguments[t];var n=h.raw;return n.reduce(function(i,u,y){var I=s[y-1],W=n[y-1];return Array.isArray(I)?I=I.join(""):W&&"$"===W.slice(-1)?i=i.slice(0,-1):I=(0,X.escape)(I),i+I+u})}var U,H=O(4193),G=O.n(H),D=O(6411),R=O(1749),T=(U=function(h,s){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])})(h,s)},function(h,s){if("function"!=typeof s&&null!==s)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function t(){this.constructor=h}U(h,s),h.prototype=null===s?Object.create(s):(t.prototype=s.prototype,new t)}),N=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return T(s,h),s}(R.Kx);const L=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return T(s,h),s.prototype.getByComponent=function(t){var n=this;return this.filter(function(i){return n.getComponent(i)===t})[0]},s.prototype.addComponent=function(t,n){var i=this,u=((0,m.isArray)(t)?t:[t]).filter(function(y){return!i.hasComponent(y)}).map(function(y){return new N({component:y})})[0];return this.push(u,n)},s.prototype.getComponent=function(t){return t.get("component")},s.prototype.hasComponent=function(t){var n=this.getByComponent(t);return n&&this.contains(n)},s.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},s.prototype.allComponents=function(){var t=this;return this.map(function(n){return t.getComponent(n)}).filter(function(n){return n})},s.prototype.removeComponent=function(t,n){var i=this,u=((0,m.isArray)(t)?t:[t]).map(function(y){return i.getByComponent(y)});return this.remove(u,n)},s}(R.pM);var h,Y=(h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)},function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ee=function(){return ee=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},ee.apply(this,arguments)},pe=function(){function h(s,t,n){this.debounced=[],this.collections=[],this.cls=[],this._em=s,this._name=t;var i=this.name.charAt(0).toLowerCase()+this.name.slice(1),u=(0,m.isUndefined)(s.config[i])?s.config[this.name]:s.config[i],y=!0===u?{}:u||{};y.pStylePrefix=s.config.pStylePrefix||"",(0,m.isUndefined)(u)||u||(y._disable=1),y.em=s,this._config=(0,X.deepMerge)(n||{},y)}return Object.defineProperty(h.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),h.prototype.render=function(s){},h.prototype.postLoad=function(s){},Object.defineProperty(h.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),h.prototype.getConfig=function(s){return s?this.config[s]:this.config},h.prototype.__logWarn=function(s,t){void 0===t&&(t={}),this.em.logWarning("[".concat(this.name,"]: ").concat(s),t)},h.prototype.destroy=function(){this.__destroy()},h.prototype.__destroy=function(){var s,t,n;null===(s=this.view)||void 0===s||s.remove(),null===(t=this.state)||void 0===t||t.stopListening(),null===(n=this.state)||void 0===n||n.clear(),this.debounced.forEach(function(i){return i.cancel()}),this.collections.forEach(function(i){i.stopListening(),i.reset()})},h.prototype.__appendTo=function(){var s=this.getConfig().appendTo;if(s){var t=(0,m.isElement)(s)?s:document.querySelector(s);if(!t)return this.__logWarn('"appendTo" element not found');t.appendChild(this.render())}},h}();const we=pe;var Te=function(h){function s(t,n,i,u,y,I){void 0===I&&(I={});var W=h.call(this,t,n,y)||this;return W.cls=[],W.private=!1,W.all=i,W.events=u,!I.skipListen&&W.__initListen(),W}return Y(s,h),s.prototype.postLoad=function(t){},s.prototype.render=function(t){},s.prototype.getProjectData=function(t){var n={},i=this.storageKey;return i&&(n[i]=t||this.getAll()),n},s.prototype.loadProjectData=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var u=n.onResult,y=n.reset,W={action:"load"},ce=n.all||this.all,ie=t[this.storageKey];if("string"==typeof ie)try{ie=JSON.parse(ie)}catch{this.__logWarn("Data parsing failed",{input:ie})}return y&&ie&&ce.reset(void 0,W),u?ie&&u(ie,W):ie&&(0,X.isDef)(ie.length)&&ce.reset(ie,W),ie},s.prototype.clear=function(t){void 0===t&&(t={});var n=this.all;return n&&n.reset(void 0,t),this},s.prototype.getAll=function(){return function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],this.all.models,!0)},s.prototype.getAllMap=function(){return this.getAll().reduce(function(t,n){return t[n.get(n.idAttribute)]=n,t},{})},s.prototype.__initListen=function(t){void 0===t&&(t={});var n=this,i=n.all,u=n.em,y=n.events;i&&u&&i.on("add",function(I,W,ce){return u.trigger(y.add,I,ce)}).on("remove",function(I,W,ce){return u.trigger(y.remove,I,ce)}).on("change",function(I,W){return u.trigger(y.update,I,I.changedAttributes(),W)}).on("all",this.__catchAllEvent,this),this.cls=[i].concat(t.collections||[]),(t.propagate||[]).forEach(function(I){var ce=I.event;I.entity.on("all",function(ie,Re,qe,ct){var qt=ee({event:ie},ct||qe);[u,i].map(function(_r){return _r.trigger(ce,Re,qt)})})})},s.prototype.__remove=function(t,n){var i=this;void 0===n&&(n={});var u=this.em,y=(0,m.isString)(t)?this.get(t):t,I=function(){return y&&i.all.remove(y,n),y};return!n.silent&&u?.trigger(this.events.removeBefore,y,I,n),!n.abort&&I()},s.prototype.__catchAllEvent=function(t,n,i,u){var y=this.em,I=this.events;y&&I.all&&y.trigger(I.all,{event:t,model:n,options:u||i}),this.__onAllEvent()},s.prototype.__appendTo=function(t){var n=this.config.appendTo;if(n){var i=(0,m.isElement)(n)?n:document.querySelector(n);if(!i)return this.__logWarn('"appendTo" element not found');i.appendChild(this.render(t))}},s.prototype.__onAllEvent=function(){},s.prototype._createId=function(t){void 0===t&&(t=16);var n,i=this.getAll().length+t,u=this.getAllMap();do{n=(0,X.createId)(i)}while(u[n]);return n},s.prototype.__listenAdd=function(t,n){var i=this;t.on("add",function(u,y,I){return i.em.trigger(n,u,I)})},s.prototype.__listenRemove=function(t,n){var i=this;t.on("remove",function(u,y,I){return i.em.trigger(n,u,I)})},s.prototype.__listenUpdate=function(t,n){var i=this;t.on("change",function(u,y){return i.em.trigger(n,u,u.changedAttributes(),y)})},s.prototype.__destroy=function(){var t;this.cls.forEach(function(n){n.stopListening(),n.reset()}),null===(t=this.view)||void 0===t||t.remove(),this.view=void 0},s}(pe),Ce=O(3023),je=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Ue=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return je(s,h),s.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},s.prototype.initialize=function(){var t=this;null===this.get("widthMedia")&&this.set("widthMedia",this.get("width")),null===this.get("width")&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(n){return t.checkUnit(n)})},s.prototype.checkUnit=function(t){var n=this.get(t)||"";(parseFloat(n)||0).toString()===n.toString()&&this.set(t,"".concat(n,"px"))},s.prototype.getName=function(){return this.get("name")||this.get("id")},s.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},s}(R.Kx);var Le=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ke=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Le(s,h),s}(R.pM);const me=ke;ke.prototype.model=Ue;var l=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ze=function(h){function s(t){var n=h.call(this,t)||this;return n.config=t.config||{},n.em=n.config.em,n.ppfx=n.config.pStylePrefix||"",n.listenTo(n.em,"change:device",n.updateSelect),n}return l(s,h),s.prototype.template=function(t){var n=t.ppfx,i=t.label;return x($e||($e=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h}(['\n      <div class="','device-label">','</div>\n      <div class="',"field ",'select">\n        <span id="','input-holder">\n          <select class="','devices"></select>\n        </span>\n        <div class="','sel-arrow">\n          <div class="','d-s-arrow"></div>\n        </div>\n      </div>\n      <button style="display:none" class="','add-trasp" data-add-trasp>+</button>\n    '],['\n      <div class="','device-label">','</div>\n      <div class="',"field ",'select">\n        <span id="','input-holder">\n          <select class="','devices"></select>\n        </span>\n        <div class="','sel-arrow">\n          <div class="','d-s-arrow"></div>\n        </div>\n      </div>\n      <button style="display:none" class="','add-trasp" data-add-trasp>+</button>\n    '])),n,i,n,n,n,n,n,n,n)},s.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},s.prototype.startAdd=function(){},s.prototype.updateDevice=function(){var t=this.em;if(t){var n=this.devicesEl;t.set("device",n?n.val():"")}},s.prototype.updateSelect=function(){var t=this.em,n=this.devicesEl;if(t&&t.getDeviceModel&&n){var i=t.getDeviceModel();n.val(i?i.get("id"):"")}},s.prototype.getOptions=function(){var n=this.em,i="";return this.collection.forEach(function(u){var y=u.attributes,I=y.name,W=y.id,ce=n&&n.t&&n.t("deviceManager.devices.".concat(W))||I;i+='<option value="'.concat(W||I,'">').concat(ce,"</option>")}),i},s.prototype.render=function(){var t=this,n=t.em,i=t.ppfx,u=t.$el,y=t.el,I=n&&n.t&&n.t("deviceManager.device");return u.html(this.template({ppfx:i,label:I})),this.devicesEl=u.find(".".concat(i,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(n.get("device")),y.className="".concat(i,"devices-c"),this},s}(R.Ss);const ut=Ze;var $e,Ct=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ke=function(){return Ke=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ke.apply(this,arguments)},mr="".concat("device",":"),nr="".concat(mr,"select"),Kr=("".concat(nr,":before"),"".concat(mr,"update")),Pn="".concat(mr,"add"),Kn=("".concat(Pn,":before"),"".concat(mr,"remove")),Mo="".concat(Kn,":before"),No={all:"device",select:nr,update:Kr,add:Pn,remove:Kn,removeBefore:Mo},Di=function(h){function s(t){var n,i=h.call(this,t,"DeviceManager",new me,No,{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]})||this;return i.Device=Ue,i.Devices=me,i.storageKey="",i.devices=i.all,null===(n=i.config.devices)||void 0===n||n.forEach(function(u){return i.add(u,{silent:!0})}),i.select(i.config.default||i.devices.at(0)),t.on("change:device",i._onSelect,i),i}return Ct(s,h),s.prototype._onSelect=function(t,n,i){var u=this.em,y=this.events,I=t.previous("device"),W=this.get(n),ce=y.select;u.trigger(ce,W,this.get(I)),this.__catchAllEvent(ce,W,i)},s.prototype.add=function(t,n){var i;void 0===n&&(n={});var u=n;if((0,m.isString)(t)){var y=n;i=Ke(Ke({},u=arguments[2]||{}),{id:t,name:u.name||t,width:y})}else i=t;return i.id||(i.id=i.name||this._createId()),this.devices.add(i,u)},s.prototype.get=function(t){return this.getAll().filter(function(n){return n.get("name")===t})[0]||this.devices.get(t)||null},s.prototype.remove=function(t,n){return void 0===n&&(n={}),this.__remove(t,n)},s.prototype.getDevices=function(){return this.devices.models},s.prototype.select=function(t,n){void 0===n&&(n={});var i=(0,m.isString)(t)?this.get(t):t;return i&&this.em.set("device",i.get("id"),n),this},s.prototype.getSelected=function(){return this.get(this.em.get("device"))},s.prototype.getAll=function(){return this.devices},s.prototype.render=function(){var t,n=this.em;return null===(t=this.view)||void 0===t||t.remove(),this.view=new ut({collection:this.devices,config:Ke({em:n},this.config)}),this.view.render().el},s.prototype.destroy=function(){this.__destroy()},s}(Te);const ci=Di;var zn;!function(h){h.add="page:add",h.addBefore="page:add:before",h.remove="page:remove",h.removeBefore="page:remove:before",h.select="page:select",h.selectBefore="page:select:before",h.update="page:update",h.all="page"}(zn||(zn={}));const Wn=zn;var an=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),lr=function(h){function s(t,n,i){return h.call(this,n,{module:t,modelConstructor:i})||this}return an(s,h),s.prototype.add=function(t,n){var i,u=this,y=(0,m.isArray)(t)?t:(0,m.isUndefined)(t)?void 0:[t];return y=null!==(i=y?.map(function(I){return I instanceof u.newModel?I:new u.newModel(u.module,I)}))&&void 0!==i?i:[void 0],h.prototype.add.call(this,(0,m.isArray)(t)?y:y[0],n)},s.prototype.preinitialize=function(t,n){this.newModel=n.modelConstructor,this.module=n.module},s}(R.pM);const Pr=lr;var Mn=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),dn=function(){return dn=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},dn.apply(this,arguments)},sn=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},Vo=function(h,s){var t,n=h.get(s),i=null===(t=h.view)||void 0===t?void 0:t.el["width"===s?"offsetWidth":"offsetHeight"];return(0,m.isNumber)(n)?n:(0,m.isString)(n)&&n.endsWith("px")?parseFloat(n):i||0},aa=function(h){function s(t,n){var i=h.call(this,t,n)||this,u=i.em,y=i.attributes,I=y.styles,W=y.component,ce=u.Components,ie=ce.getConfig(),Re=u.Css.getAll(),qe={},ct={em:u,config:ie,frame:i,idMap:qe};if(!(0,X.isComponent)(W)){var qt=(0,X.isObject)(W)?W:{components:W};!qt.type&&(qt.type="wrapper");var _r=ce.getType("wrapper").model;i.set("component",new _r(qt,ct))}if(I){if(!(0,X.isObject)(I)){var zr=I;(0,m.keys)(qe).length&&(zr=(0,m.isString)(zr)?u.Parser.parseCss(zr):zr,u.Css.checkId(zr,{idMap:qe})),Re.add(zr),i.set("styles",Re)}}else i.set("styles",Re);return!n.width&&i.set("__aw",1),!n.height&&i.set("__ah",1),!i.id&&i.set("id",(0,X.createId)()),i}return Mn(s,h),s.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(s.prototype,"width",{get:function(){return Vo(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"height",{get:function(){return Vo(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"root",{get:function(){var t=this.refFrame;return t?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),s.prototype.initRefs=function(){var t=this.refFrame;if((0,m.isString)(t)){var n=this.module.framesById[t];n&&this.set({refFrame:n},{silent:!0})}},s.prototype.getBoxRect=function(){var t=this.attributes;return{x:t.x,y:t.y,width:this.width,height:this.height}},s.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},s.prototype.changesUp=function(t){void 0===t&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set("changesCount",this.get("changesCount")+1)},s.prototype.getComponent=function(){return this.get("component")},s.prototype.getStyles=function(){return this.get("styles")},s.prototype.disable=function(){this.trigger("disable")},s.prototype.remove=function(){var t;null===(t=this.view)||void 0===t||t.remove(),this.view=void 0;var n=this.collection;return n&&n.remove(this)},s.prototype.getHead=function(){return sn([],this.head,!0)},s.prototype.setHead=function(t){return this.set("head",sn([],t,!0))},s.prototype.addHeadItem=function(t){this.head.push(t)},s.prototype.getHeadByAttr=function(t,n,i){return this.head.filter(function(u){return u.attributes&&u.attributes[t]==n&&(!i||i===u.tag)})[0]},s.prototype.removeHeadByAttr=function(t,n,i){var u=this.getHeadByAttr(t,n,i),y=this.head.indexOf(u);y>=0&&this.head.splice(y,1)},s.prototype.addLink=function(t){var n="link";!this.getHeadByAttr("href",t,n)&&this.addHeadItem({tag:n,attributes:{href:t,rel:"stylesheet"}})},s.prototype.removeLink=function(t){this.removeHeadByAttr("href",t,"link")},s.prototype.addScript=function(t){var n="script";!this.getHeadByAttr("src",t,n)&&this.addHeadItem({tag:n,attributes:{src:t}})},s.prototype.removeScript=function(t){this.removeHeadByAttr("src",t,"script")},s.prototype.getPage=function(){var t;return null===(t=this.collection)||void 0===t?void 0:t.page},s.prototype._emitUpdated=function(t){void 0===t&&(t={}),this.em.trigger("frame:updated",dn({frame:this},t))},s.prototype.hasAutoHeight=function(){return!("auto"!==this.attributes.height&&!this.config.infiniteCanvas)},s.prototype.toJSON=function(t){void 0===t&&(t={});var n=Ce.A.prototype.toJSON.call(this,t),i=(0,m.result)(this,"defaults");return t.fromUndo&&delete n.component,delete n.styles,delete n.changesCount,n.__aw&&delete n.width,n.__ah&&delete n.height,n.refFrame&&(n.refFrame=n.refFrame.id,delete n.component),(0,m.forEach)(n,function(u,y){0===y.indexOf("_")&&delete n[y]}),(0,m.forEach)(i,function(u,y){n[y]===u&&delete n[y]}),(0,m.forEach)(["attributes","head"],function(u){(0,m.isEmpty)(n[u])&&delete n[u]}),n},s}(Ce.A);const Fa=aa;var Qr=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const ze=function(h){function s(t,n){void 0===n&&(n=[]);var i=h.call(this,t,n,Fa)||this;return i.loadedItems=0,i.itemsToLoad=0,(0,m.bindAll)(i,"itemLoaded"),i.on("add",i.onAdd),i.on("reset",i.onReset),i.on("remove",i.onRemove),i.forEach(function(u){return i.onAdd(u)}),i}return Qr(s,h),s.prototype.onAdd=function(t){this.module.framesById[t.id]=t},s.prototype.onReset=function(t,n){var i=this;(n?.previousModels||[]).map(function(u){return i.onRemove(u)})},s.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},s.prototype.initRefs=function(){this.forEach(function(t){return t.initRefs()})},s.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},s.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},s.prototype.listenToLoadItems=function(t){var n=this;this.forEach(function(i){return i[t?"on":"off"]("loaded",n.itemLoaded)})},s}(Pr);var Xe=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),at=function(h){function s(t){var n=this,i=t.em,u=t.config;return(n=h.call(this,t,{scripts:u.scripts,styles:u.styles})||this).set("frames",new ze(t)),n.on("change:zoom",n.onZoomChange),n.on("change:x change:y",n.onCoordsChange),n.on("change:pointer change:pointerScreen",n.onPointerChange),n.listenTo(i,"change:device ".concat(Kr),n.updateDevice),n.listenTo(i,Wn.select,n._pageUpdated),n}return Xe(s,h),s.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:R.lK,pointerScreen:R.lK}},Object.defineProperty(s.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),s.prototype.init=function(){var t=this.em.Pages._initPage();this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},s.prototype._pageUpdated=function(t,n){var i=this.em;i.setSelected(),i.get("readyCanvas")&&i.stopDefault(),n?.getFrames().map(function(u){return u.disable()}),this.set("frames",t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},s.prototype.updateDevice=function(t){void 0===t&&(t={});var n=this.em,i=n.getDeviceModel(),u=t.frame||n.getCurrentFrameModel();if(u&&i){var y=i.attributes;u.set({width:y.width,height:y.height,minHeight:y.minHeight},{noUndo:1})}},s.prototype.onZoomChange=function(t,n,i){var u=this.em,y=this.module;this.get("zoom")<1&&this.set("zoom",1),u.trigger(y.events.zoom,{options:i})},s.prototype.onCoordsChange=function(){this.em.trigger(this.module.events.coords)},s.prototype.onPointerChange=function(){this.em.trigger(this.module.events.pointer)},s.prototype.getPointerCoords=function(t){void 0===t&&(t=R.x2.World);var n=this.attributes;return t===R.x2.World?n.pointer:n.pointerScreen},s}(Ce.A);const gr=at;var Pt=O(2820),mt=O(3172),Zt=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ln=function(h){function s(t,n){void 0===n&&(n=[]);var i=h.call(this,t,n,Pt.A)||this;i.on("add",i.onAdd),i.on("change",i.onChange),i.on("remove",i.onRemove);var u=i.em;i.refreshDbn=(0,m.debounce)(function(){return i.refresh()},0);var y="component:resize styleable:change component:input ".concat(mt.I.update," frame:updated undo redo");return i.listenTo(u,y,function(){return i.refreshDbn()}),i}return Zt(s,h),Object.defineProperty(s.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),s.prototype.refresh=function(){this.em.trigger(this.events.spot)},s.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},s.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},s.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},s.prototype.__trgEvent=function(t,n){this.module.em.trigger(t,n),this.refreshDbn()},s}(Pr);const no=ln;var oo;!function(h){h.dragEnter="canvas:dragenter",h.dragOver="canvas:dragover",h.dragEnd="canvas:dragend",h.dragData="canvas:dragdata",h.drop="canvas:drop",h.spot="canvas:spot",h.spotAdd="canvas:spot:add",h.spotUpdate="canvas:spot:update",h.spotRemove="canvas:spot:remove",h.coords="canvas:coords",h.zoom="canvas:zoom",h.pointer="canvas:pointer",h.refresh="canvas:refresh",h.frameLoad="canvas:frame:load",h.frameLoadHead="canvas:frame:load:head",h.frameLoadBody="canvas:frame:load:body"}(oo||(oo={}));const Ki=oo;var li=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ts=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return li(s,h),Object.defineProperty(s.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"module",{get:function(){var t,n;return null!==(n=null===(t=this.model)||void 0===t?void 0:t.module)&&void 0!==n?n:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),s.prototype.preinitialize=function(t){this.className=""},s}(R.Ss);const Nt=ts;var jt=O(2097),gt=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Fr=function(h){function s(t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var i=h.call(this,t)||this;return i.itemsView="",i.itemType="type",i.reuseView=!1,i.viewCollection=[],n&&i.listenTo(i.collection,"add",i.addTo),i}return gt(s,h),s.prototype.addTo=function(t){this.add(t)},s.prototype.itemViewNotFound=function(t){},s.prototype.add=function(t,n){var i,u=this.reuseView,y=this.viewCollection,I=n||null,W=t.get(this.itemType);i=t.view&&u?t.view:this.renderView(t,W),y.push(i);var ce=i.render().el;I?I.appendChild(ce):this.$el.append(ce)},s.prototype.render=function(){var t=this,n=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(i){return t.add(i,n)}),this.$el.append(n),this.onRender(),this},s.prototype.onRender=function(){},s.prototype.onRemoveBefore=function(t,n){},s.prototype.onRemove=function(t,n){},s.prototype.remove=function(t){void 0===t&&(t={});var n=this.viewCollection;return this.onRemoveBefore(n,t),this.clearItems(),R.Ss.prototype.remove.apply(this,t),this.onRemove(n,t),this},s.prototype.clearItems=function(){},s}(Nt);var tr=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const wt=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;n.config=t.config||{};var i=n.model;return n.listenTo(i,"change",n.render),n.listenTo(i,"destroy remove",n.remove),n.listenTo(i.get("selectors"),"change",n.render),i.setView(n),n}return tr(s,h),Object.defineProperty(s.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),s.prototype.remove=function(){return h.prototype.remove.call(this),this.model.removeView(this),this},s.prototype.updateStyles=function(){this.render()},s.prototype.tagName=function(){return"style"},s.prototype.render=function(){var t=this.model,n=this.el,i=t.get("important");return n.innerHTML=t.toCSS({important:i}),this},s}(R.Ss);var St=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const vr=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return St(s,h),s.prototype._createElement=function(){return document.createTextNode("")},s.prototype.render=function(){var t=this.model,n=t.get("important");return this.el.textContent=t.getDeclaration({important:n}),this},s}(wt);var fn=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ko=function(h,s){return"".concat(h).concat(s?"-".concat(parseFloat(s)):"")},Ro=function(h){function s(t){var n=h.call(this,t)||this;(0,m.bindAll)(n,"sortRules");var i=t.config||{};n.atRules={},n.config=i,n.em=i.em,n.pfx=i.stylePrefix||"",n.className=n.pfx+"rules";var u=n.collection;return n.listenTo(u,"add",n.addTo),n.listenTo(u,"reset",n.render),n}return fn(s,h),s.prototype.addTo=function(t){this.addToCollection(t)},s.prototype.addToCollection=function(t,n){if(this.renderStarted){var i,u,y=n||null,I={model:t,config:this.config};if("keyframes"===t.get("atRuleType")){var W=t.getAtRule(),ce=this.atRules[W];if(!ce){var ie=document.createElement("style");ce=document.createTextNode(""),ie.appendChild(document.createTextNode("".concat(W,"{"))),ie.appendChild(ce),ie.appendChild(document.createTextNode("}")),this.atRules[W]=ce,i=ie}u=new vr(I),ce.appendData(u.render().el.textContent)}else i=(u=new wt(I)).render().el;var Re=this.className,qe=t.get("mediaText"),ct=Ko(Re),qt=ct;if(qe&&(qt=Ko(Re,this.getMediaWidth(qe))),i){var _r=y||this.el,zr=void 0;try{zr=_r.querySelector("#".concat(qt))}catch{}zr||(zr=_r.querySelector("#".concat(ct))),zr?.appendChild(i)}return i}},s.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},s.prototype.sortRules=function(t,n){var i=-1!==(this.em.getConfig().mediaCondition||"").indexOf("min-width");return i?(i?t:n)-(i?n:t):0},s.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var n=this,i=n.em,u=n.$el,y=n.collection,I=this.className,W=document.createDocumentFragment();u.empty();var ce=i.Devices.getAll().pluck("priority").sort(this.sortRules);return ce.every(function(ie){return ie})&&ce.unshift(0),ce.forEach(function(ie){return W.appendChild((0,jt.a_)("div",{id:Ko(I,ie)}))}),y.each(function(ie){return t.addToCollection(ie,W)}),u.append(W),u.attr("class",I),this},s}(R.Ss);const Ln=Ro;var or,yr="text/html",kr=yr;!function(h){h.html="parse:html",h.htmlRoot="parse:html:root",h.htmlBefore="parse:html:before",h.css="parse:css",h.cssBefore="parse:css:before",h.all="parse"}(or||(or={}));var Tr=function(){return Tr=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Tr.apply(this,arguments)};const Lt=function(h,s){return void 0===s&&(s={}),{compTypes:[],modelAttrStart:"data-gjs-",getPropAttribute:function(t,n){var i=t.replace(this.modelAttrStart,""),u=n?.length||0,y=n?.substring(0,1),I=n?.substring(u-1),W="true"===n||"false"!==n&&n;try{W="{"==y&&"}"==I||"["==y&&"]"==I?JSON.parse(W):W}catch{}return{name:i,value:W}},splitPropsFromAttr:function(t){var n=this;void 0===t&&(t={});var i={},u={};return(0,m.each)(t,function(y,I){if(0===I.indexOf(n.modelAttrStart)){var W=n.getPropAttribute(I,y);i[W.name]=W.value}else u[I]=y}),{props:i,attrs:u}},parseStyle:function(t){for(var n={};t.indexOf("/*")>=0;){var i=t.indexOf("/*"),u=t.indexOf("*/")+2;t=t.replace(t.slice(i,u),"")}for(var y=t.split(";"),I=0,W=y.length;I<W;I++){var ce=y[I].trim();if(ce){var ie=ce.split(":"),Re=ie[0].trim(),qe=ie.slice(1).join(":").trim();n[Re]?((0,m.isArray)(n[Re])||(n[Re]=[n[Re]]),n[Re].push(qe)):n[Re]=qe}}return n},parseClass:function(t){for(var n=[],i=t.split(" "),u=0,y=i.length;u<y;u++){var I=i[u].trim();I&&n.push(I)}return n},parseNodeAttr:function(t,n){for(var i=n||{},u=t.attributes||[],y=u.length,I=0;I<y;I++){var W=u[I].nodeName,ce=u[I].nodeValue;if("style"==W)i.style=this.parseStyle(ce);else if("class"==W)i.classes=this.parseClass(ce);else{if("contenteditable"==W)continue;if(0===W.indexOf(this.modelAttrStart)){var ie=this.getPropAttribute(W,ce);i[ie.name]=ie.value}else""===ce&&!0===t[W]&&(ce=!0),i.attributes||(i.attributes={}),i.attributes[W]=ce}}return i},detectNode:function(t,n){var i;void 0===n&&(n={});var u=this.compTypes,y={};if(u){var I=null===(i=t.getAttribute)||void 0===i?void 0:i.call(t,"".concat(this.modelAttrStart,"type"));if(I)y={type:I};else for(var W=0;W<u.length;W++){var ce=u[W],ie=ce.model.isComponent(t,n);if(ie){"object"!=typeof ie&&(ie={type:ce.id}),y=ie;break}}}return y},parseNode:function(t,n){var i;void 0===n&&(n={});var u=(null===(i=t.content)||void 0===i?void 0:i.childNodes)||t.childNodes,y=u.length,I=this.detectNode(t,n);if(!I.tagName){var W=t.tagName||"";I.tagName=W&&"http://www.w3.org/1999/xhtml"===(t.namespaceURI||"")?W.toLowerCase():W}if(I=this.parseNodeAttr(t,I),y||"/>"!=="".concat(t.outerHTML).slice(-2)||(I.void=!0),y&&!I.components&&!n.skipChildren){var ie=u[0];1===y&&3===ie.nodeType?(!I.type&&(I.type="text"),I.components={type:"textnode",content:ie.nodeValue}):I.components=this.parseNodes(t,Tr(Tr({},n),{inSvg:n.inSvg||"svg"===I.type}))}var Re=I.components;if(!I.type&&Re?.length){for(var qe=s.textTypes,ct=void 0===qe?[]:qe,qt=s.textTags,_r=void 0===qt?[]:qt,zr=!0,br=!1,co=0;co<Re.length;co++){var Bo=Re[co],Oi=Bo.type;if(!ct.includes(Oi)&&!_r.includes(Bo.tagName)){zr=!1;break}"textnode"===Oi&&(br=!0)}zr&&br&&(I.type="text")}return I},parseNodes:function(t,n){var i;void 0===n&&(n={});for(var u=[],y=(null===(i=t.content)||void 0===i?void 0:i.childNodes)||t.childNodes,I=y.length,W=0;W<I;W++){var ce=y[W],ie=u[u.length-1],Re=this.parseNode(ce,n);if("textnode"===Re.type){if("textnode"===ie?.type){ie.content+=Re.content;continue}if(!n.keepEmptyTextNodes){var qe=ce.nodeValue||"",ct=0===W||W===I-1,qt=qe.includes("\n");if(" "!=qe&&!qe.trim()&&(ct||qt))continue}}!Re.tagName&&(0,m.isUndefined)(Re.content)||u.push(Re)}return u},parse:function(t,n,i){var u,y,I;void 0===i&&(i={});var W=h?.get("Config")||{},ce=h?.Parser,ie={html:[]},Re=Tr(Tr({},s),i),qe=Tr(Tr(Tr({},s.optionsHtml),{htmlType:(null===(u=s.optionsHtml)||void 0===u?void 0:u.htmlType)||s.htmlType}),i),ct=Tr(Tr({},qe),{asDocument:this.__checkAsDocument(t,qe)}),qt=ct.preParser,_r=ct.asDocument,zr={input:(0,m.isFunction)(qt)?qt(t,{editor:h?.getEditor()}):t};ce?.__emitEvent(or.htmlBefore,zr);var br=zr.input,co=(0,m.isFunction)(Re.parserHtml)?Re.parserHtml(br,ct):function(Nc,Ku){void 0===Ku&&(Ku={});var Fd,vf=new DOMParser,vh=Ku.htmlType||kr,hm=vh===yr,mm=hm?Nc:"<div>".concat(Nc,"</div>"),_h=vf.parseFromString(mm,vh);if(hm){if(Ku.asDocument)return _h;var Zf=_h.head,yh=_h.body,O1=Zf.querySelectorAll("script");(0,m.each)(O1,function(gv){return yh.appendChild(gv)});var K0=[];(0,m.each)(Zf.children,function(gv){return K0.push(gv)}),(0,m.each)(K0,function(gv,vy){return yh.insertBefore(gv,yh.children[vy])}),Fd=yh}else Fd=_h.firstChild;return Fd}(br,ct),Bo=co,Oi=co;_r&&(Bo=Oi.documentElement,ie.doctype=(0,jt.LJ)(Oi.doctype));var Qi=Bo.querySelectorAll("script"),Ca=Qi.length;if(!((0,m.isUndefined)(W.allowScripts)?ct.allowScripts:W.allowScripts))for(;Ca--;)null===(y=Qi[Ca].parentNode)||void 0===y||y.removeChild(Qi[Ca]);if(ct.allowUnsafeAttr&&ct.allowUnsafeAttrValue||this.__sanitizeNode(Bo,ct),n){for(var ys=Bo.querySelectorAll("style"),ss=ys.length,il="";ss--;)il=ys[ss].innerHTML+il,null===(I=ys[ss].parentNode)||void 0===I||I.removeChild(ys[ss]);il&&(ie.css=n.parse(il))}ce?.__emitEvent(or.htmlRoot,{input:br,root:Bo});var _l=[];if(_r)ie.head=this.parseNode(Oi.head,Re),ie.root=this.parseNodeAttr(Bo),_l=this.parseNode(Oi.body,Re);else{var wu=this.parseNodes(Bo,Re);_l=1!==wu.length||Re.returnArray?wu:wu[0]}return ie.html=_l,ce?.__emitEvent(or.html,{input:br,output:ie,options:ct}),ie},__sanitizeNode:function(t,n){var i=this,y=t.childNodes||[],I=[];(0,m.each)(t.attributes||[],function(W){var ce=W.nodeName||"",ie=W.nodeValue||"";!n.allowUnsafeAttr&&ce.startsWith("on")&&I.push(ce),!n.allowUnsafeAttrValue&&ie.startsWith("javascript:")&&I.push(ce)}),I.map(function(W){return t.removeAttribute(W)}),(0,m.each)(y,function(W){return i.__sanitizeNode(W,n)})},__checkAsDocument:function(t,n){return(0,X.isDef)(n.asDocument)?n.asDocument:(0,m.isFunction)(n.detectDocument)?!!n.detectDocument(t):n.detectDocument?t.toLowerCase().trim().startsWith("<!doctype"):void 0}}};var Dr;!function(h){h.add="data:add",h.addBefore="data:add:before",h.remove="data:remove",h.removeBefore="data:remove:before",h.update="data:update",h.path="data:path",h.all="data"}(Dr||(Dr={}));var hn=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Un="data-variable",Yn=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.em=n.em,i}return hn(s,h),s.prototype.defaults=function(){return{type:Un,defaultValue:"",path:""}},s.prototype.getDataValue=function(){var t,n=this.attributes;return null===(t=this.em)||void 0===t?void 0:t.DataSources.getValue(n.path,n.defaultValue)},s}(R.Kx);const dr=Yn;var pn="data-collection",Xt="data-collection-variable",Ft="collectionDef",Zn="__is_data_collection_item",Do="__collections_state_map",Jt=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jn=function(){return Jn=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Jn.apply(this,arguments)},Qn=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.em=n.em,i.collectionsStateMap=n.collectionsStateMap,i.updateDataVariable(),i}return Jt(s,h),s.prototype.defaults=function(){return{type:Xt,collectionId:void 0,variableType:void 0,path:void 0,value:void 0}},s.prototype.hasDynamicValue=function(){return!!this.dataVariable},s.prototype.getDataValue=function(){var t=this.updateDataVariable().resolvedValue;return t?.type===Un?this.dataVariable.getDataValue():t},s.prototype.updateDataVariable=function(){var t,n=this;if(!this.collectionsStateMap)return{resolvedValue:void 0};var i,u=function(y,I,W){var ce=y.collectionId,ie=y.variableType;if(I){var qe=I[ce];return qe?ie?"currentItem"===ie?function(ct,qt,_r,zr){var br=ct.currentItem;if(!br)return zr.logError("Current item is missing for collection: ".concat(_r)),"";if(br.type===Un){var co=br.path?"".concat(br.path,".").concat(qt):qt;return Jn(Jn({},br),{path:co})}return qt&&!br[qt]?(zr.logError("Path not found in current item: ".concat(qt," for collection: ").concat(_r)),""):qt?br[qt]:br}(qe,y.path,ce,W):qe[ie]:(W.logError("Missing collection variable type for collection: ".concat(ce)),""):""}}(this.attributes,this.collectionsStateMap,this.em);return u?.type===Un&&(i=new dr(u,{em:this.em}),this.dataVariable=i,null===(t=this.resolverListener)||void 0===t||t.destroy(),this.resolverListener=new Ml({em:this.em,resolver:i,onUpdate:function(){var y;n.set("value",null===(y=n.dataVariable)||void 0===y?void 0:y.getDataValue())}})),this.set("value",u),{resolvedValue:u,dataVariable:i}},s.prototype.updateCollectionsStateMap=function(t){this.collectionsStateMap=t,this.updateDataVariable()},s.prototype.destroy=function(){var t,n;return null===(t=this.resolverListener)||void 0===t||t.destroy(),null===(n=this.dataVariable)||void 0===n||n.destroy(),h.prototype.destroy.call(this)},s.prototype.toJSON=function(t){var n=h.prototype.toJSON.call(this,t);return delete n.value,!n.collectionId&&delete n.collectionId,n},s}(R.Kx);const Io=Qn;function ri(h){return"object"==typeof h&&[Un,Wc,Xt].includes(h?.type)}function Ka(h){return h?.type===Un}function Ei(h,s){return Ka(h)?new dr(h,{em:s}).getDataValue():h}function ui(h,s){var t,n=h.type;switch(n){case Un:t=new dr(h,s);break;case Wc:t=new Vd(h,s);break;case Xt:t=new Io(h,s);break;default:throw new Error("Unsupported dynamic type: ".concat(n))}return t}function ns(h,s){return ui(h,s).getDataValue()}var nl,Bs=function(){function h(s,t,n){this.operator=s,this.statements=t,this.em=n.em}return h.prototype.evaluate=function(){var s=this,t=this.statements.map(function(n){return new ul({condition:n},{em:s.em}).evaluate()});return this.operator.evaluate(t)},h}(),To=function(h,s){this.operation=h,this.em=s.em},rs=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(h){h.equals="equals",h.isTruthy="isTruthy",h.isFalsy="isFalsy",h.isDefined="isDefined",h.isNull="isNull",h.isUndefined="isUndefined",h.isArray="isArray",h.isObject="isObject",h.isString="isString",h.isNumber="isNumber",h.isBoolean="isBoolean",h.isDefaultValue="isDefaultValue"}(nl||(nl={}));var el,gc=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return rs(s,h),s.prototype.evaluate=function(t,n){var i;switch(this.operation){case"equals":return t===n;case"isTruthy":return!!t;case"isFalsy":return!t;case"isDefined":return null!=t;case"isNull":return null===t;case"isUndefined":return void 0===t;case"isArray":return Array.isArray(t);case"isObject":return"object"==typeof t&&null!==t;case"isString":return"string"==typeof t;case"isNumber":return"number"==typeof t;case"isBoolean":return"boolean"==typeof t;case"isDefaultValue":return t instanceof dr&&t.get("defaultValue")===n;default:return null===(i=this.em)||void 0===i||i.logError("Unsupported generic operation: ".concat(this.operation)),!1}},s}(To),Qo=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(h){h.and="and",h.or="or",h.xor="xor"}(el||(el={}));var Ba,Et=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Qo(s,h),s.prototype.evaluate=function(t){if(!t?.length)return!1;switch(this.operation){case el.and:return t.every(Boolean);case el.or:return t.some(Boolean);case el.xor:return 1===t.filter(Boolean).length;default:return this.em.logError("Unsupported boolean operation: ".concat(this.operation)),!1}},s}(To),Mr=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(h){h.greaterThan=">",h.lessThan="<",h.greaterThanOrEqual=">=",h.lessThanOrEqual="<=",h.equals="=",h.notEquals="!="}(Ba||(Ba={}));var Ao,oa=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Mr(s,h),s.prototype.evaluate=function(t,n){switch(this.operation){case Ba.greaterThan:return t>n;case Ba.lessThan:return t<n;case Ba.greaterThanOrEqual:return t>=n;case Ba.lessThanOrEqual:return t<=n;case Ba.equals:return t===n;case Ba.notEquals:return t!==n;default:return this.em.logError("Unsupported number operation: ".concat(this.operation)),!1}},s}(To),ba=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(h){h.contains="contains",h.startsWith="startsWith",h.endsWith="endsWith",h.matchesRegex="matchesRegex",h.equalsIgnoreCase="equalsIgnoreCase",h.trimEquals="trimEquals"}(Ao||(Ao={}));var Vi=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return ba(s,h),s.prototype.evaluate=function(t,n){switch(this.operation){case Ao.contains:return t.includes(n);case Ao.startsWith:return t.startsWith(n);case Ao.endsWith:return t.endsWith(n);case Ao.matchesRegex:return n||this.em.logError("Regex pattern must be provided."),new RegExp(n).test(t);case Ao.equalsIgnoreCase:return t.toLowerCase()===n.toLowerCase();case Ao.trimEquals:return t.trim()===n.trim();default:return this.em.logError("Unsupported string operation: ".concat(this.operation)),!1}},s}(To),hl=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ul=function(h){function s(t,n){var i=h.call(this,t)||this;return i.em=n.em,i}return hl(s,h),s.prototype.evaluate=function(){var t=this.em,n=this.get("condition");if("boolean"==typeof n)return n;if(this.isLogicGroup(n)){var u=n.statements,y=new Et(n.logicalOperator,{em:t});return new Bs(y,u,{em:t}).evaluate()}if(this.isExpression(n)){var W=(y=n.operator,n.right),ce=Ei(n.left,this.em),ie=Ei(W,this.em);return this.getOperator(ce,y).evaluate(ce,ie)}return this.em.logError("Invalid condition type."),!1},s.prototype.getOperator=function(t,n){var i=this.em;if(this.isOperatorInEnum(n,nl))return new gc(n,{em:i});if("number"==typeof t)return new oa(n,{em:i});if("string"==typeof t)return new Vi(n,{em:i});throw new Error("Unsupported data type: ".concat(typeof t))},s.prototype.getDependentDataVariables=function(){var t=this.get("condition");return t?this.extractDataVariables(t):[]},s.prototype.extractDataVariables=function(t){var n=this,i=[];return this.isExpression(t)?(Ka(t.left)&&i.push(t.left),Ka(t.right)&&i.push(t.right)):this.isLogicGroup(t)&&t.statements.forEach(function(u){return i.push.apply(i,n.extractDataVariables(u))}),i},s.prototype.isLogicGroup=function(t){return t&&void 0!==t.logicalOperator&&Array.isArray(t.statements)},s.prototype.isExpression=function(t){return t&&void 0!==t.left&&"string"==typeof t.operator},s.prototype.isOperatorInEnum=function(t,n){return Object.values(n).includes(t)},s.prototype.toJSON=function(t){var n=this.get("condition");return"object"==typeof n?JSON.parse(JSON.stringify(n)):n},s}(R.Kx),Oc=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Yl=function(){return Yl=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Yl.apply(this,arguments)},Wc="data-condition",Vd=function(h){function s(t,n){var i=this;(0,m.isUndefined)(t.condition)&&n.em.logError("No condition was provided to a conditional component.");var u=new ul({condition:t.condition},{em:n.em});return(i=h.call(this,Yl(Yl({type:Wc},t),{condition:u}))||this).resolverListeners=[],i.em=n.em,i.listenToDataVariables(),i._onValueChange=n.onValueChange,i.on("change:condition change:ifTrue change:ifFalse",function(){var y;i.listenToDataVariables(),null===(y=i._onValueChange)||void 0===y||y.call(i)}),i}return Oc(s,h),Object.defineProperty(s.prototype,"conditionEvaluator",{get:function(){return this.get("condition")},enumerable:!1,configurable:!0}),s.prototype.getCondition=function(){var t;return null===(t=this.get("condition"))||void 0===t?void 0:t.get("condition")},s.prototype.getIfTrue=function(){return this.get("ifTrue")},s.prototype.getIfFalse=function(){return this.get("ifFalse")},s.prototype.isTrue=function(){return this.conditionEvaluator.evaluate()},s.prototype.getDataValue=function(t){void 0===t&&(t=!1);var n=this.get("ifTrue"),i=this.get("ifFalse"),u=this.isTrue();return t?u?n:i:Ei(u?n:i,this.em)},Object.defineProperty(s.prototype,"onValueChange",{set:function(t){this._onValueChange=t},enumerable:!1,configurable:!0}),s.prototype.setCondition=function(t){var n=new ul({condition:t},{em:this.em});this.set("condition",n)},s.prototype.setIfTrue=function(t){this.set("ifTrue",t)},s.prototype.setIfFalse=function(t){this.set("ifFalse",t)},s.prototype.listenToDataVariables=function(){var t=this,n=this.em;n&&(this.cleanupListeners(),this.getDependentDataVariables().forEach(function(i){var u=new Ml({em:n,resolver:new dr(i,{em:t.em}),onUpdate:function(){var y;null===(y=t._onValueChange)||void 0===y||y.call(t)}.bind(t)});t.resolverListeners.push(u)}))},s.prototype.getDependentDataVariables=function(){var t=this.conditionEvaluator.getDependentDataVariables(),n=this.get("ifTrue"),i=this.get("ifFalse");return Ka(n)&&t.push(n),Ka(i)&&t.push(i),t},s.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(t){return t.destroy()}),this.resolverListeners=[]},s.prototype.toJSON=function(){var t=this.get("ifTrue"),n=this.get("ifFalse");return{type:Wc,condition:this.conditionEvaluator,ifTrue:t,ifFalse:n}},s}(R.Kx),Od=function(){function h(s){var t=this;this.listeners=[],this.model=new R.Kx,this.onChange=function(){var n=t.resolver.getDataValue();t.onUpdate(n)},this.em=s.em,this.resolver=s.resolver,this.onUpdate=s.onUpdate,this.listenToResolver()}return h.prototype.createListener=function(s,t,n){return void 0===n&&(n=this.onChange),{obj:s,event:t,callback:n}},h.prototype.listenToResolver=function(){var s=this.resolver,t=this.model;this.removeListeners();var n=[];switch(s.attributes.type){case Xt:n=this.listenToDataCollectionVariable(s);break;case Un:n=this.listenToDataVariable(s);break;case Wc:n=this.listenToConditionalVariable(s)}n.forEach(function(i){return t.listenTo(i.obj,i.event,i.callback)}),this.listeners=n},h.prototype.listenToConditionalVariable=function(s){var t=this,n=this.em;return s.getDependentDataVariables().flatMap(function(i){return t.listenToDataVariable(new dr(i,{em:n}))})},h.prototype.listenToDataVariable=function(s){var t=this,n=this.em,i=s.attributes.path,u=(0,X.stringToPath)(i||"").join("."),y=n.DataSources.fromPath(i),I=y[0],W=y[1],ce=[];return I&&ce.push(this.createListener(I.records,"add remove reset")),W&&ce.push(this.createListener(W,"change")),ce.push(this.createListener(s,"change:path",function(){t.listenToResolver(),t.onChange()}),this.createListener(s,"change:defaultValue"),this.createListener(n.DataSources.all,"add remove reset"),this.createListener(n,"".concat(Dr.path,":").concat(u))),ce},h.prototype.listenToDataCollectionVariable=function(s){return[this.createListener(s,"change:value")]},h.prototype.removeListeners=function(){var s=this;this.listeners.forEach(function(t){return s.model.stopListening(t.obj,t.event,t.callback)}),this.listeners=[]},h.prototype.destroy=function(){this.removeListeners()},h}();const Ml=Od;var id=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ac=function(){return Ac=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ac.apply(this,arguments)},Ea=Lt(),du=function(h){return(0,m.isArray)(h)?h[h.length-1]:h},Js=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t,n)||this;return i.views=[],i.styleResolverListeners={},i.em=n.em,i}return id(s,h),s.prototype.parseStyle=function(t){return Ea.parseStyle(t)},s.prototype.extendStyle=function(t){return Ac(Ac({},this.getStyle("",{skipResolve:!0})),t)},s.prototype.getStyle=function(t,n){void 0===n&&(n={});var i=this.get("style")||{},u=Ac({},i);if(this.em&&!n.skipResolve){var y=this.getResolvedStyles(Ac({},u));return t&&(0,m.isString)(t)?y[t]:y}return t&&(0,m.isString)(t)?u[t]:u},s.prototype.setStyle=function(t,n){var i=this;void 0===t&&(t={}),void 0===n&&(n={}),(0,m.isString)(t)&&(t=this.parseStyle(t));var u=this.getStyle(n);n.partial||n.avoidStore?(n.avoidStore=!0,t.__p=!0):delete t.__p;var y=Ac({},t),I=Ac({},y);(0,m.keys)(I).forEach(function(ce){if(""!==I[ce]){var ie=I[ce];if(ri(ie)){var Re=ui(ie,{em:i.em});Re&&(I[ce]=Re,i.listenToDataResolver(Re,ce))}}else delete I[ce]}),this.set("style",I,n);var W=(0,X.shallowDiff)(u,I);return delete W.__p,(0,m.keys)(W).forEach(function(ce){var ie=i.em;n.noEvent||(i.trigger("change:style:".concat(ce)),ie&&(ie.trigger("styleable:change",i,ce,n),ie.trigger("styleable:change:".concat(ce),i,ce,n)))}),I},s.prototype.listenToDataResolver=function(t,n){var i=this,u=this.styleResolverListeners[n];u?u.listenToResolver():this.styleResolverListeners[n]=new Ml({em:this.em,resolver:t,onUpdate:function(){return i.updateView()}})},s.prototype.getView=function(t){var n=this.views,i=this.em,u=t||i?.getCurrentFrameModel();return u?n.find(function(y){return y.frameView===u.view}):n[0]},s.prototype.setView=function(t){var n=this.views;!n.includes(t)&&n.push(t)},s.prototype.removeView=function(t){var n=this.views;n.splice(n.indexOf(t),1)},s.prototype.updateView=function(){this.views.forEach(function(t){return t.updateStyles()})},s.prototype.getResolvedStyles=function(t){var n=this,i=Ac({},t);return(0,m.keys)(i).forEach(function(u){var y,I=i[u];"string"==typeof I||Array.isArray(I)||(ri(I)&&(i[u]=ns(I,{em:n.em})),((y=I)instanceof dr||y instanceof Vd)&&(i[u]=I.getDataValue()))}),i},s.prototype.addStyle=function(t,n,i){var u;void 0===n&&(n=""),void 0===i&&(i={}),"string"==typeof t?((u={})[t]=n,t=u):i=n||{},i.addStyle=t,t=this.extendStyle(t),this.setStyle(t,i)},s.prototype.removeStyle=function(t){var n=this.getStyle();delete n[t],this.setStyle(n)},s.prototype.styleToString=function(t){void 0===t&&(t={});var n=[],i=this.getStyle(t),u=t.important,y=function(W){var ce=(0,m.isArray)(u)?u.indexOf(W)>=0:u;if("__"===W.substring(0,2))return"continue";var ie=i[W];((0,m.isArray)(ie)?ie:[ie]).forEach(function(Re){var qe="".concat(Re).concat(ce?" !important":"");qe&&n.push("".concat(W,":").concat(qe,";"))})};for(var I in i)y(I);return n.join("")},s.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},s.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},s}(R.Kx);const ad=Js;var Ql=function(){return Ql=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ql.apply(this,arguments)},Yc=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},Qc=function(h){return(0,m.isArray)(h.get(Nl))},kc=function(h){return!!h.get(ic)},zl=function(h){return!(!Qc(h)&&!kc(h))},Xc=function(h){var s=h.parent();return zl(h)&&(!s||!zl(s))},eu=function(h){h.__symbReady||(h.on("change",h.__upSymbProps),h.__symbReady=!0)},Oa=function(h){var s=h.get(ic);if(s&&(0,m.isString)(s)){var t=h.__getAllById()[s];t?(s=t,h.set(ic,t)):s=0}return s||void 0},Ll=function(h){var s=h?.get(Nl);return s&&(0,m.isArray)(s)&&(s.forEach(function(t,n){t&&(0,m.isString)(t)&&(s[n]=h.__getAllById()[t])}),s=s.filter(function(t){return t&&!(0,m.isString)(t)})),s||void 0},ql=function(h,s){void 0===s&&(s="");var t=h?.get(Ve),n=s.split(":")[0],i=s!==n?[s,n]:[s];return!0===t||(0,m.isArray)(t)&&i.some(function(u){return t.indexOf(u)>=0})},as=function(h,s){void 0===s&&(s={});var n=s.changed;if(s.fromInstance||s.noPropagate||s.fromUndo||n&&ql(h,n))return[];var i=Ll(h)||[],u=Oa(h);return(u?Yc([u],Ll(u)||[],!0):i).filter(function(y){return y!==h}).filter(function(y){return!(n&&ql(y,n))})},El=function(h,s){for(var t=h,n=h.parent(s);n&&zl(n);)t=n,n=n.parent(s);return t},Gu=function(h,s){void 0===s&&(s={});var t=Oa(h),n=t&&Ll(t);!s.skipRefs&&n&&t.set(Nl,n.filter(function(i){return i!==h})),h.set(ic,0),h.components().forEach(function(i){return Gu(i,s)})},Lc=function(h,s,t,n){void 0===n&&(n={});var i=Oa(h),u=Ll(h);(i||u)&&h.em.log(s,{model:h,toUp:t,context:"symbols",opts:n})},et=function(h,s){(0,m.keys)(h).forEach(function(t){Ye(h,t,s)||delete h[t]})},Ye=function(h,s,t){var i,n="attributes"===s?Object.values(h.attributes).some(function(y){return y?.type===Xt}):(null===(i=h[s])||void 0===i?void 0:i.type)===Xt;return!ql(t,s)||n},dt=function(h,s,t,n){var i=n||t||{},u={fromInstance:i.fromInstance,fromUndo:i.fromUndo},y=s.opt.temporary;if(n)if(n.add){var I=[],W=!!Ll(h);if((co=as(h,Ql(Ql({},u),{changed:"components:add"}))).length){var ce=Oa(s);I=Ll(ce||s)||[],(I=Yc([],I,!0)).push(ce||s)}!y&&Lc(h,"add",co,{opts:n,addedInstances:I.map(function(Qi){return Qi.cid}),added:s.cid}),co.forEach(function(Qi){var Ca=El(Qi),ys=I.filter(function(ss){var il=El(ss,{prev:1});return Ca&&il&&il===Ca})[0]||s.clone({symbol:!0,symbolInv:W});Qi.append(ys,Ql({fromInstance:h},n))})}else{var ie=Oa(s);if(ie&&!n.temporary&&ie.set(Nl,Ll(ie).filter(function(Qi){return Qi!==s})),!Xc(s)&&!n.skipRefsUp){var Re="components:remove",qe=n.index,ct=s.parent(),qt=Ql({fromInstance:s},n),_r=Xc(s),zr=function(Qi){var Ca=Qi.parent();Ca&&!ql(Ca,Re)&&Qi.remove(qt)};co=ql(ct,Re)?[]:as(s,u),_r&&(co=ct&&as(ct,Ql(Ql({},u),{changed:Re})),zr=function(Qi){var Ca=Qi.components().at(qe);Ca&&Ca.remove(Ql({fromInstance:ct},qt))}),!y&&Lc(h,"remove",co,{opts:n,removed:s.cid,isSymbNested:_r}),co.forEach(zr)}}else{var br=s,co=as(h,Ql(Ql({},u),{changed:"components:reset"})),Bo=br.models,Oi=new Set;Lc(h,"reset",co,{components:Bo}),co.forEach(function(Qi){var Ca=Qi.components(),ys=Bo.map(function(ss,il){return h.get(Ft)?ss.clone({symbol:zl(ss)}):!zl(ss)||Oi.has(ss)?(Oi.add(ss),ss.clone({symbol:!0})):Ca.at(il)});Ca.reset(ys,Ql({fromInstance:h},t))})}h.__changesUp(i)},Dt=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),tn=function(){return tn=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},tn.apply(this,arguments)},uo=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t},ao=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},Jo=function(h,s){return void 0===s&&(s=[]),h?(((0,m.isArray)(h)||(0,m.isFunction)(h.map)?h:[h]).map(function(t){s.push(t.getId()),Jo(t.components().models,s)}),s):[]},ko=function(h,s,t){void 0===s&&(s={}),void 0===t&&(t={}),t.visitedCmps=t.visitedCmps||{};var n=t.visitedCmps;return((0,m.isArray)(h)?h:[h]).map(function(i){var u=i.attributes,y=void 0===u?{}:u,I=i.components,W=i.tagName,ce=i.style,ie=y.id,Re=uo(y,["id","draggable"]),qe=i;if(ie)if(n[ie])n[ie].push(qe),ie=vn.getNewId(s),qe.attributes.id=ie;else if(n[ie]=[],s[ie]){var ct=qe=s[ie];W&&ct.set({tagName:W},tn(tn({},t),{silent:!0})),(0,m.keys)(Re).length&&ct.addAttributes(Re,tn({},t)),(0,m.keys)(ce).length&&ct.addStyle(ce,t)}var qt=(0,m.isFunction)(qe.components)?qe:null;if(I){var _r=ko(I,s,t);qt?qt.components().reset(_r,t):qe.components=_r}else qt&&qt.components().reset([],t);return qe})},ra=function(h){function s(t,n){var i=h.call(this,t,n)||this;i.opt=n,i.listenTo(i,"add",i.onAdd),i.listenTo(i,"remove",i.removeChildren),i.listenTo(i,"reset",i.resetChildren);var u=n.em;return i.config=n.config,i.em=u,i.domc=n.domc||u?.Components,i}return Dt(s,h),Object.defineProperty(s.prototype,"events",{get:function(){var t;return null===(t=this.domc)||void 0===t?void 0:t.events},enumerable:!1,configurable:!0}),s.prototype.resetChildren=function(t,n){var i=this;void 0===n&&(n={});var u=this,y=n.previousModels||[],I=y.filter(function(ie){return!t.get(ie.cid)}),W=Jo(t),ce=Jo(y).filter(function(ie){return W.indexOf(ie)>=0});n.keepIds=(n.keepIds||[]).concat(ce),I.forEach(function(ie){return i.removeChildren(ie,u,n)}),t.each(function(ie){return i.onAdd(ie)})},s.prototype.resetFromString=function(t,n){var i,u;void 0===t&&(t=""),void 0===n&&(n={}),n.keepIds=Jo(this);var y=this,I=y.domc,W=y.em,ce=y.parent,ie=W?.Css,Re=I?.allById()||{},qe=this.parseString(t,n),ct=ko(qe,Re,n),qt=n.visitedCmps,_r=void 0===qt?{}:qt;Object.keys(_r).forEach(function(zr){var br=_r[zr];if(br.length){var co=ie?.getRules("#".concat(zr))||[];co.length&&br.forEach(function(Bo){co.forEach(function(Oi){var Qi=Oi.clone();Qi.set("selectors",["#".concat(Bo.attributes.id)]),ie.getAll().add(Qi)})})}}),this.reset(ct,n),W?.trigger("component:content",ce,n,t),null===(u=(i=ce).__checkInnerChilds)||void 0===u||u.call(i)},s.prototype.removeChildren=function(t,n,i){var u=this;if(void 0===i&&(i={}),t){var y=this.domc,I=this.em,W=i.temporary||i.fromUndo;if(t.prevColl=this,!W){var ce=t.getId(),ie=I.Selectors.getAll(),Re=I.Css.getAll(),qe=(i.keepIds||[]).indexOf(ce)<0;delete(y?y.allById():{})[ce];var ct=qe?Re.remove(Re.filter(function(br){return br.getSelectors().getFullString()==="#".concat(ce)}),i):[];ie.remove(ct.map(function(br){return br.getSelectors().at(0)})),t.opt.temporary||(I.Commands.run("core:component-style-clear",{target:t}),t.views.forEach(function(br){br.scriptContainer&&t.emitWithEditor(mt.I.scriptUnmount,{component:t,view:br,el:br.el})}),t.removed(),t.trigger("removed"),I.trigger(mt.I.remove,t),y&&kc(t)&&Xc(t)&&y.symbols.__trgEvent(y.events.symbolInstanceRemove,{component:t},!0));var qt=t.components();qt.forEach(function(br){dt(br,br,qt,tn(tn({},i),{skipRefsUp:!0})),u.removeChildren(br,n,i)})}var _r=t.components();if(I.stopListening(_r),I.stopListening(t),I.stopListening(t.get("classes")),t.__postRemove(),!t.opt.temporary){var zr=function(br){br.emitWithEditor(mt.I.removed,br,{removeOptions:i}),br.components().forEach(function(co){return zr(co)})};zr(t)}}},s.prototype.model=function(t,n){var i,u=n.collection.opt,y=u.em,I=y.Components.componentTypes;n.em=y,n.config=u.config,n.componentTypes=I,n.domc=u.domc;for(var W=0;W<I.length;W++)if(I[W].id==t.type){i=I[W].model;break}return i||(i=I[I.length-1].model,y&&t.type&&y.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:n})),new i(t,n)},s.prototype.parseString=function(t,n){void 0===n&&(n={});var i=this,u=i.em,y=i.domc,I=i.parent,W=I?.is("wrapper"),ie=u.Css,Re=u.Parser.parseHtml(t,tn({asDocument:n.asDocument&&W},n.parserOptions)),qe=Re.html;if(W&&Re.doctype){var ct=I,qt=Re.html||{},_r=qt.components,zr=void 0===_r?[]:_r,br=uo(qt,["components"]),co=Re.head||{},Bo=co.components,Oi=uo(co,["components"]);qe=zr,ct.set(br,n),ct.head.set(Oi,n),ct.head.components(Bo,n),ct.docEl.set(Re.root,n),ct.set({doctype:Re.doctype})}if(vn.checkId(qe,Re.css,y.componentsById,n),Re.css&&ie&&!n.temporary){var Qi=uo(n,["at"]);ie.addCollection(Re.css,tn(tn({},Qi),{extend:1}))}return qe},s.prototype.add=function(t,n){var i=this;if(void 0===n&&(n={}),null!=t){n.keepIds=ao(ao([],n.keepIds||[],!0),Jo(n.previousModels),!0),(0,m.isString)(t)?t=this.parseString(t,n):(0,m.isArray)(t)&&t.forEach(function(y,I){if((0,m.isString)(y)){var W=i.parseString(y,n);t[I]=(0,m.isArray)(W)&&!W.length?null:W}});var u=((0,m.isArray)(t)?t:[t]).filter(Boolean).map(function(y){return i.processDef(y)});return t=(0,m.isArray)(t)?(0,m.flatten)(u,1):u[0],h.prototype.add.call(this,t,n)}},s.prototype.processDef=function(t){if(t.cid&&t.ccid)return t;var n=this.em,i=this.config,u=(void 0===i?{}:i).processor,y=t;if(u){var I=u(y=tn({},y));I&&((0,m.each)(y,function(ct,qt){return delete y[qt]}),(0,m.extend)(y,I))}if(y.$$typeof&&"object"==typeof y.props){(y=tn({},y)).props=tn({},y.props);var W=n.Components,ce=n.Parser.parserHtml;(0,m.each)(y,function(ct,qt){(0,m.includes)(["props","type"],qt)||delete y[qt]});var ie=y.props,Re=ie.children;delete ie.children,delete y.props;var qe=ce.splitPropsFromAttr(ie);y.attributes=qe.attrs,Re&&(y.components=Re),y.type?W.getType(y.type)||(y.tagName=y.type,delete y.type):y.type="textnode",(0,m.extend)(y,qe.props)}return y},s.prototype.onAdd=function(t,n,i){void 0===i&&(i={});var u=this.domc,y=this.em,I=t.getStyle(),W=y&&y.getConfig().avoidInlineStyle;if(u&&u.Component.ensureInList(t),!(0,m.isEmpty)(I)&&!W&&y&&y.getConfig().forceClass&&!i.temporary){var ce=t.cid;y.Css.setClassRule(ce,I),t.setStyle({}),t.addClass(ce)}if(t.__postAdd({recursive:!0}),y&&!i.temporary){var ie=function(Re){y.trigger(mt.I.add,Re,i),Re.components().forEach(function(qe){return ie(qe)})};ie(t),u&&kc(t)&&Xc(t)&&u.symbols.__trgEvent(u.events.symbolInstanceAdd,{component:t},!0)}},s}(R.pM);const Ri=ra;var ls=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xi=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t,n)||this,u=n.config,y=void 0===u?{}:u,I=i.get("name"),W=i.get("label");I?W||i.set("label",I):i.set("name",W);var ce=i.get("name"),ie=y.escapeName,Re=ie?ie(ce):s.escapeName(ce);return i.set("name",Re),i.em=n.em,i}return ls(s,h),s.prototype.defaults=function(){return{name:"",label:"",type:1,active:!0,private:!1,protected:!1,_undo:!0}},s.prototype.isId=function(){return 2===this.get("type")},s.prototype.isClass=function(){return 1===this.get("type")},s.prototype.getFullName=function(t){void 0===t&&(t={});var n=t.escape,i=this.get("name"),u="";switch(this.get("type")){case 1:u=".";break;case 2:u="#"}return u+(n?n(i):i)},s.prototype.toString=function(){return this.getFullName()},s.prototype.getName=function(){return this.get("name")||""},s.prototype.getLabel=function(){return this.get("label")||""},s.prototype.setLabel=function(t){return this.set("label",t)},s.prototype.getActive=function(){return!!this.get("active")},s.prototype.setActive=function(t){return this.set("active",t)},s.prototype.toJSON=function(t){void 0===t&&(t={});var n=this.em,i=R.Kx.prototype.toJSON.call(this,[t]),u=(0,m.result)(this,"defaults");if(n?.getConfig().avoidDefaults){(0,m.forEach)(u,function(I,W){i[W]===I&&delete i[W]}),i.label===i.name&&delete i.label;var y=(0,m.keys)(i).length;1===y&&i.name&&(i=i.name),2===y&&i.name&&i.type&&(i=this.getFullName())}return i},s.escapeName=function(t){return"".concat(t).trim().replace(/\s+/g,"-")},s.TYPE_CLASS=1,s.TYPE_ID=2,s}(R.Kx);const cs=Xi;Xi.prototype.idAttribute="name";var cc=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Il=function(h,s){return h.reduce(function(t,n,i){return t.concat(Il(h.slice(i+1),"".concat(s).concat(n)))},[s])},vc=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return cc(s,h),s.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||cs.TYPE_CLASS)},s.prototype.getStyleable=function(){return(0,m.filter)(this.models,function(t){return t.getActive()&&!t.get("private")})},s.prototype.getValid=function(t){var n=(void 0===t?{}:t).noDisabled;return(0,m.filter)(this.models,function(i){return!i.get("private")}).filter(function(i){return n?i.get("active"):1})},s.prototype.getFullString=function(t,n){void 0===n&&(n={});var i=[];return(t||this).forEach(function(u){return i.push(u.getFullName(n))}),n.sort&&i.sort(),i.join("").trim()},s.prototype.getFullName=function(t){void 0===t&&(t={});var n=t.combination,i=t.array,u=[],y=this.map(function(I){return I.getFullName(t)}).sort();return n?y.forEach(function(I,W){u=u.concat(Il(y.slice(W+1),I))}):u=y,i?u:u.join(n?",":"")},s}(R.pM);const Aa=vc;vc.prototype.model=cs;var uc=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ic=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))};const sd=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return uc(s,h),s.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},s.prototype.getId=function(){return this.get("id")},s.prototype.getLabel=function(){return this.get("label")},s}(R.Kx);function Rc(h){var s=new Set,t=new Map,n={items:[]};h.forEach(function(u){var y=u.category;if(y){s.add(y);var I=t.get(y);I?I.push(u):t.set(y,[u])}else n.items.push(u)});var i=Array.from(s).map(function(u){return{category:u,items:t.get(u)||[]}});return Ic(Ic([],i,!0),[n],!1)}var Dd=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),zd="category",Jp=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Dd(s,h),s.prototype.initCategory=function(t){var n=t.get(zd),i=n instanceof sd;if(n&&!i){(0,m.isString)(n)?n={id:n,label:n}:(0,X.isObject)(n)&&!n.id&&(n.id=n.label);var u=this.getCategories().add(n);return t.set(zd,u,{silent:!0}),u}if(i)return u=n,this.getCategories().add(u),u},s}(R.pM),Ks=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),dl=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t,n)||this,u=n.events,y=n.em,I=u?.update;return y&&I&&i.on("change",function(W,ce){return y.trigger(I,{category:W,changes:W.changedAttributes(),options:ce})}),i}return Ks(s,h),s.prototype.add=function(t,n){return((0,m.isArray)(t)?t:[t]).forEach(function(i){return i&&(i.id=(0,X.normalizeKey)("".concat(i.id)))}),h.prototype.add.call(this,t,n)},s.prototype.get=function(t){return h.prototype.get.call(this,(0,m.isString)(t)?(0,X.normalizeKey)(t):t)},s}(R.pM);const Rl=dl;var Gl;dl.prototype.model=sd,function(h){h.select="trait:select",h.value="trait:value",h.categoryUpdate="trait:category:update",h.custom="trait:custom",h.all="trait"}(Gl||(Gl={}));const ld=Gl;var qu=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xu=function(){return xu=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},xu.apply(this,arguments)},Dp=function(h){function s(t,n){var i=h.call(this,t)||this,u=i.attributes,y=u.target,I=u.name;return!i.get("id")&&i.set("id",I),y&&i.setTarget(y),i.em=n,i}return qu(s,h),s.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(s.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"category",{get:function(){var t=this.get("category");return t instanceof sd?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),s.prototype.setTarget=function(t){if(t){var n=this.attributes,i=n.name,u=n.changeProp,y=n.value,I=n.getValue;this.target=t,this.unset("target");var W=u?"change:".concat(i):"change:attributes:".concat(i);this.listenTo(t,W,this.targetUpdated);var ce=y||(I?void 0:this.getValue());!(0,m.isUndefined)(ce)&&this.set({value:ce},{silent:!0})}},s.prototype.getId=function(){return this.get("id")},s.prototype.getType=function(){return this.get("type")},s.prototype.getName=function(){return this.get("name")},s.prototype.getLabel=function(t){var n;void 0===t&&(t={});var i=t.locale,u=void 0===i||i,y=this.getId(),I=this.get("label")||this.getName();return u&&(null===(n=this.em)||void 0===n?void 0:n.t("traitManager.traits.labels.".concat(y)))||I},s.prototype.getValue=function(t){return this.getTargetValue(t)},s.prototype.setValue=function(t,n){var i=this;void 0===n&&(n={});var y=this.em,I=n.partial,W={},ce=this.attributes.setValue;ce?ce({value:t,component:this.component,editor:y?.getEditor(),trait:this,partial:!!I,options:n,emitUpdate:function(){return i.targetUpdated()}}):(I&&(W.avoidStore=!0),this.setTargetValue(t,W))},s.prototype.getDefault=function(){return this.get("default")},s.prototype.getOptions=function(){return this.get("options")||[]},s.prototype.getOption=function(t){var n=this,i=(0,X.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(u){return n.getOptionId(u)===i})[0]},s.prototype.getOptionId=function(t){return t.id||t.value},s.prototype.getOptionLabel=function(t,n){var i;void 0===n&&(n={});var u=n.locale,y=void 0===u||u,I=(0,m.isString)(t)?this.getOption(t):t,W=this.getOptionId(I),ce=I.label||I.name||W,ie=this.getName();return y&&(null===(i=this.em)||void 0===i?void 0:i.t("traitManager.traits.options.".concat(ie,".").concat(W)))||ce},s.prototype.getCategoryLabel=function(t){void 0===t&&(t={});var n=this.em,i=this.category,u=t.locale,y=void 0===u||u,I=i?.getId(),W=i?.getLabel();return y&&n?.t("traitManager.categories.".concat(I))||W||""},s.prototype.runCommand=function(){var t=this.em,n=this.attributes.command;if(n&&t)return(0,m.isString)(n)?t.Commands.run(n):n(t.Editor,this)},s.prototype.props=function(){return this.attributes},s.prototype.targetUpdated=function(){var t=this.component,n=this.em,i=this.getTargetValue({useType:!0});this.set({value:i},{fromTarget:1});var u={trait:this,component:t,value:i};t.trigger(ld.value,u),n?.trigger(ld.value,u),n?.trigger("trait:update",u)},s.prototype.getTargetValue=function(t){void 0===t&&(t={});var n,i=this.component,u=this.em,y=this.getName(),I=this.get("getValue");if(n=I?I({editor:u?.getEditor(),trait:this,component:i}):this.changeProp?i.get(y):i.getAttributes()[y],t.useType&&"checkbox"===this.getType()){var W=this.attributes,ce=W.valueTrue,ie=W.valueFalse;(0,m.isUndefined)(ce)||ce!==n?(0,m.isUndefined)(ie)||ie!==n||(n=!1):n=!0}return(0,m.isUndefined)(n)?"":n},s.prototype.setTargetValue=function(t,n){var i;void 0===n&&(n={});var u=this.component,y=this.attributes,I=this.getName();if(!(0,m.isUndefined)(t)){var W=t;if("false"===t?W=!1:"true"===t&&(W=!0),"checkbox"===this.getType()){var ce=y.valueTrue,ie=y.valueFalse;W&&!(0,m.isUndefined)(ce)&&(W=ce),W||(0,m.isUndefined)(ie)||(W=ie)}var Re=((i={})[I]=W,i);Re.__p=n.avoidStore?null:void 0,this.changeProp?u.set(Re,n):u.addAttributes(Re,n)}},s.prototype.setValueFromInput=function(t,n,i){void 0===n&&(n=!0),void 0===i&&(i={});var u={value:t};this.set(u,xu(xu({},i),{avoidStore:1})),n&&(this.set("value","",i),this.set(u,i))},s.prototype.getInitValue=function(){var t,n=this.component,i=this.getName();if(n){var u=n.get("attributes");t=this.changeProp?n.get(i):u[i]}return t||this.get("value")||this.get("default")},s}(R.Kx);const Dc=Dp;var cd=function(){function h(s){void 0===s&&(s={}),this.config=s}return h.prototype.build=function(s,t){return(0,m.isString)(s)?this.buildFromString(s,t):new Dc(s,t)},h.prototype.buildFromString=function(s,t){var n={name:s,type:"text"};return"target"===s&&(n.type="select",n.default=!1,n.options=this.config.optionsTarget),new Dc(n,t)},h}();const Ef=cd;var oc=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tp=function(h){function s(t,n){var i=h.call(this,t)||this;i.categories=new Rl;var u=n.em;i.em=u,i.categories=new Rl([],{em:u,events:{update:ld.categoryUpdate}}),i.on("add",i.handleAdd),i.on("reset",i.handleReset);var y=i.module,I=y?.getConfig();return i.tf=new Ef(I),i}return oc(s,h),Object.defineProperty(s.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),s.prototype.getCategories=function(){return this.categories},s.prototype.handleReset=function(t,n){var i=(void 0===n?{}:n).previousModels;(void 0===i?[]:i).forEach(function(u){return u.trigger("remove")})},s.prototype.handleAdd=function(t){t.em=this.em;var n=this.target;n&&(t.target=n),this.initCategory(t)},s.prototype.setTarget=function(t){this.target=t,this.models.forEach(function(n){return n.setTarget(t)})},s.prototype.add=function(t,n){if(null!=t){var i=this.target,u=this.em;if((0,m.isArray)(t)){for(var y=[],I=0,W=t.length;I<W;I++){var ce=t[I];y[I]=ce instanceof Dc?ce:this.tf.build(ce,u),y[I].setTarget(i)}return h.prototype.add.call(this,y,n)}var ie=t instanceof Dc?t:this.tf.build(t,u);return ie.setTarget(i),h.prototype.add.call(this,ie,n)}},s}(Jp);const ml=Tp;var Yp=function(){return Yp=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Yp.apply(this,arguments)},Mu=function(){function h(s,t,n){this.component=s,this.updateFn=t,this.resolverListeners={},this.em=n.em,this.collectionsStateMap=n.collectionsStateMap}return h.prototype.bindComponent=function(s){this.component=s},h.prototype.updateCollectionStateMap=function(s){var t=this;this.collectionsStateMap=s;var n=this.getDynamicValuesOfType(Xt).reduce(function(y,I){return y[I]=null,y},{}),i=this.getSerializableValues(n),u=this.addDynamicValues(i);Object.keys(u).forEach(function(y){t.updateFn(t.component,y,u[y])})},h.prototype.setDynamicValues=function(s,t){return void 0===t&&(t={}),t.skipWatcherUpdates||t.fromDataSource||this.removeListeners(),this.addDynamicValues(s,t)},h.prototype.addDynamicValues=function(s,t){if(void 0===t&&(t={}),!s)return{};var n=this.evaluateValues(s);return t.skipWatcherUpdates||t.fromDataSource||this.updateListeners(s),n},h.prototype.updateListeners=function(s){var t=this,n=this.em,i=this.collectionsStateMap;this.removeListeners(Object.keys(s));for(var u=Object.keys(s),y=function(ce){var ie=u[ce],Re=s[ie];if(!ri(Re))return"continue";var qe=ui(Re,{em:n,collectionsStateMap:i});I.resolverListeners[ie]=new Ml({em:n,resolver:qe,onUpdate:function(ct){return t.updateFn.bind(t)(t.component,ie,ct)}})},I=this,W=0;W<u.length;W++)y(W)},h.prototype.evaluateValues=function(s){for(var t=this.em,n=this.collectionsStateMap,i=Yp({},s),u=Object.keys(s),y=0;y<u.length;y++){var I=u[y],W=s[I];ri(W)&&(i[I]=ns(W,{em:t,collectionsStateMap:n}))}return i},h.prototype.removeListeners=function(s){var t=this,n=s||Object.keys(this.resolverListeners);return n.forEach(function(i){var u,y;t.resolverListeners[i]&&(null===(y=(u=t.resolverListeners[i]).destroy)||void 0===y||y.call(u),delete t.resolverListeners[i])}),n},h.prototype.getSerializableValues=function(s){if(!s)return{};for(var t=Yp({},s),n=Object.keys(t),i=0;i<n.length;i++){var u=n[i],y=this.resolverListeners[u];y&&(t[u]=y.resolver.toJSON())}return t},h.prototype.getAllSerializableValues=function(){for(var s={},t=Object.keys(this.resolverListeners),n=0;n<t.length;n++){var i=t[n];s[i]=this.resolverListeners[i].resolver.toJSON()}return s},h.prototype.getDynamicValuesOfType=function(s){var t=this;return Object.keys(this.resolverListeners).filter(function(n){return t.resolverListeners[n].resolver.get("type")===s})},h.prototype.destroy=function(){this.removeListeners()},h}(),Zc={fromDataSource:!0,avoidStore:!0},ud=function(){function h(s,t){this.component=s,this.propertyWatcher=new Mu(s,this.onPropertyUpdate,t),this.attributeWatcher=new Mu(s,this.onAttributeUpdate,t)}return h.prototype.onPropertyUpdate=function(s,t,n){s?.set(t,n,Zc)},h.prototype.onAttributeUpdate=function(s,t,n){var i;s?.addAttributes(((i={})[t]=n,i),Zc)},h.prototype.bindComponent=function(s){this.component=s,this.propertyWatcher.bindComponent(s),this.attributeWatcher.bindComponent(s),this.updateSymbolOverride()},h.prototype.updateCollectionStateMap=function(s){this.propertyWatcher.updateCollectionStateMap(s),this.attributeWatcher.updateCollectionStateMap(s)},h.prototype.addProps=function(s,t){var n=this;void 0===t&&(t={});var i=["components"],u=Object.fromEntries(Object.entries(s).map(function(I){var W,ce=I[0],ie=I[1];return i.includes(ce)?[ce,ie]:[ce,n.propertyWatcher.addDynamicValues((W={},W[ce]=ie,W),t)[ce]]}));if(s.attributes){var y=this.attributeWatcher.setDynamicValues(s.attributes,t);u.attributes=y}return t.skipWatcherUpdates||t.fromDataSource||this.updateSymbolOverride(),u},h.prototype.removeAttributes=function(s){this.attributeWatcher.removeListeners(s),this.updateSymbolOverride()},h.prototype.updateSymbolOverride=function(){if(this.component&&this.component.get(Zn)){var s=this.propertyWatcher.getDynamicValuesOfType(Xt),t=this.attributeWatcher.getDynamicValuesOfType(Xt),n=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([Do,"locked"],s,!0);Object.keys(t).length&&n.push("attributes"),as(this.component).forEach(function(i){i.setSymbolOverride(n,{fromDataSource:!0})}),this.component.setSymbolOverride(n,{fromDataSource:!0})}},h.prototype.getDynamicPropsDefs=function(){return this.propertyWatcher.getAllSerializableValues()},h.prototype.getDynamicAttributesDefs=function(){return this.attributeWatcher.getAllSerializableValues()},h.prototype.getPropsDefsOrValues=function(s){return this.propertyWatcher.getSerializableValues(s)},h.prototype.getAttributesDefsOrValues=function(s){return this.attributeWatcher.getSerializableValues(s)},h.prototype.destroy=function(){this.propertyWatcher.destroy(),this.attributeWatcher.destroy()},h}(),dd=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fs=function(){return Fs=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Fs.apply(this,arguments)},tu=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},Td=function(h){return h.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Sd=function(h){return!!h?.getConfig().avoidInlineStyle},pd="component:drag",Nl="__symbols",ic="__symbol",Ve="__symbol_ovrd",kt=mt.I.update,Br=mt.I.updateInside,qr=function(h){function s(t,n){void 0===t&&(t={});var i=this,u=new ud(void 0,{em:n.em,collectionsStateMap:t[Do]});(i=h.call(this,t,Fs(Fs({},n),{dataResolverWatchers:u}))||this).collectionStateListeners=[],u.bindComponent(i),i.dataResolverWatchers=u,(0,m.bindAll)(i,"__upSymbProps","__upSymbCls","__upSymbComps");var y=n.em,I=i.parent(),W=I?.attributes,ce=i.get("propagate");if(ce&&i.set("propagate",(0,m.isArray)(ce)?ce:[ce]),W&&W.propagate&&!ce){var ie={},Re=W.propagate;Re.forEach(function(br){return ie[br]=I.get(br)}),ie.propagate=Re,i.set(Fs(Fs({},ie),t))}n&&n.config&&n.config.voidElements.indexOf(i.get("tagName"))>=0&&i.set("void",!0),n.em=y,i.opt=n,i.em=y,i.config=n.config||{};var qe=i.dataResolverWatchers.getDynamicAttributesDefs();if(i.setAttributes(Fs(Fs(Fs({},(0,m.result)(i,"defaults").attributes||{}),i.get("attributes")||{}),qe)),i.ccid=s.createId(i,n),i.preInit(),i.initClasses(),i.initComponents(),i.initTraits(),i.initToolbar(),i.initScriptProps(),i.listenTo(i,"change:script",i.scriptUpdated),i.listenTo(i,"change:tagName",i.tagUpdated),i.listenTo(i,"change:attributes",i.attrUpdated),i.listenTo(i,"change:attributes:id",i._idUpdated),i.on("change:toolbar",i.__emitUpdateTlb),i.on("change",i.__onChange),i.on(Br,i.__propToParent),i.set("status",""),i.views=[],["classes","traits","components"].forEach(function(br){var co="add remove ".concat("components"!==br?"change":"");i.listenTo(i.get(br),co.trim(),function(){for(var Bo=[],Oi=0;Oi<arguments.length;Oi++)Bo[Oi]=arguments[Oi];return i.emitUpdate.apply(i,tu([br],Bo,!1))})}),!n.temporary){var ct=y&&y.Css,qt=i.attributes,_r=qt.styles;_r&&ct&&ct.addCollection(_r,{avoidUpdateStyle:!0},{group:"cmp:".concat(qt.type)}),i.__postAdd(),i.init(),zl(i)&&eu(i),y?.trigger(mt.I.create,i,n)}return i}return dd(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){var t;return(t={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null})[ic]=0,t[Nl]=0,t[Ve]=0,t._undo=!0,t._undoexc=["status","open"],t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"content",{get:function(){var t;return null!==(t=this.get("content"))&&void 0!==t?t:""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"page",{get:function(){var t;return null===(t=this.frame)||void 0===t?void 0:t.getPage()},enumerable:!1,configurable:!0}),s.prototype.preInit=function(){},s.prototype.init=function(){},s.prototype.updated=function(t,n,i){},s.prototype.removed=function(){},s.prototype.set=function(t,n,i){var u,y,I={skipWatcherUpdates:!1,fromDataSource:!1};"object"==typeof t?(y=t,I=n||I):"string"==typeof t?((u={})[t]=n,y=u,I=i||I):(y={},I=i||I),this.dataResolverWatchers=this.dataResolverWatchers||I.dataResolverWatchers;var W=this.dataResolverWatchers.addProps(y,I);return h.prototype.set.call(this,W,I)},s.prototype.__postAdd=function(t){void 0===t&&(t={});var n=this.em,i=n?.UndoManager,u=this.components();i&&!this.__hasUm&&(i.add(u),i.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&u.map(function(y){return y.__postAdd(t)})},s.prototype.__postRemove=function(){var t=this.em,n=t?.UndoManager;n&&(n.remove(this.components()),n.remove(this.getSelectors()),delete this.__hasUm)},s.prototype.__onChange=function(t,n){var i=this,u=this.changedAttributes()||{};(0,m.keys)(u).forEach(function(y){return i.emitUpdate(y)}),["status","open","toolbar","traits"].forEach(function(y){return delete u[y]}),(0,X.isEmptyObj)(u)||(this.__changesUp(n),this.__propSelfToParent({component:this,changed:u,options:n}))},s.prototype.__onStyleChange=function(t){var n=this,i=this.em;if(i){var u="component:styleUpdate",y=(0,m.keys)(t),I={style:t};i.trigger(u,this,I),y.forEach(function(W){return i.trigger("".concat(u,":").concat(W),n,I)})}},s.prototype.__changesUp=function(t){[this.frame,this.em].forEach(function(i){return i&&i.changesUp(t)})},s.prototype.__propSelfToParent=function(t){this.trigger(kt,t),this.__propToParent(t)},s.prototype.__propToParent=function(t){var n=this.parent();n&&n.trigger(Br,t)},s.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},s.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},s.prototype.__upSymbProps=function(t,n){void 0===n&&(n={}),function(i,u){void 0===u&&(u={});var y=i.dataResolverWatchers.getPropsDefsOrValues(Ql({},i.changedAttributes())),I=i.dataResolverWatchers.getAttributesDefsOrValues(Ql({},y.attributes));if(function(h,s){["status","open",Nl,ic,Ve,"attributes"].forEach(function(t){return delete h[t]}),delete s.id,(0,X.isEmptyObj)(s)||(h.attributes=s)}(y,I),!(0,X.isEmptyObj)(y)){var W=as(i,u);et(y,i),Lc(i,"props",W,{opts:u,changed:y}),W.forEach(function(ce){var ie=Ql({},y);et(ie,ce),ce.set(ie,Ql({fromInstance:i},u))})}}(this,n)},s.prototype.__upSymbCls=function(t,n,i){void 0===i&&(i={}),function(u,y){void 0===y&&(y={});var I=as(u,y);Lc(u,"classes",I,{opts:y}),I.forEach(function(W){W.set("classes",u.get("classes"),{fromInstance:u})}),u.__changesUp(y)}(this,i)},s.prototype.__upSymbComps=function(t,n,i){dt(this,t,n,i)},s.prototype.is=function(t){return this.get("type")==t},s.prototype.props=function(){return this.attributes},s.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},s.prototype.setDragMode=function(t){return this.set("dmode",t)},s.prototype.getDragMode=function(){return this.get("dmode")||""},s.prototype.setSymbolOverride=function(t,n){var i,u;void 0===n&&(n={}),this.set(((i={})[Ve]=null!==(u=(0,m.isString)(t)?[t]:t)&&void 0!==u?u:0,i),n)},s.prototype.getSymbolOverride=function(){return this.get(Ve)},s.prototype.find=function(t){var n,i=[],u=null===(n=this.view)||void 0===n?void 0:n.$el.find(t);return u?.each(function(y){var I=u.eq(y).data("model");I&&i.push(I)}),i},s.prototype.findType=function(t){var n=[],i=function(u){return u.forEach(function(y){y.is(t)&&n.push(y),i(y.components())})};return i(this.components()),n},s.prototype.findFirstType=function(t){return this.findType(t).at(0)},s.prototype.closest=function(t){var n,i=null===(n=this.view)||void 0===n?void 0:n.$el.closest(t);return i?.length?i.data("model"):void 0},s.prototype.closestType=function(t){for(var n=this.parent();n&&!n.is(t);)n=n.parent();return n},s.prototype.contains=function(t){var n=!1;if(!t)return n;var i=function(u){!n&&u.forEach(function(y){y===t&&(n=!0),!n&&i(y.components())})};return i(this.components()),n},s.prototype.tagUpdated=function(){this.trigger("rerender")},s.prototype.replaceWith=function(t,n){void 0===n&&(n={});var i=this.collection,u=i.indexOf(this);i.remove(this);var y=i.add(t,Fs(Fs({},n),{at:u}));return(0,m.isArray)(y)?y:[y]},s.prototype.attrUpdated=function(t,n,i){var u=this;void 0===i&&(i={});var y=this.get("attributes"),I=y.class;I&&this.setClass(I),delete y.class;var W=y.style;W&&this.setStyle(W,i),delete y.style;var ce=Fs({},this.previous("attributes")),ie=(0,X.shallowDiff)(ce,this.get("attributes"));(0,m.keys)(ie).forEach(function(Re){var qe,ct="attributes:".concat(Re);u.trigger("change:".concat(ct),u,ie[Re],i),null===(qe=u.em)||void 0===qe||qe.trigger("".concat(kt,":").concat(ct),u,ie[Re],i)})},s.prototype.setAttributes=function(t,n){return void 0===n&&(n={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",Fs({},t),n),this},s.prototype.addAttributes=function(t,n){void 0===n&&(n={});var i=this.dataResolverWatchers.getDynamicAttributesDefs();return this.setAttributes(Fs(Fs(Fs({},this.getAttributes({noClass:!0})),i),t),n)},s.prototype.removeAttributes=function(t,n){void 0===t&&(t=[]),void 0===n&&(n={});var i=Array.isArray(t)?t:[t];this.dataResolverWatchers.removeAttributes(i);var u=this.getAttributes();return i.map(function(y){return delete u[y]}),this.setAttributes(u,n)},s.prototype.getStyle=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var i=this.em,u=(0,m.isString)(t)?t:"",y=u?n:t;if(Sd(i)&&!y.inline){var I=i.get("state"),W=i.Css.getIdRule(this.getId(),Fs({state:I},y));return this.rule=W,W?W.getStyle(u):{}}return h.prototype.getStyle.call(this,u)},s.prototype.setStyle=function(t,n){var i=this;void 0===t&&(t={}),void 0===n&&(n={});var u=this.opt,y=this.em;if(!Sd(y)||u.temporary||n.inline)t=h.prototype.setStyle.apply(this,arguments);else{var I=this.get("style")||{};t=(0,m.isString)(t)?this.parseStyle(t):t,t=Fs(Fs({},t),I);var W=y.get("state"),ce=y.Css,ie=this.getStyle(n);this.rule=ce.setIdRule(this.getId(),t,Fs({state:W},n));var Re=(0,X.shallowDiff)(ie,t);this.set("style","",{silent:!0}),(0,m.keys)(Re).forEach(function(qe){return i.trigger("change:style:".concat(qe))})}return u.temporary||this.__onStyleChange(n.addStyle||t),t},s.prototype.getAttributes=function(t){void 0===t&&(t={});var n=this.em,i=[],u=Fs({},this.get("attributes")),y=n?.Selectors,I=this.getId();if(t.noClass?delete u.class:(this.classes.forEach(function(ie){return i.push((0,m.isString)(ie)?ie:ie.getName())}),i.length&&(u.class=i.join(" "))),!t.noStyle){var W=this.getStyle({inline:!0});(0,X.isObject)(W)&&!(0,X.isEmptyObj)(W)&&(u.style=this.styleToString({inline:!0}))}if(!(0,m.has)(u,"id")){var ce=!1;!Sd(n)&&(0,m.isEmpty)(this.getStyle())||(ce=!!y?.get(I,y.Selector.TYPE_ID)),(zl(this)||this.get("script-export")||this.get("script"))&&(ce=!0),ce&&(u.id=I)}return u},s.prototype.addClass=function(t){var n=this.em.Selectors.addClass(t);return this.classes.add(n)},s.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},s.prototype.removeClass=function(t){var n=[];t=(0,m.isArray)(t)?t:[t];var i=this.classes,u=cs.TYPE_CLASS;return t.forEach(function(y){y.split(" ").forEach(function(I){var W=i.where({name:I,type:u})[0];W&&n.push(i.remove(W))})}),n},s.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(" "):[]},s.prototype.initClasses=function(t,n,i){void 0===i&&(i={});var u=this.get("attributes")||{},y=u.class,I=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(u,["class"]),W=[this,"change:classes",this.initClasses],ce=this.get("classes")||y||[],ie=(0,m.isString)(ce)?ce.split(" "):ce;this.stopListening.apply(this,W);var Re=this.normalizeClasses(ie),qe=new Aa([]);return this.set("classes",qe,i),qe.add(Re),qe.on("add remove reset",this.__upSymbCls),y&&Re.length&&this.set("attributes",I),this.listenTo.apply(this,W),this},s.prototype.initComponents=function(){var t=[this,"change:components",this.initComponents];this.stopListening.apply(this,t);var n=new Ri([],this.opt);n.parent=this;var i=this.get("components"),u=!this.opt.avoidChildren;return this.set("components",n),u&&i&&n.add((0,m.isFunction)(i)?i(this):i,this.opt),n.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,t),this},s.prototype.initTraits=function(t){var n=this,i=this.em,u="change:traits";this.off(u,this.initTraits),this.__loadTraits();var y=Fs({},this.get("attributes")),I=this.traits;I.each(function(ce){var ie=ce.getName(),Re=ce.getInitValue();ce.changeProp?(0,m.isUndefined)(n.get(ie))&&n.set(ie,Re):ie&&Re&&(y[ie]=Re)});var W=this.dataResolverWatchers.getDynamicAttributesDefs();return I.length&&this.setAttributes(Fs(Fs({},y),W)),this.on(u,this.initTraits),t&&i&&i.trigger("component:toggled"),this},s.prototype.initScriptProps=function(){if(!this.opt.temporary){var t="script-props",n=["change:".concat(t),this.initScriptProps];this.off.apply(this,n);var i=this.previous(t)||[],u=this.get(t)||[],y=i.map(function(W){return"change:".concat(W)}).join(" "),I=u.map(function(W){return"change:".concat(W)}).join(" ");y&&this.off(y,this.__scriptPropsChange),I&&this.on(I,this.__scriptPropsChange),this.on.apply(this,n)}},s.prototype.__scriptPropsChange=function(t,n,i){void 0===i&&(i={}),i.avoidStore||this.trigger("rerender")},s.prototype.append=function(t,n){void 0===n&&(n={});var i=((0,m.isArray)(t)?tu([],t,!0):[t]).map(function(u){return(0,m.isString)(u)||u.collection&&u.collection.remove(u,{temporary:!0}),u});return this.components().add(i,Fs({action:mt.t.add},n))},s.prototype.components=function(t,n){void 0===n&&(n={});var i=this.get("components");return(0,m.isUndefined)(t)?i:(i.reset(void 0,n),t?this.append(t,n):[])},s.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},s.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},s.prototype.empty=function(t){return void 0===t&&(t={}),this.components().reset(void 0,t),this},s.prototype.parent=function(t){void 0===t&&(t={});var n=this.collection||t.prev&&this.prevColl;return n?n.parent:void 0},s.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},s.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},s.prototype.initToolbar=function(){var t=this.em,n=this,i=t&&t.getConfig().stylePrefix||"";if(!n.get("toolbar")&&t){var u=[];n.collection&&u.push({label:t.getIcon("arrowUp"),command:function(y){return y.runCommand("core:component-exit",{force:1})}}),n.get("draggable")&&u.push({attributes:{class:"".concat(i,"no-touch-actions"),draggable:!0},label:t.getIcon("move"),command:"tlb-move"}),n.get("copyable")&&u.push({label:t.getIcon("copy"),command:"tlb-clone"}),n.get("removable")&&u.push({label:t.getIcon("delete"),command:"tlb-delete"}),n.set("toolbar",u)}},s.prototype.__loadTraits=function(t,n){void 0===n&&(n={});var i=t||this.traits;if(!(i instanceof ml)){i=(0,m.isFunction)(i)?i(this):i;var u=new ml([],this.opt);u.setTarget(this),i.length&&u.add(i),this.set({traits:u},n)}return this},s.prototype.getTraits=function(){return this.__loadTraits(),tu([],this.traits.models,!0)},s.prototype.setTraits=function(t){var n=(0,m.isArray)(t)?t:[t];return this.set({traits:n}),this.getTraits()},s.prototype.getTrait=function(t){return this.getTraits().filter(function(n){return n.get("id")===t||n.get("name")===t})[0]||null},s.prototype.updateTrait=function(t,n){var i,u=this.getTrait(t);return u&&u.set(n),null===(i=this.em)||void 0===i||i.trigger("component:toggled"),this},s.prototype.getTraitIndex=function(t){var n=this.getTrait(t);return n?this.traits.indexOf(n):-1},s.prototype.removeTrait=function(t){var n,i=this,u=((0,m.isArray)(t)?t:[t]).map(function(W){return i.getTrait(W)}),I=u.length?this.traits.remove(u):[];return null===(n=this.em)||void 0===n||n.trigger("component:toggled"),(0,m.isArray)(I)?I:[I]},s.prototype.addTrait=function(t,n){var i;void 0===n&&(n={}),this.__loadTraits();var u=this.traits.add(t,n);return null===(i=this.em)||void 0===i||i.trigger("component:toggled"),(0,m.isArray)(u)?u:[u]},s.prototype.normalizeClasses=function(t){var n=[],i=this.em,u=i?.Selectors;return u?t.models?tu([],t.models,!0):(t.forEach(function(y){return n.push(u.add(y))}),n):[]},s.prototype.clone=function(t){void 0===t&&(t={});var n=this.em,i=Fs(Fs({},this.attributes),this.dataResolverWatchers.getDynamicPropsDefs()),u=Fs({},this.opt),y=this.getId(),I=n?.Css;i.attributes=Fs({},i.attributes?this.dataResolverWatchers.getAttributesDefsOrValues(i.attributes):void 0),i.components=[],i.classes=[],i.traits=[],Xc(this)&&(t.symbol=!0),this.get("components").each(function(ct,qt){i.components[qt]=ct.clone(Fs(Fs({},t),{_inner:1}))}),this.get("traits").each(function(ct,qt){i.traits[qt]=ct.clone()}),this.get("classes").each(function(ct,qt){i.classes[qt]=ct.get("name")}),i.status="",u.collection=null,u.forCloning=!0;var W=new this.constructor(i,u),ce="#".concat(W.getId());(I?I.getRules("#".concat(y)):[]).forEach(function(ct){var qt=ct.clone();qt.set("selectors",[ce]),I.getAll().add(qt)}),W.set(Nl,0);var ie=Oa(this),Re=Ll(this);t.symbol||!ie&&!Re?ie?(ie.set(Nl,tu(tu([],Ll(ie),!0),[W],!1)),eu(W)):t.symbol&&(Qc(this)?(this.set(Nl,tu(tu([],Re,!0),[W],!1)),W.set(ic,this),eu(W)):t.symbolInv?(this.set(Nl,[W]),W.set(ic,this),[this,W].map(function(ct){return eu(ct)})):(W.set(Nl,[this]),[this,W].map(function(ct){return eu(ct)}),this.set(ic,W))):(W.set(ic,0),W.set(Nl,0));var qe="component:clone";return n&&n.trigger(qe,W),this.trigger(qe,W),W},s.prototype.getName=function(t){void 0===t&&(t={});var n=this.em,i=this.attributes,u=i.type,y=i.tagName,I=i.name,W=u||y,ce=u?"":y,ie="domComponents.names.",Re=I&&n?.t("".concat(ie).concat(I)),qe=ce&&n?.t("".concat(ie).concat(ce)),ct=n&&(n.t("".concat(ie).concat(u))||n.t("".concat(ie).concat(y))),qt=this.get("custom-name");return(t.noCustom?"":qt)||Re||I||qe||(0,X.capitalize)(ce)||ct||(0,X.capitalize)(W)},s.prototype.setName=function(t,n){void 0===n&&(n={}),this.set("custom-name",t,n)},s.prototype.getIcon=function(){var t=this.get("icon");return t?t+" ":""},s.prototype.toHTML=function(t){void 0===t&&(t={});var n=t.tag||this.get("tagName");delete t.tag;var i=this.__attrToString(t),u=i?" ".concat(i):"",y=this.getInnerHTML(t),I=!y&&this.get("void"),W="<".concat(n).concat(u).concat(I?"/":"",">").concat(y);return!I&&(W+="</".concat(n,">")),W},s.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},s.prototype.__innerHTML=function(t){void 0===t&&(t={});var n=this.components();return n.length?n.map(function(i){return i.toHTML(t)}).join(""):this.content},s.prototype.__attrToString=function(t){void 0===t&&(t={});var n=[],i=t.attributes,u=this.getAttrToHTML(t);if(i&&((0,m.isFunction)(i)?u=i(this,u)||{}:(0,X.isObject)(i)&&(u=i)),t.withProps){var y=this.toJSON();(0,m.forEach)(y,function(Re,qe){"_"!==qe[0]&&["classes","attributes","components"].indexOf(qe)<0&&(u["data-gjs-".concat(qe)]=(0,m.isArray)(Re)||(0,X.isObject)(Re)?JSON.stringify(Re):(0,m.isBoolean)(Re)?"".concat(Re):Re)})}for(var I in u){var W=u[I];if(!(0,m.isUndefined)(W)&&null!==W)if((0,m.isBoolean)(W))W&&n.push(I);else{var ce="";if(t.altQuoteAttr&&(0,m.isString)(W)&&W.indexOf('"')>=0)ce="'".concat(W.replace(/'/g,"&apos;"),"'");else{var ie=(0,m.isString)(W)?W.replace(/"/g,"&quot;"):W;ce='"'.concat(ie,'"')}n.push("".concat(I,"=").concat(ce))}}return n.join(" ")},s.prototype.getAttrToHTML=function(t){var n=this.getAttributes();return Sd(this.em)&&!0!==t?.keepInlineStyle&&delete n.style,n},s.prototype.toJSON=function(t){void 0===t&&(t={});var n=H.Model.prototype.toJSON.call(this,t);if((n=Fs(Fs({},n),this.dataResolverWatchers.getDynamicPropsDefs())).attributes=this.dataResolverWatchers.getAttributesDefsOrValues(this.getAttributes()),delete n.dataResolverWatchers,delete n.attributes.class,delete n.toolbar,delete n.traits,delete n.status,delete n.open,delete n._undoexc,delete n.delegate,this.get(Zn)&&(delete n[ic],delete n[Ve],delete n[Nl],delete n[Do],delete n[Zn],delete n.attributes.id),!t.fromUndo){var i=n[ic],u=n[Nl];u&&(0,m.isArray)(u)&&(n[Nl]=u.filter(function(y){return y}).map(function(y){return y.getId?y.getId():y})),i&&!(0,m.isString)(i)&&(n[ic]=i.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(n),n},s.prototype.getChangedProps=function(t){var n=t||H.Model.prototype.toJSON.apply(this),i=(0,m.result)(this,"defaults");return(0,m.forEach)(i,function(u,y){-1===["type"].indexOf(y)&&n[y]===u&&delete n[y]}),(0,m.isEmpty)(n.type)&&delete n.type,(0,m.forEach)(["attributes","style"],function(u){(0,m.isEmpty)(i[u])&&(0,m.isEmpty)(n[u])&&delete n[u]}),(0,m.forEach)(["classes","components"],function(u){(!n[u]||(0,m.isEmpty)(i[u])&&!n[u].length)&&delete n[u]}),n},s.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},s.prototype.setId=function(t,n){return this.addAttributes({id:t},n),this},s.prototype.getEl=function(t){var n=this.getView(t);return n&&n.el},s.prototype.getView=function(t){var n=this,i=n.view,u=n.views,y=n.em,I=t||y?.getCurrentFrameModel();return I&&(i=u.filter(function(W){return W.frameView===I.view})[0]),i},s.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),n=t?.model;return this.getView(n)},s.prototype.__getScriptProps=function(){var t=this.props();return(this.get("script-props")||[]).reduce(function(n,i){return n[i]=t[i],n},{})},s.prototype.getScriptString=function(t){var n=this,i=t||this.get("script")||"";if(!i)return i;if(this.get("script-props"))i=i.toString().trim();else{if((0,m.isFunction)(i)){var u=i.toString().trim();i=(u=u.slice(u.indexOf("{")+1,u.lastIndexOf("}"))).trim()}var y=this.em.getConfig(),I=Td(y.tagVarStart||"{[ "),W=Td(y.tagVarEnd||" ]}"),ce=new RegExp("".concat(I,"([\\w\\d-]*)").concat(W),"g");i=i.replace(ce,function(ie,Re){n.scriptUpdated();var qe=n.attributes[Re]||"";return(0,m.isArray)(qe)||"object"==typeof qe?JSON.stringify(qe):qe})}return i},s.prototype.emitUpdate=function(t){for(var n,i=[],u=1;u<arguments.length;u++)i[u-1]=arguments[u];var y=this.em,I=kt+(t?":".concat(t):""),W=t&&this.get(t);t&&this.updated.apply(this,tu([t,W,t&&this.previous(t)],i,!1)),this.trigger.apply(this,tu([I],i,!1)),y&&y.trigger.apply(y,tu([I,this],i,!1)),["components","classes"].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(n={},n[t]=W,n),options:i[2]||i[1]||{}})},s.prototype.emitWithEditor=function(t,n,i){[this.em,this].forEach(function(u){return u?.trigger(t,n,i)})},s.prototype.onAll=function(t){return(0,m.isFunction)(t)&&(t(this),this.components().forEach(function(n){return n.onAll(t)})),this},s.prototype.forEachChild=function(t){(0,m.isFunction)(t)&&this.components().forEach(function(n){t(n),n.forEachChild(t)})},s.prototype.remove=function(t){var n=this;void 0===t&&(t={});var i=this.em,u=this.collection,y=function(){u&&u.remove(n,Fs({action:mt.t.remove},t)),u||(n.components("",t),n.components().removeChildren(n,void 0,t))},I=Fs({},t);return[this,i].map(function(W){return W.trigger(mt.I.removeBefore,n,y,I)}),!I.abort&&y(),this},s.prototype.destroy=function(t){return this.dataResolverWatchers.destroy(),h.prototype.destroy.call(this,t)},s.prototype.move=function(t,n){if(void 0===n&&(n={}),t){var i=n.at,u=this.index(),y=t===this.parent();if(!y||u!==i&&u!==i-1){y&&i&&i>u&&(n.at=i-1);var I=mt.t.move;this.remove({action:I,temporary:1}),t.append(this,Fs({action:I},n)),this.emitUpdate()}}return this},s.prototype.isInstanceOf=function(t){var n,i,u=null===(i=null===(n=this.em)||void 0===n?void 0:n.Components.getType(t))||void 0===i?void 0:i.model;return!!u&&(this instanceof u||this.constructor.typeExtends.has(t))},s.prototype.isChildOf=function(t){for(var n=(0,m.isString)(t),i=this.parent();i;){if(n){if(i.isInstanceOf(t))return!0}else if(i===t)return!0;i=i.parent()}return!1},s.prototype.resetId=function(t){void 0===t&&(t={});var n=this.em,i=this.getId();if(!i)return this;var u=s.createId(this);this.setId(u);var y=n?.Css.getIdRule(i),I=y?.get("selectors").at(0);return I?.set("name",u),this},s.prototype._getStyleRule=function(t){var i=this.em,u=(void 0===t?{}:t).id||this.getId();return i?.Css.getIdRule(u)},s.prototype._getStyleSelector=function(t){var n=this._getStyleRule(t);return n?.get("selectors").at(0)},s.prototype._idUpdated=function(t,n,i){if(void 0===i&&(i={}),!i.idUpdate){var u=this.ccid,y=(this.get("attributes")||{}).id,I=(this.previous("attributes")||{}).id||u,W=s.getList(this);if(W[y]||!y&&I)return this.setId(I,{idUpdate:!0});delete W[I],W[y]=this,this.ccid=y;var ce=this._getStyleSelector({id:I});ce&&ce.set({name:y,label:y})}},s.getDefaults=function(){return(0,m.result)(this.prototype,"defaults")},s.isComponent=function(t,n){return{tagName:(0,X.toLowerCase)(t.tagName)}},s.ensureInList=function(t){var n=s.getList(t),i=t.getId(),u=n[i];if(u){if(u!==t){var y=s.getIncrementId(i,n);t.setId(y),n[y]=t}}else n[i]=t;t.components().forEach(function(I){return s.ensureInList(I)})},s.createId=function(t,n){void 0===n&&(n={});var i,u=s.getList(t),y=n.idMap,I=void 0===y?{}:y,W=t.get("attributes").id;return W?(i=s.getIncrementId(W,u,n),t.setId(i),W!==i&&(I[W]=i)):i=s.getNewId(u),u[i]=t,i},s.getNewId=function(t){for(var n=Object.keys(t).length.toString().length+2,i=(Math.random()+1.1).toString(36).slice(-n),u="i".concat(i);t[u];)u=s.getNewId(t);return u},s.getIncrementId=function(t,n,i){void 0===i&&(i={});var u=i.keepIds,y=1,I=t;if((void 0===u?[]:u).indexOf(t)<0)for(;n[I];)y++,I="".concat(t,"-").concat(y);return I},s.getList=function(t){var n,i=t.em,u=i?.Components;return null!==(n=u?.componentsById)&&void 0!==n?n:{}},s.checkId=function(t,n,i,u){void 0===n&&(n=[]),void 0===i&&(i={}),void 0===u&&(u={});var y=(0,m.isArray)(t)?t:[t],I=u.keepIds,W=void 0===I?[]:I,ce=u.idMap,ie=void 0===ce?{}:ce;y.forEach(function(Re){var qe=Re.attributes,ct=void 0===qe?{}:qe,qt=Re.components,_r=ct.id;if(_r&&i[_r]&&W.indexOf(_r)<0){var zr=s.getIncrementId(_r,i);ie[_r]=zr,ct.id=zr,(0,m.isArray)(n)&&n.forEach(function(br){var co=br.selectors;co.forEach(function(Bo,Oi){Bo==="#".concat(_r)&&(co[Oi]="#".concat(zr))})})}qt&&s.checkId(qt,n,i,u)})},s.typeExtends=new Set,s}(ad);const vn=qr;var On=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),oi=function(){return oi=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},oi.apply(this,arguments)},ji="head",Cs=["title","style","base","link","meta","script","noscript"],Ls=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return On(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return oi(oi({},h.prototype.defaults),{type:ji,tagName:ji,draggable:!1,highlightable:!1,droppable:function(t){var n=t.tagName;return!n||Cs.includes((0,X.toLowerCase)(n))}})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===ji},s}(vn);const gl=Ls;var _c=O(2128),fu=O(6778),hu=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jf=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return hu(s,h),s.prototype.canMove=function(t,n){var i=this,u=this.getRealIndex(n),y=t._dragSource,I=y.model,W=y.content,ce=y.dragDef,ie=!I||!this.isSourceSameSymbol(I),Re=((0,m.isFunction)(W)?ce:W)||t.model;return Array.isArray(Re)?ie&&Re.every(function(qe,ct){return i.canMoveSingleContent(qe,u+ct)}):ie&&this.canMoveSingleContent(Re,u)},s.prototype.canMoveSingleContent=function(t,n){return this.model.em.Components.canMove(this.model,t,n).result},s.prototype.addChildAt=function(t,n){var i=t._dragSource.content,u=this.isTextNode()&&t.isTextable(),y=(0,m.isFunction)(i)?i():i;return Array.isArray(y)?this.addMultipleChildren(y,n,u):this.addSingleChild(y,n,u)},s.prototype.addSingleChild=function(t,n,i){var u,y,I,W,ce;return ce=i?null===(W=null===(I=null===(y=null===(u=this.model)||void 0===u?void 0:u.getView)||void 0===y?void 0:y.call(u))||void 0===I?void 0:I.insertComponent)||void 0===W?void 0:W.call(I,t,{action:"add-component"}):this.model.components().add(t,{at:this.getRealIndex(n),action:"add-component"}),new this.constructor(ce)},s.prototype.addMultipleChildren=function(t,n,i){var u,y=this;return t.forEach(function(I,W){u=y.addSingleChild(I,n+W,i)}),u},s.prototype.isSourceSameSymbol=function(t){if(zl(this.model)){var n=El(this.model);if((Qc(n)?n:Oa(n))===t)return!0}return!1},Object.defineProperty(s.prototype,"content",{set:function(t){this._dragSource.content=t},enumerable:!1,configurable:!0}),s}(fu.A);const Dm=Jf;var Vs=function(){return Vs=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Vs.apply(this,arguments)},_g=function(){function h(s,t){var n=this;this.em=s,this.canvas=s.Canvas;var i=t||this.canvas.getFrames().map(function(y){return y.getComponent().getEl()}),u=Array.isArray(i)?i:[i];this.el=u[0],this.counter=0,(0,m.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),u.forEach(function(y){return n.toggleEffects(y,!0)})}return h.prototype.toggleEffects=function(s,t){var n={on:jt.on,off:jt.AU},i=t?"on":"off";n[i](s,"dragenter",this.handleDragEnter),n[i](s,"dragover",this.handleDragOver),n[i](s,"drop",this.handleDrop),n[i](s,"dragleave",this.handleDragLeave)},h.prototype.__customTglEff=function(s){var t,n=s?jt.on:jt.AU,i=this.el.ownerDocument,u=null===(t=i.defaultView)||void 0===t?void 0:t.frameElement;this.getSorterOptions=s?function(y){return{legacyOnStartSort:function(){(0,jt.on)(u,"pointermove",y.onMove)},legacyOnEnd:function(){(0,jt.AU)(u,"pointermove",y.onMove)},customTarget:function(I){var W=I.event;return i.elementFromPoint(W.clientX,W.clientY)}}}:void 0,n(u,"pointerenter",this.handleDragEnter),n(u,"pointermove",this.handleDragOver),n(document,"pointerup",this.handleDrop),n(u,"pointerout",this.handleDragLeave)},h.prototype.startCustom=function(){this.__customTglEff(!0)},h.prototype.endCustom=function(s){this.over?this.endDrop(s):this.__customTglEff(!1)},h.prototype.endDrop=function(s,t){var n=this.em,i=this.dragStop;this.counter=0,i&&i(s||!this.over),this.__customTglEff(!1),n.trigger("canvas:dragend",t)},h.prototype.handleDragLeave=function(s){this.updateCounter(-1,s)},h.prototype.updateCounter=function(s,t){this.counter+=s,0===this.counter&&this.endDrop(!0,t)},h.prototype.handleDragEnter=function(s){var t,n,i,u=this,y=this.em,I=this.canvas,W=s.dataTransfer,ce=y.get("dragSource");if((ce?.content||I.getConfig().allowExternalDrop)&&(this.updateCounter(1,s),!this.over)){this.over=!0;var ie,Re=y.Utils,qe=ce?.content||"<br>";if(y.stopDefault(),y.inAbsoluteMode()){var ct=y.Components.getWrapper(),qt=ct.append({})[0],_r=y.Commands.run("core:component-drag",{event:s,guidesInfo:1,center:1,target:qt,onEnd:function(Oi,Qi,Ca){var ys;if(!Ca.cancelled&&qe){ys=ct.append(qe)[0];var ss=I.getOffset(),il=qt.getStyle(),_l=il.top,wu=il.left,Nc=il.position,Ku=(0,jt.Xy)(Oi.target),Fd=parseInt("".concat(parseFloat(wu)+Ku.x-ss.left),10),vf=parseInt("".concat(parseFloat(_l)+Ku.y-ss.top),10);ys.addStyle({left:Fd+"px",top:vf+"px",position:Nc})}u.handleDragEnd(ys,W),qt.remove()}});ie=function(Oi){return _r.stop(s,{cancel:Oi})},this.setAbsoluteDragContent=function(Oi){return qe=Oi}}else{var zr=new Re.ComponentSorter({em:y,treeClass:Dm,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:I.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:_c.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),br=null===(t=this.getSorterOptions)||void 0===t?void 0:t.call(this,zr);br&&(zr.eventHandlers.legacyOnStartSort=br.legacyOnStart,zr.eventHandlers.legacyOnEnd=br.legacyOnEnd,zr.containerContext.customTarget=br.customTarget);var co=null===(n=this.getTempDropModel(qe).view)||void 0===n?void 0:n.el;zr.startSort(co?[{element:co,dragSource:ce}]:[]),this.sorter=zr,this.draggedNode=null===(i=zr.sourceNodes)||void 0===i?void 0:i[0],ie=function(Oi){Oi?zr.cancelDrag():zr.endDrag()}}this.dragStop=ie,y.trigger("canvas:dragenter",W,qe)}},h.prototype.getTempDropModel=function(s){var t,n=this.em.Components.getComponents(),i={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},u=n.add(s,Vs(Vs({},i),{temporary:!0})),y=n.remove(u,Vs(Vs({},i),{temporary:!0}));return null===(t=(y=y instanceof Array?y[0]:y).view)||void 0===t||t.$el.data("model",y),y},h.prototype.handleDragEnd=function(s,t){var n=this.em;this.over=!1,s&&(n.set("dragResult",s),n.trigger("canvas:drop",t,s)),n.runDefault({preserveSelected:1})},h.prototype.handleDragOver=function(s){s.preventDefault(),this.em.trigger("canvas:dragover",s)},h.prototype.handleDrop=function(s){var t;s.preventDefault();var i=this.getContentByData(s.dataTransfer).content;this.draggedNode&&(this.draggedNode.content=i),null===(t=this.setAbsoluteDragContent)||void 0===t||t.call(this,i),this.endDrop(!i,s)},h.prototype.getContentByData=function(s){var t=this.em,n=s&&s.types,i=s&&s.files||[],u=t.get("dragSource"),y=s&&s.getData("text");if(i.length){y=[];for(var I=0;I<i.length;I++){var W=i[I],ce=W.type.split("/")[0];"image"==ce&&y.push({type:ce,file:W,attributes:{alt:W.name}})}}else if(u?.content)y=u.content;else if((0,m.indexOf)(n,"text/html")>=0)y=s&&s.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,m.indexOf)(n,"text/uri-list")>=0)y={type:"link",attributes:{href:y},content:y};else if((0,m.indexOf)(n,"text/json")>=0){var ie=s&&s.getData("text/json");ie&&(y=JSON.parse(ie))}else 1===n.length&&"text/plain"===n[0]&&(y="<div>".concat(y,"</div>"));var Re={content:y};return t.trigger("canvas:dragdata",s,Re),Re},h}();const fd=_g;var qm=function(){function h(s,t){var n;void 0===s&&(s=50),this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=s,this.lastMaxHeight=null!==(n=t?.lastMaxHeight)&&void 0!==n?n:0,this.onScroll=t?.onScroll,this.rectIsInScrollIframe=!!t?.rectIsInScrollIframe,(0,m.bindAll)(this,"start","autoscroll","updateClientY","stop")}return h.prototype.start=function(s,t,n){var i=this;this.eventEl=s,this.scrollEl=t,this.lastMaxHeight=n?.lastMaxHeight||Number.POSITIVE_INFINITY,this.zoom=n?.zoom||1,setTimeout(function(){i.toggleAutoscrollFx(!0),requestAnimationFrame(i.autoscroll)},0)},h.prototype.autoscroll=function(){var s,t,n=this.scrollEl;if(this.dragging&&n){var i=null!==(s=this.lastClientY)&&void 0!==s?s:0,u=this.autoscrollLimit,y=this.getEventElHeight()-u,I=0;i<u&&(I+=i-u),i>y&&(I+=i-y);var W=this.getElScrollTop(n);void 0!==this.lastClientY&&0!==I&&this.lastMaxHeight-I>W&&(n.scrollBy({top:I,left:0,behavior:"auto"}),null===(t=this.onScroll)||void 0===t||t.call(this)),requestAnimationFrame(this.autoscroll)}},h.prototype.getEventElHeight=function(){var s=this.eventEl;return s?s.getBoundingClientRect().height:0},h.prototype.updateClientY=function(s){var t=this.scrollEl;s.preventDefault();var n=this.rectIsInScrollIframe?0:this.getElScrollTop(t);this.lastClientY=(0,jt.G2)(s).clientY*this.zoom-n},h.prototype.getElScrollTop=function(s){return(s instanceof HTMLElement?s.scrollTop:s?.scrollY)||0},h.prototype.toggleAutoscrollFx=function(s){this.dragging=s;var t=this.eventEl;if(t){var n=s?"on":"off",i={on:jt.on,off:jt.AU};i[n](t,"mousemove dragover",this.updateClientY),i[n](t,"mouseup",this.stop)}},h.prototype.stop=function(){this.toggleAutoscrollFx(!1)},h}();const Of=qm;var Sh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wl=function(){return wl=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},wl.apply(this,arguments)},Df=function(h){function s(t,n){var i=h.call(this,{model:t})||this;i.dragging=!1,i.loaded=!1,i.lastMaxHeight=0,i.tools={},(0,m.bindAll)(i,"startAutoscroll","stopAutoscroll","_emitUpdate");var u=i.el;i.module._config=wl(wl({},i.config||{}),{frameView:i}),i.frameWrapView=n,i.showGlobalTools=(0,m.debounce)(i.showGlobalTools.bind(i),50);var y=i.getCanvasModel();return i.listenTo(t,"change:head",i.updateHead),i.listenTo(y,"change:styles",i.renderStyles),t.view=i,(0,X.setViewEl)(u,i),i.autoScroller=new Of(i.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){i.getGlobalToolsEl().style.opacity="0",i.showGlobalTools(),i.em.Canvas.spots.refreshDbn()}}),i}return Sh(s,h),Object.defineProperty(s.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),s.prototype.getBoxRect=function(){var t=this.el,n=this.module,i=n.getCanvasView(),u=n.getCoords(),y=t.getBoundingClientRect(),I=i.getCanvasOffset(),W=i.getViewportDelta(),ce=n.getZoomMultiplier();return{x:(y.x-I.left-W.x-u.x)*ce,y:(y.y-I.top-W.y-u.y)*ce,width:y.width*ce,height:y.height*ce}},s.prototype.updateHead=function(){var t=this.model,n=this.getHead(),i=[],u=[],y=t.head,I=t.previous("head"),W=function(ie){return void 0===ie&&(ie={}),Object.keys(ie).sort().map(function(Re){return"[".concat(Re,'="').concat(ie[Re],'"]')}).join("")},ce=function(ie,Re,qe){ie.forEach(function(ct){var qt=ct.tag,_r=ct.attributes;!Re.some(function(zr){return zr.tag===qt&&W(zr.attributes)===W(_r)})&&qe.push(ct)})};ce(y,I,u),ce(I,y,i),i.forEach(function(ie){var Re,qe=n.querySelector("".concat(ie.tag).concat(W(ie.attributes)));null===(Re=qe?.parentNode)||void 0===Re||Re.removeChild(qe)}),(0,jt.af)(n,u)},s.prototype.getEl=function(){return this.el},s.prototype.getCanvasModel=function(){var t;return null===(t=null==this?void 0:this.em.Canvas)||void 0===t?void 0:t.getModel()},s.prototype.getWindow=function(){return this.getEl().contentWindow},s.prototype.getDoc=function(){return this.getEl().contentDocument},s.prototype.getHead=function(){return this.getDoc().querySelector("head")},s.prototype.getBody=function(){return this.getDoc().querySelector("body")},s.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},s.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,jt.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},s.prototype.getToolsEl=function(){var t;return null===(t=this.frameWrapView)||void 0===t?void 0:t.elTools},s.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},s.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},s.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},s.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},s.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},s.prototype.getOffsetRect=function(){var t=this.el,n=this.getBody(),i=n.scrollTop,u=n.scrollLeft,y=t.offsetHeight,I=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:y,width:I,scrollTop:i,scrollLeft:u,scrollBottom:i+y,scrollRight:u+I}},s.prototype._getTool=function(t){var n=this.tools,i=this.getToolsEl();return n[t]||(n[t]=i.querySelector(t)),n[t]},s.prototype.remove=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return this._toggleEffects(!1),this.tools={},null===(t=this.wrapper)||void 0===t||t.remove(),Nt.prototype.remove.apply(this,n),this},s.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal()})},s.prototype.stopAutoscroll=function(){this.autoScroller.stop()},s.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},s.prototype.render=function(){var t=this,u=t.em;return t.$el.attr({class:"".concat(t.ppfx,"frame")}),this.renderScripts(),u.trigger("frame:render",this),this},s.prototype.renderScripts=function(){var t=this,n=this,i=n.el,y=n.em,I="frame:load",W={el:i,model:n.model,view:this},ce=this.getCanvasModel(),ie=function(Re){var qe;if(Re.length>0){var ct=Re.shift(),qt=(0,jt.a_)("script",wl({type:"text/javascript"},(0,m.isString)(ct)?{src:ct}:ct));null===(qe=i.contentDocument)||void 0===qe||qe.head.appendChild(qt),qt.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?ie(Re):qt.onerror=qt.onload=ie.bind(null,Re)}else y?.trigger(Ki.frameLoadHead,W),t.renderBody(),y?.trigger(Ki.frameLoadBody,W),y?.trigger(I,W)};i.onload=function(){var Re=t.config.frameContent;if(Re){var qe=t.getDoc();qe.open(),qe.write(Re),qe.close()}W.window=t.getWindow(),y?.trigger("".concat(I,":before"),W),y?.trigger(Ki.frameLoad,W),t.renderHead(),ie(function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],ce.get("scripts"),!0))}},s.prototype.renderStyles=function(t){void 0===t&&(t={});var n=this.getHead(),i=this.getCanvasModel(),u=function(Re){return void 0===Re&&(Re=[]),Re.map(function(qe){return{tag:"link",attributes:wl({rel:"stylesheet"},(0,m.isString)(qe)?{href:qe}:qe)}})},y=u(t.prev||i.previous("styles")),I=u(i?.get("styles")),W=[],ce=[],ie=function(Re,qe,ct){Re.forEach(function(qt){var _r=qt.attributes.href;!qe.some(function(zr){return zr.attributes.href===_r})&&ct.push(qt)})};ie(I,y,ce),ie(y,I,W),W.forEach(function(Re){var qe,ct=n.querySelector('link[href="'.concat(Re.attributes.href,'"]'));null===(qe=ct?.parentNode)||void 0===qe||qe.removeChild(ct)}),(0,jt.af)(n,ce)},s.prototype.renderHead=function(){var t,i=this.em,u=this.model.root,y=null===(t=i?.Components)||void 0===t?void 0:t.getType(ji).view;y&&(this.headView=new y({el:this.getHead(),model:u.head,config:wl(wl({},u.config),{frameView:this})}).render())},s.prototype.renderBody=function(){var t,n,i,u=this,y=this,I=y.config,W=y.em,ce=y.model,ie=y.ppfx,Re=this.getDoc(),qe=this.getBody(),ct=this.getWindow(),qt=ce.hasAutoHeight(),_r=W.config;ct._isEditor=!0,this.renderStyles({prev:[]}),(0,jt.BC)(qe,"<style>\n      ".concat(_r.baseCss||I.frameStyle||"","\n\n      ").concat(qt?"body { overflow: hidden }":"",'\n\n      [data-gjs-type="wrapper"] {\n        ').concat(qt?"":"min-height: 100vh;","\n        padding-top: 0.001em;\n      }\n\n      .").concat(ie,"dashed *[data-gjs-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(ie,"selected {\n        outline: 2px solid #3b97e3 !important;\n        outline-offset: -2px;\n      }\n\n      .").concat(ie,"selected-parent {\n        outline: 2px solid ").concat("#ffca6f"," !important\n      }\n\n      .").concat(ie,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(ie,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(ie,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(ie,"pointer-init {\n        pointer-events: initial;\n      }\n\n      .").concat(ie,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(ie,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(ie,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(ie,"is__grabbing,\n      .").concat(ie,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(_r.canvasCss||"","\n      ").concat(_r.protectedCss||"","\n    </style>"));var zr=ce.root,br=((null===(t=W?.Components)||void 0===t?void 0:t.getType("wrapper"))||{}).view;br&&(this.wrapper=new br({model:zr,config:wl(wl({},zr.config),{em:W,frameView:this})}).render(),(0,jt.BC)(qe,null===(n=this.wrapper)||void 0===n?void 0:n.el),(0,jt.BC)(qe,new Ln({collection:ce.getStyles(),config:wl(wl({},W.Css.getConfig()),{frameView:this})}).render().el),(0,jt.BC)(qe,this.getJsContainer()),(0,jt.on)(qe,"click",function(co){var Bo;return co&&"A"==(null===(Bo=co.target)||void 0===Bo?void 0:Bo.tagName)&&co.preventDefault()}),(0,jt.on)(qe,"submit",function(co){return co&&co.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!I.infiniteCanvas}}].forEach(function(co){return co.event.split(" ").forEach(function(Bo){Re.addEventListener(Bo,function(Oi){return u.el.dispatchEvent((0,jt.yL)(Oi,co.class))},co.opts)})}),this._toggleEffects(!0),(0,X.hasDnd)(W)&&(this.droppable=new fd(W,null===(i=this.wrapper)||void 0===i?void 0:i.el)),this.loaded=!0,ce.trigger("loaded"))},s.prototype._toggleEffects=function(t){var n=t?jt.on:jt.AU,i=this.getWindow();i&&n(i,"".concat(jt.D8," resize"),this._emitUpdate)},s.prototype._emitUpdate=function(){this.model._emitUpdated()},s}(Nt);const Yf=Df;var Tf=O(5633),yg=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ul=function(){return Ul=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ul.apply(this,arguments)},Hd=function(h){function s(t,n){var i=h.call(this,{model:t})||this;return(0,m.bindAll)(i,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Ul(Ul({},t.config),{frameWrapView:i}),i.cv=n,i.frame=new Yf(t,i),i.classAnim="".concat(i.ppfx,"frame-wrapper--anim"),i.updateOffset=(0,m.debounce)(i.updateOffset.bind(i),0),i.updateSize=(0,m.debounce)(i.updateSize.bind(i),0),i.listenTo(t,"loaded",i.frameLoaded),i.listenTo(t,"change:x change:y",i.updatePos),i.listenTo(t,"change:width change:height",i.updateSize),i.listenTo(t,"destroy remove",i.remove),i.updatePos(),i.setupDragger(),i}return yg(s,h),s.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},s.prototype.setupDragger=function(){var t,n,i,u=this,y=this.module,I=this.model,W=function(ce){y.toggleFramesEvents(ce)};this.dragger=new Tf.A({onStart:function(){var ce=I.attributes,ie=ce.x,Re=ce.y;i=u.em.getZoomMultiplier(),t=ie,n=Re,W(!1)},onEnd:function(){return W(!0)},setPosition:function(ce){I.set({x:t+ce.x*i,y:n+ce.y*i})}})},s.prototype.startDrag=function(t){var n;t&&(null===(n=this.dragger)||void 0===n||n.start(t))},s.prototype.__clear=function(t){var n=this.frame;n&&n.remove(t),(0,jt.YZ)(this.elTools)},s.prototype.remove=function(t){var n,i=this;return null===(n=this.sizeObserver)||void 0===n||n.disconnect(),this.__clear(t),Nt.prototype.remove.apply(this,t),["frame","dragger","cv","elTools"].forEach(function(u){return i[u]=0}),this},s.prototype.updateOffset=function(){var t,n=this,i=n.em,u=n.$el,y=n.frame;i&&!i.destroyed&&(i.runDefault({preserveSelected:1}),u.removeClass(this.classAnim),null===(t=y?.model)||void 0===t||t._emitUpdated())},s.prototype.updatePos=function(t){var u=this.model.attributes,y=u.x,I=u.y,W=this.el.style;this.frame.rect=void 0,W.left=isNaN(y)?y:"".concat(y,"px"),W.top=isNaN(I)?I:"".concat(I,"px"),t&&this.updateOffset()},s.prototype.updateSize=function(){this.updateDim()},s.prototype.updateDim=function(){var t=this,n=t.em,i=t.el,u=t.$el,y=t.model,I=t.classAnim,W=t.frame;if(W){W.rect=void 0,u.addClass(I);var ce=this.__handleSize(),ie=ce.noChanges,Re=ce.width,qe=ce.height;((0,m.isNull)(Re)||(0,m.isNull)(qe))&&y.set(Ul(Ul({},Re?{}:{width:i.offsetWidth}),qe?{}:{height:i.offsetHeight}),{silent:1}),n.stopDefault({preserveSelected:1}),ie?this.updateOffset():setTimeout(this.updateOffset,350)}},s.prototype.onScroll=function(){var t=this.frame;this.em.trigger("frame:scroll",{frame:t,body:t.getBody(),target:t.getWindow()})},s.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},s.prototype.__handleSize=function(){var t,i=this.model,u=this.el.style,y=i.attributes,I=y.width,W=y.height,Re=I||"",qe=W||"",ct=(u.width||"")==Re&&(u.height||"")==qe,qt=(0,m.isNumber)(Re)?"".concat(Re).concat("px"):Re,_r=(0,m.isNumber)(qe)?"".concat(qe).concat("px"):qe;if(u.width=qt,null===(t=this.sizeObserver)||void 0===t||t.disconnect(),i.hasAutoHeight()){var zr=this.frame.el.contentDocument;if(zr){var br=new ResizeObserver(function(){var co=parseFloat(i.get("minHeight"))||0,Bo=Math.max(zr.body.scrollHeight,co);u.height="".concat(Bo,"px")});br.observe(zr.body),this.sizeObserver=br}}else u.height=_r,delete this.sizeObserver;return{noChanges:ct,width:I,height:W,newW:Re,newH:qe}},s.prototype.render=function(){var t=this,n=t.frame,i=t.$el,u=t.ppfx,y=t.cv,I=t.model,W=t.el,ce=I.attributes.onRender;this.__clear(),this.__handleSize(),n.render(),i.empty().attr({class:"".concat(u,"frame-wrapper")}).append('\n      <div class="'.concat(u,'frame-wrapper__top gjs-two-color" data-frame-top>\n        <div class="').concat(u,'frame-wrapper__name" data-action-move>\n          ').concat(I.get("name")||"",'\n        </div>\n        <div class="').concat(u,'frame-wrapper__top-r">\n          <div class="').concat(u,'frame-wrapper__icon" data-action-remove style="display: none">\n            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(u,'frame-wrapper__right" data-frame-right></div>\n      <div class="').concat(u,'frame-wrapper__left" data-frame-left></div>\n      <div class="').concat(u,'frame-wrapper__bottom" data-frame-bottom></div>\n      ')).append(n.el);var ie=(0,jt.a_)("div",{class:"".concat(u,"tools"),style:"pointer-events:none; display: none"},'\n      <div class="'.concat(u,'highlighter" data-hl></div>\n      <div class="').concat(u,'badge" data-badge></div>\n      <div class="').concat(u,'placeholder">\n        <div class="').concat(u,'placeholder-int"></div>\n      </div>\n      <div class="').concat(u,'ghost"></div>\n      <div class="').concat(u,'toolbar" style="pointer-events:all"></div>\n      <div class="').concat(u,'resizer"></div>\n      <div class="').concat(u,'offset-v" data-offset>\n        <div class="gjs-marginName" data-offset-m>\n          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>\n          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>\n          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>\n          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>\n        </div>\n        <div class="gjs-paddingName" data-offset-m>\n          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>\n          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>\n          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>\n          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class="').concat(u,'offset-fixed-v"></div>\n    '));this.elTools=ie;var Re=y?.toolsWrapper;return Re&&Re.appendChild(ie),ce&&ce({el:W,elTop:W.querySelector("[data-frame-top]"),elRight:W.querySelector("[data-frame-right]"),elBottom:W.querySelector("[data-frame-bottom]"),elLeft:W.querySelector("[data-frame-left]"),frame:I,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},s}(Nt);const Qf=Hd;var Cu=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tm=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,!0)||this;return i.listenTo(i.collection,"reset",i.render),i.canvasView=n.canvasView,i._module=n.module,i}return Cu(s,h),s.prototype.onRemoveBefore=function(t,n){void 0===n&&(n={}),t.forEach(function(i){return i.remove(n)})},s.prototype.onRender=function(){this.$el.attr({class:"".concat(this.ppfx,"frames")})},s.prototype.clearItems=function(){(this.viewCollection||[]).forEach(function(t){return t.remove()}),this.viewCollection=[]},s.prototype.renderView=function(t,n){return new Qf(t,this.canvasView)},s}(Fr);const Gd=Tm;var Qp=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qd=function(){return qd=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},qd.apply(this,arguments)},zg=function(h){function s(t){var n=h.call(this,{model:t})||this;n.ready=!1,(0,m.bindAll)(n,"clearOff","onKeyPress","onWheel","onPointer");var u=n.em,y=n.pfx,I=n.ppfx,W=n.module.events;return n.className="".concat(y,"canvas ").concat(I,"no-touch-actions").concat(u.config.customUI?"":" ".concat(y,"canvas-bg")),n.clsUnscale="".concat(y,"unscale"),n._initFrames(),n.listenTo(u,W.refresh,n.clearOff),n.listenTo(u,"component:selected",n.checkSelected),n.listenTo(u,"".concat(W.coords," ").concat(W.zoom),n.updateFrames),n.listenTo(t,"change:frames",n._onFramesUpdate),n.toggleListeners(!0),n}return Qp(s,h),s.prototype.template=function(){var t=this.pfx;return'\n      <div class="'.concat(t,'canvas__frames" data-frames>\n        <div class="').concat(t,'canvas__spots" data-spots></div>\n      </div>\n      <div id="').concat(t,'tools" class="').concat(t,'canvas__tools" data-tools></div>\n      <style data-canvas-style></style>\n    ')},s.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},s.prototype._initFrames=function(){var t=this,n=t.frames,u=t.config,y=t.em,I=t.model.frames;y.set("readyCanvas",0),I.once("loaded:all",function(){return y.set("readyCanvas",1)}),n?.remove(),this.frames=new Gd({collection:I},qd(qd({},u),{canvasView:this}))},s.prototype.checkSelected=function(t,n){var i;void 0===n&&(n={});var u=n.scroll,y=this.em.getCurrentFrame();u&&(null===(i=t.views)||void 0===i||i.forEach(function(I){I.frameView===y&&I.scrollIntoView(u)}))},s.prototype.remove=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return clearTimeout(this.timerZoom),null===(t=this.frames)||void 0===t||t.remove(),this.frames=void 0,Nt.prototype.remove.apply(this,n),this.toggleListeners(!1),this},s.prototype.preventDefault=function(t){var n;t&&(t.preventDefault(),null===(n=t._parentEvent)||void 0===n||n.preventDefault())},s.prototype.toggleListeners=function(t){var n=this.el,i=this.config,u=t?jt.on:jt.AU;u(document,"keypress",this.onKeyPress),u(window,"scroll resize",this.clearOff),u(n,"wheel",this.onWheel,{passive:!i.infiniteCanvas}),u(n,"pointermove",this.onPointer)},s.prototype.screenToWorld=function(t,n){var i=this.module,u=i.getCoords(),y=i.getZoomMultiplier(),I=this.getViewportDelta();return{x:(t-u.x-I.x)*y,y:(n-u.y-I.y)*y}},s.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var n=this.getCanvasOffset(),i=(0,jt.Xy)(),u={x:t.clientX-n.left+i.x,y:t.clientY-n.top+i.y};if(t._parentEvent){var y=t.target.getBoundingClientRect(),I=this.module.getZoomDecimal();u.x=y.left-n.left+i.x+t.clientX*I,u.y=y.top-n.top+i.y+t.clientY*I}this.model.set({pointerScreen:u,pointer:this.screenToWorld(u.x,u.y)})}},s.prototype.onKeyPress=function(t){var n=this.em;" "!==(0,jt.Ch)(t)||1===n.getZoomDecimal()||n.Canvas.isInputFocused()||(this.preventDefault(t),n.Editor.runCommand("core:canvas-move"))},s.prototype.onWheel=function(t){var n=this.module;if(this.config.infiniteCanvas){this.preventDefault(t);var i=t.deltaX,u=t.deltaY,y=n.getZoomDecimal(),I=(0,jt.rp)(t),W=n.getCoords();if(I){var ce=y-u*y*.01;n.setZoom(100*ce);var ie=this.model.getPointerCoords(R.x2.Screen),Re=this.getCanvasOffset(),qe=ie.x-Re.width/2,ct=ie.y-Re.height/2,qt=ce/y;n.setCoords(qe-(qe-W.x)*qt,ct-(ct-W.y)*qt)}else this.onPointer(t),n.setCoords(W.x-i,W.y-u)}},s.prototype.updateFrames=function(t){var n=this.em,i=this.toolsWrapper,u={preserveSelected:1};this.updateFramesArea(),this.clearOff(),i.style.display="none",n.trigger("canvas:update",t),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){n.stopDefault(u),n.runDefault(u),i.style.display=""},300)},s.prototype.updateFramesArea=function(){var t=this,n=t.framesArea,i=t.model,u=t.module,y=t.cvStyle,I=t.clsUnscale,W=u.getZoomMultiplier();if(n){var ce=i.attributes,ie=ce.x,Re=ce.y,qe=u.getZoomDecimal();n.style.transform="scale(".concat(qe,") translate(").concat(ie*W,"px, ").concat(Re*W,"px)")}y&&(y.innerHTML="\n        .".concat(I," { scale: ").concat(W," }\n      "))},s.prototype.fitViewport=function(t){var n,i,u;void 0===t&&(t={});var y=this,I=y.em,W=y.module,ce=y.model;this.clearOff();var ie=this.getCanvasOffset(),Re=t.el,qe=Re&&(null===(n=(0,X.getComponentView)(Re))||void 0===n?void 0:n.frameView),ct=qe?qe.model:t.frame||I.getCurrentFrameModel()||ce.frames.at(0),qt=ct.attributes,br={x:qt.x??0,y:qt.y??0,width:ct.width,height:ct.height};if(Re){var co=this.getElBoxRect(Re);br.x=br.x+co.x,br.y=br.y+co.y,br.width=co.width,br.height=co.height}var Bo=t.ignoreHeight,Oi=null!==(i=t.gap)&&void 0!==i?i:0,Qi=(0,m.isNumber)(Oi),Ca=Qi?Oi:Oi.x,ys=Qi?Oi:Oi.y,ss=br.width+2*Ca,il=br.height+2*ys,_l=ie.width,wu=ie.height,Nc=_l/ss,Fd=100*(Bo?Nc:Math.min(Nc,wu/il)),vf=null!==(u=(0,m.isFunction)(t.zoom)?t.zoom(Fd):t.zoom)&&void 0!==u?u:Fd;W.setZoom(vf,{from:"fitViewport"});var vh=(ct.width>=_l?_l/2-ss/2:-Ca)-br.x,hm=wu/2-br.y-il/2,mm=W.getZoomDecimal(),_h={x:(vh+Ca)*mm,y:(hm+ys)*mm};if(Bo){var Zf=W.getZoomMultiplier();_h.y=(-br.y+ys)*mm-(wu*Zf-wu)/2/Zf}W.setCoords(_h.x,_h.y)},s.prototype.isElInViewport=function(t){var n=(0,X.getElement)(t),i=(0,jt.C8)(n),u=this.getFrameOffset(n),y=i.top,I=i.left;return y>=0&&I>=0&&y<=u.height&&I<=u.width},s.prototype.offset=function(t,n){void 0===n&&(n={});var i=n.noScroll,u=(0,jt.C8)(t),y=i?{x:0,y:0}:(0,jt.Xy)(t);return{top:u.top+y.y,left:u.left+y.x,width:u.width,height:u.height}},s.prototype.getRectToScreen=function(t){var n,i,u,y,I=this.getCanvasScroll(),W=this.module.getZoomDecimal(),ce=this.module.getCoords(),ie=this.getViewportDelta();return{x:(null!==(n=t.x)&&void 0!==n?n:0)*W-I.scrollLeft+ce.x+ie.x||0,y:(null!==(i=t.y)&&void 0!==i?i:0)*W-I.scrollTop+ce.y+ie.y||0,width:(null!==(u=t.width)&&void 0!==u?u:0)*W,height:(null!==(y=t.height)&&void 0!==y?y:0)*W}},s.prototype.getElBoxRect=function(t,n){var i,u,y;void 0===n&&(n={});var I=this.module,W=(0,jt.C8)(t),ce=W.width,ie=W.height,Re=W.left,qe=W.top,ct=null===(i=(0,X.getComponentView)(t))||void 0===i?void 0:i.frameView,qt=ct?.getBoxRect(),_r=I.getZoomMultiplier(),zr=null!==(u=qt?.x)&&void 0!==u?u:0,br=null!==(y=qt?.y)&&void 0!==y?y:0,co=this.el,Bo=(0,jt.Xy)(),Oi={x:Re+zr+(co.scrollLeft+Bo.x)*_r,y:qe+br+(co.scrollTop+Bo.y)*_r,width:ce,height:ie};return n.local&&(Oi.x=Re,Oi.y=qe),n.toScreen?this.getRectToScreen(Oi):Oi},s.prototype.getViewportRect=function(t){void 0===t&&(t={});var n=this.getCanvasOffset(),i=n.top,u=n.left,y=n.width,I=n.height,W=this.module;if(t.toWorld){var ce=W.getZoomMultiplier(),ie=W.getCoords(),Re=this.getViewportDelta();return{x:(-ie.x-Re.x||0)*ce,y:(-ie.y-Re.y||0)*ce,width:y*ce,height:I*ce}}return{x:u,y:i,width:y,height:I}},s.prototype.getViewportDelta=function(t){void 0===t&&(t={});var n=this.module.getZoomMultiplier(),i=this.getCanvasOffset(),u=i.width,y=i.height;return{x:(u*n-u)/2/n,y:(y*n-y)/2/n}},s.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},s.prototype.getFrameOffset=function(t){var n;if(!this.frmOff||t){var i=null===(n=this.frame)||void 0===n?void 0:n.el,u=t?.ownerDocument.defaultView;this.frmOff=this.offset((u?u.frameElement:i)||i)}return this.frmOff},s.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},s.prototype.getElementPos=function(t,n){void 0===n&&(n={});var i=this.module.getZoomDecimal(),u=this.getFrameOffset(t),y=this.el,I=this.getCanvasOffset(),W=this.offset(t,n),Re=n.avoidFrameZoom?W.top:W.top*i,qe=n.avoidFrameZoom?W.left:W.left*i;return{top:n.avoidFrameOffset?Re:Re+(n.avoidFrameOffset?0:u.top)-I.top+y.scrollTop,left:n.avoidFrameOffset?qe:qe+(n.avoidFrameOffset?0:u.left)-I.left+y.scrollLeft,height:n.avoidFrameZoom?W.height:W.height*i,width:n.avoidFrameZoom?W.width:W.width*i,zoom:i,rect:W}},s.prototype.getElementOffsets=function(t){if(!t||(0,jt.ir)(t))return{};var n={},i=window.getComputedStyle(t),u=this.module.getZoomDecimal();return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(y){n[y]=parseFloat(i[y])*u}),n},s.prototype.getPosition=function(t){var n;void 0===t&&(t={});var i=null===(n=this.frame)||void 0===n?void 0:n.el.contentDocument;if(!i)return{top:0,left:0,width:0,height:0};var u=i.body,y=this.module.getZoomDecimal(),I=this.getFrameOffset(),W=this.getCanvasOffset(),ce=t.noScroll;return{top:I.top+(ce?0:u.scrollTop)*y-W.top,left:I.left+(ce?0:u.scrollLeft)*y-W.left,width:W.width,height:W.height}},s.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},s.prototype.updateScript=function(t){var n=t.model,i=n.getId(),u={component:n,view:t,el:t.el};if(!t.scriptContainer){t.scriptContainer=(0,jt.a_)("div",{"data-id":i});var y=this.getJsContainer();y?.appendChild(t.scriptContainer)}t.el.id=i,t.scriptContainer.innerHTML="";var I=document.createElement("script"),W=n.getScriptString(),ce=n.get("script-props")?W:"function(){\n".concat(W,"\n;}"),ie=JSON.stringify(n.__getScriptProps());I.innerHTML="\n      setTimeout(function() {\n        var item = document.getElementById('".concat(i,"');\n        if (!item) return;\n        var script = (").concat(ce,").bind(item);\n        script(").concat(ie,", { el: item });\n      }, 1);"),setTimeout(function(){n.emitWithEditor(mt.I.scriptMountBefore,u);var Re=t.scriptContainer;Re?.appendChild(I),n.emitWithEditor(mt.I.scriptMount,u)},0)},s.prototype.getJsContainer=function(t){var n=this.getFrameView(t);return n?.getJsContainer()},s.prototype.getFrameView=function(t){return t?.frameView||this.em.getCurrentFrame()},s.prototype._renderFrames=function(){if(this.ready){var t=this,i=t.frames,u=t.em,y=t.framesArea,I=t.model.frames;I.listenToLoad(),i.render();var W=I.at(0),ce=W?.view;u.setCurrentFrame(ce),y?.appendChild(i.el),this.frame=ce,this.updateFramesArea()}},s.prototype.renderFrames=function(){this._renderFrames()},s.prototype.render=function(){var t=this,n=t.el,i=t.$el,u=t.ppfx,y=t.config,I=t.em;i.html(this.template());var W=i.find("[data-frames]");this.framesArea=W.get(0);var ce=i.find("[data-tools]");return this.toolsWrapper=ce.get(0),ce.append('\n      <div class="'.concat(u,"tools ").concat(u,'tools-gl" style="pointer-events:none">\n        <div class="').concat(u,'placeholder">\n          <div class="').concat(u,'placeholder-int"></div>\n        </div>\n      </div>\n      <div id="').concat(u,'tools" style="pointer-events:none">\n        ').concat(y.extHl?'<div class="'.concat(u,'highlighter-sel"></div>'):"",'\n        <div class="').concat(u,'badge"></div>\n        <div class="').concat(u,'ghost"></div>\n        <div class="').concat(u,'toolbar" style="pointer-events:all"></div>\n        <div class="').concat(u,'resizer"></div>\n        <div class="').concat(u,'offset-v"></div>\n        <div class="').concat(u,'offset-fixed-v"></div>\n      </div>\n    ')),this.toolsEl=n.querySelector("#".concat(u,"tools")),this.hlEl=n.querySelector(".".concat(u,"highlighter")),this.badgeEl=n.querySelector(".".concat(u,"badge")),this.placerEl=n.querySelector(".".concat(u,"placeholder")),this.ghostEl=n.querySelector(".".concat(u,"ghost")),this.toolbarEl=n.querySelector(".".concat(u,"toolbar")),this.resizerEl=n.querySelector(".".concat(u,"resizer")),this.offsetEl=n.querySelector(".".concat(u,"offset-v")),this.fixedOffsetEl=n.querySelector(".".concat(u,"offset-fixed-v")),this.toolsGlobEl=n.querySelector(".".concat(u,"tools-gl")),this.spotsEl=n.querySelector("[data-spots]"),this.cvStyle=n.querySelector("[data-canvas-style]"),n.className=(0,X.getUiClass)(I,this.className),!0===y.scrollableCanvas&&(n.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},s}(Nt);const Sp=zg;var Hg=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),hd=function(){return hd=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},hd.apply(this,arguments)},$m=function(h){function s(t){var n=h.call(this,t,"Canvas",{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:"\n    body { background-color: #fff }\n    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }\n    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }\n    * ::-webkit-scrollbar { width: 10px }\n  ",notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0})||this;return n.events=oo,n.framesById={},n.canvas=new gr(n),n.spots=new no(n),n.model=n.canvas,n.startAutoscroll=n.startAutoscroll.bind(n),n.stopAutoscroll=n.stopAutoscroll.bind(n),n.autoScroller=new Of,n}return Hg(s,h),s.prototype.getCanvasView=function(){return this.canvasView},s.prototype.postLoad=function(){this.model.init()},s.prototype.getModel=function(){return this.canvas},s.prototype.getElement=function(){return this.getCanvasView().el},s.prototype.getFrame=function(t){return this.getFrames()[t||0]},s.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return t?.el},s.prototype.getFramesEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.framesArea},s.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return t?.getWindow()},s.prototype.getDocument=function(){var t=this.getFrameEl();return t?.contentDocument},s.prototype.getBody=function(){var t=this.getDocument();return t?.body},s.prototype._getLocalEl=function(t,n,i){var u=t,y=n?.frameView;return y?y[i]():u},s.prototype.getGlobalToolsEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.toolsGlobEl},s.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,"getToolsEl")},s.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,"getHighlighter")},s.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,"getBadgeEl")},s.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},s.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},s.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},s.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},s.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,"getOffsetViewerEl")},s.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},s.prototype.getSpotsEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.spotsEl},s.prototype.render=function(){var t;return null===(t=this.canvasView)||void 0===t||t.remove(),this.canvasView=new Sp(this.canvas),this.canvasView.render().el},s.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),n=this.offset(this.getElement());return{top:t.top-n.top,left:t.left-n.left}},s.prototype.offset=function(t){return this.getCanvasView().offset(t)},s.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},s.prototype.getElementPos=function(t,n){return this.getCanvasView().getElementPos(t,n)},s.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},s.prototype.getRect=function(){var t,n=null!==(t=this.getCanvasView().getPosition())&&void 0!==t?t:{},i=n.top,u=void 0===i?0:i,y=n.left,I=void 0===y?0:y;return hd(hd({},this.getCanvasView().getCanvasOffset()),{topScroll:u,leftScroll:I})},s.prototype.getTargetToElementDim=function(t,n,i){void 0===i&&(i={});var u=i||{},y=this.getCanvasView().getPosition();if(y){var I=u.elPos||this.getCanvasView().getElementPos(n),W=i.toRight||0,Re=u.event||null,qe=I.top-(u.targetHeight||t.offsetHeight),ct=I.left;ct+=W?I.width:0;var qt=(ct=W?ct-(u.targetWidth||t.offsetWidth):ct)<y.left?y.left:ct,_r=qe<y.top?y.top:qe,zr={top:_r=_r>I.top+I.height?I.top+I.height:_r,left:qt,elementTop:I.top,elementLeft:I.left,elementWidth:I.width,elementHeight:I.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:y.top,canvasLeft:y.left,canvasWidth:y.width,canvasHeight:y.height};return Re&&this.em&&this.em.trigger(Re,zr),zr}},s.prototype.canvasRectOffset=function(t,n,i){var u=this;void 0===i&&(i={});var y=function(I,W,ce){void 0===W&&(W=1);var il,ie=u.em.getZoomDecimal(),Re=W?"top":"left",qe=I.ownerDocument,ct=i.offset?(il=qe.defaultView,il?.frameElement):{},qt=ct.offsetTop,zr=ct.offsetLeft,co=qe.body||{},Bo=co.scrollTop,Qi=co.scrollLeft;return ce[Re]-((W?void 0===Bo?0:Bo:void 0===Qi?0:Qi)-(W?void 0===qt?0:qt:void 0===zr?0:zr))*ie};return{top:y(t,1,n),left:y(t,0,n)}},s.prototype.getTargetToElementFixed=function(t,n,i){void 0===i&&(i={});var u=i.pos||this.getElementPos(t,{noScroll:!0}),y=i.canvasOff||this.canvasRectOffset(t,u),I=n.offsetHeight||0,W=n.offsetWidth||0,ce=this.getCanvasView(),ie=ce.getCanvasScroll(),Re=ie.scrollTop,qe=ie.scrollLeft,ct=ce.getPosition(),qt=i.event,_r=u.width-W,zr=-I,br=(0,m.isUndefined)(i.left)?_r:i.left,co=Math.max(-u.left+qe,0);br=Math.max(br,co),br=Math.min(br,u.width-W),br=Math.min(br,ct.width+qe-W-u.left);var Qi=zr;if(y.top<I+Re){var Ca=u.height+I;if(Ca<ct.height)Qi+=Ca;else{var ys=-y.top+Re;Qi=ys<u.height?ys:u.height}}var ss={top:Qi,left:br,canvasOffsetTop:y.top,canvasOffsetLeft:y.left,elRect:u,canvasOffset:y,canvasRect:ct,targetWidth:W,targetHeight:I};return qt&&this.em.trigger(qt,ss),ss},s.prototype.getMouseRelativePos=function(t,n){void 0===n&&(n={});var i=n.subWinOffset,u=t.target,y=u.nodeType===Node.DOCUMENT_NODE?u:u.ownerDocument,I=y.defaultView||y.parentWindow,W=I.frameElement,ce=i?I.pageYOffset:0,ie=i?I.pageXOffset:0,Re=this.getZoomMultiplier(),qe=0,ct=0;if(W){var qt=W.getBoundingClientRect();qe=qt.top||0,ct=qt.left||0}return{y:(t.clientY+qe-ce)*Re,x:(t.clientX+ct-ie)*Re}},s.prototype.getMouseRelativeCanvas=function(t,n){var i,u=this.getZoomDecimal(),y=this.getCanvasView(),I=null!==(i=y.getPosition(n))&&void 0!==i?i:{top:0,left:0},W=y.getCanvasScroll();return{y:t.clientY*u+(I.top+W.scrollTop),x:t.clientX*u+(I.left+W.scrollLeft)}},s.prototype.startDrag=function(t){this.em.set("dragSource",t)},s.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},s.prototype.hasFocus=function(){return this.getDocument().hasFocus()},s.prototype.isInputFocused=function(){var t=this.getDocument(),n=this.getFrameEl(),i=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}(["body"],this.config.notTextable,!0),u=n&&document.activeElement===n?t&&t.activeElement:document.activeElement;return u&&!i.some(function(y){return u.matches(y)})},s.prototype.scrollTo=function(t,n){void 0===n&&(n={});var i=(0,X.getElement)(t),u=i&&(0,X.getViewEl)(i);u&&u.scrollIntoView(n)},s.prototype.startAutoscroll=function(t){var n=t&&t.view||this.em.getCurrentFrame();if(n&&n.startAutoscroll(),this.config.scrollableCanvas){var i=this.getCanvasView().el;this.autoScroller.start(i,i,{zoom:this.em.getZoomDecimal()})}},s.prototype.stopAutoscroll=function(t){var n=t&&t.view||this.em.getCurrentFrame();n&&n.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},s.prototype.setZoom=function(t,n){return void 0===n&&(n={}),this.canvas.set("zoom","string"==typeof t?parseFloat(t):t,n),this},s.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},s.prototype.setCoords=function(t,n,i){var u;void 0===i&&(i={});var y=t||0===t,I=n||0===n,W={x:this.canvas.get("x"),y:this.canvas.get("y")};if(y&&(W.x=parseFloat("".concat(t))),I&&(W.y=parseFloat("".concat(n))),i.toWorld){var ce=null===(u=this.canvasView)||void 0===u?void 0:u.getViewportDelta();ce&&(y&&(W.x=W.x-ce.x),I&&(W.y=W.y-ce.y))}return this.canvas.set(W),this},s.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},s.prototype.getPointer=function(t){var n=this.canvas.attributes;return t?n.pointerScreen:n.pointer},s.prototype.getZoomDecimal=function(){return this.getZoom()/100},s.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},s.prototype.fitViewport=function(t){var n;null===(n=this.canvasView)||void 0===n||n.fitViewport(t)},s.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?"":"none"},s.prototype.getFrames=function(){return this.canvas.frames.map(function(t){return t})},s.prototype.addFrame=function(t,n){return void 0===t&&(t={}),void 0===n&&(n={}),this.canvas.frames.add(new Fa(this,hd({},t)),n)},s.prototype.getLastDragResult=function(){return this.em.get("dragResult")},s.prototype.addSpot=function(t,n){var i;void 0===n&&(n={});var u=t,y=this.getSpots(u);if(y.length){var I=y[0];return I.set(u),I}var W=u.componentView||(null===(i=u.component)||void 0===i?void 0:i.view),ce=new Pt.A(this,hd(hd({},u),{id:u.id||"cs_".concat(u.type,"_").concat(W?.cid),type:u.type||""}));return this.spots.add(ce,n),ce},s.prototype.getSpots=function(t){return void 0===t&&(t={}),this.spots.where(t.id?{id:t.id}:t)},s.prototype.removeSpots=function(t){void 0===t&&(t={});var n=(0,m.isArray)(t)?t:this.getSpots(t);return this.spots.remove(n)},s.prototype.hasCustomSpot=function(t){var n=this.config.customSpots;return!!(!0===n||n&&t&&n[t])},s.prototype.getWorldRectToScreen=function(t){var n;return null===(n=this.canvasView)||void 0===n?void 0:n.getRectToScreen(t)},s.prototype.refresh=function(t){void 0===t&&(t={});var n=this,i=n.em,u=n.events,y=n.canvasView;y?.clearOff(),(t.spots||t.all)&&(this.refreshSpots(),i.trigger("canvas:updateTools")),i.set("canvasOffset",this.getOffset()),i.trigger(u.refresh,t)},s.prototype.refreshSpots=function(){this.spots.refresh()},s.prototype.destroy=function(){var t,n=this;this.canvas.stopListening(),null===(t=this.canvasView)||void 0===t||t.remove(),["model","droppable"].forEach(function(i){return n[i]={}})},s}(we);const Jm=$m;var Sm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pp=function(){return Pp=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Pp.apply(this,arguments)},Eu=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Sm(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Pp(Pp({},h.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),s.prototype.toHTML=function(){var t=this.content,n=this.parent();return n?.is("script")?t:this.__escapeContent(t)},s.prototype.__escapeContent=function(t){return(0,X.escapeNodeContent)(t)},s.isComponent=function(t){var n;if(3===t.nodeType)return{type:"textnode",content:null!==(n=t.textContent)&&void 0!==n?n:""}},s}(vn);const Uu=Eu;var Xp=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mp=function(){return Mp=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Mp.apply(this,arguments)},em=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Xp(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Mp({},h.prototype.defaults)},enumerable:!1,configurable:!0}),s.prototype.toHTML=function(){return"\x3c!--".concat(this.content,"--\x3e")},s.isComponent=function(t){var n;if(8==t.nodeType)return{type:"comment",content:null!==(n=t.textContent)&&void 0!==n?n:""}},s}(Uu);const Gg=em;var Xf=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sf=function(){return Sf=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Sf.apply(this,arguments)},Q="iframe";const j=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Xf(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Sf(Sf({},h.prototype.defaults),{type:Q,tagName:Q,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Q},s}(vn);var J=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),se=function(){return se=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},se.apply(this,arguments)},xe='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',fe=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,n)||this,u=i.get("attributes").src;return u&&(0,X.buildBase64UrlFromSvg)((0,m.result)(i,"defaults").src)!==u&&i.set("src",u,{silent:!0}),i}return J(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return se(se({},h.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(xe,'>\n        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>\n      </svg>'),fallback:"<svg ".concat(xe,'>\n        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>\n      </svg>'),file:""})},enumerable:!1,configurable:!0}),s.prototype.initToolbar=function(){h.prototype.initToolbar.call(this);var t=this.em;if(t){var n="image-editor";if(t.Commands.has(n)){for(var i=!1,u=this.get("toolbar"),y=0;y<u.length;y++)if("image-editor"===u[y].command){i=!0;break}i||(u.push({attributes:{class:"fa fa-pencil"},command:n}),this.set("toolbar",u))}}},s.prototype.getAttrToHTML=function(){var t=h.prototype.getAttrToHTML.call(this),n=this.getSrcResult();return n&&(t.src=n),t},s.prototype.getSrcResult=function(t){void 0===t&&(t={});var n=this.get(t.fallback?"fallback":"src")||"",i=n;return n&&"<svg"===n.substr(0,4)&&(i=(0,X.buildBase64UrlFromSvg)(n)),i},s.prototype.isDefaultSrc=function(){var t=this.get("src"),n=(0,m.result)(this,"defaults").src;return t===n||t===(0,X.buildBase64UrlFromSvg)(n)},s.prototype.toJSON=function(t){var n=h.prototype.toJSON.call(this,t),i=n.attributes;return i&&n.src===i.src&&delete n.src,n},s.prototype.parseUri=function(t){var n={};if((0,X.hasWin)())(n=document.createElement("a")).href=t;else if(typeof URL<"u")try{n=new URL(t)}catch{}return{hostname:n.hostname||"",pathname:n.pathname||"",protocol:n.protocol||"",search:n.search||"",hash:n.hash||"",port:n.port||"",query:function(i){void 0===i&&(i="");for(var u={},y=i.substring(1).split("&"),I=0;I<y.length;I++){var W=y[I].split("="),ce=decodeURIComponent(W[0]);ce&&(u[ce]=decodeURIComponent(W[1]||""))}return u}(n.search)}},s.isComponent=function(t){return"img"===(0,X.toLowerCase)(t.tagName)},s}(vn);const De=fe;var Ae=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ne=function(){return Ne=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ne.apply(this,arguments)};const tt=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,n)||this;return i.__checkInnerChilds(),i}return Ae(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Ne(Ne({},h.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),s.prototype.__checkInnerChilds=function(){var t=this.em.Components.config.disableTextInnerChilds;if(t){var n=function(i){i.isInstanceOf("textnode")||i.set({locked:!0,layerable:!1})};(0,m.isFunction)(t)?this.forEachChild(function(i){t(i)&&n(i)}):this.forEachChild(n)}},s}(vn);var _t=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vt=function(){return vt=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},vt.apply(this,arguments)},Ht="label";const Qe=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return _t(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return vt(vt({},h.prototype.defaults),{type:Ht,tagName:Ht,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Ht},s}(tt);var Ar=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pr=function(){return pr=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},pr.apply(this,arguments)},Qt=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Ar(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return pr(pr({},h.prototype.defaults),{type:"link",tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),s.isComponent=function(t,n){var i;if(void 0===n&&(n={}),"a"===(0,X.toLowerCase)(t.tagName)){var u=n.textTags||[];i={type:"link",editable:!1};var y=t.childNodes;y.length||delete i.editable,(0,m.forEach)(y,function(I){var W=I.tagName;(3==I.nodeType&&""!==I.textContent.trim()||W&&u.indexOf((0,X.toLowerCase)(W))>=0)&&delete i.editable})}return i},s}(tt);const Lr=Qt;var En=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qn=function(){return qn=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},qn.apply(this,arguments)},Fo=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,n)||this;return i.get("src")?i.parseFromSrc():i.updateSrc(),i.listenTo(i,"change:address change:zoom change:mapType",i.updateSrc),i}return En(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){var t=h.prototype.defaults;return qn(qn({},t),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:t.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),s.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},s.prototype.getMapUrl=function(){var t=this.get("address"),n=this.get("zoom"),i=this.get("mapType");return t=t?"&q="+t:"",n=n?"&z="+n:"",i=i?"&t="+i:"",this.get("mapUrl")+"?"+t+n+i+"&output=embed"},s.prototype.parseFromSrc=function(){var t=this.parseUri(this.get("src")).query;t.q&&this.set("address",t.q),t.z&&this.set("zoom",t.z),t.t&&this.set("mapType",t.t)},s.isComponent=function(t){if("iframe"==(0,X.toLowerCase)(t.tagName)&&/maps\.google\.com/.test(t.src))return{type:"map",src:t.src}},s}(De);const gi=Fo;var po=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jr=function(){return Jr=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Jr.apply(this,arguments)},lo="script";const zo=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return po(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Jr(Jr({},h.prototype.defaults),{type:lo,tagName:lo,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===lo},s}(vn);var cr=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),hr=function(){return hr=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},hr.apply(this,arguments)};const rn=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return cr(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return hr(hr({},h.prototype.defaults),{type:"svg",tagName:"svg",highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),s.prototype.getName=function(){var t=this.get("tagName"),n=this.get("custom-name");return t=t.charAt(0).toUpperCase()+t.slice(1),n||t},s.isComponent=function(t){return"svg"===(0,X.toLowerCase)(t.tagName)},s}(vn);var jo=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),So=function(){return So=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},So.apply(this,arguments)};const Zo=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return jo(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return So(So({},h.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),s.isComponent=function(t,n){return void 0===n&&(n={}),!!n.inSvg},s}(rn);var ro=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ho=function(){return Ho=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ho.apply(this,arguments)},Xo="table";const ka=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,n)||this,u=i.get("components");return!u.length&&u.add({type:"tbody"}),i}return ro(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Ho(Ho({},h.prototype.defaults),{type:Xo,tagName:Xo,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Xo},s}(vn);var zt=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ir=function(){return Ir=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ir.apply(this,arguments)},Gr="tbody";const on=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,n)||this,u=i.get("components"),y=i.get("columns"),I=i.get("rows");if(!u.length){for(var W=[];I--;){for(var ce=[],ie=y;ie--;)ce.push({type:"cell",classes:["cell"]});W.push({type:"row",classes:["row"],components:ce})}u.add(W)}return i}return zt(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Ir(Ir({},h.prototype.defaults),{type:Gr,tagName:Gr,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Gr},s}(vn);var bn=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xn=function(){return Xn=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Xn.apply(this,arguments)};const so=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return bn(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Xn(Xn({},h.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return["td","th"].indexOf((0,X.toLowerCase)(t.tagName))>=0},s}(vn);var Po=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$i=function(){return $i=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},$i.apply(this,arguments)},Ni="tfoot";const ga=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Po(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return $i($i({},h.prototype.defaults),{type:Ni,tagName:Ni})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Ni},s}(on);var _a=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vs=function(){return vs=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},vs.apply(this,arguments)},ei="thead";const Hr=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return _a(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return vs(vs({},h.prototype.defaults),{type:ei,tagName:ei})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===ei},s}(on);var Is=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qa=function(){return qa=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},qa.apply(this,arguments)};const ua=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Is(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return qa(qa({},h.prototype.defaults),{tagName:"tr",draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),s.isComponent=function(t){return"tr"===(0,X.toLowerCase)(t.tagName)},s}(vn);var va=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),da=function(){return da=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},da.apply(this,arguments)},os="video",Es="yt",Ts="vi",js="ytnc",zs=function(h){return h&&"0"!==h},As=function(h){function s(t,n){void 0===t&&(t={});var i=h.call(this,t,n)||this;return i.get("src")&&i.parseFromSrc(),i.updatePropsFromAttr(),i.updateTraits(),i.on("change:provider",i.updateTraits),i.on("change:videoId change:provider",i.updateSrc),i}return va(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return da(da({},h.prototype.defaults),{type:os,tagName:os,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),s.prototype.updatePropsFromAttr=function(){if("so"===this.get("provider")){var t=this.get("attributes"),n=t.controls,i=t.autoplay,u=t.loop,y={};(0,X.isDef)(n)&&(y.controls=!!n),(0,X.isDef)(i)&&(y.autoplay=!!i),(0,X.isDef)(u)&&(y.loop=!!u),(0,X.isEmptyObj)(y)||this.set(y)}},s.prototype.updateTraits=function(){var t,n=this.em,i="iframe";switch(this.get("provider")){case Es:case js:t=this.getYoutubeTraits();break;case Ts:t=this.getVimeoTraits();break;default:i="video",t=this.getSourceTraits()}this.set({tagName:i},{silent:!0}),this.set({traits:t}),n.get("ready")&&n.trigger("component:toggled")},s.prototype.parseFromSrc=function(){var t=this.get("provider"),n=this.parseUri(this.get("src")),i=n.query;switch(t){case Es:case js:case Ts:this.set("videoId",n.pathname.split("/").pop()),i.list&&this.set("list",i.list),zs(i.autoplay)&&this.set("autoplay",!0),zs(i.loop)&&this.set("loop",!0),0===parseInt(i.controls)&&this.set("controls",!1),zs(i.color)&&this.set("color",i.color),"0"===i.rel&&this.set("rel",0),"1"===i.modestbranding&&this.set("modestbranding",1)}},s.prototype.updateSrc=function(){var t="";switch(this.get("provider")){case Es:t=this.getYoutubeSrc();break;case js:t=this.getYoutubeNoCookieSrc();break;case Ts:t=this.getVimeoSrc()}this.set({src:t})},s.prototype.getAttrToHTML=function(){var t=h.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case Es:case js:case Ts:break;default:t.loop=!!this.get("loop"),t.autoplay=!!this.get("autoplay"),t.controls=!!this.get("controls")}return t},s.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:Es,name:"Youtube"},{value:js,name:"Youtube (no cookie)"},{value:Ts,name:"Vimeo"}]}},s.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},s.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},s.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},s.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},s.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},s.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},s.prototype.getYoutubeSrc=function(){var t=this.get("videoId"),n=this.get("ytUrl"),i=this.get("list");return n+=t+(t.indexOf("?")<0?"?":""),n+=i?"&list=".concat(i):"",n+=this.get("autoplay")?"&autoplay=1&mute=1":"",n+=this.get("controls")?"":"&controls=0&showinfo=0",n+=this.get("loop")?"&loop=1&playlist=".concat(t):"",(n+=this.get("rel")?"":"&rel=0")+(this.get("modestbranding")?"&modestbranding=1":"")},s.prototype.getYoutubeNoCookieSrc=function(){return this.getYoutubeSrc().replace(this.get("ytUrl"),this.get("ytncUrl"))},s.prototype.getVimeoSrc=function(){var t=this.get("viUrl");return t+=this.get("videoId")+"?",t+=this.get("autoplay")?"&autoplay=1&muted=1":"",t+=this.get("loop")?"&loop=1":"",(t+=this.get("controls")?"":"&title=0&portrait=0&badge=0")+(this.get("color")?"&color="+this.get("color"):"")},s.isComponent=function(t){var n=t.tagName,i=t.src,u=/youtube\.com\/embed/.test(i),y=/youtube-nocookie\.com\/embed/.test(i),I=/player\.vimeo\.com\/video/.test(i),W=u||y||I;if((0,X.toLowerCase)(n)==os||"iframe"==(0,X.toLowerCase)(n)&&W){var ce={type:"video"};return i&&(ce.src=i),W&&(u?ce.provider=Es:y?ce.provider=js:I&&(ce.provider=Ts)),ce}},s}(De);const tl=As;var wa=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Al=function(){return Al=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Al.apply(this,arguments)},$a=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return wa(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Al(Al({},h.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),s.prototype.preInit=function(){var t,n,i=this.opt,u=this.attributes,y=null===(t=this.em)||void 0===t?void 0:t.Components,I=null===(n=y?.getType(ji))||void 0===n?void 0:n.model,W=y?.getType("default").model;if(I){var ce=u.head,ie=u.docEl;this.set({head:ce&&ce instanceof vn?ce:new I(Al({},ce),i),docEl:ie&&ie instanceof vn?ie:new W(Al({tagName:"html"},ie),i)},{silent:!0})}},Object.defineProperty(s.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),s.prototype.clone=function(t){var n=h.prototype.clone.call(this,t);return n.set("head",this.get("head").clone(t)),n.set("docEl",this.get("docEl").clone(t)),n},s.prototype.toHTML=function(t){void 0===t&&(t={});var n=this.doctype,i=(0,m.isUndefined)(t.asDocument)?!!n:t.asDocument,u=this.head,y=this.docEl,I=h.prototype.toHTML.call(this,t),W=i&&u?.toHTML(t)||"",ce=i&&(0,jt.kk)(y?.getAttrToHTML())||"",ie=ce?" ".concat(ce):"";return i?"".concat(n,"<html").concat(ie,">").concat(W).concat(I,"</html>"):I},s.prototype.__postAdd=function(){var t,n=null===(t=this.em)||void 0===t?void 0:t.UndoManager;return!this.__hasUm&&n?.add(this),h.prototype.__postAdd.call(this)},s.prototype.__postRemove=function(){var t,n=null===(t=this.em)||void 0===t?void 0:t.UndoManager;return n?.remove(this),h.prototype.__postRemove.call(this)},s.isComponent=function(){return!1},s}(vn);const Kc=$a;var Ws=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),al=function(h){function s(){var t=null!==h&&h.apply(this,arguments)||this;return t.compView=vl,t}return Ws(s,h),s.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var n=this.collection;this.listenTo(n,"add",this.addTo),this.listenTo(n,"reset",this.resetChildren),this.listenTo(n,"remove",this.removeChildren)},s.prototype.removeChildren=function(t,n,i){var u=this;void 0===i&&(i={}),t.views.forEach(function(y){if(y){var I=y.childrenView,W=y.scriptContainer;I&&I.stopListening(),(0,jt.YZ)(W),y.remove.apply(y)}}),t.components().forEach(function(y){return u.removeChildren(y,n,i)})},s.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},s.prototype.addToCollection=function(t,n,i){for(var u=this,y=u.config,I=u.opts,W=u.em,ce=y.frameView,ie=ce?.model&&t.getView(ce.model),Re=I.componentTypes||W?.Components.getTypes(),qe=t.get("type")||"default",ct=this.compView,qt=0;qt<Re.length;qt++)if(Re[qt].id==qe){ct=Re[qt].view;break}var _r,zr=ie||new ct({model:t,config:y,componentTypes:Re});try{_r=zr.render().el}catch(Oi){_r=document.createTextNode(""),W.logError(Oi)}if(n)n.appendChild(_r);else{var br=this.parentEl,co=br.childNodes;if((0,m.isUndefined)(i))br.appendChild(_r);else{var Bo=co.length==i;Bo&&i--,Bo||!co.length?br.appendChild(_r):br.insertBefore(_r,co[i])}}return t.opt.temporary||null==W||W.trigger("component:mount",t),_r},s.prototype.resetChildren=function(t,n){var i=this;void 0===n&&(n={});var u=n.previousModels;n.skipDomReset||(this.parentEl.innerHTML=""),u?.forEach(function(y){return i.removeChildren(y,i.collection)}),t.each(function(y){return i.addToCollection(y)})},s.prototype.render=function(t){var n=this,i=this.el,u=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each(function(y){return n.addToCollection(y,u)}),i.innerHTML="",i.appendChild(u),this},s}(R.Ss);const Jd=al;var Ol=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ku=function(){return ku=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},ku.apply(this,arguments)},dc=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Ol(s,h),s.prototype.className=function(){return this.getClasses()},s.prototype.tagName=function(){return this.model.get("tagName")},s.prototype.preinitialize=function(t){void 0===t&&(t={}),this.opts=t},s.prototype.initialize=function(t){void 0===t&&(t={});var n=this.model,i=t.config||{},u=i.em,y=n.opt||{},I=this.$el,W=this.el;this.opts=t,this.modelOpt=y,this.config=i,this.em=u,this.pfx=i.stylePrefix||"",this.ppfx=i.pStylePrefix||"",this.attr=n.get("attributes"),this.classe=this.attr.class||[],this.listenTo(n,"change:style",this.updateStyle),this.listenTo(n,"change:attributes",this.renderAttributes),this.listenTo(n,"change:highlightable",this.updateHighlight),this.listenTo(n,"change:status change:locked",this.updateStatus),this.listenTo(n,"change:script rerender",this.reset),this.listenTo(n,"change:content",this.updateContent),this.listenTo(n,"change",this.handleChange),this.listenTo(n,"active",this.onActive),this.listenTo(n,"disable",this.onDisable),I.data("model",n),(0,X.setViewEl)(W,this),n.view=this,this.frameView&&n.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=ku(ku({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!y.temporary&&this.init(this._clbObj())},Object.defineProperty(s.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"createDoc",{get:function(){var t,n,i=(null===(t=this.frameView)||void 0===t?void 0:t.getDoc())||document;return null!==(n=this.opts.config)&&void 0!==n&&n.useFrameDoc?i:document},enumerable:!1,configurable:!0}),s.prototype.__isDraggable=function(){return this.config.draggableComponents&&this.model.attributes.draggable},s.prototype._clbObj=function(){var t=this,n=t.em,i=t.model,u=t.el;return{editor:n?.getEditor(),model:i,el:u}},s.prototype.init=function(t){},s.prototype.removed=function(t){},s.prototype.onRender=function(t){},s.prototype.onActive=function(t){},s.prototype.onDisable=function(t){},s.prototype.remove=function(){var t;h.prototype.remove.call(this);var n=this.model,i=this.$el,u=n.views,y=this.frameView||{};return n.components().forEach(function(I){var W=I.getView(y.model);W?.remove()}),null===(t=this.childrenView)||void 0===t||t.remove(),u.splice(u.indexOf(this),1),this.removed(this._clbObj()),i.data({model:"",collection:"",view:""}),this},s.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault();var n=this.em.getSelectedAll(),i=n.includes(this.model)?n:[this.model];this.em.Commands.run("tlb-move",{target:i,event:t})},s.prototype.initClasses=function(){var t=this.model,n=t.classes,i="change:classes";n instanceof Aa&&(this.stopListening(t,i,this.initClasses),this.listenTo(t,i,this.initClasses),this.listenTo(n,"add remove change reset",this.updateClasses),n.length&&this.importClasses())},s.prototype.initComponents=function(t){void 0===t&&(t={});var n=this,i=n.model,u=n.$el,y=n.childrenView,I=i.get("components"),W=[i,"change:components",this.initComponents];I instanceof Ri&&(u.data("collection",I),y&&y.remove(),this.stopListening.apply(this,W),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,W))},s.prototype.handleChange=function(){var t=this.model,n=(0,m.keys)(t.changed);if(1!==n.length||"status"!==n[0])for(var i in t.emitUpdate(),t.changed)t.emitUpdate(i)},s.prototype.importClasses=function(){var i=this.em.Selectors;i&&this.model.classes.forEach(function(u){return i.add(u.getName())})},s.prototype.updateStatus=function(t){void 0===t&&(t={});var n=this,i=n.em,u=n.el,y=n.ppfx,I=n.model,W=i?.Canvas,ce=W?.config.extHl,ie=I.get("status"),Re="".concat(y,"selected"),qe="".concat(Re,"-parent"),ct="".concat(y,"freezed"),qt="".concat(y,"hovered"),_r="".concat(y,"no-pointer"),zr="".concat(y,"pointer-init"),co=ce&&!t.noExtHl?"":Re;this.$el.removeClass([Re,qe,ct,qt,_r,zr].join(" "));var Bo=[u.getAttribute("class")||""],Oi=!W?.hasCustomSpot(Pt.F.Select),Qi=!W?.hasCustomSpot(Pt.F.Target);switch(ie){case"selected":Oi&&Bo.push(co);break;case"selected-parent":Qi&&Bo.push(qe);break;case"freezed":Bo.push(ct);break;case"freezed-selected":Bo.push(ct),Oi&&Bo.push(co);break;case"hovered":!t.avoidHover&&Bo.push(qt)}(0,m.isBoolean)(I.locked)&&Bo.push(I.locked?_r:zr);var Ca=Bo.filter(Boolean).join(" ");Ca&&u.setAttribute("class",Ca)},s.prototype.updateHighlight=function(){var t=this.model,n=t.get("textable"),i=t.get("highlightable")&&(n||!t.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!i||"")},s.prototype.updateStyle=function(t,n,i){void 0===i&&(i={});var u=this.model;if(Sd(this.em)&&!i.inline){var I=this.__cmpStyleOpts,W=u.getStyle(ku({inline:!0},I));!(0,m.isEmpty)(W)&&u.setStyle(W,I)}else this.setAttribute("style",u.styleToString(i))},s.prototype.updateStyles=function(){this.updateStyle()},s.prototype.updateClasses=function(){var t=this.model.classes.pluck("name").join(" ");this.setAttribute("class",t),this.updateStatus(),this.onAttrUpdate()},s.prototype.setAttribute=function(t,n){var i=this.$el;n?i.attr(t,n):i.removeAttr(t)},s.prototype.getClasses=function(){return this.model.getClasses().join(" ")},s.prototype.updateAttributes=function(){var t=[],n=this,i=n.model,u=n.$el,y=n.el,I=i.attributes,W=I.textable,ce=I.type,ie=ku(ku({id:i.getId(),"data-gjs-type":ce||"default"},this.__isDraggable()&&{draggable:!0}),W&&{contenteditable:"false"});(0,m.each)(y.attributes,function(qe){return t.push(qe.nodeName)}),t.forEach(function(qe){return u.removeAttr(qe)}),this.updateStyle(),this.updateHighlight();var Re=ku(ku({},ie),i.getAttributes());(0,m.keys)(Re).forEach(function(qe){return!1===Re[qe]&&delete Re[qe]}),u.attr(Re)},s.prototype.updateContent=function(){var t=this.model.content,n=this.model.components().length;this.getChildrenContainer().innerHTML=n?"":t},s.prototype.prevDef=function(t){t.preventDefault()},s.prototype.updateScript=function(){var n=this.em;this.model.get("script")&&n?.Canvas.getCanvasView().updateScript(this)},s.prototype.getChildrenContainer=function(){var t=this.el;return"function"==typeof this.getChildrenSelector&&(t=this.el.querySelector(this.getChildrenSelector())),t},s.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},n=this.el,i=0,u=0,y=function(I){var W=I.offsetParent;W?(i+=W.offsetTop,u+=W.offsetLeft,y(W)):(t.top=n.offsetTop+i,t.left=n.offsetLeft+u,t.bottom=t.top+n.offsetHeight,t.right=t.left+n.offsetWidth)};return y(n),t},s.prototype.isInViewport=function(){var t=this,n=t.el,u=t.frameView,y=t.em.Canvas.getCanvasView().getElBoxRect(n,{local:!0}),I=u.el,W=I.clientHeight,ce=I.clientWidth,ie=y.y,Re=y.x,qe=ie+y.height,ct=Re+y.width;return(ie>=0&&ie<W||qe>0&&qe<W)&&(ct>=0&&ct<ce||Re>0&&Re<=ce)},s.prototype.scrollIntoView=function(t){var n;if(void 0===t&&(t={}),!this.isInViewport()||t.force){var i=this.el;if("smooth"!==t.behavior){var u=this.getOffsetRect();null===(n=i.ownerDocument.defaultView)||void 0===n||n.scrollTo(0,u.top)}else i.scrollIntoView(ku({behavior:"smooth",block:"nearest"},t))}},s.prototype.reset=function(){var t=this,n=t.el,i=t.model;t.scriptContainer&&i.emitWithEditor(mt.I.scriptUnmount,{component:i,view:t,el:n}),this.el="",this._ensureElement(),this._setData(),(0,jt.bG)(n,this.el),this.render()},s.prototype._setData=function(){var t=this.model,n=t.components();this.$el.data({model:t,collection:n,view:this})},s.prototype._createElement=function(t){return this.createDoc.createElement(t)},s.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),n=this.childrenView||new Jd({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});n.render(t),this.childrenView=n;for(var i=Array.prototype.slice.call(n.el.childNodes),u=0,y=i.length;u<y;u++)t.appendChild(i.shift())},s.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},s.prototype.onAttrUpdate=function(){},s.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,X.setViewEl)(this.el,this),this.postRender()),this},s.prototype.postRender=function(){if(!this.modelOpt.temporary){var t=this.model,n=this.el;this.onRender(this._clbObj()),t.emitWithEditor(mt.I.render,{component:t,view:this,el:n})}},s.getEvents=function(){return(0,m.result)(this.prototype,"events")},s}(R.Ss);const vl=dc;var Pd=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const yc=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Pd(s,h),s.prototype._setAttributes=function(){},s.prototype.renderAttributes=function(){},s.prototype.updateStatus=function(){},s.prototype.updateClasses=function(){},s.prototype.setAttribute=function(){},s.prototype.updateAttributes=function(){},s.prototype.initClasses=function(){},s.prototype.initComponents=function(){},s.prototype.delegateEvents=function(){return this},s.prototype._createElement=function(){return document.createTextNode("")},s.prototype.render=function(){var t=this.model;return t.opt.temporary||(this.el.textContent=t.content),this},s}(vl);var Ss=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Ys=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Ss(s,h),s.prototype._createElement=function(){return document.createComment(this.model.content)},s}(yc);var Ap=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Ou=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Ap(s,h),s.prototype.tagName=function(){return"div"},s.prototype.initialize=function(t){h.prototype.initialize.call(this,t),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},s.prototype.updateSrc=function(){var t=(0,jt.I6)(this.el,"iframe")[0];t&&(0,jt.X6)(t,{src:this.__getSrc()})},s.prototype.render=function(){h.prototype.render.call(this);var t=(0,jt.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(t),this},s.prototype.__getSrc=function(){return this.model.getAttributes().src||""},s}(vl);var kp=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bu=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return kp(s,h),s.prototype.tagName=function(){return"img"},s.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},s.prototype.initialize=function(t){h.prototype.initialize.call(this,t),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},s.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var t=this.model,n=this.em,i=t.get("file");if(i&&n){var u=n.Assets.FileUploader();u?.uploadFile({dataTransfer:{files:[i]}},function(y){var I=y&&y.data&&y.data[0],W=I&&((0,m.isString)(I)?I:I.src);W&&t.set({src:W})}),t.set("file","")}}},s.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},s.prototype.updateClasses=function(){h.prototype.updateClasses.call(this);var t=this,n=t.el,i=t.classEmpty,u=t.model,y=u.getSrcResult()&&!u.isDefaultSrc()?"remove":"add";n.classList[y](i)},s.prototype.onActive=function(t){t?.stopPropagation();var n=this.em,i=this.model,u=n?.Assets;u&&i.get("editable")&&u.open({select:function(y,I){i.set({src:y.getSrc()}),I&&u.close()},target:i,types:["image"],accept:"image/*"})},s.prototype.onError=function(){var n=this.el,i=this.model.getSrcResult({fallback:!0});i&&(n.srcset&&(n.srcset=""),n.src=i)},s.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},s.prototype.noDrag=function(t){return t.preventDefault(),!1},s.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,n=this.model,i=t.attr("class")||"";return!n.get("src")&&t.attr("class","".concat(i," ").concat(this.classEmpty).trim()),this.postRender(),this},s}(vl);const us=Bu;var Yd=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wu=function(){return Wu=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Wu.apply(this,arguments)},Du=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},pc=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}},Vc=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Yd(s,h),s.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},s.prototype.initialize=function(t){h.prototype.initialize.call(this,t),(0,m.bindAll)(this,"disableEditing","onDisable");var n=this.model,i=this.em;this.listenTo(n,"focus",this.onActive),this.listenTo(n,"change:content",this.updateContentText),this.listenTo(n,"sync:content",this.syncContent),this.rte=i?.RichTextEditor},s.prototype.updateContentText=function(t,n,i){void 0===i&&(i={}),!i.fromDisable&&this.disableEditing()},s.prototype.canActivate=function(){var t,n=this,i=n.model,u=n.rteEnabled,y=n.em,I=y?.getEditing()===i,W=!0,ce=!1;if((u||!i.get("editable")||I||(ce=i.isChildOf("text")))&&(W=!1,ce&&!i.get("textable"))){for(var ie=i.parent();ie&&!ie.isInstanceOf("text");)ie=ie.parent();ie&&ie.get("editable")?t=ie:W=!0}return{result:W,delegate:t}},s.prototype.onActive=function(t){return Du(this,void 0,void 0,function(){var n,i,u,y,W,ce,ie,Re,qe,ct,qt;return pc(this,function(_r){switch(_r.label){case 0:return i=(n=this).rte,u=n.em,y=this.canActivate(),W=y.delegate,y.result?(null===(qt=t?.stopPropagation)||void 0===qt||qt.call(t),ce=this,[4,this.getContent()]):(W&&(null===(ct=t?.stopPropagation)||void 0===ct||ct.call(t),u.setSelected(W),W.trigger("active",t)),[2]);case 1:if(ce.lastContent=_r.sent(),!i)return[3,5];_r.label=2;case 2:return _r.trys.push([2,4,,5]),Re=this,[4,i.enable(ie=this,this.activeRte,{event:t,view:ie})];case 3:return Re.activeRte=_r.sent(),[3,5];case 4:return qe=_r.sent(),u.logError(qe),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},s.prototype.onDisable=function(t){this.disableEditing(t)},s.prototype.disableEditing=function(){return Du(this,arguments,void 0,function(t){var n,i,u,y,I,W,ce,ie,Re;return void 0===t&&(t={}),pc(this,function(qe){switch(qe.label){case 0:return i=(n=this).model,u=n.rte,y=n.activeRte,I=n.em,W=i&&i.get("editable"),u?(ce={},[4,this.getContent()]):[3,7];case 1:ie=qe.sent(),qe.label=2;case 2:return qe.trys.push([2,4,,5]),[4,u.disable(this,y,t)];case 3:return ce=qe.sent(),[3,5];case 4:return Re=qe.sent(),I.logError(Re),[3,5];case 5:return!W||ie===this.lastContent&&!ce.forceSync?[3,7]:[4,this.syncContent(Wu(Wu({},t),{content:ie}))];case 6:qe.sent(),this.lastContent="",qe.label=7;case 7:return this.toggleEvents(),[2]}})})},s.prototype.getContent=function(){return Du(this,void 0,void 0,function(){var t,n,i,u;return pc(this,function(y){switch(y.label){case 0:return n=(t=this).rte,i=t.activeRte,u="",n?[4,n.getContent(this,i)]:[3,2];case 1:u=y.sent(),y.label=2;case 2:return[2,u]}})})},s.prototype.syncContent=function(){return Du(this,arguments,void 0,function(t){var n,i,u,y,I,W,ce,ie;return void 0===t&&(t={}),pc(this,function(Re){switch(Re.label){case 0:return i=(n=this).model,u=n.rte,n.rteEnabled||t.force?null===(ie=t.content)||void 0===ie?[3,1]:(I=ie,[3,3]):[2];case 1:return[4,this.getContent()];case 2:I=Re.sent(),Re.label=3;case 3:return y=I,W=i.components(),ce=Wu({fromDisable:1},t),i.set("content","",ce),u?.customRte&&!u.customRte.parseContent?(W.length&&W.reset(void 0,Wu(Wu({},t),{keepIds:Jo(W)})),i.set("content",y,ce)):W.resetFromString(y,t),[2]}})})},s.prototype.insertComponent=function(t,n){var i;void 0===n&&(n={});var u=this.model,y=this.el.ownerDocument.getSelection();if(y?.rangeCount){var I=y.getRangeAt(0),W=I.startContainer,ce=I.startOffset,ie=(0,X.getComponentModel)(W),Re=[];if(ie&&null!==(i=ie.is)&&void 0!==i&&i.call(ie,"textnode")){var qe=ie.collection;qe.forEach(function(_r){if(_r===ie){var zr="textnode",br=n.useDomContent?W.textContent||"":_r.content;Re.push({type:zr,content:br.slice(0,ce)}),Re.push(t),Re.push({type:zr,content:br.slice(ce)})}else Re.push(_r)});var ct=Re.filter(Boolean),qt=ct.indexOf(t);return qe.reset(ct,n),qe.at(qt)}}return u.append(t,n)},s.prototype.onInput=function(){var t,n="component",i=["".concat(n,":update"),"".concat(n,":input")].join(" ");null===(t=this.em)||void 0===t||t.trigger(i,this.model)},s.prototype.disablePropagation=function(t){t.stopPropagation()},s.prototype.toggleEvents=function(t){var n=this,i=n.em,u=n.model,y=n.$el,I={on:jt.on,off:jt.AU},W=t?"on":"off";i.setEditing(!!t&&this),this.rteEnabled=!!t;var ce=[this.el.ownerDocument,document];if(I.off(ce,"mousedown",this.onDisable),I[W](ce,"mousedown",this.onDisable),i[W]("toolbar:run:before",this.onDisable),u&&(u[W]("removed",this.onDisable),u.trigger("rte:".concat(t?"enable":"disable"))),y?.off("mousedown",this.disablePropagation),y&&y[W]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var ie=this.el;ie;)ie.draggable=!t,(ie=ie.parentNode)&&"BODY"==ie.tagName&&(ie=0)},s}(vl);const Lu=Vc;var eh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Lp=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return eh(s,h),s.prototype.render=function(){return h.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},s}(Lu);var md=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const gd=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return md(s,h),s}(Lp);var zc=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Iu=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return zc(s,h),s.prototype.tagName=function(){return"div"},s.prototype.events=function(){return{}},s.prototype.initialize=function(t){h.prototype.initialize.call(this,t),this.classEmpty=this.ppfx+"plh-map"},s.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},s.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement("iframe");t.src=this.model.get("src"),t.frameBorder="0",t.style.height="100%",t.style.width="100%",t.className=this.ppfx+"no-pointer",this.iframe=t}return this.iframe},s.prototype.render=function(){return h.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},s}(us);var ru=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Qd=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return ru(s,h),s.prototype.tagName=function(){return"script"},s.prototype.events=function(){return{}},s}(vl);var fp=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),th=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return fp(s,h),s.prototype._createElement=function(t){return document.createElementNS("http://www.w3.org/2000/svg",t)},s}(vl);const rh=th;var nh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Xl=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return nh(s,h),s}(vl);var oh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Pm=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return oh(s,h),s}(vl);var Mm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const ih=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Mm(s,h),s}(vl);var Ip=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Ph=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Ip(s,h),s}(vl);var $u=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Am=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return $u(s,h),s}(vl);var $l=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Pf=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return $l(s,h),s.prototype.events=function(){return{}},s}(vl);var ah=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sh=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return ah(s,h),s.prototype.tagName=function(){return"div"},s.prototype.events=function(){return{}},s.prototype.initialize=function(){vl.prototype.initialize.apply(this,arguments);var t=this.model,n=["loop","autoplay","controls","color","rel","modestbranding","poster"].map(function(i){return"change:".concat(i)}).join(" ");this.listenTo(t,"change:provider",this.updateProvider),this.listenTo(t,"change:src",this.updateSrc),this.listenTo(t,n,this.updateVideo)},s.prototype.updateProvider=function(){var t=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(t))},s.prototype.updateSrc=function(){var t=this.model,n=this.videoEl;if(n){var i=t.get("provider"),u=t.get("src");switch(i){case"yt":u=t.getYoutubeSrc();break;case"ytnc":u=t.getYoutubeNoCookieSrc();break;case"vi":u=t.getVimeoSrc()}n.src=u}},s.prototype.updateVideo=function(){var t=this.model,n=this.videoEl;switch(t.get("provider")){case"yt":case"ytnc":case"vi":t.trigger("change:videoId");break;default:if(n){var i=n;i.loop=t.get("loop"),i.autoplay=t.get("autoplay"),i.controls=t.get("controls"),i.poster=t.get("poster")}}},s.prototype.renderByProvider=function(t){var n;switch(t){case"yt":n=this.renderYoutube();break;case"ytnc":n=this.renderYoutubeNoCookie();break;case"vi":n=this.renderVimeo();break;default:n=this.renderSource()}return this.videoEl=n,n},s.prototype.renderSource=function(){var t=document.createElement("video");return t.src=this.model.get("src"),this.initVideoEl(t),t},s.prototype.renderYoutube=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},s.prototype.renderYoutubeNoCookie=function(){var t=document.createElement("iframe");return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},s.prototype.renderVimeo=function(){var t=document.createElement("iframe");return t.src=this.model.getVimeoSrc(),t.frameBorder="0",t.setAttribute("allowfullscreen","true"),this.initVideoEl(t),t},s.prototype.initVideoEl=function(t){t.className=this.ppfx+"no-pointer",t.style.height="100%",t.style.width="100%"},s.prototype.render=function(){vl.prototype.render.apply(this),this.updateClasses();var t=this.model.get("provider");return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},s}(us);const Fc=sh;var Mf=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const km=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Mf(s,h),s.prototype.tagName=function(){return"div"},s}(vl);var ef=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),tf=function(){return tf=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},tf.apply(this,arguments)},Lm=function(h){function s(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=h.apply(this,t)||this;i.refreshDbn=(0,m.debounce)(function(){return i.refresh()},0);var u=i.events;return i.on(u.update,i.onUpdate),i.on(u.updateInside,i.onUpdateDeep),i}return ef(s,h),s.prototype.removeChildren=function(t,n,i){var u;void 0===i&&(i={}),h.prototype.removeChildren.call(this,t,n,i),null===(u=Ll(t))||void 0===u||u.forEach(function(y){return Gu(y,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:t})},s.prototype.onAdd=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];h.prototype.onAdd.apply(this,t),this.__trgEvent(this.events.symbolMainAdd,{component:t[0]})},s.prototype.onUpdate=function(t){this.__trgEvent(this.events.symbolMainUpdate,t)},s.prototype.onUpdateDeep=function(t){this.__trgEvent(this.events.symbolMainUpdateDeep,t)},s.prototype.refresh=function(){this.em.trigger(this.events.symbol)},s.prototype.__trgEvent=function(t,n,i){void 0===i&&(i=!1);var u=this.em,y=this.events,I=i?y.symbolInstance:y.symbolMain;u.trigger(t,n),u.trigger(I,tf(tf({},n),{event:t})),this.refreshDbn()},s}(Ri);const Xd=Lm;var Rp=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Sc=function(){return Sc=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Sc.apply(this,arguments)},rf=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.dataResolver=new dr({type:t.type,path:t.path,defaultValue:t.defaultValue},n),i}return Rp(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Sc(Sc({},h.prototype.defaults),{type:Un,path:"",defaultValue:"",droppable:!1})},enumerable:!1,configurable:!0}),s.prototype.getPath=function(){return this.dataResolver.get("path")},s.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},s.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},s.prototype.getInnerHTML=function(){return this.getDataValue()},s.prototype.setPath=function(t){this.dataResolver.set("path",t)},s.prototype.setDefaultValue=function(t){this.dataResolver.set("defaultValue",t)},s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Un},s}(vn);const vd=rf;var lh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const le=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return lh(s,h),s.prototype.initialize=function(t){var n=this;void 0===t&&(t={}),h.prototype.initialize.call(this,t),this.dataResolverListener=new Ml({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return n.postRender()}})},s.prototype.remove=function(){return this.dataResolverListener.destroy(),h.prototype.remove.call(this)},s.prototype.postRender=function(){this.el.innerHTML=this.model.getDataValue(),h.prototype.postRender.call(this)},s}(vl);var ye=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),K=function(){return K=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},K.apply(this,arguments)};const E=function(h){function s(t,n){var i=this,u=new Vd(t,{em:n.em});return(i=h.call(this,K(K({},t),{type:Wc,components:u.getDataValue(),droppable:!1}),n)||this).dataResolver=u,i.dataResolver.onValueChange=i.handleConditionChange.bind(i),i}return ye(s,h),s.prototype.getCondition=function(){return this.dataResolver.getCondition()},s.prototype.getIfTrue=function(){return this.dataResolver.getIfTrue()},s.prototype.getIfFalse=function(){return this.dataResolver.getIfFalse()},s.prototype.handleConditionChange=function(){this.components(this.dataResolver.getDataValue())},s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Wc},s.prototype.setCondition=function(t){this.dataResolver.setCondition(t)},s.prototype.setIfTrue=function(t){this.dataResolver.setIfTrue(t)},s.prototype.setIfFalse=function(t){this.dataResolver.setIfFalse(t)},s.prototype.toJSON=function(){return this.dataResolver.toJSON()},s}(vn);var F=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const _e=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return F(s,h),s}(vl);var Ge=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),st=function(){return st=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},st.apply(this,arguments)},Tt=function(h){function s(t,n){var i;void 0===n&&(n={});var u=h.call(this,t,n)||this;return u.mutable=null===(i=t.mutable)||void 0===i||i,u.on("change",u.handleChange),u}return Ge(s,h),Object.defineProperty(s.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),s.prototype.handleChange=function(){var t=this,n=this.changedAttributes();(0,m.keys)(n).forEach(function(i){return t.triggerChange(i)})},s.prototype.getPath=function(t,n){void 0===n&&(n={});var i=this,y=i.id,I=i.index,W=i.dataSource.id,ce=t?".".concat(t):"";return"".concat(W,".").concat(n.useIndex?I:y).concat(ce)},s.prototype.getPaths=function(t){return[this.getPath(t),this.getPath(t,{useIndex:!0})]},s.prototype.triggerChange=function(t){var i=this.em,u={dataSource:this.dataSource,dataRecord:this};this.getPaths(t).forEach(function(y){return i.trigger("".concat(Dr.path,":").concat(y),st(st({},u),{path:y}))})},s.prototype.set=function(t,n,i){var u,y,I=this;if(!this.isNew()&&!1===this.attributes.mutable)throw new Error("Cannot modify immutable record");var W=null===(y=null===(u=this.dataSource)||void 0===u?void 0:u.transformers)||void 0===y?void 0:y.onRecordSetValue,ce=function(qt,_r,zr){void 0===zr&&(zr={});var br=zr?.avoidTransformers||!W?_r:W({id:I.id,key:qt,value:_r});h.prototype.set.call(I,qt,br,zr),h.prototype.set.call(I,{__p:!!zr.partial||void 0},zr)};if("object"==typeof t&&null!==t)for(var Re=0,qe=Object.entries(t);Re<qe.length;Re++){var ct=qe[Re];ce(ct[0],ct[1],n)}else ce(t,n,i);return this},s}(R.Kx);const Kt=Tt;var fr=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nn=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.dataSource=n.dataSource,i}return fr(s,h),s}(R.pM);const Yr=nn;nn.prototype.model=Kt;var io=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Go=function(){return Go=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Go.apply(this,arguments)};const yi=function(h){function s(t,n){var i=h.call(this,Go(Go({},t),{records:[]}),n)||this,u=t.records;return i.transformers=t.transformers||{},u instanceof Yr||i.set({records:new Yr(u,{dataSource:i})}),i.listenTo(i.records,"add",i.onAdd),i.listenTo(i.records,R.e2,i.handleChanges),i}return io(s,h),s.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(s.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),s.prototype.onAdd=function(t){t.triggerChange()},s.prototype.addRecord=function(t,n){return this.records.add(t,n)},s.prototype.getRecord=function(t){return this.records.get(t)},s.prototype.getRecords=function(){var t=this;return function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],this.records.models,!0).map(function(n){return t.getRecord(n.id)})},s.prototype.removeRecord=function(t,n){var i=this.getRecord(t);if(!1===i?.mutable&&!n?.dangerously)throw new Error("Cannot remove immutable record");return this.records.remove(t,n)},s.prototype.setRecords=function(t){var n=this;this.records.reset([],{silent:!0}),t.forEach(function(i){n.records.add(i)})},s.prototype.handleChanges=function(t,n,i){this.em.changesUp(i||n)},s}(R.Kx);var ai=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ti=function(){return Ti=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ti.apply(this,arguments)},Ui=function(h){function s(t,n){var i=this,u=t[Ft];if(n.forCloning)return h.call(this,t,n)||this;var y=n.em,I=Ti(Ti({},t),{components:void 0,droppable:!1}),W=i=h.call(this,I,n)||this;return u?(i.rebuildChildrenFromCollection(),(0,m.bindAll)(i,"rebuildChildrenFromCollection"),i.listenTo(i,"change:".concat(Ft),i.rebuildChildrenFromCollection),i.listenToDataSource(),W):(y.logError("missing collection definition"),W)}return ai(s,h),s.prototype.getItemsCount=function(){var t,n,i=this.getDataSourceItems(),u=Math.max(0,null!==(t=this.getConfigStartIndex())&&void 0!==t?t:0),y=null!==(n=this.getConfigEndIndex())&&void 0!==n?n:Number.MAX_VALUE,I=Math.min(i.length-1,y)-u+1;return Math.max(0,I)},s.prototype.getConfigStartIndex=function(){return this.collectionConfig.startIndex},s.prototype.getConfigEndIndex=function(){return this.collectionConfig.endIndex},s.prototype.getComponentDef=function(){return this.getFirstChildJSON()},s.prototype.getDataSource=function(){var t,n;return null===(n=null===(t=this.collectionDef)||void 0===t?void 0:t.collectionConfig)||void 0===n?void 0:n.dataSource},s.prototype.getCollectionId=function(){var t,n;return null===(n=null===(t=this.collectionDef)||void 0===t?void 0:t.collectionConfig)||void 0===n?void 0:n.collectionId},s.prototype.setComponentDef=function(t){this.set(Ft,Ti(Ti({},this.collectionDef),{componentDef:t}))},s.prototype.setStartIndex=function(t){t<0?this.em.logError("Start index should be greater than or equal to 0"):this.updateCollectionConfig({startIndex:t})},s.prototype.setEndIndex=function(t){this.updateCollectionConfig({endIndex:t})},s.prototype.updateCollectionConfig=function(t){this.set(Ft,Ti(Ti({},this.collectionDef),{collectionConfig:Ti(Ti({},this.collectionConfig),t)}))},s.prototype.setDataSource=function(t){this.set(Ft,Ti(Ti({},this.collectionDef),{collectionConfig:Ti(Ti({},this.collectionConfig),{dataSource:t})}))},s.prototype.getDataSourceItems=function(){var t;return null!==(t=this.collectionDef)&&void 0!==t&&t.collectionConfig?function(n,i){var u=[];switch(!0){case(0,m.isArray)(n):u=n;break;case(0,X.isObject)(n)&&n instanceof yi:u=hi(n.get("id"),i);break;case Ka(n):u=1===n.path.split(".").length?hi(n.path,i):i.DataSources.getValue(n.path,[])}return u}(this.collectionConfig.dataSource,this.em):[]},s.prototype.getCollectionStateMap=function(){return this.get(Do)||{}},Object.defineProperty(s.prototype,"collectionDef",{get:function(){return this.get(Ft)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"collectionConfig",{get:function(){var t;return(null===(t=this.collectionDef)||void 0===t?void 0:t.collectionConfig)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"collectionDataSource",{get:function(){return this.collectionConfig.dataSource},enumerable:!1,configurable:!0}),s.prototype.getFirstChildJSON=function(){var t=this.components().at(0),n=t?(0,X.serialize)(t):this.collectionDef.componentDef;return null==n||delete n.draggable,null==n||delete n.removable,n},s.prototype.listenToDataSource=function(){var t,n=this.em,i=null===(t=this.collectionDataSource)||void 0===t?void 0:t.path;i&&(this.dataSourceWatcher=new Ml({em:n,resolver:new dr({type:Un,path:i},{em:n}),onUpdate:this.rebuildChildrenFromCollection}))},s.prototype.rebuildChildrenFromCollection=function(){this.components().reset(this.getCollectionItems(),Zc)},s.prototype.getCollectionItems=function(){var t,n,i,u=this.collectionDef,y=u.componentDef,I=u.collectionConfig;if(!function(ss,il,_l){for(var Nc=0,Ku=[{property:ss,propertyPath:"collectionConfig"},{property:il,propertyPath:"componentDef"},{property:ss?.collectionId,propertyPath:"collectionConfig.collectionId"},{property:ss?.dataSource,propertyPath:"collectionConfig.dataSource"}];Nc<Ku.length;Nc++){var Fd=Ku[Nc];if(!pi(Fd.property,Fd.propertyPath,_l))return[]}var vf=ss?.startIndex;return void 0!==vf&&(vf<0||!Number.isInteger(vf))&&_l.logError("Invalid startIndex: ".concat(vf,". It must be a non-negative integer.")),!0}(I,y,this.em))return[];for(var ce,ie=[],Re=I.collectionId,qe=this.getDataSourceItems(),ct=null!==(n=this.getConfigStartIndex())&&void 0!==n?n:0,qt=null!==(i=this.getConfigEndIndex())&&void 0!==i?i:Number.MAX_VALUE,_r=Math.min(qe.length-1,qt),zr=_r-ct+1,br=this.getCollectionStateMap(),co=ct;co<=_r;co++){var Bo=co===ct,Oi={collectionId:Re,currentIndex:co,currentItem:qe[co],startIndex:ct,endIndex:_r,totalItems:zr,remainingItems:zr-(co+1)};if(br[Re])return this.em.logError('The collection ID "'.concat(Re,'" already exists in the parent collection state. Overriding it is not allowed.')),[];var Qi=Ti(Ti({},br),((t={})[Re]=Oi,t));Bo&&(ce=new((this.em.Components.getType(y?.type||"default")||this.em.Components.getType("default")).model)(Ti(Ti({},(0,X.serialize)(y)),{draggable:!1,removable:!1}),this.opt));var ys=ce.clone({symbol:!0});!Bo&&ys.set("locked",!0),Uo(Qi,Re)(ys),ie.push(ys)}return ie},s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===pn},s.prototype.toJSON=function(t){var n=h.prototype.toJSON.call(this,t);return n[Ft].componentDef=this.getFirstChildJSON(),delete n.components,delete n.droppable,n},s}(vn);const vi=Ui;function Uo(h,s){return function(t){Co(h)(t);var n=function(y){Uo(h,s)(y)},i="_hasAddListener".concat(s?"_".concat(s):""),u=t.components();t.collectionStateListeners.includes(i)||(t.listenTo(u,"add",n),t.collectionStateListeners.push(i),t.listenTo(u,"remove",function(y){var I;y.stopListening(y.components(),"add",n),y.off("change:".concat(Do),go);var W=y.collectionStateListeners.indexOf(i);-1!==W&&y.collectionStateListeners.splice(W,1);var ce=y.get(Do);y.set(Do,Ti(Ti({},ce),((I={})[s]=void 0,I)))})),u?.toArray().forEach(function(y){Uo(h,s)(y)}),t.on("change:".concat(Do),go)}}function go(){var h,s=this.get(Do);null===(h=this.components())||void 0===h||h.toArray().forEach(function(t){Co(s)(t)})}function pi(h,s,t){return!!h||(t.logError('The "'.concat(s,'" property is required in the collection definition.')),!1)}function Co(h){return function(s){s.set(Zn,!0);var t=Ti(Ti({},s.get(Do)),h);if(s.set(Do,t),s.dataResolverWatchers.updateCollectionStateMap(t),Object.keys(t).every(function(i){return t[i].currentIndex===t[i].startIndex})){var n=s.__onStyleChange.bind(s);s.__onStyleChange=function(i,u){void 0===u&&(u={}),n(i),as(s).forEach(function(y){y.addStyle(i,u)})},s.on("change:".concat(Zn),function(){s.__onStyleChange=n})}}}function hi(h,s){var t=s.DataSources.getValue(h,[]);return Object.keys(t).map(function(n){return{type:Un,path:h+"."+n}})}var Gi=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Va=function(){return Va=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Va.apply(this,arguments)},qi=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.dataResolver=new Io({type:t.type,variableType:t.variableType,path:t.path,collectionId:t.collectionId},Va(Va({},n),{collectionsStateMap:i.get(Do)})),i.listenTo(i,"change:".concat(Do),i.handleCollectionsMapStateUpdate),i}return Gi(s,h),Object.defineProperty(s.prototype,"defaults",{get:function(){return Va(Va({},h.prototype.defaults),{type:Xt,collectionId:void 0,variableType:void 0,path:void 0,droppable:!1})},enumerable:!1,configurable:!0}),s.prototype.handleCollectionsMapStateUpdate=function(t,n,i){void 0===i&&(i={}),this.dataResolver.updateCollectionsStateMap(n)},s.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},s.prototype.getInnerHTML=function(){return this.getDataValue()},s.isComponent=function(t){return(0,X.toLowerCase)(t.tagName)===Xt},s}(vn);const xa=qi;var Da=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const hs=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Da(s,h),s.prototype.initialize=function(t){void 0===t&&(t={}),h.prototype.initialize.call(this,t),this.dataResolverListener=new Ml({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender.bind(this)})},s.prototype.postRender=function(){this.el.innerHTML=this.model.getDataValue(),h.prototype.postRender.call(this)},s}(vl);var Dl=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Tl=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Dl(s,h),s}(vl);var Pc,Mh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mu=function(){return mu=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},mu.apply(this,arguments)};!function(h){h[h.InvalidSource=0]="InvalidSource",h[h.SourceReject=1]="SourceReject",h[h.TargetReject=2]="TargetReject"}(Pc||(Pc={}));var wg=function(h){function s(t){var n=h.call(this,t,"DomComponents",new Ri(void 0,{em:t}),mt.I,{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]})||this;n.componentTypes=[{id:Xt,model:xa,view:hs},{id:pn,model:vi,view:Tl},{id:Wc,model:E,view:_e},{id:Un,model:vd,view:le},{id:"cell",model:so,view:Pm},{id:"row",model:ua,view:Am},{id:"table",model:ka,view:Pf},{id:"thead",model:Hr,view:Ph},{id:"tbody",model:on,view:Xl},{id:"tfoot",model:ga,view:ih},{id:"map",model:gi,view:Iu},{id:"link",model:Lr,view:Lp},{id:"label",model:Qe,view:gd},{id:"video",model:tl,view:Fc},{id:"image",model:De,view:us},{id:"script",model:zo,view:Qd},{id:"svg-in",model:Zo,view:rh},{id:"svg",model:rn,view:rh},{id:"iframe",model:j,view:Ou},{id:"comment",model:Gg,view:Ys},{id:"textnode",model:Uu,view:yc},{id:ji,model:gl,view:vl},{id:"wrapper",model:Kc,view:km},{id:"text",model:tt,view:Lu},{id:"default",model:vn,view:vl}],n.componentsById={},n.Component=vn,n.Components=Ri,n.ComponentView=vl,n.ComponentsView=Jd,n.storageKey="components",n.keySymbols="symbols",n.events=mt.I,n.symbols=new Xd([],{em:t,config:n.config,domc:n}),t&&(n.config.components=t.config.components||n.config.components);var u=n.config.pStylePrefix;if(u&&(n.config.stylePrefix=u+n.config.stylePrefix),t){t.get("Parser").compTypes=n.componentTypes,t.on("change:componentHovered",n.componentHovered,n);var y=t.get("selected");t.listenTo(y,"add",function(I,W,ce){return n.selectAdd(y.getComponent(I),ce)}),t.listenTo(y,"remove",function(I,W,ce){return n.selectRemove(y.getComponent(I),ce)})}return n}return Mh(s,h),s.prototype.postLoad=function(){this.em.UndoManager.add(this.symbols)},s.prototype.load=function(t){var n=this,i=this.loadProjectData(t,{onResult:function(u){var y=n.getWrapper();if(y||(n.em.Pages.add({},{select:!0}),y=n.getWrapper()),(0,m.isArray)(u))u.length&&y.components(u);else{var I=u.components,W=void 0===I?[]:I,ce=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(u,["components"]);y.set(ce),y.components(W)}}});return this.symbols.reset(t[this.keySymbols]||[]),i},s.prototype.store=function(){var t;return(t={})[this.keySymbols]=this.symbols,t},s.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),n=t?.getMainFrame();return n?.getComponent()},s.prototype.getWrapper=function(){return this.getComponent()},s.prototype.getComponents=function(){var t=this.getWrapper();return t?.components()},s.prototype.addComponent=function(t,n){return void 0===n&&(n={}),this.getComponents().add(t,n)},s.prototype.render=function(){var t;return null===(t=this.componentView)||void 0===t?void 0:t.render().el},s.prototype.clear=function(t){void 0===t&&(t={});var n=this.getComponents();return n?.filter(Boolean).forEach(function(i){return i.remove(t)}),this},s.prototype.setComponents=function(t,n){void 0===n&&(n={}),this.clear(n).addComponent(t,n)},s.prototype.addType=function(t,n){var i=this.em,u=n.model,y=void 0===u?{}:u,I=n.view,W=void 0===I?{}:I,ce=n.isComponent,ie=n.extend,Re=n.extendView,qe=n.extendFn,ct=void 0===qe?[]:qe,qt=n.extendFnView,_r=void 0===qt?[]:qt,zr=n.block,br=this.getType(t),co=this.getType(ie),Bo=this.getType(Re),Oi=co||br||this.getType("default"),Qi=Oi.model,Ca=Bo?Bo.view:Oi.view,ys=function(Ku,Fd,vf){return Ku.reduce(function(vh,hm){var mm=Fd[hm],_h=vf.prototype[hm];return mm&&_h&&(vh[hm]=function(){for(var Zf=[],yh=0;yh<arguments.length;yh++)Zf[yh]=arguments[yh];_h.bind(this).apply(void 0,Zf),mm.bind(this).apply(void 0,Zf)}),vh},{})};if("object"==typeof y){var ss={defaults:y.defaults};delete y.defaults;var il=new Set(Qi.typeExtends);il.add(Qi.getDefaults().type),n.model=Qi.extend(mu(mu({},y),ys(ct,y,Qi)),{typeExtends:il,isComponent:!br||co||ce?ce||function(){return 0}:Qi.isComponent}),Object.defineProperty(n.model.prototype,"defaults",{get:function(){return mu(mu({},(0,m.result)(Qi.prototype,"defaults")||{}),(0,m.result)(ss,"defaults")||{})}})}if("object"==typeof W&&(n.view=Ca.extend(mu(mu({},W),ys(_r,W,Ca)))),br?(br.model=n.model,br.view=n.view):(n.id=t,this.componentTypes.unshift(n)),zr){var _l={id:t,label:t,content:{type:t}},wu=!0===zr?_l:mu(mu({},_l),zr);i.Blocks.add(wu.id||t,wu)}var Nc="component:type:".concat(br?"update":"add");return i?.trigger(Nc,br||n),this},s.prototype.getType=function(t){for(var n=this.componentTypes,i=0;i<n.length;i++)if(n[i].id==t)return n[i]},s.prototype.removeType=function(t){var n=this.componentTypes,i=this.getType(t);if(i){var u=n.indexOf(i);return n.splice(u,1),i}},s.prototype.getTypes=function(){return this.componentTypes},s.prototype.selectAdd=function(t,n){var i=this;void 0===n&&(n={}),t&&(t.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(u){return i.em.trigger(u,t,n)}))},s.prototype.selectRemove=function(t,n){var i=this;void 0===n&&(n={}),t&&(t.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(u){return i.em.trigger(u,t,n)}))},s.prototype.componentHovered=function(){var t=this.em,n=t.get("componentHovered"),i=t.previous("componentHovered"),u="hovered";i&&i.get("status")==u&&i.set({status:"",state:""}),n&&(0,m.isEmpty)(n.get("status"))&&n.set("status",u)},s.prototype.getShallowWrapper=function(){var t=this.shallow,n=this.em;if(!t&&n){var i=n.shallow;if(!i)return;var u=i.Components;if(u.componentTypes=this.componentTypes,t=u.getWrapper()){var y=[kt,Br].join(" ");t.on(y,(0,m.debounce)(function(){return t?.components("")},100))}this.shallow=t}return t},s.prototype.isComponent=function(t){return(0,X.isComponent)(t)},s.prototype.addSymbol=function(t){if(!(0,m.isSymbol)(t)||Xc(t)){var n=t.clone({symbol:!0});return Qc(n)&&this.symbols.add(n),this.em.trigger("component:toggled"),n}},s.prototype.getSymbols=function(){return function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],this.symbols.models,!0)},s.prototype.detachSymbol=function(t){kc(t)&&Gu(t)},s.prototype.getSymbolInfo=function(t,n){void 0===n&&(n={});var i=Qc(t),u=Oa(t),y=!!u,I=Ll(i?t:u)||[],W=u||(i?t:void 0),ce=as(t,{changed:n.withChanges}),ie=i||y;return{isSymbol:ie,isMain:i,isInstance:y,isRoot:ie&&Xc(t),main:W,instances:I,relatives:ce||[]}},s.prototype.canMove=function(t,n,i){var u={result:!1,reason:Pc.InvalidSource,target:t,source:null};if(!n||!t)return u;if(zl(t)&&n instanceof vn&&zl(n)){var y=El(t),I=Qc(y)?y:Oa(y),W=El(n);if(I===(Qc(W)?W:Oa(W))&&y!==W)return mu(mu({},u),{reason:Pc.TargetReject})}var ce=(0,X.isComponent)(n)?n:null;if(!ce){var ie=this.getShallowWrapper();ce=ie?.append(n,{temporary:!0})[0]||null}if(u.source=ce,!ce)return u;var Re=ce.get("draggable");if((0,m.isFunction)(Re))Re=!!Re(ce,t,i);else{var qe=t.getEl();Re=(0,m.isArray)(Re)?Re.join(","):Re,Re=(0,m.isString)(Re)?qe?.matches(Re):Re}if(!Re)return mu(mu({},u),{reason:Pc.SourceReject});var ct=t.get("droppable");(0,m.isFunction)(ct)?ct=!!ct(ce,t,i):!1===ct&&t.isInstanceOf("text")&&ce.get("textable")?ct=!0:(qe=ce.getEl(),ct=(0,m.isArray)(ct)?ct.join(","):ct,ct=(0,m.isString)(ct)?qe?.matches(ct):ct);var qt=[t].concat(t.parents()).indexOf(ce)>-1;return mu(mu({},u),!ct||qt?{reason:Pc.TargetReject}:{result:!0})},s.prototype.allById=function(){return this.componentsById},s.prototype.getById=function(t){return this.componentsById[t]||null},s.prototype.destroy=function(){var t,n=this.allById();Object.keys(n).forEach(function(i){return n[i]&&n[i].remove()}),null===(t=this.componentView)||void 0===t||t.remove(),[this.em,this.componentsById,this.componentView].forEach(function(i){return{}})},s}(Te);const Ah=wg;var kh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),kf=Number.MAX_VALUE,qg=function(h){function s(){var t=h.call(this)||this;return(0,m.bindAll)(t,"sortRules"),t.compCls=[],t.ids=[],t}return kh(s,h),s.prototype.buildFromModel=function(t,n){var i=this;void 0===n&&(n={});var u="",y=this.em,I=y&&y.getConfig().avoidInlineStyle,W=t.styleToString(),ce=t.classes;return this.ids.push("#".concat(t.getId())),ce.forEach(function(ie){return i.compCls.push(ie.getFullName())}),!I&&W&&(u="#".concat(t.getId(),"{").concat(W,"}")),t.components().forEach(function(ie){return u+=i.buildFromModel(ie,n)}),u},s.prototype.build=function(t,n){var i=this;void 0===n&&(n={});var u=n.json,y=n.em,I=n.cssc||y?.Css;this.em=y,this.compCls=[],this.ids=[],this.model=t;var W=[],ce=t?this.buildFromModel(t,n):"",ie=(0,m.isUndefined)(n.clearStyles)&&y?y.getConfig().clearStyles:n.clearStyles;if(I){var Re=n.rules||I.getAll(),qe={},ct=[];n.onlyMatched&&t&&(0,X.hasWin)()&&(Re=this.matchedRules(t,Re)),Re.forEach(function(qt){var _r=qt.getAtRule();if(_r){var zr=qe[_r];zr?zr.push(qt):qe[_r]=[qt]}else{var br=i.buildFromRule(qt,ct,n);u?W.push(br):ce+=br}}),this.sortMediaObject(qe).forEach(function(qt){var _r="",zr=qt.key;qt.value.forEach(function(br){var co=i.buildFromRule(br,ct,n);br.get("singleAtRule")?ce+="".concat(zr,"{").concat(co,"}"):_r+=co,u&&W.push(co)}),_r&&(ce+="".concat(zr,"{").concat(_r,"}"))}),y&&ie&&Re.remove&&Re.remove(ct)}return u?W.filter(function(qt){return qt}):ce},s.prototype.buildFromRule=function(t,n,i){var u,y=this;void 0===i&&(i={});var I,W="",ce=this.model,ie=t.selectorsToString({skipAdd:1}),Re=t.get("selectorsAdd"),qe=t.get("singleAtRule");if(null===(u=t.get("selectors"))||void 0===u||u.forEach(function(qt){var _r=qt.getFullName();(y.compCls.indexOf(_r)>=0||y.ids.indexOf(_r)>=0||i.keepUnusedStyles)&&(I=1)}),ie&&I||Re||qe||!ce){var ct=t.getDeclaration({body:1});ct&&(i.json?W=t:W+=ct)}else n.push(t);return W},s.prototype.matchedRules=function(t,n){var i=this,u=t.getEl(),y=[];return n.forEach(function(I){try{I.selectorsToString().split(",").some(function(W){return u?.matches(i.__cleanSelector(W))})&&y.push(I)}catch{}}),t.components().forEach(function(I){y=y.concat(i.matchedRules(I,n))}),y=y.filter(function(I,W){return y.indexOf(I)===W})},s.prototype.getQueryLength=function(t){var n=/(-?\d*\.?\d+)\w{0,}/.exec(t);return n?parseFloat(n[1]):kf},s.prototype.sortMediaObject=function(t){var n=this;void 0===t&&(t={});var i=[];return(0,m.each)(t,function(u,y){return i.push({key:y,value:u})}),i.sort(function(u,y){var I=[u.key,y.key].every(function(ie){return-1!==ie.indexOf("min-width")}),ce=I?y.key:u.key;return n.getQueryLength(I?u.key:y.key)-n.getQueryLength(ce)})},s.prototype.sortRules=function(t,n){var i=function(W){return W.get("mediaText")||""},u=[i(t),i(n)].every(function(W){return-1!==W.indexOf("min-width")}),y=i(u?t:n),I=i(u?n:t);return this.getQueryLength(y)-this.getQueryLength(I)},s.prototype.__cleanSelector=function(t){return t.split(" ").map(function(n){return n.split(":")[0]}).join(" ")},s}(R.Kx);const Lf=qg;var xg=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mp=function(){return mp=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},mp.apply(this,arguments)},Lh=((0,X.hasWin)()?window:{}).CSS,tm=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t)||this;return i.views=[],i.config=t||{},i.opt=n,i.em=n.em,i.ensureSelectors(null,null,{}),i.on("change",i.__onChange),i.setStyle(i.get("style")),i}return xg(s,h),s.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},s.prototype.__onChange=function(t,n){var i=this.em,u=this.changedAttributes();u&&!(0,X.isEmptyObj)(u)&&i?.changesUp(n)},s.prototype.clone=function(){var t=mp({},this.opt),n=mp({},this.attributes);return n.selectors=this.get("selectors").map(function(i){return i.clone()}),new this.constructor(n,t)},s.prototype.ensureSelectors=function(t,n,i){var u=this.em,y=u?.Selectors,I=[this,"change:selectors",this.ensureSelectors],W=this.getSelectors();if(this.stopListening.apply(this,I),W.models&&(W=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],W.models,!0)),W=(0,m.isString)(W)?[W]:W,Array.isArray(W)){var ce=W.filter(function(ie){return ie}).map(function(ie){return y?y.add(ie):ie});W=new Aa(ce)}this.set("selectors",W,i),this.listenTo.apply(this,I)},s.prototype.getAtRule=function(){var t=this.get("atRuleType"),n=this.get("mediaText"),i=t?"@".concat(t):n?"@media":"";return i+(n&&i?" ".concat(n):"")},s.prototype.selectorsToString=function(t){void 0===t&&(t={});var n=[],i=this.get("state"),u=this.get("selectorsAdd"),y={escape:function(ce){return Lh&&Lh.escape?Lh.escape(ce):ce}},I=this.getSelectors().getFullString(0,y),W=i&&!t.skipState?":".concat(i):"";return I&&n.push("".concat(I).concat(W)),u&&!t.skipAdd&&n.push(u),n.join(", ")},s.prototype.getDeclaration=function(t){void 0===t&&(t={});var n="",i=this.attributes.important,u=this.selectorsToString(t),y=this.styleToString(mp({important:i},t)),I=this.get("singleAtRule");return(u||I)&&(y||t.allowEmpty)&&(n=I?y:"".concat(u,"{").concat(y,"}")),n},s.prototype.getDevice=function(){var t=this.em,n=this.attributes,i=n.atRuleType,u=n.mediaText,y=t?.Devices.getDevices()||[],I=y.filter(function(W){return""===W.getWidthMedia()})[0];return"media"===i&&u?y.filter(function(W){return W.getWidthMedia()===((ce=/(-?\d*\.?\d+)\w{0,}/.exec(u))?ce[0]:"");var ce})[0]||null:I||null},s.prototype.getState=function(){var t=this.em,n=this.get("state");return(t?.Selectors.getStates()||[]).filter(function(i){return i.getName()===n})[0]||null},s.prototype.getComponent=function(){var t,n=this.getSelectors(),i=1==n.length&&n.at(0),u=i&&i.isId()&&i.get("name");return u&&(null===(t=this.em)||void 0===t?void 0:t.Components.getById(u))||null},s.prototype.toCSS=function(t){void 0===t&&(t={});var n="",i=this.getAtRule(),u=this.getDeclaration(t);return(u||t.allowEmpty)&&(n=u),i&&n&&(n="".concat(i,"{").concat(n,"}")),n},s.prototype.toJSON=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var u=R.Kx.prototype.toJSON.apply(this,n);if(null!==(t=this.em)&&void 0!==t&&t.getConfig().avoidDefaults){var y=this.defaults();(0,m.forEach)(y,function(I,W){u[W]===I&&delete u[W]}),delete u.style.__p,(0,m.isEmpty)(u.selectors)&&delete u.selectors,(0,m.isEmpty)(u.style)&&delete u.style}return u},s.prototype.compare=function(t,n,i,u){var y;void 0===u&&(u={});var I=n||"",W=i||"",ce=u.selectorsAdd||"",ie=u.atRuleType||"";W&&!ie&&(ie="media");var Re=((0,m.isArray)(t)||t.models?t.models||t:[t]).map(function(_r){return _r.getFullName()}),qe=null===(y=this.get("selectors"))||void 0===y?void 0:y.map(function(_r){return _r.getFullName()}),ct=Re.slice().sort(),qt=qe.slice().sort();return!(Re.length!==qe.length||!ct.every(function(_r,zr){return _r===qt[zr]}))&&this.get("state")===I&&this.get("mediaText")===W&&this.get("selectorsAdd")===ce&&this.get("atRuleType")===ie},s}(ad);const Im=tm;var Rm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fm=function(h){function s(t,n){var i=h.call(this,t)||this;return i.editor=n?.em,setTimeout(function(){i.on("remove",i.onRemove),i.on("add",i.onAdd)}),i}return Rm(s,h),s.prototype.toJSON=function(t){return R.pM.prototype.toJSON.call(this,t).filter(function(n){return n.style&&!n.shallow})},s.prototype.onAdd=function(t,n,i){t.ensureSelectors(t,n,i)},s.prototype.onRemove=function(t){var n=this.editor;n.stopListening(t),n.UndoManager.remove(t)},s.prototype.add=function(t,n){return void 0===n&&(n={}),"string"==typeof t&&(t=this.editor.get("Parser").parseCss(t)),n.em=this.editor,R.pM.prototype.add.apply(this,[t,n])},s}(R.pM);const If=Fm;Fm.prototype.model=Im;var Rf=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),gp=function(){return gp=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},gp.apply(this,arguments)},Ih=function(h){function s(t){var n=h.call(this,t,"CssComposer",null,{},{stylePrefix:"css-",rules:[]})||this;n.Selectors=Aa,n.storageKey="styles";var i=n.config,u=i.pStylePrefix;return u&&(i.stylePrefix=u+i.stylePrefix),i.rules=n.em.config.style||i.rules||"",n.rules=new If([],i),n}return Rf(s,h),s.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},s.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},s.prototype.store=function(){return this.getProjectData()},s.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},s.prototype.add=function(t,n,i,u,y){void 0===u&&(u={}),void 0===y&&(y={});var I=n||"",W=i||"",ce=gp({},u),ie=this.get(t,I,W,ce);return ie&&ie.config&&!ie.config.singleAtRule||(ce.state=I,ce.mediaText=W,ce.selectors=[],W&&!ce.atRuleType&&(ce.atRuleType="media"),(ie=new Im(ce,this.config)).get("selectors").add(t,y),this.rules.add(ie,y)),ie},s.prototype.get=function(t,n,i,u){var y=t;if((0,m.isString)(t)){var I=this.em.Selectors,W=t.split(",")[0].trim(),ce=this.em.Parser.parserCss.checkNode({selectors:W})[0];y=I.get(ce.selectors)}return this.rules.find(function(ie){return ie.compare(y,n,i,u)})||null},s.prototype.getAll=function(){return this.rules},s.prototype.addCollection=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var u=this.em,y=[];(0,m.isString)(t)&&(t=u.Parser.parseCss(t));for(var I=t instanceof Array?t:[t],W=0,ce=I.length;W<ce;W++){var ie=I[W]||{};if(ie.selectors){var Re=u?.Selectors;Re||console.warn("Selector Manager not found");for(var qe=ie.selectors,ct=qe instanceof Array?qe:[qe],qt=[],_r=0,zr=ct.length;_r<zr;_r++){var br=Re.add(ct[_r]);qt.push(br)}var co=this.get(qt,ie.state,ie.mediaText,ie),Bo=this.add(qt,ie.state,ie.mediaText,ie,n),Oi=!co||!n.avoidUpdateStyle,Qi=ie.style||{};if((0,X.isObject)(i)&&Bo.set(i,n),Oi){var Ca=n.extend?gp(gp({},Bo.get("style")),Qi):Qi;Bo.setStyle(Ca,n)}y.push(Bo)}}return y},s.prototype.addRules=function(t){return this.addCollection(t)},s.prototype.setRule=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var u=i.atRuleType,y=i.atRuleParams,I=this.em.Parser.parserCss.checkNode({selectors:t,style:n})[0],W=I.state,ce=I.selectorsAdd,ie=this.em.Selectors.add(I.selectors),Re=this.add(ie,W,y,{selectorsAdd:ce,atRule:u});return i.addStyles?Re.addStyle(n,i):Re.setStyle(n,i),Re},s.prototype.getRule=function(t,n){void 0===n&&(n={});var i=this.em,u=i.Selectors,y=i.Parser.parserCss.checkNode({selectors:t})[0],I=u.get(y.selectors);return I?this.get(I,y.state,n.atRuleParams,{selectorsAdd:y.selectorsAdd,atRuleType:n.atRuleType}):void 0},s.prototype.getRules=function(t){var n=this.getAll();if(!t)return function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],n.models,!0);var i={sort:!0},u=(0,m.isString)(t)?t.split(",").map(function(y){return y.trim()}):t;return n.filter(function(y){return u.indexOf(y.getSelectors().getFullString(null,i))>=0})},s.prototype.setIdRule=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var u=i.addOpts,y=void 0===u?{}:u,I=i.mediaText,W=i.state||"",ce=(0,m.isUndefined)(I)?this.em.getCurrentMedia():I,ie=this.em.Selectors.add({name:t,type:cs.TYPE_ID},y),Re=this.add(ie,W,ce,{},y);return Re.setStyle(n,gp(gp({},i),y)),Re},s.prototype.getIdRule=function(t,n){void 0===n&&(n={});var i=n.mediaText,u=n.state||"",y=(0,m.isUndefined)(i)?this.em.getCurrentMedia():i,I=this.em.Selectors.get(t,cs.TYPE_ID);return I&&this.get(I,u,y)},s.prototype.setClassRule=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var u=i.state||"",y=i.mediaText||this.em.getCurrentMedia(),I=this.em.Selectors.add({name:t,type:cs.TYPE_CLASS}),W=this.add(I,u,y);return W.setStyle(n,i),W},s.prototype.getClassRule=function(t,n){void 0===n&&(n={});var i=n.state||"",u=n.mediaText||this.em.getCurrentMedia(),y=this.em.Selectors.get(t,cs.TYPE_CLASS);return y&&this.get(y,i,u)},s.prototype.remove=function(t,n){var i=(0,m.isString)(t)?this.getRules(t):t,u=this.getAll().remove(i,n);return(0,m.isArray)(u)?u:[u]},s.prototype.clear=function(t){return void 0===t&&(t={}),this.getAll().reset([],t),this},s.prototype.getComponentRules=function(t,n){void 0===n&&(n={});var i=n.state,u=n.mediaText;n.current&&(i=this.em.get("state")||"",u=this.em.getCurrentMedia());var y=t.getId();return this.getAll().filter(function(I){return!(!(0,m.isUndefined)(i)&&I.get("state")!==i||!(0,m.isUndefined)(u)&&I.get("mediaText")!==u||I.getSelectorsString()!=="#".concat(y))})},s.prototype.render=function(){var t;return null===(t=this.rulesView)||void 0===t||t.remove(),this.rulesView=new Ln({collection:this.rules,config:this.config}),this.rulesView.render().el},s.prototype.checkId=function(t,n){void 0===n&&(n={});var i=n.idMap,u=void 0===i?{}:i,y=[];return Object.keys(u).length&&(Array.isArray(t)?t:[t]).forEach(function(I){var W=I.selectors;if(W&&1==W.length){var ce=W[0];if((0,m.isString)(ce)){if("#"===ce[0]){var ie=ce.substring(1),Re=u[ie];ie&&Re&&(W[0]="#".concat(Re),y.push(I))}}else ce.name&&ce.type===cs.TYPE_ID&&(Re=u[ce.name])&&(ce.name=Re,y.push(I))}}),y},s.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),null===(t=this.rulesView)||void 0===t||t.remove()},s}(Te);const jm=Ih;var bt=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Ur=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return bt(s,h),s.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(s.prototype,"category",{get:function(){var t=this.get("category");return t instanceof sd?t:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),s.prototype.getId=function(){return this.id},s.prototype.getLabel=function(){return this.get("label")},s.prototype.getMedia=function(){return this.get("media")},s.prototype.getContent=function(){return this.get("content")},s.prototype.getDragDef=function(){return this.get("dragDef")},s.prototype.getCategoryLabel=function(){var t=this.get("category");return(0,m.isFunction)(t?.get)?t.get("label"):t?.label?t?.label:t},s}(R.Kx);var mn=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),to=function(h){function s(t,n){var i=h.call(this,t)||this;return i.em=n.em,i.on("add",i.handleAdd),i}return mn(s,h),s.prototype.getCategories=function(){return this.em.Blocks.getCategories()},s.prototype.handleAdd=function(t){this.initCategory(t)},s}(Jp);const Yo=to;var Pi;to.prototype.model=Ur,function(h){h.add="block:add",h.remove="block:remove",h.removeBefore="block:remove:before",h.update="block:update",h.dragStart="block:drag:start",h.drag="block:drag",h.dragEnd="block:drag:stop",h.categoryUpdate="block:category:update",h.custom="block:custom",h.all="block"}(Pi||(Pi={}));var ja=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ja=function(){return Ja=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ja.apply(this,arguments)},Hs=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t)||this,u=i.model;return i.em=n.em,i.config=n,i.endDrag=i.endDrag.bind(i),i.ppfx=n.pStylePrefix||"",i.listenTo(u,"destroy remove",i.remove),i.listenTo(u,"change",i.render),i}return ja(s,h),s.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},s.prototype.__getModule=function(){return this.em.Blocks},s.prototype.handleClick=function(t){var n,i,u=this,y=u.config,I=u.model,W=u.em,ce=I.get("onClick")||y.appendOnClick;if(W.trigger("block:click",I,t),ce){if((0,m.isFunction)(ce))return ce(I,W?.getEditor(),{event:t});var ie=null===(n=y.getSorter)||void 0===n?void 0:n.call(y);if(ie){var Re,qe,ct=I.get("content"),qt=null===(i=this.getTempDropModel(ct).view)||void 0===i?void 0:i.el,_r=qt?[{element:qt,dragSource:{content:ct}}]:[],zr=W.getSelected();if(zr)if(ie.validTarget(zr.getEl(),_r,0))Re=zr;else{var co=zr.parent();co&&ie.validTarget(co.getEl(),_r,0)&&(Re=co,qe=co.components().indexOf(zr)+1)}if(!Re){var Bo=W.getWrapper();ie.validTarget(Bo.getEl(),_r,0)&&(Re=Bo)}var Oi=Re&&Re.append(ct,{at:qe})[0];Oi&&W.setSelected(Oi,{scroll:1})}}},s.prototype.startDrag=function(t){var n,i=this,u=i.config,y=i.em,I=i.model,W=I.get("disable");if(0===t.button&&u.getSorter&&!this.el.draggable&&!W){y.refreshCanvas();var ce=u.getSorter();ce.__currentBlock=I;var ie=this.model.get("content"),Re=null===(n=this.getTempDropModel(ie).view)||void 0===n?void 0:n.el;ce.startSort(Re?[{element:Re,dragSource:{content:ie}}]:[]),(0,jt.on)(document,"mouseup",this.endDrag)}},s.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},s.prototype.handleDrag=function(t){this.__getModule().__drag(t)},s.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},s.prototype.endDrag=function(){var t,n;(0,jt.AU)(document,"mouseup",this.endDrag);var i=null===(n=(t=this.config).getSorter)||void 0===n?void 0:n.call(t);i&&i.endDrag()},s.prototype.getTempDropModel=function(t){var n,i=this.em.Components.getComponents(),u={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},y=i.add(t,Ja(Ja({},u),{temporary:!0})),I=i.remove(y,Ja(Ja({},u),{temporary:!0}));return null===(n=(I=I instanceof Array?I[0]:I).view)||void 0===n||n.$el.data("model",I),I},s.prototype.render=function(){var t,n=this,i=n.em,u=n.el,y=n.$el,I=n.ppfx,W=n.model,ce=W.get("disable"),ie=W.get("attributes")||{},Re=ie.class||"",qe="".concat(I,"block"),ct=i&&i.t("blockManager.labels.".concat(W.id))||W.get("label"),qt=W.get("render"),_r=W.get("media"),zr=ce?"".concat(qe,"--disable"):"".concat(I,"four-color-h");y.attr(ie),u.className="".concat(Re," ").concat(qe," ").concat(I,"one-bg ").concat(zr).trim(),u.innerHTML="\n      ".concat(_r?'<div class="'.concat(qe,'__media">').concat(_r,"</div>"):"",'\n      <div class="').concat(qe,'-label">').concat(ct,"</div>\n    "),u.title=ie.title||(null===(t=u.textContent)||void 0===t?void 0:t.trim()),u.setAttribute("draggable","".concat(!(!(0,X.hasDnd)(i)||ce)));var br=qt&&qt({el:u,model:W,className:qe,prefix:I});return br&&(u.innerHTML=br),this},s}(R.Ss);const Gs=Hs;var Sl=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qs=function(h){function s(t,n,i){var u=h.call(this,t)||this;u.config=n;var y=n.pStylePrefix||"";return u.em=n.em,u.catName=i,u.pfx=y,u.caretR="fa fa-caret-right",u.caretD="fa fa-caret-down",u.iconClass="".concat(y,"caret-icon"),u.activeClass="".concat(y,"open"),u.className="".concat(y).concat(i,"-category"),u.listenTo(u.model,"change:open",u.updateVisibility),u.model.view=u,u}return Sl(s,h),s.prototype.events=function(){return{"click [data-title]":"toggle"}},s.prototype.template=function(t){var n=t.pfx,i=t.label,u=t.catName;return x(Ju||(Ju=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h}(['\n      <div class="','title" data-title>\n        <i class="','caret-icon"></i>\n        ','\n      </div>\n      <div class="',"",'s-c"></div>\n    '],['\n      <div class="','title" data-title>\n        <i class="','caret-icon"></i>\n        ','\n      </div>\n      <div class="',"",'s-c"></div>\n    '])),n,n,i,n,u)},s.prototype.attributes=function(){return this.model.get("attributes")||{}},s.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},s.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},s.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},s.prototype.toggle=function(){var t=this.model;t.set("open",!t.get("open"))},s.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},s.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},s.prototype.append=function(t){this.getTypeEl().appendChild(t)},s.prototype.render=function(){var t=this,i=t.el,u=t.$el,y=t.model,I=t.pfx,W=t.catName,ce=t.em.t("".concat(W,"Manager.categories.").concat(y.id))||y.get("label");return i.innerHTML=this.template({pfx:I,label:ce,catName:W}),u.addClass(this.className),u.css({order:y.get("order")}),this.updateVisibility(),this},s}(R.Ss);const jc=qs;var Ju,Tu=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Md=function(){return Md=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Md.apply(this,arguments)},xl=function(h){function s(t,n){var i=h.call(this,t)||this;i.renderedCategories=new Map,(0,m.bindAll)(i,"getSorter","onDrag","onDrop","onMove"),i.config=n||{},i.categories=t.categories||"";var u=i.config.pStylePrefix||"";i.ppfx=u,i.noCatClass="".concat(u,"blocks-no-cat"),i.blockContClass="".concat(u,"blocks-c"),i.catsClass="".concat(u,"block-categories");var y=i.collection;return i.listenTo(y,"add",i.addTo),i.listenTo(y,"reset",i.render),i.em=i.config.em,i.em&&(i.config.getSorter=i.getSorter),i}return Tu(s,h),s.prototype.__getModule=function(){return this.em.Blocks},s.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=Md(Md({},this.config),t)},s.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var i=t.Canvas;this.sorter=new t.Utils.ComponentSorter({em:t,treeClass:Dm,containerContext:{container:i.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:i.getPlacerEl(),document:i.getBody().ownerDocument},dragBehavior:{dragDirection:_c.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},s.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},s.prototype.onMove=function(t){this.__getModule().__drag(t)},s.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},s.prototype.addTo=function(t){this.add(t)},s.prototype.add=function(t,n){var i=this.config,u=this.renderedCategories,y=t.get("attributes"),I=new Gs({model:t,attributes:y},i).render().el,W=t.parent.initCategory(t);if(W&&this.categories&&!i.ignoreCategories){var ce=W.getId(),ie=this.getCategoriesEl(),Re=u.get(ce);return!Re&&ie&&(Re=new jc({model:W},i,"block").render(),u.set(ce,Re),ie.appendChild(Re.el)),void(null==Re||Re.append(I))}n?n.appendChild(I):this.append(I)},s.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},s.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},s.prototype.append=function(t){var n=this.getBlocksEl();n&&n.appendChild(t)},s.prototype.render=function(){var t=this,n=this.ppfx,i=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML='\n      <div class="'.concat(this.catsClass,'"></div>\n      <div class="').concat(this.noCatClass,'">\n        <div class="').concat(this.blockContClass,'"></div>\n      </div>\n    '),this.collection.each(function(y){return t.add(y,i)}),this.append(i);var u="".concat(this.blockContClass,"s ").concat(n,"one-bg ").concat(n,"two-color");return this.$el.addClass(u),this.rendered=!0,this},s}(R.Ss);const nf=xl;var nm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_d=function(){return _d=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},_d.apply(this,arguments)},yd=function(h){function s(t){var n,i=h.call(this,t,"BlockManager",new Yo((null===(n=t.config.blockManager)||void 0===n?void 0:n.blocks)||[],{em:t}),Pi,{appendTo:"",blocks:[],appendOnClick:!1,custom:!1})||this;return i.events=Pi,i.Block=Ur,i.Blocks=Yo,i.Category=sd,i.Categories=Rl,i.storageKey="",i.blocks=i.all,i.blocksVisible=new Yo(i.blocks.models,{em:t}),i.categories=new Rl([],{em:t,events:{update:Pi.categoryUpdate}}),i.blocks.on("add",function(u){return i.blocksVisible.add(u)}),i.blocks.on("remove",function(u){return i.blocksVisible.remove(u)}),i.blocks.on("reset",function(u){return i.blocksVisible.reset(u.models)}),i.__onAllEvent=(0,m.debounce)(function(){return i.__trgCustom()},0),i}return nm(s,h),s.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},s.prototype.__customData=function(){var t=this,n=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:n.container,dragStart:function(i,u){return t.startDrag(i,u)},drag:function(i){return t.__drag(i)},dragStop:function(i){return t.endDrag(i)}}},s.prototype.__startDrag=function(t,n){var i=this,u=i.em,y=i.events,I=i.blocks,W=t.getContent?t.getContent():t;this._dragBlock=t,u.set({dragResult:null,dragSource:{content:W,dragDef:t.getDragDef()}}),[u,I].map(function(ce){return ce.trigger(y.dragStart,t,n)})},s.prototype.__drag=function(t){var n=this,u=n.events,I=this._dragBlock;[n.em,n.blocks].map(function(W){return W.trigger(u.drag,I,t)})},s.prototype.__endDrag=function(t){void 0===t&&(t={});var n=this,i=n.em,u=n.events,y=n.blocks,I=this._dragBlock,W=t.component||i.get("dragResult");if(delete this._dragBlock,W&&I){var ce="activeOnRender",ie=W.get&&W.get(ce),Re=I.get("activate")||ie,qe=I.get("select"),ct=(0,m.isArray)(W)?W[0]:W;(qe||Re&&!1!==qe)&&i.setSelected(ct),Re&&(ct.trigger("active"),ie&&ct.unset(ce)),I.get("resetId")&&ct.onAll(function(qt){return qt.resetId()})}i.set({dragResult:null,dragSource:void 0}),I&&[i,y].map(function(qt){return qt.trigger(u.dragEnd,W,I)})},s.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(t){return t.view}).filter(Boolean)},s.prototype.__behaviour=function(t){return void 0===t&&(t={}),this._bhv=_d(_d({},this._bhv||{}),t)},s.prototype.__getBehaviour=function(){return this._bhv||{}},s.prototype.startDrag=function(t,n){this.__startDrag(t,n),this.__getFrameViews().forEach(function(i){var u;return null===(u=i.droppable)||void 0===u?void 0:u.startCustom()})},s.prototype.endDrag=function(t){this.__getFrameViews().forEach(function(n){var i;return null===(i=n.droppable)||void 0===i?void 0:i.endCustom(t)}),this.__endDrag()},s.prototype.postRender=function(){var t=this,u=t.em,y=this.blocksVisible;this.blocksView=new nf({collection:y,categories:t.categories},_d(_d({},t.config),{em:u})),this.__appendTo(y.models),this.__trgCustom()},s.prototype.add=function(t,n,i){void 0===i&&(i={});var u=n||{};return u.id=t,this.blocks.add(u,i)},s.prototype.get=function(t){return this.blocks.get(t)},s.prototype.getAll=function(){return this.blocks},s.prototype.getAllVisible=function(){return this.blocksVisible},s.prototype.remove=function(t,n){return void 0===n&&(n={}),this.__remove(t,n)},s.prototype.getCategories=function(){return this.categories},s.prototype.getContainer=function(){var t;return null===(t=this.blocksView)||void 0===t?void 0:t.el},s.prototype.getDragBlock=function(){return this._dragBlock},s.prototype.getBlocksByCategory=function(t){return Rc(t||this.getAll().models)},s.prototype.render=function(t,n){void 0===n&&(n={});var i=this,u=i.categories,y=i.config,I=i.em,W=t||this.getAll().models;if(n.external){var ce=new Yo(W,{em:I});return new nf({collection:ce,categories:u},_d(_d({em:I},y),n)).render().el}return this.blocksView&&(this.blocksView.updateConfig(n),this.blocksView.collection.reset(W),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},s.prototype.destroy=function(){var t,n=[this.blocks,this.blocksVisible,this.categories];n.map(function(i){return i.stopListening()}),n.map(function(i){return i.reset()}),null===(t=this.blocksView)||void 0===t||t.remove()},s}(Te);const ch=yd;var Nm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rh=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Nm(s,h),s.prototype.defaults=function(){return{name:"",label:""}},s.prototype.getName=function(){return this.get("name")},s.prototype.getLabel=function(){return this.get("label")||this.getName()},s}(R.Kx);const Su=Rh;Rh.prototype.idAttribute="name";var om=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),am="contentEditable",sm=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this,i=t.config||{};return n.config=i,n.module=t.module,n.coll=t.coll||null,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.em=i.em,n.listenTo(n.model,"change:active",n.updateStatus),n}return om(s,h),s.prototype.template=function(){var t=this,n=t.pfx,u=t.config,y=t.model.get("label")||"";return x(Bl||(Bl=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h}(['\n      <span id="','checkbox" class="','tag-status" data-tag-status></span>\n      <span id="','tag-label" data-tag-name>','</span>\n      <span id="','close" class="','tag-close" data-tag-remove> $'," </span>\n    "],['\n      <span id="','checkbox" class="','tag-status" data-tag-status></span>\n      <span id="','tag-label" data-tag-name>','</span>\n      <span id="','close" class="','tag-close" data-tag-remove> $'," </span>\n    "])),n,n,n,y,n,n,u.iconTagRemove)},s.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},s.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},s.prototype.startEditTag=function(){var t=this.em,n=this.getInputEl();n[am]="true",n.focus(),t?.setEditing(!0)},s.prototype.endEditTag=function(){var t=this.model,n=this.em,i=this.getInputEl(),u=i.textContent||"",y=n?.Selectors;i[am]="false",n?.setEditing(!1),y&&y.rename(t,u)!==t&&(i.innerText=t.getLabel())},s.prototype.changeStatus=function(){var t=this.model;t.set("active",!t.getActive())},s.prototype.removeTag=function(){this.module.removeSelected(this.model)},s.prototype.updateStatus=function(){var t=this,n=t.model,i=t.$el,u=t.config,y=u.iconTagOn,I=u.iconTagOff,W=i.find("[data-tag-status]");n.get("active")?(W.html(y),i.removeClass("opac50")):(W.html(I),i.addClass("opac50"))},s.prototype.render=function(){var t=this,i=t.ppfx,u=t.$el,y=t.model,I="".concat(t.pfx,"tag"),W=["".concat(I," ").concat(i,"three-bg")];return y.get("protected")&&W.push("".concat(I,"-protected")),u.html(this.template()),u.attr("class",W.join(" ")),this.updateStatus(),this},s}(R.Ss);const Ad=sm;var Bl,Hc=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fh=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},Yu=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;n.config=t.config||{},n.pfx=n.config.stylePrefix||"",n.ppfx=n.config.pStylePrefix||"",n.className=n.pfx+"tags",n.stateInputId=n.pfx+"states",n.stateInputC=n.pfx+"input-c",n.states=n.config.states||[];var i=n.config.em,u=n.collection;n.target=i;var y=i.Selectors;n.module=y,n.em=i,n.componentChanged=(0,m.debounce)(n.componentChanged.bind(n),0),n.checkSync=(0,m.debounce)(n.checkSync.bind(n),0);var I=mt.I.update,W="".concat(I,":classes"),ce="component:toggled ".concat(W),ie="".concat(W," ").concat(I,":attributes:id change:state");return n.listenTo(i,ce,n.componentChanged),n.listenTo(i,"styleManager:update",n.componentChanged),n.listenTo(i,ie,n.__handleStateChange),n.listenTo(i,"styleable:change change:device",n.checkSync),n.listenTo(u,"add",n.addNew),n.listenTo(u,"reset",n.renderClasses),n.listenTo(u,"remove",n.tagRemoved),n.listenTo(y.getAll(),y.events.state,(0,m.debounce)(function(){return n.renderStates()},0)),n.delegateEvents(),n}return Hc(s,h),s.prototype.template=function(t){var n=t.labelInfo,i=t.labelHead,u=t.iconSync,y=t.iconAdd,I=t.pfx,W=t.ppfx;return x(jh||(jh=Fh([' <div id="','up" class="','header">\n        <div id="','label" class="','header-label">','</div>\n        <div id="','status-c" class="','header-status">\n          <span id="','input-c" data-states-c>\n            <div class="',"field ",'select">\n              <span id="','input-holder">\n                <select id="','states" data-states></select>\n              </span>\n              <div class="','sel-arrow">\n                <div class="','d-s-arrow"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id="','tags-field" class="','field">\n        <div id="','tags-c" data-selectors></div>\n        <input id="','new" data-input />\n        <span id="','add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',' </span>\n        <span class="',"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',' </span>\n      </div>\n      <div class="','sels-info">\n        <div class="','label-sel">',':</div>\n        <div class="','sels" data-selected></div>\n      </div>'],[' <div id="','up" class="','header">\n        <div id="','label" class="','header-label">','</div>\n        <div id="','status-c" class="','header-status">\n          <span id="','input-c" data-states-c>\n            <div class="',"field ",'select">\n              <span id="','input-holder">\n                <select id="','states" data-states></select>\n              </span>\n              <div class="','sel-arrow">\n                <div class="','d-s-arrow"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id="','tags-field" class="','field">\n        <div id="','tags-c" data-selectors></div>\n        <input id="','new" data-input />\n        <span id="','add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',' </span>\n        <span class="',"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',' </span>\n      </div>\n      <div class="','sels-info">\n        <div class="','label-sel">',':</div>\n        <div class="','sels" data-selected></div>\n      </div>'])),I,I,I,I,i,I,I,I,W,W,W,I,W,W,I,W,I,I,I,I,I,y,I,I,u,I,I,n,I)},s.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},s.prototype.syncStyle=function(){var t,n=this.em,i=this.getTarget(),u=n.Css,y=this.getCommonSelectors({opts:{noDisabled:1}}),I=n.get("state"),W=n.getCurrentMedia(),ce=[],ie=u.get(y,I,W)||u.add(y,I,W);this.getTargets().forEach(function(Re){var qe=u.getIdRule(Re.getId(),{state:I,mediaText:W});t=qe.getStyle(),qe.setStyle({}),ce.push(qe)}),t&&ie.addStyle(t),n.trigger("component:toggled"),n.trigger("component:sync-style",{component:i,selectors:y,mediaText:W,rule:ie,ruleComponents:ce,state:I})},s.prototype.tagRemoved=function(t){this.updateStateVis()},s.prototype.addNew=function(t){this.addToClasses(t)},s.prototype.startNewTag=function(){var t,n;null===(t=this.$addBtn)||void 0===t||t.css({display:"none"}),null===(n=this.$input)||void 0===n||n.show().focus()},s.prototype.endNewTag=function(){var t,n;null===(t=this.$addBtn)||void 0===t||t.css({display:""}),null===(n=this.$input)||void 0===n||n.hide().val("")},s.prototype.onInputKeyUp=function(t){var n;13===t.keyCode?(t.preventDefault(),this.addNewTag(null===(n=this.$input)||void 0===n?void 0:n.val())):27===t.keyCode&&this.endNewTag()},s.prototype.checkStates=function(){var t=this.em.getState(),n=this.getStates();n&&n.val(t)},s.prototype.componentChanged=function(t){this.updateSelection((void 0===t?{}:t).targets)},s.prototype.updateSelection=function(t){var n=t||this.getTargets(),i=[];return(n=(0,m.isArray)(n)?n:[n])&&n.length&&(i=this.getCommonSelectors({targets:n}),this.checkSync({validSelectors:i})),this.collection.reset(i),this.updateStateVis(n),this.module.__trgCustom(),i},s.prototype.getCommonSelectors=function(t){var n=void 0===t?{}:t,u=n.opts,y=void 0===u?{}:u,I=n.targets||this.getTargets();return this.module.__getCommonSelectors(I,y)},s.prototype._commonSelectors=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return(t=this.module).__common.apply(t,n)},s.prototype.checkSync=function(){var t,n=this,i=n.$btnSyncEl,u=n.config,y=n.collection,I=this.getTarget();if(I&&u.componentFirst&&y.length){var W=I.getStyle();t=!(0,m.isEmpty)(W)}i&&i[t?"show":"hide"]()},s.prototype.getTarget=function(){return this.target.getSelected()},s.prototype.getTargets=function(){return this.target.getSelectedAll()},s.prototype.updateStateVis=function(t){var n=this.em,i=n&&n.getConfig().avoidInlineStyle,u=this.collection.length||i?"":"none";this.getStatesC().css("display",u),this.updateSelector(t)},s.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},s.prototype.updateSelector=function(t){var n=this,i=this.el.querySelector("[data-selected]"),u=[],y=t||this.getTargets();(y=(0,m.isArray)(y)?y:[y]).forEach(function(I){return u.push(n.__getName(I))}),i&&(i.innerHTML=u.join(", ")),this.checkStates()},s.prototype.__getName=function(t){var n,i=this,u=i.pfx,y=i.config,I=i.em,W=y.selectedName,ce=y.componentFirst;if((0,m.isString)(t))n=x(Qm||(Qm=Fh(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),u,t);else{var ie=t?.getSelectors();if(!ie)return"";var Re=ie.getStyleable(),qe=I.get("state"),ct=t.getId?x(Jl||(Jl=Fh(['<span class="','sel-cmp">','</span>\n            <span class="','sel-id">#',"</span>"],['<span class="','sel-cmp">','</span>\n            <span class="','sel-id">#',"</span>"])),u,t.getName(),u,t.getId()):"";n=(n=this.collection.getFullString(Re))?x(Nh||(Nh=Fh(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),u,n):t.get("selectorsAdd")||ct,n=ce&&ct?ct:n,n+=qe?x(kd||(kd=Fh(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),u,qe):"",n=W?W({result:n,state:qe,target:t}):n}return n&&'<span class="'.concat(u,'sel">').concat(n,"</span>")},s.prototype.stateChanged=function(t){this.em.set("state",t.target.value)},s.prototype.addNewTag=function(t){var n=t.trim();n&&(this.module.addSelected({label:n}),this.endNewTag())},s.prototype.addToClasses=function(t,n){var i=n,u=this.getClasses(),y=new Ad({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return i?i.appendChild(y):u.append(y),y},s.prototype.renderClasses=function(){var t=this,n=document.createDocumentFragment(),i=this.getClasses();i.empty(),this.collection.each(function(u){return t.addToClasses(u,n)}),i.append(n)},s.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},s.prototype.getStates=function(){if(!this.$states){var t=this.$el.find("[data-states]");this.$states=t[0]&&t}return this.$states},s.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},s.prototype.renderStates=function(){var t=this.module,n=this.em,i=n.t("selectorManager.emptyState"),u=t.getStates().map(function(I){var W=n.t("selectorManager.states.".concat(I.id))||I.getLabel()||I.id;return'<option value="'.concat(I.id,'">').concat(W,"</option>")}).join(""),y=this.getStates();y&&y.html('<option value="">'.concat(i,"</option>").concat(u)),this.checkStates()},s.prototype.render=function(){var t=this,n=t.em,i=t.pfx,u=t.ppfx,y=t.config,I=t.$el,W=t.el,ce=y.render,ie={iconSync:y.iconSync,iconAdd:y.iconAdd,labelHead:n.t("selectorManager.label"),labelInfo:n.t("selectorManager.selected"),ppfx:u,pfx:i,el:W};I.html(this.template(ie));var Re=ce&&ce(ie);return Re&&Re!==W&&I.empty().append(Re),this.$input=I.find("[data-input]"),this.$addBtn=I.find("[data-add]"),this.$classes=I.find("#"+i+"tags-c"),this.$btnSyncEl=I.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),I.attr("class","".concat(this.className," ").concat(u,"one-bg ").concat(u,"two-color")),this},s}(R.Ss);const Ff=Yu;var jh,Qm,Jl,Nh,kd,Ld=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Id=function(){return Id=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Id.apply(this,arguments)},f=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},v=function(h){return(0,m.isString)(h)&&"#"==h[0]},k=function(h){return(0,m.isString)(h)&&"."==h[0]},P="selector",Z="".concat(P,":"),he="".concat(Z,"add"),Fe="".concat(Z,"update"),Be="".concat(Z,"remove"),ot="".concat(Be,":before"),ft="".concat(Z,"custom"),jr="".concat(Z,"state"),Rr={all:P,update:Fe,add:he,remove:Be,removeBefore:ot,state:jr,custom:ft},_n=function(h){function s(t){var n=h.call(this,t,"SelectorManager",new Aa([]),Rr,{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1},{skipListen:!0})||this;n.Selector=cs,n.Selectors=Aa,n.storageKey="",(0,m.bindAll)(n,"__updateSelectedByComponents");var i=n.config,u=i.pStylePrefix;u&&(i.stylePrefix=u+i.stylePrefix),n.all=new Aa(i.selectors),n.selected=new Aa([],{em:t,config:i}),n.states=new R.pM(i.states.map(function(W){return new Su(W)}),{model:Su}),n.model=new R.Kx({cFirst:i.componentFirst,_undo:!0}),n.__update=(0,m.debounce)(function(){return n.__trgCustom()},0),n.__initListen({collections:[n.states,n.selected],propagate:[{entity:n.states,event:n.events.state}]}),t.on("change:state",function(W,ce){return t.trigger(jr,ce)}),n.model.on("change:cFirst",function(W,ce){return t.trigger("selector:type",ce)});var y="".concat(mt.I.update,":classes");t.on("component:toggled ".concat(y),n.__updateSelectedByComponents);var I="component:toggled ".concat(y," change:device styleManager:update selector:state selector:type style:target");return n.model.listenTo(t,I,function(){return n.__update()}),n}return Ld(s,h),s.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},s.prototype.getAll=function(t){return void 0===t&&(t={}),this.all?t.array?f([],this.all.models,!0):this.all:[]},s.prototype.__customData=function(t){return void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},s.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},s.prototype.select=function(t,n){void 0===n&&(n={});var i=Array.isArray(t)?t:[t],u=this.em.Styles.select(i,n);this.selected.reset(this.__getCommonSelectors(u));var y=this.selectorTags,I=u.filter(function(W){return W}).map(function(W){return(0,X.isComponent)(W)||(0,X.isRule)(W)&&!W.get("selectorsAdd")?W:W.getSelectorsString()});return y&&y.componentChanged({targets:I}),this},s.prototype.addSelector=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i={});var u=Id({},n);(0,m.isObject)(t)?u=t:u.name=t,v(u.name)?(u.name=u.name.substr(1),u.type=cs.TYPE_ID):k(u.name)&&(u.name=u.name.substr(1)),u.label&&!u.name&&(u.name=this.escapeName(u.label));var y=u.name,I=this.getConfig(),W=this.all,ce=this.em,ie=y?this.get(y,u.type):W.where(u)[0];if(!ie){var Re=u instanceof cs?u:new cs(u,Id(Id({},i),{config:I,em:ce}));return W.add(Re,i)}return ie},s.prototype.getSelector=function(t,n){return void 0===n&&(n=cs.TYPE_CLASS),v(t)?(t=t.substr(1),n=cs.TYPE_ID):k(t)&&(t=t.substr(1)),this.all.where({name:t,type:n})[0]},s.prototype.add=function(t,n){var i=this;void 0===n&&(n={});var u=(0,m.isString)(t)?{}:n;return(0,m.isArray)(t)?t.map(function(y){return i.addSelector(y,n,u)}):this.addSelector(t,n,u)},s.prototype.addClass=function(t){var n=this,i=[];return(0,m.isString)(t)&&(t=t.trim().split(" ")),t.forEach(function(u){return i.push(n.addSelector(u))}),i},s.prototype.get=function(t,n){var i=this;if((0,m.isArray)(t)){var u=[];return t.map(function(y){return i.getSelector(y)}).filter(Boolean).forEach(function(y){return u.indexOf(y)<0&&u.push(y)}),u}return this.getSelector(t,n)},s.prototype.remove=function(t,n){return this.__remove(t,n)},s.prototype.rename=function(t,n,i){var u=this.escapeName(n);return this.get(u)||t.set({name:u,label:n},i)},s.prototype.setState=function(t){return this.em.setState(t),this},s.prototype.getState=function(){return this.em.getState()},s.prototype.getStates=function(){return f([],this.states.models,!0)},s.prototype.setStates=function(t,n){return this.states.reset(t.map(function(i){return new Su(i)}),n)},s.prototype.getSelected=function(){return this.__getCommon()},s.prototype.getSelectedAll=function(){return f([],this.selected.models,!0)},s.prototype.addSelected=function(t){var n=this.add(t);this.em.getSelectedAll().forEach(function(i){i.getSelectors().add(n)})},s.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach(function(n){!t.get("protected")&&n&&n.getSelectors().remove(t)})},s.prototype.duplicateSelected=function(t,n){var i=this;void 0===n&&(n={});var u=this.em,y=this.getSelected();if(!(y.indexOf(t)<0)){var I=this.getState(),W=u.getCurrentMedia(),ce=u.Css.get(y,I,W),ie=ce?.getStyle();u.getSelectedAll().forEach(function(Re){var qe=Re.getSelectors();if(qe.includes(t)){var ct=n.suffix||" copy",qt=t.getLabel(),_r=i.addSelector("".concat(qt).concat(ct)),zr=qe.indexOf(t);qe.remove(t),qe.add(_r,{at:zr})}}),ie&&u.Css.add(this.getSelected(),I,W).setStyle(ie)}},s.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},s.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},s.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},s.prototype.escapeName=function(t){var n=this.getConfig().escapeName;return n?n(t):cs.escapeName(t)},s.prototype.render=function(t){var n=this.selectorTags,i=this.getConfig(),u=n?.el;return this.selected.reset(t),this.selectorTags=new Ff({el:u,collection:this.selected,module:this,config:i}),this.selectorTags.render().el},s.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),t?.remove(),this.selectorTags=void 0},s.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},s.prototype.__getCommonSelectors=function(t,n){void 0===n&&(n={});var i=t.map(function(u){return u.getSelectors&&u.getSelectors().getValid(n)}).filter(Boolean);return this.__common.apply(this,i)},s.prototype.__common=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.length?1===n.length?n[0]:2===n.length?n[0].filter(function(u){return n[1].indexOf(u)>=0}):n.slice(1).reduce(function(u,y){return t.__common(u,y)},n[0]):[]},s.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},s}(Te);const Tn=_n;var ni,_s=((ni={})[4]="media",ni[5]="font-face",ni[6]="page",ni[7]="keyframes",ni[11]="counter-style",ni[12]="supports",ni[13]="document",ni[14]="font-feature-values",ni[15]="viewport",ni),nu=(0,m.keys)(_s),Hl=[5,6,11,15],ou=nu.filter(function(h){return Hl.indexOf(Number(h))<0}).map(function(h){return _s[h]}).concat(["container","layer"]),Qu=Hl.map(function(h){return _s[h]}),bc=function(h){void 0===h&&(h="");for(var s=[],t=[],n=h.split(","),i=0,u=n.length;i<u;i++){var y=n[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(y)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(y)){var I=y.split(".").filter(Boolean);t.push(I)}else s.push(y)}return{result:t,add:s}},Zu=function(h){for(var s=h.style,t={},n=0,i=s.length;n<i;n++){var u=s[n],y=s.getPropertyValue(u),I=s.getPropertyPriority(u);t[u]="".concat(y).concat(I?" !".concat(I):"")}return t},ec=function(h){return(h.conditionText||h.media&&h.media.mediaText||h.name||h.selectorText||"").trim()},Fl=function(h,s,t){void 0===s&&(s={}),void 0===t&&(t={});var n={},i=h.length,u=h[i-1],y=u?u.split(/:(.+)/):[],I=y[1],W=t.atRule,ce=t.selectorsAdd,ie=t.mediaText;return Qu.indexOf(W)>=0&&(n.singleAtRule=!0),W&&(n.atRuleType=W),ce&&(n.selectorsAdd=ce),ie&&(n.mediaText=ie),I&&(h[i-1]=y[0],n.state=I,y.splice(y.length-1,1)),n.selectors=h,n.style=s,n},fc=function(h){var s=h.cssText,t=void 0===s?"":s;return ou.find(function(n){return 0===t.indexOf("@".concat(n))})},wc=function(h){for(var s=[],t=h.cssRules||[],n=0,i=t.length;n<i;n++){var u=t[n],y=u.type,I=!1,W="",ce="",ie=u.selectorText||u.keyText||"",Re=Hl.indexOf(y)>=0;if(Re)I=!0,W=_s[y],ce=ec(u);else if(nu.indexOf("".concat(y))>=0||!y&&fc(u)){var qe=wc(u),ct=_s[y]||fc(u);ce=ec(u);for(var qt=0,_r=qe.length;qt<_r;qt++){var zr=qe[qt];ce&&(zr.mediaText=ce),zr.atRuleType=ct}s=s.concat(qe)}if(ie||Re){for(var br=Zu(u),co=bc(ie),Bo=co.add,Oi=co.result,Qi=void 0,Ca=0,ys=Oi.length;Ca<ys;Ca++){var ss=Fl(Oi[Ca],br,{atRule:_s[y]});s.push(ss),Qi=ss}if(Bo.length){var il=Bo.join(", ");Qi?Qi.selectorsAdd=il:(ss={selectors:[],selectorsAdd:il,style:br},I&&(ss.singleAtRule=I),W&&(ss.atRuleType=W),ce&&(ss.mediaText=ce),s.push(ss))}}}return s},ep=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wd=function(){return wd=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},wd.apply(this,arguments)},Pu=function(h){function s(t){var n=h.call(this,t,"Parser",{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}})||this;n.events=or;var i=n.config;return n.parserCss=function(h,s){return void 0===s&&(s={}),{parse:function(t,n){var i=this;void 0===n&&(n={});var u,y=[],I=s.parserCss,W=h?.Editor,ce=[],ie=h?.Parser,Re={input:t};ie?.__emitEvent(or.cssBefore,Re);var qe=Re.input;try{ce=I?I(qe,W):function(ct){var qt=document.createElement("style");qt.innerHTML=ct,document.head.appendChild(qt);var _r=qt.sheet;return document.head.removeChild(qt),_r?wc(_r):[]}(qe)}catch(ct){if(u=ct,n.throwOnError)throw ct}return ce.forEach(function(ct){return y=y.concat(i.checkNode(ct))}),ie?.__emitEvent(or.css,{input:qe,output:y,nodes:ce,error:u}),y},checkNode:function(t){var n=t.selectors,i=t.style,u=[t];if((0,m.isString)(n)){var y=[],I=t,W=bc(n),ce=W.result,ie=W.add.join(", "),Re={atRule:I.atRule,mediaText:I.params};ce.length?ce.forEach(function(qe){y.push(Fl(qe,i,Re))}):y.push(Fl([],i,Re)),ie&&(y[y.length-1].selectorsAdd=ie),u=y}return u}}}(t,i),n.parserHtml=Lt(t,i),n}return ep(s,h),s.prototype.parseHtml=function(t,n){void 0===n&&(n={});var u=this.parserHtml;return u.compTypes=this.em.Components.getTypes()||[],u.parse(t,this.parserCss,n)},s.prototype.parseCss=function(t){return this.parserCss.parse(t)},s.prototype.__emitEvent=function(t,n){var i=this.em,u=this.events;i.trigger(t,n),i.trigger(u.all,wd({event:t},n))},s.prototype.destroy=function(){},s}(we);const iu=Pu;var Up=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},of=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}};const uh=function(){function h(){}return h.prototype.store=function(s){return Up(this,arguments,void 0,function(t,n){return void 0===n&&(n={}),of(this,function(i){return this.hasLocal(n,!0)&&localStorage.setItem(n.key,JSON.stringify(t)),[2,t]})})},h.prototype.load=function(){return Up(this,arguments,void 0,function(s){var t;return void 0===s&&(s={}),of(this,function(n){return t={},this.hasLocal(s,!0)&&(t=JSON.parse(localStorage.getItem(s.key)||"{}")),[2,t]})})},h.prototype.hasLocal=function(s,t){if(void 0===s&&(s={}),s.checkLocal&&(!(0,X.hasWin)()||!localStorage)){if(t)throw new Error("localStorage not available");return!1}return!0},h}();function au(h){return(au="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(h)}function kv(h,s){this.name="AggregateError",this.errors=h,this.message=s||""}kv.prototype=Error.prototype;var wb=setTimeout;function N_(h){return!(!h||void 0===h.length)}function xb(){}function Gc(h){if(!(this instanceof Gc))throw new TypeError("Promises must be constructed via new");if("function"!=typeof h)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],B_(h,this)}function $g(h,s){for(;3===h._state;)h=h._value;0!==h._state?(h._handled=!0,Gc._immediateFn(function(){var t=1===h._state?s.onFulfilled:s.onRejected;if(null!==t){var n;try{n=t(h._value)}catch(i){return void lm(s.promise,i)}eg(s.promise,n)}else(1===h._state?eg:lm)(s.promise,h._value)})):h._deferreds.push(s)}function eg(h,s){try{if(s===h)throw new TypeError("A promise cannot be resolved with itself.");if(s&&("object"===au(s)||"function"==typeof s)){var t=s.then;if(s instanceof Gc)return h._state=3,h._value=s,void U_(h);if("function"==typeof t)return void B_((n=t,i=s,function(){n.apply(i,arguments)}),h)}h._state=1,h._value=s,U_(h)}catch(u){lm(h,u)}var n,i}function lm(h,s){h._state=2,h._value=s,U_(h)}function U_(h){2===h._state&&0===h._deferreds.length&&Gc._immediateFn(function(){h._handled||Gc._unhandledRejectionFn(h._value)});for(var s=0,t=h._deferreds.length;s<t;s++)$g(h,h._deferreds[s]);h._deferreds=null}function Zy(h,s,t){this.onFulfilled="function"==typeof h?h:null,this.onRejected="function"==typeof s?s:null,this.promise=t}function B_(h,s){var t=!1;try{h(function(n){t||(t=!0,eg(s,n))},function(n){t||(t=!0,lm(s,n))})}catch(n){if(t)return;t=!0,lm(s,n)}}Gc.prototype.catch=function(h){return this.then(null,h)},Gc.prototype.then=function(h,s){var t=new this.constructor(xb);return $g(this,new Zy(h,s,t)),t},Gc.prototype.finally=function(h){var s=this.constructor;return this.then(function(t){return s.resolve(h()).then(function(){return t})},function(t){return s.resolve(h()).then(function(){return s.reject(t)})})},Gc.all=function(h){return new Gc(function(s,t){if(!N_(h))return t(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(h);if(0===n.length)return s([]);var i=n.length;function u(I,W){try{if(W&&("object"===au(W)||"function"==typeof W)){var ce=W.then;if("function"==typeof ce)return void ce.call(W,function(ie){u(I,ie)},t)}n[I]=W,0==--i&&s(n)}catch(ie){t(ie)}}for(var y=0;y<n.length;y++)u(y,n[y])})},Gc.any=function(h){var s=this;return new s(function(t,n){if(!h||void 0===h.length)return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(h);if(0===i.length)return n();for(var u=[],y=0;y<i.length;y++)try{s.resolve(i[y]).then(t).catch(function(I){u.push(I),u.length===i.length&&n(new kv(u,"All promises were rejected"))})}catch(I){n(I)}})},Gc.allSettled=function(h){return new this(function(s,t){if(!h||void 0===h.length)return t(new TypeError(au(h)+" "+h+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(h);if(0===n.length)return s([]);var i=n.length;function u(I,W){if(W&&("object"===au(W)||"function"==typeof W)){var ce=W.then;if("function"==typeof ce)return void ce.call(W,function(ie){u(I,ie)},function(ie){n[I]={status:"rejected",reason:ie},0==--i&&s(n)})}n[I]={status:"fulfilled",value:W},0==--i&&s(n)}for(var y=0;y<n.length;y++)u(y,n[y])})},Gc.resolve=function(h){return h&&"object"===au(h)&&h.constructor===Gc?h:new Gc(function(s){s(h)})},Gc.reject=function(h){return new Gc(function(s,t){t(h)})},Gc.race=function(h){return new Gc(function(s,t){if(!N_(h))return t(new TypeError("Promise.race accepts an array"));for(var n=0,i=h.length;n<i;n++)Gc.resolve(h[n]).then(s,t)})},Gc._immediateFn="function"==typeof setImmediate&&function(h){setImmediate(h)}||function(h){wb(h,0)},Gc._unhandledRejectionFn=function(h){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",h)};const Lv=Gc;(0,X.hasWin)()&&(window.Promise=window.Promise||Lv);const W_="function"==typeof fetch?fetch.bind():function(h,s){return new Lv(function(t,n){var i=new XMLHttpRequest;for(var u in i.open(s.method||"get",h),i.withCredentials="include"==s.credentials,s.headers||{})i.setRequestHeader(u,s.headers[u]);i.onload=function(y){return t({status:i.status,statusText:i.statusText,text:function(){return Lv.resolve(i.responseText)}})},i.onerror=n,i.upload&&s.onProgress&&(i.upload.onprogress=s.onProgress),s.body?i.send(s.body):i.send()})};var Jg=function(){return Jg=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Jg.apply(this,arguments)},Uh=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},jf=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}},af=function(){function h(){}return h.prototype.store=function(s){return Uh(this,arguments,void 0,function(t,n){return void 0===n&&(n={}),jf(this,function(i){switch(i.label){case 0:return[4,this.request(n.urlStore,this.__props(n,t),n)];case 1:return[2,i.sent()]}})})},h.prototype.load=function(){return Uh(this,arguments,void 0,function(s){return void 0===s&&(s={}),jf(this,function(t){switch(t.label){case 0:return[4,this.request(s.urlLoad,this.__props(s),s)];case 1:return[2,t.sent()]}})})},h.prototype.request=function(s,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),W_(s,t).then(function(i){var u=i.text();return 1==(i.status/200|0)?u:u.then(Promise.reject)}).then(function(i){var u=i&&(0,m.isString)(i);return n.contentTypeJson&&u?JSON.parse(i):i})},h.prototype.__props=function(s,t){void 0===s&&(s={});var n,i=s.contentTypeJson,u=s.headers||{},y=s.fetchOptions||{},I="X-Requested-With",W="Content-Type";if((0,m.isUndefined)(u[I])&&(u[I]="XMLHttpRequest"),(0,m.isUndefined)(u[W])&&i&&(u[W]="application/json; charset=utf-8"),t)if(i)n=JSON.stringify(t);else for(var ce in n=new FormData,t)n.append(ce,t[ce]);var ie={method:n?"POST":"GET",credentials:s.credentials,headers:u,body:n};return Jg(Jg({},ie),(0,m.isFunction)(y)?y(ie):y)},h}();const Z_=af;var Yg;!function(h){h.start="storage:start",h.startStore="storage:start:store",h.startLoad="storage:start:load",h.load="storage:load",h.store="storage:store",h.after="storage:after",h.afterStore="storage:after:store",h.afterLoad="storage:after:load",h.end="storage:end",h.endStore="storage:end:store",h.endLoad="storage:end:load",h.error="storage:error",h.errorStore="storage:error:store",h.errorLoad="storage:error:load"}(Yg||(Yg={}));const gu=Yg;var sf=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bh=function(){return Bh=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Bh.apply(this,arguments)},K_=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},Iv=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}},Cg="local",Ky=function(h){function s(t){var n=h.call(this,t,"StorageManager",{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(h){return h},onLoad:function(h){return h},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(h){return h},onLoad:function(h){return h}}}})||this;n.storages={},n.events=gu;var i=n.config;return i._disable&&(i.type=void 0),n.storages={},n.add(Cg,new uh),n.add("remote",new Z_),n.setCurrent(i.type),n}return sf(s,h),s.prototype.isAutosave=function(){return!!this.config.autosave},s.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},s.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},s.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},s.prototype.add=function(t,n){return this.storages[t]=n,this},s.prototype.get=function(t){return this.storages[t]},s.prototype.getStorages=function(){return this.storages},s.prototype.getCurrent=function(){return this.config.currentStorage},s.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},s.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},s.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},s.prototype.store=function(t){return K_(this,arguments,void 0,function(n,i){var u,y,I,W,ce;return void 0===i&&(i={}),Iv(this,function(ie){switch(ie.label){case 0:u=this.getCurrentStorage(),y=Bh(Bh({},this.getCurrentOptions()),i),I=this.getRecoveryStorage(),W=this.getCurrentOptions(Cg),ie.label=1;case 1:return ie.trys.push([1,5,,9]),[4,this.__exec(u,y,n)];case 2:return ie.sent(),I?[4,this.__exec(I,W,{})]:[3,4];case 3:ie.sent(),ie.label=4;case 4:return[3,9];case 5:return ce=ie.sent(),I?[4,this.__exec(I,W,n)]:[3,7];case 6:return ie.sent(),[3,8];case 7:throw ce;case 8:return[3,9];case 9:return[2,n]}})})},s.prototype.load=function(){return K_(this,arguments,void 0,function(t){var n,i,u,y,I;return void 0===t&&(t={}),Iv(this,function(W){switch(W.label){case 0:return n=this.getCurrentStorage(),i=Bh(Bh({},this.getCurrentOptions()),t),(u=this.getRecoveryStorage())?[4,this.__exec(u,this.getCurrentOptions(Cg))]:[3,5];case 1:if(I=W.sent(),(0,m.isEmpty)(I))return[3,5];W.label=2;case 2:return W.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return W.sent(),y=I,[3,5];case 4:return W.sent(),[3,5];case 5:return y?[3,7]:[4,this.__exec(n,i)];case 6:y=W.sent(),W.label=7;case 7:return[2,y||{}]}})})},s.prototype.__askRecovery=function(){var t=this.em,n=this.getRecovery();return new Promise(function(i,u){(0,m.isFunction)(n)?n(i,u,t?.getEditor()):confirm(t?.t("storageManager.recover"))?i(null):u()})},s.prototype.getRecovery=function(){return this.config.recovery},s.prototype.getRecoveryStorage=function(){return this.getRecovery()&&"remote"===this.getCurrent()&&this.get(Cg)},s.prototype.__exec=function(t,n,i){return K_(this,void 0,void 0,function(){var u,y,I,W,ce,ie,Re,qe,ct,qt,_r,zr,br,co;return Iv(this,function(Bo){switch(Bo.label){case 0:if(u=i?"store":"load",y=this.getConfig(),I=y.onStore,W=y.onLoad,!t)return[2,i||{}];this.onStart(u,i),Bo.label=1;case 1:return Bo.trys.push([1,14,,15]),ie=null===(co=this.em)||void 0===co?void 0:co.getEditor(),Re=void 0,i?(ct=I)?[4,I(i,ie)]:[3,3]:[3,7];case 2:ct=Bo.sent(),Bo.label=3;case 3:return qe=ct||i,(qt=n.onStore)?[4,n.onStore(qe,ie)]:[3,5];case 4:qt=Bo.sent(),Bo.label=5;case 5:return[4,t.store(qe=qt||qe,n)];case 6:return Re=Bo.sent(),ce=i,[3,13];case 7:return[4,t.load(n)];case 8:return Re=Bo.sent(),ce=this.__clearKeys(Re),(_r=n.onLoad)?[4,n.onLoad(ce,ie)]:[3,10];case 9:_r=Bo.sent(),Bo.label=10;case 10:return ce=_r||ce,(zr=W)?[4,W(ce,ie)]:[3,12];case 11:zr=Bo.sent(),Bo.label=12;case 12:ce=zr||ce,Bo.label=13;case 13:return this.onAfter(u,ce,Re),this.onEnd(u,ce,Re),[3,15];case 14:throw br=Bo.sent(),this.onError(u,br),br;case 15:return[2,ce]}})})},s.prototype.__clearKeys=function(t){void 0===t&&(t={});var n=this.getConfig(),i=new RegExp("^".concat(n.id)),u={};for(var y in t)u[y.replace(i,"")]=t[y];return u},s.prototype.getCurrentOptions=function(t){var n=this.getConfig(),i=t||this.getCurrent();return n.options[i]||{}},s.prototype.onStart=function(t,n){var i=this.em;if(i){var u="load"===t?gu.startLoad:gu.startStore;i.trigger(gu.start,t,n),i.trigger(u,n)}},s.prototype.onAfter=function(t,n,i){var u=this.em;if(u){var y="load"===t?gu.afterLoad:gu.afterStore;u.trigger(gu.after),u.trigger(y,n,i),u.trigger("load"===t?gu.load:gu.store,n,i)}},s.prototype.onEnd=function(t,n,i){var u=this.em;if(u){var y="load"===t?gu.endLoad:gu.endStore;u.trigger(gu.end,t,n,i),u.trigger(y,n,i)}},s.prototype.onError=function(t,n){var i=this.em;if(i){var u="load"===t?gu.errorLoad:gu.errorStore;i.trigger(gu.error,n,t),i.trigger(u,n),this.onEnd(t,n)}},s.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},s.prototype.destroy=function(){this.storages={}},s}(we);const Vy=Ky;var Fv=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cm=function(){return cm=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},cm.apply(this,arguments)},jv=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;n.events={},n.appendInput=!0;var i=t.config,u=void 0===i?{}:i,I=n.model,W=n.eventCapture,ce=I.target,ie=I.attributes.type;return n.config=u,n.em=u.em,n.pfx=u.stylePrefix||"",n.ppfx=u.pStylePrefix||"",n.target=ce,n.className=n.pfx+"trait",n.clsField="".concat(n.ppfx,"field ").concat(n.ppfx,"field-").concat(ie),[["change:value",n.onValueChange],["remove",n.removeView]].forEach(function(Re){var qe=Re[0],ct=Re[1];I.off(qe,ct),n.listenTo(I,qe,ct)}),I.view=n,n.listenTo(I,"change:label",n.render),n.listenTo(I,"change:placeholder",n.rerender),n.events={},W.forEach(function(Re){return n.events[Re]="onChange"}),n.delegateEvents(),n.init(),n}return Fv(s,h),s.prototype.attributes=function(){return this.model.get("attributes")||{}},s.prototype.templateLabel=function(t){var n=this.ppfx,i=this.getLabel();return'<div class="'.concat(n,'label" title="').concat(i,'">').concat(i,"</div>")},s.prototype.templateInput=function(t){return'<div class="'.concat(this.clsField,'" data-input></div>')},s.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},s.prototype.removeView=function(){this.remove(),this.removed()},s.prototype.init=function(){},s.prototype.removed=function(){},s.prototype.onRender=function(t){},s.prototype.onUpdate=function(t){},s.prototype.onEvent=function(t){},s.prototype.onChange=function(t){var n=this.getInputElem();n&&!(0,m.isUndefined)(n.value)&&this.model.set("value",n.value),this.onEvent(cm(cm({},this.getClbOpts()),{event:t}))},s.prototype.getValueForTarget=function(){return this.model.get("value")},s.prototype.setInputValue=function(t){var n=this.getInputElem();n&&(n.value=t)},s.prototype.onValueChange=function(t,n,i){void 0===i&&(i={});var u=this.model,y=this.getValueForTarget();i.fromTarget?(this.setInputValue(y),this.postUpdate()):u.setValue(y,i)},s.prototype.renderLabel=function(){var t=this.$el,n=this.target,i=this.getLabel(),u=this.templateLabel(n);this.createLabel&&(u=this.createLabel({label:i,component:n,trait:this})||""),t.find("[data-label]").append(u)},s.prototype.getLabel=function(){var n=this.model.attributes,i=n.label,u=n.name;return this.em.t("traitManager.traits.labels.".concat(u))||(0,X.capitalize)(i||u).replace(/-/g," ")},s.prototype.getComponent=function(){return this.target},s.prototype.getInputEl=function(){if(!this.$input){var t=this.em,n=this.model,i=n,u=n.attributes.name,y=i.get("placeholder")||i.get("default")||"",I=i.get("type")||"text",W=i.get("min"),ce=i.get("max"),ie=this.getModelValue(),Re=(0,D.default)('<input type="'.concat(I,'">')),qe=t.t("traitManager.traits.attributes.".concat(u))||{};Re.attr(cm({placeholder:y},qe)),(0,m.isUndefined)(ie)||(i.set({value:ie},{silent:!0}),Re.prop("value",ie)),W&&Re.prop("min",W),ce&&Re.prop("max",ce),this.$input=Re}return this.$input.get(0)},s.prototype.getInputElem=function(){var n=this.$input;return this.input||n&&n.get&&n.get(0)||this.getElInput()},s.prototype.getModelValue=function(){return this.model.getValue()},s.prototype.getElInput=function(){return this.elInput},s.prototype.renderField=function(){var t=this,i=t.appendInput,u=t.model,y=t.$el.find("[data-input]"),I=y[y.length-1],W=u.el;W||(W=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,m.isString)(W)?(I.innerHTML=W,this.elInput=I.firstChild):(i?I.appendChild(W):I.insertBefore(W,I.firstChild),this.elInput=W),u.el=this.elInput},s.prototype.hasLabel=function(){return!this.noLabel&&!1!==this.model.attributes.label},s.prototype.rerender=function(){delete this.model.el,this.render()},s.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},s.prototype.render=function(){var t=this,n=t.$el,i=t.pfx,u=t.ppfx,y=t.model.attributes,I=y.type,W=y.id,ce=this.hasLabel&&this.hasLabel(),ie="".concat(i,"trait");delete this.$input;var Re='<div class="'.concat(ie," ").concat(ie,"--").concat(I,'">\n      ').concat(ce?'<div class="'.concat(u,'label-wrp" data-label></div>'):"",'\n      <div class="').concat(u,"field-wrp ").concat(u,"field-wrp--").concat(I,'" data-input>\n        ').concat(this.templateInput?(0,m.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"","\n      </div>\n    </div>");return n.empty().append(Re),ce&&this.renderLabel(),this.renderField(),this.el.className="".concat(ie,"__wrp ").concat(ie,"__wrp-").concat(W),this.postUpdate(),this.onRender(this.getClbOpts()),this},s}(R.Ss);const Wh=jv;jv.prototype.eventCapture=["change"];var dh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vp=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return dh(s,h),s.prototype.templateInput=function(){return""},s.prototype.onChange=function(){this.handleClick()},s.prototype.handleClick=function(){this.model.runCommand()},s.prototype.renderLabel=function(){this.model.get("label")&&Wh.prototype.renderLabel.apply(this)},s.prototype.getInputEl=function(){var n=this.ppfx,i=this.model.props(),I=i.full,W=i.labelButton||i.text,ce="".concat(n,"btn");return'<button type="button" class="'.concat(ce,"-prim").concat(I?" ".concat(ce,"--full"):"",'">').concat(W,"</button>")},s}(Wh);const Eg=vp;vp.prototype.eventCapture=["click button"];var zy=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const z_=function(h){function s(){var t=null!==h&&h.apply(this,arguments)||this;return t.appendInput=!1,t}return zy(s,h),s.prototype.templateInput=function(){var t=this.ppfx;return'<label class="'.concat(this.clsField,'" data-input>\n    <i class="').concat(t,'chk-icon"></i>\n  </label>')},s.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},s.prototype.setInputValue=function(t){var n=this.getInputElem();n&&(n.checked=!!t)},s.prototype.getInputEl=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=!this.$input,u=Wh.prototype.getInputEl.apply(this,t);if(i){var y=void 0,I=void 0,W=this.model,ce=this.target,ie=W.attributes.valueFalse,Re=W.getName();W.changeProp?I=y=ce.get(Re):y=!(!(I=ce.get("attributes")[Re])&&""!==I),(0,m.isUndefined)(ie)||I!==ie||(y=!1),u.checked=y}return u},s}(Wh);var Cb=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hy=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this,i=t.ppfx||"";return n.opts=t,n.ppfx=i,n.em=t.target||{},!t.onChange&&n.listenTo(n.model,"change:value",n.handleModelChange),n}return Cb(s,h),s.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},s.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},s.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},s.prototype.elementUpdated=function(){this.model.trigger("el:change")},s.prototype.setValue=function(t,n){var u=t||this.model.get("defaults"),y=this.getInputEl();y&&(y.value=u)},s.prototype.handleModelChange=function(t,n,i){this.setValue(n,i)},s.prototype.handleChange=function(t){t.stopPropagation();var n=this.getInputEl().value;this.__onInputChange(n),this.elementUpdated()},s.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},s.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,n=this.opts.type||"text",i=t.get("placeholder")||t.get("defaults")||t.get("default")||"";this.inputEl=(0,D.default)('<input type="'.concat(n,'" placeholder="').concat(i,'">'))}return this.inputEl.get(0)},s.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},s}(R.Ss);const Qg=Hy;Hy.prototype.events={change:"handleChange"};var Gy=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),um=function(){return um=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},um.apply(this,arguments)};D.default&&function(h,s){if((0,X.hasWin)()){var t={beforeShow:_l,move:_l,change:_l,show:_l,hide:_l,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],i=!!/msie/i.exec(window.navigator.userAgent),u=function(){function cn(Wo,bi){return!!~(""+Wo).indexOf(bi)}var Lo=document.createElement("div").style;return Lo.cssText="background-color:rgba(0,0,0,.5)",cn(Lo.backgroundColor,"rgba")||cn(Lo.backgroundColor,"hsla")}(),y=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),I=function(){var cn="";if(i)for(var Lo=1;Lo<=6;Lo++)cn+="<div class='sp-"+Lo+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",cn,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),W="spectrum.id";h.fn.spectrum=function(cn,Lo){if("string"==typeof cn){var Wo=this,bi=Array.prototype.slice.call(arguments,1);return this.each(function(){var Wa=n[h(this).data(W)];if(Wa){var ds=Wa[cn];if(!ds)throw new Error("Spectrum: no such method: '"+cn+"'");"get"==cn?Wo=Wa.get():"container"==cn?Wo=Wa.container:"option"==cn?Wo=Wa.option.apply(Wa,bi):"destroy"==cn?(Wa.destroy(),h(this).removeData(W)):ds.apply(Wa,bi)}}),Wo}return this.spectrum("destroy").each(function(){var Wa=function il(cn,Lo){var Wo,ds,be,Se,Wi=(be=cn,(Se=h.extend({},t,Lo)).callbacks={move:Nc(Se.move,be),change:Nc(Se.change,be),show:Nc(Se.show,be),hide:Nc(Se.hide,be),beforeShow:Nc(Se.beforeShow,be)},Se),yl=Wi.flat,mc=Wi.showSelectionPalette,yp=Wi.localStorageKey,Hp=Wi.theme,Zl=Wi.callbacks,Ya=(Wo=C,10,function(){var ae=this,be=arguments;ds||(ds=setTimeout(function(){ds=null,Wo.apply(ae,be)},10))}),Kl=!1,lc=!1,op=!0,td=0,jd=0,ip=0,Vf=0,bh=0,Bg=0,zf=0,yy=0,c_=0,_v=0,Km=1,by=[],wy=[],H0={},Vm=Wi.selectionPalette.slice(0),_E=Wi.maxSelectionSize,xy="sp-dragging",Wg=null,Cy=cn.ownerDocument,xd=h(cn),D1=!1,Cl=h(I,Cy).addClass(Hp),yE=Cl.find(".sp-picker-container"),Nd=Cl.find(".sp-color"),u_=Cl.find(".sp-dragger"),Ey=Cl.find(".sp-hue"),G0=Cl.find(".sp-slider"),Oy=Cl.find(".sp-alpha-inner"),y2=Cl.find(".sp-alpha"),q0=Cl.find(".sp-alpha-handle"),gm=Cl.find(".sp-input"),b2=Cl.find(".sp-palette"),w2=Cl.find(".sp-initial"),x2=Cl.find(".sp-cancel"),T1=Cl.find(".sp-clear"),C2=Cl.find(".sp-choose"),S1=Cl.find(".sp-palette-toggle"),$0=xd.is("input"),bE=$0&&"color"===xd.attr("type")&&Fd(),yv=$0&&!yl,bv=yv?h(y).addClass(Hp).addClass(Wi.className).addClass(Wi.replacerClassName):h([]),d_=yv?bv:xd,p_=bv.find(".sp-preview-inner"),Dy=Wi.color||$0&&xd.val(),f_=!1,h_=Wi.preferredFormat,E2=!Wi.showButtons||Wi.clickoutFiresChange,ug=!Dy,wv=Wi.allowEmpty&&!bE;function P1(){if(Wi.showPaletteOnly&&(Wi.showPalette=!0),S1.text(Wi.showPaletteOnly?Wi.togglePaletteMoreText:Wi.togglePaletteLessText),Wi.palette){by=Wi.palette.slice(0),wy=h.isArray(by[0])?by:[by],H0={};for(var ae=0;ae<wy.length;ae++)for(var be=0;be<wy[ae].length;be++){var Se=br(wy[ae][be]).toRgbString();H0[Se]=!0}}Cl.toggleClass("sp-flat",yl),Cl.toggleClass("sp-input-disabled",!Wi.showInput),Cl.toggleClass("sp-alpha-enabled",Wi.showAlpha),Cl.toggleClass("sp-clear-enabled",wv),Cl.toggleClass("sp-buttons-disabled",!Wi.showButtons),Cl.toggleClass("sp-palette-buttons-disabled",!Wi.togglePaletteOnly),Cl.toggleClass("sp-palette-disabled",!Wi.showPalette),Cl.toggleClass("sp-palette-only",Wi.showPaletteOnly),Cl.toggleClass("sp-initial-disabled",!Wi.showInitial),Cl.addClass(Wi.className).addClass(Wi.containerClassName),C()}function O2(){if(yp&&window.localStorage){try{var ae=window.localStorage[yp].split(",#");ae.length>1&&(delete window.localStorage[yp],h.each(ae,function(be,Se){m_(Se)}))}catch{}try{Vm=window.localStorage[yp].split(";")}catch{}}}function m_(ae){if(mc){var be=br(ae).toRgbString();if(!H0[be]&&-1===h.inArray(be,Vm))for(Vm.push(be);Vm.length>_E;)Vm.shift();if(yp&&window.localStorage)try{window.localStorage[yp]=Vm.join(";")}catch{}}}function J0(){var ae=o(),be=h.map(wy,function(Se,We){return ss(Se,ae,"sp-palette-row sp-palette-row-"+We,Wi)});O2(),Vm&&be.push(ss(function(){var Se=[];if(Wi.showPalette)for(var We=0;We<Vm.length;We++){var lt=br(Vm[We]).toRgbString();H0[lt]||Se.push(Vm[We])}return Se.reverse().slice(0,Wi.maxSelectionSize)}(),ae,"sp-palette-row sp-palette-row-selection",Wi)),b2.html(be.join(""))}function M1(){if(Wi.showInitial){var ae=f_,be=o();w2.html(ss([ae,be],be,"sp-palette-row-initial",Wi))}}function Y0(){(jd<=0||td<=0||Vf<=0)&&C(),lc=!0,Cl.addClass(xy),Wg=null,xd.trigger("dragstart.spectrum",[o()])}function Q0(){lc=!1,Cl.removeClass(xy),xd.trigger("dragstop.spectrum",[o()])}function A1(){var ae=gm.val();if(null!==ae&&""!==ae||!wv){var be=br(ae);be.isValid()?(r(be),w(!0)):gm.addClass("sp-validation-error")}else r(null),w(!0)}function D2(){Kl?a():T2()}function T2(){var ae=h.Event("beforeShow.spectrum");if(Kl)C();else if(xd.trigger("beforeShow.spectrum",[o()]),!1!==Zl.beforeShow(o())&&!ae.isDefaultPrevented()){(function(){for(var Se=0;Se<n.length;Se++)n[Se]&&n[Se].hide()})(),Kl=!0;var be=h(Cy);be.bind("keydown.spectrum",wE),be.bind("click.spectrum",d),h(window).bind("resize.spectrum",Ya),bv.addClass("sp-active"),Cl.removeClass("sp-hidden"),C(),g(),f_=o(),M1(),Zl.show(f_),xd.trigger("show.spectrum",[f_])}}function wE(ae){27===ae.keyCode&&a()}function d(ae){2!=ae.button&&(lc||(E2?w(!0):e(),a()))}function a(){Kl&&!yl&&(Kl=!1,h(Cy).unbind("keydown.spectrum",wE),h(Cy).unbind("click.spectrum",d),h(window).unbind("resize.spectrum",Ya),bv.removeClass("sp-active"),Cl.addClass("sp-hidden"),Zl.hide(o()),xd.trigger("hide.spectrum",[o()]))}function e(){r(f_,!0)}function r(ae,be){var Se,We;br.equals(ae,o())?g():(!ae&&wv?ug=!0:(ug=!1,op=!ae,We=(Se=br(ae)).toHsv(),yy=We.h%360/360,c_=We.s,_v=We.v,Km=We.a),g(),Se&&Se.isValid()&&!be&&(h_=Wi.preferredFormat||Se.getFormat()))}function o(ae){return ae=ae||{},wv&&ug?null:br.fromRatio({h:yy,s:c_,v:_v,a:Math.round(100*Km)/100},{format:ae.format||h_})}function c(){g(),Zl.move(o()),xd.trigger("move.spectrum",[o()])}function g(){gm.removeClass("sp-validation-error"),b();var ae=br.fromRatio({h:yy,s:1,v:1});Nd.css("background-color",ae.toHexString());var be=h_;Km<1&&(0!==Km||"name"!==be)&&("hex"!==be&&"hex3"!==be&&"hex6"!==be&&"name"!==be||(be="rgb"));var Se=o({format:be}),We="";if(p_.removeClass("sp-clear-display"),p_.css("background-color","transparent"),!Se&&wv)p_.addClass("sp-clear-display");else{var lt=Se.toHexString(),Ot=Se.toRgbString();if(u||1===Se.alpha?p_.css("background-color",Ot):(p_.css("background-color","transparent"),p_.css("filter",Se.toFilter())),Wi.showAlpha){var ur=Se.toRgb();ur.a=0;var Gt=br(ur).toRgbString(),ar="linear-gradient(left, "+Gt+", "+lt+")";i?Oy.css("filter",br(Gt).toFilter({gradientType:1},lt)):(Oy.css("background","-webkit-"+ar),Oy.css("background","-moz-"+ar),Oy.css("background","-ms-"+ar),Oy.css("background","linear-gradient(to right, "+Gt+", "+lt+")"))}We=Se.toString(be)}Wi.showInput&&gm.val(We),Wi.showPalette&&J0(),M1()}function b(){var ae=c_,be=_v;if(wv&&ug)q0.hide(),G0.hide(),u_.hide();else{q0.show(),G0.show(),u_.show();var Se=ae*td,We=jd-be*jd;Se=Math.max(-ip,Math.min(td-ip,Se-ip)),We=Math.max(-ip,Math.min(jd-ip,We-ip)),u_.css({top:We+"px",left:Se+"px"}),q0.css({left:Km*bh-Bg/2+"px"}),G0.css({top:yy*Vf-zf+"px"})}}function w(ae){var be=o(),Se="",We=!!op||!br.equals(be,f_);be&&(Se=be.toString(h_),!Kl&&m_(be)),$0&&xd.val(Se),ae&&We&&(Zl.change(be),xd.trigger("change",[be]))}function C(){Kl&&(td=Nd.width(),jd=Nd.height(),ip=u_.height(),Ey.width(),Vf=Ey.height(),zf=G0.height(),bh=y2.width(),Bg=q0.width(),yl||(Cl.css("position","absolute"),Cl.offset(Wi.offset?Wi.offset:function(ae,be){for(var Se=be[0],We=ae[0],lt=We.parentElement,Ot=Se.getBoundingClientRect(),ur=We.offsetWidth,Gt=We.offsetHeight,ar={top:0,left:0,width:Se.offsetWidth,height:Se.offsetHeight};Se&&(ar.top+=Se.offsetTop-Se.scrollTop,ar.left+=Se.offsetLeft-Se.scrollLeft,Se!==lt&&lt.contains(Se.offsetParent));)Se=Se.offsetParent;return Ot.right+ur>window.innerWidth-window.scrollX&&Ot.right-ur>0&&(ar.left-=ur-ar.width),Ot.bottom+Gt<window.innerHeight-window.scrollY?ar.top+=ar.height:ar.top-=Gt,ar}(Cl,d_))),b(),Wi.showPalette&&J0(),xd.trigger("reflow.spectrum"))}function B(){a(),D1=!0,xd.attr("disabled",!0),d_.addClass("sp-disabled")}!function(){if(i&&Cl.find("*:not(input)").attr("unselectable","on"),P1(),yv&&xd.after(bv).hide(),wv||T1.hide(),yl)xd.after(Cl).hide();else{var ae="parent"===Wi.appendTo?xd.parent():h(Wi.appendTo);1!==ae.length&&(ae=h("body")),ae.append(Cl)}function be(We){return We.data&&We.data.ignore?(r(h(We.target).closest(".sp-thumb-el").data("color")),c()):(r(h(We.target).closest(".sp-thumb-el").data("color")),c(),Wi.hideAfterPaletteSelect&&(w(!0),a())),!1}O2(),d_.bind("click.spectrum touchstart.spectrum",function(We){D1||D2(),We.stopPropagation(),h(We.target).is("input")||We.preventDefault()}),(xd.is(":disabled")||!0===Wi.disabled)&&B(),Cl.click(wu),gm.change(A1),gm.bind("paste",function(){setTimeout(A1,1)}),gm.keydown(function(We){13==We.keyCode&&A1()}),x2.text(Wi.cancelText),x2.bind("click.spectrum",function(We){We.stopPropagation(),We.preventDefault(),e(),a()}),T1.attr("title",Wi.clearText),T1.bind("click.spectrum",function(We){We.stopPropagation(),We.preventDefault(),ug=!0,c(),yl&&w(!0)}),C2.text(Wi.chooseText),C2.bind("click.spectrum",function(We){We.stopPropagation(),We.preventDefault(),i&&gm.is(":focus")&&gm.trigger("change"),gm.hasClass("sp-validation-error")||(w(!0),a())}),S1.text(Wi.showPaletteOnly?Wi.togglePaletteMoreText:Wi.togglePaletteLessText),S1.bind("click.spectrum",function(We){We.stopPropagation(),We.preventDefault(),Wi.showPaletteOnly=!Wi.showPaletteOnly,Wi.showPaletteOnly||yl||Cl.css("left","-="+(yE.outerWidth(!0)+5)),P1()}),Ku(y2,function(We,lt,Ot){Km=We/bh,ug=!1,Ot.shiftKey&&(Km=Math.round(10*Km)/10),c()},Y0,Q0),Ku(Ey,function(We,lt){yy=parseFloat(lt/Vf),ug=!1,Wi.showAlpha||(Km=1),c()},Y0,Q0),Ku(Nd,function(We,lt,Ot){if(Ot.shiftKey){if(!Wg){var Gt=jd-_v*jd,ar=Math.abs(We-c_*td)>Math.abs(lt-Gt);Wg=ar?"x":"y"}}else Wg=null;var Fn=!Wg||"y"===Wg;(!Wg||"x"===Wg)&&(c_=parseFloat(We/td)),Fn&&(_v=parseFloat((jd-lt)/jd)),ug=!1,Wi.showAlpha||(Km=1),c()},Y0,Q0),Dy?(r(Dy),g(),h_=Wi.preferredFormat||br(Dy).getFormat(),m_(Dy)):g(),yl&&T2();var Se=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";b2.delegate(".sp-thumb-el",Se,be),w2.delegate(".sp-thumb-el:nth-child(1)",Se,{ignore:!0},be)}();var ne={show:T2,hide:a,toggle:D2,reflow:C,option:function(ae,be){return ae===s?h.extend({},Wi):be===s?Wi[ae]:(Wi[ae]=be,"preferredFormat"===ae&&(h_=Wi.preferredFormat),void P1())},enable:function(){D1=!1,xd.attr("disabled",!1),d_.removeClass("sp-disabled")},disable:B,offset:function(ae){Wi.offset=ae,C()},set:function(ae){r(ae),w()},get:o,destroy:function(){xd.show(),d_.unbind("click.spectrum touchstart.spectrum"),Cl.remove(),bv.remove(),n[ne.id]=null},container:Cl};return ne.id=n.push(ne)-1,ne}(this,h.extend({},cn,h(this).data()));h(this).data(W,Wa.id)})},h.fn.spectrum.load=!0,h.fn.spectrum.loadOpts={},h.fn.spectrum.draggable=Ku,h.fn.spectrum.defaults=t,h.fn.spectrum.inputTypeColorSupport=function cn(){if(void 0===cn._cachedResult){var Lo=h("<input type='color'/>")[0];cn._cachedResult="color"===Lo.type&&""!==Lo.value}return cn._cachedResult},h.spectrum={},h.spectrum.localization={},h.spectrum.palettes={},h.fn.spectrum.processNativeColorInputs=function(){var cn=h("input[type=color]");cn.length&&!Fd()&&cn.spectrum({preferredFormat:"hex6"})};var ce=/^[\s,#]+/,ie=/\s+$/,Re=0,qe=Math,ct=qe.round,qt=qe.min,_r=qe.max,zr=qe.random,br=function(cn,Lo){if(Lo=Lo||{},(cn=cn||"")instanceof br)return cn;if(!(this instanceof br))return new br(cn,Lo);var bi,yp,Hp,Wa,ds,Wi,yl,Wo=(Wa={r:0,g:0,b:0},ds=1,Wi=!1,yl=!1,"string"==typeof(bi=cn)&&(bi=function(Zl){Zl=Zl.replace(ce,"").replace(ie,"").toLowerCase();var Ya,Kl=!1;if(Qi[Zl])Zl=Qi[Zl],Kl=!0;else if("transparent"==Zl)return{r:0,g:0,b:0,a:0,format:"name"};return(Ya=ys.rgb.exec(Zl))?{r:Ya[1],g:Ya[2],b:Ya[3]}:(Ya=ys.rgba.exec(Zl))?{r:Ya[1],g:Ya[2],b:Ya[3],a:Ya[4]}:(Ya=ys.hsl.exec(Zl))?{h:Ya[1],s:Ya[2],l:Ya[3]}:(Ya=ys.hsla.exec(Zl))?{h:Ya[1],s:Ya[2],l:Ya[3],a:Ya[4]}:(Ya=ys.hsv.exec(Zl))?{h:Ya[1],s:Ya[2],v:Ya[3]}:(Ya=ys.hsva.exec(Zl))?{h:Ya[1],s:Ya[2],v:Ya[3],a:Ya[4]}:(Ya=ys.hex8.exec(Zl))?{a:vv(Ya[1]),r:Zm(Ya[2]),g:Zm(Ya[3]),b:Zm(Ya[4]),format:Kl?"name":"hex8"}:(Ya=ys.hex6.exec(Zl))?{r:Zm(Ya[1]),g:Zm(Ya[2]),b:Zm(Ya[3]),format:Kl?"name":"hex"}:!!(Ya=ys.hex3.exec(Zl))&&{r:Zm(Ya[1]+""+Ya[1]),g:Zm(Ya[2]+""+Ya[2]),b:Zm(Ya[3]+""+Ya[3]),format:Kl?"name":"hex"}}(bi)),"object"==typeof bi&&(bi.hasOwnProperty("r")&&bi.hasOwnProperty("g")&&bi.hasOwnProperty("b")?(yp=bi.g,Hp=bi.b,Wa={r:255*$c(bi.r,255),g:255*$c(yp,255),b:255*$c(Hp,255)},Wi=!0,yl="%"===String(bi.r).substr(-1)?"prgb":"rgb"):bi.hasOwnProperty("h")&&bi.hasOwnProperty("s")&&bi.hasOwnProperty("v")?(bi.s=_y(bi.s),bi.v=_y(bi.v),Wa=function(Zl,Ya,Kl){Zl=6*$c(Zl,360),Ya=$c(Ya,100),Kl=$c(Kl,100);var lc=qe.floor(Zl),op=Zl-lc,td=Kl*(1-Ya),jd=Kl*(1-op*Ya),ip=Kl*(1-(1-op)*Ya),Vf=lc%6;return{r:255*[Kl,jd,td,td,ip,Kl][Vf],g:255*[ip,Kl,Kl,jd,td,td][Vf],b:255*[td,td,ip,Kl,Kl,jd][Vf]}}(bi.h,bi.s,bi.v),Wi=!0,yl="hsv"):bi.hasOwnProperty("h")&&bi.hasOwnProperty("s")&&bi.hasOwnProperty("l")&&(bi.s=_y(bi.s),bi.l=_y(bi.l),Wa=function(Zl,Ya,Kl){var lc,op,td;function jd(bh,Bg,zf){return zf<0&&(zf+=1),zf>1&&(zf-=1),zf<1/6?bh+6*(Bg-bh)*zf:zf<.5?Bg:zf<2/3?bh+(Bg-bh)*(2/3-zf)*6:bh}if(Zl=$c(Zl,360),Ya=$c(Ya,100),Kl=$c(Kl,100),0===Ya)lc=op=td=Kl;else{var ip=Kl<.5?Kl*(1+Ya):Kl+Ya-Kl*Ya,Vf=2*Kl-ip;lc=jd(Vf,ip,Zl+1/3),op=jd(Vf,ip,Zl),td=jd(Vf,ip,Zl-1/3)}return{r:255*lc,g:255*op,b:255*td}}(bi.h,bi.s,bi.l),Wi=!0,yl="hsl"),bi.hasOwnProperty("a")&&(ds=bi.a)),ds=_2(ds),{ok:Wi,format:bi.format||yl,r:qt(255,_r(Wa.r,0)),g:qt(255,_r(Wa.g,0)),b:qt(255,_r(Wa.b,0)),a:ds});this._originalInput=cn,this._r=Wo.r,this._g=Wo.g,this._b=Wo.b,this._a=Wo.a,this._roundA=ct(100*this._a)/100,this._format=Lo.format||Wo.format,this._gradientType=Lo.gradientType,this._r<1&&(this._r=ct(this._r)),this._g<1&&(this._g=ct(this._g)),this._b<1&&(this._b=ct(this._b)),this._ok=Wo.ok,this._tc_id=Re++};br.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var cn=this.toRgb();return(299*cn.r+587*cn.g+114*cn.b)/1e3},setAlpha:function(cn){return this._a=_2(cn),this._roundA=ct(100*this._a)/100,this},toHsv:function(){var cn=vh(this._r,this._g,this._b);return{h:360*cn.h,s:cn.s,v:cn.v,a:this._a}},toHsvString:function(){var cn=vh(this._r,this._g,this._b),Lo=ct(360*cn.h),Wo=ct(100*cn.s),bi=ct(100*cn.v);return 1==this._a?"hsv("+Lo+", "+Wo+"%, "+bi+"%)":"hsva("+Lo+", "+Wo+"%, "+bi+"%, "+this._roundA+")"},toHsl:function(){var cn=vf(this._r,this._g,this._b);return{h:360*cn.h,s:cn.s,l:cn.l,a:this._a}},toHslString:function(){var cn=vf(this._r,this._g,this._b),Lo=ct(360*cn.h),Wo=ct(100*cn.s),bi=ct(100*cn.l);return 1==this._a?"hsl("+Lo+", "+Wo+"%, "+bi+"%)":"hsla("+Lo+", "+Wo+"%, "+bi+"%, "+this._roundA+")"},toHex:function(cn){return hm(this._r,this._g,this._b,cn)},toHexString:function(cn){return"#"+this.toHex(cn)},toHex8:function(){return mm(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:ct(this._r),g:ct(this._g),b:ct(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+ct(this._r)+", "+ct(this._g)+", "+ct(this._b)+")":"rgba("+ct(this._r)+", "+ct(this._g)+", "+ct(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:ct(100*$c(this._r,255))+"%",g:ct(100*$c(this._g,255))+"%",b:ct(100*$c(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+ct(100*$c(this._r,255))+"%, "+ct(100*$c(this._g,255))+"%, "+ct(100*$c(this._b,255))+"%)":"rgba("+ct(100*$c(this._r,255))+"%, "+ct(100*$c(this._g,255))+"%, "+ct(100*$c(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Ca[hm(this._r,this._g,this._b,!0)]||!1)},toFilter:function(cn){var Lo="#"+mm(this._r,this._g,this._b,this._a),Wo=Lo,bi=this._gradientType?"GradientType = 1, ":"";return cn&&(Wo=br(cn).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+bi+"startColorstr="+Lo+",endColorstr="+Wo+")"},toString:function(cn){var Lo=!!cn;cn=cn||this._format;var Wo=!1;return Lo||!(this._a<1&&this._a>=0)||"hex"!==cn&&"hex6"!==cn&&"hex3"!==cn&&"name"!==cn?("rgb"===cn&&(Wo=this.toRgbString()),"prgb"===cn&&(Wo=this.toPercentageRgbString()),"hex"!==cn&&"hex6"!==cn||(Wo=this.toHexString()),"hex3"===cn&&(Wo=this.toHexString(!0)),"hex8"===cn&&(Wo=this.toHex8String()),"name"===cn&&(Wo=this.toName()),"hsl"===cn&&(Wo=this.toHslString()),"hsv"===cn&&(Wo=this.toHsvString()),Wo||this.toHexString()):"name"===cn&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(cn,Lo){var Wo=cn.apply(null,[this].concat([].slice.call(Lo)));return this._r=Wo._r,this._g=Wo._g,this._b=Wo._b,this.setAlpha(Wo._a),this},lighten:function(){return this._applyModification(O1,arguments)},brighten:function(){return this._applyModification(K0,arguments)},darken:function(){return this._applyModification(gv,arguments)},desaturate:function(){return this._applyModification(_h,arguments)},saturate:function(){return this._applyModification(Zf,arguments)},greyscale:function(){return this._applyModification(yh,arguments)},spin:function(){return this._applyModification(vy,arguments)},_applyCombination:function(cn,Lo){return cn.apply(null,[this].concat([].slice.call(Lo)))},analogous:function(){return this._applyCombination(vE,arguments)},complement:function(){return this._applyCombination(hE,arguments)},monochromatic:function(){return this._applyCombination(v2,arguments)},splitcomplement:function(){return this._applyCombination(gE,arguments)},triad:function(){return this._applyCombination(V0,arguments)},tetrad:function(){return this._applyCombination(mE,arguments)}},br.fromRatio=function(cn,Lo){if("object"==typeof cn){var Wo={};for(var bi in cn)cn.hasOwnProperty(bi)&&(Wo[bi]="a"===bi?cn[bi]:_y(cn[bi]));cn=Wo}return br(cn,Lo)},br.equals=function(cn,Lo){return!(!cn||!Lo)&&br(cn).toRgbString()==br(Lo).toRgbString()},br.random=function(){return br.fromRatio({r:zr(),g:zr(),b:zr()})},br.mix=function(cn,Lo,Wo){Wo=0===Wo?0:Wo||50;var bi,Wa=br(cn).toRgb(),ds=br(Lo).toRgb(),Wi=Wo/100,yl=2*Wi-1,mc=ds.a-Wa.a,yp=1-(bi=((bi=yl*mc==-1?yl:(yl+mc)/(1+yl*mc))+1)/2);return br({r:ds.r*bi+Wa.r*yp,g:ds.g*bi+Wa.g*yp,b:ds.b*bi+Wa.b*yp,a:ds.a*Wi+Wa.a*(1-Wi)})},br.readability=function(cn,Lo){var Wo=br(cn),bi=br(Lo),Wa=Wo.toRgb(),ds=bi.toRgb(),Wi=Wo.getBrightness(),yl=bi.getBrightness(),mc=Math.max(Wa.r,ds.r)-Math.min(Wa.r,ds.r)+Math.max(Wa.g,ds.g)-Math.min(Wa.g,ds.g)+Math.max(Wa.b,ds.b)-Math.min(Wa.b,ds.b);return{brightness:Math.abs(Wi-yl),color:mc}},br.isReadable=function(cn,Lo){var Wo=br.readability(cn,Lo);return Wo.brightness>125&&Wo.color>500},br.mostReadable=function(cn,Lo){for(var Wo=null,bi=0,Wa=!1,ds=0;ds<Lo.length;ds++){var Wi=br.readability(cn,Lo[ds]),yl=Wi.brightness>125&&Wi.color>500,mc=Wi.brightness/125*3+Wi.color/500;(yl&&!Wa||yl&&Wa&&mc>bi||!yl&&!Wa&&mc>bi)&&(Wa=yl,bi=mc,Wo=br(Lo[ds]))}return Wo};var co,Bo,Oi,Qi=br.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Ca=br.hexNames=function(cn){var Lo={};for(var Wo in cn)cn.hasOwnProperty(Wo)&&(Lo[cn[Wo]]=Wo);return Lo}(Qi),ys=(Bo="[\\s|\\(]+("+(co="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+co+")[,|\\s]+("+co+")\\s*\\)?",Oi="[\\s|\\(]+("+co+")[,|\\s]+("+co+")[,|\\s]+("+co+")[,|\\s]+("+co+")\\s*\\)?",{rgb:new RegExp("rgb"+Bo),rgba:new RegExp("rgba"+Oi),hsl:new RegExp("hsl"+Bo),hsla:new RegExp("hsla"+Oi),hsv:new RegExp("hsv"+Bo),hsva:new RegExp("hsva"+Oi),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=br,h(function(){h.fn.spectrum.load&&h.fn.spectrum.processNativeColorInputs()})}function ss(cn,Lo,Wo,bi){for(var Wa=[],ds=0;ds<cn.length;ds++){var Wi=cn[ds];if(Wi){var yl=br(Wi),mc=yl.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";mc+=br.equals(Lo,Wi)?" sp-thumb-active":"";var yp=yl.toString(bi.preferredFormat||"rgb"),Hp=u?"background-color:"+yl.toRgbString():"filter:"+yl.toFilter();Wa.push('<span title="'+yp+'" data-color="'+yl.toRgbString()+'" class="'+mc+'"><span class="sp-thumb-inner" style="'+Hp+';"></span></span>')}else Wa.push(h("<div />").append(h('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",bi.noColorSelectedText)).html())}return"<div class='sp-cf "+Wo+"'>"+Wa.join("")+"</div>"}function _l(){}function wu(cn){cn.stopPropagation()}function Nc(cn,Lo){var Wo=Array.prototype.slice,bi=Wo.call(arguments,2);return function(){return cn.apply(Lo,bi.concat(Wo.call(arguments)))}}function Ku(cn,Lo,Wo,bi){Lo=Lo||function(){},Wo=Wo||function(){},bi=bi||function(){};var Wa=document,ds=!1,Wi={},yl=0,mc=0,yp="ontouchstart"in window,Hp={};function Zl(lc){lc.stopPropagation&&lc.stopPropagation(),lc.preventDefault&&lc.preventDefault(),lc.returnValue=!1}function Ya(lc){if(ds){if(i&&Wa.documentMode<9&&!lc.button)return Kl();var op=lc&&lc.touches&&lc.touches[0],jd=op&&op.pageY||lc.pageY,ip=Math.max(0,Math.min((op&&op.pageX||lc.pageX)-Wi.left,mc)),Vf=Math.max(0,Math.min(jd-Wi.top,yl));yp&&Zl(lc),Lo.apply(cn,[ip,Vf,lc])}}function Kl(){ds&&(h(Wa).unbind(Hp),h(Wa.body).removeClass("sp-dragging"),setTimeout(function(){bi.apply(cn,arguments)},0)),ds=!1}Hp.selectstart=Zl,Hp.dragstart=Zl,Hp["touchmove mousemove"]=Ya,Hp["touchend mouseup"]=Kl,h(cn).bind("touchstart mousedown",function(lc){(lc.which?3==lc.which:2==lc.button)||ds||!1!==Wo.apply(cn,arguments)&&(ds=!0,yl=h(cn).height(),mc=h(cn).width(),Wi=h(cn).offset(),h(Wa).bind(Hp),h(Wa.body).addClass("sp-dragging"),Ya(lc),Zl(lc))})}function Fd(){return h.fn.spectrum.inputTypeColorSupport()}function vf(cn,Lo,Wo){cn=$c(cn,255),Lo=$c(Lo,255),Wo=$c(Wo,255);var bi,Wa,ds=_r(cn,Lo,Wo),Wi=qt(cn,Lo,Wo),yl=(ds+Wi)/2;if(ds==Wi)bi=Wa=0;else{var mc=ds-Wi;switch(Wa=yl>.5?mc/(2-ds-Wi):mc/(ds+Wi),ds){case cn:bi=(Lo-Wo)/mc+(Lo<Wo?6:0);break;case Lo:bi=(Wo-cn)/mc+2;break;case Wo:bi=(cn-Lo)/mc+4}bi/=6}return{h:bi,s:Wa,l:yl}}function vh(cn,Lo,Wo){cn=$c(cn,255),Lo=$c(Lo,255),Wo=$c(Wo,255);var bi,Wa,ds=_r(cn,Lo,Wo),Wi=qt(cn,Lo,Wo),yl=ds,mc=ds-Wi;if(Wa=0===ds?0:mc/ds,ds==Wi)bi=0;else{switch(ds){case cn:bi=(Lo-Wo)/mc+(Lo<Wo?6:0);break;case Lo:bi=(Wo-cn)/mc+2;break;case Wo:bi=(cn-Lo)/mc+4}bi/=6}return{h:bi,s:Wa,v:yl}}function hm(cn,Lo,Wo,bi){var Wa=[Kf(ct(cn).toString(16)),Kf(ct(Lo).toString(16)),Kf(ct(Wo).toString(16))];return bi&&Wa[0].charAt(0)==Wa[0].charAt(1)&&Wa[1].charAt(0)==Wa[1].charAt(1)&&Wa[2].charAt(0)==Wa[2].charAt(1)?Wa[0].charAt(0)+Wa[1].charAt(0)+Wa[2].charAt(0):Wa.join("")}function mm(cn,Lo,Wo,bi){var Wa;return[Kf((Wa=bi,Math.round(255*parseFloat(Wa)).toString(16))),Kf(ct(cn).toString(16)),Kf(ct(Lo).toString(16)),Kf(ct(Wo).toString(16))].join("")}function _h(cn,Lo){Lo=0===Lo?0:Lo||10;var Wo=br(cn).toHsl();return Wo.s-=Lo/100,Wo.s=z0(Wo.s),br(Wo)}function Zf(cn,Lo){Lo=0===Lo?0:Lo||10;var Wo=br(cn).toHsl();return Wo.s+=Lo/100,Wo.s=z0(Wo.s),br(Wo)}function yh(cn){return br(cn).desaturate(100)}function O1(cn,Lo){Lo=0===Lo?0:Lo||10;var Wo=br(cn).toHsl();return Wo.l+=Lo/100,Wo.l=z0(Wo.l),br(Wo)}function K0(cn,Lo){Lo=0===Lo?0:Lo||10;var Wo=br(cn).toRgb();return Wo.r=_r(0,qt(255,Wo.r-ct(-Lo/100*255))),Wo.g=_r(0,qt(255,Wo.g-ct(-Lo/100*255))),Wo.b=_r(0,qt(255,Wo.b-ct(-Lo/100*255))),br(Wo)}function gv(cn,Lo){Lo=0===Lo?0:Lo||10;var Wo=br(cn).toHsl();return Wo.l-=Lo/100,Wo.l=z0(Wo.l),br(Wo)}function vy(cn,Lo){var Wo=br(cn).toHsl(),bi=(ct(Wo.h)+Lo)%360;return Wo.h=bi<0?360+bi:bi,br(Wo)}function hE(cn){var Lo=br(cn).toHsl();return Lo.h=(Lo.h+180)%360,br(Lo)}function V0(cn){var Lo=br(cn).toHsl(),Wo=Lo.h;return[br(cn),br({h:(Wo+120)%360,s:Lo.s,l:Lo.l}),br({h:(Wo+240)%360,s:Lo.s,l:Lo.l})]}function mE(cn){var Lo=br(cn).toHsl(),Wo=Lo.h;return[br(cn),br({h:(Wo+90)%360,s:Lo.s,l:Lo.l}),br({h:(Wo+180)%360,s:Lo.s,l:Lo.l}),br({h:(Wo+270)%360,s:Lo.s,l:Lo.l})]}function gE(cn){var Lo=br(cn).toHsl(),Wo=Lo.h;return[br(cn),br({h:(Wo+72)%360,s:Lo.s,l:Lo.l}),br({h:(Wo+216)%360,s:Lo.s,l:Lo.l})]}function vE(cn,Lo,Wo){Lo=Lo||6,Wo=Wo||30;var bi=br(cn).toHsl(),Wa=360/Wo,ds=[br(cn)];for(bi.h=(bi.h-(Wa*Lo>>1)+720)%360;--Lo;)bi.h=(bi.h+Wa)%360,ds.push(br(bi));return ds}function v2(cn,Lo){Lo=Lo||6;for(var Wo=br(cn).toHsv(),bi=Wo.h,Wa=Wo.s,ds=Wo.v,Wi=[],yl=1/Lo;Lo--;)Wi.push(br({h:bi,s:Wa,v:ds})),ds=(ds+yl)%1;return Wi}function _2(cn){return cn=parseFloat(cn),(isNaN(cn)||cn<0||cn>1)&&(cn=1),cn}function $c(cn,Lo){var bi;"string"==typeof(bi=cn)&&-1!=bi.indexOf(".")&&1===parseFloat(bi)&&(cn="100%");var Wo=function(bi){return"string"==typeof bi&&-1!=bi.indexOf("%")}(cn);return cn=qt(Lo,_r(0,parseFloat(cn))),Wo&&(cn=parseInt(cn*Lo,10)/100),qe.abs(cn-Lo)<1e-6?1:cn%Lo/parseFloat(Lo)}function z0(cn){return qt(1,_r(0,cn))}function Zm(cn){return parseInt(cn,16)}function Kf(cn){return 1==cn.length?"0"+cn:""+cn}function _y(cn){return cn<=1&&(cn=100*cn+"%"),cn}function vv(cn){return Zm(cn)/255}}(D.default);var Og=function(h){var s="name"===h.getFormat()&&h.toName(),t=1==h.getAlpha()?h.toHexString():h.toRgbString();return s||t.replace(/ /g,"")},qy=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Gy(s,h),s.prototype.template=function(){var t=this.ppfx;return'\n      <div class="'.concat(this.holderClass(),'"></div>\n      <div class="').concat(t,'field-colorp">\n        <div class="').concat(t,'field-colorp-c" data-colorp-c>\n          <div class="').concat(t,'checker-bg"></div>\n        </div>\n      </div>\n    ')},s.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},s.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},s.prototype.remove=function(){return h.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},s.prototype.handleChange=function(t){t.stopPropagation();var n=t.target.value;(0,m.isUndefined)(n)||this.__onInputChange(n)},s.prototype.__onInputChange=function(t){var n=this.model,i=this.opts.onChange,u=t,y=this.getColorEl();if(y){y.spectrum("set",u);var I=y.spectrum("get"),W=u&&Og(I);W&&(u=W)}i?i(u):n.set({value:u},{fromInput:1})},s.prototype.setValue=function(t,n){void 0===n&&(n={});var i=this.model,u=(0,m.isUndefined)(n.def)?i.get("defaults"):n.def,y=(0,m.isUndefined)(t)?(0,m.isUndefined)(u)?"":u:t,I=this.getInputEl(),W=this.getColorEl(),ce="none"!=y?y:"";I.value=y,W.get(0).style.backgroundColor=ce,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(W.spectrum("set",ce),this.noneColor="none"==y,this.movedColor=ce)},s.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var n=this,i=n.em,u=n.model,I=this.ppfx,W=n.opts.onChange,ce=(0,D.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),ie=ce.get(0).style,Re=i&&i.getConfig&&i.getConfig().colorPicker||{};this.movedColor="";var qe,ct=!1;this.$el.find("[data-colorp-c]").append(ce);var qt=function(_r,zr){void 0===zr&&(zr=!0),W?W(_r,!zr):(zr&&u.setValueFromInput(0,!1),u.setValueFromInput(_r,zr))};ce.spectrum(um(um(um({color:u.getValue()||!1,containerClassName:"".concat(I,"one-bg ").concat(I,"two-color ").concat(I,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f",palette:[]},Re),u.get("colorPicker")||{}),{move:function(_r){var zr=Og(_r);t.movedColor=zr,ie.backgroundColor=zr,qt(zr,!1)},change:function(_r){ct=!0;var zr=Og(_r);ie.backgroundColor=zr,qt(zr),t.noneColor=!1},show:function(_r){ct=!1,t.movedColor="",qe=W?u.getValue({noDefault:!0}):Og(_r)},hide:function(){ct||!qe&&!W||(t.noneColor&&(qe=""),ie.backgroundColor=qe,ce.spectrum("set",qe),qt(qe,!1))}})),i&&i.on&&this.listenTo(i,"component:selected",function(){t.movedColor&&qt(t.movedColor),ct=!0,t.movedColor="",ce.spectrum("hide")}),this.colorEl=ce}return this.colorEl},s.prototype.render=function(){return Qg.prototype.render.call(this),this.getColorEl(),this},s}(Qg);const Nv=qy;var q=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const de=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return q(s,h),s.prototype.templateInput=function(){return""},s.prototype.getInputEl=function(){if(!this.input){var t=this.model,n=this.getModelValue(),i=new Nv({model:t,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();i.setValue(n,{fromTarget:1}),this.input=i.el}return this.input},s}(Wh);var Pe=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Je=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;return(0,m.bindAll)(n,"moveIncrement","upIncrement"),n.doc=document,n.listenTo(n.model,"change:unit",n.handleModelChange),n}return Pe(s,h),s.prototype.template=function(){var t=this.ppfx;return'\n      <span class="'.concat(t,'input-holder"></span>\n      <span class="').concat(t,'field-units"></span>\n      <div class="').concat(t,'field-arrows" data-arrows>\n        <div class="').concat(t,'field-arrow-u" data-arrow-up></div>\n        <div class="').concat(t,'field-arrow-d" data-arrow-down></div>\n      </div>\n    ')},s.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},s.prototype.setValue=function(t,n){var i=n||{},u=this.validateInputValue(t,{deepCheck:1}),y={value:u.value,unit:""};(u.unit||u.force)&&(y.unit=u.unit),this.model.set(y,i),i.silent&&this.handleModelChange()},s.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},s.prototype.handleUnitChange=function(t){t.stopPropagation();var n=this.getUnitEl().value;this.model.set("unit",n),this.elementUpdated()},s.prototype.handleKeyDown=function(t){"ArrowUp"===t.key&&(t.preventDefault(),this.upArrowClick()),"ArrowDown"===t.key&&(t.preventDefault(),this.downArrowClick())},s.prototype.elementUpdated=function(){this.model.trigger("el:change")},s.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get("value");var n=this.getUnitEl();n&&(n.value=t.get("unit")||"")},s.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,n=t.get("units")||[];if(n.length){var i=['<option value="" disabled hidden>-</option>'];n.forEach(function(y){var I=y==t.get("unit")?"selected":"";i.push("<option ".concat(I,">").concat(y,"</option>"))});var u=document.createElement("div");u.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(i.join(""),"</select>"),this.unitEl=u.firstChild}}return this.unitEl},s.prototype.upArrowClick=function(){var t=this.model.get("step"),n=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(n+t)),this.elementUpdated()},s.prototype.downArrowClick=function(){var t=this.model.get("step"),n=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(n-t)),this.elementUpdated()},s.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var n=this.model.get("value")||0;n=this.normalizeValue(n),this.current={y:t.pageY,val:n},(0,jt.on)(this.doc,"mousemove",this.moveIncrement),(0,jt.on)(this.doc,"mouseup",this.upIncrement)},s.prototype.moveIncrement=function(t){this.moved=!0;var n=this.model,i=n.get("step"),u=this.current,y=this.normalizeValue(u.val+(u.y-t.pageY)*i),I=this.validateInputValue(y),W=I.value,ce=I.unit;return this.prValue=W,n.set({value:W,unit:ce},{avoidStore:1}),!1},s.prototype.upIncrement=function(){var t=this.model,n=t.get("step");if((0,jt.AU)(this.doc,"mouseup",this.upIncrement),(0,jt.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var i=this.prValue-n;t.set("value",i,{avoidStore:1}).set("value",i+n),this.elementUpdated()}},s.prototype.normalizeValue=function(t,n){void 0===n&&(n=0);var i=this.model.get("step"),u=0;if(isNaN(t))return n;if(t=parseFloat(t),Math.floor(t)!==t){var y=i.toString().split(".")[1];u=y?y.length:0}return u?parseFloat(t.toFixed(u)):t},s.prototype.validateInputValue=function(t,n){void 0===n&&(n={});var i=0,u=n||{},y=this.model,W=(0,m.isUndefined)(t)?"":t,ce=n.units||y.get("units")||[],ie=y.get("unit")||ce.length&&ce[0]||"",Re=(0,m.isUndefined)(n.max)?y.get("max"):n.max,qe=(0,m.isUndefined)(n.min)?y.get("min"):n.min,ct=!!y.get("limitlessMax"),qt=!!y.get("limitlessMin");if(u.deepCheck){var _r=y.get("fixedValues")||[];if(""===W&&(ie=""),W){var zr=new RegExp("^"+_r.join("|"),"g");if(_r.length&&zr.test(W))W=W.match(zr)[0],ie="",i=1;else{var br=W+"";W+="",W=parseFloat(W.replace(",",".")),W=isNaN(W)?"":W;var co=br.replace(W,"");(0,m.indexOf)(ce,co)>=0&&(ie=co)}}}return isNaN(W)||""===W||(ct||(0,m.isUndefined)(Re)||""===Re||(W=W>Re?Re:W),qt||(0,m.isUndefined)(qe)||""===qe||(W=W<qe?qe:W)),{force:i,value:W,unit:ie}},s.prototype.render=function(){Qg.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},s}(Qg);const yt=Je;Je.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var It=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ut=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return It(s,h),s.prototype.getValueForTarget=function(){var t=this.model,n=t.attributes,i=n.value,u=n.unit;return(0,m.isUndefined)(i)||""===i?t.get("default"):i+u},s.prototype.getInputEl=function(){if(!this.input){var t=this.ppfx,n=this.model,i=this.getModelValue(),u=new yt({contClass:"".concat(t,"field-int"),type:"number",model:n,ppfx:t});u.render(),this.$input=u.inputEl,this.$unit=u.unitEl,n.set("value",i,{fromTarget:!0}),this.$input.val(i),this.input=u.el}return this.input},s}(Wh);const $t=Ut;var rr=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const xr=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;return n.listenTo(n.model,"change:options",n.rerender),n}return rr(s,h),s.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(this.clsField,'">\n      <div data-input></div>\n      <div class="').concat(t,'sel-arrow">\n        <div class="').concat(t,'d-s-arrow"></div>\n      </div>\n    </div>')},s.prototype.getInputEl=function(){if(!this.$input){var t=this.model,n=this.em,i=t.get("name"),u=t.get("options")||[],y=[],I="<select>";u.forEach(function(ie){var Re,qe,ct,qt="";(0,m.isString)(ie)?(Re=ie,qe=ie):(Re=ie.name||ie.label||ie.value,qe="".concat((0,m.isUndefined)(ie.value)?ie.id:ie.value).replace(/"/g,"&quot;"),qt+=(ct=ie.style?ie.style.replace(/"/g,"&quot;"):"")?' style="'.concat(ct,'"'):"");var _r=n.t("traitManager.traits.options.".concat(i,".").concat(qe))||Re;I+='<option value="'.concat(qe,'"').concat(qt,">").concat(_r,"</option>"),y.push(qe)}),this.$input=(0,D.default)(I+="</select>");var W=t.getTargetValue(),ce=y.indexOf(W)>=0?W:t.get("default");!(0,m.isUndefined)(ce)&&this.$input.val(ce)}return this.$input.get(0)},s}(Wh);var yn=O(91),bo=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vo="data-categories",Bn="data-no-categories",xi=function(h){function s(t,n){var i=h.call(this,t)||this;i.reuseView=!0,i.renderedCategories=new Map,i.itemsView=n;var u=t.config||{};i.config=u;var y=t.editor;i.em=y;var I=u.pStylePrefix||"";return i.ppfx=I,i.pfx=I+u.stylePrefix||"",i.className="".concat(i.pfx,"traits"),i.traitContClass="".concat(I,"traits-c"),i.classNoCat="".concat(I,"traits-empty-c"),i.catsClass="".concat(I,"trait-categories"),i.collection=new ml([],{em:y}),i.listenTo(y,"component:toggled",i.updatedCollection),i.updatedCollection(),i}return bo(s,h),s.prototype.updatedCollection=function(){var t=this.ppfx,n=this.em,i=n.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(t,"one-bg ").concat(t,"two-color"),this.collection=i?.traits||new ml([],{em:n}),this.render()},s.prototype.add=function(t,n){var i=this.config,u=this.renderedCategories,y=this.itemView,I=t.get(this.itemType);this.itemsView&&this.itemsView[I]&&(y=this.itemsView[I]);var W=new y({config:i,model:t,attributes:t.get("attributes")}).render().el,ce=t.parent.initCategory(t);if(ce){var ie=ce.getId(),Re=this.getCategoriesEl(),qe=u.get(ie);return!qe&&Re&&(qe=new jc({model:ce},i,"trait").render(),u.set(ie,qe),Re.appendChild(qe.el)),void(null==qe||qe.append(W))}n?n.appendChild(W):this.append(W)},s.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(vo,"]"))),this.catsEl},s.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(Bn,"]"))),this.traitsEl},s.prototype.append=function(t){var n=this.getTraitsEl();n?.appendChild(t)},s.prototype.render=function(){var t=this,n=this,i=n.el,u=n.ppfx,y=n.catsClass,I=n.traitContClass,W=n.classNoCat,ce=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,i.innerHTML='\n      <div class="'.concat(y,'" ').concat(vo,'></div>\n      <div class="').concat(W," ").concat(I,'" ').concat(Bn,"></div>\n    "),this.collection.forEach(function(Re){return t.add(Re,ce)}),this.append(ce);var ie="".concat(I,"s ").concat(u,"one-bg ").concat(u,"two-color");return this.$el.addClass(ie),this.rendered=!0,this},s}(yn.A);const qo=xi;xi.prototype.itemView=Wh;var xn=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_i=function(h){function s(t){var n=h.call(this,t,"TraitManager",{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1})||this;n.TraitsView=qo,n.events=Gl,n.state=new R.Kx({traits:[]}),n.types={text:Wh,number:$t,select:xr,checkbox:z_,color:de,button:Eg};var u=n.state,y=n.config,I=n.events,W=y.pStylePrefix;W&&(y.stylePrefix="".concat(W).concat(y.stylePrefix)),(0,m.bindAll)(n,"__onSelect");var ce=(0,m.debounce)(function(){return n.__upSel()},0),ie=(0,m.debounce)(function(){return n.__onUp()},0);return u.listenTo(t,"component:toggled",ce),u.listenTo(t,I.value,ie),u.on("change:traits",n.__onSelect),n.debounced=[ce,ie],n}return xn(s,h),s.prototype.select=function(t){var n=t?.getTraits()||[];this.state.set({component:t,traits:n}),this.__trgCustom()},s.prototype.getCategories=function(){var t,n=this.getComponent();return function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],(null===(t=n?.traits.categories)||void 0===t?void 0:t.models)||[],!0)},s.prototype.getTraits=function(){return this.getCurrent()},s.prototype.getTraitsByCategory=function(t){return Rc(t||this.getTraits())},s.prototype.getComponent=function(){return this.state.attributes.component},s.prototype.addType=function(t,n){var i=this.getType("text");this.types[t]=i.extend(n)},s.prototype.getType=function(t){return this.getTypes()[t]},s.prototype.getTypes=function(){return this.types},s.prototype.getTraitsViewer=function(){return this.view},s.prototype.getCurrent=function(){return this.state.get("traits")||[]},s.prototype.render=function(){var t=this.view,n=this.em;return t=new qo({el:t?.el,collection:[],editor:n,config:this.getConfig()},this.getTypes()),this.view=t,t.el},s.prototype.postRender=function(){this.__appendTo()},s.prototype.__onSelect=function(){var t=this,u=t.state.attributes;t.em.trigger(t.events.select,{component:u.component,traits:u.traits})},s.prototype.__trgCustom=function(t){void 0===t&&(t={});var n=this,i=n.em,u=n.events;this.__ctn=n.__ctn||t.container,i.trigger(u.custom,this.__customData())},s.prototype.__customData=function(){return{container:this.__ctn}},s.prototype.__upSel=function(){this.select(this.em.getSelected())},s.prototype.__onUp=function(){this.select(this.getComponent())},s}(we);const ki=_i;var za=O(3253),ya=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ks=function(h){function s(){var t=null!==h&&h.apply(this,arguments)||this;return t._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},t}return ya(s,h),Object.defineProperty(s.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"element",{get:function(){var t;return null===(t=this.model.viewLayer)||void 0===t?void 0:t.el},enumerable:!1,configurable:!0}),s}(za.h);const La=ks;var Ps=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sc=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;n.items=[],n.opt=t;var i=t.config||{};n.config=i,n.module=t.module,n.parentView=t.parentView;var u=i.stylePrefix||"",y=n.collection;n.listenTo(y,"add",n.addTo),n.listenTo(y,"reset resetNavigator",n.render),n.listenTo(y,"remove",n.removeChildren),n.className="".concat(u,"layers");var I=i.em;if(i.sortable&&!n.opt.sorter){var W=I.Utils,ce=i.sortContainer||n.el,ie=n.createPlaceholder(u);n.opt.sorter=new W.ComponentSorter({em:I,treeClass:La,containerContext:{container:ce,containerSel:".".concat(n.className),itemSel:".".concat(u,"layer"),pfx:i.pStylePrefix,document,placeholderElement:ie},dragBehavior:{dragDirection:_c.A.Vertical,nested:!0}})}return n.$el.data("collection",y),t.parent&&n.$el.data("model",t.parent),n}return Ps(s,h),s.prototype.createPlaceholder=function(t){var n=document.createElement("div"),i=document.createElement("div");return n.className=t+"placeholder",n.style.display="none",n.style.pointerEvents="none",i.className=t+"placeholder-int",n.appendChild(i),n},s.prototype.removeChildren=function(t){var n=t.viewLayer;n&&(n.remove(),delete t.viewLayer)},s.prototype.addTo=function(t){this.addToCollection(t,null,this.collection.indexOf(t))},s.prototype.addToCollection=function(t,n,i){var u=this,I=u.opt,ce=u.el,ie=I.ItemView,_r=t.viewLayer||new ie({ItemView:ie,level:I.level,model:t,parentView:u.parentView,config:u.config,sorter:I.sorter,opened:I.opened,module:I.module}),zr=_r.render().el;if(n)n.appendChild(zr);else{var br=ce,co=br.childNodes;if((0,m.isUndefined)(i))br.appendChild(zr);else{var Bo=co.length==i;Bo&&i--,Bo||!co.length?br.appendChild(zr):br.insertBefore(zr,co[i])}}return this.items.push(_r),zr},s.prototype.remove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return R.Ss.prototype.remove.apply(this,t),this.items.map(function(i){return i.remove()}),this},s.prototype.render=function(){var t=this,n=this.el,i=this.module,u=document.createDocumentFragment();return n.innerHTML="",this.collection.map(function(y){return i.__getLayerFromComponent(y)}).forEach(function(y){return t.addToCollection(y,u)}),n.appendChild(u),n.className=this.className,this},s}(R.Ss);const Wl=sc;var sl=O(5301),xc=O(8351),ol=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qc=function(){return qc=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},qc.apply(this,arguments)},tp=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},su=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],rp={preserveSelected:1},tc=function(h){return function(s){return h.trigger("".concat(pd,":start"),s)}},Bp=function(h){return function(s){return h.trigger(pd,s)}},Wp=function(h,s,t){return void 0===t&&(t={}),function(n,i,u){setTimeout(function(){s.forEach(function(y){return y.set("status",y.get("selectable")?"selected":"")}),h.setSelected(s),s[0].emitUpdate()}),h.trigger("".concat(pd,":end"),u),setTimeout(function(){return h.runDefault(rp)}),(t.altMode||u.cancelled)&&h.set("_cmpDrag",1)}},Xu=function(h){function s(t){var n=h.call(this,t,"Commands",{stylePrefix:"com-",defaults:{},strict:!0})||this;n.CommandAbstract=sl.default,n.defaultCommands={},n.commands={},n.active={},n.events=xc.A;var i=n.config,u=i.pStylePrefix,y=n.defaultCommands;for(var I in u&&(i.stylePrefix=u+i.stylePrefix),Object.keys(i.defaults).forEach(function(W){var ce=i.defaults[W];ce.id&&n.add(ce.id,ce)}),y["tlb-delete"]={run:function(W){return W.runCommand("core:component-delete")}},y["tlb-clone"]={run:function(W){W.runCommand("core:copy"),W.runCommand("core:paste",{action:"clone-component"})}},y["tlb-move"]={run:function(W,ce,ie){var Re;void 0===ie&&(ie={});var qe=W.getModel(),ct=ie.event,qt=ie.target,_r=(Array.isArray(qt)?qt:qt?[qt]:tp([],W.getSelectedAll(),!0)).map(function(il){var _l,wu;return(null===(wu=null===(_l=il.delegate)||void 0===_l?void 0:_l.move)||void 0===wu?void 0:wu.call(_l,il))||il}).filter(Boolean),zr=_r[_r.length-1],br="dragstart"===ct?.type;if(!zr?.get("draggable"))return qe.logWarning("The element is not draggable");var co=zr.get("dmode")||qe.get("dmode"),Bo=function(){return qe.stopDefault(rp)},Oi=(0,m.includes)(["absolute","translate"],co);_r.forEach(function(il){return il.trigger("disable",{fromMove:!0})}),br?setTimeout(Bo,0):Bo();var Qi=tc(qe),Ca=Bp(qe),ys=Wp(qe,_r,{altMode:Oi});if(Oi)W.runCommand("core:component-drag",{guidesInfo:1,mode:co,target:zr,onStart:Qi,onDrag:Ca,onEnd:ys,event:ct});else{br&&ct.dataTransfer.setDragImage(null===(Re=zr.view)||void 0===Re?void 0:Re.el,0,0);var ss=W.Commands.get("move-comp");ss.onStart=Qi,ss.onDrag=Ca,ss.onEndMoveFromModel=ys,ss.initSorterFromModels(_r)}_r.filter(function(il){return il.get("selectable")}).forEach(function(il){return il.set("status","freezed-selected")})}},y["core:undo"]=function(W){return W.UndoManager.undo()},y["core:redo"]=function(W){return W.UndoManager.redo()},su.forEach(function(W){var ce=W[2],ie=O(585)("./".concat(W[1])).default,Re="core:".concat(W[0]);y[Re]=ie,ce&&(y[ce]=ie,["run","stop"].forEach(function(qe){t.on("".concat(qe,":").concat(ce),function(){for(var ct=[],qt=0;qt<arguments.length;qt++)ct[qt]=arguments[qt];return t.trigger.apply(t,tp(["".concat(qe,":").concat(Re)],ct,!1))})}))}),i.model=t.Canvas,y)n.add(I,y[I]);return n}return ol(s,h),s.prototype.add=function(t,n){var i=(0,m.isFunction)(n)?{run:n}:n;return i.stop||(i.noStop=!0),delete i.initialize,i.id=t,this.commands[t]=sl.default.extend(i),this},s.prototype.get=function(t){var n=this.commands[t];return(0,m.isFunction)(n)?(n=new n(this.config),this.commands[t]=n):n||this.em.logWarning("'".concat(t,"' command not found")),n},s.prototype.extend=function(t,n){void 0===n&&(n={});var i=this.get(t);if(i){var u=qc(qc({},i.constructor.prototype),n);this.add(t,u);var y=su.filter(function(I){return"core:".concat(I[0])===t&&I[2]})[0];y&&this.add(y[2],u)}return this},s.prototype.has=function(t){return!!this.commands[t]},s.prototype.getAll=function(){return this.commands},s.prototype.run=function(t,n){return void 0===n&&(n={}),this.runCommand(this.get(t),n)},s.prototype.stop=function(t,n){return void 0===n&&(n={}),this.stopCommand(this.get(t),n)},s.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},s.prototype.getActive=function(){return this.active},s.prototype.runCommand=function(t,n){var i;if(void 0===n&&(n={}),t?.run){var y=this.config,W=this.em.Editor;this.isActive(t.id)&&!n.force&&y.strict||(i=W&&t.callRun(W,n))}return i},s.prototype.stopCommand=function(t,n){var i;if(void 0===n&&(n={}),t?.run){var y=this.config,W=this.em.Editor;(this.isActive(t.id)||n.force||!y.strict)&&(i=t.callStop(W,n))}return i},s.prototype.create=function(t){return t.stop||(t.noStop=!0),new(sl.default.extend(t))(this.config)},s.prototype.__onRun=function(t,n){this.em.on("".concat(this.events.runCommand).concat(t),n)},s.prototype.__onStop=function(t,n){this.em.on("".concat(this.events.stopCommand).concat(t),n)},s.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},s}(we);const rc=Xu;var _p=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ed=function(){return ed=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},ed.apply(this,arguments)},lf="contentEditable",vu="data-toggle-move",Nf=function(h){function s(t){var n=h.call(this,t)||this;(0,m.bindAll)(n,"__render"),n.opt=t,n.module=t.module,n.config=t.config||{},n.sorter=t.sorter||"",n.parentView=t.parentView;var y=n.pfx,I=n.ppfx,W=n.model.get("type")||"default";return n.className="".concat(y,"layer ").concat(y,"layer__t-").concat(W," no-select ").concat(I,"two-color"),n.inputNameCls="".concat(I,"layer-name"),n.clsTitleC="".concat(y,"layer-title-c"),n.clsTitle="".concat(y,"layer-title"),n.clsCaret="".concat(y,"layer-caret"),n.clsCount="".concat(y,"layer-count"),n.clsMove="".concat(y,"layer-move"),n.clsChildren="".concat(y,"layer-children"),n.clsNoChild="".concat(y,"layer-no-chld"),n.clsEdit="".concat(n.inputNameCls,"--edit"),n.clsNoEdit="".concat(n.inputNameCls,"--no-edit"),n.initComponent(),n}return _p(s,h),s.prototype.events=function(){var t;return(t={})["mousedown [".concat(vu,"]")]="startSort",t["touchstart [".concat(vu,"]")]="startSort",t["click [data-toggle-visible]"]="toggleVisibility",t["click [data-toggle-open]"]="toggleOpening",t["click [data-toggle-select]"]="handleSelect",t["mouseover [data-toggle-select]"]="handleHover",t["mouseout [data-toggle-select]"]="handleHoverOut",t["dblclick [data-name]"]="handleEdit",t["keydown [data-name]"]="handleEditKey",t["focusout [data-name]"]="handleEditEnd",t},s.prototype.template=function(t){var n=this,i=n.pfx,u=n.ppfx,I=n.clsNoEdit,ce=n.opt,ie=n.em,Re=n.config.hidable,qe=n.module.getComponents(t).length,ct=qe?"":this.clsNoChild,qt="".concat(this.clsTitle," ").concat(ct),_r="".concat(this.clsTitleC),zr="".concat(this.inputNameCls," ").concat(I," ").concat(u,"no-app"),co="".concat(10*(ce.level||0),"px"),Bo=t.getName(),Oi=t.getIcon(),Qi="".concat(i,"layer"),Ca=(ie?.getConfig()).icons,ys=Ca.move,ss=Ca.eye,il=Ca.eyeOff,_l=Ca.chevron;return'\n      <div class="'.concat(i,"layer-item ").concat(u,'one-bg" data-toggle-select>\n        <div class="').concat(i,'layer-item-left">\n          ').concat(Re?'<i class="'.concat(i,'layer-vis" data-toggle-visible>\n                <i class="').concat(i,'layer-vis-on">').concat(ss,'</i>\n                <i class="').concat(i,'layer-vis-off">').concat(il,"</i>\n              </i>"):"",'\n          <div class="').concat(_r,'">\n            <div class="').concat(qt,'" style="padding-left: ').concat(co,'">\n              <div class="').concat(i,'layer-title-inn" title="').concat(Bo,'">\n                <i class="').concat(this.clsCaret,'" data-toggle-open>').concat(_l,"</i>\n                  ").concat(Oi?'<span class="'.concat(Qi,'__icon">').concat(Oi,"</span>"):"",'\n                <span class="').concat(zr,'" data-name>').concat(Bo,'</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="').concat(i,'layer-item-right">\n          <div class="').concat(this.clsCount,'" data-count>').concat(qe||"",'</div>\n          <div class="').concat(this.clsMove,'" ').concat(vu,">").concat(ys||"",'</div>\n        </div>\n      </div>\n      <div class="').concat(this.clsChildren,'"></div>\n    ')},Object.defineProperty(s.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),s.prototype.initComponent=function(){var t=this,n=this.model,i=this.config.onInit,u=n.components();this.listenTo(u,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(y){return t.listenTo(n,y[0],y[1])}),this.$el.data("model",n),this.$el.data("collection",u),n.viewLayer=this,i.bind(this)({component:n,render:this.__render,listenTo:this.listenTo})},s.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},s.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},s.prototype.updateVisibility=function(){var t=this,n=t.pfx,i=t.model,u=t.module,y="".concat(n,"layer-hidden"),I=u.isVisible(i)?"removeClass":"addClass";this.$el[I](y),this.getVisibilityEl()[I]("".concat(n,"layer-off"))},s.prototype.updateMove=function(){var t=this.model,n=this.config,i=this.getItemContainer().find("[".concat(vu,"]"))[0];if(i){var u=t.get("draggable")&&n.sortable;i.style.display=u?"":"none"}},s.prototype.toggleVisibility=function(t){t?.stopImmediatePropagation();var n=this.module,i=this.model;n.setVisible(i,!n.isVisible(i))},s.prototype.handleEdit=function(t){t?.stopPropagation();var n=this,i=n.em,u=n.$el,y=n.clsNoEdit,I=n.clsEdit,W=this.getInputName();W[lf]="true",W.focus(),document.execCommand("selectAll",!1),i.setEditing(!0),u.find(".".concat(this.inputNameCls)).removeClass(y).addClass(I)},s.prototype.handleEditKey=function(t){t.stopPropagation(),((0,jt.v$)(t)||(0,jt.Ci)(t))&&this.handleEditEnd(t)},s.prototype.handleEditEnd=function(t){t?.stopPropagation();var n=this,i=n.em,u=n.$el,y=n.clsNoEdit,I=n.clsEdit,W=n.model,ce=this.getInputName(),ie=ce.textContent;ce.scrollLeft=0,ce[lf]="false",W.setName(ie),i.setEditing(!1),u.find(".".concat(this.inputNameCls)).addClass(y).removeClass(I),this.updateName()},s.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},s.prototype.updateOpening=function(){var t=this,n=t.$el,i=t.model,y="open",I="".concat(t.pfx,"layer-open"),W=this.getCaret();this.module.isOpen(i)?(n.addClass(y),W.addClass(I)):(n.removeClass(y),W.removeClass(I))},s.prototype.toggleOpening=function(t){var n=this.model,i=this.module;t?.stopImmediatePropagation(),n.get("components").length&&i.setOpen(n,!i.isOpen(n))},s.prototype.handleSelect=function(t){t?.stopPropagation(),this.module.setLayerData(this.model,{selected:!0},{event:t})},s.prototype.handleHover=function(t){t?.stopPropagation(),this.module.setLayerData(this.model,{hovered:!0})},s.prototype.handleHoverOut=function(t){t?.stopPropagation(),this.module.setLayerData(this.model,{hovered:!1})},s.prototype.startSort=function(t){var n,i,u;t.stopPropagation();var y=this,I=y.em,W=y.sorter,ce=y.model;if((!t.button||0===t.button)&&W){var ie=(null===(i=null===(n=ce.delegate)||void 0===n?void 0:n.move)||void 0===i?void 0:i.call(n,ce))||ce;W.eventHandlers=ed({legacyOnStartSort:tc(I),legacyOnMoveClb:Bp(I),legacyOnEndMove:Wp(I,[ie])},W.eventHandlers);var Re=(null===(u=ie.viewLayer)||void 0===u?void 0:u.el)||t.target;W.startSort([{element:Re}])}},s.prototype.updateStatus=function(){vl.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},s.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},s.prototype.checkChildren=function(){var t=this,n=t.model,i=t.clsNoChild,u=t.module,y=u.getComponents(n).length,I=this.getItemContainer(),W=I.find(".".concat(this.clsTitle)),ce=I.find("[data-count]");W[y?"removeClass":"addClass"](i),ce.html("".concat(y||"")),!y&&u.setOpen(n,!1)},s.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},s.prototype.setRoot=function(t){var n,i=(0,m.isString)(t)?null===(n=this.em.getWrapper())||void 0===n?void 0:n.find(t)[0]:t;i&&(this.stopListening(),this.model=i,this.initComponent(),this._rendered&&this.render())},s.prototype.updateLayerable=function(){(this.parentView||this).render()},s.prototype.__clearItems=function(){var t;null===(t=this.items)||void 0===t||t.remove()},s.prototype.remove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return R.Ss.prototype.remove.apply(this,t),delete this.model.viewLayer,this.__clearItems(),this},s.prototype.render=function(){var t=this,n=t.model,i=t.config,u=t.pfx,y=t.ppfx,I=t.opt,W=t.sorter;this.__clearItems();var ce=I.opened,ie=I.module,Re=I.ItemView,qe=!ie.__isLayerable(n),ct=this.$el.empty(),qt=I.level+1;delete this.inputName,this.items=new Wl({ItemView:Re,collection:n.get("components"),config:i,sorter:W,opened:ce,parentView:this,parent:n,level:qt,module:ie});var _r=this.items.render().$el;return i.showWrapper||1!==qt?(ct.html(this.template(n)),ct.find(".".concat(this.clsChildren)).append(_r)):ct.append(_r),!ie.isVisible(n)&&(this.className+=" ".concat(u,"hide")),qe&&(this.className+=" ".concat(y,"hidden")),ct.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},s.prototype.__render=function(){var t=this,u={component:t.model,el:t.el};t.config.onRender.bind(this)(u),this.em.trigger("layer:render",u)},s}(R.Ss);const Bm=Nf;var Dg=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zh=function(){return Zh=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Zh.apply(this,arguments)},Xg="".concat("layer",":"),H_="".concat(Xg,"root"),tg="".concat(Xg,"component"),ev="".concat(Xg,"custom"),cf={all:"layer",root:H_,component:tg,custom:ev},Tg={mediaText:""},Uf=["open","status","locked","custom-name","components","classes"].map(function(h){return"".concat(mt.I.update,":").concat(h)}).join(" "),Sg=function(h){function s(t){var n=h.call(this,t,"LayerManager",{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}})||this;return n.events=cf,(0,m.bindAll)(n,"componentChanged","__onRootChange","__onComponent"),n.model=new Ce.A(n,{opened:{}}),n.config.stylePrefix=n.config.pStylePrefix,n}return Dg(s,h),s.prototype.onLoad=function(){var t=this,n=this,i=n.em,u=n.config,y=n.model;y.listenTo(i,"component:selected",this.componentChanged),y.on("change:root",this.__onRootChange),y.listenTo(i,Uf,this.__onComponent),this.componentChanged(),y.listenToOnce(i,"load",function(){t.setRoot(u.root),t.__appendTo()})},s.prototype.setRoot=function(t){var n=this.em.getWrapper(),i=(0,X.isComponent)(t)?t:n;t&&(0,m.isString)(t)&&(0,X.hasWin)()&&(i=n.find(t)[0]||n);var u=this.__getLayerFromComponent(i);return this.model.set("root",u),u},s.prototype.getRoot=function(){return this.model.get("root")},s.prototype.getComponents=function(t){var n=this;return t.components().map(function(i){return n.__getLayerFromComponent(i)}).filter(function(i){return n.__isLayerable(i)})},s.prototype.setOpen=function(t,n){t.set("open",n)},s.prototype.isOpen=function(t){return!!t.get("open")},s.prototype.setVisible=function(t,n){var i="__prev-display",u=t.getStyle(Tg),y=u.display;if(n){var I=t.get(i);delete u.display,I&&(u.display=I,t.unset(i))}else y&&t.set(i,y),u.display="none";t.setStyle(u,Tg),this.updateLayer(t),this.em.trigger("component:toggled")},s.prototype.isVisible=function(t){return void 0===(n=t.getStyle(Tg))&&(n={}),0!==(n.display||"").trim().indexOf("none");var n},s.prototype.setLocked=function(t,n){t.set("locked",n)},s.prototype.isLocked=function(t){return!!t.get("locked")},s.prototype.setName=function(t,n){t.set("custom-name",n)},s.prototype.getName=function(t){return t.getName()},s.prototype.getLayerData=function(t){var n=t.get("status");return{name:t.getName(),open:this.isOpen(t),selected:"selected"===n,hovered:"hovered"===n,visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},s.prototype.setLayerData=function(t,n,i){var u;void 0===i&&(i={});var y=this.em,I=this.config,W=n.open,ce=n.selected,ie=n.hovered,Re=n.visible,qe=n.locked,ct=n.name,qt=Zh({fromLayers:!0},i);if((0,X.isDef)(W)&&this.setOpen(t,W),(0,X.isDef)(ce))if(ce){y.setSelected(t,qt);var _r=I.scrollCanvas;_r&&(null===(u=t.views)||void 0===u||u.forEach(function(zr){return zr.scrollIntoView(_r)}))}else y.removeSelected(t,qt);(0,X.isDef)(ie)&&I.showHover&&y.setHovered(ie?t:null,qt),(0,X.isDef)(Re)&&Re!==this.isVisible(t)&&this.setVisible(t,Re),(0,X.isDef)(qe)&&this.setLocked(t,qe),(0,X.isDef)(ct)&&this.setName(t,ct)},s.prototype.componentChanged=function(t,n){var i;if(void 0===n&&(n={}),!n.fromLayers){var u=this.em,y=this.config.scrollLayers,I=this.model.get("opened"),W=u.getSelected(),ce=W?.parent();for(var ie in I)I[ie].set("open",!1),delete I[ie];for(;ce;)ce.set("open",!0),I[ce.cid]=ce,ce=ce.parent();if(W&&y){var Re=null===(i=W.viewLayer)||void 0===i?void 0:i.el;Re?.scrollIntoView(y)}}},s.prototype.getAll=function(){return this.view},s.prototype.render=function(){var t,n,i=this.config,u=this.model,y=Bm.extend(i.extend);return this.view=new y({el:null===(t=this.view)||void 0===t?void 0:t.el,ItemView:y,level:0,config:i,opened:u.get("opened"),model:this.getRoot(),module:this}),null===(n=this.view)||void 0===n?void 0:n.render().el},s.prototype.destroy=function(){var t;null===(t=this.view)||void 0===t||t.remove()},s.prototype.__onRootChange=function(){var t,n=this.getRoot();null===(t=this.view)||void 0===t||t.setRoot(n),this.em.trigger(H_,n),this.__trgCustom()},s.prototype.__getLayerFromComponent=function(t){var n,i;return(null===(i=null===(n=t.delegate)||void 0===n?void 0:n.layer)||void 0===i?void 0:i.call(n,t))||t},s.prototype.__onComponent=function(t){this.updateLayer(t)},s.prototype.__isLayerable=function(t){var n=t.tagName;return(!this.config.hideTextnode||!t.isInstanceOf("textnode")&&"br"!==n)&&t.get("layerable")},s.prototype.__trgCustom=function(t){var n=this,u=n.em,y=n.events;this.__ctn=n.__ctn||t?.container,u.trigger(y.custom,{container:this.__ctn,root:this.getRoot()})},s.prototype.updateLayer=function(t,n){this.em.trigger(tg,t,n)},s}(we);const Pg=Sg;var Uv=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),G_=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Uv(s,h),s.getDefaults=function(){return(0,m.result)(this.prototype,"defaults")},s.prototype.defaults=function(){return{type:"",src:""}},s.prototype.getType=function(){return this.get("type")},s.prototype.getSrc=function(){return this.get("src")},s.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},s.prototype.getExtension=function(){return this.getFilename().split(".").pop()},s}(R.Kx);const Mg=G_;G_.prototype.idAttribute="src";var Bv=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kh=function(){return Kh=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Kh.apply(this,arguments)};const tv=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Bv(s,h),s.prototype.defaults=function(){return Kh(Kh({},Mg.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},s}(Mg);var rv=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wv=function(h){function s(t){var n=h.call(this,t)||this;n.options=t,n.collection=t.collection;var i=t.config||{};n.config=i,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.em=i.em,n.className=n.pfx+"asset",n.listenTo(n.model,"destroy remove",n.remove),n.model.view=n;var u=n.init&&n.init.bind(n);return u&&u(t),n}return rv(s,h),s.prototype.__getBhv=function(){var t=this.em,n=t?.Assets;return n?.__getBehaviour()||{}},s.prototype.template=function(t,n){var i=this.pfx;return'\n      <div class="'.concat(i,'preview-cont">\n        ').concat(this.getPreview(),'\n      </div>\n      <div class="').concat(i,'meta">\n        ').concat(this.getInfo(),'\n      </div>\n      <div class="').concat(i,'close" data-toggle="asset-remove">\n        &Cross;\n      </div>\n    ')},s.prototype.updateTarget=function(t){t&&t.set&&(t.set("attributes",(0,m.clone)(t.get("attributes"))),t.set("src",this.model.get("src")))},s.prototype.getPreview=function(){return""},s.prototype.getInfo=function(){return""},s.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},s}(R.Ss);const q_=Wv;var dm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jy=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h},Yy=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return dm(s,h),s.prototype.getPreview=function(){var t=this,n=t.pfx,i=t.ppfx,u=t.model.get("src");return x($_||($_=Jy(['\n      <div class="','preview" style="background-image: url(\'','\');"></div>\n      <div class="',"preview-bg ",'checker-bg"></div>\n    '],['\n      <div class="','preview" style="background-image: url(\'','\');"></div>\n      <div class="',"preview-bg ",'checker-bg"></div>\n    '])),n,u,n,i)},s.prototype.getInfo=function(){var t=this.pfx,n=this.model,i=n.get("name"),u=n.get("width"),y=n.get("height"),I=n.get("unitDim"),W=u&&y?"".concat(u,"x").concat(y).concat(I):"";return i=i||n.getFilename(),x(Ag||(Ag=Jy(['\n      <div class="','name">','</div>\n      <div class="','dimensions">',"</div>\n    "],['\n      <div class="','name">','</div>\n      <div class="','dimensions">',"</div>\n    "])),t,i,t,W)},s.prototype.init=function(t){this.className+=" ".concat(this.pfx,"asset-image")},s.prototype.onClick=function(){var t=this.model,n=this.pfx,i=this.__getBhv().select,u=this.config.onClick,y=this.collection;y.trigger("deselectAll"),this.$el.addClass(n+"highlight"),(0,m.isFunction)(i)?i(t,!1):(0,m.isFunction)(u)?u(t):this.updateTarget(y.target)},s.prototype.onDblClick=function(){var t=this.em,n=this.model,i=this.__getBhv().select,u=this.config.onDblClick,y=this.collection,I=y.target,W=y.onSelect;(0,m.isFunction)(i)?i(n,!0):(0,m.isFunction)(u)?u(n):(this.updateTarget(I),t?.Modal.close()),(0,m.isFunction)(W)&&W(n)},s.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},s}(q_);const Eb=Yy;var $_,Ag;Yy.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var kg=function(){return kg=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},kg.apply(this,arguments)},Qy={types:[],initialize:function(h,s){var t=this;void 0===s&&(s={});var n=s.em;this.em=n,this.opts=s,this.model=function(u,y){var I,W,ce;if(void 0===u&&(u={}),void 0===y&&(y={}),u&&u.type){var ie=t.getBaseType();I=(ce=t.getType(u.type))?ce.model:ie.model,W=ce?ce.view:ie.view}else{var Re=t.recognizeType(u);I=(ce=Re.type).model,W=ce.view,u=Re.attributes}var qe=new I(u,kg(kg({},y),{em:n}));return qe.typeView=W,t.model.prototype=I.prototype,qe};var i=this.init&&this.init.bind(this);i&&i()},recognizeType:function(h){for(var s=this.getTypes(),t=0;t<s.length;t++){var n=s[t],i=n.isType(h);if(i="boolean"==typeof i&&i?{type:n.id}:i)return{type:n,attributes:i}}return{type:this.getBaseType(),attributes:h}},getBaseType:function(){var h=this.getTypes();return h[h.length-1]},getTypes:function(){return this.types},getType:function(h){for(var s=this.getTypes(),t=0;t<s.length;t++){var n=s[t];if(n.id===h)return n}},addType:function(h,s){var t=this.getType(h),n=this.getBaseType(),i=t?t.model:n.model,u=t?t.view:n.view,y=s.model,I=s.view,W=s.isType;y=y instanceof R.Kx||(0,m.isFunction)(y)?y:i.extend(y||{}),I=I instanceof R.Ss||(0,m.isFunction)(I)?I:u.extend(I||{}),!this.extendViewApi||s.model||s.view||(I=I.extend(s)),t?(t.model=y,t.view=I,t.isType=W||t.isType):(s.id=h,s.model=y,s.view=I,s.isType=W||function(ce){if(ce&&ce.type==h)return!0},this.getTypes().unshift(s))}};const nv=Qy;var J_=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lg=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return J_(s,h),s}(R.pM.extend(nv));const Zv=Lg;var Y_;Lg.prototype.types=[{id:"image",model:tv,view:Eb,isType:function(h){return"string"==typeof h?{type:"image",src:h}:h}}],function(h){h.add="asset:add",h.remove="asset:remove",h.removeBefore="asset:remove:before",h.update="asset:update",h.open="asset:open",h.close="asset:close",h.uploadStart="asset:upload:start",h.uploadEnd="asset:upload:end",h.uploadError="asset:upload:error",h.uploadResponse="asset:upload:response",h.custom="asset:custom",h.all="asset"}(Y_||(Y_={}));const ov=Y_;var Xy=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),iv=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;n.options=t,n.config=t.config,n.pfx=n.config.stylePrefix||"",n.ppfx=n.config.pStylePrefix||"",n.em=n.config.em;var i=n.collection;return n.listenTo(i,"reset",n.renderAssets),n.listenTo(i,"add",n.addToAsset),n.listenTo(i,"remove",n.removedAsset),n.listenTo(i,"deselectAll",n.deselectAll),n}return Xy(s,h),s.prototype.template=function(t){var n=t.pfx,i=t.ppfx,u=t.em,y="";return this.config.showUrlInput&&(y='\n          <form class="'.concat(n,'add-asset">\n            <div class="').concat(i,"field ").concat(n,'add-field">\n              <input placeholder="').concat(u?.t("assetManager.inputPlh"),'"/>\n            </div>\n            <button class="').concat(i,'btn-prim">').concat(u?.t("assetManager.addButton"),'</button>\n            <div style="clear:both"></div>\n          </form>\n      ')),'\n    <div class="'.concat(n,'assets-cont">\n      <div class="').concat(n,'assets-header">\n        ').concat(y,'\n      </div>\n      <div class="').concat(n,'assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    ')},s.prototype.handleSubmit=function(t){t.preventDefault();var n=this.getAddInput(),i=n&&n.value.trim(),u=this.config.handleAdd;if(i){n.value="";var y=this.getAssetsEl();y&&(y.scrollTop=0),u?u.bind(this)(i):this.options.globalCollection.add(i,{at:0})}},s.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},s.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},s.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},s.prototype.addToAsset=function(t){1==this.collection.length&&this.toggleNoAssets(!0),this.addAsset(t)},s.prototype.addAsset=function(t,n){void 0===n&&(n=null);var i=n,I=new t.typeView({model:t,collection:this.collection,config:this.config}).render().el;if(i)i.appendChild(I);else{var W=this.getAssetsEl();W&&W.insertBefore(I,W.firstChild)}return I},s.prototype.toggleNoAssets=function(t){void 0===t&&(t=!1);var n=this.$el.find(".".concat(this.pfx,"assets"));if(t)n.empty();else{var i=this.config.noAssets;i&&n.append(i)}},s.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},s.prototype.renderAssets=function(){var t=this,n=document.createDocumentFragment(),i=this.$el.find(".".concat(this.pfx,"assets"));i.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(u){return t.addAsset(u,n)}),i.append(n)},s.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},s}(R.Ss);const pm=iv;iv.prototype.events={submit:"handleSubmit"};var Q_=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ob=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;n.options=t;var i=t.config||{};n.module=t.module,n.config=i,n.em=n.config.em,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.target=n.options.globalCollection||{},n.uploadId=n.pfx+"uploadFile",n.disabled=void 0!==i.disableUpload?i.disableUpload:!i.upload&&!i.embedAsBase64,n.multiUpload=void 0===i.multiUpload||i.multiUpload;var u=i.uploadFile;return u?n.uploadFile=u.bind(n):!i.upload&&i.embedAsBase64&&(n.uploadFile=s.embedAsBase64),n.delegateEvents(),n}return Q_(s,h),s.prototype.template=function(t){var n=t.pfx,i=t.title,u=t.uploadId,y=t.disabled,I=t.multiUpload;return x(rg||(rg=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h}(['\n      <form>\n        <div id="','title">','</div>\n        <input\n          data-input\n          type="file"\n          id="','"\n          name="file"\n          accept="*/*"\n          ',"\n          ",'\n        />\n        <div style="clear:both;"></div>\n      </form>\n    '],['\n      <form>\n        <div id="','title">','</div>\n        <input\n          data-input\n          type="file"\n          id="','"\n          name="file"\n          accept="*/*"\n          ',"\n          ",'\n        />\n        <div style="clear:both;"></div>\n      </form>\n    '])),n,i,u,y?"disabled":"",I?"multiple":"")},s.prototype.events=function(){return{"change [data-input]":"uploadFile"}},s.prototype.onUploadStart=function(){var t=this.module;t?.__propEv(t.events.uploadStart)},s.prototype.onUploadEnd=function(t){var n=this.$el,i=this.module;i?.__propEv(i.events.uploadEnd,t);var u=n.find("input");u&&u.val("")},s.prototype.onUploadError=function(t){var n=this.module;console.error(t),this.onUploadEnd(t),n?.__propEv(n.events.uploadError,t)},s.prototype.onUploadResponse=function(t,n){var i,u=this,y=u.module,I=u.config,W=u.target;try{i="string"==typeof t?JSON.parse(t):t}catch{i=t}y?.__propEv(y.events.uploadResponse,i),I.autoAdd&&W&&W.add(i.data,{at:0}),this.onUploadEnd(t),n?.(i)},s.prototype.uploadFile=function(t,n){var i=this,u=t.dataTransfer?t.dataTransfer.files:t.target.files,y=this.config,I=y.beforeUpload;if(!1!==(I&&I(u))){var W=new FormData,ce=y.params,ie=y.customFetch,Re=y.fetchOptions;for(var qe in ce)W.append(qe,ce[qe]);if(this.multiUpload)for(var ct=0;ct<u.length;ct++)W.append("".concat(y.uploadName).concat(y.multiUploadSuffix),u[ct]);else u.length&&W.append(y.uploadName,u[0]);var qt=y.upload,_r=y.headers,zr="X-Requested-With";if(void 0===_r[zr]&&(_r[zr]="XMLHttpRequest"),qt){this.onUploadStart();var br={method:"post",credentials:y.credentials||"include",headers:_r,body:W},co=Re?.(br)||br;return(ie?ie(qt,co):W_(qt,co).then(function(Bo){return 1==(Bo.status/200|0)?Bo.text():Bo.text().then(function(Oi){return Promise.reject(Oi)})})).then(function(Bo){return i.onUploadResponse(Bo,n)}).catch(function(Bo){return i.onUploadError(Bo)})}}},s.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var n=this.uploadForm;"draggable"in n&&(this.uploadForm.ondragover=function(){return n.className=t.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return n.className="",!1},this.uploadForm.ondrop=function(i){n.className="",i.preventDefault(),t.uploadFile(i)})}},s.prototype.initDropzone=function(t){var n=this,i=0,u=this.config,y=t.model,I=t.el,W=y.Editor,ce=y.Canvas.getBody(),ie=this.ppfx,Re="".concat(ie,"dropzone-active"),qe="".concat(ie,"dropzone"),ct=function(){I.className=I.className.replace(Re,"").trim(),i=0},qt=function(){return i||(I.className+=" ".concat(Re),i=1),!1},_r=function(){return ct(),!1},zr=function(br){if(ct(),br.preventDefault(),br.stopPropagation(),n.uploadFile(br),u.openAssetsOnDrop&&W){var co=W.getSelected();W.runCommand("open-assets",{target:co,onSelect:function(){W.Modal.close(),W.AssetManager.setTarget(null)}})}return!1};t.$el.append('<div class="'.concat(qe,'">').concat(u.dropzoneContent,"</div>")),ct(),"draggable"in I&&[I,ce].forEach(function(br){br.ondragover=qt,br.ondragleave=_r,br.ondrop=zr})},s.prototype.render=function(){var t=this,n=t.$el,i=t.pfx,u=t.em;return n.html(this.template({title:u&&u.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:i})),this.initDrop(),n.attr("class",i+"file-uploader"),this},s.embedAsBase64=function(t,n){var i=this,y={data:[]};if(FileReader){for(var I=[],W=/^(.+)\/(.+)$/,ce=function(qe){var ct=new Promise(function(qt,_r){var zr=new FileReader;zr.addEventListener("load",function(br){var co,Bo=qe.name,Oi=W.exec(qe.type);if("image"===(co=Oi?Oi[1]:qe.type)){var Qi={src:zr.result,name:Bo,type:co,height:0,width:0},Ca=new Image;Ca.addEventListener("error",function(ys){_r(ys)}),Ca.addEventListener("load",function(){Qi.height=Ca.height,Qi.width=Ca.width,qt(Qi)}),Ca.src=Qi.src}else qt(co?{src:zr.result,name:Bo,type:co}:zr.result)}),zr.addEventListener("error",function(br){_r(br)}),zr.addEventListener("abort",function(br){_r("Aborted")}),zr.readAsDataURL(qe)});I.push(ct)},ie=0,Re=t.dataTransfer?t.dataTransfer.files:t.target.files;ie<Re.length;ie++)ce(Re[ie]);return Promise.all(I).then(function(qe){y.data=qe,i.onUploadResponse(y,n)},function(qe){i.onUploadError(qe)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},s}(R.Ss);const e0=Ob;var rg,Db=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ng=function(){return ng=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},ng.apply(this,arguments)},t0=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},Ig="open-assets",Tb=function(h){function s(t){var n=h.call(this,t,"AssetManager",new Zv([],t),ov,{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""})||this;n.storageKey="assets",n.Asset=Mg,n.Assets=Zv,n.events=ov;var u=n.all,y=n.config;n.assetsVis=new Zv([]);var I=y.pStylePrefix;return I&&(y.stylePrefix="".concat(I).concat(y.stylePrefix)),u.on("add",function(W){return n.getAllVisible().add(W)}),u.on("remove",function(W){return n.getAllVisible().remove(W)}),n.__onAllEvent=(0,m.debounce)(function(){return n.__trgCustom()},0),n}return Db(s,h),s.prototype.open=function(t){void 0===t&&(t={}),this.em.Commands.run(Ig,ng({types:["image"],select:function(){}},t))},s.prototype.close=function(){this.em.Commands.stop(Ig)},s.prototype.isOpen=function(){var t=this.em.Commands;return!!t?.isActive(Ig)},s.prototype.add=function(t,n){return void 0===n&&(n={}),void 0===n.at&&(n.at=0),this.all.add(t,n)},s.prototype.get=function(t){return this.all.where({src:t})[0]||null},s.prototype.getAll=function(){return this.all},s.prototype.getAllVisible=function(){return this.assetsVis},s.prototype.remove=function(t,n){return this.__remove(t,n)},s.prototype.store=function(){return this.getProjectData()},s.prototype.load=function(t){return this.loadProjectData(t)},s.prototype.getContainer=function(){var t;return this.__getBehaviour().container||(null===(t=this.am)||void 0===t?void 0:t.el)},s.prototype.getAssetsEl=function(){var t;return null===(t=this.am)||void 0===t?void 0:t.el.querySelector("[data-el=assets]")},s.prototype.render=function(t){if(!this.getConfig().custom){var n=t||this.getAll().models;if(!this.am){var i=this.__viewParams();i.fu=this.FileUploader(),this.am=new pm(ng({},i)),this.am.render()}return this.assetsVis.reset(n),this.getContainer()}},s.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},s.prototype.addType=function(t,n){this.getAll().addType(t,n)},s.prototype.getType=function(t){return this.getAll().getType(t)},s.prototype.getTypes=function(){return this.getAll().getTypes()},s.prototype.AssetsView=function(){return this.am},s.prototype.FileUploader=function(){return this.fu||(this.fu=new e0(this.__viewParams())),this.fu},s.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var n=this.em,i=this.events;n.Commands.__onRun(Ig,function(){return t.__propEv(i.open)}),n.Commands.__onStop(Ig,function(){return t.__propEv(i.close)})},s.prototype.postRender=function(t){var n;this.config.dropzone&&(null===(n=this.fu)||void 0===n||n.initDropzone(t))},s.prototype.setTarget=function(t){this.assetsVis.target=t},s.prototype.onSelect=function(t){this.assetsVis.onSelect=t},s.prototype.onClick=function(t){this.config.onClick=t},s.prototype.onDblClick=function(t){this.config.onDblClick=t},s.prototype.__propEv=function(t){for(var n,i,u=[],y=1;y<arguments.length;y++)u[y-1]=arguments[y];(n=this.em).trigger.apply(n,t0([t],u,!1)),(i=this.getAll()).trigger.apply(i,t0([t],u,!1))},s.prototype.__trgCustom=function(){var t=this.__getBehaviour(),n=this.getConfig().custom;(t.container||n.open)&&this.em.trigger(this.events.custom,this.__customData())},s.prototype.__customData=function(){var t=this,n=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:n.types||[],container:n.container,close:function(){return t.close()},remove:function(i,u){return t.remove(i,u)},select:function(i,u){var y=t.add(i);(0,m.isFunction)(n.select)&&n.select(y,u)},options:n.options||{}}},s.prototype.__behaviour=function(t){return void 0===t&&(t={}),this._bhv=ng(ng({},this._bhv||{}),t)},s.prototype.__getBehaviour=function(t){return void 0===t&&(t={}),this._bhv||{}},s.prototype.destroy=function(){var t,n;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),null===(t=this.fu)||void 0===t||t.remove(),null===(n=this.am)||void 0===n||n.remove(),this._bhv={}},s}(Te);const av=Tb;var ey=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Rg=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t,n)||this,u=n.em,y={};i.em=u,t.frames||(y.component=t.component,y.styles=t.styles,["component","styles"].map(function(ce){return i.unset(ce)}));var W=new ze(u.Canvas,t.frames||[y]);return W.page=i,i.set("frames",W),!i.getId()&&i.set("id",u?.Pages._createId()),u?.UndoManager.add(W),i}return ey(s,h),s.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},s.prototype.onRemove=function(){this.getFrames().reset()},s.prototype.getFrames=function(){return this.get("frames")},s.prototype.getId=function(){return this.id},s.prototype.getName=function(){return this.get("name")},s.prototype.setName=function(t){return this.set({name:t})},s.prototype.getAllFrames=function(){return this.getFrames().models||[]},s.prototype.getMainFrame=function(){return this.getFrames().at(0)},s.prototype.getMainComponent=function(){var t=this.getMainFrame();return t?.getComponent()},s.prototype.toJSON=function(t){void 0===t&&(t={});var n=R.Kx.prototype.toJSON.call(this,t),i=(0,m.result)(this,"defaults");return(0,m.forEach)(n,function(u,y){0===y.indexOf("_")&&delete n[y]}),(0,m.forEach)(i,function(u,y){n[y]===u&&delete n[y]}),n},s}(R.Kx);var fm=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ph=function(){return ph=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},ph.apply(this,arguments)},Vh=function(h){function s(t,n){var i=h.call(this,t)||this;return i.on("reset",i.onReset),i.on("remove",i.onRemove),i.model=function(u,y){return void 0===y&&(y={}),new Rg(u,ph(ph({},y),{em:n}))},i}return fm(s,h),s.prototype.onReset=function(t,n){var i,u=this;null===(i=n?.previousModels)||void 0===i||i.map(function(y){return u.onRemove(y,u,n)})},s.prototype.onRemove=function(t,n,i){void 0===i&&(i={}),i.fromUndo||i.temporary||null==t||t.onRemove()},s}(R.pM);const Kv=Vh;var ty=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),og=function(){return og=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},og.apply(this,arguments)},sv="change:selected",cw=function(h){function s(t){var n=h.call(this,t,"PageManager",new Kv([],t),Wn)||this;n.events=Wn,n.storageKey="pages",(0,m.bindAll)(n,"_onPageChange");var i=new Ce.A(n,{_undo:!0});return n.model=i,n.pages.on("reset",function(u){return u.at(0)&&n.select(u.at(0))}),n.pages.on("all",n.__onChange,n),i.on(sv,n._onPageChange),n}return ty(s,h),Object.defineProperty(s.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),s.prototype.getAll=function(){return function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],this.all.models,!0)},s.prototype.__onChange=function(t,n,i,u){this.em.trigger(this.events.all,{event:t,page:n,options:u||i})},s.prototype.onLoad=function(){var t,n=this,i=n.pages,u=n.config,y=n.em,I={silent:!0},W=(null===(t=u.pages)||void 0===t?void 0:t.map(function(ie){return new Rg(ie,{em:y,config:u})}))||[];i.add(W,I);var ce=i.length?this._initPage():this.add({type:"main"},I);ce&&this.select(ce,I)},s.prototype._onPageChange=function(t,n,i){var u=this.em,y=this.events,I=u.Layers,W=n.getMainComponent();I&&W&&I.setRoot(W),u.trigger(y.select,n,t.previous("selected")),this.__onChange(sv,n,i)},s.prototype.postLoad=function(){var t=this,n=t.em,u=t.pages,y=n.UndoManager;y.add(t.model),y.add(u),u.on("add remove reset change",function(I,W,ce){return n.changesUp(ce||W)})},s.prototype.add=function(t,n){var i=this;void 0===n&&(n={});var u=this.em,y=this.events;t.id=t.id||this._createId();var I=function(){var W=i.pages.add(new Rg(t,{em:i.em,config:i.config}),n);return n.select&&i.select(W),W};return!n.silent&&u.trigger(y.addBefore,t,I,n),n.abort?void 0:I()},s.prototype.remove=function(t,n){var i=this;void 0===n&&(n={});var u=this.em,y=this.events,I=(0,m.isString)(t)?this.get(t):t,W=function(){return I&&i.pages.remove(I,n),I};return!n.silent&&u.trigger(y.removeBefore,I,W,n),!n.abort&&W()},s.prototype.move=function(t,n){void 0===n&&(n={});var i=this.pages,u=(0,m.isString)(t)?this.get(t):t,y=n.at,I=void 0===y?0:y,W=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(n,["at"]);if(u){var ce=i.indexOf(u)===I;if(!(I<0||I>=i.length||ce))return this.remove(u,og(og({},W),{temporary:!0})),i.add(u,og(og({},W),{at:I})),u}},s.prototype.get=function(t){return this.pages.filter(function(n){return n.get(n.idAttribute)===t})[0]},s.prototype.getMain=function(){var t=this.pages;return t.filter(function(n){return"main"===n.get("type")})[0]||t.at(0)},s.prototype.getAllWrappers=function(){var t=this.getAll();return(0,m.unique)((0,m.flatten)(t.map(function(n){return n.getAllFrames().map(function(i){return i.getComponent()})})))},s.prototype.select=function(t,n){void 0===n&&(n={});var i=this,u=i.em,y=i.model,I=i.events,W=(0,m.isString)(t)?this.get(t):t;return W&&(u.trigger(I.selectBefore,W,n),y.set("selected",W,n)),this},s.prototype.getSelected=function(){return this.model.get("selected")},s.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(n){return t[n]=0})},s.prototype.store=function(){return this.getProjectData()},s.prototype.load=function(t){var n=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach(function(i){return i.getFrames().initRefs()}),n},s.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},s.prototype._createId=function(){var t,n=this.getAll().length+16,i=this.getAllMap();do{t=(0,X.createId)(n)}while(i[t]);return t},s}(Te);const uw=cw;var r0={placeholder:"eg. Text here"};const dw={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:r0,alt:r0,title:r0,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var Mb;!function(h){h.add="i18n:add",h.update="i18n:update",h.locale="i18n:locale"}(Mb||(Mb={}));const ux=Mb;var Ab=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pw=function(h){function s(t){var n=h.call(this,t,"I18n",{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:dw},messagesAdd:void 0})||this;n.events=ux;var i=n.config.messagesAdd;return i&&n.addMessages(i),n.config.detectLocale&&(n.config.locale=n._localLang()),n}return Ab(s,h),s.prototype.setLocale=function(t){var n=this,u=n.config;return n.em.trigger(n.events.locale,{value:t,valuePrev:u.locale}),u.locale=t,this},s.prototype.getLocale=function(){return this.config.locale},s.prototype.getMessages=function(t,n){void 0===n&&(n={});var i=this.config.messages;return t&&!i[t]&&this._debug("'".concat(t,"' i18n lang not found"),n),t?i[t]:i},s.prototype.setMessages=function(t){var n=this,i=n.em,y=n.events;return n.config.messages=t,i.trigger(y.update,t),this},s.prototype.addMessages=function(t){var n=this,y=n.config.messages;return n.em.trigger(n.events.add,t),this.setMessages((0,X.deepMerge)(y,t)),this},s.prototype.t=function(t,n){void 0===n&&(n={});var i=this.config,u=n.params||{},y=n.l||this.getLocale(),I=n.lFlb||i.localeFallback,W=this._getMsg(t,y,n);return W||(W=this._getMsg(t,I,n)),!W&&this._debug("'".concat(t,"' i18n key not found in '").concat(y,"' lang"),n),W&&(0,m.isString)(W)?this._addParams(W,u):W},s.prototype._localLang=function(){var t=(0,X.hasWin)()&&window.navigator||{},n=t.language||t.userLanguage;return n?n.split("-")[0]:"en"},s.prototype._addParams=function(t,n){var i=new RegExp("{([\\w\\d-]*)}","g");return t.replace(i,function(u,y){return n[y]||""}).trim()},s.prototype._getMsg=function(t,n,i){void 0===i&&(i={});var u=this.getMessages(n,i);if(u){var y=u[t];return!y&&t.indexOf(".")>0&&(y=t.split(".").reduce(function(I,W){if(!(0,m.isUndefined)(I))return I[W]},u)),y}},s.prototype._debug=function(t,n){void 0===n&&(n={});var i=this.em;(n.debug||this.config.debug)&&i&&i.logWarning(t)},s.prototype.destroy=function(){},s}(we);const n0=pw;var lv=function(){return lv=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},lv.apply(this,arguments)},dx=function(){function h(s){void 0===s&&(s={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=lv({},this.defOpts),this.setOptions(s),(0,m.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return h.prototype.getConfig=function(){return this.opts},h.prototype.setOptions=function(s,t){void 0===s&&(s={}),this.opts=lv(lv({},t?this.defOpts:this.opts),s),this.setup()},h.prototype.setup=function(){var s=this.opts,t=s.prefix||"",n=s.appendTo||document.body,i=this.container;for(i||((i=document.createElement("div")).className="".concat(t,"resizer-c"),n.appendChild(i),this.container=i);i.firstChild;)i.removeChild(i.firstChild);var u={};for(var y in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(W){return u[W]=s[W]?function(ce,ie){void 0===ie&&(ie={});var Re=ie.prefix||"",qe=document.createElement("i");return qe.className=Re+"resizer-h "+Re+"resizer-h-"+ce,qe.setAttribute("data-"+Re+"handler",ce),qe}(W,s):null}),u){var I=u[y];I&&i.appendChild(I)}this.handlers=u,this.mousePosFetcher=s.mousePosFetcher,this.updateTarget=s.updateTarget,this.posFetcher=s.posFetcher,this.onStart=s.onStart,this.onMove=s.onMove,this.onEnd=s.onEnd,this.onUpdateContainer=s.onUpdateContainer},h.prototype.toggleFrames=function(s){if(this.opts.silentFrames){var t=document.querySelectorAll("iframe");(0,m.each)(t,function(n){return n.style.pointerEvents=s?"none":""})}},h.prototype.isHandler=function(s){var t=this.handlers;for(var n in t)if(t[n]===s)return!0;return!1},h.prototype.getFocusedEl=function(){return this.el},h.prototype.getParentEl=function(){var s;return null===(s=this.el)||void 0===s?void 0:s.parentElement},h.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},h.prototype.getElementPos=function(s,t){void 0===t&&(t={});var y,I,n=this.posFetcher;return n?n(s,t):(y=window,{left:(I=s.getBoundingClientRect()).left+y.pageXOffset,top:I.top+y.pageYOffset,width:I.width,height:I.height})},h.prototype.focus=function(s){s&&s===this.el||(this.el=s,this.updateContainer({forceShow:!0}),(0,jt.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},h.prototype.blur=function(){this.container.style.display="none",this.el&&((0,jt.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},h.prototype.start=function(s){var t=s;if(0===t.button){t.preventDefault(),t.stopPropagation();var n=this.el,i=this.getParentEl(),u=this.opts||{},y=this.mousePosFetcher,I="data-"+u.prefix+"handler",W=this.getElementPos(n,{avoidFrameZoom:!0,avoidFrameOffset:!0}),ce=this.getElementPos(i),ie=t.target;this.handlerAttr=ie.getAttribute(I),this.clickedHandler=ie,this.startDim={t:W.top,l:W.left,w:W.width,h:W.height},this.rectDim={t:W.top,l:W.left,w:W.width,h:W.height},this.startPos=y?y(t):{x:t.clientX,y:t.clientY},this.parentDim={t:ce.top,l:ce.left,w:ce.width,h:ce.height};var Re=this.getDocumentEl();this.docs=Re,(0,jt.on)(Re,"pointermove",this.move),(0,jt.on)(Re,"keydown",this.handleKeyDown),(0,jt.on)(Re,"pointerup",this.stop),(0,m.isFunction)(this.onStart)&&this.onStart(t,{docs:Re,config:u,el:n,resizer:this}),this.toggleFrames(!0),this.move(t)}},h.prototype.move=function(s){var t=s,n=this.onMove,i=this.mousePosFetcher,u=i?i(t):{x:t.clientX,y:t.clientY};this.currentPos=u,this.delta={x:u.x-this.startPos.x,y:u.y-this.startPos.y},this.keys={shift:t.shiftKey,ctrl:t.ctrlKey,alt:t.altKey},this.rectDim=this.calc(this),this.updateRect(!1),n&&n(t)},h.prototype.stop=function(s){var t=this.el,n=this.opts,i=this.docs||this.getDocumentEl();(0,jt.AU)(i,"pointermove",this.move),(0,jt.AU)(i,"keydown",this.handleKeyDown),(0,jt.AU)(i,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,m.isFunction)(this.onEnd)&&this.onEnd(s,{docs:i,config:n,el:t,resizer:this}),delete this.docs},h.prototype.updateRect=function(s){var t=this.el,n=this.opts,i=this.rectDim,u=this.updateTarget,y=this.getSelectedHandler(),I=n.unitHeight,W=n.unitWidth,ce=n.keyWidth,ie=n.keyHeight;if((0,m.isFunction)(u))u(t,i,{store:s,selectedHandler:y,resizer:this,config:n});else{var Re=t.style;Re[ce]=i.w+W,Re[ie]=i.h+I}this.updateContainer()},h.prototype.updateContainer=function(s){var t;void 0===s&&(s={});var n=this,i=n.opts,u=n.container;!i.avoidContainerUpdate&&n.el&&s.forceShow&&(u.style.display="block"),null===(t=this.onUpdateContainer)||void 0===t||t.call(this,{el:u,resizer:this,opts:lv(lv({},i),s)})},h.prototype.getSelectedHandler=function(){var s=this.handlers;if(this.selectedHandler)for(var t in s)if(s[t]===this.selectedHandler)return t},h.prototype.handleKeyDown=function(s){27===s.keyCode&&(this.rectDim=this.startDim,this.stop(s))},h.prototype.handleMouseDown=function(s){var t=s.target;this.isHandler(t)?(this.selectedHandler=t,this.start(s)):t!==this.el&&(delete this.selectedHandler,this.blur())},h.prototype.calc=function(s){var t,n=this.opts||{},i=n.step,u=this.startDim,y=n.minDim,I=n.maxDim,W=s.delta.x,ce=s.delta.y,ie=this.parentDim.w,Re=this.parentDim.h,qe=this.opts.unitWidth,ct=this.opts.unitHeight,qt=this.getParentRect(),_r="%"===qe?u.w/100*ie:u.w,zr="%"===ct?u.h/100*Re:u.h,br={t:u.t-qt.top,l:u.l-qt.left,w:_r,h:zr};if(s){var co=s.handlerAttr;~co.indexOf("r")&&(t="%"===qe?(0,X.normalizeFloat)((_r+W*i)/ie*100,.01):(0,X.normalizeFloat)(_r+W*i,i),t=Math.max(y,t),I&&(t=Math.min(I,t)),br.w=t),~co.indexOf("b")&&(t="%"===ct?(0,X.normalizeFloat)((zr+ce*i)/Re*100,.01):(0,X.normalizeFloat)(zr+ce*i,i),t=Math.max(y,t),I&&(t=Math.min(I,t)),br.h=t),~co.indexOf("l")&&(t="%"===qe?(0,X.normalizeFloat)((_r-W*i)/ie*100,.01):(0,X.normalizeFloat)(_r-W*i,i),t=Math.max(y,t),I&&(t=Math.min(I,t)),br.w=t),~co.indexOf("t")&&(t="%"===ct?(0,X.normalizeFloat)((zr-ce*i)/Re*100,.01):(0,X.normalizeFloat)(zr-ce*i,i),t=Math.max(y,t),I&&(t=Math.min(I,t)),br.h=t);var Bo=n.ratioDefault?!s.keys.shift:s.keys.shift;if(co.indexOf("c")<0&&Bo){var Oi=u.w/u.h;br.w/br.h>Oi?br.h=Math.round(br.w/Oi):br.w=Math.round(br.h*Oi)}for(var Qi in~co.indexOf("l")&&(br.l+=u.w-br.w),~co.indexOf("t")&&(br.t+=u.h-br.h),br)br[Qi]=parseInt("".concat(br[Qi]),10);return br}},h.prototype.getParentRect=function(){var s={left:0,top:0,width:0,height:0},t=this.el;if(!t)return s;var n=t.offsetParent;return n&&"BODY"!==n.tagName&&(s=this.getElementPos(n)),s},h}();const px=dx;var uf=function(){return uf=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},uf.apply(this,arguments)};function kb(h){var s=h.getBoundingClientRect();return{top:s.top+document.body.scrollTop,left:s.left+document.body.scrollLeft}}function ry(h,s){return X.matches.call(h,s)}function o0(h){return h?[h].concat(o0(h.parent())):[]}var Lb=function(){function h(s){this.timeout=null,this.threshold=s}return h.prototype.updateArgs=function(s){this.lastArgs=s},h.prototype.execute=function(s){var t=this;this.timeout||(this.timeout=setTimeout(function(){t.lastArgs&&s(t.lastArgs),t.timeout=null},this.threshold))},h.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},h}(),Ib=function(){return Ib=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ib.apply(this,arguments)},fx=function(){function h(s){this.top=s.top,this.left=s.left,this.height=s.height,this.width=s.width,this.offsets=s.offsets,this.dir=s.dir}return h.prototype.calculateDimensionDifference=function(s){return{topDifference:s.top-this.top,leftDifference:s.left-this.left}},h.prototype.adjustDimensions=function(s){return this.top+=s.topDifference,this.left+=s.leftDifference,this},h.prototype.determinePlacement=function(s,t){return this.dir?t<this.top+this.height/2?"before":"after":s<this.left+this.width/2?"before":"after"},h.prototype.equals=function(s){return!!s&&this.top===s.top&&this.left===s.left&&this.height===s.height&&this.width===s.width&&this.dir===s.dir&&JSON.stringify(this.offsets)===JSON.stringify(s.offsets)},h.prototype.clone=function(){return new h({top:this.top,left:this.left,height:this.height,width:this.width,offsets:Ib({},this.offsets),dir:this.dir})},h.prototype.getDropArea=function(s){var t=this.clone(),n=this.adjustDropDimension(this.width,this.left,s),u=n.newPosition;t.width=n.newSize,t.left=u;var y=this.adjustDropDimension(this.height,this.top,s),W=y.newPosition;return t.height=y.newSize,t.top=W,t},h.prototype.adjustDropDimension=function(s,t,n){var y=n.maxUndroppableDimension,I=s*(1-n.ratio)/2;return I=Math.max(I,n.minUndroppableDimension),{newSize:s-2*(I=Math.min(I,y)),newPosition:t+I}},h.prototype.isWithinBounds=function(s,t){return s>=this.left&&s<=this.left+this.width&&t>=this.top&&t<=this.top+this.height},h}();const Rb=fx;var hx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),a0=function(){return a0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},a0.apply(this,arguments)},mx=function(h){function s(t){var n=h.call(this)||this;return n.sourceNodes=[],n.containerOffset={top:0,left:0},n.moveThreshold=20,n.treeClass=t.treeClass,n.em=t.em,n.containerContext=t.containerContext,n.positionOptions=t.positionOptions,n.dragDirection=t.dragDirection,n.eventHandlers=t.eventHandlers,(0,m.bindAll)(n,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),n.restLastMoveData(),n.rateLimiter=new Lb(n.moveThreshold),n}return hx(s,h),s.prototype.startSort=function(t){this.sourceNodes=t,this.bindDragEventHandlers()},s.prototype.bindDragEventHandlers=function(){(0,jt.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,jt.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,jt.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},s.prototype.recalculateTargetOnScroll=function(){var t=this.lastMoveData.mouseEvent;t&&this.onMove(t)},s.prototype.onMove=function(t){this.rateLimiter.updateArgs(t),this.rateLimiter.execute(this.handleMove.bind(this))},s.prototype.handleMove=function(t){var n,i,u,y,I,W;this.adjustForScroll();var ce=this.lastMoveData.targetNode;null===(i=(n=this.eventHandlers).onMouseMove)||void 0===i||i.call(n,t);var ie=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),Re=ie.mouseXRelative,qe=ie.mouseYRelative,ct=this.getTargetNode(t);if(!ct?.equals(ce)&&(null===(y=(u=this.eventHandlers).onTargetChange)||void 0===y||y.call(u,ce,ct)),!ct)return this.triggerLegacyOnMoveCallback(t,0),this.triggerMoveEvent(Re,qe),void this.restLastMoveData();var qt=this.getDropPosition(ct,Re,qe),_r=qt.index,zr=qt.placement,br=qt.placeholderDimensions;(!br.equals(this.lastMoveData.placeholderDimensions)||zr!==this.lastMoveData.placement)&&(null===(W=(I=this.eventHandlers).onPlaceholderPositionChange)||void 0===W||W.call(I,br,zr)),this.lastMoveData=a0(a0({},this.lastMoveData),{targetNode:ct,mouseEvent:t,index:_r,placement:zr,placeholderDimensions:br}),this.triggerMoveEvent(Re,qe),this.triggerLegacyOnMoveCallback(t,_r)},s.prototype.adjustForScroll=function(){var t,n,i=this.lastMoveData.targetNode;if(i?.element){var u=this.getDim(i?.element);(I=null===(t=i.nodeDimensions)||void 0===t?void 0:t.calculateDimensionDifference(u))&&i.adjustDimensions(I)}var I,y=this.lastMoveData.hoveredNode;y?.element&&(u=this.getDim(y?.element),(I=null===(n=y.nodeDimensions)||void 0===n?void 0:n.calculateDimensionDifference(u))&&y.adjustDimensions(I))},s.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},s.prototype.triggerLegacyOnMoveCallback=function(t,n){var i,u,y,I,W=null===(i=this.sourceNodes[0])||void 0===i?void 0:i.model;null===(y=(u=this.eventHandlers).legacyOnMoveClb)||void 0===y||y.call(u,{event:t,target:W,parent:null===(I=this.lastMoveData.targetNode)||void 0===I?void 0:I.model,index:n})},s.prototype.triggerMoveEvent=function(t,n){var i,u=this.lastMoveData,y=u.targetNode,I=u.placement,W=u.index,ce=W?W+("after"===I?-1:0):0;this.em.trigger("sorter:drag",{target:y?.element||null,targetModel:null===(i=this.lastMoveData.targetNode)||void 0===i?void 0:i.model,sourceModel:this.sourceNodes[0].model,dims:y?.childrenDimensions||[],pos:{index:ce,indexEl:ce,placement:I},x:t,y:n})},s.prototype.getDropPosition=function(t,n,i){var u,y=t.nodeDimensions,I=t.childrenDimensions,W=t.getChildren(),ce=W&&W.length>0;y=y||this.getDim(t.element),t.nodeDimensions=y,I=I||this.getChildrenDim(t),t.childrenDimensions=I;var ie=y.clone(),Re=0,qe="inside";return ce&&(Re=(u=function(ct,qt,_r){for(var zr,br={index:0,placement:"before"},co=0,Bo=0,Oi=0,Qi=0,Ca=0,ys=0,ss=0,il=ct.length;ss<il;ss++){var _l=(zr=ct[ss]).top,wu=zr.left,Nc=zr.height,Ku=zr.width;if(ys=_l+Nc,Qi=wu+Ku/2,Ca=_l+Nc/2,!(Bo&&wu>Bo||Oi&&Ca>=Oi||co&&wu+Ku<co))if(br.index=ss,zr.dir){if(_r<Ca){br.placement="before";break}br.placement="after"}else _r<ys&&(Oi=ys),qt<Qi?(Bo=Qi,br.placement="before"):(co=Qi,br.placement="after")}return br}(I,n,i)).index,qe=u.placement,ie=I[Re].clone(),Re+="after"==qe?1:0),{index:Re,placement:qe,placeholderDimensions:ie}},s.prototype.getTargetNode=function(t){var n;this.cacheContainerPosition(this.containerContext.container);var i=this.getMousePositionRelativeToContainer(t.clientX,t.clientY),u=i.mouseXRelative,y=i.mouseYRelative,I=this.getMouseTargetElement(t),W=this.getFirstElementWithAModel(I);if(W){var ce=null===(n=(0,D.default)(W))||void 0===n?void 0:n.data("model");if(ce){var ie=this.getOrCreateHoveredNode(ce),Re=this.getDropPosition(ie,u,y).index,qe=this.getValidParent(ie,Re,u,y);return this.getOrReuseTargetNode(qe)}}},s.prototype.getOrCreateHoveredNode=function(t){var n=this.lastMoveData.hoveredNode,i=new this.treeClass(t),u=i.equals(n)?n:i;return this.lastMoveData.hoveredNode=u,u},s.prototype.getOrReuseTargetNode=function(t){var n=this.lastMoveData.targetNode;return t?.equals(n)?n:t},s.prototype.getMouseTargetElement=function(t){var n=this.containerContext.customTarget,i=this.containerContext.document.elementFromPoint(t.clientX,t.clientY);return n?n({event:t}):i},s.prototype.onDragStart=function(t){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(t)},s.prototype.endDrag=function(){this.dropDragged()},s.prototype.cancelDrag=function(){var t,n;null===(n=(t=this.eventHandlers).onTargetChange)||void 0===n||n.call(t,this.lastMoveData.targetNode,void 0),this.finalizeMove()},s.prototype.finalizeMove=function(){var t,n,i,u;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),null===(n=(t=this.eventHandlers).onEnd)||void 0===n||n.call(t),null===(u=(i=this.eventHandlers).legacyOnEnd)||void 0===u||u.call(i),this.restLastMoveData(),this.rateLimiter.clearTimeout()},s.prototype.dropDragged=function(){var t,n,i=this.lastMoveData;null===(n=(t=this.eventHandlers).onDrop)||void 0===n||n.call(t,i.targetNode,this.sourceNodes,i.index),this.finalizeMove()},s.prototype.triggerOnDragEndEvent=function(){var t=this.lastMoveData.targetNode,n=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:t?t.getChildren():null,modelToDrop:n?.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(i){return i.element}),srcModel:n?.model,trg:t?.element,trgModel:t?.model,draggable:!0,droppable:!0},dst:t?.element,srcEl:n?.element})},s.prototype.getFirstElementWithAModel=function(t){for(;t&&this.containerContext.container.contains(t);){if(void 0!==(0,D.default)(t).data("model"))return t;t=t.parentElement}return null},s.prototype.getValidParent=function(t,n,i,u){if(t){var y=this.lastMoveData.targetNode,I=t.equals(y);if(t.nodeDimensions=I?y.nodeDimensions:this.getDim(t.element),!t.isWithinDropBounds(i,u))return this.handleParentTraversal(t,i,u);if(I&&n===this.lastMoveData.index)return y;var W=this.sourceNodes.some(function(ce){return t.canMove(ce,n)});return this.triggerDragValidation(W,t),W?t:this.handleParentTraversal(t,i,u)}},s.prototype.handleParentTraversal=function(t,n,i){var u=t.getParent();if(u){var y=this.getIndexInParent(u,t,t.nodeDimensions,n,i);return this.getValidParent(u,y,n,i)}},s.prototype.getIndexInParent=function(t,n,i,u,y){var I=t?.indexOfChild(n);return i.dir=this.getDirection(n.element,t.element),I+("after"==i.determinePlacement(u,y)?1:0)},s.prototype.triggerDragValidation=function(t,n){var i=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:t,src:i?.element,srcModel:i?.model,trg:n.element,trgModel:n.model}),i},s.prototype.cleanupEventListeners=function(){var t=this.containerContext.container;(0,jt.AU)(t,"dragstart",this.onDragStart),(0,jt.AU)(t,"mousemove dragover",this.onMove),(0,jt.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},s.prototype.getDirection=function(t,n){return this.dragDirection===_c.A.Vertical||this.dragDirection!==_c.A.Horizontal&&function(u,y){if((0,jt.ir)(u))return!1;var I=u.style||{},W=(0,D.default)(u),ce=(0,D.default)(y);if(I.overflow&&"visible"!==I.overflow)return!1;var qe,ie=W.css("float");return(!ie||"none"===ie)&&("flex"!==ce.css("display")||"column"===ce.css("flex-direction"))&&!!function(Re){switch(Re){case"static":case"relative":case"":return!0;default:return!1}}(I.position)&&(["TR","TBODY","THEAD","TFOOT"].includes(u.tagName)||(qe=W.css("display"),["block","list-item","table","flex","grid"].includes(qe)))}(t,n)},s.prototype.getChildrenDim=function(t){var n=this,i=[],u=t.element;if(!u)return[];var y=t.getChildren();return y&&0!==y.length?((0,m.each)(y,function(I,W){var ce=I.element;if(ce&&((0,jt.ir)(ce)||ry(ce,n.containerContext.itemSel))){var ie=n.getDim(ce);ie.dir=n.getDirection(ce,u),i.push(ie)}}),i):[]},s.prototype.getMousePositionRelativeToContainer=function(t,n){var i=n-this.containerOffset.top+this.containerContext.container.scrollTop,u=t-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var y=this.em.Canvas.getMouseRelativeCanvas({clientX:t,clientY:n},{noScroll:1});u=y.x,i=y.y}return{mouseXRelative:u,mouseYRelative:i}},s.prototype.cacheContainerPosition=function(t){var n=kb(t),i=this.positionOptions.windowMargin?Math.abs(n.top):n.top,u=this.positionOptions.windowMargin?Math.abs(n.left):n.left;this.containerOffset={top:i,left:u}},s.prototype.getDim=function(t){var n,i,u,y,I=this.em,W=this.positionOptions.relative,ce=this.positionOptions.windowMargin,ie=I?.Canvas,Re=ie?ie.getElementOffsets(t):{};if(this.positionOptions.canvasRelative&&this.em){var qe=ie.getElementPos(t,{noScroll:1});n=qe.top,i=qe.left,u=qe.height,y=qe.width}else{var ct=kb(t);n=W?t.offsetTop:ct.top-(ce?-1:1)*this.containerOffset.top,i=W?t.offsetLeft:ct.left-(ce?-1:1)*this.containerOffset.left,u=t.offsetHeight,y=t.offsetWidth}return new Rb({top:n,left:i,height:u,width:y,offsets:Re})},s}(R.Ss),gx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vx=function(h){function s(t){var n=h.call(this)||this;return n.pfx=t.pfx||"",n.allowNesting=t.allowNesting||!1,n.container=t.container,n.setElement(t.el),n.offset={top:t.offset.top||0,left:t.offset.left||0},n.moveLimiter=new Lb(100),n}return gx(s,h),s.prototype.show=function(){this.el.style.display="block"},s.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},s.prototype.move=function(t,n){var i=this;this.moveLimiter.updateArgs({elementDimension:t,placement:n}),this.moveLimiter.execute(function(y){i._move(y.elementDimension,y.placement)})},s.prototype._move=function(t,n){var y=0,I=0,W="",ce="";this.setOrientationForDimension(t);var ie=t.top,Re=t.left,qe=t.height,ct=t.width,qt=t.dir,_r=t.offsets;if("inside"===n){if(this.setOrientation("horizontal"),!this.allowNesting)return void this.hide();var br=_r?.paddingTop||5,co=_r?.paddingLeft||5,Bo=_r?.borderTopWidth||0,Oi=_r?.borderLeftWidth||0;y=ie+br+Bo,I=Re+co+Oi,W=Math.max(ct-2*co-(Oi+(_r?.borderRightWidth||0)),1)+"px",ce="auto"}else qt?(W=ct+"px",ce="auto",y="before"===n?ie-0:ie+qe-0,I=Re):(W="auto",ce=qe-0+"px",y=ie+0,I="before"===n?Re-0:Re+ct-0,this.setOrientation("vertical"));this.updateStyles(y,I,W,ce),this.adjustOffset()},s.prototype.setOrientationForDimension=function(t){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),t&&!t.dir&&this.setOrientation("vertical")},s.prototype.setOrientation=function(t){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(t)},s.prototype.updateStyles=function(t,n,i,u){this.el.style.top=t+"px",this.el.style.left=n+"px",i&&(this.el.style.width=i),u&&(this.el.style.height=u)},s.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},s}(R.Ss),Vv=function(){return Vv=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Vv.apply(this,arguments)},_x=function(){function h(s){var n,i,t=(n=s,i={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:_c.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}},uf(uf(uf({},i),n),{containerContext:uf(uf({},i.containerContext),n.containerContext),positionOptions:uf(uf({},i.positionOptions),n.positionOptions),dragBehavior:uf(uf({},i.dragBehavior),n.dragBehavior),eventHandlers:uf(uf({},i.eventHandlers),n.eventHandlers)}));(0,m.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=t.containerContext,this.positionOptions=t.positionOptions,this.dragBehavior=t.dragBehavior,this.eventHandlers=Vv(Vv({},t.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=s.em,this.treeClass=s.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new mx({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return h.prototype.startSort=function(s){var t,n,i,u,y,I,W,ce=this.getSourceNodes(s),ie=ce.sourceNodes,Re=ce.sourcesWithModel;this.sourceNodes=ie,this.dropLocationDeterminer.startSort(ie),this.bindDragEventHandlers(),null===(n=(t=this.eventHandlers).onStartSort)||void 0===n||n.call(t,this.sourceNodes,this.containerContext.container);var qe=null===(i=this.sourceNodes[0])||void 0===i?void 0:i.model;null===(y=(u=this.eventHandlers).legacyOnStartSort)||void 0===y||y.call(u,{sorter:this,target:qe,parent:qe&&(null===(I=qe.parent)||void 0===I?void 0:I.call(qe)),index:qe&&(null===(W=qe.index)||void 0===W?void 0:W.call(qe))}),this.em.trigger("sorter:drag:start",s[0],Re[0])},h.prototype.validTarget=function(s,t,n){if(!s)return!1;var i=(0,D.default)(s).data("model");if(!i)return!1;var u=new this.treeClass(i);return this.getSourceNodes(t).sourceNodes.some(function(y){return u.canMove(y,n)})},h.prototype.getSourceNodes=function(s){var t=this,n=s.filter(function(i){return!!i.dragSource||t.findValidSourceElement(i.element)}).map(function(i){var u;return{model:null===(u=(0,D.default)(i.element))||void 0===u?void 0:u.data("model"),content:i.dragSource}});return{sourceNodes:n.sort(function(i,u){return function(y,I){var W=o0(y),ce=o0(I),ie=ce.filter(function(qe){return W.includes(qe)})[0];if(!ie)return y.model.index()-I.model.index();var Re=ce[ce.indexOf(ie)-1];return W[W.indexOf(ie)-1].index()-Re.index()}(i.model,u.model)}).map(function(i){return new t.treeClass(i.model,i.content)}),sourcesWithModel:n}},h.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},h.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},h.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},h.prototype.handlePlaceholderMove=function(s,t){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(s,t)},h.prototype.createPlaceholder=function(){return new vx({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},h.prototype.ensurePlaceholderElement=function(){var s=this.placeholder.el,t=this.containerContext.container;s.ownerDocument.contains(s)||t.append(this.placeholder.el)},h.prototype.updateOffset=function(){var s,t=(null===(s=this.em)||void 0===s?void 0:s.get("canvasOffset"))||{};this.positionOptions.offsetTop=t.top,this.positionOptions.offsetLeft=t.left},h.prototype.findValidSourceElement=function(s){return s&&!ry(s,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(s=function(t,n){if(t)for(var i=t.parentNode;i&&1===i.nodeType;){if(ry(i,n))return i;i=i.parentNode}}(s,this.containerContext.itemSel)),s},h.prototype.bindDragEventHandlers=function(){(0,jt.on)(this.containerContext.document,"keydown",this.rollback)},h.prototype.updatePlaceholderPosition=function(s,t){this.placeholder.move(s,t)},h.prototype.cleanupEventListeners=function(){(0,jt.AU)(this.containerContext.document,"keydown",this.rollback)},h.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},h.prototype.rollback=function(s){(0,jt.AU)(this.containerContext.document,"keydown",this.rollback),"Escape"===s.key&&this.cancelDrag()},h.prototype.triggerNullOnEndMove=function(s){var t,n,i,u,y,I=null===(t=this.sourceNodes)||void 0===t?void 0:t[0].model,W={target:I,parent:I&&(null===(n=I.parent)||void 0===n?void 0:n.call(I)),index:I&&(null===(i=I.index)||void 0===i?void 0:i.call(I))};null===(y=(u=this.eventHandlers).legacyOnEndMove)||void 0===y||y.call(u,null,this,Vv(Vv({},W),{cancelled:s}))},h}();const Fb=_x;var jb=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),zv=function(){return zv=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},zv.apply(this,arguments)},Hv={id:"sorter-target",type:Pt.F.Target},yx=function(h){function s(t){var I=t.positionOptions,ce=t.eventHandlers,ie=void 0===ce?{}:ce,Re=h.call(this,{em:t.em,treeClass:t.treeClass,containerContext:t.containerContext,positionOptions:void 0===I?{}:I,dragBehavior:t.dragBehavior,eventHandlers:zv(zv({},ie),{onStartSort:function(qe,ct){var qt;null===(qt=ie.onStartSort)||void 0===qt||qt.call(ie,qe,ct),Re.onStartSort()},onDrop:function(qe,ct,qt){var _r;null===(_r=ie.onDrop)||void 0===_r||_r.call(ie,qe,ct,qt),Re.onDrop(qe,ct,qt)},onTargetChange:function(qe,ct){var qt;null===(qt=ie.onTargetChange)||void 0===qt||qt.call(ie,qe,ct),Re.onTargetChange(qe,ct)},onMouseMove:function(qe){var ct;null===(ct=ie.onMouseMove)||void 0===ct||ct.call(ie,qe),Re.onMouseMove(qe)}})})||this;return Re.targetIsText=!1,Re.onMouseMove=function(qe){var ct;Re.targetIsText&&null!==(ct=Re.sourceNodes)&&void 0!==ct&&ct.some(function(qt){return qt.isTextable()})&&Re.updateTextViewCursorPosition(qe)},Re.onDrop=function(qe,ct,qt){qe&&ct.length>0?0===Re.handleNodeAddition(qe,ct,"number"==typeof qt?qt:-1).length&&Re.triggerNullOnEndMove(!1):Re.triggerNullOnEndMove(!0),qe?.restNodeState(),Re.placeholder.hide()},Re.onTargetChange=function(qe,ct){var qt;qe?.restNodeState();var _r=Re.em.Canvas;if(!ct)return Re.placeholder.hide(),void _r.removeSpots(Hv);ct?.setSelectedParentState(),Re.targetIsText=ct.isTextNode(),Re.targetIsText&&null!==(qt=Re.sourceNodes)&&void 0!==qt&&qt.some(function(zr){return zr.isTextable()})?(ct.setContentEditable(!0),Re.placeholder.hide()):Re.placeholder.show(),[Pt.F.Select,Pt.F.Hover,Pt.F.Spacing].forEach(function(zr){return _r.removeSpots({type:zr})}),_r.addSpot(zv(zv({},Hv),{component:ct.model}))},(0,m.bindAll)(Re,"handleScrollEvent"),Re}return jb(s,h),s.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},s.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),h.prototype.bindDragEventHandlers.call(this)},s.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),h.prototype.cleanupEventListeners.call(this)},s.prototype.handleScrollEvent=function(){for(var t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var u=null===(t=n?.[0])||void 0===t?void 0:t.frame;this.em.Canvas.getCanvasView().frame===u&&this.recalculateTargetOnScroll()},s.prototype.handleNodeAddition=function(t,n,i){var u=this;return n.reduce(function(y,I){if(!t.canMove(I,i))return y;if(u.isPositionChanged(t,I,i)){var W=u.moveNode(t,I,i),ce=W.index;y.push(W.addedNode),i=ce}return i++,y},[])},s.prototype.isPositionChanged=function(t,n,i){var u=n.getParent(),y=u?u.indexOfChild(n):-1;u?.model.cid===t.model.cid&&y<i&&i--;var I=u?.model.cid===t.model.cid,W=y===i,ce=this.targetIsText&&n.isTextable();return!(I&&W&&!ce)},s.prototype.moveNode=function(t,n,i){var u=n.getParent();if(u){var y=u.indexOfChild(n);u.removeChildAt(y,{temporary:!0}),u.model.cid===t.model.cid&&y<i&&i--}var I=t.addChildAt(n,i,{action:"move-component"});return I&&this.triggerEndMoveEvent(I),{addedNode:I,index:i}},s.prototype.triggerEndMoveEvent=function(t){var n,i,u,y,I,W;null===(i=(n=this.eventHandlers).legacyOnEndMove)||void 0===i||i.call(n,t.model,this,{target:t.model,parent:t.model&&(null===(y=(u=t.model).parent)||void 0===y?void 0:y.call(u)),index:t.model&&(null===(W=(I=t.model).index)||void 0===W?void 0:W.call(I))})},s.prototype.finalizeMove=function(){var t,n;null===(t=this.em)||void 0===t||t.Canvas.removeSpots(Hv),null===(n=this.sourceNodes)||void 0===n||n.forEach(function(i){return i.restNodeState()}),this.setAutoCanvasScroll(!1),h.prototype.finalizeMove.call(this)},s.prototype.updateTextViewCursorPosition=function(t){var n=this.em;if(n){var i=n.Canvas,u=i.getDocument(),y=null,I=(0,jt.G2)(t);if(u.caretPositionFromPoint){var W=u.caretPositionFromPoint(I.clientX,I.clientY);W&&(y=u.createRange()).setStart(W.offsetNode,W.offset)}else u.caretRangeFromPoint?y=u.caretRangeFromPoint(I.clientX,I.clientY):t.rangeParent&&(y=u.createRange()).setStart(t.rangeParent,t.rangeOffset);var ce=i.getWindow().getSelection();i.getFrameEl().focus(),ce?.removeAllRanges(),y&&ce?.addRange(y)}},s.prototype.setAutoCanvasScroll=function(t){var n=this.em,i=n?.Canvas;i&&(t?i.startAutoscroll():i.stopAutoscroll())},s}(Fb);const fw=yx;var bx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),s0=function(){return s0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},s0.apply(this,arguments)},wx=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return bx(s,h),s.prototype.defaults=function(){return{values:{}}},s.prototype.initialize=function(){var t=this.collection;this.prop=t?.prop},s.prototype.getId=function(){return this.cid},s.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},s.prototype.getValues=function(t){void 0===t&&(t={});var n=this.get("values");return t.camelCase?Object.keys(n).reduce(function(i,u){return i[(0,X.camelCase)(u)]=n[u],i},{}):n},s.prototype.getLabel=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.getLayerLabel(this)},s.prototype.isSelected=function(){var t;return(null===(t=this.prop)||void 0===t?void 0:t.getSelectedLayer())===this},s.prototype.select=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.selectLayer(this)},s.prototype.remove=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.removeLayer(this)},s.prototype.move=function(t){var n;return null===(n=this.prop)||void 0===n?void 0:n.moveLayer(this,t)},s.prototype.getStylePreview=function(t){var n;return void 0===t&&(t={}),null===(n=this.prop)||void 0===n?void 0:n.getStylePreview(this,t)},s.prototype.hasPreview=function(){var t;return!(null===(t=this.prop)||void 0===t||!t.get("preview"))},s.prototype.upValues=function(t){return void 0===t&&(t={}),this.set("values",s0(s0({},this.getValues()),t))},s}(R.Kx);const ny=wx;var hw=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nb=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return hw(s,h),s.prototype.initialize=function(t,n){void 0===n&&(n={}),this.prop=n.prop},s}(R.pM);const l0=Nb;Nb.prototype.model=ny;var mw=O(3161),gw=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),c0=function(h){function s(t){return h.call(this,t)||this}return gw(s,h),s.prototype.getChildren=function(){return this.model instanceof l0?this.model.models.map(function(t){return new s(t)}):null},s.prototype.getParent=function(){var t=this.model instanceof ny?this.model.collection:null;return t?new s(t):null},s.prototype.addChildAt=function(t,n){if(this.model instanceof ny)throw Error("Cannot add a layer model to another layer model");return new s(this.model.add(t.model,{at:n}))},s.prototype.removeChildAt=function(t){if(this.model instanceof ny)throw Error("Cannot remove a layer model from another layer model");var n=this.model.at(t);n&&this.model.remove(n)},s.prototype.indexOfChild=function(t){return t.model instanceof ny&&this.model instanceof l0?this.model.indexOf(t.model):-1},s.prototype.canMove=function(t,n){return this.model instanceof l0&&!!t.model},Object.defineProperty(s.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"element",{get:function(){var t;return null===(t=this.view)||void 0===t?void 0:t.el},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),s}(mw.$),xx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),u0=function(){return u0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},u0.apply(this,arguments)},Cx=function(h){function s(t){var y=t.positionOptions,W=t.eventHandlers,ce=void 0===W?{}:W,ie=h.call(this,{em:t.em,treeClass:c0,containerContext:t.containerContext,positionOptions:void 0===y?{}:y,dragBehavior:t.dragBehavior,eventHandlers:u0({onStartSort:function(Re,qe){var ct;null===(ct=ce.onStartSort)||void 0===ct||ct.call(ce,Re,qe),ie.onLayerStartSort(Re)},onDrop:function(Re,qe,ct){var qt;null===(qt=ce.onDrop)||void 0===qt||qt.call(ce,Re,qe,ct),ie.onLayerDrop(Re,qe,ct)},onEnd:function(){ie.placeholder.hide()}},ce)})||this;return ie.onLayerStartSort=function(Re){ie.em.clearSelection();var qe=Re[0];ie.em.trigger("sorter:drag:start",qe?.element,qe?.model),ie.placeholder.show()},ie.onLayerDrop=function(Re,qe,ct){if(Re){ct="number"==typeof ct?ct:-1;for(var qt=0;qt<qe.length;qt++){var _r=qe[qt];if(Re.canMove(_r,qt)){var zr=_r.getParent(),br=-1;zr&&(br=zr.indexOfChild(_r),zr.removeChildAt(br)),Re.addChildAt(_r,ct=br<ct?ct-1:ct)}}ie.placeholder.hide()}},ie}return xx(s,h),s}(Fb);const Ex=Cx;var vw=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),oy=function(){return oy=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},oy.apply(this,arguments)};const _w=function(h){function s(t){var n=h.call(this,t,"Utils")||this;return n.Sorter=fw,n.Resizer=px,n.Dragger=Tf.A,n.ComponentSorter=fw,n.StyleManagerSorter=Ex,n.helpers=oy({},X),n}return vw(s,h),s.prototype.destroy=function(){},s}(we);var df,fh={},Zp={16:!1,18:!1,17:!1,91:!1},yw="all",cv={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},bw={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Ub=function(h){return bw[h]||h.toUpperCase().charCodeAt(0)},Gv=[];for(df=1;df<20;df++)bw["f"+df]=111+df;function qv(h,s){for(var t=h.length;t--;)if(h[t]===s)return t;return-1}function Ox(h,s){if(h.length!=s.length)return!1;for(var t=0;t<h.length;t++)if(h[t]!==s[t])return!1;return!0}var $v={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function iy(h){var s,t=h.keyCode,n=qv(Gv,t);if(n>=0&&Gv.splice(n,1),93!=t&&224!=t||(t=91),t in Zp)for(s in Zp[t]=!1,cv)cv[s]==t&&(pf[s]=!1)}function Dx(){for(df in Zp)Zp[df]=!1;for(df in cv)pf[df]=!1}function pf(h,s,t){var n,i;n=xw(h),void 0===t&&(t=s,s="all");for(var u=0;u<n.length;u++)i=[],(h=n[u].split("+")).length>1&&(i=d0(h),h=[h[h.length-1]]),(h=Ub(h=h[0]))in fh||(fh[h]=[]),fh[h].push({shortcut:n[u],scope:s,method:t,key:n[u],mods:i})}for(df in cv)pf[df]=!1;function Bb(){return yw||"all"}function xw(h){var s;return""==(s=(h=h.replace(/\s/g,"")).split(","))[s.length-1]&&(s[s.length-2]+=","),s}function d0(h){for(var s=h.slice(0,h.length-1),t=0;t<s.length;t++)s[t]=cv[s[t]];return s}function Wb(h,s,t){h.addEventListener?h.addEventListener(s,t,!1):h.attachEvent&&h.attachEvent("on"+s,function(){t(window.event)})}pf.setScope=function(h){yw=h||"all"},pf.getScope=Bb,pf.deleteScope=function(h){var s,t,n;for(s in fh)for(t=fh[s],n=0;n<t.length;)t[n].scope===h?t.splice(n,1):n++},pf.filter=function(h){var s=(h.target||h.srcElement).tagName;return!("INPUT"==s||"SELECT"==s||"TEXTAREA"==s)},pf.isPressed=function(h){return"string"==typeof h&&(h=Ub(h)),-1!=qv(Gv,h)},pf.getPressedKeyCodes=function(){return Gv.slice(0)},pf.unbind=function(h,s){var t,n,i,u,y,I=[];for(t=xw(h),u=0;u<t.length;u++){if((n=t[u].split("+")).length>1&&(I=d0(n)),h=Ub(h=n[n.length-1]),void 0===s&&(s=Bb()),!fh[h])return;for(i=0;i<fh[h].length;i++)(y=fh[h][i]).scope===s&&Ox(y.mods,I)&&(fh[h][i]={})}},pf.handlers=fh,pf.init=function(h){Wb(h.document,"keydown",function(s){!function(t){var n,i,u,y,I,W;if(-1==qv(Gv,n=t.keyCode)&&Gv.push(n),93!=n&&224!=n||(n=91),n in Zp)for(u in Zp[n]=!0,cv)cv[u]==n&&(pf[u]=!0);else if(function ww(h){for(df in Zp)Zp[df]=h[$v[df]]}(t),pf.filter.call(this,t)&&n in fh)for(W=Bb(),y=0;y<fh[n].length;y++)if((i=fh[n][y]).scope==W||"all"==i.scope){for(u in I=i.mods.length>0,Zp)(!Zp[u]&&qv(i.mods,+u)>-1||Zp[u]&&-1==qv(i.mods,+u))&&(I=!1);(0!=i.mods.length||Zp[16]||Zp[18]||Zp[17]||Zp[91])&&!I||!1===i.method(t,i)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}(s)}),Wb(h.document,"keyup",iy),Wb(h,"focus",Dx)};const jg=pf;var Sx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cw=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))};(0,X.hasWin)()&&jg.init(window);var Jv=function(h){function s(t){var n=h.call(this,t,"Keymaps",{defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}})||this;return n.keymaster=jg,n.keymaps={},n}return Sx(s,h),s.prototype.onLoad=function(){if(!this.em.isHeadless){var t=this.config.defaults;for(var n in t){var i=t[n];this.add(n,i.keys,i.handler,i.opts||{})}}},s.prototype.add=function(t,n,i,u){void 0===u&&(u={});var y=this.em,I=y.Commands,W=y.getEditor(),ce=y.Canvas,ie={id:t,keys:n,handler:i};return this.keymaps[t]&&this.remove(t),this.keymaps[t]=ie,jg(n,function(Re,qe){var ct,qt={event:Re,h:qe},_r=(0,m.isString)(i)?I.get(i):i;if(!y.isEditing()&&!W.Canvas.isInputFocused()||u.force){u.prevent&&(null===(ct=ce.getCanvasView())||void 0===ct||ct.preventDefault(Re)),(0,m.isFunction)(_r)?_r(W,0,qt):I.runCommand(_r,qt);var zr=[t,qe.shortcut,Re];y.trigger.apply(y,Cw(["keymap:emit"],zr,!1)),y.trigger.apply(y,Cw(["keymap:emit:".concat(t)],zr,!1))}},void 0),y.trigger("keymap:add",ie),ie},s.prototype.get=function(t){return this.keymaps[t]},s.prototype.getAll=function(){return this.keymaps},s.prototype.remove=function(t){var n=this.em,i=this.get(t);if(i)return delete this.keymaps[t],i.keys.split(", ").forEach(function(u){jg.unbind(u.trim())}),n?.trigger("keymap:remove",i),i},s.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach(function(n){return t.remove(n)}),jg.handlers={},this},s.prototype.destroy=function(){this.removeAll(),this.keymaps={}},s}(we);const Px=Jv;var Ew=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Ow=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Ew(s,h),s.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},s.prototype.open=function(){this.set("open",!0)},s.prototype.close=function(){this.set("open",!1)},s}(Ce.A);var Ax=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),p0=function(){return p0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},p0.apply(this,arguments)},Zb=function(h){function s(t){var n=h.call(this,t)||this,i=n.model;return n.listenTo(i,"change:open",n.updateOpen),n.listenTo(i,"change:title",n.updateTitle),n.listenTo(i,"change:content",n.updateContent),n}return Ax(s,h),s.prototype.template=function(t){var n=t.pfx,i=t.ppfx,u=t.content,y=t.title;return'<div class="'.concat(n,"dialog ").concat(i,"one-bg ").concat(i,'two-color">\n      <div class="').concat(n,'header">\n        <div class="').concat(n,'title">').concat(y,'</div>\n        <div class="').concat(n,'btn-close" data-close-modal>&Cross;</div>\n      </div>\n      <div class="').concat(n,'content">\n        <div id="').concat(n,'c">').concat(u,'</div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="').concat(n,'collector" style="display: none"></div>')},s.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},s.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},s.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},s.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},s.prototype.getTitle=function(t){return void 0===t&&(t={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),t.$?this.$title:this.$title.get(0)},s.prototype.updateContent=function(){var t=this.getContent(),n=t.children(),i=this.getCollector(),u=this.model.get("content");n.length&&i.append(n),t.empty().append(u)},s.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get("title"))},s.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},s.prototype.hide=function(){this.model.close()},s.prototype.show=function(){this.model.open()},s.prototype.updateAttr=function(t){var n=this,i=n.pfx,u=n.$el,I=[].slice.call(n.el.attributes).map(function(W){return W.name});u.removeAttr(I.join(" ")),u.attr(p0(p0({},t||{}),{class:"".concat(i,"container ").concat(t&&t.class||"").trim()}))},s.prototype.render=function(){var t=this.$el,n=this.model.toJSON();return n.pfx=this.pfx,n.ppfx=this.ppfx,t.html(this.template(n)),this.updateAttr(),this.updateOpen(),this},s}(Nt);const kx=Zb;var Lx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ix=function(h){function s(t){var n=h.call(this,t,"Modal",{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}})||this;return n.model=new Ow(n),n.model.on("change:open",function(i,u){t.trigger("modal:".concat(u?"open":"close"))}),n.model.on("change",(0,m.debounce)(function(){var i=n._evData(),u=n.config.custom;(0,m.isFunction)(u)&&u(i),t.trigger("modal",i)},0)),n}return Lx(s,h),s.prototype._evData=function(){var t=this,n=this.getTitle(),i=this.getContent(),u=this.model.attributes;return{open:u.open,attributes:u.attributes,title:(0,m.isString)(n)?(0,jt.GZ)(n):n,content:(0,m.isString)(i)?(0,jt.GZ)(i):i.get?i.get(0):i,close:function(){t.close()}}},s.prototype.postRender=function(t){var n=t.model.config.el||t.el,i=this.render();i&&n?.appendChild(i)},s.prototype.open=function(t){void 0===t&&(t={});var n=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set("attributes",n),this.model.open(),this.modal&&this.modal.updateAttr(n),this},s.prototype.close=function(){return this.model.close(),this},s.prototype.onceClose=function(t){return this.em.once("modal:close",t),this},s.prototype.onceOpen=function(t){return this.em.once("modal:open",t),this},s.prototype.isOpen=function(){return!!this.model.get("open")},s.prototype.setTitle=function(t){return this.model.set("title",t),this},s.prototype.getTitle=function(){return this.model.get("title")},s.prototype.setContent=function(t){return this.model.set("content"," "),this.model.set("content",t),this},s.prototype.getContent=function(){return this.model.get("content")},s.prototype.getContentEl=function(){var t;return null===(t=this.modal)||void 0===t?void 0:t.getContent().get(0)},s.prototype.getModel=function(){return this.model},s.prototype.render=function(){var t;if(!this.config.custom){var n=kx.extend(this.config.extend);return this.modal=new n({el:this.modal&&this.modal.el,model:this.model,config:this.config}),null===(t=this.modal)||void 0===t?void 0:t.render().el}},s.prototype.destroy=function(){var t;null===(t=this.modal)||void 0===t||t.remove()},s}(we);const Dw=Ix;var Tw="sw-visibility",Sw="export-template",Pw="open-sm",Mw="open-tm",Ng="open-layers",Aw="open-blocks",Kb="fullscreen",Vb="preview",hh=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const kw=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.get("buttons").length&&i.set("buttons",new Iw(i.module,i.get("buttons"))),i}return hh(s,h),s.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(s.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this.get("active")},set:function(t){this.set("active",t)},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),s}(Ce.A);var Lw=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),f0=function(h){function s(t,n){return h.call(this,t,n,kw)||this}return Lw(s,h),s.prototype.deactivateAllExceptOne=function(t,n){this.forEach(function(i,u){i!==t&&(i.set("active",!1),n&&i.get("buttons").length&&i.get("buttons").deactivateAllExceptOne(t,n))})},s.prototype.deactivateAll=function(t,n){var i=t||"";this.forEach(function(u){u.get("context")==i&&u!==n&&u.set("active",!1,{fromCollection:!0})})},s.prototype.disableAllButtons=function(t){var n=t||"";this.forEach(function(i,u){i.get("context")==n&&i.set("disable",!0)})},s.prototype.disableAllButtonsExceptOne=function(t,n){this.forEach(function(i,u){i!==t&&(i.set("disable",!0),n&&i.get("buttons").length&&i.get("buttons").disableAllButtonsExceptOne(t,n))})},s}(Pr);const Iw=f0;f0.prototype.model=kw;var zb=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Rw=function(h){function s(t,n){var i=h.call(this,t,n)||this,u=i.get("buttons")||[];return i.buttons=new Iw(t,u),i}return zb(s,h),s.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(s.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(t){this.set("buttons",t)},enumerable:!1,configurable:!0}),s}(Ce.A);var Fx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fw=function(h){function s(t,n){return h.call(this,t,n,Rw)||this}return Fx(s,h),s}(Pr);const jx=Fw;Fw.prototype.model=Rw;var Nx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ay=function(){return ay=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},ay.apply(this,arguments)},Ux=function(h){function s(t){var n=h.call(this,t)||this,u=n.model,y=n.em,I=n.pfx,W=n.ppfx,ce=u.className,ie=u.attributes,Re=ie.command,qe=ie.listen;if(n.id=I+u.get("id"),n.activeCls="".concat(I,"active ").concat(W,"four-color"),n.disableCls="".concat(W,"disabled"),n.btnsVisCls="".concat(I,"visible"),n.className=I+"btn"+(ce?" "+ce:""),n.listenTo(u,"change",n.render),n.listenTo(u,"change:active updateActive",n.updateActive),n.listenTo(u,"checkActive",n.checkActive),n.listenTo(u,"change:bntsVis",n.updateBtnsVis),n.listenTo(u,"change:attributes",n.updateAttributes),n.listenTo(u,"change:className",n.updateClassName),n.listenTo(u,"change:disable",n.updateDisable),y&&(0,m.isString)(Re)&&qe){var ct={fromListen:!0};n.listenTo(y,"run:".concat(Re),function(){return u.set("active",!0,ct)}),n.listenTo(y,"stop:".concat(Re),function(){return u.set("active",!1,ct)})}return y&&y.get&&(n.commands=y.get("Commands")),n}return Nx(s,h),s.prototype.tagName=function(){return this.model.get("tagName")},s.prototype.events=function(){return{click:"clicked"}},s.prototype.updateClassName=function(){var t=this.model,n=this.pfx,i=t.className,u=t.get("attributes").class,y="".concat(u||""," ").concat(n,"btn ").concat(i||"");this.$el.attr("class",y.trim())},s.prototype.updateAttributes=function(){var t=this,n=t.em,i=t.model,u=t.$el,y=i.get("attributes")||{},I=n&&n.t&&n.t("panels.buttons.titles.".concat(i.id));u.attr(y),I&&u.attr({title:I}),this.updateClassName()},s.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},s.prototype.updateActive=function(t,n,i){var u;void 0===i&&(i={});var y=this,I=y.model,W=y.commands,ce=y.$el,ie=y.activeCls,Re=i.fromCollection,qe=i.fromListen,ct=I.get("context"),qt=I.get("options"),_r=I.command,zr={};_r&&(W&&(0,m.isString)(_r)?zr=W.get(_r)||{}:(0,m.isFunction)(_r)?zr=W.create({run:_r}):null!==_r&&(0,m.isObject)(_r)&&(zr=W.create(_r)),I.active?(!Re&&(null===(u=I.collection)||void 0===u||u.deactivateAll(ct,I)),I.set("active",!0,{silent:!0}).trigger("checkActive"),!qe&&W.runCommand(zr,ay(ay({},qt),{sender:I})),zr.noStop&&I.set("active",!1)):(ce.removeClass(ie),!qe&&W.stopCommand(zr,ay(ay({},qt),{sender:I,force:1}))))},s.prototype.updateDisable=function(){this.$el[this.model.disable?"addClass":"removeClass"](this.disableCls)},s.prototype.checkActive=function(){var t=this,i=t.$el,u=t.activeCls;t.model.active?i.addClass(u):i.removeClass(u)},s.prototype.clicked=function(){var t=this.model;t.get("bntsVis")||t.disable||!t.command||this.toggleActive()},s.prototype.toggleActive=function(){var t=this.model,n=this.em,i=t.active;i&&!t.togglable||(t.active=!i,i?t.runDefaultCommand&&n.runDefault():t.stopDefaultCommand&&n.stopDefault())},s.prototype.render=function(){var t=this.model,n=t.get("label"),i=this.$el;return!t.get("el")&&i.empty(),this.updateAttributes(),n&&i.append(n),this.checkActive(),this.updateDisable(),this},s}(Nt);const jw=Ux;var Hb=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Bx=function(h){function s(t){var n=h.call(this,{collection:t})||this;return n.listenTo(n.collection,"add",n.addTo),n.listenTo(n.collection,"reset remove",n.render),n.className=n.pfx+"buttons",n}return Hb(s,h),s.prototype.addTo=function(t){this.addToCollection(t)},s.prototype.addToCollection=function(t,n){var i=n||null,u=t.get("el"),y=new jw({el:u,model:t}).render().el;return i?i.appendChild(y):this.$el.append(y),y},s.prototype.render=function(){var t=this,n=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(i){return t.addToCollection(i,n)}),this.$el.append(n),this.$el.attr("class",(0,m.result)(this,"className")),this},s}(Nt);var Wx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gb=function(){return Gb=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Gb.apply(this,arguments)},h0=function(h){function s(t){var n=h.call(this,{model:t,el:t.get("el")})||this;return n.className=n.pfx+"panel",n.id=n.pfx+t.get("id"),n.listenTo(t,"change:appendContent",n.appendContent),n.listenTo(t,"change:content",n.updateContent),n.listenTo(t,"change:visible",n.toggleVisible),t.view=n,n}return Wx(s,h),s.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},s.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},s.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},s.prototype.attributes=function(){return this.model.get("attributes")},s.prototype.initResize=function(){var t=this.em,n=t?.Editor,i=this.model.get("resizable");if(n&&i){var u=!0===i?[!0,!0,!0,!0]:i,y=u.length,I=void 0,W=void 0,ce=void 0,ie=!1;if(2==y)I=(Re=u)[0],ce=Re[0],W=Re[1],ie=Re[1];else if(4==y){var Re;I=(Re=u)[0],W=Re[1],ce=Re[2],ie=Re[3]}var qe=new n.Utils.Resizer(Gb({tc:I,cr:W,bc:ce,cl:ie,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:n.getConfig().stylePrefix,onEnd:function(){t.Canvas.refresh({all:!0})},posFetcher:function(ct,qt){var _r=qt.target,zr=ct.style,br=qe.getConfig(),co=br.keyWidth,Bo=br.keyHeight,Oi=ct.getBoundingClientRect(),Qi="container"==_r,Ca=zr[co],ys=zr[Bo];return{left:0,top:0,width:Ca&&!Qi?parseFloat(Ca):Oi.width,height:ys&&!Qi?parseFloat(ys):Oi.height}}},i&&"boolean"!=typeof i?i:{}));qe.blur=function(){},qe.focus(this.el)}},s.prototype.render=function(){var t=this.model.buttons,n=this.$el,i=this.ppfx,u="".concat(this.className," ").concat(this.id," ").concat(i,"one-bg ").concat(i,"two-color");if(n.addClass(u),this.toggleVisible(),t.length){var y=new Bx(t);n.append(y.render().el)}return n.append(this.model.get("content")),this},s}(Nt);const Zx=h0;var Kx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const Vx=function(h){function s(t){var n=h.call(this,{collection:t})||this;return n.listenTo(t,"add",n.addTo),n.listenTo(t,"reset",n.render),n.listenTo(t,"remove",n.onRemove),n.className=n.pfx+"panels",n}return Kx(s,h),s.prototype.onRemove=function(t){var n=t.view;n&&n.remove()},s.prototype.addTo=function(t){this.addToCollection(t)},s.prototype.addToCollection=function(t,n){var i=n||null,u=t.get("el"),y=new Zx(t),I=y.render().el,W=t.get("appendTo");if(!u)if(W){var ce=document.querySelector(W);ce?.appendChild(I)}else i?i.appendChild(I):this.$el.append(I);return y.initResize(),I},s.prototype.render=function(){var t=this,n=this.$el,i=document.createDocumentFragment();return n.empty(),this.collection.each(function(u){return t.addToCollection(u,i)}),n.append(i),n.attr("class",this.className),this},s}(Nt);var Yv=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),zx=function(h){function s(t){var n=h.call(this,t,"Panels",{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:Tw,className:"fa fa-square-o",command:"core:component-outline",context:Tw,attributes:{title:"View components"}},{id:Vb,className:"fa fa-eye",command:Vb,context:Vb,attributes:{title:"Preview"}},{id:Kb,className:"fa fa-arrows-alt",command:Kb,context:Kb,attributes:{title:"Fullscreen"}},{id:Sw,className:"fa fa-code",command:Sw,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:Pw,className:"fa fa-paint-brush",command:Pw,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Mw,className:"fa fa-cog",command:Mw,togglable:!1,attributes:{title:"Settings"}},{id:Ng,className:"fa fa-bars",command:Ng,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Aw,className:"fa fa-th-large",command:Aw,togglable:!1,attributes:{title:"Open Blocks"}}]}]})||this;return n.panels=new jx(n,n.config.defaults),n}return Yv(s,h),s.prototype.getPanels=function(){return this.panels},s.prototype.getPanelsEl=function(){var t;return null===(t=this.PanelsViewObj)||void 0===t?void 0:t.el},s.prototype.addPanel=function(t){return this.panels.add(t)},s.prototype.removePanel=function(t){return this.panels.remove(t)},s.prototype.getPanel=function(t){var n=this.panels.where({id:t});return n.length?n[0]:null},s.prototype.addButton=function(t,n){var i=this.getPanel(t);return i?i.buttons.add(n):null},s.prototype.removeButton=function(t,n){var i=this.getPanel(t);return i&&i.buttons.remove(n)},s.prototype.getButton=function(t,n){var i=this.getPanel(t);if(i){var u=i.buttons.where({id:n});return u.length?u[0]:null}return null},s.prototype.render=function(){var t;return null===(t=this.PanelsViewObj)||void 0===t||t.remove(),this.PanelsViewObj=new Vx(this.panels),this.PanelsViewObj.render().el},s.prototype.active=function(){this.getPanels().each(function(t){t.buttons.each(function(n){n.get("active")&&n.trigger("updateActive")})})},s.prototype.disableButtons=function(){this.getPanels().each(function(t){t.buttons.each(function(n){n.get("disable")&&n.trigger("change:disable")})})},s.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},s}(we);const Nw=zx;var Qv=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const qb=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Qv(s,h),s.prototype.build=function(t,n){void 0===n&&(n={});var i=n.em,u=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(n,["em"]);if(n.cleanId&&i){var y=i.Css.getAll().toJSON().map(function(I){var W=I.selectors,ce=W&&1===W.length&&W.models[0];return ce&&ce.isId()&&ce.get("name")}).filter(Boolean);u.attributes||(u.attributes=function(I,W){var ce=W.id;return ce&&"i"===ce[0]&&!I.get("script")&&!I.get("script-export")&&!I.get("attributes").id&&y.indexOf(ce)<0&&delete W.id,W})}return t.toHTML(u)},s}(R.Kx);var qx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Uw=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return qx(s,h),s.prototype.build=function(t){var n=this,i=t.toJSON();return this.beforeEach(i),(0,m.each)(i,function(u,y){var I=i[y];if(I instanceof R.Kx)i[y]=n.build(I);else if(I instanceof R.pM){var W=I;i[y]=[],W.length&&W.forEach(function(ce,ie){i[y][ie]=n.build(ce)})}}),i},s.prototype.beforeEach=function(t){delete t.status},s}(R.Kx);const $x=Uw;var m0=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();function Jx(h){var s;return 0===((null===(s=h.toString().match(/\{([\s\S]*)\}/m))||void 0===s?void 0:s[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length}var sy=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return m0(s,h),s.prototype.mapModel=function(t){var n,i=this,u="",y=t.get("script-export")||t.get("script"),I=t.get("type"),W=t.get("components"),ce=t.getId();if(y){var ie=t.get("attributes");ie=(0,m.extend)({},ie,{id:ce}),t.set("attributes",ie,{silent:!0});var Re=t.getScriptString(y),qe=t.get("script-props");if(t.get("scriptUpdated")&&!qe)this.mapJs[I+"-"+ce]={ids:[ce],code:Re};else{var ct=void 0,qt=this.mapJs[I];if(qe&&(ct=t.__getScriptProps()),qt)qt.ids.push(ce),ct&&(qt.props[ce]=ct);else{var _r={ids:[ce],code:Re};ct&&(_r.props=((n={})[ce]=ct,n)),this.mapJs[I]=_r}}}return W.forEach(function(zr){u+=i.mapModel(zr)}),u},s.prototype.build=function(t){this.mapJs={},this.mapModel(t);var n="";for(var i in this.mapJs){var u=this.mapJs[i];if(u.code)if(u.props){if(Jx(u.code))continue;n+="\n          var props = ".concat(JSON.stringify(u.props),";\n          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');\n          var els = document.querySelectorAll(ids);\n          for (var i = 0, len = els.length; i < len; i++) {\n            var el = els[i];\n            (").concat(u.code,".bind(el))(props[el.id]);\n          }")}else{var y="#"+u.ids.join(", #");n+="\n          var items = document.querySelectorAll('".concat(y,"');\n          for (var i = 0, len = items.length; i < len; i++) {\n            (function(){\n").concat(u.code,"\n}.bind(items[i]))();\n          }")}}return n},s}(R.Kx);const Yx=sy;var Xv,g0=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$b=function(){return $b=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},$b.apply(this,arguments)};(0,X.hasWin)()&&(Xv=O(4408),O(8253),O(7389),O(3640));var Bw=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return g0(s,h),s.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},s.prototype.init=function(t){return(0,m.bindAll)(this,"onChange"),this.editor=Xv.fromTextArea(t,$b({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=t,this.editor.on("change",this.onChange),this},s.prototype.onChange=function(){this.trigger("update",this)},s.prototype.getEditor=function(){return this.editor},s.prototype.getElement=function(){return this.element},s.prototype.setElement=function(t){return this.element=t,this},s.prototype.refresh=function(){return this.getEditor().refresh(),this},s.prototype.focus=function(){return this.getEditor().focus(),this},s.prototype.getContent=function(){var t=this.getEditor();return t&&t.getValue()},s.prototype.setContent=function(t,n){var i=this;void 0===n&&(n={});var u=this.editor;if(u){u.setValue(t);var y=this.get("autoFormat");u.autoFormatRange&&(!0===y||Array.isArray(y)&&y.includes(this.get("codeName")))&&(Xv.commands.selectAll(u),u.autoFormatRange(u.getCursor(!0),u.getCursor(!1)),Xv.commands.goDocStart(u)),!n.noRefresh&&setTimeout(function(){return i.refresh()})}},s}(R.Kx);const Qx=Bw;Bw.prototype.CodeMirror=Xv;var Xx=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),eC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Xx(s,h),s.prototype.template=function(t){var n=t.pfx,i=t.codeName,u=t.label;return x(Ww||(Ww=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h}(['\n      <div class="','editor" id="',"",'">\n        <div id="','title">','</div>\n        <div id="','code"></div>\n      </div>\n    '],['\n      <div class="','editor" id="',"",'">\n        <div id="','title">','</div>\n        <div id="','code"></div>\n      </div>\n    '])),n,n,i,n,u,n)},s.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},s.prototype.render=function(){var t,n,i=this,u=i.model,y=i.pfx,I=i.$el,W=u.toJSON(),ce=u.get("input")||(null===(n=(t=u).getElement)||void 0===n?void 0:n.call(t));return W.pfx=y,I.html(this.template(W)),I.attr("class","".concat(y,"editor-c")),I.find("#".concat(y,"code")).append(ce),this},s}(R.Ss);const tC=eC;var Ww,Yb=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),v0=function(){return v0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},v0.apply(this,arguments)},Bf=function(h){function s(t){var n=h.call(this,t,"CodeManager",{stylePrefix:"cm-",optsCodeViewer:{}})||this;n.EditorView=tC;var i=n.config,u=i.pStylePrefix;return u&&(i.stylePrefix=u+i.stylePrefix),n.generators={},n.viewers={},n.defGenerators={html:new qb,css:new Lf,json:new $x,js:new Yx},n.defViewers={CodeMirror:new Qx},n.loadDefaultGenerators().loadDefaultViewers(),n}return Yb(s,h),s.prototype.addGenerator=function(t,n){return this.generators[t]=n,this},s.prototype.getGenerator=function(t){return this.generators[t]},s.prototype.getGenerators=function(){return this.generators},s.prototype.addViewer=function(t,n){return this.viewers[t]=n,this},s.prototype.getViewer=function(t){return this.viewers[t]},s.prototype.getViewers=function(){return this.viewers},s.prototype.createViewer=function(t){void 0===t&&(t={});var n=(0,m.isUndefined)(t.type)?"CodeMirror":t.type,i=this.getViewer(n)&&this.getViewer(n).clone(),u=document.createElement("div"),y=document.createElement("textarea");return u.appendChild(y),i.set(v0(v0({},this.config.optsCodeViewer),t)),i.init(y),i.setElement(u),i},s.prototype.updateViewer=function(t,n){t.setContent(n)},s.prototype.getCode=function(t,n,i){void 0===i&&(i={}),i.em=this.em;var u=this.getGenerator(n);return u?u.build(t,i):""},s.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},s.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},s.prototype.destroy=function(){},s}(we);const mh=Bf;var hf,ff=O(4729),Zw=O.n(ff);!function(h){h.update="update",h.undo="undo",h.redo="redo",h.load="load",h.projectLoad="project:load",h.projectGet="project:get",h.log="log",h.telemetryInit="telemetry:init",h.destroy="destroy",h.destroyed="destroyed"}(hf||(hf={}));var Qb=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wf=function(){return Wf=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Wf.apply(this,arguments)},ly=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},_0=function(h){return h.avoidStore||h.noUndo||h.partial},Kw=function(h){return Object.keys(h.changedAttributes())},y0=new WeakMap,nC=function(h){function s(t){var n=h.call(this,t,"UndoManager",{maximumStackLength:500,trackSelection:!0})||this;n.config._disable&&(n.config.maximumStackLength=0);var i=!0;return n.um=new(Zw())(Wf({track:!0,register:[]},n.config)),n.um.changeUndoType("change",{condition:function(u){var y=u.get("_undo");if(y){var I=u.get("_undoexc");if((0,m.isArray)(I)&&Kw(u).some(function(W){return I.indexOf(W)>=0}))return!1;if((0,m.isBoolean)(y)||(0,m.isArray)(y)&&Kw(u).some(function(W){return y.indexOf(W)>=0}))return!0}return!1},on:function(u,y,I){var W=y0.get(u);W||(W=u.previousAttributes(),y0.set(u,W));var ce=I||y||{};if(ce.noUndo&&setTimeout(function(){y0.delete(u)}),!_0(ce)){var ie=u.toJSON({fromUndo:i}),Re={object:u,before:W,after:ie};if(y0.delete(u),!(0,m.isEmpty)(ie))return Re}}}),n.um.changeUndoType("add",{on:function(u,y,I){if(void 0===I&&(I={}),!_0(I)&&n.isRegistered(y))return{object:y,before:void 0,after:u,options:Wf(Wf({},I),{fromUndo:i})}}}),n.um.changeUndoType("remove",{on:function(u,y,I){if(void 0===I&&(I={}),!_0(I)&&n.isRegistered(y))return{object:y,before:u,after:void 0,options:Wf(Wf({},I),{fromUndo:i})}}}),n.um.changeUndoType("reset",{undo:function(u,y){u.reset(y,{fromUndo:i})},redo:function(u,y,I){u.reset(I,{fromUndo:i})},on:function(u,y){if(void 0===y&&(y={}),!_0(y)&&n.isRegistered(u))return{object:u,before:y.previousModels,after:ly([],u.models,!0),options:Wf(Wf({},y),{fromUndo:i})}}}),n.um.on("undo redo",function(){t.getSelectedAll().map(function(u){return u.trigger("rerender:layer")})}),[hf.undo,hf.redo].forEach(function(u){return n.um.on(u,function(){return t.trigger(u)})}),n}return Qb(s,h),s.prototype.postLoad=function(){var n=this.em;this.config.trackSelection&&n&&this.add(n.get("selected"))},s.prototype.add=function(t){return this.um.register(t),this},s.prototype.remove=function(t){return this.um.unregister(t),this},s.prototype.removeAll=function(){return this.um.unregisterAll(),this},s.prototype.start=function(){return this.um.startTracking(),this},s.prototype.stop=function(){return this.um.stopTracking(),this},s.prototype.undo=function(t){void 0===t&&(t=!0);var i=this.um;return!this.em.isEditing()&&i.undo(t),this},s.prototype.undoAll=function(){return this.um.undoAll(),this},s.prototype.redo=function(t){void 0===t&&(t=!0);var i=this.um;return!this.em.isEditing()&&i.redo(t),this},s.prototype.redoAll=function(){return this.um.redoAll(),this},s.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},s.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},s.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},s.prototype.getStack=function(){return this.um.stack},s.prototype.getStackGroup=function(){var t=[],n=[];return this.getStack().forEach(function(i){var u=i.get("magicFusionIndex");n.indexOf(u)<0&&(n.push(u),t.push(i))}),t},s.prototype.skip=function(t){var n=!!this.um.isTracking();n&&this.stop(),t(),n&&this.start()},s.prototype.getGroupedStack=function(){var t={};return this.getStack().forEach(function(i,u){var ie,_r,y=i.get("magicFusionIndex"),I={index:u,type:(ie=i.attributes).type,after:ie.after,before:ie.before,object:ie.object,options:void 0===(_r=ie.options)?{}:_r};t[y]?t[y].push(I):t[y]=[I]}),Object.keys(t).map(function(i){var u=t[i];return{index:u[u.length-1].index,actions:u,labels:(0,m.unique)(u.reduce(function(y,I){var W,ce=null===(W=I.options)||void 0===W?void 0:W.action;return ce&&y.push(ce),y},[]))}})},s.prototype.goToGroup=function(t){var n=this;if(t){var i=this.getPointer(),u=t.index-i;(0,m.times)(Math.abs(u),function(){n[u<0?"undo":"redo"](!1)})}},s.prototype.getPointer=function(){return this.getStack().pointer},s.prototype.clear=function(){return this.um.clear(),this},s.prototype.getInstance=function(){return this.um},s.prototype.destroy=function(){this.clear().removeAll()},s}(we);const oC=nC;var np,e_=function(){return e_=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},e_.apply(this,arguments)};!function(h){h[h.ACTIVE=1]="ACTIVE",h[h.INACTIVE=0]="INACTIVE",h[h.DISABLED=-1]="DISABLED"}(np||(np={}));var Xb="_rte",t_=function(h,s){void 0===s&&(s="A");var t=h.selection()||{},n=t.anchorNode,i=t.focusNode,u=n?.parentNode,y=i?.parentNode;return u?.nodeName==s||y?.nodeName==s},b0="data-selectme",r_={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(h){return h.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(h){return h.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(h){return h.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(h){return h.exec("strikeThrough")}},link:{icon:'<svg viewBox="0 0 24 24">\n          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />\n        </svg>',name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(h){return h&&h.selection()&&t_(h)?1:0},result:function(h){t_(h)?h.exec("unlink"):h.insertHTML('<a href="" '.concat(b0,">").concat(h.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:'<svg viewBox="0 0 24 24">\n            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />\n        </svg>',attributes:{title:"Wrap for style"},state:function(h){return h?.selection()&&t_(h,"SPAN")?-1:0},result:function(h){!t_(h,"SPAN")&&h.insertHTML("<span ".concat(b0,">").concat(h.selection(),"</span>"),{select:!0})}}},Hw=function(){function h(s,t,n){void 0===n&&(n={});var i=this;if(this.em=s,this.settings=n,t[Xb])return t[Xb];t[Xb]=this,this.setEl(t),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var u=(n.actions||[]).map(function(ie){var Re=ie;return(0,m.isString)(ie)?Re=e_({},r_[ie]):r_[ie.name]&&(Re=e_(e_({},r_[ie.name]),ie)),Re}),y=u.length?u:Object.keys(r_).map(function(ie){return r_[ie]});n.classes=e_({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},n.classes);var I=n.classes,W=n.actionbar;if(this.actionbar=W,this.classes=I,this.actions=y,!W){if(!this.isCustom(n.module)){var ce=n.actionbarContainer;(W=document.createElement("div")).className=I.actionbar,ce?.appendChild(W),this.actionbar=W}y.forEach(function(ie){return i.addAction(ie)})}return n.styleWithCSS&&this.exec("styleWithCSS"),this}return h.prototype.isCustom=function(s){var t=s||this.em.RichTextEditor;return!(!t?.config.custom&&!t?.customRte)},h.prototype.destroy=function(){},h.prototype.setEl=function(s){this.el=s,this.doc=s.ownerDocument},h.prototype.updateActiveActions=function(){var s=this,t=this.getActions();t.forEach(function(n){var i=n.update,u=n.btn,y=s.classes,I=y.active,W=y.inactive,ce=y.disabled,ie=n.state,Re=n.name,qe=s.doc,ct=np.INACTIVE;if(u&&(u.className=u.className.replace(I,"").trim(),u.className=u.className.replace(W,"").trim(),u.className=u.className.replace(ce,"").trim()),ie){var qt=ie(s,qe);if(ct=qt,u)switch(qt){case 1:u.className+=" ".concat(I);break;case 0:u.className+=" ".concat(W);break;case-1:u.className+=" ".concat(ce)}}else qe.queryCommandSupported(Re)&&qe.queryCommandState(Re)&&(u&&(u.className+=" ".concat(I)),ct=np.ACTIVE);n.currentState=ct,i?.(s,n)}),t.length&&this.em.RichTextEditor.__dbdTrgCustom()},h.prototype.enable=function(s){return this.enabled?this:this.__toggleEffects(!0,s)},h.prototype.disable=function(){return this.__toggleEffects(!1)},h.prototype.__toggleEffects=function(s,t){void 0===s&&(s=!1),void 0===t&&(t={});var n=s?jt.on:jt.AU,i=this.el,u=this.doc,y=this.actionbarEl();if(y&&(y.style.display=s?"":"none"),i.contentEditable="".concat(!!s),n(i,"mouseup keyup",this.updateActiveActions),n(u,"keydown",this.__onKeydown),n(u,"paste",this.__onPaste),this.enabled=s,s){var I=t.event;if(this.syncActions(),this.updateActiveActions(),I){var W=null;if(u.caretRangeFromPoint){var ce=(0,jt.G2)(I);W=u.caretRangeFromPoint(ce.clientX,ce.clientY)}else I.rangeParent&&(W=u.createRange()).setStart(I.rangeParent,I.rangeOffset);var ie=u.getSelection();ie?.removeAllRanges(),W&&ie?.addRange(W)}i.focus()}return this},h.prototype.__onKeydown=function(s){var t=this.em,n=t.RichTextEditor.getConfig().onKeydown;if(n)return n({ev:s,rte:this,editor:t.getEditor()});var i=this.doc;"Enter"!==s.key||["insertOrderedList","insertUnorderedList"].some(function(u){return i.queryCommandState(u)})||(i.execCommand("insertLineBreak"),s.preventDefault())},h.prototype.__onPaste=function(s){var t=this.em,n=t.RichTextEditor.getConfig().onPaste;if(n)return n({ev:s,rte:this,editor:t.getEditor()});var i=s.clipboardData,u=i.getData("text"),y=i.getData("text/html");if(u&&!y){s.preventDefault();var I=u.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,I)}},h.prototype.syncActions=function(){var s=this;this.getActions().forEach(function(t){if(s.actionbar&&(!t.state||t.state&&t.state(s,s.doc)>=0)){var i=t.btn;i&&(i["on".concat(t.event||"click")]=function(){t.result(s,t),s.updateActiveActions()})}})},h.prototype.addAction=function(s,t){void 0===t&&(t={});var n=t.sync,i=this.actionbarEl();if(i){var u=s.icon,y=s.attributes,I=void 0===y?{}:y,W=document.createElement("span");for(var ce in W.className=this.classes.button,s.btn=W,I)W.setAttribute(ce,I[ce]);"string"==typeof u?W.innerHTML=u:W.appendChild(u),i.appendChild(W)}n&&(this.actions.push(s),this.syncActions())},h.prototype.getActions=function(){return this.actions},h.prototype.selection=function(){return this.doc.getSelection()},h.prototype.exec=function(s,t){this.doc.execCommand(s,!1,t)},h.prototype.actionbarEl=function(){return this.actionbar},h.prototype.insertHTML=function(s,t){var n=(void 0===t?{}:t).select,i=this,u=i.em,y=i.doc,I=i.el,W=y.getSelection();if(W&&W.rangeCount){var ce=(0,X.getComponentModel)(I)||u.getSelected(),ie=y.createElement("div"),Re=W.getRangeAt(0);Re.deleteContents(),(0,m.isString)(s)?ie.innerHTML=s:s&&ie.appendChild(s),Array.prototype.slice.call(ie.childNodes).forEach(function(qe){Re.insertNode(qe)}),W.removeAllRanges(),W.addRange(Re),I.focus(),n&&ce&&(ce.once("rte:disable",function(){var qe=ce.find("[".concat(b0,"]"))[0];qe&&(u.setSelected(qe),qe.removeAttributes(b0))}),ce.trigger("disable"))}},h}();const t1=Hw;var cy=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),w0=function(){return w0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},w0.apply(this,arguments)},r1=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},n1=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}},o1="".concat(Ki.refresh," frame:scroll ").concat(mt.I.update),aC={enable:"rte:enable",disable:"rte:disable",custom:"rte:custom"},sC=function(h){function s(t){var n=h.call(this,t,"RichTextEditor",{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1})||this;n.events=aC;var i=n.config,u=i.pStylePrefix;u&&(i.stylePrefix=u+i.stylePrefix),n.pfx=i.stylePrefix,n.actions=i.actions||[];var y=new R.Kx;return n.model=y,y.on("change:currentView",n.__trgCustom,n),n.__dbdTrgCustom=(0,m.debounce)(function(){return n.__trgCustom()},0),n}return cy(s,h),s.prototype.onLoad=function(){if((0,X.hasWin)()){var t=this.config,n=t.pStylePrefix,i=t.custom,u=(0,jt.a_)("div",{class:(0,jt.cx)("".concat(n,"rte-toolbar"),!i&&"".concat(n,"one-bg ").concat(n,"rte-toolbar-ui"))});this.toolbar=u,this.initRte((0,jt.a_)("div")),(0,jt.on)(u,"mousedown",function(y){return y.stopPropagation()})}},s.prototype.__trgCustom=function(){var t=this;t.em.trigger(t.events.custom,{enabled:!!t.model.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},s.prototype.destroy=function(){var t,n,i;null===(t=this.globalRte)||void 0===t||t.destroy(),null===(i=null===(n=this.customRte)||void 0===n?void 0:n.destroy)||void 0===i||i.call(n),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,jt.YZ)(this.toolbar)},s.prototype.postRender=function(t){var n=t.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),n.getToolsEl().appendChild(this.toolbar)},s.prototype.initRte=function(t){var n=this.globalRte,i=this,u=i.em,y=i.pfx,I=i.actionbar,ce=this.actions||function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],i.config.actions,!0),ie={actionbar:"".concat(y,"actionbar"),button:"".concat(y,"action"),active:"".concat(y,"active"),inactive:"".concat(y,"inactive"),disabled:"".concat(y,"disabled")};return n?(n.em=u,n.setEl(t)):(n=new t1(u,t,{classes:ie,actions:ce,actionbar:I,actionbarContainer:this.toolbar,module:this}),this.globalRte=n),n.actionbar&&(this.actionbar=n.actionbar),n.actions&&(this.actions=n.actions),n},s.prototype.add=function(t,n){var i;void 0===n&&(n={}),n.name=t,null===(i=this.globalRte)||void 0===i||i.addAction(n,{sync:!0})},s.prototype.get=function(t){var n,i;return null===(n=this.globalRte)||void 0===n||n.getActions().forEach(function(u){u.name==t&&(i=u)}),i},s.prototype.getAll=function(){var t;return(null===(t=this.globalRte)||void 0===t?void 0:t.getActions())||[]},s.prototype.remove=function(t){var n,i=this.getAll(),u=this.get(t);if(u){var y=u.btn,I=i.indexOf(u);null===(n=y?.parentNode)||void 0===n||n.removeChild(y),i.splice(I,1)}return u},s.prototype.run=function(t){var n=this.globalRte,i=(0,m.isString)(t)?this.get(t):t;n&&i&&(i.result(n,i),n.updateActiveActions())},s.prototype.getToolbarEl=function(){return this.toolbar},s.prototype.updatePosition=function(){var n=this.toolbar,y=n.style,I=this.em.Canvas.getTargetToElementFixed(this.lastEl,n,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(W){var ce=I[W];(0,X.isDef)(ce)&&(y[W]=(0,m.isString)(ce)?ce:(ce||0)+"px")})},s.prototype.enable=function(t,n,i){return r1(this,void 0,void 0,function(){var u,y,I,W,ce;return n1(this,function(ie){switch(ie.label){case 0:return this.lastEl=t.el,y=(u=this).customRte,I=u.em,W=t.getChildrenContainer(),this.toolbar.style.display="",[4,y?y.enable(W,n,i):this.initRte(W).enable(i)];case 1:return ce=ie.sent(),I&&(setTimeout(this.updatePosition.bind(this),0),I.off(o1,this.updatePosition,this),I.on(o1,this.updatePosition,this),I.trigger("rte:enable",t,ce)),this.model.set({currentView:t}),[2,ce]}})})},s.prototype.getContent=function(t,n){return r1(this,void 0,void 0,function(){var i,u;return n1(this,function(y){switch(y.label){case 0:return i=this.customRte,u=t.getChildrenContainer(),i&&n&&(0,m.isFunction)(i.getContent)?[4,i.getContent(u,n,{view:t})]:[3,2];case 1:return[2,y.sent()];case 2:return[2,u.innerHTML]}})})},s.prototype.hideToolbar=function(){var t=this.toolbar.style,n="-1000px";t.top=n,t.left=n,t.display="none"},s.prototype.disable=function(t,n){return r1(this,arguments,void 0,function(i,u,y){var I,W,ce,ie;return void 0===y&&(y={}),n1(this,function(Re){switch(Re.label){case 0:return I={},W=this.em,(ce=this.customRte)?[4,ce.disable(i.getChildrenContainer(),u,w0(w0({},y),{view:i}))]:[3,2];case 1:return(ie=Re.sent())&&(I=ie),[3,3];case 2:u&&u.disable(),Re.label=3;case 3:return this.hideToolbar(),W&&(W.off(o1,this.updatePosition,this),!y.fromMove&&W.trigger("rte:disable",i,u)),this.model.unset("currentView"),[2,I]}})})},s}(we);const lC=sC;var uC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mf=function(){return mf=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},mf.apply(this,arguments)},uy=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},a1=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return uC(s,h),s.getDefaults=function(){return(0,m.result)(this.prototype,"defaults")},s.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},s.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.em=n.em;var i=this.getId()||"",u=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(u||i).replace(/ /g,"-"));var y=this.get("property");!this.get("id")&&this.set("id",y),!u&&this.set("name",(0,X.capitalize)(y).replace(/-/g," ")),this.on("change",this.__upTargets),s.callInit(this,t,n)},s.prototype.__getParentProp=function(){var t,n;return null===(n=null===(t=this.collection)||void 0===t?void 0:t.opts)||void 0===n?void 0:n.parentProp},s.prototype.__upTargets=function(t,n){var i,u=this;void 0===n&&(n={});var y=this.em.Styles,I=this.getName(),W=n.__clear,ce=W?"":this.__getFullValue(n),ie=this.__getParentProp(),Re=this.changedAttributes(),qe=(0,m.keys)(Re).reduce(function(co,Bo){return co[Bo]=u.previous(Bo),co},{}),ct=uy(uy([],(0,m.keys)(this.__getClearProps()),!0),["__p"],!1),qt=(0,m.keys)(Re),_r=!n.__up&&!ie&&(W||ct.some(function(co){return qt.indexOf(co)>=0})),zr=this.get("onChange"),br={property:this,from:qe,to:Re,value:ce,opts:n};y.__trgEv(y.events.propertyUpdate,br),zr&&zr(br),_r&&this.__upTargetsStyle(((i={})[I]=ce,i),n)},s.prototype.__upTargetsStyle=function(t,n){var i,u=null===(i=this.em)||void 0===i?void 0:i.get("StyleManager");u?.addStyleTargets(mf(mf({},t),{__p:!!n.avoidStore}),n)},s.prototype._up=function(t,n){void 0===n&&(n={}),n.noTarget&&(n.__up=!0);var i=n.partial,u=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(n,["partial"]);return t.__p=!(!u.avoidStore&&!i),this.set(t,mf(mf({},u),{avoidStore:t.__p}))},s.prototype.up=function(t,n){void 0===n&&(n={}),this.set(t,mf(mf({},n),{__up:!0}))},s.prototype.init=function(){},s.prototype.getId=function(){return this.get("id")},s.prototype.getType=function(){return this.get("type")},s.prototype.getName=function(){return this.get("property")},s.prototype.getLabel=function(t){var n;void 0===t&&(t={});var i=t.locale,u=void 0===i||i,y=this.getId(),I=this.get("name")||this.get("label");return u&&(null===(n=this.em)||void 0===n?void 0:n.t("styleManager.properties.".concat(y)))||I},s.prototype.getValue=function(t){void 0===t&&(t={});var n=t.noDefault,i=this.get("value");return this.hasValue()||n?i:this.getDefaultValue()},s.prototype.hasValue=function(t){void 0===t&&(t={});var n=t.noParent&&this.getParentTarget(),i=this.get("value");return!(0,m.isUndefined)(i)&&""!==i&&!n},s.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},s.prototype.getStyle=function(t){var n;void 0===t&&(t={});var i=this.getName();return(n={})[t.camelCase?(0,X.camelCase)(i):i]=this.__getFullValue(t),n},s.prototype.getDefaultValue=function(){var t=this.get("default");return"".concat((0,m.isUndefined)(t)?this.get("defaults"):t)},s.prototype.upValue=function(t,n){void 0===n&&(n={});var i=null===t||""===t?this.__getClearProps():this.__parseValue(t,n);return this._up(i,n)},s.prototype.isVisible=function(){return!!this.get("visible")},s.prototype.clear=function(t){return void 0===t&&(t={}),this._up(this.__getClearProps(),mf(mf({},t),{__clear:!0})),this},s.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},s.prototype.getParent=function(){return this.__getParentProp()},s.prototype.isFull=function(){return!!this.get("full")},s.prototype.__parseValue=function(t,n){return this.parseValue(t,n)},s.prototype.__getClearProps=function(){return{value:"",important:!1}},s.prototype.setValue=function(t,n,i){void 0===n&&(n=!0),void 0===i&&(i={});var u=this.parseValue(t),y=!n;!y&&this.set({value:void 0},{avoidStore:y,silent:!0}),this.set(u,mf({avoidStore:y},i))},s.prototype.setValueFromInput=function(t,n,i){void 0===i&&(i={}),this.setValue(t,n,mf(mf({},i),{fromInput:1}))},s.prototype.parseValue=function(t,n){void 0===n&&(n={});var i={value:t},u="!important",y=this.get("functionName")||"";if((0,m.isString)(t)&&-1!==t.indexOf(u)&&(i.value=t.replace(u,"").trim(),i.important=!0),!y&&!n.complete)return i;var I=[],W="".concat(i.value).trim(),ce=W.indexOf("(")+1,ie=y||W.substring(0,ce-1);if(ie&&(i.functionName=ie),!y||0===W.indexOf("".concat(y,"("))){var Re=W.lastIndexOf(")");I.push(ce),Re>=0&&I.push(Re),i.value=String.prototype.substring.apply(W,I)}if(n.numeric){var qe=parseFloat(i.value);i.unit=i.value.replace(qe,""),i.value=qe}return i},s.prototype.__getFullValue=function(t){var n=(void 0===t?{}:t).withDefault;return!this.hasValue()&&n?this.getDefaultValue():this.getFullValue()},s.prototype.getFullValue=function(t,n){void 0===n&&(n={});var i=this.get("functionName"),u=this.getDefaultValue(),y=(0,m.isUndefined)(t)?this.get("value"):t,I=this.hasValue();if(y&&u&&y===u)return u;if(i&&I){var W="url"===i?"'".concat(y.replace(/'|"/g,""),"'"):y;y="".concat(i,"(").concat(W,")")}return I&&this.get("important")&&!n.skipImportant&&(y="".concat(y," !important")),y||""},s.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},s.prototype.getParentTarget=function(){return this.get("parentTarget")||null},s.prototype.__parseFn=function(t){void 0===t&&(t="");var n=t.indexOf("(")+1,i=t.lastIndexOf(")");return{name:t.substring(0,n-1).trim(),value:String.prototype.substring.apply(t,[n,i>=0?i:void 0]).trim()}},s.prototype.__checkVisibility=function(t){var n=t.target,i=t.component,u=t.sectors,y=i||n;if(!y)return!1;var I=this.getId(),W=this.getName(),ce=this.get("toRequire"),ie=this.get("requires"),Re=this.get("requiresParent"),qe=y.get("unstylable"),ct=y.get("stylable-require"),qt=y.get("stylable");if((0,m.isArray)(qt)&&(qt=qt.indexOf(W)>=0),(0,m.isArray)(qe)&&(qt=qe.indexOf(W)<0),ce&&(qt=!n||ct&&(ct.indexOf(I)>=0||ct.indexOf(W)>=0)),u&&ie){var _r=(0,m.keys)(ie);u.forEach(function(Bo){Bo.getProperties().forEach(function(Oi){(0,m.includes)(_r,Oi.id)&&(qt=qt&&(0,m.includes)(ie[Oi.id],Oi.get("value")))})})}if(Re){var zr=i&&i.parent(),br=zr&&zr.getEl();if(br){var co=(0,X.hasWin)()?window.getComputedStyle(br):{};(0,m.each)(Re,function(Bo,Oi){qt=qt&&co[Oi]&&(0,m.includes)(Bo,co[Oi])})}else qt=!1}return!!qt},s}(R.Kx);const yu=a1;a1.callParentInit=function(h,s,t,n){void 0===n&&(n={}),h.prototype.initialize.apply(s,[t,mf(mf({},n),{skipInit:1})])},a1.callInit=function(h,s,t){void 0===t&&(t={}),!t.skipInit&&h.init(s,t)};var pC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),n_=function(){return n_=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},n_.apply(this,arguments)},qw=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},s1=function(h){return"integer"===h||"number"===h},$w=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return pC(s,h),s.prototype.defaults=function(){return n_(n_({},yu.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},s.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),yu.callParentInit(yu,this,t,n);var i=this.em,u=new h1(this.get("properties")||[],{em:i,parentProp:this});this.set("properties",u,{silent:!0}),this.listenTo(u,"change",this.__upProperties),yu.callInit(this,t,n)},Object.defineProperty(s.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),s.prototype.getProperties=function(){return qw([],this.get("properties").models,!0)},s.prototype.getProperty=function(t){return this.properties.filter(function(n){return n.getId()===t||n.getName()===t})[0]},s.prototype.getPropertyAt=function(t){return this.get("properties").at(t)},s.prototype.isDetached=function(){return!!this.get("detached")},s.prototype.getValues=function(t){var n=(void 0===t?{}:t).byName;return this.getProperties().reduce(function(i,u){return i[n?u.getName():u.getId()]="".concat(u.__getFullValue()),i},{})},s.prototype.getSeparator=function(){return this.getSplitSeparator()},s.prototype.getJoin=function(){return this.__getJoin()},s.prototype.getStyleFromProps=function(t){var n;void 0===t&&(t={});var i=this.getName(),u=this.__getJoin(),y=this.get("toStyle"),I=this.getValues(),W={};if(y)W=y(I,{join:u,name:i,property:this});else if(I=this.getValues({byName:!0}),this.isDetached())W=I;else{var ce=this.getProperties().map(function(ie){return ie.__getFullValue({withDefault:1})}).filter(Boolean).join(u);(n={})[i]=ce,W=n}return this.isDetached()?W[i]="":(W[i]=W[i]||"",W=n_(n_({},W),this.getProperties().reduce(function(ie,Re){return ie[Re.getName()]="",ie},{}))),t.camelCase?Object.keys(W).reduce(function(ie,Re){return ie[(0,X.camelCase)(Re)]=W[Re],ie},{}):W},s.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},s.prototype.__upProperties=function(t,n){if(void 0===n&&(n={}),!n.__up&&!n.__clearIn){var i=this.__getParentProp();if(i)return i.__upProperties(this,n);this.__upTargetsStyleProps(n,t)}},s.prototype.__upTargetsStyleProps=function(t,n){var i;void 0===t&&(t={});var u=this.getStyleFromProps();if(this.isDetached()&&n){var y=n.getName();(i={})[y]=u[y],u=i}this.__upTargetsStyle(u,t)},s.prototype._up=function(t,n){return void 0===n&&(n={}),this.__setProperties(this.__getSplitValue(t.value),n),yu.prototype._up.call(this,t,n),this},s.prototype.getStyle=function(t){return this.getStyleFromProps(t)},s.prototype.__getFullValue=function(t){if(void 0===t&&(t={}),this.isDetached()||t.__clear)return"";var n=this.getStyleFromProps()[this.getName()]||"";return du(n)},s.prototype.__getJoin=function(){var t=this.get("join");return(0,m.isString)(t)?t:this.get("separator")},s.prototype.__styleHasProps=function(t){void 0===t&&(t={});var n=this.getName(),i=this.getProperties().map(function(u){return u.getName()});return qw([n],i,!0).some(function(u){return!(0,m.isUndefined)(t[u])&&""!==t[u]})},s.prototype.__splitValue=function(t,n){return du(t).split(n).map(function(i){return i.trim()}).filter(Boolean)},s.prototype.__splitStyleName=function(t,n,i){return this.__splitValue(t[n]||"",i)},s.prototype.__getSplitValue=function(t,n){void 0===t&&(t="");var i=(void 0===n?{}:n).byName,u=this.getProperties(),y=4===u.length&&u.every(function(ce){return s1(ce.getType())}),I=this.__splitValue(t,this.getSplitSeparator()),W={};return u.forEach(function(ce,ie){var Re=I[ie],qe=(0,m.isUndefined)(Re)?"":Re;if(y){var ct=I.length;qe=I[ie]||I[ie%ct+(1!=ct&&ct%2?1:0)]||qe}var qt=i?ce.getName():ce.getId();W[qt]=qe||""}),W},s.prototype.__getPropsFromStyle=function(t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),!this.__styleHasProps(t))return null;var i=n.byName,u=this.getName(),y=this.getProperties(),I=this.getSplitSeparator(),W=this.get("fromStyle"),ce=W?W(t,{property:this,name:u,separator:I}):{};return W||(ce=this.__getSplitValue(t[u]||"",{byName:i}),y.forEach(function(Re){var qe=t[Re.getName()],ct=i?Re.getName():Re.getId();(0,m.isUndefined)(qe)||""===qe||(ce[ct]=qe)})),ce},s.prototype.__setProperties=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.getProperties().forEach(function(u){var y=t[u.getId()];u.__getFullValue()!==y&&u.upValue(y,n)});var i=(0,m.keys)(t).map(function(u){return t[u]}).join(" ");this.set("value",i,{silent:!0})},s.prototype.clear=function(){var t=this;return this.getProperties().map(function(n){return n.clear({__clearIn:!t.isDetached()})}),yu.prototype.clear.call(this),this},s.prototype.hasValue=function(t){return this.getProperties().some(function(n){return n.hasValue(t)})},s.prototype.getFullValue=function(){return this.__getFullValue()},s.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},s}(yu);const dv=$w;var Jw=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),gf=function(){return gf=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},gf.apply(this,arguments)},l1=/,(?![^\(]*\))/,c1=/\s(?![^(]*\))/,fC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return Jw(s,h),s.prototype.defaults=function(){return gf(gf({},dv.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},s.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),dv.callParentInit(dv,this,t,n);var i=this.get("layers"),u=new l0(i,{prop:this});u.property=this,u.properties=this.get("properties"),this.set("layers",u,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(u,"add remove",this.__upLayers),dv.callInit(this,t,n)},Object.defineProperty(s.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),s.prototype.getLayers=function(){return this.layers.models},s.prototype.hasLayers=function(){return this.getLayers().length>0},s.prototype.getLayer=function(t){return void 0===t&&(t=0),this.layers.at(t)||void 0},s.prototype.getSelectedLayer=function(){var t=this.get("selectedLayer");return t&&t.getIndex()>=0?t:void 0},s.prototype.selectLayer=function(t){return this.set("selectedLayer",t,{__select:!0})},s.prototype.selectLayerAt=function(t){void 0===t&&(t=0);var n=this.getLayer(t);return n&&this.selectLayer(n)},s.prototype.moveLayer=function(t,n){void 0===n&&(n=0);var i=this.layers,u=t?t.getIndex():-1;u>=0&&(0,m.isNumber)(n)&&n>=0&&n<i.length&&u!==n&&(this.removeLayer(t),i.add(t,{at:n}))},s.prototype.addLayer=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var i={};return this.getProperties().forEach(function(u){var y=u.getId(),I=t[y];i[y]=(0,m.isUndefined)(I)?u.getDefaultValue():I}),this.layers.push({values:i},n)},s.prototype.removeLayer=function(t){return this.layers.remove(t)},s.prototype.removeLayerAt=function(t){void 0===t&&(t=0);var n=this.getLayer(t);return n?this.removeLayer(n):null},s.prototype.getLayerLabel=function(t){var n="";if(t){var i=this.get("layerLabel"),u=t.getValues(),y=t.getIndex();if(i)n=i(t,{index:y,values:u,property:this});else{var I=[];this.getProperties().map(function(W){I.push(u[W.getId()])}),n=I.filter(Boolean).join(" ")}}return n},s.prototype.getStyleFromLayer=function(t,n){var i;void 0===n&&(n={});var u,y=this.__getJoin(),I=this.__getJoinLayers(),W=this.get("toStyle"),ce=this.getName(),ie=t.getValues();if(W)u=W(ie,{join:y,joinLayers:I,name:ce,layer:t,property:this});else{var Re=this.getProperties().map(function(qe){var ct=qe.getName(),qt=ie[qe.getId()],_r=(0,m.isUndefined)(qt)?qe.getDefaultValue():qt;if(n.number&&s1(qe.getType())){var zr=qe.parseValue(qt,n.number);_r="".concat(zr.value).concat(zr.unit)}return{name:ct,value:_r}});u=this.isDetached()?Re.reduce(function(qe,ct){return qe[ct.name]=ct.value,qe},{}):((i={})[this.getName()]=Re.map(function(qe){return qe.value}).join(y),i)}return n.camelCase?Object.keys(u).reduce(function(qe,ct){return qe[(0,X.camelCase)(ct)]=u[ct],qe},{}):u},s.prototype.getStylePreview=function(t,n){void 0===n&&(n={});var i={};return this.get("preview")&&(i=this.getStyleFromLayer(t,n)),i},s.prototype.getLayerSeparator=function(){var t=this.get("layerSeparator");return(0,m.isString)(t)?new RegExp("".concat(t,"(?![^\\(]*\\))")):t},s.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},s.prototype.__upProperties=function(t,n){var i;void 0===n&&(n={});var u=this.getSelectedLayer();u&&(u.upValues(((i={})[t.getId()]=t.__getFullValue(),i)),n.__up||this.__upTargetsStyleProps(n))},s.prototype.__upLayers=function(t,n,i){this.__upTargetsStyleProps(i||n)},s.prototype.__upTargets=function(t,n){if(void 0===n&&(n={}),!n.__select)return yu.prototype.__upTargets.call(this,t,n)},s.prototype.__upTargetsStyleProps=function(t){void 0===t&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(t),t)},s.prototype.__upTargetsStyle=function(t,n){return yu.prototype.__upTargetsStyle.call(this,t,n)},s.prototype.__upSelected=function(t,n){var i=(void 0===t?{}:t).noEvent;void 0===n&&(n={});var u=this.em.Styles,y=this.getSelectedLayer(),I=y?.getValues();I&&this.getProperties().forEach(function(W){var ce,ie=null!==(ce=I[W.getId()])&&void 0!==ce?ce:"";W.__getFullValue()!==ie&&W.upValue(ie,gf(gf({},n),{__up:!0}))}),!i&&u.__trgEv(u.events.layerSelect,{property:this})},s.prototype._up=function(t,n){void 0===n&&(n={});var i=t.__layers,u=void 0===i?[]:i,y=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(t,["__layers"]);return!this.isDetached()&&this.__setLayers(u),this.__upSelected({noEvent:!0},n),yu.prototype._up.call(this,y,n),this},s.prototype.__setLayers=function(t,n){void 0===t&&(t=[]),void 0===n&&(n={});var i=this.layers,u=t.map(function(y){return{values:y}});i.length===u.length?u.map(function(y,I){var W;return null===(W=i.at(I))||void 0===W?void 0:W.upValues(y.values)}):i.reset(u),this.set({isEmptyValue:!!n.isEmptyValue}),this.__upSelected({noEvent:!0})},s.prototype.__parseValue=function(t){var n=this,i=this.parseValue(t);return i.__layers=t.split(l1).map(function(u){return u.trim()}).map(function(u){return n.__parseLayer(u)}).filter(Boolean),i},s.prototype.__parseLayer=function(t){var n=this.get("parseLayer"),i=t.split(c1),u=this.getProperties();return n?n({value:t,values:i}):u.reduce(function(y,I,W){var ce=i[W];return y[I.getId()]=(0,m.isUndefined)(ce)?I.getDefaultValue():ce,y},{})},s.prototype.__getLayersFromStyle=function(t){var n=this;if(void 0===t&&(t={}),!this.__styleHasProps(t))return null;if(this.isEmptyValueStyle(t))return[];var i=this.getName(),u=this.getProperties(),y=this.getLayerSeparator(),I=this.attributes.fromStyle,W=I?I(t,{property:this,name:i,separatorLayers:y}):[];if(!I){var ce=this.__splitStyleName(t,i,y).map(function(ie){return ie.split(n.getSplitSeparator())}).map(function(ie){var Re={};return u.forEach(function(qe,ct){var qt=ie[ct];Re[qe.getId()]=(0,m.isUndefined)(qt)?qe.getDefaultValue():qt}),Re});u.forEach(function(ie){var Re=ie.getId();n.__splitStyleName(t,ie.getName(),y).map(function(qe){var ct;return(ct={})[Re]=qe||ie.getDefaultValue(),ct}).forEach(function(qe,ct){ce[ct]=ce[ct]?gf(gf({},ce[ct]),qe):qe})}),W=ce}return(0,m.isArray)(W)?W:[W]},s.prototype.getStyle=function(t){return void 0===t&&(t={}),this.getStyleFromLayers(t)},s.prototype.getStyleFromLayers=function(t){var n=this;void 0===t&&(t={});var i={},u=this.getName(),y=this.getLayers(),I=this.getProperties();if(y.map(function(ce){return n.getStyleFromLayer(ce,t)}).forEach(function(ce){(0,m.keys)(ce).map(function(ie){i[ie]||(i[ie]=[]),i[ie].push(ce[ie])})}),(0,m.keys)(i).map(function(ce){i[ce]=i[ce].join(n.__getJoinLayers())}),this.isDetached())i[u]="",!y.length&&I.map(function(ce){i[ce.getName()]=""});else{var W=I.reduce(function(ce,ie){return ce[ie.getName()]="",ce},{});i[u]=i[u]||"",i=gf(gf({},i),W)}return gf(gf({},i),t.__clear?{}:this.getEmptyValueStyle())},s.prototype.isEmptyValueStyle=function(t){void 0===t&&(t={});var n=this.getEmptyValueStyle({force:!0}),i=(0,m.keys)(n);return!!i.length&&i.every(function(u){return n[u]===t[u]})},s.prototype.getEmptyValueStyle=function(t){void 0===t&&(t={});var n=this.attributes.emptyValue;if(!n||this.hasLayers()&&!t.force)return{};var i=this.getName(),u=this.getProperties(),y=(0,m.isString)(n)?n:n({property:this});if((0,m.isString)(y)){var I={};return this.isDetached()?u.map(function(W){I[W.getName()]=y}):I[i]=y,I}return y},s.prototype.__getJoinLayers=function(){var t=this.get("layerJoin"),n=this.get("layerSeparator");return t||((0,m.isString)(n)?n:t)},s.prototype.__getFullValue=function(){if(this.get("detached"))return"";var t=this.getStyleFromLayers();return du(t[this.getName()])},s.prototype.hasValue=function(t){void 0===t&&(t={});var n=t.noParent&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!n},s.prototype.clear=function(t){return void 0===t&&(t={}),this.layers.reset(),this.__upTargetsStyleProps(gf(gf({},t),{__clear:!0})),yu.prototype.clear.call(this),this},s.prototype.__canClearProp=function(){return!1},s.prototype.__getLayers=function(){return this.layers},s}(dv);const hC=fC;var mC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),x0=function(){return x0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},x0.apply(this,arguments)},C0="data-clear-style",Xw=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this;(0,m.bindAll)(n,"__change","__updateStyle");var i=t.config||{},u=i.em;n.config=i,n.em=u,n.pfx=i.stylePrefix||"",n.ppfx=i.pStylePrefix||"",n.__destroyFn=n.destroy?n.destroy.bind(n):function(){};var y=n.model;y.view=n,n.onValueChange=(0,m.debounce)(n.onValueChange.bind(n),10),n.updateStatus=(0,m.debounce)(n.updateStatus.bind(n),0),n.listenTo(y,"destroy remove",n.remove),n.listenTo(y,"change:visible",n.updateVisibility),n.listenTo(y,"change:name change:className change:full",n.render),n.listenTo(y,"change:value",n.onValueChange),n.listenTo(y,"change:parentTarget",n.updateStatus),n.listenTo(u,"change:device",n.onValueChange);var I=n.init&&n.init.bind(n);return I&&I(),n}return mC(s,h),s.prototype.events=function(){var t;return(t={change:"inputValueChanged"})["click [".concat(C0,"]")]="clear",t},s.prototype.template=function(t){var i=this.ppfx;return'\n      <div class="'.concat(this.pfx,'label" data-sm-label></div>\n      <div class="').concat(i,'fields" data-sm-fields></div>\n    ')},s.prototype.templateLabel=function(t){var n=this.pfx,i=this.em,u=t.parent,y=t.attributes,I=y.icon,W=void 0===I?"":I,ce=y.info,ie=void 0===ce?"":ce,Re=i?.getConfig().icons,qe=Re?.close||"";return'\n      <span class="'.concat(n,"icon ").concat(W,'" title="').concat(ie,'">\n        ').concat(t.getLabel(),"\n      </span>\n      ").concat(u?"":'<div class="'.concat(n,'clear" style="display: none" ').concat(C0,">").concat(qe,"</div>"),"\n    ")},s.prototype.templateInput=function(t){return'\n      <div class="'.concat(this.ppfx,'field">\n        <input placeholder="').concat(t.getDefaultValue(),'"/>\n      </div>\n    ')},s.prototype.remove=function(){var t=this;return R.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(n){return t[n]=null}),this.__destroyFn(this._getClbOpts()),this},s.prototype.updateStatus=function(){var t,n=this,i=n.model,u=n.pfx,y=n.ppfx,I=n.config,W="".concat(y,"four-color"),ce="".concat(y,"color-warn"),ie=this.$el.children(".".concat(u,"label")),Re=this.getClearEl(),qe=Re?Re.style:{};ie.removeClass("".concat(W," ").concat(ce)),qe.display="none",i.hasValue({noParent:!0})&&I.highlightChanged?(ie.addClass(W),I.clearProperties&&(qe.display="")):i.hasValue()&&I.highlightComputed&&ie.addClass(ce),null===(t=this.parent)||void 0===t||t.updateStatus()},s.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},s.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(C0,"]"))),this.clearEl},s.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},s.prototype.onValueChange=function(t,n,i){void 0===i&&(i={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},s.prototype.setValue=function(t){var n=this.model,i=(0,m.isUndefined)(t)||""===t?n.getDefaultValue():t;if(this.update)return this.__update(i);this.__setValueInput(i)},s.prototype.__setValueInput=function(t){var n=this.getInputEl();n&&(n.value=t)},s.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},s.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},s.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},s.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},s.prototype.__update=function(t){var n=this.update&&this.update.bind(this);n&&n(x0(x0({},this._getClbOpts()),{value:t}))},s.prototype.__change=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.emit&&this.emit.bind(this);i&&i.apply(void 0,function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([this._getClbOpts()],t,!1))},s.prototype.__updateStyle=function(t,n){void 0===n&&(n={});var i=n.complete,u=n.partial,y=(function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}}(n,["complete","partial"]),this.model),I=!1!==i&&!0!==u;(0,X.isObject)(t)?y.__upTargetsStyle(t,{avoidStore:!I}):y.upValue(t,{partial:!I})},s.prototype._getClbOpts=function(){var t=this,n=t.model;return{el:t.el,createdEl:t.createdEl,property:n,props:n.attributes,change:this.__change,updateStyle:this.__updateStyle}},s.prototype.render=function(){this.clearCached();var t=this,n=t.pfx,i=t.model,u=t.el,y=t.$el,I=i.getName(),W=i.getType(),ce=i.get("className")||"",ie="".concat(n,"property"),Re="number"===W?"".concat(n).concat(W," ").concat(n,"integer"):"".concat(n).concat(W);this.createdEl&&this.__destroyFn(this._getClbOpts()),y.empty().append(this.template(i)),y.find("[data-sm-label]").append(this.templateLabel(i));var qe=this.create&&this.create.bind(this);this.createdEl=qe&&qe(this._getClbOpts()),y.find("[data-sm-fields]").append(this.createdEl||this.templateInput(i)),u.className="".concat(ie," ").concat(Re," ").concat(ie,"__").concat(I," ").concat(ce).trim(),u.className+=i.isFull()?" ".concat(ie,"--full"):"";var ct=this.onRender&&this.onRender.bind(this);return ct&&ct(),this.setValue(i.getValue()),this},s.prototype.onRender=function(){},s}(R.Ss);const ig=Xw;var vC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),e2=function(h){function s(t){var n=h.call(this,t)||this;n.config=t.config||{},n.pfx=n.config.stylePrefix||"",n.properties=[],n.parent=t.parent;var i=n.collection;return n.listenTo(i,"add",n.addTo),n.listenTo(i,"reset",n.render),n}return vC(s,h),s.prototype.addTo=function(t,n,i){this.add(t,null,i)},s.prototype.add=function(t,n,i){void 0===i&&(i={});var u=this.parent,I=n||this.el,W=new t.typeView({model:t,config:this.config});u&&(W.parent=u),W.render();var ce=W.el;this.properties.push(W),(0,jt.Sc)(I,ce,i.at)},s.prototype.remove=function(){return R.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},s.prototype.clearItems=function(){this.properties.forEach(function(t){return t.remove()}),this.properties=[]},s.prototype.render=function(){var t=this,n=this.$el,i=this.pfx;this.clearItems();var u=document.createDocumentFragment();return this.collection.forEach(function(y){return t.add(y,u)}),n.empty(),n.append(u),n.attr("class","".concat(i,"properties")),this},s}(R.Ss);const u1=e2;var t2=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),E0=function(){return E0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},E0.apply(this,arguments)},_C=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return t2(s,h),s.prototype.templateInput=function(){var t=this.pfx;return'\n      <div class="'.concat(t,"field ").concat(t,'composite">\n        <span id="').concat(t,'input-holder"></span>\n      </div>\n    ')},s.prototype.remove=function(){var t;return null===(t=this.props)||void 0===t||t.remove(),ig.prototype.remove.apply(this,arguments),this},s.prototype.onValueChange=function(){},s.prototype.onRender=function(){var t=this.pfx,n=this.model,i=n.get("properties");if(i.length&&!this.props){var u=n.isDetached(),y=new u1({config:E0(E0({},this.config),{highlightComputed:u,highlightChanged:u}),collection:i,parent:this});y.render(),this.$el.find("#".concat(t,"input-holder")).append(y.el),this.props=y}},s.prototype.clearCached=function(){ig.prototype.clearCached.apply(this,arguments),delete this.props},s}(ig);const Wm=_C;var yC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),bC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return yC(s,h),s.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},s.prototype.template=function(){var t=this,n=t.pfx,i=t.ppfx,u=t.em,y=u?.getConfig().icons,I=y?.close||"",W=y?.move||"";return'\n      <div class="'.concat(n,'label-wrp">\n        <div id="').concat(n,'move" class="').concat(i,'no-touch-actions" data-move-layer>\n          ').concat(W,'\n        </div>\n        <div id="').concat(n,'label" data-label></div>\n        <div id="').concat(n,'preview-box" class="').concat(n,'layer-preview" style="display: none" data-preview-box>\n          <div id="').concat(n,'preview" class="').concat(n,'layer-preview-cnt" data-preview></div>\n        </div>\n        <div id="').concat(n,'close-layer" class="').concat(n,'btn-close" data-close-layer>\n          ').concat(I,'\n        </div>\n      </div>\n      <div id="').concat(n,'inputs" data-properties></div>\n    ')},s.prototype.initialize=function(t){void 0===t&&(t={});var n=this.model,i=t.config||{};this.em=i.em,this.config=i,this.sorter=t.sorter,this.pfx=i.stylePrefix||"",this.ppfx=i.pStylePrefix||"",this.propertyView=t.propertyView;var u=this.propertyView.model;this.listenTo(n,"destroy remove",this.remove),this.listenTo(n,"change:values",this.updateLabel),this.listenTo(u,"change:selectedLayer",this.updateVisibility),n.view=this,n.set({droppable:0,draggable:1}),this.$el.data("model",n)},s.prototype.initSorter=function(){var t;null===(t=this.sorter)||void 0===t||t.startSort([{element:this.el}])},s.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},s.prototype.select=function(){this.model.select()},s.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},s.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},s.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},s.prototype.updateLabel=function(){var t=this.model,n=t.getLabel();if(this.getLabelEl().innerHTML=n,t.hasPreview()){var i=this.getPreviewEl(),u=t.getStylePreview({number:{min:-3,max:3}}),y=(0,m.keys)(u).map(function(I){return"".concat(I,":").concat(u[I])}).join(";");i.setAttribute("style",y)}},s.prototype.updateVisibility=function(){var t,n=this,i=n.pfx,u=n.model,y=n.propertyView,I=this.getPropertiesWrapper(),W=u.isSelected();I.style.display=W?"":"none",this.$el[W?"addClass":"removeClass"]("".concat(i,"active")),W&&I.appendChild(null===(t=y.props)||void 0===t?void 0:t.el)},s.prototype.render=function(){var t=this,n=t.el,i=t.pfx,u=t.model;return n.innerHTML=this.template(),n.className="".concat(i,"layer"),u.hasPreview()&&(n.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},s}(R.Ss);const wC=bC;var xC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),CC=function(h){function s(t){var n=h.call(this,t)||this,i=n.collection,u=t.config||{},y=u.em,I=u.stylePrefix||"",W=u.pStylePrefix||"";n.config=u,n.pfx=I,n.ppfx=W,n.propertyView=t.propertyView,n.className="".concat(I,"layers ").concat(W,"field"),n.listenTo(i,"add",n.addTo),n.listenTo(i,"reset",n.reset),n.items=[];var ce=n.createPlaceholder(u.pStylePrefix);n.$el.append(ce);var ie=y?.Utils;return n.sorter=ie?new ie.StyleManagerSorter({em:y,containerContext:{container:n.el,containerSel:".".concat(I,"layers"),itemSel:".".concat(I,"layer"),pfx:u.pStylePrefix,document,placeholderElement:ce},dragBehavior:{dragDirection:_c.A.Vertical,nested:!1}}):void 0,i.view=n,n.$el.data("model",i),n.$el.data("collection",i),n}return xC(s,h),s.prototype.addTo=function(t){var n=this.collection.indexOf(t);this.addToCollection(t,null,n)},s.prototype.addToCollection=function(t,n,i){var u=n||null,y=this,ie=y.$el,Re=new wC({model:t,config:y.config,sorter:y.sorter,propertyView:y.propertyView}),qe=Re.render().el;if(this.items.push(Re),u)u.appendChild(qe);else if(void 0!==i){var ct="before";ie.children().length===i&&(i--,ct="after"),i<0?ie.append(qe):ie.children().eq(i)[ct](qe)}else ie.append(qe);return qe},s.prototype.reset=function(t,n){this.clearItems(),this.render()},s.prototype.remove=function(){return this.clearItems(),R.Ss.prototype.remove.apply(this,arguments),this},s.prototype.clearItems=function(){this.items.forEach(function(t){return t.remove()}),this.items=[]},s.prototype.render=function(){var t=this,n=this.$el,i=document.createDocumentFragment();return n.empty(),this.collection.forEach(function(u){return t.addToCollection(u,i)}),n.append(i),n.attr("class",this.className),this},s.prototype.createPlaceholder=function(t){var n=document.createElement("div"),i=document.createElement("div");return n.className=t+"placeholder",n.style.display="none",n.style.pointerEvents="none",i.className=t+"placeholder-int",n.appendChild(i),n},s}(R.Ss);const EC=CC;var d1=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),o_=function(){return o_=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},o_.apply(this,arguments)},OC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return d1(s,h),s.prototype.events=function(){return o_(o_({},Wm.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},s.prototype.templateInput=function(){var t=this.pfx,n=this.em,i=n?.getConfig().icons,u=i?.plus||"+";return'\n      <div class="'.concat(t,"field ").concat(t,'stack">\n        <button type="button" id="').concat(t,'add" data-add-layer>\n          ').concat(u,"\n        </button>\n        <div data-layers-wrapper></div>\n      </div>\n    ")},s.prototype.init=function(){var t=this.model;this.listenTo(t.layers,"change reset",this.updateStatus),this.listenTo(t,"change:isEmptyValue",this.updateStatus)},s.prototype.addLayer=function(){this.model.addLayer({},{at:0})},s.prototype.setValue=function(){},s.prototype.remove=function(){var t;return null===(t=this.layersView)||void 0===t||t.remove(),Wm.prototype.remove.apply(this,arguments),this},s.prototype.clearCached=function(){Wm.prototype.clearCached.apply(this,arguments),delete this.layersView},s.prototype.onRender=function(){var t=this,n=t.model,i=t.el,u=t.config,y=n.get("properties");if(y.length&&!this.props){var I=new u1({config:o_(o_({},u),{highlightComputed:!1,highlightChanged:!1}),collection:y,parent:this});I.render();var W=new EC({collection:n.layers,config:u,propertyView:this});W.render(),i.querySelector("[data-layers-wrapper]").appendChild(W.el),this.props=I,this.layersView=W}},s}(Wm);const DC=OC;var TC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),O0=function(){return O0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},O0.apply(this,arguments)},SC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return TC(s,h),s.prototype.events=function(){return O0(O0({},ig.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},s.prototype.templateInput=function(){var t,n=this.pfx,i=this.em,u=null===(t=this.em)||void 0===t?void 0:t.getConfig().icons,y=u?.close;return'\n      <div class="'.concat(n,"field ").concat(n,"file\">\n        <div id='").concat(n,"input-holder'>\n          <div class=\"").concat(n,'btn-c">\n            <button class="').concat(n,'btn" id="').concat(n,'images" type="button" data-open-assets>\n              ').concat(i.t("styleManager.fileButton"),'\n            </button>\n          </div>\n          <div style="clear:both;"></div>\n        </div>\n        <div id="').concat(n,'preview-box" class="').concat(n,'preview-file" data-preview-box>\n          <div id="').concat(n,'preview-file" class="').concat(n,'preview-file-cnt" data-preview></div>\n          <div id="').concat(n,'close" class="').concat(n,'preview-file-close" data-clear-asset>').concat(y,"</div>\n        </div>\n      </div>\n    ")},s.prototype.__setValueInput=function(t){var n=this.model,i=this.el,u=n.getDefaultValue(),y=i.querySelector("[data-preview-box]"),I=i.querySelector("[data-preview]");y.style.display=t&&t!==u?"":"none",I.style.backgroundImage=t||n.getDefaultValue()},s.prototype.openAssetManager=function(){var t,n=this,i=null===(t=this.em)||void 0===t?void 0:t.Assets;i?.open({select:function(u,y){var I=(0,m.isString)(u)?u:u.get("src");n.model.upValue(I,{partial:!y}),y&&i.close()},types:["image"],accept:"image/*"})},s}(ig);const PC=SC;var MC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),AC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return MC(s,h),s.prototype.templateInput=function(t){return""},s.prototype.init=function(){var t=this.model;this.listenTo(t,"change:unit",this.onValueChange),this.listenTo(t,"change:units",this.render)},s.prototype.setValue=function(t){},s.prototype.onRender=function(){var t=this,n=t.ppfx,u=t.el;if(!this.inputInst){var y=t.model.input;y.ppfx=n,y.render(),u.querySelector(".".concat(n,"fields")).appendChild(y.el),this.input=y.inputEl.get(0),this.inputInst=y}},s.prototype.clearCached=function(){ig.prototype.clearCached.apply(this,arguments),this.inputInst=null},s}(ig);const ag=AC;var kC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),LC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return kC(s,h),s.prototype.setValue=function(t){var n;null===(n=this.inputInst)||void 0===n||n.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},s.prototype.remove=function(){var t=this;ag.prototype.remove.apply(this,arguments);var n=this.inputInst;return n&&n.remove&&n.remove(),["inputInst","$color"].forEach(function(i){return t[i]=null}),this},s.prototype.__handleChange=function(t,n){this.model.upValue(t,{partial:n})},s.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var n=this,i=n.ppfx,I=n.el,W=new Nv({target:n.em,model:n.model,ppfx:i,onChange:this.__handleChange}).render();I.querySelector(".".concat(i,"fields")).appendChild(W.el),this.input=null===(t=W.inputEl)||void 0===t?void 0:t.get(0),this.inputInst=W}},s}(ag);const IC=LC;var RC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),D0=function(){return D0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},D0.apply(this,arguments)},r2=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},FC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return RC(s,h),s.prototype.defaults=function(){return D0(D0({},yu.getDefaults()),{options:[],full:0})},s.prototype.getOptions=function(){var t=this.attributes,n=t.options;return(n&&n.length?n:t.list)||[]},s.prototype.getOption=function(t){var n=this,i=(0,X.isDef)(t)?t:this.getValue();return this.getOptions().filter(function(u){return n.getOptionId(u)===i})[0]||null},s.prototype.setOptions=function(t){return void 0===t&&(t=[]),this.set("options",t),this},s.prototype.addOption=function(t){if(t){var n=this.getOptions();this.setOptions(r2(r2([],n,!0),[t],!1))}return this},s.prototype.getOptionId=function(t){return(0,X.isDef)(t.id)?t.id:t.value},s.prototype.getOptionLabel=function(t,n){var i;void 0===n&&(n={});var u=n.locale,y=void 0===u||u,I=((0,m.isString)(t)?this.getOption(t):t)||{},W=this.getOptionId(I),ce=I.label||I.name||W,ie=n.property||this.getId();return y&&(null===(i=this.em)||void 0===i?void 0:i.t("styleManager.options.".concat(ie,".").concat(W)))||ce},s.prototype.initialize=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];yu.prototype.initialize.apply(this,t),this.listenTo(this,"change:options",this.__onOptionChange)},s.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},s}(yu);const p1=FC;var jC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();const n2=function(h){function s(t){var n=h.call(this,t)||this;return n.listenTo(n.model,"change:options",n.updateOptions),n}return jC(s,h),s.prototype.templateInput=function(){var t=this.pfx,n=this.ppfx;return'\n      <div class="'.concat(n,"field ").concat(n,'select">\n        <span id="').concat(t,'input-holder"></span>\n        <div class="').concat(n,'sel-arrow">\n          <div class="').concat(n,'d-s-arrow"></div>\n        </div>\n      </div>\n    ')},s.prototype.updateOptions=function(){delete this.input,this.onRender()},s.prototype.onRender=function(){var t=this.pfx,n=this.model,i=n.getOptions();if(!this.input){var u=[];i.forEach(function(I){var W=n.getOptionId(I),ce=n.getOptionLabel(W),ie=I.style?I.style.replace(/"/g,"&quot;"):"",Re=ie?'style="'.concat(ie,'"'):"",qe=W.replace(/"/g,"&quot;");u.push('<option value="'.concat(qe,'" ').concat(Re,">").concat(ce,"</option>"))});var y=this.el.querySelector("#".concat(t,"input-holder"));y.innerHTML="<select>".concat(u.join(""),"</select>"),this.input=y.firstChild}},s.prototype.__setValueInput=function(t){var n=this.model,i=this.getInputEl(),u=n.getOptions()[0],y=u?n.getOptionId(u):"";i&&(i.value=t||y)},s}(ig);var NC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),T0=function(){return T0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},T0.apply(this,arguments)};const f1=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return NC(s,h),s.prototype.defaults=function(){return T0(T0({},p1.getDefaults()),{full:1})},s}(p1);var dy=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),o2=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return dy(s,h),s.prototype.templateInput=function(){var t=this.ppfx;return'<div class="'.concat(t,"field ").concat(t,'field-radio"></div>')},s.prototype.onRender=function(){var t=this.pfx,n=this.ppfx,i=this.model,u="".concat(n,"radio-item-label"),y=i.getName(),I=i.getOptions(),W="".concat(t,"radio ").concat(t,"radio-").concat(y),ce=i.cid;if(!this.input){var ie=[];I.forEach(function(qe){var ct=qe.className?"".concat(qe.className," ").concat(t,"icon ").concat(u):"",qt=i.getOptionId(qe),_r="".concat(y,"-").concat(qt,"-").concat(ce),zr=ct?"":i.getOptionLabel(qt),br=qe.title?'title="'.concat(qe.title,'"'):"",co=i.getValue()===qt?"checked":"";ie.push('\n          <div class="'.concat(n,'radio-item">\n            <input type="radio" class="').concat(W,'" id="').concat(_r,'" name="').concat(y,"-").concat(ce,'" value="').concat(qt,'" ').concat(co,'/>\n            <label class="').concat(ct||u,'" ').concat(br,' for="').concat(_r,'">').concat(zr,"</label>\n          </div>\n        "))});var Re=this.el.querySelector(".".concat(n,"field"));Re.innerHTML='<div class="'.concat(n,'radio-items">').concat(ie.join(""),"</div>"),this.input=Re.firstChild}},s.prototype.__setValueInput=function(t){var n,u=t||this.model.getDefaultValue(),y=null===(n=this.getInputEl())||void 0===n?void 0:n.querySelector('[value="'.concat(u,'"]'));y&&(y.checked=!0)},s}(n2);const UC=o2;var BC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),pv=function(){return pv=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},pv.apply(this,arguments)},WC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return BC(s,h),s.prototype.defaults=function(){return pv(pv({},yu.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},s.prototype.getUnits=function(){return this.get("units")||[]},s.prototype.getUnit=function(){return this.get("unit")},s.prototype.getMin=function(){return this.get("min")},s.prototype.getMax=function(){return this.get("max")},s.prototype.getStep=function(){return this.get("step")},s.prototype.upUnit=function(t,n){return void 0===n&&(n={}),this._up({unit:t},n)},s.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),yu.callParentInit(yu,this,t,n);var i=this.get("unit"),u=this.getUnits();this.input=(0,X.hasWin)()?new yt({model:this}):void 0,u.length&&!i&&this.set("unit",u[0],{silent:!0}),yu.callInit(this,t,n)},s.prototype.__getClearProps=function(){return pv(pv({},yu.prototype.__getClearProps()),{unit:""})},s.prototype.parseValue=function(t,n){void 0===n&&(n={});var i=yu.prototype.parseValue.apply(this,arguments),u=this.input.validateInputValue(i.value,pv({deepCheck:1},n)),I=u.unit;return i.value=u.value,i.unit=I,i},s.prototype.getFullValue=function(){var t=this.get("value"),n=this.get("unit"),i=(0,m.isUndefined)(t)?"":"".concat(t),u=!(0,m.isUndefined)(n)&&i?n:"",y="".concat(i).concat(u);return yu.prototype.getFullValue.apply(this,[y])},s}(yu);const S0=WC;var i2=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),P0=function(){return P0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},P0.apply(this,arguments)};const M0=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return i2(s,h),s.prototype.defaults=function(){return P0(P0({},S0.getDefaults()),{showInput:1})},s}(S0);var ZC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),A0=function(){return A0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},A0.apply(this,arguments)};const KC=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return ZC(s,h),s.prototype.events=function(){return A0(A0({},ag.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},s.prototype.templateInput=function(t){var n=this.ppfx;return'\n      <div class="'.concat(n,"field ").concat(n,'field-range">\n        <input type="range" min="').concat(t.get("min"),'" max="').concat(t.get("max"),'" step="').concat(t.get("step"),'"/>\n      </div>\n    ')},s.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},s.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},s.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},s.prototype.setValue=function(t){var n=this.model,i=n.parseValue(t);this.getSliderEl().value=""===t?n.getDefaultValue():parseFloat(i.value),ag.prototype.setValue.apply(this,arguments)},s.prototype.onRender=function(){ag.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},s.prototype.clearCached=function(){ag.prototype.clearCached.apply(this,arguments),delete this.slider},s}(ag),h1=R.pM.extend(nv).extend({extendViewApi:1,init:function(){var s=this.em,t=this.opts.module||s?.get("StyleManager");t&&(t.__listenAdd(this,t.events.propertyAdd),t.__listenRemove(this,t.events.propertyRemove))},types:[{id:"stack",model:hC,view:DC,isType:function(h){if(h&&"stack"==h.type)return h}},{id:"composite",model:dv,view:Wm,isType:function(h){if(h&&"composite"==h.type)return h}},{id:"file",model:yu,view:PC,isType:function(h){if(h&&"file"==h.type)return h}},{id:"color",model:yu,view:IC,isType:function(h){if(h&&"color"==h.type)return h}},{id:"select",model:p1,view:n2,isType:function(h){if(h&&"select"==h.type)return h}},{id:"radio",model:f1,view:UC,isType:function(h){if(h&&"radio"==h.type)return h}},{id:"slider",model:M0,view:KC,isType:function(h){if(h&&"slider"==h.type)return h}},{id:"integer",model:S0,view:ag,isType:function(h){if(h&&"integer"==h.type)return h}},{id:"number",model:S0,view:ag,isType:function(h){if(h&&"number"==h.type)return h}},{id:"base",model:yu,view:ig,isType:function(h){return h.type="base",h}}]});var VC=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),k0=function(){return k0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},k0.apply(this,arguments)},nO=function(h){function s(t,n){void 0===n&&(n={});var i=h.call(this,t)||this,u=n.em;i.em=u;var I=i.buildProperties((t||{}).buildProps),W=i.get("name")||"",ce=[];!i.get("id")&&i.set("id",W.replace(/ /g,"_").toLowerCase()),ce=(ce=I?i.extendProperties(I):i.get("properties").map(function(Re){return(0,m.isString)(Re)?i.buildProperties(Re)[0]:Re}).filter(Boolean)).map(function(Re){return i.checkExtend(Re)});var ie=new h1(ce,{em:u});return ie.sector=i,i.set("properties",ie),i}return VC(s,h),s.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(s.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),s.prototype.getId=function(){return this.get("id")},s.prototype.getName=function(){var t,n=this.getId();return(null===(t=this.em)||void 0===t?void 0:t.t("styleManager.sectors.".concat(n)))||this.get("name")},s.prototype.setName=function(t){return this.set("name",t)},s.prototype.isOpen=function(){return!!this.get("open")},s.prototype.setOpen=function(t){return this.set("open",t)},s.prototype.isVisible=function(){return!!this.get("visible")},s.prototype.getProperties=function(t){void 0===t&&(t={});var n=this.properties;return(n.models?function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([],n.models,!0):n).filter(function(i){var u=!0;return t.withValue&&(u=i.hasValue({noParent:!0})),t.withParentValue&&(u=!i.hasValue({noParent:!0})&&i.hasValue()),u})},s.prototype.getProperty=function(t){return this.getProperties().filter(function(n){return n.get("id")===t})[0]||void 0},s.prototype.addProperty=function(t,n){return this.properties.add(this.checkExtend(t),n)},s.prototype.extendProperties=function(t,n,i){void 0===i&&(i=!1);for(var u=t.length,y=n||this.get("properties"),I=this.get("extendBuilded"),W=[],ce=0,ie=y.length;ce<ie;ce++){for(var Re=y[ce],qe=0,ct=0;ct<u;ct++){var qt=t[ct];if(Re.property==qt.property||Re.id==qt.property){var _r=Re.properties;_r&&_r.length&&(Re.properties=this.extendProperties(qt.properties||[],_r,1)),t[ct]=I?(0,m.extend)(qt,Re):Re,W[ct]=t[ct],qe=1}}qe||(t.push(Re),W.push(Re))}return i?W.filter(function(zr){return zr}):t},s.prototype.checkExtend=function(t){var n=((0,m.isString)(t)?{extend:t}:t)||{},i=n.extend,u=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(n,["extend"]);return i?k0(k0({},this.buildProperties([i])[0]||{}),u):t},s.prototype.buildProperties=function(t){var n,i=t||[];if(!i.length)return[];var u=null===(n=this.em)||void 0===n?void 0:n.Styles.builtIn;return u?.build(i)},s}(R.Kx);const a2=nO;var sg=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),L0=function(){return L0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},L0.apply(this,arguments)};const I0=function(h){function s(){return null!==h&&h.apply(this,arguments)||this}return sg(s,h),s.prototype.initialize=function(t,n){void 0===n&&(n={});var i=n.module;this.em=n.em,this.module=i,this.listenTo(this,"reset",this.onReset)},s.prototype.model=function(t,n){void 0===n&&(n={});var i=n.collection.em;return new a2(t,L0(L0({},n),{em:i}))},s.prototype.onReset=function(t,n){void 0===n&&(n={}),(n.previousModels||[]).forEach(function(i){return i.get("properties").reset()})},s}(R.pM);var lg=function(){return lg=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},lg.apply(this,arguments)},fv=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},Rd=function(h){return h.map(function(s){return{id:s}})},HC=function(){function h(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var s=", sans-serif",t=["flex-start","flex-end","center"],n=fv(fv([],t,!0),["baseline","stretch"],!1);this.optsBgSize=Rd(["auto","cover","contain"]),this.optsBgAttach=Rd(["scroll","fixed","local"]),this.optsBgRepeat=Rd(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=Rd(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=Rd(["visible","hidden","scroll","auto"]),this.optsDir=Rd(["row","row-reverse","column","column-reverse"]),this.opstDisplay=Rd(["block","inline","inline-block","flex","none"]),this.optsTransitFn=Rd(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=Rd(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=Rd(["none","left","right"]),this.optsPos=Rd(["static","relative","absolute","fixed"]),this.optsTextAlign=Rd(["left","center","right","justify"]),this.optsFlexAlign=Rd(n),this.optsJustCont=Rd(fv(fv([],t,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=Rd(fv(fv([],t,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=Rd(fv(["auto"],n,!0)),this.optsTransitProp=Rd(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=Rd(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=Rd(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+s,"Arial Black, Gadget"+s,"Brush Script MT"+s,"Comic Sans MS, cursive"+s,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+s,"Impact, Charcoal"+s,"Lucida Sans Unicode, Lucida Grande"+s,"Tahoma, Geneva"+s,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+s,"Verdana, Geneva"+s].map(function(i){return{id:i,label:i.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return h.prototype.__sub=function(s){var t=this;return function(){return s.map(function(n){if((0,m.isString)(n))return t.get(n);var i=n.extend,u=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(n,["extend"]);return lg(lg({},t.get(i)),u)})}},h.prototype.init=function(){var s=this,t=this,n=t.fixedValues,i=t.requireFlex,u=t.typeNumber;return this.props={},[["text-shadow-h",{type:u,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:n},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:i},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:u,default:"0",requiresParent:i}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:i},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:i},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(I,W){var ce=W.values,Re=ce["box-shadow-v"],qe=ce["box-shadow-blur"],ct=ce["box-shadow-spread"];return"".concat(ce["box-shadow-h"]," ").concat(Re," ").concat(qe," ").concat(ct)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(I,W){var ce=W.values,Re=ce["text-shadow-v"],qe=ce["text-shadow-blur"];return"".concat(ce["text-shadow-h"]," ").concat(Re," ").concat(qe)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(I,W){var ce=W.values;return[ce["background-repeat-sub"]||"",ce["background-position-sub"]||"",ce["background-attachment-sub"]||"",ce["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(I,W){var ce=W.property,ie=I[W.name]||"",Re=ce.getLayerSeparator();return ie?ie.split(Re).map(function(qe){var ct=ce.__parseFn(qe);return{"transform-type":ct.name,"transform-value":ct.value}}):[]},toStyle:function(I,W){var ce;return(ce={})[W.name]="".concat(I["transform-type"],"(").concat(I["transform-value"],")"),ce},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(I){var W=I.property;if(I.to.value){var ce=W.getOption(),ie=lg({},ce.propValue||{}),Re=W.getParent().getProperty("transform-value"),qe=Re.getUnit();(!qe||ie?.units.indexOf(qe)<0)&&(ie.unit=ie?.units[0]||""),Re.up(ie)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]].forEach(function(I){s.add(I[0],I[1]||{},{from:I[2]})}),this},h.prototype.add=function(s,t,n){void 0===t&&(t={}),void 0===n&&(n={});var y=lg(lg(lg({},this.props[n.from||s]||{}),{property:s}),t);return y.properties&&(0,m.isFunction)(y.properties)&&(y.properties=y.properties()),this.props[s]=y,y},h.prototype.get=function(s){return this.props[s]},h.prototype.build=function(s){var t=this,n=[];return((0,m.isString)(s)?[s]:s).forEach(function(i){n.push(t.get(i)||{property:i})}),n},h}();const GC=HC;var i_=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),g1=function(h){function s(t){var n=h.call(this,t)||this,i=t.config||{},u=n.model,y=i.em;return n.config=i,n.em=y,n.pfx=i.stylePrefix||"",n.listenTo(u,"destroy remove",n.remove),n.listenTo(u,"change:open",n.updateOpen),n.listenTo(u,"change:visible",n.updateVisibility),n}return i_(s,h),s.prototype.template=function(t){var n,i=t.pfx,u=t.label,y=null===(n=this.em)||void 0===n?void 0:n.getConfig().icons,I=y?.caret||"",W="".concat(i,"sector-");return x(py||(py=function(h,s){return Object.defineProperty?Object.defineProperty(h,"raw",{value:s}):h.raw=s,h}(['\n      <div class="','title" data-sector-title>\n        <div class="','caret">$','</div>\n        <div class="','label">',"</div>\n      </div>\n    "],['\n      <div class="','title" data-sector-title>\n        <div class="','caret">$','</div>\n        <div class="','label">',"</div>\n      </div>\n    "])),W,W,I,W,u)},s.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},s.prototype.updateOpen=function(){var t=this,n=t.$el,u=t.pfx,y=t.model.isOpen();n[y?"addClass":"removeClass"]("".concat(u,"open")),this.getPropertiesEl().style.display=y?"":"none"},s.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},s.prototype.getPropertiesEl=function(){return this.$el.find(".".concat(this.pfx,"properties")).get(0)},s.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get("open"))},s.prototype.renderProperties=function(){var n=this.config,i=this.model.get("properties");if(i){var u=new u1({collection:i,config:n});this.$el.append(u.render().el)}},s.prototype.render=function(){var t=this,n=t.pfx,i=t.model,u=t.$el,y=i.getId(),I=i.getName();return u.html(this.template({pfx:n,label:I})),this.renderProperties(),u.attr("class","".concat(n,"sector ").concat(n,"sector__").concat(y," no-select")),this.updateOpen(),this},s}(R.Ss);const hv=g1;var py,F0=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fy=function(h){function s(t){void 0===t&&(t={});var n=h.call(this,t)||this,i=t.module,u=t.config,y=n.collection;return n.pfx=u?.stylePrefix||"",n.ppfx=u?.pStylePrefix||"",n.config=u,n.module=i,n.listenTo(y,"add",n.addTo),n.listenTo(y,"reset",n.render),n}return F0(s,h),s.prototype.remove=function(){var t=this;return R.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(n){return t[n]={}}),this},s.prototype.addTo=function(t,n,i){void 0===i&&(i={}),this.addToCollection(t,null,i)},s.prototype.addToCollection=function(t,n,i){void 0===i&&(i={});var I=n||this.el,W=new hv({model:t,config:this.config}).render().el;return(0,jt.Sc)(I,W,i.at),W},s.prototype.render=function(){var t=this,n=this,i=n.$el,u=n.pfx,y=n.ppfx;i.empty();var I=document.createDocumentFragment();return this.collection.each(function(W){return t.addToCollection(W,I)}),i.append(I),i.addClass("".concat(u,"sectors ").concat(y,"one-bg ").concat(y,"two-color")),this},s}(R.Ss);const qC=fy;var $C=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ug=function(){return Ug=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Ug.apply(this,arguments)},hy=function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))},mv="".concat("style",":"),v1="".concat(mv,"sector"),_1="".concat(v1,":add"),JC="".concat(v1,":remove"),YC="".concat(v1,":update"),y1="".concat(mv,"property"),QC="".concat(y1,":add"),XC="".concat(y1,":remove"),eE="".concat(y1,":update"),s2="".concat(mv,"layer:select"),b1="".concat(mv,"target"),tE="".concat(mv,"custom"),Kp=function(h){return h||0===h},rE={all:"style",sectorAdd:_1,sectorRemove:JC,sectorUpdate:YC,propertyAdd:QC,propertyRemove:XC,propertyUpdate:eE,layerSelect:s2,target:b1,custom:tE},l2=function(h){function s(t){var n=h.call(this,t,"StyleManager",new I0([],{em:t}),rE,{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]})||this;n.Sector=a2,n.storageKey="",(0,m.bindAll)(n,"__clearStateTarget");var i=n.config,u=i.pStylePrefix;u&&(i.stylePrefix=u+i.stylePrefix),n.builtIn=new GC,n.properties=new h1([],{em:t,module:n}),n.sectors=n.all;var y=new R.Kx({targets:[]});n.model=y;var W="component:toggled ".concat(mt.I.update,":classes change:state change:device frame:resized selector:type");n.upAll=(0,m.debounce)(function(){return n.__upSel()},0),y.listenTo(t,W,n.upAll),y.listenTo(t,"component:toggled",n.__clearStateTarget);var ce=(0,m.debounce)(function(){n.__upProps(),n.__trgCustom()},0);y.listenTo(t,"styleable:change undo redo",ce);var ie=(0,m.debounce)(function(){return n.__trgCustom()},0);return y.listenTo(t,"".concat(s2," ").concat(b1),ie),y.on("change:lastTarget",function(){return t.trigger(b1,n.getSelected())}),n}return $C(s,h),s.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},s.prototype.__trgCustom=function(t){void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},s.prototype.__trgEv=function(t){for(var n,i=[],u=1;u<arguments.length;u++)i[u-1]=arguments[u];(n=this.em).trigger.apply(n,hy([t],i,!1))},s.prototype.__clearStateTarget=function(){var t=this,n=this.em,i=this.__getStateTarget();i&&n?.skip(function(){n.Css.remove(i),t.model.set({stateTarget:null})})},s.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},s.prototype.postRender=function(){this.__appendTo()},s.prototype.addSector=function(t,n,i){void 0===i&&(i={});var u=this.getSector(t);return u||(n.id=t,u=this.sectors.add(n,i)),u},s.prototype.getSector=function(t,n){void 0===n&&(n={});var i=this.sectors.where({id:t})[0];return!i&&n.warn&&this._logNoSector(t),i||null},s.prototype.getSectors=function(t){void 0===t&&(t={});var n=this.sectors,i=n&&n.models?t.array?hy([],n.models,!0):n:[];return t.visible?i.filter(function(u){return u.isVisible()}):i},s.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},s.prototype.addProperty=function(t,n,i){void 0===i&&(i={});var u,y=this.getSector(t,{warn:!0});return y&&(u=y.addProperty(n,i)),u},s.prototype.getProperty=function(t,n){var i,u=this.getSector(t,{warn:!0});return u&&(i=u.properties.filter(function(y){return y.get("property")===n||y.get("id")===n})[0]),i},s.prototype.getProperties=function(t){var n,i=this.getSector(t,{warn:!0});return i&&(n=i.properties),n},s.prototype.removeProperty=function(t,n){var i=this.getProperties(t);return i?i.remove(this.getProperty(t,n)):null},s.prototype.select=function(t,n){var i=this;void 0===n&&(n={});var u=this.em,y=(0,m.isArray)(t)?t:[t],I=n.stylable,W=u.Css,ce=[];y.filter(Boolean).forEach(function(_r){var zr=_r;if((0,m.isString)(_r)){var br=W.getRule(_r)||W.setRule(_r);!(0,m.isUndefined)(I)&&br.set({stylable:I}),zr=br}ce.push(zr)});var ie=n.component||ce.filter(function(_r){return(0,X.isComponent)(_r)}).reverse()[0];ce=ce.map(function(_r){return i.getModelToStyle(_r)});var Re=u.getState(),qe=ce.slice().reverse()[0],ct=this.getParentRules(qe,{state:Re,component:ie}),qt=this.__getStateTarget();return u.skip(function(){var _r;if(Re&&null!==(_r=qe?.getState)&&void 0!==_r&&_r.call(qe)){var zr=qe.getStyle();qt?qt.setStyle(zr):qt=W.getAll().add({selectors:"gjs-selected",style:zr,shallow:!0,important:!0})}else qt&&(W.remove(qt),qt=void 0)}),this.model.set({targets:ce,lastTarget:qe,lastTargetParents:ct,stateTarget:qt,component:ie}),this.__upProps(n),ce},s.prototype.getSelected=function(){return this.model.get("lastTarget")},s.prototype.getSelectedAll=function(){return this.model.get("targets")},s.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},s.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},s.prototype.addStyleTargets=function(t,n){this.getSelectedAll().map(function(y){return y.addStyle(t,n)});var i=this.getSelected();i&&this.__emitCmpStyleUpdate(t);var u=this.__getStateTarget();i&&u?.setStyle(i.getStyle(),n)},s.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},s.prototype.getBuiltInAll=function(){return this.builtIn.props},s.prototype.addBuiltIn=function(t,n){return this.builtIn.add(t,n)},s.prototype.getModelToStyle=function(t,n){void 0===n&&(n={});var i=this.em,u=n.skipAdd;if(i&&t?.toHTML){var y=i.getConfig(),I=i.UndoManager,W=i.Css,ce=i.Selectors,ie=ce?ce.getConfig():{},Re=y.devicePreviewMode?"":i.get("state"),qe=t.get("classes").getStyleable(),ct=qe.length,qt=!ie.componentFirst||n.useClasses,_r={noCount:1},zr={state:Re,addOpts:_r};I.skip(function(){var br;if(ct&&qt){var co=i.getCurrentMedia();(br=W.get(qe,Re,co))||u||(br=W.add(qe,Re,co,{},_r))}else if(y.avoidInlineStyle){var Bo=t.getId();!(br=W.getIdRule(Bo,zr))&&!u&&(br=W.setIdRule(Bo,{},zr)),t.is("wrapper")&&br.set("wrapper",1,_r)}br&&(t=br)})}return t},s.prototype.getParentRules=function(t,n){var i=void 0===n?{}:n,u=i.state,I=this.em,W=[];if(I&&t){var ce=i.component,ie=I.Css,Re=I.CodeManager.getGenerator("css"),qe=t.toHTML?t:t.getComponent(),ct={array:!0},qt=[],_r=[],zr=[],br=[],co=function(Qi){return Qi.length?ie.getRules().filter(function(Ca){var ys=Ca.getSelectors().map(function(ss){return ss.getFullName()});return 0!==ys.length&&ys.every(function(ss){return Qi.indexOf(ss)>=0})}):[]},Bo=function(Qi){return Qi?ie.getRules().filter(function(Ca){return Ca.selectorsToString()===Qi}):[]};qe?(qt=ie.getRules("#".concat(qe.getId())),_r=Bo(qe.get("tagName")),br=(ce?co(ce.getSelectors().getFullName(ct)):[]).concat(_r).concat(qt)):(qt=ce?ie.getRules("#".concat(ce.getId())):[],_r=Bo(ce?.get("tagName")||""),zr=co((ce?.getSelectors().getFullName(ct)||[]).filter(function(Qi){return-1===t.getSelectors().getFullName(ct).findIndex(function(Ca){return Ca===Qi})}).concat(t.getSelectors().getFullName(ct))),br=_r.concat(qt).concat(zr));var Oi=br.filter(function(Qi){return(0,m.isUndefined)(u)?1:Qi.get("state")===u}).sort(Re.sortRules).reverse();W=Oi.slice(Oi.indexOf(t)+1)}return W},s.prototype.addType=function(t,n){this.properties.addType(t,n)},s.prototype.getType=function(t){return this.properties.getType(t)},s.prototype.getTypes=function(){return this.properties.getTypes()},s.prototype.createType=function(t,n){var i=void 0===n?{}:n,u=i.model,y=void 0===u?{}:u,I=i.view,W=void 0===I?{}:I,ce=this.config,ie=this.getType(t);if(ie)return new ie.view(Ug({model:new ie.model(y),config:ce},W))},s.prototype.render=function(){var t=this,u=t.SectView;return this.SectView=new qC({el:u&&u.el,em:t.em,config:t.config,module:this,collection:this.sectors}),this.SectView.render().el},s.prototype._logNoSector=function(t){var n=this.em;n&&n.logWarning("'".concat(t,"' sector not found"))},s.prototype.__emitCmpStyleUpdate=function(t,n){void 0===n&&(n={});var i=this.em;if(!t.__p){var u=this.getSelectedAll(),y=n.components||i.getSelectedAll(),I=Array.isArray(y)?y:[y],W=Ug({},t);delete W.__p,I.forEach(function(ce){return!u.includes(ce)&&ce.__onStyleChange(W)})}},s.prototype.__upProps=function(t){var n=this;void 0===t&&(t={});var i=this.getSelected();if(i){var u=this.sectors,y=this.model.get("component"),I=this.getSelectedParents(),W=i.getStyle(),ce=I.map(function(ie){return{target:ie,style:ie.getStyle()}});u.map(function(ie){ie.getProperties().map(function(Re){n.__upProp(Re,W,ce,t)})}),u.forEach(function(ie){var Re=ie.getProperties();Re.forEach(function(ct){var qt=ct.__checkVisibility({target:i,component:y,sectors:u});ct.set("visible",qt)});var qe=Re.some(function(ct){return ct.isVisible()});ie.set("visible",qe)})}},s.prototype.__upProp=function(t,n,i,u){var y=this,I=t.getName(),W=n[I],ce=Kp(W),ie="stack"===t.getType(),Re="composite"===t.getType(),qe=Ug(Ug({},u),{__up:!0}),ct=!Re&&!ie,qt=t,_r=t,zr=ie?qt.__getLayersFromStyle(n):[],br=Re?_r.__getPropsFromStyle(n):{},co=ce?W:null,Bo=null;if(ie&&null===zr||Re&&null===br){var Oi=ie?"__getLayersFromStyle":"__getPropsFromStyle";if(Ca=i.filter(function(_l){return null!==qt[Oi](_l.style)})[0]){co=Ca.style[I],Bo=Ca.target;var Qi=qt[Oi](Ca.style);ie?zr=Qi:br=Qi}}else if(!ce){var Ca;co=null,(Ca=i.filter(function(_l){return Kp(_l.style[I])})[0])&&(co=Ca.style[I],Bo=Ca.target)}if(t.__setParentTarget(Bo),ct&&t.__getFullValue()!==co&&t.upValue(co,qe),ie&&qt.__setLayers(zr||[],{isEmptyValue:qt.isEmptyValueStyle(n)}),Re){var ys=_r.getProperties();if(_r.isDetached()){var ss=_r.__getPropsFromStyle(n,{byName:!0})||{},il=i.map(function(_l){return Ug(Ug({},_l),{style:_r.__getPropsFromStyle(_l.style,{byName:!0})||{}})});ys.map(function(_l){return y.__upProp(_l,ss,il,u)})}else _r.__setProperties(br||{},qe),_r.getProperties().map(function(_l){return _l.__setParentTarget(Bo)})}},s.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach(function(n){n.reset(),n.stopListening()}),null===(t=this.SectView)||void 0===t||t.remove(),this.model.stopListening(),this.upAll.cancel()},s}(Te);const w1=l2;var bu=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),N0=function(){return N0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},N0.apply(this,arguments)};const a_=function(h){function s(t,n){var i=h.call(this,t,n)||this;return i.em=n,i.model=function(u,y){return void 0===y&&(y={}),new yi(u,N0(N0({},y),{em:n}))},i}return bu(s,h),s}(R.pM);var c2=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),u2=function(h){function s(t){var n=h.call(this,t,"DataSources",new a_([],t),Dr)||this;return n.storageKey="dataSources",n.events=Dr,Object.assign(n,H.Events),n}return c2(s,h),s.prototype.destroy=function(){},s.prototype.add=function(t,n){void 0===n&&(n={});var i=this.all;return t.id=t.id||this._createId(),i.add(t,n)},s.prototype.get=function(t){return this.all.get(t)},s.prototype.getValue=function(t,n){return(0,X.get)(this.getContext(),t,n)},s.prototype.getContext=function(){return this.all.reduce(function(t,n){return t[n.id]=n.records.reduce(function(i,u,y){return i[u.id||y]=u.attributes,i},{}),t},{})},s.prototype.remove=function(t,n){return this.__remove(t,n)},s.prototype.fromPath=function(t){var n=[],i=(0,X.stringToPath)(t||""),u=i[0],y=i[1],I=i.slice(2),W=this.get(u),ce=W?.records.get(y);return W&&n.push(W),ce&&(n.push(ce),I.length&&n.push(I.join("."))),n},s.prototype.store=function(){var t,n=[];return this.all.forEach(function(i){var u=i.get("skipFromStorage");u||n.push({id:i.id,name:i.get("name"),records:i.records.toJSON(),skipFromStorage:u})}),(t={})[this.storageKey]=n,t},s.prototype.load=function(t){return this.loadProjectData(t)},s.prototype.postLoad=function(){var t=this.em;t.listenTo(this.all,R.e2,function(i,u,y){return t.changesUp(y||u)})},s}(Te);const d2=u2;var s_=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Vp=function(){return Vp=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Vp.apply(this,arguments)},zp=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},x1=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}};G().$=D.default;var iE=[_w,n0,Px,oC,Vy,ci,iu,w1,Tn,Dw,mh,Nw,lC,ki,Pg,Jm,rc,ch,d2],aE=[av,jm,uw,Ah,d2];!function(h){var s=h.$;if(s&&s.prototype&&"jQuery"!==s.prototype.constructor.name){var t=s.fn;t.hide=function(){return this.css("display","none")},t.show=function(){return this.css("display","block")},t.focus=function(){var u=this.get(0);return u&&u.focus(),this},t.bind=function(u,y){return this.on(u,y)},t.unbind=function(u,y){if((0,m.isObject)(u)){for(var I in u)u.hasOwnProperty(I)&&this.off(I,u[I]);return this}return this.off(u,y)},t.click=function(u){return u?this.on("click",u):this.trigger("click")},t.change=function(u){return u?this.on("change",u):this.trigger("change")},t.keydown=function(u){return u?this.on("keydown",u):this.trigger("keydown")},t.delegate=function(u,y,I,W){return W||(W=I),this.on(y,u,function(ce){ce.data=I,W(ce)})},t.scrollLeft=function(){var u=this.get(0),y=(u=9==u.nodeType?u.defaultView:u)instanceof Window?u:null;return y?y.pageXOffset:u.scrollLeft||0},t.scrollTop=function(){var u=this.get(0),y=(u=9==u.nodeType?u.defaultView:u)instanceof Window?u:null;return y?y.pageYOffset:u.scrollTop||0};var n=s.prototype.offset;t.offset=function(u){var y,I;return u&&(y=u.top,I=u.left),void 0!==y&&this.css("top","".concat(y,"px")),void 0!==I&&this.css("left","".concat(I,"px")),n.call(this)},s.map=function(u,y){for(var I=[],W=0;W<u.length;W++)I.push(y(u[W],W));return I};var i=Array.prototype.indexOf;s.inArray=function(u,y,I){return null==y?-1:i.call(y,u,I)},s.Event=function(u,y){if(!(this instanceof s.Event))return new s.Event(u,y);this.type=u,this.isDefaultPrevented=function(){return!1}}}}({$:D.default});var p2={debug:console.log,info:console.info,warning:console.warn,error:console.error},U0=function(h){function s(t){void 0===t&&(t={});var n=h.call(this)||this;n.Model=R.Kx,n.Collection=R.pM,n.events=hf,n.__skip=!1,n.defaultRunning=!1,n.destroyed=!1,n._config=t;var i=n.config;n.set("Config",t),n.set("modules",[]),n.set("toLoad",[]),n.set("storables",[]),n.set("selected",new L),n.set("dmode",i.dragMode);var u=i.el,y=i.log,I=!0===y?(0,m.keys)(p2):(0,m.isArray)(y)?y:[];return(0,m.bindAll)(n,"initBaseColorPicker"),u&&i.fromElement&&(i.components=u.innerHTML),n.attrsOrig=u?(0,m.toArray)(u.attributes).reduce(function(W,ce){return W[ce.nodeName]=ce.nodeValue,W},{}):"",i.components&&!i.pageManager&&(i.pageManager={pages:[{component:i.components}]}),iE.forEach(function(W){return n.loadModule(W)}),aE.forEach(function(W){return n.loadStorableModule(W)}),n.on("change:componentHovered",n.componentHovered,n),n.on("change:changesCount",n.updateChanges,n),n.on("change:readyLoad change:readyCanvas",n._checkReady,n),I.forEach(function(W){return n.listenLog(W)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(W){var ce=W.from,ie=W.to;n.listenTo(n,ce,function(){for(var Re=[],qe=0;qe<arguments.length;qe++)Re[qe]=arguments[qe];n.trigger.apply(n,function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([ie],Re,!1)),n.logWarning("The event '".concat(ce,"' is deprecated, replace it with '").concat(ie,"'"))})}),n}return s_(s,h),s.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(s.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),s.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},s.prototype.getContainer=function(){return this.config.el},s.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),p2[t])},Object.defineProperty(s.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){var t;return(null===(t=this.config.grapesjs)||void 0===t?void 0:t.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),s.prototype.getConfig=function(t){var n=this.config;return(0,m.isUndefined)(t)?n:n[t]},s.prototype.loadOnStart=function(){var t=this,n=this.config,i=n.projectData,u=n.headless,y={initial:!0},I=this.Storage;this.toLoad.reverse().forEach(function(ie){return ie.onLoad()});var W=function(){t.modules.forEach(function(ie){return ie.postLoad&&ie.postLoad(t)}),t.set("readyLoad",1)};u?(i&&this.loadData(i,y),W()):this._storageTimeout=setTimeout(function(){return zp(t,void 0,void 0,function(){var ie;return x1(this,function(Re){switch(Re.label){case 0:return i?(this.loadData(i,y),[3,5]):[3,1];case 1:if(!I?.canAutoload())return[3,5];Re.label=2;case 2:return Re.trys.push([2,4,,5]),[4,this.load({},y)];case 3:return Re.sent(),[3,5];case 4:return ie=Re.sent(),this.logError(ie),[3,5];case 5:return W(),[2]}})})});var ce=new s({noticeOnUnload:!1,storageManager:!1,undoManager:!1});ce.set({isShallow:!0}),ce.Pages.onLoad(),ce.Canvas.postLoad(),this.set("shallow",ce)},s.prototype.updateChanges=function(t,n,i){var u=this,y=this.Storage,I=this.getDirtyCount();i.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return u.trigger(hf.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=I?function(){return!0}:null),y.isAutosave()&&I>=y.getStepsBeforeSave()&&this.store().catch(function(W){return u.logError(W)})},s.prototype.loadModule=function(t){var n=new t(this);return this.set(n.name,n),n.onLoad&&this.toLoad.push(n),this.modules.push(n),n},s.prototype.loadStorableModule=function(t){var n=this.loadModule(t);return this.storables.push(n),n},s.prototype.init=function(t,n){void 0===n&&(n={}),this.destroyed&&(this.initialize(n),this.destroyed=!1),this.set("Editor",t)},s.prototype.getEditor=function(){return this.get("Editor")},s.prototype.handleUpdates=function(t,n,i){var u=this;void 0===i&&(i={}),this.__skip||i.temporary||i.noCount||i.avoidStore||i.partial||!this.get("ready")||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var y=u.getDirtyCount()||0,I=function(h,s){var t={};for(var n in h)Object.prototype.hasOwnProperty.call(h,n)&&s.indexOf(n)<0&&(t[n]=h[n]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(h);i<n.length;i++)s.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(h,n[i])&&(t[n[i]]=h[n[i]])}return t}(i,["unset"]);u.set("changesCount",y+1,I)},0))},s.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},s.prototype.componentHovered=function(t,n,i){var u=this.previous("componentHovered");u&&this.trigger("component:unhovered",u,i),n&&this.trigger("component:hovered",n,i)},s.prototype.getSelected=function(){return this.selected.lastComponent()},s.prototype.getSelectedAll=function(){return this.selected.allComponents()},s.prototype.setSelected=function(t,n){var i=this;void 0===n&&(n={});var u=n.event,y=u&&(u.ctrlKey||u.metaKey),I=(u||{}).shiftKey,W=((0,m.isArray)(t)?t:[t]).map(function(qe){var ct,qt;return(null===(qt=null===(ct=qe?.delegate)||void 0===ct?void 0:ct.select)||void 0===qt?void 0:qt.call(ct,qe))||qe}).filter(Boolean),ce=this.getSelectedAll(),ie=this.getConfig().multipleSelection,Re=(0,m.isArray)(t);!Re&&t||this.removeSelected(ce.filter(function(qe){return!(0,m.contains)(W,qe)})),W.forEach(function(qe){if(qe&&(i.trigger(mt.I.selectBefore,qe,n),!qe.get("selectable")||n.abort)){if(!n.useValid)return;for(var ct=qe.parent();ct&&!ct.get("selectable");)ct=ct.parent();qe=ct}if(y&&ie)return i.toggleSelected(qe);if(I&&ie){if(i.isEditing())return;i.clearSelection(i.Canvas.getWindow());var qt,_r,zr=qe.collection,br=qe.index();if(i.getSelectedAll().forEach(function(co){var Bo=co.collection,Oi=co.index();Bo===zr&&(Oi<br?qt=(0,m.isUndefined)(qt)?Oi:Math.max(qt,Oi):Oi>br&&(_r=(0,m.isUndefined)(_r)?Oi:Math.min(_r,Oi)))}),!(0,m.isUndefined)(qt))for(;qt!==br;)i.addSelected(zr.at(qt),n),qt++;if(!(0,m.isUndefined)(_r))for(;_r!==br;)i.addSelected(zr.at(_r),n),_r--;return i.addSelected(qe,n)}!Re&&i.removeSelected(ce.filter(function(co){return co!==qe})),i.addSelected(qe,n)})},s.prototype.addSelected=function(t,n){var i=this;void 0===n&&(n={}),((0,m.isArray)(t)?t:[t]).forEach(function(u){var y=i.selected;u&&u.get("selectable")&&!u.parents().some(function(I){return y.hasComponent(I)})&&(n.forceChange&&i.removeSelected(u,n),y.allComponents().filter(function(I){return(0,m.contains)(I.parents(),u)}).forEach(function(I){return i.removeSelected(I,n)}),y.addComponent(u,n),i.trigger(mt.I.select,u,n),i.Canvas.addSpot({type:Pt.F.Select,component:u}))})},s.prototype.removeSelected=function(t,n){var i=this;void 0===n&&(n={}),this.selected.removeComponent(t,n),((0,m.isArray)(t)?t:[t]).forEach(function(u){return i.Canvas.removeSpots({type:Pt.F.Select,component:u})})},s.prototype.toggleSelected=function(t,n){var i=this;void 0===n&&(n={}),((0,m.isArray)(t)?t:[t]).forEach(function(u){i.selected.hasComponent(u)?i.removeSelected(u,n):i.addSelected(u,n)})},s.prototype.setHovered=function(t,n){var i=this;void 0===n&&(n={});var u=function(W,ce){var Re=i.config,qe=i.Canvas,ct=i.getHovered(),qt=i.getSelectedAll(),_r=Pt.F.Hover,zr=Pt.F.Spacing;i.set("componentHovered",W||null,ce),ct&&(qe.removeSpots({type:_r,component:ct}),qe.removeSpots({type:zr,component:ct})),W&&(qe.addSpot({type:_r,component:W}),qt.includes(W)&&!Re.showOffsetsSelected||qe.addSpot({type:zr,component:W}))};if(!t)return u();var y="component:hover";if(n.forceChange&&u(),this.trigger("".concat(y,":before"),t,n),!t.get("hoverable")){if(!n.useValid||n.abort)return;for(var I=t.parent();I&&!I.get("hoverable");)I=I.parent();t=I}n.abort||(u(t,n),this.trigger(y,t,n))},s.prototype.getHovered=function(){return this.get("componentHovered")},s.prototype.setComponents=function(t,n){return void 0===n&&(n={}),this.Components.setComponents(t,n)},s.prototype.getComponents=function(){var t=this.Components,n=this.CodeManager;if(t&&n){var i=t.getComponents();return n.getCode(i,"json")}},s.prototype.setStyle=function(t,n){void 0===n&&(n={});var i=this.Css;return i.clear(n),i.getAll().add(t,n),this},s.prototype.addStyle=function(t,n){void 0===n&&(n={});var i=this.getStyle().add(t,n);return(0,m.isArray)(i)?i:[i]},s.prototype.getStyle=function(){return this.Css.getAll()},s.prototype.setState=function(t){return this.set("state",t),this},s.prototype.getState=function(){return this.get("state")||""},s.prototype.getHtml=function(t){void 0===t&&(t={});var n=this.config,i=n.optsHtml,u=n.jsInHtml?this.getJs(t):"",y=t.component||this.Components.getComponent();return(y?this.CodeManager.getCode(y,"html",Vp(Vp({},i),t)):"")+(u?"<script>".concat(u,"<\/script>"):"")},s.prototype.getCss=function(t){void 0===t&&(t={});var n=this.config,i=n.optsCss,u=t.avoidProtected,y=(0,m.isUndefined)(t.keepUnusedStyles)?n.keepUnusedStyles:t.keepUnusedStyles,I=this.Css,W=t.component||this.Components.getComponent(),ce=u?"":n.protectedCss,ie=W&&this.CodeManager.getCode(W,"css",Vp(Vp({cssc:I,keepUnusedStyles:y},i),t));return W?t.json?ie:ce+ie:""},s.prototype.getJs=function(t){void 0===t&&(t={});var n=t.component||this.Components.getWrapper();return n?this.CodeManager.getCode(n,"js").trim():""},s.prototype.store=function(t){return zp(this,void 0,void 0,function(){var n;return x1(this,function(i){switch(i.label){case 0:return n=this.storeData(),[4,this.Storage.store(n,t)];case 1:return i.sent(),this.clearDirtyCount(),[2,n]}})})},s.prototype.load=function(t){return zp(this,arguments,void 0,function(n,i){var u;return void 0===i&&(i={}),x1(this,function(y){switch(y.label){case 0:return[4,this.Storage.load(n)];case 1:return u=y.sent(),this.loadData(u,i),[4,(0,X.wait)()];case 2:return y.sent(),i.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,u]}})})},s.prototype.storeData=function(){var t={},n=this.getEditing();n&&n.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(u){t=Vp(Vp({},t),u.store(1))});var i=JSON.parse(JSON.stringify(t));return this.trigger(hf.projectGet,{project:i}),i},s.prototype.loadData=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var i=!1;return(0,X.isEmptyObj)(t)||(this.storables.forEach(function(u){return u.clear()}),this.storables.forEach(function(u){return u.load(t)}),i=!0),this.trigger(hf.projectLoad,{project:t,loaded:i,initial:!!n.initial}),t},s.prototype.getDeviceModel=function(){var t=this.get("device");return this.Devices.get(t)},s.prototype.runDefault=function(t){void 0===t&&(t={});var n=this.Commands.get(this.config.defaultCommand);n&&!this.defaultRunning&&(n.stop(this,this,t),n.run(this,this,t),this.defaultRunning=!0)},s.prototype.stopDefault=function(t){void 0===t&&(t={});var n=this.Commands;if(n){var i=n.get(this.config.defaultCommand);i&&this.defaultRunning&&(i.stop(this,this,t),this.defaultRunning=!1)}},s.prototype.refreshCanvas=function(t){void 0===t&&(t={}),this.Canvas.refresh({spots:t.tools})},s.prototype.clearSelection=function(t){var n;null===(n=(t||window).getSelection())||void 0===n||n.removeAllRanges()},s.prototype.getCurrentMedia=function(){var t=this.config,n=this.getDeviceModel(),i=t.mediaCondition,u=t.devicePreviewMode,y=n&&n.get("widthMedia");return n&&y&&!u?"(".concat(i,": ").concat(y,")"):""},s.prototype.getWrapper=function(){return this.Components.getWrapper()},s.prototype.setCurrentFrame=function(t){return this.set("currentFrame",t)},s.prototype.getCurrentFrame=function(){return this.get("currentFrame")},s.prototype.getCurrentFrameModel=function(){var t;return null===(t=this.getCurrentFrame()||{})||void 0===t?void 0:t.model},s.prototype.getIcon=function(t){return(this.config.icons||{})[t]||""},s.prototype.getDirtyCount=function(){return this.get("changesCount")},s.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},s.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},s.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},s.prototype.setDragMode=function(t){return this.set("dmode",t)},s.prototype.getDragMode=function(t){return t?.getDragMode()||this.get("dmode")||""},s.prototype.t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.get("I18n");return i?.t.apply(i,t)},s.prototype.inAbsoluteMode=function(t){return"absolute"===this.getDragMode(t)},s.prototype.destroyAll=function(){var t=this,n=this.config,i=this.view;this.trigger(hf.destroy);var u=this.getEditor(),y=(n.grapesjs||{}).editors,I=void 0===y?[]:y,W=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),W?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(ce){return ce.destroy()}),i?.remove&&i.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(ce){return t[ce]={}}),I.splice(I.indexOf(u),1),(0,X.hasWin)()&&(0,D.default)(n.el).empty().attr(this.attrsOrig),this.trigger(hf.destroyed)},s.prototype.getEditing=function(){var t=this.get("editing");return t&&t.model||void 0},s.prototype.setEditing=function(t){return this.set("editing",t),this},s.prototype.isEditing=function(){return!!this.get("editing")},s.prototype.log=function(t,n){void 0===n&&(n={});var i=hf.log,u=n.ns,y=n.level,I=void 0===y?"debug":y;if(this.trigger(i,t,n),I&&this.trigger("".concat(i,":").concat(I),t,n),u){var W="".concat(i,"-").concat(u);this.trigger(W,t,n),I&&this.trigger("".concat(W,":").concat(I),t,n)}},s.prototype.logInfo=function(t,n){this.log(t,Vp(Vp({},n),{level:"info"}))},s.prototype.logWarning=function(t,n){this.log(t,Vp(Vp({},n),{level:"warning"}))},s.prototype.logError=function(t,n){this.log(t,Vp(Vp({},n),{level:"error"}))},s.prototype.initBaseColorPicker=function(t,n){void 0===n&&(n={});var i=this.config,u=i.colorPicker,y=void 0===u?{}:u,I=i.el,W=i.stylePrefix;return(0,D.default)(t).spectrum(Vp(Vp({containerClassName:"".concat(W,"one-bg ").concat(W,"two-color"),appendTo:I||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f"},n),y))},s.prototype.skip=function(t){this.__skip=!0;var n=this.UndoManager;n?n.skip(t):t(),this.__skip=!1},s.prototype.data=function(t,n,i){var u="_gjs-data";if(t[u]||(t[u]={}),(0,m.isUndefined)(i))return t[u][n];t[u][n]=i},s}(R.Kx);const sE=U0;var lE=function(){var h=function(s,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])})(s,t)};return function(s,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=s}h(s,t),s.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cg=function(h){function s(t){var n=h.call(this,{model:t})||this,i=t.Panels,u=t.UndoManager;return t.view=n,t.once("change:ready",function(){i.active(),i.disableButtons(),u.clear(),t.getConfig().telemetry&&n.sendTelemetryData().catch(function(){}),setTimeout(function(){t.trigger(hf.load,t.Editor),t.clearDirtyCount()})}),n}return lE(s,h),s.prototype.render=function(){var t=this,n=this.$el,i=this.model,u=i.Panels,y=i.Canvas,I=i.config,W=i.modules,ce=I.stylePrefix,ie=["".concat(ce,"editor")];!I.customUI&&ie.push("".concat(ce,"one-bg ").concat(ce,"two-color"));var Re=(0,D.default)(I.el||"body ".concat(I.container));I.cssIcons&&(0,X.appendStyles)(I.cssIcons,{unique:!0,prepand:!0}),n.empty(),I.width&&Re.css("width",I.width),I.height&&Re.css("height",I.height),n.append(y.render()),n.append(u.render());var qe=i.shallow.Canvas.render();return qe.style.display="none",n.append(qe),n.attr("class",ie.join(" ")),Re.addClass("".concat(ce,"editor-cont")).empty().append(n),W.forEach(function(ct){var qt;return null===(qt=ct.postRender)||void 0===qt?void 0:qt.call(ct,t)}),this},s.prototype.sendTelemetryData=function(){return function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,[])).next())})}(this,0,void 0,function(){var t,n,i,u,y,I,W;return function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}}(this,function(ce){switch(ce.label){case 0:return"localhost"===(t=window.location.hostname)||t.includes("localhost")?[2]:(i=this.model.version,u="".concat(n="gjs_telemetry_sent_").concat(i),sessionStorage.getItem(u)?[2]:[4,fetch("".concat("https://app.grapesjs.com","/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:t,version:i})})]);case 1:return(y=ce.sent()).ok?[3,3]:(I=Error.bind,W="Failed to send telemetry data ".concat,[4,y.text()]);case 2:throw new(I.apply(Error,[void 0,W.apply("Failed to send telemetry data ",[ce.sent()])]));case 3:return sessionStorage.setItem(u,"true"),Object.keys(sessionStorage).forEach(function(ie){ie.startsWith(n)&&ie!==u&&sessionStorage.removeItem(ie)}),this.trigger(hf.telemetryInit),[2]}})})},s}(R.Ss);const uE=cg;var my=function(){return my=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},my.apply(this,arguments)},B0=function(h,s,t,n){return new(t||(t=Promise))(function(i,u){function y(ce){try{W(n.next(ce))}catch(ie){u(ie)}}function I(ce){try{W(n.throw(ce))}catch(ie){u(ie)}}function W(ce){var ie;ce.done?i(ce.value):(ie=ce.value,ie instanceof t?ie:new t(function(Re){Re(ie)})).then(y,I)}W((n=n.apply(h,s||[])).next())})},f2=function(h,s){var t,n,i,u,y={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return u={next:I(0),throw:I(1),return:I(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function I(W){return function(ce){return function(ie){if(t)throw new TypeError("Generator is already executing.");for(;u&&(u=0,ie[0]&&(y=0)),y;)try{if(t=1,n&&(i=2&ie[0]?n.return:ie[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,ie[1])).done)return i;switch(n=0,i&&(ie=[2&ie[0],i.value]),ie[0]){case 0:case 1:i=ie;break;case 4:return y.label++,{value:ie[1],done:!1};case 5:y.label++,n=ie[1],ie=[0];continue;case 7:ie=y.ops.pop(),y.trys.pop();continue;default:if(!((i=(i=y.trys).length>0&&i[i.length-1])||6!==ie[0]&&2!==ie[0])){y=0;continue}if(3===ie[0]&&(!i||ie[1]>i[0]&&ie[1]<i[3])){y.label=ie[1];break}if(6===ie[0]&&y.label<i[1]){y.label=i[1],i=ie;break}if(i&&y.label<i[2]){y.label=i[2],y.ops.push(ie);break}i[2]&&y.ops.pop(),y.trys.pop();continue}ie=s.call(h,y)}catch(Re){ie=[6,Re],n=0}finally{t=i=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}([W,ce])}}},dE=function(){function h(s,t){var n;void 0===s&&(s={}),void 0===t&&(t={}),this.events=hf,this.html=x;var i={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0};this.config=my(my(my({},i),s),{pStylePrefix:null!==(n=s.stylePrefix)&&void 0!==n?n:i.stylePrefix}),this.em=new sE(this.config),this.$=t.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(h.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),h.prototype.getConfig=function(s){return this.em.getConfig(s)},h.prototype.getHtml=function(s){return this.em.getHtml(s)},h.prototype.getCss=function(s){return this.em.getCss(s)},h.prototype.getJs=function(s){return this.em.getJs(s)},h.prototype.getComponents=function(){return this.Components.getComponents()},h.prototype.getWrapper=function(){return this.Components.getWrapper()},h.prototype.setComponents=function(s,t){return void 0===t&&(t={}),this.em.setComponents(s,t),this},h.prototype.addComponents=function(s,t){return this.getWrapper().append(s,t)},h.prototype.getStyle=function(){return this.em.Css.getAll()},h.prototype.setStyle=function(s,t){return void 0===t&&(t={}),this.em.setStyle(s,t),this},h.prototype.addStyle=function(s,t){return void 0===t&&(t={}),this.em.addStyle(s,t)},h.prototype.getSelected=function(){return this.em.getSelected()},h.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},h.prototype.getSelectedToStyle=function(){var s=this.em.getSelected();if(s)return this.StyleManager.getModelToStyle(s)},h.prototype.select=function(s,t){return this.em.setSelected(s,t),this},h.prototype.selectAdd=function(s){return this.em.addSelected(s),this},h.prototype.selectRemove=function(s){return this.em.removeSelected(s),this},h.prototype.selectToggle=function(s){return this.em.toggleSelected(s),this},h.prototype.getEditing=function(){return this.em.getEditing()},h.prototype.setDevice=function(s){return this.em.set("device",s),this},h.prototype.getDevice=function(){return this.em.get("device")},h.prototype.runCommand=function(s,t){return void 0===t&&(t={}),this.Commands.run(s,t)},h.prototype.stopCommand=function(s,t){return void 0===t&&(t={}),this.Commands.stop(s,t)},h.prototype.store=function(s){return B0(this,void 0,void 0,function(){return f2(this,function(t){switch(t.label){case 0:return[4,this.em.store(s)];case 1:return[2,t.sent()]}})})},h.prototype.load=function(s){return B0(this,arguments,void 0,function(t,n){return void 0===n&&(n={}),f2(this,function(i){switch(i.label){case 0:return[4,this.em.load(t,n)];case 1:return[2,i.sent()]}})})},h.prototype.getProjectData=function(){return this.em.storeData()},h.prototype.loadProjectData=function(s){return this.em.loadData(s)},h.prototype.storeData=function(){return this.em.storeData()},h.prototype.loadData=function(s){return this.em.loadData(s)},h.prototype.getContainer=function(){return this.config.el},h.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},h.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},h.prototype.refresh=function(s){this.em.refreshCanvas(s)},h.prototype.setCustomRte=function(s){this.RichTextEditor.customRte=s},h.prototype.setCustomParserCss=function(s){return this.Parser.getConfig().parserCss=s,this},h.prototype.setDragMode=function(s){return this.em.setDragMode(s),this},h.prototype.log=function(s,t){return void 0===t&&(t={}),this.em.log(s,t),this},h.prototype.t=function(){for(var s,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(s=this.em).t.apply(s,t)},h.prototype.on=function(s,t){return this.em.on(s,t),this},h.prototype.once=function(s,t){return this.em.once(s,t),this},h.prototype.off=function(s,t){return this.em.off(s,t),this},h.prototype.trigger=function(s){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return this.em.trigger.apply(this.em,function(h,s,t){if(t||2===arguments.length)for(var n,i=0,u=s.length;i<u;i++)!n&&i in s||(n||(n=Array.prototype.slice.call(s,0,i)),n[i]=s[i]);return h.concat(n||Array.prototype.slice.call(s))}([s],t,!0)),this},h.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},h.prototype.getEl=function(){var s;return null===(s=this.editorView)||void 0===s?void 0:s.el},h.prototype.getModel=function(){return this.em},h.prototype.render=function(){var s;return null===(s=this.editorView)||void 0===s||s.remove(),this.editorView=new uE(this.em),this.editorView.render().el},h.prototype.onReady=function(s){this.em.get("ready")?s(this):this.em.on("load",s)},h}();const gy=dE;var h2=function(h,s){return(0,m.isString)(h)?function(t,n){var i=n.get(t);if(!i){var u=(0,X.getGlobal)()[t];i=u?.default||u}return i}(h,s):h?.default||h},m2=function(h,s){h.getModel().logWarning("Plugin ".concat(s," not found"),{context:"plugins",plugin:s})};const pE=function(){function h(){this.plugins={}}return h.prototype.add=function(s,t){return this.get(s)||(this.plugins[s]=t,t)},h.prototype.get=function(s){return this.plugins[s]},h.prototype.getAll=function(){return this.plugins},h}();var Z0=function(){return Z0=Object.assign||function(h){for(var s,t=1,n=arguments.length;t<n;t++)for(var i in s=arguments[t])Object.prototype.hasOwnProperty.call(s,i)&&(h[i]=s[i]);return h},Z0.apply(this,arguments)};!function(){if((0,X.hasWin)()&&function(){for(var s,t=window.navigator.userAgent,n=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],i=0;i<n.length&&!(s=n[i][1].exec(t));i++);return!!s}()){var h=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(s){return s||(s=""),h.apply(document.implementation,[s])}}}();var E1=new pE,g2=[],fE={$:D.default,editors:g2,plugins:E1,usePlugin:function(h,s){var t=h2(h,E1);return function(n){t?t(n,s||{}):m2(n,h)}},version:"0.22.6",init:function(h){void 0===h&&(h={});var s=h.headless,t=h.container;if(!t&&!s)throw new Error("'container' is required");var n=Z0(Z0({autorender:!0,plugins:[],pluginsOpts:{}},h),{grapesjs:this,el:s?void 0:(0,m.isElement)(t)?t:document.querySelector(t)}),i=new gy(n,{$:D.default}),u=i.getModel();return n.plugins.forEach(function(y){var I=h2(y,E1);I?I(i,n.pluginsOpts[y]||{}):m2(i,y)}),u.loadOnStart(),n.autorender&&!s&&i.render(),g2.push(i),i}};const l_=fE})(),S.default})(),oe.exports=re()},28539:(oe,ue,re)=>{"use strict";function O(te){return te&&te.__esModule?te:{default:te}}ue.__esModule=!0;var m=O(re(47735)),x=O(re(55443)),z=re(81170),H=re(27361),D=O(re(50225)),R=O(re(72071)),N=O(re(76887)),L=m.default.create;function Y(){var te=L();return te.compile=function(pe,we){return H.compile(pe,we,te)},te.precompile=function(pe,we){return H.precompile(pe,we,te)},te.AST=x.default,te.Compiler=H.Compiler,te.JavaScriptCompiler=D.default,te.Parser=z.parser,te.parse=z.parse,te.parseWithoutProcessing=z.parseWithoutProcessing,te}var ee=Y();ee.create=Y,N.default(ee),ee.Visitor=R.default,ee.default=ee,ue.default=ee,oe.exports=ue.default},47735:(oe,ue,re)=>{"use strict";function O(te){return te&&te.__esModule?te:{default:te}}function S(te){if(te&&te.__esModule)return te;var pe={};if(null!=te)for(var we in te)Object.prototype.hasOwnProperty.call(te,we)&&(pe[we]=te[we]);return pe.default=te,pe}ue.__esModule=!0;var X=S(re(87506)),z=O(re(46778)),G=O(re(56164)),U=S(re(15841)),T=S(re(16624)),L=O(re(76887));function Y(){var te=new X.HandlebarsEnvironment;return U.extend(te,X),te.SafeString=z.default,te.Exception=G.default,te.Utils=U,te.escapeExpression=U.escapeExpression,te.VM=T,te.template=function(pe){return T.template(pe,te)},te}var ee=Y();ee.create=Y,L.default(ee),ee.default=ee,ue.default=ee,oe.exports=ue.default},87506:(oe,ue,re)=>{"use strict";function O(te){return te&&te.__esModule?te:{default:te}}ue.__esModule=!0,ue.HandlebarsEnvironment=Y;var S=re(15841),X=O(re(56164)),x=re(74455),z=re(65551),G=O(re(55949)),D=re(57855);ue.VERSION="4.7.8",ue.COMPILER_REVISION=8,ue.LAST_COMPATIBLE_COMPILER_REVISION=7,ue.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var L="[object Object]";function Y(te,pe,we){this.helpers=te||{},this.partials=pe||{},this.decorators=we||{},x.registerDefaultHelpers(this),z.registerDefaultDecorators(this)}Y.prototype={constructor:Y,logger:G.default,log:G.default.log,registerHelper:function(pe,we){if(S.toString.call(pe)===L){if(we)throw new X.default("Arg not supported with multiple helpers");S.extend(this.helpers,pe)}else this.helpers[pe]=we},unregisterHelper:function(pe){delete this.helpers[pe]},registerPartial:function(pe,we){if(S.toString.call(pe)===L)S.extend(this.partials,pe);else{if(typeof we>"u")throw new X.default('Attempting to register a partial called "'+pe+'" as undefined');this.partials[pe]=we}},unregisterPartial:function(pe){delete this.partials[pe]},registerDecorator:function(pe,we){if(S.toString.call(pe)===L){if(we)throw new X.default("Arg not supported with multiple decorators");S.extend(this.decorators,pe)}else this.decorators[pe]=we},unregisterDecorator:function(pe){delete this.decorators[pe]},resetLoggedPropertyAccesses:function(){D.resetLoggedProperties()}},ue.log=G.default.log,ue.createFrame=S.createFrame,ue.logger=G.default},55443:(oe,ue)=>{"use strict";ue.__esModule=!0;var re={helpers:{helperExpression:function(S){return"SubExpression"===S.type||("MustacheStatement"===S.type||"BlockStatement"===S.type)&&!!(S.params&&S.params.length||S.hash)},scopedId:function(S){return/^\.|this\b/.test(S.original)},simpleId:function(S){return 1===S.parts.length&&!re.helpers.scopedId(S)&&!S.depth}}};ue.default=re,oe.exports=ue.default},81170:(oe,ue,re)=>{"use strict";function S(N){return N&&N.__esModule?N:{default:N}}ue.__esModule=!0,ue.parseWithoutProcessing=R,ue.parse=function T(N,L){var Y=R(N,L);return new z.default(L).accept(Y)};var X=S(re(3149)),z=S(re(73308)),G=function O(N){if(N&&N.__esModule)return N;var L={};if(null!=N)for(var Y in N)Object.prototype.hasOwnProperty.call(N,Y)&&(L[Y]=N[Y]);return L.default=N,L}(re(8480)),D=re(15841);ue.parser=X.default;var U={};function R(N,L){return"Program"===N.type?N:(X.default.yy=U,U.locInfo=function(ee){return new U.SourceLocation(L&&L.srcName,ee)},X.default.parse(N))}D.extend(U,G)},40793:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var O=re(15841),S=void 0;function X(z,H,G){if(O.isArray(z)){for(var D=[],U=0,R=z.length;U<R;U++)D.push(H.wrap(z[U],G));return D}return"boolean"==typeof z||"number"==typeof z?z+"":z}function x(z){this.srcFile=z,this.source=[]}S||((S=function(z,H,G,D){this.src="",D&&this.add(D)}).prototype={add:function(H){O.isArray(H)&&(H=H.join("")),this.src+=H},prepend:function(H){O.isArray(H)&&(H=H.join("")),this.src=H+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),x.prototype={isEmpty:function(){return!this.source.length},prepend:function(H,G){this.source.unshift(this.wrap(H,G))},push:function(H,G){this.source.push(this.wrap(H,G))},merge:function(){var H=this.empty();return this.each(function(G){H.add(["  ",G,"\n"])}),H},each:function(H){for(var G=0,D=this.source.length;G<D;G++)H(this.source[G])},empty:function(){var H=this.currentLocation||{start:{}};return new S(H.start.line,H.start.column,this.srcFile)},wrap:function(H){var G=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return H instanceof S?H:(H=X(H,this,G),new S(G.start.line,G.start.column,this.srcFile,H))},functionCall:function(H,G,D){return D=this.generateList(D),this.wrap([H,G?"."+G+"(":"(",D,")"])},quotedString:function(H){return'"'+(H+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(H){var G=this,D=[];Object.keys(H).forEach(function(R){var T=X(H[R],G);"undefined"!==T&&D.push([G.quotedString(R),":",T])});var U=this.generateList(D);return U.prepend("{"),U.add("}"),U},generateList:function(H){for(var G=this.empty(),D=0,U=H.length;D<U;D++)D&&G.add(","),G.add(X(H[D],this));return G},generateArray:function(H){var G=this.generateList(H);return G.prepend("["),G.add("]"),G}},ue.default=x,oe.exports=ue.default},27361:(oe,ue,re)=>{"use strict";function O(N){return N&&N.__esModule?N:{default:N}}ue.__esModule=!0,ue.Compiler=G,ue.precompile=function D(N,L,Y){if(null==N||"string"!=typeof N&&"Program"!==N.type)throw new m.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+N);"data"in(L=L||{})||(L.data=!0),L.compat&&(L.useDepths=!0);var ee=Y.parse(N,L),te=(new Y.Compiler).compile(ee,L);return(new Y.JavaScriptCompiler).compile(te,L)},ue.compile=function U(N,L,Y){if(void 0===L&&(L={}),null==N||"string"!=typeof N&&"Program"!==N.type)throw new m.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+N);"data"in(L=X.extend({},L))||(L.data=!0),L.compat&&(L.useDepths=!0);var ee=void 0;function te(){var we=Y.parse(N,L),Te=(new Y.Compiler).compile(we,L),ge=(new Y.JavaScriptCompiler).compile(Te,L,void 0,!0);return Y.template(ge)}function pe(we,Te){return ee||(ee=te()),ee.call(this,we,Te)}return pe._setup=function(we){return ee||(ee=te()),ee._setup(we)},pe._child=function(we,Te,ge,Ce){return ee||(ee=te()),ee._child(we,Te,ge,Ce)},pe};var m=O(re(56164)),X=re(15841),z=O(re(55443)),H=[].slice;function G(){}function R(N,L){if(N===L)return!0;if(X.isArray(N)&&X.isArray(L)&&N.length===L.length){for(var Y=0;Y<N.length;Y++)if(!R(N[Y],L[Y]))return!1;return!0}}function T(N){if(!N.path.parts){var L=N.path;N.path={type:"PathExpression",data:!1,depth:0,parts:[L.original+""],original:L.original+"",loc:L.loc}}}G.prototype={compiler:G,equals:function(L){var Y=this.opcodes.length;if(L.opcodes.length!==Y)return!1;for(var ee=0;ee<Y;ee++){var te=this.opcodes[ee],pe=L.opcodes[ee];if(te.opcode!==pe.opcode||!R(te.args,pe.args))return!1}for(Y=this.children.length,ee=0;ee<Y;ee++)if(!this.children[ee].equals(L.children[ee]))return!1;return!0},guid:0,compile:function(L,Y){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=Y,this.stringParams=Y.stringParams,this.trackIds=Y.trackIds,Y.blockParams=Y.blockParams||[],Y.knownHelpers=X.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},Y.knownHelpers),this.accept(L)},compileProgram:function(L){var ee=(new this.compiler).compile(L,this.options),te=this.guid++;return this.usePartial=this.usePartial||ee.usePartial,this.children[te]=ee,this.useDepths=this.useDepths||ee.useDepths,te},accept:function(L){if(!this[L.type])throw new m.default("Unknown type: "+L.type,L);this.sourceNode.unshift(L);var Y=this[L.type](L);return this.sourceNode.shift(),Y},Program:function(L){this.options.blockParams.unshift(L.blockParams);for(var Y=L.body,ee=Y.length,te=0;te<ee;te++)this.accept(Y[te]);return this.options.blockParams.shift(),this.isSimple=1===ee,this.blockParams=L.blockParams?L.blockParams.length:0,this},BlockStatement:function(L){T(L);var Y=L.program,ee=L.inverse;Y=Y&&this.compileProgram(Y),ee=ee&&this.compileProgram(ee);var te=this.classifySexpr(L);"helper"===te?this.helperSexpr(L,Y,ee):"simple"===te?(this.simpleSexpr(L),this.opcode("pushProgram",Y),this.opcode("pushProgram",ee),this.opcode("emptyHash"),this.opcode("blockValue",L.path.original)):(this.ambiguousSexpr(L,Y,ee),this.opcode("pushProgram",Y),this.opcode("pushProgram",ee),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(L){var Y=L.program&&this.compileProgram(L.program),ee=this.setupFullMustacheParams(L,Y,void 0),te=L.path;this.useDecorators=!0,this.opcode("registerDecorator",ee.length,te.original)},PartialStatement:function(L){this.usePartial=!0;var Y=L.program;Y&&(Y=this.compileProgram(L.program));var ee=L.params;if(ee.length>1)throw new m.default("Unsupported number of partial arguments: "+ee.length,L);ee.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):ee.push({type:"PathExpression",parts:[],depth:0}));var te=L.name.original,pe="SubExpression"===L.name.type;pe&&this.accept(L.name),this.setupFullMustacheParams(L,Y,void 0,!0);var we=L.indent||"";this.options.preventIndent&&we&&(this.opcode("appendContent",we),we=""),this.opcode("invokePartial",pe,te,we),this.opcode("append")},PartialBlockStatement:function(L){this.PartialStatement(L)},MustacheStatement:function(L){this.SubExpression(L),this.opcode(L.escaped&&!this.options.noEscape?"appendEscaped":"append")},Decorator:function(L){this.DecoratorBlock(L)},ContentStatement:function(L){L.value&&this.opcode("appendContent",L.value)},CommentStatement:function(){},SubExpression:function(L){T(L);var Y=this.classifySexpr(L);"simple"===Y?this.simpleSexpr(L):"helper"===Y?this.helperSexpr(L):this.ambiguousSexpr(L)},ambiguousSexpr:function(L,Y,ee){var te=L.path,pe=te.parts[0],we=null!=Y||null!=ee;this.opcode("getContext",te.depth),this.opcode("pushProgram",Y),this.opcode("pushProgram",ee),te.strict=!0,this.accept(te),this.opcode("invokeAmbiguous",pe,we)},simpleSexpr:function(L){var Y=L.path;Y.strict=!0,this.accept(Y),this.opcode("resolvePossibleLambda")},helperSexpr:function(L,Y,ee){var te=this.setupFullMustacheParams(L,Y,ee),pe=L.path,we=pe.parts[0];if(this.options.knownHelpers[we])this.opcode("invokeKnownHelper",te.length,we);else{if(this.options.knownHelpersOnly)throw new m.default("You specified knownHelpersOnly, but used the unknown helper "+we,L);pe.strict=!0,pe.falsy=!0,this.accept(pe),this.opcode("invokeHelper",te.length,pe.original,z.default.helpers.simpleId(pe))}},PathExpression:function(L){this.addDepth(L.depth),this.opcode("getContext",L.depth);var Y=L.parts[0],ee=z.default.helpers.scopedId(L),te=!L.depth&&!ee&&this.blockParamIndex(Y);te?this.opcode("lookupBlockParam",te,L.parts):Y?L.data?(this.options.data=!0,this.opcode("lookupData",L.depth,L.parts,L.strict)):this.opcode("lookupOnContext",L.parts,L.falsy,L.strict,ee):this.opcode("pushContext")},StringLiteral:function(L){this.opcode("pushString",L.value)},NumberLiteral:function(L){this.opcode("pushLiteral",L.value)},BooleanLiteral:function(L){this.opcode("pushLiteral",L.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(L){var Y=L.pairs,ee=0,te=Y.length;for(this.opcode("pushHash");ee<te;ee++)this.pushParam(Y[ee].value);for(;ee--;)this.opcode("assignToHash",Y[ee].key);this.opcode("popHash")},opcode:function(L){this.opcodes.push({opcode:L,args:H.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(L){L&&(this.useDepths=!0)},classifySexpr:function(L){var Y=z.default.helpers.simpleId(L.path),ee=Y&&!!this.blockParamIndex(L.path.parts[0]),te=!ee&&z.default.helpers.helperExpression(L),pe=!ee&&(te||Y);if(pe&&!te){var Te=this.options;Te.knownHelpers[L.path.parts[0]]?te=!0:Te.knownHelpersOnly&&(pe=!1)}return te?"helper":pe?"ambiguous":"simple"},pushParams:function(L){for(var Y=0,ee=L.length;Y<ee;Y++)this.pushParam(L[Y])},pushParam:function(L){var Y=null!=L.value?L.value:L.original||"";if(this.stringParams)Y.replace&&(Y=Y.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),L.depth&&this.addDepth(L.depth),this.opcode("getContext",L.depth||0),this.opcode("pushStringParam",Y,L.type),"SubExpression"===L.type&&this.accept(L);else{if(this.trackIds){var ee=void 0;if(L.parts&&!z.default.helpers.scopedId(L)&&!L.depth&&(ee=this.blockParamIndex(L.parts[0])),ee){var te=L.parts.slice(1).join(".");this.opcode("pushId","BlockParam",ee,te)}else(Y=L.original||Y).replace&&(Y=Y.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",L.type,Y)}this.accept(L)}},setupFullMustacheParams:function(L,Y,ee,te){var pe=L.params;return this.pushParams(pe),this.opcode("pushProgram",Y),this.opcode("pushProgram",ee),L.hash?this.accept(L.hash):this.opcode("emptyHash",te),pe},blockParamIndex:function(L){for(var Y=0,ee=this.options.blockParams.length;Y<ee;Y++){var te=this.options.blockParams[Y],pe=te&&X.indexOf(te,L);if(te&&pe>=0)return[Y,pe]}}}},8480:(oe,ue,re)=>{"use strict";ue.__esModule=!0,ue.SourceLocation=function x(Y,ee){this.source=Y,this.start={line:ee.first_line,column:ee.first_column},this.end={line:ee.last_line,column:ee.last_column}},ue.id=function z(Y){return/^\[.*\]$/.test(Y)?Y.substring(1,Y.length-1):Y},ue.stripFlags=function H(Y,ee){return{open:"~"===Y.charAt(2),close:"~"===ee.charAt(ee.length-3)}},ue.stripComment=function G(Y){return Y.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},ue.preparePath=function D(Y,ee,te){te=this.locInfo(te);for(var pe=Y?"@":"",we=[],Te=0,ge=0,Ce=ee.length;ge<Ce;ge++){var Oe=ee[ge].part;if(pe+=(ee[ge].separator||"")+Oe,ee[ge].original!==Oe||".."!==Oe&&"."!==Oe&&"this"!==Oe)we.push(Oe);else{if(we.length>0)throw new m.default("Invalid path: "+pe,{loc:te});".."===Oe&&Te++}}return{type:"PathExpression",data:Y,depth:Te,parts:we,original:pe,loc:te}},ue.prepareMustache=function U(Y,ee,te,pe,we,Te){var ge=pe.charAt(3)||pe.charAt(2),Ce="{"!==ge&&"&"!==ge;return{type:/\*/.test(pe)?"Decorator":"MustacheStatement",path:Y,params:ee,hash:te,escaped:Ce,strip:we,loc:this.locInfo(Te)}},ue.prepareRawBlock=function R(Y,ee,te,pe){return X(Y,te),pe=this.locInfo(pe),{type:"BlockStatement",path:Y.path,params:Y.params,hash:Y.hash,program:{type:"Program",body:ee,strip:{},loc:pe},openStrip:{},inverseStrip:{},closeStrip:{},loc:pe}},ue.prepareBlock=function T(Y,ee,te,pe,we,Te){pe&&pe.path&&X(Y,pe);var ge=/\*/.test(Y.open);ee.blockParams=Y.blockParams;var Ce=void 0,Oe=void 0;if(te){if(ge)throw new m.default("Unexpected inverse block on decorator",te);te.chain&&(te.program.body[0].closeStrip=pe.strip),Oe=te.strip,Ce=te.program}return we&&(we=Ce,Ce=ee,ee=we),{type:ge?"DecoratorBlock":"BlockStatement",path:Y.path,params:Y.params,hash:Y.hash,program:ee,inverse:Ce,openStrip:Y.strip,inverseStrip:Oe,closeStrip:pe&&pe.strip,loc:this.locInfo(Te)}},ue.prepareProgram=function N(Y,ee){if(!ee&&Y.length){var te=Y[0].loc,pe=Y[Y.length-1].loc;te&&pe&&(ee={source:te.source,start:{line:te.start.line,column:te.start.column},end:{line:pe.end.line,column:pe.end.column}})}return{type:"Program",body:Y,strip:{},loc:ee}},ue.preparePartialBlock=function L(Y,ee,te,pe){return X(Y,te),{type:"PartialBlockStatement",name:Y.path,params:Y.params,hash:Y.hash,program:ee,openStrip:Y.strip,closeStrip:te&&te.strip,loc:this.locInfo(pe)}};var m=function O(Y){return Y&&Y.__esModule?Y:{default:Y}}(re(56164));function X(Y,ee){if(Y.path.original!==(ee=ee.path?ee.path.original:ee))throw new m.default(Y.path.original+" doesn't match "+ee,{loc:Y.path.loc})}},50225:(oe,ue,re)=>{"use strict";function O(R){return R&&R.__esModule?R:{default:R}}ue.__esModule=!0;var S=re(87506),X=O(re(56164)),x=re(15841),H=O(re(40793));function G(R){this.value=R}function D(){}D.prototype={nameLookup:function(T,N){return this.internalNameLookup(T,N)},depthedLookup:function(T){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(T),")"]},compilerInfo:function(){var T=S.COMPILER_REVISION;return[T,S.REVISION_CHANGES[T]]},appendToBuffer:function(T,N,L){return x.isArray(T)||(T=[T]),T=this.source.wrap(T,N),this.environment.isSimple?["return ",T,";"]:L?["buffer += ",T,";"]:(T.appendToBuffer=!0,T)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(T,N){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",T,",",JSON.stringify(N),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(T,N,L,Y){this.environment=T,this.options=N,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!Y,this.name=this.environment.name,this.isChild=!!L,this.context=L||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(T,N),this.useDepths=this.useDepths||T.useDepths||T.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||T.useBlockParams;var ee=T.opcodes,te=void 0,pe=void 0,we=void 0,Te=void 0;for(we=0,Te=ee.length;we<Te;we++)this.source.currentLocation=(te=ee[we]).loc,pe=pe||te.loc,this[te.opcode].apply(this,te.args);if(this.source.currentLocation=pe,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new X.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),Y?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var ge=this.createFunctionContext(Y);if(this.isChild)return ge;var Ce={compiler:this.compilerInfo(),main:ge};this.decorators&&(Ce.main_d=this.decorators,Ce.useDecorators=!0);var Oe=this.context,je=Oe.programs,Ue=Oe.decorators;for(we=0,Te=je.length;we<Te;we++)je[we]&&(Ce[we]=je[we],Ue[we]&&(Ce[we+"_d"]=Ue[we],Ce.useDecorators=!0));return this.environment.usePartial&&(Ce.usePartial=!0),this.options.data&&(Ce.useData=!0),this.useDepths&&(Ce.useDepths=!0),this.useBlockParams&&(Ce.useBlockParams=!0),this.options.compat&&(Ce.compat=!0),Y?Ce.compilerOptions=this.options:(Ce.compiler=JSON.stringify(Ce.compiler),this.source.currentLocation={start:{line:1,column:0}},Ce=this.objectLiteral(Ce),N.srcName?(Ce=Ce.toStringWithSourceMap({file:N.destName})).map=Ce.map&&Ce.map.toString():Ce=Ce.toString()),Ce},preamble:function(){this.lastContext=0,this.source=new H.default(this.options.srcName),this.decorators=new H.default(this.options.srcName)},createFunctionContext:function(T){var N=this,L="",Y=this.stackVars.concat(this.registers.list);Y.length>0&&(L+=", "+Y.join(", "));var ee=0;Object.keys(this.aliases).forEach(function(we){var Te=N.aliases[we];Te.children&&Te.referenceCount>1&&(L+=", alias"+ ++ee+"="+we,Te.children[0]="alias"+ee)}),this.lookupPropertyFunctionIsUsed&&(L+=", "+this.lookupPropertyFunctionVarDeclaration());var te=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&te.push("blockParams"),this.useDepths&&te.push("depths");var pe=this.mergeSource(L);return T?(te.push(pe),Function.apply(this,te)):this.source.wrap(["function(",te.join(","),") {\n  ",pe,"}"])},mergeSource:function(T){var N=this.environment.isSimple,L=!this.forceBuffer,Y=void 0,ee=void 0,te=void 0,pe=void 0;return this.source.each(function(we){we.appendToBuffer?(te?we.prepend("  + "):te=we,pe=we):(te&&(ee?te.prepend("buffer += "):Y=!0,pe.add(";"),te=pe=void 0),ee=!0,N||(L=!1))}),L?te?(te.prepend("return "),pe.add(";")):ee||this.source.push('return "";'):(T+=", buffer = "+(Y?"":this.initializeBuffer()),te?(te.prepend("return buffer + "),pe.add(";")):this.source.push("return buffer;")),T&&this.source.prepend("var "+T.substring(2)+(Y?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(T){var N=this.aliasable("container.hooks.blockHelperMissing"),L=[this.contextName(0)];this.setupHelperArgs(T,0,L);var Y=this.popStack();L.splice(1,0,Y),this.push(this.source.functionCall(N,"call",L))},ambiguousBlockValue:function(){var T=this.aliasable("container.hooks.blockHelperMissing"),N=[this.contextName(0)];this.setupHelperArgs("",0,N,!0),this.flushInline();var L=this.topStack();N.splice(1,0,L),this.pushSource(["if (!",this.lastHelper,") { ",L," = ",this.source.functionCall(T,"call",N),"}"])},appendContent:function(T){this.pendingContent?T=this.pendingContent+T:this.pendingLocation=this.source.currentLocation,this.pendingContent=T},append:function(){if(this.isInline())this.replaceStack(function(N){return[" != null ? ",N,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var T=this.popStack();this.pushSource(["if (",T," != null) { ",this.appendToBuffer(T,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(T){this.lastContext=T},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(T,N,L,Y){var ee=0;Y||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(T[ee++])),this.resolvePath("context",T,ee,N,L)},lookupBlockParam:function(T,N){this.useBlockParams=!0,this.push(["blockParams[",T[0],"][",T[1],"]"]),this.resolvePath("context",N,1)},lookupData:function(T,N,L){this.pushStackLiteral(T?"container.data(data, "+T+")":"data"),this.resolvePath("data",N,0,!0,L)},resolvePath:function(T,N,L,Y,ee){var te=this;if(this.options.strict||this.options.assumeObjects)this.push(function U(R,T,N,L,Y){var ee=T.popStack(),te=N.length;for(R&&te--;L<te;L++)ee=T.nameLookup(ee,N[L],Y);return R?[T.aliasable("container.strict"),"(",ee,", ",T.quotedString(N[L]),", ",JSON.stringify(T.source.currentLocation)," )"]:ee}(this.options.strict&&ee,this,N,L,T));else for(var pe=N.length;L<pe;L++)this.replaceStack(function(we){var Te=te.nameLookup(we,N[L],T);return Y?[" && ",Te]:[" != null ? ",Te," : ",we]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(T,N){this.pushContext(),this.pushString(N),"SubExpression"!==N&&("string"==typeof T?this.pushString(T):this.pushStackLiteral(T))},emptyHash:function(T){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(T?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var T=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(T.ids)),this.stringParams&&(this.push(this.objectLiteral(T.contexts)),this.push(this.objectLiteral(T.types))),this.push(this.objectLiteral(T.values))},pushString:function(T){this.pushStackLiteral(this.quotedString(T))},pushLiteral:function(T){this.pushStackLiteral(T)},pushProgram:function(T){this.pushStackLiteral(null!=T?this.programExpression(T):null)},registerDecorator:function(T,N){var L=this.nameLookup("decorators",N,"decorator"),Y=this.setupHelperArgs(N,T);this.decorators.push(["fn = ",this.decorators.functionCall(L,"",["fn","props","container",Y])," || fn;"])},invokeHelper:function(T,N,L){var Y=this.popStack(),ee=this.setupHelper(T,N),te=[];L&&te.push(ee.name),te.push(Y),this.options.strict||te.push(this.aliasable("container.hooks.helperMissing"));var pe=["(",this.itemsSeparatedBy(te,"||"),")"],we=this.source.functionCall(pe,"call",ee.callParams);this.push(we)},itemsSeparatedBy:function(T,N){var L=[];L.push(T[0]);for(var Y=1;Y<T.length;Y++)L.push(N,T[Y]);return L},invokeKnownHelper:function(T,N){var L=this.setupHelper(T,N);this.push(this.source.functionCall(L.name,"call",L.callParams))},invokeAmbiguous:function(T,N){this.useRegister("helper");var L=this.popStack();this.emptyHash();var Y=this.setupHelper(0,T,N),te=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",T,"helper")," || ",L,")"];this.options.strict||(te[0]="(helper = ",te.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",te,Y.paramsInit?["),(",Y.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",Y.callParams)," : helper))"])},invokePartial:function(T,N,L){var Y=[],ee=this.setupParams(N,1,Y);T&&(N=this.popStack(),delete ee.name),L&&(ee.indent=JSON.stringify(L)),ee.helpers="helpers",ee.partials="partials",ee.decorators="container.decorators",Y.unshift(T?N:this.nameLookup("partials",N,"partial")),this.options.compat&&(ee.depths="depths"),ee=this.objectLiteral(ee),Y.push(ee),this.push(this.source.functionCall("container.invokePartial","",Y))},assignToHash:function(T){var N=this.popStack(),L=void 0,Y=void 0,ee=void 0;this.trackIds&&(ee=this.popStack()),this.stringParams&&(Y=this.popStack(),L=this.popStack());var te=this.hash;L&&(te.contexts[T]=L),Y&&(te.types[T]=Y),ee&&(te.ids[T]=ee),te.values[T]=N},pushId:function(T,N,L){"BlockParam"===T?this.pushStackLiteral("blockParams["+N[0]+"].path["+N[1]+"]"+(L?" + "+JSON.stringify("."+L):"")):"PathExpression"===T?this.pushString(N):this.pushStackLiteral("SubExpression"===T?"true":"null")},compiler:D,compileChildren:function(T,N){for(var L=T.children,Y=void 0,ee=void 0,te=0,pe=L.length;te<pe;te++){Y=L[te],ee=new this.compiler;var we=this.matchExistingProgram(Y);if(null==we){this.context.programs.push("");var Te=this.context.programs.length;Y.index=Te,Y.name="program"+Te,this.context.programs[Te]=ee.compile(Y,N,this.context,!this.precompile),this.context.decorators[Te]=ee.decorators,this.context.environments[Te]=Y,this.useDepths=this.useDepths||ee.useDepths,this.useBlockParams=this.useBlockParams||ee.useBlockParams,Y.useDepths=this.useDepths,Y.useBlockParams=this.useBlockParams}else Y.index=we.index,Y.name="program"+we.index,this.useDepths=this.useDepths||we.useDepths,this.useBlockParams=this.useBlockParams||we.useBlockParams}},matchExistingProgram:function(T){for(var N=0,L=this.context.environments.length;N<L;N++){var Y=this.context.environments[N];if(Y&&Y.equals(T))return Y}},programExpression:function(T){var N=this.environment.children[T],L=[N.index,"data",N.blockParams];return(this.useBlockParams||this.useDepths)&&L.push("blockParams"),this.useDepths&&L.push("depths"),"container.program("+L.join(", ")+")"},useRegister:function(T){this.registers[T]||(this.registers[T]=!0,this.registers.list.push(T))},push:function(T){return T instanceof G||(T=this.source.wrap(T)),this.inlineStack.push(T),T},pushStackLiteral:function(T){this.push(new G(T))},pushSource:function(T){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),T&&this.source.push(T)},replaceStack:function(T){var N=["("],L=void 0,Y=void 0,ee=void 0;if(!this.isInline())throw new X.default("replaceStack on non-inline");var te=this.popStack(!0);if(te instanceof G)N=["(",L=[te.value]],ee=!0;else{Y=!0;var pe=this.incrStack();N=["((",this.push(pe)," = ",te,")"],L=this.topStack()}var we=T.call(this,L);ee||this.popStack(),Y&&this.stackSlot--,this.push(N.concat(we,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var T=this.inlineStack;this.inlineStack=[];for(var N=0,L=T.length;N<L;N++){var Y=T[N];if(Y instanceof G)this.compileStack.push(Y);else{var ee=this.incrStack();this.pushSource([ee," = ",Y,";"]),this.compileStack.push(ee)}}},isInline:function(){return this.inlineStack.length},popStack:function(T){var N=this.isInline(),L=(N?this.inlineStack:this.compileStack).pop();if(!T&&L instanceof G)return L.value;if(!N){if(!this.stackSlot)throw new X.default("Invalid stack pop");this.stackSlot--}return L},topStack:function(){var T=this.isInline()?this.inlineStack:this.compileStack,N=T[T.length-1];return N instanceof G?N.value:N},contextName:function(T){return this.useDepths&&T?"depths["+T+"]":"depth"+T},quotedString:function(T){return this.source.quotedString(T)},objectLiteral:function(T){return this.source.objectLiteral(T)},aliasable:function(T){var N=this.aliases[T];return N?(N.referenceCount++,N):((N=this.aliases[T]=this.source.wrap(T)).aliasable=!0,N.referenceCount=1,N)},setupHelper:function(T,N,L){var Y=[];return{params:Y,paramsInit:this.setupHelperArgs(N,T,Y,L),name:this.nameLookup("helpers",N,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(Y)}},setupParams:function(T,N,L){var Y={},ee=[],te=[],pe=[],we=!L,Te=void 0;we&&(L=[]),Y.name=this.quotedString(T),Y.hash=this.popStack(),this.trackIds&&(Y.hashIds=this.popStack()),this.stringParams&&(Y.hashTypes=this.popStack(),Y.hashContexts=this.popStack());var ge=this.popStack(),Ce=this.popStack();(Ce||ge)&&(Y.fn=Ce||"container.noop",Y.inverse=ge||"container.noop");for(var Oe=N;Oe--;)Te=this.popStack(),L[Oe]=Te,this.trackIds&&(pe[Oe]=this.popStack()),this.stringParams&&(te[Oe]=this.popStack(),ee[Oe]=this.popStack());return we&&(Y.args=this.source.generateArray(L)),this.trackIds&&(Y.ids=this.source.generateArray(pe)),this.stringParams&&(Y.types=this.source.generateArray(te),Y.contexts=this.source.generateArray(ee)),this.options.data&&(Y.data="data"),this.useBlockParams&&(Y.blockParams="blockParams"),Y},setupHelperArgs:function(T,N,L,Y){var ee=this.setupParams(T,N,L);return ee.loc=JSON.stringify(this.source.currentLocation),ee=this.objectLiteral(ee),Y?(this.useRegister("options"),L.push("options"),["options=",ee]):L?(L.push(ee),""):ee}},function(){for(var R="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),T=D.RESERVED_WORDS={},N=0,L=R.length;N<L;N++)T[R[N]]=!0}(),D.isValidJavaScriptVariableName=function(R){return!D.RESERVED_WORDS[R]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(R)},ue.default=D,oe.exports=ue.default},3149:(oe,ue)=>{"use strict";ue.__esModule=!0;var re=function(){var O={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(x,z,H,G,D,U,R){var T=U.length-1;switch(D){case 1:return U[T-1];case 2:this.$=G.prepareProgram(U[T]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=U[T];break;case 9:this.$={type:"CommentStatement",value:G.stripComment(U[T]),strip:G.stripFlags(U[T],U[T]),loc:G.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:U[T],value:U[T],loc:G.locInfo(this._$)};break;case 11:this.$=G.prepareRawBlock(U[T-2],U[T-1],U[T],this._$);break;case 12:this.$={path:U[T-3],params:U[T-2],hash:U[T-1]};break;case 13:this.$=G.prepareBlock(U[T-3],U[T-2],U[T-1],U[T],!1,this._$);break;case 14:this.$=G.prepareBlock(U[T-3],U[T-2],U[T-1],U[T],!0,this._$);break;case 15:this.$={open:U[T-5],path:U[T-4],params:U[T-3],hash:U[T-2],blockParams:U[T-1],strip:G.stripFlags(U[T-5],U[T])};break;case 16:case 17:this.$={path:U[T-4],params:U[T-3],hash:U[T-2],blockParams:U[T-1],strip:G.stripFlags(U[T-5],U[T])};break;case 18:this.$={strip:G.stripFlags(U[T-1],U[T-1]),program:U[T]};break;case 19:var N=G.prepareBlock(U[T-2],U[T-1],U[T],U[T],!1,this._$),L=G.prepareProgram([N],U[T-1].loc);L.chained=!0,this.$={strip:U[T-2].strip,program:L,chain:!0};break;case 21:this.$={path:U[T-1],strip:G.stripFlags(U[T-2],U[T])};break;case 22:case 23:this.$=G.prepareMustache(U[T-3],U[T-2],U[T-1],U[T-4],G.stripFlags(U[T-4],U[T]),this._$);break;case 24:this.$={type:"PartialStatement",name:U[T-3],params:U[T-2],hash:U[T-1],indent:"",strip:G.stripFlags(U[T-4],U[T]),loc:G.locInfo(this._$)};break;case 25:this.$=G.preparePartialBlock(U[T-2],U[T-1],U[T],this._$);break;case 26:this.$={path:U[T-3],params:U[T-2],hash:U[T-1],strip:G.stripFlags(U[T-4],U[T])};break;case 29:this.$={type:"SubExpression",path:U[T-3],params:U[T-2],hash:U[T-1],loc:G.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:U[T],loc:G.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:G.id(U[T-2]),value:U[T],loc:G.locInfo(this._$)};break;case 32:this.$=G.id(U[T-1]);break;case 35:this.$={type:"StringLiteral",value:U[T],original:U[T],loc:G.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(U[T]),original:Number(U[T]),loc:G.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===U[T],original:"true"===U[T],loc:G.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:G.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:G.locInfo(this._$)};break;case 42:this.$=G.preparePath(!0,U[T],this._$);break;case 43:this.$=G.preparePath(!1,U[T],this._$);break;case 44:U[T-2].push({part:G.id(U[T]),original:U[T],separator:U[T-1]}),this.$=U[T-2];break;case 45:this.$=[{part:G.id(U[T]),original:U[T]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:U[T-1].push(U[T]);break;case 98:case 100:this.$=[U[T]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(x,z){throw new Error(x)},parse:function(x){var H=[0],G=[null],D=[],U=this.table,R="",T=0,N=0,L=0;this.lexer.setInput(x),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc>"u"&&(this.lexer.yylloc={});var te=this.lexer.yylloc;D.push(te);var $e,pe=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var ge,Ce,Oe,je,Le,me,l,Ze,ke={};;){if(this.defaultActions[Oe=H[H.length-1]]?je=this.defaultActions[Oe]:((null===ge||typeof ge>"u")&&($e=void 0,"number"!=typeof($e=this.lexer.lex()||1)&&($e=this.symbols_[$e]||$e),ge=$e),je=U[Oe]&&U[Oe][ge]),typeof je>"u"||!je.length||!je[0]){var ut="";if(!L){for(me in Ze=[],U[Oe])this.terminals_[me]&&me>2&&Ze.push("'"+this.terminals_[me]+"'");ut=this.lexer.showPosition?"Parse error on line "+(T+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+Ze.join(", ")+", got '"+(this.terminals_[ge]||ge)+"'":"Parse error on line "+(T+1)+": Unexpected "+(1==ge?"end of input":"'"+(this.terminals_[ge]||ge)+"'"),this.parseError(ut,{text:this.lexer.match,token:this.terminals_[ge]||ge,line:this.lexer.yylineno,loc:te,expected:Ze})}}if(je[0]instanceof Array&&je.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Oe+", token: "+ge);switch(je[0]){case 1:H.push(ge),G.push(this.lexer.yytext),D.push(this.lexer.yylloc),H.push(je[1]),ge=null,Ce?(ge=Ce,Ce=null):(N=this.lexer.yyleng,R=this.lexer.yytext,T=this.lexer.yylineno,te=this.lexer.yylloc,L>0&&L--);break;case 2:if(ke.$=G[G.length-(l=this.productions_[je[1]][1])],ke._$={first_line:D[D.length-(l||1)].first_line,last_line:D[D.length-1].last_line,first_column:D[D.length-(l||1)].first_column,last_column:D[D.length-1].last_column},pe&&(ke._$.range=[D[D.length-(l||1)].range[0],D[D.length-1].range[1]]),typeof(Le=this.performAction.call(ke,R,N,T,this.yy,je[1],G,D))<"u")return Le;l&&(H=H.slice(0,-1*l*2),G=G.slice(0,-1*l),D=D.slice(0,-1*l)),H.push(this.productions_[je[1]][0]),G.push(ke.$),D.push(ke._$),H.push(U[H[H.length-2]][H[H.length-1]]);break;case 3:return!0}}return!0}};function m(){this.yy={}}return O.lexer={EOF:1,parseError:function(z,H){if(!this.yy.parser)throw new Error(z);this.yy.parser.parseError(z,H)},setInput:function(z){return this._input=z,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var z=this._input[0];return this.yytext+=z,this.yyleng++,this.offset++,this.match+=z,this.matched+=z,z.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),z},unput:function(z){var H=z.length,G=z.split(/(?:\r\n?|\n)/g);this._input=z+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-H-1),this.offset-=H;var D=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),G.length-1&&(this.yylineno-=G.length-1);var U=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:G?(G.length===D.length?this.yylloc.first_column:0)+D[D.length-G.length].length-G[0].length:this.yylloc.first_column-H},this.options.ranges&&(this.yylloc.range=[U[0],U[0]+this.yyleng-H]),this},more:function(){return this._more=!0,this},less:function(z){this.unput(this.match.slice(z))},pastInput:function(){var z=this.matched.substr(0,this.matched.length-this.match.length);return(z.length>20?"...":"")+z.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var z=this.match;return z.length<20&&(z+=this._input.substr(0,20-z.length)),(z.substr(0,20)+(z.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var z=this.pastInput(),H=new Array(z.length+1).join("-");return z+this.upcomingInput()+"\n"+H+"^"},next:function(){if(this.done)return this.EOF;var z,H,G,D,R;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var T=this._currentRules(),N=0;N<T.length&&(!(G=this._input.match(this.rules[T[N]]))||H&&!(G[0].length>H[0].length)||(H=G,D=N,this.options.flex));N++);return H?((R=H[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=R.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:R?R[R.length-1].length-R[R.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+H[0].length},this.yytext+=H[0],this.match+=H[0],this.matches=H,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(H[0].length),this.matched+=H[0],z=this.performAction.call(this,this.yy,this,T[D],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),z||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var z=this.next();return typeof z<"u"?z:this.lex()},begin:function(z){this.conditionStack.push(z)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(z){this.begin(z)},options:{},performAction:function(z,H,G,D){function U(T,N){return H.yytext=H.yytext.substring(T,H.yyleng-N+T)}switch(G){case 0:if("\\\\"===H.yytext.slice(-2)?(U(0,1),this.begin("mu")):"\\"===H.yytext.slice(-1)?(U(0,1),this.begin("emu")):this.begin("mu"),H.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(U(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(H.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return H.yytext=U(1,2).replace(/\\"/g,'"'),80;case 32:return H.yytext=U(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return H.yytext=H.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}},m.prototype=O,O.Parser=m,new m}();ue.default=re,oe.exports=ue.default},72071:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var m=function O(G){return G&&G.__esModule?G:{default:G}}(re(56164));function X(){this.parents=[]}function x(G){this.acceptRequired(G,"path"),this.acceptArray(G.params),this.acceptKey(G,"hash")}function z(G){x.call(this,G),this.acceptKey(G,"program"),this.acceptKey(G,"inverse")}function H(G){this.acceptRequired(G,"name"),this.acceptArray(G.params),this.acceptKey(G,"hash")}X.prototype={constructor:X,mutating:!1,acceptKey:function(D,U){var R=this.accept(D[U]);if(this.mutating){if(R&&!X.prototype[R.type])throw new m.default('Unexpected node type "'+R.type+'" found when accepting '+U+" on "+D.type);D[U]=R}},acceptRequired:function(D,U){if(this.acceptKey(D,U),!D[U])throw new m.default(D.type+" requires "+U)},acceptArray:function(D){for(var U=0,R=D.length;U<R;U++)this.acceptKey(D,U),D[U]||(D.splice(U,1),U--,R--)},accept:function(D){if(D){if(!this[D.type])throw new m.default("Unknown type: "+D.type,D);this.current&&this.parents.unshift(this.current),this.current=D;var U=this[D.type](D);if(this.current=this.parents.shift(),!this.mutating||U)return U;if(!1!==U)return D}},Program:function(D){this.acceptArray(D.body)},MustacheStatement:x,Decorator:x,BlockStatement:z,DecoratorBlock:z,PartialStatement:H,PartialBlockStatement:function(D){H.call(this,D),this.acceptKey(D,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:x,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(D){this.acceptArray(D.pairs)},HashPair:function(D){this.acceptRequired(D,"value")}},ue.default=X,oe.exports=ue.default},73308:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var m=function O(D){return D&&D.__esModule?D:{default:D}}(re(72071));function X(){this.options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0]}function x(D,U,R){void 0===U&&(U=D.length);var T=D[U-1];return T?"ContentStatement"===T.type?(D[U-2]||!R?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(T.original):void 0:R}function z(D,U,R){void 0===U&&(U=-1);var T=D[U+1];return T?"ContentStatement"===T.type?(D[U+2]||!R?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(T.original):void 0:R}function H(D,U,R){var T=D[null==U?0:U+1];if(T&&"ContentStatement"===T.type&&(R||!T.rightStripped)){var N=T.value;T.value=T.value.replace(R?/^\s+/:/^[ \t]*\r?\n?/,""),T.rightStripped=T.value!==N}}function G(D,U,R){var T=D[null==U?D.length-1:U-1];if(T&&"ContentStatement"===T.type&&(R||!T.leftStripped)){var N=T.value;return T.value=T.value.replace(R?/\s+$/:/[ \t]+$/,""),T.leftStripped=T.value!==N,T.leftStripped}}(X.prototype=new m.default).Program=function(D){var U=!this.options.ignoreStandalone,R=!this.isRootSeen;this.isRootSeen=!0;for(var T=D.body,N=0,L=T.length;N<L;N++){var Y=T[N],ee=this.accept(Y);if(ee){var te=x(T,N,R),pe=z(T,N,R),we=ee.openStandalone&&te,Te=ee.closeStandalone&&pe,ge=ee.inlineStandalone&&te&&pe;ee.close&&H(T,N,!0),ee.open&&G(T,N,!0),U&&ge&&(H(T,N),G(T,N)&&"PartialStatement"===Y.type&&(Y.indent=/([ \t]+$)/.exec(T[N-1].original)[1])),U&&we&&(H((Y.program||Y.inverse).body),G(T,N)),U&&Te&&(H(T,N),G((Y.inverse||Y.program).body))}}return D},X.prototype.BlockStatement=X.prototype.DecoratorBlock=X.prototype.PartialBlockStatement=function(D){this.accept(D.program),this.accept(D.inverse);var U=D.program||D.inverse,R=D.program&&D.inverse,T=R,N=R;if(R&&R.chained)for(T=R.body[0].program;N.chained;)N=N.body[N.body.length-1].program;var L={open:D.openStrip.open,close:D.closeStrip.close,openStandalone:z(U.body),closeStandalone:x((T||U).body)};if(D.openStrip.close&&H(U.body,null,!0),R){var Y=D.inverseStrip;Y.open&&G(U.body,null,!0),Y.close&&H(T.body,null,!0),D.closeStrip.open&&G(N.body,null,!0),!this.options.ignoreStandalone&&x(U.body)&&z(T.body)&&(G(U.body),H(T.body))}else D.closeStrip.open&&G(U.body,null,!0);return L},X.prototype.Decorator=X.prototype.MustacheStatement=function(D){return D.strip},X.prototype.PartialStatement=X.prototype.CommentStatement=function(D){var U=D.strip||{};return{inlineStandalone:!0,open:U.open,close:U.close}},ue.default=X,oe.exports=ue.default},65551:(oe,ue,re)=>{"use strict";ue.__esModule=!0,ue.registerDefaultDecorators=function X(x){m.default(x)};var m=function O(x){return x&&x.__esModule?x:{default:x}}(re(56208))},56208:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var O=re(15841);ue.default=function(S){S.registerDecorator("inline",function(m,X,x,z){var H=m;return X.partials||(X.partials={},H=function(G,D){var U=x.partials;x.partials=O.extend({},U,X.partials);var R=m(G,D);return x.partials=U,R}),X.partials[z.args[0]]=z.fn,H})},oe.exports=ue.default},56164:(oe,ue)=>{"use strict";ue.__esModule=!0;var re=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function O(S,m){var X=m&&m.loc,x=void 0,z=void 0,H=void 0,G=void 0;X&&(z=X.end.line,G=X.end.column,S+=" - "+(x=X.start.line)+":"+(H=X.start.column));for(var D=Error.prototype.constructor.call(this,S),U=0;U<re.length;U++)this[re[U]]=D[re[U]];Error.captureStackTrace&&Error.captureStackTrace(this,O);try{X&&(this.lineNumber=x,this.endLineNumber=z,Object.defineProperty?(Object.defineProperty(this,"column",{value:H,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:G,enumerable:!0})):(this.column=H,this.endColumn=G))}catch{}}O.prototype=new Error,ue.default=O,oe.exports=ue.default},74455:(oe,ue,re)=>{"use strict";function O(pe){return pe&&pe.__esModule?pe:{default:pe}}ue.__esModule=!0,ue.registerDefaultHelpers=function ee(pe){m.default(pe),x.default(pe),H.default(pe),D.default(pe),R.default(pe),N.default(pe),Y.default(pe)},ue.moveHelperToHooks=function te(pe,we,Te){pe.helpers[we]&&(pe.hooks[we]=pe.helpers[we],Te||delete pe.helpers[we])};var m=O(re(24320)),x=O(re(74234)),H=O(re(35708)),D=O(re(15990)),R=O(re(46105)),N=O(re(8488)),Y=O(re(99601))},24320:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var O=re(15841);ue.default=function(S){S.registerHelper("blockHelperMissing",function(m,X){var x=X.inverse,z=X.fn;if(!0===m)return z(this);if(!1===m||null==m)return x(this);if(O.isArray(m))return m.length>0?(X.ids&&(X.ids=[X.name]),S.helpers.each(m,X)):x(this);if(X.data&&X.ids){var H=O.createFrame(X.data);H.contextPath=O.appendContextPath(X.data.contextPath,X.name),X={data:H}}return z(m,X)})},oe.exports=ue.default},74234:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var S=re(15841),X=function O(x){return x&&x.__esModule?x:{default:x}}(re(56164));ue.default=function(x){x.registerHelper("each",function(z,H){if(!H)throw new X.default("Must pass iterator to #each");var we,G=H.fn,D=H.inverse,U=0,R="",T=void 0,N=void 0;function L(we,Te,ge){T&&(T.key=we,T.index=Te,T.first=0===Te,T.last=!!ge,N&&(T.contextPath=N+we)),R+=G(z[we],{data:T,blockParams:S.blockParams([z[we],we],[N+we,null])})}if(H.data&&H.ids&&(N=S.appendContextPath(H.data.contextPath,H.ids[0])+"."),S.isFunction(z)&&(z=z.call(this)),H.data&&(T=S.createFrame(H.data)),z&&"object"==typeof z)if(S.isArray(z))for(var Y=z.length;U<Y;U++)U in z&&L(U,U,U===z.length-1);else if("function"==typeof Symbol&&z[Symbol.iterator]){for(var ee=[],te=z[Symbol.iterator](),pe=te.next();!pe.done;pe=te.next())ee.push(pe.value);for(Y=(z=ee).length;U<Y;U++)L(U,U,U===z.length-1)}else we=void 0,Object.keys(z).forEach(function(Te){void 0!==we&&L(we,U-1),we=Te,U++}),void 0!==we&&L(we,U-1,!0);return 0===U&&(R=D(this)),R})},oe.exports=ue.default},35708:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var m=function O(X){return X&&X.__esModule?X:{default:X}}(re(56164));ue.default=function(X){X.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new m.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},oe.exports=ue.default},15990:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var S=re(15841),X=function O(x){return x&&x.__esModule?x:{default:x}}(re(56164));ue.default=function(x){x.registerHelper("if",function(z,H){if(2!=arguments.length)throw new X.default("#if requires exactly one argument");return S.isFunction(z)&&(z=z.call(this)),!H.hash.includeZero&&!z||S.isEmpty(z)?H.inverse(this):H.fn(this)}),x.registerHelper("unless",function(z,H){if(2!=arguments.length)throw new X.default("#unless requires exactly one argument");return x.helpers.if.call(this,z,{fn:H.inverse,inverse:H.fn,hash:H.hash})})},oe.exports=ue.default},46105:(oe,ue)=>{"use strict";ue.__esModule=!0,ue.default=function(re){re.registerHelper("log",function(){for(var O=[void 0],S=arguments[arguments.length-1],m=0;m<arguments.length-1;m++)O.push(arguments[m]);var X=1;null!=S.hash.level?X=S.hash.level:S.data&&null!=S.data.level&&(X=S.data.level),O[0]=X,re.log.apply(re,O)})},oe.exports=ue.default},8488:(oe,ue)=>{"use strict";ue.__esModule=!0,ue.default=function(re){re.registerHelper("lookup",function(O,S,m){return O&&m.lookupProperty(O,S)})},oe.exports=ue.default},99601:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var S=re(15841),X=function O(x){return x&&x.__esModule?x:{default:x}}(re(56164));ue.default=function(x){x.registerHelper("with",function(z,H){if(2!=arguments.length)throw new X.default("#with requires exactly one argument");S.isFunction(z)&&(z=z.call(this));var G=H.fn;if(S.isEmpty(z))return H.inverse(this);var D=H.data;return H.data&&H.ids&&((D=S.createFrame(H.data)).contextPath=S.appendContextPath(H.data.contextPath,H.ids[0])),G(z,{data:D,blockParams:S.blockParams([z],[D&&D.contextPath])})})},oe.exports=ue.default},12515:(oe,ue,re)=>{"use strict";ue.__esModule=!0,ue.createNewLookupObject=function S(){for(var m=arguments.length,X=Array(m),x=0;x<m;x++)X[x]=arguments[x];return O.extend.apply(void 0,[Object.create(null)].concat(X))};var O=re(15841)},57855:(oe,ue,re)=>{"use strict";ue.__esModule=!0,ue.createProtoAccessControl=function z(R){var T=Object.create(null);T.constructor=!1,T.__defineGetter__=!1,T.__defineSetter__=!1,T.__lookupGetter__=!1;var N=Object.create(null);return N.__proto__=!1,{properties:{whitelist:S.createNewLookupObject(N,R.allowedProtoProperties),defaultValue:R.allowProtoPropertiesByDefault},methods:{whitelist:S.createNewLookupObject(T,R.allowedProtoMethods),defaultValue:R.allowProtoMethodsByDefault}}},ue.resultIsAllowed=function H(R,T,N){return function G(R,T){return void 0!==R.whitelist[T]?!0===R.whitelist[T]:void 0!==R.defaultValue?R.defaultValue:(function D(R){!0!==x[R]&&(x[R]=!0,X.default.log("error",'Handlebars: Access has been denied to resolve the property "'+R+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(T),!1)}("function"==typeof R?T.methods:T.properties,N)},ue.resetLoggedProperties=function U(){Object.keys(x).forEach(function(R){delete x[R]})};var S=re(12515),X=function O(R){return R&&R.__esModule?R:{default:R}}(re(55949)),x=Object.create(null)},26734:(oe,ue)=>{"use strict";ue.__esModule=!0,ue.wrapHelper=function re(O,S){return"function"!=typeof O?O:function(){return arguments[arguments.length-1]=S(arguments[arguments.length-1]),O.apply(this,arguments)}}},55949:(oe,ue,re)=>{"use strict";ue.__esModule=!0;var O=re(15841),S={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(X){if("string"==typeof X){var x=O.indexOf(S.methodMap,X.toLowerCase());X=x>=0?x:parseInt(X,10)}return X},log:function(X){if(X=S.lookupLevel(X),typeof console<"u"&&S.lookupLevel(S.level)<=X){var x=S.methodMap[X];console[x]||(x="log");for(var z=arguments.length,H=Array(z>1?z-1:0),G=1;G<z;G++)H[G-1]=arguments[G];console[x].apply(console,H)}}};ue.default=S,oe.exports=ue.default},76887:(oe,ue)=>{"use strict";ue.__esModule=!0,ue.default=function(re){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var O=globalThis.Handlebars;re.noConflict=function(){return globalThis.Handlebars===re&&(globalThis.Handlebars=O),re}},oe.exports=ue.default},16624:(oe,ue,re)=>{"use strict";ue.__esModule=!0,ue.checkRevision=function R(ge){var Ce=ge&&ge[0]||1;if(!(Ce>=H.LAST_COMPATIBLE_COMPILER_REVISION&&Ce<=H.COMPILER_REVISION)){if(Ce<H.LAST_COMPATIBLE_COMPILER_REVISION)throw new z.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+H.REVISION_CHANGES[H.COMPILER_REVISION]+") or downgrade your runtime to an older version ("+H.REVISION_CHANGES[Ce]+").");throw new z.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+ge[1]+").")}},ue.template=function T(ge,Ce){if(!Ce)throw new z.default("No environment passed to template");if(!ge||!ge.main)throw new z.default("Unknown template object: "+typeof ge);ge.main.decorator=ge.main_d,Ce.VM.checkRevision(ge.compiler);var Oe=ge.compiler&&7===ge.compiler[0],Ue={strict:function(me,l,Me){if(!me||!(l in me))throw new z.default('"'+l+'" not defined in '+me,{loc:Me});return Ue.lookupProperty(me,l)},lookupProperty:function(me,l){var Me=me[l];if(null==Me||Object.prototype.hasOwnProperty.call(me,l)||U.resultIsAllowed(Me,Ue.protoAccessControl,l))return Me},lookup:function(me,l){for(var Me=me.length,Ze=0;Ze<Me;Ze++)if(null!=(me[Ze]&&Ue.lookupProperty(me[Ze],l)))return me[Ze][l]},lambda:function(me,l){return"function"==typeof me?me.call(l):me},escapeExpression:X.escapeExpression,invokePartial:function je(ke,me,l){l.hash&&(me=X.extend({},me,l.hash),l.ids&&(l.ids[0]=!0)),ke=Ce.VM.resolvePartial.call(this,ke,me,l);var Me=X.extend({},l,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),Ze=Ce.VM.invokePartial.call(this,ke,me,Me);if(null==Ze&&Ce.compile&&(l.partials[l.name]=Ce.compile(ke,ge.compilerOptions,Ce),Ze=l.partials[l.name](me,Me)),null!=Ze){if(l.indent){for(var ut=Ze.split("\n"),$e=0,Ct=ut.length;$e<Ct&&(ut[$e]||$e+1!==Ct);$e++)ut[$e]=l.indent+ut[$e];Ze=ut.join("\n")}return Ze}throw new z.default("The partial "+l.name+" could not be compiled when running in runtime-only mode")},fn:function(me){var l=ge[me];return l.decorator=ge[me+"_d"],l},programs:[],program:function(me,l,Me,Ze,ut){var $e=this.programs[me],Ct=this.fn(me);return l||ut||Ze||Me?$e=N(this,me,Ct,l,Me,Ze,ut):$e||($e=this.programs[me]=N(this,me,Ct)),$e},data:function(me,l){for(;me&&l--;)me=me._parent;return me},mergeIfNeeded:function(me,l){var Me=me||l;return me&&l&&me!==l&&(Me=X.extend({},l,me)),Me},nullContext:Object.seal({}),noop:Ce.VM.noop,compilerInfo:ge.compiler};function Le(ke){var me=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],l=me.data;Le._setup(me),!me.partial&&ge.useData&&(l=function te(ge,Ce){return(!Ce||!("root"in Ce))&&((Ce=Ce?H.createFrame(Ce):{}).root=ge),Ce}(ke,l));var Me=void 0,Ze=ge.useBlockParams?[]:void 0;function ut($e){return""+ge.main(Ue,$e,Ue.helpers,Ue.partials,l,Ze,Me)}return ge.useDepths&&(Me=me.depths?ke!=me.depths[0]?[ke].concat(me.depths):me.depths:[ke]),(ut=pe(ge.main,ut,Ue,me.depths||[],l,Ze))(ke,me)}return Le.isTop=!0,Le._setup=function(ke){if(ke.partial)Ue.protoAccessControl=ke.protoAccessControl,Ue.helpers=ke.helpers,Ue.partials=ke.partials,Ue.decorators=ke.decorators,Ue.hooks=ke.hooks;else{var me=X.extend({},Ce.helpers,ke.helpers);(function we(ge,Ce){Object.keys(ge).forEach(function(Oe){ge[Oe]=function Te(ge,Ce){var Oe=Ce.lookupProperty;return D.wrapHelper(ge,function(je){return X.extend({lookupProperty:Oe},je)})}(ge[Oe],Ce)})})(me,Ue),Ue.helpers=me,ge.usePartial&&(Ue.partials=Ue.mergeIfNeeded(ke.partials,Ce.partials)),(ge.usePartial||ge.useDecorators)&&(Ue.decorators=X.extend({},Ce.decorators,ke.decorators)),Ue.hooks={},Ue.protoAccessControl=U.createProtoAccessControl(ke);var l=ke.allowCallsToHelperMissing||Oe;G.moveHelperToHooks(Ue,"helperMissing",l),G.moveHelperToHooks(Ue,"blockHelperMissing",l)}},Le._child=function(ke,me,l,Me){if(ge.useBlockParams&&!l)throw new z.default("must pass block params");if(ge.useDepths&&!Me)throw new z.default("must pass parent depths");return N(Ue,ke,ge[ke],me,0,l,Me)},Le},ue.wrapProgram=N,ue.resolvePartial=function L(ge,Ce,Oe){return ge?!ge.call&&!Oe.name&&(Oe.name=ge,ge=Oe.partials[ge]):ge="@partial-block"===Oe.name?Oe.data["partial-block"]:Oe.partials[Oe.name],ge},ue.invokePartial=function Y(ge,Ce,Oe){var je=Oe.data&&Oe.data["partial-block"];Oe.partial=!0,Oe.ids&&(Oe.data.contextPath=Oe.ids[0]||Oe.data.contextPath);var Ue=void 0;if(Oe.fn&&Oe.fn!==ee&&function(){Oe.data=H.createFrame(Oe.data);var Le=Oe.fn;Ue=Oe.data["partial-block"]=function(me){var l=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return l.data=H.createFrame(l.data),l.data["partial-block"]=je,Le(me,l)},Le.partials&&(Oe.partials=X.extend({},Oe.partials,Le.partials))}(),void 0===ge&&Ue&&(ge=Ue),void 0===ge)throw new z.default("The partial "+Oe.name+" could not be found");if(ge instanceof Function)return ge(Ce,Oe)},ue.noop=ee;var X=function S(ge){if(ge&&ge.__esModule)return ge;var Ce={};if(null!=ge)for(var Oe in ge)Object.prototype.hasOwnProperty.call(ge,Oe)&&(Ce[Oe]=ge[Oe]);return Ce.default=ge,Ce}(re(15841)),z=function O(ge){return ge&&ge.__esModule?ge:{default:ge}}(re(56164)),H=re(87506),G=re(74455),D=re(26734),U=re(57855);function N(ge,Ce,Oe,je,Ue,Le,ke){function me(l){var Me=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],Ze=ke;return ke&&l!=ke[0]&&!(l===ge.nullContext&&null===ke[0])&&(Ze=[l].concat(ke)),Oe(ge,l,ge.helpers,ge.partials,Me.data||je,Le&&[Me.blockParams].concat(Le),Ze)}return(me=pe(Oe,me,ge,ke,je,Le)).program=Ce,me.depth=ke?ke.length:0,me.blockParams=Ue||0,me}function ee(){return""}function pe(ge,Ce,Oe,je,Ue,Le){if(ge.decorator){var ke={};Ce=ge.decorator(Ce,ke,Oe,je&&je[0],Ue,Le,je),X.extend(Ce,ke)}return Ce}},46778:(oe,ue)=>{"use strict";function re(O){this.string=O}ue.__esModule=!0,re.prototype.toString=re.prototype.toHTML=function(){return""+this.string},ue.default=re,oe.exports=ue.default},15841:(oe,ue)=>{"use strict";ue.__esModule=!0,ue.extend=X,ue.indexOf=function G(L,Y){for(var ee=0,te=L.length;ee<te;ee++)if(L[ee]===Y)return ee;return-1},ue.escapeExpression=function D(L){if("string"!=typeof L){if(L&&L.toHTML)return L.toHTML();if(null==L)return"";if(!L)return L+"";L=""+L}return S.test(L)?L.replace(O,m):L},ue.isEmpty=function U(L){return!L&&0!==L||!(!H(L)||0!==L.length)},ue.createFrame=function R(L){var Y=X({},L);return Y._parent=L,Y},ue.blockParams=function T(L,Y){return L.path=Y,L},ue.appendContextPath=function N(L,Y){return(L?L+".":"")+Y};var re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},O=/[&<>"'`=]/g,S=/[&<>"'`=]/;function m(L){return re[L]}function X(L){for(var Y=1;Y<arguments.length;Y++)for(var ee in arguments[Y])Object.prototype.hasOwnProperty.call(arguments[Y],ee)&&(L[ee]=arguments[Y][ee]);return L}var x=Object.prototype.toString;ue.toString=x;var z=function(Y){return"function"==typeof Y};z(/x/)&&(ue.isFunction=z=function(L){return"function"==typeof L&&"[object Function]"===x.call(L)}),ue.isFunction=z;var H=Array.isArray||function(L){return!(!L||"object"!=typeof L)&&"[object Array]"===x.call(L)};ue.isArray=H},7745:(oe,ue,re)=>{"use strict";var O,S,m;m=function(m){function X(x,z,H,G){x.hasOwnProperty(z)||(x[z]=G.apply(null,H),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:z,module:x[z]}})))}X(m=m?m._modules:{},"Series/Timeline/TimelinePoint.js",[m["Core/Series/Point.js"],m["Core/Series/SeriesRegistry.js"],m["Core/Utilities.js"]],function(x,z,H){const{series:G,seriesTypes:{pie:{prototype:{pointClass:D}}}}=z,{defined:U,isNumber:R,merge:T,objectEach:N,pick:L}=H;return class Y extends G.prototype.pointClass{constructor(){super(...arguments),this.series=this.options=void 0}alignConnector(){let te=this.series,pe=this.connector,we=this.dataLabel,Te=this.dataLabel.options=T(te.options.dataLabels,this.options.dataLabels);var ge=this.series.chart,Ce=pe.getBBox(),Oe=Ce.x+we.translateX;Ce=Ce.y+we.translateY,ge.inverted?Ce-=we.options.connectorWidth/2:Oe+=we.options.connectorWidth/2,pe[(ge=ge.isInsidePlot(Oe,Ce))?"animate":"attr"]({d:this.getConnectorPath()}),pe.addClass(`highcharts-color-${this.colorIndex}`),te.chart.styledMode||pe.attr({stroke:Te.connectorColor||this.color,"stroke-width":Te.connectorWidth,opacity:we[U(we.newOpacity)?"newOpacity":"opacity"]})}drawConnector(){this.connector||(this.connector=this.series.chart.renderer.path(this.getConnectorPath()).attr({zIndex:-1}).add(this.dataLabel)),this.series.chart.isInsidePlot(this.dataLabel.x,this.dataLabel.y)&&this.alignConnector()}getConnectorPath(){let te=this.series.chart,pe=this.series.xAxis.len,we=te.inverted,Te=we?"x2":"y2",ge=this.dataLabel,Ce=ge.targetPosition,Oe={x1:this.plotX,y1:this.plotY,x2:this.plotX,y2:R(Ce.y)?Ce.y:ge.y};return we&&(Oe={x1:this.plotY,y1:pe-this.plotX,x2:Ce.x||ge.x,y2:pe-this.plotX}),(ge.alignAttr||ge)[Te[0]]<this.series.yAxis.len/2&&(Oe[Te]+=ge[we?"width":"height"]),N(Oe,function(Ue,Le){Oe[Le]-=(ge.alignAttr||ge)[Le[0]]}),te.renderer.crispLine([["M",Oe.x1,Oe.y1],["L",Oe.x2,Oe.y2]],ge.options.connectorWidth)}init(){const te=super.init.apply(this,arguments);return te.name=L(te.name,"Event"),te.y=1,te}isValid(){return null!==this.options.y}setState(){this.isNull||super.setState.apply(this,arguments)}setVisible(te,pe){const we=this.series;pe=L(pe,we.options.ignoreHiddenPoint),D.prototype.setVisible.call(this,te,!1),we.processData(),pe&&we.chart.redraw()}applyOptions(te,pe){return te=x.prototype.optionsToObject.call(this,te),this.userDLOptions=T(this.userDLOptions,te.dataLabels),super.applyOptions(te,pe)}}}),X(m,"Series/Timeline/TimelineSeriesDefaults.js",[],function(){return{colorByPoint:!0,stickyTracking:!1,ignoreHiddenPoint:!0,legendType:"point",lineWidth:4,tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.8em"> {point.key}</span><br/>',pointFormat:"{point.description}"},states:{hover:{lineWidthPlus:0}},dataLabels:{enabled:!0,allowOverlap:!0,alternate:!0,backgroundColor:"#ffffff",borderWidth:1,borderColor:"#999999",borderRadius:3,color:"#333333",connectorWidth:1,distance:100,formatter:function(){let x;return x=this.series.chart.styledMode?'<span class="highcharts-color-'+this.point.colorIndex+'">\u25cf </span>':'<span style="color:'+this.point.color+'">\u25cf </span>',x+'<span class="highcharts-strong">'+(this.key||"")+"</span><br/>"+(this.point.label||"")},style:{textOutline:"none",fontWeight:"normal",fontSize:"0.8em"},shadow:!1,verticalAlign:"middle"},marker:{enabledThreshold:0,symbol:"square",radius:6,lineWidth:2,height:15},showInLegend:!1,colorKey:"x",legendSymbol:"rectangle"}}),X(m,"Series/Timeline/TimelineSeries.js",[m["Core/Series/SeriesRegistry.js"],m["Core/Renderer/SVG/SVGElement.js"],m["Series/Timeline/TimelinePoint.js"],m["Series/Timeline/TimelineSeriesDefaults.js"],m["Core/Utilities.js"]],function(x,z,H,G,D){const{seriesTypes:{column:U,line:R}}=x,{addEvent:T,arrayMax:N,arrayMin:L,defined:Y,extend:ee,merge:te,pick:pe}=D;class we extends R{constructor(){super(...arguments),this.visibilityMap=this.userOptions=this.points=this.options=this.data=void 0}alignDataLabel(ge,Ce,Oe,je){var Ue=this.chart.inverted,Le=this.visibilityMap.filter(function(ut){return ut}),ke=this.visiblePointsCount,me=Le.indexOf(ge);let Me,l=ge.userDLOptions||{};me=(Le=this.options.dataLabels).alternate?me&&me!==ke-1?2:1.5:1,ke=Math.floor(this.xAxis.len/ke);let Ze=Ce.padding;ge.visible&&(Me=Math.abs(l.x||ge.options.dataLabels.x),Ue=Ue?{width:(Ue=2*(Me-Ze)-ge.itemHeight/2)+"px",textOverflow:Ce.width/Ue*Ce.height/2>ke*me?"ellipsis":"none"}:{width:(l.width||Le.width||ke*me-2*Ze)+"px"},Ce.css(Ue),this.chart.styledMode||Ce.shadow(Le.shadow)),super.alignDataLabel.apply(this,arguments)}bindAxes(){const ge=this;super.bindAxes.call(ge),["xAxis","yAxis"].forEach(function(Ce){"xAxis"!==Ce||ge[Ce].userOptions.type||(ge[Ce].categories=ge[Ce].hasNames=!0)})}distributeDL(){const ge=this,Ce=ge.options.dataLabels;let Oe=1;if(Ce){const je=Ce.distance||0;ge.points.forEach(Ue=>{Ue.options.dataLabels=te({[ge.chart.inverted?"x":"y"]:Ce.alternate&&Oe%2?-je:je},Ue.userDLOptions),Oe++})}}generatePoints(){const ge=this;super.generatePoints.apply(ge),ge.points.forEach(function(Ce,Oe){Ce.applyOptions({x:ge.xData[Oe]},ge.xData[Oe])})}getVisibilityMap(){return(this.data.length?this.data:this.userOptions.data).map(function(ge){return!(!ge||!1===ge.visible||ge.isNull)&&ge})}getXExtremes(ge){const Ce=this;return ge=ge.filter(function(Oe,je){return Ce.points[je].isValid()&&Ce.points[je].visible}),{min:L(ge),max:N(ge)}}init(){const ge=this;super.init.apply(ge,arguments),ge.eventsToUnbind.push(T(ge,"afterTranslate",function(){let Ce,Oe=Number.MAX_VALUE;ge.points.forEach(function(je){je.isInside=je.isInside&&je.visible,je.visible&&!je.isNull&&(Y(Ce)&&(Oe=Math.min(Oe,Math.abs(je.plotX-Ce))),Ce=je.plotX)}),ge.closestPointRangePx=Oe})),ge.eventsToUnbind.push(T(ge,"drawDataLabels",function(){ge.distributeDL()})),ge.eventsToUnbind.push(T(ge,"afterDrawDataLabels",function(){let Ce;ge.points.forEach(function(Oe){if(Ce=Oe.dataLabel)return Ce.animate=function(je){return this.targetPosition&&(this.targetPosition=je),z.prototype.animate.apply(this,arguments)},Ce.targetPosition||(Ce.targetPosition={}),Oe.drawConnector()})})),ge.eventsToUnbind.push(T(ge.chart,"afterHideOverlappingLabel",function(){ge.points.forEach(function(Ce){Ce.connector&&Ce.dataLabel&&Ce.dataLabel.oldOpacity!==Ce.dataLabel.newOpacity&&Ce.alignConnector()})}))}markerAttribs(ge,Ce){var Oe=this.options.marker;let je=ge.marker||{},Ue=je.symbol||Oe.symbol,Le=pe(je.width,Oe.width,this.closestPointRangePx),ke=pe(je.height,Oe.height),me=0;return this.xAxis.dateTime?super.markerAttribs.call(this,ge,Ce):(Ce&&(Oe=Oe.states[Ce]||{},me=pe((Ce=je.states&&je.states[Ce]||{}).radius,Oe.radius,me+(Oe.radiusPlus||0))),ge.hasImage=Ue&&0===Ue.indexOf("url"),ge={x:Math.floor(ge.plotX)-Le/2-me/2,y:ge.plotY-ke/2-me/2,width:Le+me,height:ke+me},this.chart.inverted?{y:ge.x&&ge.width&&this.xAxis.len-ge.x-ge.width,x:ge.y&&ge.y,width:ge.height,height:ge.width}:ge)}processData(){let Ce,ge=0;for(this.visibilityMap=this.getVisibilityMap(),this.visibilityMap.forEach(function(Oe){Oe&&ge++}),this.visiblePointsCount=ge,Ce=0;Ce<this.xData.length;Ce++)this.yData[Ce]=1;super.processData.call(this,arguments)}}return we.defaultOptions=te(R.defaultOptions,G),ee(we.prototype,{drawTracker:U.prototype.drawTracker,pointClass:H,trackerGroups:["markerGroup","dataLabelsGroup"]}),x.registerSeriesType("timeline",we),we}),X(m,"masters/modules/timeline.src.js",[],function(){})},oe.exports?(m.default=m,oe.exports=m):(O=[re(81845)],void 0!==(S=function(X){return m(X),m.Highcharts=X,m}.apply(ue,O))&&(oe.exports=S))},65364:(oe,ue,re)=>{var O,S;self,oe.exports=(O=re(59969),S=re(74456),function(){var m={"./src/plugin/hyperlinks.js":
/*!**********************************!*\
                  !*** ./src/plugin/hyperlinks.js ***!
                  \**********************************/function(H,G,D){"use strict";D.r(G),D(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js"),D(
/*! core-js/modules/es.string.link.js */
"./node_modules/core-js/modules/es.string.link.js");var L=D(
/*! ../worker.js */
"./src/worker.js"),Y=D(
/*! ../utils.js */
"./src/utils.js"),ee=[],te={toContainer:L.default.prototype.toContainer,toPdf:L.default.prototype.toPdf};L.default.prototype.toContainer=function(){return te.toContainer.call(this).then(function(){if(this.opt.enableLinks){var Te=this.prop.container,ge=Te.querySelectorAll("a"),Ce=(0,Y.unitConvert)(Te.getBoundingClientRect(),this.prop.pageSize.k);ee=[],Array.prototype.forEach.call(ge,function(Oe){for(var je=Oe.getClientRects(),Ue=0;Ue<je.length;Ue++){var Le=(0,Y.unitConvert)(je[Ue],this.prop.pageSize.k);Le.left-=Ce.left,Le.top-=Ce.top;var ke=Math.floor(Le.top/this.prop.pageSize.inner.height)+1;ee.push({page:ke,top:this.opt.margin[0]+Le.top%this.prop.pageSize.inner.height,left:this.opt.margin[1]+Le.left,clientRect:Le,link:Oe})}},this)}})},L.default.prototype.toPdf=function(){return te.toPdf.call(this).then(function(){if(this.opt.enableLinks){ee.forEach(function(ge){this.prop.pdf.setPage(ge.page),this.prop.pdf.link(ge.left,ge.top,ge.clientRect.width,ge.clientRect.height,{url:ge.link.href})},this);var Te=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(Te)}})}},"./src/plugin/jspdf-plugin.js":
/*!************************************!*\
                  !*** ./src/plugin/jspdf-plugin.js ***!
                  \************************************/function(H,G,D){"use strict";D.r(G),D(
/*! core-js/modules/es.symbol.js */
"./node_modules/core-js/modules/es.symbol.js"),D(
/*! core-js/modules/es.symbol.description.js */
"./node_modules/core-js/modules/es.symbol.description.js"),D(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),D(
/*! core-js/modules/es.symbol.iterator.js */
"./node_modules/core-js/modules/es.symbol.iterator.js"),D(
/*! core-js/modules/es.array.iterator.js */
"./node_modules/core-js/modules/es.array.iterator.js"),D(
/*! core-js/modules/es.string.iterator.js */
"./node_modules/core-js/modules/es.string.iterator.js"),D(
/*! core-js/modules/web.dom-collections.iterator.js */
"./node_modules/core-js/modules/web.dom-collections.iterator.js");var je=D(
/*! jspdf */
"jspdf");function Le(ke){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(l){return typeof l}:function(l){return l&&"function"==typeof Symbol&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l})(ke)}je.jsPDF.getPageSize=function(ke,me,l){if("object"===Le(ke)){var Me=ke;ke=Me.orientation,me=Me.unit||me,l=Me.format||l}me=me||"mm",l=l||"a4",ke=(""+(ke||"P")).toLowerCase();var Ze=(""+l).toLowerCase(),ut={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(me){case"pt":var $e=1;break;case"mm":$e=72/25.4;break;case"cm":$e=72/2.54;break;case"in":$e=72;break;case"px":$e=.75;break;case"pc":case"em":$e=12;break;case"ex":$e=6;break;default:throw"Invalid unit: "+me}if(ut.hasOwnProperty(Ze))var Ct=ut[Ze][1]/$e,Ke=ut[Ze][0]/$e;else try{Ct=l[1],Ke=l[0]}catch{throw new Error("Invalid format: "+l)}if("p"===ke||"portrait"===ke){if(ke="p",Ke>Ct){var Wt=Ke;Ke=Ct,Ct=Wt}}else{if("l"!==ke&&"landscape"!==ke)throw"Invalid orientation: "+ke;ke="l",Ct>Ke&&(Wt=Ke,Ke=Ct,Ct=Wt)}return{width:Ke,height:Ct,unit:me,k:$e}},G.default=je.jsPDF},"./src/plugin/pagebreaks.js":
/*!**********************************!*\
                  !*** ./src/plugin/pagebreaks.js ***!
                  \**********************************/function(H,G,D){"use strict";D.r(G),D(
/*! core-js/modules/es.array.concat.js */
"./node_modules/core-js/modules/es.array.concat.js"),D(
/*! core-js/modules/es.array.slice.js */
"./node_modules/core-js/modules/es.array.slice.js"),D(
/*! core-js/modules/es.array.join.js */
"./node_modules/core-js/modules/es.array.join.js"),D(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js"),D(
/*! core-js/modules/es.object.keys.js */
"./node_modules/core-js/modules/es.object.keys.js");var Te=D(
/*! ../worker.js */
"./src/worker.js"),ge=D(
/*! ../utils.js */
"./src/utils.js"),Ce={toContainer:Te.default.prototype.toContainer};Te.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},Te.default.prototype.toContainer=function(){return Ce.toContainer.call(this).then(function(){var Ue=this.prop.container,Le=this.prop.pageSize.inner.px.height,ke=[].concat(this.opt.pagebreak.mode),me={avoidAll:-1!==ke.indexOf("avoid-all"),css:-1!==ke.indexOf("css"),legacy:-1!==ke.indexOf("legacy")},l={},Me=this;["before","after","avoid"].forEach(function($e){l[$e]=me.avoidAll&&"avoid"===$e?[]:[].concat(Me.opt.pagebreak[$e]||[]),l[$e].length>0&&(l[$e]=Array.prototype.slice.call(Ue.querySelectorAll(l[$e].join(", "))))});var Ze=Ue.querySelectorAll(".html2pdf__page-break");Ze=Array.prototype.slice.call(Ze);var ut=Ue.querySelectorAll("*");Array.prototype.forEach.call(ut,function(Ct){var Ke={before:!1,after:me.legacy&&-1!==Ze.indexOf(Ct),avoid:me.avoidAll};if(me.css){var Wt=window.getComputedStyle(Ct),mr=["always","page","left","right"];Ke={before:Ke.before||-1!==mr.indexOf(Wt.breakBefore||Wt.pageBreakBefore),after:Ke.after||-1!==mr.indexOf(Wt.breakAfter||Wt.pageBreakAfter),avoid:Ke.avoid||-1!==["avoid","avoid-page"].indexOf(Wt.breakInside||Wt.pageBreakInside)}}Object.keys(Ke).forEach(function(No){Ke[No]=Ke[No]||-1!==l[No].indexOf(Ct)});var Kr=Ct.getBoundingClientRect();if(Ke.avoid&&!Ke.before){var Pn=Math.floor(Kr.top/Le),Kn=Math.floor(Kr.bottom/Le),Mo=Math.abs(Kr.bottom-Kr.top)/Le;Kn!==Pn&&Mo<=1&&(Ke.before=!0)}if(Ke.before){var mo=(0,ge.createElement)("div",{style:{display:"block",height:Le-Kr.top%Le+"px"}});Ct.parentNode.insertBefore(mo,Ct)}Ke.after&&(mo=(0,ge.createElement)("div",{style:{display:"block",height:Le-Kr.bottom%Le+"px"}}),Ct.parentNode.insertBefore(mo,Ct.nextSibling))})})}},"./src/utils.js":
/*!**********************!*\
                  !*** ./src/utils.js ***!
                  \**********************/function(H,G,D){"use strict";function Le(ut){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Ct){return typeof Ct}:function(Ct){return Ct&&"function"==typeof Symbol&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct})(ut)}D.r(G),D.d(G,{objType:function(){return ke},createElement:function(){return me},cloneNode:function(){return l},unitConvert:function(){return Me},toPx:function(){return Ze}}),D(
/*! core-js/modules/es.number.constructor.js */
"./node_modules/core-js/modules/es.number.constructor.js"),D(
/*! core-js/modules/es.symbol.js */
"./node_modules/core-js/modules/es.symbol.js"),D(
/*! core-js/modules/es.symbol.description.js */
"./node_modules/core-js/modules/es.symbol.description.js"),D(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),D(
/*! core-js/modules/es.symbol.iterator.js */
"./node_modules/core-js/modules/es.symbol.iterator.js"),D(
/*! core-js/modules/es.array.iterator.js */
"./node_modules/core-js/modules/es.array.iterator.js"),D(
/*! core-js/modules/es.string.iterator.js */
"./node_modules/core-js/modules/es.string.iterator.js"),D(
/*! core-js/modules/web.dom-collections.iterator.js */
"./node_modules/core-js/modules/web.dom-collections.iterator.js");var ke=function($e){var Ct=Le($e);return"undefined"===Ct?"undefined":"string"===Ct||$e instanceof String?"string":"number"===Ct||$e instanceof Number?"number":"function"===Ct||$e instanceof Function?"function":$e&&$e.constructor===Array?"array":$e&&1===$e.nodeType?"element":"object"===Ct?"object":"unknown"},me=function($e,Ct){var Ke=document.createElement($e);if(Ct.className&&(Ke.className=Ct.className),Ct.innerHTML){Ke.innerHTML=Ct.innerHTML;for(var Wt=Ke.getElementsByTagName("script"),mr=Wt.length;mr-- >0;null)Wt[mr].parentNode.removeChild(Wt[mr])}for(var nr in Ct.style)Ke.style[nr]=Ct.style[nr];return Ke},l=function ut($e,Ct){for(var Ke=3===$e.nodeType?document.createTextNode($e.nodeValue):$e.cloneNode(!1),Wt=$e.firstChild;Wt;Wt=Wt.nextSibling)(!0===Ct||1!==Wt.nodeType||"SCRIPT"!==Wt.nodeName)&&Ke.appendChild(ut(Wt,Ct));return 1===$e.nodeType&&("CANVAS"===$e.nodeName?(Ke.width=$e.width,Ke.height=$e.height,Ke.getContext("2d").drawImage($e,0,0)):("TEXTAREA"===$e.nodeName||"SELECT"===$e.nodeName)&&(Ke.value=$e.value),Ke.addEventListener("load",function(){Ke.scrollTop=$e.scrollTop,Ke.scrollLeft=$e.scrollLeft},!0)),Ke},Me=function($e,Ct){if("number"===ke($e))return 72*$e/96/Ct;var Ke={};for(var Wt in $e)Ke[Wt]=72*$e[Wt]/96/Ct;return Ke},Ze=function($e,Ct){return Math.floor($e*Ct/72*96)}},"./src/worker.js":
/*!***********************!*\
                  !*** ./src/worker.js ***!
                  \***********************/function(H,G,D){"use strict";D.r(G),D(
/*! core-js/modules/es.object.assign.js */
"./node_modules/core-js/modules/es.object.assign.js"),D(
/*! core-js/modules/es.array.map.js */
"./node_modules/core-js/modules/es.array.map.js"),D(
/*! core-js/modules/es.object.keys.js */
"./node_modules/core-js/modules/es.object.keys.js"),D(
/*! core-js/modules/es.array.concat.js */
"./node_modules/core-js/modules/es.array.concat.js"),D(
/*! core-js/modules/es.object.to-string.js */
"./node_modules/core-js/modules/es.object.to-string.js"),D(
/*! core-js/modules/es.regexp.to-string.js */
"./node_modules/core-js/modules/es.regexp.to-string.js"),D(
/*! core-js/modules/es.function.name.js */
"./node_modules/core-js/modules/es.function.name.js"),D(
/*! core-js/modules/web.dom-collections.for-each.js */
"./node_modules/core-js/modules/web.dom-collections.for-each.js");var Le=D(
/*! jspdf */
"jspdf"),me=D(
/*! html2canvas */
"html2canvas"),Me=D(
/*! ./utils.js */
"./src/utils.js"),Ze=D(
/*! es6-promise */
"./node_modules/es6-promise/dist/es6-promise.js"),$e=D.n(Ze)().Promise,Ct=function Ke(Wt){var mr=Object.assign(Ke.convert($e.resolve()),JSON.parse(JSON.stringify(Ke.template))),nr=Ke.convert($e.resolve(),mr);return(nr=nr.setProgress(1,Ke,1,[Ke])).set(Wt)};(Ct.prototype=Object.create($e.prototype)).constructor=Ct,Ct.convert=function(Wt,mr){return Wt.__proto__=mr||Ct.prototype,Wt},Ct.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},Ct.prototype.from=function(Wt,mr){return this.then(function(){switch(mr=mr||function nr(Kr){switch((0,Me.objType)(Kr)){case"string":return"string";case"element":return Kr.nodeName.toLowerCase&&"canvas"===Kr.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(Wt)){case"string":return this.set({src:(0,Me.createElement)("div",{innerHTML:Wt})});case"element":return this.set({src:Wt});case"canvas":return this.set({canvas:Wt});case"img":return this.set({img:Wt});default:return this.error("Unknown source type.")}})},Ct.prototype.to=function(Wt){switch(Wt){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ct.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var nr={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},Kr={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};nr.opacity=0;var Pn=(0,Me.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,Me.createElement)("div",{className:"html2pdf__overlay",style:nr}),this.prop.container=(0,Me.createElement)("div",{className:"html2pdf__container",style:Kr}),this.prop.container.appendChild(Pn),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},Ct.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(function(){var nr=Object.assign({},this.opt.html2canvas);return delete nr.onrendered,me(this.prop.container,nr)}).then(function(nr){(this.opt.html2canvas.onrendered||function(){})(nr),this.prop.canvas=nr,document.body.removeChild(this.prop.overlay)})},Ct.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var nr=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=nr})},Ct.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var nr=this.prop.canvas,Kr=this.opt,Pn=nr.height,Kn=Math.floor(nr.width*this.prop.pageSize.inner.ratio),Mo=Math.ceil(Pn/Kn),mo=this.prop.pageSize.inner.height,No=document.createElement("canvas"),Di=No.getContext("2d");No.width=nr.width,No.height=Kn,this.prop.pdf=this.prop.pdf||new Le.jsPDF(Kr.jsPDF);for(var ci=0;ci<Mo;ci++){ci===Mo-1&&Pn%Kn!=0&&(No.height=Pn%Kn,mo=No.height*this.prop.pageSize.inner.width/No.width);var zn=No.width,Wn=No.height;Di.fillStyle="white",Di.fillRect(0,0,zn,Wn),Di.drawImage(nr,0,ci*Kn,zn,Wn,0,0,zn,Wn),ci&&this.prop.pdf.addPage();var an=No.toDataURL("image/"+Kr.image.type,Kr.image.quality);this.prop.pdf.addImage(an,Kr.image.type,Kr.margin[1],Kr.margin[0],this.prop.pageSize.inner.width,mo)}})},Ct.prototype.output=function(Wt,mr,nr){return"img"===(nr=nr||"pdf").toLowerCase()||"image"===nr.toLowerCase()?this.outputImg(Wt,mr):this.outputPdf(Wt,mr)},Ct.prototype.outputPdf=function(Wt,mr){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Wt,mr)})},Ct.prototype.outputImg=function(Wt,mr){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Wt){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Wt+'" is not supported.'}})},Ct.prototype.save=function(Wt){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Wt?{filename:Wt}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ct.prototype.set=function(Wt){if("object"!==(0,Me.objType)(Wt))return this;var mr=Object.keys(Wt||{}).map(function(nr){switch(nr){case"margin":return this.setMargin.bind(this,Wt.margin);case"jsPDF":return function(){return this.opt.jsPDF=Wt.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Wt.pageSize);default:return nr in Ct.template.prop?function(){this.prop[nr]=Wt[nr]}:function(){this.opt[nr]=Wt[nr]}}},this);return this.then(function(){return this.thenList(mr)})},Ct.prototype.get=function(Wt,mr){return this.then(function(){var Kr=Wt in Ct.template.prop?this.prop[Wt]:this.opt[Wt];return mr?mr(Kr):Kr})},Ct.prototype.setMargin=function(Wt){return this.then(function(){switch((0,Me.objType)(Wt)){case"number":Wt=[Wt,Wt,Wt,Wt];case"array":if(2===Wt.length&&(Wt=[Wt[0],Wt[1],Wt[0],Wt[1]]),4===Wt.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=Wt}).then(this.setPageSize)},Ct.prototype.setPageSize=function(Wt){return this.then(function(){(Wt=Wt||Le.jsPDF.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Wt.inner={width:Wt.width-this.opt.margin[1]-this.opt.margin[3],height:Wt.height-this.opt.margin[0]-this.opt.margin[2]},Wt.inner.px={width:(0,Me.toPx)(Wt.inner.width,Wt.k),height:(0,Me.toPx)(Wt.inner.height,Wt.k)},Wt.inner.ratio=Wt.inner.height/Wt.inner.width),this.prop.pageSize=Wt})},Ct.prototype.setProgress=function(Wt,mr,nr,Kr){return null!=Wt&&(this.progress.val=Wt),null!=mr&&(this.progress.state=mr),null!=nr&&(this.progress.n=nr),null!=Kr&&(this.progress.stack=Kr),this.progress.ratio=this.progress.val/this.progress.state,this},Ct.prototype.updateProgress=function(Wt,mr,nr,Kr){return this.setProgress(Wt?this.progress.val+Wt:null,mr||null,nr?this.progress.n+nr:null,Kr?this.progress.stack.concat(Kr):null)},Ct.prototype.then=function(Wt,mr){var nr=this;return this.thenCore(Wt,mr,function(Pn,Kn){return nr.updateProgress(null,null,1,[Pn]),$e.prototype.then.call(this,function(mo){return nr.updateProgress(null,Pn),mo}).then(Pn,Kn).then(function(mo){return nr.updateProgress(1),mo})})},Ct.prototype.thenCore=function(Wt,mr,nr){nr=nr||$e.prototype.then;var Kr=this;Wt&&(Wt=Wt.bind(Kr)),mr&&(mr=mr.bind(Kr));var Kn=-1!==$e.toString().indexOf("[native code]")&&"Promise"===$e.name?Kr:Ct.convert(Object.assign({},Kr),$e.prototype),Mo=nr.call(Kn,Wt,mr);return Ct.convert(Mo,Kr.__proto__)},Ct.prototype.thenExternal=function(Wt,mr){return $e.prototype.then.call(this,Wt,mr)},Ct.prototype.thenList=function(Wt){var mr=this;return Wt.forEach(function(Kr){mr=mr.thenCore(Kr)}),mr},Ct.prototype.catch=function(Ke){Ke&&(Ke=Ke.bind(this));var Wt=$e.prototype.catch.call(this,Ke);return Ct.convert(Wt,this)},Ct.prototype.catchExternal=function(Wt){return $e.prototype.catch.call(this,Wt)},Ct.prototype.error=function(Wt){return this.then(function(){throw new Error(Wt)})},Ct.prototype.using=Ct.prototype.set,Ct.prototype.saveAs=Ct.prototype.save,Ct.prototype.export=Ct.prototype.output,Ct.prototype.run=Ct.prototype.then,G.default=Ct},"./node_modules/core-js/internals/a-function.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/a-function.js ***!
                  \******************************************************/function(H){H.exports=function(G){if("function"!=typeof G)throw TypeError(String(G)+" is not a function");return G}},"./node_modules/core-js/internals/a-possible-prototype.js":
/*!****************************************************************!*\
                  !*** ./node_modules/core-js/internals/a-possible-prototype.js ***!
                  \****************************************************************/function(H,G,D){var U=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");H.exports=function(R){if(!U(R)&&null!==R)throw TypeError("Can't set "+String(R)+" as a prototype");return R}},"./node_modules/core-js/internals/add-to-unscopables.js":
/*!**************************************************************!*\
                  !*** ./node_modules/core-js/internals/add-to-unscopables.js ***!
                  \**************************************************************/function(H,G,D){var U=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),R=D(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),T=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),N=U("unscopables"),L=Array.prototype;null==L[N]&&T.f(L,N,{configurable:!0,value:R(null)}),H.exports=function(Y){L[N][Y]=!0}},"./node_modules/core-js/internals/an-object.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/an-object.js ***!
                  \*****************************************************/function(H,G,D){var U=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");H.exports=function(R){if(!U(R))throw TypeError(String(R)+" is not an object");return R}},"./node_modules/core-js/internals/array-for-each.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/array-for-each.js ***!
                  \**********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").forEach,T=D(
/*! ../internals/array-method-is-strict */
"./node_modules/core-js/internals/array-method-is-strict.js")("forEach");H.exports=T?[].forEach:function(L){return U(this,L,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/array-includes.js ***!
                  \**********************************************************/function(H,G,D){var U=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),R=D(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),T=D(
/*! ../internals/to-absolute-index */
"./node_modules/core-js/internals/to-absolute-index.js"),N=function(L){return function(Y,ee,te){var ge,pe=U(Y),we=R(pe.length),Te=T(te,we);if(L&&ee!=ee){for(;we>Te;)if((ge=pe[Te++])!=ge)return!0}else for(;we>Te;Te++)if((L||Te in pe)&&pe[Te]===ee)return L||Te||0;return!L&&-1}};H.exports={includes:N(!0),indexOf:N(!1)}},"./node_modules/core-js/internals/array-iteration.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/array-iteration.js ***!
                  \***********************************************************/function(H,G,D){var U=D(
/*! ../internals/function-bind-context */
"./node_modules/core-js/internals/function-bind-context.js"),R=D(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),T=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),N=D(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),L=D(
/*! ../internals/array-species-create */
"./node_modules/core-js/internals/array-species-create.js"),Y=[].push,ee=function(te){var pe=1==te,we=2==te,Te=3==te,ge=4==te,Ce=6==te,Oe=7==te,je=5==te||Ce;return function(Ue,Le,ke,me){for(var Wt,mr,l=T(Ue),Me=R(l),Ze=U(Le,ke,3),ut=N(Me.length),$e=0,Ct=me||L,Ke=pe?Ct(Ue,ut):we||Oe?Ct(Ue,0):void 0;ut>$e;$e++)if((je||$e in Me)&&(mr=Ze(Wt=Me[$e],$e,l),te))if(pe)Ke[$e]=mr;else if(mr)switch(te){case 3:return!0;case 5:return Wt;case 6:return $e;case 2:Y.call(Ke,Wt)}else switch(te){case 4:return!1;case 7:Y.call(Ke,Wt)}return Ce?-1:Te||ge?ge:Ke}};H.exports={forEach:ee(0),map:ee(1),filter:ee(2),some:ee(3),every:ee(4),find:ee(5),findIndex:ee(6),filterReject:ee(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":
/*!****************************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-method-has-species-support.js ***!
                  \****************************************************************************/function(H,G,D){var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),R=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),T=D(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),N=R("species");H.exports=function(L){return T>=51||!U(function(){var Y=[];return(Y.constructor={})[N]=function(){return{foo:1}},1!==Y[L](Boolean).foo})}},"./node_modules/core-js/internals/array-method-is-strict.js":
/*!******************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-method-is-strict.js ***!
                  \******************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");H.exports=function(R,T){var N=[][R];return!!N&&U(function(){N.call(null,T||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":
/*!*********************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-species-constructor.js ***!
                  \*********************************************************************/function(H,G,D){var U=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),R=D(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),N=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("species");H.exports=function(L){var Y;return R(L)&&("function"!=typeof(Y=L.constructor)||Y!==Array&&!R(Y.prototype)?U(Y)&&null===(Y=Y[N])&&(Y=void 0):Y=void 0),void 0===Y?Array:Y}},"./node_modules/core-js/internals/array-species-create.js":
/*!****************************************************************!*\
                  !*** ./node_modules/core-js/internals/array-species-create.js ***!
                  \****************************************************************/function(H,G,D){var U=D(
/*! ../internals/array-species-constructor */
"./node_modules/core-js/internals/array-species-constructor.js");H.exports=function(R,T){return new(U(R))(0===T?0:T)}},"./node_modules/core-js/internals/classof-raw.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/classof-raw.js ***!
                  \*******************************************************/function(H){var G={}.toString;H.exports=function(D){return G.call(D).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":
/*!***************************************************!*\
                  !*** ./node_modules/core-js/internals/classof.js ***!
                  \***************************************************/function(H,G,D){var U=D(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),R=D(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),N=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag"),L="Arguments"==R(function(){return arguments}());H.exports=U?R:function(ee){var te,pe,we;return void 0===ee?"Undefined":null===ee?"Null":"string"==typeof(pe=function(ee,te){try{return ee[te]}catch{}}(te=Object(ee),N))?pe:L?R(te):"Object"==(we=R(te))&&"function"==typeof te.callee?"Arguments":we}},"./node_modules/core-js/internals/copy-constructor-properties.js":
/*!***********************************************************************!*\
                  !*** ./node_modules/core-js/internals/copy-constructor-properties.js ***!
                  \***********************************************************************/function(H,G,D){var U=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),R=D(
/*! ../internals/own-keys */
"./node_modules/core-js/internals/own-keys.js"),T=D(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),N=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js");H.exports=function(L,Y){for(var ee=R(Y),te=N.f,pe=T.f,we=0;we<ee.length;we++){var Te=ee[we];U(L,Te)||te(L,Te,pe(Y,Te))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/correct-prototype-getter.js ***!
                  \********************************************************************/function(H,G,D){var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");H.exports=!U(function(){function R(){}return R.prototype.constructor=null,Object.getPrototypeOf(new R)!==R.prototype})},"./node_modules/core-js/internals/create-html.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/create-html.js ***!
                  \*******************************************************/function(H,G,D){var U=D(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),R=D(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),T=/"/g;H.exports=function(N,L,Y,ee){var te=R(U(N)),pe="<"+L;return""!==Y&&(pe+=" "+Y+'="'+R(ee).replace(T,"&quot;")+'"'),pe+">"+te+"</"+L+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":
/*!***********************************************************************!*\
                  !*** ./node_modules/core-js/internals/create-iterator-constructor.js ***!
                  \***********************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/iterators-core */
"./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,R=D(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),T=D(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),N=D(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),L=D(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),Y=function(){return this};H.exports=function(ee,te,pe){var we=te+" Iterator";return ee.prototype=R(U,{next:T(1,pe)}),N(ee,we,!1,!0),L[we]=Y,ee}},"./node_modules/core-js/internals/create-non-enumerable-property.js":
/*!**************************************************************************!*\
                  !*** ./node_modules/core-js/internals/create-non-enumerable-property.js ***!
                  \**************************************************************************/function(H,G,D){var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),T=D(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js");H.exports=U?function(N,L,Y){return R.f(N,L,T(1,Y))}:function(N,L,Y){return N[L]=Y,N}},"./node_modules/core-js/internals/create-property-descriptor.js":
/*!**********************************************************************!*\
                  !*** ./node_modules/core-js/internals/create-property-descriptor.js ***!
                  \**********************************************************************/function(H){H.exports=function(G,D){return{enumerable:!(1&G),configurable:!(2&G),writable:!(4&G),value:D}}},"./node_modules/core-js/internals/create-property.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/create-property.js ***!
                  \***********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),R=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),T=D(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js");H.exports=function(N,L,Y){var ee=U(L);ee in N?R.f(N,ee,T(0,Y)):N[ee]=Y}},"./node_modules/core-js/internals/define-iterator.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/define-iterator.js ***!
                  \***********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/create-iterator-constructor */
"./node_modules/core-js/internals/create-iterator-constructor.js"),T=D(
/*! ../internals/object-get-prototype-of */
"./node_modules/core-js/internals/object-get-prototype-of.js"),N=D(
/*! ../internals/object-set-prototype-of */
"./node_modules/core-js/internals/object-set-prototype-of.js"),L=D(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),Y=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),ee=D(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),te=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),pe=D(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),we=D(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),Te=D(
/*! ../internals/iterators-core */
"./node_modules/core-js/internals/iterators-core.js"),ge=Te.IteratorPrototype,Ce=Te.BUGGY_SAFARI_ITERATORS,Oe=te("iterator"),Ue="values",Le="entries",ke=function(){return this};H.exports=function(me,l,Me,Ze,ut,$e,Ct){R(Me,l,Ze);var Mo,mo,No,Ke=function(Di){if(Di===ut&&Pn)return Pn;if(!Ce&&Di in nr)return nr[Di];switch(Di){case"keys":case Ue:case Le:return function(){return new Me(this,Di)}}return function(){return new Me(this)}},Wt=l+" Iterator",mr=!1,nr=me.prototype,Kr=nr[Oe]||nr["@@iterator"]||ut&&nr[ut],Pn=!Ce&&Kr||Ke(ut),Kn="Array"==l&&nr.entries||Kr;if(Kn&&(Mo=T(Kn.call(new me)),ge!==Object.prototype&&Mo.next&&(!pe&&T(Mo)!==ge&&(N?N(Mo,ge):"function"!=typeof Mo[Oe]&&Y(Mo,Oe,ke)),L(Mo,Wt,!0,!0),pe&&(we[Wt]=ke))),ut==Ue&&Kr&&Kr.name!==Ue&&(mr=!0,Pn=function(){return Kr.call(this)}),(!pe||Ct)&&nr[Oe]!==Pn&&Y(nr,Oe,Pn),we[l]=Pn,ut)if(mo={values:Ke(Ue),keys:$e?Pn:Ke("keys"),entries:Ke(Le)},Ct)for(No in mo)(Ce||mr||!(No in nr))&&ee(nr,No,mo[No]);else U({target:l,proto:!0,forced:Ce||mr},mo);return mo}},"./node_modules/core-js/internals/define-well-known-symbol.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/define-well-known-symbol.js ***!
                  \********************************************************************/function(H,G,D){var U=D(
/*! ../internals/path */
"./node_modules/core-js/internals/path.js"),R=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),T=D(
/*! ../internals/well-known-symbol-wrapped */
"./node_modules/core-js/internals/well-known-symbol-wrapped.js"),N=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f;H.exports=function(L){var Y=U.Symbol||(U.Symbol={});R(Y,L)||N(Y,L,{value:T.f(L)})}},"./node_modules/core-js/internals/descriptors.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/descriptors.js ***!
                  \*******************************************************/function(H,G,D){var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");H.exports=!U(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},"./node_modules/core-js/internals/document-create-element.js":
/*!*******************************************************************!*\
                  !*** ./node_modules/core-js/internals/document-create-element.js ***!
                  \*******************************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),T=U.document,N=R(T)&&R(T.createElement);H.exports=function(L){return N?T.createElement(L):{}}},"./node_modules/core-js/internals/dom-iterables.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/dom-iterables.js ***!
                  \*********************************************************/function(H){H.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/engine-user-agent.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js");H.exports=U("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/engine-v8-version.js ***!
                  \*************************************************************/function(H,G,D){var ee,te,U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/engine-user-agent */
"./node_modules/core-js/internals/engine-user-agent.js"),T=U.process,N=U.Deno,L=T&&T.versions||N&&N.version,Y=L&&L.v8;Y?te=(ee=Y.split("."))[0]<4?1:ee[0]+ee[1]:R&&(!(ee=R.match(/Edge\/(\d+)/))||ee[1]>=74)&&(ee=R.match(/Chrome\/(\d+)/))&&(te=ee[1]),H.exports=te&&+te},"./node_modules/core-js/internals/enum-bug-keys.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/enum-bug-keys.js ***!
                  \*********************************************************/function(H){H.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":
/*!**************************************************!*\
                  !*** ./node_modules/core-js/internals/export.js ***!
                  \**************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,T=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),N=D(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),L=D(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),Y=D(
/*! ../internals/copy-constructor-properties */
"./node_modules/core-js/internals/copy-constructor-properties.js"),ee=D(
/*! ../internals/is-forced */
"./node_modules/core-js/internals/is-forced.js");H.exports=function(te,pe){var Oe,je,Ue,Le,ke,we=te.target,Te=te.global,ge=te.stat;if(Oe=Te?U:ge?U[we]||L(we,{}):(U[we]||{}).prototype)for(je in pe){if(Le=pe[je],Ue=te.noTargetGet?(ke=R(Oe,je))&&ke.value:Oe[je],!ee(Te?je:we+(ge?".":"#")+je,te.forced)&&void 0!==Ue){if(typeof Le==typeof Ue)continue;Y(Le,Ue)}(te.sham||Ue&&Ue.sham)&&T(Le,"sham",!0),N(Oe,je,Le,te)}}},"./node_modules/core-js/internals/fails.js":
/*!*************************************************!*\
                  !*** ./node_modules/core-js/internals/fails.js ***!
                  \*************************************************/function(H){H.exports=function(G){try{return!!G()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":
/*!*****************************************************************!*\
                  !*** ./node_modules/core-js/internals/function-bind-context.js ***!
                  \*****************************************************************/function(H,G,D){var U=D(
/*! ../internals/a-function */
"./node_modules/core-js/internals/a-function.js");H.exports=function(R,T,N){if(U(R),void 0===T)return R;switch(N){case 0:return function(){return R.call(T)};case 1:return function(L){return R.call(T,L)};case 2:return function(L,Y){return R.call(T,L,Y)};case 3:return function(L,Y,ee){return R.call(T,L,Y,ee)}}return function(){return R.apply(T,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/get-built-in.js ***!
                  \********************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");H.exports=function(T,N){return arguments.length<2?function(T){return"function"==typeof T?T:void 0}(U[T]):U[T]&&U[T][N]}},"./node_modules/core-js/internals/global.js":
/*!**************************************************!*\
                  !*** ./node_modules/core-js/internals/global.js ***!
                  \**************************************************/function(H){var G=function(D){return D&&D.Math==Math&&D};H.exports=G("object"==typeof globalThis&&globalThis)||G("object"==typeof window&&window)||G("object"==typeof self&&self)||G("object"==typeof global&&global)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":
/*!***********************************************!*\
                  !*** ./node_modules/core-js/internals/has.js ***!
                  \***********************************************/function(H,G,D){var U=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),R={}.hasOwnProperty;H.exports=Object.hasOwn||function(N,L){return R.call(U(N),L)}},"./node_modules/core-js/internals/hidden-keys.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/hidden-keys.js ***!
                  \*******************************************************/function(H){H.exports={}},"./node_modules/core-js/internals/html.js":
/*!************************************************!*\
                  !*** ./node_modules/core-js/internals/html.js ***!
                  \************************************************/function(H,G,D){var U=D(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js");H.exports=U("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/ie8-dom-define.js ***!
                  \**********************************************************/function(H,G,D){var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),T=D(
/*! ../internals/document-create-element */
"./node_modules/core-js/internals/document-create-element.js");H.exports=!U&&!R(function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})},"./node_modules/core-js/internals/indexed-object.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/indexed-object.js ***!
                  \**********************************************************/function(H,G,D){var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),R=D(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),T="".split;H.exports=U(function(){return!Object("z").propertyIsEnumerable(0)})?function(N){return"String"==R(N)?T.call(N,""):Object(N)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":
/*!***************************************************************!*\
                  !*** ./node_modules/core-js/internals/inherit-if-required.js ***!
                  \***************************************************************/function(H,G,D){var U=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),R=D(
/*! ../internals/object-set-prototype-of */
"./node_modules/core-js/internals/object-set-prototype-of.js");H.exports=function(T,N,L){var Y,ee;return R&&"function"==typeof(Y=N.constructor)&&Y!==L&&U(ee=Y.prototype)&&ee!==L.prototype&&R(T,ee),T}},"./node_modules/core-js/internals/inspect-source.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/inspect-source.js ***!
                  \**********************************************************/function(H,G,D){var U=D(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js"),R=Function.toString;"function"!=typeof U.inspectSource&&(U.inspectSource=function(T){return R.call(T)}),H.exports=U.inspectSource},"./node_modules/core-js/internals/internal-state.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/internal-state.js ***!
                  \**********************************************************/function(H,G,D){var Te,ge,Ce,U=D(
/*! ../internals/native-weak-map */
"./node_modules/core-js/internals/native-weak-map.js"),R=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),T=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),N=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),L=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),Y=D(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js"),ee=D(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),te=D(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),pe="Object already initialized";if(U||Y.state){var Ue=Y.state||(Y.state=new(0,R.WeakMap)),Le=Ue.get,ke=Ue.has,me=Ue.set;Te=function(Me,Ze){if(ke.call(Ue,Me))throw new TypeError(pe);return Ze.facade=Me,me.call(Ue,Me,Ze),Ze},ge=function(Me){return Le.call(Ue,Me)||{}},Ce=function(Me){return ke.call(Ue,Me)}}else{var l=ee("state");te[l]=!0,Te=function(Me,Ze){if(L(Me,l))throw new TypeError(pe);return Ze.facade=Me,N(Me,l,Ze),Ze},ge=function(Me){return L(Me,l)?Me[l]:{}},Ce=function(Me){return L(Me,l)}}H.exports={set:Te,get:ge,has:Ce,enforce:function(Me){return Ce(Me)?ge(Me):Te(Me,{})},getterFor:function(Me){return function(Ze){var ut;if(!T(Ze)||(ut=ge(Ze)).type!==Me)throw TypeError("Incompatible receiver, "+Me+" required");return ut}}}},"./node_modules/core-js/internals/is-array.js":
/*!****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-array.js ***!
                  \****************************************************/function(H,G,D){var U=D(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js");H.exports=Array.isArray||function(T){return"Array"==U(T)}},"./node_modules/core-js/internals/is-forced.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-forced.js ***!
                  \*****************************************************/function(H,G,D){var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),R=/#|\.prototype\./,T=function(te,pe){var we=L[N(te)];return we==ee||we!=Y&&("function"==typeof pe?U(pe):!!pe)},N=T.normalize=function(te){return String(te).replace(R,".").toLowerCase()},L=T.data={},Y=T.NATIVE="N",ee=T.POLYFILL="P";H.exports=T},"./node_modules/core-js/internals/is-object.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-object.js ***!
                  \*****************************************************/function(H){H.exports=function(G){return"object"==typeof G?null!==G:"function"==typeof G}},"./node_modules/core-js/internals/is-pure.js":
/*!***************************************************!*\
                  !*** ./node_modules/core-js/internals/is-pure.js ***!
                  \***************************************************/function(H){H.exports=!1},"./node_modules/core-js/internals/is-symbol.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/is-symbol.js ***!
                  \*****************************************************/function(H,G,D){var U=D(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),R=D(
/*! ../internals/use-symbol-as-uid */
"./node_modules/core-js/internals/use-symbol-as-uid.js");H.exports=R?function(T){return"symbol"==typeof T}:function(T){var N=U("Symbol");return"function"==typeof N&&Object(T)instanceof N}},"./node_modules/core-js/internals/iterators-core.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/internals/iterators-core.js ***!
                  \**********************************************************/function(H,G,D){"use strict";var we,Te,ge,U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),R=D(
/*! ../internals/object-get-prototype-of */
"./node_modules/core-js/internals/object-get-prototype-of.js"),T=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),N=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),L=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),Y=D(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),ee=L("iterator"),te=!1;[].keys&&("next"in(ge=[].keys())?(Te=R(R(ge)))!==Object.prototype&&(we=Te):te=!0);var Ce=null==we||U(function(){var Oe={};return we[ee].call(Oe)!==Oe});Ce&&(we={}),(!Y||Ce)&&!N(we,ee)&&T(we,ee,function(){return this}),H.exports={IteratorPrototype:we,BUGGY_SAFARI_ITERATORS:te}},"./node_modules/core-js/internals/iterators.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/iterators.js ***!
                  \*****************************************************/function(H){H.exports={}},"./node_modules/core-js/internals/native-symbol.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/native-symbol.js ***!
                  \*********************************************************/function(H,G,D){var U=D(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),R=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");H.exports=!!Object.getOwnPropertySymbols&&!R(function(){var T=Symbol();return!String(T)||!(Object(T)instanceof Symbol)||!Symbol.sham&&U&&U<41})},"./node_modules/core-js/internals/native-weak-map.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/native-weak-map.js ***!
                  \***********************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/inspect-source */
"./node_modules/core-js/internals/inspect-source.js"),T=U.WeakMap;H.exports="function"==typeof T&&/native code/.test(R(T))},"./node_modules/core-js/internals/object-assign.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/object-assign.js ***!
                  \*********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),T=D(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js"),N=D(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),L=D(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),Y=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),ee=D(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),te=Object.assign,pe=Object.defineProperty;H.exports=!te||R(function(){if(U&&1!==te({b:1},te(pe({},"a",{enumerable:!0,get:function(){pe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var we={},Te={},ge=Symbol(),Ce="abcdefghijklmnopqrst";return we[ge]=7,Ce.split("").forEach(function(Oe){Te[Oe]=Oe}),7!=te({},we)[ge]||T(te({},Te)).join("")!=Ce})?function(Te,ge){for(var Ce=Y(Te),Oe=arguments.length,je=1,Ue=N.f,Le=L.f;Oe>je;)for(var Ze,ke=ee(arguments[je++]),me=Ue?T(ke).concat(Ue(ke)):T(ke),l=me.length,Me=0;l>Me;)Ze=me[Me++],(!U||Le.call(ke,Ze))&&(Ce[Ze]=ke[Ze]);return Ce}:te},"./node_modules/core-js/internals/object-create.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/internals/object-create.js ***!
                  \*********************************************************/function(H,G,D){var Le,U=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),R=D(
/*! ../internals/object-define-properties */
"./node_modules/core-js/internals/object-define-properties.js"),T=D(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js"),N=D(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),L=D(
/*! ../internals/html */
"./node_modules/core-js/internals/html.js"),Y=D(
/*! ../internals/document-create-element */
"./node_modules/core-js/internals/document-create-element.js"),ee=D(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),we="prototype",Te="script",ge=ee("IE_PROTO"),Ce=function(){},Oe=function(me){return"<script>"+me+"</"+Te+">"},je=function(me){me.write(Oe("")),me.close();var l=me.parentWindow.Object;return me=null,l},ke=function(){try{Le=new ActiveXObject("htmlfile")}catch{}ke=document.domain&&Le?je(Le):function(){var Me,me=Y("iframe");if(me.style)return me.style.display="none",L.appendChild(me),me.src=String("javascript:"),(Me=me.contentWindow.document).open(),Me.write(Oe("document.F=Object")),Me.close(),Me.F}()||je(Le);for(var me=T.length;me--;)delete ke[we][T[me]];return ke()};N[ge]=!0,H.exports=Object.create||function(l,Me){var Ze;return null!==l?(Ce[we]=U(l),Ze=new Ce,Ce[we]=null,Ze[ge]=l):Ze=ke(),void 0===Me?Ze:R(Ze,Me)}},"./node_modules/core-js/internals/object-define-properties.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-define-properties.js ***!
                  \********************************************************************/function(H,G,D){var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),T=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),N=D(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js");H.exports=U?Object.defineProperties:function(Y,ee){T(Y);for(var Te,te=N(ee),pe=te.length,we=0;pe>we;)R.f(Y,Te=te[we++],ee[Te]);return Y}},"./node_modules/core-js/internals/object-define-property.js":
/*!******************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-define-property.js ***!
                  \******************************************************************/function(H,G,D){var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/ie8-dom-define */
"./node_modules/core-js/internals/ie8-dom-define.js"),T=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),N=D(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),L=Object.defineProperty;G.f=U?L:function(ee,te,pe){if(T(ee),te=N(te),T(pe),R)try{return L(ee,te,pe)}catch{}if("get"in pe||"set"in pe)throw TypeError("Accessors not supported");return"value"in pe&&(ee[te]=pe.value),ee}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":
/*!******************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-descriptor.js ***!
                  \******************************************************************************/function(H,G,D){var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),T=D(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),N=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),L=D(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),Y=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),ee=D(
/*! ../internals/ie8-dom-define */
"./node_modules/core-js/internals/ie8-dom-define.js"),te=Object.getOwnPropertyDescriptor;G.f=U?te:function(we,Te){if(we=N(we),Te=L(Te),ee)try{return te(we,Te)}catch{}if(Y(we,Te))return T(!R.f.call(we,Te),we[Te])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":
/*!**********************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-names-external.js ***!
                  \**********************************************************************************/function(H,G,D){var U=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),R=D(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js").f,T={}.toString,N="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];H.exports.f=function(ee){return N&&"[object Window]"==T.call(ee)?function(Y){try{return R(Y)}catch{return N.slice()}}(ee):R(U(ee))}},"./node_modules/core-js/internals/object-get-own-property-names.js":
/*!*************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-names.js ***!
                  \*************************************************************************/function(H,G,D){var U=D(
/*! ../internals/object-keys-internal */
"./node_modules/core-js/internals/object-keys-internal.js"),T=D(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js").concat("length","prototype");G.f=Object.getOwnPropertyNames||function(L){return U(L,T)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":
/*!***************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-own-property-symbols.js ***!
                  \***************************************************************************/function(H,G){G.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":
/*!*******************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-get-prototype-of.js ***!
                  \*******************************************************************/function(H,G,D){var U=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),R=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),T=D(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),N=D(
/*! ../internals/correct-prototype-getter */
"./node_modules/core-js/internals/correct-prototype-getter.js"),L=T("IE_PROTO"),Y=Object.prototype;H.exports=N?Object.getPrototypeOf:function(ee){return ee=R(ee),U(ee,L)?ee[L]:"function"==typeof ee.constructor&&ee instanceof ee.constructor?ee.constructor.prototype:ee instanceof Object?Y:null}},"./node_modules/core-js/internals/object-keys-internal.js":
/*!****************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-keys-internal.js ***!
                  \****************************************************************/function(H,G,D){var U=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),R=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),T=D(
/*! ../internals/array-includes */
"./node_modules/core-js/internals/array-includes.js").indexOf,N=D(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js");H.exports=function(L,Y){var we,ee=R(L),te=0,pe=[];for(we in ee)!U(N,we)&&U(ee,we)&&pe.push(we);for(;Y.length>te;)U(ee,we=Y[te++])&&(~T(pe,we)||pe.push(we));return pe}},"./node_modules/core-js/internals/object-keys.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/object-keys.js ***!
                  \*******************************************************/function(H,G,D){var U=D(
/*! ../internals/object-keys-internal */
"./node_modules/core-js/internals/object-keys-internal.js"),R=D(
/*! ../internals/enum-bug-keys */
"./node_modules/core-js/internals/enum-bug-keys.js");H.exports=Object.keys||function(N){return U(N,R)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":
/*!*************************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-property-is-enumerable.js ***!
                  \*************************************************************************/function(H,G){"use strict";var D={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,R=U&&!D.call({1:2},1);G.f=R?function(N){var L=U(this,N);return!!L&&L.enumerable}:D},"./node_modules/core-js/internals/object-set-prototype-of.js":
/*!*******************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-set-prototype-of.js ***!
                  \*******************************************************************/function(H,G,D){var U=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),R=D(
/*! ../internals/a-possible-prototype */
"./node_modules/core-js/internals/a-possible-prototype.js");H.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var L,T=!1,N={};try{(L=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(N,[]),T=N instanceof Array}catch{}return function(ee,te){return U(ee),R(te),T?L.call(ee,te):ee.__proto__=te,ee}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/internals/object-to-string.js ***!
                  \************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),R=D(
/*! ../internals/classof */
"./node_modules/core-js/internals/classof.js");H.exports=U?{}.toString:function(){return"[object "+R(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":
/*!*****************************************************************!*\
                  !*** ./node_modules/core-js/internals/ordinary-to-primitive.js ***!
                  \*****************************************************************/function(H,G,D){var U=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js");H.exports=function(R,T){var N,L;if("string"===T&&"function"==typeof(N=R.toString)&&!U(L=N.call(R))||"function"==typeof(N=R.valueOf)&&!U(L=N.call(R))||"string"!==T&&"function"==typeof(N=R.toString)&&!U(L=N.call(R)))return L;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":
/*!****************************************************!*\
                  !*** ./node_modules/core-js/internals/own-keys.js ***!
                  \****************************************************/function(H,G,D){var U=D(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),R=D(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js"),T=D(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),N=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js");H.exports=U("Reflect","ownKeys")||function(Y){var ee=R.f(N(Y)),te=T.f;return te?ee.concat(te(Y)):ee}},"./node_modules/core-js/internals/path.js":
/*!************************************************!*\
                  !*** ./node_modules/core-js/internals/path.js ***!
                  \************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");H.exports=U},"./node_modules/core-js/internals/redefine.js":
/*!****************************************************!*\
                  !*** ./node_modules/core-js/internals/redefine.js ***!
                  \****************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),T=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),N=D(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),L=D(
/*! ../internals/inspect-source */
"./node_modules/core-js/internals/inspect-source.js"),Y=D(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),ee=Y.get,te=Y.enforce,pe=String(String).split("String");(H.exports=function(we,Te,ge,Ce){var Le,Oe=!!Ce&&!!Ce.unsafe,je=!!Ce&&!!Ce.enumerable,Ue=!!Ce&&!!Ce.noTargetGet;"function"==typeof ge&&("string"==typeof Te&&!T(ge,"name")&&R(ge,"name",Te),(Le=te(ge)).source||(Le.source=pe.join("string"==typeof Te?Te:""))),we!==U?(Oe?!Ue&&we[Te]&&(je=!0):delete we[Te],je?we[Te]=ge:R(we,Te,ge)):je?we[Te]=ge:N(Te,ge)})(Function.prototype,"toString",function(){return"function"==typeof this&&ee(this).source||L(this)})},"./node_modules/core-js/internals/regexp-flags.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/regexp-flags.js ***!
                  \********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js");H.exports=function(){var R=U(this),T="";return R.global&&(T+="g"),R.ignoreCase&&(T+="i"),R.multiline&&(T+="m"),R.dotAll&&(T+="s"),R.unicode&&(T+="u"),R.sticky&&(T+="y"),T}},"./node_modules/core-js/internals/require-object-coercible.js":
/*!********************************************************************!*\
                  !*** ./node_modules/core-js/internals/require-object-coercible.js ***!
                  \********************************************************************/function(H){H.exports=function(G){if(null==G)throw TypeError("Can't call method on "+G);return G}},"./node_modules/core-js/internals/set-global.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/set-global.js ***!
                  \******************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js");H.exports=function(R,T){try{Object.defineProperty(U,R,{value:T,configurable:!0,writable:!0})}catch{U[R]=T}return T}},"./node_modules/core-js/internals/set-to-string-tag.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/set-to-string-tag.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,R=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),N=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag");H.exports=function(L,Y,ee){L&&!R(L=ee?L:L.prototype,N)&&U(L,N,{configurable:!0,value:Y})}},"./node_modules/core-js/internals/shared-key.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/shared-key.js ***!
                  \******************************************************/function(H,G,D){var U=D(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),R=D(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),T=U("keys");H.exports=function(N){return T[N]||(T[N]=R(N))}},"./node_modules/core-js/internals/shared-store.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/shared-store.js ***!
                  \********************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/set-global */
"./node_modules/core-js/internals/set-global.js"),T="__core-js_shared__",N=U[T]||R(T,{});H.exports=N},"./node_modules/core-js/internals/shared.js":
/*!**************************************************!*\
                  !*** ./node_modules/core-js/internals/shared.js ***!
                  \**************************************************/function(H,G,D){var U=D(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),R=D(
/*! ../internals/shared-store */
"./node_modules/core-js/internals/shared-store.js");(H.exports=function(T,N){return R[T]||(R[T]=void 0!==N?N:{})})("versions",[]).push({version:"3.16.0",mode:U?"pure":"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":
/*!**************************************************************!*\
                  !*** ./node_modules/core-js/internals/string-html-forced.js ***!
                  \**************************************************************/function(H,G,D){var U=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js");H.exports=function(R){return U(function(){var T=""[R]('"');return T!==T.toLowerCase()||T.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/internals/string-multibyte.js ***!
                  \************************************************************/function(H,G,D){var U=D(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),R=D(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),T=D(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),N=function(L){return function(Y,ee){var Te,ge,te=R(T(Y)),pe=U(ee),we=te.length;return pe<0||pe>=we?L?"":void 0:(Te=te.charCodeAt(pe))<55296||Te>56319||pe+1===we||(ge=te.charCodeAt(pe+1))<56320||ge>57343?L?te.charAt(pe):Te:L?te.slice(pe,pe+2):ge-56320+(Te-55296<<10)+65536}};H.exports={codeAt:N(!1),charAt:N(!0)}},"./node_modules/core-js/internals/string-trim.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/string-trim.js ***!
                  \*******************************************************/function(H,G,D){var U=D(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js"),R=D(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),N="["+D(
/*! ../internals/whitespaces */
"./node_modules/core-js/internals/whitespaces.js")+"]",L=RegExp("^"+N+N+"*"),Y=RegExp(N+N+"*$"),ee=function(te){return function(pe){var we=R(U(pe));return 1&te&&(we=we.replace(L,"")),2&te&&(we=we.replace(Y,"")),we}};H.exports={start:ee(1),end:ee(2),trim:ee(3)}},"./node_modules/core-js/internals/to-absolute-index.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/to-absolute-index.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),R=Math.max,T=Math.min;H.exports=function(N,L){var Y=U(N);return Y<0?R(Y+L,0):T(Y,L)}},"./node_modules/core-js/internals/to-indexed-object.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/to-indexed-object.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),R=D(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js");H.exports=function(T){return U(R(T))}},"./node_modules/core-js/internals/to-integer.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/internals/to-integer.js ***!
                  \******************************************************/function(H){var G=Math.ceil,D=Math.floor;H.exports=function(U){return isNaN(U=+U)?0:(U>0?D:G)(U)}},"./node_modules/core-js/internals/to-length.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/to-length.js ***!
                  \*****************************************************/function(H,G,D){var U=D(
/*! ../internals/to-integer */
"./node_modules/core-js/internals/to-integer.js"),R=Math.min;H.exports=function(T){return T>0?R(U(T),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/to-object.js ***!
                  \*****************************************************/function(H,G,D){var U=D(
/*! ../internals/require-object-coercible */
"./node_modules/core-js/internals/require-object-coercible.js");H.exports=function(R){return Object(U(R))}},"./node_modules/core-js/internals/to-primitive.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/internals/to-primitive.js ***!
                  \********************************************************/function(H,G,D){var U=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),R=D(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),T=D(
/*! ../internals/ordinary-to-primitive */
"./node_modules/core-js/internals/ordinary-to-primitive.js"),L=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toPrimitive");H.exports=function(Y,ee){if(!U(Y)||R(Y))return Y;var pe,te=Y[L];if(void 0!==te){if(void 0===ee&&(ee="default"),pe=te.call(Y,ee),!U(pe)||R(pe))return pe;throw TypeError("Can't convert object to primitive value")}return void 0===ee&&(ee="number"),T(Y,ee)}},"./node_modules/core-js/internals/to-property-key.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/internals/to-property-key.js ***!
                  \***********************************************************/function(H,G,D){var U=D(
/*! ../internals/to-primitive */
"./node_modules/core-js/internals/to-primitive.js"),R=D(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js");H.exports=function(T){var N=U(T,"string");return R(N)?N:String(N)}},"./node_modules/core-js/internals/to-string-tag-support.js":
/*!*****************************************************************!*\
                  !*** ./node_modules/core-js/internals/to-string-tag-support.js ***!
                  \*****************************************************************/function(H,G,D){var T={};T[D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js")("toStringTag")]="z",H.exports="[object z]"===String(T)},"./node_modules/core-js/internals/to-string.js":
/*!*****************************************************!*\
                  !*** ./node_modules/core-js/internals/to-string.js ***!
                  \*****************************************************/function(H,G,D){var U=D(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js");H.exports=function(R){if(U(R))throw TypeError("Cannot convert a Symbol value to a string");return String(R)}},"./node_modules/core-js/internals/uid.js":
/*!***********************************************!*\
                  !*** ./node_modules/core-js/internals/uid.js ***!
                  \***********************************************/function(H){var G=0,D=Math.random();H.exports=function(U){return"Symbol("+String(void 0===U?"":U)+")_"+(++G+D).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/use-symbol-as-uid.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js");H.exports=U&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":
/*!*********************************************************************!*\
                  !*** ./node_modules/core-js/internals/well-known-symbol-wrapped.js ***!
                  \*********************************************************************/function(H,G,D){var U=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js");G.f=U},"./node_modules/core-js/internals/well-known-symbol.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/internals/well-known-symbol.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),T=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),N=D(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),L=D(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js"),Y=D(
/*! ../internals/use-symbol-as-uid */
"./node_modules/core-js/internals/use-symbol-as-uid.js"),ee=R("wks"),te=U.Symbol,pe=Y?te:te&&te.withoutSetter||N;H.exports=function(we){return(!T(ee,we)||!(L||"string"==typeof ee[we]))&&(ee[we]=L&&T(te,we)?te[we]:pe("Symbol."+we)),ee[we]}},"./node_modules/core-js/internals/whitespaces.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/internals/whitespaces.js ***!
                  \*******************************************************/function(H){H.exports="\t\n\v\f\r \xa0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},"./node_modules/core-js/modules/es.array.concat.js":
/*!*********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.concat.js ***!
                  \*********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),T=D(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),N=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),L=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),Y=D(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),ee=D(
/*! ../internals/create-property */
"./node_modules/core-js/internals/create-property.js"),te=D(
/*! ../internals/array-species-create */
"./node_modules/core-js/internals/array-species-create.js"),pe=D(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js"),we=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),Te=D(
/*! ../internals/engine-v8-version */
"./node_modules/core-js/internals/engine-v8-version.js"),ge=we("isConcatSpreadable"),Ce=9007199254740991,Oe="Maximum allowed index exceeded",je=Te>=51||!R(function(){var me=[];return me[ge]=!1,me.concat()[0]!==me}),Ue=pe("concat"),Le=function(me){if(!N(me))return!1;var l=me[ge];return void 0!==l?!!l:T(me)};U({target:"Array",proto:!0,forced:!je||!Ue},{concat:function(l){var $e,Ct,Ke,Wt,mr,Me=L(this),Ze=te(Me,0),ut=0;for($e=-1,Ke=arguments.length;$e<Ke;$e++)if(Le(mr=-1===$e?Me:arguments[$e])){if(ut+(Wt=Y(mr.length))>Ce)throw TypeError(Oe);for(Ct=0;Ct<Wt;Ct++,ut++)Ct in mr&&ee(Ze,ut,mr[Ct])}else{if(ut>=Ce)throw TypeError(Oe);ee(Ze,ut++,mr)}return Ze.length=ut,Ze}})},"./node_modules/core-js/modules/es.array.iterator.js":
/*!***********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.iterator.js ***!
                  \***********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),R=D(
/*! ../internals/add-to-unscopables */
"./node_modules/core-js/internals/add-to-unscopables.js"),T=D(
/*! ../internals/iterators */
"./node_modules/core-js/internals/iterators.js"),N=D(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),L=D(
/*! ../internals/define-iterator */
"./node_modules/core-js/internals/define-iterator.js"),Y="Array Iterator",ee=N.set,te=N.getterFor(Y);H.exports=L(Array,"Array",function(pe,we){ee(this,{type:Y,target:U(pe),index:0,kind:we})},function(){var pe=te(this),we=pe.target,Te=pe.kind,ge=pe.index++;return!we||ge>=we.length?(pe.target=void 0,{value:void 0,done:!0}):"keys"==Te?{value:ge,done:!1}:"values"==Te?{value:we[ge],done:!1}:{value:[ge,we[ge]],done:!1}},"values"),T.Arguments=T.Array,R("keys"),R("values"),R("entries")},"./node_modules/core-js/modules/es.array.join.js":
/*!*******************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.join.js ***!
                  \*******************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/indexed-object */
"./node_modules/core-js/internals/indexed-object.js"),T=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),N=D(
/*! ../internals/array-method-is-strict */
"./node_modules/core-js/internals/array-method-is-strict.js"),L=[].join,Y=R!=Object,ee=N("join",",");U({target:"Array",proto:!0,forced:Y||!ee},{join:function(pe){return L.call(T(this),void 0===pe?",":pe)}})},"./node_modules/core-js/modules/es.array.map.js":
/*!******************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.map.js ***!
                  \******************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").map;U({target:"Array",proto:!0,forced:!D(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js")("map")},{map:function(Y){return R(this,Y,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.array.slice.js ***!
                  \********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),T=D(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),N=D(
/*! ../internals/to-absolute-index */
"./node_modules/core-js/internals/to-absolute-index.js"),L=D(
/*! ../internals/to-length */
"./node_modules/core-js/internals/to-length.js"),Y=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),ee=D(
/*! ../internals/create-property */
"./node_modules/core-js/internals/create-property.js"),te=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),we=D(
/*! ../internals/array-method-has-species-support */
"./node_modules/core-js/internals/array-method-has-species-support.js")("slice"),Te=te("species"),ge=[].slice,Ce=Math.max;U({target:"Array",proto:!0,forced:!we},{slice:function(je,Ue){var Me,Ze,ut,Le=Y(this),ke=L(Le.length),me=N(je,ke),l=N(void 0===Ue?ke:Ue,ke);if(T(Le)&&("function"!=typeof(Me=Le.constructor)||Me!==Array&&!T(Me.prototype)?R(Me)&&null===(Me=Me[Te])&&(Me=void 0):Me=void 0,Me===Array||void 0===Me))return ge.call(Le,me,l);for(Ze=new(void 0===Me?Array:Me)(Ce(l-me,0)),ut=0;me<l;me++,ut++)me in Le&&ee(Ze,ut,Le[me]);return Ze.length=ut,Ze}})},"./node_modules/core-js/modules/es.function.name.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.function.name.js ***!
                  \**********************************************************/function(H,G,D){var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,T=Function.prototype,N=T.toString,L=/^\s*function ([^ (]*)/,Y="name";U&&!(Y in T)&&R(T,Y,{configurable:!0,get:function(){try{return N.call(this).match(L)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":
/*!***************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.number.constructor.js ***!
                  \***************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),R=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),T=D(
/*! ../internals/is-forced */
"./node_modules/core-js/internals/is-forced.js"),N=D(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),L=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),Y=D(
/*! ../internals/classof-raw */
"./node_modules/core-js/internals/classof-raw.js"),ee=D(
/*! ../internals/inherit-if-required */
"./node_modules/core-js/internals/inherit-if-required.js"),te=D(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),pe=D(
/*! ../internals/to-primitive */
"./node_modules/core-js/internals/to-primitive.js"),we=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),Te=D(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),ge=D(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js").f,Ce=D(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,Oe=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,je=D(
/*! ../internals/string-trim */
"./node_modules/core-js/internals/string-trim.js").trim,Ue="Number",Le=R[Ue],ke=Le.prototype,me=Y(Te(ke))==Ue,l=function(Ct){if(te(Ct))throw TypeError("Cannot convert a Symbol value to a number");var Wt,mr,nr,Kr,Pn,Kn,Mo,mo,Ke=pe(Ct,"number");if("string"==typeof Ke&&Ke.length>2)if(43===(Wt=(Ke=je(Ke)).charCodeAt(0))||45===Wt){if(88===(mr=Ke.charCodeAt(2))||120===mr)return NaN}else if(48===Wt){switch(Ke.charCodeAt(1)){case 66:case 98:nr=2,Kr=49;break;case 79:case 111:nr=8,Kr=55;break;default:return+Ke}for(Kn=(Pn=Ke.slice(2)).length,Mo=0;Mo<Kn;Mo++)if((mo=Pn.charCodeAt(Mo))<48||mo>Kr)return NaN;return parseInt(Pn,nr)}return+Ke};if(T(Ue,!Le(" 0o1")||!Le("0b1")||Le("+0x1"))){for(var $e,Me=function(Ke){var Wt=arguments.length<1?0:Ke,mr=this;return mr instanceof Me&&(me?we(function(){ke.valueOf.call(mr)}):Y(mr)!=Ue)?ee(new Le(l(Wt)),mr,Me):l(Wt)},Ze=U?ge(Le):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),ut=0;Ze.length>ut;ut++)L(Le,$e=Ze[ut])&&!L(Me,$e)&&Oe(Me,$e,Ce(Le,$e));Me.prototype=ke,ke.constructor=Me,N(R,Ue,Me)}},"./node_modules/core-js/modules/es.object.assign.js":
/*!**********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.object.assign.js ***!
                  \**********************************************************/function(H,G,D){var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/object-assign */
"./node_modules/core-js/internals/object-assign.js");U({target:"Object",stat:!0,forced:Object.assign!==R},{assign:R})},"./node_modules/core-js/modules/es.object.keys.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.object.keys.js ***!
                  \********************************************************/function(H,G,D){var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),T=D(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js");U({target:"Object",stat:!0,forced:D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js")(function(){T(1)})},{keys:function(ee){return T(R(ee))}})},"./node_modules/core-js/modules/es.object.to-string.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.object.to-string.js ***!
                  \*************************************************************/function(H,G,D){var U=D(
/*! ../internals/to-string-tag-support */
"./node_modules/core-js/internals/to-string-tag-support.js"),R=D(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),T=D(
/*! ../internals/object-to-string */
"./node_modules/core-js/internals/object-to-string.js");U||R(Object.prototype,"toString",T,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":
/*!*************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.regexp.to-string.js ***!
                  \*************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),R=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),T=D(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),N=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),L=D(
/*! ../internals/regexp-flags */
"./node_modules/core-js/internals/regexp-flags.js"),Y="toString",ee=RegExp.prototype,te=ee[Y];(N(function(){return"/a/b"!=te.call({source:"a",flags:"b"})})||te.name!=Y)&&U(RegExp.prototype,Y,function(){var ge=R(this),Ce=T(ge.source),Oe=ge.flags;return"/"+Ce+"/"+T(void 0===Oe&&ge instanceof RegExp&&!("flags"in ee)?L.call(ge):Oe)},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.string.iterator.js ***!
                  \************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/string-multibyte */
"./node_modules/core-js/internals/string-multibyte.js").charAt,R=D(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),T=D(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),N=D(
/*! ../internals/define-iterator */
"./node_modules/core-js/internals/define-iterator.js"),L="String Iterator",Y=T.set,ee=T.getterFor(L);N(String,"String",function(te){Y(this,{type:L,string:R(te),index:0})},function(){var ge,pe=ee(this),we=pe.string,Te=pe.index;return Te>=we.length?{value:void 0,done:!0}:(ge=U(we,Te),pe.index+=ge.length,{value:ge,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":
/*!********************************************************!*\
                  !*** ./node_modules/core-js/modules/es.string.link.js ***!
                  \********************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/create-html */
"./node_modules/core-js/internals/create-html.js");U({target:"String",proto:!0,forced:D(
/*! ../internals/string-html-forced */
"./node_modules/core-js/internals/string-html-forced.js")("link")},{link:function(L){return R(this,"a","href",L)}})},"./node_modules/core-js/modules/es.symbol.description.js":
/*!***************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.symbol.description.js ***!
                  \***************************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),T=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),N=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),L=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),Y=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js").f,ee=D(
/*! ../internals/copy-constructor-properties */
"./node_modules/core-js/internals/copy-constructor-properties.js"),te=T.Symbol;if(R&&"function"==typeof te&&(!("description"in te.prototype)||void 0!==te().description)){var pe={},we=function(){var Ue=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),Le=this instanceof we?new te(Ue):void 0===Ue?te():te(Ue);return""===Ue&&(pe[Le]=!0),Le};ee(we,te);var Te=we.prototype=te.prototype;Te.constructor=we;var ge=Te.toString,Ce="Symbol(test)"==String(te("test")),Oe=/^Symbol\((.*)\)[^)]+$/;Y(Te,"description",{configurable:!0,get:function(){var Ue=L(this)?this.valueOf():this,Le=ge.call(Ue);if(N(pe,Ue))return"";var ke=Ce?Le.slice(7,-1):Le.replace(Oe,"$1");return""===ke?void 0:ke}}),U({global:!0,forced:!0},{Symbol:we})}},"./node_modules/core-js/modules/es.symbol.iterator.js":
/*!************************************************************!*\
                  !*** ./node_modules/core-js/modules/es.symbol.iterator.js ***!
                  \************************************************************/function(H,G,D){D(
/*! ../internals/define-well-known-symbol */
"./node_modules/core-js/internals/define-well-known-symbol.js")("iterator")},"./node_modules/core-js/modules/es.symbol.js":
/*!***************************************************!*\
                  !*** ./node_modules/core-js/modules/es.symbol.js ***!
                  \***************************************************/function(H,G,D){"use strict";var U=D(
/*! ../internals/export */
"./node_modules/core-js/internals/export.js"),R=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),T=D(
/*! ../internals/get-built-in */
"./node_modules/core-js/internals/get-built-in.js"),N=D(
/*! ../internals/is-pure */
"./node_modules/core-js/internals/is-pure.js"),L=D(
/*! ../internals/descriptors */
"./node_modules/core-js/internals/descriptors.js"),Y=D(
/*! ../internals/native-symbol */
"./node_modules/core-js/internals/native-symbol.js"),ee=D(
/*! ../internals/fails */
"./node_modules/core-js/internals/fails.js"),te=D(
/*! ../internals/has */
"./node_modules/core-js/internals/has.js"),pe=D(
/*! ../internals/is-array */
"./node_modules/core-js/internals/is-array.js"),we=D(
/*! ../internals/is-object */
"./node_modules/core-js/internals/is-object.js"),Te=D(
/*! ../internals/is-symbol */
"./node_modules/core-js/internals/is-symbol.js"),ge=D(
/*! ../internals/an-object */
"./node_modules/core-js/internals/an-object.js"),Ce=D(
/*! ../internals/to-object */
"./node_modules/core-js/internals/to-object.js"),Oe=D(
/*! ../internals/to-indexed-object */
"./node_modules/core-js/internals/to-indexed-object.js"),je=D(
/*! ../internals/to-property-key */
"./node_modules/core-js/internals/to-property-key.js"),Ue=D(
/*! ../internals/to-string */
"./node_modules/core-js/internals/to-string.js"),Le=D(
/*! ../internals/create-property-descriptor */
"./node_modules/core-js/internals/create-property-descriptor.js"),ke=D(
/*! ../internals/object-create */
"./node_modules/core-js/internals/object-create.js"),me=D(
/*! ../internals/object-keys */
"./node_modules/core-js/internals/object-keys.js"),l=D(
/*! ../internals/object-get-own-property-names */
"./node_modules/core-js/internals/object-get-own-property-names.js"),Me=D(
/*! ../internals/object-get-own-property-names-external */
"./node_modules/core-js/internals/object-get-own-property-names-external.js"),Ze=D(
/*! ../internals/object-get-own-property-symbols */
"./node_modules/core-js/internals/object-get-own-property-symbols.js"),ut=D(
/*! ../internals/object-get-own-property-descriptor */
"./node_modules/core-js/internals/object-get-own-property-descriptor.js"),$e=D(
/*! ../internals/object-define-property */
"./node_modules/core-js/internals/object-define-property.js"),Ct=D(
/*! ../internals/object-property-is-enumerable */
"./node_modules/core-js/internals/object-property-is-enumerable.js"),Ke=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),Wt=D(
/*! ../internals/redefine */
"./node_modules/core-js/internals/redefine.js"),mr=D(
/*! ../internals/shared */
"./node_modules/core-js/internals/shared.js"),nr=D(
/*! ../internals/shared-key */
"./node_modules/core-js/internals/shared-key.js"),Kr=D(
/*! ../internals/hidden-keys */
"./node_modules/core-js/internals/hidden-keys.js"),Pn=D(
/*! ../internals/uid */
"./node_modules/core-js/internals/uid.js"),Kn=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),Mo=D(
/*! ../internals/well-known-symbol-wrapped */
"./node_modules/core-js/internals/well-known-symbol-wrapped.js"),mo=D(
/*! ../internals/define-well-known-symbol */
"./node_modules/core-js/internals/define-well-known-symbol.js"),No=D(
/*! ../internals/set-to-string-tag */
"./node_modules/core-js/internals/set-to-string-tag.js"),Di=D(
/*! ../internals/internal-state */
"./node_modules/core-js/internals/internal-state.js"),ci=D(
/*! ../internals/array-iteration */
"./node_modules/core-js/internals/array-iteration.js").forEach,zn=nr("hidden"),Wn="Symbol",an="prototype",lr=Kn("toPrimitive"),Pr=Di.set,Mn=Di.getterFor(Wn),dn=Object[an],sn=R.Symbol,kn=T("JSON","stringify"),xo=ut.f,Vo=$e.f,aa=Me.f,Fa=Ct.f,Qr=mr("symbols"),ze=mr("op-symbols"),Xe=mr("string-to-symbol-registry"),at=mr("symbol-to-string-registry"),gr=mr("wks"),Pt=R.QObject,mt=!Pt||!Pt[an]||!Pt[an].findChild,Zt=L&&ee(function(){return 7!=ke(Vo({},"a",{get:function(){return Vo(this,"a",{value:7}).a}})).a})?function(Fr,tr,wt){var St=xo(dn,tr);St&&delete dn[tr],Vo(Fr,tr,wt),St&&Fr!==dn&&Vo(dn,tr,St)}:Vo,ln=function(Fr,tr){var wt=Qr[Fr]=ke(sn[an]);return Pr(wt,{type:Wn,tag:Fr,description:tr}),L||(wt.description=tr),wt},no=function(tr,wt,St){tr===dn&&no(ze,wt,St),ge(tr);var vr=je(wt);return ge(St),te(Qr,vr)?(St.enumerable?(te(tr,zn)&&tr[zn][vr]&&(tr[zn][vr]=!1),St=ke(St,{enumerable:Le(0,!1)})):(te(tr,zn)||Vo(tr,zn,Le(1,{})),tr[zn][vr]=!0),Zt(tr,vr,St)):Vo(tr,vr,St)},oo=function(tr,wt){ge(tr);var St=Oe(wt),vr=me(St).concat(jt(St));return ci(vr,function(fn){(!L||li.call(St,fn))&&no(tr,fn,St[fn])}),tr},li=function(tr){var wt=je(tr),St=Fa.call(this,wt);return!(this===dn&&te(Qr,wt)&&!te(ze,wt))&&(!(St||!te(this,wt)||!te(Qr,wt)||te(this,zn)&&this[zn][wt])||St)},ts=function(tr,wt){var St=Oe(tr),vr=je(wt);if(St!==dn||!te(Qr,vr)||te(ze,vr)){var fn=xo(St,vr);return fn&&te(Qr,vr)&&!(te(St,zn)&&St[zn][vr])&&(fn.enumerable=!0),fn}},Nt=function(tr){var wt=aa(Oe(tr)),St=[];return ci(wt,function(vr){!te(Qr,vr)&&!te(Kr,vr)&&St.push(vr)}),St},jt=function(tr){var wt=tr===dn,St=aa(wt?ze:Oe(tr)),vr=[];return ci(St,function(fn){te(Qr,fn)&&(!wt||te(dn,fn))&&vr.push(Qr[fn])}),vr};Y||(sn=function(){if(this instanceof sn)throw TypeError("Symbol is not a constructor");var tr=arguments.length&&void 0!==arguments[0]?Ue(arguments[0]):void 0,wt=Pn(tr),St=function(vr){this===dn&&St.call(ze,vr),te(this,zn)&&te(this[zn],wt)&&(this[zn][wt]=!1),Zt(this,wt,Le(1,vr))};return L&&mt&&Zt(dn,wt,{configurable:!0,set:St}),ln(wt,tr)},Wt(sn[an],"toString",function(){return Mn(this).tag}),Wt(sn,"withoutSetter",function(Fr){return ln(Pn(Fr),Fr)}),Ct.f=li,$e.f=no,ut.f=ts,l.f=Me.f=Nt,Ze.f=jt,Mo.f=function(Fr){return ln(Kn(Fr),Fr)},L&&(Vo(sn[an],"description",{configurable:!0,get:function(){return Mn(this).description}}),N||Wt(dn,"propertyIsEnumerable",li,{unsafe:!0}))),U({global:!0,wrap:!0,forced:!Y,sham:!Y},{Symbol:sn}),ci(me(gr),function(Fr){mo(Fr)}),U({target:Wn,stat:!0,forced:!Y},{for:function(Fr){var tr=Ue(Fr);if(te(Xe,tr))return Xe[tr];var wt=sn(tr);return Xe[tr]=wt,at[wt]=tr,wt},keyFor:function(tr){if(!Te(tr))throw TypeError(tr+" is not a symbol");if(te(at,tr))return at[tr]},useSetter:function(){mt=!0},useSimple:function(){mt=!1}}),U({target:"Object",stat:!0,forced:!Y,sham:!L},{create:function(tr,wt){return void 0===wt?ke(tr):oo(ke(tr),wt)},defineProperty:no,defineProperties:oo,getOwnPropertyDescriptor:ts}),U({target:"Object",stat:!0,forced:!Y},{getOwnPropertyNames:Nt,getOwnPropertySymbols:jt}),U({target:"Object",stat:!0,forced:ee(function(){Ze.f(1)})},{getOwnPropertySymbols:function(tr){return Ze.f(Ce(tr))}}),kn&&U({target:"JSON",stat:!0,forced:!Y||ee(function(){var Fr=sn();return"[null]"!=kn([Fr])||"{}"!=kn({a:Fr})||"{}"!=kn(Object(Fr))})},{stringify:function(tr,wt,St){for(var Ko,vr=[tr],fn=1;arguments.length>fn;)vr.push(arguments[fn++]);if(Ko=wt,(we(wt)||void 0!==tr)&&!Te(tr))return pe(wt)||(wt=function(Ro,Ln){if("function"==typeof Ko&&(Ln=Ko.call(this,Ro,Ln)),!Te(Ln))return Ln}),vr[1]=wt,kn.apply(null,vr)}}),sn[an][lr]||Ke(sn[an],lr,sn[an].valueOf),No(sn,Wn),Kr[zn]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":
/*!**********************************************************************!*\
                  !*** ./node_modules/core-js/modules/web.dom-collections.for-each.js ***!
                  \**********************************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/dom-iterables */
"./node_modules/core-js/internals/dom-iterables.js"),T=D(
/*! ../internals/array-for-each */
"./node_modules/core-js/internals/array-for-each.js"),N=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js");for(var L in R){var Y=U[L],ee=Y&&Y.prototype;if(ee&&ee.forEach!==T)try{N(ee,"forEach",T)}catch{ee.forEach=T}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":
/*!**********************************************************************!*\
                  !*** ./node_modules/core-js/modules/web.dom-collections.iterator.js ***!
                  \**********************************************************************/function(H,G,D){var U=D(
/*! ../internals/global */
"./node_modules/core-js/internals/global.js"),R=D(
/*! ../internals/dom-iterables */
"./node_modules/core-js/internals/dom-iterables.js"),T=D(
/*! ../modules/es.array.iterator */
"./node_modules/core-js/modules/es.array.iterator.js"),N=D(
/*! ../internals/create-non-enumerable-property */
"./node_modules/core-js/internals/create-non-enumerable-property.js"),L=D(
/*! ../internals/well-known-symbol */
"./node_modules/core-js/internals/well-known-symbol.js"),Y=L("iterator"),ee=L("toStringTag"),te=T.values;for(var pe in R){var we=U[pe],Te=we&&we.prototype;if(Te){if(Te[Y]!==te)try{N(Te,Y,te)}catch{Te[Y]=te}if(Te[ee]||N(Te,ee,pe),R[pe])for(var ge in T)if(Te[ge]!==T[ge])try{N(Te,ge,T[ge])}catch{Te[ge]=T[ge]}}}},"./node_modules/es6-promise/dist/es6-promise.js":
/*!******************************************************!*\
                  !*** ./node_modules/es6-promise/dist/es6-promise.js ***!
                  \******************************************************/function(H){var D;D=function(){"use strict";function D(Pt){return"function"==typeof Pt}var R=Array.isArray?Array.isArray:function(Pt){return"[object Array]"===Object.prototype.toString.call(Pt)},T=0,N=void 0,L=void 0,Y=function(mt,Zt){me[T]=mt,me[T+1]=Zt,2===(T+=2)&&(L?L(l):Ze())};var pe=typeof window<"u"?window:void 0,we=pe||{},Te=we.MutationObserver||we.WebKitMutationObserver,ge=typeof self>"u"&&typeof process<"u"&&"[object process]"==={}.toString.call(process),Ce=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ke(){var Pt=setTimeout;return function(){return Pt(l,1)}}var me=new Array(1e3);function l(){for(var Pt=0;Pt<T;Pt+=2)(0,me[Pt])(me[Pt+1]),me[Pt]=void 0,me[Pt+1]=void 0;T=0}var Ze=void 0;function ut(Pt,mt){var Zt=this,ln=new this.constructor(Ke);void 0===ln[Ct]&&kn(ln);var no=Zt._state;if(no){var oo=arguments[no-1];Y(function(){return Pr(no,ln,oo,Zt._result)})}else an(Zt,ln,Pt,mt);return ln}function $e(Pt){if(Pt&&"object"==typeof Pt&&Pt.constructor===this)return Pt;var Zt=new this(Ke);return Di(Zt,Pt),Zt}Ze=ge?function Oe(){return function(){return process.nextTick(l)}}():Te?function Ue(){var Pt=0,mt=new Te(l),Zt=document.createTextNode("");return mt.observe(Zt,{characterData:!0}),function(){Zt.data=Pt=++Pt%2}}():Ce?function Le(){var Pt=new MessageChannel;return Pt.port1.onmessage=l,function(){return Pt.port2.postMessage(0)}}():void 0===pe?function Me(){try{var Pt=Function("return this")().require("vertx");return N=Pt.runOnLoop||Pt.runOnContext,function je(){return typeof N<"u"?function(){N(l)}:ke()}()}catch{return ke()}}():ke();var Ct=Math.random().toString(36).substring(2);function Ke(){}var Wt=void 0,mr=1,nr=2;function No(Pt,mt,Zt){mt.constructor===Pt.constructor&&Zt===ut&&mt.constructor.resolve===$e?function mo(Pt,mt){mt._state===mr?zn(Pt,mt._result):mt._state===nr?Wn(Pt,mt._result):an(mt,void 0,function(Zt){return Di(Pt,Zt)},function(Zt){return Wn(Pt,Zt)})}(Pt,mt):void 0===Zt?zn(Pt,mt):D(Zt)?function Mo(Pt,mt,Zt){Y(function(ln){var no=!1,oo=function Kn(Pt,mt,Zt,ln){try{Pt.call(mt,Zt,ln)}catch(no){return no}}(Zt,mt,function(Ki){no||(no=!0,mt!==Ki?Di(ln,Ki):zn(ln,Ki))},function(Ki){no||(no=!0,Wn(ln,Ki))});!no&&oo&&(no=!0,Wn(ln,oo))},Pt)}(Pt,mt,Zt):zn(Pt,mt)}function Di(Pt,mt){if(Pt===mt)Wn(Pt,function Kr(){return new TypeError("You cannot resolve a promise with itself")}());else if(function G(Pt){var mt=typeof Pt;return null!==Pt&&("object"===mt||"function"===mt)}(mt)){var Zt=void 0;try{Zt=mt.then}catch(ln){return void Wn(Pt,ln)}No(Pt,mt,Zt)}else zn(Pt,mt)}function ci(Pt){Pt._onerror&&Pt._onerror(Pt._result),lr(Pt)}function zn(Pt,mt){Pt._state===Wt&&(Pt._result=mt,Pt._state=mr,0!==Pt._subscribers.length&&Y(lr,Pt))}function Wn(Pt,mt){Pt._state===Wt&&(Pt._state=nr,Pt._result=mt,Y(ci,Pt))}function an(Pt,mt,Zt,ln){var no=Pt._subscribers,oo=no.length;Pt._onerror=null,no[oo]=mt,no[oo+mr]=Zt,no[oo+nr]=ln,0===oo&&Pt._state&&Y(lr,Pt)}function lr(Pt){var mt=Pt._subscribers,Zt=Pt._state;if(0!==mt.length){for(var ln=void 0,no=void 0,oo=Pt._result,Ki=0;Ki<mt.length;Ki+=3)no=mt[Ki+Zt],(ln=mt[Ki])?Pr(Zt,ln,no,oo):no(oo);Pt._subscribers.length=0}}function Pr(Pt,mt,Zt,ln){var no=D(Zt),oo=void 0,Ki=void 0,li=!0;if(no){try{oo=Zt(ln)}catch(ts){li=!1,Ki=ts}if(mt===oo)return void Wn(mt,function Pn(){return new TypeError("A promises callback cannot return that same promise.")}())}else oo=ln;mt._state!==Wt||(no&&li?Di(mt,oo):!1===li?Wn(mt,Ki):Pt===mr?zn(mt,oo):Pt===nr&&Wn(mt,oo))}var dn=0;function kn(Pt){Pt[Ct]=dn++,Pt._state=void 0,Pt._result=void 0,Pt._subscribers=[]}var Vo=function(){function Pt(mt,Zt){this._instanceConstructor=mt,this.promise=new mt(Ke),this.promise[Ct]||kn(this.promise),R(Zt)?(this.length=Zt.length,this._remaining=Zt.length,this._result=new Array(this.length),0===this.length?zn(this.promise,this._result):(this.length=this.length||0,this._enumerate(Zt),0===this._remaining&&zn(this.promise,this._result))):Wn(this.promise,function xo(){return new Error("Array Methods must be provided an Array")}())}return Pt.prototype._enumerate=function(Zt){for(var ln=0;this._state===Wt&&ln<Zt.length;ln++)this._eachEntry(Zt[ln],ln)},Pt.prototype._eachEntry=function(Zt,ln){var no=this._instanceConstructor,oo=no.resolve;if(oo===$e){var Ki=void 0,li=void 0,ts=!1;try{Ki=Zt.then}catch(jt){ts=!0,li=jt}if(Ki===ut&&Zt._state!==Wt)this._settledAt(Zt._state,ln,Zt._result);else if("function"!=typeof Ki)this._remaining--,this._result[ln]=Zt;else if(no===at){var Nt=new no(Ke);ts?Wn(Nt,li):No(Nt,Zt,Ki),this._willSettleAt(Nt,ln)}else this._willSettleAt(new no(function(jt){return jt(Zt)}),ln)}else this._willSettleAt(oo(Zt),ln)},Pt.prototype._settledAt=function(Zt,ln,no){var oo=this.promise;oo._state===Wt&&(this._remaining--,Zt===nr?Wn(oo,no):this._result[ln]=no),0===this._remaining&&zn(oo,this._result)},Pt.prototype._willSettleAt=function(Zt,ln){var no=this;an(Zt,void 0,function(oo){return no._settledAt(mr,ln,oo)},function(oo){return no._settledAt(nr,ln,oo)})},Pt}();var at=function(){function Pt(mt){this[Ct]=function sn(){return dn++}(),this._result=this._state=void 0,this._subscribers=[],Ke!==mt&&("function"!=typeof mt&&function ze(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Pt?function Mn(Pt,mt){try{mt(function(ln){Di(Pt,ln)},function(ln){Wn(Pt,ln)})}catch(Zt){Wn(Pt,Zt)}}(this,mt):function Xe(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return Pt.prototype.catch=function(Zt){return this.then(null,Zt)},Pt.prototype.finally=function(Zt){var no=this.constructor;return D(Zt)?this.then(function(oo){return no.resolve(Zt()).then(function(){return oo})},function(oo){return no.resolve(Zt()).then(function(){throw oo})}):this.then(Zt,Zt)},Pt}();return at.prototype.then=ut,at.all=function aa(Pt){return new Vo(this,Pt).promise},at.race=function Fa(Pt){var mt=this;return R(Pt)?new mt(function(Zt,ln){for(var no=Pt.length,oo=0;oo<no;oo++)mt.resolve(Pt[oo]).then(Zt,ln)}):new mt(function(Zt,ln){return ln(new TypeError("You must pass an array to race."))})},at.resolve=$e,at.reject=function Qr(Pt){var Zt=new this(Ke);return Wn(Zt,Pt),Zt},at._setScheduler=function ee(Pt){L=Pt},at._setAsap=function te(Pt){Y=Pt},at._asap=Y,at.polyfill=function gr(){var Pt=void 0;if(typeof global<"u")Pt=global;else if(typeof self<"u")Pt=self;else try{Pt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var mt=Pt.Promise;if(mt){var Zt=null;try{Zt=Object.prototype.toString.call(mt.resolve())}catch{}if("[object Promise]"===Zt&&!mt.cast)return}Pt.Promise=at},at.Promise=at,at},H.exports=D()},html2canvas:
/*!******************************!*\
                  !*** external "html2canvas" ***!
                  \******************************/function(H){"use strict";H.exports=S},jspdf:
/*!************************!*\
                  !*** external "jspdf" ***!
                  \************************/function(H){"use strict";H.exports=O}},X={};function x(H){var G=X[H];if(void 0!==G)return G.exports;var D=X[H]={exports:{}};return m[H].call(D.exports,D,D.exports,x),D.exports}x.n=function(H){var G=H&&H.__esModule?function(){return H.default}:function(){return H};return x.d(G,{a:G}),G},x.d=function(H,G){for(var D in G)x.o(G,D)&&!x.o(H,D)&&Object.defineProperty(H,D,{enumerable:!0,get:G[D]})},x.o=function(H,G){return Object.prototype.hasOwnProperty.call(H,G)},x.r=function(H){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var z={};return function(){"use strict";x.r(z);var H=x(
/*! ./worker.js */
"./src/worker.js"),R=(x(
/*! ./plugin/jspdf-plugin.js */
"./src/plugin/jspdf-plugin.js"),x(
/*! ./plugin/pagebreaks.js */
"./src/plugin/pagebreaks.js"),x(
/*! ./plugin/hyperlinks.js */
"./src/plugin/hyperlinks.js"),function T(N,L){var Y=new T.Worker(L);return N?Y.from(N).save():Y});R.Worker=H.default,z.default=R}(),z.default}())},59969:(oe,ue,re)=>{"use strict";function O(Q){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(j){return typeof j}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j})(Q)}re.r(ue),re.d(ue,{AcroForm:()=>Br,AcroFormAppearance:()=>Ve,AcroFormButton:()=>Tc,AcroFormCheckBox:()=>pd,AcroFormChoiceField:()=>Zc,AcroFormComboBox:()=>dd,AcroFormEditBox:()=>Fs,AcroFormListBox:()=>ud,AcroFormPasswordField:()=>ic,AcroFormPushButton:()=>tu,AcroFormRadioButton:()=>Td,AcroFormTextField:()=>Nl,GState:()=>Ri,ShadingPattern:()=>Ra,TilingPattern:()=>es,default:()=>Xi,jsPDF:()=>Xi});var X=Uint8Array,x=Uint16Array,z=Int32Array,H=new X([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),G=new X([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),D=new X([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U=function(Q,j){for(var J=new x(31),se=0;se<31;++se)J[se]=j+=1<<Q[se-1];var xe=new z(J[30]);for(se=1;se<30;++se)for(var fe=J[se];fe<J[se+1];++fe)xe[fe]=fe-J[se]<<5|se;return{b:J,r:xe}},R=U(H,2),T=R.b,N=R.r;T[28]=258,N[258]=28;for(var L=U(G,0),Y=L.b,ee=L.r,te=new x(32768),pe=0;pe<32768;++pe){var we=(43690&pe)>>1|(21845&pe)<<1;te[pe]=((65280&(we=(61680&(we=(52428&we)>>2|(13107&we)<<2))>>4|(3855&we)<<4))>>8|(255&we)<<8)>>1}var Te=function(Q,j,J){for(var se=Q.length,xe=0,fe=new x(j);xe<se;++xe)Q[xe]&&++fe[Q[xe]-1];var Ae,De=new x(j);for(xe=1;xe<j;++xe)De[xe]=De[xe-1]+fe[xe-1]<<1;if(J){Ae=new x(1<<j);var Ne=15-j;for(xe=0;xe<se;++xe)if(Q[xe])for(var tt=xe<<4|Q[xe],_t=j-Q[xe],vt=De[Q[xe]-1]++<<_t,Ht=vt|(1<<_t)-1;vt<=Ht;++vt)Ae[te[vt]>>Ne]=tt}else for(Ae=new x(se),xe=0;xe<se;++xe)Q[xe]&&(Ae[xe]=te[De[Q[xe]-1]++]>>15-Q[xe]);return Ae},ge=new X(288);for(pe=0;pe<144;++pe)ge[pe]=8;for(pe=144;pe<256;++pe)ge[pe]=9;for(pe=256;pe<280;++pe)ge[pe]=7;for(pe=280;pe<288;++pe)ge[pe]=8;var Ce=new X(32);for(pe=0;pe<32;++pe)Ce[pe]=5;var Oe=Te(ge,9,0),je=Te(ge,9,1),Ue=Te(Ce,5,0),Le=Te(Ce,5,1),ke=function(Q){for(var j=Q[0],J=1;J<Q.length;++J)Q[J]>j&&(j=Q[J]);return j},me=function(Q,j,J){var se=j/8|0;return(Q[se]|Q[se+1]<<8)>>(7&j)&J},l=function(Q,j){var J=j/8|0;return(Q[J]|Q[J+1]<<8|Q[J+2]<<16)>>(7&j)},Me=function(Q){return(Q+7)/8|0},Ze=function(Q,j,J){return(null==j||j<0)&&(j=0),(null==J||J>Q.length)&&(J=Q.length),new X(Q.subarray(j,J))},$e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ct=function(Q,j,J){var se=new Error(j||$e[Q]);if(se.code=Q,Error.captureStackTrace&&Error.captureStackTrace(se,Ct),!J)throw se;return se},Wt=function(Q,j,J){var se=j/8|0;Q[se]|=J<<=7&j,Q[se+1]|=J>>8},mr=function(Q,j,J){var se=j/8|0;Q[se]|=J<<=7&j,Q[se+1]|=J>>8,Q[se+2]|=J>>16},nr=function(Q,j){for(var J=[],se=0;se<Q.length;++se)Q[se]&&J.push({s:se,f:Q[se]});var xe=J.length,fe=J.slice();if(!xe)return{t:Di,l:0};if(1==xe){var De=new X(J[0].s+1);return De[J[0].s]=1,{t:De,l:1}}J.sort(function(Fo,gi){return Fo.f-gi.f}),J.push({s:-1,f:25001});var Ae=J[0],Ne=J[1],tt=0,_t=1,vt=2;for(J[0]={s:-1,f:Ae.f+Ne.f,l:Ae,r:Ne};_t!=xe-1;)Ae=J[J[tt].f<J[vt].f?tt++:vt++],Ne=J[tt!=_t&&J[tt].f<J[vt].f?tt++:vt++],J[_t++]={s:-1,f:Ae.f+Ne.f,l:Ae,r:Ne};var Ht=fe[0].s;for(se=1;se<xe;++se)fe[se].s>Ht&&(Ht=fe[se].s);var Qe=new x(Ht+1),Ar=Kr(J[_t-1],Qe,0);if(Ar>j){se=0;var pr=0,Sr=Ar-j,Qt=1<<Sr;for(fe.sort(function(gi,po){return Qe[po.s]-Qe[gi.s]||gi.f-po.f});se<xe;++se){var Lr=fe[se].s;if(!(Qe[Lr]>j))break;pr+=Qt-(1<<Ar-Qe[Lr]),Qe[Lr]=j}for(pr>>=Sr;pr>0;){var En=fe[se].s;Qe[En]<j?pr-=1<<j-Qe[En]++-1:++se}for(;se>=0&&pr;--se){var qn=fe[se].s;Qe[qn]==j&&(--Qe[qn],++pr)}Ar=j}return{t:new X(Qe),l:Ar}},Kr=function(Q,j,J){return-1==Q.s?Math.max(Kr(Q.l,j,J+1),Kr(Q.r,j,J+1)):j[Q.s]=J},Pn=function(Q){for(var j=Q.length;j&&!Q[--j];);for(var J=new x(++j),se=0,xe=Q[0],fe=1,De=function(Ne){J[se++]=Ne},Ae=1;Ae<=j;++Ae)if(Q[Ae]==xe&&Ae!=j)++fe;else{if(!xe&&fe>2){for(;fe>138;fe-=138)De(32754);fe>2&&(De(fe>10?fe-11<<5|28690:fe-3<<5|12305),fe=0)}else if(fe>3){for(De(xe),--fe;fe>6;fe-=6)De(8304);fe>2&&(De(fe-3<<5|8208),fe=0)}for(;fe--;)De(xe);fe=1,xe=Q[Ae]}return{c:J.subarray(0,se),n:j}},Kn=function(Q,j){for(var J=0,se=0;se<j.length;++se)J+=Q[se]*j[se];return J},Mo=function(Q,j,J){var se=J.length,xe=Me(j+2);Q[xe]=255&se,Q[xe+1]=se>>8,Q[xe+2]=255^Q[xe],Q[xe+3]=255^Q[xe+1];for(var fe=0;fe<se;++fe)Q[xe+fe+4]=J[fe];return 8*(xe+4+se)},mo=function(Q,j,J,se,xe,fe,De,Ae,Ne,tt,_t){Wt(j,_t++,J),++xe[256];for(var vt=nr(xe,15),Ht=vt.t,Qe=vt.l,Ar=nr(fe,15),pr=Ar.t,Sr=Ar.l,Qt=Pn(Ht),Lr=Qt.c,En=Qt.n,qn=Pn(pr),Fo=qn.c,gi=qn.n,po=new x(19),Jr=0;Jr<Lr.length;++Jr)++po[31&Lr[Jr]];for(Jr=0;Jr<Fo.length;++Jr)++po[31&Fo[Jr]];for(var lo=nr(po,7),zo=lo.t,cr=lo.l,hr=19;hr>4&&!zo[D[hr-1]];--hr);var So,Zo,ro,Ho,Xr=tt+5<<3,rn=Kn(xe,ge)+Kn(fe,Ce)+De,jo=Kn(xe,Ht)+Kn(fe,pr)+De+14+3*hr+Kn(po,zo)+2*po[16]+3*po[17]+7*po[18];if(Ne>=0&&Xr<=rn&&Xr<=jo)return Mo(j,_t,Q.subarray(Ne,Ne+tt));if(Wt(j,_t,1+(jo<rn)),_t+=2,jo<rn){So=Te(Ht,Qe,0),Zo=Ht,ro=Te(pr,Sr,0),Ho=pr;var Xo=Te(zo,cr,0);for(Wt(j,_t,En-257),Wt(j,_t+5,gi-1),Wt(j,_t+10,hr-4),_t+=14,Jr=0;Jr<hr;++Jr)Wt(j,_t+3*Jr,zo[D[Jr]]);_t+=3*hr;for(var ka=[Lr,Fo],zt=0;zt<2;++zt){var Ir=ka[zt];for(Jr=0;Jr<Ir.length;++Jr)Wt(j,_t,Xo[Gr=31&Ir[Jr]]),_t+=zo[Gr],Gr>15&&(Wt(j,_t,Ir[Jr]>>5&127),_t+=Ir[Jr]>>12)}}else So=Oe,Zo=ge,ro=Ue,Ho=Ce;for(Jr=0;Jr<Ae;++Jr){var on=se[Jr];if(on>255){var Gr;mr(j,_t,So[257+(Gr=on>>18&31)]),_t+=Zo[Gr+257],Gr>7&&(Wt(j,_t,on>>23&31),_t+=H[Gr]);var bn=31&on;mr(j,_t,ro[bn]),_t+=Ho[bn],bn>3&&(mr(j,_t,on>>5&8191),_t+=G[bn])}else mr(j,_t,So[on]),_t+=Zo[on]}return mr(j,_t,So[256]),_t+Zo[256]},No=new z([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Di=new X(0),an=function(){var Q=1,j=0;return{p:function(J){for(var se=Q,xe=j,fe=0|J.length,De=0;De!=fe;){for(var Ae=Math.min(De+2655,fe);De<Ae;++De)xe+=se+=J[De];se=(65535&se)+15*(se>>16),xe=(65535&xe)+15*(xe>>16)}Q=se,j=xe},d:function(){return(255&(Q%=65521))<<24|(65280&Q)<<8|(255&(j%=65521))<<8|j>>8}}},lr=function(Q,j,J,se,xe){if(!xe&&(xe={l:1},j.dictionary)){var fe=j.dictionary.subarray(-32768),De=new X(fe.length+Q.length);De.set(fe),De.set(Q,fe.length),Q=De,xe.w=fe.length}return function(Q,j,J,se,xe,fe){var De=fe.z||Q.length,Ae=new X(se+De+5*(1+Math.ceil(De/7e3))+xe),Ne=Ae.subarray(se,Ae.length-xe),tt=fe.l,_t=7&(fe.r||0);if(j){_t&&(Ne[0]=fe.r>>3);for(var vt=No[j-1],Ht=vt>>13,Qe=8191&vt,Ar=(1<<J)-1,pr=fe.p||new x(32768),Sr=fe.h||new x(Ar+1),Qt=Math.ceil(J/3),Lr=2*Qt,En=function(vs){return(Q[vs]^Q[vs+1]<<Qt^Q[vs+2]<<Lr)&Ar},qn=new z(25e3),Fo=new x(288),gi=new x(32),po=0,Jr=0,lo=fe.i||0,zo=0,cr=fe.w||0,hr=0;lo+2<De;++lo){var Xr=En(lo),rn=32767&lo,jo=Sr[Xr];if(pr[rn]=jo,Sr[Xr]=rn,cr<=lo){var So=De-lo;if((po>7e3||zo>24576)&&(So>423||!tt)){_t=mo(Q,Ne,0,qn,Fo,gi,Jr,zo,hr,lo-hr,_t),zo=po=Jr=0,hr=lo;for(var Zo=0;Zo<286;++Zo)Fo[Zo]=0;for(Zo=0;Zo<30;++Zo)gi[Zo]=0}var ro=2,Ho=0,Xo=Qe,ka=rn-jo&32767;if(So>2&&Xr==En(lo-ka))for(var zt=Math.min(Ht,So)-1,Ir=Math.min(32767,lo),Gr=Math.min(258,So);ka<=Ir&&--Xo&&rn!=jo;){if(Q[lo+ro]==Q[lo+ro-ka]){for(var on=0;on<Gr&&Q[lo+on]==Q[lo+on-ka];++on);if(on>ro){if(ro=on,Ho=ka,on>zt)break;var bn=Math.min(ka,on-2),Xn=0;for(Zo=0;Zo<bn;++Zo){var so=lo-ka+Zo&32767,$i=so-pr[so]&32767;$i>Xn&&(Xn=$i,jo=so)}}}ka+=(rn=jo)-(jo=pr[rn])&32767}if(Ho){qn[zo++]=268435456|N[ro]<<18|ee[Ho];var Ni=31&N[ro],ga=31&ee[Ho];Jr+=H[Ni]+G[ga],++Fo[257+Ni],++gi[ga],cr=lo+ro,++po}else qn[zo++]=Q[lo],++Fo[Q[lo]]}}for(lo=Math.max(lo,cr);lo<De;++lo)qn[zo++]=Q[lo],++Fo[Q[lo]];_t=mo(Q,Ne,tt,qn,Fo,gi,Jr,zo,hr,lo-hr,_t),tt||(fe.r=7&_t|Ne[_t/8|0]<<3,_t-=7,fe.h=Sr,fe.p=pr,fe.i=lo,fe.w=cr)}else{for(lo=fe.w||0;lo<De+tt;lo+=65535){var _a=lo+65535;_a>=De&&(Ne[_t/8|0]=tt,_a=De),_t=Mo(Ne,_t+1,Q.subarray(lo,_a))}fe.i=De}return Ze(Ae,0,se+Me(_t)+xe)}(Q,null==j.level?6:j.level,null==j.mem?xe.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(Q.length)))):20:12+j.mem,J,se,xe)},oo=function(Q,j,J){for(;J;++j)Q[j]=J,J>>>=8};function pn(Q,j){j||(j={});var J=an();J.p(Q);var se=lr(Q,j,j.dictionary?6:2,4);return function(Q,j){var J=j.level,se=0==J?0:J<6?1:9==J?3:2;if(Q[0]=120,Q[1]=se<<6|(j.dictionary&&32),Q[1]|=31-(Q[0]<<8|Q[1])%31,j.dictionary){var xe=an();xe.p(j.dictionary),oo(Q,2,xe.d())}}(se,j),oo(se,se.length-4,J.d()),se}function Do(Q,j){return function(Q,j,J,se){var xe=Q.length,fe=se?se.length:0;if(!xe||j.f&&!j.l)return J||new X(0);var De=!J,Ae=De||2!=j.i,Ne=j.i;De&&(J=new X(3*xe));var tt=function(Ni){var ga=J.length;if(Ni>ga){var _a=new X(Math.max(2*ga,Ni));_a.set(J),J=_a}},_t=j.f||0,vt=j.p||0,Ht=j.b||0,Qe=j.l,Ar=j.d,pr=j.m,Sr=j.n,Qt=8*xe;do{if(!Qe){_t=me(Q,vt,1);var Lr=me(Q,vt+1,3);if(vt+=3,!Lr){var qn=Q[(En=Me(vt)+4)-4]|Q[En-3]<<8,Fo=En+qn;if(Fo>xe){Ne&&Ct(0);break}Ae&&tt(Ht+qn),J.set(Q.subarray(En,Fo),Ht),j.b=Ht+=qn,j.p=vt=8*Fo,j.f=_t;continue}if(1==Lr)Qe=je,Ar=Le,pr=9,Sr=5;else if(2==Lr){var gi=me(Q,vt,31)+257,po=me(Q,vt+10,15)+4,Jr=gi+me(Q,vt+5,31)+1;vt+=14;for(var lo=new X(Jr),zo=new X(19),cr=0;cr<po;++cr)zo[D[cr]]=me(Q,vt+3*cr,7);vt+=3*po;var hr=ke(zo),Xr=(1<<hr)-1,rn=Te(zo,hr,1);for(cr=0;cr<Jr;){var En,jo=rn[me(Q,vt,Xr)];if(vt+=15&jo,(En=jo>>4)<16)lo[cr++]=En;else{var So=0,Zo=0;for(16==En?(Zo=3+me(Q,vt,3),vt+=2,So=lo[cr-1]):17==En?(Zo=3+me(Q,vt,7),vt+=3):18==En&&(Zo=11+me(Q,vt,127),vt+=7);Zo--;)lo[cr++]=So}}var ro=lo.subarray(0,gi),Ho=lo.subarray(gi);pr=ke(ro),Sr=ke(Ho),Qe=Te(ro,pr,1),Ar=Te(Ho,Sr,1)}else Ct(1);if(vt>Qt){Ne&&Ct(0);break}}Ae&&tt(Ht+131072);for(var Xo=(1<<pr)-1,ka=(1<<Sr)-1,zt=vt;;zt=vt){var Ir=(So=Qe[l(Q,vt)&Xo])>>4;if((vt+=15&So)>Qt){Ne&&Ct(0);break}if(So||Ct(2),Ir<256)J[Ht++]=Ir;else{if(256==Ir){zt=vt,Qe=null;break}var Gr=Ir-254;Ir>264&&(Gr=me(Q,vt,(1<<(on=H[cr=Ir-257]))-1)+T[cr],vt+=on);var bn=Ar[l(Q,vt)&ka],Xn=bn>>4;if(bn||Ct(3),vt+=15&bn,Ho=Y[Xn],Xn>3){var on=G[Xn];Ho+=l(Q,vt)&(1<<on)-1,vt+=on}if(vt>Qt){Ne&&Ct(0);break}Ae&&tt(Ht+131072);var so=Ht+Gr;if(Ht<Ho){var Po=fe-Ho,$i=Math.min(Ho,so);for(Po+Ht<0&&Ct(3);Ht<$i;++Ht)J[Ht]=se[Po+Ht]}for(;Ht<so;++Ht)J[Ht]=J[Ht-Ho]}}j.l=Qe,j.p=zt,j.b=Ht,j.f=_t,Qe&&(_t=1,j.m=pr,j.d=Ar,j.n=Sr)}while(!_t);return Ht!=J.length&&De?Ze(J,0,Ht):J.subarray(0,Ht)}(Q.subarray(function(Q,j){return(8!=(15&Q[0])||Q[0]>>4>7||(Q[0]<<8|Q[1])%31)&&Ct(6,"invalid zlib data"),(Q[1]>>5&1)==+!j&&Ct(6,"invalid zlib data: "+(32&Q[1]?"need":"unexpected")+" dictionary"),2+(Q[1]>>3&4)}(Q,j&&j.dictionary),-4),{i:2},j&&j.out,j&&j.dictionary)}var Ei=typeof TextDecoder<"u"&&new TextDecoder;try{Ei.decode(Di,{stream:!0})}catch{}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var Ea=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function du(){Ea.console&&"function"==typeof Ea.console.log&&Ea.console.log.apply(Ea.console,arguments)}var Js={log:du,warn:function(Q){Ea.console&&("function"==typeof Ea.console.warn?Ea.console.warn.apply(Ea.console,arguments):du.call(null,arguments))},error:function(Q){Ea.console&&("function"==typeof Ea.console.error?Ea.console.error.apply(Ea.console,arguments):du(Q))}};function ad(Q,j,J){var se=new XMLHttpRequest;se.open("GET",Q),se.responseType="blob",se.onload=function(){zl(se.response,j,J)},se.onerror=function(){Js.error("could not download file")},se.send()}function Ql(Q){var j=new XMLHttpRequest;j.open("HEAD",Q,!1);try{j.send()}catch{}return j.status>=200&&j.status<=299}function Yc(Q){try{Q.dispatchEvent(new MouseEvent("click"))}catch{var j=document.createEvent("MouseEvents");j.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Q.dispatchEvent(j)}}var Qc,kc,zl=Ea.saveAs||("object"!==(typeof window>"u"?"undefined":O(window))||window!==Ea?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(Q,j,J){var se=Ea.URL||Ea.webkitURL,xe=document.createElement("a");xe.download=j=j||Q.name||"download",xe.rel="noopener","string"==typeof Q?(xe.href=Q,xe.origin!==location.origin?Ql(xe.href)?ad(Q,j,J):Yc(xe,xe.target="_blank"):Yc(xe)):(xe.href=se.createObjectURL(Q),setTimeout(function(){se.revokeObjectURL(xe.href)},4e4),setTimeout(function(){Yc(xe)},0))}:"msSaveOrOpenBlob"in navigator?function(Q,j,J){if(j=j||Q.name||"download","string"==typeof Q)if(Ql(Q))ad(Q,j,J);else{var se=document.createElement("a");se.href=Q,se.target="_blank",setTimeout(function(){Yc(se)})}else navigator.msSaveOrOpenBlob((xe=Q,void 0===(fe=J)?fe={autoBom:!1}:"object"!==O(fe)&&(Js.warn("Deprecated: Expected third argument to be a object"),fe={autoBom:!fe}),fe.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(xe.type)?new Blob([String.fromCharCode(65279),xe],{type:xe.type}):xe),j);var xe,fe}:function(Q,j,J,se){if((se=se||open("","_blank"))&&(se.document.title=se.document.body.innerText="downloading..."),"string"==typeof Q)return ad(Q,j,J);var xe="application/octet-stream"===Q.type,fe=/constructor/i.test(Ea.HTMLElement)||Ea.safari,De=/CriOS\/[\d]+/.test(navigator.userAgent);if((De||xe&&fe)&&"object"===(typeof FileReader>"u"?"undefined":O(FileReader))){var Ae=new FileReader;Ae.onloadend=function(){var _t=Ae.result;_t=De?_t:_t.replace(/^data:[^;]*;/,"data:attachment/file;"),se?se.location.href=_t:location=_t,se=null},Ae.readAsDataURL(Q)}else{var Ne=Ea.URL||Ea.webkitURL,tt=Ne.createObjectURL(Q);se?se.location=tt:location.href=tt,se=null,setTimeout(function(){Ne.revokeObjectURL(tt)},4e4)}});function Xc(Q){var j;Q=Q||"",this.ok=!1,"#"==Q.charAt(0)&&(Q=Q.substr(1,6)),Q={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Q=(Q=Q.replace(/ /g,"")).toLowerCase()]||Q;for(var J=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Ae){return[parseInt(Ae[1]),parseInt(Ae[2]),parseInt(Ae[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Ae){return[parseInt(Ae[1],16),parseInt(Ae[2],16),parseInt(Ae[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Ae){return[parseInt(Ae[1]+Ae[1],16),parseInt(Ae[2]+Ae[2],16),parseInt(Ae[3]+Ae[3],16)]}}],se=0;se<J.length;se++){var fe=J[se].process,De=J[se].re.exec(Q);De&&(j=fe(De),this.r=j[0],this.g=j[1],this.b=j[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Ae=this.r.toString(16),Ne=this.g.toString(16),tt=this.b.toString(16);return 1==Ae.length&&(Ae="0"+Ae),1==Ne.length&&(Ne="0"+Ne),1==tt.length&&(tt="0"+tt),"#"+Ae+Ne+tt}}function eu(Q,j){var J=Q[0],se=Q[1],xe=Q[2],fe=Q[3];J=Ll(J,se,xe,fe,j[0],7,-680876936),fe=Ll(fe,J,se,xe,j[1],12,-389564586),xe=Ll(xe,fe,J,se,j[2],17,606105819),se=Ll(se,xe,fe,J,j[3],22,-1044525330),J=Ll(J,se,xe,fe,j[4],7,-176418897),fe=Ll(fe,J,se,xe,j[5],12,1200080426),xe=Ll(xe,fe,J,se,j[6],17,-1473231341),se=Ll(se,xe,fe,J,j[7],22,-45705983),J=Ll(J,se,xe,fe,j[8],7,1770035416),fe=Ll(fe,J,se,xe,j[9],12,-1958414417),xe=Ll(xe,fe,J,se,j[10],17,-42063),se=Ll(se,xe,fe,J,j[11],22,-1990404162),J=Ll(J,se,xe,fe,j[12],7,1804603682),fe=Ll(fe,J,se,xe,j[13],12,-40341101),xe=Ll(xe,fe,J,se,j[14],17,-1502002290),J=ql(J,se=Ll(se,xe,fe,J,j[15],22,1236535329),xe,fe,j[1],5,-165796510),fe=ql(fe,J,se,xe,j[6],9,-1069501632),xe=ql(xe,fe,J,se,j[11],14,643717713),se=ql(se,xe,fe,J,j[0],20,-373897302),J=ql(J,se,xe,fe,j[5],5,-701558691),fe=ql(fe,J,se,xe,j[10],9,38016083),xe=ql(xe,fe,J,se,j[15],14,-660478335),se=ql(se,xe,fe,J,j[4],20,-405537848),J=ql(J,se,xe,fe,j[9],5,568446438),fe=ql(fe,J,se,xe,j[14],9,-1019803690),xe=ql(xe,fe,J,se,j[3],14,-187363961),se=ql(se,xe,fe,J,j[8],20,1163531501),J=ql(J,se,xe,fe,j[13],5,-1444681467),fe=ql(fe,J,se,xe,j[2],9,-51403784),xe=ql(xe,fe,J,se,j[7],14,1735328473),J=as(J,se=ql(se,xe,fe,J,j[12],20,-1926607734),xe,fe,j[5],4,-378558),fe=as(fe,J,se,xe,j[8],11,-2022574463),xe=as(xe,fe,J,se,j[11],16,1839030562),se=as(se,xe,fe,J,j[14],23,-35309556),J=as(J,se,xe,fe,j[1],4,-1530992060),fe=as(fe,J,se,xe,j[4],11,1272893353),xe=as(xe,fe,J,se,j[7],16,-155497632),se=as(se,xe,fe,J,j[10],23,-1094730640),J=as(J,se,xe,fe,j[13],4,681279174),fe=as(fe,J,se,xe,j[0],11,-358537222),xe=as(xe,fe,J,se,j[3],16,-722521979),se=as(se,xe,fe,J,j[6],23,76029189),J=as(J,se,xe,fe,j[9],4,-640364487),fe=as(fe,J,se,xe,j[12],11,-421815835),xe=as(xe,fe,J,se,j[15],16,530742520),J=El(J,se=as(se,xe,fe,J,j[2],23,-995338651),xe,fe,j[0],6,-198630844),fe=El(fe,J,se,xe,j[7],10,1126891415),xe=El(xe,fe,J,se,j[14],15,-1416354905),se=El(se,xe,fe,J,j[5],21,-57434055),J=El(J,se,xe,fe,j[12],6,1700485571),fe=El(fe,J,se,xe,j[3],10,-1894986606),xe=El(xe,fe,J,se,j[10],15,-1051523),se=El(se,xe,fe,J,j[1],21,-2054922799),J=El(J,se,xe,fe,j[8],6,1873313359),fe=El(fe,J,se,xe,j[15],10,-30611744),xe=El(xe,fe,J,se,j[6],15,-1560198380),se=El(se,xe,fe,J,j[13],21,1309151649),J=El(J,se,xe,fe,j[4],6,-145523070),fe=El(fe,J,se,xe,j[11],10,-1120210379),xe=El(xe,fe,J,se,j[2],15,718787259),se=El(se,xe,fe,J,j[9],21,-343485551),Q[0]=tn(J,Q[0]),Q[1]=tn(se,Q[1]),Q[2]=tn(xe,Q[2]),Q[3]=tn(fe,Q[3])}function Oa(Q,j,J,se,xe,fe){return j=tn(tn(j,Q),tn(se,fe)),tn(j<<xe|j>>>32-xe,J)}function Ll(Q,j,J,se,xe,fe,De){return Oa(j&J|~j&se,Q,j,xe,fe,De)}function ql(Q,j,J,se,xe,fe,De){return Oa(j&se|J&~se,Q,j,xe,fe,De)}function as(Q,j,J,se,xe,fe,De){return Oa(j^J^se,Q,j,xe,fe,De)}function El(Q,j,J,se,xe,fe,De){return Oa(J^(j|~se),Q,j,xe,fe,De)}function Gu(Q){var j,J=Q.length,se=[1732584193,-271733879,-1732584194,271733878];for(j=64;j<=Q.length;j+=64)eu(se,Lc(Q.substring(j-64,j)));Q=Q.substring(j-64);var xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(j=0;j<Q.length;j++)xe[j>>2]|=Q.charCodeAt(j)<<(j%4<<3);if(xe[j>>2]|=128<<(j%4<<3),j>55)for(eu(se,xe),j=0;j<16;j++)xe[j]=0;return xe[14]=8*J,eu(se,xe),se}function Lc(Q){var j,J=[];for(j=0;j<64;j+=4)J[j>>2]=Q.charCodeAt(j)+(Q.charCodeAt(j+1)<<8)+(Q.charCodeAt(j+2)<<16)+(Q.charCodeAt(j+3)<<24);return J}Qc=Ea.atob.bind(Ea),kc=Ea.btoa.bind(Ea);var Cf="0123456789abcdef".split("");function et(Q){for(var j="",J=0;J<4;J++)j+=Cf[Q>>8*J+4&15]+Cf[Q>>8*J&15];return j}function Ye(Q){return String.fromCharCode((255&Q)>>0,(65280&Q)>>8,(16711680&Q)>>16,(4278190080&Q)>>24)}function dt(Q){return Gu(Q).map(Ye).join("")}var Dt="5d41402abc4b2a76b9719d911017c592"!=function(Q){for(var j=0;j<Q.length;j++)Q[j]=et(Q[j]);return Q.join("")}(Gu("hello"));function tn(Q,j){if(Dt){var J=(65535&Q)+(65535&j);return(Q>>16)+(j>>16)+(J>>16)<<16|65535&J}return Q+j&4294967295}function uo(Q,j){var J,se,xe;if(Q!==J){for(var De=(xe=Q,new Array(1+(256/Q.length>>0)+1).join(xe)),Ae=[],Ne=0;Ne<256;Ne++)Ae[Ne]=Ne;var tt=0;for(Ne=0;Ne<256;Ne++){var _t=Ae[Ne];tt=(tt+_t+De.charCodeAt(Ne))%256,Ae[Ne]=Ae[tt],Ae[tt]=_t}J=Q,se=Ae}else Ae=se;var vt=j.length,Ht=0,Qe=0,Ar="";for(Ne=0;Ne<vt;Ne++)Qe=(Qe+(_t=Ae[Ht=(Ht+1)%256]))%256,Ae[Ht]=Ae[Qe],Ae[Qe]=_t,De=Ae[(Ae[Ht]+Ae[Qe])%256],Ar+=String.fromCharCode(j.charCodeAt(Ne)^De);return Ar}var ao={print:4,modify:8,copy:16,"annot-forms":32};function Jo(Q,j,J,se){this.v=1,this.r=2;var xe=192;Q.forEach(function(Ae){if(void 0!==ao.perm)throw new Error("Invalid permission: "+Ae);xe+=ao[Ae]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var fe=(j+this.padding).substr(0,32),De=(J+this.padding).substr(0,32);this.O=this.processOwnerPassword(fe,De),this.P=-(1+(255^xe)),this.encryptionKey=dt(fe+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(se)).substr(0,5),this.U=uo(this.encryptionKey,this.padding)}function ko(Q){if(/[^\u0000-\u00ff]/.test(Q))throw new Error("Invalid PDF Name Object: "+Q+", Only accept ASCII characters.");for(var j="",J=Q.length,se=0;se<J;se++){var xe=Q.charCodeAt(se);j+=xe<33||35===xe||37===xe||40===xe||41===xe||47===xe||60===xe||62===xe||91===xe||93===xe||123===xe||125===xe||xe>126?"#"+("0"+xe.toString(16)).slice(-2):Q[se]}return j}function ra(Q){if("object"!==O(Q))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var j={};this.subscribe=function(J,se,xe){if(xe=xe||!1,"string"!=typeof J||"function"!=typeof se||"boolean"!=typeof xe)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");j.hasOwnProperty(J)||(j[J]={});var fe=Math.random().toString(35);return j[J][fe]=[se,!!xe],fe},this.unsubscribe=function(J){for(var se in j)if(j[se][J])return delete j[se][J],0===Object.keys(j[se]).length&&delete j[se],!0;return!1},this.publish=function(J){if(j.hasOwnProperty(J)){var se=Array.prototype.slice.call(arguments,1),xe=[];for(var fe in j[J]){var De=j[J][fe];try{De[0].apply(Q,se)}catch(Ae){Ea.console&&Js.error("jsPDF PubSub Error",Ae.message,Ae)}De[1]&&xe.push(fe)}xe.length&&xe.forEach(this.unsubscribe)}},this.getTopics=function(){return j}}function Ri(Q){if(!(this instanceof Ri))return new Ri(Q);var j="opacity,stroke-opacity".split(",");for(var J in Q)Q.hasOwnProperty(J)&&j.indexOf(J)>=0&&(this[J]=Q[J]);this.id="",this.objectNumber=-1}function ls(Q,j){this.gState=Q,this.matrix=j,this.id="",this.objectNumber=-1}function Ra(Q,j,J,se,xe){if(!(this instanceof Ra))return new Ra(Q,j,J,se,xe);this.type="axial"===Q?2:3,this.coords=j,this.colors=J,ls.call(this,se,xe)}function es(Q,j,J,se,xe){if(!(this instanceof es))return new es(Q,j,J,se,xe);this.boundingBox=Q,this.xStep=j,this.yStep=J,this.stream="",this.cloneIndex=0,ls.call(this,se,xe)}function Xi(Q){var j,J="string"==typeof arguments[0]?arguments[0]:"p",se=arguments[1],xe=arguments[2],fe=arguments[3],De=[],Ae=1,Ne=16,tt="S",_t=null;"object"===O(Q=Q||{})&&(J=Q.orientation,se=Q.unit||se,xe=Q.format||xe,fe=Q.compress||Q.compressPdf||fe,null!==(_t=Q.encryption||null)&&(_t.userPassword=_t.userPassword||"",_t.ownerPassword=_t.ownerPassword||"",_t.userPermissions=_t.userPermissions||[]),Ae="number"==typeof Q.userUnit?Math.abs(Q.userUnit):1,void 0!==Q.precision&&(j=Q.precision),void 0!==Q.floatPrecision&&(Ne=Q.floatPrecision),tt=Q.defaultPathOperation||"S"),De=Q.filters||(!0===fe?["FlateEncode"]:De),se=se||"mm",J=(""+(J||"P")).toLowerCase();var vt=Q.putOnlyUsedFonts||!1,Ht={},Qe={internal:{},__private__:{}};Qe.__private__.PubSub=ra;var Ar="1.3",pr=Qe.__private__.getPdfVersion=function(){return Ar};Qe.__private__.setPdfVersion=function(Ee){Ar=Ee};var Sr={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Qe.__private__.getPageFormats=function(){return Sr};var Qt=Qe.__private__.getPageFormat=function(Ee){return Sr[Ee]};xe=xe||"a4";var En="compat";function qn(){this.saveGraphicsState(),Hr(new us(wa,0,0,-wa,0,Ih()*wa).toString()+" cm"),this.setFontSize(this.getFontSize()/wa),tt="n",En="advanced"}function Fo(){this.restoreGraphicsState(),tt="S",En="compat"}var gi=Qe.__private__.combineFontStyleAndFontWeight=function(Ee,bt){if("bold"==Ee&&"normal"==bt||"bold"==Ee&&400==bt||"normal"==Ee&&"italic"==bt||"bold"==Ee&&"italic"==bt)throw new Error("Invalid Combination of fontweight and fontstyle");return bt&&(Ee=400==bt||"normal"===bt?"italic"===Ee?"italic":"normal":700!=bt&&"bold"!==bt||"normal"!==Ee?(700==bt?"bold":bt)+""+Ee:"bold"),Ee};Qe.advancedAPI=function(Ee){var bt="compat"===En;return bt&&qn.call(this),"function"!=typeof Ee||(Ee(this),bt&&Fo.call(this)),this},Qe.compatAPI=function(Ee){var bt="advanced"===En;return bt&&Fo.call(this),"function"!=typeof Ee||(Ee(this),bt&&qn.call(this)),this},Qe.isAdvancedAPI=function(){return"advanced"===En};var po,Jr=function(Ee){if("advanced"!==En)throw new Error(Ee+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},lo=Qe.roundToPrecision=Qe.__private__.roundToPrecision=function(Ee,bt){var Ur=j||bt;if(isNaN(Ee)||isNaN(Ur))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Ee.toFixed(Ur).replace(/0+$/,"")};po=Qe.hpf=Qe.__private__.hpf="number"==typeof Ne?function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.hpf");return lo(Ee,Ne)}:"smart"===Ne?function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.hpf");return lo(Ee,Ee>-1&&Ee<1?16:5)}:function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.hpf");return lo(Ee,16)};var zo=Qe.f2=Qe.__private__.f2=function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.f2");return lo(Ee,2)},cr=Qe.__private__.f3=function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.f3");return lo(Ee,3)},hr=Qe.scale=Qe.__private__.scale=function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.scale");return"compat"===En?Ee*wa:"advanced"===En?Ee:void 0},rn=function(Ee){return hr(function(Ee){return"compat"===En?Ih()-Ee:"advanced"===En?Ee:void 0}(Ee))};Qe.__private__.setPrecision=Qe.setPrecision=function(Ee){"number"==typeof parseInt(Ee,10)&&(j=parseInt(Ee,10))};var jo,So="00000000000000000000000000000000",Zo=Qe.__private__.getFileId=function(){return So},ro=Qe.__private__.setFileId=function(Ee){return So=void 0!==Ee&&/^[a-fA-F0-9]{32}$/.test(Ee)?Ee.toUpperCase():So.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==_t&&(Yr=new Jo(_t.userPermissions,_t.userPassword,_t.ownerPassword,So)),So};Qe.setFileId=function(Ee){return ro(Ee),this},Qe.getFileId=function(){return Zo()};var Ho=Qe.__private__.convertDateToPDFDate=function(Ee){var bt=Ee.getTimezoneOffset(),Ur=bt<0?"+":"-",mn=Math.floor(Math.abs(bt/60)),to=Math.abs(bt%60),Yo=[Ur,Gr(mn),"'",Gr(to),"'"].join("");return["D:",Ee.getFullYear(),Gr(Ee.getMonth()+1),Gr(Ee.getDate()),Gr(Ee.getHours()),Gr(Ee.getMinutes()),Gr(Ee.getSeconds()),Yo].join("")},Xo=Qe.__private__.convertPDFDateToDate=function(Ee){var bt=parseInt(Ee.substr(2,4),10),Ur=parseInt(Ee.substr(6,2),10)-1,mn=parseInt(Ee.substr(8,2),10),to=parseInt(Ee.substr(10,2),10),Yo=parseInt(Ee.substr(12,2),10),Pi=parseInt(Ee.substr(14,2),10);return new Date(bt,Ur,mn,to,Yo,Pi,0)},ka=Qe.__private__.setCreationDate=function(Ee){var bt;if(void 0===Ee&&(Ee=new Date),Ee instanceof Date)bt=Ho(Ee);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Ee))throw new Error("Invalid argument passed to jsPDF.setCreationDate");bt=Ee}return jo=bt},zt=Qe.__private__.getCreationDate=function(Ee){var bt=jo;return"jsDate"===Ee&&(bt=Xo(jo)),bt};Qe.setCreationDate=function(Ee){return ka(Ee),this},Qe.getCreationDate=function(Ee){return zt(Ee)};var Ir,Gr=Qe.__private__.padd2=function(Ee){return("0"+parseInt(Ee)).slice(-2)},on=Qe.__private__.padd2Hex=function(Ee){return("00"+(Ee=Ee.toString())).substr(Ee.length)},bn=0,Xn=[],so=[],Po=0,$i=[],Ni=[],ga=!1,_a=so;Qe.__private__.setCustomOutputDestination=function(Ee){ga=!0,_a=Ee};var ei=function(Ee){ga||(_a=Ee)};Qe.__private__.resetCustomOutputDestination=function(){ga=!1,_a=so};var Hr=Qe.__private__.out=function(Ee){return Ee=Ee.toString(),Po+=Ee.length+1,_a.push(Ee),_a},Is=Qe.__private__.write=function(Ee){return Hr(1===arguments.length?Ee.toString():Array.prototype.join.call(arguments," "))},qa=Qe.__private__.getArrayBuffer=function(Ee){for(var bt=Ee.length,Ur=new ArrayBuffer(bt),mn=new Uint8Array(Ur);bt--;)mn[bt]=Ee.charCodeAt(bt);return Ur},Bi=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Qe.__private__.getStandardFonts=function(){return Bi};var ua=Q.fontSize||16;Qe.__private__.setFontSize=Qe.setFontSize=function(Ee){return ua="advanced"===En?Ee/wa:Ee,this};var va,da=Qe.__private__.getFontSize=Qe.getFontSize=function(){return"compat"===En?ua:ua*wa},os=Q.R2L||!1;Qe.__private__.setR2L=Qe.setR2L=function(Ee){return os=Ee,this},Qe.__private__.getR2L=Qe.getR2L=function(){return os};var Es,Ts=Qe.__private__.setZoomMode=function(Ee){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Ee))va=Ee;else if(isNaN(Ee)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Ee))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Ee+'" is not recognized.');va=Ee}else va=parseInt(Ee,10)};Qe.__private__.getZoomMode=function(){return va};var js,pl=Qe.__private__.setPageMode=function(Ee){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Ee))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Ee+'" is not recognized.');Es=Ee};Qe.__private__.getPageMode=function(){return Es};var zs=Qe.__private__.setLayoutMode=function(Ee){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Ee))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Ee+'" is not recognized.');js=Ee};Qe.__private__.getLayoutMode=function(){return js},Qe.__private__.setDisplayMode=Qe.setDisplayMode=function(Ee,bt,Ur){return Ts(Ee),zs(bt),pl(Ur),this};var As={title:"",subject:"",author:"",keywords:"",creator:""};Qe.__private__.getDocumentProperty=function(Ee){if(-1===Object.keys(As).indexOf(Ee))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return As[Ee]},Qe.__private__.getDocumentProperties=function(){return As},Qe.__private__.setDocumentProperties=Qe.setProperties=Qe.setDocumentProperties=function(Ee){for(var bt in As)As.hasOwnProperty(bt)&&Ee[bt]&&(As[bt]=Ee[bt]);return this},Qe.__private__.setDocumentProperty=function(Ee,bt){if(-1===Object.keys(As).indexOf(Ee))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return As[Ee]=bt};var tl,wa,Al,$a,Kc,Ws={},al={},Jd=[],Ol={},ku={},dc={},vl={},Pd=null,yc=0,Ss=[],Ys=new ra(Qe),Ap=Q.hotfixes||[],Ou={},kp={},Bu=[],us=function Ee(bt,Ur,mn,to,Yo,Pi){if(!(this instanceof Ee))return new Ee(bt,Ur,mn,to,Yo,Pi);isNaN(bt)&&(bt=1),isNaN(Ur)&&(Ur=0),isNaN(mn)&&(mn=0),isNaN(to)&&(to=1),isNaN(Yo)&&(Yo=0),isNaN(Pi)&&(Pi=0),this._matrix=[bt,Ur,mn,to,Yo,Pi]};Object.defineProperty(us.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Ee){this._matrix[0]=Ee}}),Object.defineProperty(us.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Ee){this._matrix[1]=Ee}}),Object.defineProperty(us.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Ee){this._matrix[2]=Ee}}),Object.defineProperty(us.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Ee){this._matrix[3]=Ee}}),Object.defineProperty(us.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Ee){this._matrix[4]=Ee}}),Object.defineProperty(us.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Ee){this._matrix[5]=Ee}}),Object.defineProperty(us.prototype,"a",{get:function(){return this._matrix[0]},set:function(Ee){this._matrix[0]=Ee}}),Object.defineProperty(us.prototype,"b",{get:function(){return this._matrix[1]},set:function(Ee){this._matrix[1]=Ee}}),Object.defineProperty(us.prototype,"c",{get:function(){return this._matrix[2]},set:function(Ee){this._matrix[2]=Ee}}),Object.defineProperty(us.prototype,"d",{get:function(){return this._matrix[3]},set:function(Ee){this._matrix[3]=Ee}}),Object.defineProperty(us.prototype,"e",{get:function(){return this._matrix[4]},set:function(Ee){this._matrix[4]=Ee}}),Object.defineProperty(us.prototype,"f",{get:function(){return this._matrix[5]},set:function(Ee){this._matrix[5]=Ee}}),Object.defineProperty(us.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(us.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(us.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(us.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),us.prototype.join=function(Ee){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(po).join(Ee)},us.prototype.multiply=function(Ee){return new us(Ee.sx*this.sx+Ee.shy*this.shx,Ee.sx*this.shy+Ee.shy*this.sy,Ee.shx*this.sx+Ee.sy*this.shx,Ee.shx*this.shy+Ee.sy*this.sy,Ee.tx*this.sx+Ee.ty*this.shx+this.tx,Ee.tx*this.shy+Ee.ty*this.sy+this.ty)},us.prototype.decompose=function(){var Ee=this.sx,bt=this.shy,Ur=this.shx,mn=this.sy,to=this.tx,Yo=this.ty,Pi=Math.sqrt(Ee*Ee+bt*bt),ja=(Ee/=Pi)*Ur+(bt/=Pi)*mn;Ur-=Ee*ja,mn-=bt*ja;var Ja=Math.sqrt(Ur*Ur+mn*mn);return ja/=Ja,Ee*(mn/=Ja)<bt*(Ur/=Ja)&&(Ee=-Ee,bt=-bt,ja=-ja,Pi=-Pi),{scale:new us(Pi,0,0,Ja,0,0),translate:new us(1,0,0,1,to,Yo),rotate:new us(Ee,bt,-bt,Ee,0,0),skew:new us(1,0,ja,1,0,0)}},us.prototype.toString=function(Ee){return this.join(" ")},us.prototype.inversed=function(){var Ee=this.sx,bt=this.shy,Ur=this.shx,mn=this.sy,to=this.tx,Yo=this.ty,Pi=1/(Ee*mn-bt*Ur),ja=mn*Pi,Ja=-bt*Pi,Hs=-Ur*Pi,Gs=Ee*Pi;return new us(ja,Ja,Hs,Gs,-ja*to-Hs*Yo,-Ja*to-Gs*Yo)},us.prototype.applyToPoint=function(Ee){return new tm(Ee.x*this.sx+Ee.y*this.shx+this.tx,Ee.x*this.shy+Ee.y*this.sy+this.ty)},us.prototype.applyToRectangle=function(Ee){var bt=this.applyToPoint(Ee),Ur=this.applyToPoint(new tm(Ee.x+Ee.w,Ee.y+Ee.h));return new Im(bt.x,bt.y,Ur.x-bt.x,Ur.y-bt.y)},us.prototype.clone=function(){return new us(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},Qe.Matrix=us;var Yd=Qe.matrixMult=function(Ee,bt){return bt.multiply(Ee)},Wu=new us(1,0,0,1,0,0);Qe.unitMatrix=Qe.identityMatrix=Wu;var Du=function(Ee,bt){if(!ku[Ee]){var Ur=(bt instanceof Ra?"Sh":"P")+(Object.keys(Ol).length+1).toString(10);bt.id=Ur,ku[Ee]=Ur,Ol[Ur]=bt,Ys.publish("addPattern",bt)}};Qe.ShadingPattern=Ra,Qe.TilingPattern=es,Qe.addShadingPattern=function(Ee,bt){return Jr("addShadingPattern()"),Du(Ee,bt),this},Qe.beginTilingPattern=function(Ee){Jr("beginTilingPattern()"),Fm(Ee.boundingBox[0],Ee.boundingBox[1],Ee.boundingBox[2]-Ee.boundingBox[0],Ee.boundingBox[3]-Ee.boundingBox[1],Ee.matrix)},Qe.endTilingPattern=function(Ee,bt){Jr("endTilingPattern()"),bt.stream=Ni[Ir].join("\n"),Du(Ee,bt),Ys.publish("endTilingPattern",bt),Bu.pop().restore()};var Ee,pc=Qe.__private__.newObject=function(){var Ee=Vc();return Lu(Ee,!0),Ee},Vc=Qe.__private__.newObjectDeferred=function(){return bn++,Xn[bn]=function(){return Po},bn},Lu=function(Ee,bt){return bt="boolean"==typeof bt&&bt,Xn[Ee]=Po,bt&&Hr(Ee+" 0 obj"),Ee},eh=Qe.__private__.newAdditionalObject=function(){var Ee={objId:Vc(),content:""};return $i.push(Ee),Ee},Lp=Vc(),md=Vc(),gd=Qe.__private__.decodeColorString=function(Ee){var bt=Ee.split(" ");if(2!==bt.length||"g"!==bt[1]&&"G"!==bt[1])5===bt.length&&("k"===bt[4]||"K"===bt[4])&&(bt=[(1-bt[0])*(1-bt[3]),(1-bt[1])*(1-bt[3]),(1-bt[2])*(1-bt[3]),"r"]);else{var Ur=parseFloat(bt[0]);bt=[Ur,Ur,Ur,"r"]}for(var mn="#",to=0;to<3;to++)mn+=("0"+Math.floor(255*parseFloat(bt[to])).toString(16)).slice(-2);return mn},zc=Qe.__private__.encodeColorString=function(Ee){var bt;"string"==typeof Ee&&(Ee={ch1:Ee});var Ur=Ee.ch1,mn=Ee.ch2,to=Ee.ch3,Yo=Ee.ch4,Pi="draw"===Ee.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof Ur&&"#"!==Ur.charAt(0)){var ja=new Xc(Ur);if(ja.ok)Ur=ja.toHex();else if(!/^\d*\.?\d*$/.test(Ur))throw new Error('Invalid color "'+Ur+'" passed to jsPDF.encodeColorString.')}if("string"==typeof Ur&&/^#[0-9A-Fa-f]{3}$/.test(Ur)&&(Ur="#"+Ur[1]+Ur[1]+Ur[2]+Ur[2]+Ur[3]+Ur[3]),"string"==typeof Ur&&/^#[0-9A-Fa-f]{6}$/.test(Ur)){var Ja=parseInt(Ur.substr(1),16);Ur=Ja>>16&255,mn=Ja>>8&255,to=255&Ja}if(void 0===mn||void 0===Yo&&Ur===mn&&mn===to)bt="string"==typeof Ur?Ur+" "+Pi[0]:2===Ee.precision?zo(Ur/255)+" "+Pi[0]:cr(Ur/255)+" "+Pi[0];else if(void 0===Yo||"object"===O(Yo)){if(Yo&&!isNaN(Yo.a)&&0===Yo.a)return["1.","1.","1.",Pi[1]].join(" ");bt="string"==typeof Ur?[Ur,mn,to,Pi[1]].join(" "):2===Ee.precision?[zo(Ur/255),zo(mn/255),zo(to/255),Pi[1]].join(" "):[cr(Ur/255),cr(mn/255),cr(to/255),Pi[1]].join(" ")}else bt="string"==typeof Ur?[Ur,mn,to,Yo,Pi[2]].join(" "):2===Ee.precision?[zo(Ur),zo(mn),zo(to),zo(Yo),Pi[2]].join(" "):[cr(Ur),cr(mn),cr(to),cr(Yo),Pi[2]].join(" ");return bt},Iu=Qe.__private__.getFilters=function(){return De},ru=Qe.__private__.putStream=function(Ee){var bt=(Ee=Ee||{}).data||"",Ur=Ee.filters||Iu(),mn=Ee.alreadyAppliedFilters||[],to=Ee.addLength1||!1,Yo=bt.length,Pi=Ee.objectId,ja=function(Ju){return Ju};if(null!==_t&&void 0===Pi)throw new Error("ObjectId must be passed to putStream for file encryption");null!==_t&&(ja=Yr.encryptor(Pi,0));var Ja={};!0===Ur&&(Ur=["FlateEncode"]);var Hs=Ee.additionalKeyValues||[],Gs=(Ja=void 0!==Xi.API.processDataByFilters?Xi.API.processDataByFilters(bt,Ur):{data:bt,reverseChain:[]}).reverseChain+(Array.isArray(mn)?mn.join(" "):mn.toString());if(0!==Ja.data.length&&(Hs.push({key:"Length",value:Ja.data.length}),!0===to&&Hs.push({key:"Length1",value:Yo})),0!=Gs.length)if(Gs.split("/").length-1==1)Hs.push({key:"Filter",value:Gs});else{Hs.push({key:"Filter",value:"["+Gs+"]"});for(var Sl=0;Sl<Hs.length;Sl+=1)if("DecodeParms"===Hs[Sl].key){for(var ac=[],qs=0;qs<Ja.reverseChain.split("/").length-1;qs+=1)ac.push("null");ac.push(Hs[Sl].value),Hs[Sl].value="["+ac.join(" ")+"]"}}Hr("<<");for(var jc=0;jc<Hs.length;jc++)Hr("/"+Hs[jc].key+" "+Hs[jc].value);Hr(">>"),0!==Ja.data.length&&(Hr("stream"),Hr(ja(Ja.data)),Hr("endstream"))},Qd=Qe.__private__.putPage=function(Ee){var bt=Ee.number,Ur=Ee.data,mn=Ee.objId,to=Ee.contentsObjId;Lu(mn,!0),Hr("<</Type /Page"),Hr("/Parent "+Ee.rootDictionaryObjId+" 0 R"),Hr("/Resources "+Ee.resourceDictionaryObjId+" 0 R"),Hr("/MediaBox ["+parseFloat(po(Ee.mediaBox.bottomLeftX))+" "+parseFloat(po(Ee.mediaBox.bottomLeftY))+" "+po(Ee.mediaBox.topRightX)+" "+po(Ee.mediaBox.topRightY)+"]"),null!==Ee.cropBox&&Hr("/CropBox ["+po(Ee.cropBox.bottomLeftX)+" "+po(Ee.cropBox.bottomLeftY)+" "+po(Ee.cropBox.topRightX)+" "+po(Ee.cropBox.topRightY)+"]"),null!==Ee.bleedBox&&Hr("/BleedBox ["+po(Ee.bleedBox.bottomLeftX)+" "+po(Ee.bleedBox.bottomLeftY)+" "+po(Ee.bleedBox.topRightX)+" "+po(Ee.bleedBox.topRightY)+"]"),null!==Ee.trimBox&&Hr("/TrimBox ["+po(Ee.trimBox.bottomLeftX)+" "+po(Ee.trimBox.bottomLeftY)+" "+po(Ee.trimBox.topRightX)+" "+po(Ee.trimBox.topRightY)+"]"),null!==Ee.artBox&&Hr("/ArtBox ["+po(Ee.artBox.bottomLeftX)+" "+po(Ee.artBox.bottomLeftY)+" "+po(Ee.artBox.topRightX)+" "+po(Ee.artBox.topRightY)+"]"),"number"==typeof Ee.userUnit&&1!==Ee.userUnit&&Hr("/UserUnit "+Ee.userUnit),Ys.publish("putPage",{objId:mn,pageContext:Ss[bt],pageNumber:bt,page:Ur}),Hr("/Contents "+to+" 0 R"),Hr(">>"),Hr("endobj");var Yo=Ur.join("\n");return"advanced"===En&&(Yo+="\nQ"),Lu(to,!0),ru({data:Yo,filters:Iu(),objectId:to}),Hr("endobj"),mn},fp=Qe.__private__.putPages=function(){var Ee,bt,Ur=[];for(Ee=1;Ee<=yc;Ee++)Ss[Ee].objId=Vc(),Ss[Ee].contentsObjId=Vc();for(Ee=1;Ee<=yc;Ee++)Ur.push(Qd({number:Ee,data:Ni[Ee],objId:Ss[Ee].objId,contentsObjId:Ss[Ee].contentsObjId,mediaBox:Ss[Ee].mediaBox,cropBox:Ss[Ee].cropBox,bleedBox:Ss[Ee].bleedBox,trimBox:Ss[Ee].trimBox,artBox:Ss[Ee].artBox,userUnit:Ss[Ee].userUnit,rootDictionaryObjId:Lp,resourceDictionaryObjId:md}));Lu(Lp,!0),Hr("<</Type /Pages");var mn="/Kids [";for(bt=0;bt<yc;bt++)mn+=Ur[bt]+" 0 R ";Hr(mn+"]"),Hr("/Count "+yc),Hr(">>"),Hr("endobj"),Ys.publish("postPutPages")},th=function(Ee){Ys.publish("putFont",{font:Ee,out:Hr,newObject:pc,putStream:ru}),!0!==Ee.isAlreadyPutted&&(Ee.objectNumber=pc(),Hr("<<"),Hr("/Type /Font"),Hr("/BaseFont /"+ko(Ee.postScriptName)),Hr("/Subtype /Type1"),"string"==typeof Ee.encoding&&Hr("/Encoding /"+Ee.encoding),Hr("/FirstChar 32"),Hr("/LastChar 255"),Hr(">>"),Hr("endobj"))},nh=function(Ee){Ee.objectNumber=pc();var bt=[];bt.push({key:"Type",value:"/XObject"}),bt.push({key:"Subtype",value:"/Form"}),bt.push({key:"BBox",value:"["+[po(Ee.x),po(Ee.y),po(Ee.x+Ee.width),po(Ee.y+Ee.height)].join(" ")+"]"}),bt.push({key:"Matrix",value:"["+Ee.matrix.toString()+"]"});var Ur=Ee.pages[1].join("\n");ru({data:Ur,additionalKeyValues:bt,objectId:Ee.objectNumber}),Hr("endobj")},Pm=function(Ee,bt){bt||(bt=21);var Ur=pc(),mn=function(Ee,bt){var Ur,mn=[],to=1/(bt-1);for(Ur=0;Ur<1;Ur+=to)mn.push(Ur);mn.push(1),0!=Ee[0].offset&&Ee.unshift({offset:0,color:Ee[0].color}),1!=Ee[Ee.length-1].offset&&Ee.push({offset:1,color:Ee[Ee.length-1].color});for(var ja="",Ja=0,Hs=0;Hs<mn.length;Hs++){for(Ur=mn[Hs];Ur>Ee[Ja+1].offset;)Ja++;var Gs=Ee[Ja].offset,Sl=(Ur-Gs)/(Ee[Ja+1].offset-Gs),ac=Ee[Ja].color,qs=Ee[Ja+1].color;ja+=on(Math.round((1-Sl)*ac[0]+Sl*qs[0]).toString(16))+on(Math.round((1-Sl)*ac[1]+Sl*qs[1]).toString(16))+on(Math.round((1-Sl)*ac[2]+Sl*qs[2]).toString(16))}return ja.trim()}(Ee.colors,bt),to=[];to.push({key:"FunctionType",value:"0"}),to.push({key:"Domain",value:"[0.0 1.0]"}),to.push({key:"Size",value:"["+bt+"]"}),to.push({key:"BitsPerSample",value:"8"}),to.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),to.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ru({data:mn,additionalKeyValues:to,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ur}),Hr("endobj"),Ee.objectNumber=pc(),Hr("<< /ShadingType "+Ee.type),Hr("/ColorSpace /DeviceRGB");var Yo="/Coords ["+po(parseFloat(Ee.coords[0]))+" "+po(parseFloat(Ee.coords[1]))+" ";Yo+=2===Ee.type?po(parseFloat(Ee.coords[2]))+" "+po(parseFloat(Ee.coords[3])):po(parseFloat(Ee.coords[2]))+" "+po(parseFloat(Ee.coords[3]))+" "+po(parseFloat(Ee.coords[4]))+" "+po(parseFloat(Ee.coords[5])),Hr(Yo+="]"),Ee.matrix&&Hr("/Matrix ["+Ee.matrix.toString()+"]"),Hr("/Function "+Ur+" 0 R"),Hr("/Extend [true true]"),Hr(">>"),Hr("endobj")},Mm=function(Ee,bt){var Ur=Vc(),mn=pc();bt.push({resourcesOid:Ur,objectOid:mn}),Ee.objectNumber=mn;var to=[];to.push({key:"Type",value:"/Pattern"}),to.push({key:"PatternType",value:"1"}),to.push({key:"PaintType",value:"1"}),to.push({key:"TilingType",value:"1"}),to.push({key:"BBox",value:"["+Ee.boundingBox.map(po).join(" ")+"]"}),to.push({key:"XStep",value:po(Ee.xStep)}),to.push({key:"YStep",value:po(Ee.yStep)}),to.push({key:"Resources",value:Ur+" 0 R"}),Ee.matrix&&to.push({key:"Matrix",value:"["+Ee.matrix.toString()+"]"}),ru({data:Ee.stream,additionalKeyValues:to,objectId:Ee.objectNumber}),Hr("endobj")},Ip=function(Ee){for(var bt in Ee.objectNumber=pc(),Hr("<<"),Ee)switch(bt){case"opacity":Hr("/ca "+zo(Ee[bt]));break;case"stroke-opacity":Hr("/CA "+zo(Ee[bt]))}Hr(">>"),Hr("endobj")},Fc=function(Ee){Lu(Ee.resourcesOid,!0),Hr("<<"),Hr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Ee in Hr("/Font <<"),Ws)Ws.hasOwnProperty(Ee)&&(!1===vt||!0===vt&&Ht.hasOwnProperty(Ee))&&Hr("/"+Ee+" "+Ws[Ee].objectNumber+" 0 R");Hr(">>")}(),function(){if(Object.keys(Ol).length>0){for(var Ee in Hr("/Shading <<"),Ol)Ol.hasOwnProperty(Ee)&&Ol[Ee]instanceof Ra&&Ol[Ee].objectNumber>=0&&Hr("/"+Ee+" "+Ol[Ee].objectNumber+" 0 R");Ys.publish("putShadingPatternDict"),Hr(">>")}}(),function(Ee){if(Object.keys(Ol).length>0){for(var bt in Hr("/Pattern <<"),Ol)Ol.hasOwnProperty(bt)&&Ol[bt]instanceof Qe.TilingPattern&&Ol[bt].objectNumber>=0&&Ol[bt].objectNumber<Ee&&Hr("/"+bt+" "+Ol[bt].objectNumber+" 0 R");Ys.publish("putTilingPatternDict"),Hr(">>")}}(Ee.objectOid),function(){if(Object.keys(dc).length>0){var Ee;for(Ee in Hr("/ExtGState <<"),dc)dc.hasOwnProperty(Ee)&&dc[Ee].objectNumber>=0&&Hr("/"+Ee+" "+dc[Ee].objectNumber+" 0 R");Ys.publish("putGStateDict"),Hr(">>")}}(),function(){for(var Ee in Hr("/XObject <<"),Ou)Ou.hasOwnProperty(Ee)&&Ou[Ee].objectNumber>=0&&Hr("/"+Ee+" "+Ou[Ee].objectNumber+" 0 R");Ys.publish("putXobjectDict"),Hr(">>")}(),Hr(">>"),Hr("endobj")},ef=function(Ee){al[Ee.fontName]=al[Ee.fontName]||{},al[Ee.fontName][Ee.fontStyle]=Ee.id},tf=function(Ee,bt,Ur,mn,to){var Yo={id:"F"+(Object.keys(Ws).length+1).toString(10),postScriptName:Ee,fontName:bt,fontStyle:Ur,encoding:mn,isStandardFont:to||!1,metadata:{}};return Ys.publish("addFont",{font:Yo,instance:this}),Ws[Yo.id]=Yo,ef(Yo),Yo.id},Sc=Qe.__private__.pdfEscape=Qe.pdfEscape=function(Ee,bt){return function(Ee,bt){var Ur,mn,to,Yo,Pi,ja,Ja,Hs,Gs;if(to=(bt=bt||{}).sourceEncoding||"Unicode",Pi=bt.outputEncoding,(bt.autoencode||Pi)&&Ws[tl].metadata&&Ws[tl].metadata[to]&&Ws[tl].metadata[to].encoding&&(Yo=Ws[tl].metadata[to].encoding,!Pi&&Ws[tl].encoding&&(Pi=Ws[tl].encoding),!Pi&&Yo.codePages&&(Pi=Yo.codePages[0]),"string"==typeof Pi&&(Pi=Yo[Pi]),Pi)){for(Ja=!1,ja=[],Ur=0,mn=Ee.length;Ur<mn;Ur++)(Hs=Pi[Ee.charCodeAt(Ur)])?ja.push(String.fromCharCode(Hs)):ja.push(Ee[Ur]),ja[Ur].charCodeAt(0)>>8&&(Ja=!0);Ee=ja.join("")}for(Ur=Ee.length;void 0===Ja&&0!==Ur;)Ee.charCodeAt(Ur-1)>>8&&(Ja=!0),Ur--;if(!Ja)return Ee;for(ja=bt.noBOM?[]:[254,255],Ur=0,mn=Ee.length;Ur<mn;Ur++){if((Gs=(Hs=Ee.charCodeAt(Ur))>>8)>>8)throw new Error("Character at position "+Ur+" of string '"+Ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ja.push(Gs),ja.push(Hs-(Gs<<8))}return String.fromCharCode.apply(void 0,ja)}(Ee,bt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rf=Qe.__private__.beginPage=function(Ee){Ni[++yc]=[],Ss[yc]={objId:0,contentsObjId:0,userUnit:Number(Ae),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Ee[0]),topRightY:Number(Ee[1])}},le(yc),ei(Ni[Ir])},vd=function(Ee,bt){var Ur,mn,to;switch(J=bt||J,"string"==typeof Ee&&(Ur=Qt(Ee.toLowerCase()),Array.isArray(Ur)&&(mn=Ur[0],to=Ur[1])),Array.isArray(Ee)&&(mn=Ee[0]*wa,to=Ee[1]*wa),isNaN(mn)&&(mn=xe[0],to=xe[1]),(mn>14400||to>14400)&&(Js.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),mn=Math.min(14400,mn),to=Math.min(14400,to)),xe=[mn,to],J.substr(0,1)){case"l":to>mn&&(xe=[to,mn]);break;case"p":mn>to&&(xe=[to,mn])}rf(xe),Tl(hs),Hr(Fp),0!==mp&&Hr(mp+" J"),0!==Ym&&Hr(Ym+" j"),Ys.publish("addPage",{pageNumber:yc})},lh=function(Ee){Ee>0&&Ee<=yc&&(Ni.splice(Ee,1),Ss.splice(Ee,1),yc--,Ir>yc&&(Ir=yc),this.setPage(Ir))},le=function(Ee){Ee>0&&Ee<=yc&&(Ir=Ee)},ye=Qe.__private__.getNumberOfPages=Qe.getNumberOfPages=function(){return Ni.length-1},K=function(Ee,bt,Ur){var mn,to=void 0;return Ur=Ur||{},bt=void 0!==bt?bt:Ws[tl].fontStyle,mn=(Ee=void 0!==Ee?Ee:Ws[tl].fontName).toLowerCase(),void 0!==al[mn]&&void 0!==al[mn][bt]?to=al[mn][bt]:void 0!==al[Ee]&&void 0!==al[Ee][bt]?to=al[Ee][bt]:!1===Ur.disableWarning&&Js.warn("Unable to look up font label for font '"+Ee+"', '"+bt+"'. Refer to getFontList() for available fonts."),to||Ur.noFallback||null==(to=al.times[bt])&&(to=al.times.normal),to},E=Qe.__private__.putInfo=function(){var Ee=pc(),bt=function(mn){return mn};for(var Ur in null!==_t&&(bt=Yr.encryptor(Ee,0)),Hr("<<"),Hr("/Producer ("+Sc(bt("jsPDF "+Xi.version))+")"),As)As.hasOwnProperty(Ur)&&As[Ur]&&Hr("/"+Ur.substr(0,1).toUpperCase()+Ur.substr(1)+" ("+Sc(bt(As[Ur]))+")");Hr("/CreationDate ("+Sc(bt(jo))+")"),Hr(">>"),Hr("endobj")},F=Qe.__private__.putCatalog=function(Ee){var bt=(Ee=Ee||{}).rootDictionaryObjId||Lp;switch(pc(),Hr("<<"),Hr("/Type /Catalog"),Hr("/Pages "+bt+" 0 R"),va||(va="fullwidth"),va){case"fullwidth":Hr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Hr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Hr("/OpenAction [3 0 R /Fit]");break;case"original":Hr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ur=""+va;"%"===Ur.substr(Ur.length-1)&&(va=parseInt(va)/100),"number"==typeof va&&Hr("/OpenAction [3 0 R /XYZ null null "+zo(va)+"]")}switch(js||(js="continuous"),js){case"continuous":Hr("/PageLayout /OneColumn");break;case"single":Hr("/PageLayout /SinglePage");break;case"two":case"twoleft":Hr("/PageLayout /TwoColumnLeft");break;case"tworight":Hr("/PageLayout /TwoColumnRight")}Es&&Hr("/PageMode /"+Es),Ys.publish("putCatalog"),Hr(">>"),Hr("endobj")},_e=Qe.__private__.putTrailer=function(){Hr("trailer"),Hr("<<"),Hr("/Size "+(bn+1)),Hr("/Root "+bn+" 0 R"),Hr("/Info "+(bn-1)+" 0 R"),null!==_t&&Hr("/Encrypt "+Yr.oid+" 0 R"),Hr("/ID [ <"+So+"> <"+So+"> ]"),Hr(">>")},Ge=Qe.__private__.putHeader=function(){Hr("%PDF-"+Ar),Hr("%\xba\xdf\xac\xe0")},st=Qe.__private__.putXRef=function(){var Ee="0000000000";Hr("xref"),Hr("0 "+(bn+1)),Hr("0000000000 65535 f ");for(var bt=1;bt<=bn;bt++)Hr("function"==typeof Xn[bt]?(Ee+Xn[bt]()).slice(-10)+" 00000 n ":void 0!==Xn[bt]?(Ee+Xn[bt]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},Tt=Qe.__private__.buildDocument=function(){bn=0,Po=0,so=[],Xn=[],$i=[],Lp=Vc(),md=Vc(),ei(so),Ys.publish("buildDocument"),Ge(),fp(),function(){Ys.publish("putAdditionalObjects");for(var Ee=0;Ee<$i.length;Ee++){var bt=$i[Ee];Lu(bt.objId,!0),Hr(bt.content),Hr("endobj")}Ys.publish("postPutAdditionalObjects")}(),function(){var Ee=[];(function(){for(var Ee in Ws)Ws.hasOwnProperty(Ee)&&(!1===vt||!0===vt&&Ht.hasOwnProperty(Ee))&&th(Ws[Ee])})(),function(){var Ee;for(Ee in dc)dc.hasOwnProperty(Ee)&&Ip(dc[Ee])}(),function(){for(var Ee in Ou)Ou.hasOwnProperty(Ee)&&nh(Ou[Ee])}(),function(Ee){var bt;for(bt in Ol)Ol.hasOwnProperty(bt)&&(Ol[bt]instanceof Ra?Pm(Ol[bt]):Ol[bt]instanceof es&&Mm(Ol[bt],Ee))}(Ee),Ys.publish("putResources"),Ee.forEach(Fc),Fc({resourcesOid:md,objectOid:Number.MAX_SAFE_INTEGER}),Ys.publish("postPutResources")}(),null!==_t&&(Yr.oid=pc(),Hr("<<"),Hr("/Filter /Standard"),Hr("/V "+Yr.v),Hr("/R "+Yr.r),Hr("/U <"+Yr.toHexString(Yr.U)+">"),Hr("/O <"+Yr.toHexString(Yr.O)+">"),Hr("/P "+Yr.P),Hr(">>"),Hr("endobj")),E(),F();var Ee=Po;return st(),_e(),Hr("startxref"),Hr(""+Ee),Hr("%%EOF"),ei(Ni[Ir]),so.join("\n")},Kt=Qe.__private__.getBlob=function(Ee){return new Blob([qa(Ee)],{type:"application/pdf"})},fr=Qe.output=Qe.__private__.output=((Ee=function(Ee,bt){switch("string"==typeof(bt=bt||{})?bt={filename:bt}:bt.filename=bt.filename||"generated.pdf",Ee){case void 0:return Tt();case"save":Qe.save(bt.filename);break;case"arraybuffer":return qa(Tt());case"blob":return Kt(Tt());case"bloburi":case"bloburl":if(void 0!==Ea.URL&&"function"==typeof Ea.URL.createObjectURL)return Ea.URL&&Ea.URL.createObjectURL(Kt(Tt()))||void 0;Js.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ur="",mn=Tt();try{Ur=kc(mn)}catch{Ur=kc(unescape(encodeURIComponent(mn)))}return"data:application/pdf;filename="+bt.filename+";base64,"+Ur;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Ea)){var to="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Yo=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';bt.pdfObjectUrl&&(to=bt.pdfObjectUrl,Yo="");var Pi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+to+'"'+Yo+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(bt)+");<\/script></body></html>",ja=Ea.open();return null!==ja&&ja.document.write(Pi),ja}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Ea)){var Ja='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(bt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+bt.filename+'" width="500px" height="400px" /></body></html>',Hs=Ea.open();if(null!==Hs){Hs.document.write(Ja);var Gs=this;Hs.document.documentElement.querySelector("#pdfViewer").onload=function(){Hs.document.title=bt.filename,Hs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Gs.output("bloburl"))}}return Hs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Ea))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Sl='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",bt)+'"></iframe></body></html>',ac=Ea.open();if(null!==ac&&(ac.document.write(Sl),ac.document.title=bt.filename),ac||typeof safari>"u")return ac;break;case"datauri":case"dataurl":return Ea.document.location.href=this.output("datauristring",bt);default:return null}}).foo=function(){try{return Ee.apply(this,arguments)}catch(mn){var bt=mn.stack||"";~bt.indexOf(" at ")&&(bt=bt.split(" at ")[1]);var Ur="Error in function "+bt.split("\n")[0].split("<")[0]+": "+mn.message;if(!Ea.console)throw new Error(Ur);Ea.console.error(Ur,mn),Ea.alert&&alert(Ur)}},Ee.foo.bar=Ee,Ee.foo),nn=function(Ee){return!0===Array.isArray(Ap)&&Ap.indexOf(Ee)>-1};switch(se){case"pt":wa=1;break;case"mm":wa=72/25.4;break;case"cm":wa=72/2.54;break;case"in":wa=72;break;case"px":wa=1==nn("px_scaling")?.75:96/72;break;case"pc":case"em":wa=12;break;case"ex":wa=6;break;default:if("number"!=typeof se)throw new Error("Invalid unit: "+se);wa=se}var Yr=null;ka(),ro();var Go=Qe.__private__.getPageInfo=Qe.getPageInfo=function(Ee){if(isNaN(Ee)||Ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ss[Ee].objId,pageNumber:Ee,pageContext:Ss[Ee]}},Vn=Qe.__private__.getPageInfoByObjId=function(Ee){if(isNaN(Ee)||Ee%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var bt in Ss)if(Ss[bt].objId===Ee)break;return Go(bt)},yi=Qe.__private__.getCurrentPageInfo=Qe.getCurrentPageInfo=function(){return{objId:Ss[Ir].objId,pageNumber:Ir,pageContext:Ss[Ir]}};Qe.addPage=function(){return vd.apply(this,arguments),this},Qe.setPage=function(){return le.apply(this,arguments),ei.call(this,Ni[Ir]),this},Qe.insertPage=function(Ee){return this.addPage(),this.movePage(Ir,Ee),this},Qe.movePage=function(Ee,bt){var Ur,mn;if(Ee>bt){Ur=Ni[Ee],mn=Ss[Ee];for(var to=Ee;to>bt;to--)Ni[to]=Ni[to-1],Ss[to]=Ss[to-1];Ni[bt]=Ur,Ss[bt]=mn,this.setPage(bt)}else if(Ee<bt){Ur=Ni[Ee],mn=Ss[Ee];for(var Yo=Ee;Yo<bt;Yo++)Ni[Yo]=Ni[Yo+1],Ss[Yo]=Ss[Yo+1];Ni[bt]=Ur,Ss[bt]=mn,this.setPage(bt)}return this},Qe.deletePage=function(){return lh.apply(this,arguments),this},Qe.__private__.text=Qe.text=function(Ee,bt,Ur,mn,to){var Yo,Pi,ja,Ja,Hs,Gs,Sl,ac,qs,jc=(mn=mn||{}).scope||this;if("number"==typeof Ee&&"number"==typeof bt&&("string"==typeof Ur||Array.isArray(Ur))){var Ju=Ur;Ur=bt,bt=Ee,Ee=Ju}if(arguments[3]instanceof us?(Jr("The transform parameter of text() with a Matrix value"),qs=to):(ja=arguments[4],Ja=arguments[5],"object"===O(Sl=arguments[3])&&null!==Sl||("string"==typeof ja&&(Ja=ja,ja=null),"string"==typeof Sl&&(Ja=Sl,Sl=null),"number"==typeof Sl&&(ja=Sl,Sl=null),mn={flags:Sl,angle:ja,align:Ja})),isNaN(bt)||isNaN(Ur)||null==Ee)throw new Error("Invalid arguments passed to jsPDF.text");if(0===Ee.length)return jc;var Md,Tu="",xl="number"==typeof mn.lineHeightFactor?mn.lineHeightFactor:Da,nf=jc.internal.scaleFactor;function nm(zi){return zi=zi.split("\t").join(Array(mn.TabLen||9).join(" ")),Sc(zi,Sl)}function _d(zi){for(var na,Os=zi.concat(),_s=[],nu=Os.length;nu--;)"string"==typeof(na=Os.shift())?_s.push(na):Array.isArray(zi)&&(1===na.length||void 0===na[1]&&void 0===na[2])?_s.push(na[0]):_s.push([na[0],na[1],na[2]]);return _s}function yd(zi,na){var Os;if("string"==typeof zi)Os=na(zi)[0];else if(Array.isArray(zi)){for(var _s,nu,Hl=zi.concat(),ou=[],Qu=Hl.length;Qu--;)"string"==typeof(_s=Hl.shift())?ou.push(na(_s)[0]):Array.isArray(_s)&&"string"==typeof _s[0]&&(nu=na(_s[0],_s[1],_s[2]),ou.push([nu[0],nu[1],nu[2]]));Os=ou}return Os}var ch=!1,jp=!0;if("string"==typeof Ee)ch=!0;else if(Array.isArray(Ee)){var Nm=Ee.concat();Pi=[];for(var Rh,Su=Nm.length;Su--;)("string"!=typeof(Rh=Nm.shift())||Array.isArray(Rh)&&"string"!=typeof Rh[0])&&(jp=!1);ch=jp}if(!1===ch)throw new Error('Type of text must be string or Array. "'+Ee+'" is not recognized.');"string"==typeof Ee&&(Ee=Ee.match(/[\r?\n]/)?Ee.split(/\r\n|\r|\n/g):[Ee]);var om=ua/jc.internal.scaleFactor,im=om*(xl-1);switch(mn.baseline){case"bottom":Ur-=im;break;case"top":Ur+=om-im;break;case"hanging":Ur+=om-2*im;break;case"middle":Ur+=om/2-im}if((Gs=mn.maxWidth||0)>0&&("string"==typeof Ee?Ee=jc.splitTextToSize(Ee,Gs):"[object Array]"===Object.prototype.toString.call(Ee)&&(Ee=Ee.reduce(function(zi,na){return zi.concat(jc.splitTextToSize(na,Gs))},[]))),Ys.publish("preProcessText",Yo={text:Ee,x:bt,y:Ur,options:mn,mutex:{pdfEscape:Sc,activeFontKey:tl,fonts:Ws,activeFontSize:ua}}),Ee=Yo.text,ja=(mn=Yo.options).angle,qs instanceof us||!ja||"number"!=typeof ja)ja&&ja instanceof us&&(qs=ja);else{ja*=Math.PI/180,0===mn.rotationDirection&&(ja=-ja),"advanced"===En&&(ja=-ja);var am=Math.cos(ja),sm=Math.sin(ja);qs=new us(am,sm,-sm,am,0,0)}"advanced"!==En||qs||(qs=Wu),void 0!==(Hs=mn.charSpace||Lf)&&(Tu+=po(hr(Hs))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(ac=mn.horizontalScale)&&(Tu+=po(100*ac)+" Tz\n");var Ad=-1,Bl=void 0!==mn.renderingMode?mn.renderingMode:mn.stroke,Hc=jc.internal.getCurrentPageInfo().pageContext;switch(Bl){case 0:case!1:case"fill":Ad=0;break;case 1:case!0:case"stroke":Ad=1;break;case 2:case"fillThenStroke":Ad=2;break;case 3:case"invisible":Ad=3;break;case 4:case"fillAndAddForClipping":Ad=4;break;case 5:case"strokeAndAddPathForClipping":Ad=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ad=6;break;case 7:case"addToPathForClipping":Ad=7}-1!==Ad?Tu+=Ad+" Tr\n":-1!==(void 0!==Hc.usedRenderingMode?Hc.usedRenderingMode:-1)&&(Tu+="0 Tr\n"),-1!==Ad&&(Hc.usedRenderingMode=Ad),Ja=mn.align||"left";var Yu,Ff=ua*xl,jh=jc.internal.pageSize.getWidth(),Qm=Ws[tl];Hs=mn.charSpace||Lf,Gs=mn.maxWidth||0,Sl=Object.assign({autoencode:!0,noBOM:!0},mn.flags);var Jl=[],Nh=function(zi){return jc.getStringUnitWidth(zi,{font:Qm,charSpace:Hs,fontSize:ua,doKerning:!1})*ua/nf};if("[object Array]"===Object.prototype.toString.call(Ee)){var kd;Pi=_d(Ee),"left"!==Ja&&(Yu=Pi.map(Nh));var Ld,Id=0;if("right"===Ja){bt-=Yu[0],Ee=[],Su=Pi.length;for(var f=0;f<Su;f++)0===f?(Ld=Af(bt),kd=hp(Ur)):(Ld=hr(Id-Yu[f]),kd=-Ff),Ee.push([Pi[f],Ld,kd]),Id=Yu[f]}else if("center"===Ja){bt-=Yu[0]/2,Ee=[],Su=Pi.length;for(var v=0;v<Su;v++)0===v?(Ld=Af(bt),kd=hp(Ur)):(Ld=hr((Id-Yu[v])/2),kd=-Ff),Ee.push([Pi[v],Ld,kd]),Id=Yu[v]}else if("left"===Ja){Ee=[],Su=Pi.length;for(var k=0;k<Su;k++)Ee.push(Pi[k])}else if("justify"===Ja&&"Identity-H"===Qm.encoding){Ee=[],Su=Pi.length,Gs=0!==Gs?Gs:jh;for(var P=0,Z=0;Z<Su;Z++)if(kd=0===Z?hp(Ur):-Ff,Ld=0===Z?Af(bt):P,Z<Su-1){var he=hr((Gs-Yu[Z])/(Pi[Z].split(" ").length-1)),Fe=Pi[Z].split(" ");Ee.push([Fe[0]+" ",Ld,kd]),P=0;for(var Be=1;Be<Fe.length;Be++){var ot=(Nh(Fe[Be-1]+" "+Fe[Be])-Nh(Fe[Be]))*nf+he;Ee.push(Be==Fe.length-1?[Fe[Be],ot,0]:[Fe[Be]+" ",ot,0]),P-=ot}}else Ee.push([Pi[Z],Ld,kd]);Ee.push(["",P,0])}else{if("justify"!==Ja)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(Ee=[],Su=Pi.length,Gs=0!==Gs?Gs:jh,Z=0;Z<Su;Z++)kd=0===Z?hp(Ur):-Ff,Ld=0===Z?Af(bt):0,Jl.push(Z<Su-1?po(hr((Gs-Yu[Z])/(Pi[Z].split(" ").length-1))):0),Ee.push([Pi[Z],Ld,kd])}}!0===("boolean"==typeof mn.R2L?mn.R2L:os)&&(Ee=yd(Ee,function(zi,na,Os){return[zi.split("").reverse().join(""),na,Os]})),Ys.publish("postProcessText",Yo={text:Ee,x:bt,y:Ur,options:mn,mutex:{pdfEscape:Sc,activeFontKey:tl,fonts:Ws,activeFontSize:ua}}),Ee=Yo.text,Md=Yo.mutex.isHex||!1;var jr=Ws[tl].encoding;"WinAnsiEncoding"!==jr&&"StandardEncoding"!==jr||(Ee=yd(Ee,function(zi,na,Os){return[nm(zi),na,Os]})),Pi=_d(Ee),Ee=[];for(var Rr,_n,Tn,Mi=Array.isArray(Pi[0])?1:0,sa="",Ta=function(zi,na,Os){var _s="";return Os instanceof us?(Os="number"==typeof mn.angle?Yd(Os,new us(1,0,0,1,zi,na)):Yd(new us(1,0,0,1,zi,na),Os),"advanced"===En&&(Os=Yd(new us(1,0,0,-1,0,0),Os)),_s=Os.join(" ")+" Tm\n"):_s=po(zi)+" "+po(na)+" Td\n",_s},Fi=0;Fi<Pi.length;Fi++){switch(sa="",Mi){case 1:Tn=(Md?"<":"(")+Pi[Fi][0]+(Md?">":")"),Rr=parseFloat(Pi[Fi][1]),_n=parseFloat(Pi[Fi][2]);break;case 0:Tn=(Md?"<":"(")+Pi[Fi]+(Md?">":")"),Rr=Af(bt),_n=hp(Ur)}void 0!==Jl&&void 0!==Jl[Fi]&&(sa=Jl[Fi]+" Tw\n"),0===Fi?Ee.push(sa+Ta(Rr,_n,qs)+Tn):0===Mi?Ee.push(sa+Tn):1===Mi&&Ee.push(sa+Ta(Rr,_n,qs)+Tn)}Ee=Ee.join(0===Mi?" Tj\nT* ":" Tj\n"),Ee+=" Tj\n";var fa="BT\n/";return fa+=tl+" "+ua+" Tf\n",fa+=po(ua*xl)+" TL\n",fa+=kf+"\n",fa+=Tu,fa+=Ee,Hr(fa+="ET"),Ht[tl]=!0,jc};var ai=Qe.__private__.clip=Qe.clip=function(Ee){return Hr("evenodd"===Ee?"W*":"W"),this};Qe.clipEvenOdd=function(){return ai("evenodd")},Qe.__private__.discardPath=Qe.discardPath=function(){return Hr("n"),this};var Ti=Qe.__private__.isValidStyle=function(Ee){var bt=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Ee)&&(bt=!0),bt};Qe.__private__.setDefaultPathOperation=Qe.setDefaultPathOperation=function(Ee){return Ti(Ee)&&(tt=Ee),this};var Ui=Qe.__private__.getStyle=Qe.getStyle=function(Ee){var bt=tt;switch(Ee){case"D":case"S":bt="S";break;case"F":bt="f";break;case"FD":case"DF":bt="B";break;case"f":case"f*":case"B":case"B*":bt=Ee}return bt},vi=Qe.close=function(){return Hr("h"),this};Qe.stroke=function(){return Hr("S"),this},Qe.fill=function(Ee){return Uo("f",Ee),this},Qe.fillEvenOdd=function(Ee){return Uo("f*",Ee),this},Qe.fillStroke=function(Ee){return Uo("B",Ee),this},Qe.fillStrokeEvenOdd=function(Ee){return Uo("B*",Ee),this};var Uo=function(Ee,bt){"object"===O(bt)?Co(bt,Ee):Hr(Ee)},go=function(Ee){null===Ee||"advanced"===En&&void 0===Ee||(Ee=Ui(Ee),Hr(Ee))};function pi(Ee,bt,Ur,mn,to){var Yo=new es(bt||this.boundingBox,Ur||this.xStep,mn||this.yStep,this.gState,to||this.matrix);Yo.stream=this.stream;var Pi=Ee+"$$"+this.cloneIndex+++"$$";return Du(Pi,Yo),Yo}var Co=function(Ee,bt){var Ur=ku[Ee.key],mn=Ol[Ur];if(mn instanceof Ra)Hr("q"),Hr(hi(bt)),mn.gState&&Qe.setGState(mn.gState),Hr(Ee.matrix.toString()+" cm"),Hr("/"+Ur+" sh"),Hr("Q");else if(mn instanceof es){var to=new us(1,0,0,-1,0,Ih());Ee.matrix&&(to=to.multiply(Ee.matrix||Wu),Ur=pi.call(mn,Ee.key,Ee.boundingBox,Ee.xStep,Ee.yStep,to).id),Hr("q"),Hr("/Pattern cs"),Hr("/"+Ur+" scn"),mn.gState&&Qe.setGState(mn.gState),Hr(bt),Hr("Q")}},hi=function(Ee){switch(Ee){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Gi=Qe.moveTo=function(Ee,bt){return Hr(po(hr(Ee))+" "+po(rn(bt))+" m"),this},Va=Qe.lineTo=function(Ee,bt){return Hr(po(hr(Ee))+" "+po(rn(bt))+" l"),this},qi=Qe.curveTo=function(Ee,bt,Ur,mn,to,Yo){return Hr([po(hr(Ee)),po(rn(bt)),po(hr(Ur)),po(rn(mn)),po(hr(to)),po(rn(Yo)),"c"].join(" ")),this};Qe.__private__.line=Qe.line=function(Ee,bt,Ur,mn,to){if(isNaN(Ee)||isNaN(bt)||isNaN(Ur)||isNaN(mn)||!Ti(to))throw new Error("Invalid arguments passed to jsPDF.line");return"compat"===En?this.lines([[Ur-Ee,mn-bt]],Ee,bt,[1,1],to||"S"):this.lines([[Ur-Ee,mn-bt]],Ee,bt,[1,1]).stroke()},Qe.__private__.lines=Qe.lines=function(Ee,bt,Ur,mn,to,Yo){var Pi,ja,Ja,Hs,Gs,Ju,Tu,Md;if("number"==typeof Ee&&(Md=Ur,Ur=bt,bt=Ee,Ee=Md),mn=mn||[1,1],Yo=Yo||!1,isNaN(bt)||isNaN(Ur)||!Array.isArray(Ee)||!Array.isArray(mn)||!Ti(to)||"boolean"!=typeof Yo)throw new Error("Invalid arguments passed to jsPDF.lines");for(Gi(bt,Ur),Pi=mn[0],ja=mn[1],Hs=Ee.length,Ju=bt,Tu=Ur,Ja=0;Ja<Hs;Ja++)2===(Gs=Ee[Ja]).length?Va(Ju=Gs[0]*Pi+Ju,Tu=Gs[1]*ja+Tu):qi(Gs[0]*Pi+Ju,Gs[1]*ja+Tu,Gs[2]*Pi+Ju,Gs[3]*ja+Tu,Ju=Gs[4]*Pi+Ju,Tu=Gs[5]*ja+Tu);return Yo&&vi(),go(to),this},Qe.path=function(Ee){for(var bt=0;bt<Ee.length;bt++){var Ur=Ee[bt],mn=Ur.c;switch(Ur.op){case"m":Gi(mn[0],mn[1]);break;case"l":Va(mn[0],mn[1]);break;case"c":qi.apply(this,mn);break;case"h":vi()}}return this},Qe.__private__.rect=Qe.rect=function(Ee,bt,Ur,mn,to){if(isNaN(Ee)||isNaN(bt)||isNaN(Ur)||isNaN(mn)||!Ti(to))throw new Error("Invalid arguments passed to jsPDF.rect");return"compat"===En&&(mn=-mn),Hr([po(hr(Ee)),po(rn(bt)),po(hr(Ur)),po(hr(mn)),"re"].join(" ")),go(to),this},Qe.__private__.triangle=Qe.triangle=function(Ee,bt,Ur,mn,to,Yo,Pi){if(isNaN(Ee)||isNaN(bt)||isNaN(Ur)||isNaN(mn)||isNaN(to)||isNaN(Yo)||!Ti(Pi))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ur-Ee,mn-bt],[to-Ur,Yo-mn],[Ee-to,bt-Yo]],Ee,bt,[1,1],Pi,!0),this},Qe.__private__.roundedRect=Qe.roundedRect=function(Ee,bt,Ur,mn,to,Yo,Pi){if(isNaN(Ee)||isNaN(bt)||isNaN(Ur)||isNaN(mn)||isNaN(to)||isNaN(Yo)||!Ti(Pi))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ja=4/3*(Math.SQRT2-1);return to=Math.min(to,.5*Ur),Yo=Math.min(Yo,.5*mn),this.lines([[Ur-2*to,0],[to*ja,0,to,Yo-Yo*ja,to,Yo],[0,mn-2*Yo],[0,Yo*ja,-to*ja,Yo,-to,Yo],[2*to-Ur,0],[-to*ja,0,-to,-Yo*ja,-to,-Yo],[0,2*Yo-mn],[0,-Yo*ja,to*ja,-Yo,to,-Yo]],Ee+to,bt,[1,1],Pi,!0),this},Qe.__private__.ellipse=Qe.ellipse=function(Ee,bt,Ur,mn,to){if(isNaN(Ee)||isNaN(bt)||isNaN(Ur)||isNaN(mn)||!Ti(to))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Yo=4/3*(Math.SQRT2-1)*Ur,Pi=4/3*(Math.SQRT2-1)*mn;return Gi(Ee+Ur,bt),qi(Ee+Ur,bt-Pi,Ee+Yo,bt-mn,Ee,bt-mn),qi(Ee-Yo,bt-mn,Ee-Ur,bt-Pi,Ee-Ur,bt),qi(Ee-Ur,bt+Pi,Ee-Yo,bt+mn,Ee,bt+mn),qi(Ee+Yo,bt+mn,Ee+Ur,bt+Pi,Ee+Ur,bt),go(to),this},Qe.__private__.circle=Qe.circle=function(Ee,bt,Ur,mn){if(isNaN(Ee)||isNaN(bt)||isNaN(Ur)||!Ti(mn))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Ee,bt,Ur,Ur,mn)},Qe.setFont=function(Ee,bt,Ur){return Ur&&(bt=gi(bt,Ur)),tl=K(Ee,bt,{disableWarning:!1}),this};var xa=Qe.__private__.getFont=Qe.getFont=function(){return Ws[K.apply(Qe,arguments)]};Qe.__private__.getFontList=Qe.getFontList=function(){var Ee,bt,Ur={};for(Ee in al)if(al.hasOwnProperty(Ee))for(bt in Ur[Ee]=[],al[Ee])al[Ee].hasOwnProperty(bt)&&Ur[Ee].push(bt);return Ur},Qe.addFont=function(Ee,bt,Ur,mn,to){var Yo=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==Yo.indexOf(arguments[3])?to=arguments[3]:arguments[3]&&-1==Yo.indexOf(arguments[3])&&(Ur=gi(Ur,mn)),tf.call(this,Ee,bt,Ur,to=to||"Identity-H")};var Da,hs=Q.lineWidth||.200025,Dl=Qe.__private__.getLineWidth=Qe.getLineWidth=function(){return hs},Tl=Qe.__private__.setLineWidth=Qe.setLineWidth=function(Ee){return hs=Ee,Hr(po(hr(Ee))+" w"),this};Qe.__private__.setLineDash=Xi.API.setLineDash=Xi.API.setLineDashPattern=function(Ee,bt){if(Ee=Ee||[],bt=bt||0,isNaN(bt)||!Array.isArray(Ee))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Ee=Ee.map(function(Ur){return po(hr(Ur))}).join(" "),bt=po(hr(bt)),Hr("["+Ee+"] "+bt+" d"),this};var Pc=Qe.__private__.getLineHeight=Qe.getLineHeight=function(){return ua*Da};Qe.__private__.getLineHeight=Qe.getLineHeight=function(){return ua*Da};var Mh=Qe.__private__.setLineHeightFactor=Qe.setLineHeightFactor=function(Ee){return"number"==typeof(Ee=Ee||1.15)&&(Da=Ee),this},mu=Qe.__private__.getLineHeightFactor=Qe.getLineHeightFactor=function(){return Da};Mh(Q.lineHeight);var Af=Qe.__private__.getHorizontalCoordinate=function(Ee){return hr(Ee)},hp=Qe.__private__.getVerticalCoordinate=function(Ee){return"advanced"===En?Ee:Ss[Ir].mediaBox.topRightY-Ss[Ir].mediaBox.bottomLeftY-hr(Ee)},wg=Qe.__private__.getHorizontalCoordinateString=Qe.getHorizontalCoordinateString=function(Ee){return po(Af(Ee))},Ah=Qe.__private__.getVerticalCoordinateString=Qe.getVerticalCoordinateString=function(Ee){return po(hp(Ee))},Fp=Q.strokeColor||"0 G";Qe.__private__.getStrokeColor=Qe.getDrawColor=function(){return gd(Fp)},Qe.__private__.setStrokeColor=Qe.setDrawColor=function(Ee,bt,Ur,mn){return Fp=zc({ch1:Ee,ch2:bt,ch3:Ur,ch4:mn,pdfColorType:"draw",precision:2}),Hr(Fp),this};var kh=Q.fillColor||"0 g";Qe.__private__.getFillColor=Qe.getFillColor=function(){return gd(kh)},Qe.__private__.setFillColor=Qe.setFillColor=function(Ee,bt,Ur,mn){return kh=zc({ch1:Ee,ch2:bt,ch3:Ur,ch4:mn,pdfColorType:"fill",precision:2}),Hr(kh),this};var kf=Q.textColor||"0 g",qg=Qe.__private__.getTextColor=Qe.getTextColor=function(){return gd(kf)};Qe.__private__.setTextColor=Qe.setTextColor=function(Ee,bt,Ur,mn){return kf=zc({ch1:Ee,ch2:bt,ch3:Ur,ch4:mn,pdfColorType:"text",precision:3}),this};var Lf=Q.charSpace,xg=Qe.__private__.getCharSpace=Qe.getCharSpace=function(){return parseFloat(Lf||0)};Qe.__private__.setCharSpace=Qe.setCharSpace=function(Ee){if(isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Lf=Ee,this};var mp=0;Qe.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Qe.__private__.setLineCap=Qe.setLineCap=function(Ee){var bt=Qe.CapJoinStyles[Ee];if(void 0===bt)throw new Error("Line cap style of '"+Ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mp=bt,Hr(bt+" J"),this};var Ym=0;Qe.__private__.setLineJoin=Qe.setLineJoin=function(Ee){var bt=Qe.CapJoinStyles[Ee];if(void 0===bt)throw new Error("Line join style of '"+Ee+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ym=bt,Hr(bt+" j"),this},Qe.__private__.setLineMiterLimit=Qe.__private__.setMiterLimit=Qe.setLineMiterLimit=Qe.setMiterLimit=function(Ee){if(Ee=Ee||0,isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Hr(po(hr(Ee))+" M"),this},Qe.GState=Ri,Qe.setGState=function(Ee){(Ee="string"==typeof Ee?dc[vl[Ee]]:Lh(null,Ee)).equals(Pd)||(Hr("/"+Ee.id+" gs"),Pd=Ee)};var Lh=function(Ee,bt){if(!Ee||!vl[Ee]){var Ur=!1;for(var mn in dc)if(dc.hasOwnProperty(mn)&&dc[mn].equals(bt)){Ur=!0;break}if(Ur)bt=dc[mn];else{var to="GS"+(Object.keys(dc).length+1).toString(10);dc[to]=bt,bt.id=to}return Ee&&(vl[Ee]=bt.id),Ys.publish("addGState",bt),bt}};Qe.addGState=function(Ee,bt){return Lh(Ee,bt),this},Qe.saveGraphicsState=function(){return Hr("q"),Jd.push({key:tl,size:ua,color:kf}),this},Qe.restoreGraphicsState=function(){Hr("Q");var Ee=Jd.pop();return tl=Ee.key,ua=Ee.size,kf=Ee.color,Pd=null,this},Qe.setCurrentTransformationMatrix=function(Ee){return Hr(Ee.toString()+" cm"),this},Qe.comment=function(Ee){return Hr("#"+Ee),this};var tm=function(Ee,bt){var Ur=Ee||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ur},set:function(Yo){isNaN(Yo)||(Ur=parseFloat(Yo))}});var mn=bt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return mn},set:function(Yo){isNaN(Yo)||(mn=parseFloat(Yo))}});var to="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return to},set:function(Yo){to=Yo.toString()}}),this},Im=function(Ee,bt,Ur,mn){tm.call(this,Ee,bt),this.type="rect";var to=Ur||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return to},set:function(Pi){isNaN(Pi)||(to=parseFloat(Pi))}});var Yo=mn||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Yo},set:function(Pi){isNaN(Pi)||(Yo=parseFloat(Pi))}}),this},Rm=function(){this.page=yc,this.currentPage=Ir,this.pages=Ni.slice(0),this.pagesContext=Ss.slice(0),this.x=Al,this.y=$a,this.matrix=Kc,this.width=gp(Ir),this.height=Ih(Ir),this.outputDestination=_a,this.id="",this.objectNumber=-1};Rm.prototype.restore=function(){yc=this.page,Ss=this.pagesContext,Ni=this.pages,Al=this.x,$a=this.y,Kc=this.matrix,rm(Ir=this.currentPage,this.width),jm(Ir,this.height),_a=this.outputDestination};var Fm=function(Ee,bt,Ur,mn,to){Bu.push(new Rm),yc=Ir=0,Ni=[],Al=Ee,$a=bt,Kc=to,rf([Ur,mn])};for(var Rf in Qe.beginFormObject=function(Ee,bt,Ur,mn,to){return Fm(Ee,bt,Ur,mn,to),this},Qe.endFormObject=function(Ee){return function(Ee){if(kp[Ee])Bu.pop().restore();else{var bt=new Rm,Ur="Xo"+(Object.keys(Ou).length+1).toString(10);bt.id=Ur,kp[Ee]=Ur,Ou[Ur]=bt,Ys.publish("addFormObject",bt),Bu.pop().restore()}}(Ee),this},Qe.doFormObject=function(Ee,bt){var Ur=Ou[kp[Ee]];return Hr("q"),Hr(bt.toString()+" cm"),Hr("/"+Ur.id+" Do"),Hr("Q"),this},Qe.getFormObject=function(Ee){var bt=Ou[kp[Ee]];return{x:bt.x,y:bt.y,width:bt.width,height:bt.height,matrix:bt.matrix}},Qe.save=function(Ee,bt){return Ee=Ee||"generated.pdf",(bt=bt||{}).returnPromise=bt.returnPromise||!1,!1===bt.returnPromise?(zl(Kt(Tt()),Ee),"function"==typeof zl.unload&&Ea.setTimeout&&setTimeout(zl.unload,911),this):new Promise(function(Ur,mn){try{var to=zl(Kt(Tt()),Ee);"function"==typeof zl.unload&&Ea.setTimeout&&setTimeout(zl.unload,911),Ur(to)}catch(Yo){mn(Yo.message)}})},Xi.API)Xi.API.hasOwnProperty(Rf)&&("events"===Rf&&Xi.API.events.length?function(Ee,bt){var mn,to;for(to=bt.length-1;-1!==to;to--)Ee.subscribe.apply(Ee,[bt[to][0]].concat("function"==typeof(mn=bt[to][1])?[mn]:mn))}(Ys,Xi.API.events):Qe[Rf]=Xi.API[Rf]);var gp=Qe.getPageWidth=function(Ee){return(Ss[Ee=Ee||Ir].mediaBox.topRightX-Ss[Ee].mediaBox.bottomLeftX)/wa},rm=Qe.setPageWidth=function(Ee,bt){Ss[Ee].mediaBox.topRightX=bt*wa+Ss[Ee].mediaBox.bottomLeftX},Ih=Qe.getPageHeight=function(Ee){return(Ss[Ee=Ee||Ir].mediaBox.topRightY-Ss[Ee].mediaBox.bottomLeftY)/wa},jm=Qe.setPageHeight=function(Ee,bt){Ss[Ee].mediaBox.topRightY=bt*wa+Ss[Ee].mediaBox.bottomLeftY};return Qe.internal={pdfEscape:Sc,getStyle:Ui,getFont:xa,getFontSize:da,getCharSpace:xg,getTextColor:qg,getLineHeight:Pc,getLineHeightFactor:mu,getLineWidth:Dl,write:Is,getHorizontalCoordinate:Af,getVerticalCoordinate:hp,getCoordinateString:wg,getVerticalCoordinateString:Ah,collections:{},newObject:pc,newAdditionalObject:eh,newObjectDeferred:Vc,newObjectDeferredBegin:Lu,getFilters:Iu,putStream:ru,events:Ys,scaleFactor:wa,pageSize:{getWidth:function(){return gp(Ir)},setWidth:function(Ee){rm(Ir,Ee)},getHeight:function(){return Ih(Ir)},setHeight:function(Ee){jm(Ir,Ee)}},encryptionOptions:_t,encryption:Yr,getEncryptor:function(Ee){return null!==_t?Yr.encryptor(Ee,0):function(bt){return bt}},output:fr,getNumberOfPages:ye,pages:Ni,out:Hr,f2:zo,f3:cr,getPageInfo:Go,getPageInfoByObjId:Vn,getCurrentPageInfo:yi,getPDFVersion:pr,Point:tm,Rectangle:Im,Matrix:us,hasHotfix:nn},Object.defineProperty(Qe.internal.pageSize,"width",{get:function(){return gp(Ir)},set:function(Ee){rm(Ir,Ee)},enumerable:!0,configurable:!0}),Object.defineProperty(Qe.internal.pageSize,"height",{get:function(){return Ih(Ir)},set:function(Ee){jm(Ir,Ee)},enumerable:!0,configurable:!0}),function(Ee){for(var bt=0,Ur=Bi.length;bt<Ur;bt++){var mn=tf.call(this,Ee[bt][0],Ee[bt][1],Ee[bt][2],Bi[bt][3],!0);!1===vt&&(Ht[mn]=!0);var to=Ee[bt][0].split("-");ef({id:mn,fontName:to[0],fontStyle:to[1]||""})}Ys.publish("addFonts",{fonts:Ws,dictionary:al})}.call(Qe,Bi),tl="F1",vd(xe,J),Ys.publish("initialized"),Qe}Jo.prototype.lsbFirstWord=function(Q){return String.fromCharCode(Q>>0&255,Q>>8&255,Q>>16&255,Q>>24&255)},Jo.prototype.toHexString=function(Q){return Q.split("").map(function(j){return("0"+(255&j.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Jo.prototype.hexToBytes=function(Q){for(var j=[],J=0;J<Q.length;J+=2)j.push(String.fromCharCode(parseInt(Q.substr(J,2),16)));return j.join("")},Jo.prototype.processOwnerPassword=function(Q,j){return uo(dt(j).substr(0,5),Q)},Jo.prototype.encryptor=function(Q,j){var J=dt(this.encryptionKey+String.fromCharCode(255&Q,Q>>8&255,Q>>16&255,255&j,j>>8&255)).substr(0,10);return function(se){return uo(J,se)}},Ri.prototype.equals=function(Q){var j,J="id,objectNumber,equals";if(!Q||O(Q)!==O(this))return!1;var se=0;for(j in this)if(!(J.indexOf(j)>=0)){if(this.hasOwnProperty(j)&&!Q.hasOwnProperty(j)||this[j]!==Q[j])return!1;se++}for(j in Q)Q.hasOwnProperty(j)&&J.indexOf(j)<0&&se--;return 0===se},Xi.API={events:[]},Xi.version="3.0.1";var cs=Xi.API,cc=1,Il=function(Q){return Q.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vc=function(Q){return Q.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Aa=function(Q){return Q.toFixed(2)},uc=function(Q){return Q.toFixed(5)};cs.__acroform__={};var Ic=function(Q,j){Q.prototype=Object.create(j.prototype),Q.prototype.constructor=Q},sd=function(Q){return Q*cc},Rc=function(Q){var j=new Yp,J=Ve.internal.getHeight(Q)||0,se=Ve.internal.getWidth(Q)||0;return j.BBox=[0,0,Number(Aa(se)),Number(Aa(J))],j},Dd=cs.__acroform__.setBit=function(Q,j){if(Q=Q||0,j=j||0,isNaN(Q)||isNaN(j))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Q|1<<j},zd=cs.__acroform__.clearBit=function(Q,j){if(Q=Q||0,j=j||0,isNaN(Q)||isNaN(j))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Q&~(1<<j)},Jp=cs.__acroform__.getBit=function(Q,j){if(isNaN(Q)||isNaN(j))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return Q&1<<j?1:0},Ks=cs.__acroform__.getBitForPdf=function(Q,j){if(isNaN(Q)||isNaN(j))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Jp(Q,j-1)},dl=cs.__acroform__.setBitForPdf=function(Q,j){if(isNaN(Q)||isNaN(j))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Dd(Q,j-1)},Rl=cs.__acroform__.clearBitForPdf=function(Q,j){if(isNaN(Q)||isNaN(j))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zd(Q,j-1)},Gl=cs.__acroform__.calculateCoordinates=function(Q,j){var J=j.internal.getHorizontalCoordinate,se=j.internal.getVerticalCoordinate,xe=Q[0],fe=Q[1],De=Q[2],Ae=Q[3],Ne={};return Ne.lowerLeft_X=J(xe)||0,Ne.lowerLeft_Y=se(fe+Ae)||0,Ne.upperRight_X=J(xe+De)||0,Ne.upperRight_Y=se(fe)||0,[Number(Aa(Ne.lowerLeft_X)),Number(Aa(Ne.lowerLeft_Y)),Number(Aa(Ne.upperRight_X)),Number(Aa(Ne.upperRight_Y))]},ld=function(Q){if(Q.appearanceStreamContent)return Q.appearanceStreamContent;if(Q.V||Q.DV){var j=[],se=qu(Q,Q._V||Q.DV),xe=Q.scope.internal.getFont(Q.fontName,Q.fontStyle).id;j.push("/Tx BMC"),j.push("q"),j.push("BT"),j.push(Q.scope.__private__.encodeColorString(Q.color)),j.push("/"+xe+" "+Aa(se.fontSize)+" Tf"),j.push("1 0 0 1 0 0 Tm"),j.push(se.text),j.push("ET"),j.push("Q"),j.push("EMC");var fe=Rc(Q);return fe.scope=Q.scope,fe.stream=j.join("\n"),fe}},qu=function(Q,j){var J=0===Q.fontSize?Q.maxFontSize:Q.fontSize,se={text:"",fontSize:""},xe=(j=")"==(j="("==j.substr(0,1)?j.substr(1):j).substr(j.length-1)?j.substr(0,j.length-1):j).split(" ");xe=xe.map(Q.multiline?function(cr){return cr.split("\n")}:function(cr){return[cr]});var fe=J,De=Ve.internal.getHeight(Q)||0;De=De<0?-De:De;var cr,Ae=Ve.internal.getWidth(Q)||0;Ae=Ae<0?-Ae:Ae,fe++;e:for(;fe>0;){j="",fe--;var tt,_t,vt=xu("3",Q,fe).height,Ht=Q.multiline?De-fe:(De-vt)/2,Qe=Ht+=2,Ar=0,pr=0,Sr=0;if(fe<=0){j="(...) Tj\n",j+="% Width of Text: "+xu(j,Q,fe=12).width+", FieldWidth:"+Ae+"\n";break}for(var Qt="",Lr=0,En=0;En<xe.length;En++)if(xe.hasOwnProperty(En)){var qn=!1;if(1!==xe[En].length&&Sr!==xe[En].length-1){if((vt+2)*(Lr+2)+2>De)continue e;Qt+=xe[En][Sr],qn=!0,pr=En,En--}else{Qt=" "==(Qt+=xe[En][Sr]+" ").substr(Qt.length-1)?Qt.substr(0,Qt.length-1):Qt;var Fo=parseInt(En),gi=(cr=Fo)+1<xe.length&&xu(Qt+" "+xe[cr+1][0],Q,fe).width<=Ae-4,po=En>=xe.length-1;if(gi&&!po){Qt+=" ",Sr=0;continue}if(gi||po){if(po)pr=Fo;else if(Q.multiline&&(vt+2)*(Lr+2)+2>De)continue e}else{if(!Q.multiline||(vt+2)*(Lr+2)+2>De)continue e;pr=Fo}}for(var Jr="",lo=Ar;lo<=pr;lo++){var zo=xe[lo];if(Q.multiline){if(lo===pr){Jr+=zo[Sr]+" ",Sr=(Sr+1)%zo.length;continue}if(lo===Ar){Jr+=zo[zo.length-1]+" ";continue}}Jr+=zo[0]+" "}switch(Jr=" "==Jr.substr(Jr.length-1)?Jr.substr(0,Jr.length-1):Jr,_t=xu(Jr,Q,fe).width,Q.textAlign){case"right":tt=Ae-_t-2;break;case"center":tt=(Ae-_t)/2;break;default:tt=2}j+=Aa(tt)+" "+Aa(Qe)+" Td\n",j+="("+Il(Jr)+") Tj\n",j+=-Aa(tt)+" 0 Td\n",Qe=-(fe+2),_t=0,Ar=qn?pr:pr+1,Lr++,Qt=""}break}return se.text=j,se.fontSize=fe,se},xu=function(Q,j,J){var se=j.scope.internal.getFont(j.fontName,j.fontStyle),xe=j.scope.getStringUnitWidth(Q,{font:se,fontSize:parseFloat(J),charSpace:0})*parseFloat(J);return{height:j.scope.getStringUnitWidth("3",{font:se,fontSize:parseFloat(J),charSpace:0})*parseFloat(J)*1.5,width:xe}},Dp={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Dc=function(Q,j){var J={type:"reference",object:Q};void 0===j.internal.getPageInfo(Q.page).pageContext.annotations.find(function(se){return se.type===J.type&&se.object===J.object})&&j.internal.getPageInfo(Q.page).pageContext.annotations.push(J)},oc=cs.__acroform__.arrayToPdfArray=function(Q,j,J){var se=function(De){return De};if(Array.isArray(Q)){for(var xe="[",fe=0;fe<Q.length;fe++)switch(0!==fe&&(xe+=" "),O(Q[fe])){case"boolean":case"number":case"object":xe+=Q[fe].toString();break;case"string":"/"!==Q[fe].substr(0,1)?(void 0!==j&&J&&(se=J.internal.getEncryptor(j)),xe+="("+Il(se(Q[fe].toString()))+")"):xe+=Q[fe].toString()}return xe+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Tp=function(Q,j,J){var se=function(xe){return xe};return void 0!==j&&J&&(se=J.internal.getEncryptor(j)),(Q=Q||"").toString(),"("+Il(se(Q))+")"},ml=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Q){this._objId=Q}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ml.prototype.toString=function(){return this.objId+" 0 R"},ml.prototype.putStream=function(){var Q=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Q,objectId:this.objId}),this.scope.internal.out("endobj")},ml.prototype.getKeyValueListForStream=function(){var Q=[],j=Object.getOwnPropertyNames(this).filter(function(fe){return"content"!=fe&&"appearanceStreamContent"!=fe&&"scope"!=fe&&"objId"!=fe&&"_"!=fe.substring(0,1)});for(var J in j)if(!1===Object.getOwnPropertyDescriptor(this,j[J]).configurable){var se=j[J],xe=this[se];xe&&(Array.isArray(xe)?Q.push({key:se,value:oc(xe,this.objId,this.scope)}):xe instanceof ml?(xe.scope=this.scope,Q.push({key:se,value:xe.objId+" 0 R"})):"function"!=typeof xe&&Q.push({key:se,value:xe}))}return Q};var Yp=function(){ml.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Q,j=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return j},set:function(J){j=J}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(J){Q=J.trim()},get:function(){return Q||null}})};Ic(Yp,ml);var Mu=function(){ml.call(this);var Q,j=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return j.length>0?j:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return j}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Q){var J=function(se){return se};return this.scope&&(J=this.scope.internal.getEncryptor(this.objId)),"("+Il(J(Q))+")"}},set:function(J){Q=J}})};Ic(Mu,ml);var pu=function Q(){ml.call(this);var j=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return j},set:function(Qt){if(isNaN(Qt))throw new Error('Invalid value "'+Qt+'" for attribute F supplied.');j=Qt}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ks(j,3)},set:function(Qt){this.F=Qt?dl(j,3):Rl(j,3)}});var J=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return J},set:function(Qt){if(isNaN(Qt))throw new Error('Invalid value "'+Qt+'" for attribute Ff supplied.');J=Qt}});var se=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==se.length)return se},set:function(Qt){se=void 0!==Qt?Qt:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!se||isNaN(se[0])?0:se[0]},set:function(Qt){se[0]=Qt}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!se||isNaN(se[1])?0:se[1]},set:function(Qt){se[1]=Qt}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!se||isNaN(se[2])?0:se[2]},set:function(Qt){se[2]=Qt}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!se||isNaN(se[3])?0:se[3]},set:function(Qt){se[3]=Qt}});var xe="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return xe},set:function(Qt){switch(Qt){case"/Btn":case"/Tx":case"/Ch":case"/Sig":xe=Qt;break;default:throw new Error('Invalid value "'+Qt+'" for attribute FT supplied.')}}});var fe=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!fe||fe.length<1){if(this instanceof Sd)return;fe="FieldObject"+Q.FieldNum++}var Qt=function(Lr){return Lr};return this.scope&&(Qt=this.scope.internal.getEncryptor(this.objId)),"("+Il(Qt(fe))+")"},set:function(Qt){fe=Qt.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return fe},set:function(Qt){fe=Qt}});var De="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return De},set:function(Qt){De=Qt}});var Ae="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Ae},set:function(Qt){Ae=Qt}});var Ne=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ne},set:function(Qt){Ne=Qt}});var tt=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===tt?50/cc:tt},set:function(Qt){tt=Qt}});var _t="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return _t},set:function(Qt){_t=Qt}});var vt="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!vt||this instanceof Sd||this instanceof Nl))return Tp(vt,this.objId,this.scope)},set:function(Qt){Qt=Qt.toString(),vt=Qt}});var Ht=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Ht)return this instanceof Tc?Ht:Tp(Ht,this.objId,this.scope)},set:function(Qt){Qt=Qt.toString(),Ht=this instanceof Tc?Qt:"("===Qt.substr(0,1)?vc(Qt.substr(1,Qt.length-2)):vc(Qt)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Tc?vc(Ht.substr(1,Ht.length-1)):Ht},set:function(Qt){Qt=Qt.toString(),Ht=this instanceof Tc?"/"+Qt:Qt}});var Qe=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Qe)return Qe},set:function(Qt){this.V=Qt}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Qe)return this instanceof Tc?Qe:Tp(Qe,this.objId,this.scope)},set:function(Qt){Qt=Qt.toString(),Qe=this instanceof Tc?Qt:"("===Qt.substr(0,1)?vc(Qt.substr(1,Qt.length-2)):vc(Qt)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Tc?vc(Qe.substr(1,Qe.length-1)):Qe},set:function(Qt){Qt=Qt.toString(),Qe=this instanceof Tc?"/"+Qt:Qt}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Ar,pr=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return pr},set:function(Qt){pr=Qt=!!Qt}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Ar)return Ar},set:function(Qt){Ar=Qt}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,1)},set:function(Qt){this.Ff=Qt?dl(this.Ff,1):Rl(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,2)},set:function(Qt){this.Ff=Qt?dl(this.Ff,2):Rl(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,3)},set:function(Qt){this.Ff=Qt?dl(this.Ff,3):Rl(this.Ff,3)}});var Sr=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==Sr)return Sr},set:function(Qt){if(-1===[0,1,2].indexOf(Qt))throw new Error('Invalid value "'+Qt+'" for attribute Q supplied.');Sr=Qt}}),Object.defineProperty(this,"textAlign",{get:function(){var Qt;switch(Sr){case 0:default:Qt="left";break;case 1:Qt="center";break;case 2:Qt="right"}return Qt},configurable:!0,enumerable:!0,set:function(Qt){switch(Qt){case"right":case 2:Sr=2;break;case"center":case 1:Sr=1;break;default:Sr=0}}})};Ic(pu,ml);var Zc=function(){pu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Q=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Q},set:function(J){Q=J}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Q},set:function(J){Q=J}});var j=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return oc(j,this.objId,this.scope)},set:function(J){var se,xe;xe=[],"string"==typeof(se=J)&&(xe=function(fe,De,Ae){Ae||(Ae=1);for(var Ne,tt=[];Ne=De.exec(fe);)tt.push(Ne[Ae]);return tt}(se,/\((.*?)\)/g)),j=xe}}),this.getOptions=function(){return j},this.setOptions=function(J){j=J,this.sort&&j.sort()},this.addOption=function(J){J=(J=J||"").toString(),j.push(J),this.sort&&j.sort()},this.removeOption=function(J,se){for(se=se||!1,J=(J=J||"").toString();-1!==j.indexOf(J)&&(j.splice(j.indexOf(J),1),!1!==se););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,18)},set:function(J){this.Ff=J?dl(this.Ff,18):Rl(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,19)},set:function(J){!0===this.combo&&(this.Ff=J?dl(this.Ff,19):Rl(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,20)},set:function(J){J?(this.Ff=dl(this.Ff,20),j.sort()):this.Ff=Rl(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,22)},set:function(J){this.Ff=J?dl(this.Ff,22):Rl(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(J){this.Ff=J?dl(this.Ff,23):Rl(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,27)},set:function(J){this.Ff=J?dl(this.Ff,27):Rl(this.Ff,27)}}),this.hasAppearanceStream=!1};Ic(Zc,pu);var ud=function(){Zc.call(this),this.fontName="helvetica",this.combo=!1};Ic(ud,Zc);var dd=function(){ud.call(this),this.combo=!0};Ic(dd,ud);var Fs=function(){dd.call(this),this.edit=!0};Ic(Fs,dd);var Tc=function(){pu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,15)},set:function(J){this.Ff=J?dl(this.Ff,15):Rl(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,16)},set:function(J){this.Ff=J?dl(this.Ff,16):Rl(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,17)},set:function(J){this.Ff=J?dl(this.Ff,17):Rl(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(J){this.Ff=J?dl(this.Ff,26):Rl(this.Ff,26)}});var Q,j={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var J=function(fe){return fe};if(this.scope&&(J=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(j).length){var se,xe=[];for(se in xe.push("<<"),j)xe.push("/"+se+" ("+Il(J(j[se]))+")");return xe.push(">>"),xe.join("\n")}},set:function(J){"object"===O(J)&&(j=J)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return j.CA||""},set:function(J){"string"==typeof J&&(j.CA=J)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Q},set:function(J){Q=J}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Q.substr(1,Q.length-1)},set:function(J){Q="/"+J}})};Ic(Tc,pu);var tu=function(){Tc.call(this),this.pushButton=!0};Ic(tu,Tc);var Td=function(){Tc.call(this),this.radio=!0,this.pushButton=!1;var Q=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Q},set:function(j){Q=void 0!==j?j:[]}})};Ic(Td,Tc);var Sd=function(){var Q,j;pu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Q},set:function(xe){Q=xe}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return j},set:function(xe){j=xe}});var J,se={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var xe=function(Ae){return Ae};this.scope&&(xe=this.scope.internal.getEncryptor(this.objId));var fe,De=[];for(fe in De.push("<<"),se)De.push("/"+fe+" ("+Il(xe(se[fe]))+")");return De.push(">>"),De.join("\n")},set:function(xe){"object"===O(xe)&&(se=xe)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return se.CA||""},set:function(xe){"string"==typeof xe&&(se.CA=xe)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return J},set:function(xe){J=xe}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return J.substr(1,J.length-1)},set:function(xe){J="/"+xe}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ve.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ic(Sd,pu),Td.prototype.setAppearance=function(Q){if(!("createAppearanceStream"in Q)||!("getCA"in Q))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var j in this.Kids)if(this.Kids.hasOwnProperty(j)){var J=this.Kids[j];J.appearanceStreamContent=Q.createAppearanceStream(J.optionName),J.caption=Q.getCA()}},Td.prototype.createOption=function(Q){var j=new Sd;return j.Parent=this,j.optionName=Q,this.Kids.push(j),kt.call(this.scope,j),j};var pd=function(){Tc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ve.CheckBox.createAppearanceStream()};Ic(pd,Tc);var Nl=function(){pu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,13)},set:function(j){this.Ff=j?dl(this.Ff,13):Rl(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,21)},set:function(j){this.Ff=j?dl(this.Ff,21):Rl(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,23)},set:function(j){this.Ff=j?dl(this.Ff,23):Rl(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,24)},set:function(j){this.Ff=j?dl(this.Ff,24):Rl(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,25)},set:function(j){this.Ff=j?dl(this.Ff,25):Rl(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,26)},set:function(j){this.Ff=j?dl(this.Ff,26):Rl(this.Ff,26)}});var Q=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Q},set:function(j){Q=j}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Q},set:function(j){Number.isInteger(j)&&(Q=j)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ic(Nl,pu);var ic=function(){Nl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ks(this.Ff,14)},set:function(Q){this.Ff=Q?dl(this.Ff,14):Rl(this.Ff,14)}}),this.password=!0};Ic(ic,Nl);var Ve={CheckBox:{createAppearanceStream:function(){return{N:{On:Ve.CheckBox.YesNormal},D:{On:Ve.CheckBox.YesPushDown,Off:Ve.CheckBox.OffPushDown}}},YesPushDown:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[],se=Q.scope.internal.getFont(Q.fontName,Q.fontStyle).id,xe=Q.scope.__private__.encodeColorString(Q.color),fe=qu(Q,Q.caption);return J.push("0.749023 g"),J.push("0 0 "+Aa(Ve.internal.getWidth(Q))+" "+Aa(Ve.internal.getHeight(Q))+" re"),J.push("f"),J.push("BMC"),J.push("q"),J.push("0 0 1 rg"),J.push("/"+se+" "+Aa(fe.fontSize)+" Tf "+xe),J.push("BT"),J.push(fe.text),J.push("ET"),J.push("Q"),J.push("EMC"),j.stream=J.join("\n"),j},YesNormal:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=Q.scope.internal.getFont(Q.fontName,Q.fontStyle).id,se=Q.scope.__private__.encodeColorString(Q.color),xe=[],fe=Ve.internal.getHeight(Q),De=Ve.internal.getWidth(Q),Ae=qu(Q,Q.caption);return xe.push("1 g"),xe.push("0 0 "+Aa(De)+" "+Aa(fe)+" re"),xe.push("f"),xe.push("q"),xe.push("0 0 1 rg"),xe.push("0 0 "+Aa(De-1)+" "+Aa(fe-1)+" re"),xe.push("W"),xe.push("n"),xe.push("0 g"),xe.push("BT"),xe.push("/"+J+" "+Aa(Ae.fontSize)+" Tf "+se),xe.push(Ae.text),xe.push("ET"),xe.push("Q"),j.stream=xe.join("\n"),j},OffPushDown:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[];return J.push("0.749023 g"),J.push("0 0 "+Aa(Ve.internal.getWidth(Q))+" "+Aa(Ve.internal.getHeight(Q))+" re"),J.push("f"),j.stream=J.join("\n"),j}},RadioButton:{Circle:{createAppearanceStream:function(Q){var j={D:{Off:Ve.RadioButton.Circle.OffPushDown},N:{}};return j.N[Q]=Ve.RadioButton.Circle.YesNormal,j.D[Q]=Ve.RadioButton.Circle.YesPushDown,j},getCA:function(){return"l"},YesNormal:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[],se=Ve.internal.getWidth(Q)<=Ve.internal.getHeight(Q)?Ve.internal.getWidth(Q)/4:Ve.internal.getHeight(Q)/4;se=Number((.9*se).toFixed(5));var fe=Number((se*Ve.internal.Bezier_C).toFixed(5));return J.push("q"),J.push("1 0 0 1 "+uc(Ve.internal.getWidth(Q)/2)+" "+uc(Ve.internal.getHeight(Q)/2)+" cm"),J.push(se+" 0 m"),J.push(se+" "+fe+" "+fe+" "+se+" 0 "+se+" c"),J.push("-"+fe+" "+se+" -"+se+" "+fe+" -"+se+" 0 c"),J.push("-"+se+" -"+fe+" -"+fe+" -"+se+" 0 -"+se+" c"),J.push(fe+" -"+se+" "+se+" -"+fe+" "+se+" 0 c"),J.push("f"),J.push("Q"),j.stream=J.join("\n"),j},YesPushDown:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[],se=Ve.internal.getWidth(Q)<=Ve.internal.getHeight(Q)?Ve.internal.getWidth(Q)/4:Ve.internal.getHeight(Q)/4;se=Number((.9*se).toFixed(5));var xe=Number((2*se).toFixed(5)),fe=Number((xe*Ve.internal.Bezier_C).toFixed(5)),De=Number((se*Ve.internal.Bezier_C).toFixed(5));return J.push("0.749023 g"),J.push("q"),J.push("1 0 0 1 "+uc(Ve.internal.getWidth(Q)/2)+" "+uc(Ve.internal.getHeight(Q)/2)+" cm"),J.push(xe+" 0 m"),J.push(xe+" "+fe+" "+fe+" "+xe+" 0 "+xe+" c"),J.push("-"+fe+" "+xe+" -"+xe+" "+fe+" -"+xe+" 0 c"),J.push("-"+xe+" -"+fe+" -"+fe+" -"+xe+" 0 -"+xe+" c"),J.push(fe+" -"+xe+" "+xe+" -"+fe+" "+xe+" 0 c"),J.push("f"),J.push("Q"),J.push("0 g"),J.push("q"),J.push("1 0 0 1 "+uc(Ve.internal.getWidth(Q)/2)+" "+uc(Ve.internal.getHeight(Q)/2)+" cm"),J.push(se+" 0 m"),J.push(se+" "+De+" "+De+" "+se+" 0 "+se+" c"),J.push("-"+De+" "+se+" -"+se+" "+De+" -"+se+" 0 c"),J.push("-"+se+" -"+De+" -"+De+" -"+se+" 0 -"+se+" c"),J.push(De+" -"+se+" "+se+" -"+De+" "+se+" 0 c"),J.push("f"),J.push("Q"),j.stream=J.join("\n"),j},OffPushDown:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[],se=Ve.internal.getWidth(Q)<=Ve.internal.getHeight(Q)?Ve.internal.getWidth(Q)/4:Ve.internal.getHeight(Q)/4;se=Number((.9*se).toFixed(5));var xe=Number((2*se).toFixed(5)),fe=Number((xe*Ve.internal.Bezier_C).toFixed(5));return J.push("0.749023 g"),J.push("q"),J.push("1 0 0 1 "+uc(Ve.internal.getWidth(Q)/2)+" "+uc(Ve.internal.getHeight(Q)/2)+" cm"),J.push(xe+" 0 m"),J.push(xe+" "+fe+" "+fe+" "+xe+" 0 "+xe+" c"),J.push("-"+fe+" "+xe+" -"+xe+" "+fe+" -"+xe+" 0 c"),J.push("-"+xe+" -"+fe+" -"+fe+" -"+xe+" 0 -"+xe+" c"),J.push(fe+" -"+xe+" "+xe+" -"+fe+" "+xe+" 0 c"),J.push("f"),J.push("Q"),j.stream=J.join("\n"),j}},Cross:{createAppearanceStream:function(Q){var j={D:{Off:Ve.RadioButton.Cross.OffPushDown},N:{}};return j.N[Q]=Ve.RadioButton.Cross.YesNormal,j.D[Q]=Ve.RadioButton.Cross.YesPushDown,j},getCA:function(){return"8"},YesNormal:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[],se=Ve.internal.calculateCross(Q);return J.push("q"),J.push("1 1 "+Aa(Ve.internal.getWidth(Q)-2)+" "+Aa(Ve.internal.getHeight(Q)-2)+" re"),J.push("W"),J.push("n"),J.push(Aa(se.x1.x)+" "+Aa(se.x1.y)+" m"),J.push(Aa(se.x2.x)+" "+Aa(se.x2.y)+" l"),J.push(Aa(se.x4.x)+" "+Aa(se.x4.y)+" m"),J.push(Aa(se.x3.x)+" "+Aa(se.x3.y)+" l"),J.push("s"),J.push("Q"),j.stream=J.join("\n"),j},YesPushDown:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=Ve.internal.calculateCross(Q),se=[];return se.push("0.749023 g"),se.push("0 0 "+Aa(Ve.internal.getWidth(Q))+" "+Aa(Ve.internal.getHeight(Q))+" re"),se.push("f"),se.push("q"),se.push("1 1 "+Aa(Ve.internal.getWidth(Q)-2)+" "+Aa(Ve.internal.getHeight(Q)-2)+" re"),se.push("W"),se.push("n"),se.push(Aa(J.x1.x)+" "+Aa(J.x1.y)+" m"),se.push(Aa(J.x2.x)+" "+Aa(J.x2.y)+" l"),se.push(Aa(J.x4.x)+" "+Aa(J.x4.y)+" m"),se.push(Aa(J.x3.x)+" "+Aa(J.x3.y)+" l"),se.push("s"),se.push("Q"),j.stream=se.join("\n"),j},OffPushDown:function(Q){var j=Rc(Q);j.scope=Q.scope;var J=[];return J.push("0.749023 g"),J.push("0 0 "+Aa(Ve.internal.getWidth(Q))+" "+Aa(Ve.internal.getHeight(Q))+" re"),J.push("f"),j.stream=J.join("\n"),j}}},createDefaultAppearanceStream:function(Q){var j=Q.scope.internal.getFont(Q.fontName,Q.fontStyle).id,J=Q.scope.__private__.encodeColorString(Q.color);return"/"+j+" "+Q.fontSize+" Tf "+J}};Ve.internal={Bezier_C:.551915024494,calculateCross:function(Q){var j=Ve.internal.getWidth(Q),J=Ve.internal.getHeight(Q),se=Math.min(j,J);return{x1:{x:(j-se)/2,y:(J-se)/2+se},x2:{x:(j-se)/2+se,y:(J-se)/2},x3:{x:(j-se)/2,y:(J-se)/2},x4:{x:(j-se)/2+se,y:(J-se)/2+se}}}},Ve.internal.getWidth=function(Q){var j=0;return"object"===O(Q)&&(j=sd(Q.Rect[2])),j},Ve.internal.getHeight=function(Q){var j=0;return"object"===O(Q)&&(j=sd(Q.Rect[3])),j};var kt=cs.addField=function(Q){if(function(Q,j){if(j.scope=Q,void 0!==Q.internal&&(void 0===Q.internal.acroformPlugin||!1===Q.internal.acroformPlugin.isInitialized)){if(pu.FieldNum=0,Q.internal.acroformPlugin=JSON.parse(JSON.stringify(Dp)),Q.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");cc=Q.internal.scaleFactor,Q.internal.acroformPlugin.acroFormDictionaryRoot=new Mu,Q.internal.acroformPlugin.acroFormDictionaryRoot.scope=Q,Q.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Q.internal.events.subscribe("postPutResources",function(){var J;(J=Q).internal.events.unsubscribe(J.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete J.internal.acroformPlugin.acroFormDictionaryRoot._eventID,J.internal.acroformPlugin.printedOut=!0}),Q.internal.events.subscribe("buildDocument",function(){!function(J){J.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var se=J.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var xe in se)if(se.hasOwnProperty(xe)){var fe=se[xe];fe.objId=void 0,fe.hasAnnotation&&Dc(fe,J)}}(Q)}),Q.internal.events.subscribe("putCatalog",function(){!function(J){if(void 0===J.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");J.internal.write("/AcroForm "+J.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(Q)}),Q.internal.events.subscribe("postPutPages",function(J){!function(se,xe){var fe=!se;for(var De in se||(xe.internal.newObjectDeferredBegin(xe.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),xe.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),se=se||xe.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(se.hasOwnProperty(De)){var Ae=se[De],Ne=[],tt=Ae.Rect;if(Ae.Rect&&(Ae.Rect=Gl(Ae.Rect,xe)),xe.internal.newObjectDeferredBegin(Ae.objId,!0),Ae.DA=Ve.createDefaultAppearanceStream(Ae),"object"===O(Ae)&&"function"==typeof Ae.getKeyValueListForStream&&(Ne=Ae.getKeyValueListForStream()),Ae.Rect=tt,Ae.hasAppearanceStream&&!Ae.appearanceStreamContent){var _t=ld(Ae);Ne.push({key:"AP",value:"<</N "+_t+">>"}),xe.internal.acroformPlugin.xForms.push(_t)}if(Ae.appearanceStreamContent){var vt="";for(var Ht in Ae.appearanceStreamContent)if(Ae.appearanceStreamContent.hasOwnProperty(Ht)){var Qe=Ae.appearanceStreamContent[Ht];if(vt+="/"+Ht+" ",vt+="<<",Object.keys(Qe).length>=1||Array.isArray(Qe)){for(var De in Qe)if(Qe.hasOwnProperty(De)){var Ar=Qe[De];"function"==typeof Ar&&(Ar=Ar.call(xe,Ae)),vt+="/"+De+" "+Ar+" ",xe.internal.acroformPlugin.xForms.indexOf(Ar)>=0||xe.internal.acroformPlugin.xForms.push(Ar)}}else"function"==typeof(Ar=Qe)&&(Ar=Ar.call(xe,Ae)),vt+="/"+De+" "+Ar,xe.internal.acroformPlugin.xForms.indexOf(Ar)>=0||xe.internal.acroformPlugin.xForms.push(Ar);vt+=">>"}Ne.push({key:"AP",value:"<<\n"+vt+">>"})}xe.internal.putStream({additionalKeyValues:Ne,objectId:Ae.objId}),xe.internal.out("endobj")}fe&&function(Q,j){for(var J in Q)if(Q.hasOwnProperty(J)){var se=J,xe=Q[J];j.internal.newObjectDeferredBegin(xe.objId,!0),"object"===O(xe)&&"function"==typeof xe.putStream&&xe.putStream(),delete Q[se]}}(xe.internal.acroformPlugin.xForms,xe)}(J,Q)}),Q.internal.acroformPlugin.isInitialized=!0}}(this,Q),!(Q instanceof pu))throw new Error("Invalid argument passed to jsPDF.addField.");var j;return(j=Q).scope.internal.acroformPlugin.printedOut&&(j.scope.internal.acroformPlugin.printedOut=!1,j.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),j.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(j),Q.page=Q.scope.internal.getCurrentPageInfo().pageNumber,this};cs.AcroFormChoiceField=Zc,cs.AcroFormListBox=ud,cs.AcroFormComboBox=dd,cs.AcroFormEditBox=Fs,cs.AcroFormButton=Tc,cs.AcroFormPushButton=tu,cs.AcroFormRadioButton=Td,cs.AcroFormCheckBox=pd,cs.AcroFormTextField=Nl,cs.AcroFormPasswordField=ic,cs.AcroFormAppearance=Ve,cs.AcroForm={ChoiceField:Zc,ListBox:ud,ComboBox:dd,EditBox:Fs,Button:Tc,PushButton:tu,RadioButton:Td,CheckBox:pd,TextField:Nl,PasswordField:ic,Appearance:Ve};var Q,j,Br=Xi.AcroForm={ChoiceField:Zc,ListBox:ud,ComboBox:dd,EditBox:Fs,Button:Tc,PushButton:tu,RadioButton:Td,CheckBox:pd,TextField:Nl,PasswordField:ic,Appearance:Ve};function qr(Q){return Q.reduce(function(j,J,se){return j[J]=se,j},{})}(function(Q){Q.__addimage__={};var j="UNKNOWN",J={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},se=Q.__addimage__.getImageFileTypeByImageData=function(cr,hr){var Xr,rn,jo,So,Zo,ro=j;if("RGBA"===(hr=hr||j)||void 0!==cr.data&&cr.data instanceof Uint8ClampedArray&&"height"in cr&&"width"in cr)return"RGBA";if(gi(cr))for(Zo in J)for(jo=J[Zo],Xr=0;Xr<jo.length;Xr+=1){for(So=!0,rn=0;rn<jo[Xr].length;rn+=1)if(void 0!==jo[Xr][rn]&&jo[Xr][rn]!==cr[rn]){So=!1;break}if(!0===So){ro=Zo;break}}else for(Zo in J)for(jo=J[Zo],Xr=0;Xr<jo.length;Xr+=1){for(So=!0,rn=0;rn<jo[Xr].length;rn+=1)if(void 0!==jo[Xr][rn]&&jo[Xr][rn]!==cr.charCodeAt(rn)){So=!1;break}if(!0===So){ro=Zo;break}}return ro===j&&hr!==j&&(ro=hr),ro},xe=function cr(hr){for(var Xr=this.internal.write,rn=this.internal.putStream,jo=(0,this.internal.getFilters)();-1!==jo.indexOf("FlateEncode");)jo.splice(jo.indexOf("FlateEncode"),1);hr.objectId=this.internal.newObject();var So=[];if(So.push({key:"Type",value:"/XObject"}),So.push({key:"Subtype",value:"/Image"}),So.push({key:"Width",value:hr.width}),So.push({key:"Height",value:hr.height}),hr.colorSpace===Sr.INDEXED?So.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(hr.palette.length/3-1)+" "+("sMask"in hr&&void 0!==hr.sMask?hr.objectId+2:hr.objectId+1)+" 0 R]"}):(So.push({key:"ColorSpace",value:"/"+hr.colorSpace}),hr.colorSpace===Sr.DEVICE_CMYK&&So.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),So.push({key:"BitsPerComponent",value:hr.bitsPerComponent}),"decodeParameters"in hr&&void 0!==hr.decodeParameters&&So.push({key:"DecodeParms",value:"<<"+hr.decodeParameters+">>"}),"transparency"in hr&&Array.isArray(hr.transparency)){for(var Zo="",ro=0,Ho=hr.transparency.length;ro<Ho;ro++)Zo+=hr.transparency[ro]+" "+hr.transparency[ro]+" ";So.push({key:"Mask",value:"["+Zo+"]"})}if(void 0!==hr.sMask&&So.push({key:"SMask",value:hr.objectId+1+" 0 R"}),rn({data:hr.data,additionalKeyValues:So,alreadyAppliedFilters:void 0!==hr.filter?["/"+hr.filter]:void 0,objectId:hr.objectId}),Xr("endobj"),"sMask"in hr&&void 0!==hr.sMask){var zt={width:hr.width,height:hr.height,colorSpace:"DeviceGray",bitsPerComponent:hr.bitsPerComponent,decodeParameters:"/Predictor "+hr.predictor+" /Colors 1 /BitsPerComponent "+hr.bitsPerComponent+" /Columns "+hr.width,data:hr.sMask};"filter"in hr&&(zt.filter=hr.filter),cr.call(this,zt)}if(hr.colorSpace===Sr.INDEXED){var Ir=this.internal.newObject();rn({data:Jr(new Uint8Array(hr.palette)),objectId:Ir}),Xr("endobj")}},fe=function(){var cr=this.internal.collections.addImage_images;for(var hr in cr)xe.call(this,cr[hr])},De=function(){var cr,hr=this.internal.collections.addImage_images,Xr=this.internal.write;for(var rn in hr)Xr("/I"+(cr=hr[rn]).index,cr.objectId,"0","R")},Ae=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",fe),this.internal.events.subscribe("putXobjectDict",De))},Ne=function(){var cr=this.internal.collections.addImage_images;return Ae.call(this),cr},tt=function(){return Object.keys(this.internal.collections.addImage_images).length},_t=function(cr){return"function"==typeof Q["process"+cr.toUpperCase()]},vt=function(cr){return"object"===O(cr)&&1===cr.nodeType},Ht=function(cr,hr){if("IMG"===cr.nodeName&&cr.hasAttribute("src")){var Xr=""+cr.getAttribute("src");if(0===Xr.indexOf("data:image/"))return Qc(unescape(Xr).split("base64,").pop());var rn=Q.loadFile(Xr,!0);if(void 0!==rn)return rn}if("CANVAS"===cr.nodeName){if(0===cr.width||0===cr.height)throw new Error("Given canvas must have data. Canvas width: "+cr.width+", height: "+cr.height);var jo;switch(hr){case"PNG":jo="image/png";break;case"WEBP":jo="image/webp";break;default:jo="image/jpeg"}return Qc(cr.toDataURL(jo,1).split("base64,").pop())}},Qe=function(cr){var hr=this.internal.collections.addImage_images;if(hr)for(var Xr in hr)if(cr===hr[Xr].alias)return hr[Xr]},Ar=function(cr,hr,Xr){return cr||hr||(cr=-96,hr=-96),cr<0&&(cr=-1*Xr.width*72/cr/this.internal.scaleFactor),hr<0&&(hr=-1*Xr.height*72/hr/this.internal.scaleFactor),0===cr&&(cr=hr*Xr.width/Xr.height),0===hr&&(hr=cr*Xr.height/Xr.width),[cr,hr]},pr=function(cr,hr,Xr,rn,jo,So){var Zo=Ar.call(this,Xr,rn,jo),ro=this.internal.getCoordinateString,Ho=this.internal.getVerticalCoordinateString,Xo=Ne.call(this);if(Xr=Zo[0],rn=Zo[1],Xo[jo.index]=jo,So){So*=Math.PI/180;var ka=Math.cos(So),zt=Math.sin(So),Ir=function(on){return on.toFixed(4)},Gr=[Ir(ka),Ir(zt),Ir(-1*zt),Ir(ka),0,0,"cm"]}this.internal.write("q"),So?(this.internal.write([1,"0","0",1,ro(cr),Ho(hr+rn),"cm"].join(" ")),this.internal.write(Gr.join(" ")),this.internal.write([ro(Xr),"0","0",ro(rn),"0","0","cm"].join(" "))):this.internal.write([ro(Xr),"0","0",ro(rn),ro(cr),Ho(hr+rn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+jo.index+" Do"),this.internal.write("Q")},Sr=Q.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Q.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Qt=Q.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Lr=Q.__addimage__.sHashCode=function(cr){var hr,Xr,rn=0;if("string"==typeof cr)for(Xr=cr.length,hr=0;hr<Xr;hr++)rn=(rn<<5)-rn+cr.charCodeAt(hr),rn|=0;else if(gi(cr))for(Xr=cr.byteLength/2,hr=0;hr<Xr;hr++)rn=(rn<<5)-rn+cr[hr],rn|=0;return rn},En=Q.__addimage__.validateStringAsBase64=function(cr){(cr=cr||"").toString().trim();var hr=!0;return 0===cr.length&&(hr=!1),cr.length%4!=0&&(hr=!1),!1===/^[A-Za-z0-9+/]+$/.test(cr.substr(0,cr.length-2))&&(hr=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(cr.substr(-2))&&(hr=!1),hr},qn=Q.__addimage__.extractImageFromDataUrl=function(cr){if(null==cr||!(cr=cr.trim()).startsWith("data:"))return null;var hr=cr.indexOf(",");return hr<0?null:cr.substring(0,hr).trim().endsWith("base64")?cr.substring(hr+1):null},Fo=Q.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};Q.__addimage__.isArrayBuffer=function(cr){return Fo()&&cr instanceof ArrayBuffer};var gi=Q.__addimage__.isArrayBufferView=function(cr){return Fo()&&typeof Uint32Array<"u"&&(cr instanceof Int8Array||cr instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&cr instanceof Uint8ClampedArray||cr instanceof Int16Array||cr instanceof Uint16Array||cr instanceof Int32Array||cr instanceof Uint32Array||cr instanceof Float32Array||cr instanceof Float64Array)},po=Q.__addimage__.binaryStringToUint8Array=function(cr){for(var hr=cr.length,Xr=new Uint8Array(hr),rn=0;rn<hr;rn++)Xr[rn]=cr.charCodeAt(rn);return Xr},Jr=Q.__addimage__.arrayBufferToBinaryString=function(cr){for(var hr="",Xr=gi(cr)?cr:new Uint8Array(cr),rn=0;rn<Xr.length;rn+=8192)hr+=String.fromCharCode.apply(null,Xr.subarray(rn,rn+8192));return hr};Q.addImage=function(){var cr,hr,Xr,rn,jo,So,Zo,ro,Ho;if("number"==typeof arguments[1]?(hr=j,Xr=arguments[1],rn=arguments[2],jo=arguments[3],So=arguments[4],Zo=arguments[5],ro=arguments[6],Ho=arguments[7]):(hr=arguments[1],Xr=arguments[2],rn=arguments[3],jo=arguments[4],So=arguments[5],Zo=arguments[6],ro=arguments[7],Ho=arguments[8]),"object"===O(cr=arguments[0])&&!vt(cr)&&"imageData"in cr){var Xo=cr;cr=Xo.imageData,hr=Xo.format||hr||j,Xr=Xo.x||Xr||0,rn=Xo.y||rn||0,jo=Xo.w||Xo.width||jo,So=Xo.h||Xo.height||So,Zo=Xo.alias||Zo,ro=Xo.compression||ro,Ho=Xo.rotation||Xo.angle||Ho}var ka=this.internal.getFilters();if(void 0===ro&&-1!==ka.indexOf("FlateEncode")&&(ro="SLOW"),isNaN(Xr)||isNaN(rn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Ae.call(this);var zt=lo.call(this,cr,hr,Zo,ro);return pr.call(this,Xr,rn,jo,So,zt,Ho),this};var lo=function(cr,hr,Xr,rn){var jo,So,Zo,Ho;if("string"==typeof cr&&se(cr)===j){cr=unescape(cr);var ro=zo(cr,!1);(""!==ro||void 0!==(ro=Q.loadFile(cr,!0)))&&(cr=ro)}if(vt(cr)&&(cr=Ht(cr,hr)),hr=se(cr,hr),!_t(hr))throw new Error("addImage does not support files of type '"+hr+"', please ensure that a plugin for '"+hr+"' support is added.");if((null==(Zo=Xr)||0===Zo.length)&&(Xr="string"==typeof(Ho=cr)||gi(Ho)?Lr(Ho):gi(Ho.data)?Lr(Ho.data):null),(jo=Qe.call(this,Xr))||(Fo()&&(cr instanceof Uint8Array||"RGBA"===hr||(So=cr,cr=po(cr))),jo=this["process"+hr.toUpperCase()](cr,tt.call(this),Xr,function(Ho){return Ho&&"string"==typeof Ho&&(Ho=Ho.toUpperCase()),Ho in Q.image_compression?Ho:Qt.NONE}(rn),So)),!jo)throw new Error("An unknown error occurred whilst processing the image.");return jo},zo=Q.__addimage__.convertBase64ToBinaryString=function(cr,hr){hr="boolean"!=typeof hr||hr;var Xr,rn="";if("string"==typeof cr){var jo;Xr=null!==(jo=qn(cr))&&void 0!==jo?jo:cr;try{rn=Qc(Xr)}catch(So){if(hr)throw En(Xr)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+So.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return rn};Q.getImageProperties=function(cr){var hr,Xr,rn="";if(vt(cr)&&(cr=Ht(cr)),"string"==typeof cr&&se(cr)===j&&(""===(rn=zo(cr,!1))&&(rn=Q.loadFile(cr)||""),cr=rn),Xr=se(cr),!_t(Xr))throw new Error("addImage does not support files of type '"+Xr+"', please ensure that a plugin for '"+Xr+"' support is added.");if(!Fo()||cr instanceof Uint8Array||(cr=po(cr)),!(hr=this["process"+Xr.toUpperCase()](cr)))throw new Error("An unknown error occurred whilst processing the image");return hr.fileType=Xr,hr}})(Xi.API),
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
Q=Xi.API,j=function(J){if(void 0!==J&&""!=J)return!0},Xi.API.events.push(["addPage",function(J){this.internal.getPageInfo(J.pageNumber).pageContext.annotations=[]}]),Q.events.push(["putPage",function(J){for(var se,xe,fe,De=this.internal.getCoordinateString,Ae=this.internal.getVerticalCoordinateString,Ne=this.internal.getPageInfoByObjId(J.objId),tt=J.pageContext.annotations,_t=!1,vt=0;vt<tt.length&&!_t;vt++)switch((se=tt[vt]).type){case"link":(j(se.options.url)||j(se.options.pageNumber))&&(_t=!0);break;case"reference":case"text":case"freetext":_t=!0}if(0!=_t){this.internal.write("/Annots [");for(var Ht=0;Ht<tt.length;Ht++){se=tt[Ht];var Qe=this.internal.pdfEscape,Ar=this.internal.getEncryptor(J.objId);switch(se.type){case"reference":this.internal.write(" "+se.object.objId+" 0 R ");break;case"text":var pr=this.internal.newAdditionalObject(),Sr=this.internal.newAdditionalObject(),Qt=this.internal.getEncryptor(pr.objId),Lr=se.title||"Note";fe="<</Type /Annot /Subtype /Text "+(xe="/Rect ["+De(se.bounds.x)+" "+Ae(se.bounds.y+se.bounds.h)+" "+De(se.bounds.x+se.bounds.w)+" "+Ae(se.bounds.y)+"] ")+"/Contents ("+Qe(Qt(se.contents))+")",fe+=" /Popup "+Sr.objId+" 0 R",fe+=" /P "+Ne.objId+" 0 R",fe+=" /T ("+Qe(Qt(Lr))+") >>",pr.content=fe;var En=pr.objId+" 0 R";fe="<</Type /Annot /Subtype /Popup "+(xe="/Rect ["+De(se.bounds.x+30)+" "+Ae(se.bounds.y+se.bounds.h)+" "+De(se.bounds.x+se.bounds.w+30)+" "+Ae(se.bounds.y)+"] ")+" /Parent "+En,se.open&&(fe+=" /Open true"),Sr.content=fe+=" >>",this.internal.write(pr.objId,"0 R",Sr.objId,"0 R");break;case"freetext":xe="/Rect ["+De(se.bounds.x)+" "+Ae(se.bounds.y)+" "+De(se.bounds.x+se.bounds.w)+" "+Ae(se.bounds.y+se.bounds.h)+"] ";var qn=se.color||"#000000";fe="<</Type /Annot /Subtype /FreeText "+xe+"/Contents ("+Qe(Ar(se.contents))+")",fe+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+qn+")",fe+=" /Border [0 0 0]",this.internal.write(fe+=" >>");break;case"link":if(se.options.name){var Fo=this.annotations._nameMap[se.options.name];se.options.pageNumber=Fo.page,se.options.top=Fo.y}else se.options.top||(se.options.top=0);if(xe="/Rect ["+se.finalBounds.x+" "+se.finalBounds.y+" "+se.finalBounds.w+" "+se.finalBounds.h+"] ",fe="",se.options.url)fe="<</Type /Annot /Subtype /Link "+xe+"/Border [0 0 0] /A <</S /URI /URI ("+Qe(Ar(se.options.url))+") >>";else if(se.options.pageNumber)switch(fe="<</Type /Annot /Subtype /Link "+xe+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(se.options.pageNumber).objId+" 0 R",se.options.magFactor=se.options.magFactor||"XYZ",se.options.magFactor){case"Fit":fe+=" /Fit]";break;case"FitH":fe+=" /FitH "+se.options.top+"]";break;case"FitV":se.options.left=se.options.left||0,fe+=" /FitV "+se.options.left+"]";break;default:var gi=Ae(se.options.top);se.options.left=se.options.left||0,void 0===se.options.zoom&&(se.options.zoom=0),fe+=" /XYZ "+se.options.left+" "+gi+" "+se.options.zoom+"]"}""!=fe&&this.internal.write(fe+=" >>")}}this.internal.write("]")}}]),Q.createAnnotation=function(J){var se=this.internal.getCurrentPageInfo();switch(J.type){case"link":this.link(J.bounds.x,J.bounds.y,J.bounds.w,J.bounds.h,J);break;case"text":case"freetext":se.pageContext.annotations.push(J)}},Q.link=function(J,se,xe,fe,De){var Ae=this.internal.getCurrentPageInfo(),Ne=this.internal.getCoordinateString,tt=this.internal.getVerticalCoordinateString;Ae.pageContext.annotations.push({finalBounds:{x:Ne(J),y:tt(se),w:Ne(J+xe),h:tt(se+fe)},options:De,type:"link"})},Q.textWithLink=function(J,se,xe,fe){var De,Ae,Ne=this.getTextWidth(J),tt=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==fe.maxWidth){var _t=this.splitTextToSize(J,Ae=fe.maxWidth).length;De=Math.ceil(tt*_t)}else Ae=Ne,De=tt;return this.text(J,se,xe,fe),"center"===fe.align&&(se-=Ne/2),"right"===fe.align&&(se-=Ne),this.link(se,(xe+=.2*tt)-tt,Ae,De,fe),Ne},Q.getTextWidth=function(J){var se=this.internal.getFontSize();return this.getStringUnitWidth(J)*se/this.internal.scaleFactor},
/**
       * @license
       * Copyright (c) 2017 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},J={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},se={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},xe=[1570,1571,1573,1575];Q.__arabicParser__={};var fe=Q.__arabicParser__.isInArabicSubstitutionA=function(pr){return void 0!==j[pr.charCodeAt(0)]},De=Q.__arabicParser__.isArabicLetter=function(pr){return"string"==typeof pr&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(pr)},Ae=Q.__arabicParser__.isArabicEndLetter=function(pr){return De(pr)&&fe(pr)&&j[pr.charCodeAt(0)].length<=2},Ne=Q.__arabicParser__.isArabicAlfLetter=function(pr){return De(pr)&&xe.indexOf(pr.charCodeAt(0))>=0};Q.__arabicParser__.arabicLetterHasIsolatedForm=function(pr){return De(pr)&&fe(pr)&&j[pr.charCodeAt(0)].length>=1};var tt=Q.__arabicParser__.arabicLetterHasFinalForm=function(pr){return De(pr)&&fe(pr)&&j[pr.charCodeAt(0)].length>=2};Q.__arabicParser__.arabicLetterHasInitialForm=function(pr){return De(pr)&&fe(pr)&&j[pr.charCodeAt(0)].length>=3};var _t=Q.__arabicParser__.arabicLetterHasMedialForm=function(pr){return De(pr)&&fe(pr)&&4==j[pr.charCodeAt(0)].length},vt=Q.__arabicParser__.resolveLigatures=function(pr){var Sr=0,Qt=J,Lr="",En=0;for(Sr=0;Sr<pr.length;Sr+=1)void 0!==Qt[pr.charCodeAt(Sr)]?(En++,"number"==typeof(Qt=Qt[pr.charCodeAt(Sr)])&&(Lr+=String.fromCharCode(Qt),Qt=J,En=0),Sr===pr.length-1&&(Qt=J,Lr+=pr.charAt(Sr-(En-1)),Sr-=En-1,En=0)):(Qt=J,Lr+=pr.charAt(Sr-En),Sr-=En,En=0);return Lr};Q.__arabicParser__.isArabicDiacritic=function(pr){return void 0!==pr&&void 0!==se[pr.charCodeAt(0)]};var Ht=Q.__arabicParser__.getCorrectForm=function(pr,Sr,Qt){return De(pr)?!1===fe(pr)?-1:!tt(pr)||!De(Sr)&&!De(Qt)||!De(Qt)&&Ae(Sr)||Ae(pr)&&!De(Sr)||Ae(pr)&&Ne(Sr)||Ae(pr)&&Ae(Sr)?0:_t(pr)&&De(Sr)&&!Ae(Sr)&&De(Qt)&&tt(Qt)?3:Ae(pr)||!De(Qt)?1:2:-1},Qe=function(pr){var Sr=0,Qt=0,Lr=0,En="",qn="",Fo="",gi=(pr=pr||"").split("\\s+"),po=[];for(Sr=0;Sr<gi.length;Sr+=1){for(po.push(""),Qt=0;Qt<gi[Sr].length;Qt+=1)qn=gi[Sr][Qt-1],Fo=gi[Sr][Qt+1],De(En=gi[Sr][Qt])?(Lr=Ht(En,qn,Fo),po[Sr]+=-1!==Lr?String.fromCharCode(j[En.charCodeAt(0)][Lr]):En):po[Sr]+=En;po[Sr]=vt(po[Sr])}return po.join(" ")},Ar=Q.__arabicParser__.processArabic=Q.processArabic=function(){var pr,Sr="string"==typeof arguments[0]?arguments[0]:arguments[0].text,Qt=[];if(Array.isArray(Sr)){var Lr=0;for(Qt=[],Lr=0;Lr<Sr.length;Lr+=1)Array.isArray(Sr[Lr])?Qt.push([Qe(Sr[Lr][0]),Sr[Lr][1],Sr[Lr][2]]):Qt.push([Qe(Sr[Lr])]);pr=Qt}else pr=Qe(Sr);return"string"==typeof arguments[0]?pr:(arguments[0].text=pr,arguments[0])};Q.events.push(["preProcessText",Ar])}(Xi.API),Xi.API.autoPrint=function(Q){var j;return"javascript"===((Q=Q||{}).variant=Q.variant||"non-conform",Q.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){j=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+j+" 0 R")})),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j=function(){var J=void 0;Object.defineProperty(this,"pdf",{get:function(){return J},set:function(Ae){J=Ae}});var se=150;Object.defineProperty(this,"width",{get:function(){return se},set:function(Ae){se=isNaN(Ae)||!1===Number.isInteger(Ae)||Ae<0?150:Ae,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=se+1)}});var xe=300;Object.defineProperty(this,"height",{get:function(){return xe},set:function(Ae){xe=isNaN(Ae)||!1===Number.isInteger(Ae)||Ae<0?300:Ae,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=xe+1)}});var fe=[];Object.defineProperty(this,"childNodes",{get:function(){return fe},set:function(Ae){fe=Ae}});var De={};Object.defineProperty(this,"style",{get:function(){return De},set:function(Ae){De=Ae}}),Object.defineProperty(this,"parentNode",{})};j.prototype.getContext=function(J,se){var xe;if("2d"!==(J=J||"2d"))return null;for(xe in se)this.pdf.context2d.hasOwnProperty(xe)&&(this.pdf.context2d[xe]=se[xe]);return this.pdf.context2d._canvas=this,this.pdf.context2d},j.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Q.events.push(["initialized",function(){this.canvas=new j,this.canvas.pdf=this}])}(Xi.API),function(Q){var j={left:0,top:0,bottom:0,right:0},J=!1,se=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},j),this.internal.__cell__.margins.width=this.getPageWidth(),xe.call(this))},xe=function(){this.internal.__cell__.lastCell=new fe,this.internal.__cell__.pages=1},fe=function(){var Ne=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ne},set:function(pr){Ne=pr}});var tt=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(pr){tt=pr}});var _t=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return _t},set:function(pr){_t=pr}});var vt=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return vt},set:function(pr){vt=pr}});var Ht=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Ht},set:function(pr){Ht=pr}});var Qe=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Qe},set:function(pr){Qe=pr}});var Ar=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Ar},set:function(pr){Ar=pr}}),this};fe.prototype.clone=function(){return new fe(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},fe.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Q.setHeaderFunction=function(Ne){return se.call(this),this.internal.__cell__.headerFunction="function"==typeof Ne?Ne:void 0,this},Q.getTextDimensions=function(Ne,tt){se.call(this);var _t=(tt=tt||{}).fontSize||this.getFontSize(),vt=tt.font||this.getFont(),Ht=tt.scaleFactor||this.internal.scaleFactor,Qe=0,Ar=0,pr=0,Sr=this;if(!Array.isArray(Ne)&&"string"!=typeof Ne){if("number"!=typeof Ne)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ne=String(Ne)}var Qt=tt.maxWidth;Qt>0?"string"==typeof Ne?Ne=this.splitTextToSize(Ne,Qt):"[object Array]"===Object.prototype.toString.call(Ne)&&(Ne=Ne.reduce(function(En,qn){return En.concat(Sr.splitTextToSize(qn,Qt))},[])):Ne=Array.isArray(Ne)?Ne:[Ne];for(var Lr=0;Lr<Ne.length;Lr++)Qe<(pr=this.getStringUnitWidth(Ne[Lr],{font:vt})*_t)&&(Qe=pr);return 0!==Qe&&(Ar=Ne.length),{w:Qe/=Ht,h:Math.max((Ar*_t*this.getLineHeightFactor()-_t*(this.getLineHeightFactor()-1))/Ht,0)}},Q.cellAddPage=function(){se.call(this),this.addPage();var Ne=this.internal.__cell__.margins||j;return this.internal.__cell__.lastCell=new fe(Ne.left,Ne.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var De=Q.cell=function(){var Ne;Ne=arguments[0]instanceof fe?arguments[0]:new fe(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),se.call(this);var tt=this.internal.__cell__.lastCell,_t=this.internal.__cell__.padding,vt=this.internal.__cell__.margins||j,Ht=this.internal.__cell__.tableHeaderRow,Qe=this.internal.__cell__.printHeaders;return void 0!==tt.lineNumber&&(tt.lineNumber===Ne.lineNumber?(Ne.x=(tt.x||0)+(tt.width||0),Ne.y=tt.y||0):tt.y+tt.height+Ne.height+vt.bottom>this.getPageHeight()?(this.cellAddPage(),Ne.y=vt.top,Qe&&Ht&&(this.printHeaderRow(Ne.lineNumber,!0),Ne.y+=Ht[0].height)):Ne.y=tt.y+tt.height||Ne.y),void 0!==Ne.text[0]&&(this.rect(Ne.x,Ne.y,Ne.width,Ne.height,!0===J?"FD":void 0),"right"===Ne.align?this.text(Ne.text,Ne.x+Ne.width-_t,Ne.y+_t,{align:"right",baseline:"top"}):"center"===Ne.align?this.text(Ne.text,Ne.x+Ne.width/2,Ne.y+_t,{align:"center",baseline:"top",maxWidth:Ne.width-_t-_t}):this.text(Ne.text,Ne.x+_t,Ne.y+_t,{align:"left",baseline:"top",maxWidth:Ne.width-_t-_t})),this.internal.__cell__.lastCell=Ne,this};Q.table=function(Ne,tt,_t,vt,Ht){if(se.call(this),!_t)throw new Error("No data for PDF table.");var Qe,Ar,pr,Sr,Qt=[],Lr=[],En=[],qn={},Fo={},gi=[],po=[],Jr=(Ht=Ht||{}).autoSize||!1,lo=!1!==Ht.printHeaders,zo=Ht.css&&void 0!==Ht.css["font-size"]?16*Ht.css["font-size"]:Ht.fontSize||12,cr=Ht.margins||Object.assign({width:this.getPageWidth()},j),hr="number"==typeof Ht.padding?Ht.padding:3,Xr=Ht.headerBackgroundColor||"#c8c8c8",rn=Ht.headerTextColor||"#000";if(xe.call(this),this.internal.__cell__.printHeaders=lo,this.internal.__cell__.margins=cr,this.internal.__cell__.table_font_size=zo,this.internal.__cell__.padding=hr,this.internal.__cell__.headerBackgroundColor=Xr,this.internal.__cell__.headerTextColor=rn,this.setFontSize(zo),null==vt)Lr=Qt=Object.keys(_t[0]),En=Qt.map(function(){return"left"});else if(Array.isArray(vt)&&"object"===O(vt[0]))for(Qt=vt.map(function(Xo){return Xo.name}),Lr=vt.map(function(Xo){return Xo.prompt||Xo.name||""}),En=vt.map(function(Xo){return Xo.align||"left"}),Qe=0;Qe<vt.length;Qe+=1)Fo[vt[Qe].name]=vt[Qe].width*(19.049976/25.4);else Array.isArray(vt)&&"string"==typeof vt[0]&&(Lr=Qt=vt,En=Qt.map(function(){return"left"}));if(Jr||Array.isArray(vt)&&"string"==typeof vt[0])for(Qe=0;Qe<Qt.length;Qe+=1){for(qn[Sr=Qt[Qe]]=_t.map(function(Xo){return Xo[Sr]}),this.setFont(void 0,"bold"),gi.push(this.getTextDimensions(Lr[Qe],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Ar=qn[Sr],this.setFont(void 0,"normal"),pr=0;pr<Ar.length;pr+=1)gi.push(this.getTextDimensions(Ar[pr],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Fo[Sr]=Math.max.apply(null,gi)+hr+hr,gi=[]}if(lo){var jo={};for(Qe=0;Qe<Qt.length;Qe+=1)jo[Qt[Qe]]={},jo[Qt[Qe]].text=Lr[Qe],jo[Qt[Qe]].align=En[Qe];var So=Ae.call(this,jo,Fo);po=Qt.map(function(Xo){return new fe(Ne,tt,Fo[Xo],So,jo[Xo].text,void 0,jo[Xo].align)}),this.setTableHeaderRow(po),this.printHeaderRow(1,!1)}var Zo=vt.reduce(function(Xo,ka){return Xo[ka.name]=ka.align,Xo},{});for(Qe=0;Qe<_t.length;Qe+=1){"rowStart"in Ht&&Ht.rowStart instanceof Function&&Ht.rowStart({row:Qe,data:_t[Qe]},this);var ro=Ae.call(this,_t[Qe],Fo);for(pr=0;pr<Qt.length;pr+=1){var Ho=_t[Qe][Qt[pr]];"cellStart"in Ht&&Ht.cellStart instanceof Function&&Ht.cellStart({row:Qe,col:pr,data:Ho},this),De.call(this,new fe(Ne,tt,Fo[Qt[pr]],ro,Ho,Qe+2,Zo[Qt[pr]]))}}return this.internal.__cell__.table_x=Ne,this.internal.__cell__.table_y=tt,this};var Ae=function(Ne,tt){var _t=this.internal.__cell__.padding,vt=this.internal.__cell__.table_font_size,Ht=this.internal.scaleFactor;return Object.keys(Ne).map(function(Qe){var Ar=Ne[Qe];return this.splitTextToSize(Ar.hasOwnProperty("text")?Ar.text:Ar,tt[Qe]-_t-_t)},this).map(function(Qe){return this.getLineHeightFactor()*Qe.length*vt/Ht+_t+_t},this).reduce(function(Qe,Ar){return Math.max(Qe,Ar)},0)};Q.setTableHeaderRow=function(Ne){se.call(this),this.internal.__cell__.tableHeaderRow=Ne},Q.printHeaderRow=function(Ne,tt){if(se.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var _t;if(J=!0,"function"==typeof this.internal.__cell__.headerFunction){var vt=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new fe(vt[0],vt[1],vt[2],vt[3],void 0,-1)}this.setFont(void 0,"bold");for(var Ht=[],Qe=0;Qe<this.internal.__cell__.tableHeaderRow.length;Qe+=1){_t=this.internal.__cell__.tableHeaderRow[Qe].clone(),tt&&(_t.y=this.internal.__cell__.margins.top||0,Ht.push(_t)),_t.lineNumber=Ne;var Ar=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),De.call(this,_t),this.setTextColor(Ar)}Ht.length>0&&this.setTableHeaderRow(Ht),this.setFont(void 0,"normal"),J=!1}}(Xi.API);var vn={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},On=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],oi=qr(On),ji=[100,200,300,400,500,600,700,800,900],Cs=qr(ji);function Ls(Q){var fe,j=Q.family.replace(/"|'/g,"").toLowerCase(),J=vn[fe=(fe=Q.style)||"normal"]?fe:"normal",se=function(fe){return fe?"number"==typeof fe?fe>=100&&fe<=900&&fe%100==0?fe:400:/^\d00$/.test(fe)?parseInt(fe):"bold"===fe?700:400:400}(Q.weight),xe=function(fe){return"number"==typeof oi[fe=fe||"normal"]?fe:"normal"}(Q.stretch);return{family:j,style:J,weight:se,stretch:xe,src:Q.src||[],ref:Q.ref||{name:j,style:[xe,J,se].join(" ")}}}function gl(Q,j,J,se){var xe;for(xe=J;xe>=0&&xe<j.length;xe+=se)if(Q[j[xe]])return Q[j[xe]];for(xe=J;xe>=0&&xe<j.length;xe-=se)if(Q[j[xe]])return Q[j[xe]]}var _c={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fu={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function hu(Q){return[Q.stretch,Q.style,Q.weight,Q.family].join(" ")}function Dm(Q){return Q.trimLeft()}function Vs(Q,j){for(var J=0;J<Q.length;){if(Q.charAt(J)===j)return[Q.substring(0,J),Q.substring(J+1)];J+=1}return null}function _g(Q){var j=Q.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===j?null:[j[0],Q.substring(j[0].length)]}var fd,qm,Of,Sh=["times"];(function(Q){var j,J,se,xe,fe,De,Ae,Ne,tt,_t=function(zt){return this.isStrokeTransparent=(zt=zt||{}).isStrokeTransparent||!1,this.strokeOpacity=zt.strokeOpacity||1,this.strokeStyle=zt.strokeStyle||"#000000",this.fillStyle=zt.fillStyle||"#000000",this.isFillTransparent=zt.isFillTransparent||!1,this.fillOpacity=zt.fillOpacity||1,this.font=zt.font||"10px sans-serif",this.textBaseline=zt.textBaseline||"alphabetic",this.textAlign=zt.textAlign||"left",this.lineWidth=zt.lineWidth||1,this.lineJoin=zt.lineJoin||"miter",this.lineCap=zt.lineCap||"butt",this.path=zt.path||[],this.transform=void 0!==zt.transform?zt.transform.clone():new Ne,this.globalCompositeOperation=zt.globalCompositeOperation||"normal",this.globalAlpha=zt.globalAlpha||1,this.clip_path=zt.clip_path||[],this.currentPoint=zt.currentPoint||new De,this.miterLimit=zt.miterLimit||10,this.lastPoint=zt.lastPoint||new De,this.lineDashOffset=zt.lineDashOffset||0,this.lineDash=zt.lineDash||[],this.margin=zt.margin||[0,0,0,0],this.prevPageLastElemOffset=zt.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof zt.ignoreClearRect||zt.ignoreClearRect,this};Q.events.push(["initialized",function(){this.context2d=new vt(this),j=this.internal.f2,J=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,xe=this.internal.getHorizontalCoordinate,fe=this.internal.getVerticalCoordinate,De=this.internal.Point,Ae=this.internal.Rectangle,Ne=this.internal.Matrix,tt=new _t}]);var vt=function(zt){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ir=zt;Object.defineProperty(this,"pdf",{get:function(){return Ir}});var Gr=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Gr},set:function(ei){Gr=!!ei}});var on=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return on},set:function(ei){on=!!ei}});var bn=0;Object.defineProperty(this,"posX",{get:function(){return bn},set:function(ei){isNaN(ei)||(bn=ei)}});var Xn=0;Object.defineProperty(this,"posY",{get:function(){return Xn},set:function(ei){isNaN(ei)||(Xn=ei)}}),Object.defineProperty(this,"margin",{get:function(){return tt.margin},set:function(ei){var Hr;"number"==typeof ei?Hr=[ei,ei,ei,ei]:((Hr=new Array(4))[0]=ei[0],Hr[1]=ei.length>=2?ei[1]:Hr[0],Hr[2]=ei.length>=3?ei[2]:Hr[0],Hr[3]=ei.length>=4?ei[3]:Hr[1]),tt.margin=Hr}});var so=!1;Object.defineProperty(this,"autoPaging",{get:function(){return so},set:function(ei){so=ei}});var Po=0;Object.defineProperty(this,"lastBreak",{get:function(){return Po},set:function(ei){Po=ei}});var $i=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $i},set:function(ei){$i=ei}}),Object.defineProperty(this,"ctx",{get:function(){return tt},set:function(ei){ei instanceof _t&&(tt=ei)}}),Object.defineProperty(this,"path",{get:function(){return tt.path},set:function(ei){tt.path=ei}});var Ni=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ni},set:function(ei){Ni=ei}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ei){var Hr;Hr=Ht(ei),this.ctx.fillStyle=Hr.style,this.ctx.isFillTransparent=0===Hr.a,this.ctx.fillOpacity=Hr.a,this.pdf.setFillColor(Hr.r,Hr.g,Hr.b,{a:Hr.a}),this.pdf.setTextColor(Hr.r,Hr.g,Hr.b,{a:Hr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ei){var Hr=Ht(ei);this.ctx.strokeStyle=Hr.style,this.ctx.isStrokeTransparent=0===Hr.a,this.ctx.strokeOpacity=Hr.a,0===Hr.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(Hr.r,Hr.g,Hr.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ei){-1!==["butt","round","square"].indexOf(ei)&&(this.ctx.lineCap=ei,this.pdf.setLineCap(ei))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ei){isNaN(ei)||(this.ctx.lineWidth=ei,this.pdf.setLineWidth(ei))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ei){-1!==["bevel","round","miter"].indexOf(ei)&&(this.ctx.lineJoin=ei,this.pdf.setLineJoin(ei))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ei){isNaN(ei)||(this.ctx.miterLimit=ei,this.pdf.setMiterLimit(ei))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ei){this.ctx.textBaseline=ei}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ei){-1!==["right","end","center","left","start"].indexOf(ei)&&(this.ctx.textAlign=ei)}});var ga=null,vs=null;Object.defineProperty(this,"fontFaces",{get:function(){return vs},set:function(ei){ga=null,vs=ei}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ei){var Hr;if(this.ctx.font=ei,null!==(Hr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ei))){var Is=Hr[1],qa=Hr[3],Bi=Hr[4],ua=Hr[6],va=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Bi)[2];Bi=Math.floor("px"===va?parseFloat(Bi)*this.pdf.internal.scaleFactor:"em"===va?parseFloat(Bi)*this.pdf.getFontSize():parseFloat(Bi)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Bi);var da=function(As){var tl,wa,Al=[],$a=As.trim();if(""===$a)return Sh;if($a in fu)return[fu[$a]];for(;""!==$a;){switch(wa=null,tl=($a=Dm($a)).charAt(0)){case'"':case"'":wa=Vs($a.substring(1),tl);break;default:wa=_g($a)}if(null===wa||(Al.push(wa[0]),""!==($a=Dm(wa[1]))&&","!==$a.charAt(0)))return Sh;$a=$a.replace(/^,/,"")}return Al}(ua);if(this.fontFaces){var os=function Jf(Q,j,J){for(var se=(J=J||{}).defaultFontFamily||"times",xe=Object.assign({},_c,J.genericFontFamilies||{}),fe=null,De=null,Ae=0;Ae<j.length;++Ae)if(xe[(fe=Ls(j[Ae])).family]&&(fe.family=xe[fe.family]),Q.hasOwnProperty(fe.family)){De=Q[fe.family];break}if(!(De=De||Q[se]))throw new Error("Could not find a font-family for the rule '"+hu(fe)+"' and default family '"+se+"'.");if(De=function(Ne,tt){if(tt[Ne])return tt[Ne];var _t=oi[Ne],Ht=gl(tt,On,_t,_t<=oi.normal?-1:1);if(!Ht)throw new Error("Could not find a matching font-stretch value for "+Ne);return Ht}(fe.stretch,De),De=function(Ne,tt){if(tt[Ne])return tt[Ne];for(var _t=vn[Ne],vt=0;vt<_t.length;++vt)if(tt[_t[vt]])return tt[_t[vt]];throw new Error("Could not find a matching font-style for "+Ne)}(fe.style,De),!(De=function(Ne,tt){if(tt[Ne])return tt[Ne];if(400===Ne&&tt[500])return tt[500];if(500===Ne&&tt[400])return tt[400];var vt=gl(tt,ji,Cs[Ne],Ne<400?-1:1);if(!vt)throw new Error("Could not find a matching font-weight for value "+Ne);return vt}(fe.weight,De)))throw new Error("Failed to resolve a font for the rule '"+hu(fe)+"'.");return De}(function _a(ei,Hr){if(null===ga){var Is=(qa=ei.getFontList(),Bi=[],Object.keys(qa).forEach(function(ua){qa[ua].forEach(function(va){var da=null;switch(va){case"bold":da={family:ua,weight:"bold"};break;case"italic":da={family:ua,style:"italic"};break;case"bolditalic":da={family:ua,weight:"bold",style:"italic"};break;case"":case"normal":da={family:ua}}null!==da&&(da.ref={name:ua,style:va},Bi.push(da))})}),Bi);ga=function(qa){for(var Bi={},ua=0;ua<qa.length;++ua){var va=Ls(qa[ua]),da=va.family,os=va.stretch,Es=va.style,Ts=va.weight;Bi[da]=Bi[da]||{},Bi[da][os]=Bi[da][os]||{},Bi[da][os][Es]=Bi[da][os][Es]||{},Bi[da][os][Es][Ts]=va}return Bi}(Is.concat(Hr))}var qa,Bi;return ga}(this.pdf,this.fontFaces),da.map(function(As){return{family:As,stretch:"normal",weight:qa,style:Is}}));this.pdf.setFont(os.ref.name,os.ref.style)}else{var Es="";("bold"===qa||parseInt(qa,10)>=700||"bold"===Is)&&(Es="bold"),"italic"===Is&&(Es+="italic"),0===Es.length&&(Es="normal");for(var Ts="",js={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pl=0;pl<da.length;pl++){if(void 0!==this.pdf.internal.getFont(da[pl],Es,{noFallback:!0,disableWarning:!0})){Ts=da[pl];break}if("bolditalic"===Es&&void 0!==this.pdf.internal.getFont(da[pl],"bold",{noFallback:!0,disableWarning:!0}))Ts=da[pl],Es="bold";else if(void 0!==this.pdf.internal.getFont(da[pl],"normal",{noFallback:!0,disableWarning:!0})){Ts=da[pl],Es="normal";break}}if(""===Ts)for(var zs=0;zs<da.length;zs++)if(js[da[zs]]){Ts=js[da[zs]];break}this.pdf.setFont(Ts=""===Ts?"Times":Ts,Es)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ei){this.ctx.globalCompositeOperation=ei}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ei){this.ctx.globalAlpha=ei}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ei){this.ctx.lineDashOffset=ei,ka.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ei){this.ctx.lineDash=ei,ka.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ei){this.ctx.ignoreClearRect=!!ei}})};vt.prototype.setLineDash=function(zt){this.lineDash=zt},vt.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},vt.prototype.fill=function(){qn.call(this,"fill",!1)},vt.prototype.stroke=function(){qn.call(this,"stroke",!1)},vt.prototype.beginPath=function(){this.path=[{type:"begin"}]},vt.prototype.moveTo=function(zt,Ir){if(isNaN(zt)||isNaN(Ir))throw Js.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Gr=this.ctx.transform.applyToPoint(new De(zt,Ir));this.path.push({type:"mt",x:Gr.x,y:Gr.y}),this.ctx.lastPoint=new De(zt,Ir)},vt.prototype.closePath=function(){var zt=new De(0,0),Ir=0;for(Ir=this.path.length-1;-1!==Ir;Ir--)if("begin"===this.path[Ir].type&&"object"===O(this.path[Ir+1])&&"number"==typeof this.path[Ir+1].x){zt=new De(this.path[Ir+1].x,this.path[Ir+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new De(zt.x,zt.y)},vt.prototype.lineTo=function(zt,Ir){if(isNaN(zt)||isNaN(Ir))throw Js.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Gr=this.ctx.transform.applyToPoint(new De(zt,Ir));this.path.push({type:"lt",x:Gr.x,y:Gr.y}),this.ctx.lastPoint=new De(Gr.x,Gr.y)},vt.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),qn.call(this,null,!0)},vt.prototype.quadraticCurveTo=function(zt,Ir,Gr,on){if(isNaN(Gr)||isNaN(on)||isNaN(zt)||isNaN(Ir))throw Js.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var bn=this.ctx.transform.applyToPoint(new De(Gr,on)),Xn=this.ctx.transform.applyToPoint(new De(zt,Ir));this.path.push({type:"qct",x1:Xn.x,y1:Xn.y,x:bn.x,y:bn.y}),this.ctx.lastPoint=new De(bn.x,bn.y)},vt.prototype.bezierCurveTo=function(zt,Ir,Gr,on,bn,Xn){if(isNaN(bn)||isNaN(Xn)||isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on))throw Js.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var so=this.ctx.transform.applyToPoint(new De(bn,Xn)),Po=this.ctx.transform.applyToPoint(new De(zt,Ir)),$i=this.ctx.transform.applyToPoint(new De(Gr,on));this.path.push({type:"bct",x1:Po.x,y1:Po.y,x2:$i.x,y2:$i.y,x:so.x,y:so.y}),this.ctx.lastPoint=new De(so.x,so.y)},vt.prototype.arc=function(zt,Ir,Gr,on,bn,Xn){if(isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on)||isNaN(bn))throw Js.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Xn=!!Xn,!this.ctx.transform.isIdentity){var so=this.ctx.transform.applyToPoint(new De(zt,Ir));zt=so.x,Ir=so.y;var Po=this.ctx.transform.applyToPoint(new De(0,Gr)),$i=this.ctx.transform.applyToPoint(new De(0,0));Gr=Math.sqrt(Math.pow(Po.x-$i.x,2)+Math.pow(Po.y-$i.y,2))}Math.abs(bn-on)>=2*Math.PI&&(on=0,bn=2*Math.PI),this.path.push({type:"arc",x:zt,y:Ir,radius:Gr,startAngle:on,endAngle:bn,counterclockwise:Xn})},vt.prototype.arcTo=function(zt,Ir,Gr,on,bn){throw new Error("arcTo not implemented.")},vt.prototype.rect=function(zt,Ir,Gr,on){if(isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on))throw Js.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(zt,Ir),this.lineTo(zt+Gr,Ir),this.lineTo(zt+Gr,Ir+on),this.lineTo(zt,Ir+on),this.lineTo(zt,Ir),this.lineTo(zt+Gr,Ir),this.lineTo(zt,Ir)},vt.prototype.fillRect=function(zt,Ir,Gr,on){if(isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on))throw Js.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Qe.call(this)){var bn={};"butt"!==this.lineCap&&(bn.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(bn.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(zt,Ir,Gr,on),this.fill(),bn.hasOwnProperty("lineCap")&&(this.lineCap=bn.lineCap),bn.hasOwnProperty("lineJoin")&&(this.lineJoin=bn.lineJoin)}},vt.prototype.strokeRect=function(zt,Ir,Gr,on){if(isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on))throw Js.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Ar.call(this)||(this.beginPath(),this.rect(zt,Ir,Gr,on),this.stroke())},vt.prototype.clearRect=function(zt,Ir,Gr,on){if(isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on))throw Js.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(zt,Ir,Gr,on))},vt.prototype.save=function(zt){zt="boolean"!=typeof zt||zt;for(var Ir=this.pdf.internal.getCurrentPageInfo().pageNumber,Gr=0;Gr<this.pdf.internal.getNumberOfPages();Gr++)this.pdf.setPage(Gr+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ir),zt){this.ctx.fontSize=this.pdf.internal.getFontSize();var on=new _t(this.ctx);this.ctxStack.push(this.ctx),this.ctx=on}},vt.prototype.restore=function(zt){zt="boolean"!=typeof zt||zt;for(var Ir=this.pdf.internal.getCurrentPageInfo().pageNumber,Gr=0;Gr<this.pdf.internal.getNumberOfPages();Gr++)this.pdf.setPage(Gr+1),this.pdf.internal.out("Q");this.pdf.setPage(Ir),zt&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},vt.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Ht=function(zt){var Ir,Gr,on,bn;if(!0===zt.isCanvasGradient&&(zt=zt.getColor()),!zt)return{r:0,g:0,b:0,a:0,style:zt};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(zt))Ir=0,Gr=0,on=0,bn=0;else{var Xn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(zt);if(null!==Xn)Ir=parseInt(Xn[1]),Gr=parseInt(Xn[2]),on=parseInt(Xn[3]),bn=1;else if(null!==(Xn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(zt)))Ir=parseInt(Xn[1]),Gr=parseInt(Xn[2]),on=parseInt(Xn[3]),bn=parseFloat(Xn[4]);else{if(bn=1,"string"==typeof zt&&"#"!==zt.charAt(0)){var so=new Xc(zt);zt=so.ok?so.toHex():"#000000"}4===zt.length?(Ir=zt.substring(1,2),Ir+=Ir,Gr=zt.substring(2,3),Gr+=Gr,on=zt.substring(3,4),on+=on):(Ir=zt.substring(1,3),Gr=zt.substring(3,5),on=zt.substring(5,7)),Ir=parseInt(Ir,16),Gr=parseInt(Gr,16),on=parseInt(on,16)}}return{r:Ir,g:Gr,b:on,a:bn,style:zt}},Qe=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},Ar=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};vt.prototype.fillText=function(zt,Ir,Gr,on){if(isNaN(Ir)||isNaN(Gr)||"string"!=typeof zt)throw Js.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(on=isNaN(on)?void 0:on,!Qe.call(this)){var bn=ro(this.ctx.transform.rotation);hr.call(this,{text:zt,x:Ir,y:Gr,scale:this.ctx.transform.scaleX,angle:bn,align:this.textAlign,maxWidth:on})}},vt.prototype.strokeText=function(zt,Ir,Gr,on){if(isNaN(Ir)||isNaN(Gr)||"string"!=typeof zt)throw Js.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Ar.call(this)){on=isNaN(on)?void 0:on;var bn=ro(this.ctx.transform.rotation);hr.call(this,{text:zt,x:Ir,y:Gr,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:bn,align:this.textAlign,maxWidth:on})}},vt.prototype.measureText=function(zt){if("string"!=typeof zt)throw Js.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ir=this.pdf,Gr=this.pdf.internal.scaleFactor,on=Ir.internal.getFontSize(),bn=Ir.getStringUnitWidth(zt)*on/Ir.internal.scaleFactor;return new function(so){var Po=(so=so||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Po}}),this}({width:bn*=Math.round(96*Gr/72*1e4)/1e4})},vt.prototype.scale=function(zt,Ir){if(isNaN(zt)||isNaN(Ir))throw Js.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Gr=new Ne(zt,0,0,Ir,0,0);this.ctx.transform=this.ctx.transform.multiply(Gr)},vt.prototype.rotate=function(zt){if(isNaN(zt))throw Js.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ir=new Ne(Math.cos(zt),Math.sin(zt),-Math.sin(zt),Math.cos(zt),0,0);this.ctx.transform=this.ctx.transform.multiply(Ir)},vt.prototype.translate=function(zt,Ir){if(isNaN(zt)||isNaN(Ir))throw Js.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Gr=new Ne(1,0,0,1,zt,Ir);this.ctx.transform=this.ctx.transform.multiply(Gr)},vt.prototype.transform=function(zt,Ir,Gr,on,bn,Xn){if(isNaN(zt)||isNaN(Ir)||isNaN(Gr)||isNaN(on)||isNaN(bn)||isNaN(Xn))throw Js.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var so=new Ne(zt,Ir,Gr,on,bn,Xn);this.ctx.transform=this.ctx.transform.multiply(so)},vt.prototype.setTransform=function(zt,Ir,Gr,on,bn,Xn){zt=isNaN(zt)?1:zt,Ir=isNaN(Ir)?0:Ir,Gr=isNaN(Gr)?0:Gr,on=isNaN(on)?1:on,bn=isNaN(bn)?0:bn,Xn=isNaN(Xn)?0:Xn,this.ctx.transform=new Ne(zt,Ir,Gr,on,bn,Xn)};var pr=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};vt.prototype.drawImage=function(zt,Ir,Gr,on,bn,Xn,so,Po,$i){var Ni=this.pdf.getImageProperties(zt),ga=1,_a=1,vs=1,ei=1;void 0!==on&&void 0!==Po&&(vs=Po/on,ei=$i/bn,ga=Ni.width/on*Po/on,_a=Ni.height/bn*$i/bn),void 0===Xn&&(Xn=Ir,so=Gr,Ir=0,Gr=0),void 0!==on&&void 0===Po&&(Po=on,$i=bn),void 0===on&&void 0===Po&&(Po=Ni.width,$i=Ni.height);for(var Hr,Is=this.ctx.transform.decompose(),qa=ro(Is.rotate.shx),Bi=new Ne,ua=(Bi=(Bi=(Bi=Bi.multiply(Is.translate)).multiply(Is.skew)).multiply(Is.scale)).applyToRectangle(new Ae(Xn-Ir*vs,so-Gr*ei,on*ga,bn*_a)),va=Sr.call(this,ua),da=[],os=0;os<va.length;os+=1)-1===da.indexOf(va[os])&&da.push(va[os]);if(En(da),this.autoPaging)for(var Es=da[0],Ts=da[da.length-1],js=Es;js<Ts+1;js++){this.pdf.setPage(js);var pl=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],zs=1===js?this.posY+this.margin[0]:this.margin[0],tl=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wa=1===js?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(js-2)*tl;if(0!==this.ctx.clip_path.length){var Al=this.path;Hr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Lr(Hr,this.posX+this.margin[3],-wa+zs+this.ctx.prevPageLastElemOffset),Fo.call(this,"fill",!0),this.path=Al}var $a=JSON.parse(JSON.stringify(ua));$a=Lr([$a],this.posX+this.margin[3],-wa+zs+this.ctx.prevPageLastElemOffset)[0];var Kc=(js>Es||js<Ts)&&pr.call(this);Kc&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pl,tl,null).clip().discardPath()),this.pdf.addImage(zt,"JPEG",$a.x,$a.y,$a.w,$a.h,null,null,qa),Kc&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(zt,"JPEG",ua.x,ua.y,ua.w,ua.h,null,null,qa)};var Sr=function(zt,Ir,Gr){var on=[];Ir=Ir||this.pdf.internal.pageSize.width,Gr=Gr||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var bn=this.posY+this.ctx.prevPageLastElemOffset;switch(zt.type){default:case"mt":case"lt":on.push(Math.floor((zt.y+bn)/Gr)+1);break;case"arc":on.push(Math.floor((zt.y+bn-zt.radius)/Gr)+1),on.push(Math.floor((zt.y+bn+zt.radius)/Gr)+1);break;case"qct":var Xn=Ho(this.ctx.lastPoint.x,this.ctx.lastPoint.y,zt.x1,zt.y1,zt.x,zt.y);on.push(Math.floor((Xn.y+bn)/Gr)+1),on.push(Math.floor((Xn.y+Xn.h+bn)/Gr)+1);break;case"bct":var so=Xo(this.ctx.lastPoint.x,this.ctx.lastPoint.y,zt.x1,zt.y1,zt.x2,zt.y2,zt.x,zt.y);on.push(Math.floor((so.y+bn)/Gr)+1),on.push(Math.floor((so.y+so.h+bn)/Gr)+1);break;case"rect":on.push(Math.floor((zt.y+bn)/Gr)+1),on.push(Math.floor((zt.y+zt.h+bn)/Gr)+1)}for(var Po=0;Po<on.length;Po+=1)for(;this.pdf.internal.getNumberOfPages()<on[Po];)Qt.call(this);return on},Qt=function(){var zt=this.fillStyle,Ir=this.strokeStyle,Gr=this.font,on=this.lineCap,bn=this.lineWidth,Xn=this.lineJoin;this.pdf.addPage(),this.fillStyle=zt,this.strokeStyle=Ir,this.font=Gr,this.lineCap=on,this.lineWidth=bn,this.lineJoin=Xn},Lr=function(zt,Ir,Gr){for(var on=0;on<zt.length;on++)switch(zt[on].type){case"bct":zt[on].x2+=Ir,zt[on].y2+=Gr;case"qct":zt[on].x1+=Ir,zt[on].y1+=Gr;default:zt[on].x+=Ir,zt[on].y+=Gr}return zt},En=function(zt){return zt.sort(function(Ir,Gr){return Ir-Gr})},qn=function(zt,Ir){for(var Gr,on,bn=this.fillStyle,Xn=this.strokeStyle,so=this.lineCap,Po=this.lineWidth,$i=Math.abs(Po*this.ctx.transform.scaleX),Ni=this.lineJoin,ga=JSON.parse(JSON.stringify(this.path)),_a=JSON.parse(JSON.stringify(this.path)),vs=[],ei=0;ei<_a.length;ei++)if(void 0!==_a[ei].x)for(var Hr=Sr.call(this,_a[ei]),Is=0;Is<Hr.length;Is+=1)-1===vs.indexOf(Hr[Is])&&vs.push(Hr[Is]);for(var qa=0;qa<vs.length;qa++)for(;this.pdf.internal.getNumberOfPages()<vs[qa];)Qt.call(this);if(En(vs),this.autoPaging)for(var Bi=vs[0],ua=vs[vs.length-1],va=Bi;va<ua+1;va++){this.pdf.setPage(va),this.fillStyle=bn,this.strokeStyle=Xn,this.lineCap=so,this.lineWidth=$i,this.lineJoin=Ni;var da=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],os=1===va?this.posY+this.margin[0]:this.margin[0],Ts=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],js=1===va?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(va-2)*Ts;if(0!==this.ctx.clip_path.length){var pl=this.path;Gr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Lr(Gr,this.posX+this.margin[3],-js+os+this.ctx.prevPageLastElemOffset),Fo.call(this,zt,!0),this.path=pl}if(on=JSON.parse(JSON.stringify(ga)),this.path=Lr(on,this.posX+this.margin[3],-js+os+this.ctx.prevPageLastElemOffset),!1===Ir||0===va){var zs=(va>Bi||va<ua)&&pr.call(this);zs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],da,Ts,null).clip().discardPath()),Fo.call(this,zt,Ir),zs&&this.pdf.restoreGraphicsState()}this.lineWidth=Po}else this.lineWidth=$i,Fo.call(this,zt,Ir),this.lineWidth=Po;this.path=ga},Fo=function(zt,Ir){if(("stroke"!==zt||Ir||!Ar.call(this))&&("stroke"===zt||Ir||!Qe.call(this))){for(var Gr,on,bn=[],Xn=this.path,so=0;so<Xn.length;so++){var Po=Xn[so];switch(Po.type){case"begin":bn.push({begin:!0});break;case"close":bn.push({close:!0});break;case"mt":bn.push({start:Po,deltas:[],abs:[]});break;case"lt":var $i=bn.length;if(Xn[so-1]&&!isNaN(Xn[so-1].x)&&(Gr=[Po.x-Xn[so-1].x,Po.y-Xn[so-1].y],$i>0))for(;$i>=0;$i--)if(!0!==bn[$i-1].close&&!0!==bn[$i-1].begin){bn[$i-1].deltas.push(Gr),bn[$i-1].abs.push(Po);break}break;case"bct":bn[bn.length-1].deltas.push(Gr=[Po.x1-Xn[so-1].x,Po.y1-Xn[so-1].y,Po.x2-Xn[so-1].x,Po.y2-Xn[so-1].y,Po.x-Xn[so-1].x,Po.y-Xn[so-1].y]);break;case"qct":bn[bn.length-1].deltas.push(Gr=[Xn[so-1].x+2/3*(Po.x1-Xn[so-1].x)-Xn[so-1].x,Xn[so-1].y+2/3*(Po.y1-Xn[so-1].y)-Xn[so-1].y,Po.x+2/3*(Po.x1-Po.x)-Xn[so-1].x,Po.y+2/3*(Po.y1-Po.y)-Xn[so-1].y,Po.x-Xn[so-1].x,Po.y-Xn[so-1].y]);break;case"arc":bn.push({deltas:[],abs:[],arc:!0}),Array.isArray(bn[bn.length-1].abs)&&bn[bn.length-1].abs.push(Po)}}on=Ir?null:"stroke"===zt?"stroke":"fill";for(var Is=!1,qa=0;qa<bn.length;qa++)if(bn[qa].arc)for(var Bi=bn[qa].abs,ua=0;ua<Bi.length;ua++){var va=Bi[ua];"arc"===va.type?Jr.call(this,va.x,va.y,va.radius,va.startAngle,va.endAngle,va.counterclockwise,void 0,Ir,!Is):Xr.call(this,va.x,va.y),Is=!0}else!0===bn[qa].close?(this.pdf.internal.out("h"),Is=!1):!0!==bn[qa].begin&&(rn.call(this,bn[qa].deltas,bn[qa].start.x,bn[qa].start.y),Is=!0);on&&lo.call(this,on),Ir&&zo.call(this)}},gi=function(zt){var Ir=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Gr=Ir*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return zt-Gr;case"top":return zt+Ir-Gr;case"hanging":return zt+Ir-2*Gr;case"middle":return zt+Ir/2-Gr;default:return zt}},po=function(zt){return zt+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};vt.prototype.createLinearGradient=function(){var zt=function(){};return zt.colorStops=[],zt.addColorStop=function(Ir,Gr){this.colorStops.push([Ir,Gr])},zt.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},zt.isCanvasGradient=!0,zt},vt.prototype.createPattern=function(){return this.createLinearGradient()},vt.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Jr=function(zt,Ir,Gr,on,bn,Xn,so,Po,$i){for(var Ni=So.call(this,Gr,on,bn,Xn),ga=0;ga<Ni.length;ga++){var _a=Ni[ga];0===ga&&($i?cr.call(this,_a.x1+zt,_a.y1+Ir):Xr.call(this,_a.x1+zt,_a.y1+Ir)),jo.call(this,zt,Ir,_a.x2,_a.y2,_a.x3,_a.y3,_a.x4,_a.y4)}Po?zo.call(this):lo.call(this,so)},lo=function(zt){switch(zt){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},zo=function(){this.pdf.clip(),this.pdf.discardPath()},cr=function(zt,Ir){this.pdf.internal.out(J(zt)+" "+se(Ir)+" m")},hr=function(zt){var Ir;switch(zt.align){case"right":case"end":Ir="right";break;case"center":Ir="center";break;default:Ir="left"}var Gr=this.pdf.getTextDimensions(zt.text),on=gi.call(this,zt.y),bn=po.call(this,on)-Gr.h,Xn=this.ctx.transform.applyToPoint(new De(zt.x,on)),so=this.ctx.transform.decompose(),Po=new Ne;Po=(Po=(Po=Po.multiply(so.translate)).multiply(so.skew)).multiply(so.scale);for(var $i,Ni,ga,_a=this.ctx.transform.applyToRectangle(new Ae(zt.x,on,Gr.w,Gr.h)),vs=Po.applyToRectangle(new Ae(zt.x,bn,Gr.w,Gr.h)),ei=Sr.call(this,vs),Hr=[],Is=0;Is<ei.length;Is+=1)-1===Hr.indexOf(ei[Is])&&Hr.push(ei[Is]);if(En(Hr),this.autoPaging)for(var qa=Hr[0],Bi=Hr[Hr.length-1],ua=qa;ua<Bi+1;ua++){this.pdf.setPage(ua);var va=1===ua?this.posY+this.margin[0]:this.margin[0],os=this.pdf.internal.pageSize.height-this.margin[2],Es=os-this.margin[0],Ts=this.pdf.internal.pageSize.width-this.margin[1],js=Ts-this.margin[3],pl=1===ua?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(ua-2)*Es;if(0!==this.ctx.clip_path.length){var zs=this.path;$i=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Lr($i,this.posX+this.margin[3],-1*pl+va),Fo.call(this,"fill",!0),this.path=zs}var As=Lr([JSON.parse(JSON.stringify(vs))],this.posX+this.margin[3],-pl+va+this.ctx.prevPageLastElemOffset)[0];zt.scale>=.01&&(Ni=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ni*zt.scale),this.lineWidth=(ga=this.lineWidth)*zt.scale);var tl="text"!==this.autoPaging;if(tl||As.y+As.h<=os){if(tl||As.y>=va&&As.x<=Ts){var wa=tl?zt.text:this.pdf.splitTextToSize(zt.text,zt.maxWidth||Ts-As.x)[0],Al=Lr([JSON.parse(JSON.stringify(_a))],this.posX+this.margin[3],-pl+va+this.ctx.prevPageLastElemOffset)[0],$a=tl&&(ua>qa||ua<Bi)&&pr.call(this);$a&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],js,Es,null).clip().discardPath()),this.pdf.text(wa,Al.x,Al.y,{angle:zt.angle,align:Ir,renderingMode:zt.renderingMode}),$a&&this.pdf.restoreGraphicsState()}}else As.y<os&&(this.ctx.prevPageLastElemOffset+=os-As.y);zt.scale>=.01&&(this.pdf.setFontSize(Ni),this.lineWidth=ga)}else zt.scale>=.01&&(Ni=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ni*zt.scale),this.lineWidth=(ga=this.lineWidth)*zt.scale),this.pdf.text(zt.text,Xn.x+this.posX,Xn.y+this.posY,{angle:zt.angle,align:Ir,renderingMode:zt.renderingMode,maxWidth:zt.maxWidth}),zt.scale>=.01&&(this.pdf.setFontSize(Ni),this.lineWidth=ga)},Xr=function(zt,Ir,Gr,on){on=on||0,this.pdf.internal.out(J(zt+(Gr=Gr||0))+" "+se(Ir+on)+" l")},rn=function(zt,Ir,Gr){return this.pdf.lines(zt,Ir,Gr,null,null)},jo=function(zt,Ir,Gr,on,bn,Xn,so,Po){this.pdf.internal.out([j(xe(Gr+zt)),j(fe(on+Ir)),j(xe(bn+zt)),j(fe(Xn+Ir)),j(xe(so+zt)),j(fe(Po+Ir)),"c"].join(" "))},So=function(zt,Ir,Gr,on){for(var bn=2*Math.PI,Xn=Math.PI/2;Ir>Gr;)Ir-=bn;var so=Math.abs(Gr-Ir);so<bn&&on&&(so=bn-so);for(var Po=[],$i=on?-1:1,Ni=Ir;so>1e-5;){var ga=Ni+$i*Math.min(so,Xn);Po.push(Zo.call(this,zt,Ni,ga)),so-=Math.abs(ga-Ni),Ni=ga}return Po},Zo=function(zt,Ir,Gr){var on=(Gr-Ir)/2,bn=zt*Math.cos(on),Xn=zt*Math.sin(on),so=bn,Po=-Xn,$i=so*so+Po*Po,Ni=$i+so*bn+Po*Xn,ga=4/3*(Math.sqrt(2*$i*Ni)-Ni)/(so*Xn-Po*bn),_a=so-ga*Po,vs=Po+ga*so,ei=_a,Hr=-vs,Is=on+Ir,qa=Math.cos(Is),Bi=Math.sin(Is);return{x1:zt*Math.cos(Ir),y1:zt*Math.sin(Ir),x2:_a*qa-vs*Bi,y2:_a*Bi+vs*qa,x3:ei*qa-Hr*Bi,y3:ei*Bi+Hr*qa,x4:zt*Math.cos(Gr),y4:zt*Math.sin(Gr)}},ro=function(zt){return 180*zt/Math.PI},Ho=function(zt,Ir,Gr,on,bn,Xn){var so=zt+.5*(Gr-zt),Po=Ir+.5*(on-Ir),$i=bn+.5*(Gr-bn),Ni=Xn+.5*(on-Xn),ga=Math.min(zt,bn,so,$i),_a=Math.max(zt,bn,so,$i),vs=Math.min(Ir,Xn,Po,Ni),ei=Math.max(Ir,Xn,Po,Ni);return new Ae(ga,vs,_a-ga,ei-vs)},Xo=function(zt,Ir,Gr,on,bn,Xn,so,Po){var $i,Ni,ga,_a,vs,ei,Hr,Is,qa,Bi,ua,va,da,os,Es=Gr-zt,Ts=on-Ir,js=bn-Gr,pl=Xn-on,zs=so-bn,As=Po-Xn;for(Ni=0;Ni<41;Ni++)qa=(Hr=(ga=zt+($i=Ni/40)*Es)+$i*((vs=Gr+$i*js)-ga))+$i*(vs+$i*(bn+$i*zs-vs)-Hr),Bi=(Is=(_a=Ir+$i*Ts)+$i*((ei=on+$i*pl)-_a))+$i*(ei+$i*(Xn+$i*As-ei)-Is),0==Ni?(ua=qa,va=Bi,da=qa,os=Bi):(ua=Math.min(ua,qa),va=Math.min(va,Bi),da=Math.max(da,qa),os=Math.max(os,Bi));return new Ae(Math.round(ua),Math.round(va),Math.round(da-ua),Math.round(os-va))},ka=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Gr=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==Gr&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Gr)}}})(Xi.API),
/**
       * @license
       * jsPDF filters PlugIn
       * Copyright (c) 2014 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j=function(fe){var De,Ae,Ne,tt,_t,vt,Ht,Qe,Ar,pr;for(/[^\x00-\xFF]/.test(fe),Ae=[],Ne=0,tt=(fe+=De="\0\0\0\0".slice(fe.length%4||4)).length;tt>Ne;Ne+=4)0!==(_t=(fe.charCodeAt(Ne)<<24)+(fe.charCodeAt(Ne+1)<<16)+(fe.charCodeAt(Ne+2)<<8)+fe.charCodeAt(Ne+3))?(vt=(_t=((_t=((_t=((_t=(_t-(pr=_t%85))/85)-(Ar=_t%85))/85)-(Qe=_t%85))/85)-(Ht=_t%85))/85)%85,Ae.push(vt+33,Ht+33,Qe+33,Ar+33,pr+33)):Ae.push(122);return function(Sr,Qt){for(var Lr=Qt;Lr>0;Lr--)Sr.pop()}(Ae,De.length),String.fromCharCode.apply(String,Ae)+"~>"},J=function(fe){var De,Ae,Ne,tt,_t,vt=String,Ht="length",Ar="charCodeAt",pr="slice",Sr="replace";for(fe[pr](-2),fe=fe[pr](0,-2)[Sr](/\s/g,"")[Sr]("z","!!!!!"),Ne=[],tt=0,_t=(fe+=De="uuuuu"[pr](fe[Ht]%5||5))[Ht];_t>tt;tt+=5)Ae=52200625*(fe[Ar](tt)-33)+614125*(fe[Ar](tt+1)-33)+7225*(fe[Ar](tt+2)-33)+85*(fe[Ar](tt+3)-33)+(fe[Ar](tt+4)-33),Ne.push(255&Ae>>24,255&Ae>>16,255&Ae>>8,255&Ae);return function(Qt,Lr){for(var En=Lr;En>0;En--)Qt.pop()}(Ne,De[Ht]),vt.fromCharCode.apply(vt,Ne)},se=function(fe){var De=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(fe=fe.replace(/\s/g,"")).indexOf(">")&&(fe=fe.substr(0,fe.indexOf(">"))),fe.length%2&&(fe+="0"),!1===De.test(fe))return"";for(var Ae="",Ne=0;Ne<fe.length;Ne+=2)Ae+=String.fromCharCode("0x"+(fe[Ne]+fe[Ne+1]));return Ae},xe=function(fe){for(var De=new Uint8Array(fe.length),Ae=fe.length;Ae--;)De[Ae]=fe.charCodeAt(Ae);return(De=pn(De)).reduce(function(Ne,tt){return Ne+String.fromCharCode(tt)},"")};Q.processDataByFilters=function(fe,De){var Ae=0,Ne=fe||"",tt=[];for("string"==typeof(De=De||[])&&(De=[De]),Ae=0;Ae<De.length;Ae+=1)switch(De[Ae]){case"ASCII85Decode":case"/ASCII85Decode":Ne=J(Ne),tt.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ne=j(Ne),tt.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ne=se(Ne),tt.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ne=Ne.split("").map(function(_t){return("0"+_t.charCodeAt().toString(16)).slice(-2)}).join("")+">",tt.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ne=xe(Ne),tt.push("/FlateDecode");break;default:throw new Error('The filter: "'+De[Ae]+'" is not implemented')}return{data:Ne,reverseChain:tt.reverse().join(" ")}}}(Xi.API),
/**
       * @license
       * jsPDF fileloading PlugIn
       * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){Q.loadFile=function(j,J,se){return function(xe,fe,De){fe=!1!==fe,De="function"==typeof De?De:function(){};var Ae=void 0;try{Ae=function(Ne,tt,_t){var vt=new XMLHttpRequest,Ht=0,Qe=function(Ar){var pr=Ar.length,Sr=[],Qt=String.fromCharCode;for(Ht=0;Ht<pr;Ht+=1)Sr.push(Qt(255&Ar.charCodeAt(Ht)));return Sr.join("")};if(vt.open("GET",Ne,!tt),vt.overrideMimeType("text/plain; charset=x-user-defined"),!1===tt&&(vt.onload=function(){_t(200===vt.status?Qe(this.responseText):void 0)}),vt.send(null),tt&&200===vt.status)return Qe(vt.responseText)}(xe,fe,De)}catch{}return Ae}(j,J,se)},Q.loadImageFile=Q.loadFile}(Xi.API),function(Q){function j(){return(Ea.html2canvas?Promise.resolve(Ea.html2canvas):Promise.resolve().then(re.t.bind(re,74456,23))).catch(function(De){return Promise.reject(new Error("Could not load html2canvas: "+De))}).then(function(De){return De.default?De.default:De})}function J(){return(Ea.DOMPurify?Promise.resolve(Ea.DOMPurify):re.e(106).then(re.bind(re,70106))).catch(function(De){return Promise.reject(new Error("Could not load dompurify: "+De))}).then(function(De){return De.default?De.default:De})}var se=function(De){var Ae=O(De);return"undefined"===Ae?"undefined":"string"===Ae||De instanceof String?"string":"number"===Ae||De instanceof Number?"number":"function"===Ae||De instanceof Function?"function":De&&De.constructor===Array?"array":De&&1===De.nodeType?"element":"object"===Ae?"object":"unknown"},xe=function(De,Ae){var Ne=document.createElement(De);for(var tt in Ae.className&&(Ne.className=Ae.className),Ae.innerHTML&&Ae.dompurify&&(Ne.innerHTML=Ae.dompurify.sanitize(Ae.innerHTML)),Ae.style)Ne.style[tt]=Ae.style[tt];return Ne},fe=function De(Ae){var Ne=Object.assign(De.convert(Promise.resolve()),JSON.parse(JSON.stringify(De.template))),tt=De.convert(Promise.resolve(),Ne);return(tt=tt.setProgress(1,De,1,[De])).set(Ae)};(fe.prototype=Object.create(Promise.prototype)).constructor=fe,fe.convert=function(De,Ae){return De.__proto__=Ae||fe.prototype,De},fe.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},fe.prototype.from=function(De,Ae){return this.then(function(){switch(Ae=Ae||function(Ne){switch(se(Ne)){case"string":return"string";case"element":return"canvas"===Ne.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(De)){case"string":return this.then(J).then(function(Ne){return this.set({src:xe("div",{innerHTML:De,dompurify:Ne})})});case"element":return this.set({src:De});case"canvas":return this.set({canvas:De});case"img":return this.set({img:De});default:return this.error("Unknown source type.")}})},fe.prototype.to=function(De){switch(De){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},fe.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var De={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Ae=function Ne(tt,_t){for(var vt=3===tt.nodeType?document.createTextNode(tt.nodeValue):tt.cloneNode(!1),Ht=tt.firstChild;Ht;Ht=Ht.nextSibling)!0!==_t&&1===Ht.nodeType&&"SCRIPT"===Ht.nodeName||vt.appendChild(Ne(Ht,_t));return 1===tt.nodeType&&("CANVAS"===tt.nodeName?(vt.width=tt.width,vt.height=tt.height,vt.getContext("2d").drawImage(tt,0,0)):"TEXTAREA"!==tt.nodeName&&"SELECT"!==tt.nodeName||(vt.value=tt.value),vt.addEventListener("load",function(){vt.scrollTop=tt.scrollTop,vt.scrollLeft=tt.scrollLeft},!0)),vt}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===Ae.tagName&&(De.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=xe("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=xe("div",{className:"html2pdf__container",style:De}),this.prop.container.appendChild(Ae),this.prop.container.firstChild.appendChild(xe("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},fe.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(j).then(function(Ae){var Ne=Object.assign({},this.opt.html2canvas);return delete Ne.onrendered,Ae(this.prop.container,Ne)}).then(function(Ae){(this.opt.html2canvas.onrendered||function(){})(Ae),this.prop.canvas=Ae,document.body.removeChild(this.prop.overlay)})},fe.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(j).then(function(Ae){var Ne=this.opt.jsPDF,tt=this.opt.fontFaces,_t="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,vt=Object.assign({async:!0,allowTaint:!0,scale:_t,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete vt.onrendered,Ne.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,Ne.context2d.posX=this.opt.x,Ne.context2d.posY=this.opt.y,Ne.context2d.margin=this.opt.margin,Ne.context2d.fontFaces=tt,tt)for(var Ht=0;Ht<tt.length;++Ht){var Qe=tt[Ht],Ar=Qe.src.find(function(pr){return"truetype"===pr.format});Ar&&Ne.addFont(Ar.url,Qe.ref.name,Qe.ref.style)}return vt.windowHeight=vt.windowHeight||0,vt.windowHeight=0==vt.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):vt.windowHeight,Ne.context2d.save(!0),Ae(this.prop.container,vt)}).then(function(Ae){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Ae),this.prop.canvas=Ae,document.body.removeChild(this.prop.overlay)})},fe.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var De=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=De})},fe.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},fe.prototype.output=function(De,Ae,Ne){return"img"===(Ne=Ne||"pdf").toLowerCase()||"image"===Ne.toLowerCase()?this.outputImg(De,Ae):this.outputPdf(De,Ae)},fe.prototype.outputPdf=function(De,Ae){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(De,Ae)})},fe.prototype.outputImg=function(De){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(De){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+De+'" is not supported.'}})},fe.prototype.save=function(De){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(De?{filename:De}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},fe.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},fe.prototype.set=function(De){if("object"!==se(De))return this;var Ae=Object.keys(De||{}).map(function(Ne){if(Ne in fe.template.prop)return function(){this.prop[Ne]=De[Ne]};switch(Ne){case"margin":return this.setMargin.bind(this,De.margin);case"jsPDF":return function(){return this.opt.jsPDF=De.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,De.pageSize);default:return function(){this.opt[Ne]=De[Ne]}}},this);return this.then(function(){return this.thenList(Ae)})},fe.prototype.get=function(De,Ae){return this.then(function(){var Ne=De in fe.template.prop?this.prop[De]:this.opt[De];return Ae?Ae(Ne):Ne})},fe.prototype.setMargin=function(De){return this.then(function(){switch(se(De)){case"number":De=[De,De,De,De];case"array":if(2===De.length&&(De=[De[0],De[1],De[0],De[1]]),4===De.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=De}).then(this.setPageSize)},fe.prototype.setPageSize=function(De){function Ae(Ne,tt){return Math.floor(Ne*tt/72*96)}return this.then(function(){(De=De||Xi.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(De.inner={width:De.width-this.opt.margin[1]-this.opt.margin[3],height:De.height-this.opt.margin[0]-this.opt.margin[2]},De.inner.px={width:Ae(De.inner.width,De.k),height:Ae(De.inner.height,De.k)},De.inner.ratio=De.inner.height/De.inner.width),this.prop.pageSize=De})},fe.prototype.setProgress=function(De,Ae,Ne,tt){return null!=De&&(this.progress.val=De),null!=Ae&&(this.progress.state=Ae),null!=Ne&&(this.progress.n=Ne),null!=tt&&(this.progress.stack=tt),this.progress.ratio=this.progress.val/this.progress.state,this},fe.prototype.updateProgress=function(De,Ae,Ne,tt){return this.setProgress(De?this.progress.val+De:null,Ae||null,Ne?this.progress.n+Ne:null,tt?this.progress.stack.concat(tt):null)},fe.prototype.then=function(De,Ae){var Ne=this;return this.thenCore(De,Ae,function(tt,_t){return Ne.updateProgress(null,null,1,[tt]),Promise.prototype.then.call(this,function(vt){return Ne.updateProgress(null,tt),vt}).then(tt,_t).then(function(vt){return Ne.updateProgress(1),vt})})},fe.prototype.thenCore=function(De,Ae,Ne){Ne=Ne||Promise.prototype.then,De&&(De=De.bind(this)),Ae&&(Ae=Ae.bind(this));var tt=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:fe.convert(Object.assign({},this),Promise.prototype),_t=Ne.call(tt,De,Ae);return fe.convert(_t,this.__proto__)},fe.prototype.thenExternal=function(De,Ae){return Promise.prototype.then.call(this,De,Ae)},fe.prototype.thenList=function(De){var Ae=this;return De.forEach(function(Ne){Ae=Ae.thenCore(Ne)}),Ae},fe.prototype.catch=function(De){De&&(De=De.bind(this));var Ae=Promise.prototype.catch.call(this,De);return fe.convert(Ae,this)},fe.prototype.catchExternal=function(De){return Promise.prototype.catch.call(this,De)},fe.prototype.error=function(De){return this.then(function(){throw new Error(De)})},fe.prototype.using=fe.prototype.set,fe.prototype.saveAs=fe.prototype.save,fe.prototype.export=fe.prototype.output,fe.prototype.run=fe.prototype.then,Xi.getPageSize=function(De,Ae,Ne){if("object"===O(De)){var tt=De;De=tt.orientation,Ae=tt.unit||Ae,Ne=tt.format||Ne}Ae=Ae||"mm",Ne=Ne||"a4",De=(""+(De||"P")).toLowerCase();var _t,vt=(""+Ne).toLowerCase(),Ht={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Ae){case"pt":_t=1;break;case"mm":_t=72/25.4;break;case"cm":_t=72/2.54;break;case"in":_t=72;break;case"px":_t=.75;break;case"pc":case"em":_t=12;break;case"ex":_t=6;break;default:throw"Invalid unit: "+Ae}var Qe,Ar=0,pr=0;if(Ht.hasOwnProperty(vt))Ar=Ht[vt][1]/_t,pr=Ht[vt][0]/_t;else try{Ar=Ne[1],pr=Ne[0]}catch{throw new Error("Invalid format: "+Ne)}if("p"===De||"portrait"===De)De="p",pr>Ar&&(Qe=pr,pr=Ar,Ar=Qe);else{if("l"!==De&&"landscape"!==De)throw"Invalid orientation: "+De;De="l",Ar>pr&&(Qe=pr,pr=Ar,Ar=Qe)}return{width:pr,height:Ar,unit:Ae,k:_t,orientation:De}},Q.html=function(De,Ae){(Ae=Ae||{}).callback=Ae.callback||function(){},Ae.html2canvas=Ae.html2canvas||{},Ae.html2canvas.canvas=Ae.html2canvas.canvas||this.canvas,Ae.jsPDF=Ae.jsPDF||this,Ae.fontFaces=Ae.fontFaces?Ae.fontFaces.map(Ls):null;var Ne=new fe(Ae);return Ae.worker?Ne:Ne.from(De).doCallback()}}(Xi.API),Xi.API.addJS=function(Q){return Of=Q,this.internal.events.subscribe("postPutResources",function(){fd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(fd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),qm=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Of+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==fd&&void 0!==qm&&this.internal.out("/Names <</JavaScript "+fd+" 0 R>>")}),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j;Q.events.push(["postPutResources",function(){var J=this,se=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var xe=J.outline.render().split(/\r\n/),fe=0;fe<xe.length;fe++){var De=xe[fe],Ae=se.exec(De);null!=Ae&&J.internal.newObjectDeferredBegin(Ae[1],!1),J.internal.write(De)}if(this.outline.createNamedDestinations){var tt=this.internal.pages.length,_t=[];for(fe=0;fe<tt;fe++){var vt=J.internal.newObject();_t.push(vt);var Ht=J.internal.getPageInfo(fe+1);J.internal.write("<< /D["+Ht.objId+" 0 R /XYZ null null null]>> endobj")}var Qe=J.internal.newObject();for(J.internal.write("<< /Names [ "),fe=0;fe<_t.length;fe++)J.internal.write("(page_"+(fe+1)+")"+_t[fe]+" 0 R");J.internal.write(" ] >>","endobj"),j=J.internal.newObject(),J.internal.write("<< /Dests "+Qe+" 0 R"),J.internal.write(">>","endobj")}}]),Q.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+j+" 0 R"))}]),Q.events.push(["initialized",function(){var J=this;J.outline={createNamedDestinations:!1,root:{children:[]}},J.outline.add=function(se,xe,fe){var De={title:xe,options:fe,children:[]};return null==se&&(se=this.root),se.children.push(De),De},J.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=J,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},J.outline.genIds_r=function(se){se.id=J.internal.newObjectDeferred();for(var xe=0;xe<se.children.length;xe++)this.genIds_r(se.children[xe])},J.outline.renderRoot=function(se){this.objStart(se),this.line("/Type /Outlines"),se.children.length>0&&(this.line("/First "+this.makeRef(se.children[0])),this.line("/Last "+this.makeRef(se.children[se.children.length-1]))),this.line("/Count "+this.count_r({count:0},se)),this.objEnd()},J.outline.renderItems=function(se){for(var xe=this.ctx.pdf.internal.getVerticalCoordinateString,fe=0;fe<se.children.length;fe++){var De=se.children[fe];this.objStart(De),this.line("/Title "+this.makeString(De.title)),this.line("/Parent "+this.makeRef(se)),fe>0&&this.line("/Prev "+this.makeRef(se.children[fe-1])),fe<se.children.length-1&&this.line("/Next "+this.makeRef(se.children[fe+1])),De.children.length>0&&(this.line("/First "+this.makeRef(De.children[0])),this.line("/Last "+this.makeRef(De.children[De.children.length-1])));var Ae=this.count=this.count_r({count:0},De);if(Ae>0&&this.line("/Count "+Ae),De.options&&De.options.pageNumber){var Ne=J.internal.getPageInfo(De.options.pageNumber);this.line("/Dest ["+Ne.objId+" 0 R /XYZ 0 "+xe(0)+" 0]")}this.objEnd()}for(var tt=0;tt<se.children.length;tt++)this.renderItems(se.children[tt])},J.outline.line=function(se){this.ctx.val+=se+"\r\n"},J.outline.makeRef=function(se){return se.id+" 0 R"},J.outline.makeString=function(se){return"("+J.internal.pdfEscape(se)+")"},J.outline.objStart=function(se){this.ctx.val+="\r\n"+se.id+" 0 obj\r\n<<\r\n"},J.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},J.outline.count_r=function(se,xe){for(var fe=0;fe<xe.children.length;fe++)se.count++,this.count_r(se,xe.children[fe]);return se.count}}])}(Xi.API),
/**
       * @license
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j=[192,193,194,195,196,197,198,199];Q.processJPEG=function(J,se,xe,fe,De,Ae){var Ne,tt=this.decode.DCT_DECODE,_t=null;if("string"==typeof J||this.__addimage__.isArrayBuffer(J)||this.__addimage__.isArrayBufferView(J)){switch(J=this.__addimage__.isArrayBuffer(J=De||J)?new Uint8Array(J):J,(Ne=function(vt){for(var Ht,Qe=256*vt.charCodeAt(4)+vt.charCodeAt(5),Ar=vt.length,pr={width:0,height:0,numcomponents:1},Sr=4;Sr<Ar;Sr+=2){if(-1!==j.indexOf(vt.charCodeAt((Sr+=Qe)+1))){Ht=256*vt.charCodeAt(Sr+5)+vt.charCodeAt(Sr+6),pr={width:256*vt.charCodeAt(Sr+7)+vt.charCodeAt(Sr+8),height:Ht,numcomponents:vt.charCodeAt(Sr+9)};break}Qe=256*vt.charCodeAt(Sr+2)+vt.charCodeAt(Sr+3)}return pr}(J=this.__addimage__.isArrayBufferView(J)?this.__addimage__.arrayBufferToBinaryString(J):J)).numcomponents){case 1:Ae=this.color_spaces.DEVICE_GRAY;break;case 4:Ae=this.color_spaces.DEVICE_CMYK;break;case 3:Ae=this.color_spaces.DEVICE_RGB}_t={data:J,width:Ne.width,height:Ne.height,colorSpace:Ae,bitsPerComponent:8,filter:tt,index:se,alias:xe}}return _t}}(Xi.API);var wl,Au,Df,Yf,Tf,yg=function(){var Q,j,J;function se(fe){var De,Ne,tt,_t,vt,Ht,Qe,Ar,pr,Sr,Qt,Lr,En;for(this.data=fe,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},vt=null;;){switch(De=this.readUInt32(),Ar=function(){var qn,Fo;for(Fo=[],qn=0;qn<4;++qn)Fo.push(String.fromCharCode(this.data[this.pos++]));return Fo}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(De);break;case"fcTL":vt&&this.animation.frames.push(vt),this.pos+=4,vt={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},_t=this.readUInt16(),tt=this.readUInt16()||100,vt.delay=1e3*_t/tt,vt.disposeOp=this.data[this.pos++],vt.blendOp=this.data[this.pos++],vt.data=[];break;case"IDAT":case"fdAT":for("fdAT"===Ar&&(this.pos+=4,De-=4),fe=vt?.data||this.imgData,Qt=0;0<=De?Qt<De:Qt>De;0<=De?++Qt:--Qt)fe.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ne=this.palette.length/3,this.transparency.indexed=this.read(De),this.transparency.indexed.length>Ne)throw new Error("More transparent colors than palette size");if((pr=Ne-this.transparency.indexed.length)>0)for(Lr=0;0<=pr?Lr<pr:Lr>pr;0<=pr?++Lr:--Lr)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(De)[0];break;case 2:this.transparency.rgb=this.read(De)}break;case"tEXt":Ht=(Sr=this.read(De)).indexOf(0),Qe=String.fromCharCode.apply(String,Sr.slice(0,Ht)),this.text[Qe]=String.fromCharCode.apply(String,Sr.slice(Ht+1));break;case"IEND":return vt&&this.animation.frames.push(vt),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(En=this.colorType)||6===En,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=De}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}se.prototype.read=function(fe){var De,Ae;for(Ae=[],De=0;0<=fe?De<fe:De>fe;0<=fe?++De:--De)Ae.push(this.data[this.pos++]);return Ae},se.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},se.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},se.prototype.decodePixels=function(fe){var De=this.pixelBitlength/8,Ae=new Uint8Array(this.width*this.height*De),Ne=0,tt=this;if(null==fe&&(fe=this.imgData),0===fe.length)return new Uint8Array(0);function _t(vt,Ht,Qe,Ar){var pr,Sr,Qt,Lr,En,qn,Fo,gi,Jr,lo,zo,cr,hr,Xr,rn,jo,So,Zo,ro,Ho,Xo=Math.ceil((tt.width-vt)/Qe),ka=Math.ceil((tt.height-Ht)/Ar),zt=tt.width==Xo&&tt.height==ka;for(hr=De*Xo,zo=zt?Ae:new Uint8Array(hr*ka),qn=fe.length,cr=0,Sr=0;cr<ka&&Ne<qn;){switch(fe[Ne++]){case 0:for(Lr=jo=0;jo<hr;Lr=jo+=1)zo[Sr++]=fe[Ne++];break;case 1:for(Lr=So=0;So<hr;Lr=So+=1)pr=fe[Ne++],En=Lr<De?0:zo[Sr-De],zo[Sr++]=(pr+En)%256;break;case 2:for(Lr=Zo=0;Zo<hr;Lr=Zo+=1)pr=fe[Ne++],Qt=(Lr-Lr%De)/De,zo[Sr++]=((Xr=cr&&zo[(cr-1)*hr+Qt*De+Lr%De])+pr)%256;break;case 3:for(Lr=ro=0;ro<hr;Lr=ro+=1)pr=fe[Ne++],Qt=(Lr-Lr%De)/De,En=Lr<De?0:zo[Sr-De],Xr=cr&&zo[(cr-1)*hr+Qt*De+Lr%De],zo[Sr++]=(pr+Math.floor((En+Xr)/2))%256;break;case 4:for(Lr=Ho=0;Ho<hr;Lr=Ho+=1)pr=fe[Ne++],Qt=(Lr-Lr%De)/De,0===cr?Xr=rn=0:(Xr=zo[(cr-1)*hr+Qt*De+Lr%De],rn=Qt&&zo[(cr-1)*hr+(Qt-1)*De+Lr%De]),Fo=(En=Lr<De?0:zo[Sr-De])+Xr-rn,gi=Math.abs(Fo-En),Jr=Math.abs(Fo-Xr),lo=Math.abs(Fo-rn),zo[Sr++]=(pr+(gi<=Jr&&gi<=lo?En:Jr<=lo?Xr:rn))%256;break;default:throw new Error("Invalid filter algorithm: "+fe[Ne-1])}if(!zt){var Ir=((Ht+cr*Ar)*tt.width+vt)*De,Gr=cr*hr;for(Lr=0;Lr<Xo;Lr+=1){for(var on=0;on<De;on+=1)Ae[Ir++]=zo[Gr++];Ir+=(Qe-1)*De}}cr++}}return fe=Do(fe),1==tt.interlaceMethod?(_t(0,0,8,8),_t(4,0,8,8),_t(0,4,4,8),_t(2,0,4,4),_t(0,2,2,4),_t(1,0,2,2),_t(0,1,1,2)):_t(0,0,1,1),Ae},se.prototype.decodePalette=function(){var fe,De,Ae,Ne,tt,_t,vt,Ht,Qe;for(Ae=this.palette,_t=this.transparency.indexed||[],tt=new Uint8Array((_t.length||0)+Ae.length),Ne=0,fe=0,De=vt=0,Ht=Ae.length;vt<Ht;De=vt+=3)tt[Ne++]=Ae[De],tt[Ne++]=Ae[De+1],tt[Ne++]=Ae[De+2],tt[Ne++]=null!=(Qe=_t[fe++])?Qe:255;return tt},se.prototype.copyToImageData=function(fe,De){var Ae,Ne,tt,_t,vt,Ht,Qe,Ar,pr,Sr,Qt;if(Ne=this.colors,pr=null,Ae=this.hasAlphaChannel,this.palette.length&&(pr=null!=(Qt=this._decodedPalette)?Qt:this._decodedPalette=this.decodePalette(),Ne=4,Ae=!0),Ar=(tt=fe.data||fe).length,vt=pr||De,_t=Ht=0,1===Ne)for(;_t<Ar;)Qe=pr?4*De[_t/4]:Ht,Sr=vt[Qe++],tt[_t++]=Sr,tt[_t++]=Sr,tt[_t++]=Sr,tt[_t++]=Ae?vt[Qe++]:255,Ht=Qe;else for(;_t<Ar;)Qe=pr?4*De[_t/4]:Ht,tt[_t++]=vt[Qe++],tt[_t++]=vt[Qe++],tt[_t++]=vt[Qe++],tt[_t++]=Ae?vt[Qe++]:255,Ht=Qe},se.prototype.decode=function(){var fe;return fe=new Uint8Array(this.width*this.height*4),this.copyToImageData(fe,this.decodePixels()),fe};var xe=function(){if("[object Window]"===Object.prototype.toString.call(Ea)){try{j=Ea.document.createElement("canvas"),J=j.getContext("2d")}catch{return!1}return!0}return!1};return xe(),Q=function(fe){var De;if(!0===xe())return J.width=fe.width,J.height=fe.height,J.clearRect(0,0,fe.width,fe.height),J.putImageData(fe,0,0),(De=new Image).src=j.toDataURL(),De;throw new Error("This method requires a Browser with Canvas-capability.")},se.prototype.decodeFrames=function(fe){var De,Ae,Ne,tt,_t,vt,Ht,Qe;if(this.animation){for(Qe=[],Ae=_t=0,vt=(Ht=this.animation.frames).length;_t<vt;Ae=++_t)Ne=fe.createImageData((De=Ht[Ae]).width,De.height),tt=this.decodePixels(new Uint8Array(De.data)),this.copyToImageData(Ne,tt),De.imageData=Ne,Qe.push(De.image=Q(Ne));return Qe}},se.prototype.renderFrame=function(fe,De){var Ae,Ne,tt;return Ae=(Ne=this.animation.frames)[De],tt=Ne[De-1],0===De&&fe.clearRect(0,0,this.width,this.height),1===tt?.disposeOp?fe.clearRect(tt.xOffset,tt.yOffset,tt.width,tt.height):2===tt?.disposeOp&&fe.putImageData(tt.imageData,tt.xOffset,tt.yOffset),0===Ae.blendOp&&fe.clearRect(Ae.xOffset,Ae.yOffset,Ae.width,Ae.height),fe.drawImage(Ae.image,Ae.xOffset,Ae.yOffset)},se.prototype.animate=function(fe){var De,Ae,Ne,tt,_t,vt,Ht=this;return Ae=0,tt=(vt=this.animation).numFrames,Ne=vt.frames,_t=vt.numPlays,(De=function(){var Qe,Ar;if(Qe=Ae++%tt,Ar=Ne[Qe],Ht.renderFrame(fe,Qe),tt>1&&Ae/tt<_t)return Ht.animation._timeout=setTimeout(De,Ar.delay)})()},se.prototype.stopAnimation=function(){var fe;return clearTimeout(null!=(fe=this.animation)?fe._timeout:void 0)},se.prototype.render=function(fe){var De,Ae;return fe._png&&fe._png.stopAnimation(),fe._png=this,fe.width=this.width,fe.height=this.height,De=fe.getContext("2d"),this.animation?(this.decodeFrames(De),this.animate(De)):(Ae=De.createImageData(this.width,this.height),this.copyToImageData(Ae,this.decodePixels()),De.putImageData(Ae,0,0))},se}();function Ul(Q){var j=0;if(71!==Q[j++]||73!==Q[j++]||70!==Q[j++]||56!==Q[j++]||56!=(Q[j++]+1&253)||97!==Q[j++])throw new Error("Invalid GIF 87a/89a header.");var J=Q[j++]|Q[j++]<<8,se=Q[j++]|Q[j++]<<8,xe=Q[j++],De=1<<1+(7&xe);j++,j++;var Ae=null,Ne=null;xe>>7&&(Ae=j,Ne=De,j+=3*De);var tt=!0,_t=[],vt=0,Ht=null,Qe=0,Ar=null;for(this.width=J,this.height=se;tt&&j<Q.length;)switch(Q[j++]){case 33:switch(Q[j++]){case 255:if(11!==Q[j]||78==Q[j+1]&&69==Q[j+2]&&84==Q[j+3]&&83==Q[j+4]&&67==Q[j+5]&&65==Q[j+6]&&80==Q[j+7]&&69==Q[j+8]&&50==Q[j+9]&&46==Q[j+10]&&48==Q[j+11]&&3==Q[j+12]&&1==Q[j+13]&&0==Q[j+16])j+=14,Ar=Q[j++]|Q[j++]<<8,j++;else for(j+=12;;){if(!((cr=Q[j++])>=0))throw Error("Invalid block size");if(0===cr)break;j+=cr}break;case 249:if(4!==Q[j++]||0!==Q[j+4])throw new Error("Invalid graphics extension block.");var pr=Q[j++];vt=Q[j++]|Q[j++]<<8,Ht=Q[j++],!(1&pr)&&(Ht=null),Qe=pr>>2&7,j++;break;case 254:for(;;){if(!((cr=Q[j++])>=0))throw Error("Invalid block size");if(0===cr)break;j+=cr}break;default:throw new Error("Unknown graphic control label: 0x"+Q[j-1].toString(16))}break;case 44:var Sr=Q[j++]|Q[j++]<<8,Qt=Q[j++]|Q[j++]<<8,Lr=Q[j++]|Q[j++]<<8,En=Q[j++]|Q[j++]<<8,qn=Q[j++],Fo=qn>>6&1,gi=1<<1+(7&qn),po=Ae,Jr=Ne,lo=!1;qn>>7&&(lo=!0,po=j,Jr=gi,j+=3*gi);var zo=j;for(j++;;){var cr;if(!((cr=Q[j++])>=0))throw Error("Invalid block size");if(0===cr)break;j+=cr}_t.push({x:Sr,y:Qt,width:Lr,height:En,has_local_palette:lo,palette_offset:po,palette_size:Jr,data_offset:zo,data_length:j-zo,transparent_index:Ht,interlaced:!!Fo,delay:vt,disposal:Qe});break;case 59:tt=!1;break;default:throw new Error("Unknown gif block: 0x"+Q[j-1].toString(16))}this.numFrames=function(){return _t.length},this.loopCount=function(){return Ar},this.frameInfo=function(hr){if(hr<0||hr>=_t.length)throw new Error("Frame index out of range.");return _t[hr]},this.decodeAndBlitFrameBGRA=function(hr,Xr){var rn=this.frameInfo(hr),jo=rn.width*rn.height,So=new Uint8Array(jo);Hd(Q,rn.data_offset,So,jo);var Zo=rn.palette_offset,ro=rn.transparent_index;null===ro&&(ro=256);var Ho=rn.width,Xo=J-Ho,ka=Ho,zt=4*(rn.y*J+rn.x),Ir=4*((rn.y+rn.height)*J+rn.x),Gr=zt,on=4*Xo;!0===rn.interlaced&&(on+=4*J*7);for(var bn=8,Xn=0,so=So.length;Xn<so;++Xn){var Po=So[Xn];if(0===ka&&(ka=Ho,(Gr+=on)>=Ir&&(on=4*Xo+4*J*(bn-1),Gr=zt+(Ho+Xo)*(bn<<1),bn>>=1)),Po===ro)Gr+=4;else{var $i=Q[Zo+3*Po],Ni=Q[Zo+3*Po+1];Xr[Gr++]=Q[Zo+3*Po+2],Xr[Gr++]=Ni,Xr[Gr++]=$i,Xr[Gr++]=255}--ka}},this.decodeAndBlitFrameRGBA=function(hr,Xr){var rn=this.frameInfo(hr),jo=rn.width*rn.height,So=new Uint8Array(jo);Hd(Q,rn.data_offset,So,jo);var Zo=rn.palette_offset,ro=rn.transparent_index;null===ro&&(ro=256);var Ho=rn.width,Xo=J-Ho,ka=Ho,zt=4*(rn.y*J+rn.x),Ir=4*((rn.y+rn.height)*J+rn.x),Gr=zt,on=4*Xo;!0===rn.interlaced&&(on+=4*J*7);for(var bn=8,Xn=0,so=So.length;Xn<so;++Xn){var Po=So[Xn];if(0===ka&&(ka=Ho,(Gr+=on)>=Ir&&(on=4*Xo+4*J*(bn-1),Gr=zt+(Ho+Xo)*(bn<<1),bn>>=1)),Po===ro)Gr+=4;else{var Ni=Q[Zo+3*Po+1],ga=Q[Zo+3*Po+2];Xr[Gr++]=Q[Zo+3*Po],Xr[Gr++]=Ni,Xr[Gr++]=ga,Xr[Gr++]=255}--ka}}}function Hd(Q,j,J,se){for(var xe=Q[j++],fe=1<<xe,De=fe+1,Ae=De+1,Ne=xe+1,tt=(1<<Ne)-1,_t=0,vt=0,Ht=0,Qe=Q[j++],Ar=new Int32Array(4096),pr=null;;){for(;_t<16&&0!==Qe;)vt|=Q[j++]<<_t,_t+=8,1===Qe?Qe=Q[j++]:--Qe;if(_t<Ne)break;var Sr=vt&tt;if(vt>>=Ne,_t-=Ne,Sr!==fe){if(Sr===De)break;for(var Qt=Sr<Ae?Sr:pr,Lr=0,En=Qt;En>fe;)En=Ar[En]>>8,++Lr;var qn=En;if(Ht+Lr+(Qt!==Sr?1:0)>se)return void Js.log("Warning, gif stream longer than expected.");J[Ht++]=qn;var Fo=Ht+=Lr;for(Qt!==Sr&&(J[Ht++]=qn),En=Qt;Lr--;)J[--Fo]=255&(En=Ar[En]),En>>=8;null!==pr&&Ae<4096&&(Ar[Ae++]=pr<<8|qn,Ae>=tt+1&&Ne<12&&(++Ne,tt=tt<<1|1)),pr=Sr}else Ae=De+1,tt=(1<<(Ne=xe+1))-1,pr=null}return Ht!==se&&Js.log("Warning, gif stream shorter than expected."),J}function Qf(Q){var j,J,se,xe,fe,De=Math.floor,Ae=new Array(64),Ne=new Array(64),tt=new Array(64),_t=new Array(64),vt=new Array(65535),Ht=new Array(65535),Qe=new Array(64),Ar=new Array(64),pr=[],Sr=0,Qt=7,Lr=new Array(64),En=new Array(64),qn=new Array(64),Fo=new Array(256),gi=new Array(2048),po=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Jr=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],lo=[0,1,2,3,4,5,6,7,8,9,10,11],zo=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],cr=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],hr=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Xr=[0,1,2,3,4,5,6,7,8,9,10,11],rn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],jo=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function So(zt,Ir){for(var Gr=0,on=0,bn=new Array,Xn=1;Xn<=16;Xn++){for(var so=1;so<=zt[Xn];so++)bn[Ir[on]]=[],bn[Ir[on]][0]=Gr,bn[Ir[on]][1]=Xn,on++,Gr++;Gr*=2}return bn}function Zo(zt){for(var Ir=zt[0],Gr=zt[1]-1;Gr>=0;)Ir&1<<Gr&&(Sr|=1<<Qt),Gr--,--Qt<0&&(255==Sr?(ro(255),ro(0)):ro(Sr),Qt=7,Sr=0)}function ro(zt){pr.push(zt)}function Ho(zt){ro(zt>>8&255),ro(255&zt)}function Xo(zt,Ir,Gr,on,bn){for(var Xn,so=bn[0],Po=bn[240],$i=function(Bi,ua){var va,da,os,Es,Ts,js,pl,zs,As,tl,wa=0;for(As=0;As<8;++As){var Al=(va=Bi[wa])+(zs=Bi[wa+7]),$a=va-zs,Kc=(da=Bi[wa+1])+(pl=Bi[wa+6]),Ws=da-pl,al=(os=Bi[wa+2])+(js=Bi[wa+5]),Jd=os-js,Ol=(Es=Bi[wa+3])+(Ts=Bi[wa+4]),ku=Es-Ts,dc=Al+Ol,vl=Al-Ol,Pd=Kc+al,yc=Kc-al;Bi[wa]=dc+Pd,Bi[wa+4]=dc-Pd;var Ss=.707106781*(yc+vl);Bi[wa+2]=vl+Ss,Bi[wa+6]=vl-Ss;var Ys=.382683433*((dc=ku+Jd)-(yc=Ws+$a)),Ap=.5411961*dc+Ys,Ou=1.306562965*yc+Ys,kp=.707106781*(Pd=Jd+Ws),Bu=$a+kp,us=$a-kp;Bi[wa+5]=us+Ap,Bi[wa+3]=us-Ap,Bi[wa+1]=Bu+Ou,Bi[wa+7]=Bu-Ou,wa+=8}for(wa=0,As=0;As<8;++As){var Yd=(va=Bi[wa])+(zs=Bi[wa+56]),Wu=va-zs,Du=(da=Bi[wa+8])+(pl=Bi[wa+48]),pc=da-pl,Vc=(os=Bi[wa+16])+(js=Bi[wa+40]),Lu=os-js,eh=(Es=Bi[wa+24])+(Ts=Bi[wa+32]),Lp=Es-Ts,md=Yd+eh,gd=Yd-eh,zc=Du+Vc,Iu=Du-Vc;Bi[wa]=md+zc,Bi[wa+32]=md-zc;var ru=.707106781*(Iu+gd);Bi[wa+16]=gd+ru,Bi[wa+48]=gd-ru;var Qd=.382683433*((md=Lp+Lu)-(Iu=pc+Wu)),fp=.5411961*md+Qd,th=1.306562965*Iu+Qd,rh=.707106781*(zc=Lu+pc),nh=Wu+rh,Xl=Wu-rh;Bi[wa+40]=Xl+fp,Bi[wa+24]=Xl-fp,Bi[wa+8]=nh+th,Bi[wa+56]=nh-th,wa++}for(As=0;As<64;++As)Qe[As]=(tl=Bi[As]*ua[As])>0?tl+.5|0:tl-.5|0;return Qe}(zt,Ir),Ni=0;Ni<64;++Ni)Ar[po[Ni]]=$i[Ni];var ga=Ar[0]-Gr;Gr=Ar[0],0==ga?Zo(on[0]):(Zo(on[Ht[Xn=32767+ga]]),Zo(vt[Xn]));for(var _a=63;_a>0&&0==Ar[_a];)_a--;if(0==_a)return Zo(so),Gr;for(var vs,ei=1;ei<=_a;){for(var Hr=ei;0==Ar[ei]&&ei<=_a;)++ei;var Is=ei-Hr;if(Is>=16){vs=Is>>4;for(var qa=1;qa<=vs;++qa)Zo(Po);Is&=15}Zo(bn[(Is<<4)+Ht[Xn=32767+Ar[ei]]]),Zo(vt[Xn]),ei++}return 63!=_a&&Zo(so),Gr}function ka(zt){zt=Math.min(Math.max(zt,1),100),fe!=zt&&(function(Ir){for(var Gr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],on=0;on<64;on++){var bn=De((Gr[on]*Ir+50)/100);bn=Math.min(Math.max(bn,1),255),Ae[po[on]]=bn}for(var Xn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],so=0;so<64;so++){var Po=De((Xn[so]*Ir+50)/100);Po=Math.min(Math.max(Po,1),255),Ne[po[so]]=Po}for(var $i=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ni=0,ga=0;ga<8;ga++)for(var _a=0;_a<8;_a++)tt[Ni]=1/(Ae[po[Ni]]*$i[ga]*$i[_a]*8),_t[Ni]=1/(Ne[po[Ni]]*$i[ga]*$i[_a]*8),Ni++}(zt<50?Math.floor(5e3/zt):Math.floor(200-2*zt)),fe=zt)}this.encode=function(zt,Ir){var da,os;Ir&&ka(Ir),pr=new Array,Sr=0,Qt=7,Ho(65496),Ho(65504),Ho(16),ro(74),ro(70),ro(73),ro(70),ro(0),ro(1),ro(1),ro(0),Ho(1),Ho(1),ro(0),ro(0),function(){Ho(65499),Ho(132),ro(0);for(var da=0;da<64;da++)ro(Ae[da]);ro(1);for(var os=0;os<64;os++)ro(Ne[os])}(),da=zt.width,os=zt.height,Ho(65472),Ho(17),ro(8),Ho(os),Ho(da),ro(3),ro(1),ro(17),ro(0),ro(2),ro(17),ro(1),ro(3),ro(17),ro(1),function(){Ho(65476),Ho(418),ro(0);for(var da=0;da<16;da++)ro(Jr[da+1]);for(var os=0;os<=11;os++)ro(lo[os]);ro(16);for(var Es=0;Es<16;Es++)ro(zo[Es+1]);for(var Ts=0;Ts<=161;Ts++)ro(cr[Ts]);ro(1);for(var js=0;js<16;js++)ro(hr[js+1]);for(var pl=0;pl<=11;pl++)ro(Xr[pl]);ro(17);for(var zs=0;zs<16;zs++)ro(rn[zs+1]);for(var As=0;As<=161;As++)ro(jo[As])}(),Ho(65498),Ho(12),ro(3),ro(1),ro(0),ro(2),ro(17),ro(3),ro(17),ro(0),ro(63),ro(0);var Gr=0,on=0,bn=0;Sr=0,Qt=7,this.encode.displayName="_encode_";for(var Xn,so,Po,$i,Ni,ga,_a,vs,ei,Hr=zt.data,qa=zt.height,Bi=4*zt.width,ua=0;ua<qa;){for(Xn=0;Xn<Bi;){for(Ni=Bi*ua+Xn,_a=-1,vs=0,ei=0;ei<64;ei++)ga=Ni+(vs=ei>>3)*Bi+(_a=4*(7&ei)),ua+vs>=qa&&(ga-=Bi*(ua+1+vs-qa)),Xn+_a>=Bi&&(ga-=Xn+_a-Bi+4),so=Hr[ga++],Po=Hr[ga++],$i=Hr[ga++],Lr[ei]=(gi[so]+gi[Po+256>>0]+gi[$i+512>>0]>>16)-128,En[ei]=(gi[so+768>>0]+gi[Po+1024>>0]+gi[$i+1280>>0]>>16)-128,qn[ei]=(gi[so+1280>>0]+gi[Po+1536>>0]+gi[$i+1792>>0]>>16)-128;Gr=Xo(Lr,tt,Gr,j,se),on=Xo(En,_t,on,J,xe),bn=Xo(qn,_t,bn,J,xe),Xn+=32}ua+=8}if(Qt>=0){var va=[];va[1]=Qt+1,va[0]=(1<<Qt+1)-1,Zo(va)}return Ho(65497),new Uint8Array(pr)},Q=Q||50,function(){for(var zt=String.fromCharCode,Ir=0;Ir<256;Ir++)Fo[Ir]=zt(Ir)}(),j=So(Jr,lo),J=So(hr,Xr),se=So(zo,cr),xe=So(rn,jo),function(){for(var zt=1,Ir=2,Gr=1;Gr<=15;Gr++){for(var on=zt;on<Ir;on++)Ht[32767+on]=Gr,vt[32767+on]=[],vt[32767+on][1]=Gr,vt[32767+on][0]=on;for(var bn=-(Ir-1);bn<=-zt;bn++)Ht[32767+bn]=Gr,vt[32767+bn]=[],vt[32767+bn][1]=Gr,vt[32767+bn][0]=Ir-1+bn;zt<<=1,Ir<<=1}}(),function(){for(var zt=0;zt<256;zt++)gi[zt]=19595*zt,gi[zt+256>>0]=38470*zt,gi[zt+512>>0]=7471*zt+32768,gi[zt+768>>0]=-11059*zt,gi[zt+1024>>0]=-21709*zt,gi[zt+1280>>0]=32768*zt+8421375,gi[zt+1536>>0]=-27439*zt,gi[zt+1792>>0]=-5329*zt}(),ka(Q)}function Cu(Q,j){if(this.pos=0,this.buffer=Q,this.datav=new DataView(Q.buffer),this.is_with_alpha=!!j,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Tm(Q){function j(Jr){if(!Jr)throw Error("assert :P")}function J(Jr,lo,zo){for(var cr=0;4>cr;cr++)if(Jr[lo+cr]!=zo.charCodeAt(cr))return!0;return!1}function se(Jr,lo,zo,cr,hr){for(var Xr=0;Xr<hr;Xr++)Jr[lo+Xr]=zo[cr+Xr]}function xe(Jr,lo,zo,cr){for(var hr=0;hr<cr;hr++)Jr[lo+hr]=zo}function fe(Jr){return new Int32Array(Jr)}function De(Jr,lo){for(var zo=[],cr=0;cr<Jr;cr++)zo.push(new lo);return zo}function Ae(Jr,lo){var zo=[];return function cr(hr,Xr,rn){for(var jo=rn[Xr],So=0;So<jo&&(hr.push(rn.length>Xr+1?[]:new lo),!(rn.length<Xr+1));So++)cr(hr[So],Xr+1,rn)}(zo,0,Jr),zo}var Ne=function(){var Jr=this;function lo(q,de){for(var Pe=1<<de-1>>>0;q&Pe;)Pe>>>=1;return Pe?(q&Pe-1)+Pe:q}function zo(q,de,Pe,Je,yt){j(!(Je%Pe));do{q[de+(Je-=Pe)]=yt}while(0<Je)}function cr(q,de,Pe,Je,yt){if(j(2328>=yt),512>=yt)var It=fe(512);else if(null==(It=fe(yt)))return 0;return function(Ut,$t,rr,xr,yn,bo){var vo,Bn,xi=$t,qo=1<<rr,xn=fe(16),Rn=fe(16);for(j(0!=yn),j(null!=xr),j(null!=Ut),j(0<rr),Bn=0;Bn<yn;++Bn){if(15<xr[Bn])return 0;++xn[xr[Bn]]}if(xn[0]==yn)return 0;for(Rn[1]=0,vo=1;15>vo;++vo){if(xn[vo]>1<<vo)return 0;Rn[vo+1]=Rn[vo]+xn[vo]}for(Bn=0;Bn<yn;++Bn)vo=xr[Bn],0<xr[Bn]&&(bo[Rn[vo]++]=Bn);if(1==Rn[15])return(xr=new hr).g=0,xr.value=bo[0],zo(Ut,xi,1,qo,xr),qo;var _i,ki=-1,Ci=qo-1,za=0,ya=1,ks=1,La=1<<rr;for(Bn=0,vo=1,yn=2;vo<=rr;++vo,yn<<=1){if(ya+=ks<<=1,0>(ks-=xn[vo]))return 0;for(;0<xn[vo];--xn[vo])(xr=new hr).g=vo,xr.value=bo[Bn++],zo(Ut,xi+za,yn,La,xr),za=lo(za,vo)}for(vo=rr+1,yn=2;15>=vo;++vo,yn<<=1){if(ya+=ks<<=1,0>(ks-=xn[vo]))return 0;for(;0<xn[vo];--xn[vo]){if(xr=new hr,(za&Ci)!=ki){for(xi+=La,_i=1<<(ki=vo)-rr;15>ki&&!(0>=(_i-=xn[ki]));)++ki,_i<<=1;qo+=La=1<<(_i=ki-rr),Ut[$t+(ki=za&Ci)].g=_i+rr,Ut[$t+ki].value=xi-$t-ki}xr.g=vo-rr,xr.value=bo[Bn++],zo(Ut,xi+(za>>rr),yn,La,xr),za=lo(za,vo)}}return ya!=2*Rn[15]-1?0:qo}(q,de,Pe,Je,yt,It)}function hr(){this.value=this.g=0}function Xr(){this.value=this.g=0}function rn(){this.G=De(5,hr),this.H=fe(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=De(Su,Xr)}function jo(q,de,Pe,Je){j(null!=q),j(null!=de),j(2147483648>Je),q.Ca=254,q.I=0,q.b=-8,q.Ka=0,q.oa=de,q.pa=Pe,q.Jd=de,q.Yc=Pe+Je,q.Zc=4<=Je?Pe+Je-4+1:Pe,Xn(q)}function So(q,de){for(var Pe=0;0<de--;)Pe|=Po(q,128)<<de;return Pe}function Zo(q,de){var Pe=So(q,de);return so(q)?-Pe:Pe}function ro(q,de,Pe,Je){var yt,It=0;for(j(null!=q),j(null!=de),j(4294967288>Je),q.Sb=Je,q.Ra=0,q.u=0,q.h=0,4<Je&&(Je=4),yt=0;yt<Je;++yt)It+=de[Pe+yt]<<8*yt;q.Ra=It,q.bb=Je,q.oa=de,q.pa=Pe}function Ho(q){for(;8<=q.u&&q.bb<q.Sb;)q.Ra>>>=8,q.Ra+=q.oa[q.pa+q.bb]<<am-8>>>0,++q.bb,q.u-=8;Gr(q)&&(q.h=1,q.u=0)}function Xo(q,de){if(j(0<=de),!q.h&&de<=im){var Pe=Ir(q)&om[de];return q.u+=de,Ho(q),Pe}return q.h=1,q.u=0}function ka(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function zt(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ir(q){return q.Ra>>>(q.u&am-1)>>>0}function Gr(q){return j(q.bb<=q.Sb),q.h||q.bb==q.Sb&&q.u>am}function on(q,de){q.u=de,q.h=Gr(q)}function bn(q){q.u>=sm&&(j(q.u>=sm),Ho(q))}function Xn(q){j(null!=q&&null!=q.oa),q.pa<q.Zc?(q.I=(q.oa[q.pa++]|q.I<<8)>>>0,q.b+=8):(j(null!=q&&null!=q.oa),q.pa<q.Yc?(q.b+=8,q.I=q.oa[q.pa++]|q.I<<8):q.Ka?q.b=0:(q.I<<=8,q.b+=8,q.Ka=1))}function so(q){return So(q,1)}function Po(q,de){var Pe=q.Ca;0>q.b&&Xn(q);var Je=q.b,yt=Pe*de>>>8,It=(q.I>>>Je>yt)+0;for(It?(Pe-=yt,q.I-=yt+1<<Je>>>0):Pe=yt+1,Je=Pe,yt=0;256<=Je;)yt+=8,Je>>=8;return q.b-=Je=7^yt+Ad[Je],q.Ca=(Pe<<Je)-1,It}function $i(q,de,Pe){q[de+0]=Pe>>24&255,q[de+1]=Pe>>16&255,q[de+2]=Pe>>8&255,q[de+3]=Pe>>0&255}function Ni(q,de){return q[de+0]<<0|q[de+1]<<8}function ga(q,de){return Ni(q,de)|q[de+2]<<16}function _a(q,de){return Ni(q,de)|Ni(q,de+2)<<16}function vs(q,de){var Pe=1<<de;return j(null!=q),j(0<de),q.X=fe(Pe),null==q.X?0:(q.Mb=32-de,q.Xa=de,1)}function ei(q,de){j(null!=q),j(null!=de),j(q.Xa==de.Xa),se(de.X,0,q.X,0,1<<de.Xa)}function Hr(){this.X=[],this.Xa=this.Mb=0}function Is(q,de,Pe,Je){j(null!=Pe),j(null!=Je);var yt=Pe[0],It=Je[0];return 0==yt&&(yt=(q*It+de/2)/de),0==It&&(It=(de*yt+q/2)/q),0>=yt||0>=It?0:(Pe[0]=yt,Je[0]=It,1)}function qa(q,de){return q+(1<<de)-1>>>de}function Bi(q,de){return((4278255360&q)+(4278255360&de)>>>0&4278255360)+((16711935&q)+(16711935&de)>>>0&16711935)>>>0}function ua(q,de){Jr[de]=function(Pe,Je,yt,It,Ut,$t,rr){var xr;for(xr=0;xr<Ut;++xr){var yn=Jr[q]($t[rr+xr-1],yt,It+xr);$t[rr+xr]=Bi(Pe[Je+xr],yn)}}}function va(){this.ud=this.hd=this.jd=0}function da(q,de){return((4278124286&(q^de))>>>1)+(q&de)>>>0}function os(q){return 0<=q&&256>q?q:0>q?0:255<q?255:void 0}function Es(q,de){return os(q+(q-de+.5>>1))}function Ts(q,de,Pe){return Math.abs(de-Pe)-Math.abs(q-Pe)}function js(q,de,Pe,Je,yt,It,Ut){for(Je=It[Ut-1],Pe=0;Pe<yt;++Pe)It[Ut+Pe]=Je=Bi(q[de+Pe],Je)}function pl(q,de,Pe,Je,yt){var It;for(It=0;It<Pe;++It){var Ut=q[de+It],$t=Ut>>8&255,rr=16711935&(rr=(rr=16711935&Ut)+(($t<<16)+$t));Je[yt+It]=(4278255360&Ut)+rr>>>0}}function zs(q,de){de.jd=q>>0&255,de.hd=q>>8&255,de.ud=q>>16&255}function As(q,de,Pe,Je,yt,It){var Ut;for(Ut=0;Ut<Je;++Ut){var $t=de[Pe+Ut],rr=$t>>>8,xr=$t,yn=255&(yn=(yn=$t>>>16)+((q.jd<<24>>24)*(rr<<24>>24)>>>5));xr=255&(xr=(xr+=(q.hd<<24>>24)*(rr<<24>>24)>>>5)+((q.ud<<24>>24)*(yn<<24>>24)>>>5)),yt[It+Ut]=(4278255360&$t)+(yn<<16)+xr}}function tl(q,de,Pe,Je,yt){Jr[de]=function(It,Ut,$t,rr,xr,yn,bo,vo,Bn){for(rr=bo;rr<vo;++rr)for(bo=0;bo<Bn;++bo)xr[yn++]=yt($t[Je(It[Ut++])])},Jr[q]=function(It,Ut,$t,rr,xr,yn,bo){var vo=8>>It.b,Bn=It.Ea,xi=It.K[0],qo=It.w;if(8>vo)for(It=(1<<It.b)-1,qo=(1<<vo)-1;Ut<$t;++Ut){var xn,Rn=0;for(xn=0;xn<Bn;++xn)xn&It||(Rn=Je(rr[xr++])),yn[bo++]=yt(xi[Rn&qo]),Rn>>=vo}else Jr["VP8LMapColor"+Pe](rr,xr,xi,qo,yn,bo,Ut,$t,Bn)}}function wa(q,de,Pe,Je,yt){for(Pe=de+Pe;de<Pe;){var It=q[de++];Je[yt++]=It>>16&255,Je[yt++]=It>>8&255,Je[yt++]=It>>0&255}}function Al(q,de,Pe,Je,yt){for(Pe=de+Pe;de<Pe;){var It=q[de++];Je[yt++]=It>>16&255,Je[yt++]=It>>8&255,Je[yt++]=It>>0&255,Je[yt++]=It>>24&255}}function $a(q,de,Pe,Je,yt){for(Pe=de+Pe;de<Pe;){var It=(Ut=q[de++])>>16&240|Ut>>12&15,Ut=Ut>>0&240|Ut>>28&15;Je[yt++]=It,Je[yt++]=Ut}}function Kc(q,de,Pe,Je,yt){for(Pe=de+Pe;de<Pe;){var It=(Ut=q[de++])>>16&248|Ut>>13&7,Ut=Ut>>5&224|Ut>>3&31;Je[yt++]=It,Je[yt++]=Ut}}function Ws(q,de,Pe,Je,yt){for(Pe=de+Pe;de<Pe;){var It=q[de++];Je[yt++]=It>>0&255,Je[yt++]=It>>8&255,Je[yt++]=It>>16&255}}function al(q,de,Pe,Je,yt,It){if(0==It)for(Pe=de+Pe;de<Pe;)$i(Je,((It=q[de++])[0]>>24|It[1]>>8&65280|It[2]<<8&16711680|It[3]<<24)>>>0),yt+=32;else se(Je,yt,q,de,Pe)}function Jd(q,de){Jr[de][0]=Jr[q+"0"],Jr[de][1]=Jr[q+"1"],Jr[de][2]=Jr[q+"2"],Jr[de][3]=Jr[q+"3"],Jr[de][4]=Jr[q+"4"],Jr[de][5]=Jr[q+"5"],Jr[de][6]=Jr[q+"6"],Jr[de][7]=Jr[q+"7"],Jr[de][8]=Jr[q+"8"],Jr[de][9]=Jr[q+"9"],Jr[de][10]=Jr[q+"10"],Jr[de][11]=Jr[q+"11"],Jr[de][12]=Jr[q+"12"],Jr[de][13]=Jr[q+"13"],Jr[de][14]=Jr[q+"0"],Jr[de][15]=Jr[q+"0"]}function Ol(q){return q==Np||q==Up||q==of||q==uh}function ku(){this.eb=[],this.size=this.A=this.fb=0}function dc(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function vl(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ku,this.f.kb=new dc,this.sd=null}function Pd(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yc(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ss(q){return alert("todo:WebPSamplerProcessPlane"),q.T}function Ys(q,de){var Pe=q.T,Je=de.ba.f.RGBA,yt=Je.eb,It=Je.fb+q.ka*Je.A,Ut=sf[de.ba.S],$t=q.y,rr=q.O,xr=q.f,yn=q.N,bo=q.ea,vo=q.W,Bn=de.cc,xi=de.dc,qo=de.Mc,xn=de.Nc,Rn=q.ka,_i=q.ka+q.T,ki=q.U,Ci=ki+1>>1;for(0==Rn?Ut($t,rr,null,null,xr,yn,bo,vo,xr,yn,bo,vo,yt,It,null,null,ki):(Ut(de.ec,de.fc,$t,rr,Bn,xi,qo,xn,xr,yn,bo,vo,yt,It-Je.A,yt,It,ki),++Pe);Rn+2<_i;Rn+=2)Ut($t,(rr+=2*q.fa)-q.fa,$t,rr,Bn=xr,xi=yn,qo=bo,xn=vo,xr,yn+=q.Rc,bo,vo+=q.Rc,yt,(It+=2*Je.A)-Je.A,yt,It,ki);return rr+=q.fa,q.j+_i<q.o?(se(de.ec,de.fc,$t,rr,ki),se(de.cc,de.dc,xr,yn,Ci),se(de.Mc,de.Nc,bo,vo,Ci),Pe--):1&_i||Ut($t,rr,null,null,xr,yn,bo,vo,xr,yn,bo,vo,yt,It+Je.A,null,null,ki),Pe}function Ap(q,de,Pe){var Je=q.F,yt=[q.J];if(null!=Je){var It=q.U,Ut=de.ba.S,$t=Ut==wd||Ut==of;de=de.ba.f.RGBA;var rr=[0],xr=q.ka;rr[0]=q.T,q.Kb&&(0==xr?--rr[0]:(--xr,yt[0]-=q.width),q.j+q.ka+q.T==q.o&&(rr[0]=q.o-q.j-xr));var yn=de.eb;q=na(Je,yt[0],q.width,It,rr,yn,(xr=de.fb+xr*de.A)+($t?0:3),de.A),j(Pe==rr),q&&Ol(Ut)&&fa(yn,xr,$t,It,rr,de.A)}return 0}function Ou(q){var de=q.ma,Pe=de.ba.S,Je=11>Pe,yt=Pe==wc||Pe==ep||Pe==wd||Pe==Pu||12==Pe||Ol(Pe);if(de.memory=null,de.Ib=null,de.Jb=null,de.Nd=null,!jp(de.Oa,q,yt?11:12))return 0;if(yt&&Ol(Pe)&&Pi(),q.da)alert("todo:use_scaling");else{if(Je){if(de.Ib=Ss,q.Kb){if(de.memory=fe(q.U+2*(Pe=q.U+1>>1)),null==de.memory)return 0;de.ec=de.memory,de.fc=0,de.cc=de.ec,de.dc=de.fc+q.U,de.Mc=de.cc,de.Nc=de.dc+Pe,de.Ib=Ys,Pi()}}else alert("todo:EmitYUV");yt&&(de.Jb=Ap,Je&&to())}if(Je&&!vp){for(q=0;256>q;++q)Eg[q]=89858*(q-128)+Fv>>Rv,Cb[q]=-22014*(q-128)+Fv,z_[q]=-45773*(q-128),zy[q]=113618*(q-128)+Fv>>Rv;for(q=cm;q<jv;++q)Hy[q-cm]=xl(de=76283*(q-16)+Fv>>Rv,255),Qg[q-cm]=xl(de+8>>4,15);vp=1}return 1}function kp(q){var de=q.ma,Pe=q.U,Je=q.T;return j(!(1&q.ka)),0>=Pe||0>=Je?0:(Pe=de.Ib(q,de),null!=de.Jb&&de.Jb(q,de,Pe),de.Dc+=Pe,1)}function Bu(q){q.ma.memory=null}function us(q,de,Pe,Je){return 47!=Xo(q,8)?0:(de[0]=Xo(q,14)+1,Pe[0]=Xo(q,14)+1,Je[0]=Xo(q,1),0!=Xo(q,3)?0:!q.h)}function Yd(q,de){if(4>q)return q+1;var Pe=q-2>>1;return(2+(1&q)<<Pe)+Xo(de,Pe)+1}function Wu(q,de){return 120<de?de-120:1<=(Pe=((Pe=wb[de-1])>>4)*q+(8-(15&Pe)))?Pe:1;var Pe}function Du(q,de,Pe){var Je=Ir(Pe),yt=q[de+=255&Je].g-8;return 0<yt&&(on(Pe,Pe.u+8),Je=Ir(Pe),de+=q[de].value,de+=Je&(1<<yt)-1),on(Pe,Pe.u+q[de].g),q[de].value}function pc(q,de,Pe){return Pe.g+=q.g,Pe.value+=q.value<<de>>>0,j(8>=Pe.g),q.g}function Vc(q,de,Pe){var Je=q.xc;return j((de=0==Je?0:q.vc[q.md*(Pe>>Je)+(de>>Je)])<q.Wb),q.Ya[de]}function Lu(q,de,Pe,Je){var yt=q.ab,It=q.c*de,Ut=q.C;de=Ut+de;var $t=Pe,rr=Je;for(Je=q.Ta,Pe=q.Ua;0<yt--;){var xr=q.gc[yt],yn=Ut,bo=de,vo=$t,Bn=rr,xi=(rr=Je,$t=Pe,xr.Ea);switch(j(yn<bo),j(bo<=xr.nc),xr.hc){case 2:Fh(vo,Bn,(bo-yn)*xi,rr,$t);break;case 0:var qo=yn,xn=bo,Rn=rr,_i=$t,ki=(La=xr).Ea;0==qo&&(Bl(vo,Bn,null,null,1,Rn,_i),js(vo,Bn+1,0,0,ki-1,Rn,_i+1),Bn+=ki,_i+=ki,++qo);for(var Ci=1<<La.b,za=Ci-1,ya=qa(ki,La.b),ks=La.K,La=La.w+(qo>>La.b)*ya;qo<xn;){var Ps=ks,sc=La,Wl=1;for(Hc(vo,Bn,Rn,_i-ki,1,Rn,_i);Wl<ki;){var sl=(Wl&~za)+Ci;sl>ki&&(sl=ki),(0,Jl[Ps[sc++]>>8&15])(vo,Bn+ +Wl,Rn,_i+Wl-ki,sl-Wl,Rn,_i+Wl),Wl=sl}Bn+=ki,_i+=ki,++qo&za||(La+=ya)}bo!=xr.nc&&se(rr,$t-xi,rr,$t+(bo-yn-1)*xi,xi);break;case 1:for(xi=vo,xn=Bn,ki=(vo=xr.Ea)-(_i=vo&~(Rn=(Bn=1<<xr.b)-1)),qo=qa(vo,xr.b),Ci=xr.K,xr=xr.w+(yn>>xr.b)*qo;yn<bo;){for(za=Ci,ya=xr,ks=new va,La=xn+_i,Ps=xn+vo;xn<La;)zs(za[ya++],ks),Nh(ks,xi,xn,Bn,rr,$t),xn+=Bn,$t+=Bn;xn<Ps&&(zs(za[ya++],ks),Nh(ks,xi,xn,ki,rr,$t),xn+=ki,$t+=ki),++yn&Rn||(xr+=qo)}break;case 3:if(vo==rr&&Bn==$t&&0<xr.b){for(xn=rr,vo=xi=$t+(bo-yn)*xi-(_i=(bo-yn)*qa(xr.Ea,xr.b)),Bn=rr,Rn=$t,qo=[],_i=(ki=_i)-1;0<=_i;--_i)qo[_i]=Bn[Rn+_i];for(_i=ki-1;0<=_i;--_i)xn[vo+_i]=qo[_i];Yu(xr,yn,bo,rr,xi,rr,$t)}else Yu(xr,yn,bo,vo,Bn,rr,$t)}$t=Je,rr=Pe}rr!=Pe&&se(Je,Pe,$t,rr,It)}function eh(q,de){var Pe=q.V,Je=q.Ba+q.c*q.C,yt=de-q.C;if(j(de<=q.l.o),j(16>=yt),0<yt){var It=q.l,Ut=q.Ta,$t=q.Ua,rr=It.width;if(Lu(q,yt,Pe,Je),yt=$t=[$t],j((Pe=q.C)<(Je=de)),j(It.v<It.va),Je>It.o&&(Je=It.o),Pe<It.j){var xr=It.j-Pe;Pe=It.j,yt[0]+=xr*rr}if(Pe>=Je?Pe=0:(yt[0]+=4*It.v,It.ka=Pe-It.j,It.U=It.va-It.v,It.T=Je-Pe,Pe=1),Pe){if($t=$t[0],11>(Pe=q.ca).S){var yn=Pe.f.RGBA,bo=(Je=Pe.S,yt=It.U,It=It.T,xr=yn.eb,yn.A),vo=It;for(yn=yn.fb+q.Ma*yn.A;0<vo--;){var Bn=Ut,xi=$t,qo=yt,xn=xr,Rn=yn;switch(Je){case fc:kd(Bn,xi,qo,xn,Rn);break;case wc:Ld(Bn,xi,qo,xn,Rn);break;case Np:Ld(Bn,xi,qo,xn,Rn),fa(xn,Rn,0,qo,1,0);break;case bd:v(Bn,xi,qo,xn,Rn);break;case ep:al(Bn,xi,qo,xn,Rn,1);break;case Up:al(Bn,xi,qo,xn,Rn,1),fa(xn,Rn,0,qo,1,0);break;case wd:al(Bn,xi,qo,xn,Rn,0);break;case of:al(Bn,xi,qo,xn,Rn,0),fa(xn,Rn,1,qo,1,0);break;case Pu:Id(Bn,xi,qo,xn,Rn);break;case uh:Id(Bn,xi,qo,xn,Rn),zi(xn,Rn,qo,1,0);break;case iu:f(Bn,xi,qo,xn,Rn);break;default:j(0)}$t+=rr,yn+=bo}q.Ma+=It}else alert("todo:EmitRescaledRowsYUVA");j(q.Ma<=Pe.height)}}q.C=de,j(q.C<=q.i)}function Lp(q){var de;if(0<q.ua)return 0;for(de=0;de<q.Wb;++de){var Pe=q.Ya[de].G,Je=q.Ya[de].H;if(0<Pe[1][Je[1]+0].g||0<Pe[2][Je[2]+0].g||0<Pe[3][Je[3]+0].g)return 0}return 1}function md(q,de,Pe,Je,yt,It){if(0!=q.Z){var Ut=q.qd,$t=q.rd;for(j(null!=gu[q.Z]);de<Pe;++de)gu[q.Z](Ut,$t,Je,yt,Je,yt,It),Ut=Je,$t=yt,yt+=It;q.qd=Ut,q.rd=$t}}function gd(q,de){var Pe=q.l.ma,Je=0==Pe.Z||1==Pe.Z?q.l.j:q.C;if(Je=q.C<Je?Je:q.C,j(de<=q.l.o),de>Je){var yt=q.l.width,It=Pe.ca,Ut=Pe.tb+yt*Je,$t=q.V,rr=q.Ba+q.c*Je,xr=q.gc;j(1==q.ab),j(3==xr[0].hc),jh(xr[0],Je,de,$t,rr,It,Ut),md(Pe,Je,de,It,Ut,yt)}q.C=q.Ma=de}function zc(q,de,Pe,Je,yt,It,Ut){var $t=q.$/Je,rr=q.$%Je,xr=q.m,yn=q.s,bo=Pe+q.$,vo=bo;yt=Pe+Je*yt;var Bn=Pe+Je*It,xi=280+yn.ua,qo=q.Pb?$t:16777216,xn=0<yn.ua?yn.Wa:null,Rn=yn.wc,_i=bo<Bn?Vc(yn,rr,$t):null;j(q.C<It),j(Bn<=yt);var ki=!1;e:for(;;){for(;ki||bo<Bn;){var Ci=0;if($t>=qo){var za=bo-Pe;j((qo=q).Pb),qo.wd=qo.m,qo.xd=za,0<qo.s.ua&&ei(qo.s.Wa,qo.s.vb),qo=$t+xb}if(rr&Rn||(_i=Vc(yn,rr,$t)),j(null!=_i),_i.Qb&&(de[bo]=_i.qb,ki=!0),!ki)if(bn(xr),_i.jc){za=de;var ya=bo,ks=_i.pd[Ir(Ci=xr)&Su-1];j(_i.jc),256>ks.g?(on(Ci,Ci.u+ks.g),za[ya]=ks.value,Ci=0):(on(Ci,Ci.u+ks.g-256),j(256<=ks.value),Ci=ks.value),0==Ci&&(ki=!0)}else Ci=Du(_i.G[0],_i.H[0],xr);if(xr.h)break;if(ki||256>Ci){if(!ki)if(_i.nd)de[bo]=(_i.qb|Ci<<8)>>>0;else{if(bn(xr),ki=Du(_i.G[1],_i.H[1],xr),bn(xr),za=Du(_i.G[2],_i.H[2],xr),ya=Du(_i.G[3],_i.H[3],xr),xr.h)break;de[bo]=(ya<<24|ki<<16|Ci<<8|za)>>>0}if(ki=!1,++bo,++rr>=Je&&(rr=0,++$t,null!=Ut&&$t<=It&&!($t%16)&&Ut(q,$t),null!=xn))for(;vo<bo;)Ci=de[vo++],xn.X[(506832829*Ci&4294967295)>>>xn.Mb]=Ci}else if(280>Ci){if(Ci=Yd(Ci-256,xr),za=Du(_i.G[4],_i.H[4],xr),bn(xr),za=Wu(Je,za=Yd(za,xr)),xr.h)break;if(bo-Pe<za||yt-bo<Ci)break e;for(ya=0;ya<Ci;++ya)de[bo+ya]=de[bo+ya-za];for(bo+=Ci,rr+=Ci;rr>=Je;)rr-=Je,++$t,null!=Ut&&$t<=It&&!($t%16)&&Ut(q,$t);if(j(bo<=yt),rr&Rn&&(_i=Vc(yn,rr,$t)),null!=xn)for(;vo<bo;)Ci=de[vo++],xn.X[(506832829*Ci&4294967295)>>>xn.Mb]=Ci}else{if(!(Ci<xi))break e;for(ki=Ci-280,j(null!=xn);vo<bo;)Ci=de[vo++],xn.X[(506832829*Ci&4294967295)>>>xn.Mb]=Ci;Ci=bo,j(!(ki>>>(za=xn).Xa)),de[Ci]=za.X[ki],ki=!0}ki||j(xr.h==Gr(xr))}if(q.Pb&&xr.h&&bo<yt)j(q.m.h),q.a=5,q.m=q.wd,q.$=q.xd,0<q.s.ua&&ei(q.s.vb,q.s.Wa);else{if(xr.h)break e;Ut?.(q,$t>It?It:$t),q.a=0,q.$=bo-Pe}return 1}return q.a=3,0}function Iu(q){j(null!=q),q.vc=null,q.yc=null,q.Ya=null;var de=q.Wa;null!=de&&(de.X=null),q.vb=null,j(null!=q)}function ru(){var q=new If;return null==q?null:(q.a=0,q.xb=Yg,Jd("Predictor","VP8LPredictors"),Jd("Predictor","VP8LPredictors_C"),Jd("PredictorAdd","VP8LPredictorsAdd"),Jd("PredictorAdd","VP8LPredictorsAdd_C"),Fh=pl,Nh=As,kd=wa,Ld=Al,Id=$a,f=Kc,v=Ws,Jr.VP8LMapColor32b=Ff,Jr.VP8LMapColor8b=Qm,q)}function Qd(q,de,Pe,Je,yt){var It=1,Ut=[q],$t=[de],rr=Je.m,xr=Je.s,yn=null,bo=0;e:for(;;){if(Pe)for(;It&&Xo(rr,1);){var vo=Ut,Bn=$t,xi=Je,qo=1,xn=xi.m,Rn=xi.gc[xi.ab],_i=Xo(xn,2);if(xi.Oc&1<<_i)It=0;else{switch(xi.Oc|=1<<_i,Rn.hc=_i,Rn.Ea=vo[0],Rn.nc=Bn[0],Rn.K=[null],++xi.ab,j(4>=xi.ab),_i){case 0:case 1:Rn.b=Xo(xn,3)+2,qo=Qd(qa(Rn.Ea,Rn.b),qa(Rn.nc,Rn.b),0,xi,Rn.K),Rn.K=Rn.K[0];break;case 3:var ki,Ci=Xo(xn,8)+1,za=16<Ci?0:4<Ci?1:2<Ci?2:3;if(vo[0]=qa(Rn.Ea,za),Rn.b=za,ki=qo=Qd(Ci,1,0,xi,Rn.K)){var ya,ks=Ci,La=Rn,Ps=1<<(8>>La.b),sc=fe(Ps);if(null==sc)ki=0;else{var Wl=La.K[0],sl=La.w;for(sc[0]=La.K[0][0],ya=1;ya<1*ks;++ya)sc[ya]=Bi(Wl[sl+ya],sc[ya-1]);for(;ya<4*Ps;++ya)sc[ya]=0;La.K[0]=null,La.K[0]=sc,ki=1}}qo=ki;break;case 2:break;default:j(0)}It=qo}}if(Ut=Ut[0],$t=$t[0],It&&Xo(rr,1)&&!(It=1<=(bo=Xo(rr,4))&&11>=bo)){Je.a=3;break e}var hc;if(hc=It)t:{var xc,ol,qc,tp=Je,su=Ut,rp=$t,tc=bo,Bp=Pe,Wp=tp.m,Xu=tp.s,rc=[null],_p=1,ed=0,lf=N_[tc];r:for(;;){if(Bp&&Xo(Wp,1)){var vu=Xo(Wp,3)+2,Nf=qa(su,vu),Bm=qa(rp,vu),Dg=Nf*Bm;if(!Qd(Nf,Bm,0,tp,rc))break r;for(rc=rc[0],Xu.xc=vu,xc=0;xc<Dg;++xc){var Zh=rc[xc]>>8&65535;rc[xc]=Zh,Zh>=_p&&(_p=Zh+1)}}if(Wp.h)break r;for(ol=0;5>ol;++ol){var _u=Xm[ol];!ol&&0<tc&&(_u+=1<<tc),ed<_u&&(ed=_u)}var Xg=De(_p*lf,hr),H_=_p,tg=De(H_,rn);if(null==tg)var ev=null;else j(65536>=H_),ev=tg;var cf=fe(ed);if(null==ev||null==cf||null==Xg){tp.a=1;break r}var Tg=Xg;for(xc=qc=0;xc<_p;++xc){var Uf=ev[xc],Sg=Uf.G,Pg=Uf.H,$y=0,Uv=1,G_=0;for(ol=0;5>ol;++ol){_u=Xm[ol],Sg[ol]=Tg,Pg[ol]=qc,!ol&&0<tc&&(_u+=1<<tc);o:{var Mg,Bv=_u,Kh=tp,tv=cf,rv=Tg,Wv=qc,q_=0,dm=Kh.m,Jy=Xo(dm,1);if(xe(tv,0,0,Bv),Jy){var Yy=Xo(dm,1)+1,Eb=Xo(dm,1),$_=Xo(dm,0==Eb?1:8);tv[$_]=1,2==Yy&&(tv[$_=Xo(dm,8)]=1);var Ag=1}else{var kg=fe(19),Qy=Xo(dm,4)+4;if(19<Qy){Kh.a=3;var nv=0;break o}for(Mg=0;Mg<Qy;++Mg)kg[bb[Mg]]=Xo(dm,3);var J_=void 0,Lg=void 0,Zv=Kh,Y_=kg,ov=Bv,Xy=tv,iv=0,pm=Zv.m,Q_=8,X_=De(128,hr);n:for(;cr(X_,0,7,Y_,19);){if(Xo(pm,1)){var Ob=2+2*Xo(pm,3);if((J_=2+Xo(pm,Ob))>ov)break n}else J_=ov;for(Lg=0;Lg<ov&&J_--;){bn(pm);var e0=X_[0+(127&Ir(pm))];on(pm,pm.u+e0.g);var rg=e0.value;if(16>rg)Xy[Lg++]=rg,0!=rg&&(Q_=rg);else{var Db=16==rg,ng=rg-16,t0=Um[ng],Ig=Xo(pm,au[ng])+t0;if(Lg+Ig>ov)break n;for(var Tb=Db?Q_:0;0<Ig--;)Xy[Lg++]=Tb}}iv=1;break n}iv||(Zv.a=3),Ag=iv}(Ag=Ag&&!dm.h)&&(q_=cr(rv,Wv,8,tv,Bv)),Ag&&0!=q_?nv=q_:(Kh.a=3,nv=0)}if(0==nv)break r;if(Uv&&1==kv[ol]&&(Uv=0==Tg[qc].g),$y+=Tg[qc].g,qc+=nv,3>=ol){var av,ey=cf[0];for(av=1;av<_u;++av)cf[av]>ey&&(ey=cf[av]);G_+=ey}}if(Uf.nd=Uv,Uf.Qb=0,Uv&&(Uf.qb=(Sg[3][Pg[3]+0].value<<24|Sg[1][Pg[1]+0].value<<16|Sg[2][Pg[2]+0].value)>>>0,0==$y&&256>Sg[0][Pg[0]+0].value&&(Uf.Qb=1,Uf.qb+=Sg[0][Pg[0]+0].value<<8)),Uf.jc=!Uf.Qb&&6>G_,Uf.jc){var Rg,fm=Uf;for(Rg=0;Rg<Su;++Rg){var ph=Rg,Vh=fm.pd[ph],Kv=fm.G[0][fm.H[0]+ph];256<=Kv.value?(Vh.g=Kv.g+256,Vh.value=Kv.value):(Vh.g=0,Vh.value=0,ph>>=pc(Kv,8,Vh),ph>>=pc(fm.G[1][fm.H[1]+ph],16,Vh),ph>>=pc(fm.G[2][fm.H[2]+ph],0,Vh),pc(fm.G[3][fm.H[3]+ph],24,Vh))}}}Xu.vc=rc,Xu.Wb=_p,Xu.Ya=ev,Xu.yc=Xg,hc=1;break t}hc=0}if(!(It=hc)){Je.a=3;break e}if(0<bo){if(xr.ua=1<<bo,!vs(xr.Wa,bo)){Je.a=1,It=0;break e}}else xr.ua=0;var ty=Je,og=Ut,Sb=$t,Fg=ty.s,sv=Fg.xc;if(ty.c=og,ty.i=Sb,Fg.md=qa(og,sv),Fg.wc=0==sv?-1:(1<<sv)-1,Pe){Je.xb=Z_;break e}if(null==(yn=fe(Ut*$t))){Je.a=1,It=0;break e}It=(It=zc(Je,yn,0,Ut,$t,$t,null))&&!rr.h;break e}return It?(null!=yt?yt[0]=yn:(j(null==yn),j(Pe)),Je.$=0,Pe||Iu(xr)):Iu(xr),It}function fp(q,de){var Pe=q.c*q.i,Je=Pe+de+16*de;return j(q.c<=de),q.V=fe(Je),null==q.V?(q.Ta=null,q.Ua=0,q.a=1,0):(q.Ta=q.V,q.Ua=q.Ba+Pe+de,1)}function th(q,de){var Pe=q.C,Je=de-Pe,yt=q.V,It=q.Ba+q.c*Pe;for(j(de<=q.l.o);0<Je;){var Ut=16<Je?16:Je,$t=q.l.ma,rr=q.l.width,xr=rr*Ut,yn=$t.ca,bo=$t.tb+rr*Pe,vo=q.Ta,Bn=q.Ua;Lu(q,Ut,yt,It),Os(vo,Bn,yn,bo,xr),md($t,Pe,Pe+Ut,yn,bo,rr),Je-=Ut,yt+=Ut*q.c,Pe+=Ut}j(Pe==de),q.C=q.Ma=de}function rh(){this.ub=this.yd=this.td=this.Rb=0}function nh(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xl(){this.Fb=this.Bb=this.Cb=0,this.Zb=fe(4),this.Lb=fe(4)}function oh(){var q;this.Yb=(function de(Pe,Je,yt){for(var It=yt[Je],Ut=0;Ut<It&&(Pe.push(yt.length>Je+1?[]:0),!(yt.length<Je+1));Ut++)de(Pe[Ut],Je+1,yt)}(q=[],0,[3,11]),q)}function Pm(){this.jb=fe(3),this.Wc=Ae([4,8],oh),this.Xc=Ae([4,17],oh)}function Mm(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new fe(4),this.od=new fe(4)}function ih(){this.ld=this.La=this.dd=this.tc=0}function Ip(){this.Na=this.la=0}function Ph(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $u(){this.ad=fe(384),this.Za=0,this.Ob=fe(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Am(){this.uc=this.M=this.Nb=0,this.wa=Array(new ih),this.Y=0,this.ya=Array(new $u),this.aa=0,this.l=new ah}function $l(){this.y=fe(16),this.f=fe(8),this.ea=fe(8)}function Pf(){this.cb=this.a=0,this.sc="",this.m=new ka,this.Od=new rh,this.Kc=new nh,this.ed=new Mm,this.Qa=new Xl,this.Ic=this.$c=this.Aa=0,this.D=new Am,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=De(8,ka),this.ia=0,this.pb=De(4,Ph),this.Pa=new Pm,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new $l),this.Hd=0,this.rb=Array(new Ip),this.sb=0,this.wa=Array(new ih),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $u),this.L=this.aa=0,this.gd=Ae([4,2],ih),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ah(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sh(){var q=new Pf;return null!=q&&(q.a=0,q.sc="OK",q.cb=0,q.Xb=0,eg||(eg=ef)),q}function Fc(q,de,Pe){return 0==q.a&&(q.a=de,q.sc=Pe,q.cb=0),0}function Mf(q,de,Pe){return 3<=Pe&&157==q[de+0]&&1==q[de+1]&&42==q[de+2]}function km(q,de){if(null==q)return 0;if(q.a=0,q.sc="OK",null==de)return Fc(q,2,"null VP8Io passed to VP8GetHeaders()");var Pe=de.data,Je=de.w,yt=de.ha;if(4>yt)return Fc(q,7,"Truncated header.");var It=Pe[Je+0]|Pe[Je+1]<<8|Pe[Je+2]<<16,Ut=q.Od;if(Ut.Rb=!(1&It),Ut.td=It>>1&7,Ut.yd=It>>4&1,Ut.ub=It>>5,3<Ut.td)return Fc(q,3,"Incorrect keyframe parameters.");if(!Ut.yd)return Fc(q,4,"Frame not displayable.");Je+=3,yt-=3;var $t=q.Kc;if(Ut.Rb){if(7>yt)return Fc(q,7,"cannot parse picture header");if(!Mf(Pe,Je,yt))return Fc(q,3,"Bad code word");$t.c=16383&(Pe[Je+4]<<8|Pe[Je+3]),$t.Td=Pe[Je+4]>>6,$t.i=16383&(Pe[Je+6]<<8|Pe[Je+5]),$t.Ud=Pe[Je+6]>>6,Je+=7,yt-=7,q.za=$t.c+15>>4,q.Ub=$t.i+15>>4,de.width=$t.c,de.height=$t.i,de.Da=0,de.j=0,de.v=0,de.va=de.width,de.o=de.height,de.da=0,de.ib=de.width,de.hb=de.height,de.U=de.width,de.T=de.height,xe((It=q.Pa).jb,0,255,It.jb.length),j(null!=(It=q.Qa)),It.Cb=0,It.Bb=0,It.Fb=1,xe(It.Zb,0,0,It.Zb.length),xe(It.Lb,0,0,It.Lb)}if(Ut.ub>yt)return Fc(q,7,"bad partition length");jo(It=q.m,Pe,Je,Ut.ub),Je+=Ut.ub,yt-=Ut.ub,Ut.Rb&&($t.Ld=so(It),$t.Kd=so(It)),$t=q.Qa;var rr,xr=q.Pa;if(j(null!=It),j(null!=$t),$t.Cb=so(It),$t.Cb){if($t.Bb=so(It),so(It)){for($t.Fb=so(It),rr=0;4>rr;++rr)$t.Zb[rr]=so(It)?Zo(It,7):0;for(rr=0;4>rr;++rr)$t.Lb[rr]=so(It)?Zo(It,6):0}if($t.Bb)for(rr=0;3>rr;++rr)xr.jb[rr]=so(It)?So(It,8):255}else $t.Bb=0;if(It.Ka)return Fc(q,3,"cannot parse segment header");if(($t=q.ed).zd=so(It),$t.Tb=So(It,6),$t.wb=So(It,3),$t.Pc=so(It),$t.Pc&&so(It)){for(xr=0;4>xr;++xr)so(It)&&($t.vd[xr]=Zo(It,6));for(xr=0;4>xr;++xr)so(It)&&($t.od[xr]=Zo(It,6))}if(q.L=0==$t.Tb?0:$t.zd?1:2,It.Ka)return Fc(q,3,"cannot parse filter header");var yn=yt;if(yt=rr=Je,Je=rr+yn,$t=yn,q.Xb=(1<<So(q.m,2))-1,yn<3*(xr=q.Xb))Pe=7;else{for(rr+=3*xr,$t-=3*xr,yn=0;yn<xr;++yn){var bo=Pe[yt+0]|Pe[yt+1]<<8|Pe[yt+2]<<16;bo>$t&&(bo=$t),jo(q.Jc[+yn],Pe,rr,bo),rr+=bo,$t-=bo,yt+=3}jo(q.Jc[+xr],Pe,rr,$t),Pe=rr<Je?0:5}if(0!=Pe)return Fc(q,Pe,"cannot parse partitions");for(Pe=So(rr=q.m,7),yt=so(rr)?Zo(rr,4):0,Je=so(rr)?Zo(rr,4):0,$t=so(rr)?Zo(rr,4):0,xr=so(rr)?Zo(rr,4):0,rr=so(rr)?Zo(rr,4):0,yn=q.Qa,bo=0;4>bo;++bo){if(yn.Cb){var vo=yn.Zb[bo];yn.Fb||(vo+=Pe)}else{if(0<bo){q.pb[bo]=q.pb[0];continue}vo=Pe}var Bn=q.pb[bo];Bn.Sc[0]=Gc[xl(vo+yt,127)],Bn.Sc[1]=$g[xl(vo+0,127)],Bn.Eb[0]=2*Gc[xl(vo+Je,127)],Bn.Eb[1]=101581*$g[xl(vo+$t,127)]>>16,8>Bn.Eb[1]&&(Bn.Eb[1]=8),Bn.Qc[0]=Gc[xl(vo+xr,117)],Bn.Qc[1]=$g[xl(vo+rr,127)],Bn.lc=vo+rr}if(!Ut.Rb)return Fc(q,4,"Not a key frame.");for(so(It),Ut=q.Pa,Pe=0;4>Pe;++Pe){for(yt=0;8>yt;++yt)for(Je=0;3>Je;++Je)for($t=0;11>$t;++$t)xr=Po(It,W_[Pe][yt][Je][$t])?So(It,8):B_[Pe][yt][Je][$t],Ut.Wc[Pe][yt].Yb[Je][$t]=xr;for(yt=0;17>yt;++yt)Ut.Xc[Pe][yt]=Ut.Wc[Pe][Jg[yt]]}return q.kc=so(It),q.kc&&(q.Bd=So(It,8)),q.cb=1}function ef(q,de,Pe,Je,yt,It,Ut){var $t=de[yt].Yb[Pe];for(Pe=0;16>yt;++yt){if(!Po(q,$t[Pe+0]))return yt;for(;!Po(q,$t[Pe+1]);)if($t=de[++yt].Yb[0],Pe=0,16==yt)return 16;var rr=de[yt+1].Yb;if(Po(q,$t[Pe+2])){var xr=q,yn=0;if(Po(xr,(vo=$t)[(bo=Pe)+3]))if(Po(xr,vo[bo+6])){for($t=0,bo=2*(yn=Po(xr,vo[bo+8]))+(vo=Po(xr,vo[bo+9+yn])),yn=0,vo=lm[bo];vo[$t];++$t)yn+=yn+Po(xr,vo[$t]);yn+=3+(8<<bo)}else Po(xr,vo[bo+7])?(yn=7+2*Po(xr,165),yn+=Po(xr,145)):yn=5+Po(xr,159);else yn=Po(xr,vo[bo+4])?3+Po(xr,vo[bo+5]):2;$t=rr[2]}else yn=1,$t=rr[1];rr=Ut+U_[yt],0>(xr=q).b&&Xn(xr);var bo,vo=xr.b,Bn=(bo=xr.Ca>>1)-(xr.I>>vo)>>31;--xr.b,xr.Ca+=Bn,xr.Ca|=1,xr.I-=(bo+1&Bn)<<vo,It[rr]=((yn^Bn)-Bn)*Je[(0<yt)+0]}return 16}function tf(q){var de=q.rb[q.sb-1];de.la=0,de.Na=0,xe(q.zc,0,0,q.zc.length),q.ja=0}function Xd(q,de,Pe,Je,yt){q[de+Pe+32*Je]=-256&(yt=q[de+Pe+32*Je]+(yt>>3))?0>yt?0:255:yt}function Rp(q,de,Pe,Je,yt,It){Xd(q,de,0,Pe,Je+yt),Xd(q,de,1,Pe,Je+It),Xd(q,de,2,Pe,Je-It),Xd(q,de,3,Pe,Je-yt)}function Sc(q){return(20091*q>>16)+q}function rf(q,de,Pe,Je){var yt,It=0,Ut=fe(16);for(yt=0;4>yt;++yt){var $t=q[de+0]+q[de+8],rr=q[de+0]-q[de+8],xr=(35468*q[de+4]>>16)-Sc(q[de+12]),yn=Sc(q[de+4])+(35468*q[de+12]>>16);Ut[It+0]=$t+yn,Ut[It+1]=rr+xr,Ut[It+2]=rr-xr,Ut[It+3]=$t-yn,It+=4,de++}for(yt=It=0;4>yt;++yt)$t=(q=Ut[It+0]+4)+Ut[It+8],rr=q-Ut[It+8],xr=(35468*Ut[It+4]>>16)-Sc(Ut[It+12]),Xd(Pe,Je,0,0,$t+(yn=Sc(Ut[It+4])+(35468*Ut[It+12]>>16))),Xd(Pe,Je,1,0,rr+xr),Xd(Pe,Je,2,0,rr-xr),Xd(Pe,Je,3,0,$t-yn),It++,Je+=32}function vd(q,de,Pe,Je){var yt=q[de+0]+4,It=35468*q[de+4]>>16,Ut=Sc(q[de+4]),$t=35468*q[de+1]>>16;Rp(Pe,Je,0,yt+Ut,q=Sc(q[de+1]),$t),Rp(Pe,Je,1,yt+It,q,$t),Rp(Pe,Je,2,yt-It,q,$t),Rp(Pe,Je,3,yt-Ut,q,$t)}function lh(q,de,Pe,Je,yt){rf(q,de,Pe,Je),yt&&rf(q,de+16,Pe,Je+4)}function le(q,de,Pe,Je){P(q,de+0,Pe,Je,1),P(q,de+32,Pe,Je+128,1)}function ye(q,de,Pe,Je){var yt;for(q=q[de+0]+4,yt=0;4>yt;++yt)for(de=0;4>de;++de)Xd(Pe,Je,de,yt,q)}function K(q,de,Pe,Je){q[de+0]&&Fe(q,de+0,Pe,Je),q[de+16]&&Fe(q,de+16,Pe,Je+4),q[de+32]&&Fe(q,de+32,Pe,Je+128),q[de+48]&&Fe(q,de+48,Pe,Je+128+4)}function E(q,de,Pe,Je){var yt,It=fe(16);for(yt=0;4>yt;++yt){var Ut=q[de+0+yt]+q[de+12+yt],$t=q[de+4+yt]+q[de+8+yt],rr=q[de+4+yt]-q[de+8+yt],xr=q[de+0+yt]-q[de+12+yt];It[0+yt]=Ut+$t,It[8+yt]=Ut-$t,It[4+yt]=xr+rr,It[12+yt]=xr-rr}for(yt=0;4>yt;++yt)Ut=(q=It[0+4*yt]+3)+It[3+4*yt],rr=It[1+4*yt]-It[2+4*yt],xr=q-It[3+4*yt],Pe[Je+0]=Ut+($t=It[1+4*yt]+It[2+4*yt])>>3,Pe[Je+16]=xr+rr>>3,Pe[Je+32]=Ut-$t>>3,Pe[Je+48]=xr-rr>>3,Je+=64}function F(q,de,Pe){var Je,yt=de-32,It=ec,Ut=255-q[yt-1];for(Je=0;Je<Pe;++Je){var $t,rr=It,xr=Ut+q[de-1];for($t=0;$t<Pe;++$t)q[de+$t]=rr[xr+q[yt+$t]];de+=32}}function _e(q,de){F(q,de,4)}function Ge(q,de){F(q,de,8)}function st(q,de){F(q,de,16)}function Tt(q,de){var Pe;for(Pe=0;16>Pe;++Pe)se(q,de+32*Pe,q,de-32,16)}function Kt(q,de){var Pe;for(Pe=16;0<Pe;--Pe)xe(q,de,q[de-1],16),de+=32}function fr(q,de,Pe){var Je;for(Je=0;16>Je;++Je)xe(de,Pe+32*Je,q,16)}function nn(q,de){var Pe,Je=16;for(Pe=0;16>Pe;++Pe)Je+=q[de-1+32*Pe]+q[de+Pe-32];fr(Je>>5,q,de)}function Yr(q,de){var Pe,Je=8;for(Pe=0;16>Pe;++Pe)Je+=q[de-1+32*Pe];fr(Je>>4,q,de)}function io(q,de){var Pe,Je=8;for(Pe=0;16>Pe;++Pe)Je+=q[de+Pe-32];fr(Je>>4,q,de)}function Go(q,de){fr(128,q,de)}function Vn(q,de,Pe){return q+2*de+Pe+2>>2}function yi(q,de){var Pe,Je=de-32;for(Je=new Uint8Array([Vn(q[Je-1],q[Je+0],q[Je+1]),Vn(q[Je+0],q[Je+1],q[Je+2]),Vn(q[Je+1],q[Je+2],q[Je+3]),Vn(q[Je+2],q[Je+3],q[Je+4])]),Pe=0;4>Pe;++Pe)se(q,de+32*Pe,Je,0,Je.length)}function ai(q,de){var Pe=q[de-1],Je=q[de-1+32],yt=q[de-1+64],It=q[de-1+96];$i(q,de+0,16843009*Vn(q[de-1-32],Pe,Je)),$i(q,de+32,16843009*Vn(Pe,Je,yt)),$i(q,de+64,16843009*Vn(Je,yt,It)),$i(q,de+96,16843009*Vn(yt,It,It))}function Ti(q,de){var Pe,Je=4;for(Pe=0;4>Pe;++Pe)Je+=q[de+Pe-32]+q[de-1+32*Pe];for(Je>>=3,Pe=0;4>Pe;++Pe)xe(q,de+32*Pe,Je,4)}function Ui(q,de){var Pe=q[de-1+0],Je=q[de-1+32],yt=q[de-1+64],It=q[de-1-32],Ut=q[de+0-32],$t=q[de+1-32],rr=q[de+2-32],xr=q[de+3-32];q[de+0+96]=Vn(Je,yt,q[de-1+96]),q[de+1+96]=q[de+0+64]=Vn(Pe,Je,yt),q[de+2+96]=q[de+1+64]=q[de+0+32]=Vn(It,Pe,Je),q[de+3+96]=q[de+2+64]=q[de+1+32]=q[de+0+0]=Vn(Ut,It,Pe),q[de+3+64]=q[de+2+32]=q[de+1+0]=Vn($t,Ut,It),q[de+3+32]=q[de+2+0]=Vn(rr,$t,Ut),q[de+3+0]=Vn(xr,rr,$t)}function vi(q,de){var Pe=q[de+1-32],Je=q[de+2-32],yt=q[de+3-32],It=q[de+4-32],Ut=q[de+5-32],$t=q[de+6-32],rr=q[de+7-32];q[de+0+0]=Vn(q[de+0-32],Pe,Je),q[de+1+0]=q[de+0+32]=Vn(Pe,Je,yt),q[de+2+0]=q[de+1+32]=q[de+0+64]=Vn(Je,yt,It),q[de+3+0]=q[de+2+32]=q[de+1+64]=q[de+0+96]=Vn(yt,It,Ut),q[de+3+32]=q[de+2+64]=q[de+1+96]=Vn(It,Ut,$t),q[de+3+64]=q[de+2+96]=Vn(Ut,$t,rr),q[de+3+96]=Vn($t,rr,rr)}function Uo(q,de){var Pe=q[de-1+0],Je=q[de-1+32],yt=q[de-1+64],It=q[de-1-32],Ut=q[de+0-32],$t=q[de+1-32],rr=q[de+2-32],xr=q[de+3-32];q[de+0+0]=q[de+1+64]=It+Ut+1>>1,q[de+1+0]=q[de+2+64]=Ut+$t+1>>1,q[de+2+0]=q[de+3+64]=$t+rr+1>>1,q[de+3+0]=rr+xr+1>>1,q[de+0+96]=Vn(yt,Je,Pe),q[de+0+64]=Vn(Je,Pe,It),q[de+0+32]=q[de+1+96]=Vn(Pe,It,Ut),q[de+1+32]=q[de+2+96]=Vn(It,Ut,$t),q[de+2+32]=q[de+3+96]=Vn(Ut,$t,rr),q[de+3+32]=Vn($t,rr,xr)}function go(q,de){var Pe=q[de+0-32],Je=q[de+1-32],yt=q[de+2-32],It=q[de+3-32],Ut=q[de+4-32],$t=q[de+5-32],rr=q[de+6-32],xr=q[de+7-32];q[de+0+0]=Pe+Je+1>>1,q[de+1+0]=q[de+0+64]=Je+yt+1>>1,q[de+2+0]=q[de+1+64]=yt+It+1>>1,q[de+3+0]=q[de+2+64]=It+Ut+1>>1,q[de+0+32]=Vn(Pe,Je,yt),q[de+1+32]=q[de+0+96]=Vn(Je,yt,It),q[de+2+32]=q[de+1+96]=Vn(yt,It,Ut),q[de+3+32]=q[de+2+96]=Vn(It,Ut,$t),q[de+3+64]=Vn(Ut,$t,rr),q[de+3+96]=Vn($t,rr,xr)}function pi(q,de){var Pe=q[de-1+0],Je=q[de-1+32],yt=q[de-1+64],It=q[de-1+96];q[de+0+0]=Pe+Je+1>>1,q[de+2+0]=q[de+0+32]=Je+yt+1>>1,q[de+2+32]=q[de+0+64]=yt+It+1>>1,q[de+1+0]=Vn(Pe,Je,yt),q[de+3+0]=q[de+1+32]=Vn(Je,yt,It),q[de+3+32]=q[de+1+64]=Vn(yt,It,It),q[de+3+64]=q[de+2+64]=q[de+0+96]=q[de+1+96]=q[de+2+96]=q[de+3+96]=It}function Co(q,de){var Pe=q[de-1+0],Je=q[de-1+32],yt=q[de-1+64],It=q[de-1+96],Ut=q[de-1-32],$t=q[de+0-32],rr=q[de+1-32],xr=q[de+2-32];q[de+0+0]=q[de+2+32]=Pe+Ut+1>>1,q[de+0+32]=q[de+2+64]=Je+Pe+1>>1,q[de+0+64]=q[de+2+96]=yt+Je+1>>1,q[de+0+96]=It+yt+1>>1,q[de+3+0]=Vn($t,rr,xr),q[de+2+0]=Vn(Ut,$t,rr),q[de+1+0]=q[de+3+32]=Vn(Pe,Ut,$t),q[de+1+32]=q[de+3+64]=Vn(Je,Pe,Ut),q[de+1+64]=q[de+3+96]=Vn(yt,Je,Pe),q[de+1+96]=Vn(It,yt,Je)}function hi(q,de){var Pe;for(Pe=0;8>Pe;++Pe)se(q,de+32*Pe,q,de-32,8)}function Gi(q,de){var Pe;for(Pe=0;8>Pe;++Pe)xe(q,de,q[de-1],8),de+=32}function Va(q,de,Pe){var Je;for(Je=0;8>Je;++Je)xe(de,Pe+32*Je,q,8)}function qi(q,de){var Pe,Je=8;for(Pe=0;8>Pe;++Pe)Je+=q[de+Pe-32]+q[de-1+32*Pe];Va(Je>>4,q,de)}function xa(q,de){var Pe,Je=4;for(Pe=0;8>Pe;++Pe)Je+=q[de+Pe-32];Va(Je>>3,q,de)}function Da(q,de){var Pe,Je=4;for(Pe=0;8>Pe;++Pe)Je+=q[de-1+32*Pe];Va(Je>>3,q,de)}function hs(q,de){Va(128,q,de)}function Dl(q,de,Pe){var Je=q[de-Pe],yt=q[de+0],It=3*(yt-Je)+bc[1020+q[de-2*Pe]-q[de+Pe]],Ut=Zu[112+(It+4>>3)];q[de-Pe]=ec[255+Je+Zu[112+(It+3>>3)]],q[de+0]=ec[255+yt-Ut]}function Tl(q,de,Pe,Je){return Fl[255+q[de-2*Pe]-q[de-Pe]]>Je||Fl[255+q[de+Pe]-q[de+0]]>Je}function Pc(q,de,Pe,Je){return 4*Fl[255+q[de-Pe]-q[de+0]]+Fl[255+q[de-2*Pe]-q[de+Pe]]<=Je}function Mh(q,de,Pe,Je,yt){var It=q[de-3*Pe],Ut=q[de-2*Pe],$t=q[de-Pe],rr=q[de+0],xr=q[de+Pe],yn=q[de+2*Pe];return 4*Fl[255+$t-rr]+Fl[255+Ut-xr]>Je?0:Fl[255+q[de-4*Pe]-It]<=yt&&Fl[255+It-Ut]<=yt&&Fl[255+Ut-$t]<=yt&&Fl[255+q[de+3*Pe]-yn]<=yt&&Fl[255+yn-xr]<=yt&&Fl[255+xr-rr]<=yt}function mu(q,de,Pe,Je){var yt=2*Je+1;for(Je=0;16>Je;++Je)Pc(q,de+Je,Pe,yt)&&Dl(q,de+Je,Pe)}function Af(q,de,Pe,Je){var yt=2*Je+1;for(Je=0;16>Je;++Je)Pc(q,de+Je*Pe,1,yt)&&Dl(q,de+Je*Pe,1)}function hp(q,de,Pe,Je){var yt;for(yt=3;0<yt;--yt)mu(q,de+=4*Pe,Pe,Je)}function wg(q,de,Pe,Je){var yt;for(yt=3;0<yt;--yt)Af(q,de+=4,Pe,Je)}function Ah(q,de,Pe,Je,yt,It,Ut,$t){for(It=2*It+1;0<yt--;){if(Mh(q,de,Pe,It,Ut))if(Tl(q,de,Pe,$t))Dl(q,de,Pe);else{var rr=q,xr=de,yn=Pe,bo=rr[xr-2*yn],vo=rr[xr-yn],Bn=rr[xr+0],xi=rr[xr+yn],qo=rr[xr+2*yn],xn=27*(_i=bc[1020+3*(Bn-vo)+bc[1020+bo-xi]])+63>>7,Rn=18*_i+63>>7,_i=9*_i+63>>7;rr[xr-3*yn]=ec[255+rr[xr-3*yn]+_i],rr[xr-2*yn]=ec[255+bo+Rn],rr[xr-yn]=ec[255+vo+xn],rr[xr+0]=ec[255+Bn-xn],rr[xr+yn]=ec[255+xi-Rn],rr[xr+2*yn]=ec[255+qo-_i]}de+=Je}}function Fp(q,de,Pe,Je,yt,It,Ut,$t){for(It=2*It+1;0<yt--;){if(Mh(q,de,Pe,It,Ut))if(Tl(q,de,Pe,$t))Dl(q,de,Pe);else{var rr=q,xr=de,yn=Pe,bo=rr[xr-yn],vo=rr[xr+0],Bn=rr[xr+yn],xi=Zu[112+(4+(qo=3*(vo-bo))>>3)],qo=Zu[112+(qo+3>>3)],xn=xi+1>>1;rr[xr-2*yn]=ec[255+rr[xr-2*yn]+xn],rr[xr-yn]=ec[255+bo+qo],rr[xr+0]=ec[255+vo-xi],rr[xr+yn]=ec[255+Bn-xn]}de+=Je}}function kh(q,de,Pe,Je,yt,It){Ah(q,de,Pe,1,16,Je,yt,It)}function kf(q,de,Pe,Je,yt,It){Ah(q,de,1,Pe,16,Je,yt,It)}function qg(q,de,Pe,Je,yt,It){var Ut;for(Ut=3;0<Ut;--Ut)Fp(q,de+=4*Pe,Pe,1,16,Je,yt,It)}function Lf(q,de,Pe,Je,yt,It){var Ut;for(Ut=3;0<Ut;--Ut)Fp(q,de+=4,1,Pe,16,Je,yt,It)}function xg(q,de,Pe,Je,yt,It,Ut,$t){Ah(q,de,yt,1,8,It,Ut,$t),Ah(Pe,Je,yt,1,8,It,Ut,$t)}function mp(q,de,Pe,Je,yt,It,Ut,$t){Ah(q,de,1,yt,8,It,Ut,$t),Ah(Pe,Je,1,yt,8,It,Ut,$t)}function Ym(q,de,Pe,Je,yt,It,Ut,$t){Fp(q,de+4*yt,yt,1,8,It,Ut,$t),Fp(Pe,Je+4*yt,yt,1,8,It,Ut,$t)}function Lh(q,de,Pe,Je,yt,It,Ut,$t){Fp(q,de+4,1,yt,8,It,Ut,$t),Fp(Pe,Je+4,1,yt,8,It,Ut,$t)}function tm(){this.ba=new vl,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yc,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Im(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rm(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Fm(){this.ua=0,this.Wa=new Hr,this.vb=new Hr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new rn,this.yc=new hr}function If(){this.xb=this.a=0,this.l=new ah,this.ca=new vl,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new zt,this.Pb=0,this.wd=new zt,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Fm,this.ab=0,this.gc=De(4,Rm),this.Oc=0}function Rf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ah,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function gp(q,de,Pe,Je,yt,It,Ut){for(q=null==q?0:q[de+0],de=0;de<Ut;++de)yt[It+de]=q+Pe[Je+de]&255,q=yt[It+de]}function rm(q,de,Pe,Je,yt,It,Ut){var $t;if(null==q)gp(null,null,Pe,Je,yt,It,Ut);else for($t=0;$t<Ut;++$t)yt[It+$t]=q[de+$t]+Pe[Je+$t]&255}function Ih(q,de,Pe,Je,yt,It,Ut){if(null==q)gp(null,null,Pe,Je,yt,It,Ut);else{var $t,rr=q[de+0],xr=rr,yn=rr;for($t=0;$t<Ut;++$t)xr=yn+(rr=q[de+$t])-xr,yn=Pe[Je+$t]+(-256&xr?0>xr?0:255:xr)&255,xr=rr,yt[It+$t]=yn}}function jm(q,de,Pe,Je){var yt=de.width,It=de.o;if(j(null!=q&&null!=de),0>Pe||0>=Je||Pe+Je>It)return null;if(!q.Cc){if(null==q.ga){var Ut;if(q.ga=new Rf,(Ut=null==q.ga)||(Ut=de.width*de.o,j(0==q.Gb.length),q.Gb=fe(Ut),q.Uc=0,null==q.Gb?Ut=0:(q.mb=q.Gb,q.nb=q.Uc,q.rc=null,Ut=1),Ut=!Ut),!Ut){var $t=q.Fa,rr=q.P,xr=q.qc,yn=q.mb,bo=q.nb,vo=rr+1,Bn=xr-1,xi=(Ut=q.ga).l;if(j(null!=$t&&null!=yn&&null!=de),gu[0]=null,gu[1]=gp,gu[2]=rm,gu[3]=Ih,Ut.ca=yn,Ut.tb=bo,Ut.c=de.width,Ut.i=de.height,j(0<Ut.c&&0<Ut.i),1>=xr)de=0;else if(Ut.$a=$t[rr+0]>>0&3,Ut.Z=$t[rr+0]>>2&3,Ut.Lc=$t[rr+0]>>4&3,rr=$t[rr+0]>>6&3,0>Ut.$a||1<Ut.$a||4<=Ut.Z||1<Ut.Lc||rr)de=0;else if(xi.put=kp,xi.ac=Ou,xi.bc=Bu,xi.ma=Ut,xi.width=de.width,xi.height=de.height,xi.Da=de.Da,xi.v=de.v,xi.va=de.va,xi.j=de.j,xi.o=de.o,Ut.$a)e:{j(1==Ut.$a),de=ru();t:for(;;){if(null==de){de=0;break e}if(j(null!=Ut),Ut.mc=de,de.c=Ut.c,de.i=Ut.i,de.l=Ut.l,de.l.ma=Ut,de.l.width=Ut.c,de.l.height=Ut.i,de.a=0,ro(de.m,$t,vo,Bn),!Qd(Ut.c,Ut.i,1,de,null)||(1==de.ab&&3==de.gc[0].hc&&Lp(de.s)?(Ut.ic=1,$t=de.c*de.i,de.Ta=null,de.Ua=0,de.V=fe($t),de.Ba=0,null==de.V?(de.a=1,de=0):de=1):(Ut.ic=0,de=fp(de,Ut.c)),!de))break t;de=1;break e}Ut.mc=null,de=0}else de=Bn>=Ut.c*Ut.i;Ut=!de}if(Ut)return null;1!=q.ga.Lc?q.Ga=0:Je=It-Pe}j(null!=q.ga),j(Pe+Je<=It);e:{if(de=($t=q.ga).c,It=$t.l.o,0==$t.$a){if(vo=q.rc,Bn=q.Vc,xi=q.Fa,xr=q.mb,yn=q.nb+Pe*de,j((rr=q.P+1+Pe*de)<=q.P+q.qc),0!=$t.Z)for(j(null!=gu[$t.Z]),Ut=0;Ut<Je;++Ut)gu[$t.Z](vo,Bn,xi,rr,xr,yn,de),vo=xr,Bn=yn,yn+=de,rr+=de;else for(Ut=0;Ut<Je;++Ut)se(xr,yn,xi,rr,de),vo=xr,Bn=yn,yn+=de,rr+=de;q.rc=vo,q.Vc=Bn}else{if(j(null!=$t.mc),de=Pe+Je,j(null!=(Ut=$t.mc)),j(de<=Ut.i),Ut.C>=de)de=1;else if($t.ic||to(),$t.ic){$t=Ut.V,vo=Ut.Ba;var qo=Ut.i,xn=(xi=1,rr=Ut.$/(Bn=Ut.c),xr=Ut.$%Bn,yn=Ut.m,bo=Ut.s,Ut.$),Rn=Bn*qo,_i=Bn*de,ki=bo.wc,Ci=xn<_i?Vc(bo,xr,rr):null;j(xn<=Rn),j(de<=qo),j(Lp(bo));t:for(;;){for(;!yn.h&&xn<_i;){if(xr&ki||(Ci=Vc(bo,xr,rr)),j(null!=Ci),bn(yn),256>(qo=Du(Ci.G[0],Ci.H[0],yn)))$t[vo+xn]=qo,++xn,++xr>=Bn&&(xr=0,++rr<=de&&!(rr%16)&&gd(Ut,rr));else{if(!(280>qo)){xi=0;break t}qo=Yd(qo-256,yn);var za,ya=Du(Ci.G[4],Ci.H[4],yn);if(bn(yn),!(xn>=(ya=Wu(Bn,ya=Yd(ya,yn)))&&Rn-xn>=qo)){xi=0;break t}for(za=0;za<qo;++za)$t[vo+xn+za]=$t[vo+xn+za-ya];for(xn+=qo,xr+=qo;xr>=Bn;)xr-=Bn,++rr<=de&&!(rr%16)&&gd(Ut,rr);xn<_i&&xr&ki&&(Ci=Vc(bo,xr,rr))}j(yn.h==Gr(yn))}gd(Ut,rr>de?de:rr);break t}!xi||yn.h&&xn<Rn?(xi=0,Ut.a=yn.h?5:3):Ut.$=xn,de=xi}else de=zc(Ut,Ut.V,Ut.Ba,Ut.c,Ut.i,de,th);if(!de){Je=0;break e}}Pe+Je>=It&&(q.Cc=1),Je=1}if(!Je)return null;if(q.Cc&&(null!=(Je=q.ga)&&(Je.mc=null),q.ga=null,0<q.Ga))return alert("todo:WebPDequantizeLevels"),null}return q.nb+Pe*yt}function Ee(q,de,Pe,Je,yt,It){for(;0<yt--;){var Ut,$t=q,rr=de+(Pe?1:0),xr=q,yn=de+(Pe?0:3);for(Ut=0;Ut<Je;++Ut){var bo=xr[yn+4*Ut];255!=bo&&($t[rr+4*Ut+0]=$t[rr+4*Ut+0]*(bo*=32897)>>23,$t[rr+4*Ut+1]=$t[rr+4*Ut+1]*bo>>23,$t[rr+4*Ut+2]=$t[rr+4*Ut+2]*bo>>23)}de+=It}}function bt(q,de,Pe,Je,yt){for(;0<Je--;){var It;for(It=0;It<Pe;++It){var Ut=q[de+2*It+0],$t=15&(xr=q[de+2*It+1]),rr=4369*$t,xr=(240&xr|xr>>4)*rr>>16;q[de+2*It+0]=(240&Ut|Ut>>4)*rr>>16&240|(15&Ut|Ut<<4)*rr>>16>>4&15,q[de+2*It+1]=240&xr|$t}de+=yt}}function Ur(q,de,Pe,Je,yt,It,Ut,$t){var rr,xr,yn=255;for(xr=0;xr<yt;++xr){for(rr=0;rr<Je;++rr){var bo=q[de+rr];It[Ut+4*rr]=bo,yn&=bo}de+=Pe,Ut+=$t}return 255!=yn}function mn(q,de,Pe,Je,yt){var It;for(It=0;It<yt;++It)Pe[Je+It]=q[de+It]>>8}function to(){fa=Ee,zi=bt,na=Ur,Os=mn}function Yo(q,de,Pe){Jr[q]=function(Je,yt,It,Ut,$t,rr,xr,yn,bo,vo,Bn,xi,qo,xn,Rn,_i,ki){var Ci,za=ki-1>>1,ya=$t[rr+0]|xr[yn+0]<<16,ks=bo[vo+0]|Bn[xi+0]<<16;j(null!=Je);var La=3*ya+ks+131074>>2;for(de(Je[yt+0],255&La,La>>16,qo,xn),null!=It&&de(It[Ut+0],255&(La=3*ks+ya+131074>>2),La>>16,Rn,_i),Ci=1;Ci<=za;++Ci){var Ps=$t[rr+Ci]|xr[yn+Ci]<<16,sc=bo[vo+Ci]|Bn[xi+Ci]<<16,Wl=ya+Ps+ks+sc+524296,sl=Wl+2*(Ps+ks)>>3;La=sl+ya>>1,ya=(Wl=Wl+2*(ya+sc)>>3)+Ps>>1,de(Je[yt+2*Ci-1],255&La,La>>16,qo,xn+(2*Ci-1)*Pe),de(Je[yt+2*Ci-0],255&ya,ya>>16,qo,xn+(2*Ci-0)*Pe),null!=It&&(ya=sl+sc>>1,de(It[Ut+2*Ci-1],255&(La=Wl+ks>>1),La>>16,Rn,_i+(2*Ci-1)*Pe),de(It[Ut+2*Ci+0],255&ya,ya>>16,Rn,_i+(2*Ci+0)*Pe)),ya=Ps,ks=sc}1&ki||(de(Je[yt+ki-1],255&(La=3*ya+ks+131074>>2),La>>16,qo,xn+(ki-1)*Pe),null!=It&&de(It[Ut+ki-1],255&(La=3*ks+ya+131074>>2),La>>16,Rn,_i+(ki-1)*Pe))}}function Pi(){sf[fc]=Bh,sf[wc]=Iv,sf[bd]=K_,sf[ep]=Cg,sf[wd]=V_,sf[Pu]=Ky,sf[iu]=Vy,sf[Np]=Iv,sf[Up]=Cg,sf[of]=V_,sf[uh]=Ky}function ja(q){return q&~dh?0>q?0:255:q>>Wh}function Ja(q,de){return ja((19077*q>>8)+(26149*de>>8)-14234)}function Hs(q,de,Pe){return ja((19077*q>>8)-(6419*de>>8)-(13320*Pe>>8)+8708)}function Gs(q,de){return ja((19077*q>>8)+(33050*de>>8)-17685)}function Sl(q,de,Pe,Je,yt){Je[yt+0]=Ja(q,Pe),Je[yt+1]=Hs(q,de,Pe),Je[yt+2]=Gs(q,de)}function ac(q,de,Pe,Je,yt){Je[yt+0]=Gs(q,de),Je[yt+1]=Hs(q,de,Pe),Je[yt+2]=Ja(q,Pe)}function qs(q,de,Pe,Je,yt){var It=Hs(q,de,Pe);de=It<<3&224|Gs(q,de)>>3,Je[yt+0]=248&Ja(q,Pe)|It>>5,Je[yt+1]=de}function jc(q,de,Pe,Je,yt){var It=240&Gs(q,de)|15;Je[yt+0]=240&Ja(q,Pe)|Hs(q,de,Pe)>>4,Je[yt+1]=It}function Ju(q,de,Pe,Je,yt){Je[yt+0]=255,Sl(q,de,Pe,Je,yt+1)}function Tu(q,de,Pe,Je,yt){ac(q,de,Pe,Je,yt),Je[yt+3]=255}function Md(q,de,Pe,Je,yt){Sl(q,de,Pe,Je,yt),Je[yt+3]=255}function xl(q,de){return 0>q?0:q>de?de:q}function nf(q,de,Pe){Jr[q]=function(Je,yt,It,Ut,$t,rr,xr,yn,bo){for(var vo=yn+(-2&bo)*Pe;yn!=vo;)de(Je[yt+0],It[Ut+0],$t[rr+0],xr,yn),de(Je[yt+1],It[Ut+0],$t[rr+0],xr,yn+Pe),yt+=2,++Ut,++rr,yn+=2*Pe;1&bo&&de(Je[yt+0],It[Ut+0],$t[rr+0],xr,yn)}}function nm(q,de,Pe){return 0==Pe?0==q?0==de?6:5:0==de?4:0:Pe}function _d(q,de,Pe,Je,yt){switch(q>>>30){case 3:P(de,Pe,Je,yt,0);break;case 2:Z(de,Pe,Je,yt);break;case 1:Fe(de,Pe,Je,yt)}}function yd(q,de){var Pe,Je,yt=de.M,It=de.Nb,Ut=q.oc,$t=q.pc+40,rr=q.oc,xr=q.pc+584,yn=q.oc,bo=q.pc+600;for(Pe=0;16>Pe;++Pe)Ut[$t+32*Pe-1]=129;for(Pe=0;8>Pe;++Pe)rr[xr+32*Pe-1]=129,yn[bo+32*Pe-1]=129;for(0<yt?Ut[$t-1-32]=rr[xr-1-32]=yn[bo-1-32]=129:(xe(Ut,$t-32-1,127,21),xe(rr,xr-32-1,127,9),xe(yn,bo-32-1,127,9)),Je=0;Je<q.za;++Je){var vo=de.ya[de.aa+Je];if(0<Je){for(Pe=-1;16>Pe;++Pe)se(Ut,$t+32*Pe-4,Ut,$t+32*Pe+12,4);for(Pe=-1;8>Pe;++Pe)se(rr,xr+32*Pe-4,rr,xr+32*Pe+4,4),se(yn,bo+32*Pe-4,yn,bo+32*Pe+4,4)}var Bn=q.Gd,xi=q.Hd+Je,qo=vo.ad,xn=vo.Hc;if(0<yt&&(se(Ut,$t-32,Bn[xi].y,0,16),se(rr,xr-32,Bn[xi].f,0,8),se(yn,bo-32,Bn[xi].ea,0,8)),vo.Za){var Rn=Ut,_i=$t-32+16;for(0<yt&&(Je>=q.za-1?xe(Rn,_i,Bn[xi].y[15],4):se(Rn,_i,Bn[xi+1].y,0,4)),Pe=0;4>Pe;Pe++)Rn[_i+128+Pe]=Rn[_i+256+Pe]=Rn[_i+384+Pe]=Rn[_i+0+Pe];for(Pe=0;16>Pe;++Pe,xn<<=2)jf[vo.Ob[Pe]](Rn=Ut,_i=$t+Gy[Pe]),_d(xn,qo,16*+Pe,Rn,_i)}else if(Rn=nm(Je,yt,vo.Ob[0]),Uh[Rn](Ut,$t),0!=xn)for(Pe=0;16>Pe;++Pe,xn<<=2)_d(xn,qo,16*+Pe,Ut,$t+Gy[Pe]);for(Pe=vo.Gc,Rn=nm(Je,yt,vo.Dd),af[Rn](rr,xr),af[Rn](yn,bo),xn=qo,Rn=rr,_i=xr,255&(vo=Pe>>0)&&(170&vo?he(xn,256,Rn,_i):Be(xn,256,Rn,_i)),vo=yn,xn=bo,255&(Pe>>=8)&&(170&Pe?he(qo,320,vo,xn):Be(qo,320,vo,xn)),yt<q.Ub-1&&(se(Bn[xi].y,0,Ut,$t+480,16),se(Bn[xi].f,0,rr,xr+224,8),se(Bn[xi].ea,0,yn,bo+224,8)),Bn=q.sa,xi=q.ta+16*Je+16*It*q.R,qo=q.qa,vo=q.ra+8*Je+(Pe=8*It*q.B),xn=q.Ha,Rn=q.Ia+8*Je+Pe,Pe=0;16>Pe;++Pe)se(Bn,xi+Pe*q.R,Ut,$t+32*Pe,16);for(Pe=0;8>Pe;++Pe)se(qo,vo+Pe*q.B,rr,xr+32*Pe,8),se(xn,Rn+Pe*q.B,yn,bo+32*Pe,8)}}function ch(q,de,Pe,Je,yt,It,Ut,$t,rr){var xr=[0],yn=[0],bo=0,vo=null!=rr?rr.kd:0,Bn=rr??new Im;if(null==q||12>Pe)return 7;Bn.data=q,Bn.w=de,Bn.ha=Pe,de=[de],Pe=[Pe],Bn.gb=[Bn.gb];e:{var xi=de,qo=Pe,xn=Bn.gb;if(j(null!=q),j(null!=qo),j(null!=xn),xn[0]=0,12<=qo[0]&&!J(q,xi[0],"RIFF")){if(J(q,xi[0]+8,"WEBP")){xn=3;break e}var Rn=_a(q,xi[0]+4);if(12>Rn||4294967286<Rn){xn=3;break e}if(vo&&Rn>qo[0]-8){xn=7;break e}xn[0]=Rn,xi[0]+=12,qo[0]-=12}xn=0}if(0!=xn)return xn;for(Rn=0<Bn.gb[0],Pe=Pe[0];;){e:{var _i=q;qo=de,xn=Pe;var ki=xr,Ci=yn,za=xi=[0];if((La=bo=[bo])[0]=0,8>xn[0])xn=7;else{if(!J(_i,qo[0],"VP8X")){if(10!=_a(_i,qo[0]+4)){xn=3;break e}if(18>xn[0]){xn=7;break e}var ya=_a(_i,qo[0]+8),ks=1+ga(_i,qo[0]+12);if(2147483648<=ks*(_i=1+ga(_i,qo[0]+15))){xn=3;break e}null!=za&&(za[0]=ya),null!=ki&&(ki[0]=ks),null!=Ci&&(Ci[0]=_i),qo[0]+=18,xn[0]-=18,La[0]=1}xn=0}}if(bo=bo[0],0!=xn)return xn;if(qo=!!(2&(xi=xi[0])),!Rn&&bo)return 3;if(null!=It&&(It[0]=!!(16&xi)),null!=Ut&&(Ut[0]=qo),null!=$t&&($t[0]=0),Ut=xr[0],xi=yn[0],bo&&qo&&null==rr){xn=0;break}if(4>Pe){xn=7;break}if(Rn&&bo||!Rn&&!bo&&!J(q,de[0],"ALPH")){Pe=[Pe],Bn.na=[Bn.na],Bn.P=[Bn.P],Bn.Sa=[Bn.Sa];e:{xn=de,Rn=Pe;var La=Bn.gb;ki=Bn.na,Ci=Bn.P,za=Bn.Sa,ks=22,j(null!=(ya=q)),j(null!=Rn),_i=xn[0];var Ps=Rn[0];for(j(null!=ki),j(null!=za),ki[0]=null,Ci[0]=null,za[0]=0;;){if(xn[0]=_i,Rn[0]=Ps,8>Ps){xn=7;break e}var sc=_a(ya,_i+4);if(4294967286<sc){xn=3;break e}var Wl=8+sc+1&-2;if(ks+=Wl,0<La&&ks>La){xn=3;break e}if(!J(ya,_i,"VP8 ")||!J(ya,_i,"VP8L")){xn=0;break e}if(Ps[0]<Wl){xn=7;break e}J(ya,_i,"ALPH")||(ki[0]=ya,Ci[0]=_i+8,za[0]=sc),_i+=Wl,Ps-=Wl}}if(Pe=Pe[0],Bn.na=Bn.na[0],Bn.P=Bn.P[0],Bn.Sa=Bn.Sa[0],0!=xn)break}Pe=[Pe],Bn.Ja=[Bn.Ja],Bn.xa=[Bn.xa];e:if(La=q,xn=de,Rn=Pe,ki=Bn.gb[0],Ci=Bn.Ja,za=Bn.xa,ya=xn[0],_i=!J(La,ya,"VP8 "),ks=!J(La,ya,"VP8L"),j(null!=La),j(null!=Rn),j(null!=Ci),j(null!=za),8>Rn[0])xn=7;else{if(_i||ks){if(La=_a(La,ya+4),12<=ki&&La>ki-12){xn=3;break e}if(vo&&La>Rn[0]-8){xn=7;break e}Ci[0]=La,xn[0]+=8,Rn[0]-=8,za[0]=ks}else za[0]=5<=Rn[0]&&47==La[ya+0]&&!(La[ya+4]>>5),Ci[0]=Rn[0];xn=0}if(Pe=Pe[0],Bn.Ja=Bn.Ja[0],Bn.xa=Bn.xa[0],de=de[0],0!=xn)break;if(4294967286<Bn.Ja)return 3;if(null==$t||qo||($t[0]=Bn.xa?2:1),Ut=[Ut],xi=[xi],Bn.xa){if(5>Pe){xn=7;break}$t=Ut,vo=xi,qo=It,null==q||5>Pe?q=0:5<=Pe&&47==q[de+0]&&!(q[de+4]>>5)?(Rn=[0],La=[0],ki=[0],ro(Ci=new zt,q,de,Pe),us(Ci,Rn,La,ki)?(null!=$t&&($t[0]=Rn[0]),null!=vo&&(vo[0]=La[0]),null!=qo&&(qo[0]=ki[0]),q=1):q=0):q=0}else{if(10>Pe){xn=7;break}$t=xi,null==q||10>Pe||!Mf(q,de+3,Pe-3)?q=0:(vo=q[de+0]|q[de+1]<<8|q[de+2]<<16,qo=16383&(q[de+7]<<8|q[de+6]),q=16383&(q[de+9]<<8|q[de+8]),1&vo||3<(vo>>1&7)||!(vo>>4&1)||vo>>5>=Bn.Ja||!qo||!q?q=0:(Ut&&(Ut[0]=qo),$t&&($t[0]=q),q=1))}if(!q||(Ut=Ut[0],xi=xi[0],bo&&(xr[0]!=Ut||yn[0]!=xi)))return 3;null!=rr&&(rr[0]=Bn,rr.offset=de-rr.w,j(4294967286>de-rr.w),j(rr.offset==rr.ha-Pe));break}return 0==xn||7==xn&&bo&&null==rr?(null!=It&&(It[0]|=null!=Bn.na&&0<Bn.na.length),null!=Je&&(Je[0]=Ut),null!=yt&&(yt[0]=xi),0):xn}function jp(q,de,Pe){var Je=de.width,yt=de.height,It=0,Ut=0,$t=Je,rr=yt;if(de.Da=null!=q&&0<q.Da,de.Da&&($t=q.cd,rr=q.bd,It=q.v,Ut=q.j,11>Pe||(It&=-2,Ut&=-2),0>It||0>Ut||0>=$t||0>=rr||It+$t>Je||Ut+rr>yt))return 0;if(de.v=It,de.j=Ut,de.va=It+$t,de.o=Ut+rr,de.U=$t,de.T=rr,de.da=null!=q&&0<q.da,de.da){if(!Is($t,rr,Pe=[q.ib],It=[q.hb]))return 0;de.ib=Pe[0],de.hb=It[0]}return de.ob=null!=q&&q.ob,de.Kb=null==q||!q.Sd,de.da&&(de.ob=de.ib<3*Je/4&&de.hb<3*yt/4,de.Kb=0),1}function Nm(q){if(null==q)return 2;if(11>q.S){var de=q.f.RGBA;de.fb+=(q.height-1)*de.A,de.A=-de.A}else(de=q.f.kb).O+=((q=q.height)-1)*de.fa,de.fa=-de.fa,de.N+=(q-1>>1)*de.Ab,de.Ab=-de.Ab,de.W+=(q-1>>1)*de.Db,de.Db=-de.Db,null!=de.F&&(de.J+=(q-1)*de.lb,de.lb=-de.lb);return 0}function Rh(q,de,Pe,Je){if(null==Je||0>=q||0>=de)return 2;if(null!=Pe){if(Pe.Da){var yt=Pe.cd,It=Pe.bd,Ut=-2&Pe.v,$t=-2&Pe.j;if(0>Ut||0>$t||0>=yt||0>=It||Ut+yt>q||$t+It>de)return 2;q=yt,de=It}if(Pe.da){if(!Is(q,de,yt=[Pe.ib],It=[Pe.hb]))return 2;q=yt[0],de=It[0]}}Je.width=q,Je.height=de;e:{var rr=Je.width,xr=Je.height;if(q=Je.S,0>=rr||0>=xr||!(q>=fc&&13>q))q=2;else{if(0>=Je.Rd&&null==Je.sd){Ut=It=yt=de=0;var yn=($t=rr*Nv[q])*xr;if(11>q||(It=(xr+1)/2*(de=(rr+1)/2),12==q&&(Ut=(yt=rr)*xr)),null==(xr=fe(yn+2*It+Ut))){q=1;break e}Je.sd=xr,11>q?((rr=Je.f.RGBA).eb=xr,rr.fb=0,rr.A=$t,rr.size=yn):((rr=Je.f.kb).y=xr,rr.O=0,rr.fa=$t,rr.Fd=yn,rr.f=xr,rr.N=0+yn,rr.Ab=de,rr.Cd=It,rr.ea=xr,rr.W=0+yn+It,rr.Db=de,rr.Ed=It,12==q&&(rr.F=xr,rr.J=0+yn+2*It),rr.Tc=Ut,rr.lb=yt)}if(de=1,It=Je.width,Ut=Je.height,(yt=Je.S)>=fc&&13>yt)if(11>yt)q=Je.f.RGBA,de&=($t=Math.abs(q.A))*(Ut-1)+It<=q.size,de&=$t>=It*Nv[yt],de&=null!=q.eb;else{q=Je.f.kb,$t=(It+1)/2,yn=(Ut+1)/2,rr=Math.abs(q.fa),xr=Math.abs(q.Ab);var bo=Math.abs(q.Db),vo=Math.abs(q.lb);de&=rr*(Ut-1)+It<=q.Fd,de&=xr*(yn-1)+$t<=q.Cd,de=(de&=bo*(yn-1)+$t<=q.Ed)&rr>=It&xr>=$t&bo>=$t,de&=null!=q.y,de&=null!=q.f,de&=null!=q.ea,12==yt&&(de&=vo>=It,de&=vo*(Ut-1)+It<=q.Tc,de&=null!=q.F)}else de=0;q=de?0:2}}return 0!=q||null!=Pe&&Pe.fd&&(q=Nm(Je)),q}var Su=64,om=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],im=24,am=32,sm=8,Ad=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ua("Predictor0","PredictorAdd0"),Jr.Predictor0=function(){return 4278190080},Jr.Predictor1=function(q){return q},Jr.Predictor2=function(q,de,Pe){return de[Pe+0]},Jr.Predictor3=function(q,de,Pe){return de[Pe+1]},Jr.Predictor4=function(q,de,Pe){return de[Pe-1]},Jr.Predictor5=function(q,de,Pe){return da(da(q,de[Pe+1]),de[Pe+0])},Jr.Predictor6=function(q,de,Pe){return da(q,de[Pe-1])},Jr.Predictor7=function(q,de,Pe){return da(q,de[Pe+0])},Jr.Predictor8=function(q,de,Pe){return da(de[Pe-1],de[Pe+0])},Jr.Predictor9=function(q,de,Pe){return da(de[Pe+0],de[Pe+1])},Jr.Predictor10=function(q,de,Pe){return da(da(q,de[Pe-1]),da(de[Pe+0],de[Pe+1]))},Jr.Predictor11=function(q,de,Pe){var Je=de[Pe+0];return 0>=Ts(Je>>24&255,q>>24&255,(de=de[Pe-1])>>24&255)+Ts(Je>>16&255,q>>16&255,de>>16&255)+Ts(Je>>8&255,q>>8&255,de>>8&255)+Ts(255&Je,255&q,255&de)?Je:q},Jr.Predictor12=function(q,de,Pe){var Je=de[Pe+0];return(os((q>>24&255)+(Je>>24&255)-((de=de[Pe-1])>>24&255))<<24|os((q>>16&255)+(Je>>16&255)-(de>>16&255))<<16|os((q>>8&255)+(Je>>8&255)-(de>>8&255))<<8|os((255&q)+(255&Je)-(255&de)))>>>0},Jr.Predictor13=function(q,de,Pe){var Je=de[Pe-1];return(Es((q=da(q,de[Pe+0]))>>24&255,Je>>24&255)<<24|Es(q>>16&255,Je>>16&255)<<16|Es(q>>8&255,Je>>8&255)<<8|Es(q>>0&255,Je>>0&255))>>>0};var Bl=Jr.PredictorAdd0;Jr.PredictorAdd1=js,ua("Predictor2","PredictorAdd2"),ua("Predictor3","PredictorAdd3"),ua("Predictor4","PredictorAdd4"),ua("Predictor5","PredictorAdd5"),ua("Predictor6","PredictorAdd6"),ua("Predictor7","PredictorAdd7"),ua("Predictor8","PredictorAdd8"),ua("Predictor9","PredictorAdd9"),ua("Predictor10","PredictorAdd10"),ua("Predictor11","PredictorAdd11"),ua("Predictor12","PredictorAdd12"),ua("Predictor13","PredictorAdd13");var Hc=Jr.PredictorAdd2;tl("ColorIndexInverseTransform","MapARGB","32b",function(q){return q>>8&255},function(q){return q}),tl("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(q){return q},function(q){return q>>8&255});var Fh,Yu=Jr.ColorIndexInverseTransform,Ff=Jr.MapARGB,jh=Jr.VP8LColorIndexInverseTransformAlpha,Qm=Jr.MapAlpha,Jl=Jr.VP8LPredictorsAdd=[];Jl.length=16,(Jr.VP8LPredictors=[]).length=16,(Jr.VP8LPredictorsAdd_C=[]).length=16,(Jr.VP8LPredictors_C=[]).length=16;var Nh,kd,Ld,Id,f,v,k,P,Z,he,Fe,Be,ot,ft,jr,Rr,_n,Tn,wo,ni,Mi,sa,Ta,Fi,fa,zi,na,Os,_s=fe(511),nu=fe(2041),Hl=fe(225),ou=fe(767),Qu=0,bc=nu,Zu=Hl,ec=ou,Fl=_s,fc=0,wc=1,bd=2,ep=3,wd=4,Pu=5,iu=6,Np=7,Up=8,of=9,uh=10,au=[2,3,7],Um=[3,3,11],Xm=[280,256,256,256,40],kv=[0,1,1,1,0],bb=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],N_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],xb=8,Gc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$g=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],eg=null,lm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],U_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zy=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],B_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Lv=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],W_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Jg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Uh=[],jf=[],af=[],Z_=1,Yg=2,gu=[],sf=[];Yo("UpsampleRgbLinePair",Sl,3),Yo("UpsampleBgrLinePair",ac,3),Yo("UpsampleRgbaLinePair",Md,4),Yo("UpsampleBgraLinePair",Tu,4),Yo("UpsampleArgbLinePair",Ju,4),Yo("UpsampleRgba4444LinePair",jc,2),Yo("UpsampleRgb565LinePair",qs,2);var Bh=Jr.UpsampleRgbLinePair,K_=Jr.UpsampleBgrLinePair,Iv=Jr.UpsampleRgbaLinePair,Cg=Jr.UpsampleBgraLinePair,V_=Jr.UpsampleArgbLinePair,Ky=Jr.UpsampleRgba4444LinePair,Vy=Jr.UpsampleRgb565LinePair,Rv=16,Fv=1<<Rv-1,cm=-227,jv=482,Wh=6,dh=(256<<Wh)-1,vp=0,Eg=fe(256),zy=fe(256),z_=fe(256),Cb=fe(256),Hy=fe(jv-cm),Qg=fe(jv-cm);nf("YuvToRgbRow",Sl,3),nf("YuvToBgrRow",ac,3),nf("YuvToRgbaRow",Md,4),nf("YuvToBgraRow",Tu,4),nf("YuvToArgbRow",Ju,4),nf("YuvToRgba4444Row",jc,2),nf("YuvToRgb565Row",qs,2);var Gy=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],um=[0,2,8],Og=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(q,de,Pe,Je,yt){var It=wc,Ut=new tm,$t=new vl;Ut.ba=$t,$t.S=It,$t.width=[$t.width],$t.height=[$t.height];var rr=$t.width,xr=$t.height,yn=new Pd;if(null==yn||null==q)var bo=2;else j(null!=yn),bo=ch(q,de,Pe,yn.width,yn.height,yn.Pd,yn.Qd,yn.format,null);if(0!=bo?rr=0:(null!=rr&&(rr[0]=yn.width[0]),null!=xr&&(xr[0]=yn.height[0]),rr=1),rr){$t.width=$t.width[0],$t.height=$t.height[0],null!=Je&&(Je[0]=$t.width),null!=yt&&(yt[0]=$t.height);e:{if(Je=new ah,(yt=new Im).data=q,yt.w=de,yt.ha=Pe,yt.kd=1,de=[0],j(null!=yt),(0==(q=ch(yt.data,yt.w,yt.ha,null,null,null,de,null,yt))||7==q)&&de[0]&&(q=4),0==(de=q)){if(j(null!=Ut),Je.data=yt.data,Je.w=yt.w+yt.offset,Je.ha=yt.ha-yt.offset,Je.put=kp,Je.ac=Ou,Je.bc=Bu,Je.ma=Ut,yt.xa){if(null==(q=ru())){Ut=1;break e}if(function(vo,Bn){var xi=[0],qo=[0],xn=[0];t:for(;;){if(null==vo)return 0;if(null==Bn)return vo.a=2,0;if(vo.l=Bn,vo.a=0,ro(vo.m,Bn.data,Bn.w,Bn.ha),!us(vo.m,xi,qo,xn)){vo.a=3;break t}if(vo.xb=Yg,Bn.width=xi[0],Bn.height=qo[0],!Qd(xi[0],qo[0],1,vo,null))break t;return 1}return j(0!=vo.a),0}(q,Je)){if(Je=0==(de=Rh(Je.width,Je.height,Ut.Oa,Ut.ba))){t:{Je=q;r:for(;;){if(null==Je){Je=0;break t}if(j(null!=Je.s.yc),j(null!=Je.s.Ya),j(0<Je.s.Wb),j(null!=(Pe=Je.l)),j(null!=(yt=Pe.ma)),0!=Je.xb){if(Je.ca=yt.ba,Je.tb=yt.tb,j(null!=Je.ca),!jp(yt.Oa,Pe,ep)){Je.a=2;break r}if(!fp(Je,Pe.width)||Pe.da)break r;if((Pe.da||Ol(Je.ca.S))&&to(),11>Je.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=Je.ca.f.kb.F&&to()),Je.Pb&&0<Je.s.ua&&null==Je.s.vb.X&&!vs(Je.s.vb,Je.s.Wa.Xa)){Je.a=1;break r}Je.xb=0}if(!zc(Je,Je.V,Je.Ba,Je.c,Je.i,Pe.o,eh))break r;yt.Dc=Je.Ma,Je=1;break t}j(0!=Je.a),Je=0}Je=!Je}Je&&(de=q.a)}else de=q.a}else{if(null==(q=new sh)){Ut=1;break e}if(q.Fa=yt.na,q.P=yt.P,q.qc=yt.Sa,km(q,Je)){if(0==(de=Rh(Je.width,Je.height,Ut.Oa,Ut.ba))){if(q.Aa=0,Pe=Ut.Oa,j(null!=(yt=q)),null!=Pe){if(0<(rr=0>(rr=Pe.Md)?0:100<rr?255:255*rr/100)){for(xr=yn=0;4>xr;++xr)12>(bo=yt.pb[xr]).lc&&(bo.ia=rr*Og[0>bo.lc?0:bo.lc]>>3),yn|=bo.ia;yn&&(alert("todo:VP8InitRandom"),yt.ia=1)}yt.Ga=Pe.Id,100<yt.Ga?yt.Ga=100:0>yt.Ga&&(yt.Ga=0)}(function Lm(q,de){if(null==q)return 0;if(null==de)return Fc(q,2,"NULL VP8Io parameter in VP8Decode().");if(!q.cb&&!km(q,de))return 0;if(j(q.cb),null==de.ac||de.ac(de)){de.ob&&(q.L=0);var Pe=um[q.L];if(2==q.L?(q.yb=0,q.zb=0):(q.yb=de.v-Pe>>4,q.zb=de.j-Pe>>4,0>q.yb&&(q.yb=0),0>q.zb&&(q.zb=0)),q.Va=de.o+15+Pe>>4,q.Hb=de.va+15+Pe>>4,q.Hb>q.za&&(q.Hb=q.za),q.Va>q.Ub&&(q.Va=q.Ub),0<q.L){var Je=q.ed;for(Pe=0;4>Pe;++Pe){var yt;if(q.Qa.Cb){var It=q.Qa.Lb[Pe];q.Qa.Fb||(It+=Je.Tb)}else It=Je.Tb;for(yt=0;1>=yt;++yt){var Ut=q.gd[Pe][yt],$t=It;if(Je.Pc&&($t+=Je.vd[0],yt&&($t+=Je.od[0])),0<($t=0>$t?0:63<$t?63:$t)){var rr=$t;0<Je.wb&&(rr=4<Je.wb?rr>>2:rr>>1)>9-Je.wb&&(rr=9-Je.wb),1>rr&&(rr=1),Ut.dd=rr,Ut.tc=2*$t+rr,Ut.ld=40<=$t?2:15<=$t?1:0}else Ut.tc=0;Ut.La=yt}}}Pe=0}else Fc(q,6,"Frame setup failed"),Pe=q.a;if(Pe=0==Pe){if(Pe){q.$c=0,0<q.Aa||(q.Ic=1);e:{Je=4*(rr=q.za);var xr=32*rr,yn=rr+1,bo=0<q.L?rr*(0<q.Aa?2:1):0,vo=(2==q.Aa?2:1)*rr;if((Ut=Je+832+(yt=3*(16*(Pe=q.Ic)+um[q.L])/2*xr)+(It=null!=q.Fa&&0<q.Fa.length?q.Kc.c*q.Kc.i:0))!=Ut)Pe=0;else{if(Ut>q.Vb){if(q.Vb=0,q.Ec=fe(Ut),q.Fc=0,null==q.Ec){Pe=Fc(q,1,"no memory during frame initialization.");break e}q.Vb=Ut}$t=q.Fc,q.Ac=Ut=q.Ec,q.Bc=$t,$t+=Je,q.Gd=De(xr,$l),q.Hd=0,q.rb=De(yn+1,Ip),q.sb=1,q.wa=bo?De(bo,ih):null,q.Y=0,q.D.Nb=0,q.D.wa=q.wa,q.D.Y=q.Y,0<q.Aa&&(q.D.Y+=rr),j(!0),q.oc=Ut,q.pc=$t,$t+=832,q.ya=De(vo,$u),q.aa=0,q.D.ya=q.ya,q.D.aa=q.aa,2==q.Aa&&(q.D.aa+=rr),q.R=16*rr,q.B=8*rr,rr=(xr=um[q.L])*q.R,xr=xr/2*q.B,q.sa=Ut,q.ta=$t+rr,q.qa=q.sa,q.ra=q.ta+16*Pe*q.R+xr,q.Ha=q.qa,q.Ia=q.ra+8*Pe*q.B+xr,q.$c=0,$t+=yt,q.mb=It?Ut:null,q.nb=It?$t:null,j($t+It<=q.Fc+q.Vb),tf(q),xe(q.Ac,q.Bc,0,Je),Pe=1}}if(Pe){if(de.ka=0,de.y=q.sa,de.O=q.ta,de.f=q.qa,de.N=q.ra,de.ea=q.Ha,de.Vd=q.Ia,de.fa=q.R,de.Rc=q.B,de.F=null,de.J=0,!Qu){for(Pe=-255;255>=Pe;++Pe)_s[255+Pe]=0>Pe?-Pe:Pe;for(Pe=-1020;1020>=Pe;++Pe)nu[1020+Pe]=-128>Pe?-128:127<Pe?127:Pe;for(Pe=-112;112>=Pe;++Pe)Hl[112+Pe]=-16>Pe?-16:15<Pe?15:Pe;for(Pe=-255;510>=Pe;++Pe)ou[255+Pe]=0>Pe?0:255<Pe?255:Pe;Qu=1}k=E,P=lh,he=le,Fe=ye,Be=K,Z=vd,ot=kh,ft=kf,jr=xg,Rr=mp,_n=qg,Tn=Lf,wo=Ym,ni=Lh,Mi=mu,sa=Af,Ta=hp,Fi=wg,jf[0]=Ti,jf[1]=_e,jf[2]=yi,jf[3]=ai,jf[4]=Ui,jf[5]=Uo,jf[6]=vi,jf[7]=go,jf[8]=Co,jf[9]=pi,Uh[0]=nn,Uh[1]=st,Uh[2]=Tt,Uh[3]=Kt,Uh[4]=Yr,Uh[5]=io,Uh[6]=Go,af[0]=qi,af[1]=Ge,af[2]=hi,af[3]=Gi,af[4]=Da,af[5]=xa,af[6]=hs,Pe=1}else Pe=0}Pe&&(Pe=function(Bn,xi){for(Bn.M=0;Bn.M<Bn.Va;++Bn.M){var qo,xn=Bn.Jc[Bn.M&Bn.Xb],Rn=Bn.m,_i=Bn;for(qo=0;qo<_i.za;++qo){var ki=Rn,Ci=_i,za=Ci.Ac,ya=Ci.Bc+4*qo,ks=Ci.zc,La=Ci.ya[Ci.aa+qo];if(La.$b=Ci.Qa.Bb?Po(ki,Ci.Pa.jb[0])?2+Po(ki,Ci.Pa.jb[2]):Po(ki,Ci.Pa.jb[1]):0,Ci.kc&&(La.Ad=Po(ki,Ci.Bd)),La.Za=!Po(ki,145)+0,La.Za){var Ps=La.Ob,sc=0;for(Ci=0;4>Ci;++Ci){var Wl,sl=ks[0+Ci];for(Wl=0;4>Wl;++Wl){for(var hc=Zy[Po(ki,(sl=Lv[za[ya+Wl]][sl])[0])];0<hc;)hc=Zy[2*hc+Po(ki,sl[hc])];za[ya+Wl]=sl=-hc}se(Ps,sc,za,ya,4),sc+=4,ks[0+Ci]=sl}}else sl=Po(ki,156)?Po(ki,128)?1:3:Po(ki,163)?2:0,La.Ob[0]=sl,xe(za,ya,sl,4),xe(ks,0,sl,4);La.Dd=Po(ki,142)?Po(ki,114)?Po(ki,183)?1:3:2:0}if(_i.m.Ka)return Fc(Bn,7,"Premature end-of-partition0 encountered.");for(;Bn.ja<Bn.za;++Bn.ja){if(_i=xn,ki=(Rn=Bn).rb[Rn.sb-1],za=Rn.rb[Rn.sb+Rn.ja],qo=Rn.ya[Rn.aa+Rn.ja],ya=Rn.kc?qo.Ad:0)ki.la=za.la=0,qo.Za||(ki.Na=za.Na=0),qo.Hc=0,qo.Gc=0,qo.ia=0;else{var xc,ol;if(ki=za,za=_i,ya=Rn.Pa.Xc,La=Rn.pb[(ks=Rn.ya[Rn.aa+Rn.ja]).$b],sc=Rn.rb[Rn.sb-1],sl=Wl=0,xe(Ci=ks.ad,Ps=0,0,384),ks.Za)var qc=0,tp=ya[3];else{hc=fe(16);var su=ki.Na+sc.Na;if(su=eg(za,ya[1],su,La.Eb,0,hc,0),ki.Na=sc.Na=(0<su)+0,1<su)k(hc,0,Ci,Ps);else{var rp=hc[0]+3>>3;for(hc=0;256>hc;hc+=16)Ci[Ps+hc]=rp}qc=1,tp=ya[0]}var tc=15&ki.la,Bp=15&sc.la;for(hc=0;4>hc;++hc){var Wp=1&Bp;for(rp=ol=0;4>rp;++rp)tc=tc>>1|(Wp=(su=eg(za,tp,su=Wp+(1&tc),La.Sc,qc,Ci,Ps))>qc)<<7,ol=ol<<2|(3<su?3:1<su?2:0!=Ci[Ps+0]),Ps+=16;tc>>=4,Bp=Bp>>1|Wp<<7,Wl=(Wl<<8|ol)>>>0}for(tp=tc,qc=Bp>>4,xc=0;4>xc;xc+=2){for(ol=0,tc=ki.la>>4+xc,Bp=sc.la>>4+xc,hc=0;2>hc;++hc){for(Wp=1&Bp,rp=0;2>rp;++rp)tc=tc>>1|(Wp=0<(su=eg(za,ya[2],su=Wp+(1&tc),La.Qc,0,Ci,Ps)))<<3,ol=ol<<2|(3<su?3:1<su?2:0!=Ci[Ps+0]),Ps+=16;tc>>=2,Bp=Bp>>1|Wp<<5}sl|=ol<<4*xc,tp|=tc<<4<<xc,qc|=(240&Bp)<<xc}ki.la=tp,sc.la=qc,ks.Hc=Wl,ks.Gc=sl,ks.ia=43690&sl?0:La.ia,ya=!(Wl|sl)}if(0<Rn.L&&(Rn.wa[Rn.Y+Rn.ja]=Rn.gd[qo.$b][qo.Za],Rn.wa[Rn.Y+Rn.ja].La|=!ya),_i.Ka)return Fc(Bn,7,"Premature end-of-file encountered.")}if(tf(Bn),Rn=xi,_i=1,qo=(xn=Bn).D,ki=0<xn.L&&xn.M>=xn.zb&&xn.M<=xn.Va,0==xn.Aa)e:{if(qo.M=xn.M,qo.uc=ki,yd(xn,qo),_i=1,qo=(ol=xn.D).Nb,ki=(sl=um[xn.L])*xn.R,ya=xn.sa,ks=xn.ta-ki+(hc=16*qo*xn.R),La=xn.qa,Ci=xn.ra-(za=sl/2*xn.B)+(rp=8*qo*xn.B),Ps=xn.Ha,sc=xn.Ia-za+rp,Bp=0==(tc=ol.M),Wl=tc>=xn.Va-1,2==xn.Aa&&yd(xn,ol),ol.uc)for(Wp=(su=xn).D.M,j(su.D.uc),ol=su.yb;ol<su.Hb;++ol){tp=Wp;var Xu=(rc=(_u=su).D).Nb,rc=rc.wa[rc.Y+(qc=ol)],_p=_u.sa,ed=_u.ta+16*Xu*(xc=_u.R)+16*qc,lf=rc.dd,vu=rc.tc;if(0!=vu)if(j(3<=vu),1==_u.L)0<qc&&sa(_p,ed,xc,vu+4),rc.La&&Fi(_p,ed,xc,vu),0<tp&&Mi(_p,ed,xc,vu+4),rc.La&&Ta(_p,ed,xc,vu);else{var Nf=_u.B,Bm=_u.qa,Dg=_u.ra+8*Xu*Nf+8*qc,Zh=_u.Ha,_u=_u.Ia+8*Xu*Nf+8*qc;Xu=rc.ld,0<qc&&(ft(_p,ed,xc,vu+4,lf,Xu),Rr(Bm,Dg,Zh,_u,Nf,vu+4,lf,Xu)),rc.La&&(Tn(_p,ed,xc,vu,lf,Xu),ni(Bm,Dg,Zh,_u,Nf,vu,lf,Xu)),0<tp&&(ot(_p,ed,xc,vu+4,lf,Xu),jr(Bm,Dg,Zh,_u,Nf,vu+4,lf,Xu)),rc.La&&(_n(_p,ed,xc,vu,lf,Xu),wo(Bm,Dg,Zh,_u,Nf,vu,lf,Xu))}}if(xn.ia&&alert("todo:DitherRow"),null!=Rn.put){if(ol=16*tc,tc=16*(tc+1),Bp?(Rn.y=xn.sa,Rn.O=xn.ta+hc,Rn.f=xn.qa,Rn.N=xn.ra+rp,Rn.ea=xn.Ha,Rn.W=xn.Ia+rp):(ol-=sl,Rn.y=ya,Rn.O=ks,Rn.f=La,Rn.N=Ci,Rn.ea=Ps,Rn.W=sc),Wl||(tc-=sl),tc>Rn.o&&(tc=Rn.o),Rn.F=null,Rn.J=null,null!=xn.Fa&&0<xn.Fa.length&&ol<tc&&(Rn.J=jm(xn,Rn,ol,tc-ol),Rn.F=xn.mb,null==Rn.F&&0==Rn.F.length)){_i=Fc(xn,3,"Could not decode alpha data.");break e}ol<Rn.j&&(sl=Rn.j-ol,ol=Rn.j,j(!(1&sl)),Rn.O+=xn.R*sl,Rn.N+=xn.B*(sl>>1),Rn.W+=xn.B*(sl>>1),null!=Rn.F&&(Rn.J+=Rn.width*sl)),ol<tc&&(Rn.O+=Rn.v,Rn.N+=Rn.v>>1,Rn.W+=Rn.v>>1,null!=Rn.F&&(Rn.J+=Rn.v),Rn.ka=ol-Rn.j,Rn.U=Rn.va-Rn.v,Rn.T=tc-ol,_i=Rn.put(Rn))}qo+1!=xn.Ic||Wl||(se(xn.sa,xn.ta-ki,ya,ks+16*xn.R,ki),se(xn.qa,xn.ra-za,La,Ci+8*xn.B,za),se(xn.Ha,xn.Ia-za,Ps,sc+8*xn.B,za))}if(!_i)return Fc(Bn,6,"Output aborted.")}return 1}(q,de)),null!=de.bc&&de.bc(de),Pe&=1}return Pe?(q.cb=0,Pe):0})(q,Je)||(de=q.a)}}else de=q.a}0==de&&null!=Ut.Oa&&Ut.Oa.fd&&(de=Nm(Ut.ba))}Ut=de}It=0!=Ut?null:11>It?$t.f.RGBA.eb:$t.f.kb.y}else It=null;return It};var Nv=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function tt(Jr,lo){for(var zo="",cr=0;cr<4;cr++)zo+=String.fromCharCode(Jr[lo++]);return zo}function _t(Jr,lo){return(Jr[lo+0]<<0|Jr[lo+1]<<8|Jr[lo+2]<<16)>>>0}function vt(Jr,lo){return(Jr[lo+0]<<0|Jr[lo+1]<<8|Jr[lo+2]<<16|Jr[lo+3]<<24)>>>0}new Ne;var Ht=[0],Qe=[0],Ar=[],pr=new Ne,Sr=Q,Qt=function(Jr,lo){var zo={},cr=0,hr=!1,Xr=0,rn=0;if(zo.frames=[],!
/** @license
             * Copyright (c) 2017 Dominik Homberger
            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
            https://webpjs.appspot.com
            WebPRiffParser dominikhlbg@gmail.com
            */
function(Ir,Gr,on,bn){for(var Xn=0;Xn<4;Xn++)if(Ir[Gr+Xn]!="RIFF".charCodeAt(Xn))return!0;return!1}(Jr,lo)){for(vt(Jr,lo+=4),lo+=8;lo<Jr.length;){var jo=tt(Jr,lo),So=vt(Jr,lo+=4);lo+=4;var Zo=So+(1&So);switch(jo){case"VP8 ":case"VP8L":void 0===zo.frames[cr]&&(zo.frames[cr]={}),(Xo=zo.frames[cr]).src_off=hr?rn:lo-8,Xo.src_size=Xr+So+8,cr++,hr&&(hr=!1,Xr=0,rn=0);break;case"VP8X":(Xo=zo.header={}).feature_flags=Jr[lo];var ro=lo+4;Xo.canvas_width=1+_t(Jr,ro),Xo.canvas_height=1+_t(Jr,ro+=3),ro+=3;break;case"ALPH":hr=!0,Xr=Zo+8,rn=lo-8;break;case"ANIM":(Xo=zo.header).bgcolor=vt(Jr,lo),Xo.loop_count=(ka=Jr)[(zt=ro=lo+4)+0]<<0|ka[zt+1]<<8,ro+=2;break;case"ANMF":var Ho,Xo;(Xo=zo.frames[cr]={}).offset_x=2*_t(Jr,lo),Xo.offset_y=2*_t(Jr,lo+=3),Xo.width=1+_t(Jr,lo+=3),Xo.height=1+_t(Jr,lo+=3),Xo.duration=_t(Jr,lo+=3),lo+=3,Ho=Jr[lo++],Xo.dispose=1&Ho,Xo.blend=Ho>>1&1}"ANMF"!=jo&&(lo+=Zo)}var ka,zt;return zo}}(Sr,0);Qt.response=Sr,Qt.rgbaoutput=!0,Qt.dataurl=!1;var Lr=Qt.header?Qt.header:null,En=Qt.frames?Qt.frames:null;if(Lr){Lr.loop_counter=Lr.loop_count,Ht=[Lr.canvas_height],Qe=[Lr.canvas_width];for(var qn=0;qn<En.length&&0!=En[qn].blend;qn++);}var Fo=En[0],gi=pr.WebPDecodeRGBA(Sr,Fo.src_off,Fo.src_size,Qe,Ht);Fo.rgba=gi,Fo.imgwidth=Qe[0],Fo.imgheight=Ht[0];for(var po=0;po<Qe[0]*Ht[0]*4;po++)Ar[po]=gi[po];return this.width=Qe,this.height=Ht,this.data=Ar,this}(function(Q){var J=function(Ht,Qe,Ar,pr){var Sr=4,Qt=De;switch(pr){case Q.image_compression.FAST:Sr=1,Qt=fe;break;case Q.image_compression.MEDIUM:Sr=6,Qt=Ae;break;case Q.image_compression.SLOW:Sr=9,Qt=Ne}var Lr=pn(Ht=se(Ht,Qe,Ar,Qt),{level:Sr});return Q.__addimage__.arrayBufferToBinaryString(Lr)},se=function(Ht,Qe,Ar,pr){for(var Sr,Qt,Lr,En=Ht.length/Qe,qn=new Uint8Array(Ht.length+En),Fo=_t(),gi=0;gi<En;gi+=1){if(Sr=Ht.subarray(Lr=gi*Qe,Lr+Qe),pr)qn.set(pr(Sr,Ar,Qt),Lr+gi);else{for(var po,Jr=Fo.length,lo=[];po<Jr;po+=1)lo[po]=Fo[po](Sr,Ar,Qt);var zo=vt(lo.concat());qn.set(lo[zo],Lr+gi)}Qt=Sr}return qn},xe=function(Ht){var Qe=Array.apply([],Ht);return Qe.unshift(0),Qe},fe=function(Ht,Qe){var pr=[],Sr=Ht.length;pr[0]=1;for(var Qt=0;Qt<Sr;Qt+=1)pr[Qt+1]=Ht[Qt]-(Ht[Qt-Qe]||0)+256&255;return pr},De=function(Ht,Qe,Ar){var Sr=[],Qt=Ht.length;Sr[0]=2;for(var Lr=0;Lr<Qt;Lr+=1)Sr[Lr+1]=Ht[Lr]-(Ar&&Ar[Lr]||0)+256&255;return Sr},Ae=function(Ht,Qe,Ar){var Qt=[],Lr=Ht.length;Qt[0]=3;for(var En=0;En<Lr;En+=1)Qt[En+1]=Ht[En]+256-((Ht[En-Qe]||0)+(Ar&&Ar[En]||0)>>>1)&255;return Qt},Ne=function(Ht,Qe,Ar){var Lr,En=[],qn=Ht.length;En[0]=4;for(var Fo=0;Fo<qn;Fo+=1)Lr=tt(Ht[Fo-Qe]||0,Ar&&Ar[Fo]||0,Ar&&Ar[Fo-Qe]||0),En[Fo+1]=Ht[Fo]-Lr+256&255;return En},tt=function(Ht,Qe,Ar){if(Ht===Qe&&Qe===Ar)return Ht;var pr=Math.abs(Qe-Ar),Sr=Math.abs(Ht-Ar),Qt=Math.abs(Ht+Qe-Ar-Ar);return pr<=Sr&&pr<=Qt?Ht:Sr<=Qt?Qe:Ar},_t=function(){return[xe,fe,De,Ae,Ne]},vt=function(Ht){var Qe=Ht.map(function(Ar){return Ar.reduce(function(pr,Sr){return pr+Math.abs(Sr)},0)});return Qe.indexOf(Math.min.apply(null,Qe))};Q.processPNG=function(Ht,Qe,Ar,pr){var Sr,Qt,Lr,En,qn,Fo,gi,po,Jr,lo,zo,cr,hr,Xr,rn,jo=this.decode.FLATE_DECODE,So="";if(this.__addimage__.isArrayBuffer(Ht)&&(Ht=new Uint8Array(Ht)),this.__addimage__.isArrayBufferView(Ht)){if(Ht=(Lr=new yg(Ht)).imgData,Qt=Lr.bits,Sr=Lr.colorSpace,qn=Lr.colors,-1!==[4,6].indexOf(Lr.colorType)){if(8===Lr.bits){Jr=(po=32==Lr.pixelBitlength?new Uint32Array(Lr.decodePixels().buffer):16==Lr.pixelBitlength?new Uint16Array(Lr.decodePixels().buffer):new Uint8Array(Lr.decodePixels().buffer)).length,zo=new Uint8Array(Jr*Lr.colors),lo=new Uint8Array(Jr);var Zo,ro=Lr.pixelBitlength-Lr.bits;for(Xr=0,rn=0;Xr<Jr;Xr++){for(hr=po[Xr],Zo=0;Zo<ro;)zo[rn++]=hr>>>Zo&255,Zo+=Lr.bits;lo[Xr]=hr>>>Zo&255}}if(16===Lr.bits){Jr=(po=new Uint32Array(Lr.decodePixels().buffer)).length,zo=new Uint8Array(Jr*(32/Lr.pixelBitlength)*Lr.colors),lo=new Uint8Array(Jr*(32/Lr.pixelBitlength)),cr=Lr.colors>1,Xr=0,rn=0;for(var Ho=0;Xr<Jr;)hr=po[Xr++],zo[rn++]=hr>>>0&255,cr&&(zo[rn++]=hr>>>16&255,hr=po[Xr++],zo[rn++]=hr>>>0&255),lo[Ho++]=hr>>>16&255;Qt=8}pr!==Q.image_compression.NONE?(Ht=J(zo,Lr.width*Lr.colors,Lr.colors,pr),gi=J(lo,Lr.width,1,pr)):(Ht=zo,gi=lo,jo=void 0)}if(3===Lr.colorType&&(Sr=this.color_spaces.INDEXED,Fo=Lr.palette,Lr.transparency.indexed)){var Xo=Lr.transparency.indexed,ka=0;for(Xr=0,Jr=Xo.length;Xr<Jr;++Xr)ka+=Xo[Xr];if((ka/=255)==Jr-1&&-1!==Xo.indexOf(0))En=[Xo.indexOf(0)];else if(ka!==Jr){for(po=Lr.decodePixels(),lo=new Uint8Array(po.length),Xr=0,Jr=po.length;Xr<Jr;Xr++)lo[Xr]=Xo[po[Xr]];gi=J(lo,Lr.width,1)}}var zt=function(Ir){var Gr;switch(Ir){case Q.image_compression.FAST:Gr=11;break;case Q.image_compression.MEDIUM:Gr=13;break;case Q.image_compression.SLOW:Gr=14;break;default:Gr=12}return Gr}(pr);return jo===this.decode.FLATE_DECODE&&(So="/Predictor "+zt+" "),So+="/Colors "+qn+" /BitsPerComponent "+Qt+" /Columns "+Lr.width,(this.__addimage__.isArrayBuffer(Ht)||this.__addimage__.isArrayBufferView(Ht))&&(Ht=this.__addimage__.arrayBufferToBinaryString(Ht)),(gi&&this.__addimage__.isArrayBuffer(gi)||this.__addimage__.isArrayBufferView(gi))&&(gi=this.__addimage__.arrayBufferToBinaryString(gi)),{alias:Ar,data:Ht,index:Qe,filter:jo,decodeParameters:So,transparency:En,palette:Fo,sMask:gi,predictor:zt,width:Lr.width,height:Lr.height,bitsPerComponent:Qt,colorSpace:Sr}}}})(Xi.API),function(Q){Q.processGIF89A=function(j,J,se,xe){var fe=new Ul(j),De=fe.width,Ae=fe.height,Ne=[];fe.decodeAndBlitFrameRGBA(0,Ne);var tt={data:Ne,width:De,height:Ae},_t=new Qf(100).encode(tt,100);return Q.processJPEG.call(this,_t,J,se,xe)},Q.processGIF87A=Q.processGIF89A}(Xi.API),Cu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Q=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(Q);for(var j=0;j<Q;j++){var J=this.datav.getUint8(this.pos++,!0),se=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),fe=this.datav.getUint8(this.pos++,!0);this.palette[j]={red:xe,green:se,blue:J,quad:fe}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cu.prototype.parseBGR=function(){this.pos=this.offset;try{var Q="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[Q]()}catch(J){Js.log("bit decode error:"+J)}},Cu.prototype.bit1=function(){var Q,j=Math.ceil(this.width/8),J=j%4;for(Q=this.height-1;Q>=0;Q--){for(var se=this.bottom_up?Q:this.height-1-Q,xe=0;xe<j;xe++)for(var fe=this.datav.getUint8(this.pos++,!0),De=se*this.width*4+8*xe*4,Ae=0;Ae<8&&8*xe+Ae<this.width;Ae++){var Ne=this.palette[fe>>7-Ae&1];this.data[De+4*Ae]=Ne.blue,this.data[De+4*Ae+1]=Ne.green,this.data[De+4*Ae+2]=Ne.red,this.data[De+4*Ae+3]=255}0!==J&&(this.pos+=4-J)}},Cu.prototype.bit4=function(){for(var Q=Math.ceil(this.width/2),j=Q%4,J=this.height-1;J>=0;J--){for(var se=this.bottom_up?J:this.height-1-J,xe=0;xe<Q;xe++){var fe=this.datav.getUint8(this.pos++,!0),De=se*this.width*4+2*xe*4,Ne=15&fe,tt=this.palette[fe>>4];if(this.data[De]=tt.blue,this.data[De+1]=tt.green,this.data[De+2]=tt.red,this.data[De+3]=255,2*xe+1>=this.width)break;this.data[De+4]=(tt=this.palette[Ne]).blue,this.data[De+4+1]=tt.green,this.data[De+4+2]=tt.red,this.data[De+4+3]=255}0!==j&&(this.pos+=4-j)}},Cu.prototype.bit8=function(){for(var Q=this.width%4,j=this.height-1;j>=0;j--){for(var J=this.bottom_up?j:this.height-1-j,se=0;se<this.width;se++){var xe=this.datav.getUint8(this.pos++,!0),fe=J*this.width*4+4*se;if(xe<this.palette.length){var De=this.palette[xe];this.data[fe]=De.red,this.data[fe+1]=De.green,this.data[fe+2]=De.blue,this.data[fe+3]=255}else this.data[fe]=255,this.data[fe+1]=255,this.data[fe+2]=255,this.data[fe+3]=255}0!==Q&&(this.pos+=4-Q)}},Cu.prototype.bit15=function(){for(var Q=this.width%3,j=parseInt("11111",2),J=this.height-1;J>=0;J--){for(var se=this.bottom_up?J:this.height-1-J,xe=0;xe<this.width;xe++){var fe=this.datav.getUint16(this.pos,!0);this.pos+=2;var De=(fe&j)/j*255|0,Ae=(fe>>5&j)/j*255|0,tt=fe>>15?255:0,_t=se*this.width*4+4*xe;this.data[_t]=(fe>>10&j)/j*255|0,this.data[_t+1]=Ae,this.data[_t+2]=De,this.data[_t+3]=tt}this.pos+=Q}},Cu.prototype.bit16=function(){for(var Q=this.width%3,j=parseInt("11111",2),J=parseInt("111111",2),se=this.height-1;se>=0;se--){for(var xe=this.bottom_up?se:this.height-1-se,fe=0;fe<this.width;fe++){var De=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ae=(De&j)/j*255|0,Ne=(De>>5&J)/J*255|0,_t=xe*this.width*4+4*fe;this.data[_t]=(De>>11)/j*255|0,this.data[_t+1]=Ne,this.data[_t+2]=Ae,this.data[_t+3]=255}this.pos+=Q}},Cu.prototype.bit24=function(){for(var Q=this.height-1;Q>=0;Q--){for(var j=this.bottom_up?Q:this.height-1-Q,J=0;J<this.width;J++){var se=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),fe=this.datav.getUint8(this.pos++,!0),De=j*this.width*4+4*J;this.data[De]=fe,this.data[De+1]=xe,this.data[De+2]=se,this.data[De+3]=255}this.pos+=this.width%4}},Cu.prototype.bit32=function(){for(var Q=this.height-1;Q>=0;Q--)for(var j=this.bottom_up?Q:this.height-1-Q,J=0;J<this.width;J++){var se=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),fe=this.datav.getUint8(this.pos++,!0),De=this.datav.getUint8(this.pos++,!0),Ae=j*this.width*4+4*J;this.data[Ae]=fe,this.data[Ae+1]=xe,this.data[Ae+2]=se,this.data[Ae+3]=De}},Cu.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2018 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){Q.processBMP=function(j,J,se,xe){var fe=new Cu(j,!1),De=fe.width,Ae=fe.height,Ne={data:fe.getData(),width:De,height:Ae},tt=new Qf(100).encode(Ne,100);return Q.processJPEG.call(this,tt,J,se,xe)}}(Xi.API),Tm.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2019 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){Q.processWEBP=function(j,J,se,xe){var fe=new Tm(j),De=fe.width,Ae=fe.height,Ne={data:fe.getData(),width:De,height:Ae},tt=new Qf(100).encode(Ne,100);return Q.processJPEG.call(this,tt,J,se,xe)}}(Xi.API),Xi.API.processRGBA=function(Q,j,J){for(var se=Q.data,xe=se.length,fe=new Uint8Array(xe/4*3),De=new Uint8Array(xe/4),Ae=0,Ne=0,tt=0;tt<xe;tt+=4){var vt=se[tt+1],Ht=se[tt+2],Qe=se[tt+3];fe[Ae++]=se[tt],fe[Ae++]=vt,fe[Ae++]=Ht,De[Ne++]=Qe}var Ar=this.__addimage__.arrayBufferToBinaryString(fe);return{alpha:this.__addimage__.arrayBufferToBinaryString(De),data:Ar,index:j,alias:J,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Q.width,height:Q.height}},Xi.API.setLanguage=function(Q){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Q]&&(this.internal.languageSettings.languageCode=Q,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Au=(wl=Xi.API).getCharWidthsArray=function(Q,j){var J,se,xe=(j=j||{}).font||this.internal.getFont(),fe=j.fontSize||this.internal.getFontSize(),De=j.charSpace||this.internal.getCharSpace(),Ae=j.widths?j.widths:xe.metadata.Unicode.widths,Ne=Ae.fof?Ae.fof:1,tt=j.kerning?j.kerning:xe.metadata.Unicode.kerning,_t=tt.fof?tt.fof:1,vt=!1!==j.doKerning,Ht=0,Qe=Q.length,Ar=0,pr=Ae[0]||Ne,Sr=[];for(J=0;J<Qe;J++)se=Q.charCodeAt(J),"function"==typeof xe.metadata.widthOfString?Sr.push((xe.metadata.widthOfGlyph(xe.metadata.characterToGlyph(se))+De*(1e3/fe)||0)/1e3):(Ht=vt&&"object"===O(tt[se])&&!isNaN(parseInt(tt[se][Ar],10))?tt[se][Ar]/_t:0,Sr.push((Ae[se]||pr)/Ne+Ht)),Ar=se;return Sr},Df=wl.getStringUnitWidth=function(Q,j){var J=(j=j||{}).fontSize||this.internal.getFontSize(),se=j.font||this.internal.getFont(),xe=j.charSpace||this.internal.getCharSpace();return wl.processArabic&&(Q=wl.processArabic(Q)),"function"==typeof se.metadata.widthOfString?se.metadata.widthOfString(Q,J,xe)/J:Au.apply(this,arguments).reduce(function(fe,De){return fe+De},0)},Yf=function(Q,j,J,se){for(var xe=[],fe=0,De=Q.length,Ae=0;fe!==De&&Ae+j[fe]<J;)Ae+=j[fe],fe++;xe.push(Q.slice(0,fe));var Ne=fe;for(Ae=0;fe!==De;)Ae+j[fe]>se&&(xe.push(Q.slice(Ne,fe)),Ae=0,Ne=fe),Ae+=j[fe],fe++;return Ne!==fe&&xe.push(Q.slice(Ne,fe)),xe},Tf=function(Q,j,J){J||(J={});var se,xe,fe,De,Ae,Ne,_t=[],vt=[_t],Ht=J.textIndent||0,Qe=0,Ar=0,pr=Q.split(" "),Sr=Au.apply(this,[" ",J])[0];if(Ne=-1===J.lineIndent?pr[0].length+2:J.lineIndent||0){var Qt=Array(Ne).join(" "),Lr=[];pr.map(function(qn){(qn=qn.split(/\s*\n/)).length>1?Lr=Lr.concat(qn.map(function(Fo,gi){return(gi&&Fo.length?"\n":"")+Fo})):Lr.push(qn[0])}),pr=Lr,Ne=Df.apply(this,[Qt,J])}for(fe=0,De=pr.length;fe<De;fe++){var En=0;if(se=pr[fe],Ne&&"\n"==se[0]&&(se=se.substr(1),En=1),Ht+Qe+(Ar=(xe=Au.apply(this,[se,J])).reduce(function(qn,Fo){return qn+Fo},0))>j||En){if(Ar>j){for(Ae=Yf.apply(this,[se,xe,j-(Ht+Qe),j]),_t.push(Ae.shift()),_t=[Ae.pop()];Ae.length;)vt.push([Ae.shift()]);Ar=xe.slice(se.length-(_t[0]?_t[0].length:0)).reduce(function(qn,Fo){return qn+Fo},0)}else _t=[se];vt.push(_t),Ht=Ar+Ne,Qe=Sr}else _t.push(se),Ht+=Qe+Ar,Qe=Sr}return vt.map(Ne?function(qn,Fo){return(Fo?Qt:"")+qn.join(" ")}:function(qn){return qn.join(" ")})},wl.splitTextToSize=function(Q,j,J){var se,xe=(J=J||{}).fontSize||this.internal.getFontSize(),fe=function(_t){if(_t.widths&&_t.kerning)return{widths:_t.widths,kerning:_t.kerning};var vt=this.internal.getFont(_t.fontName,_t.fontStyle);return vt.metadata.Unicode?{widths:vt.metadata.Unicode.widths||{0:1},kerning:vt.metadata.Unicode.kerning||{}}:{font:vt.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,J);se=Array.isArray(Q)?Q:String(Q).split(/\r?\n/);var De=1*this.internal.scaleFactor*j/xe;fe.textIndent=J.textIndent?1*J.textIndent*this.internal.scaleFactor/xe:0,fe.lineIndent=J.lineIndent;var Ae,Ne,tt=[];for(Ae=0,Ne=se.length;Ae<Ne;Ae++)tt=tt.concat(Tf.apply(this,[se[Ae],De,fe]));return tt},function(Q){Q.__fontmetrics__=Q.__fontmetrics__||{};for(var j="klmnopqrstuvwxyz",J={},se={},xe=0;xe<16;xe++)J[j[xe]]="0123456789abcdef"[xe],se["0123456789abcdef"[xe]]=j[xe];var fe=function(vt){return"0x"+parseInt(vt,10).toString(16)},De=Q.__fontmetrics__.compress=function(vt){var Ht,Qe,Ar,pr,Sr=["{"];for(var Qt in vt){if(Ht=vt[Qt],isNaN(parseInt(Qt,10))?Qe="'"+Qt+"'":(Qt=parseInt(Qt,10),Qe=(Qe=fe(Qt).slice(2)).slice(0,-1)+se[Qe.slice(-1)]),"number"==typeof Ht)Ht<0?(Ar=fe(Ht).slice(3),pr="-"):(Ar=fe(Ht).slice(2),pr=""),Ar=pr+Ar.slice(0,-1)+se[Ar.slice(-1)];else{if("object"!==O(Ht))throw new Error("Don't know what to do with value type "+O(Ht)+".");Ar=De(Ht)}Sr.push(Qe+Ar)}return Sr.push("}"),Sr.join("")},Ae=Q.__fontmetrics__.uncompress=function(vt){if("string"!=typeof vt)throw new Error("Invalid argument passed to uncompress.");for(var Ht,Qe,Ar,pr,Sr={},Qt=1,Lr=Sr,En=[],qn="",Fo="",gi=vt.length-1,po=1;po<gi;po+=1)"'"==(pr=vt[po])?Ht?(Ar=Ht.join(""),Ht=void 0):Ht=[]:Ht?Ht.push(pr):"{"==pr?(En.push([Lr,Ar]),Lr={},Ar=void 0):"}"==pr?((Qe=En.pop())[0][Qe[1]]=Lr,Ar=void 0,Lr=Qe[0]):"-"==pr?Qt=-1:void 0===Ar?J.hasOwnProperty(pr)?(qn+=J[pr],Ar=parseInt(qn,16)*Qt,Qt=1,qn=""):qn+=pr:J.hasOwnProperty(pr)?(Fo+=J[pr],Lr[Ar]=parseInt(Fo,16)*Qt,Qt=1,Ar=void 0,Fo=""):Fo+=pr;return Sr},Ne={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Ae("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},tt={Unicode:{Courier:Ne,"Courier-Bold":Ne,"Courier-BoldOblique":Ne,"Courier-Oblique":Ne,Helvetica:Ne,"Helvetica-Bold":Ne,"Helvetica-BoldOblique":Ne,"Helvetica-Oblique":Ne,"Times-Roman":Ne,"Times-Bold":Ne,"Times-BoldItalic":Ne,"Times-Italic":Ne}},_t={Unicode:{"Courier-Oblique":Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Ae("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Ae("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Ae("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Ae("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Ae("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Ae("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Ae("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Ae("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Ae("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Ae("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Ae("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Q.events.push(["addFont",function(vt){var Ht=vt.font,Qe=_t.Unicode[Ht.postScriptName];Qe&&(Ht.metadata.Unicode={},Ht.metadata.Unicode.widths=Qe.widths,Ht.metadata.Unicode.kerning=Qe.kerning);var Ar=tt.Unicode[Ht.postScriptName];Ar&&(Ht.metadata.Unicode.encoding=Ar,Ht.encoding=Ar.codePages[0])}])}(Xi.API),
/**
       * @license
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j=function(J){for(var se=J.length,xe=new Uint8Array(se),fe=0;fe<se;fe++)xe[fe]=J.charCodeAt(fe);return xe};Q.API.events.push(["addFont",function(J){var De,Ae,se=void 0,xe=J.font,fe=J.instance;if(!xe.isStandardFont){if(void 0===fe)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+xe.postScriptName+"').");if("string"!=typeof(se=!1===fe.existsFileInVFS(xe.postScriptName)?fe.loadFile(xe.postScriptName):fe.getFileFromVFS(xe.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+xe.postScriptName+"').");De=xe,Ae=/^\x00\x01\x00\x00/.test(Ae=se)?j(Ae):j(Qc(Ae)),De.metadata=Q.API.TTFFont.open(Ae),De.metadata.Unicode=De.metadata.Unicode||{encoding:{},kerning:{},widths:[]},De.metadata.glyIdsUsed=[0]}}])}(Xi),Xi.API.addSvgAsImage=function(J,se,xe,fe,De,Ae,Ne,tt){if(isNaN(se)||isNaN(xe))throw Js.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(fe)||isNaN(De))throw Js.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var _t=document.createElement("canvas");_t.width=fe,_t.height=De;var vt=_t.getContext("2d");vt.fillStyle="#fff",vt.fillRect(0,0,_t.width,_t.height);var Ht={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Qe=this;return function j(){return(Ea.canvg?Promise.resolve(Ea.canvg):re.e(8178).then(re.bind(re,78178))).catch(function(J){return Promise.reject(new Error("Could not load canvg: "+J))}).then(function(J){return J.default?J.default:J})}().then(function(Ar){return Ar.fromString(vt,J,Ht)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Ar){return Ar.render(Ht)}).then(function(){Qe.addImage(_t.toDataURL("image/jpeg",1),se,xe,fe,De,Ne,tt)})},Xi.API.putTotalPages=function(Q){var j,J=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(j=new RegExp(Q,"g"),J=this.internal.getNumberOfPages()):(j=new RegExp(this.pdfEscape16(Q,this.internal.getFont()),"g"),J=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var se=1;se<=this.internal.getNumberOfPages();se++)for(var xe=0;xe<this.internal.pages[se].length;xe++)this.internal.pages[se][xe]=this.internal.pages[se][xe].replace(j,J);return this},Xi.API.viewerPreferences=function(Q,j){var J;Q=Q||{},j=j||!1;var se,xe,fe,De={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Ae=Object.keys(De),Ne=[],tt=0,_t=0,vt=0;function Ht(Ar,pr){var Sr,Qt=!1;for(Sr=0;Sr<Ar.length;Sr+=1)Ar[Sr]===pr&&(Qt=!0);return Qt}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(De)),this.internal.viewerpreferences.isSubscribed=!1),J=this.internal.viewerpreferences.configuration,"reset"===Q||!0===j){var Qe=Ae.length;for(vt=0;vt<Qe;vt+=1)J[Ae[vt]].value=J[Ae[vt]].defaultValue,J[Ae[vt]].explicitSet=!1}if("object"===O(Q))for(xe in Q)if(fe=Q[xe],Ht(Ae,xe)&&void 0!==fe){if("boolean"===J[xe].type&&"boolean"==typeof fe)J[xe].value=fe;else if("name"===J[xe].type&&Ht(J[xe].valueSet,fe))J[xe].value=fe;else if("integer"===J[xe].type&&Number.isInteger(fe))J[xe].value=fe;else if("array"===J[xe].type){for(tt=0;tt<fe.length;tt+=1)if(se=!0,1===fe[tt].length&&"number"==typeof fe[tt][0])Ne.push(String(fe[tt]-1));else if(fe[tt].length>1){for(_t=0;_t<fe[tt].length;_t+=1)"number"!=typeof fe[tt][_t]&&(se=!1);!0===se&&Ne.push([fe[tt][0]-1,fe[tt][1]-1].join(" "))}J[xe].value="["+Ne.join(" ")+"]"}else J[xe].value=J[xe].defaultValue;J[xe].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var Ar,pr=[];for(Ar in J)!0===J[Ar].explicitSet&&pr.push("name"===J[Ar].type?"/"+Ar+" /"+J[Ar].value:"/"+Ar+" "+J[Ar].value);0!==pr.length&&this.internal.write("/ViewerPreferences\n<<\n"+pr.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=J,this},
/** ====================================================================
       * @license
       * jsPDF XMP metadata plugin
       * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
       *
       * Permission is hereby granted, free of charge, to any person obtaining
       * a copy of this software and associated documentation files (the
       * "Software"), to deal in the Software without restriction, including
       * without limitation the rights to use, copy, modify, merge, publish,
       * distribute, sublicense, and/or sell copies of the Software, and to
       * permit persons to whom the Software is furnished to do so, subject to
       * the following conditions:
       *
       * The above copyright notice and this permission notice shall be
       * included in all copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
       * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
       * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
       * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
       * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
       * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
       * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       * ====================================================================
       */
function(Q){var j=function(){var se='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',xe=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),fe=unescape(encodeURIComponent(se)),De=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Ae=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ne=unescape(encodeURIComponent("</x:xmpmeta>")),tt=fe.length+De.length+Ae.length+xe.length+Ne.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+tt+" >>"),this.internal.write("stream"),this.internal.write(xe+fe+De+Ae+Ne),this.internal.write("endstream"),this.internal.write("endobj")},J=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Q.addMetadata=function(se,xe){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:se,namespaceuri:xe||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",J),this.internal.events.subscribe("postPutResources",j)),this}}(Xi.API),function(Q){var j=Q.API,J=j.pdfEscape16=function(fe,De){for(var Ae,Ne=De.metadata.Unicode.widths,tt=["","0","00","000","0000"],_t=[""],vt=0,Ht=fe.length;vt<Ht;++vt){if(Ae=De.metadata.characterToGlyph(fe.charCodeAt(vt)),De.metadata.glyIdsUsed.push(Ae),De.metadata.toUnicode[Ae]=fe.charCodeAt(vt),-1==Ne.indexOf(Ae)&&(Ne.push(Ae),Ne.push([parseInt(De.metadata.widthOfGlyph(Ae),10)])),"0"==Ae)return _t.join("");Ae=Ae.toString(16),_t.push(tt[4-Ae.length],Ae)}return _t.join("")},se=function(fe){var De,Ae,Ne,tt,_t,vt,Ht;for(_t="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",Ne=[],vt=0,Ht=(Ae=Object.keys(fe).sort(function(Qe,Ar){return Qe-Ar})).length;vt<Ht;vt++)De=Ae[vt],Ne.length>=100&&(_t+="\n"+Ne.length+" beginbfchar\n"+Ne.join("\n")+"\nendbfchar",Ne=[]),null!=fe[De]&&"function"==typeof fe[De].toString&&(tt=("0000"+fe[De].toString(16)).slice(-4),De=("0000"+(+De).toString(16)).slice(-4),Ne.push("<"+De+"><"+tt+">"));return Ne.length&&(_t+="\n"+Ne.length+" beginbfchar\n"+Ne.join("\n")+"\nendbfchar\n"),_t+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};j.events.push(["putFont",function(fe){!function(De){var Ae=De.font,Ne=De.out,tt=De.newObject,_t=De.putStream;if(Ae.metadata instanceof Q.API.TTFFont&&"Identity-H"===Ae.encoding){for(var vt=Ae.metadata.Unicode.widths,Ht=Ae.metadata.subset.encode(Ae.metadata.glyIdsUsed,1),Qe="",Ar=0;Ar<Ht.length;Ar++)Qe+=String.fromCharCode(Ht[Ar]);var pr=tt();_t({data:Qe,addLength1:!0,objectId:pr}),Ne("endobj");var Sr=tt();_t({data:se(Ae.metadata.toUnicode),addLength1:!0,objectId:Sr}),Ne("endobj");var Qt=tt();Ne("<<"),Ne("/Type /FontDescriptor"),Ne("/FontName /"+ko(Ae.fontName)),Ne("/FontFile2 "+pr+" 0 R"),Ne("/FontBBox "+Q.API.PDFObject.convert(Ae.metadata.bbox)),Ne("/Flags "+Ae.metadata.flags),Ne("/StemV "+Ae.metadata.stemV),Ne("/ItalicAngle "+Ae.metadata.italicAngle),Ne("/Ascent "+Ae.metadata.ascender),Ne("/Descent "+Ae.metadata.decender),Ne("/CapHeight "+Ae.metadata.capHeight),Ne(">>"),Ne("endobj");var Lr=tt();Ne("<<"),Ne("/Type /Font"),Ne("/BaseFont /"+ko(Ae.fontName)),Ne("/FontDescriptor "+Qt+" 0 R"),Ne("/W "+Q.API.PDFObject.convert(vt)),Ne("/CIDToGIDMap /Identity"),Ne("/DW 1000"),Ne("/Subtype /CIDFontType2"),Ne("/CIDSystemInfo"),Ne("<<"),Ne("/Supplement 0"),Ne("/Registry (Adobe)"),Ne("/Ordering ("+Ae.encoding+")"),Ne(">>"),Ne(">>"),Ne("endobj"),Ae.objectNumber=tt(),Ne("<<"),Ne("/Type /Font"),Ne("/Subtype /Type0"),Ne("/ToUnicode "+Sr+" 0 R"),Ne("/BaseFont /"+ko(Ae.fontName)),Ne("/Encoding /"+Ae.encoding),Ne("/DescendantFonts ["+Lr+" 0 R]"),Ne(">>"),Ne("endobj"),Ae.isAlreadyPutted=!0}}(fe)}]),j.events.push(["putFont",function(fe){!function(De){var Ae=De.font,Ne=De.out,tt=De.newObject,_t=De.putStream;if(Ae.metadata instanceof Q.API.TTFFont&&"WinAnsiEncoding"===Ae.encoding){for(var vt=Ae.metadata.rawData,Ht="",Qe=0;Qe<vt.length;Qe++)Ht+=String.fromCharCode(vt[Qe]);var Ar=tt();_t({data:Ht,addLength1:!0,objectId:Ar}),Ne("endobj");var pr=tt();_t({data:se(Ae.metadata.toUnicode),addLength1:!0,objectId:pr}),Ne("endobj");var Sr=tt();Ne("<<"),Ne("/Descent "+Ae.metadata.decender),Ne("/CapHeight "+Ae.metadata.capHeight),Ne("/StemV "+Ae.metadata.stemV),Ne("/Type /FontDescriptor"),Ne("/FontFile2 "+Ar+" 0 R"),Ne("/Flags 96"),Ne("/FontBBox "+Q.API.PDFObject.convert(Ae.metadata.bbox)),Ne("/FontName /"+ko(Ae.fontName)),Ne("/ItalicAngle "+Ae.metadata.italicAngle),Ne("/Ascent "+Ae.metadata.ascender),Ne(">>"),Ne("endobj"),Ae.objectNumber=tt();for(var Qt=0;Qt<Ae.metadata.hmtx.widths.length;Qt++)Ae.metadata.hmtx.widths[Qt]=parseInt(Ae.metadata.hmtx.widths[Qt]*(1e3/Ae.metadata.head.unitsPerEm));Ne("<</Subtype/TrueType/Type/Font/ToUnicode "+pr+" 0 R/BaseFont/"+ko(Ae.fontName)+"/FontDescriptor "+Sr+" 0 R/Encoding/"+Ae.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Q.API.PDFObject.convert(Ae.metadata.hmtx.widths)+">>"),Ne("endobj"),Ae.isAlreadyPutted=!0}}(fe)}]);var xe=function(fe){var De,Ae=fe.text||"",Ne=fe.x,tt=fe.y,_t=fe.options||{},vt=fe.mutex||{},Ht=vt.pdfEscape,Qe=vt.activeFontKey,Ar=vt.fonts,pr=Qe,Sr="",Qt=0,Lr="",En=Ar[pr].encoding;if("Identity-H"!==Ar[pr].encoding)return{text:Ae,x:Ne,y:tt,options:_t,mutex:vt};for(Lr=Ae,pr=Qe,Array.isArray(Ae)&&(Lr=Ae[0]),Qt=0;Qt<Lr.length;Qt+=1)Ar[pr].metadata.hasOwnProperty("cmap")&&(De=Ar[pr].metadata.cmap.unicode.codeMap[Lr[Qt].charCodeAt(0)]),De||Lr[Qt].charCodeAt(0)<256&&Ar[pr].metadata.hasOwnProperty("Unicode")?Sr+=Lr[Qt]:Sr+="";var qn="";return parseInt(pr.slice(1))<14||"WinAnsiEncoding"===En?qn=Ht(Sr,pr).split("").map(function(Fo){return Fo.charCodeAt(0).toString(16)}).join(""):"Identity-H"===En&&(qn=J(Sr,Ar[pr])),vt.isHex=!0,{text:qn,x:Ne,y:tt,options:_t,mutex:vt}};j.events.push(["postProcessText",function(fe){var De=fe.text||"",Ae=[],Ne={text:De,x:fe.x,y:fe.y,options:fe.options,mutex:fe.mutex};if(Array.isArray(De)){var tt=0;for(tt=0;tt<De.length;tt+=1)Array.isArray(De[tt])&&3===De[tt].length?Ae.push([xe(Object.assign({},Ne,{text:De[tt][0]})).text,De[tt][1],De[tt][2]]):Ae.push(xe(Object.assign({},Ne,{text:De[tt]})).text);fe.text=Ae}else fe.text=xe(Object.assign({},Ne,{text:De})).text}])}(Xi),
/**
       * @license
       * jsPDF virtual FileSystem functionality
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(Q){var j=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};Q.existsFileInVFS=function(J){return j.call(this),void 0!==this.internal.vFS[J]},Q.addFileToVFS=function(J,se){return j.call(this),this.internal.vFS[J]=se,this},Q.getFileFromVFS=function(J){return j.call(this),void 0!==this.internal.vFS[J]?this.internal.vFS[J]:null}}(Xi.API),
/**
       * @license
       * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
       * MIT License
       */
function(Q){Q.__bidiEngine__=Q.prototype.__bidiEngine__=function(se){var xe,fe,De,Ae,Ne,tt,_t,vt=j,Ht=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Qe=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Ar={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},pr={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Sr=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],Qt=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Lr=!1,En=0;this.__bidiEngine__={};var qn=function(cr){var hr=cr.charCodeAt(),Xr=hr>>8,rn=pr[Xr];return void 0!==rn?vt[256*rn+(255&hr)]:252===Xr||253===Xr?"AL":Qt.test(Xr)?"L":8===Xr?"R":"N"},Fo=function(cr){for(var hr,Xr=0;Xr<cr.length;Xr++){if("L"===(hr=qn(cr.charAt(Xr))))return!1;if("R"===hr)return!0}return!1},gi=function(cr,hr,Xr,rn){var jo,So,Zo,ro,Ho=hr[rn];switch(Ho){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Lr=!1;break;case"N":case"AN":break;case"EN":Lr&&(Ho="AN");break;case"AL":Lr=!0,Ho="R";break;case"WS":case"BN":Ho="N";break;case"CS":rn<1||rn+1>=hr.length||"EN"!==(jo=Xr[rn-1])&&"AN"!==jo||"EN"!==(So=hr[rn+1])&&"AN"!==So?Ho="N":Lr&&(So="AN"),Ho=So===jo?So:"N";break;case"ES":Ho="EN"===(jo=rn>0?Xr[rn-1]:"B")&&rn+1<hr.length&&"EN"===hr[rn+1]?"EN":"N";break;case"ET":if(rn>0&&"EN"===Xr[rn-1]){Ho="EN";break}if(Lr){Ho="N";break}for(Zo=rn+1,ro=hr.length;Zo<ro&&"ET"===hr[Zo];)Zo++;Ho=Zo<ro&&"EN"===hr[Zo]?"EN":"N";break;case"NSM":if(De&&!Ae){for(ro=hr.length,Zo=rn+1;Zo<ro&&"NSM"===hr[Zo];)Zo++;if(Zo<ro){var Xo=cr[rn];if(jo=hr[Zo],(Xo>=1425&&Xo<=2303||64286===Xo)&&("R"===jo||"AL"===jo)){Ho="R";break}}}Ho=rn<1||"B"===(jo=hr[rn-1])?"N":Xr[rn-1];break;case"B":Lr=!1,xe=!0,Ho=En;break;case"S":fe=!0,Ho="N"}return Ho},po=function(cr,hr,Xr){var rn=cr.split("");return Xr&&Jr(rn,Xr,{hiLevel:En}),rn.reverse(),hr&&hr.reverse(),rn.join("")},Jr=function(cr,hr,Xr){var rn,jo,So,Zo,ro,Ho=-1,Xo=cr.length,ka=0,zt=[],Ir=En?Qe:Ht,Gr=[];for(Lr=!1,xe=!1,fe=!1,jo=0;jo<Xo;jo++)Gr[jo]=qn(cr[jo]);for(So=0;So<Xo;So++){if(ro=ka,zt[So]=gi(cr,Gr,zt,So),rn=240&(ka=Ir[ro][Ar[zt[So]]]),hr[So]=Zo=Ir[ka&=15][5],rn>0)if(16===rn){for(jo=Ho;jo<So;jo++)hr[jo]=1;Ho=-1}else Ho=-1;if(Ir[ka][6])-1===Ho&&(Ho=So);else if(Ho>-1){for(jo=Ho;jo<So;jo++)hr[jo]=Zo;Ho=-1}"B"===Gr[So]&&(hr[So]=0),Xr.hiLevel|=Zo}fe&&function(on,bn,Xn){for(var so=0;so<Xn;so++)if("S"===on[so]){bn[so]=En;for(var Po=so-1;Po>=0&&"WS"===on[Po];Po--)bn[Po]=En}}(Gr,hr,Xo)},lo=function(cr,hr,Xr,rn,jo){if(!(jo.hiLevel<cr)){if(1===cr&&1===En&&!xe)return hr.reverse(),void(Xr&&Xr.reverse());for(var So,Zo,ro,Ho,Xo=hr.length,ka=0;ka<Xo;){if(rn[ka]>=cr){for(ro=ka+1;ro<Xo&&rn[ro]>=cr;)ro++;for(Ho=ka,Zo=ro-1;Ho<Zo;Ho++,Zo--)So=hr[Ho],hr[Ho]=hr[Zo],hr[Zo]=So,Xr&&(So=Xr[Ho],Xr[Ho]=Xr[Zo],Xr[Zo]=So);ka=ro}ka++}}},zo=function(cr,hr,Xr){var rn=cr.split(""),jo={hiLevel:En};return Xr||(Xr=[]),Jr(rn,Xr,jo),function(So,Zo,ro){if(0!==ro.hiLevel&&_t)for(var Ho,Xo=0;Xo<So.length;Xo++)1===Zo[Xo]&&(Ho=Sr.indexOf(So[Xo]))>=0&&(So[Xo]=Sr[Ho+1])}(rn,Xr,jo),lo(2,rn,hr,Xr,jo),lo(1,rn,hr,Xr,jo),rn.join("")};return this.__bidiEngine__.doBidiReorder=function(cr,hr,Xr){if(function(jo,So){if(So)for(var Zo=0;Zo<jo.length;Zo++)So[Zo]=Zo;void 0===Ae&&(Ae=Fo(jo)),void 0===tt&&(tt=Fo(jo))}(cr,hr),De||!Ne||tt)if(De&&Ne&&Ae^tt)En=Ae?1:0,cr=po(cr,hr,Xr);else if(!De&&Ne&&tt)En=Ae?1:0,cr=zo(cr,hr,Xr),cr=po(cr,hr);else if(!De||Ae||Ne||tt){if(De&&!Ne&&Ae^tt)cr=po(cr,hr),Ae?(En=0,cr=zo(cr,hr,Xr)):(En=1,cr=zo(cr,hr,Xr),cr=po(cr,hr));else if(De&&Ae&&!Ne&&tt)En=1,cr=zo(cr,hr,Xr),cr=po(cr,hr);else if(!De&&!Ne&&Ae^tt){var rn=_t;Ae?(En=1,cr=zo(cr,hr,Xr),En=0,_t=!1,cr=zo(cr,hr,Xr),_t=rn):(En=0,cr=zo(cr,hr,Xr),cr=po(cr,hr),En=1,_t=!1,cr=zo(cr,hr,Xr),_t=rn,cr=po(cr,hr))}}else En=0,cr=zo(cr,hr,Xr);else En=Ae?1:0,cr=zo(cr,hr,Xr);return cr},this.__bidiEngine__.setOptions=function(cr){cr&&(De=cr.isInputVisual,Ne=cr.isOutputVisual,Ae=cr.isInputRtl,tt=cr.isOutputRtl,_t=cr.isSymmetricSwapping)},this.__bidiEngine__.setOptions(se),this.__bidiEngine__};var j=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],J=new Q.__bidiEngine__({isInputVisual:!0});Q.API.events.push(["postProcessText",function(se){var xe=se.text,fe=se.options||{},De=[];if(fe.isInputVisual="boolean"!=typeof fe.isInputVisual||fe.isInputVisual,J.setOptions(fe),"[object Array]"===Object.prototype.toString.call(xe)){var Ae=0;for(De=[],Ae=0;Ae<xe.length;Ae+=1)"[object Array]"===Object.prototype.toString.call(xe[Ae])?De.push([J.doBidiReorder(xe[Ae][0]),xe[Ae][1],xe[Ae][2]]):De.push([J.doBidiReorder(xe[Ae])]);se.text=De}else se.text=J.doBidiReorder(xe);J.setOptions({isInputVisual:!0})}])}(Xi),Xi.API.TTFFont=function(){function Q(j){var J;if(this.rawData=j,J=this.contents=new Qp(j),this.contents.pos=4,"ttcf"===J.readString(4))throw new Error("TTCF not supported.");J.pos=0,this.parse(),this.subset=new Sf(this),this.registerTTF()}return Q.open=function(j){return new Q(j)},Q.prototype.parse=function(){return this.directory=new qd(this.contents),this.head=new Hg(this),this.name=new Pp(this),this.cmap=new $d(this),this.toUnicode={},this.hhea=new $m(this),this.maxp=new Eu(this),this.hmtx=new Uu(this),this.post=new bg(this),this.os2=new Jm(this),this.loca=new Xf(this),this.glyf=new Mp(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Q.prototype.registerTTF=function(){var J,se,xe,fe;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var De,Ae,Ne,tt;for(tt=[],De=0,Ae=(Ne=this.bbox).length;De<Ae;De++)tt.push(Math.round(Ne[De]*this.scaleFactor));return tt}.call(this),this.stemV=0,this.post.exists?(se=255&(xe=this.post.italic_angle),32768&(J=xe>>16)&&(J=-(1+(65535^J))),this.italicAngle=+(J+"."+se)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(fe=this.familyClass)||2===fe||3===fe||4===fe||5===fe||7===fe,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Q.prototype.characterToGlyph=function(j){var J;return(null!=(J=this.cmap.unicode)?J.codeMap[j]:void 0)||0},Q.prototype.widthOfGlyph=function(j){var J;return J=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(j).advance*J},Q.prototype.widthOfString=function(j,J,se){var xe,fe,De,Ae;for(De=0,fe=0,Ae=(j=""+j).length;0<=Ae?fe<Ae:fe>Ae;fe=0<=Ae?++fe:--fe)xe=j.charCodeAt(fe),De+=this.widthOfGlyph(this.characterToGlyph(xe))+se*(1e3/J)||0;return De*(J/1e3)},Q.prototype.lineHeight=function(j,J){return null==J&&(J=!1),(this.ascender+(J?this.lineGap:0)-this.decender)/1e3*j},Q}();var Gd,Qp=function(){function Q(j){this.data=j??[],this.pos=0,this.length=this.data.length}return Q.prototype.readByte=function(){return this.data[this.pos++]},Q.prototype.writeByte=function(j){return this.data[this.pos++]=j},Q.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Q.prototype.writeUInt32=function(j){return this.writeByte(j>>>24&255),this.writeByte(j>>16&255),this.writeByte(j>>8&255),this.writeByte(255&j)},Q.prototype.readInt32=function(){var j;return(j=this.readUInt32())>=2147483648?j-4294967296:j},Q.prototype.writeInt32=function(j){return j<0&&(j+=4294967296),this.writeUInt32(j)},Q.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Q.prototype.writeUInt16=function(j){return this.writeByte(j>>8&255),this.writeByte(255&j)},Q.prototype.readInt16=function(){var j;return(j=this.readUInt16())>=32768?j-65536:j},Q.prototype.writeInt16=function(j){return j<0&&(j+=65536),this.writeUInt16(j)},Q.prototype.readString=function(j){var J,se;for(se=[],J=0;0<=j?J<j:J>j;J=0<=j?++J:--J)se[J]=String.fromCharCode(this.readByte());return se.join("")},Q.prototype.writeString=function(j){var J,se,xe;for(xe=[],J=0,se=j.length;0<=se?J<se:J>se;J=0<=se?++J:--J)xe.push(this.writeByte(j.charCodeAt(J)));return xe},Q.prototype.readShort=function(){return this.readInt16()},Q.prototype.writeShort=function(j){return this.writeInt16(j)},Q.prototype.readLongLong=function(){var j,J,se,xe,fe,De,Ae,Ne;return j=this.readByte(),J=this.readByte(),se=this.readByte(),xe=this.readByte(),fe=this.readByte(),De=this.readByte(),Ae=this.readByte(),Ne=this.readByte(),128&j?-1*(72057594037927940*(255^j)+281474976710656*(255^J)+1099511627776*(255^se)+4294967296*(255^xe)+16777216*(255^fe)+65536*(255^De)+256*(255^Ae)+(255^Ne)+1):72057594037927940*j+281474976710656*J+1099511627776*se+4294967296*xe+16777216*fe+65536*De+256*Ae+Ne},Q.prototype.writeLongLong=function(j){var J,se;return J=Math.floor(j/4294967296),se=4294967295&j,this.writeByte(J>>24&255),this.writeByte(J>>16&255),this.writeByte(J>>8&255),this.writeByte(255&J),this.writeByte(se>>24&255),this.writeByte(se>>16&255),this.writeByte(se>>8&255),this.writeByte(255&se)},Q.prototype.readInt=function(){return this.readInt32()},Q.prototype.writeInt=function(j){return this.writeInt32(j)},Q.prototype.read=function(j){var J,se;for(J=[],se=0;0<=j?se<j:se>j;se=0<=j?++se:--se)J.push(this.readByte());return J},Q.prototype.write=function(j){var se,xe,fe;for(fe=[],se=0,xe=j.length;se<xe;se++)fe.push(this.writeByte(j[se]));return fe},Q}(),qd=function(){var Q;function j(J){var se,xe,fe;for(this.scalarType=J.readInt(),this.tableCount=J.readShort(),this.searchRange=J.readShort(),this.entrySelector=J.readShort(),this.rangeShift=J.readShort(),this.tables={},xe=0,fe=this.tableCount;0<=fe?xe<fe:xe>fe;xe=0<=fe?++xe:--xe)se={tag:J.readString(4),checksum:J.readInt(),offset:J.readInt(),length:J.readInt()},this.tables[se.tag]=se}return j.prototype.encode=function(J){var se,xe,De,Ae,Ne,tt,_t,vt,Ht,Qe,Ar,pr;for(pr in Qe=Object.keys(J).length,Ne=Math.log(2),vt=16*Math.floor(Math.log(Qe)/Ne),De=Math.floor(vt/Ne),_t=16*Qe-vt,(xe=new Qp).writeInt(this.scalarType),xe.writeShort(Qe),xe.writeShort(vt),xe.writeShort(De),xe.writeShort(_t),tt=xe.pos+16*Qe,Ae=null,Ar=[],J)for(Ht=J[pr],xe.writeString(pr),xe.writeInt(Q(Ht)),xe.writeInt(tt),xe.writeInt(Ht.length),Ar=Ar.concat(Ht),"head"===pr&&(Ae=tt),tt+=Ht.length;tt%4;)Ar.push(0),tt++;return xe.write(Ar),se=2981146554-Q(xe.data),xe.pos=Ae+8,xe.writeUInt32(se),xe.data},Q=function(J){var se,xe,fe,De;for(J=Xp.call(J);J.length%4;)J.push(0);for(fe=new Qp(J),xe=0,se=0,De=J.length;se<De;se=se+=4)xe+=fe.readUInt32();return 4294967295&xe},j}(),zg={}.hasOwnProperty,Sp=function(Q,j){for(var J in j)zg.call(j,J)&&(Q[J]=j[J]);function se(){this.constructor=Q}return se.prototype=j.prototype,Q.prototype=new se,Q.__super__=j.prototype,Q};Gd=function(){function Q(j){var J;this.file=j,this.exists=!!(J=this.file.directory.tables[this.tag]),J&&(this.offset=J.offset,this.length=J.length,this.parse(this.file.contents))}return Q.prototype.parse=function(){},Q.prototype.encode=function(){},Q.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Q}();var Hg=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="head",j.prototype.parse=function(J){return J.pos=this.offset,this.version=J.readInt(),this.revision=J.readInt(),this.checkSumAdjustment=J.readInt(),this.magicNumber=J.readInt(),this.flags=J.readShort(),this.unitsPerEm=J.readShort(),this.created=J.readLongLong(),this.modified=J.readLongLong(),this.xMin=J.readShort(),this.yMin=J.readShort(),this.xMax=J.readShort(),this.yMax=J.readShort(),this.macStyle=J.readShort(),this.lowestRecPPEM=J.readShort(),this.fontDirectionHint=J.readShort(),this.indexToLocFormat=J.readShort(),this.glyphDataFormat=J.readShort()},j.prototype.encode=function(J){var se;return(se=new Qp).writeInt(this.version),se.writeInt(this.revision),se.writeInt(this.checkSumAdjustment),se.writeInt(this.magicNumber),se.writeShort(this.flags),se.writeShort(this.unitsPerEm),se.writeLongLong(this.created),se.writeLongLong(this.modified),se.writeShort(this.xMin),se.writeShort(this.yMin),se.writeShort(this.xMax),se.writeShort(this.yMax),se.writeShort(this.macStyle),se.writeShort(this.lowestRecPPEM),se.writeShort(this.fontDirectionHint),se.writeShort(J),se.writeShort(this.glyphDataFormat),se.data},j}(),hd=function(){function Q(j,J){var se,xe,fe,De,Ae,Ne,tt,_t,vt,Ht,Qe,Ar,pr,Sr,Qt,Lr,En;switch(this.platformID=j.readUInt16(),this.encodingID=j.readShort(),this.offset=J+j.readInt(),vt=j.pos,j.pos=this.offset,this.format=j.readUInt16(),this.length=j.readUInt16(),this.language=j.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(Ne=0;Ne<256;++Ne)this.codeMap[Ne]=j.readByte();break;case 4:for(Qe=j.readUInt16(),Ht=Qe/2,j.pos+=6,fe=function(){var qn,Fo;for(Fo=[],Ne=qn=0;0<=Ht?qn<Ht:qn>Ht;Ne=0<=Ht?++qn:--qn)Fo.push(j.readUInt16());return Fo}(),j.pos+=2,pr=function(){var qn,Fo;for(Fo=[],Ne=qn=0;0<=Ht?qn<Ht:qn>Ht;Ne=0<=Ht?++qn:--qn)Fo.push(j.readUInt16());return Fo}(),tt=function(){var qn,Fo;for(Fo=[],Ne=qn=0;0<=Ht?qn<Ht:qn>Ht;Ne=0<=Ht?++qn:--qn)Fo.push(j.readUInt16());return Fo}(),_t=function(){var qn,Fo;for(Fo=[],Ne=qn=0;0<=Ht?qn<Ht:qn>Ht;Ne=0<=Ht?++qn:--qn)Fo.push(j.readUInt16());return Fo}(),xe=(this.length-j.pos+this.offset)/2,Ae=function(){var qn,Fo;for(Fo=[],Ne=qn=0;0<=xe?qn<xe:qn>xe;Ne=0<=xe?++qn:--qn)Fo.push(j.readUInt16());return Fo}(),Ne=Qt=0,En=fe.length;Qt<En;Ne=++Qt)for(Sr=fe[Ne],se=Lr=Ar=pr[Ne];Ar<=Sr?Lr<=Sr:Lr>=Sr;se=Ar<=Sr?++Lr:--Lr)0===_t[Ne]?De=se+tt[Ne]:0!==(De=Ae[_t[Ne]/2+(se-Ar)-(Ht-Ne)]||0)&&(De+=tt[Ne]),this.codeMap[se]=65535&De}j.pos=vt}return Q.encode=function(j,J){var se,xe,fe,De,Ae,Ne,tt,_t,vt,Ht,Qe,Ar,pr,Sr,Qt,Lr,En,Fo,gi,po,Jr,lo,zo,cr,hr,Xr,rn,jo,So,Zo,ro,Ho,Xo,ka,zt,Ir,Gr,on,bn,Xn,so,Po,$i,Ni,ga;switch(rn=new Qp,De=Object.keys(j).sort(function(_a,vs){return _a-vs}),J){case"macroman":for(pr=0,Sr=function(){var _a=[];for(Ar=0;Ar<256;++Ar)_a.push(0);return _a}(),Lr={0:0},fe={},jo=0,Ho=De.length;jo<Ho;jo++)null==Lr[Po=j[xe=De[jo]]]&&(Lr[Po]=++pr),fe[xe]={old:j[xe],new:Lr[j[xe]]},Sr[xe]=Lr[j[xe]];return rn.writeUInt16(1),rn.writeUInt16(0),rn.writeUInt32(12),rn.writeUInt16(0),rn.writeUInt16(262),rn.writeUInt16(0),rn.write(Sr),{charMap:fe,subtable:rn.data,maxGlyphID:pr+1};case"unicode":for(hr=[],vt=[],En=0,Lr={},se={},Qt=tt=null,So=0,Xo=De.length;So<Xo;So++)null==Lr[Fo=j[xe=De[So]]]&&(Lr[Fo]=++En),se[xe]={old:Fo,new:Lr[Fo]},Ae=Lr[Fo]-xe,null!=Qt&&Ae===tt||(Qt&&vt.push(Qt),hr.push(xe),tt=Ae),Qt=xe;for(Qt&&vt.push(Qt),vt.push(65535),hr.push(65535),zo=2*(lo=hr.length),Jr=2*Math.pow(Math.log(lo)/Math.LN2,2),Ht=Math.log(Jr/2)/Math.LN2,po=2*lo-Jr,Ne=[],gi=[],Qe=[],Ar=Zo=0,ka=hr.length;Zo<ka;Ar=++Zo){if(_t=vt[Ar],65535===(cr=hr[Ar])){Ne.push(0),gi.push(0);break}if(cr-(Xr=se[cr].new)>=32768)for(Ne.push(0),gi.push(2*(Qe.length+lo-Ar)),xe=ro=cr;cr<=_t?ro<=_t:ro>=_t;xe=cr<=_t?++ro:--ro)Qe.push(se[xe].new);else Ne.push(Xr-cr),gi.push(0)}for(rn.writeUInt16(3),rn.writeUInt16(1),rn.writeUInt32(12),rn.writeUInt16(4),rn.writeUInt16(16+8*lo+2*Qe.length),rn.writeUInt16(0),rn.writeUInt16(zo),rn.writeUInt16(Jr),rn.writeUInt16(Ht),rn.writeUInt16(po),Xn=0,zt=vt.length;Xn<zt;Xn++)rn.writeUInt16(xe=vt[Xn]);for(rn.writeUInt16(0),so=0,Ir=hr.length;so<Ir;so++)rn.writeUInt16(xe=hr[so]);for($i=0,Gr=Ne.length;$i<Gr;$i++)rn.writeUInt16(Ae=Ne[$i]);for(Ni=0,on=gi.length;Ni<on;Ni++)rn.writeUInt16(gi[Ni]);for(ga=0,bn=Qe.length;ga<bn;ga++)rn.writeUInt16(pr=Qe[ga]);return{charMap:se,subtable:rn.data,maxGlyphID:En+1}}},Q}(),$d=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="cmap",j.prototype.parse=function(J){var se,xe,fe;for(J.pos=this.offset,this.version=J.readUInt16(),fe=J.readUInt16(),this.tables=[],this.unicode=null,xe=0;0<=fe?xe<fe:xe>fe;xe=0<=fe?++xe:--xe)se=new hd(J,this.offset),this.tables.push(se),se.isUnicode&&null==this.unicode&&(this.unicode=se);return!0},j.encode=function(J,se){var xe,fe;return null==se&&(se="macroman"),xe=hd.encode(J,se),(fe=new Qp).writeUInt16(0),fe.writeUInt16(1),xe.table=fe.data.concat(xe.subtable),xe},j}(),$m=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="hhea",j.prototype.parse=function(J){return J.pos=this.offset,this.version=J.readInt(),this.ascender=J.readShort(),this.decender=J.readShort(),this.lineGap=J.readShort(),this.advanceWidthMax=J.readShort(),this.minLeftSideBearing=J.readShort(),this.minRightSideBearing=J.readShort(),this.xMaxExtent=J.readShort(),this.caretSlopeRise=J.readShort(),this.caretSlopeRun=J.readShort(),this.caretOffset=J.readShort(),J.pos+=8,this.metricDataFormat=J.readShort(),this.numberOfMetrics=J.readUInt16()},j}(),Jm=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="OS/2",j.prototype.parse=function(J){if(J.pos=this.offset,this.version=J.readUInt16(),this.averageCharWidth=J.readShort(),this.weightClass=J.readUInt16(),this.widthClass=J.readUInt16(),this.type=J.readShort(),this.ySubscriptXSize=J.readShort(),this.ySubscriptYSize=J.readShort(),this.ySubscriptXOffset=J.readShort(),this.ySubscriptYOffset=J.readShort(),this.ySuperscriptXSize=J.readShort(),this.ySuperscriptYSize=J.readShort(),this.ySuperscriptXOffset=J.readShort(),this.ySuperscriptYOffset=J.readShort(),this.yStrikeoutSize=J.readShort(),this.yStrikeoutPosition=J.readShort(),this.familyClass=J.readShort(),this.panose=function(){var se,xe;for(xe=[],se=0;se<10;++se)xe.push(J.readByte());return xe}(),this.charRange=function(){var se,xe;for(xe=[],se=0;se<4;++se)xe.push(J.readInt());return xe}(),this.vendorID=J.readString(4),this.selection=J.readShort(),this.firstCharIndex=J.readShort(),this.lastCharIndex=J.readShort(),this.version>0&&(this.ascent=J.readShort(),this.descent=J.readShort(),this.lineGap=J.readShort(),this.winAscent=J.readShort(),this.winDescent=J.readShort(),this.codePageRange=function(){var se,xe;for(xe=[],se=0;se<2;se=++se)xe.push(J.readInt());return xe}(),this.version>1))return this.xHeight=J.readShort(),this.capHeight=J.readShort(),this.defaultChar=J.readShort(),this.breakChar=J.readShort(),this.maxContext=J.readShort()},j}(),bg=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="post",j.prototype.parse=function(J){var se,xe,fe;switch(J.pos=this.offset,this.format=J.readInt(),this.italicAngle=J.readInt(),this.underlinePosition=J.readShort(),this.underlineThickness=J.readShort(),this.isFixedPitch=J.readInt(),this.minMemType42=J.readInt(),this.maxMemType42=J.readInt(),this.minMemType1=J.readInt(),this.maxMemType1=J.readInt(),this.format){case 65536:case 196608:break;case 131072:var De;for(xe=J.readUInt16(),this.glyphNameIndex=[],De=0;0<=xe?De<xe:De>xe;De=0<=xe?++De:--De)this.glyphNameIndex.push(J.readUInt16());for(this.names=[],fe=[];J.pos<this.offset+this.length;)se=J.readByte(),fe.push(this.names.push(J.readString(se)));return fe;case 151552:return xe=J.readUInt16(),this.offsets=J.read(xe);case 262144:return this.map=function(){var Ae,Ne,tt;for(tt=[],De=Ae=0,Ne=this.file.maxp.numGlyphs;0<=Ne?Ae<Ne:Ae>Ne;De=0<=Ne?++Ae:--Ae)tt.push(J.readUInt32());return tt}.call(this)}},j}(),Sm=function(Q,j){this.raw=Q,this.length=Q.length,this.platformID=j.platformID,this.encodingID=j.encodingID,this.languageID=j.languageID},Pp=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="name",j.prototype.parse=function(J){var se,xe,fe,De,Ae,Ne,tt,_t,vt,Ht,Qe;for(J.pos=this.offset,J.readShort(),se=J.readShort(),Ne=J.readShort(),xe=[],De=0;0<=se?De<se:De>se;De=0<=se?++De:--De)xe.push({platformID:J.readShort(),encodingID:J.readShort(),languageID:J.readShort(),nameID:J.readShort(),length:J.readShort(),offset:this.offset+Ne+J.readShort()});for(tt={},De=vt=0,Ht=xe.length;vt<Ht;De=++vt)J.pos=(fe=xe[De]).offset,_t=J.readString(fe.length),Ae=new Sm(_t,fe),null==tt[Qe=fe.nameID]&&(tt[Qe]=[]),tt[fe.nameID].push(Ae);this.strings=tt,this.copyright=tt[0],this.fontFamily=tt[1],this.fontSubfamily=tt[2],this.uniqueSubfamily=tt[3],this.fontName=tt[4],this.version=tt[5];try{this.postscriptName=tt[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=tt[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=tt[7],this.manufacturer=tt[8],this.designer=tt[9],this.description=tt[10],this.vendorUrl=tt[11],this.designerUrl=tt[12],this.license=tt[13],this.licenseUrl=tt[14],this.preferredFamily=tt[15],this.preferredSubfamily=tt[17],this.compatibleFull=tt[18],this.sampleText=tt[19]},j}(),Eu=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="maxp",j.prototype.parse=function(J){return J.pos=this.offset,this.version=J.readInt(),this.numGlyphs=J.readUInt16(),this.maxPoints=J.readUInt16(),this.maxContours=J.readUInt16(),this.maxCompositePoints=J.readUInt16(),this.maxComponentContours=J.readUInt16(),this.maxZones=J.readUInt16(),this.maxTwilightPoints=J.readUInt16(),this.maxStorage=J.readUInt16(),this.maxFunctionDefs=J.readUInt16(),this.maxInstructionDefs=J.readUInt16(),this.maxStackElements=J.readUInt16(),this.maxSizeOfInstructions=J.readUInt16(),this.maxComponentElements=J.readUInt16(),this.maxComponentDepth=J.readUInt16()},j}(),Uu=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="hmtx",j.prototype.parse=function(J){var se,xe,fe,Ae,Ne,tt;for(J.pos=this.offset,this.metrics=[],se=0,Ne=this.file.hhea.numberOfMetrics;0<=Ne?se<Ne:se>Ne;se=0<=Ne?++se:--se)this.metrics.push({advance:J.readUInt16(),lsb:J.readInt16()});for(fe=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var _t,vt;for(vt=[],se=_t=0;0<=fe?_t<fe:_t>fe;se=0<=fe?++_t:--_t)vt.push(J.readInt16());return vt}(),this.widths=function(){var _t,vt,Ht,Qe;for(Qe=[],_t=0,vt=(Ht=this.metrics).length;_t<vt;_t++)Qe.push(Ht[_t].advance);return Qe}.call(this),xe=this.widths[this.widths.length-1],tt=[],se=Ae=0;0<=fe?Ae<fe:Ae>fe;se=0<=fe?++Ae:--Ae)tt.push(this.widths.push(xe));return tt},j.prototype.forGlyph=function(J){return J in this.metrics?this.metrics[J]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[J-this.metrics.length]}},j}(),Xp=[].slice,Mp=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="glyf",j.prototype.parse=function(){return this.cache={}},j.prototype.glyphFor=function(J){var se,xe,fe,De,Ae,Ne,tt,_t,vt,Ht;return J in this.cache?this.cache[J]:(se=this.file.contents,xe=(De=this.file.loca).indexOf(J),0===(fe=De.lengthOf(J))?this.cache[J]=null:(se.pos=this.offset+xe,Ae=(Ne=new Qp(se.read(fe))).readShort(),_t=Ne.readShort(),Ht=Ne.readShort(),tt=Ne.readShort(),vt=Ne.readShort(),this.cache[J]=-1===Ae?new Gg(Ne,_t,Ht,tt,vt):new em(Ne,Ae,_t,Ht,tt,vt),this.cache[J]))},j.prototype.encode=function(J,se,xe){var fe,De,Ae,Ne,tt;for(Ae=[],De=[],Ne=0,tt=se.length;Ne<tt;Ne++)fe=J[se[Ne]],De.push(Ae.length),fe&&(Ae=Ae.concat(fe.encode(xe)));return De.push(Ae.length),{table:Ae,offsets:De}},j}(),em=function(){function Q(j,J,se,xe,fe,De){this.raw=j,this.numberOfContours=J,this.xMin=se,this.yMin=xe,this.xMax=fe,this.yMax=De,this.compound=!1}return Q.prototype.encode=function(){return this.raw.data},Q}(),Gg=function(){function Q(j,J,se,xe,fe){var De,Ae;for(this.raw=j,this.xMin=J,this.yMin=se,this.xMax=xe,this.yMax=fe,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],De=this.raw;Ae=De.readShort(),this.glyphOffsets.push(De.pos),this.glyphIDs.push(De.readUInt16()),32&Ae;)De.pos+=1&Ae?4:2,128&Ae?De.pos+=8:64&Ae?De.pos+=4:8&Ae&&(De.pos+=2)}return Q.prototype.encode=function(){var j,J,se;for(J=new Qp(Xp.call(this.raw.data)),j=0,se=this.glyphIDs.length;j<se;++j)J.pos=this.glyphOffsets[j];return J.data},Q}(),Xf=function(Q){function j(){return j.__super__.constructor.apply(this,arguments)}return Sp(j,Gd),j.prototype.tag="loca",j.prototype.parse=function(J){var xe;return J.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var fe,De;for(De=[],xe=0,fe=this.length;xe<fe;xe+=2)De.push(2*J.readUInt16());return De}.call(this):function(){var fe,De;for(De=[],xe=0,fe=this.length;xe<fe;xe+=4)De.push(J.readUInt32());return De}.call(this)},j.prototype.indexOf=function(J){return this.offsets[J]},j.prototype.lengthOf=function(J){return this.offsets[J+1]-this.offsets[J]},j.prototype.encode=function(J,se){for(var xe=new Uint32Array(this.offsets.length),fe=0,De=0,Ae=0;Ae<xe.length;++Ae)if(xe[Ae]=fe,De<se.length&&se[De]==Ae){++De,xe[Ae]=fe;var tt=this.offsets[Ae+1]-this.offsets[Ae];tt>0&&(fe+=tt)}for(var _t=new Array(4*xe.length),vt=0;vt<xe.length;++vt)_t[4*vt+3]=255&xe[vt],_t[4*vt+2]=(65280&xe[vt])>>8,_t[4*vt+1]=(16711680&xe[vt])>>16,_t[4*vt]=(4278190080&xe[vt])>>24;return _t},j}(),Sf=function(){function Q(j){this.font=j,this.subset={},this.unicodes={},this.next=33}return Q.prototype.generateCmap=function(){var j,J,xe,fe;for(J in xe=this.font.cmap.tables[0].codeMap,j={},fe=this.subset)j[J]=xe[fe[J]];return j},Q.prototype.glyphsFor=function(j){var J,se,xe,fe,De,Ae,Ne;for(xe={},De=0,Ae=j.length;De<Ae;De++)xe[fe=j[De]]=this.font.glyf.glyphFor(fe);for(fe in J=[],xe)null!=(se=xe[fe])&&se.compound&&J.push.apply(J,se.glyphIDs);if(J.length>0)for(fe in Ne=this.glyphsFor(J))xe[fe]=se=Ne[fe];return xe},Q.prototype.encode=function(j,J){var se,xe,fe,De,Ne,tt,_t,vt,Ht,Qe,Ar,pr,Sr,Qt;for(xe in se=$d.encode(this.generateCmap(),"unicode"),De=this.glyphsFor(j),Qe={0:0},Qt=se.charMap)Qe[(Ne=Qt[xe]).old]=Ne.new;for(Ar in Ht=se.maxGlyphID,De)Ar in Qe||(Qe[Ar]=Ht++);return _t=function(Lr){var En,qn;for(En in qn={},Lr)qn[Lr[En]]=En;return qn}(Qe),vt=Object.keys(_t).sort(function(Lr,En){return Lr-En}),pr=function(){var Lr,En,qn;for(qn=[],Lr=0,En=vt.length;Lr<En;Lr++)qn.push(_t[vt[Lr]]);return qn}(),fe=this.font.glyf.encode(De,pr,Qe),tt=this.font.loca.encode(fe.offsets,pr),Sr={cmap:this.font.cmap.raw(),glyf:fe.table,loca:tt,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(J)},this.font.os2.exists&&(Sr["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Sr)},Q}();Xi.API.PDFObject=function(){var Q;function j(){}return Q=function(J,se){return(Array(se+1).join("0")+J).slice(-se)},j.convert=function(J){var xe,fe;if(Array.isArray(J))return"["+function(){var Ae,Ne,tt;for(tt=[],Ae=0,Ne=J.length;Ae<Ne;Ae++)tt.push(j.convert(J[Ae]));return tt}().join(" ")+"]";if("string"==typeof J)return"/"+J;if(J?.isString)return"("+J+")";if(J instanceof Date)return"(D:"+Q(J.getUTCFullYear(),4)+Q(J.getUTCMonth(),2)+Q(J.getUTCDate(),2)+Q(J.getUTCHours(),2)+Q(J.getUTCMinutes(),2)+Q(J.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(J)){for(xe in fe=["<<"],J)fe.push("/"+xe+" "+j.convert(J[xe]));return fe.push(">>"),fe.join("\n")}return""+J},j}()},74145:(oe,ue)=>{!function(){"use strict";"object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global;var O=9007199254740991;function S(Oe){return!("number"!=typeof Oe||Oe!=Oe||Oe===1/0||Oe===-1/0)}function m(Oe){return"number"==typeof Oe&&Math.abs(Oe)<=O}var X=/(hundred|thousand|(m|b|tr|quadr)illion)$/,x=/teen$/,z=/y$/,H=/(zero|one|two|three|four|five|six|seven|eight|nine|ten|eleven|twelve)$/,G={zero:"zeroth",one:"first",two:"second",three:"third",four:"fourth",five:"fifth",six:"sixth",seven:"seventh",eight:"eighth",nine:"ninth",ten:"tenth",eleven:"eleventh",twelve:"twelfth"};function D(Oe){return X.test(Oe)||x.test(Oe)?Oe+"th":z.test(Oe)?Oe.replace(z,"ieth"):H.test(Oe)?Oe.replace(H,U):Oe}function U(Oe,je){return G[je]}var N=1e3,L=1e6,Y=1e9,ee=1e12,te=1e15,we=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],Te=["zero","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"];function ge(Oe,je){var Ue,Le=parseInt(Oe,10);if(!S(Le))throw new TypeError("Not a finite number: "+Oe+" ("+typeof Oe+")");if(!m(Le))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");return Ue=function ke(me){var l,Me,Ze=arguments[1];return 0===me?Ze?Ze.join(" ").replace(/,$/,""):"zero":(Ze||(Ze=[]),me<0&&(Ze.push("minus"),me=Math.abs(me)),me<20?(l=0,Me=we[me]):me<100?(l=me%10,Me=Te[Math.floor(me/10)],l&&(Me+="-"+we[l],l=0)):me<N?(l=me%100,Me=ke(Math.floor(me/100))+" hundred"):me<L?(l=me%N,Me=ke(Math.floor(me/N))+" thousand,"):me<Y?(l=me%L,Me=ke(Math.floor(me/L))+" million,"):me<ee?(l=me%Y,Me=ke(Math.floor(me/Y))+" billion,"):me<te?(l=me%ee,Me=ke(Math.floor(me/ee))+" trillion,"):me<=9007199254740992&&(l=me%te,Me=ke(Math.floor(me/te))+" quadrillion,"),Ze.push(Me),ke(l,Ze))}(Le),je?D(Ue):Ue}var Ce={toOrdinal:function(Oe){var je=parseInt(Oe,10);if(!S(je))throw new TypeError("Not a finite number: "+Oe+" ("+typeof Oe+")");if(!m(je))throw new RangeError("Input is not a safe number, it\u2019s either too large or too small.");var Ue=String(je),Le=Math.abs(je%100),ke=11<=Le&&Le<=13,me=Ue.charAt(Ue.length-1);return Ue+(ke?"th":"1"===me?"st":"2"===me?"nd":"3"===me?"rd":"th")},toWords:ge,toWordsOrdinal:function(Oe){return D(ge(Oe))}};oe.exports&&(ue=oe.exports=Ce),ue.numberToWords=Ce}()},95195:(oe,ue,re)=>{"use strict";re.d(ue,{QW:()=>Ue,a8:()=>U,dn:()=>N});var O=re(65879),S=re(96814),m=re(23680);const X=["*"],D=new O.OlP("MAT_CARD_CONFIG");let U=(()=>{var Le;class ke{constructor(l){this.appearance=l?.appearance||"raised"}}return(Le=ke).\u0275fac=function(l){return new(l||Le)(O.Y36(D,8))},Le.\u0275cmp=O.Xpm({type:Le,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(l,Me){2&l&&O.ekj("mat-mdc-card-outlined","outlined"===Me.appearance)("mdc-card--outlined","outlined"===Me.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:X,decls:1,vars:0,template:function(l,Me){1&l&&(O.F$t(),O.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),ke})(),N=(()=>{var Le;class ke{}return(Le=ke).\u0275fac=function(l){return new(l||Le)},Le.\u0275dir=O.lG2({type:Le,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),ke})(),Ue=(()=>{var Le;class ke{}return(Le=ke).\u0275fac=function(l){return new(l||Le)},Le.\u0275mod=O.oAB({type:Le}),Le.\u0275inj=O.cJS({imports:[m.BQ,S.ez,m.BQ]}),ke})()},75986:(oe,ue,re)=>{"use strict";re.d(ue,{oG:()=>ee,p9:()=>Te});var O=re(65879),S=re(56223),m=re(23680),X=re(42495);const x=["input"],z=["label"],H=["*"],G=new O.OlP("mat-checkbox-default-options",{providedIn:"root",factory:D});function D(){return{color:"accent",clickAction:"check-indeterminate"}}const U={provide:S.JU,useExisting:(0,O.Gpc)(()=>ee),multi:!0};class R{}let T=0;const N=D(),L=(0,m.sb)((0,m.pj)((0,m.Kr)((0,m.Id)(class{constructor(ge){this._elementRef=ge}}))));let Y=(()=>{var ge;class Ce extends L{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(je){this._required=(0,X.Ig)(je)}constructor(je,Ue,Le,ke,me,l,Me){super(Ue),this._changeDetectorRef=Le,this._ngZone=ke,this._animationMode=l,this._options=Me,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new O.vpe,this.indeterminateChange=new O.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||N,this.color=this.defaultColor=this._options.color||N.color,this.tabIndex=parseInt(me)||0,this.id=this._uniqueId=`${je}${++T}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(je){const Ue=(0,X.Ig)(je);Ue!=this.checked&&(this._checked=Ue,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(je){const Ue=(0,X.Ig)(je);Ue!==this.disabled&&(this._disabled=Ue,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(je){const Ue=je!=this._indeterminate;this._indeterminate=(0,X.Ig)(je),Ue&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(je){this.checked=!!je}registerOnChange(je){this._controlValueAccessorChangeFn=je}registerOnTouched(je){this._onTouched=je}setDisabledState(je){this.disabled=je}_transitionCheckState(je){let Ue=this._currentCheckState,Le=this._getAnimationTargetElement();if(Ue!==je&&Le&&(this._currentAnimationClass&&Le.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(Ue,je),this._currentCheckState=je,this._currentAnimationClass.length>0)){Le.classList.add(this._currentAnimationClass);const ke=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{Le.classList.remove(ke)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const je=this._options?.clickAction;this.disabled||"noop"===je?!this.disabled&&"noop"===je&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==je&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(je){je.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(je,Ue){if("NoopAnimations"===this._animationMode)return"";switch(je){case 0:if(1===Ue)return this._animationClasses.uncheckedToChecked;if(3==Ue)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===Ue?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===Ue?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===Ue?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(je){const Ue=this._inputElement;Ue&&(Ue.nativeElement.indeterminate=je)}}return(ge=Ce).\u0275fac=function(je){O.$Z()},ge.\u0275dir=O.lG2({type:ge,viewQuery:function(je,Ue){if(1&je&&(O.Gf(x,5),O.Gf(z,5),O.Gf(m.wG,5)),2&je){let Le;O.iGM(Le=O.CRH())&&(Ue._inputElement=Le.first),O.iGM(Le=O.CRH())&&(Ue._labelElement=Le.first),O.iGM(Le=O.CRH())&&(Ue.ripple=Le.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[O.qOj]}),Ce})(),ee=(()=>{var ge;class Ce extends Y{constructor(je,Ue,Le,ke,me,l){super("mat-mdc-checkbox-",je,Ue,Le,ke,me,l),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(je){const Ue=new R;return Ue.source=this,Ue.checked=je,Ue}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(je){je.target&&this._labelElement.nativeElement.contains(je.target)&&je.stopPropagation()}}return(ge=Ce).\u0275fac=function(je){return new(je||ge)(O.Y36(O.SBq),O.Y36(O.sBO),O.Y36(O.R0b),O.$8M("tabindex"),O.Y36(O.QbO,8),O.Y36(G,8))},ge.\u0275cmp=O.Xpm({type:ge,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(je,Ue){2&je&&(O.Ikx("id",Ue.id),O.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),O.ekj("_mat-animation-noopable","NoopAnimations"===Ue._animationMode)("mdc-checkbox--disabled",Ue.disabled)("mat-mdc-checkbox-disabled",Ue.disabled)("mat-mdc-checkbox-checked",Ue.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[O._Bn([U]),O.qOj],ngContentSelectors:H,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"],["label",""]],template:function(je,Ue){if(1&je&&(O.F$t(),O.TgZ(0,"div",0),O.NdJ("click",function(ke){return Ue._preventBubblingFromLabel(ke)}),O.TgZ(1,"div",1,2)(3,"div",3),O.NdJ("click",function(){return Ue._onTouchTargetClick()}),O.qZA(),O.TgZ(4,"input",4,5),O.NdJ("blur",function(){return Ue._onBlur()})("click",function(){return Ue._onInputClick()})("change",function(ke){return Ue._onInteractionEvent(ke)}),O.qZA(),O._UZ(6,"div",6),O.TgZ(7,"div",7),O.O4$(),O.TgZ(8,"svg",8),O._UZ(9,"path",9),O.qZA(),O.kcU(),O._UZ(10,"div",10),O.qZA(),O._UZ(11,"div",11),O.qZA(),O.TgZ(12,"label",12,13),O.Hsn(14),O.qZA()()),2&je){const Le=O.MAs(2);O.ekj("mdc-form-field--align-end","before"==Ue.labelPosition),O.xp6(4),O.ekj("mdc-checkbox--selected",Ue.checked),O.Q6J("checked",Ue.checked)("indeterminate",Ue.indeterminate)("disabled",Ue.disabled)("id",Ue.inputId)("required",Ue.required)("tabIndex",Ue.tabIndex),O.uIk("aria-label",Ue.ariaLabel||null)("aria-labelledby",Ue.ariaLabelledby)("aria-describedby",Ue.ariaDescribedby)("name",Ue.name)("value",Ue.value),O.xp6(7),O.Q6J("matRippleTrigger",Le)("matRippleDisabled",Ue.disableRipple||Ue.disabled)("matRippleCentered",!0),O.xp6(1),O.Q6J("for",Ue.inputId)}},dependencies:[m.wG],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}html{--mdc-checkbox-disabled-selected-checkmark-color:#fff;--mdc-checkbox-selected-focus-state-layer-opacity:0.16;--mdc-checkbox-selected-hover-state-layer-opacity:0.04;--mdc-checkbox-selected-pressed-state-layer-opacity:0.16;--mdc-checkbox-unselected-focus-state-layer-opacity:0.16;--mdc-checkbox-unselected-hover-state-layer-opacity:0.04;--mdc-checkbox-unselected-pressed-state-layer-opacity:0.16}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),Ce})(),we=(()=>{var ge;class Ce{}return(ge=Ce).\u0275fac=function(je){return new(je||ge)},ge.\u0275mod=O.oAB({type:ge}),ge.\u0275inj=O.cJS({}),Ce})(),Te=(()=>{var ge;class Ce{}return(ge=Ce).\u0275fac=function(je){return new(je||ge)},ge.\u0275mod=O.oAB({type:ge}),ge.\u0275inj=O.cJS({imports:[m.BQ,m.si,we,m.BQ,we]}),Ce})()},73176:(oe,ue,re)=>{"use strict";re.d(ue,{N6:()=>je});var O=re(65879),S=re(23680);let je=(()=>{var Le;class ke{}return(Le=ke).\u0275fac=function(l){return new(l||Le)},Le.\u0275mod=O.oAB({type:Le}),Le.\u0275inj=O.cJS({imports:[S.uc,S.BQ,S.uc,S.BQ]}),ke})()},59038:(oe,ue,re)=>{"use strict";re.d(ue,{ie:()=>Xe});var O=re(65879),X=(re(42495),re(62831),re(23680)),G=(re(47394),re(63019),re(78645),re(17131)),D=re(96814),U=re(26385);re(4300),re(78337),re(36028),re(56223),re(59773);let Xe=(()=>{var at;class gr{}return(at=gr).\u0275fac=function(mt){return new(mt||at)},at.\u0275mod=O.oAB({type:at}),at.\u0275inj=O.cJS({imports:[G.Q8,D.ez,X.BQ,X.si,X.us,U.t]}),gr})()},10369:(oe,ue,re)=>{"use strict";re.d(ue,{ZP:()=>D2});var O={4729:(d,a,e)=>{var r,o,c;o=[e(5706),e(4193)],void 0!==(c="function"==typeof(r=function(g,b){var w=Array.prototype.slice;function C(Nr,Dn,ir){return ir.length<=4?Nr.call(Dn,ir[0],ir[1],ir[2],ir[3]):Nr.apply(Dn,ir)}function B(Nr,Dn){return w.call(Nr,Dn)}function ne(Nr,Dn){return null!=Nr&&(g.isArray(Dn)||(Dn=B(arguments,1)),g.all(Dn,function(ir){return ir in Nr}))}var Nr,Dn,ae=(Nr=!1,Dn=-1,function(){return Nr||function ir(){Dn++,Nr=!0,g.defer(function(){Nr=!1})}(),Dn});function be(){this.registeredObjects=[],this.cidIndexes=[]}function Se(Nr,Dn,ir,Bt){for(var gn,wr=0,sr=Dn.length;wr<sr;wr++)if(gn=Dn[wr]){if("on"===Nr){if(!Bt.objectRegistry.register(gn))continue}else if(!Bt.objectRegistry.unregister(gn))continue;g.isFunction(gn[Nr])&&gn[Nr]("all",ir,Bt)}}function We(Nr,Dn){var ir=Dn.type,Bt=Dn.undoTypes,wr=!Bt[ir]||Bt[ir][Nr];g.isFunction(wr)&&wr(Dn.object,Dn.before,Dn.after,Dn.options)}function lt(Nr,Dn,ir,Bt,wr){if(!(ir.isCurrentlyUndoRedoing||"undo"===Nr&&-1===ir.pointer||"redo"===Nr&&ir.pointer===ir.length-1)){ir.isCurrentlyUndoRedoing=!0;var sr,gn,xt="undo"===Nr;for(wr?gn=xt&&ir.pointer===ir.length-1||!xt&&-1===ir.pointer?g.clone(ir.models):w.apply(ir.models,xt?[0,ir.pointer]:[ir.pointer,ir.length-1]):(sr=ir.at(xt?ir.pointer:ir.pointer+1),gn=Bt?ir.where({magicFusionIndex:sr.get("magicFusionIndex")}):[sr]),ir.pointer+=(xt?-1:1)*gn.length;sr=xt?gn.pop():gn.shift();)sr[Nr]();ir.isCurrentlyUndoRedoing=!1,Dn.trigger(Nr,Dn)}}function ur(Nr,Dn,ir,Bt){if(Nr.track&&!Nr.isCurrentlyUndoRedoing&&Dn in Bt&&function Ot(Nr,Dn){var ir=Nr.condition,Bt=typeof ir;return"function"===Bt?!!C(ir,Nr,Dn):"boolean"!==Bt||ir}(Bt[Dn],ir)){var wr=C(Bt[Dn].on,Bt[Dn],ir);if(ne(wr,"object","before","after")){if(wr.type=Dn,wr.magicFusionIndex=ae(),wr.undoTypes=Bt,Nr.pointer<Nr.length-1)for(var sr=Nr.length-Nr.pointer-1;sr--;)Nr.pop();Nr.pointer=Nr.length,Nr.add(wr),Nr.length>Nr.maximumStackLength&&(Nr.shift(),Nr.pointer--)}}}be.prototype={isRegistered:function(Nr){return Nr&&Nr.cid?this.registeredObjects[Nr.cid]:g.contains(this.registeredObjects,Nr)},register:function(Nr){return!this.isRegistered(Nr)&&(Nr&&Nr.cid?(this.registeredObjects[Nr.cid]=Nr,this.cidIndexes.push(Nr.cid)):this.registeredObjects.push(Nr),!0)},unregister:function(Nr){if(this.isRegistered(Nr)){if(Nr&&Nr.cid)delete this.registeredObjects[Nr.cid],this.cidIndexes.splice(g.indexOf(this.cidIndexes,Nr.cid),1);else{var Dn=g.indexOf(this.registeredObjects,Nr);this.registeredObjects.splice(Dn,1)}return!0}return!1},get:function(){return g.map(this.cidIndexes,function(Nr){return this.registeredObjects[Nr]},this).concat(this.registeredObjects)}};var Gt={add:{undo:function(Nr,Dn,ir,Bt){Nr.remove(ir,Bt)},redo:function(Nr,Dn,ir,Bt){Bt.index&&(Bt.at=Bt.index),Nr.add(ir,Bt)},on:function(Nr,Dn,ir){return{object:Dn,before:void 0,after:Nr,options:g.clone(ir)}}},remove:{undo:function(Nr,Dn,ir,Bt){"index"in Bt&&(Bt.at=Bt.index),Nr.add(Dn,Bt)},redo:function(Nr,Dn,ir,Bt){Nr.remove(Dn,Bt)},on:function(Nr,Dn,ir){return{object:Dn,before:Nr,after:void 0,options:g.clone(ir)}}},change:{undo:function(Nr,Dn,ir,Bt){g.isEmpty(Dn)?g.each(g.keys(ir),Nr.unset,Nr):(Nr.set(Dn),Bt&&Bt.unsetData&&Bt.unsetData.before&&Bt.unsetData.before.length&&g.each(Bt.unsetData.before,Nr.unset,Nr))},redo:function(Nr,Dn,ir,Bt){g.isEmpty(ir)?g.each(g.keys(Dn),Nr.unset,Nr):(Nr.set(ir),Bt&&Bt.unsetData&&Bt.unsetData.after&&Bt.unsetData.after.length&&g.each(Bt.unsetData.after,Nr.unset,Nr))},on:function(Nr,Dn){var ir=Nr.changedAttributes(),Bt=g.keys(ir),wr=g.pick(Nr.previousAttributes(),Bt),sr=g.keys(wr),gn=(Dn||(Dn={})).unsetData={after:[],before:[]};return Bt.length!=sr.length&&(Bt.length>sr.length?g.each(Bt,function(xt){xt in wr||gn.before.push(xt)},this):g.each(sr,function(xt){xt in ir||gn.after.push(xt)})),{object:Nr,before:wr,after:ir,options:g.clone(Dn)}}},reset:{undo:function(Nr,Dn,ir){Nr.reset(Dn)},redo:function(Nr,Dn,ir){Nr.reset(ir)},on:function(Nr,Dn){return{object:Nr,before:Dn.previousModels,after:g.clone(Nr.models)}}}};function ar(){}function Fn(Nr,Dn,ir,Bt){if("object"==typeof Dn)return g.each(Dn,function(wr,sr){2===Nr?Fn(Nr,wr,ir,Bt):Fn(Nr,sr,wr,ir)});switch(Nr){case 0:ne(ir,"undo","redo","on")&&g.all(g.pick(ir,"undo","redo","on"),g.isFunction)&&(Bt[Dn]=ir);break;case 1:Bt[Dn]&&g.isObject(ir)&&(Bt[Dn]=g.extend({},Bt[Dn],ir));break;case 2:delete Bt[Dn]}return this}ar.prototype=Gt;var fo=b.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(Nr){We("undo",this.attributes)},redo:function(Nr){We("redo",this.attributes)}}),ti=b.Collection.extend({model:fo,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(Nr){this.maximumStackLength=Nr}}),jn=b.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(Nr){this.stack=new ti,this.objectRegistry=new be,this.undoTypes=new ar,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",function(Dn,ir){this.stack.setMaxLength(ir)},this),Nr&&Nr.track&&this.startTracking(),Nr&&Nr.register&&(g.isArray(Nr.register)||g.isArguments(Nr.register)?C(this.register,this,Nr.register):this.register(Nr.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(Nr){ur(this.stack,Nr,B(arguments,1),this.undoTypes)},register:function(){Se("on",arguments,this._addToStack,this)},unregister:function(){Se("off",arguments,this._addToStack,this)},unregisterAll:function(){C(this.unregister,this,this.objectRegistry.get())},undo:function(Nr){lt("undo",this,this.stack,Nr)},undoAll:function(){lt("undo",this,this.stack,!1,!0)},redo:function(Nr){lt("redo",this,this.stack,Nr)},redoAll:function(){lt("redo",this,this.stack,!1,!0)},isAvailable:function(Nr){var Dn=this.stack,ir=Dn.length;switch(Nr){case"undo":return ir>0&&Dn.pointer>-1;case"redo":return ir>0&&Dn.pointer<ir-1;default:return!1}},merge:function(Nr){for(var ir,Dn=g.isArray(Nr)?Nr:B(arguments);ir=Dn.pop();)ir instanceof jn&&ir.stack instanceof ti&&(ir.stack=this.stack)},addUndoType:function(Nr,Dn){Fn(0,Nr,Dn,this.undoTypes)},changeUndoType:function(Nr,Dn){Fn(1,Nr,Dn,this.undoTypes)},removeUndoType:function(Nr){Fn(2,Nr,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return g.extend(jn,{defaults:function(Nr){g.extend(jn.prototype.defaults,Nr)},addUndoType:function(Nr,Dn){Fn(0,Nr,Dn,Gt)},changeUndoType:function(Nr,Dn){Fn(1,Nr,Dn,Gt)},removeUndoType:function(Nr){Fn(2,Nr,void 0,Gt)}}),b.UndoManager=jn})?r.apply(a,o):r)&&(d.exports=c)},4193:(d,a,e)=>{var r,o,g;g="object"==typeof self&&self.self===self&&self||"object"==typeof e.g&&e.g.global===e.g&&e.g,r=[e(5706),e(6411),a],void 0!==(o=function(C,B,ne){g.Backbone=function(c,g,b,w){var C=c.Backbone,B=Array.prototype.slice;g.VERSION="1.4.1",g.$=w,g.noConflict=function(){return c.Backbone=C,this},g.emulateHTTP=!1,g.emulateJSON=!1;var be,ne=g.Events={},ae=/\s+/,Se=function(it,Yt,Or,An,ho){var $n,Cr=0;if(Or&&"object"==typeof Or)for((void 0!==An&&"context"in ho&&void 0===ho.context&&(ho.context=An),$n=b.keys(Or));Cr<$n.length;Cr++)Yt=Se(it,Yt,$n[Cr],Or[$n[Cr]],ho);else if(Or&&ae.test(Or))for($n=Or.split(ae);Cr<$n.length;Cr++)Yt=it(Yt,$n[Cr],An,ho);else Yt=it(Yt,Or,An,ho);return Yt};ne.on=function(it,Yt,Or){return this._events=Se(We,this._events||{},it,Yt,{context:Or,ctx:this,listening:be}),be&&((this._listeners||(this._listeners={}))[be.id]=be,be.interop=!1),this},ne.listenTo=function(it,Yt,Or){if(!it)return this;var An=it._listenId||(it._listenId=b.uniqueId("l")),ho=this._listeningTo||(this._listeningTo={}),Cr=be=ho[An];Cr||(this._listenId||(this._listenId=b.uniqueId("l")),Cr=be=ho[An]=new Fn(this,it));var $n=lt(it,Yt,Or,this);if(be=void 0,$n)throw $n;return Cr.interop&&Cr.on(Yt,Or),this};var We=function(it,Yt,Or,An){if(Or){var ho=it[Yt]||(it[Yt]=[]),Cr=An.context,$n=An.ctx,Cn=An.listening;Cn&&Cn.count++,ho.push({callback:Or,context:Cr,ctx:Cr||$n,listening:Cn})}return it},lt=function(it,Yt,Or,An){try{it.on(Yt,Or,An)}catch(ho){return ho}};ne.off=function(it,Yt,Or){return this._events?(this._events=Se(Ot,this._events,it,Yt,{context:Or,listeners:this._listeners}),this):this},ne.stopListening=function(it,Yt,Or){var An=this._listeningTo;if(!An)return this;for(var ho=it?[it._listenId]:b.keys(An),Cr=0;Cr<ho.length;Cr++){var $n=An[ho[Cr]];if(!$n)break;$n.obj.off(Yt,Or,this),$n.interop&&$n.off(Yt,Or)}return b.isEmpty(An)&&(this._listeningTo=void 0),this};var Ot=function(it,Yt,Or,An){if(it){var Cn,ho=An.context,Cr=An.listeners,$n=0;if(!Yt&&!ho&&!Or){for(Cn=b.keys(Cr);$n<Cn.length;$n++)Cr[Cn[$n]].cleanup();return}for(Cn=Yt?[Yt]:b.keys(it);$n<Cn.length;$n++){var Qa=it[Yt=Cn[$n]];if(!Qa)break;for(var Qs=[],Ns=0;Ns<Qa.length;Ns++){var er=Qa[Ns];if(Or&&Or!==er.callback&&Or!==er.callback._callback||ho&&ho!==er.context)Qs.push(er);else{var un=er.listening;un&&un.off(Yt,Or)}}Qs.length?it[Yt]=Qs:delete it[Yt]}return it}};ne.once=function(it,Yt,Or){var An=Se(ur,{},it,Yt,this.off.bind(this));return"string"==typeof it&&null==Or&&(Yt=void 0),this.on(An,Yt,Or)},ne.listenToOnce=function(it,Yt,Or){var An=Se(ur,{},Yt,Or,this.stopListening.bind(this,it));return this.listenTo(it,An)};var ur=function(it,Yt,Or,An){if(Or){var ho=it[Yt]=b.once(function(){An(Yt,ho),Or.apply(this,arguments)});ho._callback=Or}return it};ne.trigger=function(it){if(!this._events)return this;for(var Yt=Math.max(0,arguments.length-1),Or=Array(Yt),An=0;An<Yt;An++)Or[An]=arguments[An+1];return Se(Gt,this._events,it,void 0,Or),this};var Gt=function(it,Yt,Or,An){if(it){var ho=it[Yt],Cr=it.all;ho&&Cr&&(Cr=Cr.slice()),ho&&ar(ho,An),Cr&&ar(Cr,[Yt].concat(An))}return it},ar=function(it,Yt){var Or,An=-1,ho=it.length,Cr=Yt[0],$n=Yt[1],Cn=Yt[2];switch(Yt.length){case 0:for(;++An<ho;)(Or=it[An]).callback.call(Or.ctx);return;case 1:for(;++An<ho;)(Or=it[An]).callback.call(Or.ctx,Cr);return;case 2:for(;++An<ho;)(Or=it[An]).callback.call(Or.ctx,Cr,$n);return;case 3:for(;++An<ho;)(Or=it[An]).callback.call(Or.ctx,Cr,$n,Cn);return;default:for(;++An<ho;)(Or=it[An]).callback.apply(Or.ctx,Yt);return}},Fn=function(it,Yt){this.id=it._listenId,this.listener=it,this.obj=Yt,this.interop=!0,this.count=0,this._events=void 0};Fn.prototype.on=ne.on,Fn.prototype.off=function(it,Yt){var Or;this.interop?(this._events=Se(Ot,this._events,it,Yt,{context:void 0,listeners:void 0}),Or=!this._events):(this.count--,Or=0===this.count),Or&&this.cleanup()},Fn.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},ne.bind=ne.on,ne.unbind=ne.off,b.extend(g,ne);var fo=g.Model=function(it,Yt){var Or=it||{};Yt||(Yt={}),this.preinitialize.apply(this,arguments),this.cid=b.uniqueId(this.cidPrefix),this.attributes={},Yt.collection&&(this.collection=Yt.collection),Yt.parse&&(Or=this.parse(Or,Yt)||{});var An=b.result(this,"defaults");Or=b.defaults(b.extend({},An,Or),An),this.set(Or,Yt),this.changed={},this.initialize.apply(this,arguments)};b.extend(fo.prototype,ne,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(it){return b.clone(this.attributes)},sync:function(){return g.sync.apply(this,arguments)},get:function(it){return this.attributes[it]},escape:function(it){return b.escape(this.get(it))},has:function(it){return null!=this.get(it)},matches:function(it){return!!b.iteratee(it,this)(this.attributes)},set:function(it,Yt,Or){if(null==it)return this;var An;if("object"==typeof it?(An=it,Or=Yt):(An={})[it]=Yt,Or||(Or={}),!this._validate(An,Or))return!1;var ho=Or.unset,Cr=Or.silent,$n=[],Cn=this._changing;this._changing=!0,Cn||(this._previousAttributes=b.clone(this.attributes),this.changed={});var Qa=this.attributes,Qs=this.changed,Ns=this._previousAttributes;for(var er in An)b.isEqual(Qa[er],Yt=An[er])||$n.push(er),b.isEqual(Ns[er],Yt)?delete Qs[er]:Qs[er]=Yt,ho?delete Qa[er]:Qa[er]=Yt;if(this.idAttribute in An){var un=this.id;this.id=this.get(this.idAttribute),this.trigger("changeId",this,un,Or)}if(!Cr){$n.length&&(this._pending=Or);for(var Mt=0;Mt<$n.length;Mt++)this.trigger("change:"+$n[Mt],this,Qa[$n[Mt]],Or)}if(Cn)return this;if(!Cr)for(;this._pending;)Or=this._pending,this._pending=!1,this.trigger("change",this,Or);return this._pending=!1,this._changing=!1,this},unset:function(it,Yt){return this.set(it,void 0,b.extend({},Yt,{unset:!0}))},clear:function(it){var Yt={};for(var Or in this.attributes)Yt[Or]=void 0;return this.set(Yt,b.extend({},it,{unset:!0}))},hasChanged:function(it){return null==it?!b.isEmpty(this.changed):b.has(this.changed,it)},changedAttributes:function(it){if(!it)return!!this.hasChanged()&&b.clone(this.changed);var An,Yt=this._changing?this._previousAttributes:this.attributes,Or={};for(var ho in it){var Cr=it[ho];b.isEqual(Yt[ho],Cr)||(Or[ho]=Cr,An=!0)}return!!An&&Or},previous:function(it){return null!=it&&this._previousAttributes?this._previousAttributes[it]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(it){it=b.extend({parse:!0},it);var Yt=this,Or=it.success;return it.success=function(An){var ho=it.parse?Yt.parse(An,it):An;if(!Yt.set(ho,it))return!1;Or&&Or.call(it.context,Yt,An,it),Yt.trigger("sync",Yt,An,it)},Na(this,it),this.sync("read",this,it)},save:function(it,Yt,Or){var An;null==it||"object"==typeof it?(An=it,Or=Yt):(An={})[it]=Yt;var ho=(Or=b.extend({validate:!0,parse:!0},Or)).wait;if(An&&!ho){if(!this.set(An,Or))return!1}else if(!this._validate(An,Or))return!1;var Cr=this,$n=Or.success,Cn=this.attributes;Or.success=function(Ns){Cr.attributes=Cn;var er=Or.parse?Cr.parse(Ns,Or):Ns;if(ho&&(er=b.extend({},An,er)),er&&!Cr.set(er,Or))return!1;$n&&$n.call(Or.context,Cr,Ns,Or),Cr.trigger("sync",Cr,Ns,Or)},Na(this,Or),An&&ho&&(this.attributes=b.extend({},Cn,An));var Qa=this.isNew()?"create":Or.patch?"patch":"update";"patch"===Qa&&!Or.attrs&&(Or.attrs=An);var Qs=this.sync(Qa,this,Or);return this.attributes=Cn,Qs},destroy:function(it){it=it?b.clone(it):{};var Yt=this,Or=it.success,An=it.wait,ho=function(){Yt.stopListening(),Yt.trigger("destroy",Yt,Yt.collection,it)};it.success=function($n){An&&ho(),Or&&Or.call(it.context,Yt,$n,it),Yt.isNew()||Yt.trigger("sync",Yt,$n,it)};var Cr=!1;return this.isNew()?b.defer(it.success):(Na(this,it),Cr=this.sync("delete",this,it)),An||ho(),Cr},url:function(){var it=b.result(this,"urlRoot")||b.result(this.collection,"url")||Xa();if(this.isNew())return it;var Yt=this.get(this.idAttribute);return it.replace(/[^\/]$/,"$&/")+encodeURIComponent(Yt)},parse:function(it,Yt){return it},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(it){return this._validate({},b.extend({},it,{validate:!0}))},_validate:function(it,Yt){if(!Yt.validate||!this.validate)return!0;it=b.extend({},this.attributes,it);var Or=this.validationError=this.validate(it,Yt)||null;return!Or||(this.trigger("invalid",this,Or,b.extend(Yt,{validationError:Or})),!1)}});var ti=g.Collection=function(it,Yt){Yt||(Yt={}),this.preinitialize.apply(this,arguments),Yt.model&&(this.model=Yt.model),void 0!==Yt.comparator&&(this.comparator=Yt.comparator),this._reset(),this.initialize.apply(this,arguments),it&&this.reset(it,b.extend({silent:!0},Yt))},jn={add:!0,remove:!0,merge:!0},Nr={add:!0,remove:!1},Dn=function(it,Yt,Or){Or=Math.min(Math.max(Or,0),it.length);var Cr,An=Array(it.length-Or),ho=Yt.length;for(Cr=0;Cr<An.length;Cr++)An[Cr]=it[Cr+Or];for(Cr=0;Cr<ho;Cr++)it[Cr+Or]=Yt[Cr];for(Cr=0;Cr<An.length;Cr++)it[Cr+ho+Or]=An[Cr]};b.extend(ti.prototype,ne,{model:fo,preinitialize:function(){},initialize:function(){},toJSON:function(it){return this.map(function(Yt){return Yt.toJSON(it)})},sync:function(){return g.sync.apply(this,arguments)},add:function(it,Yt){return this.set(it,b.extend({merge:!1},Yt,Nr))},remove:function(it,Yt){Yt=b.extend({},Yt);var Or=!b.isArray(it);it=Or?[it]:it.slice();var An=this._removeModels(it,Yt);return!Yt.silent&&An.length&&(Yt.changes={added:[],merged:[],removed:An},this.trigger("update",this,Yt)),Or?An[0]:An},set:function(it,Yt){if(null!=it){(Yt=b.extend({},jn,Yt)).parse&&!this._isModel(it)&&(it=this.parse(it,Yt)||[]);var Or=!b.isArray(it);it=Or?[it]:it.slice();var An=Yt.at;null!=An&&(An=+An),An>this.length&&(An=this.length),An<0&&(An+=this.length+1);var eo,Si,ho=[],Cr=[],$n=[],Cn=[],Qa={},Qs=Yt.add,Ns=Yt.merge,er=Yt.remove,un=!1,Mt=this.comparator&&null==An&&!1!==Yt.sort,si=b.isString(this.comparator)?this.comparator:null;for(Si=0;Si<it.length;Si++){var Ma=this.get(eo=it[Si]);if(Ma){if(Ns&&eo!==Ma){var Ia=this._isModel(eo)?eo.attributes:eo;Yt.parse&&(Ia=Ma.parse(Ia,Yt)),Ma.set(Ia,Yt),$n.push(Ma),Mt&&!un&&(un=Ma.hasChanged(si))}Qa[Ma.cid]||(Qa[Ma.cid]=!0,ho.push(Ma)),it[Si]=Ma}else Qs&&(eo=it[Si]=this._prepareModel(eo,Yt))&&(Cr.push(eo),this._addReference(eo,Yt),Qa[eo.cid]=!0,ho.push(eo))}if(er){for(Si=0;Si<this.length;Si++)Qa[(eo=this.models[Si]).cid]||Cn.push(eo);Cn.length&&this._removeModels(Cn,Yt)}var ca=!1;if(ho.length&&!Mt&&Qs&&er?(ca=this.length!==ho.length||b.some(this.models,function(bl,Vl){return bl!==ho[Vl]}),this.models.length=0,Dn(this.models,ho,0),this.length=this.models.length):Cr.length&&(Mt&&(un=!0),Dn(this.models,Cr,An??this.length),this.length=this.models.length),un&&this.sort({silent:!0}),!Yt.silent){for(Si=0;Si<Cr.length;Si++)null!=An&&(Yt.index=An+Si),(eo=Cr[Si]).trigger("add",eo,this,Yt);(un||ca)&&this.trigger("sort",this,Yt),(Cr.length||Cn.length||$n.length)&&(Yt.changes={added:Cr,removed:Cn,merged:$n},this.trigger("update",this,Yt))}return Or?it[0]:it}},reset:function(it,Yt){Yt=Yt?b.clone(Yt):{};for(var Or=0;Or<this.models.length;Or++)this._removeReference(this.models[Or],Yt);return Yt.previousModels=this.models,this._reset(),it=this.add(it,b.extend({silent:!0},Yt)),Yt.silent||this.trigger("reset",this,Yt),it},push:function(it,Yt){return this.add(it,b.extend({at:this.length},Yt))},pop:function(it){var Yt=this.at(this.length-1);return this.remove(Yt,it)},unshift:function(it,Yt){return this.add(it,b.extend({at:0},Yt))},shift:function(it){var Yt=this.at(0);return this.remove(Yt,it)},slice:function(){return B.apply(this.models,arguments)},get:function(it){if(null!=it)return this._byId[it]||this._byId[this.modelId(this._isModel(it)?it.attributes:it,it.idAttribute)]||it.cid&&this._byId[it.cid]},has:function(it){return null!=this.get(it)},at:function(it){return it<0&&(it+=this.length),this.models[it]},where:function(it,Yt){return this[Yt?"find":"filter"](it)},findWhere:function(it){return this.where(it,!0)},sort:function(it){var Yt=this.comparator;if(!Yt)throw new Error("Cannot sort a set without a comparator");it||(it={});var Or=Yt.length;return b.isFunction(Yt)&&(Yt=Yt.bind(this)),1===Or||b.isString(Yt)?this.models=this.sortBy(Yt):this.models.sort(Yt),it.silent||this.trigger("sort",this,it),this},pluck:function(it){return this.map(it+"")},fetch:function(it){var Yt=(it=b.extend({parse:!0},it)).success,Or=this;return it.success=function(An){Or[it.reset?"reset":"set"](An,it),Yt&&Yt.call(it.context,Or,An,it),Or.trigger("sync",Or,An,it)},Na(this,it),this.sync("read",this,it)},create:function(it,Yt){var Or=(Yt=Yt?b.clone(Yt):{}).wait;if(!(it=this._prepareModel(it,Yt)))return!1;Or||this.add(it,Yt);var An=this,ho=Yt.success;return Yt.success=function(Cr,$n,Cn){Or&&An.add(Cr,Cn),ho&&ho.call(Cn.context,Cr,$n,Cn)},it.save(null,Yt),it},parse:function(it,Yt){return it},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(it,Yt){return it[Yt||this.model.prototype.idAttribute||"id"]},values:function(){return new Bt(this,wr)},keys:function(){return new Bt(this,sr)},entries:function(){return new Bt(this,gn)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(it,Yt){return this._isModel(it)?(it.collection||(it.collection=this),it):((Yt=Yt?b.clone(Yt):{}).collection=this,(Or=this.model.prototype?new this.model(it,Yt):this.model(it,Yt)).validationError?(this.trigger("invalid",this,Or.validationError,Yt),!1):Or);var Or},_removeModels:function(it,Yt){for(var Or=[],An=0;An<it.length;An++){var ho=this.get(it[An]);if(ho){var Cr=this.indexOf(ho);this.models.splice(Cr,1),this.length--,delete this._byId[ho.cid];var $n=this.modelId(ho.attributes,ho.idAttribute);null!=$n&&delete this._byId[$n],Yt.silent||(Yt.index=Cr,ho.trigger("remove",ho,this,Yt)),Or.push(ho),this._removeReference(ho,Yt)}}return Or},_isModel:function(it){return it instanceof fo},_addReference:function(it,Yt){this._byId[it.cid]=it;var Or=this.modelId(it.attributes,it.idAttribute);null!=Or&&(this._byId[Or]=it),it.on("all",this._onModelEvent,this)},_removeReference:function(it,Yt){delete this._byId[it.cid];var Or=this.modelId(it.attributes,it.idAttribute);null!=Or&&delete this._byId[Or],this===it.collection&&delete it.collection,it.off("all",this._onModelEvent,this)},_onModelEvent:function(it,Yt,Or,An){if(Yt){if(("add"===it||"remove"===it)&&Or!==this)return;if("destroy"===it&&this.remove(Yt,An),"changeId"===it){var ho=this.modelId(Yt.previousAttributes(),Yt.idAttribute),Cr=this.modelId(Yt.attributes,Yt.idAttribute);null!=ho&&delete this._byId[ho],null!=Cr&&(this._byId[Cr]=Yt)}}this.trigger.apply(this,arguments)}});var ir="function"==typeof Symbol&&Symbol.iterator;ir&&(ti.prototype[ir]=ti.prototype.values);var Bt=function(it,Yt){this._collection=it,this._kind=Yt,this._index=0},wr=1,sr=2,gn=3;ir&&(Bt.prototype[ir]=function(){return this}),Bt.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var Yt,it=this._collection.at(this._index);if(this._index++,this._kind===wr)Yt=it;else{var Or=this._collection.modelId(it.attributes,it.idAttribute);Yt=this._kind===sr?Or:[Or,it]}return{value:Yt,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var xt=g.View=function(it){this.cid=b.uniqueId("view"),this.preinitialize.apply(this,arguments),b.extend(this,b.pick(it,_o)),this._ensureElement(),this.initialize.apply(this,arguments)},Eo=/^(\S+)\s*(.*)$/,_o=["model","collection","el","id","attributes","className","tagName","events"];b.extend(xt.prototype,ne,{tagName:"div",$:function(it){return this.$el.find(it)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(it){return this.undelegateEvents(),this._setElement(it),this.delegateEvents(),this},_setElement:function(it){this.$el=it instanceof g.$?it:g.$(it),this.el=this.$el[0]},delegateEvents:function(it){if(it||(it=b.result(this,"events")),!it)return this;for(var Yt in this.undelegateEvents(),it){var Or=it[Yt];if(b.isFunction(Or)||(Or=this[Or]),Or){var An=Yt.match(Eo);this.delegate(An[1],An[2],Or.bind(this))}}return this},delegate:function(it,Yt,Or){return this.$el.on(it+".delegateEvents"+this.cid,Yt,Or),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(it,Yt,Or){return this.$el.off(it+".delegateEvents"+this.cid,Yt,Or),this},_createElement:function(it){return document.createElement(it)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var it=b.extend({},b.result(this,"attributes"));this.id&&(it.id=b.result(this,"id")),this.className&&(it.class=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(it)}},_setAttributes:function(it){this.$el.attr(it)}});var Sa=function(it,Yt,Or,An){b.each(Or,function(ho,Cr){Yt[Cr]&&(it.prototype[Cr]=function(it,Yt,Or,An){switch(Yt){case 1:return function(){return it[Or](this[An])};case 2:return function(ho){return it[Or](this[An],ho)};case 3:return function(ho,Cr){return it[Or](this[An],Ha(ho,this),Cr)};case 4:return function(ho,Cr,$n){return it[Or](this[An],Ha(ho,this),Cr,$n)};default:return function(){var ho=B.call(arguments);return ho.unshift(this[An]),it[Or].apply(it,ho)}}}(Yt,ho,Cr,An))})},Ha=function(it,Yt){return b.isFunction(it)?it:b.isObject(it)&&!Yt._isModel(it)?Us(it):b.isString(it)?function(Or){return Or.get(it)}:it},Us=function(it){var Yt=b.matches(it);return function(Or){return Yt(Or.attributes)}};b.each([[ti,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[fo,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],function(it){var Yt=it[0],Or=it[1],An=it[2];Yt.mixin=function(ho){var Cr=b.reduce(b.functions(ho),function($n,Cn){return $n[Cn]=0,$n},{});Sa(Yt,ho,Cr,An)},Sa(Yt,b,Or,An)}),g.sync=function(it,Yt,Or){var An=Li[it];b.defaults(Or||(Or={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var ho={type:An,dataType:"json"};if(Or.url||(ho.url=b.result(Yt,"url")||Xa()),null==Or.data&&Yt&&("create"===it||"update"===it||"patch"===it)&&(ho.contentType="application/json",ho.data=JSON.stringify(Or.attrs||Yt.toJSON(Or))),Or.emulateJSON&&(ho.contentType="application/x-www-form-urlencoded",ho.data=ho.data?{model:ho.data}:{}),Or.emulateHTTP&&("PUT"===An||"DELETE"===An||"PATCH"===An)){ho.type="POST",Or.emulateJSON&&(ho.data._method=An);var Cr=Or.beforeSend;Or.beforeSend=function(Qa){if(Qa.setRequestHeader("X-HTTP-Method-Override",An),Cr)return Cr.apply(this,arguments)}}"GET"!==ho.type&&!Or.emulateJSON&&(ho.processData=!1);var $n=Or.error;Or.error=function(Qa,Qs,Ns){Or.textStatus=Qs,Or.errorThrown=Ns,$n&&$n.call(Or.context,Qa,Qs,Ns)};var Cn=Or.xhr=g.ajax(b.extend(ho,Or));return Yt.trigger("request",Yt,Cn,Or),Cn};var Li={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var la=g.Router=function(it){it||(it={}),this.preinitialize.apply(this,arguments),it.routes&&(this.routes=it.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},ta=/\((.*?)\)/g,ea=/(\(\?)?:\w+/g,is=/\*\w+/g,ps=/[\-{}\[\]+?.,\\\^$|#\s]/g;b.extend(la.prototype,ne,{preinitialize:function(){},initialize:function(){},route:function(it,Yt,Or){b.isRegExp(it)||(it=this._routeToRegExp(it)),b.isFunction(Yt)&&(Or=Yt,Yt=""),Or||(Or=this[Yt]);var An=this;return g.history.route(it,function(ho){var Cr=An._extractParameters(it,ho);!1!==An.execute(Or,Cr,Yt)&&(An.trigger.apply(An,["route:"+Yt].concat(Cr)),An.trigger("route",Yt,Cr),g.history.trigger("route",An,Yt,Cr))}),this},execute:function(it,Yt,Or){it&&it.apply(this,Yt)},navigate:function(it,Yt){return g.history.navigate(it,Yt),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var it,Yt=b.keys(this.routes);null!=(it=Yt.pop());)this.route(it,this.routes[it])}},_routeToRegExp:function(it){return it=it.replace(ps,"\\$&").replace(ta,"(?:$1)?").replace(ea,function(Yt,Or){return Or?Yt:"([^/?]+)"}).replace(is,"([^?]*?)"),new RegExp("^"+it+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(it,Yt){var Or=it.exec(Yt).slice(1);return b.map(Or,function(An,ho){return ho===Or.length-1?An||null:An?decodeURIComponent(An):null})}});var Pa=g.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),typeof window<"u"&&(this.location=window.location,this.history=window.history)},wn=/^[#\/]|\s+$/g,Hi=/^\/+|\/+$/g,Ji=/#.*$/;Pa.started=!1,b.extend(Pa.prototype,ne,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(it){return decodeURI(it.replace(/%25/g,"%2525"))},getSearch:function(){var it=this.location.href.replace(/#.*/,"").match(/\?.+/);return it?it[0]:""},getHash:function(it){var Yt=(it||this).location.href.match(/#(.*)$/);return Yt?Yt[1]:""},getPath:function(){var it=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===it.charAt(0)?it.slice(1):it},getFragment:function(it){return null==it&&(it=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),it.replace(wn,"")},start:function(it){if(Pa.started)throw new Error("Backbone.history has already been started");if(Pa.started=!0,this.options=b.extend({root:"/"},this.options,it),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(Hi,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var Yt=this.root.slice(0,-1)||"/";return this.location.replace(Yt+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var Or=document.body,An=Or.insertBefore(this.iframe,Or.firstChild).contentWindow;An.document.open(),An.document.close(),An.location.hash="#"+this.fragment}var ho=window.addEventListener||function(Cr,$n){return attachEvent("on"+Cr,$n)};if(this._usePushState?ho("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?ho("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var it=window.removeEventListener||function(Yt,Or){return detachEvent("on"+Yt,Or)};this._usePushState?it("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&it("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),Pa.started=!1},route:function(it,Yt){this.handlers.unshift({route:it,callback:Yt})},checkUrl:function(it){var Yt=this.getFragment();if(Yt===this.fragment&&this.iframe&&(Yt=this.getHash(this.iframe.contentWindow)),Yt===this.fragment)return!1;this.iframe&&this.navigate(Yt),this.loadUrl()},loadUrl:function(it){return!!this.matchRoot()&&(it=this.fragment=this.getFragment(it),b.some(this.handlers,function(Yt){if(Yt.route.test(it))return Yt.callback(it),!0}))},navigate:function(it,Yt){if(!Pa.started)return!1;(!Yt||!0===Yt)&&(Yt={trigger:!!Yt}),it=this.getFragment(it||"");var Or=this.root;(""===it||"?"===it.charAt(0))&&(Or=Or.slice(0,-1)||"/");var An=Or+it;it=it.replace(Ji,"");var ho=this.decodeFragment(it);if(this.fragment!==ho){if(this.fragment=ho,this._usePushState)this.history[Yt.replace?"replaceState":"pushState"]({},document.title,An);else{if(!this._wantsHashChange)return this.location.assign(An);if(this._updateHash(this.location,it,Yt.replace),this.iframe&&it!==this.getHash(this.iframe.contentWindow)){var Cr=this.iframe.contentWindow;Yt.replace||(Cr.document.open(),Cr.document.close()),this._updateHash(Cr.location,it,Yt.replace)}}if(Yt.trigger)return this.loadUrl(it)}},_updateHash:function(it,Yt,Or){if(Or){var An=it.href.replace(/(javascript:|#).*$/,"");it.replace(An+"#"+Yt)}else it.hash="#"+Yt}}),g.history=new Pa;fo.extend=ti.extend=la.extend=xt.extend=Pa.extend=function(it,Yt){var An,Or=this;return An=it&&b.has(it,"constructor")?it.constructor:function(){return Or.apply(this,arguments)},b.extend(An,Or,Yt),An.prototype=b.create(Or.prototype,it),An.prototype.constructor=An,An.__super__=Or.prototype,An};var Xa=function(){throw new Error('A "url" property or function must be specified')},Na=function(it,Yt){var Or=Yt.error;Yt.error=function(An){Or&&Or.call(Yt.context,it,An,Yt),it.trigger("error",it,An,Yt)}};return g}(g,ne,C,B)}.apply(a,r))&&(d.exports=o)},3640:(d,a,e)=>{!function(r){r.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(c,g){return/^[;{}]$/.test(g)}}),r.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(c,g,b,w){return this.jsonMode?/^[\[,{]$/.test(g)||/^}/.test(b):(";"!=g||!w.lexical||")"!=w.lexical.type)&&/^[;{}]$/.test(g)&&!/^;/.test(b)}});var o=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/;r.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(c,g,b,w){var C=!1;return"html"==this.configuration&&(C=!!w.context&&o.test(w.context.tagName)),!C&&("tag"==c&&/>$/.test(g)&&w.context||/^</.test(b))}}),r.defineExtension("commentRange",function(c,g,b){var w=this,C=r.innerMode(w.getMode(),w.getTokenAt(g).state).mode;w.operation(function(){if(c)w.replaceRange(C.commentEnd,b),w.replaceRange(C.commentStart,g),g.line==b.line&&g.ch==b.ch&&w.setCursor(g.line,g.ch+C.commentStart.length);else{var B=w.getRange(g,b),ne=B.indexOf(C.commentStart),ae=B.lastIndexOf(C.commentEnd);ne>-1&&ae>-1&&ae>ne&&(B=B.substr(0,ne)+B.substring(ne+C.commentStart.length,ae)+B.substr(ae+C.commentEnd.length)),w.replaceRange(B,g,b)}})}),r.defineExtension("autoIndentRange",function(c,g){var b=this;this.operation(function(){for(var w=c.line;w<=g.line;w++)b.indentLine(w,"smart")})}),r.defineExtension("autoFormatRange",function(c,g){var b=this,w=b.getMode(),C=b.getRange(c,g).split("\n"),B=r.copyState(w,b.getTokenAt(c).state),ne=b.getOption("tabSize"),ae="",be=0,Se=0===c.ch;function We(){ae+="\n",Se=!0,++be}for(var lt=0;lt<C.length;++lt){for(var Ot=new r.StringStream(C[lt],ne);!Ot.eol();){var ur=r.innerMode(w,B),Gt=w.token(Ot,B),ar=Ot.current();Ot.start=Ot.pos,(!Se||/\S/.test(ar))&&(ae+=ar,Se=!1),!Se&&ur.mode.newlineAfterToken&&ur.mode.newlineAfterToken(Gt,ar,Ot.string.slice(Ot.pos)||C[lt+1]||"",ur.state)&&We()}!Ot.pos&&w.blankLine&&w.blankLine(B),!Se&&lt<C.length-1&&We()}b.operation(function(){b.replaceRange(ae,c,g);for(var Fn=c.line+1,fo=c.line+be;Fn<=fo;++Fn)b.indentLine(Fn,"smart");b.setSelection(c,b.getCursor(!1))})})}(e(4408))},4408:function(d){d.exports=function(){var a=navigator.userAgent,e=navigator.platform,r=/gecko\/\d/i.test(a),o=/MSIE \d/.test(a),c=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(a),g=/Edge\/(\d+)/.exec(a),b=o||c||g,w=b&&(o?document.documentMode||6:+(g||c)[1]),C=!g&&/WebKit\//.test(a),B=C&&/Qt\/\d+\.\d+/.test(a),ne=!g&&/Chrome\//.test(a),ae=/Opera\//.test(a),be=/Apple Computer/.test(navigator.vendor),Se=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(a),We=/PhantomJS/.test(a),lt=be&&(/Mobile\/\w+/.test(a)||navigator.maxTouchPoints>2),Ot=/Android/.test(a),ur=lt||Ot||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(a),Gt=lt||/Mac/.test(e),ar=/\bCrOS\b/.test(a),Fn=/win/i.test(e),fo=ae&&a.match(/Version\/(\d*\.\d*)/);fo&&(fo=Number(fo[1])),fo&&fo>=15&&(ae=!1,C=!0);var ti=Gt&&(B||ae&&(null==fo||fo<12.11)),jn=r||b&&w>=9;function Nr(p){return new RegExp("(^|\\s)"+p+"(?:$|\\s)\\s*")}var gn,Dn=function(p,_){var A=p.className,M=Nr(_).exec(A);if(M){var V=A.slice(M.index+M[0].length);p.className=A.slice(0,M.index)+(V?M[1]+V:"")}};function ir(p){for(var _=p.childNodes.length;_>0;--_)p.removeChild(p.firstChild);return p}function Bt(p,_){return ir(p).appendChild(_)}function wr(p,_,A,M){var V=document.createElement(p);if(A&&(V.className=A),M&&(V.style.cssText=M),"string"==typeof _)V.appendChild(document.createTextNode(_));else if(_)for(var ve=0;ve<_.length;++ve)V.appendChild(_[ve]);return V}function sr(p,_,A,M){var V=wr(p,_,A,M);return V.setAttribute("role","presentation"),V}function xt(p,_){if(3==_.nodeType&&(_=_.parentNode),p.contains)return p.contains(_);do{if(11==_.nodeType&&(_=_.host),_==p)return!0}while(_=_.parentNode)}function Eo(){var p;try{p=document.activeElement}catch{p=document.body||null}for(;p&&p.shadowRoot&&p.shadowRoot.activeElement;)p=p.shadowRoot.activeElement;return p}function _o(p,_){var A=p.className;Nr(_).test(A)||(p.className+=(A?" ":"")+_)}function mi(p,_){for(var A=p.split(" "),M=0;M<A.length;M++)A[M]&&!Nr(A[M]).test(_)&&(_+=" "+A[M]);return _}gn=document.createRange?function(p,_,A,M){var V=document.createRange();return V.setEnd(M||p,A),V.setStart(p,_),V}:function(p,_,A){var M=document.body.createTextRange();try{M.moveToElementText(p.parentNode)}catch{return M}return M.collapse(!0),M.moveEnd("character",A),M.moveStart("character",_),M};var Sa=function(p){p.select()};function Ha(p){var _=Array.prototype.slice.call(arguments,1);return function(){return p.apply(null,_)}}function Us(p,_,A){for(var M in _||(_={}),p)p.hasOwnProperty(M)&&(!1!==A||!_.hasOwnProperty(M))&&(_[M]=p[M]);return _}function yo(p,_,A,M,V){null==_&&-1==(_=p.search(/[^\s\u00a0]/))&&(_=p.length);for(var ve=M||0,Ie=V||0;;){var He=p.indexOf("\t",ve);if(He<0||He>=_)return Ie+(_-ve);Ie+=He-ve,Ie+=A-Ie%A,ve=He+1}}lt?Sa=function(p){p.selectionStart=0,p.selectionEnd=p.value.length}:b&&(Sa=function(p){try{p.select()}catch{}});var Oo=function(){this.id=null,this.f=null,this.time=0,this.handler=Ha(this.onTimeout,this)};function Li(p,_){for(var A=0;A<p.length;++A)if(p[A]==_)return A;return-1}Oo.prototype.onTimeout=function(p){p.id=0,p.time<=+new Date?p.f():setTimeout(p.handler,p.time-+new Date)},Oo.prototype.set=function(p,_){this.f=_;var A=+new Date+p;(!this.id||A<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,p),this.time=A)};var la=50,ta={toString:function(){return"CodeMirror.Pass"}},ea={scroll:!1},is={origin:"*mouse"},ps={origin:"+move"};function Pa(p,_,A){for(var M=0,V=0;;){var ve=p.indexOf("\t",M);-1==ve&&(ve=p.length);var Ie=ve-M;if(ve==p.length||V+Ie>=_)return M+Math.min(Ie,_-V);if(V+=ve-M,M=ve+1,(V+=A-V%A)>=_)return M}}var wn=[""];function Hi(p){for(;wn.length<=p;)wn.push(Ji(wn)+" ");return wn[p]}function Ji(p){return p[p.length-1]}function bs(p,_){for(var A=[],M=0;M<p.length;M++)A[M]=_(p[M],M);return A}function Na(){}function it(p,_){var A;return Object.create?A=Object.create(p):(Na.prototype=p,A=new Na),_&&Us(_,A),A}var Yt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Or(p){return/\w/.test(p)||p>"\x80"&&(p.toUpperCase()!=p.toLowerCase()||Yt.test(p))}function An(p,_){return _?!!(_.source.indexOf("\\w")>-1&&Or(p))||_.test(p):Or(p)}function ho(p){for(var _ in p)if(p.hasOwnProperty(_)&&p[_])return!1;return!0}var Cr=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function $n(p){return p.charCodeAt(0)>=768&&Cr.test(p)}function Cn(p,_,A){for(;(A<0?_>0:_<p.length)&&$n(p.charAt(_));)_+=A;return _}function Qa(p,_,A){for(var M=_>A?-1:1;;){if(_==A)return _;var V=(_+A)/2,ve=M<0?Math.ceil(V):Math.floor(V);if(ve==_)return p(ve)?_:A;p(ve)?A=ve:_=ve+M}}var Ns=null;function er(p,_,A){var M;Ns=null;for(var V=0;V<p.length;++V){var ve=p[V];if(ve.from<_&&ve.to>_)return V;ve.to==_&&(ve.from!=ve.to&&"before"==A?M=V:Ns=V),ve.from==_&&(ve.from!=ve.to&&"before"!=A?M=V:Ns=V)}return M??Ns}var un=function(){function A(pt){return pt<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(pt):1424<=pt&&pt<=1524?"R":1536<=pt&&pt<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(pt-1536):1774<=pt&&pt<=2220?"r":8192<=pt&&pt<=8203?"w":8204==pt?"b":"L"}var M=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,V=/[stwN]/,ve=/[LRr]/,Ie=/[Lb1n]/,He=/[1n]/;function rt(pt,Er,Vr){this.level=pt,this.from=Er,this.to=Vr}return function(pt,Er){var Vr="ltr"==Er?"L":"R";if(0==pt.length||"ltr"==Er&&!M.test(pt))return!1;for(var Hn=pt.length,Sn=[],$o=0;$o<Hn;++$o)Sn.push(A(pt.charCodeAt($o)));for(var wi=0,Yi=Vr;wi<Hn;++wi){var ha=Sn[wi];"m"==ha?Sn[wi]=Yi:Yi=ha}for(var Za=0,ma=Vr;Za<Hn;++Za){var Ga=Sn[Za];"1"==Ga&&"r"==ma?Sn[Za]="n":ve.test(Ga)&&(ma=Ga,"r"==Ga&&(Sn[Za]="R"))}for(var Ms=1,xs=Sn[0];Ms<Hn-1;++Ms){var Pl=Sn[Ms];"+"==Pl&&"1"==xs&&"1"==Sn[Ms+1]?Sn[Ms]="1":","==Pl&&xs==Sn[Ms+1]&&("1"==xs||"n"==xs)&&(Sn[Ms]=xs),xs=Pl}for(var uu=0;uu<Hn;++uu){var Ep=Sn[uu];if(","==Ep)Sn[uu]="N";else if("%"==Ep){var Hu=void 0;for(Hu=uu+1;Hu<Hn&&"%"==Sn[Hu];++Hu);for(var Xh=uu&&"!"==Sn[uu-1]||Hu<Hn&&"1"==Sn[Hu]?"1":"N",Oh=uu;Oh<Hu;++Oh)Sn[Oh]=Xh;uu=Hu-1}}for(var Zd=0,Dh=Vr;Zd<Hn;++Zd){var $p=Sn[Zd];"L"==Dh&&"1"==$p?Sn[Zd]="L":ve.test($p)&&(Dh=$p)}for(var pp=0;pp<Hn;++pp)if(V.test(Sn[pp])){var Kd=void 0;for(Kd=pp+1;Kd<Hn&&V.test(Sn[Kd]);++Kd);for(var od="L"==(pp?Sn[pp-1]:Vr),_b=od==("L"==(Kd<Hn?Sn[Kd]:Vr))?od?"L":"R":Vr,j_=pp;j_<Kd;++j_)Sn[j_]=_b;pp=Kd-1}for(var Vg,xf=[],Op=0;Op<Hn;)if(Ie.test(Sn[Op])){var tO=Op;for(++Op;Op<Hn&&Ie.test(Sn[Op]);++Op);xf.push(new rt(0,tO,Op))}else{var Av=Op,By=xf.length,Wy="rtl"==Er?1:0;for(++Op;Op<Hn&&"L"!=Sn[Op];++Op);for(var $f=Av;$f<Op;)if(He.test(Sn[$f])){Av<$f&&(xf.splice(By,0,new rt(1,Av,$f)),By+=Wy);var yb=$f;for(++$f;$f<Op&&He.test(Sn[$f]);++$f);xf.splice(By,0,new rt(2,yb,$f)),By+=Wy,Av=$f}else++$f;Av<Op&&xf.splice(By,0,new rt(1,Av,Op))}return"ltr"==Er&&(1==xf[0].level&&(Vg=pt.match(/^\s+/))&&(xf[0].from=Vg[0].length,xf.unshift(new rt(0,0,Vg[0].length))),1==Ji(xf).level&&(Vg=pt.match(/\s+$/))&&(Ji(xf).to-=Vg[0].length,xf.push(new rt(0,Hn-Vg[0].length,Hn)))),"rtl"==Er?xf.reverse():xf}}();function Mt(p,_){var A=p.order;return null==A&&(A=p.order=un(p.text,_)),A}var si=[],eo=function(p,_,A){if(p.addEventListener)p.addEventListener(_,A,!1);else if(p.attachEvent)p.attachEvent("on"+_,A);else{var M=p._handlers||(p._handlers={});M[_]=(M[_]||si).concat(A)}};function Si(p,_){return p._handlers&&p._handlers[_]||si}function Ma(p,_,A){if(p.removeEventListener)p.removeEventListener(_,A,!1);else if(p.detachEvent)p.detachEvent("on"+_,A);else{var M=p._handlers,V=M&&M[_];if(V){var ve=Li(V,A);ve>-1&&(M[_]=V.slice(0,ve).concat(V.slice(ve+1)))}}}function Ia(p,_){var A=Si(p,_);if(A.length)for(var M=Array.prototype.slice.call(arguments,2),V=0;V<A.length;++V)A[V].apply(null,M)}function ca(p,_,A){return"string"==typeof _&&(_={type:_,preventDefault:function(){this.defaultPrevented=!0}}),Ia(p,A||_.type,p,_),ap(_)||_.codemirrorIgnore}function fs(p){var _=p._handlers&&p._handlers.cursorActivity;if(_)for(var A=p.curOp.cursorActivityHandlers||(p.curOp.cursorActivityHandlers=[]),M=0;M<_.length;++M)-1==Li(A,_[M])&&A.push(_[M])}function bl(p,_){return Si(p,_).length>0}function Vl(p){p.prototype.on=function(_,A){eo(this,_,A)},p.prototype.off=function(_,A){Ma(this,_,A)}}function kl(p){p.preventDefault?p.preventDefault():p.returnValue=!1}function Vu(p){p.stopPropagation?p.stopPropagation():p.cancelBubble=!0}function ap(p){return null!=p.defaultPrevented?p.defaultPrevented:0==p.returnValue}function Vt(p){kl(p),Vu(p)}function $r(p){return p.target||p.srcElement}function In(p){var _=p.which;return null==_&&(1&p.button?_=1:2&p.button?_=3:4&p.button&&(_=2)),Gt&&p.ctrlKey&&1==_&&(_=3),_}var pa,$s,fi=function(){if(b&&w<9)return!1;var p=wr("div");return"draggable"in p||"dragDrop"in p}();function ms(p){if(null==pa){var _=wr("span","\u200b");Bt(p,wr("span",[_,document.createTextNode("x")])),0!=p.firstChild.offsetHeight&&(pa=_.offsetWidth<=1&&_.offsetHeight>2&&!(b&&w<8))}var A=pa?wr("span","\u200b"):wr("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return A.setAttribute("cm-text",""),A}function Ud(p){if(null!=$s)return $s;var _=Bt(p,document.createTextNode("A\u062eA")),A=gn(_,0,1).getBoundingClientRect(),M=gn(_,1,2).getBoundingClientRect();return ir(p),!(!A||A.left==A.right)&&($s=M.right-A.right<3)}var p,lu=3!="\n\nb".split(/\n/).length?function(p){for(var _=0,A=[],M=p.length;_<=M;){var V=p.indexOf("\n",_);-1==V&&(V=p.length);var ve=p.slice(_,"\r"==p.charAt(V-1)?V-1:V),Ie=ve.indexOf("\r");-1!=Ie?(A.push(ve.slice(0,Ie)),_+=Ie+1):(A.push(ve),_=V+1)}return A}:function(p){return p.split(/\r\n?|\n/)},Ru=window.getSelection?function(p){try{return p.selectionStart!=p.selectionEnd}catch{return!1}}:function(p){var _;try{_=p.ownerDocument.selection.createRange()}catch{}return!(!_||_.parentElement()!=p)&&0!=_.compareEndPoints("StartToEnd",_)},zh="oncopy"in(p=wr("div"))||(p.setAttribute("oncopy","return;"),"function"==typeof p.oncopy),sp=null;var vm={},cu={};function ju(p,_){arguments.length>2&&(_.dependencies=Array.prototype.slice.call(arguments,2)),vm[p]=_}function Hh(p){if("string"==typeof p&&cu.hasOwnProperty(p))p=cu[p];else if(p&&"string"==typeof p.name&&cu.hasOwnProperty(p.name)){var _=cu[p.name];"string"==typeof _&&(_={name:_}),(p=it(_,p)).name=_.name}else{if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+xml$/.test(p))return Hh("application/xml");if("string"==typeof p&&/^[\w\-]+\/[\w\-]+\+json$/.test(p))return Hh("application/json")}return"string"==typeof p?{name:p}:p||{name:"null"}}function nc(p,_){_=Hh(_);var A=vm[_.name];if(!A)return nc(p,"text/plain");var M=A(p,_);if(Hf.hasOwnProperty(_.name)){var V=Hf[_.name];for(var ve in V)V.hasOwnProperty(ve)&&(M.hasOwnProperty(ve)&&(M["_"+ve]=M[ve]),M[ve]=V[ve])}if(M.name=_.name,_.helperType&&(M.helperType=_.helperType),_.modeProps)for(var Ie in _.modeProps)M[Ie]=_.modeProps[Ie];return M}var Hf={};function Zs(p,_){Us(_,Hf.hasOwnProperty(p)?Hf[p]:Hf[p]={})}function Gp(p,_){if(!0===_)return _;if(p.copyState)return p.copyState(_);var A={};for(var M in _){var V=_[M];V instanceof Array&&(V=V.concat([])),A[M]=V}return A}function Cd(p,_){for(var A;p.innerMode&&(A=p.innerMode(_))&&A.mode!=p;)_=A.state,p=A.mode;return A||{mode:p,state:_}}function Gf(p,_,A){return!p.startState||p.startState(_,A)}var Cc=function(p,_,A){this.pos=this.start=0,this.string=p,this.tabSize=_||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=A};function Ua(p,_){if((_-=p.first)<0||_>=p.size)throw new Error("There is no line "+(_+p.first)+" in the document.");for(var A=p;!A.lines;)for(var M=0;;++M){var V=A.children[M],ve=V.chunkSize();if(_<ve){A=V;break}_-=ve}return A.lines[_]}function lp(p,_,A){var M=[],V=_.line;return p.iter(_.line,A.line+1,function(ve){var Ie=ve.text;V==A.line&&(Ie=Ie.slice(0,A.ch)),V==_.line&&(Ie=Ie.slice(_.ch)),M.push(Ie),++V}),M}function _f(p,_,A){var M=[];return p.iter(_,A,function(V){M.push(V.text)}),M}function Bd(p,_){var A=_-p.height;if(A)for(var M=p;M;M=M.parent)M.height+=A}function rl(p){if(null==p.parent)return null;for(var _=p.parent,A=Li(_.lines,p),M=_.parent;M;_=M,M=M.parent)for(var V=0;M.children[V]!=_;++V)A+=M.children[V].chunkSize();return A+_.first}function Jc(p,_){var A=p.first;e:do{for(var M=0;M<p.children.length;++M){var V=p.children[M],ve=V.height;if(_<ve){p=V;continue e}_-=ve,A+=V.chunkSize()}return A}while(!p.lines);for(var Ie=0;Ie<p.lines.length;++Ie){var rt=p.lines[Ie].height;if(_<rt)break;_-=rt}return A+Ie}function _m(p,_){return _>=p.first&&_<p.first+p.size}function ym(p,_){return String(p.lineNumberFormatter(_+p.firstLineNumber))}function Ai(p,_,A){if(void 0===A&&(A=null),!(this instanceof Ai))return new Ai(p,_,A);this.line=p,this.ch=_,this.sticky=A}function Rs(p,_){return p.line-_.line||p.ch-_.ch}function wh(p,_){return p.sticky==_.sticky&&0==Rs(p,_)}function At(p){return Ai(p.line,p.ch)}function Zr(p,_){return Rs(p,_)<0?_:p}function ii(p,_){return Rs(p,_)<0?p:_}function Ii(p,_){return Math.max(p.first,Math.min(_,p.first+p.size-1))}function Zi(p,_){if(_.line<p.first)return Ai(p.first,0);var A=p.first+p.size-1;return _.line>A?Ai(A,Ua(p,A).text.length):function fl(p,_){var A=p.ch;return null==A||A>_?Ai(p.line,_):A<0?Ai(p.line,0):p}(_,Ua(p,_.line).text.length)}function jl(p,_){for(var A=[],M=0;M<_.length;M++)A[M]=Zi(p,_[M]);return A}Cc.prototype.eol=function(){return this.pos>=this.string.length},Cc.prototype.sol=function(){return this.pos==this.lineStart},Cc.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Cc.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Cc.prototype.eat=function(p){var _=this.string.charAt(this.pos);if("string"==typeof p?_==p:_&&(p.test?p.test(_):p(_)))return++this.pos,_},Cc.prototype.eatWhile=function(p){for(var _=this.pos;this.eat(p););return this.pos>_},Cc.prototype.eatSpace=function(){for(var p=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>p},Cc.prototype.skipToEnd=function(){this.pos=this.string.length},Cc.prototype.skipTo=function(p){var _=this.string.indexOf(p,this.pos);if(_>-1)return this.pos=_,!0},Cc.prototype.backUp=function(p){this.pos-=p},Cc.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=yo(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?yo(this.string,this.lineStart,this.tabSize):0)},Cc.prototype.indentation=function(){return yo(this.string,null,this.tabSize)-(this.lineStart?yo(this.string,this.lineStart,this.tabSize):0)},Cc.prototype.match=function(p,_,A){if("string"!=typeof p){var ve=this.string.slice(this.pos).match(p);return ve&&ve.index>0?null:(ve&&!1!==_&&(this.pos+=ve[0].length),ve)}var M=function(Ie){return A?Ie.toLowerCase():Ie};if(M(this.string.substr(this.pos,p.length))==M(p))return!1!==_&&(this.pos+=p.length),!0},Cc.prototype.current=function(){return this.string.slice(this.start,this.pos)},Cc.prototype.hideFirstChars=function(p,_){this.lineStart+=p;try{return _()}finally{this.lineStart-=p}},Cc.prototype.lookAhead=function(p){var _=this.lineOracle;return _&&_.lookAhead(p)},Cc.prototype.baseToken=function(){var p=this.lineOracle;return p&&p.baseToken(this.pos)};var Mc=function(p,_){this.state=p,this.lookAhead=_},Uc=function(p,_,A,M){this.state=_,this.doc=p,this.line=A,this.maxLookAhead=M||0,this.baseTokens=null,this.baseTokenPos=1};function g_(p,_,A,M){var V=[p.state.modeGen],ve={};Cv(p,_.text,p.doc.mode,A,function(pt,Er){return V.push(pt,Er)},ve,M);for(var Ie=A.state,He=function(pt){A.baseTokens=V;var Er=p.state.overlays[pt],Vr=1,Hn=0;A.state=!0,Cv(p,_.text,Er.mode,A,function(Sn,$o){for(var wi=Vr;Hn<Sn;){var Yi=V[Vr];Yi>Sn&&V.splice(Vr,1,Sn,V[Vr+1],Yi),Vr+=2,Hn=Math.min(Sn,Yi)}if($o)if(Er.opaque)V.splice(wi,Vr-wi,Sn,"overlay "+$o),Vr=wi+2;else for(;wi<Vr;wi+=2){var ha=V[wi+1];V[wi+1]=(ha?ha+" ":"")+"overlay "+$o}},ve),A.state=Ie,A.baseTokens=null,A.baseTokenPos=1},rt=0;rt<p.state.overlays.length;++rt)He(rt);return{styles:V,classes:ve.bgClass||ve.textClass?ve:null}}function bm(p,_,A){if(!_.styles||_.styles[0]!=p.state.modeGen){var M=xh(p,rl(_)),V=_.text.length>p.options.maxHighlightLength&&Gp(p.doc.mode,M.state),ve=g_(p,_,M);V&&(M.state=V),_.stateAfter=M.save(!V),_.styles=ve.styles,ve.classes?_.styleClasses=ve.classes:_.styleClasses&&(_.styleClasses=null),A===p.doc.highlightFrontier&&(p.doc.modeFrontier=Math.max(p.doc.modeFrontier,++p.doc.highlightFrontier))}return _.styles}function xh(p,_,A){var M=p.doc,V=p.display;if(!M.mode.startState)return new Uc(M,!0,_);var ve=function dg(p,_,A){for(var M,V,ve=p.doc,Ie=A?-1:_-(p.doc.mode.innerMode?1e3:100),He=_;He>Ie;--He){if(He<=ve.first)return ve.first;var rt=Ua(ve,He-1),pt=rt.stateAfter;if(pt&&(!A||He+(pt instanceof Mc?pt.lookAhead:0)<=ve.modeFrontier))return He;var Er=yo(rt.text,null,p.options.tabSize);(null==V||M>Er)&&(V=He-1,M=Er)}return V}(p,_,A),Ie=ve>M.first&&Ua(M,ve-1).stateAfter,He=Ie?Uc.fromSaved(M,Ie,ve):new Uc(M,Gf(M.mode),ve);return M.iter(ve,_,function(rt){Zg(p,rt.text,He);var pt=He.line;rt.stateAfter=pt==_-1||pt%5==0||pt>=V.viewFrom&&pt<V.viewTo?He.save():null,He.nextLine()}),A&&(M.modeFrontier=He.line),He}function Zg(p,_,A,M){var V=p.doc.mode,ve=new Cc(_,p.options.tabSize,A);for(ve.start=ve.pos=M||0,""==_&&Ty(V,A.state);!ve.eol();)v_(V,ve,A.state),ve.start=ve.pos}function Ty(p,_){if(p.blankLine)return p.blankLine(_);if(p.innerMode){var A=Cd(p,_);if(A.mode.blankLine)return A.mode.blankLine(A.state)}}function v_(p,_,A,M){for(var V=0;V<10;V++){M&&(M[0]=Cd(p,A).mode);var ve=p.token(_,A);if(_.pos>_.start)return ve}throw new Error("Mode "+p.name+" failed to advance stream.")}Uc.prototype.lookAhead=function(p){var _=this.doc.getLine(this.line+p);return null!=_&&p>this.maxLookAhead&&(this.maxLookAhead=p),_},Uc.prototype.baseToken=function(p){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=p;)this.baseTokenPos+=2;var _=this.baseTokens[this.baseTokenPos+1];return{type:_&&_.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-p}},Uc.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Uc.fromSaved=function(p,_,A){return _ instanceof Mc?new Uc(p,Gp(p.mode,_.state),A,_.lookAhead):new Uc(p,Gp(p.mode,_),A)},Uc.prototype.save=function(p){var _=!1!==p?Gp(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Mc(_,this.maxLookAhead):_};var xv=function(p,_,A){this.start=p.start,this.end=p.pos,this.string=p.current(),this.type=_||null,this.state=A};function Sy(p,_,A,M){var Ie,Er,V=p.doc,ve=V.mode,He=Ua(V,(_=Zi(V,_)).line),rt=xh(p,_.line,A),pt=new Cc(He.text,p.options.tabSize,rt);for(M&&(Er=[]);(M||pt.pos<_.ch)&&!pt.eol();)pt.start=pt.pos,Ie=v_(ve,pt,rt.state),M&&Er.push(new xv(pt,Ie,Gp(V.mode,rt.state)));return M?Er:new xv(pt,Ie,rt.state)}function __(p,_){if(p)for(;;){var A=p.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!A)break;p=p.slice(0,A.index)+p.slice(A.index+A[0].length);var M=A[1]?"bgClass":"textClass";null==_[M]?_[M]=A[2]:new RegExp("(?:^|\\s)"+A[2]+"(?:$|\\s)").test(_[M])||(_[M]+=" "+A[2])}return p}function Cv(p,_,A,M,V,ve,Ie){var He=A.flattenSpans;null==He&&(He=p.options.flattenSpans);var Vr,rt=0,pt=null,Er=new Cc(_,p.options.tabSize,M),Hn=p.options.addModeClass&&[null];for(""==_&&__(Ty(A,M.state),ve);!Er.eol();){if(Er.pos>p.options.maxHighlightLength?(He=!1,Ie&&Zg(p,_,M,Er.pos),Er.pos=_.length,Vr=null):Vr=__(v_(A,Er,M.state,Hn),ve),Hn){var Sn=Hn[0].name;Sn&&(Vr="m-"+(Vr?Sn+" "+Vr:Sn))}if(!He||pt!=Vr){for(;rt<Er.start;)V(rt=Math.min(Er.start,rt+5e3),pt);pt=Vr}Er.start=Er.pos}for(;rt<Er.pos;){var $o=Math.min(Er.pos,rt+5e3);V($o,pt),rt=$o}}var Wd=!1,cp=!1;function pg(p,_,A){this.marker=p,this.from=_,this.to=A}function yf(p,_){if(p)for(var A=0;A<p.length;++A){var M=p[A];if(M.marker==_)return M}}function My(p,_){for(var A,M=0;M<p.length;++M)p[M]!=_&&(A||(A=[])).push(p[M]);return A}function wm(p,_){if(_.full)return null;var A=_m(p,_.from.line)&&Ua(p,_.from.line).markedSpans,M=_m(p,_.to.line)&&Ua(p,_.to.line).markedSpans;if(!A&&!M)return null;var V=_.from.ch,ve=_.to.ch,Ie=0==Rs(_.from,_.to),He=function up(p,_,A){var M;if(p)for(var V=0;V<p.length;++V){var ve=p[V],Ie=ve.marker;null!=ve.from&&!(Ie.inclusiveLeft?ve.from<=_:ve.from<_)&&(ve.from!=_||"bookmark"!=Ie.type||A&&ve.marker.insertLeft)||(M||(M=[])).push(new pg(Ie,ve.from,null==ve.to||(Ie.inclusiveRight?ve.to>=_:ve.to>_)?null:ve.to))}return M}(A,V,Ie),rt=function b_(p,_,A){var M;if(p)for(var V=0;V<p.length;++V){var ve=p[V],Ie=ve.marker;(null==ve.to||(Ie.inclusiveRight?ve.to>=_:ve.to>_)||ve.from==_&&"bookmark"==Ie.type&&(!A||ve.marker.insertLeft))&&(M||(M=[])).push(new pg(Ie,null==ve.from||(Ie.inclusiveLeft?ve.from<=_:ve.from<_)?null:ve.from-_,null==ve.to?null:ve.to-_))}return M}(M,ve,Ie),pt=1==_.text.length,Er=Ji(_.text).length+(pt?V:0);if(He)for(var Vr=0;Vr<He.length;++Vr){var Hn=He[Vr];if(null==Hn.to){var Sn=yf(rt,Hn.marker);Sn?pt&&(Hn.to=null==Sn.to?null:Sn.to+Er):Hn.to=V}}if(rt)for(var $o=0;$o<rt.length;++$o){var wi=rt[$o];null!=wi.to&&(wi.to+=Er),null==wi.from?yf(He,wi.marker)||(wi.from=Er,pt&&(He||(He=[])).push(wi)):(wi.from+=Er,pt&&(He||(He=[])).push(wi))}He&&(He=Hm(He)),rt&&rt!=He&&(rt=Hm(rt));var ha=[He];if(!pt){var ma,Za=_.text.length-2;if(Za>0&&He)for(var Ga=0;Ga<He.length;++Ga)null==He[Ga].to&&(ma||(ma=[])).push(new pg(He[Ga].marker,null,null));for(var Ms=0;Ms<Za;++Ms)ha.push(ma);ha.push(rt)}return ha}function Hm(p){for(var _=0;_<p.length;++_){var A=p[_];null!=A.from&&A.from==A.to&&!1!==A.marker.clearWhenEmpty&&p.splice(_--,1)}return p.length?p:null}function xm(p){var _=p.markedSpans;if(_){for(var A=0;A<_.length;++A)_[A].marker.detachLine(p);p.markedSpans=null}}function Gh(p,_){if(_){for(var A=0;A<_.length;++A)_[A].marker.attachLine(p);p.markedSpans=_}}function Ov(p){return p.inclusiveLeft?-1:0}function fg(p){return p.inclusiveRight?1:0}function Dv(p,_){var A=p.lines.length-_.lines.length;if(0!=A)return A;var M=p.find(),V=_.find(),ve=Rs(M.from,V.from)||Ov(p)-Ov(_);return ve?-ve:Rs(M.to,V.to)||fg(p)-fg(_)||_.id-p.id}function Tv(p,_){var M,A=cp&&p.markedSpans;if(A)for(var V=void 0,ve=0;ve<A.length;++ve)(V=A[ve]).marker.collapsed&&null==(_?V.from:V.to)&&(!M||Dv(M,V.marker)<0)&&(M=V.marker);return M}function Ay(p){return Tv(p,!0)}function Cm(p){return Tv(p,!1)}function ws(p,_){var M,A=cp&&p.markedSpans;if(A)for(var V=0;V<A.length;++V){var ve=A[V];ve.marker.collapsed&&(null==ve.from||ve.from<_)&&(null==ve.to||ve.to>_)&&(!M||Dv(M,ve.marker)<0)&&(M=ve.marker)}return M}function gs(p,_,A,M,V){var ve=Ua(p,_),Ie=cp&&ve.markedSpans;if(Ie)for(var He=0;He<Ie.length;++He){var rt=Ie[He];if(rt.marker.collapsed){var pt=rt.marker.find(0),Er=Rs(pt.from,A)||Ov(rt.marker)-Ov(V),Vr=Rs(pt.to,M)||fg(rt.marker)-fg(V);if(!(Er>=0&&Vr<=0||Er<=0&&Vr>=0)&&(Er<=0&&(rt.marker.inclusiveRight&&V.inclusiveLeft?Rs(pt.to,A)>=0:Rs(pt.to,A)>0)||Er>=0&&(rt.marker.inclusiveRight&&V.inclusiveLeft?Rs(pt.from,M)<=0:Rs(pt.from,M)<0)))return!0}}}function ll(p){for(var _;_=Ay(p);)p=_.find(-1,!0).line;return p}function qh(p,_){var A=Ua(p,_),M=ll(A);return A==M?_:rl(M)}function $h(p,_){if(_>p.lastLine())return _;var M,A=Ua(p,_);if(!bp(p,A))return _;for(;M=Cm(A);)A=M.find(1,!0).line;return rl(A)+1}function bp(p,_){var A=cp&&_.markedSpans;if(A)for(var M=void 0,V=0;V<A.length;++V)if((M=A[V]).marker.collapsed){if(null==M.from)return!0;if(!M.marker.widgetNode&&0==M.from&&M.marker.inclusiveLeft&&qp(p,_,M))return!0}}function qp(p,_,A){if(null==A.to){var M=A.marker.find(1,!0);return qp(p,M.line,yf(M.line.markedSpans,A.marker))}if(A.marker.inclusiveRight&&A.to==_.text.length)return!0;for(var V=void 0,ve=0;ve<_.markedSpans.length;++ve)if((V=_.markedSpans[ve]).marker.collapsed&&!V.marker.widgetNode&&V.from==A.to&&(null==V.to||V.to!=A.from)&&(V.marker.inclusiveLeft||A.marker.inclusiveRight)&&qp(p,_,V))return!0}function Jh(p){for(var _=0,A=(p=ll(p)).parent,M=0;M<A.lines.length;++M){var V=A.lines[M];if(V==p)break;_+=V.height}for(var ve=A.parent;ve;ve=(A=ve).parent)for(var Ie=0;Ie<ve.children.length;++Ie){var He=ve.children[Ie];if(He==A)break;_+=He.height}return _}function hg(p){if(0==p.height)return 0;for(var A,_=p.text.length,M=p;A=Ay(M);){var V=A.find(0,!0);M=V.from.line,_+=V.from.ch-V.to.ch}for(M=p;A=Cm(M);){var ve=A.find(0,!0);_-=M.text.length-ve.from.ch,_+=(M=ve.to.line).text.length-ve.to.ch}return _}function x_(p){var _=p.display,A=p.doc;_.maxLine=Ua(A,A.first),_.maxLineLength=hg(_.maxLine),_.maxLineChanged=!0,A.iter(function(M){var V=hg(M);V>_.maxLineLength&&(_.maxLineLength=V,_.maxLine=M)})}var wp=function(p,_,A){this.text=p,Gh(this,_),this.height=A?A(this):1};function X0(p){p.parent=null,xm(p)}wp.prototype.lineNo=function(){return rl(this)},Vl(wp);var P2={},k1={};function L1(p,_){if(!p||/^\s*$/.test(p))return null;var A=_.addModeClass?k1:P2;return A[p]||(A[p]=p.replace(/\S+/g,"cm-$&"))}function eb(p,_){var A=sr("span",null,null,C?"padding-right: .1px":null),M={pre:sr("pre",[A],"CodeMirror-line"),content:A,col:0,pos:0,cm:p,trailingSpace:!1,splitSpaces:p.getOption("lineWrapping")};_.measure={};for(var V=0;V<=(_.rest?_.rest.length:0);V++){var ve=V?_.rest[V-1]:_.line,Ie=void 0;M.pos=0,M.addToken=A2,Ud(p.display.measure)&&(Ie=Mt(ve,p.doc.direction))&&(M.addToken=k2(M.addToken,Ie)),M.map=[],L2(ve,M,bm(p,ve,_!=p.display.externalMeasured&&rl(ve))),ve.styleClasses&&(ve.styleClasses.bgClass&&(M.bgClass=mi(ve.styleClasses.bgClass,M.bgClass||"")),ve.styleClasses.textClass&&(M.textClass=mi(ve.styleClasses.textClass,M.textClass||""))),0==M.map.length&&M.map.push(0,0,M.content.appendChild(ms(p.display.measure))),0==V?(_.measure.map=M.map,_.measure.cache={}):((_.measure.maps||(_.measure.maps=[])).push(M.map),(_.measure.caches||(_.measure.caches=[])).push({}))}if(C){var rt=M.content.lastChild;(/\bcm-tab\b/.test(rt.className)||rt.querySelector&&rt.querySelector(".cm-tab"))&&(M.content.className="cm-tab-wrap-hack")}return Ia(p,"renderLine",p,_.line,M.pre),M.pre.className&&(M.textClass=mi(M.pre.className,M.textClass||"")),M}function M2(p){var _=wr("span","\u2022","cm-invalidchar");return _.title="\\u"+p.charCodeAt(0).toString(16),_.setAttribute("aria-label",_.title),_}function A2(p,_,A,M,V,ve,Ie){if(_){var Er,He=p.splitSpaces?function tb(p,_){if(p.length>1&&!/  /.test(p))return p;for(var A=_,M="",V=0;V<p.length;V++){var ve=p.charAt(V);" "==ve&&A&&(V==p.length-1||32==p.charCodeAt(V+1))&&(ve="\xa0"),M+=ve,A=" "==ve}return M}(_,p.trailingSpace):_,rt=p.cm.state.specialChars,pt=!1;if(rt.test(_)){Er=document.createDocumentFragment();for(var Vr=0;;){rt.lastIndex=Vr;var Hn=rt.exec(_),Sn=Hn?Hn.index-Vr:_.length-Vr;if(Sn){var $o=document.createTextNode(He.slice(Vr,Vr+Sn));Er.appendChild(b&&w<9?wr("span",[$o]):$o),p.map.push(p.pos,p.pos+Sn,$o),p.col+=Sn,p.pos+=Sn}if(!Hn)break;Vr+=Sn+1;var wi=void 0;if("\t"==Hn[0]){var Yi=p.cm.options.tabSize,ha=Yi-p.col%Yi;(wi=Er.appendChild(wr("span",Hi(ha),"cm-tab"))).setAttribute("role","presentation"),wi.setAttribute("cm-text","\t"),p.col+=ha}else"\r"==Hn[0]||"\n"==Hn[0]?((wi=Er.appendChild(wr("span","\r"==Hn[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",Hn[0]),p.col+=1):((wi=p.cm.options.specialCharPlaceholder(Hn[0])).setAttribute("cm-text",Hn[0]),Er.appendChild(b&&w<9?wr("span",[wi]):wi),p.col+=1);p.map.push(p.pos,p.pos+1,wi),p.pos++}}else p.col+=_.length,Er=document.createTextNode(He),p.map.push(p.pos,p.pos+_.length,Er),b&&w<9&&(pt=!0),p.pos+=_.length;if(p.trailingSpace=32==He.charCodeAt(_.length-1),A||M||V||pt||ve||Ie){var Za=A||"";M&&(Za+=M),V&&(Za+=V);var ma=wr("span",[Er],Za,ve);if(Ie)for(var Ga in Ie)Ie.hasOwnProperty(Ga)&&"style"!=Ga&&"class"!=Ga&&ma.setAttribute(Ga,Ie[Ga]);return p.content.appendChild(ma)}p.content.appendChild(Er)}}function k2(p,_){return function(A,M,V,ve,Ie,He,rt){V=V?V+" cm-force-border":"cm-force-border";for(var pt=A.pos,Er=pt+M.length;;){for(var Vr=void 0,Hn=0;Hn<_.length&&!((Vr=_[Hn]).to>pt&&Vr.from<=pt);Hn++);if(Vr.to>=Er)return p(A,M,V,ve,Ie,He,rt);p(A,M.slice(0,Vr.to-pt),V,ve,null,He,rt),ve=null,M=M.slice(Vr.to-pt),pt=Vr.to}}}function I1(p,_,A,M){var V=!M&&A.widgetNode;V&&p.map.push(p.pos,p.pos+_,V),!M&&p.cm.display.input.needsContentAttribute&&(V||(V=p.content.appendChild(document.createElement("span"))),V.setAttribute("cm-marker",A.id)),V&&(p.cm.display.input.setUneditable(V),p.content.appendChild(V)),p.pos+=_,p.trailingSpace=!1}function L2(p,_,A){var M=p.markedSpans,V=p.text,ve=0;if(M)for(var Vr,Hn,$o,wi,Yi,ha,Za,He=V.length,rt=0,pt=1,Er="",Sn=0;;){if(Sn==rt){$o=wi=Yi=Hn="",Za=null,ha=null,Sn=1/0;for(var ma=[],Ga=void 0,Ms=0;Ms<M.length;++Ms){var xs=M[Ms],Pl=xs.marker;if("bookmark"==Pl.type&&xs.from==rt&&Pl.widgetNode)ma.push(Pl);else if(xs.from<=rt&&(null==xs.to||xs.to>rt||Pl.collapsed&&xs.to==rt&&xs.from==rt)){if(null!=xs.to&&xs.to!=rt&&Sn>xs.to&&(Sn=xs.to,wi=""),Pl.className&&($o+=" "+Pl.className),Pl.css&&(Hn=(Hn?Hn+";":"")+Pl.css),Pl.startStyle&&xs.from==rt&&(Yi+=" "+Pl.startStyle),Pl.endStyle&&xs.to==Sn&&(Ga||(Ga=[])).push(Pl.endStyle,xs.to),Pl.title&&((Za||(Za={})).title=Pl.title),Pl.attributes)for(var uu in Pl.attributes)(Za||(Za={}))[uu]=Pl.attributes[uu];Pl.collapsed&&(!ha||Dv(ha.marker,Pl)<0)&&(ha=xs)}else xs.from>rt&&Sn>xs.from&&(Sn=xs.from)}if(Ga)for(var Ep=0;Ep<Ga.length;Ep+=2)Ga[Ep+1]==Sn&&(wi+=" "+Ga[Ep]);if(!ha||ha.from==rt)for(var Hu=0;Hu<ma.length;++Hu)I1(_,0,ma[Hu]);if(ha&&(ha.from||0)==rt){if(I1(_,(null==ha.to?He+1:ha.to)-rt,ha.marker,null==ha.from),null==ha.to)return;ha.to==rt&&(ha=!1)}}if(rt>=He)break;for(var Xh=Math.min(He,Sn);;){if(Er){var Oh=rt+Er.length;if(!ha){var Zd=Oh>Xh?Er.slice(0,Xh-rt):Er;_.addToken(_,Zd,Vr?Vr+$o:$o,Yi,rt+Zd.length==Sn?wi:"",Hn,Za)}if(Oh>=Xh){Er=Er.slice(Xh-rt),rt=Xh;break}rt=Oh,Yi=""}Er=V.slice(ve,ve=A[pt++]),Vr=L1(A[pt++],_.cm.options)}}else for(var Ie=1;Ie<A.length;Ie+=2)_.addToken(_,V.slice(ve,ve=A[Ie]),L1(A[Ie+1],_.cm.options))}function R1(p,_,A){this.line=_,this.rest=function rd(p){for(var _,A;_=Cm(p);)p=_.find(1,!0).line,(A||(A=[])).push(p);return A}(_),this.size=this.rest?rl(Ji(this.rest))-A+1:1,this.node=this.text=null,this.hidden=bp(p,_)}function rb(p,_,A){for(var V,M=[],ve=_;ve<A;ve=V){var Ie=new R1(p.doc,Ua(p.doc,ve),ve);V=ve+Ie.size,M.push(Ie)}return M}var Sv=null;var C_=null;function nd(p,_){var A=Si(p,_);if(A.length){var V,M=Array.prototype.slice.call(arguments,2);Sv?V=Sv.delayedCallbacks:C_?V=C_:(V=C_=[],setTimeout(E_,0));for(var ve=function(He){V.push(function(){return A[He].apply(null,M)})},Ie=0;Ie<A.length;++Ie)ve(Ie)}}function E_(){var p=C_;C_=null;for(var _=0;_<p.length;++_)p[_]()}function Kg(p,_,A,M){for(var V=0;V<_.changes.length;V++){var ve=_.changes[V];"text"==ve?N1(p,_):"gutter"==ve?D_(p,_,A,M):"class"==ve?nb(p,_):"widget"==ve&&F2(p,_,M)}_.changes=null}function O_(p){return p.node==p.text&&(p.node=wr("div",null,null,"position: relative"),p.text.parentNode&&p.text.parentNode.replaceChild(p.node,p.text),p.node.appendChild(p.text),b&&w<8&&(p.node.style.zIndex=2)),p.node}function j1(p,_){var A=p.display.externalMeasured;return A&&A.line==_.line?(p.display.externalMeasured=null,_.measure=A.measure,A.built):eb(p,_)}function N1(p,_){var A=_.text.className,M=j1(p,_);_.text==_.node&&(_.node=M.pre),_.text.parentNode.replaceChild(M.pre,_.text),_.text=M.pre,M.bgClass!=_.bgClass||M.textClass!=_.textClass?(_.bgClass=M.bgClass,_.textClass=M.textClass,nb(p,_)):A&&(_.text.className=A)}function nb(p,_){(function R2(p,_){var A=_.bgClass?_.bgClass+" "+(_.line.bgClass||""):_.line.bgClass;if(A&&(A+=" CodeMirror-linebackground"),_.background)A?_.background.className=A:(_.background.parentNode.removeChild(_.background),_.background=null);else if(A){var M=O_(_);_.background=M.insertBefore(wr("div",null,A),M.firstChild),p.display.input.setUneditable(_.background)}})(p,_),_.line.wrapClass?O_(_).className=_.line.wrapClass:_.node!=_.text&&(_.node.className=""),_.text.className=(_.textClass?_.textClass+" "+(_.line.textClass||""):_.line.textClass)||""}function D_(p,_,A,M){if(_.gutter&&(_.node.removeChild(_.gutter),_.gutter=null),_.gutterBackground&&(_.node.removeChild(_.gutterBackground),_.gutterBackground=null),_.line.gutterClass){var V=O_(_);_.gutterBackground=wr("div",null,"CodeMirror-gutter-background "+_.line.gutterClass,"left: "+(p.options.fixedGutter?M.fixedPos:-M.gutterTotalWidth)+"px; width: "+M.gutterTotalWidth+"px"),p.display.input.setUneditable(_.gutterBackground),V.insertBefore(_.gutterBackground,_.text)}var ve=_.line.gutterMarkers;if(p.options.lineNumbers||ve){var Ie=O_(_),He=_.gutter=wr("div",null,"CodeMirror-gutter-wrapper","left: "+(p.options.fixedGutter?M.fixedPos:-M.gutterTotalWidth)+"px");if(He.setAttribute("aria-hidden","true"),p.display.input.setUneditable(He),Ie.insertBefore(He,_.text),_.line.gutterClass&&(He.className+=" "+_.line.gutterClass),p.options.lineNumbers&&(!ve||!ve["CodeMirror-linenumbers"])&&(_.lineNumber=He.appendChild(wr("div",ym(p.options,A),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+M.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+p.display.lineNumInnerWidth+"px"))),ve)for(var rt=0;rt<p.display.gutterSpecs.length;++rt){var pt=p.display.gutterSpecs[rt].className,Er=ve.hasOwnProperty(pt)&&ve[pt];Er&&He.appendChild(wr("div",[Er],"CodeMirror-gutter-elt","left: "+M.gutterLeft[pt]+"px; width: "+M.gutterWidth[pt]+"px"))}}}function F2(p,_,A){_.alignable&&(_.alignable=null);for(var M=Nr("CodeMirror-linewidget"),V=_.node.firstChild,ve=void 0;V;V=ve)ve=V.nextSibling,M.test(V.className)&&_.node.removeChild(V);T_(p,_,A)}function j2(p,_,A,M){var V=j1(p,_);return _.text=_.node=V.pre,V.bgClass&&(_.bgClass=V.bgClass),V.textClass&&(_.textClass=V.textClass),nb(p,_),D_(p,_,A,M),T_(p,_,M),_.node}function T_(p,_,A){if(U1(p,_.line,_,A,!0),_.rest)for(var M=0;M<_.rest.length;M++)U1(p,_.rest[M],_,A,!1)}function U1(p,_,A,M,V){if(_.widgets)for(var ve=O_(A),Ie=0,He=_.widgets;Ie<He.length;++Ie){var rt=He[Ie],pt=wr("div",[rt.node],"CodeMirror-linewidget"+(rt.className?" "+rt.className:""));rt.handleMouseEvents||pt.setAttribute("cm-ignore-events","true"),N2(rt,pt,A,M),p.display.input.setUneditable(pt),V&&rt.above?ve.insertBefore(pt,A.gutter||A.text):ve.appendChild(pt),nd(rt,"redraw")}}function N2(p,_,A,M){if(p.noHScroll){(A.alignable||(A.alignable=[])).push(_);var V=M.wrapperWidth;_.style.left=M.fixedPos+"px",p.coverGutter||(V-=M.gutterTotalWidth,_.style.paddingLeft=M.gutterTotalWidth+"px"),_.style.width=V+"px"}p.coverGutter&&(_.style.zIndex=5,_.style.position="relative",p.noHScroll||(_.style.marginLeft=-M.gutterTotalWidth+"px"))}function S_(p){if(null!=p.height)return p.height;var _=p.doc.cm;if(!_)return 0;if(!xt(document.body,p.node)){var A="position: relative;";p.coverGutter&&(A+="margin-left: -"+_.display.gutters.offsetWidth+"px;"),p.noHScroll&&(A+="width: "+_.display.wrapper.clientWidth+"px;"),Bt(_.display.measure,wr("div",[p.node],null,A))}return p.height=p.node.parentNode.offsetHeight}function Gm(p,_){for(var A=$r(_);A!=p.wrapper;A=A.parentNode)if(!A||1==A.nodeType&&"true"==A.getAttribute("cm-ignore-events")||A.parentNode==p.sizer&&A!=p.mover)return!0}function P_(p){return p.lineSpace.offsetTop}function ky(p){return p.mover.offsetHeight-p.lineSpace.offsetHeight}function U2(p){if(p.cachedPaddingH)return p.cachedPaddingH;var _=Bt(p.measure,wr("pre","x","CodeMirror-line-like")),A=window.getComputedStyle?window.getComputedStyle(_):_.currentStyle,M={left:parseInt(A.paddingLeft),right:parseInt(A.paddingRight)};return!isNaN(M.left)&&!isNaN(M.right)&&(p.cachedPaddingH=M),M}function Yh(p){return la-p.display.nativeBarWidth}function Pv(p){return p.display.scroller.clientWidth-Yh(p)-p.display.barWidth}function nt(p){return p.display.scroller.clientHeight-Yh(p)-p.display.barHeight}function Wr(p,_,A){if(p.line==_)return{map:p.measure.map,cache:p.measure.cache};for(var M=0;M<p.rest.length;M++)if(p.rest[M]==_)return{map:p.measure.maps[M],cache:p.measure.caches[M]};for(var V=0;V<p.rest.length;V++)if(rl(p.rest[V])>A)return{map:p.measure.maps[V],cache:p.measure.caches[V],before:!0}}function Gn(p,_,A,M){return ia(p,di(p,_),A,M)}function Nn(p,_){if(_>=p.display.viewFrom&&_<p.display.viewTo)return p.display.view[Ry(p,_)];var A=p.display.externalMeasured;return A&&_>=A.lineN&&_<A.lineN+A.size?A:void 0}function di(p,_){var A=rl(_),M=Nn(p,A);M&&!M.text?M=null:M&&M.changes&&(Kg(p,M,A,TE(p)),p.curOp.forceUpdate=!0),M||(M=function en(p,_){var A=rl(_=ll(_)),M=p.display.externalMeasured=new R1(p.doc,_,A);M.lineN=A;var V=M.built=eb(p,M);return M.text=V.pre,Bt(p.display.lineMeasure,V.pre),M}(p,_));var V=Wr(M,_,A);return{line:_,view:M,rect:null,map:V.map,cache:V.cache,before:V.before,hasHeights:!1}}function ia(p,_,A,M,V){_.before&&(A=-1);var Ie,ve=A+(M||"");return _.cache.hasOwnProperty(ve)?Ie=_.cache[ve]:(_.rect||(_.rect=_.view.text.getBoundingClientRect()),_.hasHeights||(function Rt(p,_,A){var M=p.options.lineWrapping,V=M&&Pv(p);if(!_.measure.heights||M&&_.measure.width!=V){var ve=_.measure.heights=[];if(M){_.measure.width=V;for(var Ie=_.text.firstChild.getClientRects(),He=0;He<Ie.length-1;He++){var rt=Ie[He],pt=Ie[He+1];Math.abs(rt.bottom-pt.bottom)>2&&ve.push((rt.bottom+pt.top)/2-A.top)}}ve.push(A.bottom-A.top)}}(p,_.view,_.rect),_.hasHeights=!0),(Ie=function bf(p,_,A,M){var pt,V=Xs(_.map,A,M),ve=V.node,Ie=V.start,He=V.end,rt=V.collapse;if(3==ve.nodeType){for(var Er=0;Er<4;Er++){for(;Ie&&$n(_.line.text.charAt(V.coverStart+Ie));)--Ie;for(;V.coverStart+He<V.coverEnd&&$n(_.line.text.charAt(V.coverStart+He));)++He;if((pt=b&&w<9&&0==Ie&&He==V.coverEnd-V.coverStart?ve.parentNode.getBoundingClientRect():dp(gn(ve,Ie,He).getClientRects(),M)).left||pt.right||0==Ie)break;He=Ie,Ie-=1,rt="right"}b&&w<11&&(pt=function B2(p,_){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function Fu(p){if(null!=sp)return sp;var _=Bt(p,wr("span","x")),A=_.getBoundingClientRect(),M=gn(_,0,1).getBoundingClientRect();return sp=Math.abs(A.left-M.left)>1}(p))return _;var A=screen.logicalXDPI/screen.deviceXDPI,M=screen.logicalYDPI/screen.deviceYDPI;return{left:_.left*A,right:_.right*A,top:_.top*M,bottom:_.bottom*M}}(p.display.measure,pt))}else{var Vr;Ie>0&&(rt=M="right"),pt=p.options.lineWrapping&&(Vr=ve.getClientRects()).length>1?Vr["right"==M?Vr.length-1:0]:ve.getBoundingClientRect()}if(b&&w<9&&!Ie&&(!pt||!pt.left&&!pt.right)){var Hn=ve.parentNode.getClientRects()[0];pt=Hn?{left:Hn.left,right:Hn.left+ib(p.display),top:Hn.top,bottom:Hn.bottom}:cl}for(var Sn=pt.top-_.rect.top,$o=pt.bottom-_.rect.top,wi=(Sn+$o)/2,Yi=_.view.measure.heights,ha=0;ha<Yi.length-1&&!(wi<Yi[ha]);ha++);var Ga={left:("right"==rt?pt.right:pt.left)-_.rect.left,right:("left"==rt?pt.left:pt.right)-_.rect.left,top:ha?Yi[ha-1]:0,bottom:Yi[ha]};return!pt.left&&!pt.right&&(Ga.bogus=!0),p.options.singleCursorHeightPerLine||(Ga.rtop=Sn,Ga.rbottom=$o),Ga}(p,_,A,M)).bogus||(_.cache[ve]=Ie)),{left:Ie.left,right:Ie.right,top:V?Ie.rtop:Ie.top,bottom:V?Ie.rbottom:Ie.bottom}}var Ly,cl={left:0,right:0,top:0,bottom:0};function Xs(p,_,A){for(var M,V,ve,Ie,He,rt,pt=0;pt<p.length;pt+=3)if(rt=p[pt+1],_<(He=p[pt])?(V=0,ve=1,Ie="left"):_<rt?ve=1+(V=_-He):(pt==p.length-3||_==rt&&p[pt+3]>_)&&(V=(ve=rt-He)-1,_>=rt&&(Ie="right")),null!=V){if(M=p[pt+2],He==rt&&A==(M.insertLeft?"left":"right")&&(Ie=A),"left"==A&&0==V)for(;pt&&p[pt-2]==p[pt-3]&&p[pt-1].insertLeft;)M=p[2+(pt-=3)],Ie="left";if("right"==A&&V==rt-He)for(;pt<p.length-3&&p[pt+3]==p[pt+4]&&!p[pt+5].insertLeft;)M=p[(pt+=3)+2],Ie="right";break}return{node:M,start:V,end:ve,collapse:Ie,coverStart:He,coverEnd:rt}}function dp(p,_){var A=cl;if("left"==_)for(var M=0;M<p.length&&(A=p[M]).left==A.right;M++);else for(var V=p.length-1;V>=0&&(A=p[V]).left==A.right;V--);return A}function B1(p){if(p.measure&&(p.measure.cache={},p.measure.heights=null,p.rest))for(var _=0;_<p.rest.length;_++)p.measure.caches[_]={}}function oO(p){p.display.externalMeasure=null,ir(p.display.lineMeasure);for(var _=0;_<p.display.view.length;_++)B1(p.display.view[_])}function W1(p){oO(p),p.display.cachedCharWidth=p.display.cachedTextHeight=p.display.cachedPaddingH=null,p.options.lineWrapping||(p.display.maxLineChanged=!0),p.display.lineNumChars=null}function iO(){return ne&&Ot?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function aO(){return ne&&Ot?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function CE(p){var _=0;if(p.widgets)for(var A=0;A<p.widgets.length;++A)p.widgets[A].above&&(_+=S_(p.widgets[A]));return _}function W2(p,_,A,M,V){if(!V){var ve=CE(_);A.top+=ve,A.bottom+=ve}if("line"==M)return A;M||(M="local");var Ie=Jh(_);if("local"==M?Ie+=P_(p.display):Ie-=p.display.viewOffset,"page"==M||"window"==M){var He=p.display.lineSpace.getBoundingClientRect();Ie+=He.top+("window"==M?0:aO());var rt=He.left+("window"==M?0:iO());A.left+=rt,A.right+=rt}return A.top+=Ie,A.bottom+=Ie,A}function sO(p,_,A){if("div"==A)return _;var M=_.left,V=_.top;if("page"==A)M-=iO(),V-=aO();else if("local"==A||!A){var ve=p.display.sizer.getBoundingClientRect();M+=ve.left,V+=ve.top}var Ie=p.display.lineSpace.getBoundingClientRect();return{left:M-Ie.left,top:V-Ie.top}}function Z2(p,_,A,M,V){return M||(M=Ua(p.doc,_.line)),W2(p,M,Gn(p,M,_.ch,V),A)}function mg(p,_,A,M,V,ve){function Ie($o,wi){var Yi=ia(p,V,$o,wi?"right":"left",ve);return wi?Yi.left=Yi.right:Yi.right=Yi.left,W2(p,M,Yi,A)}M=M||Ua(p.doc,_.line),V||(V=di(p,M));var He=Mt(M,p.doc.direction),rt=_.ch,pt=_.sticky;if(rt>=M.text.length?(rt=M.text.length,pt="before"):rt<=0&&(rt=0,pt="after"),!He)return Ie("before"==pt?rt-1:rt,"before"==pt);function Er($o,wi,Yi){return Ie(Yi?$o-1:$o,1==He[wi].level!=Yi)}var Vr=er(He,rt,pt),Hn=Ns,Sn=Er(rt,Vr,"before"==pt);return null!=Hn&&(Sn.other=Er(rt,Hn,"before"!=pt)),Sn}function lO(p,_){var A=0;_=Zi(p.doc,_),p.options.lineWrapping||(A=ib(p.display)*_.ch);var M=Ua(p.doc,_.line),V=Jh(M)+P_(p.display);return{left:A,right:A,top:V,bottom:V+M.height}}function EE(p,_,A,M,V){var ve=Ai(p,_,A);return ve.xRel=V,M&&(ve.outside=M),ve}function OE(p,_,A){var M=p.doc;if((A+=p.display.viewOffset)<0)return EE(M.first,0,null,-1,-1);var V=Jc(M,A),ve=M.first+M.size-1;if(V>ve)return EE(M.first+M.size-1,Ua(M,ve).text.length,null,1,1);_<0&&(_=0);for(var Ie=Ua(M,V);;){var He=TD(p,Ie,V,_,A),rt=ws(Ie,He.ch+(He.xRel>0||He.outside>0?1:0));if(!rt)return He;var pt=rt.find(1);if(pt.line==V)return pt;Ie=Ua(M,V=pt.line)}}function cO(p,_,A,M){M-=CE(_);var V=_.text.length,ve=Qa(function(Ie){return ia(p,A,Ie-1).bottom<=M},V,0);return{begin:ve,end:V=Qa(function(Ie){return ia(p,A,Ie).top>M},ve,V)}}function uO(p,_,A,M){return A||(A=di(p,_)),cO(p,_,A,W2(p,_,ia(p,A,M),"line").top)}function DE(p,_,A,M){return!(p.bottom<=A)&&(p.top>A||(M?p.left:p.right)>_)}function TD(p,_,A,M,V){V-=Jh(_);var ve=di(p,_),Ie=CE(_),He=0,rt=_.text.length,pt=!0,Er=Mt(_,p.doc.direction);if(Er){var Vr=(p.options.lineWrapping?PD:SD)(p,_,A,ve,Er,M,V);He=(pt=1!=Vr.level)?Vr.from:Vr.to-1,rt=pt?Vr.to:Vr.from-1}var wi,Yi,Hn=null,Sn=null,$o=Qa(function(Ms){var xs=ia(p,ve,Ms);return xs.top+=Ie,xs.bottom+=Ie,!!DE(xs,M,V,!1)&&(xs.top<=V&&xs.left<=M&&(Hn=Ms,Sn=xs),!0)},He,rt),ha=!1;if(Sn){var Za=M-Sn.left<Sn.right-M,ma=Za==pt;$o=Hn+(ma?0:1),Yi=ma?"after":"before",wi=Za?Sn.left:Sn.right}else{!pt&&($o==rt||$o==He)&&$o++,Yi=0==$o?"after":$o==_.text.length?"before":ia(p,ve,$o-(pt?1:0)).bottom+Ie<=V==pt?"after":"before";var Ga=mg(p,Ai(A,$o,Yi),"line",_,ve);wi=Ga.left,ha=V<Ga.top?-1:V>=Ga.bottom?1:0}return EE(A,$o=Cn(_.text,$o,1),Yi,ha,M-wi)}function SD(p,_,A,M,V,ve,Ie){var He=Qa(function(Vr){var Hn=V[Vr],Sn=1!=Hn.level;return DE(mg(p,Ai(A,Sn?Hn.to:Hn.from,Sn?"before":"after"),"line",_,M),ve,Ie,!0)},0,V.length-1),rt=V[He];if(He>0){var pt=1!=rt.level,Er=mg(p,Ai(A,pt?rt.from:rt.to,pt?"after":"before"),"line",_,M);DE(Er,ve,Ie,!0)&&Er.top>Ie&&(rt=V[He-1])}return rt}function PD(p,_,A,M,V,ve,Ie){var He=cO(p,_,M,Ie),rt=He.begin,pt=He.end;/\s/.test(_.text.charAt(pt-1))&&pt--;for(var Er=null,Vr=null,Hn=0;Hn<V.length;Hn++){var Sn=V[Hn];if(!(Sn.from>=pt||Sn.to<=rt)){var wi=ia(p,M,1!=Sn.level?Math.min(pt,Sn.to)-1:Math.max(rt,Sn.from)).right,Yi=wi<ve?ve-wi+1e9:wi-ve;(!Er||Vr>Yi)&&(Er=Sn,Vr=Yi)}}return Er||(Er=V[V.length-1]),Er.from<rt&&(Er={from:rt,to:Er.to,level:Er.level}),Er.to>pt&&(Er={from:Er.from,to:pt,level:Er.level}),Er}function ob(p){if(null!=p.cachedTextHeight)return p.cachedTextHeight;if(null==Ly){Ly=wr("pre",null,"CodeMirror-line-like");for(var _=0;_<49;++_)Ly.appendChild(document.createTextNode("x")),Ly.appendChild(wr("br"));Ly.appendChild(document.createTextNode("x"))}Bt(p.measure,Ly);var A=Ly.offsetHeight/50;return A>3&&(p.cachedTextHeight=A),ir(p.measure),A||1}function ib(p){if(null!=p.cachedCharWidth)return p.cachedCharWidth;var _=wr("span","xxxxxxxxxx"),A=wr("pre",[_],"CodeMirror-line-like");Bt(p.measure,A);var M=_.getBoundingClientRect(),V=(M.right-M.left)/10;return V>2&&(p.cachedCharWidth=V),V||10}function TE(p){for(var _=p.display,A={},M={},V=_.gutters.clientLeft,ve=_.gutters.firstChild,Ie=0;ve;ve=ve.nextSibling,++Ie){var He=p.display.gutterSpecs[Ie].className;A[He]=ve.offsetLeft+ve.clientLeft+V,M[He]=ve.clientWidth}return{fixedPos:SE(_),gutterTotalWidth:_.gutters.offsetWidth,gutterLeft:A,gutterWidth:M,wrapperWidth:_.wrapper.clientWidth}}function SE(p){return p.scroller.getBoundingClientRect().left-p.sizer.getBoundingClientRect().left}function dO(p){var _=ob(p.display),A=p.options.lineWrapping,M=A&&Math.max(5,p.display.scroller.clientWidth/ib(p.display)-3);return function(V){if(bp(p.doc,V))return 0;var ve=0;if(V.widgets)for(var Ie=0;Ie<V.widgets.length;Ie++)V.widgets[Ie].height&&(ve+=V.widgets[Ie].height);return A?ve+(Math.ceil(V.text.length/M)||1)*_:ve+_}}function PE(p){var _=p.doc,A=dO(p);_.iter(function(M){var V=A(M);V!=M.height&&Bd(M,V)})}function Iy(p,_,A,M){var V=p.display;if(!A&&"true"==$r(_).getAttribute("cm-not-content"))return null;var ve,Ie,He=V.lineSpace.getBoundingClientRect();try{ve=_.clientX-He.left,Ie=_.clientY-He.top}catch{return null}var pt,rt=OE(p,ve,Ie);if(M&&rt.xRel>0&&(pt=Ua(p.doc,rt.line).text).length==rt.ch){var Er=yo(pt,pt.length,p.options.tabSize)-pt.length;rt=Ai(rt.line,Math.max(0,Math.round((ve-U2(p.display).left)/ib(p.display))-Er))}return rt}function Ry(p,_){if(_>=p.display.viewTo||(_-=p.display.viewFrom)<0)return null;for(var A=p.display.view,M=0;M<A.length;M++)if((_-=A[M].size)<0)return M}function Ch(p,_,A,M){null==_&&(_=p.doc.first),null==A&&(A=p.doc.first+p.doc.size),M||(M=0);var V=p.display;if(M&&A<V.viewTo&&(null==V.updateLineNumbers||V.updateLineNumbers>_)&&(V.updateLineNumbers=_),p.curOp.viewChanged=!0,_>=V.viewTo)cp&&qh(p.doc,_)<V.viewTo&&A_(p);else if(A<=V.viewFrom)cp&&$h(p.doc,A+M)>V.viewFrom?A_(p):(V.viewFrom+=M,V.viewTo+=M);else if(_<=V.viewFrom&&A>=V.viewTo)A_(p);else if(_<=V.viewFrom){var ve=K2(p,A,A+M,1);ve?(V.view=V.view.slice(ve.index),V.viewFrom=ve.lineN,V.viewTo+=M):A_(p)}else if(A>=V.viewTo){var Ie=K2(p,_,_,-1);Ie?(V.view=V.view.slice(0,Ie.index),V.viewTo=Ie.lineN):A_(p)}else{var He=K2(p,_,_,-1),rt=K2(p,A,A+M,1);He&&rt?(V.view=V.view.slice(0,He.index).concat(rb(p,He.lineN,rt.lineN)).concat(V.view.slice(rt.index)),V.viewTo+=M):A_(p)}var pt=V.externalMeasured;pt&&(A<pt.lineN?pt.lineN+=M:_<pt.lineN+pt.size&&(V.externalMeasured=null))}function M_(p,_,A){p.curOp.viewChanged=!0;var M=p.display,V=p.display.externalMeasured;if(V&&_>=V.lineN&&_<V.lineN+V.size&&(M.externalMeasured=null),!(_<M.viewFrom||_>=M.viewTo)){var ve=M.view[Ry(p,_)];if(null!=ve.node){var Ie=ve.changes||(ve.changes=[]);-1==Li(Ie,A)&&Ie.push(A)}}}function A_(p){p.display.viewFrom=p.display.viewTo=p.doc.first,p.display.view=[],p.display.viewOffset=0}function K2(p,_,A,M){var ve,V=Ry(p,_),Ie=p.display.view;if(!cp||A==p.doc.first+p.doc.size)return{index:V,lineN:A};for(var He=p.display.viewFrom,rt=0;rt<V;rt++)He+=Ie[rt].size;if(He!=_){if(M>0){if(V==Ie.length-1)return null;ve=He+Ie[V].size-_,V++}else ve=He-_;_+=ve,A+=ve}for(;qh(p.doc,A)!=A;){if(V==(M<0?0:Ie.length-1))return null;A+=M*Ie[V-(M<0?1:0)].size,V+=M}return{index:V,lineN:A}}function pO(p){for(var _=p.display.view,A=0,M=0;M<_.length;M++){var V=_[M];!V.hidden&&(!V.node||V.changes)&&++A}return A}function Z1(p){p.display.input.showSelection(p.display.input.prepareSelection())}function fO(p,_){void 0===_&&(_=!0);for(var A=p.doc,M={},V=M.cursors=document.createDocumentFragment(),ve=M.selection=document.createDocumentFragment(),Ie=0;Ie<A.sel.ranges.length;Ie++)if(_||Ie!=A.sel.primIndex){var He=A.sel.ranges[Ie];if(!(He.from().line>=p.display.viewTo||He.to().line<p.display.viewFrom)){var rt=He.empty();(rt||p.options.showCursorWhenSelecting)&&hO(p,He.head,V),rt||AD(p,He,ve)}}return M}function hO(p,_,A){var M=mg(p,_,"div",null,null,!p.options.singleCursorHeightPerLine),V=A.appendChild(wr("div","\xa0","CodeMirror-cursor"));if(V.style.left=M.left+"px",V.style.top=M.top+"px",V.style.height=Math.max(0,M.bottom-M.top)*p.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(p.getWrapperElement().className)){var ve=Z2(p,_,"div",null,null);ve.right-ve.left>0&&(V.style.width=ve.right-ve.left+"px")}if(M.other){var Ie=A.appendChild(wr("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));Ie.style.display="",Ie.style.left=M.other.left+"px",Ie.style.top=M.other.top+"px",Ie.style.height=.85*(M.other.bottom-M.other.top)+"px"}}function V2(p,_){return p.top-_.top||p.left-_.left}function AD(p,_,A){var M=p.display,V=p.doc,ve=document.createDocumentFragment(),Ie=U2(p.display),He=Ie.left,rt=Math.max(M.sizerWidth,Pv(p)-M.sizer.offsetLeft)-Ie.right,pt="ltr"==V.direction;function Er(ma,Ga,Ms,xs){Ga<0&&(Ga=0),Ga=Math.round(Ga),xs=Math.round(xs),ve.appendChild(wr("div",null,"CodeMirror-selected","position: absolute; left: "+ma+"px;\n                             top: "+Ga+"px; width: "+(Ms??rt-ma)+"px;\n                             height: "+(xs-Ga)+"px"))}function Vr(ma,Ga,Ms){var uu,Ep,xs=Ua(V,ma),Pl=xs.text.length;function Hu(Zd,Dh){return Z2(p,Ai(ma,Zd),"div",xs,Dh)}function Xh(Zd,Dh,$p){var pp=uO(p,xs,null,Zd),Kd="ltr"==Dh==("after"==$p)?"left":"right";return Hu("after"==$p?pp.begin:pp.end-(/\s/.test(xs.text.charAt(pp.end-1))?2:1),Kd)[Kd]}var Oh=Mt(xs,V.direction);return function Qs(p,_,A,M){if(!p)return M(_,A,"ltr",0);for(var V=!1,ve=0;ve<p.length;++ve){var Ie=p[ve];(Ie.from<A&&Ie.to>_||_==A&&Ie.to==_)&&(M(Math.max(Ie.from,_),Math.min(Ie.to,A),1==Ie.level?"rtl":"ltr",ve),V=!0)}V||M(_,A,"ltr")}(Oh,Ga||0,Ms??Pl,function(Zd,Dh,$p,pp){var Kd="ltr"==$p,od=Hu(Zd,Kd?"left":"right"),Th=Hu(Dh-1,Kd?"right":"left"),_b=null==Ga&&0==Zd,j_=null==Ms&&Dh==Pl,xf=0==pp,Vg=!Oh||pp==Oh.length-1;if(Th.top-od.top<=3){var Av=(pt?_b:j_)&&xf?He:(Kd?od:Th).left;Er(Av,od.top,((pt?j_:_b)&&Vg?rt:(Kd?Th:od).right)-Av,od.bottom)}else{var Wy,$f,yb,rO;Kd?(Wy=pt&&_b&&xf?He:od.left,$f=pt?rt:Xh(Zd,$p,"before"),yb=pt?He:Xh(Dh,$p,"after"),rO=pt&&j_&&Vg?rt:Th.right):(Wy=pt?Xh(Zd,$p,"before"):He,$f=!pt&&_b&&xf?rt:od.right,yb=!pt&&j_&&Vg?He:Th.left,rO=pt?Xh(Dh,$p,"after"):rt),Er(Wy,od.top,$f-Wy,od.bottom),od.bottom<Th.top&&Er(He,od.bottom,null,Th.top),Er(yb,Th.top,rO-yb,Th.bottom)}(!uu||V2(od,uu)<0)&&(uu=od),V2(Th,uu)<0&&(uu=Th),(!Ep||V2(od,Ep)<0)&&(Ep=od),V2(Th,Ep)<0&&(Ep=Th)}),{start:uu,end:Ep}}var Hn=_.from(),Sn=_.to();if(Hn.line==Sn.line)Vr(Hn.line,Hn.ch,Sn.ch);else{var $o=Ua(V,Hn.line),wi=Ua(V,Sn.line),Yi=ll($o)==ll(wi),ha=Vr(Hn.line,Hn.ch,Yi?$o.text.length+1:null).end,Za=Vr(Sn.line,Yi?0:null,Sn.ch).start;Yi&&(ha.top<Za.top-2?(Er(ha.right,ha.top,null,ha.bottom),Er(He,Za.top,Za.left,Za.bottom)):Er(ha.right,ha.top,Za.left-ha.right,ha.bottom)),ha.bottom<Za.top&&Er(He,ha.bottom,null,Za.top)}A.appendChild(ve)}function ME(p){if(p.state.focused){var _=p.display;clearInterval(_.blinker);var A=!0;_.cursorDiv.style.visibility="",p.options.cursorBlinkRate>0?_.blinker=setInterval(function(){p.hasFocus()||ab(p),_.cursorDiv.style.visibility=(A=!A)?"":"hidden"},p.options.cursorBlinkRate):p.options.cursorBlinkRate<0&&(_.cursorDiv.style.visibility="hidden")}}function mO(p){p.hasFocus()||(p.display.input.focus(),p.state.focused||kE(p))}function AE(p){p.state.delayingBlurEvent=!0,setTimeout(function(){p.state.delayingBlurEvent&&(p.state.delayingBlurEvent=!1,p.state.focused&&ab(p))},100)}function kE(p,_){p.state.delayingBlurEvent&&!p.state.draggingText&&(p.state.delayingBlurEvent=!1),"nocursor"!=p.options.readOnly&&(p.state.focused||(Ia(p,"focus",p,_),p.state.focused=!0,_o(p.display.wrapper,"CodeMirror-focused"),!p.curOp&&p.display.selForContextMenu!=p.doc.sel&&(p.display.input.reset(),C&&setTimeout(function(){return p.display.input.reset(!0)},20)),p.display.input.receivedFocus()),ME(p))}function ab(p,_){p.state.delayingBlurEvent||(p.state.focused&&(Ia(p,"blur",p,_),p.state.focused=!1,Dn(p.display.wrapper,"CodeMirror-focused")),clearInterval(p.display.blinker),setTimeout(function(){p.state.focused||(p.display.shift=!1)},150))}function z2(p){for(var _=p.display,A=_.lineDiv.offsetTop,M=Math.max(0,_.scroller.getBoundingClientRect().top),V=_.lineDiv.getBoundingClientRect().top,ve=0,Ie=0;Ie<_.view.length;Ie++){var He=_.view[Ie],rt=p.options.lineWrapping,pt=void 0,Er=0;if(!He.hidden){if(V+=He.line.height,b&&w<8){var Vr=He.node.offsetTop+He.node.offsetHeight;pt=Vr-A,A=Vr}else{var Hn=He.node.getBoundingClientRect();pt=Hn.bottom-Hn.top,!rt&&He.text.firstChild&&(Er=He.text.firstChild.getBoundingClientRect().right-Hn.left-1)}var Sn=He.line.height-pt;if((Sn>.005||Sn<-.005)&&(V<M&&(ve-=Sn),Bd(He.line,pt),gO(He.line),He.rest))for(var $o=0;$o<He.rest.length;$o++)gO(He.rest[$o]);if(Er>p.display.sizerWidth){var wi=Math.ceil(Er/ib(p.display));wi>p.display.maxLineLength&&(p.display.maxLineLength=wi,p.display.maxLine=He.line,p.display.maxLineChanged=!0)}}}Math.abs(ve)>2&&(_.scroller.scrollTop+=ve)}function gO(p){if(p.widgets)for(var _=0;_<p.widgets.length;++_){var A=p.widgets[_],M=A.node.parentNode;M&&(A.height=M.offsetHeight)}}function H2(p,_,A){var M=A&&null!=A.top?Math.max(0,A.top):p.scroller.scrollTop;M=Math.floor(M-P_(p));var V=A&&null!=A.bottom?A.bottom:M+p.wrapper.clientHeight,ve=Jc(_,M),Ie=Jc(_,V);if(A&&A.ensure){var He=A.ensure.from.line,rt=A.ensure.to.line;He<ve?(ve=He,Ie=Jc(_,Jh(Ua(_,He))+p.wrapper.clientHeight)):Math.min(rt,_.lastLine())>=Ie&&(ve=Jc(_,Jh(Ua(_,rt))-p.wrapper.clientHeight),Ie=rt)}return{from:ve,to:Math.max(Ie,ve+1)}}function LE(p,_){var A=p.display,M=ob(p.display);_.top<0&&(_.top=0);var V=p.curOp&&null!=p.curOp.scrollTop?p.curOp.scrollTop:A.scroller.scrollTop,ve=nt(p),Ie={};_.bottom-_.top>ve&&(_.bottom=_.top+ve);var He=p.doc.height+ky(A),pt=_.bottom>He-M;if(_.top<V)Ie.scrollTop=_.top<M?0:_.top;else if(_.bottom>V+ve){var Er=Math.min(_.top,(pt?He:_.bottom)-ve);Er!=V&&(Ie.scrollTop=Er)}var Vr=p.options.fixedGutter?0:A.gutters.offsetWidth,Hn=p.curOp&&null!=p.curOp.scrollLeft?p.curOp.scrollLeft:A.scroller.scrollLeft-Vr,Sn=Pv(p)-A.gutters.offsetWidth,$o=_.right-_.left>Sn;return $o&&(_.right=_.left+Sn),_.left<10?Ie.scrollLeft=0:_.left<Hn?Ie.scrollLeft=Math.max(0,_.left+Vr-($o?0:10)):_.right>Sn+Hn-3&&(Ie.scrollLeft=_.right+($o?0:10)-Sn),Ie}function IE(p,_){null!=_&&(G2(p),p.curOp.scrollTop=(null==p.curOp.scrollTop?p.doc.scrollTop:p.curOp.scrollTop)+_)}function sb(p){G2(p);var _=p.getCursor();p.curOp.scrollToPos={from:_,to:_,margin:p.options.cursorScrollMargin}}function K1(p,_,A){(null!=_||null!=A)&&G2(p),null!=_&&(p.curOp.scrollLeft=_),null!=A&&(p.curOp.scrollTop=A)}function G2(p){var _=p.curOp.scrollToPos;_&&(p.curOp.scrollToPos=null,vO(p,lO(p,_.from),lO(p,_.to),_.margin))}function vO(p,_,A,M){var V=LE(p,{left:Math.min(_.left,A.left),top:Math.min(_.top,A.top)-M,right:Math.max(_.right,A.right),bottom:Math.max(_.bottom,A.bottom)+M});K1(p,V.scrollLeft,V.scrollTop)}function V1(p,_){Math.abs(p.doc.scrollTop-_)<2||(r||FE(p,{top:_}),_O(p,_,!0),r&&FE(p),G1(p,100))}function _O(p,_,A){_=Math.max(0,Math.min(p.display.scroller.scrollHeight-p.display.scroller.clientHeight,_)),(p.display.scroller.scrollTop!=_||A)&&(p.doc.scrollTop=_,p.display.scrollbars.setScrollTop(_),p.display.scroller.scrollTop!=_&&(p.display.scroller.scrollTop=_))}function Fy(p,_,A,M){_=Math.max(0,Math.min(_,p.display.scroller.scrollWidth-p.display.scroller.clientWidth)),(!(A?_==p.doc.scrollLeft:Math.abs(p.doc.scrollLeft-_)<2)||M)&&(p.doc.scrollLeft=_,CO(p),p.display.scroller.scrollLeft!=_&&(p.display.scroller.scrollLeft=_),p.display.scrollbars.setScrollLeft(_))}function z1(p){var _=p.display,A=_.gutters.offsetWidth,M=Math.round(p.doc.height+ky(p.display));return{clientHeight:_.scroller.clientHeight,viewHeight:_.wrapper.clientHeight,scrollWidth:_.scroller.scrollWidth,clientWidth:_.scroller.clientWidth,viewWidth:_.wrapper.clientWidth,barLeft:p.options.fixedGutter?A:0,docHeight:M,scrollHeight:M+Yh(p)+_.barHeight,nativeBarWidth:_.nativeBarWidth,gutterWidth:A}}var jy=function(p,_,A){this.cm=A;var M=this.vert=wr("div",[wr("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),V=this.horiz=wr("div",[wr("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");M.tabIndex=V.tabIndex=-1,p(M),p(V),eo(M,"scroll",function(){M.clientHeight&&_(M.scrollTop,"vertical")}),eo(V,"scroll",function(){V.clientWidth&&_(V.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,b&&w<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};jy.prototype.update=function(p){var _=p.scrollWidth>p.clientWidth+1,A=p.scrollHeight>p.clientHeight+1,M=p.nativeBarWidth;return A?(this.vert.style.display="block",this.vert.style.bottom=_?M+"px":"0",this.vert.firstChild.style.height=Math.max(0,p.scrollHeight-p.clientHeight+(p.viewHeight-(_?M:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0"),_?(this.horiz.style.display="block",this.horiz.style.right=A?M+"px":"0",this.horiz.style.left=p.barLeft+"px",this.horiz.firstChild.style.width=Math.max(0,p.scrollWidth-p.clientWidth+(p.viewWidth-p.barLeft-(A?M:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0"),!this.checkedZeroWidth&&p.clientHeight>0&&(0==M&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:A?M:0,bottom:_?M:0}},jy.prototype.setScrollLeft=function(p){this.horiz.scrollLeft!=p&&(this.horiz.scrollLeft=p),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},jy.prototype.setScrollTop=function(p){this.vert.scrollTop!=p&&(this.vert.scrollTop=p),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},jy.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=Gt&&!Se?"12px":"18px",this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Oo,this.disableVert=new Oo},jy.prototype.enableZeroWidthBar=function(p,_,A){p.style.pointerEvents="auto",_.set(1e3,function M(){var V=p.getBoundingClientRect();("vert"==A?document.elementFromPoint(V.right-1,(V.top+V.bottom)/2):document.elementFromPoint((V.right+V.left)/2,V.bottom-1))!=p?p.style.pointerEvents="none":_.set(1e3,M)})},jy.prototype.clear=function(){var p=this.horiz.parentNode;p.removeChild(this.horiz),p.removeChild(this.vert)};var H1=function(){};function lb(p,_){_||(_=z1(p));var A=p.display.barWidth,M=p.display.barHeight;yO(p,_);for(var V=0;V<4&&A!=p.display.barWidth||M!=p.display.barHeight;V++)A!=p.display.barWidth&&p.options.lineWrapping&&z2(p),yO(p,z1(p)),A=p.display.barWidth,M=p.display.barHeight}function yO(p,_){var A=p.display,M=A.scrollbars.update(_);A.sizer.style.paddingRight=(A.barWidth=M.right)+"px",A.sizer.style.paddingBottom=(A.barHeight=M.bottom)+"px",A.heightForcer.style.borderBottom=M.bottom+"px solid transparent",M.right&&M.bottom?(A.scrollbarFiller.style.display="block",A.scrollbarFiller.style.height=M.bottom+"px",A.scrollbarFiller.style.width=M.right+"px"):A.scrollbarFiller.style.display="",M.bottom&&p.options.coverGutterNextToScrollbar&&p.options.fixedGutter?(A.gutterFiller.style.display="block",A.gutterFiller.style.height=M.bottom+"px",A.gutterFiller.style.width=_.gutterWidth+"px"):A.gutterFiller.style.display=""}H1.prototype.update=function(){return{bottom:0,right:0}},H1.prototype.setScrollLeft=function(){},H1.prototype.setScrollTop=function(){},H1.prototype.clear=function(){};var bO={native:jy,null:H1};function wO(p){p.display.scrollbars&&(p.display.scrollbars.clear(),p.display.scrollbars.addClass&&Dn(p.display.wrapper,p.display.scrollbars.addClass)),p.display.scrollbars=new bO[p.options.scrollbarStyle](function(_){p.display.wrapper.insertBefore(_,p.display.scrollbarFiller),eo(_,"mousedown",function(){p.state.focused&&setTimeout(function(){return p.display.input.focus()},0)}),_.setAttribute("cm-not-content","true")},function(_,A){"horizontal"==A?Fy(p,_):V1(p,_)},p),p.display.scrollbars.addClass&&_o(p.display.wrapper,p.display.scrollbars.addClass)}var FD=0;function Ny(p){p.curOp={cm:p,viewChanged:!1,startHeight:p.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++FD,markArrays:null},function I2(p){Sv?Sv.ops.push(p):p.ownsGroup=Sv={ops:[p],delayedCallbacks:[]}}(p.curOp)}function Uy(p){var _=p.curOp;_&&function F1(p,_){var A=p.ownsGroup;if(A)try{!function xE(p){var _=p.delayedCallbacks,A=0;do{for(;A<_.length;A++)_[A].call(null);for(var M=0;M<p.ops.length;M++){var V=p.ops[M];if(V.cursorActivityHandlers)for(;V.cursorActivityCalled<V.cursorActivityHandlers.length;)V.cursorActivityHandlers[V.cursorActivityCalled++].call(null,V.cm)}}while(A<_.length)}(A)}finally{Sv=null,_(A)}}(_,function(A){for(var M=0;M<A.ops.length;M++)A.ops[M].cm.curOp=null;!function jD(p){for(var _=p.ops,A=0;A<_.length;A++)ND(_[A]);for(var M=0;M<_.length;M++)UD(_[M]);for(var V=0;V<_.length;V++)BD(_[V]);for(var ve=0;ve<_.length;ve++)WD(_[ve]);for(var Ie=0;Ie<_.length;Ie++)ZD(_[Ie])}(A)})}function ND(p){var _=p.cm,A=_.display;(function VD(p){var _=p.display;!_.scrollbarsClipped&&_.scroller.offsetWidth&&(_.nativeBarWidth=_.scroller.offsetWidth-_.scroller.clientWidth,_.heightForcer.style.height=Yh(p)+"px",_.sizer.style.marginBottom=-_.nativeBarWidth+"px",_.sizer.style.borderRightWidth=Yh(p)+"px",_.scrollbarsClipped=!0)})(_),p.updateMaxLine&&x_(_),p.mustUpdate=p.viewChanged||p.forceUpdate||null!=p.scrollTop||p.scrollToPos&&(p.scrollToPos.from.line<A.viewFrom||p.scrollToPos.to.line>=A.viewTo)||A.maxLineChanged&&_.options.lineWrapping,p.update=p.mustUpdate&&new q2(_,p.mustUpdate&&{top:p.scrollTop,ensure:p.scrollToPos},p.forceUpdate)}function UD(p){p.updatedDisplay=p.mustUpdate&&RE(p.cm,p.update)}function BD(p){var _=p.cm,A=_.display;p.updatedDisplay&&z2(_),p.barMeasure=z1(_),A.maxLineChanged&&!_.options.lineWrapping&&(p.adjustWidthTo=Gn(_,A.maxLine,A.maxLine.text.length).left+3,_.display.sizerWidth=p.adjustWidthTo,p.barMeasure.scrollWidth=Math.max(A.scroller.clientWidth,A.sizer.offsetLeft+p.adjustWidthTo+Yh(_)+_.display.barWidth),p.maxScrollLeft=Math.max(0,A.sizer.offsetLeft+p.adjustWidthTo-Pv(_))),(p.updatedDisplay||p.selectionChanged)&&(p.preparedSelection=A.input.prepareSelection())}function WD(p){var _=p.cm;null!=p.adjustWidthTo&&(_.display.sizer.style.minWidth=p.adjustWidthTo+"px",p.maxScrollLeft<_.doc.scrollLeft&&Fy(_,Math.min(_.display.scroller.scrollLeft,p.maxScrollLeft),!0),_.display.maxLineChanged=!1);var A=p.focus&&p.focus==Eo();p.preparedSelection&&_.display.input.showSelection(p.preparedSelection,A),(p.updatedDisplay||p.startHeight!=_.doc.height)&&lb(_,p.barMeasure),p.updatedDisplay&&NE(_,p.barMeasure),p.selectionChanged&&ME(_),_.state.focused&&p.updateInput&&_.display.input.reset(p.typing),A&&mO(p.cm)}function ZD(p){var _=p.cm,A=_.display,M=_.doc;p.updatedDisplay&&xO(_,p.update),null!=A.wheelStartX&&(null!=p.scrollTop||null!=p.scrollLeft||p.scrollToPos)&&(A.wheelStartX=A.wheelStartY=null),null!=p.scrollTop&&_O(_,p.scrollTop,p.forceScroll),null!=p.scrollLeft&&Fy(_,p.scrollLeft,!0,!0),p.scrollToPos&&function kD(p,_){if(!ca(p,"scrollCursorIntoView")){var A=p.display,M=A.sizer.getBoundingClientRect(),V=null;if(_.top+M.top<0?V=!0:_.bottom+M.top>(window.innerHeight||document.documentElement.clientHeight)&&(V=!1),null!=V&&!We){var ve=wr("div","\u200b",null,"position: absolute;\n                         top: "+(_.top-A.viewOffset-P_(p.display))+"px;\n                         height: "+(_.bottom-_.top+Yh(p)+A.barHeight)+"px;\n                         left: "+_.left+"px; width: "+Math.max(2,_.right-_.left)+"px;");p.display.lineSpace.appendChild(ve),ve.scrollIntoView(V),p.display.lineSpace.removeChild(ve)}}}(_,function LD(p,_,A,M){var V;null==M&&(M=0),!p.options.lineWrapping&&_==A&&(A="before"==_.sticky?Ai(_.line,_.ch+1,"before"):_,_=_.ch?Ai(_.line,"before"==_.sticky?_.ch-1:_.ch,"after"):_);for(var ve=0;ve<5;ve++){var Ie=!1,He=mg(p,_),rt=A&&A!=_?mg(p,A):He,pt=LE(p,V={left:Math.min(He.left,rt.left),top:Math.min(He.top,rt.top)-M,right:Math.max(He.left,rt.left),bottom:Math.max(He.bottom,rt.bottom)+M}),Er=p.doc.scrollTop,Vr=p.doc.scrollLeft;if(null!=pt.scrollTop&&(V1(p,pt.scrollTop),Math.abs(p.doc.scrollTop-Er)>1&&(Ie=!0)),null!=pt.scrollLeft&&(Fy(p,pt.scrollLeft),Math.abs(p.doc.scrollLeft-Vr)>1&&(Ie=!0)),!Ie)break}return V}(_,Zi(M,p.scrollToPos.from),Zi(M,p.scrollToPos.to),p.scrollToPos.margin));var ve=p.maybeHiddenMarkers,Ie=p.maybeUnhiddenMarkers;if(ve)for(var He=0;He<ve.length;++He)ve[He].lines.length||Ia(ve[He],"hide");if(Ie)for(var rt=0;rt<Ie.length;++rt)Ie[rt].lines.length&&Ia(Ie[rt],"unhide");A.wrapper.offsetHeight&&(M.scrollTop=_.display.scroller.scrollTop),p.changeObjs&&Ia(_,"changes",_,p.changeObjs),p.update&&p.update.finish()}function Qh(p,_){if(p.curOp)return _();Ny(p);try{return _()}finally{Uy(p)}}function xp(p,_){return function(){if(p.curOp)return _.apply(p,arguments);Ny(p);try{return _.apply(p,arguments)}finally{Uy(p)}}}function qf(p){return function(){if(this.curOp)return p.apply(this,arguments);Ny(this);try{return p.apply(this,arguments)}finally{Uy(this)}}}function Cp(p){return function(){var _=this.cm;if(!_||_.curOp)return p.apply(this,arguments);Ny(_);try{return p.apply(this,arguments)}finally{Uy(_)}}}function G1(p,_){p.doc.highlightFrontier<p.display.viewTo&&p.state.highlight.set(_,Ha(KD,p))}function KD(p){var _=p.doc;if(!(_.highlightFrontier>=p.display.viewTo)){var A=+new Date+p.options.workTime,M=xh(p,_.highlightFrontier),V=[];_.iter(M.line,Math.min(_.first+_.size,p.display.viewTo+500),function(ve){if(M.line>=p.display.viewFrom){var Ie=ve.styles,He=ve.text.length>p.options.maxHighlightLength?Gp(_.mode,M.state):null,rt=g_(p,ve,M,!0);He&&(M.state=He),ve.styles=rt.styles;var pt=ve.styleClasses,Er=rt.classes;Er?ve.styleClasses=Er:pt&&(ve.styleClasses=null);for(var Vr=!Ie||Ie.length!=ve.styles.length||pt!=Er&&(!pt||!Er||pt.bgClass!=Er.bgClass||pt.textClass!=Er.textClass),Hn=0;!Vr&&Hn<Ie.length;++Hn)Vr=Ie[Hn]!=ve.styles[Hn];Vr&&V.push(M.line),ve.stateAfter=M.save(),M.nextLine()}else ve.text.length<=p.options.maxHighlightLength&&Zg(p,ve.text,M),ve.stateAfter=M.line%5==0?M.save():null,M.nextLine();if(+new Date>A)return G1(p,p.options.workDelay),!0}),_.highlightFrontier=M.line,_.modeFrontier=Math.max(_.modeFrontier,M.line),V.length&&Qh(p,function(){for(var ve=0;ve<V.length;ve++)M_(p,V[ve],"text")})}}var q2=function(p,_,A){var M=p.display;this.viewport=_,this.visible=H2(M,p.doc,_),this.editorIsHidden=!M.wrapper.offsetWidth,this.wrapperHeight=M.wrapper.clientHeight,this.wrapperWidth=M.wrapper.clientWidth,this.oldDisplayWidth=Pv(p),this.force=A,this.dims=TE(p),this.events=[]};function RE(p,_){var A=p.display,M=p.doc;if(_.editorIsHidden)return A_(p),!1;if(!_.force&&_.visible.from>=A.viewFrom&&_.visible.to<=A.viewTo&&(null==A.updateLineNumbers||A.updateLineNumbers>=A.viewTo)&&A.renderedView==A.view&&0==pO(p))return!1;EO(p)&&(A_(p),_.dims=TE(p));var V=M.first+M.size,ve=Math.max(_.visible.from-p.options.viewportMargin,M.first),Ie=Math.min(V,_.visible.to+p.options.viewportMargin);A.viewFrom<ve&&ve-A.viewFrom<20&&(ve=Math.max(M.first,A.viewFrom)),A.viewTo>Ie&&A.viewTo-Ie<20&&(Ie=Math.min(V,A.viewTo)),cp&&(ve=qh(p.doc,ve),Ie=$h(p.doc,Ie));var He=ve!=A.viewFrom||Ie!=A.viewTo||A.lastWrapHeight!=_.wrapperHeight||A.lastWrapWidth!=_.wrapperWidth;(function MD(p,_,A){var M=p.display;0==M.view.length||_>=M.viewTo||A<=M.viewFrom?(M.view=rb(p,_,A),M.viewFrom=_):(M.viewFrom>_?M.view=rb(p,_,M.viewFrom).concat(M.view):M.viewFrom<_&&(M.view=M.view.slice(Ry(p,_))),M.viewFrom=_,M.viewTo<A?M.view=M.view.concat(rb(p,M.viewTo,A)):M.viewTo>A&&(M.view=M.view.slice(0,Ry(p,A)))),M.viewTo=A})(p,ve,Ie),A.viewOffset=Jh(Ua(p.doc,A.viewFrom)),p.display.mover.style.top=A.viewOffset+"px";var rt=pO(p);if(!He&&0==rt&&!_.force&&A.renderedView==A.view&&(null==A.updateLineNumbers||A.updateLineNumbers>=A.viewTo))return!1;var pt=function zD(p){if(p.hasFocus())return null;var _=Eo();if(!_||!xt(p.display.lineDiv,_))return null;var A={activeElt:_};if(window.getSelection){var M=window.getSelection();M.anchorNode&&M.extend&&xt(p.display.lineDiv,M.anchorNode)&&(A.anchorNode=M.anchorNode,A.anchorOffset=M.anchorOffset,A.focusNode=M.focusNode,A.focusOffset=M.focusOffset)}return A}(p);return rt>4&&(A.lineDiv.style.display="none"),function GD(p,_,A){var M=p.display,V=p.options.lineNumbers,ve=M.lineDiv,Ie=ve.firstChild;function He($o){var wi=$o.nextSibling;return C&&Gt&&p.display.currentWheelTarget==$o?$o.style.display="none":$o.parentNode.removeChild($o),wi}for(var rt=M.view,pt=M.viewFrom,Er=0;Er<rt.length;Er++){var Vr=rt[Er];if(!Vr.hidden)if(Vr.node&&Vr.node.parentNode==ve){for(;Ie!=Vr.node;)Ie=He(Ie);var Sn=V&&null!=_&&_<=pt&&Vr.lineNumber;Vr.changes&&(Li(Vr.changes,"gutter")>-1&&(Sn=!1),Kg(p,Vr,pt,A)),Sn&&(ir(Vr.lineNumber),Vr.lineNumber.appendChild(document.createTextNode(ym(p.options,pt)))),Ie=Vr.node.nextSibling}else{var Hn=j2(p,Vr,pt,A);ve.insertBefore(Hn,Ie)}pt+=Vr.size}for(;Ie;)Ie=He(Ie)}(p,A.updateLineNumbers,_.dims),rt>4&&(A.lineDiv.style.display=""),A.renderedView=A.view,function HD(p){if(p&&p.activeElt&&p.activeElt!=Eo()&&(p.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(p.activeElt.nodeName)&&p.anchorNode&&xt(document.body,p.anchorNode)&&xt(document.body,p.focusNode))){var _=window.getSelection(),A=document.createRange();A.setEnd(p.anchorNode,p.anchorOffset),A.collapse(!1),_.removeAllRanges(),_.addRange(A),_.extend(p.focusNode,p.focusOffset)}}(pt),ir(A.cursorDiv),ir(A.selectionDiv),A.gutters.style.height=A.sizer.style.minHeight=0,He&&(A.lastWrapHeight=_.wrapperHeight,A.lastWrapWidth=_.wrapperWidth,G1(p,400)),A.updateLineNumbers=null,!0}function xO(p,_){for(var A=_.viewport,M=!0;;M=!1){if(M&&p.options.lineWrapping&&_.oldDisplayWidth!=Pv(p))M&&(_.visible=H2(p.display,p.doc,A));else if(A&&null!=A.top&&(A={top:Math.min(p.doc.height+ky(p.display)-nt(p),A.top)}),_.visible=H2(p.display,p.doc,A),_.visible.from>=p.display.viewFrom&&_.visible.to<=p.display.viewTo)break;if(!RE(p,_))break;z2(p);var V=z1(p);Z1(p),lb(p,V),NE(p,V),_.force=!1}_.signal(p,"update",p),(p.display.viewFrom!=p.display.reportedViewFrom||p.display.viewTo!=p.display.reportedViewTo)&&(_.signal(p,"viewportChange",p,p.display.viewFrom,p.display.viewTo),p.display.reportedViewFrom=p.display.viewFrom,p.display.reportedViewTo=p.display.viewTo)}function FE(p,_){var A=new q2(p,_);if(RE(p,A)){z2(p),xO(p,A);var M=z1(p);Z1(p),lb(p,M),NE(p,M),A.finish()}}function jE(p){p.sizer.style.marginLeft=p.gutters.offsetWidth+"px",nd(p,"gutterChanged",p)}function NE(p,_){p.display.sizer.style.minHeight=_.docHeight+"px",p.display.heightForcer.style.top=_.docHeight+"px",p.display.gutters.style.height=_.docHeight+p.display.barHeight+Yh(p)+"px"}function CO(p){var _=p.display,A=_.view;if(_.alignWidgets||_.gutters.firstChild&&p.options.fixedGutter){for(var M=SE(_)-_.scroller.scrollLeft+p.doc.scrollLeft,V=_.gutters.offsetWidth,ve=M+"px",Ie=0;Ie<A.length;Ie++)if(!A[Ie].hidden){p.options.fixedGutter&&(A[Ie].gutter&&(A[Ie].gutter.style.left=ve),A[Ie].gutterBackground&&(A[Ie].gutterBackground.style.left=ve));var He=A[Ie].alignable;if(He)for(var rt=0;rt<He.length;rt++)He[rt].style.left=ve}p.options.fixedGutter&&(_.gutters.style.left=M+V+"px")}}function EO(p){if(!p.options.lineNumbers)return!1;var _=p.doc,A=ym(p.options,_.first+_.size-1),M=p.display;if(A.length!=M.lineNumChars){var V=M.measure.appendChild(wr("div",[wr("div",A)],"CodeMirror-linenumber CodeMirror-gutter-elt")),ve=V.firstChild.offsetWidth,Ie=V.offsetWidth-ve;return M.lineGutter.style.width="",M.lineNumInnerWidth=Math.max(ve,M.lineGutter.offsetWidth-Ie)+1,M.lineNumWidth=M.lineNumInnerWidth+Ie,M.lineNumChars=M.lineNumInnerWidth?A.length:-1,M.lineGutter.style.width=M.lineNumWidth+"px",jE(p.display),!0}return!1}function UE(p,_){for(var A=[],M=!1,V=0;V<p.length;V++){var ve=p[V],Ie=null;if("string"!=typeof ve&&(Ie=ve.style,ve=ve.className),"CodeMirror-linenumbers"==ve){if(!_)continue;M=!0}A.push({className:ve,style:Ie})}return _&&!M&&A.push({className:"CodeMirror-linenumbers",style:null}),A}function OO(p){var _=p.gutters,A=p.gutterSpecs;ir(_),p.lineGutter=null;for(var M=0;M<A.length;++M){var V=A[M],ve=V.className,Ie=V.style,He=_.appendChild(wr("div",null,"CodeMirror-gutter "+ve));Ie&&(He.style.cssText=Ie),"CodeMirror-linenumbers"==ve&&(p.lineGutter=He,He.style.width=(p.lineNumWidth||1)+"px")}_.style.display=A.length?"":"none",jE(p)}function q1(p){OO(p.display),Ch(p),CO(p)}function qD(p,_,A,M){var V=this;this.input=A,V.scrollbarFiller=wr("div",null,"CodeMirror-scrollbar-filler"),V.scrollbarFiller.setAttribute("cm-not-content","true"),V.gutterFiller=wr("div",null,"CodeMirror-gutter-filler"),V.gutterFiller.setAttribute("cm-not-content","true"),V.lineDiv=sr("div",null,"CodeMirror-code"),V.selectionDiv=wr("div",null,null,"position: relative; z-index: 1"),V.cursorDiv=wr("div",null,"CodeMirror-cursors"),V.measure=wr("div",null,"CodeMirror-measure"),V.lineMeasure=wr("div",null,"CodeMirror-measure"),V.lineSpace=sr("div",[V.measure,V.lineMeasure,V.selectionDiv,V.cursorDiv,V.lineDiv],null,"position: relative; outline: none");var ve=sr("div",[V.lineSpace],"CodeMirror-lines");V.mover=wr("div",[ve],null,"position: relative"),V.sizer=wr("div",[V.mover],"CodeMirror-sizer"),V.sizerWidth=null,V.heightForcer=wr("div",null,null,"position: absolute; height: "+la+"px; width: 1px;"),V.gutters=wr("div",null,"CodeMirror-gutters"),V.lineGutter=null,V.scroller=wr("div",[V.sizer,V.heightForcer,V.gutters],"CodeMirror-scroll"),V.scroller.setAttribute("tabIndex","-1"),V.wrapper=wr("div",[V.scrollbarFiller,V.gutterFiller,V.scroller],"CodeMirror"),V.wrapper.setAttribute("translate","no"),b&&w<8&&(V.gutters.style.zIndex=-1,V.scroller.style.paddingRight=0),!C&&!(r&&ur)&&(V.scroller.draggable=!0),p&&(p.appendChild?p.appendChild(V.wrapper):p(V.wrapper)),V.viewFrom=V.viewTo=_.first,V.reportedViewFrom=V.reportedViewTo=_.first,V.view=[],V.renderedView=null,V.externalMeasured=null,V.viewOffset=0,V.lastWrapHeight=V.lastWrapWidth=0,V.updateLineNumbers=null,V.nativeBarWidth=V.barHeight=V.barWidth=0,V.scrollbarsClipped=!1,V.lineNumWidth=V.lineNumInnerWidth=V.lineNumChars=null,V.alignWidgets=!1,V.cachedCharWidth=V.cachedTextHeight=V.cachedPaddingH=null,V.maxLine=null,V.maxLineLength=0,V.maxLineChanged=!1,V.wheelDX=V.wheelDY=V.wheelStartX=V.wheelStartY=null,V.shift=!1,V.selForContextMenu=null,V.activeTouch=null,V.gutterSpecs=UE(M.gutters,M.lineNumbers),OO(V),A.init(V)}q2.prototype.signal=function(p,_){bl(p,_)&&this.events.push(arguments)},q2.prototype.finish=function(){for(var p=0;p<this.events.length;p++)Ia.apply(null,this.events[p])};var $2=0,Em=null;function DO(p){var _=p.wheelDeltaX,A=p.wheelDeltaY;return null==_&&p.detail&&p.axis==p.HORIZONTAL_AXIS&&(_=p.detail),null==A&&p.detail&&p.axis==p.VERTICAL_AXIS?A=p.detail:null==A&&(A=p.wheelDelta),{x:_,y:A}}function $D(p){var _=DO(p);return _.x*=Em,_.y*=Em,_}function TO(p,_){var A=DO(_),M=A.x,V=A.y,ve=p.display,Ie=ve.scroller,rt=Ie.scrollHeight>Ie.clientHeight;if(M&&Ie.scrollWidth>Ie.clientWidth||V&&rt){if(V&&Gt&&C)e:for(var pt=_.target,Er=ve.view;pt!=Ie;pt=pt.parentNode)for(var Vr=0;Vr<Er.length;Vr++)if(Er[Vr].node==pt){p.display.currentWheelTarget=pt;break e}if(M&&!r&&!ae&&null!=Em)return V&&rt&&V1(p,Math.max(0,Ie.scrollTop+V*Em)),Fy(p,Math.max(0,Ie.scrollLeft+M*Em)),(!V||V&&rt)&&kl(_),void(ve.wheelStartX=null);if(V&&null!=Em){var Hn=V*Em,Sn=p.doc.scrollTop,$o=Sn+ve.wrapper.clientHeight;Hn<0?Sn=Math.max(0,Sn+Hn-50):$o=Math.min(p.doc.height,$o+Hn+50),FE(p,{top:Sn,bottom:$o})}$2<20&&(null==ve.wheelStartX?(ve.wheelStartX=Ie.scrollLeft,ve.wheelStartY=Ie.scrollTop,ve.wheelDX=M,ve.wheelDY=V,setTimeout(function(){if(null!=ve.wheelStartX){var wi=Ie.scrollLeft-ve.wheelStartX,Yi=Ie.scrollTop-ve.wheelStartY,ha=Yi&&ve.wheelDY&&Yi/ve.wheelDY||wi&&ve.wheelDX&&wi/ve.wheelDX;ve.wheelStartX=ve.wheelStartY=null,ha&&(Em=(Em*$2+ha)/($2+1),++$2)}},200)):(ve.wheelDX+=M,ve.wheelDY+=V))}}b?Em=-.53:r?Em=15:ne?Em=-.7:be&&(Em=-1/3);var Om=function(p,_){this.ranges=p,this.primIndex=_};Om.prototype.primary=function(){return this.ranges[this.primIndex]},Om.prototype.equals=function(p){if(p==this)return!0;if(p.primIndex!=this.primIndex||p.ranges.length!=this.ranges.length)return!1;for(var _=0;_<this.ranges.length;_++){var A=this.ranges[_],M=p.ranges[_];if(!wh(A.anchor,M.anchor)||!wh(A.head,M.head))return!1}return!0},Om.prototype.deepCopy=function(){for(var p=[],_=0;_<this.ranges.length;_++)p[_]=new Ec(At(this.ranges[_].anchor),At(this.ranges[_].head));return new Om(p,this.primIndex)},Om.prototype.somethingSelected=function(){for(var p=0;p<this.ranges.length;p++)if(!this.ranges[p].empty())return!0;return!1},Om.prototype.contains=function(p,_){_||(_=p);for(var A=0;A<this.ranges.length;A++){var M=this.ranges[A];if(Rs(_,M.from())>=0&&Rs(p,M.to())<=0)return A}return-1};var Ec=function(p,_){this.anchor=p,this.head=_};function gg(p,_,A){var M=p&&p.options.selectionsMayTouch,V=_[A];_.sort(function(Hn,Sn){return Rs(Hn.from(),Sn.from())}),A=Li(_,V);for(var ve=1;ve<_.length;ve++){var Ie=_[ve],He=_[ve-1],rt=Rs(He.to(),Ie.from());if(M&&!Ie.empty()?rt>0:rt>=0){var pt=ii(He.from(),Ie.from()),Er=Zr(He.to(),Ie.to()),Vr=He.empty()?Ie.from()==Ie.head:He.from()==He.head;ve<=A&&--A,_.splice(--ve,2,new Ec(Vr?Er:pt,Vr?pt:Er))}}return new Om(_,A)}function k_(p,_){return new Om([new Ec(p,_||p)],0)}function L_(p){return p.text?Ai(p.from.line+p.text.length-1,Ji(p.text).length+(1==p.text.length?p.from.ch:0)):p.to}function SO(p,_){if(Rs(p,_.from)<0)return p;if(Rs(p,_.to)<=0)return L_(_);var A=p.line+_.text.length-(_.to.line-_.from.line)-1,M=p.ch;return p.line==_.to.line&&(M+=L_(_).ch-_.to.ch),Ai(A,M)}function BE(p,_){for(var A=[],M=0;M<p.sel.ranges.length;M++){var V=p.sel.ranges[M];A.push(new Ec(SO(V.anchor,_),SO(V.head,_)))}return gg(p.cm,A,p.sel.primIndex)}function PO(p,_,A){return p.line==_.line?Ai(A.line,p.ch-_.ch+A.ch):Ai(A.line+(p.line-_.line),p.ch)}function WE(p){p.doc.mode=nc(p.options,p.doc.modeOption),$1(p)}function $1(p){p.doc.iter(function(_){_.stateAfter&&(_.stateAfter=null),_.styles&&(_.styles=null)}),p.doc.modeFrontier=p.doc.highlightFrontier=p.doc.first,G1(p,100),p.state.modeGen++,p.curOp&&Ch(p)}function MO(p,_){return 0==_.from.ch&&0==_.to.ch&&""==Ji(_.text)&&(!p.cm||p.cm.options.wholeLineUpdateBefore)}function ZE(p,_,A,M){function V(Za){return A?A[Za]:null}function ve(Za,ma,Ga){(function S2(p,_,A,M){p.text=_,p.stateAfter&&(p.stateAfter=null),p.styles&&(p.styles=null),null!=p.order&&(p.order=null),xm(p),Gh(p,A);var V=M?M(p):1;V!=p.height&&Bd(p,V)})(Za,ma,Ga,M),nd(Za,"change",Za,_)}function Ie(Za,ma){for(var Ga=[],Ms=Za;Ms<ma;++Ms)Ga.push(new wp(pt[Ms],V(Ms),M));return Ga}var He=_.from,rt=_.to,pt=_.text,Er=Ua(p,He.line),Vr=Ua(p,rt.line),Hn=Ji(pt),Sn=V(pt.length-1),$o=rt.line-He.line;if(_.full)p.insert(0,Ie(0,pt.length)),p.remove(pt.length,p.size-pt.length);else if(MO(p,_)){var wi=Ie(0,pt.length-1);ve(Vr,Vr.text,Sn),$o&&p.remove(He.line,$o),wi.length&&p.insert(He.line,wi)}else if(Er==Vr)if(1==pt.length)ve(Er,Er.text.slice(0,He.ch)+Hn+Er.text.slice(rt.ch),Sn);else{var Yi=Ie(1,pt.length-1);Yi.push(new wp(Hn+Er.text.slice(rt.ch),Sn,M)),ve(Er,Er.text.slice(0,He.ch)+pt[0],V(0)),p.insert(He.line+1,Yi)}else if(1==pt.length)ve(Er,Er.text.slice(0,He.ch)+pt[0]+Vr.text.slice(rt.ch),V(0)),p.remove(He.line+1,$o);else{ve(Er,Er.text.slice(0,He.ch)+pt[0],V(0)),ve(Vr,Hn+Vr.text.slice(rt.ch),Sn);var ha=Ie(1,pt.length-1);$o>1&&p.remove(He.line+1,$o-1),p.insert(He.line+1,ha)}nd(p,"change",p,_)}function I_(p,_,A){!function M(V,ve,Ie){if(V.linked)for(var He=0;He<V.linked.length;++He){var rt=V.linked[He];if(rt.doc!=ve){var pt=Ie&&rt.sharedHist;A&&!pt||(_(rt.doc,pt),M(rt.doc,V,pt))}}}(p,null,!0)}function AO(p,_){if(_.cm)throw new Error("This document is already in use.");p.doc=_,_.cm=p,PE(p),WE(p),kO(p),p.options.direction=_.direction,p.options.lineWrapping||x_(p),p.options.mode=_.modeOption,Ch(p)}function kO(p){("rtl"==p.doc.direction?_o:Dn)(p.display.lineDiv,"CodeMirror-rtl")}function J2(p){this.done=[],this.undone=[],this.undoDepth=p?p.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=p?p.maxGeneration:1}function KE(p,_){var A={from:At(_.from),to:L_(_),text:lp(p,_.from,_.to)};return RO(p,A,_.from.line,_.to.line+1),I_(p,function(M){return RO(M,A,_.from.line,_.to.line+1)},!0),A}function LO(p){for(;p.length&&Ji(p).ranges;)p.pop()}function IO(p,_,A,M){var V=p.history;V.undone.length=0;var Ie,He,ve=+new Date;if((V.lastOp==M||V.lastOrigin==_.origin&&_.origin&&("+"==_.origin.charAt(0)&&V.lastModTime>ve-(p.cm?p.cm.options.historyEventDelay:500)||"*"==_.origin.charAt(0)))&&(Ie=function QD(p,_){return _?(LO(p.done),Ji(p.done)):p.done.length&&!Ji(p.done).ranges?Ji(p.done):p.done.length>1&&!p.done[p.done.length-2].ranges?(p.done.pop(),Ji(p.done)):void 0}(V,V.lastOp==M)))He=Ji(Ie.changes),0==Rs(_.from,_.to)&&0==Rs(_.from,He.to)?He.to=L_(_):Ie.changes.push(KE(p,_));else{var rt=Ji(V.done);for((!rt||!rt.ranges)&&Y2(p.sel,V.done),Ie={changes:[KE(p,_)],generation:V.generation},V.done.push(Ie);V.done.length>V.undoDepth;)V.done.shift(),V.done[0].ranges||V.done.shift()}V.done.push(A),V.generation=++V.maxGeneration,V.lastModTime=V.lastSelTime=ve,V.lastOp=V.lastSelOp=M,V.lastOrigin=V.lastSelOrigin=_.origin,He||Ia(p,"historyAdded")}function eT(p,_,A,M){var V=p.history,ve=M&&M.origin;A==V.lastSelOp||ve&&V.lastSelOrigin==ve&&(V.lastModTime==V.lastSelTime&&V.lastOrigin==ve||function XD(p,_,A,M){var V=_.charAt(0);return"*"==V||"+"==V&&A.ranges.length==M.ranges.length&&A.somethingSelected()==M.somethingSelected()&&new Date-p.history.lastSelTime<=(p.cm?p.cm.options.historyEventDelay:500)}(p,ve,Ji(V.done),_))?V.done[V.done.length-1]=_:Y2(_,V.done),V.lastSelTime=+new Date,V.lastSelOrigin=ve,V.lastSelOp=A,M&&!1!==M.clearRedo&&LO(V.undone)}function Y2(p,_){var A=Ji(_);A&&A.ranges&&A.equals(p)||_.push(p)}function RO(p,_,A,M){var V=_["spans_"+p.id],ve=0;p.iter(Math.max(p.first,A),Math.min(p.first+p.size,M),function(Ie){Ie.markedSpans&&((V||(V=_["spans_"+p.id]={}))[ve]=Ie.markedSpans),++ve})}function tT(p){if(!p)return null;for(var _,A=0;A<p.length;++A)p[A].marker.explicitlyCleared?_||(_=p.slice(0,A)):_&&_.push(p[A]);return _?_.length?_:null:p}function FO(p,_){var A=function rT(p,_){var A=_["spans_"+p.id];if(!A)return null;for(var M=[],V=0;V<_.text.length;++V)M.push(tT(A[V]));return M}(p,_),M=wm(p,_);if(!A)return M;if(!M)return A;for(var V=0;V<A.length;++V){var ve=A[V],Ie=M[V];if(ve&&Ie)e:for(var He=0;He<Ie.length;++He){for(var rt=Ie[He],pt=0;pt<ve.length;++pt)if(ve[pt].marker==rt.marker)continue e;ve.push(rt)}else Ie&&(A[V]=Ie)}return A}function cb(p,_,A){for(var M=[],V=0;V<p.length;++V){var ve=p[V];if(ve.ranges)M.push(A?Om.prototype.deepCopy.call(ve):ve);else{var Ie=ve.changes,He=[];M.push({changes:He});for(var rt=0;rt<Ie.length;++rt){var pt=Ie[rt],Er=void 0;if(He.push({from:pt.from,to:pt.to,text:pt.text}),_)for(var Vr in pt)(Er=Vr.match(/^spans_(\d+)$/))&&Li(_,Number(Er[1]))>-1&&(Ji(He)[Vr]=pt[Vr],delete pt[Vr])}}}return M}function VE(p,_,A,M){if(M){var V=p.anchor;if(A){var ve=Rs(_,V)<0;ve!=Rs(A,V)<0?(V=_,_=A):ve!=Rs(_,A)<0&&(_=A)}return new Ec(V,_)}return new Ec(A||_,_)}function Q2(p,_,A,M,V){null==V&&(V=p.cm&&(p.cm.display.shift||p.extend)),wf(p,new Om([VE(p.sel.primary(),_,A,V)],0),M)}function jO(p,_,A){for(var M=[],V=p.cm&&(p.cm.display.shift||p.extend),ve=0;ve<p.sel.ranges.length;ve++)M[ve]=VE(p.sel.ranges[ve],_[ve],null,V);wf(p,gg(p.cm,M,p.sel.primIndex),A)}function zE(p,_,A,M){var V=p.sel.ranges.slice(0);V[_]=A,wf(p,gg(p.cm,V,p.sel.primIndex),M)}function NO(p,_,A,M){wf(p,k_(_,A),M)}function UO(p,_,A){var M=p.history.done,V=Ji(M);V&&V.ranges?(M[M.length-1]=_,X2(p,_,A)):wf(p,_,A)}function wf(p,_,A){X2(p,_,A),eT(p,p.sel,p.cm?p.cm.curOp.id:NaN,A)}function X2(p,_,A){(bl(p,"beforeSelectionChange")||p.cm&&bl(p.cm,"beforeSelectionChange"))&&(_=function nT(p,_,A){var M={ranges:_.ranges,update:function(V){this.ranges=[];for(var ve=0;ve<V.length;ve++)this.ranges[ve]=new Ec(Zi(p,V[ve].anchor),Zi(p,V[ve].head))},origin:A&&A.origin};return Ia(p,"beforeSelectionChange",p,M),p.cm&&Ia(p.cm,"beforeSelectionChange",p.cm,M),M.ranges!=_.ranges?gg(p.cm,M.ranges,M.ranges.length-1):_}(p,_,A));var M=A&&A.bias||(Rs(_.primary().head,p.sel.primary().head)<0?-1:1);BO(p,ZO(p,_,M,!0)),(!A||!1!==A.scroll)&&p.cm&&"nocursor"!=p.cm.getOption("readOnly")&&sb(p.cm)}function BO(p,_){_.equals(p.sel)||(p.sel=_,p.cm&&(p.cm.curOp.updateInput=1,p.cm.curOp.selectionChanged=!0,fs(p.cm)),nd(p,"cursorActivity",p))}function WO(p){BO(p,ZO(p,p.sel,null,!1))}function ZO(p,_,A,M){for(var V,ve=0;ve<_.ranges.length;ve++){var Ie=_.ranges[ve],He=_.ranges.length==p.sel.ranges.length&&p.sel.ranges[ve],rt=ex(p,Ie.anchor,He&&He.anchor,A,M),pt=ex(p,Ie.head,He&&He.head,A,M);(V||rt!=Ie.anchor||pt!=Ie.head)&&(V||(V=_.ranges.slice(0,ve)),V[ve]=new Ec(rt,pt))}return V?gg(p.cm,V,_.primIndex):_}function ub(p,_,A,M,V){var ve=Ua(p,_.line);if(ve.markedSpans)for(var Ie=0;Ie<ve.markedSpans.length;++Ie){var He=ve.markedSpans[Ie],rt=He.marker,pt="selectLeft"in rt?!rt.selectLeft:rt.inclusiveLeft,Er="selectRight"in rt?!rt.selectRight:rt.inclusiveRight;if((null==He.from||(pt?He.from<=_.ch:He.from<_.ch))&&(null==He.to||(Er?He.to>=_.ch:He.to>_.ch))){if(V&&(Ia(rt,"beforeCursorEnter"),rt.explicitlyCleared)){if(ve.markedSpans){--Ie;continue}break}if(!rt.atomic)continue;if(A){var Vr=rt.find(M<0?1:-1),Hn=void 0;if((M<0?Er:pt)&&(Vr=KO(p,Vr,-M,Vr&&Vr.line==_.line?ve:null)),Vr&&Vr.line==_.line&&(Hn=Rs(Vr,A))&&(M<0?Hn<0:Hn>0))return ub(p,Vr,_,M,V)}var Sn=rt.find(M<0?-1:1);return(M<0?pt:Er)&&(Sn=KO(p,Sn,M,Sn.line==_.line?ve:null)),Sn?ub(p,Sn,_,M,V):null}}return _}function ex(p,_,A,M,V){var ve=M||1;return ub(p,_,A,ve,V)||!V&&ub(p,_,A,ve,!0)||ub(p,_,A,-ve,V)||!V&&ub(p,_,A,-ve,!0)||(p.cantEdit=!0,Ai(p.first,0))}function KO(p,_,A,M){return A<0&&0==_.ch?_.line>p.first?Zi(p,Ai(_.line-1)):null:A>0&&_.ch==(M||Ua(p,_.line)).text.length?_.line<p.first+p.size-1?Ai(_.line+1,0):null:new Ai(_.line,_.ch+A)}function VO(p){p.setSelection(Ai(p.firstLine(),0),Ai(p.lastLine()),ea)}function zO(p,_,A){var M={canceled:!1,from:_.from,to:_.to,text:_.text,origin:_.origin,cancel:function(){return M.canceled=!0}};return A&&(M.update=function(V,ve,Ie,He){V&&(M.from=Zi(p,V)),ve&&(M.to=Zi(p,ve)),Ie&&(M.text=Ie),void 0!==He&&(M.origin=He)}),Ia(p,"beforeChange",p,M),p.cm&&Ia(p.cm,"beforeChange",p.cm,M),M.canceled?(p.cm&&(p.cm.curOp.updateInput=2),null):{from:M.from,to:M.to,text:M.text,origin:M.origin}}function db(p,_,A){if(p.cm){if(!p.cm.curOp)return xp(p.cm,db)(p,_,A);if(p.cm.state.suppressEdits)return}if(!(bl(p,"beforeChange")||p.cm&&bl(p.cm,"beforeChange"))||(_=zO(p,_,!0))){var M=Wd&&!A&&function w_(p,_,A){var M=null;if(p.iter(_.line,A.line+1,function(Sn){if(Sn.markedSpans)for(var $o=0;$o<Sn.markedSpans.length;++$o){var wi=Sn.markedSpans[$o].marker;wi.readOnly&&(!M||-1==Li(M,wi))&&(M||(M=[])).push(wi)}}),!M)return null;for(var V=[{from:_,to:A}],ve=0;ve<M.length;++ve)for(var Ie=M[ve],He=Ie.find(0),rt=0;rt<V.length;++rt){var pt=V[rt];if(!(Rs(pt.to,He.from)<0||Rs(pt.from,He.to)>0)){var Er=[rt,1],Vr=Rs(pt.from,He.from),Hn=Rs(pt.to,He.to);(Vr<0||!Ie.inclusiveLeft&&!Vr)&&Er.push({from:pt.from,to:He.from}),(Hn>0||!Ie.inclusiveRight&&!Hn)&&Er.push({from:He.to,to:pt.to}),V.splice.apply(V,Er),rt+=Er.length-3}}return V}(p,_.from,_.to);if(M)for(var V=M.length-1;V>=0;--V)HO(p,{from:M[V].from,to:M[V].to,text:V?[""]:_.text,origin:_.origin});else HO(p,_)}}function HO(p,_){if(1!=_.text.length||""!=_.text[0]||0!=Rs(_.from,_.to)){var A=BE(p,_);IO(p,_,A,p.cm?p.cm.curOp.id:NaN),J1(p,_,A,wm(p,_));var M=[];I_(p,function(V,ve){!ve&&-1==Li(M,V.history)&&(JO(V.history,_),M.push(V.history)),J1(V,_,null,wm(V,_))})}}function tx(p,_,A){var M=p.cm&&p.cm.state.suppressEdits;if(!M||A){for(var ve,V=p.history,Ie=p.sel,He="undo"==_?V.done:V.undone,rt="undo"==_?V.undone:V.done,pt=0;pt<He.length&&(ve=He[pt],!(A?ve.ranges&&!ve.equals(p.sel):!ve.ranges));pt++);if(pt!=He.length){for(V.lastOrigin=V.lastSelOrigin=null;;){if(!(ve=He.pop()).ranges){if(M)return void He.push(ve);break}if(Y2(ve,rt),A&&!ve.equals(p.sel))return void wf(p,ve,{clearRedo:!1});Ie=ve}var Er=[];Y2(Ie,rt),rt.push({changes:Er,generation:V.generation}),V.generation=ve.generation||++V.maxGeneration;for(var Vr=bl(p,"beforeChange")||p.cm&&bl(p.cm,"beforeChange"),Hn=function(wi){var Yi=ve.changes[wi];if(Yi.origin=_,Vr&&!zO(p,Yi,!1))return He.length=0,{};Er.push(KE(p,Yi));var ha=wi?BE(p,Yi):Ji(He);J1(p,Yi,ha,FO(p,Yi)),!wi&&p.cm&&p.cm.scrollIntoView({from:Yi.from,to:L_(Yi)});var Za=[];I_(p,function(ma,Ga){!Ga&&-1==Li(Za,ma.history)&&(JO(ma.history,Yi),Za.push(ma.history)),J1(ma,Yi,null,FO(ma,Yi))})},Sn=ve.changes.length-1;Sn>=0;--Sn){var $o=Hn(Sn);if($o)return $o.v}}}}function GO(p,_){if(0!=_&&(p.first+=_,p.sel=new Om(bs(p.sel.ranges,function(V){return new Ec(Ai(V.anchor.line+_,V.anchor.ch),Ai(V.head.line+_,V.head.ch))}),p.sel.primIndex),p.cm)){Ch(p.cm,p.first,p.first-_,_);for(var A=p.cm.display,M=A.viewFrom;M<A.viewTo;M++)M_(p.cm,M,"gutter")}}function J1(p,_,A,M){if(p.cm&&!p.cm.curOp)return xp(p.cm,J1)(p,_,A,M);if(_.to.line<p.first)GO(p,_.text.length-1-(_.to.line-_.from.line));else if(!(_.from.line>p.lastLine())){if(_.from.line<p.first){var V=_.text.length-1-(p.first-_.from.line);GO(p,V),_={from:Ai(p.first,0),to:Ai(_.to.line+V,_.to.ch),text:[Ji(_.text)],origin:_.origin}}var ve=p.lastLine();_.to.line>ve&&(_={from:_.from,to:Ai(ve,Ua(p,ve).text.length),text:[_.text[0]],origin:_.origin}),_.removed=lp(p,_.from,_.to),A||(A=BE(p,_)),p.cm?function oT(p,_,A){var M=p.doc,V=p.display,ve=_.from,Ie=_.to,He=!1,rt=ve.line;p.options.lineWrapping||(rt=rl(ll(Ua(M,ve.line))),M.iter(rt,Ie.line+1,function(Sn){if(Sn==V.maxLine)return He=!0,!0})),M.sel.contains(_.from,_.to)>-1&&fs(p),ZE(M,_,A,dO(p)),p.options.lineWrapping||(M.iter(rt,ve.line+_.text.length,function(Sn){var $o=hg(Sn);$o>V.maxLineLength&&(V.maxLine=Sn,V.maxLineLength=$o,V.maxLineChanged=!0,He=!1)}),He&&(p.curOp.updateMaxLine=!0)),function Ev(p,_){if(p.modeFrontier=Math.min(p.modeFrontier,_),!(p.highlightFrontier<_-10)){for(var A=p.first,M=_-1;M>A;M--){var V=Ua(p,M).stateAfter;if(V&&(!(V instanceof Mc)||M+V.lookAhead<_)){A=M+1;break}}p.highlightFrontier=Math.min(p.highlightFrontier,A)}}(M,ve.line),G1(p,400);var pt=_.text.length-(Ie.line-ve.line)-1;_.full?Ch(p):ve.line!=Ie.line||1!=_.text.length||MO(p.doc,_)?Ch(p,ve.line,Ie.line+1,pt):M_(p,ve.line,"text");var Er=bl(p,"changes"),Vr=bl(p,"change");if(Vr||Er){var Hn={from:ve,to:Ie,text:_.text,removed:_.removed,origin:_.origin};Vr&&nd(p,"change",p,Hn),Er&&(p.curOp.changeObjs||(p.curOp.changeObjs=[])).push(Hn)}p.display.selForContextMenu=null}(p.cm,_,M):ZE(p,_,M),X2(p,A,ea),p.cantEdit&&ex(p,Ai(p.firstLine(),0))&&(p.cantEdit=!1)}}function pb(p,_,A,M,V){var ve;M||(M=A),Rs(M,A)<0&&(A=(ve=[M,A])[0],M=ve[1]),"string"==typeof _&&(_=p.splitLines(_)),db(p,{from:A,to:M,text:_,origin:V})}function qO(p,_,A,M){A<p.line?p.line+=M:_<p.line&&(p.line=_,p.ch=0)}function $O(p,_,A,M){for(var V=0;V<p.length;++V){var ve=p[V],Ie=!0;if(ve.ranges){ve.copied||((ve=p[V]=ve.deepCopy()).copied=!0);for(var He=0;He<ve.ranges.length;He++)qO(ve.ranges[He].anchor,_,A,M),qO(ve.ranges[He].head,_,A,M)}else{for(var rt=0;rt<ve.changes.length;++rt){var pt=ve.changes[rt];if(A<pt.from.line)pt.from=Ai(pt.from.line+M,pt.from.ch),pt.to=Ai(pt.to.line+M,pt.to.ch);else if(_<=pt.to.line){Ie=!1;break}}Ie||(p.splice(0,V+1),V=0)}}}function JO(p,_){var A=_.from.line,M=_.to.line,V=_.text.length-(M-A)-1;$O(p.done,A,M,V),$O(p.undone,A,M,V)}function Y1(p,_,A,M){var V=_,ve=_;return"number"==typeof _?ve=Ua(p,Ii(p,_)):V=rl(_),null==V?null:(M(ve,V)&&p.cm&&M_(p.cm,V,A),ve)}function Q1(p){this.lines=p,this.parent=null;for(var _=0,A=0;A<p.length;++A)p[A].parent=this,_+=p[A].height;this.height=_}function X1(p){this.children=p;for(var _=0,A=0,M=0;M<p.length;++M){var V=p[M];_+=V.chunkSize(),A+=V.height,V.parent=this}this.size=_,this.height=A,this.parent=null}Ec.prototype.from=function(){return ii(this.anchor,this.head)},Ec.prototype.to=function(){return Zr(this.anchor,this.head)},Ec.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Q1.prototype={chunkSize:function(){return this.lines.length},removeInner:function(p,_){for(var A=p,M=p+_;A<M;++A){var V=this.lines[A];this.height-=V.height,X0(V),nd(V,"delete")}this.lines.splice(p,_)},collapse:function(p){p.push.apply(p,this.lines)},insertInner:function(p,_,A){this.height+=A,this.lines=this.lines.slice(0,p).concat(_).concat(this.lines.slice(p));for(var M=0;M<_.length;++M)_[M].parent=this},iterN:function(p,_,A){for(var M=p+_;p<M;++p)if(A(this.lines[p]))return!0}},X1.prototype={chunkSize:function(){return this.size},removeInner:function(p,_){this.size-=_;for(var A=0;A<this.children.length;++A){var M=this.children[A],V=M.chunkSize();if(p<V){var ve=Math.min(_,V-p),Ie=M.height;if(M.removeInner(p,ve),this.height-=Ie-M.height,V==ve&&(this.children.splice(A--,1),M.parent=null),0==(_-=ve))break;p=0}else p-=V}if(this.size-_<25&&(this.children.length>1||!(this.children[0]instanceof Q1))){var He=[];this.collapse(He),this.children=[new Q1(He)],this.children[0].parent=this}},collapse:function(p){for(var _=0;_<this.children.length;++_)this.children[_].collapse(p)},insertInner:function(p,_,A){this.size+=_.length,this.height+=A;for(var M=0;M<this.children.length;++M){var V=this.children[M],ve=V.chunkSize();if(p<=ve){if(V.insertInner(p,_,A),V.lines&&V.lines.length>50){for(var Ie=V.lines.length%25+25,He=Ie;He<V.lines.length;){var rt=new Q1(V.lines.slice(He,He+=25));V.height-=rt.height,this.children.splice(++M,0,rt),rt.parent=this}V.lines=V.lines.slice(0,Ie),this.maybeSpill()}break}p-=ve}},maybeSpill:function(){if(!(this.children.length<=10)){var p=this;do{var A=new X1(p.children.splice(p.children.length-5,5));if(p.parent){p.size-=A.size,p.height-=A.height;var V=Li(p.parent.children,p);p.parent.children.splice(V+1,0,A)}else{var M=new X1(p.children);M.parent=p,p.children=[M,A],p=M}A.parent=p.parent}while(p.children.length>10);p.parent.maybeSpill()}},iterN:function(p,_,A){for(var M=0;M<this.children.length;++M){var V=this.children[M],ve=V.chunkSize();if(p<ve){var Ie=Math.min(_,ve-p);if(V.iterN(p,Ie,A))return!0;if(0==(_-=Ie))break;p=0}else p-=ve}}};var ew=function(p,_,A){if(A)for(var M in A)A.hasOwnProperty(M)&&(this[M]=A[M]);this.doc=p,this.node=_};function YO(p,_,A){Jh(_)<(p.curOp&&p.curOp.scrollTop||p.doc.scrollTop)&&IE(p,A)}ew.prototype.clear=function(){var p=this.doc.cm,_=this.line.widgets,A=this.line,M=rl(A);if(null!=M&&_){for(var V=0;V<_.length;++V)_[V]==this&&_.splice(V--,1);_.length||(A.widgets=null);var ve=S_(this);Bd(A,Math.max(0,A.height-ve)),p&&(Qh(p,function(){YO(p,A,-ve),M_(p,M,"widget")}),nd(p,"lineWidgetCleared",p,this,M))}},ew.prototype.changed=function(){var p=this,_=this.height,A=this.doc.cm,M=this.line;this.height=null;var V=S_(this)-_;V&&(bp(this.doc,M)||Bd(M,M.height+V),A&&Qh(A,function(){A.curOp.forceUpdate=!0,YO(A,M,V),nd(A,"lineWidgetChanged",A,p,rl(M))}))},Vl(ew);var QO=0,R_=function(p,_){this.lines=[],this.type=_,this.doc=p,this.id=++QO};function fb(p,_,A,M,V){if(M&&M.shared)return function aT(p,_,A,M,V){(M=Us(M)).shared=!1;var ve=[fb(p,_,A,M,V)],Ie=ve[0],He=M.widgetNode;return I_(p,function(rt){He&&(M.widgetNode=He.cloneNode(!0)),ve.push(fb(rt,Zi(rt,_),Zi(rt,A),M,V));for(var pt=0;pt<rt.linked.length;++pt)if(rt.linked[pt].isParent)return;Ie=Ji(ve)}),new tw(ve,Ie)}(p,_,A,M,V);if(p.cm&&!p.cm.curOp)return xp(p.cm,fb)(p,_,A,M,V);var ve=new R_(p,V),Ie=Rs(_,A);if(M&&Us(M,ve,!1),Ie>0||0==Ie&&!1!==ve.clearWhenEmpty)return ve;if(ve.replacedWith&&(ve.collapsed=!0,ve.widgetNode=sr("span",[ve.replacedWith],"CodeMirror-widget"),M.handleMouseEvents||ve.widgetNode.setAttribute("cm-ignore-events","true"),M.insertLeft&&(ve.widgetNode.insertLeft=!0)),ve.collapsed){if(gs(p,_.line,_,A,ve)||_.line!=A.line&&gs(p,A.line,_,A,ve))throw new Error("Inserting collapsed marker partially overlapping an existing one");!function Py(){cp=!0}()}ve.addToHistory&&IO(p,{from:_,to:A,origin:"markText"},p.sel,NaN);var pt,He=_.line,rt=p.cm;if(p.iter(He,A.line+1,function(Vr){rt&&ve.collapsed&&!rt.options.lineWrapping&&ll(Vr)==rt.display.maxLine&&(pt=!0),ve.collapsed&&He!=_.line&&Bd(Vr,0),function zm(p,_,A){var M=A&&window.WeakSet&&(A.markedSpans||(A.markedSpans=new WeakSet));M&&M.has(p.markedSpans)?p.markedSpans.push(_):(p.markedSpans=p.markedSpans?p.markedSpans.concat([_]):[_],M&&M.add(p.markedSpans)),_.marker.attachLine(p)}(Vr,new pg(ve,He==_.line?_.ch:null,He==A.line?A.ch:null),p.cm&&p.cm.curOp),++He}),ve.collapsed&&p.iter(_.line,A.line+1,function(Vr){bp(p,Vr)&&Bd(Vr,0)}),ve.clearOnEnter&&eo(ve,"beforeCursorEnter",function(){return ve.clear()}),ve.readOnly&&(function y_(){Wd=!0}(),(p.history.done.length||p.history.undone.length)&&p.clearHistory()),ve.collapsed&&(ve.id=++QO,ve.atomic=!0),rt){if(pt&&(rt.curOp.updateMaxLine=!0),ve.collapsed)Ch(rt,_.line,A.line+1);else if(ve.className||ve.startStyle||ve.endStyle||ve.css||ve.attributes||ve.title)for(var Er=_.line;Er<=A.line;Er++)M_(rt,Er,"text");ve.atomic&&WO(rt.doc),nd(rt,"markerAdded",rt,ve)}return ve}R_.prototype.clear=function(){if(!this.explicitlyCleared){var p=this.doc.cm,_=p&&!p.curOp;if(_&&Ny(p),bl(this,"clear")){var A=this.find();A&&nd(this,"clear",A.from,A.to)}for(var M=null,V=null,ve=0;ve<this.lines.length;++ve){var Ie=this.lines[ve],He=yf(Ie.markedSpans,this);p&&!this.collapsed?M_(p,rl(Ie),"text"):p&&(null!=He.to&&(V=rl(Ie)),null!=He.from&&(M=rl(Ie))),Ie.markedSpans=My(Ie.markedSpans,He),null==He.from&&this.collapsed&&!bp(this.doc,Ie)&&p&&Bd(Ie,ob(p.display))}if(p&&this.collapsed&&!p.options.lineWrapping)for(var rt=0;rt<this.lines.length;++rt){var pt=ll(this.lines[rt]),Er=hg(pt);Er>p.display.maxLineLength&&(p.display.maxLine=pt,p.display.maxLineLength=Er,p.display.maxLineChanged=!0)}null!=M&&p&&this.collapsed&&Ch(p,M,V+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,p&&WO(p.doc)),p&&nd(p,"markerCleared",p,this,M,V),_&&Uy(p),this.parent&&this.parent.clear()}},R_.prototype.find=function(p,_){null==p&&"bookmark"==this.type&&(p=1);for(var A,M,V=0;V<this.lines.length;++V){var ve=this.lines[V],Ie=yf(ve.markedSpans,this);if(null!=Ie.from&&(A=Ai(_?ve:rl(ve),Ie.from),-1==p))return A;if(null!=Ie.to&&(M=Ai(_?ve:rl(ve),Ie.to),1==p))return M}return A&&{from:A,to:M}},R_.prototype.changed=function(){var p=this,_=this.find(-1,!0),A=this,M=this.doc.cm;!_||!M||Qh(M,function(){var V=_.line,ve=rl(_.line),Ie=Nn(M,ve);if(Ie&&(B1(Ie),M.curOp.selectionChanged=M.curOp.forceUpdate=!0),M.curOp.updateMaxLine=!0,!bp(A.doc,V)&&null!=A.height){var He=A.height;A.height=null;var rt=S_(A)-He;rt&&Bd(V,V.height+rt)}nd(M,"markerChanged",M,p)})},R_.prototype.attachLine=function(p){if(!this.lines.length&&this.doc.cm){var _=this.doc.cm.curOp;(!_.maybeHiddenMarkers||-1==Li(_.maybeHiddenMarkers,this))&&(_.maybeUnhiddenMarkers||(_.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(p)},R_.prototype.detachLine=function(p){if(this.lines.splice(Li(this.lines,p),1),!this.lines.length&&this.doc.cm){var _=this.doc.cm.curOp;(_.maybeHiddenMarkers||(_.maybeHiddenMarkers=[])).push(this)}},Vl(R_);var tw=function(p,_){this.markers=p,this.primary=_;for(var A=0;A<p.length;++A)p[A].parent=this};function XO(p){return p.findMarks(Ai(p.first,0),p.clipPos(Ai(p.lastLine())),function(_){return _.parent})}function lT(p){for(var _=function(M){var V=p[M],ve=[V.primary.doc];I_(V.primary.doc,function(rt){return ve.push(rt)});for(var Ie=0;Ie<V.markers.length;Ie++){var He=V.markers[Ie];-1==Li(ve,He.doc)&&(He.parent=null,V.markers.splice(Ie--,1))}},A=0;A<p.length;A++)_(A)}tw.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var p=0;p<this.markers.length;++p)this.markers[p].clear();nd(this,"clear")}},tw.prototype.find=function(p,_){return this.primary.find(p,_)},Vl(tw);var cT=0,Eh=function(p,_,A,M,V){if(!(this instanceof Eh))return new Eh(p,_,A,M,V);null==A&&(A=0),X1.call(this,[new Q1([new wp("",null)])]),this.first=A,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=A;var ve=Ai(A,0);this.sel=k_(ve),this.history=new J2(null),this.id=++cT,this.modeOption=_,this.lineSep=M,this.direction="rtl"==V?"rtl":"ltr",this.extend=!1,"string"==typeof p&&(p=this.splitLines(p)),ZE(this,{from:ve,to:ve,text:p}),wf(this,k_(ve),ea)};Eh.prototype=it(X1.prototype,{constructor:Eh,iter:function(p,_,A){A?this.iterN(p-this.first,_-p,A):this.iterN(this.first,this.first+this.size,p)},insert:function(p,_){for(var A=0,M=0;M<_.length;++M)A+=_[M].height;this.insertInner(p-this.first,_,A)},remove:function(p,_){this.removeInner(p-this.first,_)},getValue:function(p){var _=_f(this,this.first,this.first+this.size);return!1===p?_:_.join(p||this.lineSeparator())},setValue:Cp(function(p){var _=Ai(this.first,0),A=this.first+this.size-1;db(this,{from:_,to:Ai(A,Ua(this,A).text.length),text:this.splitLines(p),origin:"setValue",full:!0},!0),this.cm&&K1(this.cm,0,0),wf(this,k_(_),ea)}),replaceRange:function(p,_,A,M){pb(this,p,_=Zi(this,_),A=A?Zi(this,A):_,M)},getRange:function(p,_,A){var M=lp(this,Zi(this,p),Zi(this,_));return!1===A?M:M.join(""===A?"":A||this.lineSeparator())},getLine:function(p){var _=this.getLineHandle(p);return _&&_.text},getLineHandle:function(p){if(_m(this,p))return Ua(this,p)},getLineNumber:function(p){return rl(p)},getLineHandleVisualStart:function(p){return"number"==typeof p&&(p=Ua(this,p)),ll(p)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(p){return Zi(this,p)},getCursor:function(p){var _=this.sel.primary();return null==p||"head"==p?_.head:"anchor"==p?_.anchor:"end"==p||"to"==p||!1===p?_.to():_.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Cp(function(p,_,A){NO(this,Zi(this,"number"==typeof p?Ai(p,_||0):p),null,A)}),setSelection:Cp(function(p,_,A){NO(this,Zi(this,p),Zi(this,_||p),A)}),extendSelection:Cp(function(p,_,A){Q2(this,Zi(this,p),_&&Zi(this,_),A)}),extendSelections:Cp(function(p,_){jO(this,jl(this,p),_)}),extendSelectionsBy:Cp(function(p,_){jO(this,jl(this,bs(this.sel.ranges,p)),_)}),setSelections:Cp(function(p,_,A){if(p.length){for(var M=[],V=0;V<p.length;V++)M[V]=new Ec(Zi(this,p[V].anchor),Zi(this,p[V].head||p[V].anchor));null==_&&(_=Math.min(p.length-1,this.sel.primIndex)),wf(this,gg(this.cm,M,_),A)}}),addSelection:Cp(function(p,_,A){var M=this.sel.ranges.slice(0);M.push(new Ec(Zi(this,p),Zi(this,_||p))),wf(this,gg(this.cm,M,M.length-1),A)}),getSelection:function(p){for(var A,_=this.sel.ranges,M=0;M<_.length;M++){var V=lp(this,_[M].from(),_[M].to());A=A?A.concat(V):V}return!1===p?A:A.join(p||this.lineSeparator())},getSelections:function(p){for(var _=[],A=this.sel.ranges,M=0;M<A.length;M++){var V=lp(this,A[M].from(),A[M].to());!1!==p&&(V=V.join(p||this.lineSeparator())),_[M]=V}return _},replaceSelection:function(p,_,A){for(var M=[],V=0;V<this.sel.ranges.length;V++)M[V]=p;this.replaceSelections(M,_,A||"+input")},replaceSelections:Cp(function(p,_,A){for(var M=[],V=this.sel,ve=0;ve<V.ranges.length;ve++){var Ie=V.ranges[ve];M[ve]={from:Ie.from(),to:Ie.to(),text:this.splitLines(p[ve]),origin:A}}for(var He=_&&"end"!=_&&function JD(p,_,A){for(var M=[],V=Ai(p.first,0),ve=V,Ie=0;Ie<_.length;Ie++){var He=_[Ie],rt=PO(He.from,V,ve),pt=PO(L_(He),V,ve);if(V=He.to,ve=pt,"around"==A){var Er=p.sel.ranges[Ie],Vr=Rs(Er.head,Er.anchor)<0;M[Ie]=new Ec(Vr?pt:rt,Vr?rt:pt)}else M[Ie]=new Ec(rt,rt)}return new Om(M,p.sel.primIndex)}(this,M,_),rt=M.length-1;rt>=0;rt--)db(this,M[rt]);He?UO(this,He):this.cm&&sb(this.cm)}),undo:Cp(function(){tx(this,"undo")}),redo:Cp(function(){tx(this,"redo")}),undoSelection:Cp(function(){tx(this,"undo",!0)}),redoSelection:Cp(function(){tx(this,"redo",!0)}),setExtending:function(p){this.extend=p},getExtending:function(){return this.extend},historySize:function(){for(var p=this.history,_=0,A=0,M=0;M<p.done.length;M++)p.done[M].ranges||++_;for(var V=0;V<p.undone.length;V++)p.undone[V].ranges||++A;return{undo:_,redo:A}},clearHistory:function(){var p=this;this.history=new J2(this.history),I_(this,function(_){return _.history=p.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(p){return p&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(p){return this.history.generation==(p||this.cleanGeneration)},getHistory:function(){return{done:cb(this.history.done),undone:cb(this.history.undone)}},setHistory:function(p){var _=this.history=new J2(this.history);_.done=cb(p.done.slice(0),null,!0),_.undone=cb(p.undone.slice(0),null,!0)},setGutterMarker:Cp(function(p,_,A){return Y1(this,p,"gutter",function(M){var V=M.gutterMarkers||(M.gutterMarkers={});return V[_]=A,!A&&ho(V)&&(M.gutterMarkers=null),!0})}),clearGutter:Cp(function(p){var _=this;this.iter(function(A){A.gutterMarkers&&A.gutterMarkers[p]&&Y1(_,A,"gutter",function(){return A.gutterMarkers[p]=null,ho(A.gutterMarkers)&&(A.gutterMarkers=null),!0})})}),lineInfo:function(p){var _;if("number"==typeof p){if(!(_m(this,p)&&(_=p,p=Ua(this,p))))return null}else if(null==(_=rl(p)))return null;return{line:_,handle:p,text:p.text,gutterMarkers:p.gutterMarkers,textClass:p.textClass,bgClass:p.bgClass,wrapClass:p.wrapClass,widgets:p.widgets}},addLineClass:Cp(function(p,_,A){return Y1(this,p,"gutter"==_?"gutter":"class",function(M){var V="text"==_?"textClass":"background"==_?"bgClass":"gutter"==_?"gutterClass":"wrapClass";if(M[V]){if(Nr(A).test(M[V]))return!1;M[V]+=" "+A}else M[V]=A;return!0})}),removeLineClass:Cp(function(p,_,A){return Y1(this,p,"gutter"==_?"gutter":"class",function(M){var V="text"==_?"textClass":"background"==_?"bgClass":"gutter"==_?"gutterClass":"wrapClass",ve=M[V];if(!ve)return!1;if(null==A)M[V]=null;else{var Ie=ve.match(Nr(A));if(!Ie)return!1;var He=Ie.index+Ie[0].length;M[V]=ve.slice(0,Ie.index)+(Ie.index&&He!=ve.length?" ":"")+ve.slice(He)||null}return!0})}),addLineWidget:Cp(function(p,_,A){return function iT(p,_,A,M){var V=new ew(p,A,M),ve=p.cm;return ve&&V.noHScroll&&(ve.display.alignWidgets=!0),Y1(p,_,"widget",function(Ie){var He=Ie.widgets||(Ie.widgets=[]);if(null==V.insertAt?He.push(V):He.splice(Math.min(He.length,Math.max(0,V.insertAt)),0,V),V.line=Ie,ve&&!bp(p,Ie)){var rt=Jh(Ie)<p.scrollTop;Bd(Ie,Ie.height+S_(V)),rt&&IE(ve,V.height),ve.curOp.forceUpdate=!0}return!0}),ve&&nd(ve,"lineWidgetAdded",ve,V,"number"==typeof _?_:rl(_)),V}(this,p,_,A)}),removeLineWidget:function(p){p.clear()},markText:function(p,_,A){return fb(this,Zi(this,p),Zi(this,_),A,A&&A.type||"range")},setBookmark:function(p,_){var A={replacedWith:_&&(null==_.nodeType?_.widget:_),insertLeft:_&&_.insertLeft,clearWhenEmpty:!1,shared:_&&_.shared,handleMouseEvents:_&&_.handleMouseEvents};return fb(this,p=Zi(this,p),p,A,"bookmark")},findMarksAt:function(p){var _=[],A=Ua(this,(p=Zi(this,p)).line).markedSpans;if(A)for(var M=0;M<A.length;++M){var V=A[M];(null==V.from||V.from<=p.ch)&&(null==V.to||V.to>=p.ch)&&_.push(V.marker.parent||V.marker)}return _},findMarks:function(p,_,A){p=Zi(this,p),_=Zi(this,_);var M=[],V=p.line;return this.iter(p.line,_.line+1,function(ve){var Ie=ve.markedSpans;if(Ie)for(var He=0;He<Ie.length;He++){var rt=Ie[He];!(null!=rt.to&&V==p.line&&p.ch>=rt.to||null==rt.from&&V!=p.line||null!=rt.from&&V==_.line&&rt.from>=_.ch)&&(!A||A(rt.marker))&&M.push(rt.marker.parent||rt.marker)}++V}),M},getAllMarks:function(){var p=[];return this.iter(function(_){var A=_.markedSpans;if(A)for(var M=0;M<A.length;++M)null!=A[M].from&&p.push(A[M].marker)}),p},posFromIndex:function(p){var _,A=this.first,M=this.lineSeparator().length;return this.iter(function(V){var ve=V.text.length+M;if(ve>p)return _=p,!0;p-=ve,++A}),Zi(this,Ai(A,_))},indexFromPos:function(p){var _=(p=Zi(this,p)).ch;if(p.line<this.first||p.ch<0)return 0;var A=this.lineSeparator().length;return this.iter(this.first,p.line,function(M){_+=M.text.length+A}),_},copy:function(p){var _=new Eh(_f(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return _.scrollTop=this.scrollTop,_.scrollLeft=this.scrollLeft,_.sel=this.sel,_.extend=!1,p&&(_.history.undoDepth=this.history.undoDepth,_.setHistory(this.getHistory())),_},linkedDoc:function(p){p||(p={});var _=this.first,A=this.first+this.size;null!=p.from&&p.from>_&&(_=p.from),null!=p.to&&p.to<A&&(A=p.to);var M=new Eh(_f(this,_,A),p.mode||this.modeOption,_,this.lineSep,this.direction);return p.sharedHist&&(M.history=this.history),(this.linked||(this.linked=[])).push({doc:M,sharedHist:p.sharedHist}),M.linked=[{doc:this,isParent:!0,sharedHist:p.sharedHist}],function sT(p,_){for(var A=0;A<_.length;A++){var M=_[A],V=M.find(),ve=p.clipPos(V.from),Ie=p.clipPos(V.to);if(Rs(ve,Ie)){var He=fb(p,ve,Ie,M.primary,M.primary.type);M.markers.push(He),He.parent=M}}}(M,XO(this)),M},unlinkDoc:function(p){if(p instanceof Nu&&(p=p.doc),this.linked)for(var _=0;_<this.linked.length;++_)if(this.linked[_].doc==p){this.linked.splice(_,1),p.unlinkDoc(this),lT(XO(this));break}if(p.history==this.history){var M=[p.id];I_(p,function(V){return M.push(V.id)},!0),p.history=new J2(null),p.history.done=cb(this.history.done,M),p.history.undone=cb(this.history.undone,M)}},iterLinkedDocs:function(p){I_(this,p)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(p){return this.lineSep?p.split(this.lineSep):lu(p)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Cp(function(p){"rtl"!=p&&(p="ltr"),p!=this.direction&&(this.direction=p,this.iter(function(_){return _.order=null}),this.cm&&function YD(p){Qh(p,function(){kO(p),Ch(p)})}(this.cm))})}),Eh.prototype.eachLine=Eh.prototype.iter;var eD=0;function uT(p){var _=this;if(tD(_),!ca(_,p)&&!Gm(_.display,p)){kl(p),b&&(eD=+new Date);var A=Iy(_,p,!0),M=p.dataTransfer.files;if(A&&!_.isReadOnly())if(M&&M.length&&window.FileReader&&window.File)for(var V=M.length,ve=Array(V),Ie=0,He=function(){++Ie==V&&xp(_,function(){var Sn={from:A=Zi(_.doc,A),to:A,text:_.doc.splitLines(ve.filter(function($o){return null!=$o}).join(_.doc.lineSeparator())),origin:"paste"};db(_.doc,Sn),UO(_.doc,k_(Zi(_.doc,A),Zi(_.doc,L_(Sn))))})()},rt=function(Sn,$o){if(_.options.allowDropFileTypes&&-1==Li(_.options.allowDropFileTypes,Sn.type))He();else{var wi=new FileReader;wi.onerror=function(){return He()},wi.onload=function(){var Yi=wi.result;/[\x00-\x08\x0e-\x1f]{2}/.test(Yi)||(ve[$o]=Yi),He()},wi.readAsText(Sn)}},pt=0;pt<M.length;pt++)rt(M[pt],pt);else{if(_.state.draggingText&&_.doc.sel.contains(A)>-1)return _.state.draggingText(p),void setTimeout(function(){return _.display.input.focus()},20);try{var Er=p.dataTransfer.getData("Text");if(Er){var Vr;if(_.state.draggingText&&!_.state.draggingText.copy&&(Vr=_.listSelections()),X2(_.doc,k_(A,A)),Vr)for(var Hn=0;Hn<Vr.length;++Hn)pb(_.doc,"",Vr[Hn].anchor,Vr[Hn].head,"drag");_.replaceSelection(Er,"around","paste"),_.display.input.focus()}}catch{}}}}function tD(p){p.display.dragCursor&&(p.display.lineSpace.removeChild(p.display.dragCursor),p.display.dragCursor=null)}function rD(p){if(document.getElementsByClassName){for(var _=document.getElementsByClassName("CodeMirror"),A=[],M=0;M<_.length;M++){var V=_[M].CodeMirror;V&&A.push(V)}A.length&&A[0].operation(function(){for(var ve=0;ve<A.length;ve++)p(A[ve])})}}var nD=!1;function fT(){nD||(function hT(){var p;eo(window,"resize",function(){null==p&&(p=setTimeout(function(){p=null,rD(mT)},100))}),eo(window,"blur",function(){return rD(ab)})}(),nD=!0)}function mT(p){var _=p.display;_.cachedCharWidth=_.cachedTextHeight=_.cachedPaddingH=null,_.scrollbarsClipped=!1,p.setSize()}for(var F_={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},rw=0;rw<10;rw++)F_[rw+48]=F_[rw+96]=String(rw);for(var rx=65;rx<=90;rx++)F_[rx]=String.fromCharCode(rx);for(var nw=1;nw<=12;nw++)F_[nw+111]=F_[nw+63235]="F"+nw;var Mv={};function gT(p){var _=p.split(/-(?!$)/);p=_[_.length-1];for(var A,M,V,ve,Ie=0;Ie<_.length-1;Ie++){var He=_[Ie];if(/^(cmd|meta|m)$/i.test(He))ve=!0;else if(/^a(lt)?$/i.test(He))A=!0;else if(/^(c|ctrl|control)$/i.test(He))M=!0;else{if(!/^s(hift)?$/i.test(He))throw new Error("Unrecognized modifier name: "+He);V=!0}}return A&&(p="Alt-"+p),M&&(p="Ctrl-"+p),ve&&(p="Cmd-"+p),V&&(p="Shift-"+p),p}function vT(p){var _={};for(var A in p)if(p.hasOwnProperty(A)){var M=p[A];if(/^(name|fallthrough|(de|at)tach)$/.test(A))continue;if("..."==M){delete p[A];continue}for(var V=bs(A.split(" "),gT),ve=0;ve<V.length;ve++){var Ie=void 0,He=void 0;ve==V.length-1?(He=V.join(" "),Ie=M):(He=V.slice(0,ve+1).join(" "),Ie="...");var rt=_[He];if(rt){if(rt!=Ie)throw new Error("Inconsistent bindings for "+He)}else _[He]=Ie}delete p[A]}for(var pt in _)p[pt]=_[pt];return p}function hb(p,_,A,M){var V=(_=nx(_)).call?_.call(p,M):_[p];if(!1===V)return"nothing";if("..."===V)return"multi";if(null!=V&&A(V))return"handled";if(_.fallthrough){if("[object Array]"!=Object.prototype.toString.call(_.fallthrough))return hb(p,_.fallthrough,A,M);for(var ve=0;ve<_.fallthrough.length;ve++){var Ie=hb(p,_.fallthrough[ve],A,M);if(Ie)return Ie}}}function oD(p){var _="string"==typeof p?p:F_[p.keyCode];return"Ctrl"==_||"Alt"==_||"Shift"==_||"Mod"==_}function iD(p,_,A){var M=p;return _.altKey&&"Alt"!=M&&(p="Alt-"+p),(ti?_.metaKey:_.ctrlKey)&&"Ctrl"!=M&&(p="Ctrl-"+p),(ti?_.ctrlKey:_.metaKey)&&"Mod"!=M&&(p="Cmd-"+p),!A&&_.shiftKey&&"Shift"!=M&&(p="Shift-"+p),p}function aD(p,_){if(ae&&34==p.keyCode&&p.char)return!1;var A=F_[p.keyCode];return null!=A&&!p.altGraphKey&&(3==p.keyCode&&p.code&&(A=p.code),iD(A,p,_))}function nx(p){return"string"==typeof p?Mv[p]:p}function mb(p,_){for(var A=p.doc.sel.ranges,M=[],V=0;V<A.length;V++){for(var ve=_(A[V]);M.length&&Rs(ve.from,Ji(M).to)<=0;){var Ie=M.pop();if(Rs(Ie.from,ve.from)<0){ve.from=Ie.from;break}}M.push(ve)}Qh(p,function(){for(var He=M.length-1;He>=0;He--)pb(p.doc,"",M[He].from,M[He].to,"+delete");sb(p)})}function HE(p,_,A){var M=Cn(p.text,_+A,A);return M<0||M>p.text.length?null:M}function GE(p,_,A){var M=HE(p,_.ch,A);return null==M?null:new Ai(_.line,M,A<0?"after":"before")}function qE(p,_,A,M,V){if(p){"rtl"==_.doc.direction&&(V=-V);var ve=Mt(A,_.doc.direction);if(ve){var pt,Ie=V<0?Ji(ve):ve[0],rt=V<0==(1==Ie.level)?"after":"before";if(Ie.level>0||"rtl"==_.doc.direction){var Er=di(_,A),Vr=ia(_,Er,pt=V<0?A.text.length-1:0).top;pt=Qa(function(Hn){return ia(_,Er,Hn).top==Vr},V<0==(1==Ie.level)?Ie.from:Ie.to-1,pt),"before"==rt&&(pt=HE(A,pt,1))}else pt=V<0?Ie.to:Ie.from;return new Ai(M,pt,rt)}}return new Ai(M,V<0?A.text.length:0,V<0?"before":"after")}Mv.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Mv.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Mv.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Mv.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Mv.default=Gt?Mv.macDefault:Mv.pcDefault;var ow={selectAll:VO,singleSelection:function(p){return p.setSelection(p.getCursor("anchor"),p.getCursor("head"),ea)},killLine:function(p){return mb(p,function(_){if(_.empty()){var A=Ua(p.doc,_.head.line).text.length;return _.head.ch==A&&_.head.line<p.lastLine()?{from:_.head,to:Ai(_.head.line+1,0)}:{from:_.head,to:Ai(_.head.line,A)}}return{from:_.from(),to:_.to()}})},deleteLine:function(p){return mb(p,function(_){return{from:Ai(_.from().line,0),to:Zi(p.doc,Ai(_.to().line+1,0))}})},delLineLeft:function(p){return mb(p,function(_){return{from:Ai(_.from().line,0),to:_.from()}})},delWrappedLineLeft:function(p){return mb(p,function(_){var A=p.charCoords(_.head,"div").top+5;return{from:p.coordsChar({left:0,top:A},"div"),to:_.from()}})},delWrappedLineRight:function(p){return mb(p,function(_){var A=p.charCoords(_.head,"div").top+5,M=p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:A},"div");return{from:_.from(),to:M}})},undo:function(p){return p.undo()},redo:function(p){return p.redo()},undoSelection:function(p){return p.undoSelection()},redoSelection:function(p){return p.redoSelection()},goDocStart:function(p){return p.extendSelection(Ai(p.firstLine(),0))},goDocEnd:function(p){return p.extendSelection(Ai(p.lastLine()))},goLineStart:function(p){return p.extendSelectionsBy(function(_){return sD(p,_.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(p){return p.extendSelectionsBy(function(_){return lD(p,_.head)},{origin:"+move",bias:1})},goLineEnd:function(p){return p.extendSelectionsBy(function(_){return function yT(p,_){var A=Ua(p.doc,_),M=function Ds(p){for(var _;_=Cm(p);)p=_.find(1,!0).line;return p}(A);return M!=A&&(_=rl(M)),qE(!0,p,A,_,-1)}(p,_.head.line)},{origin:"+move",bias:-1})},goLineRight:function(p){return p.extendSelectionsBy(function(_){var A=p.cursorCoords(_.head,"div").top+5;return p.coordsChar({left:p.display.lineDiv.offsetWidth+100,top:A},"div")},ps)},goLineLeft:function(p){return p.extendSelectionsBy(function(_){var A=p.cursorCoords(_.head,"div").top+5;return p.coordsChar({left:0,top:A},"div")},ps)},goLineLeftSmart:function(p){return p.extendSelectionsBy(function(_){var A=p.cursorCoords(_.head,"div").top+5,M=p.coordsChar({left:0,top:A},"div");return M.ch<p.getLine(M.line).search(/\S/)?lD(p,_.head):M},ps)},goLineUp:function(p){return p.moveV(-1,"line")},goLineDown:function(p){return p.moveV(1,"line")},goPageUp:function(p){return p.moveV(-1,"page")},goPageDown:function(p){return p.moveV(1,"page")},goCharLeft:function(p){return p.moveH(-1,"char")},goCharRight:function(p){return p.moveH(1,"char")},goColumnLeft:function(p){return p.moveH(-1,"column")},goColumnRight:function(p){return p.moveH(1,"column")},goWordLeft:function(p){return p.moveH(-1,"word")},goGroupRight:function(p){return p.moveH(1,"group")},goGroupLeft:function(p){return p.moveH(-1,"group")},goWordRight:function(p){return p.moveH(1,"word")},delCharBefore:function(p){return p.deleteH(-1,"codepoint")},delCharAfter:function(p){return p.deleteH(1,"char")},delWordBefore:function(p){return p.deleteH(-1,"word")},delWordAfter:function(p){return p.deleteH(1,"word")},delGroupBefore:function(p){return p.deleteH(-1,"group")},delGroupAfter:function(p){return p.deleteH(1,"group")},indentAuto:function(p){return p.indentSelection("smart")},indentMore:function(p){return p.indentSelection("add")},indentLess:function(p){return p.indentSelection("subtract")},insertTab:function(p){return p.replaceSelection("\t")},insertSoftTab:function(p){for(var _=[],A=p.listSelections(),M=p.options.tabSize,V=0;V<A.length;V++){var ve=A[V].from(),Ie=yo(p.getLine(ve.line),ve.ch,M);_.push(Hi(M-Ie%M))}p.replaceSelections(_)},defaultTab:function(p){p.somethingSelected()?p.indentSelection("add"):p.execCommand("insertTab")},transposeChars:function(p){return Qh(p,function(){for(var _=p.listSelections(),A=[],M=0;M<_.length;M++)if(_[M].empty()){var V=_[M].head,ve=Ua(p.doc,V.line).text;if(ve)if(V.ch==ve.length&&(V=new Ai(V.line,V.ch-1)),V.ch>0)V=new Ai(V.line,V.ch+1),p.replaceRange(ve.charAt(V.ch-1)+ve.charAt(V.ch-2),Ai(V.line,V.ch-2),V,"+transpose");else if(V.line>p.doc.first){var Ie=Ua(p.doc,V.line-1).text;Ie&&(V=new Ai(V.line,1),p.replaceRange(ve.charAt(0)+p.doc.lineSeparator()+Ie.charAt(Ie.length-1),Ai(V.line-1,Ie.length-1),V,"+transpose"))}A.push(new Ec(V,V))}p.setSelections(A)})},newlineAndIndent:function(p){return Qh(p,function(){for(var _=p.listSelections(),A=_.length-1;A>=0;A--)p.replaceRange(p.doc.lineSeparator(),_[A].anchor,_[A].head,"+input");_=p.listSelections();for(var M=0;M<_.length;M++)p.indentLine(_[M].from().line,null,!0);sb(p)})},openLine:function(p){return p.replaceSelection("\n","start")},toggleOverwrite:function(p){return p.toggleOverwrite()}};function sD(p,_){var A=Ua(p.doc,_),M=ll(A);return M!=A&&(_=rl(M)),qE(!0,p,M,_,1)}function lD(p,_){var A=sD(p,_.line),M=Ua(p.doc,A.line),V=Mt(M,p.doc.direction);if(!V||0==V[0].level){var ve=Math.max(A.ch,M.text.search(/\S/));return Ai(A.line,_.line==A.line&&_.ch<=ve&&_.ch?0:ve,A.sticky)}return A}function ox(p,_,A){if("string"==typeof _&&!(_=ow[_]))return!1;p.display.input.ensurePolled();var M=p.display.shift,V=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),A&&(p.display.shift=!1),V=_(p)!=ta}finally{p.display.shift=M,p.state.suppressEdits=!1}return V}var wT=new Oo;function iw(p,_,A,M){var V=p.state.keySeq;if(V){if(oD(_))return"handled";if(/\'$/.test(_)?p.state.keySeq=null:wT.set(50,function(){p.state.keySeq==V&&(p.state.keySeq=null,p.display.input.reset())}),cD(p,V+" "+_,A,M))return!0}return cD(p,_,A,M)}function cD(p,_,A,M){var V=function bT(p,_,A){for(var M=0;M<p.state.keyMaps.length;M++){var V=hb(_,p.state.keyMaps[M],A,p);if(V)return V}return p.options.extraKeys&&hb(_,p.options.extraKeys,A,p)||hb(_,p.options.keyMap,A,p)}(p,_,M);return"multi"==V&&(p.state.keySeq=_),"handled"==V&&nd(p,"keyHandled",p,_,A),("handled"==V||"multi"==V)&&(kl(A),ME(p)),!!V}function uD(p,_){var A=aD(_,!0);return!!A&&(_.shiftKey&&!p.state.keySeq?iw(p,"Shift-"+A,_,function(M){return ox(p,M,!0)})||iw(p,A,_,function(M){if("string"==typeof M?/^go[A-Z]/.test(M):M.motion)return ox(p,M)}):iw(p,A,_,function(M){return ox(p,M)}))}var $E=null;function dD(p){var _=this;if(!(p.target&&p.target!=_.display.input.getField()||(_.curOp.focus=Eo(),ca(_,p)))){b&&w<11&&27==p.keyCode&&(p.returnValue=!1);var A=p.keyCode;_.display.shift=16==A||p.shiftKey;var M=uD(_,p);ae&&($E=M?A:null,!M&&88==A&&!zh&&(Gt?p.metaKey:p.ctrlKey)&&_.replaceSelection("",null,"cut")),r&&!Gt&&!M&&46==A&&p.shiftKey&&!p.ctrlKey&&document.execCommand&&document.execCommand("cut"),18==A&&!/\bCodeMirror-crosshair\b/.test(_.display.lineDiv.className)&&function CT(p){var _=p.display.lineDiv;function A(M){(18==M.keyCode||!M.altKey)&&(Dn(_,"CodeMirror-crosshair"),Ma(document,"keyup",A),Ma(document,"mouseover",A))}_o(_,"CodeMirror-crosshair"),eo(document,"keyup",A),eo(document,"mouseover",A)}(_)}}function pD(p){16==p.keyCode&&(this.doc.sel.shift=!1),ca(this,p)}function fD(p){var _=this;if(!(p.target&&p.target!=_.display.input.getField()||Gm(_.display,p)||ca(_,p)||p.ctrlKey&&!p.altKey||Gt&&p.metaKey)){var A=p.keyCode,M=p.charCode;if(ae&&A==$E)return $E=null,void kl(p);if(!ae||p.which&&!(p.which<10)||!uD(_,p)){var V=String.fromCharCode(M??A);"\b"!=V&&(function xT(p,_,A){return iw(p,"'"+A+"'",_,function(M){return ox(p,M,!0)})}(_,p,V)||_.display.input.onKeyPress(p))}}}var aw,sw,JE=function(p,_,A){this.time=p,this.pos=_,this.button=A};function hD(p){var _=this,A=_.display;if(!(ca(_,p)||A.activeTouch&&A.input.supportsTouch())){if(A.input.ensurePolled(),A.shift=p.shiftKey,Gm(A,p))return void(C||(A.scroller.draggable=!1,setTimeout(function(){return A.scroller.draggable=!0},100)));if(!YE(_,p)){var M=Iy(_,p),V=In(p),ve=M?function OT(p,_){var A=+new Date;return sw&&sw.compare(A,p,_)?(aw=sw=null,"triple"):aw&&aw.compare(A,p,_)?(sw=new JE(A,p,_),aw=null,"double"):(aw=new JE(A,p,_),sw=null,"single")}(M,V):"single";window.focus(),1==V&&_.state.selectingText&&_.state.selectingText(p),(!M||!function DT(p,_,A,M,V){var ve="Click";return"double"==M?ve="Double"+ve:"triple"==M&&(ve="Triple"+ve),iw(p,iD(ve=(1==_?"Left":2==_?"Middle":"Right")+ve,V),V,function(Ie){if("string"==typeof Ie&&(Ie=ow[Ie]),!Ie)return!1;var He=!1;try{p.isReadOnly()&&(p.state.suppressEdits=!0),He=Ie(p,A)!=ta}finally{p.state.suppressEdits=!1}return He})}(_,V,M,ve,p))&&(1==V?M?function ST(p,_,A,M){b?setTimeout(Ha(mO,p),0):p.curOp.focus=Eo();var Ie,V=function TT(p,_,A){var M=p.getOption("configureMouse"),V=M?M(p,_,A):{};return null==V.unit&&(V.unit=(ar?A.shiftKey&&A.metaKey:A.altKey)?"rectangle":"single"==_?"char":"double"==_?"word":"line"),(null==V.extend||p.doc.extend)&&(V.extend=p.doc.extend||A.shiftKey),null==V.addNew&&(V.addNew=Gt?A.metaKey:A.ctrlKey),null==V.moveOnDrag&&(V.moveOnDrag=!(Gt?A.altKey:A.ctrlKey)),V}(p,A,M),ve=p.doc.sel;p.options.dragDrop&&fi&&!p.isReadOnly()&&"single"==A&&(Ie=ve.contains(_))>-1&&(Rs((Ie=ve.ranges[Ie]).from(),_)<0||_.xRel>0)&&(Rs(Ie.to(),_)>0||_.xRel<0)?function PT(p,_,A,M){var V=p.display,ve=!1,Ie=xp(p,function(pt){C&&(V.scroller.draggable=!1),p.state.draggingText=!1,p.state.delayingBlurEvent&&(p.hasFocus()?p.state.delayingBlurEvent=!1:AE(p)),Ma(V.wrapper.ownerDocument,"mouseup",Ie),Ma(V.wrapper.ownerDocument,"mousemove",He),Ma(V.scroller,"dragstart",rt),Ma(V.scroller,"drop",Ie),ve||(kl(pt),M.addNew||Q2(p.doc,A,null,null,M.extend),C&&!be||b&&9==w?setTimeout(function(){V.wrapper.ownerDocument.body.focus({preventScroll:!0}),V.input.focus()},20):V.input.focus())}),He=function(pt){ve=ve||Math.abs(_.clientX-pt.clientX)+Math.abs(_.clientY-pt.clientY)>=10},rt=function(){return ve=!0};C&&(V.scroller.draggable=!0),p.state.draggingText=Ie,Ie.copy=!M.moveOnDrag,eo(V.wrapper.ownerDocument,"mouseup",Ie),eo(V.wrapper.ownerDocument,"mousemove",He),eo(V.scroller,"dragstart",rt),eo(V.scroller,"drop",Ie),p.state.delayingBlurEvent=!0,setTimeout(function(){return V.input.focus()},20),V.scroller.dragDrop&&V.scroller.dragDrop()}(p,M,_,V):function MT(p,_,A,M){b&&AE(p);var V=p.display,ve=p.doc;kl(_);var Ie,He,rt=ve.sel,pt=rt.ranges;if(M.addNew&&!M.extend?(He=ve.sel.contains(A),Ie=He>-1?pt[He]:new Ec(A,A)):(Ie=ve.sel.primary(),He=ve.sel.primIndex),"rectangle"==M.unit)M.addNew||(Ie=new Ec(A,A)),A=Iy(p,_,!0,!0),He=-1;else{var Er=mD(p,A,M.unit);Ie=M.extend?VE(Ie,Er.anchor,Er.head,M.extend):Er}M.addNew?-1==He?(He=pt.length,wf(ve,gg(p,pt.concat([Ie]),He),{scroll:!1,origin:"*mouse"})):pt.length>1&&pt[He].empty()&&"char"==M.unit&&!M.extend?(wf(ve,gg(p,pt.slice(0,He).concat(pt.slice(He+1)),0),{scroll:!1,origin:"*mouse"}),rt=ve.sel):zE(ve,He,Ie,is):(He=0,wf(ve,new Om([Ie],0),is),rt=ve.sel);var Vr=A;function Hn(ma){if(0!=Rs(Vr,ma))if(Vr=ma,"rectangle"==M.unit){for(var Ga=[],Ms=p.options.tabSize,xs=yo(Ua(ve,A.line).text,A.ch,Ms),Pl=yo(Ua(ve,ma.line).text,ma.ch,Ms),uu=Math.min(xs,Pl),Ep=Math.max(xs,Pl),Hu=Math.min(A.line,ma.line),Xh=Math.min(p.lastLine(),Math.max(A.line,ma.line));Hu<=Xh;Hu++){var Oh=Ua(ve,Hu).text,Zd=Pa(Oh,uu,Ms);uu==Ep?Ga.push(new Ec(Ai(Hu,Zd),Ai(Hu,Zd))):Oh.length>Zd&&Ga.push(new Ec(Ai(Hu,Zd),Ai(Hu,Pa(Oh,Ep,Ms))))}Ga.length||Ga.push(new Ec(A,A)),wf(ve,gg(p,rt.ranges.slice(0,He).concat(Ga),He),{origin:"*mouse",scroll:!1}),p.scrollIntoView(ma)}else{var Kd,Dh=Ie,$p=mD(p,ma,M.unit),pp=Dh.anchor;Rs($p.anchor,pp)>0?(Kd=$p.head,pp=ii(Dh.from(),$p.anchor)):(Kd=$p.anchor,pp=Zr(Dh.to(),$p.head));var od=rt.ranges.slice(0);od[He]=function AT(p,_){var A=_.anchor,M=_.head,V=Ua(p.doc,A.line);if(0==Rs(A,M)&&A.sticky==M.sticky)return _;var ve=Mt(V);if(!ve)return _;var Ie=er(ve,A.ch,A.sticky),He=ve[Ie];if(He.from!=A.ch&&He.to!=A.ch)return _;var pt,rt=Ie+(He.from==A.ch==(1!=He.level)?0:1);if(0==rt||rt==ve.length)return _;if(M.line!=A.line)pt=(M.line-A.line)*("ltr"==p.doc.direction?1:-1)>0;else{var Er=er(ve,M.ch,M.sticky),Vr=Er-Ie||(M.ch-A.ch)*(1==He.level?-1:1);pt=Er==rt-1||Er==rt?Vr<0:Vr>0}var Hn=ve[rt+(pt?-1:0)],Sn=pt==(1==Hn.level),$o=Sn?Hn.from:Hn.to,wi=Sn?"after":"before";return A.ch==$o&&A.sticky==wi?_:new Ec(new Ai(A.line,$o,wi),M)}(p,new Ec(Zi(ve,pp),Kd)),wf(ve,gg(p,od,He),is)}}var Sn=V.wrapper.getBoundingClientRect(),$o=0;function wi(ma){var Ga=++$o,Ms=Iy(p,ma,!0,"rectangle"==M.unit);if(Ms)if(0!=Rs(Ms,Vr)){p.curOp.focus=Eo(),Hn(Ms);var xs=H2(V,ve);(Ms.line>=xs.to||Ms.line<xs.from)&&setTimeout(xp(p,function(){$o==Ga&&wi(ma)}),150)}else{var Pl=ma.clientY<Sn.top?-20:ma.clientY>Sn.bottom?20:0;Pl&&setTimeout(xp(p,function(){$o==Ga&&(V.scroller.scrollTop+=Pl,wi(ma))}),50)}}function Yi(ma){p.state.selectingText=!1,$o=1/0,ma&&(kl(ma),V.input.focus()),Ma(V.wrapper.ownerDocument,"mousemove",ha),Ma(V.wrapper.ownerDocument,"mouseup",Za),ve.history.lastSelOrigin=null}var ha=xp(p,function(ma){0!==ma.buttons&&In(ma)?wi(ma):Yi(ma)}),Za=xp(p,Yi);p.state.selectingText=Za,eo(V.wrapper.ownerDocument,"mousemove",ha),eo(V.wrapper.ownerDocument,"mouseup",Za)}(p,M,_,V)}(_,M,ve,p):$r(p)==A.scroller&&kl(p):2==V?(M&&Q2(_.doc,M),setTimeout(function(){return A.input.focus()},20)):3==V&&(jn?_.display.input.onContextMenu(p):AE(_)))}}}function mD(p,_,A){if("char"==A)return new Ec(_,_);if("word"==A)return p.findWordAt(_);if("line"==A)return new Ec(Ai(_.line,0),Zi(p.doc,Ai(_.line+1,0)));var M=A(p,_);return new Ec(M.from,M.to)}function gD(p,_,A,M){var V,ve;if(_.touches)V=_.touches[0].clientX,ve=_.touches[0].clientY;else try{V=_.clientX,ve=_.clientY}catch{return!1}if(V>=Math.floor(p.display.gutters.getBoundingClientRect().right))return!1;M&&kl(_);var Ie=p.display,He=Ie.lineDiv.getBoundingClientRect();if(ve>He.bottom||!bl(p,A))return ap(_);ve-=He.top-Ie.viewOffset;for(var rt=0;rt<p.display.gutterSpecs.length;++rt){var pt=Ie.gutters.childNodes[rt];if(pt&&pt.getBoundingClientRect().right>=V)return Ia(p,A,p,Jc(p.doc,ve),p.display.gutterSpecs[rt].className,_),ap(_)}}function YE(p,_){return gD(p,_,"gutterClick",!0)}function vD(p,_){Gm(p.display,_)||function kT(p,_){return!!bl(p,"gutterContextMenu")&&gD(p,_,"gutterContextMenu",!1)}(p,_)||ca(p,_,"contextmenu")||jn||p.display.input.onContextMenu(_)}function _D(p){p.display.wrapper.className=p.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+p.options.theme.replace(/(^|\s)\s*/g," cm-s-"),W1(p)}JE.prototype.compare=function(p,_,A){return this.time+400>p&&0==Rs(_,this.pos)&&A==this.button};var gb={toString:function(){return"CodeMirror.Init"}},yD={},ix={};function IT(p,_,A){if(!_!=!(A&&A!=gb)){var V=p.display.dragFunctions,ve=_?eo:Ma;ve(p.display.scroller,"dragstart",V.start),ve(p.display.scroller,"dragenter",V.enter),ve(p.display.scroller,"dragover",V.over),ve(p.display.scroller,"dragleave",V.leave),ve(p.display.scroller,"drop",V.drop)}}function RT(p){p.options.lineWrapping?(_o(p.display.wrapper,"CodeMirror-wrap"),p.display.sizer.style.minWidth="",p.display.sizerWidth=null):(Dn(p.display.wrapper,"CodeMirror-wrap"),x_(p)),PE(p),Ch(p),W1(p),setTimeout(function(){return lb(p)},100)}function Nu(p,_){var A=this;if(!(this instanceof Nu))return new Nu(p,_);this.options=_=_?Us(_):{},Us(yD,_,!1);var M=_.value;"string"==typeof M?M=new Eh(M,_.mode,null,_.lineSeparator,_.direction):_.mode&&(M.modeOption=_.mode),this.doc=M;var V=new Nu.inputStyles[_.inputStyle](this),ve=this.display=new qD(p,M,V,_);for(var Ie in ve.wrapper.CodeMirror=this,_D(this),_.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),wO(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Oo,keySeq:null,specialChars:null},_.autofocus&&!ur&&ve.input.focus(),b&&w<11&&setTimeout(function(){return A.display.input.reset(!0)},20),function FT(p){var _=p.display;eo(_.scroller,"mousedown",xp(p,hD)),eo(_.scroller,"dblclick",b&&w<11?xp(p,function(rt){if(!ca(p,rt)){var pt=Iy(p,rt);if(pt&&!YE(p,rt)&&!Gm(p.display,rt)){kl(rt);var Er=p.findWordAt(pt);Q2(p.doc,Er.anchor,Er.head)}}}):function(rt){return ca(p,rt)||kl(rt)}),eo(_.scroller,"contextmenu",function(rt){return vD(p,rt)}),eo(_.input.getField(),"contextmenu",function(rt){_.scroller.contains(rt.target)||vD(p,rt)});var A,M={end:0};function V(){_.activeTouch&&(A=setTimeout(function(){return _.activeTouch=null},1e3),(M=_.activeTouch).end=+new Date)}function ve(rt){if(1!=rt.touches.length)return!1;var pt=rt.touches[0];return pt.radiusX<=1&&pt.radiusY<=1}function Ie(rt,pt){if(null==pt.left)return!0;var Er=pt.left-rt.left,Vr=pt.top-rt.top;return Er*Er+Vr*Vr>400}eo(_.scroller,"touchstart",function(rt){if(!ca(p,rt)&&!ve(rt)&&!YE(p,rt)){_.input.ensurePolled(),clearTimeout(A);var pt=+new Date;_.activeTouch={start:pt,moved:!1,prev:pt-M.end<=300?M:null},1==rt.touches.length&&(_.activeTouch.left=rt.touches[0].pageX,_.activeTouch.top=rt.touches[0].pageY)}}),eo(_.scroller,"touchmove",function(){_.activeTouch&&(_.activeTouch.moved=!0)}),eo(_.scroller,"touchend",function(rt){var pt=_.activeTouch;if(pt&&!Gm(_,rt)&&null!=pt.left&&!pt.moved&&new Date-pt.start<300){var Vr,Er=p.coordsChar(_.activeTouch,"page");Vr=!pt.prev||Ie(pt,pt.prev)?new Ec(Er,Er):!pt.prev.prev||Ie(pt,pt.prev.prev)?p.findWordAt(Er):new Ec(Ai(Er.line,0),Zi(p.doc,Ai(Er.line+1,0))),p.setSelection(Vr.anchor,Vr.head),p.focus(),kl(rt)}V()}),eo(_.scroller,"touchcancel",V),eo(_.scroller,"scroll",function(){_.scroller.clientHeight&&(V1(p,_.scroller.scrollTop),Fy(p,_.scroller.scrollLeft,!0),Ia(p,"scroll",p))}),eo(_.scroller,"mousewheel",function(rt){return TO(p,rt)}),eo(_.scroller,"DOMMouseScroll",function(rt){return TO(p,rt)}),eo(_.wrapper,"scroll",function(){return _.wrapper.scrollTop=_.wrapper.scrollLeft=0}),_.dragFunctions={enter:function(rt){ca(p,rt)||Vt(rt)},over:function(rt){ca(p,rt)||(function pT(p,_){var A=Iy(p,_);if(A){var M=document.createDocumentFragment();hO(p,A,M),p.display.dragCursor||(p.display.dragCursor=wr("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),p.display.lineSpace.insertBefore(p.display.dragCursor,p.display.cursorDiv)),Bt(p.display.dragCursor,M)}}(p,rt),Vt(rt))},start:function(rt){return function dT(p,_){if(b&&(!p.state.draggingText||+new Date-eD<100))Vt(_);else if(!ca(p,_)&&!Gm(p.display,_)&&(_.dataTransfer.setData("Text",p.getSelection()),_.dataTransfer.effectAllowed="copyMove",_.dataTransfer.setDragImage&&!be)){var A=wr("img",null,null,"position: fixed; left: 0; top: 0;");A.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ae&&(A.width=A.height=1,p.display.wrapper.appendChild(A),A._top=A.offsetTop),_.dataTransfer.setDragImage(A,0,0),ae&&A.parentNode.removeChild(A)}}(p,rt)},drop:xp(p,uT),leave:function(rt){ca(p,rt)||tD(p)}};var He=_.input.getField();eo(He,"keyup",function(rt){return pD.call(p,rt)}),eo(He,"keydown",xp(p,dD)),eo(He,"keypress",xp(p,fD)),eo(He,"focus",function(rt){return kE(p,rt)}),eo(He,"blur",function(rt){return ab(p,rt)})}(this),fT(),Ny(this),this.curOp.forceUpdate=!0,AO(this,M),_.autofocus&&!ur||this.hasFocus()?setTimeout(function(){A.hasFocus()&&!A.state.focused&&kE(A)},20):ab(this),ix)ix.hasOwnProperty(Ie)&&ix[Ie](this,_[Ie],gb);EO(this),_.finishInit&&_.finishInit(this);for(var He=0;He<QE.length;++He)QE[He](this);Uy(this),C&&_.lineWrapping&&"optimizelegibility"==getComputedStyle(ve.lineDiv).textRendering&&(ve.lineDiv.style.textRendering="auto")}Nu.defaults=yD,Nu.optionHandlers=ix;var QE=[];function lw(p,_,A,M){var ve,V=p.doc;null==A&&(A="add"),"smart"==A&&(V.mode.indent?ve=xh(p,_).state:A="prev");var Ie=p.options.tabSize,He=Ua(V,_),rt=yo(He.text,null,Ie);He.stateAfter&&(He.stateAfter=null);var Er,pt=He.text.match(/^\s*/)[0];if(M||/\S/.test(He.text)){if("smart"==A&&((Er=V.mode.indent(ve,He.text.slice(pt.length),He.text))==ta||Er>150)){if(!M)return;A="prev"}}else Er=0,A="not";"prev"==A?Er=_>V.first?yo(Ua(V,_-1).text,null,Ie):0:"add"==A?Er=rt+p.options.indentUnit:"subtract"==A?Er=rt-p.options.indentUnit:"number"==typeof A&&(Er=rt+A),Er=Math.max(0,Er);var Vr="",Hn=0;if(p.options.indentWithTabs)for(var Sn=Math.floor(Er/Ie);Sn;--Sn)Hn+=Ie,Vr+="\t";if(Hn<Er&&(Vr+=Hi(Er-Hn)),Vr!=pt)return pb(V,Vr,Ai(_,0),Ai(_,pt.length),"+input"),He.stateAfter=null,!0;for(var $o=0;$o<V.sel.ranges.length;$o++){var wi=V.sel.ranges[$o];if(wi.head.line==_&&wi.head.ch<pt.length){var Yi=Ai(_,pt.length);zE(V,$o,new Ec(Yi,Yi));break}}}Nu.defineInitHook=function(p){return QE.push(p)};var vg=null;function ax(p){vg=p}function XE(p,_,A,M,V){var ve=p.doc;p.display.shift=!1,M||(M=ve.sel);var Ie=+new Date-200,He="paste"==V||p.state.pasteIncoming>Ie,rt=lu(_),pt=null;if(He&&M.ranges.length>1)if(vg&&vg.text.join("\n")==_){if(M.ranges.length%vg.text.length==0){pt=[];for(var Er=0;Er<vg.text.length;Er++)pt.push(ve.splitLines(vg.text[Er]))}}else rt.length==M.ranges.length&&p.options.pasteLinesPerSelection&&(pt=bs(rt,function(ha){return[ha]}));for(var Vr=p.curOp.updateInput,Hn=M.ranges.length-1;Hn>=0;Hn--){var Sn=M.ranges[Hn],$o=Sn.from(),wi=Sn.to();Sn.empty()&&(A&&A>0?$o=Ai($o.line,$o.ch-A):p.state.overwrite&&!He?wi=Ai(wi.line,Math.min(Ua(ve,wi.line).text.length,wi.ch+Ji(rt).length)):He&&vg&&vg.lineWise&&vg.text.join("\n")==rt.join("\n")&&($o=wi=Ai($o.line,0)));var Yi={from:$o,to:wi,text:pt?pt[Hn%pt.length]:rt,origin:V||(He?"paste":p.state.cutIncoming>Ie?"cut":"+input")};db(p.doc,Yi),nd(p,"inputRead",p,Yi)}_&&!He&&wD(p,_),sb(p),p.curOp.updateInput<2&&(p.curOp.updateInput=Vr),p.curOp.typing=!0,p.state.pasteIncoming=p.state.cutIncoming=-1}function bD(p,_){var A=p.clipboardData&&p.clipboardData.getData("Text");if(A)return p.preventDefault(),!_.isReadOnly()&&!_.options.disableInput&&Qh(_,function(){return XE(_,A,0,null,"paste")}),!0}function wD(p,_){if(p.options.electricChars&&p.options.smartIndent)for(var A=p.doc.sel,M=A.ranges.length-1;M>=0;M--){var V=A.ranges[M];if(!(V.head.ch>100||M&&A.ranges[M-1].head.line==V.head.line)){var ve=p.getModeAt(V.head),Ie=!1;if(ve.electricChars){for(var He=0;He<ve.electricChars.length;He++)if(_.indexOf(ve.electricChars.charAt(He))>-1){Ie=lw(p,V.head.line,"smart");break}}else ve.electricInput&&ve.electricInput.test(Ua(p.doc,V.head.line).text.slice(0,V.head.ch))&&(Ie=lw(p,V.head.line,"smart"));Ie&&nd(p,"electricInput",p,V.head.line)}}}function xD(p){for(var _=[],A=[],M=0;M<p.doc.sel.ranges.length;M++){var V=p.doc.sel.ranges[M].head.line,ve={anchor:Ai(V,0),head:Ai(V+1,0)};A.push(ve),_.push(p.getRange(ve.anchor,ve.head))}return{text:_,ranges:A}}function CD(p,_,A,M){p.setAttribute("autocorrect",A?"":"off"),p.setAttribute("autocapitalize",M?"":"off"),p.setAttribute("spellcheck",!!_)}function ED(){var p=wr("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),_=wr("div",[p],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return C?p.style.width="1000px":p.setAttribute("wrap","off"),lt&&(p.style.border="1px solid black"),CD(p),_}function eO(p,_,A,M,V){var ve=_,Ie=A,He=Ua(p,_.line),rt=V&&"rtl"==p.direction?-A:A;function Er(Za){var ma;if("codepoint"==M){var Ga=He.text.charCodeAt(_.ch+(A>0?0:-1));ma=isNaN(Ga)?null:new Ai(_.line,Math.max(0,Math.min(He.text.length,_.ch+A*((A>0?Ga>=55296&&Ga<56320:Ga>=56320&&Ga<57343)?2:1))),-A)}else ma=V?function _T(p,_,A,M){var V=Mt(_,p.doc.direction);if(!V)return GE(_,A,M);A.ch>=_.text.length?(A.ch=_.text.length,A.sticky="before"):A.ch<=0&&(A.ch=0,A.sticky="after");var ve=er(V,A.ch,A.sticky),Ie=V[ve];if("ltr"==p.doc.direction&&Ie.level%2==0&&(M>0?Ie.to>A.ch:Ie.from<A.ch))return GE(_,A,M);var rt,He=function(ha,Za){return HE(_,ha instanceof Ai?ha.ch:ha,Za)},pt=function(ha){return p.options.lineWrapping?(rt=rt||di(p,_),uO(p,_,rt,ha)):{begin:0,end:_.text.length}},Er=pt("before"==A.sticky?He(A,-1):A.ch);if("rtl"==p.doc.direction||1==Ie.level){var Vr=1==Ie.level==M<0,Hn=He(A,Vr?1:-1);if(null!=Hn&&(Vr?Hn<=Ie.to&&Hn<=Er.end:Hn>=Ie.from&&Hn>=Er.begin))return new Ai(A.line,Hn,Vr?"before":"after")}var $o=function(ha,Za,ma){for(;ha>=0&&ha<V.length;ha+=Za){var Ms=V[ha],xs=Za>0==(1!=Ms.level),Pl=xs?ma.begin:He(ma.end,-1);if(Ms.from<=Pl&&Pl<Ms.to||(Pl=xs?Ms.from:He(Ms.to,-1),ma.begin<=Pl&&Pl<ma.end))return uu=Pl,xs?new Ai(A.line,He(uu,1),"before"):new Ai(A.line,uu,"after")}var uu},wi=$o(ve+M,M,Er);if(wi)return wi;var Yi=M>0?Er.end:He(Er.begin,-1);return null==Yi||M>0&&Yi==_.text.length||!(wi=$o(M>0?0:V.length-1,M,pt(Yi)))?null:wi}(p.cm,He,_,A):GE(He,_,A);if(null==ma){if(Za||!function pt(){var Za=_.line+rt;return!(Za<p.first||Za>=p.first+p.size)&&(_=new Ai(Za,_.ch,_.sticky),He=Ua(p,Za))}())return!1;_=qE(V,p.cm,He,_.line,rt)}else _=ma;return!0}if("char"==M||"codepoint"==M)Er();else if("column"==M)Er(!0);else if("word"==M||"group"==M)for(var Vr=null,Hn="group"==M,Sn=p.cm&&p.cm.getHelper(_,"wordChars"),$o=!0;!(A<0)||Er(!$o);$o=!1){var wi=He.text.charAt(_.ch)||"\n",Yi=An(wi,Sn)?"w":Hn&&"\n"==wi?"n":!Hn||/\s/.test(wi)?null:"p";if(Hn&&!$o&&!Yi&&(Yi="s"),Vr&&Vr!=Yi){A<0&&(A=1,Er(),_.sticky="after");break}if(Yi&&(Vr=Yi),A>0&&!Er(!$o))break}var ha=ex(p,_,ve,Ie,!0);return wh(ve,ha)&&(ha.hitSide=!0),ha}function OD(p,_,A,M){var Ie,pt,V=p.doc,ve=_.left;if("page"==M){var He=Math.min(p.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),rt=Math.max(He-.5*ob(p.display),3);Ie=(A>0?_.bottom:_.top)+A*rt}else"line"==M&&(Ie=A>0?_.bottom+3:_.top-3);for(;(pt=OE(p,ve,Ie)).outside;){if(A<0?Ie<=0:Ie>=V.height){pt.hitSide=!0;break}Ie+=5*A}return pt}var Bc=function(p){this.cm=p,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Oo,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function DD(p,_){var A=Nn(p,_.line);if(!A||A.hidden)return null;var M=Ua(p.doc,_.line),V=Wr(A,M,_.line),ve=Mt(M,p.doc.direction),Ie="left";ve&&(Ie=er(ve,_.ch)%2?"right":"left");var rt=Xs(V.map,_.ch,Ie);return rt.offset="right"==rt.collapse?rt.end:rt.start,rt}function vb(p,_){return _&&(p.bad=!0),p}function sx(p,_,A){var M;if(_==p.display.lineDiv){if(!(M=p.display.lineDiv.childNodes[A]))return vb(p.clipPos(Ai(p.display.viewTo-1)),!0);_=null,A=0}else for(M=_;;M=M.parentNode){if(!M||M==p.display.lineDiv)return null;if(M.parentNode&&M.parentNode==p.display.lineDiv)break}for(var V=0;V<p.display.view.length;V++){var ve=p.display.view[V];if(ve.node==M)return BT(ve,_,A)}}function BT(p,_,A){var M=p.text.firstChild,V=!1;if(!_||!xt(M,_))return vb(Ai(rl(p.line),0),!0);if(_==M&&(V=!0,_=M.childNodes[A],A=0,!_)){var ve=p.rest?Ji(p.rest):p.line;return vb(Ai(rl(ve),ve.text.length),V)}var Ie=3==_.nodeType?_:null,He=_;for(!Ie&&1==_.childNodes.length&&3==_.firstChild.nodeType&&(Ie=_.firstChild,A&&(A=Ie.nodeValue.length));He.parentNode!=M;)He=He.parentNode;var rt=p.measure,pt=rt.maps;function Er(Yi,ha,Za){for(var ma=-1;ma<(pt?pt.length:0);ma++)for(var Ga=ma<0?rt.map:pt[ma],Ms=0;Ms<Ga.length;Ms+=3){var xs=Ga[Ms+2];if(xs==Yi||xs==ha){var Pl=rl(ma<0?p.line:p.rest[ma]),uu=Ga[Ms]+Za;return(Za<0||xs!=Yi)&&(uu=Ga[Ms+(Za?1:0)]),Ai(Pl,uu)}}}var Vr=Er(Ie,He,A);if(Vr)return vb(Vr,V);for(var Hn=He.nextSibling,Sn=Ie?Ie.nodeValue.length-A:0;Hn;Hn=Hn.nextSibling){if(Vr=Er(Hn,Hn.firstChild,0))return vb(Ai(Vr.line,Vr.ch-Sn),V);Sn+=Hn.textContent.length}for(var $o=He.previousSibling,wi=A;$o;$o=$o.previousSibling){if(Vr=Er($o,$o.firstChild,-1))return vb(Ai(Vr.line,Vr.ch+wi),V);wi+=$o.textContent.length}}Bc.prototype.init=function(p){var _=this,A=this,M=A.cm,V=A.div=p.lineDiv;function ve(He){for(var rt=He.target;rt;rt=rt.parentNode){if(rt==V)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(rt.className))break}return!1}function Ie(He){if(ve(He)&&!ca(M,He)){if(M.somethingSelected())ax({lineWise:!1,text:M.getSelections()}),"cut"==He.type&&M.replaceSelection("",null,"cut");else{if(!M.options.lineWiseCopyCut)return;var rt=xD(M);ax({lineWise:!0,text:rt.text}),"cut"==He.type&&M.operation(function(){M.setSelections(rt.ranges,0,ea),M.replaceSelection("",null,"cut")})}if(He.clipboardData){He.clipboardData.clearData();var pt=vg.text.join("\n");if(He.clipboardData.setData("Text",pt),He.clipboardData.getData("Text")==pt)return void He.preventDefault()}var Er=ED(),Vr=Er.firstChild;M.display.lineSpace.insertBefore(Er,M.display.lineSpace.firstChild),Vr.value=vg.text.join("\n");var Hn=Eo();Sa(Vr),setTimeout(function(){M.display.lineSpace.removeChild(Er),Hn.focus(),Hn==V&&A.showPrimarySelection()},50)}}V.contentEditable=!0,CD(V,M.options.spellcheck,M.options.autocorrect,M.options.autocapitalize),eo(V,"paste",function(He){!ve(He)||ca(M,He)||bD(He,M)||w<=11&&setTimeout(xp(M,function(){return _.updateFromDOM()}),20)}),eo(V,"compositionstart",function(He){_.composing={data:He.data,done:!1}}),eo(V,"compositionupdate",function(He){_.composing||(_.composing={data:He.data,done:!1})}),eo(V,"compositionend",function(He){_.composing&&(He.data!=_.composing.data&&_.readFromDOMSoon(),_.composing.done=!0)}),eo(V,"touchstart",function(){return A.forceCompositionEnd()}),eo(V,"input",function(){_.composing||_.readFromDOMSoon()}),eo(V,"copy",Ie),eo(V,"cut",Ie)},Bc.prototype.screenReaderLabelChanged=function(p){p?this.div.setAttribute("aria-label",p):this.div.removeAttribute("aria-label")},Bc.prototype.prepareSelection=function(){var p=fO(this.cm,!1);return p.focus=Eo()==this.div,p},Bc.prototype.showSelection=function(p,_){!p||!this.cm.display.view.length||((p.focus||_)&&this.showPrimarySelection(),this.showMultipleSelections(p))},Bc.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Bc.prototype.showPrimarySelection=function(){var p=this.getSelection(),_=this.cm,A=_.doc.sel.primary(),M=A.from(),V=A.to();if(_.display.viewTo==_.display.viewFrom||M.line>=_.display.viewTo||V.line<_.display.viewFrom)p.removeAllRanges();else{var ve=sx(_,p.anchorNode,p.anchorOffset),Ie=sx(_,p.focusNode,p.focusOffset);if(!ve||ve.bad||!Ie||Ie.bad||0!=Rs(ii(ve,Ie),M)||0!=Rs(Zr(ve,Ie),V)){var He=_.display.view,rt=M.line>=_.display.viewFrom&&DD(_,M)||{node:He[0].measure.map[2],offset:0},pt=V.line<_.display.viewTo&&DD(_,V);if(!pt){var Er=He[He.length-1].measure,Vr=Er.maps?Er.maps[Er.maps.length-1]:Er.map;pt={node:Vr[Vr.length-1],offset:Vr[Vr.length-2]-Vr[Vr.length-3]}}if(!rt||!pt)return void p.removeAllRanges();var Sn,Hn=p.rangeCount&&p.getRangeAt(0);try{Sn=gn(rt.node,rt.offset,pt.offset,pt.node)}catch{}Sn&&(!r&&_.state.focused?(p.collapse(rt.node,rt.offset),Sn.collapsed||(p.removeAllRanges(),p.addRange(Sn))):(p.removeAllRanges(),p.addRange(Sn)),Hn&&null==p.anchorNode?p.addRange(Hn):r&&this.startGracePeriod()),this.rememberSelection()}}},Bc.prototype.startGracePeriod=function(){var p=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){p.gracePeriod=!1,p.selectionChanged()&&p.cm.operation(function(){return p.cm.curOp.selectionChanged=!0})},20)},Bc.prototype.showMultipleSelections=function(p){Bt(this.cm.display.cursorDiv,p.cursors),Bt(this.cm.display.selectionDiv,p.selection)},Bc.prototype.rememberSelection=function(){var p=this.getSelection();this.lastAnchorNode=p.anchorNode,this.lastAnchorOffset=p.anchorOffset,this.lastFocusNode=p.focusNode,this.lastFocusOffset=p.focusOffset},Bc.prototype.selectionInEditor=function(){var p=this.getSelection();if(!p.rangeCount)return!1;var _=p.getRangeAt(0).commonAncestorContainer;return xt(this.div,_)},Bc.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&((!this.selectionInEditor()||Eo()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Bc.prototype.blur=function(){this.div.blur()},Bc.prototype.getField=function(){return this.div},Bc.prototype.supportsTouch=function(){return!0},Bc.prototype.receivedFocus=function(){var p=this,_=this;this.selectionInEditor()?setTimeout(function(){return p.pollSelection()},20):Qh(this.cm,function(){return _.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function A(){_.cm.state.focused&&(_.pollSelection(),_.polling.set(_.cm.options.pollInterval,A))})},Bc.prototype.selectionChanged=function(){var p=this.getSelection();return p.anchorNode!=this.lastAnchorNode||p.anchorOffset!=this.lastAnchorOffset||p.focusNode!=this.lastFocusNode||p.focusOffset!=this.lastFocusOffset},Bc.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var p=this.getSelection(),_=this.cm;if(Ot&&ne&&this.cm.display.gutterSpecs.length&&function NT(p){for(var _=p;_;_=_.parentNode)if(/CodeMirror-gutter-wrapper/.test(_.className))return!0;return!1}(p.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var A=sx(_,p.anchorNode,p.anchorOffset),M=sx(_,p.focusNode,p.focusOffset);A&&M&&Qh(_,function(){wf(_.doc,k_(A,M),ea),(A.bad||M.bad)&&(_.curOp.selectionChanged=!0)})}}},Bc.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var ve,Ie,He,p=this.cm,_=p.display,A=p.doc.sel.primary(),M=A.from(),V=A.to();if(0==M.ch&&M.line>p.firstLine()&&(M=Ai(M.line-1,Ua(p.doc,M.line-1).length)),V.ch==Ua(p.doc,V.line).text.length&&V.line<p.lastLine()&&(V=Ai(V.line+1,0)),M.line<_.viewFrom||V.line>_.viewTo-1)return!1;M.line==_.viewFrom||0==(ve=Ry(p,M.line))?(Ie=rl(_.view[0].line),He=_.view[0].node):(Ie=rl(_.view[ve].line),He=_.view[ve-1].node.nextSibling);var pt,Er,rt=Ry(p,V.line);if(rt==_.view.length-1?(pt=_.viewTo-1,Er=_.lineDiv.lastChild):(pt=rl(_.view[rt+1].line)-1,Er=_.view[rt+1].node.previousSibling),!He)return!1;for(var Vr=p.doc.splitLines(function UT(p,_,A,M,V){var ve="",Ie=!1,He=p.doc.lineSeparator(),rt=!1;function Er(){Ie&&(ve+=He,rt&&(ve+=He),Ie=rt=!1)}function Vr(Sn){Sn&&(Er(),ve+=Sn)}function Hn(Sn){if(1==Sn.nodeType){var $o=Sn.getAttribute("cm-text");if($o)return void Vr($o);var Yi,wi=Sn.getAttribute("cm-marker");if(wi){var ha=p.findMarks(Ai(M,0),Ai(V+1,0),function pt(Sn){return function($o){return $o.id==Sn}}(+wi));return void(ha.length&&(Yi=ha[0].find(0))&&Vr(lp(p.doc,Yi.from,Yi.to).join(He)))}if("false"==Sn.getAttribute("contenteditable"))return;var Za=/^(pre|div|p|li|table|br)$/i.test(Sn.nodeName);if(!/^br$/i.test(Sn.nodeName)&&0==Sn.textContent.length)return;Za&&Er();for(var ma=0;ma<Sn.childNodes.length;ma++)Hn(Sn.childNodes[ma]);/^(pre|p)$/i.test(Sn.nodeName)&&(rt=!0),Za&&(Ie=!0)}else 3==Sn.nodeType&&Vr(Sn.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Hn(_),_!=A;)_=_.nextSibling,rt=!1;return ve}(p,He,Er,Ie,pt)),Hn=lp(p.doc,Ai(Ie,0),Ai(pt,Ua(p.doc,pt).text.length));Vr.length>1&&Hn.length>1;)if(Ji(Vr)==Ji(Hn))Vr.pop(),Hn.pop(),pt--;else{if(Vr[0]!=Hn[0])break;Vr.shift(),Hn.shift(),Ie++}for(var Sn=0,$o=0,wi=Vr[0],Yi=Hn[0],ha=Math.min(wi.length,Yi.length);Sn<ha&&wi.charCodeAt(Sn)==Yi.charCodeAt(Sn);)++Sn;for(var Za=Ji(Vr),ma=Ji(Hn),Ga=Math.min(Za.length-(1==Vr.length?Sn:0),ma.length-(1==Hn.length?Sn:0));$o<Ga&&Za.charCodeAt(Za.length-$o-1)==ma.charCodeAt(ma.length-$o-1);)++$o;if(1==Vr.length&&1==Hn.length&&Ie==M.line)for(;Sn&&Sn>M.ch&&Za.charCodeAt(Za.length-$o-1)==ma.charCodeAt(ma.length-$o-1);)Sn--,$o++;Vr[Vr.length-1]=Za.slice(0,Za.length-$o).replace(/^\u200b+/,""),Vr[0]=Vr[0].slice(Sn).replace(/\u200b+$/,"");var Ms=Ai(Ie,Sn),xs=Ai(pt,Hn.length?Ji(Hn).length-$o:0);return Vr.length>1||Vr[0]||Rs(Ms,xs)?(pb(p.doc,Vr,Ms,xs,"+input"),!0):void 0},Bc.prototype.ensurePolled=function(){this.forceCompositionEnd()},Bc.prototype.reset=function(){this.forceCompositionEnd()},Bc.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Bc.prototype.readFromDOMSoon=function(){var p=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(p.readDOMTimeout=null,p.composing){if(!p.composing.done)return;p.composing=null}p.updateFromDOM()},80))},Bc.prototype.updateFromDOM=function(){var p=this;(this.cm.isReadOnly()||!this.pollContent())&&Qh(this.cm,function(){return Ch(p.cm)})},Bc.prototype.setUneditable=function(p){p.contentEditable="false"},Bc.prototype.onKeyPress=function(p){0==p.charCode||this.composing||(p.preventDefault(),this.cm.isReadOnly()||xp(this.cm,XE)(this.cm,String.fromCharCode(null==p.charCode?p.keyCode:p.charCode),0))},Bc.prototype.readOnlyChanged=function(p){this.div.contentEditable=String("nocursor"!=p)},Bc.prototype.onContextMenu=function(){},Bc.prototype.resetPosition=function(){},Bc.prototype.needsContentAttribute=!0;var Ed=function(p){this.cm=p,this.prevInput="",this.pollingFast=!1,this.polling=new Oo,this.hasSelection=!1,this.composing=null};Ed.prototype.init=function(p){var _=this,A=this,M=this.cm;this.createField(p);var V=this.textarea;function ve(Ie){if(!ca(M,Ie)){if(M.somethingSelected())ax({lineWise:!1,text:M.getSelections()});else{if(!M.options.lineWiseCopyCut)return;var He=xD(M);ax({lineWise:!0,text:He.text}),"cut"==Ie.type?M.setSelections(He.ranges,null,ea):(A.prevInput="",V.value=He.text.join("\n"),Sa(V))}"cut"==Ie.type&&(M.state.cutIncoming=+new Date)}}p.wrapper.insertBefore(this.wrapper,p.wrapper.firstChild),lt&&(V.style.width="0px"),eo(V,"input",function(){b&&w>=9&&_.hasSelection&&(_.hasSelection=null),A.poll()}),eo(V,"paste",function(Ie){ca(M,Ie)||bD(Ie,M)||(M.state.pasteIncoming=+new Date,A.fastPoll())}),eo(V,"cut",ve),eo(V,"copy",ve),eo(p.scroller,"paste",function(Ie){if(!Gm(p,Ie)&&!ca(M,Ie)){if(!V.dispatchEvent)return M.state.pasteIncoming=+new Date,void A.focus();var He=new Event("paste");He.clipboardData=Ie.clipboardData,V.dispatchEvent(He)}}),eo(p.lineSpace,"selectstart",function(Ie){Gm(p,Ie)||kl(Ie)}),eo(V,"compositionstart",function(){var Ie=M.getCursor("from");A.composing&&A.composing.range.clear(),A.composing={start:Ie,range:M.markText(Ie,M.getCursor("to"),{className:"CodeMirror-composing"})}}),eo(V,"compositionend",function(){A.composing&&(A.poll(),A.composing.range.clear(),A.composing=null)})},Ed.prototype.createField=function(p){this.wrapper=ED(),this.textarea=this.wrapper.firstChild},Ed.prototype.screenReaderLabelChanged=function(p){p?this.textarea.setAttribute("aria-label",p):this.textarea.removeAttribute("aria-label")},Ed.prototype.prepareSelection=function(){var p=this.cm,_=p.display,A=p.doc,M=fO(p);if(p.options.moveInputWithCursor){var V=mg(p,A.sel.primary().head,"div"),ve=_.wrapper.getBoundingClientRect(),Ie=_.lineDiv.getBoundingClientRect();M.teTop=Math.max(0,Math.min(_.wrapper.clientHeight-10,V.top+Ie.top-ve.top)),M.teLeft=Math.max(0,Math.min(_.wrapper.clientWidth-10,V.left+Ie.left-ve.left))}return M},Ed.prototype.showSelection=function(p){var A=this.cm.display;Bt(A.cursorDiv,p.cursors),Bt(A.selectionDiv,p.selection),null!=p.teTop&&(this.wrapper.style.top=p.teTop+"px",this.wrapper.style.left=p.teLeft+"px")},Ed.prototype.reset=function(p){if(!this.contextMenuPending&&!this.composing){var _=this.cm;if(_.somethingSelected()){this.prevInput="";var A=_.getSelection();this.textarea.value=A,_.state.focused&&Sa(this.textarea),b&&w>=9&&(this.hasSelection=A)}else p||(this.prevInput=this.textarea.value="",b&&w>=9&&(this.hasSelection=null))}},Ed.prototype.getField=function(){return this.textarea},Ed.prototype.supportsTouch=function(){return!1},Ed.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!ur||Eo()!=this.textarea))try{this.textarea.focus()}catch{}},Ed.prototype.blur=function(){this.textarea.blur()},Ed.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Ed.prototype.receivedFocus=function(){this.slowPoll()},Ed.prototype.slowPoll=function(){var p=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){p.poll(),p.cm.state.focused&&p.slowPoll()})},Ed.prototype.fastPoll=function(){var p=!1,_=this;_.pollingFast=!0,_.polling.set(20,function A(){_.poll()||p?(_.pollingFast=!1,_.slowPoll()):(p=!0,_.polling.set(60,A))})},Ed.prototype.poll=function(){var p=this,_=this.cm,A=this.textarea,M=this.prevInput;if(this.contextMenuPending||!_.state.focused||Ru(A)&&!M&&!this.composing||_.isReadOnly()||_.options.disableInput||_.state.keySeq)return!1;var V=A.value;if(V==M&&!_.somethingSelected())return!1;if(b&&w>=9&&this.hasSelection===V||Gt&&/[\uf700-\uf7ff]/.test(V))return _.display.input.reset(),!1;if(_.doc.sel==_.display.selForContextMenu){var ve=V.charCodeAt(0);if(8203==ve&&!M&&(M="\u200b"),8666==ve)return this.reset(),this.cm.execCommand("undo")}for(var Ie=0,He=Math.min(M.length,V.length);Ie<He&&M.charCodeAt(Ie)==V.charCodeAt(Ie);)++Ie;return Qh(_,function(){XE(_,V.slice(Ie),M.length-Ie,null,p.composing?"*compose":null),V.length>1e3||V.indexOf("\n")>-1?A.value=p.prevInput="":p.prevInput=V,p.composing&&(p.composing.range.clear(),p.composing.range=_.markText(p.composing.start,_.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Ed.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Ed.prototype.onKeyPress=function(){b&&w>=9&&(this.hasSelection=null),this.fastPoll()},Ed.prototype.onContextMenu=function(p){var _=this,A=_.cm,M=A.display,V=_.textarea;_.contextMenuPending&&_.contextMenuPending();var ve=Iy(A,p),Ie=M.scroller.scrollTop;if(ve&&!ae){A.options.resetSelectionOnContextMenu&&-1==A.doc.sel.contains(ve)&&xp(A,wf)(A.doc,k_(ve),ea);var Vr,rt=V.style.cssText,pt=_.wrapper.style.cssText,Er=_.wrapper.offsetParent.getBoundingClientRect();if(_.wrapper.style.cssText="position: static",V.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(p.clientY-Er.top-5)+"px; left: "+(p.clientX-Er.left-5)+"px;\n      z-index: 1000; background: "+(b?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",C&&(Vr=window.scrollY),M.input.focus(),C&&window.scrollTo(null,Vr),M.input.reset(),A.somethingSelected()||(V.value=_.prevInput=" "),_.contextMenuPending=Sn,M.selForContextMenu=A.doc.sel,clearTimeout(M.detectingSelectAll),b&&w>=9&&Hn(),jn){Vt(p);var $o=function(){Ma(window,"mouseup",$o),setTimeout(Sn,20)};eo(window,"mouseup",$o)}else setTimeout(Sn,50)}function Hn(){if(null!=V.selectionStart){var wi=A.somethingSelected(),Yi="\u200b"+(wi?V.value:"");V.value="\u21da",V.value=Yi,_.prevInput=wi?"":"\u200b",V.selectionStart=1,V.selectionEnd=Yi.length,M.selForContextMenu=A.doc.sel}}function Sn(){if(_.contextMenuPending==Sn&&(_.contextMenuPending=!1,_.wrapper.style.cssText=pt,V.style.cssText=rt,b&&w<9&&M.scrollbars.setScrollTop(M.scroller.scrollTop=Ie),null!=V.selectionStart)){(!b||b&&w<9)&&Hn();var wi=0,Yi=function(){M.selForContextMenu==A.doc.sel&&0==V.selectionStart&&V.selectionEnd>0&&"\u200b"==_.prevInput?xp(A,VO)(A):wi++<10?M.detectingSelectAll=setTimeout(Yi,500):(M.selForContextMenu=null,M.input.reset())};M.detectingSelectAll=setTimeout(Yi,200)}}},Ed.prototype.readOnlyChanged=function(p){p||this.reset(),this.textarea.disabled="nocursor"==p,this.textarea.readOnly=!!p},Ed.prototype.setUneditable=function(){},Ed.prototype.needsContentAttribute=!1,function LT(p){var _=p.optionHandlers;function A(M,V,ve,Ie){p.defaults[M]=V,ve&&(_[M]=Ie?function(He,rt,pt){pt!=gb&&ve(He,rt,pt)}:ve)}p.defineOption=A,p.Init=gb,A("value","",function(M,V){return M.setValue(V)},!0),A("mode",null,function(M,V){M.doc.modeOption=V,WE(M)},!0),A("indentUnit",2,WE,!0),A("indentWithTabs",!1),A("smartIndent",!0),A("tabSize",4,function(M){$1(M),W1(M),Ch(M)},!0),A("lineSeparator",null,function(M,V){if(M.doc.lineSep=V,V){var ve=[],Ie=M.doc.first;M.doc.iter(function(rt){for(var pt=0;;){var Er=rt.text.indexOf(V,pt);if(-1==Er)break;pt=Er+V.length,ve.push(Ai(Ie,Er))}Ie++});for(var He=ve.length-1;He>=0;He--)pb(M.doc,V,ve[He],Ai(ve[He].line,ve[He].ch+V.length))}}),A("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(M,V,ve){M.state.specialChars=new RegExp(V.source+(V.test("\t")?"":"|\t"),"g"),ve!=gb&&M.refresh()}),A("specialCharPlaceholder",M2,function(M){return M.refresh()},!0),A("electricChars",!0),A("inputStyle",ur?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),A("spellcheck",!1,function(M,V){return M.getInputField().spellcheck=V},!0),A("autocorrect",!1,function(M,V){return M.getInputField().autocorrect=V},!0),A("autocapitalize",!1,function(M,V){return M.getInputField().autocapitalize=V},!0),A("rtlMoveVisually",!Fn),A("wholeLineUpdateBefore",!0),A("theme","default",function(M){_D(M),q1(M)},!0),A("keyMap","default",function(M,V,ve){var Ie=nx(V),He=ve!=gb&&nx(ve);He&&He.detach&&He.detach(M,Ie),Ie.attach&&Ie.attach(M,He||null)}),A("extraKeys",null),A("configureMouse",null),A("lineWrapping",!1,RT,!0),A("gutters",[],function(M,V){M.display.gutterSpecs=UE(V,M.options.lineNumbers),q1(M)},!0),A("fixedGutter",!0,function(M,V){M.display.gutters.style.left=V?SE(M.display)+"px":"0",M.refresh()},!0),A("coverGutterNextToScrollbar",!1,function(M){return lb(M)},!0),A("scrollbarStyle","native",function(M){wO(M),lb(M),M.display.scrollbars.setScrollTop(M.doc.scrollTop),M.display.scrollbars.setScrollLeft(M.doc.scrollLeft)},!0),A("lineNumbers",!1,function(M,V){M.display.gutterSpecs=UE(M.options.gutters,V),q1(M)},!0),A("firstLineNumber",1,q1,!0),A("lineNumberFormatter",function(M){return M},q1,!0),A("showCursorWhenSelecting",!1,Z1,!0),A("resetSelectionOnContextMenu",!0),A("lineWiseCopyCut",!0),A("pasteLinesPerSelection",!0),A("selectionsMayTouch",!1),A("readOnly",!1,function(M,V){"nocursor"==V&&(ab(M),M.display.input.blur()),M.display.input.readOnlyChanged(V)}),A("screenReaderLabel",null,function(M,V){M.display.input.screenReaderLabelChanged(V=""===V?null:V)}),A("disableInput",!1,function(M,V){V||M.display.input.reset()},!0),A("dragDrop",!0,IT),A("allowDropFileTypes",null),A("cursorBlinkRate",530),A("cursorScrollMargin",0),A("cursorHeight",1,Z1,!0),A("singleCursorHeightPerLine",!0,Z1,!0),A("workTime",100),A("workDelay",100),A("flattenSpans",!0,$1,!0),A("addModeClass",!1,$1,!0),A("pollInterval",100),A("undoDepth",200,function(M,V){return M.doc.history.undoDepth=V}),A("historyEventDelay",1250),A("viewportMargin",10,function(M){return M.refresh()},!0),A("maxHighlightLength",1e4,$1,!0),A("moveInputWithCursor",!0,function(M,V){V||M.display.input.resetPosition()}),A("tabindex",null,function(M,V){return M.display.input.getField().tabIndex=V||""}),A("autofocus",null),A("direction","ltr",function(M,V){return M.doc.setDirection(V)},!0),A("phrases",null)}(Nu),function jT(p){var _=p.optionHandlers,A=p.helpers={};p.prototype={constructor:p,focus:function(){window.focus(),this.display.input.focus()},setOption:function(M,V){var ve=this.options,Ie=ve[M];ve[M]==V&&"mode"!=M||(ve[M]=V,_.hasOwnProperty(M)&&xp(this,_[M])(this,V,Ie),Ia(this,"optionChange",this,M))},getOption:function(M){return this.options[M]},getDoc:function(){return this.doc},addKeyMap:function(M,V){this.state.keyMaps[V?"push":"unshift"](nx(M))},removeKeyMap:function(M){for(var V=this.state.keyMaps,ve=0;ve<V.length;++ve)if(V[ve]==M||V[ve].name==M)return V.splice(ve,1),!0},addOverlay:qf(function(M,V){var ve=M.token?M:p.getMode(this.options,M);if(ve.startState)throw new Error("Overlays may not be stateful.");(function Xa(p,_,A){for(var M=0,V=A(_);M<p.length&&A(p[M])<=V;)M++;p.splice(M,0,_)})(this.state.overlays,{mode:ve,modeSpec:M,opaque:V&&V.opaque,priority:V&&V.priority||0},function(Ie){return Ie.priority}),this.state.modeGen++,Ch(this)}),removeOverlay:qf(function(M){for(var V=this.state.overlays,ve=0;ve<V.length;++ve){var Ie=V[ve].modeSpec;if(Ie==M||"string"==typeof M&&Ie.name==M)return V.splice(ve,1),this.state.modeGen++,void Ch(this)}}),indentLine:qf(function(M,V,ve){"string"!=typeof V&&"number"!=typeof V&&(V=null==V?this.options.smartIndent?"smart":"prev":V?"add":"subtract"),_m(this.doc,M)&&lw(this,M,V,ve)}),indentSelection:qf(function(M){for(var V=this.doc.sel.ranges,ve=-1,Ie=0;Ie<V.length;Ie++){var He=V[Ie];if(He.empty())He.head.line>ve&&(lw(this,He.head.line,M,!0),ve=He.head.line,Ie==this.doc.sel.primIndex&&sb(this));else{var rt=He.from(),pt=He.to(),Er=Math.max(ve,rt.line);ve=Math.min(this.lastLine(),pt.line-(pt.ch?0:1))+1;for(var Vr=Er;Vr<ve;++Vr)lw(this,Vr,M);var Hn=this.doc.sel.ranges;0==rt.ch&&V.length==Hn.length&&Hn[Ie].from().ch>0&&zE(this.doc,Ie,new Ec(rt,Hn[Ie].to()),ea)}}}),getTokenAt:function(M,V){return Sy(this,M,V)},getLineTokens:function(M,V){return Sy(this,Ai(M),V,!0)},getTokenTypeAt:function(M){M=Zi(this.doc,M);var rt,V=bm(this,Ua(this.doc,M.line)),ve=0,Ie=(V.length-1)/2,He=M.ch;if(0==He)rt=V[2];else for(;;){var pt=ve+Ie>>1;if((pt?V[2*pt-1]:0)>=He)Ie=pt;else{if(!(V[2*pt+1]<He)){rt=V[2*pt+2];break}ve=pt+1}}var Er=rt?rt.indexOf("overlay "):-1;return Er<0?rt:0==Er?null:rt.slice(0,Er-1)},getModeAt:function(M){var V=this.doc.mode;return V.innerMode?p.innerMode(V,this.getTokenAt(M).state).mode:V},getHelper:function(M,V){return this.getHelpers(M,V)[0]},getHelpers:function(M,V){var ve=[];if(!A.hasOwnProperty(V))return ve;var Ie=A[V],He=this.getModeAt(M);if("string"==typeof He[V])Ie[He[V]]&&ve.push(Ie[He[V]]);else if(He[V])for(var rt=0;rt<He[V].length;rt++){var pt=Ie[He[V][rt]];pt&&ve.push(pt)}else He.helperType&&Ie[He.helperType]?ve.push(Ie[He.helperType]):Ie[He.name]&&ve.push(Ie[He.name]);for(var Er=0;Er<Ie._global.length;Er++){var Vr=Ie._global[Er];Vr.pred(He,this)&&-1==Li(ve,Vr.val)&&ve.push(Vr.val)}return ve},getStateAfter:function(M,V){var ve=this.doc;return xh(this,(M=Ii(ve,M??ve.first+ve.size-1))+1,V).state},cursorCoords:function(M,V){var Ie=this.doc.sel.primary();return mg(this,null==M?Ie.head:"object"==typeof M?Zi(this.doc,M):M?Ie.from():Ie.to(),V||"page")},charCoords:function(M,V){return Z2(this,Zi(this.doc,M),V||"page")},coordsChar:function(M,V){return OE(this,(M=sO(this,M,V||"page")).left,M.top)},lineAtHeight:function(M,V){return M=sO(this,{top:M,left:0},V||"page").top,Jc(this.doc,M+this.display.viewOffset)},heightAtLine:function(M,V,ve){var He,Ie=!1;if("number"==typeof M){var rt=this.doc.first+this.doc.size-1;M<this.doc.first?M=this.doc.first:M>rt&&(M=rt,Ie=!0),He=Ua(this.doc,M)}else He=M;return W2(this,He,{top:0,left:0},V||"page",ve||Ie).top+(Ie?this.doc.height-Jh(He):0)},defaultTextHeight:function(){return ob(this.display)},defaultCharWidth:function(){return ib(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(M,V,ve,Ie,He){var rt=this.display,pt=(M=mg(this,Zi(this.doc,M))).bottom,Er=M.left;if(V.style.position="absolute",V.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(V),rt.sizer.appendChild(V),"over"==Ie)pt=M.top;else if("above"==Ie||"near"==Ie){var Vr=Math.max(rt.wrapper.clientHeight,this.doc.height),Hn=Math.max(rt.sizer.clientWidth,rt.lineSpace.clientWidth);("above"==Ie||M.bottom+V.offsetHeight>Vr)&&M.top>V.offsetHeight?pt=M.top-V.offsetHeight:M.bottom+V.offsetHeight<=Vr&&(pt=M.bottom),Er+V.offsetWidth>Hn&&(Er=Hn-V.offsetWidth)}V.style.top=pt+"px",V.style.left=V.style.right="","right"==He?(Er=rt.sizer.clientWidth-V.offsetWidth,V.style.right="0px"):("left"==He?Er=0:"middle"==He&&(Er=(rt.sizer.clientWidth-V.offsetWidth)/2),V.style.left=Er+"px"),ve&&function ID(p,_){var A=LE(p,_);null!=A.scrollTop&&V1(p,A.scrollTop),null!=A.scrollLeft&&Fy(p,A.scrollLeft)}(this,{left:Er,top:pt,right:Er+V.offsetWidth,bottom:pt+V.offsetHeight})},triggerOnKeyDown:qf(dD),triggerOnKeyPress:qf(fD),triggerOnKeyUp:pD,triggerOnMouseDown:qf(hD),execCommand:function(M){if(ow.hasOwnProperty(M))return ow[M].call(null,this)},triggerElectric:qf(function(M){wD(this,M)}),findPosH:function(M,V,ve,Ie){var He=1;V<0&&(He=-1,V=-V);for(var rt=Zi(this.doc,M),pt=0;pt<V&&!(rt=eO(this.doc,rt,He,ve,Ie)).hitSide;++pt);return rt},moveH:qf(function(M,V){var ve=this;this.extendSelectionsBy(function(Ie){return ve.display.shift||ve.doc.extend||Ie.empty()?eO(ve.doc,Ie.head,M,V,ve.options.rtlMoveVisually):M<0?Ie.from():Ie.to()},ps)}),deleteH:qf(function(M,V){var Ie=this.doc;this.doc.sel.somethingSelected()?Ie.replaceSelection("",null,"+delete"):mb(this,function(He){var rt=eO(Ie,He.head,M,V,!1);return M<0?{from:rt,to:He.head}:{from:He.head,to:rt}})}),findPosV:function(M,V,ve,Ie){var He=1,rt=Ie;V<0&&(He=-1,V=-V);for(var pt=Zi(this.doc,M),Er=0;Er<V;++Er){var Vr=mg(this,pt,"div");if(null==rt?rt=Vr.left:Vr.left=rt,(pt=OD(this,Vr,He,ve)).hitSide)break}return pt},moveV:qf(function(M,V){var ve=this,Ie=this.doc,He=[],rt=!this.display.shift&&!Ie.extend&&Ie.sel.somethingSelected();if(Ie.extendSelectionsBy(function(Er){if(rt)return M<0?Er.from():Er.to();var Vr=mg(ve,Er.head,"div");null!=Er.goalColumn&&(Vr.left=Er.goalColumn),He.push(Vr.left);var Hn=OD(ve,Vr,M,V);return"page"==V&&Er==Ie.sel.primary()&&IE(ve,Z2(ve,Hn,"div").top-Vr.top),Hn},ps),He.length)for(var pt=0;pt<Ie.sel.ranges.length;pt++)Ie.sel.ranges[pt].goalColumn=He[pt]}),findWordAt:function(M){var ve=Ua(this.doc,M.line).text,Ie=M.ch,He=M.ch;if(ve){var rt=this.getHelper(M,"wordChars");"before"!=M.sticky&&He!=ve.length||!Ie?++He:--Ie;for(var pt=ve.charAt(Ie),Er=An(pt,rt)?function(Vr){return An(Vr,rt)}:/\s/.test(pt)?function(Vr){return/\s/.test(Vr)}:function(Vr){return!/\s/.test(Vr)&&!An(Vr)};Ie>0&&Er(ve.charAt(Ie-1));)--Ie;for(;He<ve.length&&Er(ve.charAt(He));)++He}return new Ec(Ai(M.line,Ie),Ai(M.line,He))},toggleOverwrite:function(M){null!=M&&M==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?_o(this.display.cursorDiv,"CodeMirror-overwrite"):Dn(this.display.cursorDiv,"CodeMirror-overwrite"),Ia(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Eo()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:qf(function(M,V){K1(this,M,V)}),getScrollInfo:function(){var M=this.display.scroller;return{left:M.scrollLeft,top:M.scrollTop,height:M.scrollHeight-Yh(this)-this.display.barHeight,width:M.scrollWidth-Yh(this)-this.display.barWidth,clientHeight:nt(this),clientWidth:Pv(this)}},scrollIntoView:qf(function(M,V){null==M?(M={from:this.doc.sel.primary().head,to:null},null==V&&(V=this.options.cursorScrollMargin)):"number"==typeof M?M={from:Ai(M,0),to:null}:null==M.from&&(M={from:M,to:null}),M.to||(M.to=M.from),M.margin=V||0,null!=M.from.line?function RD(p,_){G2(p),p.curOp.scrollToPos=_}(this,M):vO(this,M.from,M.to,M.margin)}),setSize:qf(function(M,V){var ve=this,Ie=function(rt){return"number"==typeof rt||/^\d+$/.test(String(rt))?rt+"px":rt};null!=M&&(this.display.wrapper.style.width=Ie(M)),null!=V&&(this.display.wrapper.style.height=Ie(V)),this.options.lineWrapping&&oO(this);var He=this.display.viewFrom;this.doc.iter(He,this.display.viewTo,function(rt){if(rt.widgets)for(var pt=0;pt<rt.widgets.length;pt++)if(rt.widgets[pt].noHScroll){M_(ve,He,"widget");break}++He}),this.curOp.forceUpdate=!0,Ia(this,"refresh",this)}),operation:function(M){return Qh(this,M)},startOperation:function(){return Ny(this)},endOperation:function(){return Uy(this)},refresh:qf(function(){var M=this.display.cachedTextHeight;Ch(this),this.curOp.forceUpdate=!0,W1(this),K1(this,this.doc.scrollLeft,this.doc.scrollTop),jE(this.display),(null==M||Math.abs(M-ob(this.display))>.5||this.options.lineWrapping)&&PE(this),Ia(this,"refresh",this)}),swapDoc:qf(function(M){var V=this.doc;return V.cm=null,this.state.selectingText&&this.state.selectingText(),AO(this,M),W1(this),this.display.input.reset(),K1(this,M.scrollLeft,M.scrollTop),this.curOp.forceScroll=!0,nd(this,"swapDoc",this,V),V}),phrase:function(M){var V=this.options.phrases;return V&&Object.prototype.hasOwnProperty.call(V,M)?V[M]:M},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Vl(p),p.registerHelper=function(M,V,ve){A.hasOwnProperty(M)||(A[M]=p[M]={_global:[]}),A[M][V]=ve},p.registerGlobalHelper=function(M,V,ve,Ie){p.registerHelper(M,V,Ie),A[M]._global.push({pred:ve,val:Ie})}}(Nu);var KT="iter insert remove copy getEditor constructor".split(" ");for(var lx in Eh.prototype)Eh.prototype.hasOwnProperty(lx)&&Li(KT,lx)<0&&(Nu.prototype[lx]=function(p){return function(){return p.apply(this.doc,arguments)}}(Eh.prototype[lx]));return Vl(Eh),Nu.inputStyles={textarea:Ed,contenteditable:Bc},Nu.defineMode=function(p){!Nu.defaults.mode&&"null"!=p&&(Nu.defaults.mode=p),ju.apply(this,arguments)},Nu.defineMIME=function zu(p,_){cu[p]=_},Nu.defineMode("null",function(){return{token:function(p){return p.skipToEnd()}}}),Nu.defineMIME("text/plain","null"),Nu.defineExtension=function(p,_){Nu.prototype[p]=_},Nu.defineDocExtension=function(p,_){Eh.prototype[p]=_},Nu.fromTextArea=function WT(p,_){if((_=_?Us(_):{}).value=p.value,!_.tabindex&&p.tabIndex&&(_.tabindex=p.tabIndex),!_.placeholder&&p.placeholder&&(_.placeholder=p.placeholder),null==_.autofocus){var A=Eo();_.autofocus=A==p||null!=p.getAttribute("autofocus")&&A==document.body}function M(){p.value=He.getValue()}var V;if(p.form&&(eo(p.form,"submit",M),!_.leaveSubmitMethodAlone)){var ve=p.form;V=ve.submit;try{var Ie=ve.submit=function(){M(),ve.submit=V,ve.submit(),ve.submit=Ie}}catch{}}_.finishInit=function(rt){rt.save=M,rt.getTextArea=function(){return p},rt.toTextArea=function(){rt.toTextArea=isNaN,M(),p.parentNode.removeChild(rt.getWrapperElement()),p.style.display="",p.form&&(Ma(p.form,"submit",M),!_.leaveSubmitMethodAlone&&"function"==typeof p.form.submit&&(p.form.submit=V))}},p.style.display="none";var He=Nu(function(rt){return p.parentNode.insertBefore(rt,p.nextSibling)},_);return He},function ZT(p){p.off=Ma,p.on=eo,p.wheelEventPixels=$D,p.Doc=Eh,p.splitLines=lu,p.countColumn=yo,p.findColumn=Pa,p.isWordChar=Or,p.Pass=ta,p.signal=Ia,p.Line=wp,p.changeEnd=L_,p.scrollbarModel=bO,p.Pos=Ai,p.cmpPos=Rs,p.modes=vm,p.mimeModes=cu,p.resolveMode=Hh,p.getMode=nc,p.modeExtensions=Hf,p.extendMode=Zs,p.copyState=Gp,p.startState=Gf,p.innerMode=Cd,p.commands=ow,p.keyMap=Mv,p.keyName=aD,p.isModifierKey=oD,p.lookupKey=hb,p.normalizeKeyMap=vT,p.StringStream=Cc,p.SharedTextMarker=tw,p.TextMarker=R_,p.LineWidget=ew,p.e_preventDefault=kl,p.e_stopPropagation=Vu,p.e_stop=Vt,p.addClass=_o,p.contains=xt,p.rmClass=Dn,p.keyNames=F_}(Nu),Nu.version="5.63.0",Nu}()},7389:(d,a,e)=>{!function(r){function o(ir){for(var Bt={},wr=0;wr<ir.length;++wr)Bt[ir[wr].toLowerCase()]=!0;return Bt}r.defineMode("css",function(ir,Bt){var wr=Bt.inline;Bt.propertyKeywords||(Bt=r.resolveMode("text/css"));var ps,Pa,sr=ir.indentUnit,gn=Bt.tokenHooks,xt=Bt.documentTypes||{},Eo=Bt.mediaTypes||{},_o=Bt.mediaFeatures||{},mi=Bt.mediaValueKeywords||{},Sa=Bt.propertyKeywords||{},Ha=Bt.nonStandardPropertyKeywords||{},Us=Bt.fontProperties||{},yo=Bt.counterDescriptors||{},Oo=Bt.colorKeywords||{},Li=Bt.valueKeywords||{},la=Bt.allowNested,ea=!0===Bt.supportsAtComponent,is=!1!==ir.highlightNonStandardPropertyKeywords;function wn(Cr,$n){return ps=$n,Cr}function Hi(Cr,$n){var Cn=Cr.next();if(gn[Cn]){var Qa=gn[Cn](Cr,$n);if(!1!==Qa)return Qa}return"@"==Cn?(Cr.eatWhile(/[\w\\\-]/),wn("def",Cr.current())):"="==Cn||("~"==Cn||"|"==Cn)&&Cr.eat("=")?wn(null,"compare"):'"'==Cn||"'"==Cn?($n.tokenize=Ji(Cn),$n.tokenize(Cr,$n)):"#"==Cn?(Cr.eatWhile(/[\w\\\-]/),wn("atom","hash")):"!"==Cn?(Cr.match(/^\s*\w*/),wn("keyword","important")):/\d/.test(Cn)||"."==Cn&&Cr.eat(/\d/)?(Cr.eatWhile(/[\w.%]/),wn("number","unit")):"-"!==Cn?/[,+>*\/]/.test(Cn)?wn(null,"select-op"):"."==Cn&&Cr.match(/^-?[_a-z][_a-z0-9-]*/i)?wn("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Cn)?wn(null,Cn):Cr.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(Cr.current())&&($n.tokenize=bs),wn("variable callee","variable")):/[\w\\\-]/.test(Cn)?(Cr.eatWhile(/[\w\\\-]/),wn("property","word")):wn(null,null):/[\d.]/.test(Cr.peek())?(Cr.eatWhile(/[\w.%]/),wn("number","unit")):Cr.match(/^-[\w\\\-]*/)?(Cr.eatWhile(/[\w\\\-]/),Cr.match(/^\s*:/,!1)?wn("variable-2","variable-definition"):wn("variable-2","variable")):Cr.match(/^\w+-/)?wn("meta","meta"):void 0}function Ji(Cr){return function($n,Cn){for(var Qs,Qa=!1;null!=(Qs=$n.next());){if(Qs==Cr&&!Qa){")"==Cr&&$n.backUp(1);break}Qa=!Qa&&"\\"==Qs}return(Qs==Cr||!Qa&&")"!=Cr)&&(Cn.tokenize=null),wn("string","string")}}function bs(Cr,$n){return Cr.next(),$n.tokenize=Cr.match(/^\s*[\"\')]/,!1)?null:Ji(")"),wn(null,"(")}function Xa(Cr,$n,Cn){this.type=Cr,this.indent=$n,this.prev=Cn}function Na(Cr,$n,Cn,Qa){return Cr.context=new Xa(Cn,$n.indentation()+(!1===Qa?0:sr),Cr.context),Cn}function it(Cr){return Cr.context.prev&&(Cr.context=Cr.context.prev),Cr.context.type}function Yt(Cr,$n,Cn){return ho[Cn.context.type](Cr,$n,Cn)}function Or(Cr,$n,Cn,Qa){for(var Qs=Qa||1;Qs>0;Qs--)Cn.context=Cn.context.prev;return Yt(Cr,$n,Cn)}function An(Cr){var $n=Cr.current().toLowerCase();Pa=Li.hasOwnProperty($n)?"atom":Oo.hasOwnProperty($n)?"keyword":"variable"}var ho={top:function(Cr,$n,Cn){if("{"==Cr)return Na(Cn,$n,"block");if("}"==Cr&&Cn.context.prev)return it(Cn);if(ea&&/@component/i.test(Cr))return Na(Cn,$n,"atComponentBlock");if(/^@(-moz-)?document$/i.test(Cr))return Na(Cn,$n,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(Cr))return Na(Cn,$n,"atBlock");if(/^@(font-face|counter-style)/i.test(Cr))return Cn.stateArg=Cr,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(Cr))return"keyframes";if(Cr&&"@"==Cr.charAt(0))return Na(Cn,$n,"at");if("hash"==Cr)Pa="builtin";else if("word"==Cr)Pa="tag";else{if("variable-definition"==Cr)return"maybeprop";if("interpolation"==Cr)return Na(Cn,$n,"interpolation");if(":"==Cr)return"pseudo";if(la&&"("==Cr)return Na(Cn,$n,"parens")}return Cn.context.type},block:function(Cr,$n,Cn){if("word"==Cr){var Qa=$n.current().toLowerCase();return Sa.hasOwnProperty(Qa)?(Pa="property","maybeprop"):Ha.hasOwnProperty(Qa)?(Pa=is?"string-2":"property","maybeprop"):la?(Pa=$n.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Pa+=" error","maybeprop")}return"meta"==Cr?"block":la||"hash"!=Cr&&"qualifier"!=Cr?ho.top(Cr,$n,Cn):(Pa="error","block")},maybeprop:function(Cr,$n,Cn){return":"==Cr?Na(Cn,$n,"prop"):Yt(Cr,$n,Cn)},prop:function(Cr,$n,Cn){if(";"==Cr)return it(Cn);if("{"==Cr&&la)return Na(Cn,$n,"propBlock");if("}"==Cr||"{"==Cr)return Or(Cr,$n,Cn);if("("==Cr)return Na(Cn,$n,"parens");if("hash"!=Cr||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test($n.current())){if("word"==Cr)An($n);else if("interpolation"==Cr)return Na(Cn,$n,"interpolation")}else Pa+=" error";return"prop"},propBlock:function(Cr,$n,Cn){return"}"==Cr?it(Cn):"word"==Cr?(Pa="property","maybeprop"):Cn.context.type},parens:function(Cr,$n,Cn){return"{"==Cr||"}"==Cr?Or(Cr,$n,Cn):")"==Cr?it(Cn):"("==Cr?Na(Cn,$n,"parens"):"interpolation"==Cr?Na(Cn,$n,"interpolation"):("word"==Cr&&An($n),"parens")},pseudo:function(Cr,$n,Cn){return"meta"==Cr?"pseudo":"word"==Cr?(Pa="variable-3",Cn.context.type):Yt(Cr,$n,Cn)},documentTypes:function(Cr,$n,Cn){return"word"==Cr&&xt.hasOwnProperty($n.current())?(Pa="tag",Cn.context.type):ho.atBlock(Cr,$n,Cn)},atBlock:function(Cr,$n,Cn){if("("==Cr)return Na(Cn,$n,"atBlock_parens");if("}"==Cr||";"==Cr)return Or(Cr,$n,Cn);if("{"==Cr)return it(Cn)&&Na(Cn,$n,la?"block":"top");if("interpolation"==Cr)return Na(Cn,$n,"interpolation");if("word"==Cr){var Qa=$n.current().toLowerCase();Pa="only"==Qa||"not"==Qa||"and"==Qa||"or"==Qa?"keyword":Eo.hasOwnProperty(Qa)?"attribute":_o.hasOwnProperty(Qa)?"property":mi.hasOwnProperty(Qa)?"keyword":Sa.hasOwnProperty(Qa)?"property":Ha.hasOwnProperty(Qa)?is?"string-2":"property":Li.hasOwnProperty(Qa)?"atom":Oo.hasOwnProperty(Qa)?"keyword":"error"}return Cn.context.type},atComponentBlock:function(Cr,$n,Cn){return"}"==Cr?Or(Cr,$n,Cn):"{"==Cr?it(Cn)&&Na(Cn,$n,la?"block":"top",!1):("word"==Cr&&(Pa="error"),Cn.context.type)},atBlock_parens:function(Cr,$n,Cn){return")"==Cr?it(Cn):"{"==Cr||"}"==Cr?Or(Cr,$n,Cn,2):ho.atBlock(Cr,$n,Cn)},restricted_atBlock_before:function(Cr,$n,Cn){return"{"==Cr?Na(Cn,$n,"restricted_atBlock"):"word"==Cr&&"@counter-style"==Cn.stateArg?(Pa="variable","restricted_atBlock_before"):Yt(Cr,$n,Cn)},restricted_atBlock:function(Cr,$n,Cn){return"}"==Cr?(Cn.stateArg=null,it(Cn)):"word"==Cr?(Pa="@font-face"==Cn.stateArg&&!Us.hasOwnProperty($n.current().toLowerCase())||"@counter-style"==Cn.stateArg&&!yo.hasOwnProperty($n.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(Cr,$n,Cn){return"word"==Cr?(Pa="variable","keyframes"):"{"==Cr?Na(Cn,$n,"top"):Yt(Cr,$n,Cn)},at:function(Cr,$n,Cn){return";"==Cr?it(Cn):"{"==Cr||"}"==Cr?Or(Cr,$n,Cn):("word"==Cr?Pa="tag":"hash"==Cr&&(Pa="builtin"),"at")},interpolation:function(Cr,$n,Cn){return"}"==Cr?it(Cn):"{"==Cr||";"==Cr?Or(Cr,$n,Cn):("word"==Cr?Pa="variable":"variable"!=Cr&&"("!=Cr&&")"!=Cr&&(Pa="error"),"interpolation")}};return{startState:function(Cr){return{tokenize:null,state:wr?"block":"top",stateArg:null,context:new Xa(wr?"block":"top",Cr||0,null)}},token:function(Cr,$n){if(!$n.tokenize&&Cr.eatSpace())return null;var Cn=($n.tokenize||Hi)(Cr,$n);return Cn&&"object"==typeof Cn&&(ps=Cn[1],Cn=Cn[0]),Pa=Cn,"comment"!=ps&&($n.state=ho[$n.state](ps,Cr,$n)),Pa},indent:function(Cr,$n){var Cn=Cr.context,Qa=$n&&$n.charAt(0),Qs=Cn.indent;return"prop"==Cn.type&&("}"==Qa||")"==Qa)&&(Cn=Cn.prev),Cn.prev&&("}"!=Qa||"block"!=Cn.type&&"top"!=Cn.type&&"interpolation"!=Cn.type&&"restricted_atBlock"!=Cn.type?(")"==Qa&&("parens"==Cn.type||"atBlock_parens"==Cn.type)||"{"==Qa&&("at"==Cn.type||"atBlock"==Cn.type))&&(Qs=Math.max(0,Cn.indent-sr)):Qs=(Cn=Cn.prev).indent),Qs},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:Bt.lineComment,fold:"brace"}});var c=["domain","regexp","url","url-prefix"],g=o(c),b=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],w=o(b),C=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme"],B=o(C),ne=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light"],ae=o(ne),be=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],Se=o(be),We=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],lt=o(We),ur=o(["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),ar=o(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),Fn=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],fo=o(Fn),ti=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],jn=o(ti),Nr=c.concat(b).concat(C).concat(ne).concat(be).concat(We).concat(Fn).concat(ti);function Dn(ir,Bt){for(var sr,wr=!1;null!=(sr=ir.next());){if(wr&&"/"==sr){Bt.tokenize=null;break}wr="*"==sr}return["comment","comment"]}r.registerHelper("hintWords","css",Nr),r.defineMIME("text/css",{documentTypes:g,mediaTypes:w,mediaFeatures:B,mediaValueKeywords:ae,propertyKeywords:Se,nonStandardPropertyKeywords:lt,fontProperties:ur,counterDescriptors:ar,colorKeywords:fo,valueKeywords:jn,tokenHooks:{"/":function(ir,Bt){return!!ir.eat("*")&&(Bt.tokenize=Dn,Dn(ir,Bt))}},name:"css"}),r.defineMIME("text/x-scss",{mediaTypes:w,mediaFeatures:B,mediaValueKeywords:ae,propertyKeywords:Se,nonStandardPropertyKeywords:lt,colorKeywords:fo,valueKeywords:jn,fontProperties:ur,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(ir,Bt){return ir.eat("/")?(ir.skipToEnd(),["comment","comment"]):ir.eat("*")?(Bt.tokenize=Dn,Dn(ir,Bt)):["operator","operator"]},":":function(ir){return!!ir.match(/^\s*\{/,!1)&&[null,null]},$:function(ir){return ir.match(/^[\w-]+/),ir.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(ir){return!!ir.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),r.defineMIME("text/x-less",{mediaTypes:w,mediaFeatures:B,mediaValueKeywords:ae,propertyKeywords:Se,nonStandardPropertyKeywords:lt,colorKeywords:fo,valueKeywords:jn,fontProperties:ur,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(ir,Bt){return ir.eat("/")?(ir.skipToEnd(),["comment","comment"]):ir.eat("*")?(Bt.tokenize=Dn,Dn(ir,Bt)):["operator","operator"]},"@":function(ir){return ir.eat("{")?[null,"interpolation"]:!ir.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(ir.eatWhile(/[\w\\\-]/),ir.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),r.defineMIME("text/x-gss",{documentTypes:g,mediaTypes:w,mediaFeatures:B,propertyKeywords:Se,nonStandardPropertyKeywords:lt,fontProperties:ur,counterDescriptors:ar,colorKeywords:fo,valueKeywords:jn,supportsAtComponent:!0,tokenHooks:{"/":function(ir,Bt){return!!ir.eat("*")&&(Bt.tokenize=Dn,Dn(ir,Bt))}},name:"css",helperType:"gss"})}(e(4408))},8253:(d,a,e)=>{!function(r){var o={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var g={};function w(ae,be){var Se=ae.match(function b(ae){return g[ae]||(g[ae]=new RegExp("\\s+"+ae+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(be));return Se?/^\s*(.*?)\s*$/.exec(Se[2])[1]:""}function C(ae,be){return new RegExp((be?"^":"")+"</s*"+ae+"s*>","i")}function B(ae,be){for(var Se in ae)for(var We=be[Se]||(be[Se]=[]),lt=ae[Se],Ot=lt.length-1;Ot>=0;Ot--)We.unshift(lt[Ot])}r.defineMode("htmlmixed",function(ae,be){var Se=r.getMode(ae,{name:"xml",htmlMode:!0,multilineTagIndentFactor:be.multilineTagIndentFactor,multilineTagIndentPastTag:be.multilineTagIndentPastTag,allowMissingTagName:be.allowMissingTagName}),We={},lt=be&&be.tags,Ot=be&&be.scriptTypes;if(B(o,We),lt&&B(lt,We),Ot)for(var ur=Ot.length-1;ur>=0;ur--)We.script.unshift(["type",Ot[ur].matches,Ot[ur].mode]);function Gt(ar,Fn){var jn,fo=Se.token(ar,Fn.htmlState),ti=/\btag\b/.test(fo);if(ti&&!/[<>\s\/]/.test(ar.current())&&(jn=Fn.htmlState.tagName&&Fn.htmlState.tagName.toLowerCase())&&We.hasOwnProperty(jn))Fn.inTag=jn+" ";else if(Fn.inTag&&ti&&/>$/.test(ar.current())){var Nr=/^([\S]+) (.*)/.exec(Fn.inTag);Fn.inTag=null;var Dn=">"==ar.current()&&function ne(ae,be){for(var Se=0;Se<ae.length;Se++){var We=ae[Se];if(!We[0]||We[1].test(w(be,We[0])))return We[2]}}(We[Nr[1]],Nr[2]),ir=r.getMode(ae,Dn),Bt=C(Nr[1],!0),wr=C(Nr[1],!1);Fn.token=function(sr,gn){return sr.match(Bt,!1)?(gn.token=Gt,gn.localState=gn.localMode=null,null):function c(ae,be,Se){var We=ae.current(),lt=We.search(be);return lt>-1?ae.backUp(We.length-lt):We.match(/<\/?$/)&&(ae.backUp(We.length),ae.match(be,!1)||ae.match(We)),Se}(sr,wr,gn.localMode.token(sr,gn.localState))},Fn.localMode=ir,Fn.localState=r.startState(ir,Se.indent(Fn.htmlState,"",""))}else Fn.inTag&&(Fn.inTag+=ar.current(),ar.eol()&&(Fn.inTag+=" "));return fo}return{startState:function(){return{token:Gt,inTag:null,localMode:null,localState:null,htmlState:r.startState(Se)}},copyState:function(ar){var Fn;return ar.localState&&(Fn=r.copyState(ar.localMode,ar.localState)),{token:ar.token,inTag:ar.inTag,localMode:ar.localMode,localState:Fn,htmlState:r.copyState(Se,ar.htmlState)}},token:function(ar,Fn){return Fn.token(ar,Fn)},indent:function(ar,Fn,fo){return!ar.localMode||/^\s*<\//.test(Fn)?Se.indent(ar.htmlState,Fn,fo):ar.localMode.indent?ar.localMode.indent(ar.localState,Fn,fo):r.Pass},innerMode:function(ar){return{state:ar.localState||ar.htmlState,mode:ar.localMode||Se}}}},"xml","javascript","css"),r.defineMIME("text/html","htmlmixed")}(e(4408),e(9701),e(6061),e(7389))},6061:(d,a,e)=>{var r;(r=e(4408)).defineMode("javascript",function(o,c){var Ot,ur,g=o.indentUnit,b=c.statementIndent,w=c.jsonld,C=c.json||w,B=!1!==c.trackScope,ne=c.typescript,ae=c.wordCharacters||/[\w$\xa1-\uffff]/,be=function(){function At(Mc){return{type:Mc,style:"keyword"}}var Zr=At("keyword a"),ii=At("keyword b"),Ii=At("keyword c"),Zi=At("keyword d"),fl=At("operator"),jl={type:"atom",style:"atom"};return{if:At("if"),while:Zr,with:Zr,else:ii,do:ii,try:ii,finally:ii,return:Zi,break:Zi,continue:Zi,new:At("new"),delete:Ii,void:Ii,throw:Ii,debugger:At("debugger"),var:At("var"),const:At("var"),let:At("var"),function:At("function"),catch:At("catch"),for:At("for"),switch:At("switch"),case:At("case"),default:At("default"),in:fl,typeof:fl,instanceof:fl,true:jl,false:jl,null:jl,undefined:jl,NaN:jl,Infinity:jl,this:At("this"),class:At("class"),super:At("atom"),yield:Ii,export:At("export"),import:At("import"),extends:Ii,await:Ii}}(),Se=/[+\-*&%=<>!?|~^@]/,We=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function Gt(At,Zr,ii){return Ot=At,ur=ii,Zr}function ar(At,Zr){var ii=At.next();if('"'==ii||"'"==ii)return Zr.tokenize=function Fn(At){return function(Zr,ii){var Zi,Ii=!1;if(w&&"@"==Zr.peek()&&Zr.match(We))return ii.tokenize=ar,Gt("jsonld-keyword","meta");for(;null!=(Zi=Zr.next())&&(Zi!=At||Ii);)Ii=!Ii&&"\\"==Zi;return Ii||(ii.tokenize=ar),Gt("string","string")}}(ii),Zr.tokenize(At,Zr);if("."==ii&&At.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return Gt("number","number");if("."==ii&&At.match(".."))return Gt("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ii))return Gt(ii);if("="==ii&&At.eat(">"))return Gt("=>","operator");if("0"==ii&&At.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return Gt("number","number");if(/\d/.test(ii))return At.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),Gt("number","number");if("/"==ii)return At.eat("*")?(Zr.tokenize=fo,fo(At,Zr)):At.eat("/")?(At.skipToEnd(),Gt("comment","comment")):wh(At,Zr,1)?(function lt(At){for(var ii,Zr=!1,Ii=!1;null!=(ii=At.next());){if(!Zr){if("/"==ii&&!Ii)return;"["==ii?Ii=!0:Ii&&"]"==ii&&(Ii=!1)}Zr=!Zr&&"\\"==ii}}(At),At.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),Gt("regexp","string-2")):(At.eat("="),Gt("operator","operator",At.current()));if("`"==ii)return Zr.tokenize=ti,ti(At,Zr);if("#"==ii&&"!"==At.peek())return At.skipToEnd(),Gt("meta","meta");if("#"==ii&&At.eatWhile(ae))return Gt("variable","property");if("<"==ii&&At.match("!--")||"-"==ii&&At.match("->")&&!/\S/.test(At.string.slice(0,At.start)))return At.skipToEnd(),Gt("comment","comment");if(Se.test(ii))return(">"!=ii||!Zr.lexical||">"!=Zr.lexical.type)&&(At.eat("=")?("!"==ii||"="==ii)&&At.eat("="):/[<>*+\-|&?]/.test(ii)&&(At.eat(ii),">"==ii&&At.eat(ii))),"?"==ii&&At.eat(".")?Gt("."):Gt("operator","operator",At.current());if(ae.test(ii)){At.eatWhile(ae);var Ii=At.current();if("."!=Zr.lastType){if(be.propertyIsEnumerable(Ii)){var Zi=be[Ii];return Gt(Zi.type,Zi.style,Ii)}if("async"==Ii&&At.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return Gt("async","keyword",Ii)}return Gt("variable","variable",Ii)}}function fo(At,Zr){for(var Ii,ii=!1;Ii=At.next();){if("/"==Ii&&ii){Zr.tokenize=ar;break}ii="*"==Ii}return Gt("comment","comment")}function ti(At,Zr){for(var Ii,ii=!1;null!=(Ii=At.next());){if(!ii&&("`"==Ii||"$"==Ii&&At.eat("{"))){Zr.tokenize=ar;break}ii=!ii&&"\\"==Ii}return Gt("quasi","string-2",At.current())}var jn="([{}])";function Nr(At,Zr){Zr.fatArrowAt&&(Zr.fatArrowAt=null);var ii=At.string.indexOf("=>",At.start);if(!(ii<0)){if(ne){var Ii=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(At.string.slice(At.start,ii));Ii&&(ii=Ii.index)}for(var Zi=0,fl=!1,jl=ii-1;jl>=0;--jl){var Mc=At.string.charAt(jl),Uc=jn.indexOf(Mc);if(Uc>=0&&Uc<3){if(!Zi){++jl;break}if(0==--Zi){"("==Mc&&(fl=!0);break}}else if(Uc>=3&&Uc<6)++Zi;else if(ae.test(Mc))fl=!0;else if(/["'\/`]/.test(Mc))for(;;--jl){if(0==jl)return;if(At.string.charAt(jl-1)==Mc&&"\\"!=At.string.charAt(jl-2)){jl--;break}}else if(fl&&!Zi){++jl;break}}fl&&!Zi&&(Zr.fatArrowAt=jl)}}var Dn={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ir(At,Zr,ii,Ii,Zi,fl){this.indented=At,this.column=Zr,this.type=ii,this.prev=Zi,this.info=fl,null!=Ii&&(this.align=Ii)}function Bt(At,Zr){if(!B)return!1;for(var ii=At.localVars;ii;ii=ii.next)if(ii.name==Zr)return!0;for(var Ii=At.context;Ii;Ii=Ii.prev)for(ii=Ii.vars;ii;ii=ii.next)if(ii.name==Zr)return!0}function wr(At,Zr,ii,Ii,Zi){var fl=At.cc;for(sr.state=At,sr.stream=Zi,sr.marked=null,sr.cc=fl,sr.style=Zr,At.lexical.hasOwnProperty("align")||(At.lexical.align=!0);;)if((fl.length?fl.pop():C?wn:ps)(ii,Ii)){for(;fl.length&&fl[fl.length-1].lex;)fl.pop()();return sr.marked?sr.marked:"variable"==ii&&Bt(At,Ii)?"variable-2":Zr}}var sr={state:null,column:null,marked:null,cc:null};function gn(){for(var At=arguments.length-1;At>=0;At--)sr.cc.push(arguments[At])}function xt(){return gn.apply(null,arguments),!0}function Eo(At,Zr){for(var ii=Zr;ii;ii=ii.next)if(ii.name==At)return!0;return!1}function _o(At){var Zr=sr.state;if(sr.marked="def",B){if(Zr.context)if("var"==Zr.lexical.info&&Zr.context&&Zr.context.block){var ii=mi(At,Zr.context);if(null!=ii)return void(Zr.context=ii)}else if(!Eo(At,Zr.localVars))return void(Zr.localVars=new Us(At,Zr.localVars));c.globalVars&&!Eo(At,Zr.globalVars)&&(Zr.globalVars=new Us(At,Zr.globalVars))}}function mi(At,Zr){if(Zr){if(Zr.block){var ii=mi(At,Zr.prev);return ii?ii==Zr.prev?Zr:new Ha(ii,Zr.vars,!0):null}return Eo(At,Zr.vars)?Zr:new Ha(Zr.prev,new Us(At,Zr.vars),!1)}return null}function Sa(At){return"public"==At||"private"==At||"protected"==At||"abstract"==At||"readonly"==At}function Ha(At,Zr,ii){this.prev=At,this.vars=Zr,this.block=ii}function Us(At,Zr){this.name=At,this.next=Zr}var yo=new Us("this",new Us("arguments",null));function Oo(){sr.state.context=new Ha(sr.state.context,sr.state.localVars,!1),sr.state.localVars=yo}function Li(){sr.state.context=new Ha(sr.state.context,sr.state.localVars,!0),sr.state.localVars=null}function la(){sr.state.localVars=sr.state.context.vars,sr.state.context=sr.state.context.prev}function ta(At,Zr){var ii=function(){var Ii=sr.state,Zi=Ii.indented;if("stat"==Ii.lexical.type)Zi=Ii.lexical.indented;else for(var fl=Ii.lexical;fl&&")"==fl.type&&fl.align;fl=fl.prev)Zi=fl.indented;Ii.lexical=new ir(Zi,sr.stream.column(),At,null,Ii.lexical,Zr)};return ii.lex=!0,ii}function ea(){var At=sr.state;At.lexical.prev&&(")"==At.lexical.type&&(At.indented=At.lexical.indented),At.lexical=At.lexical.prev)}function is(At){return function Zr(ii){return ii==At?xt():";"==At||"}"==ii||")"==ii||"]"==ii?gn():xt(Zr)}}function ps(At,Zr){return"var"==At?xt(ta("vardef",Zr),ms,is(";"),ea):"keyword a"==At?xt(ta("form"),Ji,ps,ea):"keyword b"==At?xt(ta("form"),ps,ea):"keyword d"==At?sr.stream.match(/^\s*$/,!1)?xt():xt(ta("stat"),Xa,is(";"),ea):"debugger"==At?xt(is(";")):"{"==At?xt(ta("}"),Li,eo,ea,la):";"==At?xt():"if"==At?("else"==sr.state.lexical.info&&sr.state.cc[sr.state.cc.length-1]==ea&&sr.state.cc.pop()(),xt(ta("form"),Ji,ps,ea,sp)):"function"==At?xt(ju):"for"==At?xt(ta("form"),Li,Fu,ps,la,ea):"class"==At||ne&&"interface"==Zr?(sr.marked="keyword",xt(ta("form","class"==At?At:Zr),Zs,ea)):"variable"==At?ne&&"declare"==Zr?(sr.marked="keyword",xt(ps)):ne&&("module"==Zr||"enum"==Zr||"type"==Zr)&&sr.stream.match(/^\s*\w/,!1)?(sr.marked="keyword","enum"==Zr?xt(ym):"type"==Zr?xt(Hh,is("operator"),fs,is(";")):xt(ta("form"),$s,is("{"),ta("}"),eo,ea,ea)):ne&&"namespace"==Zr?(sr.marked="keyword",xt(ta("form"),wn,ps,ea)):ne&&"abstract"==Zr?(sr.marked="keyword",xt(ps)):xt(ta("stat"),Qa):"switch"==At?xt(ta("form"),Ji,is("{"),ta("}","switch"),Li,eo,ea,ea,la):"case"==At?xt(wn,is(":")):"default"==At?xt(is(":")):"catch"==At?xt(ta("form"),Oo,Pa,ps,ea,la):"export"==At?xt(ta("stat"),Cc,ea):"import"==At?xt(ta("stat"),lp,ea):"async"==At?xt(ps):"@"==Zr?xt(wn,ps):gn(ta("stat"),wn,is(";"),ea)}function Pa(At){if("("==At)return xt(nc,is(")"))}function wn(At,Zr){return bs(At,Zr,!1)}function Hi(At,Zr){return bs(At,Zr,!0)}function Ji(At){return"("!=At?gn():xt(ta(")"),Xa,is(")"),ea)}function bs(At,Zr,ii){if(sr.state.fatArrowAt==sr.stream.start){var Ii=ii?ho:An;if("("==At)return xt(Oo,ta(")"),Mt(nc,")"),ea,is("=>"),Ii,la);if("variable"==At)return gn(Oo,$s,is("=>"),Ii,la)}var Zi=ii?it:Na;return Dn.hasOwnProperty(At)?xt(Zi):"function"==At?xt(ju,Zi):"class"==At||ne&&"interface"==Zr?(sr.marked="keyword",xt(ta("form"),Hf,ea)):"keyword c"==At||"async"==At?xt(ii?Hi:wn):"("==At?xt(ta(")"),Xa,is(")"),ea,Zi):"operator"==At||"spread"==At?xt(ii?Hi:wn):"["==At?xt(ta("]"),_m,ea,Zi):"{"==At?si(Ns,"}",null,Zi):"quasi"==At?gn(Yt,Zi):"new"==At?xt(function Cr(At){return function(Zr){return"."==Zr?xt(At?Cn:$n):"variable"==Zr&&ne?xt(In,At?it:Na):gn(At?Hi:wn)}}(ii)):xt()}function Xa(At){return At.match(/[;\}\)\],]/)?gn():gn(wn)}function Na(At,Zr){return","==At?xt(Xa):it(At,Zr,!1)}function it(At,Zr,ii){var Ii=0==ii?Na:it,Zi=0==ii?wn:Hi;if("=>"==At)return xt(Oo,ii?ho:An,la);if("operator"==At)return/\+\+|--/.test(Zr)||ne&&"!"==Zr?xt(Ii):ne&&"<"==Zr&&sr.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?xt(ta(">"),Mt(fs,">"),ea,Ii):"?"==Zr?xt(wn,is(":"),Zi):xt(Zi);if("quasi"==At)return gn(Yt,Ii);if(";"!=At){if("("==At)return si(Hi,")","call",Ii);if("."==At)return xt(Qs,Ii);if("["==At)return xt(ta("]"),Xa,is("]"),ea,Ii);if(ne&&"as"==Zr)return sr.marked="keyword",xt(fs,Ii);if("regexp"==At)return sr.state.lastType=sr.marked="operator",sr.stream.backUp(sr.stream.pos-sr.stream.start-1),xt(Zi)}}function Yt(At,Zr){return"quasi"!=At?gn():"${"!=Zr.slice(Zr.length-2)?xt(Yt):xt(Xa,Or)}function Or(At){if("}"==At)return sr.marked="string-2",sr.state.tokenize=ti,xt(Yt)}function An(At){return Nr(sr.stream,sr.state),gn("{"==At?ps:wn)}function ho(At){return Nr(sr.stream,sr.state),gn("{"==At?ps:Hi)}function $n(At,Zr){if("target"==Zr)return sr.marked="keyword",xt(Na)}function Cn(At,Zr){if("target"==Zr)return sr.marked="keyword",xt(it)}function Qa(At){return":"==At?xt(ea,ps):gn(Na,is(";"),ea)}function Qs(At){if("variable"==At)return sr.marked="property",xt()}function Ns(At,Zr){return"async"==At?(sr.marked="property",xt(Ns)):"variable"==At||"keyword"==sr.style?(sr.marked="property","get"==Zr||"set"==Zr?xt(er):(ne&&sr.state.fatArrowAt==sr.stream.start&&(ii=sr.stream.match(/^\s*:\s*/,!1))&&(sr.state.fatArrowAt=sr.stream.pos+ii[0].length),xt(un))):"number"==At||"string"==At?(sr.marked=w?"property":sr.style+" property",xt(un)):"jsonld-keyword"==At?xt(un):ne&&Sa(Zr)?(sr.marked="keyword",xt(Ns)):"["==At?xt(wn,Si,is("]"),un):"spread"==At?xt(Hi,un):"*"==Zr?(sr.marked="keyword",xt(Ns)):":"==At?gn(un):void 0;var ii}function er(At){return"variable"!=At?gn(un):(sr.marked="property",xt(ju))}function un(At){return":"==At?xt(Hi):"("==At?gn(ju):void 0}function Mt(At,Zr,ii){function Ii(Zi,fl){if(ii?ii.indexOf(Zi)>-1:","==Zi){var jl=sr.state.lexical;return"call"==jl.info&&(jl.pos=(jl.pos||0)+1),xt(function(Mc,Uc){return Mc==Zr||Uc==Zr?gn():gn(At)},Ii)}return Zi==Zr||fl==Zr?xt():ii&&ii.indexOf(";")>-1?gn(At):xt(is(Zr))}return function(Zi,fl){return Zi==Zr||fl==Zr?xt():gn(At,Ii)}}function si(At,Zr,ii){for(var Ii=3;Ii<arguments.length;Ii++)sr.cc.push(arguments[Ii]);return xt(ta(Zr,ii),Mt(At,Zr),ea)}function eo(At){return"}"==At?xt():gn(ps,eo)}function Si(At,Zr){if(ne){if(":"==At)return xt(fs);if("?"==Zr)return xt(Si)}}function Ma(At,Zr){if(ne&&(":"==At||"in"==Zr))return xt(fs)}function Ia(At){if(ne&&":"==At)return sr.stream.match(/^\s*\w+\s+is\b/,!1)?xt(wn,ca,fs):xt(fs)}function ca(At,Zr){if("is"==Zr)return sr.marked="keyword",xt()}function fs(At,Zr){return"keyof"==Zr||"typeof"==Zr||"infer"==Zr||"readonly"==Zr?(sr.marked="keyword",xt("typeof"==Zr?Hi:fs)):"variable"==At||"void"==Zr?(sr.marked="type",xt($r)):"|"==Zr||"&"==Zr?xt(fs):"string"==At||"number"==At||"atom"==At?xt($r):"["==At?xt(ta("]"),Mt(fs,"]",","),ea,$r):"{"==At?xt(ta("}"),Vl,ea,$r):"("==At?xt(Mt(Vt,")"),bl,$r):"<"==At?xt(Mt(fs,">"),fs):"quasi"==At?gn(Vu,$r):void 0}function bl(At){if("=>"==At)return xt(fs)}function Vl(At){return At.match(/[\}\)\]]/)?xt():","==At||";"==At?xt(Vl):gn(kl,Vl)}function kl(At,Zr){return"variable"==At||"keyword"==sr.style?(sr.marked="property",xt(kl)):"?"==Zr||"number"==At||"string"==At?xt(kl):":"==At?xt(fs):"["==At?xt(is("variable"),Ma,is("]"),kl):"("==At?gn(zu,kl):At.match(/[;\}\)\],]/)?void 0:xt()}function Vu(At,Zr){return"quasi"!=At?gn():"${"!=Zr.slice(Zr.length-2)?xt(Vu):xt(fs,ap)}function ap(At){if("}"==At)return sr.marked="string-2",sr.state.tokenize=ti,xt(Vu)}function Vt(At,Zr){return"variable"==At&&sr.stream.match(/^\s*[?:]/,!1)||"?"==Zr?xt(Vt):":"==At?xt(fs):"spread"==At?xt(Vt):gn(fs)}function $r(At,Zr){return"<"==Zr?xt(ta(">"),Mt(fs,">"),ea,$r):"|"==Zr||"."==At||"&"==Zr?xt(fs):"["==At?xt(fs,is("]"),$r):"extends"==Zr||"implements"==Zr?(sr.marked="keyword",xt(fs)):"?"==Zr?xt(fs,is(":"),fs):void 0}function In(At,Zr){if("<"==Zr)return xt(ta(">"),Mt(fs,">"),ea,$r)}function fi(){return gn(fs,pa)}function pa(At,Zr){if("="==Zr)return xt(fs)}function ms(At,Zr){return"enum"==Zr?(sr.marked="keyword",xt(ym)):gn($s,Si,Ru,zh)}function $s(At,Zr){return ne&&Sa(Zr)?(sr.marked="keyword",xt($s)):"variable"==At?(_o(Zr),xt()):"spread"==At?xt($s):"["==At?si(lu,"]"):"{"==At?si(Ud,"}"):void 0}function Ud(At,Zr){return"variable"!=At||sr.stream.match(/^\s*:/,!1)?("variable"==At&&(sr.marked="property"),"spread"==At?xt($s):"}"==At?gn():"["==At?xt(wn,is("]"),is(":"),Ud):xt(is(":"),$s,Ru)):(_o(Zr),xt(Ru))}function lu(){return gn($s,Ru)}function Ru(At,Zr){if("="==Zr)return xt(Hi)}function zh(At){if(","==At)return xt(ms)}function sp(At,Zr){if("keyword b"==At&&"else"==Zr)return xt(ta("form","else"),ps,ea)}function Fu(At,Zr){return"await"==Zr?xt(Fu):"("==At?xt(ta(")"),vm,ea):void 0}function vm(At){return"var"==At?xt(ms,cu):"variable"==At?xt(cu):gn(cu)}function cu(At,Zr){return")"==At?xt():";"==At?xt(cu):"in"==Zr||"of"==Zr?(sr.marked="keyword",xt(wn,cu)):gn(wn,cu)}function ju(At,Zr){return"*"==Zr?(sr.marked="keyword",xt(ju)):"variable"==At?(_o(Zr),xt(ju)):"("==At?xt(Oo,ta(")"),Mt(nc,")"),ea,Ia,ps,la):ne&&"<"==Zr?xt(ta(">"),Mt(fi,">"),ea,ju):void 0}function zu(At,Zr){return"*"==Zr?(sr.marked="keyword",xt(zu)):"variable"==At?(_o(Zr),xt(zu)):"("==At?xt(Oo,ta(")"),Mt(nc,")"),ea,Ia,la):ne&&"<"==Zr?xt(ta(">"),Mt(fi,">"),ea,zu):void 0}function Hh(At,Zr){return"keyword"==At||"variable"==At?(sr.marked="type",xt(Hh)):"<"==Zr?xt(ta(">"),Mt(fi,">"),ea):void 0}function nc(At,Zr){return"@"==Zr&&xt(wn,nc),"spread"==At?xt(nc):ne&&Sa(Zr)?(sr.marked="keyword",xt(nc)):ne&&"this"==At?xt(Si,Ru):gn($s,Si,Ru)}function Hf(At,Zr){return"variable"==At?Zs(At,Zr):Gp(At,Zr)}function Zs(At,Zr){if("variable"==At)return _o(Zr),xt(Gp)}function Gp(At,Zr){return"<"==Zr?xt(ta(">"),Mt(fi,">"),ea,Gp):"extends"==Zr||"implements"==Zr||ne&&","==At?("implements"==Zr&&(sr.marked="keyword"),xt(ne?fs:wn,Gp)):"{"==At?xt(ta("}"),Cd,ea):void 0}function Cd(At,Zr){return"async"==At||"variable"==At&&("static"==Zr||"get"==Zr||"set"==Zr||ne&&Sa(Zr))&&sr.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(sr.marked="keyword",xt(Cd)):"variable"==At||"keyword"==sr.style?(sr.marked="property",xt(Gf,Cd)):"number"==At||"string"==At?xt(Gf,Cd):"["==At?xt(wn,Si,is("]"),Gf,Cd):"*"==Zr?(sr.marked="keyword",xt(Cd)):ne&&"("==At?gn(zu,Cd):";"==At||","==At?xt(Cd):"}"==At?xt():"@"==Zr?xt(wn,Cd):void 0}function Gf(At,Zr){if("!"==Zr||"?"==Zr)return xt(Gf);if(":"==At)return xt(fs,Ru);if("="==Zr)return xt(Hi);var ii=sr.state.lexical.prev;return gn(ii&&"interface"==ii.info?zu:ju)}function Cc(At,Zr){return"*"==Zr?(sr.marked="keyword",xt(Jc,is(";"))):"default"==Zr?(sr.marked="keyword",xt(wn,is(";"))):"{"==At?xt(Mt(Ua,"}"),Jc,is(";")):gn(ps)}function Ua(At,Zr){return"as"==Zr?(sr.marked="keyword",xt(is("variable"))):"variable"==At?gn(Hi,Ua):void 0}function lp(At){return"string"==At?xt():"("==At?gn(wn):"."==At?gn(Na):gn(_f,Bd,Jc)}function _f(At,Zr){return"{"==At?si(_f,"}"):("variable"==At&&_o(Zr),"*"==Zr&&(sr.marked="keyword"),xt(rl))}function Bd(At){if(","==At)return xt(_f,Bd)}function rl(At,Zr){if("as"==Zr)return sr.marked="keyword",xt(_f)}function Jc(At,Zr){if("from"==Zr)return sr.marked="keyword",xt(wn)}function _m(At){return"]"==At?xt():gn(Mt(Hi,"]"))}function ym(){return gn(ta("form"),$s,is("{"),ta("}"),Mt(Ai,"}"),ea,ea)}function Ai(){return gn($s,Ru)}function wh(At,Zr,ii){return Zr.tokenize==ar&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Zr.lastType)||"quasi"==Zr.lastType&&/\{\s*$/.test(At.string.slice(0,At.pos-(ii||0)))}return la.lex=!0,ea.lex=!0,{startState:function(At){var Zr={tokenize:ar,lastType:"sof",cc:[],lexical:new ir((At||0)-g,0,"block",!1),localVars:c.localVars,context:c.localVars&&new Ha(null,null,!1),indented:At||0};return c.globalVars&&"object"==typeof c.globalVars&&(Zr.globalVars=c.globalVars),Zr},token:function(At,Zr){if(At.sol()&&(Zr.lexical.hasOwnProperty("align")||(Zr.lexical.align=!1),Zr.indented=At.indentation(),Nr(At,Zr)),Zr.tokenize!=fo&&At.eatSpace())return null;var ii=Zr.tokenize(At,Zr);return"comment"==Ot?ii:(Zr.lastType="operator"!=Ot||"++"!=ur&&"--"!=ur?Ot:"incdec",wr(Zr,ii,Ot,ur,At))},indent:function(At,Zr){if(At.tokenize==fo||At.tokenize==ti)return r.Pass;if(At.tokenize!=ar)return 0;var Zi,ii=Zr&&Zr.charAt(0),Ii=At.lexical;if(!/^\s*else\b/.test(Zr))for(var fl=At.cc.length-1;fl>=0;--fl){var jl=At.cc[fl];if(jl==ea)Ii=Ii.prev;else if(jl!=sp&&jl!=la)break}for(;("stat"==Ii.type||"form"==Ii.type)&&("}"==ii||(Zi=At.cc[At.cc.length-1])&&(Zi==Na||Zi==it)&&!/^[,\.=+\-*:?[\(]/.test(Zr));)Ii=Ii.prev;b&&")"==Ii.type&&"stat"==Ii.prev.type&&(Ii=Ii.prev);var Mc=Ii.type,Uc=ii==Mc;return"vardef"==Mc?Ii.indented+("operator"==At.lastType||","==At.lastType?Ii.info.length+1:0):"form"==Mc&&"{"==ii?Ii.indented:"form"==Mc?Ii.indented+g:"stat"==Mc?Ii.indented+(function Rs(At,Zr){return"operator"==At.lastType||","==At.lastType||Se.test(Zr.charAt(0))||/[,.]/.test(Zr.charAt(0))}(At,Zr)?b||g:0):"switch"!=Ii.info||Uc||0==c.doubleIndentSwitch?Ii.align?Ii.column+(Uc?0:1):Ii.indented+(Uc?0:g):Ii.indented+(/^(?:case|default)\b/.test(Zr)?g:2*g)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:C?null:"/*",blockCommentEnd:C?null:"*/",blockCommentContinue:C?null:" * ",lineComment:C?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:C?"json":"javascript",jsonldMode:w,jsonMode:C,expressionAllowed:wh,skipExpression:function(At){wr(At,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})},9701:(d,a,e)=>{var r,o,c;r=e(4408),o={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1},r.defineMode("xml",function(g,b){var ae,be,w=g.indentUnit,C={},B=b.htmlMode?o:c;for(var ne in B)C[ne]=B[ne];for(var ne in b)C[ne]=b[ne];function Se(xt,Eo){function _o(Ha){return Eo.tokenize=Ha,Ha(xt,Eo)}var mi=xt.next();return"<"==mi?xt.eat("!")?xt.eat("[")?xt.match("CDATA[")?_o(Ot("atom","]]>")):null:xt.match("--")?_o(Ot("comment","--\x3e")):xt.match("DOCTYPE",!0,!0)?(xt.eatWhile(/[\w\._\-]/),_o(ur(1))):null:xt.eat("?")?(xt.eatWhile(/[\w\._\-]/),Eo.tokenize=Ot("meta","?>"),"meta"):(ae=xt.eat("/")?"closeTag":"openTag",Eo.tokenize=We,"tag bracket"):"&"==mi?(xt.eat("#")?xt.eat("x")?xt.eatWhile(/[a-fA-F\d]/)&&xt.eat(";"):xt.eatWhile(/[\d]/)&&xt.eat(";"):xt.eatWhile(/[\w\.\-:]/)&&xt.eat(";"))?"atom":"error":(xt.eatWhile(/[^&<]/),null)}function We(xt,Eo){var _o=xt.next();if(">"==_o||"/"==_o&&xt.eat(">"))return Eo.tokenize=Se,ae=">"==_o?"endTag":"selfcloseTag","tag bracket";if("="==_o)return ae="equals",null;if("<"==_o){Eo.tokenize=Se,Eo.state=ti,Eo.tagName=Eo.tagStart=null;var mi=Eo.tokenize(xt,Eo);return mi?mi+" tag error":"tag error"}return/[\'\"]/.test(_o)?(Eo.tokenize=function lt(xt){var Eo=function(_o,mi){for(;!_o.eol();)if(_o.next()==xt){mi.tokenize=We;break}return"string"};return Eo.isInAttribute=!0,Eo}(_o),Eo.stringStartCol=xt.column(),Eo.tokenize(xt,Eo)):(xt.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Ot(xt,Eo){return function(_o,mi){for(;!_o.eol();){if(_o.match(Eo)){mi.tokenize=Se;break}_o.next()}return xt}}function ur(xt){return function(Eo,_o){for(var mi;null!=(mi=Eo.next());){if("<"==mi)return _o.tokenize=ur(xt+1),_o.tokenize(Eo,_o);if(">"==mi){if(1==xt){_o.tokenize=Se;break}return _o.tokenize=ur(xt-1),_o.tokenize(Eo,_o)}}return"meta"}}function Gt(xt){return xt&&xt.toLowerCase()}function ar(xt,Eo,_o){this.prev=xt.context,this.tagName=Eo||"",this.indent=xt.indented,this.startOfLine=_o,(C.doNotIndent.hasOwnProperty(Eo)||xt.context&&xt.context.noIndent)&&(this.noIndent=!0)}function Fn(xt){xt.context&&(xt.context=xt.context.prev)}function fo(xt,Eo){for(var _o;;){if(!xt.context||!C.contextGrabbers.hasOwnProperty(Gt(_o=xt.context.tagName))||!C.contextGrabbers[Gt(_o)].hasOwnProperty(Gt(Eo)))return;Fn(xt)}}function ti(xt,Eo,_o){return"openTag"==xt?(_o.tagStart=Eo.column(),jn):"closeTag"==xt?Nr:ti}function jn(xt,Eo,_o){return"word"==xt?(_o.tagName=Eo.current(),be="tag",Bt):C.allowMissingTagName&&"endTag"==xt?(be="tag bracket",Bt(xt,0,_o)):(be="error",jn)}function Nr(xt,Eo,_o){if("word"==xt){var mi=Eo.current();return _o.context&&_o.context.tagName!=mi&&C.implicitlyClosed.hasOwnProperty(Gt(_o.context.tagName))&&Fn(_o),_o.context&&_o.context.tagName==mi||!1===C.matchClosing?(be="tag",Dn):(be="tag error",ir)}return C.allowMissingTagName&&"endTag"==xt?(be="tag bracket",Dn(xt,0,_o)):(be="error",ir)}function Dn(xt,Eo,_o){return"endTag"!=xt?(be="error",Dn):(Fn(_o),ti)}function ir(xt,Eo,_o){return be="error",Dn(xt,0,_o)}function Bt(xt,Eo,_o){if("word"==xt)return be="attribute",wr;if("endTag"==xt||"selfcloseTag"==xt){var mi=_o.tagName,Sa=_o.tagStart;return _o.tagName=_o.tagStart=null,"selfcloseTag"==xt||C.autoSelfClosers.hasOwnProperty(Gt(mi))?fo(_o,mi):(fo(_o,mi),_o.context=new ar(_o,mi,Sa==_o.indented)),ti}return be="error",Bt}function wr(xt,Eo,_o){return"equals"==xt?sr:(C.allowMissing||(be="error"),Bt(xt,0,_o))}function sr(xt,Eo,_o){return"string"==xt?gn:"word"==xt&&C.allowUnquoted?(be="string",Bt):(be="error",Bt(xt,0,_o))}function gn(xt,Eo,_o){return"string"==xt?gn:Bt(xt,0,_o)}return Se.isInText=!0,{startState:function(xt){var Eo={tokenize:Se,state:ti,indented:xt||0,tagName:null,tagStart:null,context:null};return null!=xt&&(Eo.baseIndent=xt),Eo},token:function(xt,Eo){if(!Eo.tagName&&xt.sol()&&(Eo.indented=xt.indentation()),xt.eatSpace())return null;ae=null;var _o=Eo.tokenize(xt,Eo);return(_o||ae)&&"comment"!=_o&&(be=null,Eo.state=Eo.state(ae||_o,xt,Eo),be&&(_o="error"==be?_o+" error":be)),_o},indent:function(xt,Eo,_o){var mi=xt.context;if(xt.tokenize.isInAttribute)return xt.tagStart==xt.indented?xt.stringStartCol+1:xt.indented+w;if(mi&&mi.noIndent)return r.Pass;if(xt.tokenize!=We&&xt.tokenize!=Se)return _o?_o.match(/^(\s*)/)[0].length:0;if(xt.tagName)return!1!==C.multilineTagIndentPastTag?xt.tagStart+xt.tagName.length+2:xt.tagStart+w*(C.multilineTagIndentFactor||1);if(C.alignCDATA&&/<!\[CDATA\[/.test(Eo))return 0;var Sa=Eo&&/^<(\/)?([\w_:\.-]*)/.exec(Eo);if(Sa&&Sa[1])for(;mi;){if(mi.tagName==Sa[2]){mi=mi.prev;break}if(!C.implicitlyClosed.hasOwnProperty(Gt(mi.tagName)))break;mi=mi.prev}else if(Sa)for(;mi;){var Ha=C.contextGrabbers[Gt(mi.tagName)];if(!Ha||!Ha.hasOwnProperty(Gt(Sa[2])))break;mi=mi.prev}for(;mi&&mi.prev&&!mi.startOfLine;)mi=mi.prev;return mi?mi.indent+w:xt.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:C.htmlMode?"html":"xml",helperType:C.htmlMode?"html":"xml",skipAttribute:function(xt){xt.state==sr&&(xt.state=Bt)},xmlCurrentTag:function(xt){return xt.tagName?{name:xt.tagName,close:"closeTag"==xt.type}:null},xmlCurrentContext:function(xt){for(var Eo=[],_o=xt.context;_o;_o=_o.prev)Eo.push(_o.tagName);return Eo.reverse()}}}),r.defineMIME("text/xml","xml"),r.defineMIME("application/xml","xml"),r.mimeModes.hasOwnProperty("text/html")||r.defineMIME("text/html",{name:"xml",htmlMode:!0})},3023:(d,a,e)=>{e.d(a,{A:()=>g});var b,r=e(1749),o=(b=function(w,C){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,ne){B.__proto__=ne}||function(B,ne){for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(B[ae]=ne[ae])})(w,C)},function(w,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function B(){this.constructor=w}b(w,C),w.prototype=null===C?Object.create(C):(B.prototype=C.prototype,new B)}),c=function(b){function w(C,B,ne){var ae=b.call(this,B,ne)||this;return ae._module=C,ae}return o(w,b),Object.defineProperty(w.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),w}(r.Kx);const g=c},2820:(d,a,e)=>{e.d(a,{A:()=>b,F:()=>c});var w,r=e(3023),o=(w=function(C,B){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ae){ne.__proto__=ae}||function(ne,ae){for(var be in ae)Object.prototype.hasOwnProperty.call(ae,be)&&(ne[be]=ae[be])})(C,B)},function(C,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function ne(){this.constructor=C}w(C,B),C.prototype=null===B?Object.create(B):(ne.prototype=B.prototype,new ne)}),c=function(w){return w.Select="select",w.Hover="hover",w.Spacing="spacing",w.Target="target",w.Resize="resize",w}(c||{}),g=function(w){function C(){return null!==w&&w.apply(this,arguments)||this}return o(C,w),C.prototype.defaults=function(){return{id:"",type:""}},Object.defineProperty(C.prototype,"type",{get:function(){return this.get("type")||""},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"component",{get:function(){var B;return this.get("component")||(null===(B=this.get("componentView"))||void 0===B?void 0:B.model)},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"componentView",{get:function(){var B;return this.get("componentView")||(null===(B=this.get("component"))||void 0===B?void 0:B.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"el",{get:function(){var B;return null===(B=this.componentView)||void 0===B?void 0:B.el},enumerable:!1,configurable:!0}),C.prototype.getBoxRect=function(B){var ae=this.el,Se=this.em.Canvas.getCanvasView();return this.get("boxRect")||(ae&&Se?Se.getElBoxRect(ae,B):{x:0,y:0,width:0,height:0})},C.prototype.getStyle=function(B){void 0===B&&(B={});var ne=B.boxRect||this.getBoxRect(B),be=ne.height,Se=ne.x,We=ne.y;return{width:"".concat(ne.width,"px"),height:"".concat(be,"px"),top:"0",left:"0",position:"absolute",translate:"".concat(Se,"px ").concat(We,"px")}},C.prototype.isType=function(B){return this.type===B},C}(r.A);const b=g},8351:(d,a,e)=>{e.d(a,{A:()=>o});var r=function(c){return c.run="command:run",c.runCommand="command:run:",c.runBeforeCommand="command:run:before:",c.abort="command:abort:",c.stop="command:stop",c.stopCommand="command:stop:",c.stopBeforeCommand="command:stop:before:",c.call="command:call",c.callCommand="command:call:",c}(r||{});const o=r},371:(d,a,e)=>{e.r(a),e.d(a,{default:()=>r});const r={run:function(o){o.Components.clear(),o.Css.clear()}}},6301:(d,a,e)=>{e.r(a),e.d(a,{default:()=>g});var r=e(5706),o=e(5633),c=e(2097);const g={run:function(b){(0,r.bindAll)(this,"onKeyUp","enableDragger","disableDragger"),this.editor=b,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(b){this.toggleMove(),this.disableDragger()},onKeyUp:function(b){" "===(0,c.Ch)(b)&&this.editor.stopCommand(this.id)},enableDragger:function(b){this.toggleDragger(1,b)},disableDragger:function(b){this.toggleDragger(0,b)},toggleDragger:function(b,w){var B=this.canvasModel,ne=this.em,ae=this.dragger,be=b?"add":"remove";this.getCanvas().classList[be]("".concat(this.ppfx,"is__grabbing")),ae||(ae=new o.A({getPosition:function(){return{x:B.get("x"),y:B.get("y")}},setPosition:function(Se){B.set({x:Se.x,y:Se.y})},onStart:function(Se,We){ne.trigger("canvas:move:start",We)},onDrag:function(Se,We){ne.trigger("canvas:move",We)},onEnd:function(Se,We){ne.trigger("canvas:move:end",We)}}),this.dragger=ae),b?ae.start(w):ae.stop()},toggleMove:function(b){var w=this.ppfx,C=b?"add":"remove",B=b?"on":"off",ne={on:c.on,off:c.AU},ae=this.getCanvas(),be=["".concat(w,"is__grab")];!b&&be.push("".concat(w,"is__grabbing")),be.forEach(function(Se){return ae.classList[C](Se)}),ne[B](document,"keyup",this.onKeyUp),ne[B](ae,"mousedown",this.enableDragger),ne[B](document,"mouseup",this.disableDragger)}}},5301:(d,a,e)=>{e.r(a),e.d(a,{default:()=>C,defineCommand:()=>b});var B,r=e(1749),o=e(8351),c=(B=function(ne,ae){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(be,Se){be.__proto__=Se}||function(be,Se){for(var We in Se)Object.prototype.hasOwnProperty.call(Se,We)&&(be[We]=Se[We])})(ne,ae)},function(ne,ae){if("function"!=typeof ae&&null!==ae)throw new TypeError("Class extends value "+String(ae)+" is not a constructor or null");function be(){this.constructor=ne}B(ne,ae),ne.prototype=null===ae?Object.create(ae):(be.prototype=ae.prototype,new be)}),g=function(){return g=Object.assign||function(B){for(var ne,ae=1,be=arguments.length;ae<be;ae++)for(var Se in ne=arguments[ae])Object.prototype.hasOwnProperty.call(ne,Se)&&(B[Se]=ne[Se]);return B},g.apply(this,arguments)};function b(B){return B}var w=function(B){function ne(ae){var be=B.call(this,0)||this;be.config=ae||{},be.em=be.config.em||{};var Se=be.config.stylePrefix;return be.pfx=Se,be.ppfx=be.config.pStylePrefix,be.hoverClass="".concat(Se,"hover"),be.badgeClass="".concat(Se,"badge"),be.plhClass="".concat(Se,"placeholder"),be.freezClass="".concat(be.ppfx,"freezed"),be.canvas=be.em.Canvas,be.init(be.config),be}return c(ne,B),ne.prototype.onFrameScroll=function(ae){},ne.prototype.getCanvas=function(){return this.canvas.getElement()},ne.prototype.getCanvasBody=function(){return this.canvas.getBody()},ne.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},ne.prototype.offset=function(ae){var be=ae.getBoundingClientRect();return{top:be.top+ae.ownerDocument.body.scrollTop,left:be.left+ae.ownerDocument.body.scrollLeft}},ne.prototype.init=function(ae){},ne.prototype.callRun=function(ae,be){void 0===be&&(be={});var Se=this.id;if(ae.trigger("".concat(o.A.runBeforeCommand).concat(Se),{options:be}),!be.abort){var lt=this.run(ae,be.sender||ae,be),Ot={id:Se,result:lt,options:be},ur=g(g({},Ot),{type:"run"});return this.noStop||(ae.Commands.active[Se]=lt),ae.trigger("".concat(o.A.runCommand).concat(Se),Ot),ae.trigger("".concat(o.A.callCommand).concat(Se),ur),ae.trigger(o.A.run,Ot),ae.trigger(o.A.call,ur),lt}ae.trigger("".concat(o.A.abort).concat(Se),{options:be})},ne.prototype.callStop=function(ae,be){void 0===be&&(be={});var Se=this.id,We=be.sender||ae;ae.trigger("".concat(o.A.stopBeforeCommand).concat(Se),{options:be});var lt=this.stop(ae,We,be),Ot={id:Se,result:lt,options:be},ur=g(g({},Ot),{type:"stop"});return delete ae.Commands.active[Se],ae.trigger("".concat(o.A.stopCommand).concat(Se),Ot),ae.trigger("".concat(o.A.callCommand).concat(Se),ur),ae.trigger(o.A.stop,Ot),ae.trigger(o.A.call,ur),lt},ne.prototype.stopCommand=function(ae){this.em.Commands.stop(this.id,ae)},ne.prototype.run=function(ae,be,Se){},ne.prototype.stop=function(ae,be,Se){},ne}(r.Kx);const C=w},8542:(d,a,e)=>{e.r(a),e.d(a,{default:()=>g});var r=e(5706);const g={run:function(b,w,C){var B=this;void 0===C&&(C={});var ne=[],ae=C.component||b.getSelectedAll();return ae=(0,r.isArray)(ae)?function(b,w,C){if(C||2===arguments.length)for(var ae,B=0,ne=w.length;B<ne;B++)(ae||!(B in w))&&(ae||(ae=Array.prototype.slice.call(w,0,B)),ae[B]=w[B]);return b.concat(ae||Array.prototype.slice.call(w))}([],ae,!0):[ae],ae.filter(Boolean).forEach(function(be){var Se,We;if(!be.get("removable"))return B.em.logWarning("The element is not removable",{component:be});ne.push(be),((null===(We=null===(Se=be.delegate)||void 0===Se?void 0:Se.remove)||void 0===We?void 0:We.call(Se,be))||be).remove()}),b.selectRemove(ne),ne}}},1319:(d,a,e)=>{e.r(a),e.d(a,{default:()=>b});var r=e(5706),o=e(5633),c=function(){return c=Object.assign||function(w){for(var C,B=1,ne=arguments.length;B<ne;B++)for(var ae in C=arguments[B])Object.prototype.hasOwnProperty.call(C,ae)&&(w[ae]=C[ae]);return w},c.apply(this,arguments)},g="dmode";const b={run:function(w,C,B){var ne=this;void 0===B&&(B={}),(0,r.bindAll)(this,"setPosition","onStart","onDrag","onEnd","getPosition","getGuidesStatic","renderGuide","getGuidesTarget");var ae=B.target,be=B.event,Se=B.mode,We=B.dragger,lt=void 0===We?{}:We,Ot=ae.getEl(),ur=c({doc:Ot.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return ne.guidesStatic},guidesTarget:function(){return ne.guidesTarget}},lt);this.setupGuides(),this.opts=B,this.editor=w,this.em=w.getModel(),this.target=ae,this.isTran="translate"==Se,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var Gt=this.dragger;return Gt?Gt.setOptions(ur):(Gt=new o.A(ur),this.dragger=Gt),be&&Gt.start(be),this.toggleDrag(1),this.em.trigger("".concat(g,":start"),this.getEventOpts()),Gt},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach(function(w){var C=w.guide;C&&C.parentNode.removeChild(C)}),this.guides=[]},getGuidesContainer:function(){var w=this,C=this.guidesEl;if(!C){var B=this,ne=B.editor,ae=B.em,be=B.opts,Se=ne.getConfig().stylePrefix,We=document.createElement("div"),lt=document.createElement("div"),Ot='<div class="'.concat(Se,"guide-info__line ").concat(Se,'danger-bg">\n        <div class="').concat(Se,"guide-info__content ").concat(Se,'danger-color"></div>\n      </div>');(C=document.createElement("div")).className="".concat(Se,"guides"),We.className="".concat(Se,"guide-info ").concat(Se,"guide-info__x"),lt.className="".concat(Se,"guide-info ").concat(Se,"guide-info__y"),We.innerHTML=Ot,lt.innerHTML=Ot,C.appendChild(We),C.appendChild(lt),ne.Canvas.getGlobalToolsEl().appendChild(C),this.guidesEl=C,this.elGuideInfoX=We,this.elGuideInfoY=lt,this.elGuideInfoContentX=We.querySelector(".".concat(Se,"guide-info__content")),this.elGuideInfoContentY=lt.querySelector(".".concat(Se,"guide-info__content")),ae.on("canvas:update frame:scroll",(0,r.debounce)(function(){var ur;w.updateGuides(),be.debug&&(null===(ur=w.guides)||void 0===ur||ur.forEach(function(Gt){return w.renderGuide(Gt)}))},200))}return C},getGuidesStatic:function(){var w=this,C=[],B=this.target.getEl(),ne=B.parentNode,ae=void 0===ne?{}:ne;return(0,r.each)(ae.children,function(be){return C=C.concat(B!==be?w.getElementGuides(be):[])}),C.concat(this.getElementGuides(ae))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(w){var B,ne,C=this;(w||this.guides).forEach(function(ae){var be=ae.origin,Se=B===be?ne:C.getElementPos(be);B=be,ne=Se,(0,r.each)(C.getGuidePosUpdate(ae,Se),function(We,lt){return ae[lt]=We}),ae.originRect=Se})},getGuidePosUpdate:function(w,C){var B={},ne=C.top,ae=C.height,be=C.left,Se=C.width;switch(w.type){case"t":B.y=ne;break;case"b":B.y=ne+ae;break;case"l":B.x=be;break;case"r":B.x=be+Se;break;case"x":B.x=be+Se/2;break;case"y":B.y=ne+ae/2}return B},renderGuide:function(w){void 0===w&&(w={});var C=w.guide||document.createElement("div"),B="px",ne=w.active?2:1,ae=C.children[0];return C.style="position: absolute; background-color: ".concat(w.active?"green":"red",";"),C.children.length||((ae=document.createElement("div")).style="position: absolute; color: red; padding: 5px; top: 0; left: 0;",C.appendChild(ae)),w.y?(C.style.width="100%",C.style.height="".concat(ne).concat(B),C.style.top="".concat(w.y).concat(B),C.style.left=0):(C.style.width="".concat(ne).concat(B),C.style.height="100%",C.style.left="".concat(w.x).concat(B),C.style.top="0".concat(B)),!w.guide&&this.guidesContainer.appendChild(C),C},getElementPos:function(w){return this.editor.Canvas.getElementPos(w,{noScroll:1})},getElementGuides:function(w){var C=this,B=this.opts,ne=this.getElementPos(w),ae=ne.top,be=ne.height,Se=ne.left,We=ne.width,lt=[{type:"t",y:ae},{type:"b",y:ae+be},{type:"l",x:Se},{type:"r",x:Se+We},{type:"x",x:Se+We/2},{type:"y",y:ae+be/2}].map(function(Ot){return c(c({},Ot),{origin:w,originRect:ne,guide:B.debug&&C.renderGuide(Ot)})});return lt.forEach(function(Ot){var ur;return null===(ur=C.guides)||void 0===ur?void 0:ur.push(Ot)}),lt},getTranslate:function(w,C){void 0===C&&(C="x");var B=0;return(w||"").split(" ").forEach(function(ne){var ae=ne.trim(),be="translate".concat(C.toUpperCase(),"(");0===ae.indexOf(be)&&(B=parseFloat(ae.replace(be,"")))}),B},setTranslate:function(w,C,B){var ne="translate".concat(C.toUpperCase(),"("),ae="".concat(ne).concat(B,")"),be=(w||"").split(" ").map(function(Se){return 0===Se.trim().indexOf(ne)&&(Se=ae),Se}).join(" ");return be.indexOf(ne)<0&&(be+=" ".concat(ae)),be},getPosition:function(){var B=this.isTran,ne=this.target.getStyle(),ae=ne.left,be=ne.top,Se=ne.transform,We=0,lt=0;return B?(We=this.getTranslate(Se),lt=this.getTranslate(Se,"y")):(We=parseFloat(ae||0),lt=parseFloat(be||0)),{x:We,y:lt}},setPosition:function(w){var B=w.y,ne=w.end,ae=w.position,be=w.width,Se=w.height,lt=this.target,Ot=this.isTran,ur=this.em,ar=!ne,Fn="".concat(parseInt(w.x,10)).concat("px"),fo="".concat(parseInt(B,10)).concat("px"),ti={};if(Ot){var jn=lt.getStyle().transform||"";jn=this.setTranslate(jn,"x",Fn),jn=this.setTranslate(jn,"y",fo),lt.addStyle(ti={transform:jn,__p:ar},{avoidStore:!ne})}else{var Nr={position:ae,width:be,height:Se},Dn={left:Fn,top:fo,__p:ar};(0,r.keys)(Nr).forEach(function(ir){var Bt=Nr[ir];Bt&&(Dn[ir]=Bt)}),lt.addStyle(ti=Dn,{avoidStore:!ne})}ur?.Styles.__emitCmpStyleUpdate(ti,{components:ur.getSelected()})},_getDragData:function(){var w=this.target;return{target:w,parent:w.parent(),index:w.index()}},onStart:function(w){var C=this,B=C.target,ae=C.isTran,be=C.opts,Se=be.center,We=be.onStart,lt=C.editor.Canvas,Ot=B.getStyle(),ur="absolute",Gt=[ur,"relative"];if(We&&We(this._getDragData()),!ae&&Ot.position!==ur){var ar=lt.offset(B.getEl()),Fn=ar.left,fo=ar.top,ti=ar.width,jn=ar.height,Nr=B.parent(),Dn=void 0;do{var ir=Nr.getStyle();Dn=Gt.indexOf(ir.position)>=0?Nr:null,Nr=Nr.parent()}while(Nr&&!Dn);if(Se){var Bt=lt.getMouseRelativeCanvas(w);Fn=Bt.x,fo=Bt.y}else if(Dn){var gn=lt.offset(Dn.getEl());Fn-=gn.left,fo-=gn.top}this.setPosition({x:Fn,y:fo,width:"".concat(ti,"px"),height:"".concat(jn,"px"),position:ur})}},onDrag:function(){for(var w=this,C=[],B=0;B<arguments.length;B++)C[B]=arguments[B];var ae=this.guidesTarget,be=this.opts,Se=be.onDrag;this.updateGuides(ae),be.debug&&ae.forEach(function(We){return w.renderGuide(We)}),be.guidesInfo&&this.renderGuideInfo(ae.filter(function(We){return We.active})),Se&&Se(this._getDragData())},onEnd:function(w,C,B){void 0===B&&(B={});var ae=this.editor,Se=this.id,We=this.opts.onEnd;We&&We(w,B,c(c({event:w},B),this._getDragData())),ae.stopCommand(Se),this.hideGuidesInfo(),this.em.trigger("".concat(g,":end"),this.getEventOpts())},hideGuidesInfo:function(){var w=this;["X","Y"].forEach(function(C){var B=w["elGuideInfo".concat(C)];B&&(B.style.display="none")})},renderGuideInfo:function(w){var C=this;void 0===w&&(w=[]);var B=this.guidesStatic;this.hideGuidesInfo(),w.forEach(function(ne){var be=ne.x,Se=C.getElementPos(ne.origin),We=(0,r.isUndefined)(be)?"y":"x",lt="y"===We,Ot=Se[lt?"left":"top"],ur=Se.rect[lt?"left":"top"],Gt=lt?Ot+Se.width:Ot+Se.height,ar=lt?ur+Se.rect.width:ur+Se.rect.height,Fn=C["elGuideInfo".concat(We.toUpperCase())],fo=C["elGuideInfoContent".concat(We.toUpperCase())],ti=Fn.style,jn=B?.filter(function(Li){return Li.type===ne.type}).map(function(Li){var la=Li.originRect,ta=la.left,is=la.top,wn=lt?ta+la.width:is+la.height;return{gap:wn<Ot?Ot-wn:(lt?ta:is)-Gt,guide:Li}}).filter(function(Li){return Li.gap>0}).sort(function(Li,la){return Li.gap-la.gap}).map(function(Li){return Li.guide})[0];if(jn){var Nr=jn.originRect,Dn=Nr.left,Bt=Nr.top,sr=Nr.rect,gn=lt?Dn<Se.left:Bt<Se.top,xt=lt?Dn:Bt,Eo=lt?sr.left:sr.top,_o=lt?Dn+Nr.width:Bt+Nr.height,mi=lt?sr.left+sr.width:sr.top+sr.height,Sa=lt?ne.y:ne.x,Ha=gn?_o:Gt,Us="".concat(Sa,"px"),yo=gn?Ot-_o:xt-Gt,Oo=gn?ur-mi:Eo-ar;ti.display="",ti[lt?"top":"left"]=Us,ti[lt?"left":"top"]="".concat(Ha,"px"),ti[lt?"width":"height"]="".concat(yo,"px"),fo.innerHTML="".concat(Math.round(Oo),"px"),C.em.trigger("".concat(g,":active"),c(c({},C.getEventOpts()),{guide:ne,guidesStatic:B,matched:jn,posFirst:Sa,posSecond:Ha,size:yo,sizeRaw:Oo,elGuideInfo:Fn,elGuideInfoCnt:fo}))}})},toggleDrag:function(w){var ne=this.editor,ae=w?"add":"remove",be=["".concat(this.ppfx,"is__grabbing")],Se=ne.Canvas,We=Se.getBody();be.forEach(function(lt){return We.classList[ae](lt)}),Se[w?"startAutoscroll":"stopAutoscroll"]()}}},1859:(d,a,e)=>{e.r(a),e.d(a,{default:()=>r});const r={run:function(o){if(o.Canvas.hasFocus()){var c=[];o.getSelectedAll().forEach(function(g){var b=g.components(),w=b&&b.filter(function(C){return C.get("selectable")})[0];w&&c.push(w)}),c.length&&o.select(c)}}}},3709:(d,a,e)=>{e.r(a),e.d(a,{default:()=>r});const r={run:function(o,c,g){if(void 0===g&&(g={}),o.Canvas.hasFocus()||g.force){var b=[];o.getSelectedAll().forEach(function(w){for(var C=w.parent();C&&!C.get("selectable");)C=C.parent();C&&b.push(C)}),b.length&&o.select(b)}}}},2860:(d,a,e)=>{e.r(a),e.d(a,{default:()=>r});const r={run:function(o){if(o.Canvas.hasFocus()){var c=[];o.getSelectedAll().forEach(function(g){var b=g.parent();if(b){var ne,w=b.components().length,C=0,B=0;do{C++,ne=(B=g.index()+C)<=w?b.getChildAt(B):null}while(ne&&!ne.get("selectable"));c.push(ne||g)}}),c.length&&o.select(c)}}}},4944:(d,a,e)=>{e.r(a),e.d(a,{default:()=>r});const r={run:function(o){if(o.Canvas.hasFocus()){var c=[];o.getSelectedAll().forEach(function(g){var b=g.parent();if(b){var B,w=0,C=0;do{w++,B=(C=g.index()-w)>=0?b.getChildAt(C):null}while(B&&!B.get("selectable"));c.push(B||g)}}),c.length&&o.select(c)}}}},767:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=e(5706);const o={run:function(c,g,b){void 0===b&&(b={});var w=b.target,C=[];if(!w.get("styles"))return C;var B=w.get("type"),ne=c.Pages.getAllWrappers();if(!(0,r.flatten)(ne.map(function(Se){return Se.findType(B)})).length){var be=c.CssComposer.getAll();C=be.filter(function(Se){return Se.get("group")==="cmp:".concat(B)}),be.remove(C)}return C}}},2126:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});const o={run:function(c){var g=c.getModel(),b=function(c,g,b){if(b||2===arguments.length)for(var B,w=0,C=g.length;w<C;w++)(B||!(w in g))&&(B||(B=Array.prototype.slice.call(g,0,w)),B[w]=g[w]);return c.concat(B||Array.prototype.slice.call(g))}([],c.getSelectedAll(),!0).map(function(w){var C,B;return(null===(B=null===(C=w.delegate)||void 0===C?void 0:C.copy)||void 0===B?void 0:B.call(C,w))||w}).filter(Boolean);b.length&&g.set("clipboard",b)}}},4860:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=e(2097);const o={run:function(c,g,b){var w=this;void 0===b&&(b={}),g&&g.set&&g.set("active",0);var C=c.getConfig(),B=c.Modal,ne=C.stylePrefix;if(this.cm=c.CodeManager||null,!this.editors){var ae=this.buildEditor("htmlmixed","hopscotch","HTML"),be=this.buildEditor("css","hopscotch","CSS");this.htmlEditor=ae.model,this.cssEditor=be.model;var Se=(0,r.a_)("div",{class:"".concat(ne,"export-dl")});Se.appendChild(ae.el),Se.appendChild(be.el),this.editors=Se}B.open({title:C.textViewCode,content:this.editors}).getModel().once("change:open",function(){return c.stopCommand("".concat(w.id))}),this.htmlEditor.setContent(c.getHtml(b.optsHtml)),this.cssEditor.setContent(c.getCss(b.optsCss))},stop:function(c){var g=c.Modal;g&&g.close()},buildEditor:function(c,g,b){var w=this.em.CodeManager,C=w.createViewer({label:b,codeName:c,theme:g});return{model:C,el:new w.EditorView({model:C,config:w.getConfig()}).render().el}}}},1085:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=e(5706);const o={isEnabled:function(){var c=document;return!!(c.fullscreenElement||c.webkitFullscreenElement||c.mozFullScreenElement)},enable:function(c){var g="";return c.requestFullscreen?c.requestFullscreen():c.webkitRequestFullscreen?(g="webkit",c.webkitRequestFullscreen()):c.mozRequestFullScreen?(g="moz",c.mozRequestFullScreen()):c.msRequestFullscreen&&c.msRequestFullscreen(),g},disable:function(){var c=document;this.isEnabled()&&(c.exitFullscreen?c.exitFullscreen():c.webkitExitFullscreen?c.webkitExitFullscreen():c.mozCancelFullScreen?c.mozCancelFullScreen():c.msExitFullscreen&&c.msExitFullscreen())},fsChanged:function(c){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(c||"","fullscreenchange"),this.fsChanged))},run:function(c,g,b){void 0===b&&(b={}),this.sender=g;var w=b.target,C=(0,r.isElement)(w)?w:document.querySelector(w),B=this.enable(C||c.getContainer());this.fsChanged=this.fsChanged.bind(this,B),document.addEventListener(B+"fullscreenchange",this.fsChanged)},stop:function(c,g){g&&g.set&&g.set("active",!1),this.disable()}}},9622:(d,a,e)=>{e.r(a),e.d(a,{default:()=>w});var r=e(5706),o=e(6411),c=e(2097),g=e(4596),b=e(2983);const w=(0,r.extend)({},b.default,g.default,{init:function(C){g.default.init.apply(this,arguments),(0,r.bindAll)(this,"initSorter","rollback","onEndMove"),this.opt=C,this.hoverClass=this.ppfx+"highlighter-warning",this.badgeClass=this.ppfx+"badge-warning",this.noSelClass=this.ppfx+"no-select"},enable:function(){for(var C=[],B=0;B<arguments.length;B++)C[B]=arguments[B];g.default.enable.apply(this,C),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var ne=this.$wrapper;ne.css("cursor","move"),ne.on("mousedown",this.initSorter),ne.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(C){var ne=(0,o.default)(C.target).data("model").get("draggable");ne&&(this.cacheEl=null,this.startSelectPosition(C.target,this.frameEl.contentDocument),this.sorter.draggable=ne,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off("mousedown",this.initSorter),(0,c.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModel:function(C){var B=C.get("draggable");B&&(this.cacheEl=null,this.startSelectPosition(C.view.el,this.frameEl.contentDocument),this.sorter.draggable=B,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,c.on)(this.getContentWindow(),"keydown",this.rollback))},initSorterFromModels:function(C){this.cacheEl=null;var B=C[C.length-1],ne=this.em.getCurrentFrame(),be=B.getEl(ne?.model).ownerDocument,Se=C.map(function(We){var lt;return null===(lt=We?.view)||void 0===lt?void 0:lt.el});this.startSelectPosition(Se,be,{onStart:this.onStart}),this.sorter.eventHandlers.legacyOnMoveClb=this.onDrag,this.sorter.eventHandlers.legacyOnEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,c.on)(this.getContentWindow(),"keydown",this.rollback)},onEndMoveFromModel:function(){(0,c.AU)(this.getContentWindow(),"keydown",this.rollback)},onEndMove:function(){this.enable(),(0,c.AU)(this.getContentWindow(),"keydown",this.rollback)},onSelect:function(C,B){},rollback:function(C,B){(27==(C.which||C.keyCode)||B)&&this.sorter.cancelDrag()},getBadgeEl:function(){return this.$badge||(this.$badge=(0,o.default)(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,o.default)(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var C=[],B=0;B<arguments.length;B++)C[B]=arguments[B];g.default.stop.apply(this,C),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css("cursor","").unbind().removeClass(this.noSelClass)}})},8481:(d,a,e)=>{e.r(a),e.d(a,{default:()=>c});var r=e(5706),o=e(2097);const c={open:function(g){var b=this,w=this,C=w.editor,B=w.title,ae=w.am,be=w.config.custom;if((0,r.isFunction)(be.open))return be.open(ae.__customData());C.Modal.open({title:B,content:g}).onceClose(function(){return C.stopCommand(b.id)})},close:function(){var g=this.config.custom;if((0,r.isFunction)(g.close))return g.close(this.am.__customData());var b=this.editor.Modal;b&&b.close()},run:function(g,b,w){void 0===w&&(w={});var C=g.AssetManager,B=C.getConfig(),ne=w.types,ae=void 0===ne?[]:ne,be=w.accept,Se=w.select;if(this.title=w.modalTitle||g.t("assetManager.modalTitle")||"",this.editor=g,this.config=B,this.am=C,C.setTarget(w.target),C.onClick(w.onClick),C.onDblClick(w.onDblClick),C.onSelect(w.onSelect),C.__behaviour({select:Se,types:ae,options:w}),B.custom)this.rendered=this.rendered||(0,o.a_)("div"),this.rendered.className="".concat(B.stylePrefix,"custom-wrp"),C.__behaviour({container:this.rendered}),C.__trgCustom();else{if(!this.rendered||ae){var We=C.getAll().filter(function(Ot){return Ot});ae&&ae.length&&(We=We.filter(function(Ot){return-1!==ae.indexOf(Ot.get("type"))})),C.render(We),this.rendered=C.getContainer()}if(be){var lt=this.rendered.querySelector("input#".concat(B.stylePrefix,"uploadFile"));lt&&lt.setAttribute("accept",be)}}return this.open(this.rendered),this},stop:function(g){this.editor=g,this.close(this.rendered)}}},3666:(d,a,e)=>{e.r(a),e.d(a,{default:()=>c});var r=e(5706),o=e(2097);const c={open:function(){var g=this,b=g.container,w=g.editor,C=g.bm,B=g.config,ne=B.custom,ae=B.appendTo;if((0,r.isFunction)(ne.open))return ne.open(C.__customData());if(this.firstRender&&!ae){var be="views-container",Se=w.Panels;(Se.getPanel(be)||Se.addPanel({id:be})).set("appendContent",b).trigger("change:appendContent"),ne||b.appendChild(C.render())}b&&(b.style.display="block")},close:function(){var b=this.container,C=this.config.custom;if((0,r.isFunction)(C.close))return C.close(this.bm.__customData());b&&(b.style.display="none")},run:function(g){var b=g.Blocks;this.config=b.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,o.a_)("div"),this.editor=g,this.bm=b,b.__behaviour({container:this.container}),this.config.custom&&b.__trgCustom(),this.open()},stop:function(){this.close()}}},5838:(d,a,e)=>{e.r(a),e.d(a,{default:()=>r});const r={run:function(o){var c=o.LayerManager,g=o.Panels,b=c.getConfig();if(!b.appendTo){if(!this.layers){var w="views-container",C=document.createElement("div"),B=g.getPanel(w)||g.addPanel({id:w});b.custom?c.__trgCustom({container:C}):C.appendChild(c.render()),B.set("appendContent",C).trigger("change:appendContent"),this.layers=C}this.layers.style.display="block"}},stop:function(){var o=this.layers;o&&(o.style.display="none")}}},8692:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=e(6411);const o={run:function(c,g){if(this.sender=g,!this.$cnt){var b=c.getConfig(),w=c.Panels,C=c.DeviceManager,B=c.SelectorManager,ne=c.StyleManager,ae="change:appendContent",be=(0,r.default)("<div></div>"),Se=(0,r.default)("<div></div>"),We=(0,r.default)("<div></div>"),lt=(0,r.default)("<div></div>");if(this.$cnt=be,this.$cntInner=Se,Se.append(We),Se.append(lt),be.append(Se),C&&b.showDevices){var Ot=w.addPanel({id:"devices-c"}),ur=C.render();Ot.set("appendContent",ur).trigger(ae)}var Gt=B.getConfig();Gt.custom?B.__trgCustom({container:We.get(0)}):Gt.appendTo||We.append(B.render([])),this.sm=ne;var ar=ne.getConfig();this.$header=(0,r.default)('<div class="'.concat(ar.stylePrefix,'header">').concat(c.t("styleManager.empty"),"</div>")),be.append(this.$header),ar.custom?ne.__trgCustom({container:lt.get(0)}):ar.appendTo||lt.append(ne.render());var fo="views-container";(w.getPanel(fo)||w.addPanel({id:fo})).set("appendContent",be).trigger(ae);var jn=c.getModel();this.listenTo(jn,ne.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var c=this,g=c.sender,b=c.sm,w=c.$cntInner,C=c.$header;g&&g.get&&!g.get("active")||!b||(b.getSelected()?(w?.show(),C?.hide()):(w?.hide(),C?.show()))},stop:function(){var c,g;null===(c=this.$cntInner)||void 0===c||c.hide(),null===(g=this.$header)||void 0===g||g.hide()}}},9163:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=e(6411);const o={run:function(c,g){this.sender=g;var ae,b=c.getModel(),C=c.Config.stylePrefix,B=c.TraitManager,ne=B.getConfig();if(!ne.appendTo){if(!this.$cn){this.$cn=(0,r.default)("<div></div>"),this.$cn2=(0,r.default)("<div></div>"),this.$cn.append(this.$cn2),this.$header=(0,r.default)("<div>").append('<div class="'.concat(ne.stylePrefix,'header">').concat(b.t("traitManager.empty"),"</div>")),this.$cn.append(this.$header),ne.custom?B.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append('<div class="'.concat(C,'traits-label">').concat(b.t("traitManager.label"),"</div>")),this.$cn2.append(B.render()));var be=c.Panels;ae=be.getPanel("views-container")?be.getPanel("views-container"):be.addPanel({id:"views-container"}),ae?.set("appendContent",this.$cn.get(0)).trigger("change:appendContent"),this.target=c.getModel(),this.listenTo(this.target,"component:toggled",this.toggleTm)}this.toggleTm()}},toggleTm:function(){var c=this.sender;c&&c.get&&!c.get("active")||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},9298:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=e(5706);const o={run:function(g,b,w){void 0===w&&(w={});var C=g.getModel(),B=C.get("clipboard"),ne=g.getSelected();B?.length&&ne&&(g.getSelectedAll().forEach(function(ae){var be,Se,We,ur,lt=(null===(Se=null===(be=ae.delegate)||void 0===be?void 0:be.copy)||void 0===Se?void 0:Se.call(be,ae))||ae,Ot=lt.collection;if(Ot){var ar={at:lt.index()+1,action:w.action||"paste-component"};ur=(0,r.contains)(B,lt)&&lt.get("copyable")?Ot.add(lt.clone(),ar):c(g,B,lt.parent(),ar)}else{var Fn=null===(We=C.Pages.getSelected())||void 0===We?void 0:We.getMainComponent();ar={at:Fn?.components().length||0,action:w.action||"paste-component"},ur=c(g,B,Fn,ar)}(ur=(0,r.isArray)(ur)?ur:[ur]).forEach(function(fo){return g.trigger("component:paste",fo)})}),ne.emitUpdate())}};function c(g,b,w,C){var ne=b.filter(function(ae){return ae.get("copyable")}).filter(function(ae){return g.Components.canMove(w,ae).result});return w.components().add(ne.map(function(ae){return ae.clone()}),C)}},8594:(d,a,e)=>{e.r(a),e.d(a,{default:()=>g});var r=e(5706),c="core:component-outline";const g={getPanels:function(b){return this.panels||(this.panels=b.Panels.getPanels()),this.panels},preventDrag:function(b){b.abort=1},tglEffects:function(b){var w=this.em,C=b?"on":"off";if(w){var B=w.Canvas,ne=B.getBody(),ae=B.getToolbarEl();ae&&(ae.style.display=b?"none":"");var be=ne.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,r.each)(be,function(Se){return Se.style.pointerEvents=b?"all":""}),w[C]("run:tlb-move:before",this.preventDrag)}},run:function(b,w){var C=this;this.sender=w,this.selected=function(b,w,C){if(C||2===arguments.length)for(var ae,B=0,ne=w.length;B<ne;B++)(ae||!(B in w))&&(ae||(ae=Array.prototype.slice.call(w,0,B)),ae[B]=w[B]);return b.concat(ae||Array.prototype.slice.call(w))}([],b.getSelectedAll(),!0),b.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=b.Commands.isActive(c)),this.shouldRunSwVisibility&&b.stopCommand(c),b.getModel().stopDefault();var B=this.getPanels(b),ne=b.Canvas.getElement(),ae=b.getEl(),be=b.Config.stylePrefix;if(!this.helper){var Se=document.createElement("span");Se.className="".concat(be,"off-prv fa fa-eye-slash"),ae.appendChild(Se),Se.onclick=function(){return C.stopCommand()},this.helper=Se}this.helper.style.display="inline-block",B.forEach(function(lt){return lt.set("visible",!1)});var We=ne.style;We.width="100%",We.height="100%",We.top="0",We.left="0",We.padding="0",We.margin="0",b.refresh(),this.tglEffects(1)},stop:function(b){var C=this.sender,B=void 0===C?{}:C,ne=this.selected;B.set&&B.set("active",0);var ae=this.getPanels(b);this.shouldRunSwVisibility&&(b.runCommand(c),this.shouldRunSwVisibility=!1),b.getModel().runDefault(),ae.forEach(function(Se){return Se.set("visible",!0)}),b.Canvas.getElement().setAttribute("style",""),ne&&b.select(ne),delete this.selected,this.helper&&(this.helper.style.display="none"),b.refresh(),this.tglEffects()}}},7604:(d,a,e)=>{e.r(a),e.d(a,{default:()=>o});var r=function(){return r=Object.assign||function(c){for(var g,b=1,w=arguments.length;b<w;b++)for(var C in g=arguments[b])Object.prototype.hasOwnProperty.call(g,C)&&(c[C]=g[C]);return c},r.apply(this,arguments)};const o={run:function(c,g,b){var w=b||{},C=c.Canvas,B=C.getCanvasView(),ne=r({appendTo:C.getResizerEl(),prefix:c.getConfig().stylePrefix,posFetcher:B.getElementPos.bind(B),mousePosFetcher:C.getMouseRelativePos.bind(C)},w.options||{}),ae=this.canvasResizer;return(!ae||w.forceNew)&&(this.canvasResizer=new c.Utils.Resizer(ne),ae=this.canvasResizer),ae.setOptions(ne,!0),ae.blur(),ae.focus(w.el),ae},stop:function(){var c;null===(c=this.canvasResizer)||void 0===c||c.blur()}}},4596:(d,a,e)=>{e.r(a),e.d(a,{default:()=>Dn});var ir,r=e(5706),o=e(1749),c=(ir=function(Bt,wr){return(ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(sr,gn){sr.__proto__=gn}||function(sr,gn){for(var xt in gn)Object.prototype.hasOwnProperty.call(gn,xt)&&(sr[xt]=gn[xt])})(Bt,wr)},function(Bt,wr){if("function"!=typeof wr&&null!==wr)throw new TypeError("Class extends value "+String(wr)+" is not a constructor or null");function sr(){this.constructor=Bt}ir(Bt,wr),Bt.prototype=null===wr?Object.create(wr):(sr.prototype=wr.prototype,new sr)}),g=function(ir){function Bt(){return null!==ir&&ir.apply(this,arguments)||this}return c(Bt,ir),Bt.prototype.defaults=function(){return{command:"",attributes:{}}},Bt}(o.Kx);const b=g;var w=function(){var ir=function(Bt,wr){return(ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(sr,gn){sr.__proto__=gn}||function(sr,gn){for(var xt in gn)Object.prototype.hasOwnProperty.call(gn,xt)&&(sr[xt]=gn[xt])})(Bt,wr)};return function(Bt,wr){if("function"!=typeof wr&&null!==wr)throw new TypeError("Class extends value "+String(wr)+" is not a constructor or null");function sr(){this.constructor=Bt}ir(Bt,wr),Bt.prototype=null===wr?Object.create(wr):(sr.prototype=wr.prototype,new sr)}}(),C=function(ir){function Bt(){return null!==ir&&ir.apply(this,arguments)||this}return w(Bt,ir),Bt}(o.pM);const B=C;C.prototype.model=b;var ne=e(91),ae=function(){var ir=function(Bt,wr){return(ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(sr,gn){sr.__proto__=gn}||function(sr,gn){for(var xt in gn)Object.prototype.hasOwnProperty.call(gn,xt)&&(sr[xt]=gn[xt])})(Bt,wr)};return function(Bt,wr){if("function"!=typeof wr&&null!==wr)throw new TypeError("Class extends value "+String(wr)+" is not a constructor or null");function sr(){this.constructor=Bt}ir(Bt,wr),Bt.prototype=null===wr?Object.create(wr):(sr.prototype=wr.prototype,new sr)}}(),be=function(){return be=Object.assign||function(ir){for(var Bt,wr=1,sr=arguments.length;wr<sr;wr++)for(var gn in Bt=arguments[wr])Object.prototype.hasOwnProperty.call(Bt,gn)&&(ir[gn]=Bt[gn]);return ir},be.apply(this,arguments)},Se=function(ir){function Bt(wr){var sr=ir.call(this,wr)||this;return sr.em=wr.config.em,sr}return ae(Bt,ir),Bt.prototype.events=function(){return this.model.get("events")||{mousedown:"handleClick"}},Bt.prototype.attributes=function(){return this.model.get("attributes")},Bt.prototype.handleClick=function(wr){wr.preventDefault(),wr.stopPropagation();var sr=this.em,gn=sr.Canvas.getFrameEl().getBoundingClientRect(),xt=gn.left,Eo=gn.top,_o=be(be({},wr),{clientX:wr.clientX-xt,clientY:wr.clientY-Eo});sr.trigger("toolbar:run:before",{event:_o}),this.execCommand(_o)},Bt.prototype.execCommand=function(wr){var gn=this.em,Eo={event:wr},_o=this.model.get("command"),mi=gn.Editor;(0,r.isFunction)(_o)&&_o(mi,null,Eo),(0,r.isString)(_o)&&mi.runCommand(_o,Eo)},Bt.prototype.render=function(){var sr=this.em,gn=this.$el,xt=this.model,Eo=xt.get("id"),_o=xt.get("label"),mi=sr.getConfig().stylePrefix;return gn.addClass("".concat(mi,"toolbar-item")),Eo&&gn.addClass("".concat(mi,"toolbar-item__").concat(Eo)),_o&&gn.append(_o),this},Bt}(o.Ss);const We=Se;var lt=function(){var ir=function(Bt,wr){return(ir=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(sr,gn){sr.__proto__=gn}||function(sr,gn){for(var xt in gn)Object.prototype.hasOwnProperty.call(gn,xt)&&(sr[xt]=gn[xt])})(Bt,wr)};return function(Bt,wr){if("function"!=typeof wr&&null!==wr)throw new TypeError("Class extends value "+String(wr)+" is not a constructor or null");function sr(){this.constructor=Bt}ir(Bt,wr),Bt.prototype=null===wr?Object.create(wr):(sr.prototype=wr.prototype,new sr)}}(),Ot=function(ir){function Bt(wr){var sr=ir.call(this,wr)||this,gn=wr.em;return sr.em=gn,sr.config={em:gn},sr.listenTo(sr.collection,"reset",sr.render),sr}return lt(Bt,ir),Bt.prototype.onRender=function(){this.el.className="".concat(this.em.config.stylePrefix,"toolbar-items")},Bt}(ne.A);const ur=Ot;Ot.prototype.itemView=We;var Nr,Gt=e(2097),ar=e(9195),Fn=e(2820),fo=e(3172),ti=function(){return ti=Object.assign||function(ir){for(var Bt,wr=1,sr=arguments.length;wr<sr;wr++)for(var gn in Bt=arguments[wr])Object.prototype.hasOwnProperty.call(Bt,gn)&&(ir[gn]=Bt[gn]);return ir},ti.apply(this,arguments)};const Dn={activeResizer:!1,init:function(){this.onSelect=(0,r.debounce)(this.onSelect,0),(0,r.bindAll)(this,"onHover","onOut","onClick","onCanvasScroll","onFrameScroll","onFrameResize","onFrameUpdated","onContainerChange")},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),Nr=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(ir){var Bt=this,sr=this.em,xt=this.canvas.getCanvasView().el,Eo=sr.getConfig().listenToEl,_o=sr.getContainer().parentNode,mi=ir?"on":"off",Sa={on:Gt.on,off:Gt.AU},Ha=fo.I.update;!Eo.length&&_o&&Eo.push(_o),Sa[mi](window,"resize",this.onFrameUpdated),Sa[mi](Eo,"scroll",this.onContainerChange),sr[mi]("component:toggled ".concat(Ha," undo redo"),this.onSelect,this),sr[mi]("change:componentHovered",this.onHovered,this),sr[mi]("component:resize styleable:change component:input",this.updateGlobalPos,this),sr[mi]("".concat(Ha,":toolbar"),this._upToolbar,this),sr[mi]("frame:updated",this.onFrameUpdated,this),sr[mi]("canvas:updateTools",this.onFrameUpdated,this),sr[mi](sr.Canvas.events.refresh,this.updateAttached,this),sr.Canvas.getFrames().forEach(function(yo){var Oo=yo.view,Li=Oo?.getWindow();Li&&function(yo,Oo,Li){Sa[mi](Li,"scroll",Bt.onCanvasScroll,!0),Sa[mi](Oo,"mouseover",Bt.onHover),Sa[mi](Oo,"mouseleave",Bt.onOut),Sa[mi](Oo,"click",Bt.onClick),Sa[mi](yo,"scroll",Bt.onFrameScroll,!0),Sa[mi](yo,"resize",Bt.onFrameResize)}(Li,Oo?.getBody(),xt)})},onHover:function(ir){ir.stopPropagation();var Bt=this.em,wr=ir.target,sr=(0,ar.getComponentView)(wr),gn=sr?.frameView,xt=sr?.model;if(!xt)for(var Eo=wr.parentNode;!xt&&Eo&&!(0,Gt.ZQ)(Eo);)xt=(0,ar.getComponentModel)(Eo),Eo=Eo.parentNode;this.currentDoc=wr.ownerDocument,Bt.setHovered(xt,{useValid:!0}),gn&&Bt.setCurrentFrame(gn)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(ir,Bt){var sr,wr=this,gn={};Bt?null===(sr=Bt.views)||void 0===sr||sr.forEach(function(xt){var Eo=xt.el,_o=wr.getElementPos(Eo);gn={el:Eo,pos:_o,component:Bt,view:(0,ar.getViewEl)(Eo)},Eo.ownerDocument===wr.currentDoc&&(wr.elHovered=gn),wr.updateToolsLocal(gn)}):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach(function(xt){var Eo=xt.view,_o=Eo&&Eo.getToolsEl();_o&&wr.toggleToolsEl(0,0,{el:_o})}))},onSelect:function(){var ir=this.em,Bt=ir.getSelected(),wr=ir.getCurrentFrame(),sr=Bt&&Bt.getView(wr?.model),gn=sr&&sr.el,xt={};gn&&(0,Gt.zN)(gn)&&(xt={el:gn,pos:this.getElementPos(gn),component:Bt,view:(0,ar.getViewEl)(gn)}),this.elSelected=xt,this.updateToolsGlobal(),this.updateLocalPos(xt),this.initResize(Bt)},updateGlobalPos:function(){var ir=this.getElSelected();ir.el&&(ir.pos=this.getElementPos(ir.el),this.updateToolsGlobal())},updateLocalPos:function(ir){var Bt=this.getElHovered();Bt.el&&(Bt.pos=this.getElementPos(Bt.el),this.updateToolsLocal(ir))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(ir,Bt,wr){void 0===wr&&(wr={});var sr=wr.el||this.canvas.getToolsEl(Bt);return sr&&(sr.style.display=ir?"":"none"),sr||{}},showElementOffset:function(ir,Bt,wr){void 0===wr&&(wr={}),Nr&&this.editor.runCommand("show-offset",{el:ir,elPos:Bt,view:wr.view,force:1,top:0,left:0})},hideElementOffset:function(ir){this.editor.stopCommand("show-offset",{view:ir})},showFixedElementOffset:function(ir,Bt){this.editor.runCommand("show-offset",{el:ir,elPos:Bt,state:"Fixed"})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand("show-offset",{state:"Fixed"})},hideHighlighter:function(ir){this.canvas.getHighlighter(ir).style.opacity=0},onClick:function(ir){ir.stopPropagation(),ir.preventDefault();var Bt=this.em;if(Bt.get("_cmpDrag"))return Bt.set("_cmpDrag");var wr=ir.target,sr=(0,ar.getComponentModel)(wr);if(!sr)for(var gn=wr.parentNode;!sr&&gn&&!(0,Gt.ZQ)(gn);)sr=(0,ar.getComponentModel)(gn),gn=gn.parentNode;if(sr){if(Bt.isEditing()&&(!sr.get("textable")&&sr.isChildOf("text")||Bt.getEditing()!==sr))return;this.select(sr,ir)}},select:function(ir,Bt){if(void 0===Bt&&(Bt={}),ir){var wr=this.em;wr.setSelected(ir,{event:Bt,useValid:!0}),this.initResize(wr.getSelected())}},updateBadge:function(ir,Bt,wr){void 0===wr&&(wr={});var sr=this.canvas,gn=(0,ar.getComponentModel)(ir),xt=this.getBadge(wr),Eo=xt.style;if(gn&&gn.get("badgable")){if(!wr.posOnly){var _o=this.canvas.getConfig(),mi=gn.getIcon(),Ha="".concat(_o.pStylePrefix||"","badge"),Us=_o.customBadgeLabel,yo="".concat(mi?'<div class="'.concat(Ha,'__icon">').concat(mi,"</div>"):"",'\n        <div class="').concat(Ha,'__name">').concat(gn.getName(),"</div>");xt.innerHTML=Us?Us(gn):yo}Eo.display="block";var Li=sr.getTargetToElementFixed(ir,xt,{pos:Bt}),ta=wr.leftOff<0?-wr.leftOff:0;Eo.top=Li.top+"px",Eo.left=ta+"px"}else Eo.display="none"},showHighlighter:function(ir){this.canvas.getHighlighter(ir).style.opacity=""},initResize:function(ir){var wr=this.em,sr=this.canvas,gn=wr.Editor,xt=!(0,r.isElement)(ir)&&(0,Gt.GW)(ir)?ir:wr.getSelected(),Eo=xt?.get("resizable"),_o=Fn.F.Resize,mi=sr.hasCustomSpot(_o);if(sr.removeSpots({type:_o}),xt&&Eo){sr.addSpot({type:_o,component:xt});var Sa=(0,r.isElement)(ir)?ir:xt.getEl(),Ha=(0,ar.isObject)(Eo)?Eo:{},Us=Ha.onStart,yo=void 0===Us?function(){}:Us,Oo=Ha.onMove,Li=void 0===Oo?function(){}:Oo,la=Ha.onEnd,ta=void 0===la?function(){}:la,ea=Ha.updateTarget,is=void 0===ea?function(){}:ea,ps=function(ir,Bt){var wr={};for(var sr in ir)Object.prototype.hasOwnProperty.call(ir,sr)&&Bt.indexOf(sr)<0&&(wr[sr]=ir[sr]);if(null!=ir&&"function"==typeof Object.getOwnPropertySymbols){var gn=0;for(sr=Object.getOwnPropertySymbols(ir);gn<sr.length;gn++)Bt.indexOf(sr[gn])<0&&Object.prototype.propertyIsEnumerable.call(ir,sr[gn])&&(wr[sr[gn]]=ir[sr[gn]])}return wr}(Ha,["onStart","onMove","onEnd","updateTarget"]);if(mi||!Sa||this.activeResizer)return;var Pa,Ji="".concat(wr.config.stylePrefix||"","resizing"),bs=this,Xa={component:xt,el:Sa},Na=function(Yt,Or,An){var ho=An.docs;ho&&ho.forEach(function(Cr){var $n=Cr.body,Cn=$n.className||"";$n.className=("add"==Yt?"".concat(Cn," ").concat(Ji):Cn.replace(Ji,"")).trim()})},it=ti({onStart:function(Yt,Or){yo(Yt,Or);var An=Or.el,ho=Or.config,Cr=Or.resizer,$n=ho.keyHeight,Cn=ho.keyWidth,Qa=ho.currentUnit,Qs=ho.keepAutoHeight,Ns=ho.keepAutoWidth;Na("add",0,Or),Pa=wr.Styles.getModelToStyle(xt);var er=getComputedStyle(An),un=Pa.getStyle(),Mt=un[Cn];ho.autoWidth=Ns&&"auto"===Mt,isNaN(parseFloat(Mt))&&(Mt=er[Cn]);var si=un[$n];ho.autoHeight=Qs&&"auto"===si,isNaN(parseFloat(si))&&(si=er[$n]),Cr.startDim.w=parseFloat(Mt),Cr.startDim.h=parseFloat(si),Nr=!1,Qa&&(ho.unitHeight=(0,ar.getUnitFromValue)(si),ho.unitWidth=(0,ar.getUnitFromValue)(Mt)),bs.activeResizer=!0,gn.trigger("component:resize",ti(ti({},Xa),{type:"start"}))},onMove:function(Yt){Li(Yt),gn.trigger("component:resize",ti(ti({},Xa),{type:"move"}))},onEnd:function(Yt,Or){ta(Yt,Or),Na("remove",0,Or),gn.trigger("component:resize",ti(ti({},Xa),{type:"end"})),Nr=!0,bs.activeResizer=!1},updateTarget:function(Yt,Or,An){var ho;if(is(Yt,Or,An),Pa){var Cr=An.store,$n=An.selectedHandler,Cn=An.config,Qa=Cn.keyHeight,Qs=Cn.keyWidth,Ns=Cn.autoHeight,er=Cn.autoWidth,un=Cn.unitWidth,Mt=Cn.unitHeight,si=["tc","bc"].indexOf($n)>=0,eo=["cl","cr"].indexOf($n)>=0,Si={};if(!si){var Ma=(null===(ho=sr.getBody())||void 0===ho?void 0:ho.offsetWidth)||0;Si[Qs]=er?"auto":"".concat(Or.w<Ma?Or.w:Ma).concat(un)}eo||(Si[Qa]=Ns?"auto":"".concat(Or.h).concat(Mt)),wr.getDragMode(xt)&&(Si.top="".concat(Or.t).concat(Mt),Si.left="".concat(Or.l).concat(un));var ca=ti(ti({},Si),{__p:!Cr});Pa.addStyle(ca,{avoidStore:!Cr}),wr.Styles.__emitCmpStyleUpdate(ca,{components:wr.getSelected()})}}},ps);this.resizer=gn.runCommand("resize",{el:Sa,options:it,force:1})}else{if(mi)return;gn.stopCommand("resize"),this.resizer=null}},updateToolbar:function(ir){var Bt=this.canvas,wr=this.config.em,sr=ir===wr?wr.getSelected():ir,gn=Bt.getToolbarEl(),xt=gn.style,Eo=sr.get("toolbar"),_o=wr.config.showToolbar,mi=!Bt.hasCustomSpot(Fn.F.Select);if(sr&&_o&&Eo&&Eo.length&&mi){if(xt.display="",!this.toolbar){gn.innerHTML="",this.toolbar=new B(Eo);var Sa=new ur({collection:this.toolbar,em:wr});gn.appendChild(Sa.render().el)}this.toolbar.reset(Eo),xt.top="-100px",xt.left="0"}else xt.display="none"},updateToolbarPos:function(ir){var wr=this.canvas.getToolbarEl().style;wr.top="".concat(ir.top).concat("px"),wr.left="".concat(ir.left).concat("px"),wr.opacity=""},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(ir){return void 0===ir&&(ir={}),this.canvas.getBadgeEl(ir.view)},onCanvasScroll:function(ir){this.onFrameScroll(ir),this.onContainerChange()},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refresh({all:!0})},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(ir){return ir&&"selected"===ir.get("status")},updateToolsLocal:function(ir){var Bt=this.em.getConfig(),wr=ir||this.getElHovered(),sr=wr.el,gn=wr.pos,xt=wr.view,Eo=wr.component;if(sr){var _o=Eo.get("hoverable"),mi=this.lastHovered!==sr,Sa=mi?{}:{posOnly:1},Ha=this.canvas.hasCustomSpot(Fn.F.Hover);mi&&_o&&(this.lastHovered=sr,Ha?this.hideHighlighter(xt):this.showHighlighter(xt),this.showElementOffset(sr,gn,{view:xt})),this.isCompSelected(Eo)&&(this.hideHighlighter(xt),!Bt.showOffsetsSelected&&this.hideElementOffset(xt));var yo=this.toggleToolsEl(1,xt),Oo=yo.style,Li=this.canvas.canvasRectOffset(sr,gn),la=Li.top,ta=Li.left;!Ha&&this.updateBadge(sr,gn,ti(ti({},Sa),{view:xt,topOff:la,leftOff:ta})),Oo.top=la+"px",Oo.left=ta+"px",Oo.width=gn.width+"px",Oo.height=gn.height+"px",this._trgToolUp("local",{component:Eo,el:yo,top:la,left:ta,width:gn.width,height:gn.height})}else this.lastHovered=0},_upToolbar:(0,r.debounce)(function(){this.updateToolsGlobal({force:1})},0),_trgToolUp:function(ir,Bt){void 0===Bt&&(Bt={}),this.em.trigger("canvas:tools:update",ti({type:ir},Bt))},updateToolsGlobal:function(ir){void 0===ir&&(ir={});var Bt=this.getElSelected(),wr=Bt.el,sr=Bt.pos,gn=Bt.component;if(!wr)return this.toggleToolsEl(),void(this.lastSelected=0);var xt=this.canvas;(this.lastSelected!==wr||ir.force)&&(this.lastSelected=wr,this.updateToolbar(gn));var mi=this.toggleToolsEl(1),Sa=mi.style,Ha=xt.getTargetToElementFixed(wr,xt.getToolbarEl(),{pos:sr}),Us=Ha.canvasOffsetTop,yo=Ha.canvasOffsetLeft;Sa.top=Us+"px",Sa.left=yo+"px",Sa.width=sr.width+"px",Sa.height=sr.height+"px",this.updateToolbarPos({top:Ha.top,left:Ha.left}),this._trgToolUp("global",{component:gn,el:mi,top:Us,left:yo,width:sr.width,height:sr.height})},updateAttached:(0,r.debounce)(function(){this.updateGlobalPos()},0),onContainerChange:(0,r.debounce)(function(){this.em.refreshCanvas()},150),getElementPos:function(ir){return this.canvas.getCanvasView().getElementPos(ir,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display="none"},cleanPrevious:function(ir){ir&&ir.set({status:"",state:""})},getContentWindow:function(){return this.canvas.getWindow()},run:function(ir){(0,ar.hasWin)()&&(this.editor=ir&&ir.get("Editor"),this.enable())},stop:function(ir,Bt,wr){if(void 0===wr&&(wr={}),(0,ar.hasWin)()){var gn=this.em,xt=this.editor;this.onHovered(),this.stopSelectComponent(),!wr.preserveSelected&&gn.setSelected(),this.toggleToolsEl(),this.updateAttached.cancel(),xt&&xt.stopCommand("resize")}}}},2983:(d,a,e)=>{e.r(a),e.d(a,{default:()=>g});var r=e(6411),o=e(6778),c=e(2128);const g={startSelectPosition:function(b,w,C){void 0===C&&(C={}),this.isPointed=!1;var B=this.em.Utils;B&&(this.sorter=new B.ComponentSorter({em:this.em,treeClass:o.A,containerContext:{container:b[0].ownerDocument.body,containerSel:"*",itemSel:"*",pfx:this.ppfx,document:w,placeholderElement:this.canvas.getPlacerEl()},positionOptions:{windowMargin:1,canvasRelative:!0},dragBehavior:{dragDirection:c.A.BothDirections,nested:!0}})),C.onStart&&(this.sorter.eventHandlers.legacyOnStartSort=C.onStart),b&&b.length>0&&this.sorter.startSort(b.map(function(ae){return{element:ae}}))},getOffsetDim:function(){var b=this.offset(this.canvas.getFrameEl()),w=this.offset(this.canvas.getElement());return{top:b.top-w.top,left:b.left-w.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex="after"==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&this.sorter.cancelDrag(),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&"after"==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?(0,r.default)(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,r.default)(this.cDim[this.posIndex][5]).parent():(0,r.default)(this.outsideElem),this.posTargetModel=this.posTargetEl.data("model"),this.posTargetCollection=this.posTargetEl.data("model-comp"))},enable:function(){this.startSelectPosition()},nearFloat:function(b,w,C){var B=b||0,ae=C.length,be=0!==ae&&"after"==(w||"before")&&B==ae;return 0!==ae&&(!be&&!C[B][4]||C[B-1]&&!C[B-1][4]||be&&!C[B-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css("cursor",""),this.$wrapper.unbind()}}},9490:(d,a,e)=>{e.r(a),e.d(a,{default:()=>b});var r=e(5706),o=e(2820),c=e(6411),g=function(){return g=Object.assign||function(w){for(var C,B=1,ne=arguments.length;B<ne;B++)for(var ae in C=arguments[B])Object.prototype.hasOwnProperty.call(C,ae)&&(w[ae]=C[ae]);return w},g.apply(this,arguments)};const b={getOffsetMethod:function(w){return"get"+(w||"")+"OffsetViewerEl"},run:function(w,C,B){var ne=this.canvas,ae=B||{},be=ae.state||"",Se=w.getConfig(),We=this.em.getZoomDecimal(),lt=ae.el;if(Se.showOffsets&&lt instanceof HTMLElement&&(Se.showOffsetsSelected||"Fixed"!=be)){if(!ne.hasCustomSpot(o.F.Spacing)){var Ot=g({},ae.elPos||ne.getElementPos(lt));(0,r.isUndefined)(ae.top)||(Ot.top=ae.top),(0,r.isUndefined)(ae.left)||(Ot.left=ae.left);var ur=window.getComputedStyle(lt),Gt=this.ppfx,ar=be+"State",fo=ne[this.getOffsetMethod(be)](B.view);fo.style.opacity="";var ti=this["marginT"+be],jn=this["marginB"+be],Nr=this["marginL"+be],Dn=this["marginR"+be],ir=this["padT"+be],Bt=this["padB"+be],wr=this["padL"+be],sr=this["padR"+be];if(fo.childNodes.length&&(this[ar]="1",ti=fo.querySelector("[data-offset-m-t]"),jn=fo.querySelector("[data-offset-m-b]"),Nr=fo.querySelector("[data-offset-m-l]"),Dn=fo.querySelector("[data-offset-m-r]"),ir=fo.querySelector("[data-offset-p-t]"),Bt=fo.querySelector("[data-offset-p-b]"),wr=fo.querySelector("[data-offset-p-l]"),sr=fo.querySelector("[data-offset-p-r]")),!this[ar]){var gn=be.toLowerCase(),xt=gn+"margin-v",Eo=gn+"padding-v",_o=(0,c.default)('<div class="'.concat(Gt,'marginName">')).get(0),mi=(0,c.default)('<div class="'.concat(Gt,'paddingName">')).get(0),Ha=Gt+Eo+"-el",Us="".concat(Gt+xt+"-el"," ").concat(Gt+xt),yo="".concat(Ha," ").concat(Gt+Eo);ti=(0,c.default)('<div class="'.concat(Us,'-top"></div>')).get(0),jn=(0,c.default)('<div class="'.concat(Us,'-bottom"></div>')).get(0),Nr=(0,c.default)('<div class="'.concat(Us,'-left"></div>')).get(0),Dn=(0,c.default)('<div class="'.concat(Us,'-right"></div>')).get(0),ir=(0,c.default)('<div class="'.concat(yo,'-top"></div>')).get(0),Bt=(0,c.default)('<div class="'.concat(yo,'-bottom"></div>')).get(0),wr=(0,c.default)('<div class="'.concat(yo,'-left"></div>')).get(0),sr=(0,c.default)('<div class="'.concat(yo,'-right"></div>')).get(0),this["marginT"+be]=ti,this["marginB"+be]=jn,this["marginL"+be]=Nr,this["marginR"+be]=Dn,this["padT"+be]=ir,this["padB"+be]=Bt,this["padL"+be]=wr,this["padR"+be]=sr,_o.appendChild(ti),_o.appendChild(jn),_o.appendChild(Nr),_o.appendChild(Dn),mi.appendChild(ir),mi.appendChild(Bt),mi.appendChild(wr),mi.appendChild(sr),fo.appendChild(_o),fo.appendChild(mi),this[ar]="1"}var Oo="px",Li=parseFloat(ur.marginLeft.replace(Oo,""))*We,la=parseFloat(ur.marginRight.replace(Oo,""))*We,ta=parseFloat(ur.marginTop.replace(Oo,""))*We,ea=parseFloat(ur.marginBottom.replace(Oo,""))*We,is=ti.style,ps=jn.style,Pa=Nr.style,wn=Dn.style,Hi=ir.style,Ji=Bt.style,bs=wr.style,Xa=sr.style,Na=parseFloat(Ot.left),it=parseFloat(ur.width)*We+Oo;is.height=ta+Oo,is.width=it,is.top=Ot.top-ta+Oo,is.left=Na+Oo,ps.height=ea+Oo,ps.width=it,ps.top=Ot.top+Ot.height+Oo,ps.left=Na+Oo;var Yt=Ot.height+ta+ea+Oo,Or=Ot.top-ta+Oo;Pa.height=Yt,Pa.width=Li+Oo,Pa.top=Or,Pa.left=Na-Li+Oo,wn.height=Yt,wn.width=la+Oo,wn.top=Or,wn.left=Na+Ot.width+Oo;var An=parseFloat(ur.paddingTop)*We;Hi.height=An+Oo;var ho=parseFloat(ur.paddingBottom)*We;Ji.height=ho+Oo;var Cr=Ot.height-ho-An+Oo,$n=Ot.top+An+Oo;bs.height=Cr,bs.width=parseFloat(ur.paddingLeft)*We+Oo,bs.top=$n;var Cn=parseFloat(ur.paddingRight)*We;Xa.height=Cr,Xa.width=Cn+Oo,Xa.top=$n}}else w.stopCommand("".concat(this.id),B)},stop:function(w,C,B){void 0===B&&(B={});var be=this.getOffsetMethod((B||{}).state||"");this.canvas[be](B.view).style.opacity=0}}},1396:(d,a,e)=>{e.r(a),e.d(a,{default:()=>c});var r=e(5706),o=e(9195);const c={init:function(){(0,r.bindAll)(this,"_onFramesChange")},run:function(g){this.toggleVis(g,!0)},stop:function(g){this.toggleVis(g,!1)},toggleVis:function(g,b){if(void 0===b&&(b=!0),!g.Commands.isActive("preview")){var w=g.Canvas,C=b?"on":"off";w.getModel()[C]("change:frames",this._onFramesChange),this.handleFrames(w.getFrames(),b)}},handleFrames:function(g,b){var w=this;g.forEach(function(C){var B;!(null===(B=C.view)||void 0===B)&&B.loaded&&w._upFrame(C,b),C.__ol||(C.on("loaded",function(){return w._upFrame(C)}),C.__ol=!0)})},_onFramesChange:function(g,b){this.handleFrames(b)},_upFrame:function(g,b){var w,C=this,B=C.ppfx,ne=C.em,ae=C.id,Se=((0,o.isDef)(b)?b:ne.Commands.isActive(ae))?"add":"remove",We="".concat(B,"dashed");null===(w=g.view)||void 0===w||w.getBody().classList[Se](We)}}},1749:(d,a,e)=>{e.d(a,{Kx:()=>w,Ss:()=>B,e2:()=>b,lK:()=>ae,pM:()=>C,x2:()=>ne});var Se,r=e(4193),o=e.n(r),c=(Se=function(We,lt){return(Se=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Ot,ur){Ot.__proto__=ur}||function(Ot,ur){for(var Gt in ur)Object.prototype.hasOwnProperty.call(ur,Gt)&&(Ot[Gt]=ur[Gt])})(We,lt)},function(We,lt){if("function"!=typeof lt&&null!==lt)throw new TypeError("Class extends value "+String(lt)+" is not a constructor or null");function Ot(){this.constructor=We}Se(We,lt),We.prototype=null===lt?Object.create(lt):(Ot.prototype=lt.prototype,new Ot)}),g=function(){return g=Object.assign||function(Se){for(var We,lt=1,Ot=arguments.length;lt<Ot;lt++)for(var ur in We=arguments[lt])Object.prototype.hasOwnProperty.call(We,ur)&&(Se[ur]=We[ur]);return Se},g.apply(this,arguments)},b="add remove reset change",w=function(Se){function We(){return null!==Se&&Se.apply(this,arguments)||this}return c(We,Se),We}(o().Model),C=function(Se){function We(){return null!==Se&&Se.apply(this,arguments)||this}return c(We,Se),We}(o().Collection),B=function(Se){function We(){return null!==Se&&Se.apply(this,arguments)||this}return c(We,Se),We}(o().View),ne=function(Se){return Se.Screen="screen",Se.World="world",Se}(ne||{}),ae={x:0,y:0};g(g({},ae),{width:0,height:0})},3172:(d,a,e)=>{e.d(a,{I:()=>o,t:()=>r});var r=function(c){return c.remove="component:remove",c.add="component:add",c.move="component:move",c}(r||{}),o=function(c){return c.add="component:add",c.remove="component:remove",c.removeBefore="component:remove:before",c.removed="component:removed",c.create="component:create",c.update="component:update",c.updateInside="component:update-inside",c.select="component:select",c.selectBefore="component:select:before",c.scriptMount="component:script:mount",c.scriptMountBefore="component:script:mount:before",c.scriptUnmount="component:script:unmount",c.render="component:render",c.symbolMainAdd="symbol:main:add",c.symbolMainUpdate="symbol:main:update",c.symbolMainUpdateDeep="symbol:main:update-deep",c.symbolMainRemove="symbol:main:remove",c.symbolMain="symbol:main",c.symbolInstanceAdd="symbol:instance:add",c.symbolInstanceRemove="symbol:instance:remove",c.symbolInstance="symbol:instance",c.symbol="symbol",c}(o||{})},91:(d,a,e)=>{e.d(a,{A:()=>b});var w,r=e(5706),o=e(1749),c=(w=function(C,B){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ae){ne.__proto__=ae}||function(ne,ae){for(var be in ae)Object.prototype.hasOwnProperty.call(ae,be)&&(ne[be]=ae[be])})(C,B)},function(C,B){if("function"!=typeof B&&null!==B)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");function ne(){this.constructor=C}w(C,B),C.prototype=null===B?Object.create(B):(ne.prototype=B.prototype,new ne)}),g=function(w){function C(B,ne,ae){void 0===B&&(B={}),void 0===ae&&(ae=!1);var be=w.call(this,B)||this;return be.itemsView="",be.itemType="type",be.reuseView=!1,be.config=ne||B.config||{},ae&&be.listenTo(be.collection,"add",be.addTo),be.items=[],be}return c(C,w),C.prototype.addTo=function(B){this.add(B)},C.prototype.itemViewNotFound=function(B){var be=this.ns,Se=this.config.em,We="".concat(be?"[".concat(be,"]: "):"","'").concat(B,"' type not found");Se&&Se.logWarning(We)},C.prototype.add=function(B,ne){var Fn,be=this.config,Se=this.reuseView,We=this.items,lt=this.itemsView||{},ur=ne||null,Gt=this.itemView,ar=B.get(this.itemType);lt[ar]?Gt=lt[ar]:ar&&!lt[ar]&&!(0,r.includes)(["button","checkbox","color","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"],ar)&&this.itemViewNotFound(ar),Fn=B.view&&Se?B.view:new Gt({model:B,config:be},be),We&&We.push(Fn);var fo=Fn.render().el;ur?ur.appendChild(fo):this.$el.append(fo)},C.prototype.render=function(){var B=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(ne){this.add(ne,B)},this),this.$el.append(B),this.onRender(),this},C.prototype.onRender=function(){},C.prototype.onRemoveBefore=function(B,ne){},C.prototype.onRemove=function(B,ne){},C.prototype.remove=function(B){void 0===B&&(B={});var ne=this.items;return this.onRemoveBefore(ne,B),this.clearItems(),w.prototype.remove.call(this),this.onRemove(ne,B),this},C.prototype.clearItems=function(){},C}(o.Ss);const b=g;g.prototype.itemView=""},5633:(d,a,e)=>{e.d(a,{A:()=>C});var r=e(5706),o=e(2097),c=function(){return c=Object.assign||function(B){for(var ne,ae=1,be=arguments.length;ae<be;ae++)for(var Se in ne=arguments[ae])Object.prototype.hasOwnProperty.call(ne,Se)&&(B[Se]=ne[Se]);return B},c.apply(this,arguments)},b=["x","y"];const C=function(){function B(ne){return void 0===ne&&(ne={}),this.opts={snapOffset:5,scale:1},(0,r.bindAll)(this,"drag","stop","keyHandle","handleScroll"),this.setOptions(ne),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return B.prototype.setOptions=function(ne){void 0===ne&&(ne={}),this.opts=c(c({},this.opts),ne)},B.prototype.toggleDrag=function(ne){var ae=this.getDocumentEl(),be=this.getContainerEl(),Se=this.getWindowEl(),We=ne?"on":"off",lt={on:o.on,off:o.AU};lt[We](be,"mousemove dragover",this.drag),lt[We](ae,"mouseup dragend touchend",this.stop),lt[We](ae,"keydown",this.keyHandle),lt[We](Se,"scroll",this.handleScroll)},B.prototype.handleScroll=function(){var ae=this.lastScroll,be=this.delta,Se=this.getScrollInfo(),We={x:Se.x-ae.x,y:Se.y-ae.y};this.move(be.x+We.x,be.y+We.y),this.lastScrollDiff=We},B.prototype.start=function(ne){var ae=this.opts,be=ae.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(ne),this.guidesStatic=(0,r.result)(ae,"guidesStatic")||[],this.guidesTarget=(0,r.result)(ae,"guidesTarget")||[],(0,r.isFunction)(be)&&be(ne,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(ne)},B.prototype.drag=function(ne){var ae=this,Se=this.opts,We=this.lastScrollDiff,lt=this.globScrollDiff,Ot=Se.onDrag,ur=this.startPointer,Gt=this.getPointerPos(ne),ar={x:lt.x+We.x,y:lt.y+We.y};this.globScrollDiff=ar;var Fn={x:Gt.x-ur.x+ar.x,y:Gt.y-ur.y+ar.y};this.lastScrollDiff={x:0,y:0};var fo=this.lockedAxis;"x"===(fo=ne.shiftKey?!fo&&this.detectAxisLock(Fn.x,Fn.y):null)?Fn.x=ur.x:"y"===fo&&(Fn.y=ur.y);var ti=function(wr){b.forEach(function(sr){return wr[sr]=wr[sr]*(0,r.result)(Se,"scale")}),ae.delta=wr,ae.move(wr.x,wr.y),(0,r.isFunction)(Ot)&&Ot(ne,ae)},jn=c({},Fn);if(this.currentPointer=Gt,this.lockedAxis=fo,this.lastScroll=this.getScrollInfo(),ti(Fn),this.guidesTarget.length){var Nr=this.snapGuides(jn);(Nr.trgX||Nr.trgY)&&ti(Nr.newDelta)}0===ne.which&&this.stop(ne)},B.prototype.snapGuides=function(ne){var ae=this,be=ne,We=this.trgX,lt=this.trgY;return this.guidesTarget.forEach(function(Ot){Ot.x&&ae.trgX||Ot.y&&ae.trgY||(Ot.active=!1,ae.guidesStatic.forEach(function(ur){if(!(Ot.y&&ur.x||Ot.x&&ur.y)){var Gt=Ot.y&&ur.y,ar=Gt?"y":"x",Fn=Ot[ar],fo=ur[ar],ti=ne[ar],jn=Gt?lt:We;ae.isPointIn(Fn,fo)&&(0,r.isUndefined)(jn)&&ae.setGuideLock(Ot,ti-(Fn-fo))}}))}),We=this.trgX,lt=this.trgY,b.forEach(function(Ot){var ur=Ot.toUpperCase(),Gt=ae["trg".concat(ur)];Gt&&!ae.isPointIn(ne[Ot],Gt.lock)&&(ae.setGuideLock(Gt,null),Gt=null),Gt&&!(0,r.isUndefined)(Gt.lock)&&(be[Ot]=Gt.lock)}),{newDelta:be,trgX:this.trgX,trgY:this.trgY}},B.prototype.isPointIn=function(ne,ae,be){var lt=(void 0===be?{}:be).offset||this.opts.snapOffset||0;return ne>=ae&&ne<=ae+lt||ne<=ae&&ne>=ae-lt},B.prototype.setGuideLock=function(ne,ae){var be=(0,r.isUndefined)(ne.x)?"Y":"X",Se="trg".concat(be);return null!==ae?(ne.active=!0,ne.lock=ae,this[Se]=ne):(delete ne.active,delete ne.lock,delete this[Se]),ne},B.prototype.stop=function(ne,ae){void 0===ae&&(ae={});var be=this.delta,Se=!!ae.cancel,We=Se?0:be.x,lt=Se?0:be.y;this.toggleDrag(),this.lockedAxis=null,this.move(We,lt,!0);var Ot=this.opts.onEnd;(0,r.isFunction)(Ot)&&Ot(ne,this,{cancelled:Se})},B.prototype.keyHandle=function(ne){(0,o.v$)(ne)&&this.stop(ne,{cancel:!0})},B.prototype.move=function(ne,ae,be){var We=this.el,Ot=this.startPosition;if(Ot){var ur=this.opts.setPosition,Gt=Ot.x+ne,ar=Ot.y+ae;this.position={x:Gt,y:ar,end:be},(0,r.isFunction)(ur)&&ur(this.position),We&&(We.style.left="".concat(Gt,"px"),We.style.top="".concat(ar,"px"))}},B.prototype.getContainerEl=function(){var ne=this.opts.container;return ne?[ne]:this.getDocumentEl()},B.prototype.getWindowEl=function(){return this.getContainerEl().map(function(ae){var be=ae.ownerDocument||ae;return be.defaultView||be.parentWindow})},B.prototype.getDocumentEl=function(ne){var ae=this.opts.doc;if(ne=ne||this.el,!this.docs.length){var be=[document];ne&&be.push(ne.ownerDocument),ae&&be.push(ae),this.docs=be}return this.docs},B.prototype.getPointerPos=function(ne){var ae=this.opts.getPointerPosition,be=(0,o.G2)(ne);return ae?ae(ne):{x:be.clientX,y:be.clientY}},B.prototype.getStartPosition=function(){var ae=this.el,Se=this.opts.getPosition,We={x:0,y:0};return(0,r.isFunction)(Se)?We=Se():ae&&(We={x:parseFloat(ae.style.left),y:parseFloat(ae.style.top)}),We},B.prototype.getScrollInfo=function(){var ne=this.opts.doc,ae=ne&&ne.body;return{y:ae?ae.scrollTop:0,x:ae?ae.scrollLeft:0}},B.prototype.detectAxisLock=function(ne,ae){var be=ne,Se=ae,We=Math.abs(be),lt=Math.abs(Se);return Se>=We||Se<=-We?"x":be>lt||be<-lt?"y":void 0},B}()},6411:(d,a,e)=>{e.r(a),e.d(a,{default:()=>ap});var r=typeof document<"u"?document:null,o=typeof window<"u"?window:null,c=Array.prototype,g=c.filter,b=c.indexOf,w=c.map,C=c.push,B=c.reverse,ne=c.slice,be=/^#[\w-]*$/,Se=/^\.[\w-]*$/,We=/<.+>/,lt=/^\w+$/;function Ot(Vt,$r){return void 0===$r&&($r=r),Se.test(Vt)?$r.getElementsByClassName(Vt.slice(1)):lt.test(Vt)?$r.getElementsByTagName(Vt):$r.querySelectorAll(Vt)}function ur(Vt,$r){if(void 0===$r&&($r=r),Vt){if(Vt.__cash)return Vt;var In=Vt;if(wr(Vt)){if($r.__cash&&($r=$r[0]),!(In=be.test(Vt)?$r.getElementById(Vt.slice(1)):We.test(Vt)?bl(Vt):Ot(Vt,$r)))return}else if(Bt(Vt))return this.ready(Vt);(In.nodeType||In===o)&&(In=[In]),this.length=In.length;for(var fi=0,pa=this.length;fi<pa;fi++)this[fi]=In[fi]}}function Gt(Vt,$r){return new ur(Vt,$r)}var ar=Gt.fn=Gt.prototype=ur.prototype={constructor:Gt,__cash:!0,length:0,splice:c.splice};ar.get=function(Vt){return void 0===Vt?ne.call(this):this[Vt<0?Vt+this.length:Vt]},ar.eq=function(Vt){return Gt(this.get(Vt))},ar.first=function(){return this.eq(0)},ar.last=function(){return this.eq(-1)},ar.map=function(Vt){return Gt(w.call(this,function($r,In){return Vt.call($r,In,$r)}))},ar.slice=function(){return Gt(ne.apply(this,arguments))};var Fn=/(?:^\w|[A-Z]|\b\w)/g,fo=/[\s-_]+/g;function ti(Vt){return Vt.replace(Fn,function($r,In){return $r[In?"toUpperCase":"toLowerCase"]()}).replace(fo,"")}function jn(Vt,$r){for(var In=0,fi=Vt.length;In<fi&&!1!==$r.call(Vt[In],Vt[In],In,Vt);In++);}Gt.camelCase=ti,Gt.each=jn,ar.each=function(Vt){return jn(this,function($r,In){return Vt.call($r,In,$r)}),this},ar.removeProp=function(Vt){return this.each(function($r,In){delete In[Vt]})},Gt.extend=ar.extend=function Nr(Vt){void 0===Vt&&(Vt=this);for(var $r=arguments,In=$r.length,fi=In<2?0:1;fi<In;fi++)for(var pa in $r[fi])Vt[pa]=$r[fi][pa];return Vt};var Dn=1;function ir(Vt,$r){var In=Vt&&(Vt.matches||Vt.webkitMatchesSelector||Vt.mozMatchesSelector||Vt.msMatchesSelector||Vt.oMatchesSelector);return!!In&&In.call(Vt,$r)}function Bt(Vt){return"function"==typeof Vt}function wr(Vt){return"string"==typeof Vt}function sr(Vt){return!isNaN(parseFloat(Vt))&&isFinite(Vt)}Gt.guid=Dn,Gt.matches=ir,Gt.isFunction=Bt,Gt.isString=wr,Gt.isNumeric=sr;var gn=Array.isArray;function xt(Vt){return wr(Vt)?function($r,In){return ir(In,Vt)}:Vt.__cash?function($r,In){return Vt.is(In)}:function($r,In,fi){return In===fi}}Gt.isArray=gn,ar.prop=function(Vt,$r){if(Vt){if(wr(Vt))return arguments.length<2?this[0]&&this[0][Vt]:this.each(function(fi,pa){pa[Vt]=$r});for(var In in Vt)this.prop(In,Vt[In]);return this}},ar.filter=function(Vt){if(!Vt)return Gt();var $r=Bt(Vt)?Vt:xt(Vt);return Gt(g.call(this,function(In,fi){return $r.call(In,fi,In,Vt)}))};var Eo=/\S+/g;function _o(Vt){return wr(Vt)&&Vt.match(Eo)||[]}function mi(Vt){return Vt.filter(function($r,In,fi){return fi.indexOf($r)===In})}function Sa(Vt,$r,In){if(1===Vt.nodeType){var fi=o.getComputedStyle(Vt,null);return $r?In?fi.getPropertyValue($r):fi[$r]:fi}}function Ha(Vt,$r){return parseInt(Sa(Vt,$r),10)||0}ar.hasClass=function(Vt){var $r=_o(Vt),In=!1;return $r.length&&this.each(function(fi,pa){return!(In=pa.classList.contains($r[0]))}),In},ar.removeAttr=function(Vt){var $r=_o(Vt);return $r.length?this.each(function(In,fi){jn($r,function(pa){fi.removeAttribute(pa)})}):this},ar.attr=function(Vt,$r){if(Vt){if(wr(Vt)){if(arguments.length<2){if(!this[0])return;var In=this[0].getAttribute(Vt);return null===In?void 0:In}return null===$r?this.removeAttr(Vt):this.each(function(pa,ms){ms.setAttribute(Vt,$r)})}for(var fi in Vt)this.attr(fi,Vt[fi]);return this}},ar.toggleClass=function(Vt,$r){var In=_o(Vt),fi=void 0!==$r;return In.length?this.each(function(pa,ms){jn(In,function($s){fi?$r?ms.classList.add($s):ms.classList.remove($s):ms.classList.toggle($s)})}):this},ar.addClass=function(Vt){return this.toggleClass(Vt,!0)},ar.removeClass=function(Vt){return arguments.length?this.toggleClass(Vt,!1):this.attr("class","")},Gt.unique=mi,ar.add=function(Vt,$r){return Gt(mi(this.get().concat(Gt(Vt,$r).get())))};var Us=/^--/;function yo(Vt){return Us.test(Vt)}var Oo={},Li=r&&r.createElement("div"),la=Li?Li.style:{},ta=["webkit","moz","ms","o"];function ea(Vt,$r){if(void 0===$r&&($r=yo(Vt)),$r)return Vt;if(!Oo[Vt]){var In=ti(Vt),fi=""+In.charAt(0).toUpperCase()+In.slice(1);jn((In+" "+ta.join(fi+" ")+fi).split(" "),function(ms){if(ms in la)return Oo[Vt]=ms,!1})}return Oo[Vt]}Gt.prefixedProp=ea;var is={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function ps(Vt,$r,In){return void 0===In&&(In=yo(Vt)),In||is[Vt]||!sr($r)?$r:$r+"px"}ar.css=function(Vt,$r){if(wr(Vt)){var In=yo(Vt);return Vt=ea(Vt,In),arguments.length<2?this[0]&&Sa(this[0],Vt,In):Vt?($r=ps(Vt,$r,In),this.each(function(pa,ms){1===ms.nodeType&&(In?ms.style.setProperty(Vt,$r):ms.style[Vt]=$r)})):this}for(var fi in Vt)this.css(fi,Vt[fi]);return this};var Pa="__cashData",wn=/^data-(.*)/;function Hi(Vt){return Vt[Pa]=Vt[Pa]||{}}function Ji(Vt,$r){var In=Hi(Vt);if($r){if(!($r in In)){var fi=Vt.dataset?Vt.dataset[$r]||Vt.dataset[ti($r)]:Gt(Vt).attr("data-"+$r);if(void 0!==fi){try{fi=JSON.parse(fi)}catch{}In[$r]=fi}}return In[$r]}return In}function Na(Vt,$r){return Ha(Vt,"border"+($r?"Left":"Top")+"Width")+Ha(Vt,"padding"+($r?"Left":"Top"))+Ha(Vt,"padding"+($r?"Right":"Bottom"))+Ha(Vt,"border"+($r?"Right":"Bottom")+"Width")}function it(Vt,$r){for(var In=0,fi=$r.length;In<fi;In++)if(Vt.indexOf($r[In])<0)return!1;return!0}function Yt(Vt,$r,In){jn(Vt[In],function(fi){$r.removeEventListener(In,fi[1])}),delete Vt[In]}Gt.hasData=function(Vt){return Pa in Vt},ar.data=function(Vt,$r){var In=this;if(!Vt)return this[0]?(jn(this[0].attributes,function(pa){var ms=pa.name.match(wn);ms&&In.data(ms[1])}),Ji(this[0])):void 0;if(wr(Vt))return void 0===$r?this[0]&&Ji(this[0],Vt):this.each(function(pa,ms){return function Xa(Vt,$r,In){Hi(Vt)[$r]=In}(ms,Vt,$r)});for(var fi in Vt)this.data(fi,Vt[fi]);return this},ar.removeData=function(Vt){return this.each(function($r,In){return function bs(Vt,$r){void 0===$r?delete Vt[Pa]:delete Hi(Vt)[$r]}(In,Vt)})},jn(["Width","Height"],function(Vt){ar["inner"+Vt]=function(){if(this[0])return this[0]===o?o["inner"+Vt]:this[0]["client"+Vt]}}),jn(["width","height"],function(Vt,$r){ar[Vt]=function(In){return this[0]?arguments.length?(In=parseInt(In,10),this.each(function(fi,pa){if(1===pa.nodeType){var ms=Sa(pa,"boxSizing");pa.style[Vt]=ps(Vt,In+("border-box"===ms?Na(pa,!$r):0))}})):this[0]===o?this[0][ti("outer-"+Vt)]:this[0].getBoundingClientRect()[Vt]-Na(this[0],!$r):void 0===In?void 0:this}}),jn(["Width","Height"],function(Vt,$r){ar["outer"+Vt]=function(In){if(this[0])return this[0]===o?o["outer"+Vt]:this[0]["offset"+Vt]+(In?Ha(this[0],"margin"+($r?"Top":"Left"))+Ha(this[0],"margin"+($r?"Bottom":"Right")):0)}});var Or="__cashEvents";function ho(Vt){return Vt[Or]=Vt[Or]||{}}function $n(Vt){var $r=Vt.split(".");return[$r[0],$r.slice(1).sort()]}function Cn(Vt,$r,In,fi){var pa=ho(Vt);if($r){var ms=pa[$r];if(!ms)return;fi&&(fi.guid=fi.guid||Dn++),pa[$r]=ms.filter(function($s){var lu=$s[1];if(fi&&lu.guid!==fi.guid||!it($s[0],In))return!0;Vt.removeEventListener($r,lu)})}else if(In&&In.length)for($r in pa)Cn(Vt,$r,In,fi);else for($r in pa)Yt(pa,Vt,$r)}ar.off=function(Vt,$r){var In=this;return void 0===Vt?this.each(function(fi,pa){return Cn(pa)}):jn(_o(Vt),function(fi){var pa=$n(fi),ms=pa[0],$s=pa[1];In.each(function(Ud,lu){return Cn(lu,ms,$s,$r)})}),this},ar.on=function(Vt,$r,In,fi){var pa=this;if(!wr(Vt)){for(var ms in Vt)this.on(ms,$r,Vt[ms]);return this}return Bt($r)&&(In=$r,$r=!1),jn(_o(Vt),function($s){var Ud=$n($s),lu=Ud[0],Ru=Ud[1];pa.each(function(zh,sp){var Fu=function vm(cu){if(!cu.namespace||it(Ru,cu.namespace.split("."))){var ju=sp;if($r){for(var zu=cu.target;!ir(zu,$r);)if(zu===sp||!(zu=zu.parentNode))return;ju=zu}cu.namespace=cu.namespace||"";var Hh=In.call(ju,cu,cu.data);fi&&Cn(sp,lu,Ru,vm),!1===Hh&&(cu.preventDefault(),cu.stopPropagation())}};Fu.guid=In.guid=In.guid||Dn++,function Cr(Vt,$r,In,fi){fi.guid=fi.guid||Dn++;var pa=ho(Vt);pa[$r]=pa[$r]||[],pa[$r].push([In,fi]),Vt.addEventListener($r,fi)}(sp,lu,Ru,Fu)})}),this},ar.one=function(Vt,$r,In){return this.on(Vt,$r,In,!0)},ar.ready=function(Vt){var $r=function(){return Vt(Gt)};return"loading"!==r.readyState?setTimeout($r):r.addEventListener("DOMContentLoaded",$r),this},ar.trigger=function(Vt,$r){var In=Vt;if(wr(Vt)){var fi=$n(Vt),pa=fi[0],ms=fi[1];(In=r.createEvent("HTMLEvents")).initEvent(pa,!0,!0),In.namespace=ms.join(".")}return In.data=$r,this.each(function($s,Ud){Ud.dispatchEvent(In)})};var Ns=/select-one/i,er=/select-multiple/i;function un(Vt){var $r=Vt.type;return Ns.test($r)?function Qs(Vt){return Vt.selectedIndex<0?null:Vt.options[Vt.selectedIndex].value}(Vt):er.test($r)?function Qa(Vt){var $r=[];return jn(Vt.options,function(In){In.selected&&!In.disabled&&!In.parentNode.disabled&&$r.push(In.value)}),$r}(Vt):Vt.value}var Mt=/%20/g,eo=/file|reset|submit|button|image/i,Si=/radio|checkbox/i;ar.serialize=function(){var Vt="";return this.each(function($r,In){jn(In.elements||[In],function(fi){if(!fi.disabled&&fi.name&&"FIELDSET"!==fi.tagName&&!eo.test(fi.type)&&(!Si.test(fi.type)||fi.checked)){var pa=un(fi);void 0!==pa&&jn(gn(pa)?pa:[pa],function($s){Vt+=function si(Vt,$r){return"&"+encodeURIComponent(Vt)+"="+encodeURIComponent($r).replace(Mt,"+")}(fi.name,$s)})}})}),Vt.substr(1)},ar.val=function(Vt){return void 0===Vt?this[0]&&un(this[0]):this.each(function($r,In){var fi=er.test(In.type),pa=null===Vt?fi?[]:"":Vt;fi&&gn(pa)?jn(In.options,function(ms){ms.selected=pa.indexOf(ms.value)>=0}):In.value=pa})},ar.clone=function(){return this.map(function(Vt,$r){return $r.cloneNode(!0)})},ar.detach=function(){return this.each(function(Vt,$r){$r.parentNode&&$r.parentNode.removeChild($r)})};var ca,Ma=/^\s*<(\w+)[^>]*>/,Ia=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function bl(Vt){if(function fs(){if(!ca){var Vt=r.createElement("table"),$r=r.createElement("tr");ca={"*":r.createElement("div"),tr:r.createElement("tbody"),td:$r,th:$r,thead:Vt,tbody:Vt,tfoot:Vt}}}(),!wr(Vt))return[];if(Ia.test(Vt))return[r.createElement(RegExp.$1)];var $r=Ma.test(Vt)&&RegExp.$1,In=ca[$r]||ca["*"];return In.innerHTML=Vt,Gt(In.childNodes).detach().get()}function kl(Vt,$r,In){if(void 0!==$r){var fi=wr($r);!fi&&$r.length?jn($r,function(pa){return kl(Vt,pa,In)}):jn(Vt,fi?function(pa){pa.insertAdjacentHTML(In?"afterbegin":"beforeend",$r)}:function(pa,ms){return function Vl(Vt,$r,In){In?Vt.insertBefore($r,Vt.childNodes[0]):Vt.appendChild($r)}(pa,ms?$r.cloneNode(!0):$r,In)})}}Gt.parseHTML=bl,ar.empty=function(){var Vt=this[0];if(Vt)for(;Vt.firstChild;)Vt.removeChild(Vt.firstChild);return this},ar.append=function(){var Vt=this;return jn(arguments,function($r){kl(Vt,$r)}),this},ar.appendTo=function(Vt){return kl(Gt(Vt),this),this},ar.html=function(Vt){if(void 0===Vt)return this[0]&&this[0].innerHTML;var $r=Vt.nodeType?Vt[0].outerHTML:Vt;return this.each(function(In,fi){fi.innerHTML=$r})},ar.insertAfter=function(Vt){var $r=this;return Gt(Vt).each(function(In,fi){var pa=fi.parentNode;$r.each(function(ms,$s){pa.insertBefore(In?$s.cloneNode(!0):$s,fi.nextSibling)})}),this},ar.after=function(){var Vt=this;return jn(B.apply(arguments),function($r){B.apply(Gt($r).slice()).insertAfter(Vt)}),this},ar.insertBefore=function(Vt){var $r=this;return Gt(Vt).each(function(In,fi){var pa=fi.parentNode;$r.each(function(ms,$s){pa.insertBefore(In?$s.cloneNode(!0):$s,fi)})}),this},ar.before=function(){var Vt=this;return jn(arguments,function($r){Gt($r).insertBefore(Vt)}),this},ar.prepend=function(){var Vt=this;return jn(arguments,function($r){kl(Vt,$r,!0)}),this},ar.prependTo=function(Vt){return kl(Gt(Vt),B.apply(this.slice()),!0),this},ar.remove=function(){return this.detach().off()},ar.replaceWith=function(Vt){var $r=this;return this.each(function(In,fi){var pa=fi.parentNode;if(pa){var ms=In?Gt(Vt).clone():Gt(Vt);if(!ms[0])return $r.remove(),!1;pa.replaceChild(ms[0],fi),Gt(ms[0]).after(ms.slice(1))}})},ar.replaceAll=function(Vt){return Gt(Vt).replaceWith(this),this},ar.text=function(Vt){return void 0===Vt?this[0]?this[0].textContent:"":this.each(function($r,In){In.textContent=Vt})};var Vu=r&&r.documentElement;ar.offset=function(){var Vt=this[0];if(Vt){var $r=Vt.getBoundingClientRect();return{top:$r.top+o.pageYOffset-Vu.clientTop,left:$r.left+o.pageXOffset-Vu.clientLeft}}},ar.offsetParent=function(){return Gt(this[0]&&this[0].offsetParent)},ar.position=function(){var Vt=this[0];if(Vt)return{left:Vt.offsetLeft,top:Vt.offsetTop}},ar.children=function(Vt){var $r=[];return this.each(function(In,fi){C.apply($r,fi.children)}),$r=Gt(mi($r)),Vt?$r.filter(function(In,fi){return ir(fi,Vt)}):$r},ar.contents=function(){var Vt=[];return this.each(function($r,In){C.apply(Vt,"IFRAME"===In.tagName?[In.contentDocument]:In.childNodes)}),Gt(Vt.length&&mi(Vt))},ar.find=function(Vt){for(var $r=[],In=0,fi=this.length;In<fi;In++){var pa=Ot(Vt,this[In]);pa.length&&C.apply($r,pa)}return Gt($r.length&&mi($r))},ar.has=function(Vt){var $r=wr(Vt)?function(In,fi){return!!Ot(Vt,fi).length}:function(In,fi){return fi.contains(Vt)};return this.filter($r)},ar.is=function(Vt){if(!Vt||!this[0])return!1;var $r=xt(Vt),In=!1;return this.each(function(fi,pa){return!(In=$r(fi,pa,Vt))}),In},ar.next=function(){return Gt(this[0]&&this[0].nextElementSibling)},ar.not=function(Vt){if(!Vt||!this[0])return this;var $r=xt(Vt);return this.filter(function(In,fi){return!$r(In,fi,Vt)})},ar.parent=function(){var Vt=[];return this.each(function($r,In){In&&In.parentNode&&Vt.push(In.parentNode)}),Gt(mi(Vt))},ar.index=function(Vt){var $r=Vt?Gt(Vt)[0]:this[0],In=Vt?this:Gt($r).parent().children();return b.call(In,$r)},ar.closest=function(Vt){return Vt&&this[0]?this.is(Vt)?this.filter(Vt):this.parent().closest(Vt):Gt()},ar.parents=function(Vt){var In,$r=[];return this.each(function(fi,pa){for(In=pa;In&&In.parentNode&&In!==r.body.parentNode;)In=In.parentNode,(!Vt||Vt&&ir(In,Vt))&&$r.push(In)}),Gt(mi($r))},ar.prev=function(){return Gt(this[0]&&this[0].previousElementSibling)},ar.siblings=function(){var Vt=this[0];return this.parent().children().filter(function($r,In){return In!==Vt})};const ap=Gt},2097:(d,a,e)=>{e.d(a,{AU:()=>Us,BC:()=>ur,C8:()=>Dn,Ch:()=>wr,Ci:()=>xt,D8:()=>w,G2:()=>sr,GW:()=>Nr,GZ:()=>ar,I6:()=>ae,LJ:()=>mi,Sc:()=>Ot,X6:()=>be,Xy:()=>ir,YZ:()=>B,ZQ:()=>C,a_:()=>Gt,af:()=>fo,bG:()=>lt,cx:()=>ne,ir:()=>ti,kk:()=>Sa,on:()=>Ha,rp:()=>_o,v$:()=>gn,yL:()=>Fn,zN:()=>Se});var r=e(5706),o=function(yo,Oo,Li){if(Li||2===arguments.length)for(var ea,la=0,ta=Oo.length;la<ta;la++)(ea||!(la in Oo))&&(ea||(ea=Array.prototype.slice.call(Oo,0,la)),ea[la]=Oo[la]);return yo.concat(ea||Array.prototype.slice.call(Oo))},w="transitionend oTransitionEnd transitionend webkitTransitionEnd",C=function(yo){return yo?.nodeType===Node.DOCUMENT_NODE},B=function(yo){var Oo=yo&&yo.parentNode;Oo&&Oo.removeChild(yo)};function ne(){for(var yo=[],Oo=0;Oo<arguments.length;Oo++)yo[Oo]=arguments[Oo];return(Array.isArray(yo[0])?yo[0]:o([],yo,!0)).filter(Boolean).join(" ")}var ae=function(yo,Oo){return yo.querySelectorAll(Oo)},be=function(yo,Oo){return void 0===Oo&&(Oo={}),yo&&yo.setAttribute&&(0,r.each)(Oo,function(Li,la){return yo.setAttribute(la,Li)})},Se=function(yo){var Oo;return yo&&!!(yo.offsetWidth||yo.offsetHeight||null!==(Oo=yo.getClientRects)&&void 0!==Oo&&Oo.call(yo).length)},lt=function(yo,Oo){var Li;null===(Li=yo.parentNode)||void 0===Li||Li.replaceChild(Oo,yo)},Ot=function(yo,Oo,Li){var la=yo.childNodes,ta=la.length,ea=(0,r.isUndefined)(Li)?ta:Li;(0,r.isString)(Oo)&&(yo.insertAdjacentHTML("beforeEnd",Oo),yo.removeChild(Oo=yo.lastChild)),ea>=ta?yo.appendChild(Oo):yo.insertBefore(Oo,la[ea])},ur=function(yo,Oo){return Ot(yo,Oo)},Gt=function(yo,Oo,Li){void 0===Oo&&(Oo={});var la=document.createElement(yo);return Oo&&(0,r.each)(Oo,function(ta,ea){return la.setAttribute(ea,ta)}),Li&&((0,r.isString)(Li)?la.innerHTML=Li:la.appendChild(Li)),la},ar=function(yo){return document.createTextNode(yo)},Fn=function(yo,Oo){var Li,la=yo.type;try{Li=new window[Oo](la,yo)}catch{(Li=document.createEvent(Oo)).initEvent(la,!0,!0)}return Li._parentEvent=yo,0===la.indexOf("key")&&(Li.keyCodeVal=yo.keyCode,["keyCode","which"].forEach(function(ta){Object.defineProperty(Li,ta,{get:function(){return this.keyCodeVal}})})),Li},fo=function(yo,Oo){void 0===Oo&&(Oo=[]),(Array.isArray(Oo)?Oo:[Oo]).forEach(function(la){var ea=la.attributes||{},is=document.createElement(la.tag||"div");(0,r.each)(ea,function(ps,Pa){is.setAttribute(Pa,ps)}),yo.appendChild(is)})},ti=function(yo){return yo?.nodeType===Node.TEXT_NODE},Nr=function(yo){return yo&&!ti(yo)&&!function(yo){return yo?.nodeType===Node.COMMENT_NODE}(yo)},Dn=function(yo){var Li,Oo={top:0,left:0,width:0,height:0};if(!yo)return Oo;if(ti(yo)){var la=document.createRange();la.selectNode(yo),Li=la.getBoundingClientRect(),la.detach()}return Li||(yo.getBoundingClientRect?yo.getBoundingClientRect():Oo)},ir=function(yo){var Oo=yo?.ownerDocument||document,Li=Oo.documentElement,la=Oo.defaultView||window;return{x:(la.pageXOffset||Li.scrollLeft||0)-(Li.clientLeft||0),y:(la.pageYOffset||Li.scrollTop||0)-(Li.clientTop||0)}},Bt=function(yo){return yo.which||yo.keyCode},wr=function(yo){return String.fromCharCode(Bt(yo))},sr=function(yo){return yo.touches&&yo.touches[0]?yo.touches[0]:yo},gn=function(yo){return 27===Bt(yo)},xt=function(yo){return 13===Bt(yo)},_o=function(yo){return function(yo){return yo.ctrlKey}(yo)||yo.metaKey},mi=function(yo){if(!yo)return"";var Oo=yo.name,Li=yo.publicId,la=yo.systemId,ta=Li?' PUBLIC "'.concat(Li,'"'):"",ea=!Li&&la?' SYSTEM "'.concat(la,'"'):"";return"<!DOCTYPE ".concat(Oo).concat(ta).concat(ea,">")},Sa=function(yo){void 0===yo&&(yo={});var Oo=[];return(0,r.each)(yo,function(Li,la){return Oo.push("".concat(la,'="').concat(Li,'"'))}),Oo.join(" ")},Ha=function(yo,Oo,Li,la){var ta=Oo.split(/\s+/),ea=(0,r.isArray)(yo)?yo:[yo];ta.forEach(function(is){ea.forEach(function(ps){return ps?.addEventListener(is,Li,la)})})},Us=function(yo,Oo,Li,la){var ta=Oo.split(/\s+/),ea=(0,r.isArray)(yo)?yo:[yo];ta.forEach(function(is){ea.forEach(function(ps){return ps?.removeEventListener(is,Li,la)})})}},9195:(d,a,e)=>{e.r(a),e.d(a,{appendStyles:()=>jn,buildBase64UrlFromSvg:()=>Pa,camelCase:()=>Bt,capitalize:()=>yo,createId:()=>ps,deepMerge:()=>mi,escape:()=>Eo,escapeNodeContent:()=>_o,find:()=>xt,get:()=>ae,getComponentModel:()=>ea,getComponentView:()=>ta,getElement:()=>gn,getGlobal:()=>Gt,getModel:()=>Sa,getUiClass:()=>ti,getUnitFromValue:()=>Dn,getViewEl:()=>Li,hasDnd:()=>sr,hasWin:()=>ur,isBultInMethod:()=>Se,isComponent:()=>la,isDef:()=>Ot,isEmptyObj:()=>Us,isObject:()=>Ha,isRule:()=>Oo,matches:()=>fo,normalizeFloat:()=>wr,normalizeKey:()=>We,serialize:()=>be,setViewEl:()=>is,shallowDiff:()=>Nr,stringToPath:()=>B,toLowerCase:()=>ar,upFirst:()=>ir,wait:()=>lt});var r=e(5706),o=e(2097),c=function(){return c=Object.assign||function(wn){for(var Hi,Ji=1,bs=arguments.length;Ji<bs;Ji++)for(var Xa in Hi=arguments[Ji])Object.prototype.hasOwnProperty.call(Hi,Xa)&&(wn[Xa]=Hi[Xa]);return wn},c.apply(this,arguments)},b={},w=/\\(\\)?/g,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B=function(wn){var Hi=[];return 46===wn.charCodeAt(0)&&Hi.push(""),wn.replace(C,function(Ji,bs,Xa,Na){return Hi.push(Xa?Na.replace(w,"$1"):bs||Ji),""}),Hi},ae=function(wn,Hi,Ji){for(var bs,Xa=function ne(wn,Hi){return(0,r.isArray)(wn)?wn:Hi.hasOwnProperty(wn)?[wn]:B(wn)}(Hi,wn),Na=Xa.length,it=0;null!=wn&&it<Na;)wn=wn["".concat(Xa[it++])];return null!==(bs=it&&it==Na?wn:void 0)&&void 0!==bs?bs:Ji},be=function(wn){return JSON.parse(JSON.stringify(wn))},Se=function(wn){return(0,r.isFunction)(b[wn])},We=function(wn){return Se(wn)?"_".concat(wn):wn},lt=function(wn){return void 0===wn&&(wn=0),new Promise(function(Hi){return setTimeout(Hi,wn)})},Ot=function(wn){return typeof wn<"u"},ur=function(){return typeof window<"u"},Gt=function(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:e.g},ar=function(wn){return(wn||"").toLowerCase()},Fn=ur()?window.Element.prototype:{},fo=Fn.matches||Fn.webkitMatchesSelector||Fn.mozMatchesSelector||Fn.msMatchesSelector,ti=function(wn,Hi){var Ji=wn.getConfig();return[Ji.customUI&&"".concat(Ji.stylePrefix,"cui"),Hi].filter(function(Na){return Na}).join(" ")},jn=function(wn,Hi){void 0===Hi&&(Hi={});var Ji=(0,r.isArray)(wn)?function(wn,Hi,Ji){if(Ji||2===arguments.length)for(var Na,bs=0,Xa=Hi.length;bs<Xa;bs++)(Na||!(bs in Hi))&&(Na||(Na=Array.prototype.slice.call(Hi,0,bs)),Na[bs]=Hi[bs]);return wn.concat(Na||Array.prototype.slice.call(Hi))}([],wn,!0):[wn];if(Ji.length){var bs=Ji.shift();if(bs&&(!Hi.unique||!document.querySelector('link[href="'.concat(bs,'"]')))){var Xa=document.head,Na=document.createElement("link");Na.href=bs,Na.rel="stylesheet",Hi.prepand?Xa.insertBefore(Na,Xa.firstChild):Xa.appendChild(Na)}jn(Ji)}},Nr=function(wn,Hi){var Ji={},bs=(0,r.keys)(Hi);for(var Xa in wn)if(wn.hasOwnProperty(Xa)){var Na=wn[Xa],it=Hi[Xa];bs.indexOf(Xa)>=0?Na!==it&&(Ji[Xa]=it):Ji[Xa]=null}for(var Xa in Hi)Hi.hasOwnProperty(Xa)&&(0,r.isUndefined)(wn[Xa])&&(Ji[Xa]=Hi[Xa]);return Ji},Dn=function(wn){return wn.replace(parseFloat(wn),"")},ir=function(wn){return wn[0].toUpperCase()+wn.toLowerCase().slice(1)},Bt=function(wn){return wn.replace(/-./g,function(Hi){return Hi[1].toUpperCase()})},wr=function(wn,Hi,Ji){void 0===Hi&&(Hi=1),void 0===Ji&&(Ji=0);var bs=0;if(isNaN(wn))return Ji;if(wn=parseFloat(wn),Math.floor(wn)!==wn){var Xa=Hi.toString().split(".")[1];bs=Xa?Xa.length:0}return bs?parseFloat(wn.toFixed(bs)):wn},sr=function(wn){return"draggable"in document.createElement("i")&&(!wn||wn.config.nativeDnD)},gn=function(wn){return(0,r.isElement)(wn)||(0,o.ir)(wn)?wn:wn&&wn.getEl?wn.getEl():void 0},xt=function(wn,Hi){var Ji=null;return wn.some(function(bs,Xa){return Hi(bs,Xa,wn)?(Ji=bs,1):0}),Ji},Eo=function(wn){return void 0===wn&&(wn=""),"".concat(wn).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/`/g,"&#96;")},_o=function(wn){return void 0===wn&&(wn=""),"".concat(wn).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},mi=function(){for(var wn=[],Hi=0;Hi<arguments.length;Hi++)wn[Hi]=arguments[Hi];for(var Ji=c({},wn[0]),bs=1;bs<wn.length;bs++){var Xa=c({},wn[bs]);for(var Na in Xa){var it=Ji[Na],Yt=Xa[Na];Ji[Na]=Ha(it)&&Ha(Yt)?mi(it,Yt):Yt}}return Ji},Sa=function(wn,Hi){var Ji;return!Hi&&wn&&wn.__cashData?Ji=wn.__cashData.model:Hi&&(0,r.isElement)(wn)&&(Ji=Hi(wn).data("model")),Ji},Ha=function(wn){return wn&&!Array.isArray(wn)&&"object"==typeof wn},Us=function(wn){return Object.keys(wn).length<=0},yo=function(wn){return void 0===wn&&(wn=""),wn&&wn.charAt(0).toUpperCase()+wn.substring(1)},Oo=function(wn){return wn&&wn.toCSS},Li=function(wn){return wn?.__gjsv},la=function(wn){return!!wn?.toHTML},ta=function(wn){return Li(wn)},ea=function(wn){var Hi;return null===(Hi=ta(wn))||void 0===Hi?void 0:Hi.model},is=function(wn,Hi){wn.__gjsv=Hi},ps=function(wn){void 0===wn&&(wn=16);for(var Hi="",Xa=0;Xa<wn;Xa++)Hi+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return Hi},Pa=function(wn){if(wn&&"<svg"===wn.substr(0,4)){var Hi="";return ur()?Hi=window.btoa(wn):typeof Buffer<"u"&&(Hi=Buffer.from(wn,"utf8").toString("base64")),Hi?"data:image/svg+xml;base64,".concat(Hi):wn}return wn}},3253:(d,a,e)=>{e.d(a,{h:()=>c});var b,r=e(3161),o=(b=function(w,C){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,ne){B.__proto__=ne}||function(B,ne){for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(B[ae]=ne[ae])})(w,C)},function(w,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function B(){this.constructor=w}b(w,C),w.prototype=null===C?Object.create(C):(B.prototype=C.prototype,new B)}),c=function(b){function w(){var C=null!==b&&b.apply(this,arguments)||this;return C.displayCache=new Map,C}return o(w,b),w.prototype.getChildren=function(){return this.getDisplayedChildren()},w.prototype.getDisplayedChildren=function(){var C=this;return this.model.components().filter(function(ae){return C.isChildDisplayed(ae)}).map(function(ae){return new C.constructor(ae)})},w.prototype.isChildDisplayed=function(C){if(this.displayCache.has(C))return this.displayCache.get(C);var ne=function g(b){return!!b&&"object"==typeof b&&b.nodeType===Node.ELEMENT_NODE&&"none"!==window.getComputedStyle(b).display&&b.offsetWidth>0&&b.offsetHeight>0}(C.getEl());return this.displayCache.set(C,ne),ne},w.prototype.getParent=function(){var C=this.model.parent();return C?new this.constructor(C):null},w.prototype.addChildAt=function(C,B,ne){var ae,be,Se,We,lt,Ot,ur,Gt;if(void 0===ne&&(ne={action:"add-component"}),(null===(be=null===(ae=this.model)||void 0===ae?void 0:ae.isInstanceOf)||void 0===be?void 0:be.call(ae,"text"))&&(null===(We=null===(Se=C?.model)||void 0===Se?void 0:Se.get)||void 0===We?void 0:We.call(Se,"textable")))return null===(Gt=null===(ur=null===(Ot=null===(lt=this.model)||void 0===lt?void 0:lt.getView)||void 0===Ot?void 0:Ot.call(lt))||void 0===ur?void 0:ur.insertComponent)||void 0===Gt?void 0:Gt.call(ur,C?.model,{action:ne.action});var Fn=this.model.components().add(C.model,{at:this.getRealIndex(B),action:ne.action});return new this.constructor(Fn)},w.prototype.removeChildAt=function(C,B){void 0===B&&(B={temporary:!1});var ne=this.model.components().at(this.getRealIndex(C));ne&&this.model.components().remove(ne,B)},w.prototype.indexOfChild=function(C){return this.getDisplayIndex(C)},w.prototype.getDisplayIndex=function(C){var B=this.getDisplayedChildren();return B?B.findIndex(function(ne){return ne.model===C.model}):-1},w.prototype.getRealIndex=function(C){if(-1===C)return-1;for(var B=0,ne=this.model.components(),ae=0;ae<ne.length;ae++){var be=ne.at(ae);if(this.isChildDisplayed(be)&&B++,B===C+1)return ae}return-1},w.prototype.canMove=function(C,B){return this.model.em.Components.canMove(this.model,C.model,this.getRealIndex(B)).result},w.prototype.restNodeState=function(){this.clearState();var C=this.model;this.setContentEditable(!1),C.em.getEditing()===C&&this.disableEditing()},w.prototype.setContentEditable=function(C){this.element&&this.isTextNode()&&(this.element.contentEditable=C?"true":"false")},w.prototype.disableEditing=function(){var C,B;null===(B=null===(C=this.view)||void 0===C?void 0:C.disableEditing)||void 0===B||B.call(C)},w.prototype.clearState=function(){var C,B;null===(B=(C=this.model).set)||void 0===B||B.call(C,"status","")},w.prototype.setSelectedParentState=function(){var C,B;null===(B=(C=this.model).set)||void 0===B||B.call(C,"status","selected-parent")},w.prototype.isTextNode=function(){var C,B;return null===(B=(C=this.model).isInstanceOf)||void 0===B?void 0:B.call(C,"text")},w.prototype.isTextable=function(){var C,B;return null===(B=(C=this.model).get)||void 0===B?void 0:B.call(C,"textable")},w}(r.$)},6778:(d,a,e)=>{e.d(a,{A:()=>g});var b,r=e(3253),o=(b=function(w,C){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,ne){B.__proto__=ne}||function(B,ne){for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(B[ae]=ne[ae])})(w,C)},function(w,C){if("function"!=typeof C&&null!==C)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");function B(){this.constructor=w}b(w,C),w.prototype=null===C?Object.create(C):(B.prototype=C.prototype,new B)}),c=function(b){function w(){var C=null!==b&&b.apply(this,arguments)||this;return C._dropAreaConfig={ratio:.8,minUndroppableDimension:1,maxUndroppableDimension:15},C}return o(w,b),Object.defineProperty(w.prototype,"view",{get:function(){var C,B;return null===(B=(C=this.model).getView)||void 0===B?void 0:B.call(C)},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"element",{get:function(){var C,B;return null===(B=(C=this.model).getEl)||void 0===B?void 0:B.call(C)},enumerable:!1,configurable:!0}),w}(r.h);const g=c},3161:(d,a,e)=>{e.d(a,{$:()=>r});var r=function(){function o(c,g){void 0===g&&(g={}),this._dropAreaConfig={ratio:1,minUndroppableDimension:0,maxUndroppableDimension:0},this._model=c,this._dragSource=g}return Object.defineProperty(o.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dragSource",{get:function(){return this._dragSource},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"dropArea",{get:function(){var c,g;return this.getParent()?null===(g=this.nodeDimensions)||void 0===g?void 0:g.getDropArea(this._dropAreaConfig):null===(c=this.nodeDimensions)||void 0===c?void 0:c.clone()},enumerable:!1,configurable:!0}),o.prototype.isWithinDropBounds=function(c,g){return!!this.dropArea&&this.dropArea.isWithinBounds(c,g)},o.prototype.equals=function(c){return!!c?._model&&this._model===c._model},o.prototype.adjustDimensions=function(c){var g,b;0===c.topDifference&&0===c.leftDifference||(null===(g=this.nodeDimensions)||void 0===g||g.adjustDimensions(c),null===(b=this.childrenDimensions)||void 0===b||b.forEach(function(w){return w.adjustDimensions(c)}))},o}()},2128:(d,a,e)=>{e.d(a,{A:()=>r});var r=function(o){return o.Vertical="Vertical",o.Horizontal="Horizontal",o.BothDirections="BothDirections",o}(r||{})},585:(d,a,e)=>{var r={"./CanvasClear":371,"./CanvasClear.ts":371,"./CanvasMove":6301,"./CanvasMove.ts":6301,"./CommandAbstract":5301,"./CommandAbstract.ts":5301,"./ComponentDelete":8542,"./ComponentDelete.ts":8542,"./ComponentDrag":1319,"./ComponentDrag.ts":1319,"./ComponentEnter":1859,"./ComponentEnter.ts":1859,"./ComponentExit":3709,"./ComponentExit.ts":3709,"./ComponentNext":2860,"./ComponentNext.ts":2860,"./ComponentPrev":4944,"./ComponentPrev.ts":4944,"./ComponentStyleClear":767,"./ComponentStyleClear.ts":767,"./CopyComponent":2126,"./CopyComponent.ts":2126,"./ExportTemplate":4860,"./ExportTemplate.ts":4860,"./Fullscreen":1085,"./Fullscreen.ts":1085,"./MoveComponent":9622,"./MoveComponent.ts":9622,"./OpenAssets":8481,"./OpenAssets.ts":8481,"./OpenBlocks":3666,"./OpenBlocks.ts":3666,"./OpenLayers":5838,"./OpenLayers.ts":5838,"./OpenStyleManager":8692,"./OpenStyleManager.ts":8692,"./OpenTraitManager":9163,"./OpenTraitManager.ts":9163,"./PasteComponent":9298,"./PasteComponent.ts":9298,"./Preview":8594,"./Preview.ts":8594,"./Resize":7604,"./Resize.ts":7604,"./SelectComponent":4596,"./SelectComponent.ts":4596,"./SelectPosition":2983,"./SelectPosition.ts":2983,"./ShowOffset":9490,"./ShowOffset.ts":9490,"./SwitchVisibility":1396,"./SwitchVisibility.ts":1396};function o(g){var b=c(g);return e(b)}function c(g){if(!e.o(r,g)){var b=new Error("Cannot find module '"+g+"'");throw b.code="MODULE_NOT_FOUND",b}return r[g]}o.keys=function(){return Object.keys(r)},o.resolve=c,d.exports=o,o.id=585},5706:(d,a,e)=>{e.r(a),e.d(a,{VERSION:()=>o,after:()=>Hm,all:()=>hg,allKeys:()=>ca,any:()=>x_,assign:()=>Fu,before:()=>w_,bind:()=>Ev,bindAll:()=>y_,chain:()=>Sy,chunk:()=>Gm,clone:()=>Hh,collect:()=>rd,compact:()=>R2,compose:()=>wm,constant:()=>Na,contains:()=>wp,countBy:()=>L2,create:()=>zu,debounce:()=>zm,default:()=>Pv,defaults:()=>vm,defer:()=>yf,delay:()=>pg,detect:()=>gs,difference:()=>N1,drop:()=>Kg,each:()=>Ds,escape:()=>Ii,every:()=>hg,extend:()=>sp,extendOwn:()=>Fu,filter:()=>qp,find:()=>gs,findIndex:()=>fg,findKey:()=>Gh,findLastIndex:()=>Dv,findWhere:()=>ll,first:()=>E_,flatten:()=>j1,foldl:()=>$h,foldr:()=>bp,forEach:()=>Ds,functions:()=>Ru,get:()=>Cd,groupBy:()=>k2,has:()=>Gf,head:()=>E_,identity:()=>Cc,include:()=>wp,includes:()=>wp,indexBy:()=>I1,indexOf:()=>Cm,initial:()=>nd,inject:()=>$h,intersection:()=>j2,invert:()=>lu,invoke:()=>S2,isArguments:()=>Ji,isArray:()=>Pa,isArrayBuffer:()=>Ha,isBoolean:()=>Bt,isDataView:()=>ps,isDate:()=>Eo,isElement:()=>wr,isEmpty:()=>er,isEqual:()=>Ia,isError:()=>mi,isFinite:()=>bs,isFunction:()=>Oo,isMap:()=>In,isMatch:()=>un,isNaN:()=>Xa,isNull:()=>Dn,isNumber:()=>xt,isObject:()=>Nr,isRegExp:()=>_o,isSet:()=>pa,isString:()=>gn,isSymbol:()=>Sa,isTypedArray:()=>$n,isUndefined:()=>ir,isWeakMap:()=>fi,isWeakSet:()=>ms,iteratee:()=>rl,keys:()=>Ns,last:()=>O_,lastIndexOf:()=>ws,map:()=>rd,mapObject:()=>_m,matcher:()=>Ua,matches:()=>Ua,max:()=>k1,memoize:()=>Py,methods:()=>Ru,min:()=>L1,mixin:()=>ky,negate:()=>b_,noop:()=>ym,now:()=>At,object:()=>N2,omit:()=>C_,once:()=>xm,pairs:()=>Ud,partial:()=>dg,partition:()=>R1,pick:()=>F1,pluck:()=>X0,property:()=>lp,propertyOf:()=>Ai,random:()=>wh,range:()=>S_,reduce:()=>$h,reduceRight:()=>bp,reject:()=>Jh,rest:()=>Kg,restArguments:()=>jn,result:()=>Ty,sample:()=>eb,select:()=>qp,shuffle:()=>M2,size:()=>I2,some:()=>x_,sortBy:()=>A2,sortedIndex:()=>Tv,tail:()=>Kg,take:()=>E_,tap:()=>nc,template:()=>Zg,templateSettings:()=>jl,throttle:()=>My,times:()=>Rs,toArray:()=>Sv,toPath:()=>Hf,transpose:()=>T_,unescape:()=>fl,union:()=>F2,uniq:()=>D_,unique:()=>D_,uniqueId:()=>xv,unzip:()=>T_,values:()=>$s,where:()=>P2,without:()=>nb,wrap:()=>up,zip:()=>U1});var r={};e.r(r),e.d(r,{VERSION:()=>o,after:()=>Hm,all:()=>hg,allKeys:()=>ca,any:()=>x_,assign:()=>Fu,before:()=>w_,bind:()=>Ev,bindAll:()=>y_,chain:()=>Sy,chunk:()=>Gm,clone:()=>Hh,collect:()=>rd,compact:()=>R2,compose:()=>wm,constant:()=>Na,contains:()=>wp,countBy:()=>L2,create:()=>zu,debounce:()=>zm,default:()=>U2,defaults:()=>vm,defer:()=>yf,delay:()=>pg,detect:()=>gs,difference:()=>N1,drop:()=>Kg,each:()=>Ds,escape:()=>Ii,every:()=>hg,extend:()=>sp,extendOwn:()=>Fu,filter:()=>qp,find:()=>gs,findIndex:()=>fg,findKey:()=>Gh,findLastIndex:()=>Dv,findWhere:()=>ll,first:()=>E_,flatten:()=>j1,foldl:()=>$h,foldr:()=>bp,forEach:()=>Ds,functions:()=>Ru,get:()=>Cd,groupBy:()=>k2,has:()=>Gf,head:()=>E_,identity:()=>Cc,include:()=>wp,includes:()=>wp,indexBy:()=>I1,indexOf:()=>Cm,initial:()=>nd,inject:()=>$h,intersection:()=>j2,invert:()=>lu,invoke:()=>S2,isArguments:()=>Ji,isArray:()=>Pa,isArrayBuffer:()=>Ha,isBoolean:()=>Bt,isDataView:()=>ps,isDate:()=>Eo,isElement:()=>wr,isEmpty:()=>er,isEqual:()=>Ia,isError:()=>mi,isFinite:()=>bs,isFunction:()=>Oo,isMap:()=>In,isMatch:()=>un,isNaN:()=>Xa,isNull:()=>Dn,isNumber:()=>xt,isObject:()=>Nr,isRegExp:()=>_o,isSet:()=>pa,isString:()=>gn,isSymbol:()=>Sa,isTypedArray:()=>$n,isUndefined:()=>ir,isWeakMap:()=>fi,isWeakSet:()=>ms,iteratee:()=>rl,keys:()=>Ns,last:()=>O_,lastIndexOf:()=>ws,map:()=>rd,mapObject:()=>_m,matcher:()=>Ua,matches:()=>Ua,max:()=>k1,memoize:()=>Py,methods:()=>Ru,min:()=>L1,mixin:()=>ky,negate:()=>b_,noop:()=>ym,now:()=>At,object:()=>N2,omit:()=>C_,once:()=>xm,pairs:()=>Ud,partial:()=>dg,partition:()=>R1,pick:()=>F1,pluck:()=>X0,property:()=>lp,propertyOf:()=>Ai,random:()=>wh,range:()=>S_,reduce:()=>$h,reduceRight:()=>bp,reject:()=>Jh,rest:()=>Kg,restArguments:()=>jn,result:()=>Ty,sample:()=>eb,select:()=>qp,shuffle:()=>M2,size:()=>I2,some:()=>x_,sortBy:()=>A2,sortedIndex:()=>Tv,tail:()=>Kg,take:()=>E_,tap:()=>nc,template:()=>Zg,templateSettings:()=>jl,throttle:()=>My,times:()=>Rs,toArray:()=>Sv,toPath:()=>Hf,transpose:()=>T_,unescape:()=>fl,union:()=>F2,uniq:()=>D_,unique:()=>D_,uniqueId:()=>xv,unzip:()=>T_,values:()=>$s,where:()=>P2,without:()=>nb,wrap:()=>up,zip:()=>U1});var o="1.13.1",c="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},g=Array.prototype,b=Object.prototype,w=typeof Symbol<"u"?Symbol.prototype:null,C=g.push,B=g.slice,ne=b.toString,ae=b.hasOwnProperty,be=typeof ArrayBuffer<"u",Se=typeof DataView<"u",We=Array.isArray,lt=Object.keys,Ot=Object.create,ur=be&&ArrayBuffer.isView,Gt=isNaN,ar=isFinite,Fn=!{toString:null}.propertyIsEnumerable("toString"),fo=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ti=Math.pow(2,53)-1;function jn(nt,Rt){return Rt=null==Rt?nt.length-1:+Rt,function(){for(var Wr=Math.max(arguments.length-Rt,0),en=Array(Wr),Gn=0;Gn<Wr;Gn++)en[Gn]=arguments[Gn+Rt];switch(Rt){case 0:return nt.call(this,en);case 1:return nt.call(this,arguments[0],en);case 2:return nt.call(this,arguments[0],arguments[1],en)}var Nn=Array(Rt+1);for(Gn=0;Gn<Rt;Gn++)Nn[Gn]=arguments[Gn];return Nn[Rt]=en,nt.apply(this,Nn)}}function Nr(nt){var Rt=typeof nt;return"function"===Rt||"object"===Rt&&!!nt}function Dn(nt){return null===nt}function ir(nt){return void 0===nt}function Bt(nt){return!0===nt||!1===nt||"[object Boolean]"===ne.call(nt)}function wr(nt){return!(!nt||1!==nt.nodeType)}function sr(nt){var Rt="[object "+nt+"]";return function(Wr){return ne.call(Wr)===Rt}}const gn=sr("String"),xt=sr("Number"),Eo=sr("Date"),_o=sr("RegExp"),mi=sr("Error"),Sa=sr("Symbol"),Ha=sr("ArrayBuffer");var Us=sr("Function");"object"!=typeof Int8Array&&"function"!=typeof(c.document&&c.document.childNodes)&&(Us=function(nt){return"function"==typeof nt||!1});const Oo=Us,Li=sr("Object");var la=Se&&Li(new DataView(new ArrayBuffer(8))),ta=typeof Map<"u"&&Li(new Map),ea=sr("DataView");const ps=la?function is(nt){return null!=nt&&Oo(nt.getInt8)&&Ha(nt.buffer)}:ea,Pa=We||sr("Array");function wn(nt,Rt){return null!=nt&&ae.call(nt,Rt)}var Hi=sr("Arguments");!function(){Hi(arguments)||(Hi=function(nt){return wn(nt,"callee")})}();const Ji=Hi;function bs(nt){return!Sa(nt)&&ar(nt)&&!isNaN(parseFloat(nt))}function Xa(nt){return xt(nt)&&Gt(nt)}function Na(nt){return function(){return nt}}function it(nt){return function(Rt){var Wr=nt(Rt);return"number"==typeof Wr&&Wr>=0&&Wr<=ti}}function Yt(nt){return function(Rt){return Rt?.[nt]}}const Or=Yt("byteLength"),An=it(Or);var ho=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const $n=be?function Cr(nt){return ur?ur(nt)&&!ps(nt):An(nt)&&ho.test(ne.call(nt))}:Na(!1),Cn=Yt("length");function Qs(nt,Rt){Rt=function Qa(nt){for(var Rt={},Wr=nt.length,en=0;en<Wr;++en)Rt[nt[en]]=!0;return{contains:function(Gn){return Rt[Gn]},push:function(Gn){return Rt[Gn]=!0,nt.push(Gn)}}}(Rt);var Wr=fo.length,en=nt.constructor,Gn=Oo(en)&&en.prototype||b,Nn="constructor";for(wn(nt,Nn)&&!Rt.contains(Nn)&&Rt.push(Nn);Wr--;)(Nn=fo[Wr])in nt&&nt[Nn]!==Gn[Nn]&&!Rt.contains(Nn)&&Rt.push(Nn)}function Ns(nt){if(!Nr(nt))return[];if(lt)return lt(nt);var Rt=[];for(var Wr in nt)wn(nt,Wr)&&Rt.push(Wr);return Fn&&Qs(nt,Rt),Rt}function er(nt){if(null==nt)return!0;var Rt=Cn(nt);return"number"==typeof Rt&&(Pa(nt)||gn(nt)||Ji(nt))?0===Rt:0===Cn(Ns(nt))}function un(nt,Rt){var Wr=Ns(Rt),en=Wr.length;if(null==nt)return!en;for(var Gn=Object(nt),Nn=0;Nn<en;Nn++){var di=Wr[Nn];if(Rt[di]!==Gn[di]||!(di in Gn))return!1}return!0}function Mt(nt){return nt instanceof Mt?nt:this instanceof Mt?void(this._wrapped=nt):new Mt(nt)}function si(nt){return new Uint8Array(nt.buffer||nt,nt.byteOffset||0,Or(nt))}Mt.VERSION=o,Mt.prototype.valueOf=Mt.prototype.toJSON=Mt.prototype.value=function(){return this._wrapped},Mt.prototype.toString=function(){return String(this._wrapped)};var eo="[object DataView]";function Si(nt,Rt,Wr,en){if(nt===Rt)return 0!==nt||1/nt==1/Rt;if(null==nt||null==Rt)return!1;if(nt!=nt)return Rt!=Rt;var Gn=typeof nt;return("function"===Gn||"object"===Gn||"object"==typeof Rt)&&Ma(nt,Rt,Wr,en)}function Ma(nt,Rt,Wr,en){nt instanceof Mt&&(nt=nt._wrapped),Rt instanceof Mt&&(Rt=Rt._wrapped);var Gn=ne.call(nt);if(Gn!==ne.call(Rt))return!1;if(la&&"[object Object]"==Gn&&ps(nt)){if(!ps(Rt))return!1;Gn=eo}switch(Gn){case"[object RegExp]":case"[object String]":return""+nt==""+Rt;case"[object Number]":return+nt!=+nt?+Rt!=+Rt:0==+nt?1/+nt==1/Rt:+nt==+Rt;case"[object Date]":case"[object Boolean]":return+nt==+Rt;case"[object Symbol]":return w.valueOf.call(nt)===w.valueOf.call(Rt);case"[object ArrayBuffer]":case eo:return Ma(si(nt),si(Rt),Wr,en)}var Nn="[object Array]"===Gn;if(!Nn&&$n(nt)){if(Or(nt)!==Or(Rt))return!1;if(nt.buffer===Rt.buffer&&nt.byteOffset===Rt.byteOffset)return!0;Nn=!0}if(!Nn){if("object"!=typeof nt||"object"!=typeof Rt)return!1;var ia=nt.constructor,cl=Rt.constructor;if(ia!==cl&&!(Oo(ia)&&ia instanceof ia&&Oo(cl)&&cl instanceof cl)&&"constructor"in nt&&"constructor"in Rt)return!1}en=en||[];for(var Xs=(Wr=Wr||[]).length;Xs--;)if(Wr[Xs]===nt)return en[Xs]===Rt;if(Wr.push(nt),en.push(Rt),Nn){if((Xs=nt.length)!==Rt.length)return!1;for(;Xs--;)if(!Si(nt[Xs],Rt[Xs],Wr,en))return!1}else{var bf,dp=Ns(nt);if(Xs=dp.length,Ns(Rt).length!==Xs)return!1;for(;Xs--;)if(!wn(Rt,bf=dp[Xs])||!Si(nt[bf],Rt[bf],Wr,en))return!1}return Wr.pop(),en.pop(),!0}function Ia(nt,Rt){return Si(nt,Rt)}function ca(nt){if(!Nr(nt))return[];var Rt=[];for(var Wr in nt)Rt.push(Wr);return Fn&&Qs(nt,Rt),Rt}function fs(nt){var Rt=Cn(nt);return function(Wr){if(null==Wr)return!1;var en=ca(Wr);if(Cn(en))return!1;for(var Gn=0;Gn<Rt;Gn++)if(!Oo(Wr[nt[Gn]]))return!1;return nt!==Vt||!Oo(Wr[bl])}}var bl="forEach",kl=["clear","delete"],Vu=["get","has","set"],ap=kl.concat(bl,Vu),Vt=kl.concat(Vu),$r=["add"].concat(kl,bl,"has");const In=ta?fs(ap):sr("Map"),fi=ta?fs(Vt):sr("WeakMap"),pa=ta?fs($r):sr("Set"),ms=sr("WeakSet");function $s(nt){for(var Rt=Ns(nt),Wr=Rt.length,en=Array(Wr),Gn=0;Gn<Wr;Gn++)en[Gn]=nt[Rt[Gn]];return en}function Ud(nt){for(var Rt=Ns(nt),Wr=Rt.length,en=Array(Wr),Gn=0;Gn<Wr;Gn++)en[Gn]=[Rt[Gn],nt[Rt[Gn]]];return en}function lu(nt){for(var Rt={},Wr=Ns(nt),en=0,Gn=Wr.length;en<Gn;en++)Rt[nt[Wr[en]]]=Wr[en];return Rt}function Ru(nt){var Rt=[];for(var Wr in nt)Oo(nt[Wr])&&Rt.push(Wr);return Rt.sort()}function zh(nt,Rt){return function(Wr){var en=arguments.length;if(Rt&&(Wr=Object(Wr)),en<2||null==Wr)return Wr;for(var Gn=1;Gn<en;Gn++)for(var Nn=arguments[Gn],di=nt(Nn),ia=di.length,cl=0;cl<ia;cl++){var Xs=di[cl];(!Rt||void 0===Wr[Xs])&&(Wr[Xs]=Nn[Xs])}return Wr}}const sp=zh(ca),Fu=zh(Ns),vm=zh(ca,!0);function ju(nt){if(!Nr(nt))return{};if(Ot)return Ot(nt);var Rt=function(){};Rt.prototype=nt;var Wr=new Rt;return Rt.prototype=null,Wr}function zu(nt,Rt){var Wr=ju(nt);return Rt&&Fu(Wr,Rt),Wr}function Hh(nt){return Nr(nt)?Pa(nt)?nt.slice():sp({},nt):nt}function nc(nt,Rt){return Rt(nt),nt}function Hf(nt){return Pa(nt)?nt:[nt]}function Zs(nt){return Mt.toPath(nt)}function Gp(nt,Rt){for(var Wr=Rt.length,en=0;en<Wr;en++){if(null==nt)return;nt=nt[Rt[en]]}return Wr?nt:void 0}function Cd(nt,Rt,Wr){var en=Gp(nt,Zs(Rt));return ir(en)?Wr:en}function Gf(nt,Rt){for(var Wr=(Rt=Zs(Rt)).length,en=0;en<Wr;en++){var Gn=Rt[en];if(!wn(nt,Gn))return!1;nt=nt[Gn]}return!!Wr}function Cc(nt){return nt}function Ua(nt){return nt=Fu({},nt),function(Rt){return un(Rt,nt)}}function lp(nt){return nt=Zs(nt),function(Rt){return Gp(Rt,nt)}}function _f(nt,Rt,Wr){if(void 0===Rt)return nt;switch(Wr??3){case 1:return function(en){return nt.call(Rt,en)};case 3:return function(en,Gn,Nn){return nt.call(Rt,en,Gn,Nn)};case 4:return function(en,Gn,Nn,di){return nt.call(Rt,en,Gn,Nn,di)}}return function(){return nt.apply(Rt,arguments)}}function Bd(nt,Rt,Wr){return null==nt?Cc:Oo(nt)?_f(nt,Rt,Wr):Nr(nt)&&!Pa(nt)?Ua(nt):lp(nt)}function rl(nt,Rt){return Bd(nt,Rt,1/0)}function Jc(nt,Rt,Wr){return Mt.iteratee!==rl?Mt.iteratee(nt,Rt):Bd(nt,Rt,Wr)}function _m(nt,Rt,Wr){Rt=Jc(Rt,Wr);for(var en=Ns(nt),Gn=en.length,Nn={},di=0;di<Gn;di++){var ia=en[di];Nn[ia]=Rt(nt[ia],ia,nt)}return Nn}function ym(){}function Ai(nt){return null==nt?ym:function(Rt){return Cd(nt,Rt)}}function Rs(nt,Rt,Wr){var en=Array(Math.max(0,nt));Rt=_f(Rt,Wr,1);for(var Gn=0;Gn<nt;Gn++)en[Gn]=Rt(Gn);return en}function wh(nt,Rt){return null==Rt&&(Rt=nt,nt=0),nt+Math.floor(Math.random()*(Rt-nt+1))}Mt.toPath=Hf,Mt.iteratee=rl;const At=Date.now||function(){return(new Date).getTime()};function Zr(nt){var Rt=function(Nn){return nt[Nn]},Wr="(?:"+Ns(nt).join("|")+")",en=RegExp(Wr),Gn=RegExp(Wr,"g");return function(Nn){return en.test(Nn=null==Nn?"":""+Nn)?Nn.replace(Gn,Rt):Nn}}const ii={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Ii=Zr(ii),fl=Zr(lu(ii)),jl=Mt.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Mc=/(.)^/,Uc={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},g_=/\\|'|\r|\n|\u2028|\u2029/g;function bm(nt){return"\\"+Uc[nt]}var xh=/^\s*(\w|\$)+\s*$/;function Zg(nt,Rt,Wr){!Rt&&Wr&&(Rt=Wr),Rt=vm({},Rt,Mt.templateSettings);var en=RegExp([(Rt.escape||Mc).source,(Rt.interpolate||Mc).source,(Rt.evaluate||Mc).source].join("|")+"|$","g"),Gn=0,Nn="__p+='";nt.replace(en,function(Xs,dp,bf,B2,B1){return Nn+=nt.slice(Gn,B1).replace(g_,bm),Gn=B1+Xs.length,dp?Nn+="'+\n((__t=("+dp+"))==null?'':_.escape(__t))+\n'":bf?Nn+="'+\n((__t=("+bf+"))==null?'':__t)+\n'":B2&&(Nn+="';\n"+B2+"\n__p+='"),Xs}),Nn+="';\n";var ia,di=Rt.variable;if(di){if(!xh.test(di))throw new Error("variable is not a bare identifier: "+di)}else Nn="with(obj||{}){\n"+Nn+"}\n",di="obj";Nn="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+Nn+"return __p;\n";try{ia=new Function(di,"_",Nn)}catch(Xs){throw Xs.source=Nn,Xs}var cl=function(Xs){return ia.call(this,Xs,Mt)};return cl.source="function("+di+"){\n"+Nn+"}",cl}function Ty(nt,Rt,Wr){var en=(Rt=Zs(Rt)).length;if(!en)return Oo(Wr)?Wr.call(nt):Wr;for(var Gn=0;Gn<en;Gn++){var Nn=nt?.[Rt[Gn]];void 0===Nn&&(Nn=Wr,Gn=en),nt=Oo(Nn)?Nn.call(nt):Nn}return nt}var v_=0;function xv(nt){var Rt=++v_+"";return nt?nt+Rt:Rt}function Sy(nt){var Rt=Mt(nt);return Rt._chain=!0,Rt}function __(nt,Rt,Wr,en,Gn){if(!(en instanceof Rt))return nt.apply(Wr,Gn);var Nn=ju(nt.prototype),di=nt.apply(Nn,Gn);return Nr(di)?di:Nn}var Cv=jn(function(nt,Rt){var Wr=Cv.placeholder,en=function(){for(var Gn=0,Nn=Rt.length,di=Array(Nn),ia=0;ia<Nn;ia++)di[ia]=Rt[ia]===Wr?arguments[Gn++]:Rt[ia];for(;Gn<arguments.length;)di.push(arguments[Gn++]);return __(nt,en,this,this,di)};return en});Cv.placeholder=Mt;const dg=Cv,Ev=jn(function(nt,Rt,Wr){if(!Oo(nt))throw new TypeError("Bind must be called on a function");var en=jn(function(Gn){return __(nt,en,Rt,this,Wr.concat(Gn))});return en}),Wd=it(Cn);function cp(nt,Rt,Wr,en){if(en=en||[],Rt||0===Rt){if(Rt<=0)return en.concat(nt)}else Rt=1/0;for(var Gn=en.length,Nn=0,di=Cn(nt);Nn<di;Nn++){var ia=nt[Nn];if(Wd(ia)&&(Pa(ia)||Ji(ia)))if(Rt>1)cp(ia,Rt-1,Wr,en),Gn=en.length;else for(var cl=0,Xs=ia.length;cl<Xs;)en[Gn++]=ia[cl++];else Wr||(en[Gn++]=ia)}return en}const y_=jn(function(nt,Rt){var Wr=(Rt=cp(Rt,!1,!1)).length;if(Wr<1)throw new Error("bindAll must be passed function names");for(;Wr--;){var en=Rt[Wr];nt[en]=Ev(nt[en],nt)}return nt});function Py(nt,Rt){var Wr=function(en){var Gn=Wr.cache,Nn=""+(Rt?Rt.apply(this,arguments):en);return wn(Gn,Nn)||(Gn[Nn]=nt.apply(this,arguments)),Gn[Nn]};return Wr.cache={},Wr}const pg=jn(function(nt,Rt,Wr){return setTimeout(function(){return nt.apply(null,Wr)},Rt)}),yf=dg(pg,Mt,1);function My(nt,Rt,Wr){var en,Gn,Nn,di,ia=0;Wr||(Wr={});var cl=function(){ia=!1===Wr.leading?0:At(),en=null,di=nt.apply(Gn,Nn),en||(Gn=Nn=null)},Xs=function(){var dp=At();!ia&&!1===Wr.leading&&(ia=dp);var bf=Rt-(dp-ia);return Gn=this,Nn=arguments,bf<=0||bf>Rt?(en&&(clearTimeout(en),en=null),ia=dp,di=nt.apply(Gn,Nn),en||(Gn=Nn=null)):!en&&!1!==Wr.trailing&&(en=setTimeout(cl,bf)),di};return Xs.cancel=function(){clearTimeout(en),ia=0,en=Gn=Nn=null},Xs}function zm(nt,Rt,Wr){var en,Gn,Nn,di,ia,cl=function(){var dp=At()-Gn;Rt>dp?en=setTimeout(cl,Rt-dp):(en=null,Wr||(di=nt.apply(ia,Nn)),en||(Nn=ia=null))},Xs=jn(function(dp){return ia=this,Nn=dp,Gn=At(),en||(en=setTimeout(cl,Rt),Wr&&(di=nt.apply(ia,Nn))),di});return Xs.cancel=function(){clearTimeout(en),en=Nn=ia=null},Xs}function up(nt,Rt){return dg(Rt,nt)}function b_(nt){return function(){return!nt.apply(this,arguments)}}function wm(){var nt=arguments,Rt=nt.length-1;return function(){for(var Wr=Rt,en=nt[Rt].apply(this,arguments);Wr--;)en=nt[Wr].call(this,en);return en}}function Hm(nt,Rt){return function(){if(--nt<1)return Rt.apply(this,arguments)}}function w_(nt,Rt){var Wr;return function(){return--nt>0&&(Wr=Rt.apply(this,arguments)),nt<=1&&(Rt=null),Wr}}const xm=dg(w_,2);function Gh(nt,Rt,Wr){Rt=Jc(Rt,Wr);for(var Gn,en=Ns(nt),Nn=0,di=en.length;Nn<di;Nn++)if(Rt(nt[Gn=en[Nn]],Gn,nt))return Gn}function Ov(nt){return function(Rt,Wr,en){Wr=Jc(Wr,en);for(var Gn=Cn(Rt),Nn=nt>0?0:Gn-1;Nn>=0&&Nn<Gn;Nn+=nt)if(Wr(Rt[Nn],Nn,Rt))return Nn;return-1}}const fg=Ov(1),Dv=Ov(-1);function Tv(nt,Rt,Wr,en){for(var Gn=(Wr=Jc(Wr,en,1))(Rt),Nn=0,di=Cn(nt);Nn<di;){var ia=Math.floor((Nn+di)/2);Wr(nt[ia])<Gn?Nn=ia+1:di=ia}return Nn}function Ay(nt,Rt,Wr){return function(en,Gn,Nn){var di=0,ia=Cn(en);if("number"==typeof Nn)nt>0?di=Nn>=0?Nn:Math.max(Nn+ia,di):ia=Nn>=0?Math.min(Nn+1,ia):Nn+ia+1;else if(Wr&&Nn&&ia)return en[Nn=Wr(en,Gn)]===Gn?Nn:-1;if(Gn!=Gn)return(Nn=Rt(B.call(en,di,ia),Xa))>=0?Nn+di:-1;for(Nn=nt>0?di:ia-1;Nn>=0&&Nn<ia;Nn+=nt)if(en[Nn]===Gn)return Nn;return-1}}const Cm=Ay(1,fg,Tv),ws=Ay(-1,Dv);function gs(nt,Rt,Wr){var Gn=(Wd(nt)?fg:Gh)(nt,Rt,Wr);if(void 0!==Gn&&-1!==Gn)return nt[Gn]}function ll(nt,Rt){return gs(nt,Ua(Rt))}function Ds(nt,Rt,Wr){var en,Gn;if(Rt=_f(Rt,Wr),Wd(nt))for(en=0,Gn=nt.length;en<Gn;en++)Rt(nt[en],en,nt);else{var Nn=Ns(nt);for(en=0,Gn=Nn.length;en<Gn;en++)Rt(nt[Nn[en]],Nn[en],nt)}return nt}function rd(nt,Rt,Wr){Rt=Jc(Rt,Wr);for(var en=!Wd(nt)&&Ns(nt),Gn=(en||nt).length,Nn=Array(Gn),di=0;di<Gn;di++){var ia=en?en[di]:di;Nn[di]=Rt(nt[ia],ia,nt)}return Nn}function qh(nt){return function(Wr,en,Gn,Nn){var di=arguments.length>=3;return function(Wr,en,Gn,Nn){var di=!Wd(Wr)&&Ns(Wr),ia=(di||Wr).length,cl=nt>0?0:ia-1;for(Nn||(Gn=Wr[di?di[cl]:cl],cl+=nt);cl>=0&&cl<ia;cl+=nt){var Xs=di?di[cl]:cl;Gn=en(Gn,Wr[Xs],Xs,Wr)}return Gn}(Wr,_f(en,Nn,4),Gn,di)}}const $h=qh(1),bp=qh(-1);function qp(nt,Rt,Wr){var en=[];return Rt=Jc(Rt,Wr),Ds(nt,function(Gn,Nn,di){Rt(Gn,Nn,di)&&en.push(Gn)}),en}function Jh(nt,Rt,Wr){return qp(nt,b_(Jc(Rt)),Wr)}function hg(nt,Rt,Wr){Rt=Jc(Rt,Wr);for(var en=!Wd(nt)&&Ns(nt),Gn=(en||nt).length,Nn=0;Nn<Gn;Nn++){var di=en?en[Nn]:Nn;if(!Rt(nt[di],di,nt))return!1}return!0}function x_(nt,Rt,Wr){Rt=Jc(Rt,Wr);for(var en=!Wd(nt)&&Ns(nt),Gn=(en||nt).length,Nn=0;Nn<Gn;Nn++){var di=en?en[Nn]:Nn;if(Rt(nt[di],di,nt))return!0}return!1}function wp(nt,Rt,Wr,en){return Wd(nt)||(nt=$s(nt)),("number"!=typeof Wr||en)&&(Wr=0),Cm(nt,Rt,Wr)>=0}const S2=jn(function(nt,Rt,Wr){var en,Gn;return Oo(Rt)?Gn=Rt:(Rt=Zs(Rt),en=Rt.slice(0,-1),Rt=Rt[Rt.length-1]),rd(nt,function(Nn){var di=Gn;if(!di){if(en&&en.length&&(Nn=Gp(Nn,en)),null==Nn)return;di=Nn[Rt]}return null==di?di:di.apply(Nn,Wr)})});function X0(nt,Rt){return rd(nt,lp(Rt))}function P2(nt,Rt){return qp(nt,Ua(Rt))}function k1(nt,Rt,Wr){var Nn,di,en=-1/0,Gn=-1/0;if(null==Rt||"number"==typeof Rt&&"object"!=typeof nt[0]&&null!=nt)for(var ia=0,cl=(nt=Wd(nt)?nt:$s(nt)).length;ia<cl;ia++)null!=(Nn=nt[ia])&&Nn>en&&(en=Nn);else Rt=Jc(Rt,Wr),Ds(nt,function(Xs,dp,bf){((di=Rt(Xs,dp,bf))>Gn||di===-1/0&&en===-1/0)&&(en=Xs,Gn=di)});return en}function L1(nt,Rt,Wr){var Nn,di,en=1/0,Gn=1/0;if(null==Rt||"number"==typeof Rt&&"object"!=typeof nt[0]&&null!=nt)for(var ia=0,cl=(nt=Wd(nt)?nt:$s(nt)).length;ia<cl;ia++)null!=(Nn=nt[ia])&&Nn<en&&(en=Nn);else Rt=Jc(Rt,Wr),Ds(nt,function(Xs,dp,bf){((di=Rt(Xs,dp,bf))<Gn||di===1/0&&en===1/0)&&(en=Xs,Gn=di)});return en}function eb(nt,Rt,Wr){if(null==Rt||Wr)return Wd(nt)||(nt=$s(nt)),nt[wh(nt.length-1)];var en=Wd(nt)?Hh(nt):$s(nt),Gn=Cn(en);Rt=Math.max(Math.min(Rt,Gn),0);for(var Nn=Gn-1,di=0;di<Rt;di++){var ia=wh(di,Nn),cl=en[di];en[di]=en[ia],en[ia]=cl}return en.slice(0,Rt)}function M2(nt){return eb(nt,1/0)}function A2(nt,Rt,Wr){var en=0;return Rt=Jc(Rt,Wr),X0(rd(nt,function(Gn,Nn,di){return{value:Gn,index:en++,criteria:Rt(Gn,Nn,di)}}).sort(function(Gn,Nn){var di=Gn.criteria,ia=Nn.criteria;if(di!==ia){if(di>ia||void 0===di)return 1;if(di<ia||void 0===ia)return-1}return Gn.index-Nn.index}),"value")}function tb(nt,Rt){return function(Wr,en,Gn){var Nn=Rt?[[],[]]:{};return en=Jc(en,Gn),Ds(Wr,function(di,ia){var cl=en(di,ia,Wr);nt(Nn,di,cl)}),Nn}}const k2=tb(function(nt,Rt,Wr){wn(nt,Wr)?nt[Wr].push(Rt):nt[Wr]=[Rt]}),I1=tb(function(nt,Rt,Wr){nt[Wr]=Rt}),L2=tb(function(nt,Rt,Wr){wn(nt,Wr)?nt[Wr]++:nt[Wr]=1}),R1=tb(function(nt,Rt,Wr){nt[Wr?0:1].push(Rt)},!0);var rb=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Sv(nt){return nt?Pa(nt)?B.call(nt):gn(nt)?nt.match(rb):Wd(nt)?rd(nt,Cc):$s(nt):[]}function I2(nt){return null==nt?0:Wd(nt)?nt.length:Ns(nt).length}function xE(nt,Rt,Wr){return Rt in Wr}const F1=jn(function(nt,Rt){var Wr={},en=Rt[0];if(null==nt)return Wr;Oo(en)?(Rt.length>1&&(en=_f(en,Rt[1])),Rt=ca(nt)):(en=xE,Rt=cp(Rt,!1,!1),nt=Object(nt));for(var Gn=0,Nn=Rt.length;Gn<Nn;Gn++){var di=Rt[Gn],ia=nt[di];en(ia,di,nt)&&(Wr[di]=ia)}return Wr}),C_=jn(function(nt,Rt){var en,Wr=Rt[0];return Oo(Wr)?(Wr=b_(Wr),Rt.length>1&&(en=Rt[1])):(Rt=rd(cp(Rt,!1,!1),String),Wr=function(Gn,Nn){return!wp(Rt,Nn)}),F1(nt,Wr,en)});function nd(nt,Rt,Wr){return B.call(nt,0,Math.max(0,nt.length-(null==Rt||Wr?1:Rt)))}function E_(nt,Rt,Wr){return null==nt||nt.length<1?null==Rt||Wr?void 0:[]:null==Rt||Wr?nt[0]:nd(nt,nt.length-Rt)}function Kg(nt,Rt,Wr){return B.call(nt,null==Rt||Wr?1:Rt)}function O_(nt,Rt,Wr){return null==nt||nt.length<1?null==Rt||Wr?void 0:[]:null==Rt||Wr?nt[nt.length-1]:Kg(nt,Math.max(0,nt.length-Rt))}function R2(nt){return qp(nt,Boolean)}function j1(nt,Rt){return cp(nt,Rt,!1)}const N1=jn(function(nt,Rt){return Rt=cp(Rt,!0,!0),qp(nt,function(Wr){return!wp(Rt,Wr)})}),nb=jn(function(nt,Rt){return N1(nt,Rt)});function D_(nt,Rt,Wr,en){Bt(Rt)||(en=Wr,Wr=Rt,Rt=!1),null!=Wr&&(Wr=Jc(Wr,en));for(var Gn=[],Nn=[],di=0,ia=Cn(nt);di<ia;di++){var cl=nt[di],Xs=Wr?Wr(cl,di,nt):cl;Rt&&!Wr?((!di||Nn!==Xs)&&Gn.push(cl),Nn=Xs):Wr?wp(Nn,Xs)||(Nn.push(Xs),Gn.push(cl)):wp(Gn,cl)||Gn.push(cl)}return Gn}const F2=jn(function(nt){return D_(cp(nt,!0,!0))});function j2(nt){for(var Rt=[],Wr=arguments.length,en=0,Gn=Cn(nt);en<Gn;en++){var Nn=nt[en];if(!wp(Rt,Nn)){var di;for(di=1;di<Wr&&wp(arguments[di],Nn);di++);di===Wr&&Rt.push(Nn)}}return Rt}function T_(nt){for(var Rt=nt&&k1(nt,Cn).length||0,Wr=Array(Rt),en=0;en<Rt;en++)Wr[en]=X0(nt,en);return Wr}const U1=jn(T_);function N2(nt,Rt){for(var Wr={},en=0,Gn=Cn(nt);en<Gn;en++)Rt?Wr[nt[en]]=Rt[en]:Wr[nt[en][0]]=nt[en][1];return Wr}function S_(nt,Rt,Wr){null==Rt&&(Rt=nt||0,nt=0),Wr||(Wr=Rt<nt?-1:1);for(var en=Math.max(Math.ceil((Rt-nt)/Wr),0),Gn=Array(en),Nn=0;Nn<en;Nn++,nt+=Wr)Gn[Nn]=nt;return Gn}function Gm(nt,Rt){if(null==Rt||Rt<1)return[];for(var Wr=[],en=0,Gn=nt.length;en<Gn;)Wr.push(B.call(nt,en,en+=Rt));return Wr}function P_(nt,Rt){return nt._chain?Mt(Rt).chain():Rt}function ky(nt){return Ds(Ru(nt),function(Rt){var Wr=Mt[Rt]=nt[Rt];Mt.prototype[Rt]=function(){var en=[this._wrapped];return C.apply(en,arguments),P_(this,Wr.apply(Mt,en))}}),Mt}Ds(["pop","push","reverse","shift","sort","splice","unshift"],function(nt){var Rt=g[nt];Mt.prototype[nt]=function(){var Wr=this._wrapped;return null!=Wr&&(Rt.apply(Wr,arguments),("shift"===nt||"splice"===nt)&&0===Wr.length&&delete Wr[0]),P_(this,Wr)}}),Ds(["concat","join","slice"],function(nt){var Rt=g[nt];Mt.prototype[nt]=function(){var Wr=this._wrapped;return null!=Wr&&(Wr=Rt.apply(Wr,arguments)),P_(this,Wr)}});const U2=Mt;var Yh=ky(r);Yh._=Yh;const Pv=Yh}},S={};function m(d){var a=S[d];if(void 0!==a)return a.exports;var e=S[d]={exports:{}};return O[d].call(e.exports,e,e.exports,m),e.exports}m.n=d=>{var a=d&&d.__esModule?()=>d.default:()=>d;return m.d(a,{a}),a},m.d=(d,a)=>{for(var e in a)m.o(a,e)&&!m.o(d,e)&&Object.defineProperty(d,e,{enumerable:!0,get:a[e]})},m.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch{if("object"==typeof window)return window}}(),m.o=(d,a)=>Object.prototype.hasOwnProperty.call(d,a),m.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var X={};m.d(X,{Ay:()=>A1,I0:()=>Q0,nu:()=>Y0});var x=m(5706),z=m(9195);function H(d){for(var a=[],e=1;e<arguments.length;e++)a[e-1]=arguments[e];var r=d.raw;return r.reduce(function(o,c,g){var b=a[g-1],w=r[g-1];return Array.isArray(b)?b=b.join(""):w&&"$"===w.slice(-1)?o=o.slice(0,-1):b=(0,z.escape)(b),o+b+c})}var d,U=m(4193),R=m.n(U),T=m(6411),L=m(1749),Y=(d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)},function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ee=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Y(a,d),a}(L.Kx),te=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Y(a,d),a.prototype.getByComponent=function(e){var r=this;return this.filter(function(o){return r.getComponent(o)===e})[0]},a.prototype.addComponent=function(e,r){var o=this,c=((0,x.isArray)(e)?e:[e]).filter(function(g){return!o.hasComponent(g)}).map(function(g){return new ee({component:g})})[0];return this.push(c,r)},a.prototype.getComponent=function(e){return e.get("component")},a.prototype.hasComponent=function(e){var r=this.getByComponent(e);return r&&this.contains(r)},a.prototype.lastComponent=function(){var e=this.last();return e?this.getComponent(e):void 0},a.prototype.allComponents=function(){var e=this;return this.map(function(r){return e.getComponent(r)}).filter(function(r){return r})},a.prototype.removeComponent=function(e,r){var o=this,c=((0,x.isArray)(e)?e:[e]).map(function(g){return o.getByComponent(g)});return this.remove(c,r)},a}(L.pM);const pe=te;var we=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Te=function(){return Te=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Te.apply(this,arguments)},Ce=function(){function d(a,e,r){this.debounced=[],this.collections=[],this.cls=[],this._em=a,this._name=e;var o=this.name.charAt(0).toLowerCase()+this.name.slice(1),c=(0,x.isUndefined)(a.config[o])?a.config[this.name]:a.config[o],g=!0===c?{}:c||{};g.pStylePrefix=a.config.pStylePrefix||"",!(0,x.isUndefined)(c)&&!c&&(g._disable=1),g.em=a,this._config=(0,z.deepMerge)(r||{},g)}return Object.defineProperty(d.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),d.prototype.render=function(a){},d.prototype.postLoad=function(a){},Object.defineProperty(d.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),d.prototype.getConfig=function(a){return a?this.config[a]:this.config},d.prototype.__logWarn=function(a,e){void 0===e&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(a),e)},d.prototype.destroy=function(){this.__destroy()},d.prototype.__destroy=function(){var a,e,r;null===(a=this.view)||void 0===a||a.remove(),null===(e=this.state)||void 0===e||e.stopListening(),null===(r=this.state)||void 0===r||r.clear(),this.debounced.forEach(function(o){return o.cancel()}),this.collections.forEach(function(o){o.stopListening(),o.reset()})},d.prototype.__appendTo=function(){var a=this.getConfig().appendTo;if(a){var e=(0,x.isElement)(a)?a:document.querySelector(a);if(!e)return this.__logWarn('"appendTo" element not found');e.appendChild(this.render())}},d}();const Oe=Ce;var je=function(d){function a(e,r,o,c,g,b){void 0===b&&(b={});var w=d.call(this,e,r,g)||this;return w.cls=[],w.private=!1,w.all=o,w.events=c,!b.skipListen&&w.__initListen(),w}return we(a,d),a.prototype.postLoad=function(e){},a.prototype.render=function(e){},a.prototype.getProjectData=function(e){var r={},o=this.storageKey;return o&&(r[o]=e||this.getAll()),r},a.prototype.loadProjectData=function(e,r){void 0===e&&(e={}),void 0===r&&(r={});var c=r.onResult,g=r.reset,w={action:"load"},C=r.all||this.all,B=e[this.storageKey];if("string"==typeof B)try{B=JSON.parse(B)}catch{this.__logWarn("Data parsing failed",{input:B})}return g&&B&&C.reset(void 0,w),c?B&&c(B,w):B&&(0,z.isDef)(B.length)&&C.reset(B,w),B},a.prototype.clear=function(e){void 0===e&&(e={});var r=this.all;return r&&r.reset(void 0,e),this},a.prototype.getAll=function(){return function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],this.all.models,!0)},a.prototype.getAllMap=function(){return this.getAll().reduce(function(e,r){return e[r.get(r.idAttribute)]=r,e},{})},a.prototype.__initListen=function(e){void 0===e&&(e={});var r=this,o=r.all,c=r.em,g=r.events;o&&c&&o.on("add",function(b,w,C){return c.trigger(g.add,b,C)}).on("remove",function(b,w,C){return c.trigger(g.remove,b,C)}).on("change",function(b,w){return c.trigger(g.update,b,b.changedAttributes(),w)}).on("all",this.__catchAllEvent,this),this.cls=[o].concat(e.collections||[]),(e.propagate||[]).forEach(function(b){var C=b.event;b.entity.on("all",function(B,ne,ae,be){var We=Te({event:B},be||ae);[c,o].map(function(lt){return lt.trigger(C,ne,We)})})})},a.prototype.__remove=function(e,r){var o=this;void 0===r&&(r={});var c=this.em,g=(0,x.isString)(e)?this.get(e):e,b=function(){return g&&o.all.remove(g,r),g};return!r.silent&&c?.trigger(this.events.removeBefore,g,b,r),!r.abort&&b()},a.prototype.__catchAllEvent=function(e,r,o,c){var b=this.em,w=this.events;b&&w.all&&b.trigger(w.all,{event:e,model:r,options:c||o}),this.__onAllEvent()},a.prototype.__appendTo=function(e){var r=this.config.appendTo;if(r){var o=(0,x.isElement)(r)?r:document.querySelector(r);if(!o)return this.__logWarn('"appendTo" element not found');o.appendChild(this.render(e))}},a.prototype.__onAllEvent=function(){},a.prototype._createId=function(e){void 0===e&&(e=16);var g,o=this.getAll().length+e,c=this.getAllMap();do{g=(0,z.createId)(o)}while(c[g]);return g},a.prototype.__listenAdd=function(e,r){var o=this;e.on("add",function(c,g,b){return o.em.trigger(r,c,b)})},a.prototype.__listenRemove=function(e,r){var o=this;e.on("remove",function(c,g,b){return o.em.trigger(r,c,b)})},a.prototype.__listenUpdate=function(e,r){var o=this;e.on("change",function(c,g){return o.em.trigger(r,c,c.changedAttributes(),g)})},a.prototype.__destroy=function(){var e;this.cls.forEach(function(r){r.stopListening(),r.reset()}),null===(e=this.view)||void 0===e||e.remove(),this.view=void 0},a}(Ce);var ke=m(3023);var Me=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ze=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Me(a,d),a.prototype.defaults=function(){return{name:"",width:null,height:"",widthMedia:null,priority:null}},a.prototype.initialize=function(){var e=this;null===this.get("widthMedia")&&this.set("widthMedia",this.get("width")),null===this.get("width")&&this.set("width",this.get("widthMedia")),!this.get("priority")&&this.set("priority",parseFloat(this.get("widthMedia"))||0),["width","height","widthMedia"].forEach(function(o){return e.checkUnit(o)})},a.prototype.checkUnit=function(e){var r=this.get(e)||"";(parseFloat(r)||0).toString()===r.toString()&&this.set(e,"".concat(r,"px"))},a.prototype.getName=function(){return this.get("name")||this.get("id")},a.prototype.getWidthMedia=function(){return this.get("widthMedia")||""},a}(L.Kx);const ut=Ze;var $e=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ct=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return $e(a,d),a}(L.pM);const Ke=Ct;Ct.prototype.model=ut;var Wt=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nr=function(d){function a(e){var r=d.call(this,e)||this;return r.config=e.config||{},r.em=r.config.em,r.ppfx=r.config.pStylePrefix||"",r.listenTo(r.em,"change:device",r.updateSelect),r}return Wt(a,d),a.prototype.template=function(e){var r=e.ppfx,o=e.label;return H(Pn||(Pn=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}(['\n      <div class="','device-label">','</div>\n      <div class="',"field ",'select">\n        <span id="','input-holder">\n          <select class="','devices"></select>\n        </span>\n        <div class="','sel-arrow">\n          <div class="','d-s-arrow"></div>\n        </div>\n      </div>\n      <button style="display:none" class="','add-trasp" data-add-trasp>+</button>\n    '],['\n      <div class="','device-label">','</div>\n      <div class="',"field ",'select">\n        <span id="','input-holder">\n          <select class="','devices"></select>\n        </span>\n        <div class="','sel-arrow">\n          <div class="','d-s-arrow"></div>\n        </div>\n      </div>\n      <button style="display:none" class="','add-trasp" data-add-trasp>+</button>\n    '])),r,o,r,r,r,r,r,r,r)},a.prototype.events=function(){return{change:"updateDevice","click [data-add-trasp]":"startAdd"}},a.prototype.startAdd=function(){},a.prototype.updateDevice=function(){var e=this.em;if(e){var r=this.devicesEl;e.set("device",r?r.val():"")}},a.prototype.updateSelect=function(){var r=this.em,o=this.devicesEl;if(r&&r.getDeviceModel&&o){var c=r.getDeviceModel();o.val(c?c.get("id"):"")}},a.prototype.getOptions=function(){var o=this.em,c="";return this.collection.forEach(function(g){var b=g.attributes,w=b.name,C=b.id,B=o&&o.t&&o.t("deviceManager.devices.".concat(C))||w;c+='<option value="'.concat(C||w,'">').concat(B,"</option>")}),c},a.prototype.render=function(){var e=this,r=e.em,o=e.ppfx,c=e.$el,g=e.el,b=r&&r.t&&r.t("deviceManager.device");return c.html(this.template({ppfx:o,label:b})),this.devicesEl=c.find(".".concat(o,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(r.get("device")),g.className="".concat(o,"devices-c"),this},a}(L.Ss);const Kr=nr;var Pn,Kn=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mo=function(){return Mo=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Mo.apply(this,arguments)},No="".concat("device",":"),Di="".concat(No,"select"),zn=("".concat(Di,":before"),"".concat(No,"update")),Wn="".concat(No,"add"),lr=("".concat(Wn,":before"),"".concat(No,"remove")),Pr="".concat(lr,":before"),dn={all:"device",select:Di,update:zn,add:Wn,remove:lr,removeBefore:Pr},sn=function(d){function a(e){var r,o=d.call(this,e,"DeviceManager",new Ke,dn,{default:"",devices:[{id:"desktop",name:"Desktop",width:""},{id:"tablet",name:"Tablet",width:"770px",widthMedia:"992px"},{id:"mobileLandscape",name:"Mobile landscape",width:"568px",widthMedia:"768px"},{id:"mobilePortrait",name:"Mobile portrait",width:"320px",widthMedia:"480px"}]})||this;return o.Device=ut,o.Devices=Ke,o.storageKey="",o.devices=o.all,null===(r=o.config.devices)||void 0===r||r.forEach(function(c){return o.add(c,{silent:!0})}),o.select(o.config.default||o.devices.at(0)),e.on("change:device",o._onSelect,o),o}return Kn(a,d),a.prototype._onSelect=function(e,r,o){var g=this.em,b=this.events,w=e.previous("device"),C=this.get(r),B=b.select;g.trigger(B,C,this.get(w)),this.__catchAllEvent(B,C,o)},a.prototype.add=function(e,r){void 0===r&&(r={});var o,c=r;if((0,x.isString)(e)){var g=r;o=Mo(Mo({},c=arguments[2]||{}),{id:e,name:c.name||e,width:g})}else o=e;return o.id||(o.id=o.name||this._createId()),this.devices.add(o,c)},a.prototype.get=function(e){return this.getAll().filter(function(o){return o.get("name")===e})[0]||this.devices.get(e)||null},a.prototype.remove=function(e,r){return void 0===r&&(r={}),this.__remove(e,r)},a.prototype.getDevices=function(){return this.devices.models},a.prototype.select=function(e,r){void 0===r&&(r={});var o=(0,x.isString)(e)?this.get(e):e;return o&&this.em.set("device",o.get("id"),r),this},a.prototype.getSelected=function(){return this.get(this.em.get("device"))},a.prototype.getAll=function(){return this.devices},a.prototype.render=function(){var e,r=this.em;return null===(e=this.view)||void 0===e||e.remove(),this.view=new Kr({collection:this.devices,config:Mo({em:r},this.config)}),this.view.render().el},a.prototype.destroy=function(){this.__destroy()},a}(je);const kn=sn;var xo=function(d){return d.add="page:add",d.addBefore="page:add:before",d.remove="page:remove",d.removeBefore="page:remove:before",d.select="page:select",d.selectBefore="page:select:before",d.update="page:update",d.all="page",d}(xo||{});const Vo=xo;var aa=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fa=function(d){function a(e,r,o){return d.call(this,r,{module:e,modelConstructor:o})||this}return aa(a,d),a.prototype.add=function(e,r){var c,o=this,g=(0,x.isArray)(e)?e:(0,x.isUndefined)(e)?void 0:[e];return g=null!==(c=g?.map(function(b){return b instanceof o.newModel?b:new o.newModel(o.module,b)}))&&void 0!==c?c:[void 0],d.prototype.add.call(this,(0,x.isArray)(e)?g:g[0],r)},a.prototype.preinitialize=function(e,r){this.newModel=r.modelConstructor,this.module=r.module},a}(L.pM);const Qr=Fa;var ze=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xe=function(){return Xe=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Xe.apply(this,arguments)},at=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},mt=function(d,a){var e,r=d.get(a),o=null===(e=d.view)||void 0===e?void 0:e.el["width"===a?"offsetWidth":"offsetHeight"];return(0,x.isNumber)(r)?r:(0,x.isString)(r)&&r.endsWith("px")?parseFloat(r):o||0},Zt=function(d){function a(e,r){var o=d.call(this,e,r)||this,c=o.em,g=o.attributes,b=g.styles,w=g.component,C=c.Components,B=C.getConfig(),ne=c.Css.getAll(),ae={},be={em:c,config:B,frame:o,idMap:ae};if(!(0,z.isComponent)(w)){var Se=(0,z.isObject)(w)?w:{components:w};!Se.type&&(Se.type="wrapper");var We=C.getType("wrapper").model;o.set("component",new We(Se,be))}if(b){if(!(0,z.isObject)(b)){var lt=b;(0,x.keys)(ae).length&&(lt=(0,x.isString)(lt)?c.Parser.parseCss(lt):lt,c.Css.checkId(lt,{idMap:ae})),ne.add(lt),o.set("styles",ne)}}else o.set("styles",ne);return!r.width&&o.set("__aw",1),!r.height&&o.set("__ah",1),!o.id&&o.set("id",(0,z.createId)()),o}return ze(a,d),a.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:"",styles:"",refFrame:null,_undo:!0,_undoexc:["changesCount"]}},Object.defineProperty(a.prototype,"width",{get:function(){return mt(this,"width")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return mt(this,"height")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"refFrame",{get:function(){return this.get("refFrame")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"root",{get:function(){var e=this.refFrame;return e?.getComponent()||this.getComponent()},enumerable:!1,configurable:!0}),a.prototype.initRefs=function(){var e=this.refFrame;if((0,x.isString)(e)){var r=this.module.framesById[e];r&&this.set({refFrame:r},{silent:!0})}},a.prototype.getBoxRect=function(){var e=this.attributes;return{x:e.x,y:e.y,width:this.width,height:this.height}},a.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},a.prototype.changesUp=function(e){void 0===e&&(e={}),!(e.temporary||e.noCount||e.avoidStore)&&this.set("changesCount",this.get("changesCount")+1)},a.prototype.getComponent=function(){return this.get("component")},a.prototype.getStyles=function(){return this.get("styles")},a.prototype.disable=function(){this.trigger("disable")},a.prototype.remove=function(){var e;null===(e=this.view)||void 0===e||e.remove(),this.view=void 0;var r=this.collection;return r&&r.remove(this)},a.prototype.getHead=function(){return at([],this.head,!0)},a.prototype.setHead=function(e){return this.set("head",at([],e,!0))},a.prototype.addHeadItem=function(e){this.head.push(e)},a.prototype.getHeadByAttr=function(e,r,o){return this.head.filter(function(c){return c.attributes&&c.attributes[e]==r&&(!o||o===c.tag)})[0]},a.prototype.removeHeadByAttr=function(e,r,o){var c=this.getHeadByAttr(e,r,o),g=this.head.indexOf(c);g>=0&&this.head.splice(g,1)},a.prototype.addLink=function(e){var r="link";!this.getHeadByAttr("href",e,r)&&this.addHeadItem({tag:r,attributes:{href:e,rel:"stylesheet"}})},a.prototype.removeLink=function(e){this.removeHeadByAttr("href",e,"link")},a.prototype.addScript=function(e){var r="script";!this.getHeadByAttr("src",e,r)&&this.addHeadItem({tag:r,attributes:{src:e}})},a.prototype.removeScript=function(e){this.removeHeadByAttr("src",e,"script")},a.prototype.getPage=function(){var e;return null===(e=this.collection)||void 0===e?void 0:e.page},a.prototype._emitUpdated=function(e){void 0===e&&(e={}),this.em.trigger("frame:updated",Xe({frame:this},e))},a.prototype.hasAutoHeight=function(){return!("auto"!==this.attributes.height&&!this.config.infiniteCanvas)},a.prototype.toJSON=function(e){void 0===e&&(e={});var r=ke.A.prototype.toJSON.call(this,e),o=(0,x.result)(this,"defaults");return e.fromUndo&&delete r.component,delete r.styles,delete r.changesCount,r.__aw&&delete r.width,r.__ah&&delete r.height,r.refFrame&&(r.refFrame=r.refFrame.id,delete r.component),(0,x.forEach)(r,function(c,g){0===g.indexOf("_")&&delete r[g]}),(0,x.forEach)(o,function(c,g){r[g]===c&&delete r[g]}),(0,x.forEach)(["attributes","head"],function(c){(0,x.isEmpty)(r[c])&&delete r[c]}),r},a}(ke.A);const ln=Zt;var no=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),oo=function(d){function a(e,r){void 0===r&&(r=[]);var o=d.call(this,e,r,ln)||this;return o.loadedItems=0,o.itemsToLoad=0,(0,x.bindAll)(o,"itemLoaded"),o.on("add",o.onAdd),o.on("reset",o.onReset),o.on("remove",o.onRemove),o.forEach(function(c){return o.onAdd(c)}),o}return no(a,d),a.prototype.onAdd=function(e){this.module.framesById[e.id]=e},a.prototype.onReset=function(e,r){var o=this;(r?.previousModels||[]).map(function(g){return o.onRemove(g)})},a.prototype.onRemove=function(e){e.onRemove(),delete this.module.framesById[e.id]},a.prototype.initRefs=function(){this.forEach(function(e){return e.initRefs()})},a.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger("loaded:all"),this.listenToLoadItems(!1))},a.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},a.prototype.listenToLoadItems=function(e){var r=this;this.forEach(function(o){return o[e?"on":"off"]("loaded",r.itemLoaded)})},a}(Qr);const Ki=oo;var li=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ts=function(d){function a(e){var r=this,o=e.em,c=e.config;return(r=d.call(this,e,{scripts:c.scripts,styles:c.styles})||this).set("frames",new Ki(e)),r.on("change:zoom",r.onZoomChange),r.on("change:x change:y",r.onCoordsChange),r.on("change:pointer change:pointerScreen",r.onPointerChange),r.listenTo(o,"change:device ".concat(zn),r.updateDevice),r.listenTo(o,Vo.select,r._pageUpdated),r}return li(a,d),a.prototype.defaults=function(){return{frame:"",frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:L.lK,pointerScreen:L.lK}},Object.defineProperty(a.prototype,"frames",{get:function(){return this.get("frames")},enumerable:!1,configurable:!0}),a.prototype.init=function(){var r=this.em.Pages._initPage();this.set("frames",r.getFrames()),this.updateDevice({frame:r.getMainFrame()})},a.prototype._pageUpdated=function(e,r){var o=this.em;o.setSelected(),o.get("readyCanvas")&&o.stopDefault(),r?.getFrames().map(function(c){return c.disable()}),this.set("frames",e.getFrames()),this.updateDevice({frame:e.getMainFrame()})},a.prototype.updateDevice=function(e){void 0===e&&(e={});var r=this.em,o=r.getDeviceModel(),c=e.frame||r.getCurrentFrameModel();if(c&&o){var g=o.attributes;c.set({width:g.width,height:g.height,minHeight:g.minHeight},{noUndo:1})}},a.prototype.onZoomChange=function(e,r,o){var g=this.em,b=this.module;this.get("zoom")<1&&this.set("zoom",1),g.trigger(b.events.zoom,{options:o})},a.prototype.onCoordsChange=function(){this.em.trigger(this.module.events.coords)},a.prototype.onPointerChange=function(){this.em.trigger(this.module.events.pointer)},a.prototype.getPointerCoords=function(e){void 0===e&&(e=L.x2.World);var r=this.attributes;return e===L.x2.World?r.pointer:r.pointerScreen},a}(ke.A);const Nt=ts;var jt=m(2820),gt=m(3172),Fr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tr=function(d){function a(e,r){void 0===r&&(r=[]);var o=d.call(this,e,r,jt.A)||this;o.on("add",o.onAdd),o.on("change",o.onChange),o.on("remove",o.onRemove);var c=o.em;o.refreshDbn=(0,x.debounce)(function(){return o.refresh()},0);var g="component:resize styleable:change component:input ".concat(gt.I.update," frame:updated undo redo");return o.listenTo(c,g,function(){return o.refreshDbn()}),o}return Fr(a,d),Object.defineProperty(a.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),a.prototype.refresh=function(){this.em.trigger(this.events.spot)},a.prototype.onAdd=function(e){this.__trgEvent(this.events.spotAdd,{spot:e})},a.prototype.onChange=function(e){this.__trgEvent(this.events.spotUpdate,{spot:e})},a.prototype.onRemove=function(e){this.__trgEvent(this.events.spotRemove,{spot:e})},a.prototype.__trgEvent=function(e,r){this.module.em.trigger(e,r),this.refreshDbn()},a}(Qr);const wt=tr;var St=function(d){return d.dragEnter="canvas:dragenter",d.dragOver="canvas:dragover",d.dragEnd="canvas:dragend",d.dragData="canvas:dragdata",d.drop="canvas:drop",d.spot="canvas:spot",d.spotAdd="canvas:spot:add",d.spotUpdate="canvas:spot:update",d.spotRemove="canvas:spot:remove",d.coords="canvas:coords",d.zoom="canvas:zoom",d.pointer="canvas:pointer",d.refresh="canvas:refresh",d.frameLoad="canvas:frame:load",d.frameLoadHead="canvas:frame:load:head",d.frameLoadBody="canvas:frame:load:body",d}(St||{});const vr=St;var fn=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ko=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return fn(a,d),Object.defineProperty(a.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||""},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"module",{get:function(){var e,r;return null!==(r=null===(e=this.model)||void 0===e?void 0:e.module)&&void 0!==r?r:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),a.prototype.preinitialize=function(e){this.className=""},a}(L.Ss);const Ro=Ko;var Ln=m(2097),yr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kr=function(d){function a(e,r){void 0===e&&(e={}),void 0===r&&(r=!1);var o=d.call(this,e)||this;return o.itemsView="",o.itemType="type",o.reuseView=!1,o.viewCollection=[],r&&o.listenTo(o.collection,"add",o.addTo),o}return yr(a,d),a.prototype.addTo=function(e){this.add(e)},a.prototype.itemViewNotFound=function(e){},a.prototype.add=function(e,r){var C,c=this.reuseView,g=this.viewCollection,b=r||null,w=e.get(this.itemType);C=e.view&&c?e.view:this.renderView(e,w),g.push(C);var B=C.render().el;b?b.appendChild(B):this.$el.append(B)},a.prototype.render=function(){var e=this,r=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each(function(o){return e.add(o,r)}),this.$el.append(r),this.onRender(),this},a.prototype.onRender=function(){},a.prototype.onRemoveBefore=function(e,r){},a.prototype.onRemove=function(e,r){},a.prototype.remove=function(e){void 0===e&&(e={});var r=this.viewCollection;return this.onRemoveBefore(r,e),this.clearItems(),L.Ss.prototype.remove.apply(this,e),this.onRemove(r,e),this},a.prototype.clearItems=function(){},a}(Ro);const or=kr;var Tr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ht=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;r.config=e.config||{};var o=r.model;return r.listenTo(o,"change",r.render),r.listenTo(o,"destroy remove",r.remove),r.listenTo(o.get("selectors"),"change",r.render),o.setView(r),r}return Tr(a,d),Object.defineProperty(a.prototype,"frameView",{get:function(){return this.config.frameView},enumerable:!1,configurable:!0}),a.prototype.remove=function(){return d.prototype.remove.call(this),this.model.removeView(this),this},a.prototype.updateStyles=function(){this.render()},a.prototype.tagName=function(){return"style"},a.prototype.render=function(){var r=this.model,o=this.el,c=r.get("important");return o.innerHTML=r.toCSS({important:c}),this},a}(L.Ss);const Lt=ht;var Dr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hn=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Dr(a,d),a.prototype._createElement=function(){return document.createTextNode("")},a.prototype.render=function(){var e=this.model,r=e.get("important");return this.el.textContent=e.getDeclaration({important:r}),this},a}(Lt);const Un=hn;var Yn=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dr=function(d,a){return"".concat(d).concat(a?"-".concat(parseFloat(a)):"")},pn=function(d){function a(e){var r=d.call(this,e)||this;(0,x.bindAll)(r,"sortRules");var o=e.config||{};r.atRules={},r.config=o,r.em=o.em,r.pfx=o.stylePrefix||"",r.className=r.pfx+"rules";var c=r.collection;return r.listenTo(c,"add",r.addTo),r.listenTo(c,"reset",r.render),r}return Yn(a,d),a.prototype.addTo=function(e){this.addToCollection(e)},a.prototype.addToCollection=function(e,r){if(this.renderStarted){var b,w,o=r||null,g={model:e,config:this.config};if("keyframes"===e.get("atRuleType")){var C=e.getAtRule(),B=this.atRules[C];if(!B){var ne=document.createElement("style");B=document.createTextNode(""),ne.appendChild(document.createTextNode("".concat(C,"{"))),ne.appendChild(B),ne.appendChild(document.createTextNode("}")),this.atRules[C]=B,b=ne}w=new Un(g),B.appendData(w.render().el.textContent)}else b=(w=new Lt(g)).render().el;var ae=this.className,be=e.get("mediaText"),Se=dr(ae),We=Se;if(be&&(We=dr(ae,this.getMediaWidth(be))),b){var lt=o||this.el,Ot=void 0;try{Ot=lt.querySelector("#".concat(We))}catch{}Ot||(Ot=lt.querySelector("#".concat(Se))),Ot?.appendChild(b)}return b}},a.prototype.getMediaWidth=function(e){return e&&e.replace("(".concat(this.em.getConfig().mediaCondition,": "),"").replace(")","")},a.prototype.sortRules=function(e,r){var c=-1!==(this.em.getConfig().mediaCondition||"").indexOf("min-width");return c?(c?e:r)-(c?r:e):0},a.prototype.render=function(){var e=this;this.renderStarted=!0,this.atRules={};var r=this,o=r.em,c=r.$el,g=r.collection,b=this.className,w=document.createDocumentFragment();c.empty();var C=o.Devices.getAll().pluck("priority").sort(this.sortRules);return C.every(function(B){return B})&&C.unshift(0),C.forEach(function(B){return w.appendChild((0,Ln.a_)("div",{id:dr(b,B)}))}),g.each(function(B){return e.addToCollection(B,w)}),c.append(w),c.attr("class",b),this},a}(L.Ss);const Xt=pn;var Ft="text/html",Zn=Ft,Jt=function(d){return d.html="parse:html",d.htmlRoot="parse:html:root",d.htmlBefore="parse:html:before",d.css="parse:css",d.cssBefore="parse:css:before",d.all="parse",d}(Jt||{}),Qn=function(){return Qn=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Qn.apply(this,arguments)};const Ka=function(d,a){return void 0===a&&(a={}),{compTypes:[],modelAttrStart:"data-gjs-",getPropAttribute:function(e,r){var o=e.replace(this.modelAttrStart,""),c=r?.length||0,g=r?.substring(0,1),b=r?.substring(c-1),w="true"===r||"false"!==r&&r;try{w="{"==g&&"}"==b||"["==g&&"]"==b?JSON.parse(w):w}catch{}return{name:o,value:w}},splitPropsFromAttr:function(e){var r=this;void 0===e&&(e={});var o={},c={};return(0,x.each)(e,function(g,b){if(0===b.indexOf(r.modelAttrStart)){var w=r.getPropAttribute(b,g);o[w.name]=w.value}else c[b]=g}),{props:o,attrs:c}},parseStyle:function(e){for(var r={};e.indexOf("/*")>=0;){var o=e.indexOf("/*"),c=e.indexOf("*/")+2;e=e.replace(e.slice(o,c),"")}for(var g=e.split(";"),b=0,w=g.length;b<w;b++){var C=g[b].trim();if(C){var B=C.split(":"),ne=B[0].trim(),ae=B.slice(1).join(":").trim();r[ne]?((0,x.isArray)(r[ne])||(r[ne]=[r[ne]]),r[ne].push(ae)):r[ne]=ae}}return r},parseClass:function(e){for(var r=[],o=e.split(" "),c=0,g=o.length;c<g;c++){var b=o[c].trim();b&&r.push(b)}return r},parseNodeAttr:function(e,r){for(var o=r||{},c=e.attributes||[],g=c.length,b=0;b<g;b++){var w=c[b].nodeName,C=c[b].nodeValue;if("style"==w)o.style=this.parseStyle(C);else if("class"==w)o.classes=this.parseClass(C);else{if("contenteditable"==w)continue;if(0===w.indexOf(this.modelAttrStart)){var B=this.getPropAttribute(w,C);o[B.name]=B.value}else""===C&&!0===e[w]&&(C=!0),o.attributes||(o.attributes={}),o.attributes[w]=C}}return o},detectNode:function(e,r){var o;void 0===r&&(r={});var c=this.compTypes,g={};if(c){var b=null===(o=e.getAttribute)||void 0===o?void 0:o.call(e,"".concat(this.modelAttrStart,"type"));if(b)g={type:b};else for(var w=0;w<c.length;w++){var C=c[w],B=C.model.isComponent(e,r);if(B){"object"!=typeof B&&(B={type:C.id}),g=B;break}}}return g},parseNode:function(e,r){var o;void 0===r&&(r={});var c=(null===(o=e.content)||void 0===o?void 0:o.childNodes)||e.childNodes,g=c.length,b=this.detectNode(e,r);if(!b.tagName){var w=e.tagName||"";b.tagName=w&&"http://www.w3.org/1999/xhtml"===(e.namespaceURI||"")?w.toLowerCase():w}if(b=this.parseNodeAttr(e,b),!g&&"/>"==="".concat(e.outerHTML).slice(-2)&&(b.void=!0),g&&!b.components&&!r.skipChildren){var B=c[0];1===g&&3===B.nodeType?(!b.type&&(b.type="text"),b.components={type:"textnode",content:B.nodeValue}):b.components=this.parseNodes(e,Qn(Qn({},r),{inSvg:r.inSvg||"svg"===b.type}))}var ne=b.components;if(!b.type&&ne?.length){for(var ae=a.textTypes,be=void 0===ae?[]:ae,Se=a.textTags,We=void 0===Se?[]:Se,lt=!0,Ot=!1,ur=0;ur<ne.length;ur++){var Gt=ne[ur],ar=Gt.type;if(!be.includes(ar)&&!We.includes(Gt.tagName)){lt=!1;break}"textnode"===ar&&(Ot=!0)}lt&&Ot&&(b.type="text")}return b},parseNodes:function(e,r){var o;void 0===r&&(r={});for(var c=[],g=(null===(o=e.content)||void 0===o?void 0:o.childNodes)||e.childNodes,b=g.length,w=0;w<b;w++){var C=g[w],B=c[c.length-1],ne=this.parseNode(C,r);if("textnode"===ne.type){if("textnode"===B?.type){B.content+=ne.content;continue}if(!r.keepEmptyTextNodes){var ae=C.nodeValue||"",be=0===w||w===b-1,Se=ae.includes("\n");if(" "!=ae&&!ae.trim()&&(be||Se))continue}}!ne.tagName&&(0,x.isUndefined)(ne.content)||c.push(ne)}return c},parse:function(e,r,o){var c,g,b;void 0===o&&(o={});var w=d?.get("Config")||{},C=d?.Parser,B={html:[]},ne=Qn(Qn({},a),o),ae=Qn(Qn(Qn({},a.optionsHtml),{htmlType:(null===(c=a.optionsHtml)||void 0===c?void 0:c.htmlType)||a.htmlType}),o),be=Qn(Qn({},ae),{asDocument:this.__checkAsDocument(e,ae)}),Se=be.preParser,We=be.asDocument,lt={input:(0,x.isFunction)(Se)?Se(e,{editor:d?.getEditor()}):e};C?.__emitEvent(Jt.htmlBefore,lt);var Ot=lt.input,ur=(0,x.isFunction)(ne.parserHtml)?ne.parserHtml(Ot,be):function(d,a){void 0===a&&(a={});var b,e=new DOMParser,r=a.htmlType||Zn,o=r===Ft,c=o?d:"<div>".concat(d,"</div>"),g=e.parseFromString(c,r);if(o){if(a.asDocument)return g;var w=g.head,C=g.body,B=w.querySelectorAll("script");(0,x.each)(B,function(ae){return C.appendChild(ae)});var ne=[];(0,x.each)(w.children,function(ae){return ne.push(ae)}),(0,x.each)(ne,function(ae,be){return C.insertBefore(ae,C.children[be])}),b=C}else b=g.firstChild;return b}(Ot,be),Gt=ur,ar=ur;We&&(Gt=ar.documentElement,B.doctype=(0,Ln.LJ)(ar.doctype));var Fn=Gt.querySelectorAll("script"),fo=Fn.length;if(!((0,x.isUndefined)(w.allowScripts)?be.allowScripts:w.allowScripts))for(;fo--;)null===(g=Fn[fo].parentNode)||void 0===g||g.removeChild(Fn[fo]);if((!be.allowUnsafeAttr||!be.allowUnsafeAttrValue)&&this.__sanitizeNode(Gt,be),r){for(var jn=Gt.querySelectorAll("style"),Nr=jn.length,Dn="";Nr--;)Dn=jn[Nr].innerHTML+Dn,null===(b=jn[Nr].parentNode)||void 0===b||b.removeChild(jn[Nr]);Dn&&(B.css=r.parse(Dn))}C?.__emitEvent(Jt.htmlRoot,{input:Ot,root:Gt});var ir=[];if(We)B.head=this.parseNode(ar.head,ne),B.root=this.parseNodeAttr(Gt),ir=this.parseNode(ar.body,ne);else{var Bt=this.parseNodes(Gt,ne);ir=1!==Bt.length||ne.returnArray?Bt:Bt[0]}return B.html=ir,C?.__emitEvent(Jt.html,{input:Ot,output:B,options:be}),B},__sanitizeNode:function(e,r){var o=this,g=e.childNodes||[],b=[];(0,x.each)(e.attributes||[],function(w){var C=w.nodeName||"",B=w.nodeValue||"";!r.allowUnsafeAttr&&C.startsWith("on")&&b.push(C),!r.allowUnsafeAttrValue&&B.startsWith("javascript:")&&b.push(C)}),b.map(function(w){return e.removeAttribute(w)}),(0,x.each)(g,function(w){return o.__sanitizeNode(w,r)})},__checkAsDocument:function(e,r){return(0,z.isDef)(r.asDocument)?r.asDocument:(0,x.isFunction)(r.detectDocument)?!!r.detectDocument(e):r.detectDocument?e.toLowerCase().trim().startsWith("<!doctype"):void 0}}};var Ei=function(d){return d.add="data:add",d.addBefore="data:add:before",d.remove="data:remove",d.removeBefore="data:remove:before",d.update="data:update",d.path="data:path",d.all="data",d}(Ei||{}),ui=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ns="data-variable",nl=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.em=r.em,o}return ui(a,d),a.prototype.defaults=function(){return{type:ns,defaultValue:"",path:""}},a.prototype.getDataValue=function(){var e,r=this.attributes;return null===(e=this.em)||void 0===e?void 0:e.DataSources.getValue(r.path,r.defaultValue)},a}(L.Kx);const Bs=nl;var To="data-collection",rs="data-collection-variable",el="collectionDef",gc="__is_data_collection_item",Qo="__collections_state_map",Ba=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Et=function(){return Et=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Et.apply(this,arguments)},Mr=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.em=r.em,o.collectionsStateMap=r.collectionsStateMap,o.updateDataVariable(),o}return Ba(a,d),a.prototype.defaults=function(){return{type:rs,collectionId:void 0,variableType:void 0,path:void 0,value:void 0}},a.prototype.hasDynamicValue=function(){return!!this.dataVariable},a.prototype.getDataValue=function(){var e=this.updateDataVariable().resolvedValue;return e?.type===ns?this.dataVariable.getDataValue():e},a.prototype.updateDataVariable=function(){var r,e=this;if(!this.collectionsStateMap)return{resolvedValue:void 0};var c,o=function oa(d,a,e){var r=d.collectionId,o=d.variableType;if(a){var g=a[r];return g?o?"currentItem"===o?function ba(d,a,e,r){var o=d.currentItem;if(!o)return r.logError("Current item is missing for collection: ".concat(e)),"";if(o.type===ns){var c=o.path?"".concat(o.path,".").concat(a):a;return Et(Et({},o),{path:c})}return a&&!o[a]?(r.logError("Path not found in current item: ".concat(a," for collection: ").concat(e)),""):a?o[a]:o}(g,d.path,r,e):g[o]:(e.logError("Missing collection variable type for collection: ".concat(r)),""):""}}(this.attributes,this.collectionsStateMap,this.em);return o?.type===ns&&(c=new Bs(o,{em:this.em}),this.dataVariable=c,null===(r=this.resolverListener)||void 0===r||r.destroy(),this.resolverListener=new Lc({em:this.em,resolver:c,onUpdate:function(){var g;e.set("value",null===(g=e.dataVariable)||void 0===g?void 0:g.getDataValue())}})),this.set("value",o),{resolvedValue:o,dataVariable:c}},a.prototype.updateCollectionsStateMap=function(e){this.collectionsStateMap=e,this.updateDataVariable()},a.prototype.destroy=function(){var e,r;return null===(e=this.resolverListener)||void 0===e||e.destroy(),null===(r=this.dataVariable)||void 0===r||r.destroy(),d.prototype.destroy.call(this)},a.prototype.toJSON=function(e){var r=d.prototype.toJSON.call(this,e);return delete r.value,!r.collectionId&&delete r.collectionId,r},a}(L.Kx);const Ao=Mr;function Vi(d){return"object"==typeof d&&[ns,as,rs].includes(d?.type)}function ul(d){return d?.type===ns}function Yl(d,a){return ul(d)?new Bs(d,{em:a}).getDataValue():d}function Wc(d,a){var r,e=d.type;switch(e){case ns:r=new Bs(d,a);break;case as:r=new El(d,a);break;case rs:r=new Ao(d,a);break;default:throw new Error("Unsupported dynamic type: ".concat(e))}return r}function Vd(d,a){return Wc(d,a).getDataValue()}var Od=function(){function d(a,e,r){this.operator=a,this.statements=e,this.em=r.em}return d.prototype.evaluate=function(){var a=this,e=this.statements.map(function(r){return new Oa({condition:r},{em:a.em}).evaluate()});return this.operator.evaluate(e)},d}(),Ml=function d(a,e){this.operation=a,this.em=e.em},id=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ac=function(d){return d.equals="equals",d.isTruthy="isTruthy",d.isFalsy="isFalsy",d.isDefined="isDefined",d.isNull="isNull",d.isUndefined="isUndefined",d.isArray="isArray",d.isObject="isObject",d.isString="isString",d.isNumber="isNumber",d.isBoolean="isBoolean",d.isDefaultValue="isDefaultValue",d}(Ac||{}),Ea=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return id(a,d),a.prototype.evaluate=function(e,r){var o;switch(this.operation){case"equals":return e===r;case"isTruthy":return!!e;case"isFalsy":return!e;case"isDefined":return null!=e;case"isNull":return null===e;case"isUndefined":return void 0===e;case"isArray":return Array.isArray(e);case"isObject":return"object"==typeof e&&null!==e;case"isString":return"string"==typeof e;case"isNumber":return"number"==typeof e;case"isBoolean":return"boolean"==typeof e;case"isDefaultValue":return e instanceof Bs&&e.get("defaultValue")===r;default:return null===(o=this.em)||void 0===o||o.logError("Unsupported generic operation: ".concat(this.operation)),!1}},a}(Ml),du=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Js=function(d){return d.and="and",d.or="or",d.xor="xor",d}(Js||{}),ad=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return du(a,d),a.prototype.evaluate=function(e){if(!e?.length)return!1;switch(this.operation){case Js.and:return e.every(Boolean);case Js.or:return e.some(Boolean);case Js.xor:return 1===e.filter(Boolean).length;default:return this.em.logError("Unsupported boolean operation: ".concat(this.operation)),!1}},a}(Ml),Ql=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yc=function(d){return d.greaterThan=">",d.lessThan="<",d.greaterThanOrEqual=">=",d.lessThanOrEqual="<=",d.equals="=",d.notEquals="!=",d}(Yc||{}),Qc=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Ql(a,d),a.prototype.evaluate=function(e,r){switch(this.operation){case Yc.greaterThan:return e>r;case Yc.lessThan:return e<r;case Yc.greaterThanOrEqual:return e>=r;case Yc.lessThanOrEqual:return e<=r;case Yc.equals:return e===r;case Yc.notEquals:return e!==r;default:return this.em.logError("Unsupported number operation: ".concat(this.operation)),!1}},a}(Ml),kc=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zl=function(d){return d.contains="contains",d.startsWith="startsWith",d.endsWith="endsWith",d.matchesRegex="matchesRegex",d.equalsIgnoreCase="equalsIgnoreCase",d.trimEquals="trimEquals",d}(zl||{}),Xc=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return kc(a,d),a.prototype.evaluate=function(e,r){switch(this.operation){case zl.contains:return e.includes(r);case zl.startsWith:return e.startsWith(r);case zl.endsWith:return e.endsWith(r);case zl.matchesRegex:return r||this.em.logError("Regex pattern must be provided."),new RegExp(r).test(e);case zl.equalsIgnoreCase:return e.toLowerCase()===r.toLowerCase();case zl.trimEquals:return e.trim()===r.trim();default:return this.em.logError("Unsupported string operation: ".concat(this.operation)),!1}},a}(Ml),eu=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Oa=function(d){function a(e,r){var o=d.call(this,e)||this;return o.em=r.em,o}return eu(a,d),a.prototype.evaluate=function(){var e=this.em,r=this.get("condition");if("boolean"==typeof r)return r;if(this.isLogicGroup(r)){var c=r.statements,g=new ad(r.logicalOperator,{em:e});return new Od(g,c,{em:e}).evaluate()}if(this.isExpression(r)){g=r.operator;var C=r.right,B=Yl(r.left,this.em),ne=Yl(C,this.em);return this.getOperator(B,g).evaluate(B,ne)}return this.em.logError("Invalid condition type."),!1},a.prototype.getOperator=function(e,r){var o=this.em;if(this.isOperatorInEnum(r,Ac))return new Ea(r,{em:o});if("number"==typeof e)return new Qc(r,{em:o});if("string"==typeof e)return new Xc(r,{em:o});throw new Error("Unsupported data type: ".concat(typeof e))},a.prototype.getDependentDataVariables=function(){var e=this.get("condition");return e?this.extractDataVariables(e):[]},a.prototype.extractDataVariables=function(e){var r=this,o=[];return this.isExpression(e)?(ul(e.left)&&o.push(e.left),ul(e.right)&&o.push(e.right)):this.isLogicGroup(e)&&e.statements.forEach(function(c){return o.push.apply(o,r.extractDataVariables(c))}),o},a.prototype.isLogicGroup=function(e){return e&&typeof e.logicalOperator<"u"&&Array.isArray(e.statements)},a.prototype.isExpression=function(e){return e&&typeof e.left<"u"&&"string"==typeof e.operator},a.prototype.isOperatorInEnum=function(e,r){return Object.values(r).includes(e)},a.prototype.toJSON=function(e){var r=this.get("condition");return"object"==typeof r?JSON.parse(JSON.stringify(r)):r},a}(L.Kx),Ll=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ql=function(){return ql=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ql.apply(this,arguments)},as="data-condition",El=function(d){function a(e,r){var o=this;(0,x.isUndefined)(e.condition)&&r.em.logError("No condition was provided to a conditional component.");var c=new Oa({condition:e.condition},{em:r.em});return(o=d.call(this,ql(ql({type:as},e),{condition:c}))||this).resolverListeners=[],o.em=r.em,o.listenToDataVariables(),o._onValueChange=r.onValueChange,o.on("change:condition change:ifTrue change:ifFalse",function(){var g;o.listenToDataVariables(),null===(g=o._onValueChange)||void 0===g||g.call(o)}),o}return Ll(a,d),Object.defineProperty(a.prototype,"conditionEvaluator",{get:function(){return this.get("condition")},enumerable:!1,configurable:!0}),a.prototype.getCondition=function(){var e;return null===(e=this.get("condition"))||void 0===e?void 0:e.get("condition")},a.prototype.getIfTrue=function(){return this.get("ifTrue")},a.prototype.getIfFalse=function(){return this.get("ifFalse")},a.prototype.isTrue=function(){return this.conditionEvaluator.evaluate()},a.prototype.getDataValue=function(e){void 0===e&&(e=!1);var r=this.get("ifTrue"),o=this.get("ifFalse"),c=this.isTrue();return e?c?r:o:Yl(c?r:o,this.em)},Object.defineProperty(a.prototype,"onValueChange",{set:function(e){this._onValueChange=e},enumerable:!1,configurable:!0}),a.prototype.setCondition=function(e){var r=new Oa({condition:e},{em:this.em});this.set("condition",r)},a.prototype.setIfTrue=function(e){this.set("ifTrue",e)},a.prototype.setIfFalse=function(e){this.set("ifFalse",e)},a.prototype.listenToDataVariables=function(){var e=this,r=this.em;r&&(this.cleanupListeners(),this.getDependentDataVariables().forEach(function(c){var g=new Lc({em:r,resolver:new Bs(c,{em:e.em}),onUpdate:function(){var b;null===(b=e._onValueChange)||void 0===b||b.call(e)}.bind(e)});e.resolverListeners.push(g)}))},a.prototype.getDependentDataVariables=function(){var e=this.conditionEvaluator.getDependentDataVariables(),r=this.get("ifTrue"),o=this.get("ifFalse");return ul(r)&&e.push(r),ul(o)&&e.push(o),e},a.prototype.cleanupListeners=function(){this.resolverListeners.forEach(function(e){return e.destroy()}),this.resolverListeners=[]},a.prototype.toJSON=function(){var e=this.get("ifTrue"),r=this.get("ifFalse");return{type:as,condition:this.conditionEvaluator,ifTrue:e,ifFalse:r}},a}(L.Kx),Gu=function(){function d(a){var e=this;this.listeners=[],this.model=new L.Kx,this.onChange=function(){var r=e.resolver.getDataValue();e.onUpdate(r)},this.em=a.em,this.resolver=a.resolver,this.onUpdate=a.onUpdate,this.listenToResolver()}return d.prototype.createListener=function(a,e,r){return void 0===r&&(r=this.onChange),{obj:a,event:e,callback:r}},d.prototype.listenToResolver=function(){var e=this.resolver,r=this.model;this.removeListeners();var o=[];switch(e.attributes.type){case rs:o=this.listenToDataCollectionVariable(e);break;case ns:o=this.listenToDataVariable(e);break;case as:o=this.listenToConditionalVariable(e)}o.forEach(function(g){return r.listenTo(g.obj,g.event,g.callback)}),this.listeners=o},d.prototype.listenToConditionalVariable=function(a){var e=this,r=this.em;return a.getDependentDataVariables().flatMap(function(c){return e.listenToDataVariable(new Bs(c,{em:r}))})},d.prototype.listenToDataVariable=function(a){var e=this,r=this.em,o=a.attributes.path,c=(0,z.stringToPath)(o||"").join("."),g=r.DataSources.fromPath(o),b=g[0],w=g[1],C=[];return b&&C.push(this.createListener(b.records,"add remove reset")),w&&C.push(this.createListener(w,"change")),C.push(this.createListener(a,"change:path",function(){e.listenToResolver(),e.onChange()}),this.createListener(a,"change:defaultValue"),this.createListener(r.DataSources.all,"add remove reset"),this.createListener(r,"".concat(Ei.path,":").concat(c))),C},d.prototype.listenToDataCollectionVariable=function(a){return[this.createListener(a,"change:value")]},d.prototype.removeListeners=function(){var a=this;this.listeners.forEach(function(e){return a.model.stopListening(e.obj,e.event,e.callback)}),this.listeners=[]},d.prototype.destroy=function(){this.removeListeners()},d}();const Lc=Gu;var Cf=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),et=function(){return et=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},et.apply(this,arguments)},Ye=Ka(),dt=function(d){return(0,x.isArray)(d)?d[d.length-1]:d},Dt=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e,r)||this;return o.views=[],o.styleResolverListeners={},o.em=r.em,o}return Cf(a,d),a.prototype.parseStyle=function(e){return Ye.parseStyle(e)},a.prototype.extendStyle=function(e){return et(et({},this.getStyle("",{skipResolve:!0})),e)},a.prototype.getStyle=function(e,r){void 0===r&&(r={});var o=this.get("style")||{},c=et({},o);if(this.em&&!r.skipResolve){var g=this.getResolvedStyles(et({},c));return e&&(0,x.isString)(e)?g[e]:g}return e&&(0,x.isString)(e)?c[e]:c},a.prototype.setStyle=function(e,r){var o=this;void 0===e&&(e={}),void 0===r&&(r={}),(0,x.isString)(e)&&(e=this.parseStyle(e));var c=this.getStyle(r);r.partial||r.avoidStore?(r.avoidStore=!0,e.__p=!0):delete e.__p;var g=et({},e),b=et({},g);(0,x.keys)(b).forEach(function(C){if(""!==b[C]){var B=b[C];if(Vi(B)){var ne=Wc(B,{em:o.em});ne&&(b[C]=ne,o.listenToDataResolver(ne,C))}}else delete b[C]}),this.set("style",b,r);var w=(0,z.shallowDiff)(c,b);return delete w.__p,(0,x.keys)(w).forEach(function(C){var B=o.em;r.noEvent||(o.trigger("change:style:".concat(C)),B&&(B.trigger("styleable:change",o,C,r),B.trigger("styleable:change:".concat(C),o,C,r)))}),b},a.prototype.listenToDataResolver=function(e,r){var o=this,c=this.styleResolverListeners[r];c?c.listenToResolver():this.styleResolverListeners[r]=new Lc({em:this.em,resolver:e,onUpdate:function(){return o.updateView()}})},a.prototype.getView=function(e){var o=this.views,c=this.em,g=e||c?.getCurrentFrameModel();return g?o.find(function(b){return b.frameView===g.view}):o[0]},a.prototype.setView=function(e){var r=this.views;!r.includes(e)&&r.push(e)},a.prototype.removeView=function(e){var r=this.views;r.splice(r.indexOf(e),1)},a.prototype.updateView=function(){this.views.forEach(function(e){return e.updateStyles()})},a.prototype.getResolvedStyles=function(e){var r=this,o=et({},e);return(0,x.keys)(o).forEach(function(c){var g=o[c];"string"==typeof g||Array.isArray(g)||(Vi(g)&&(o[c]=Vd(g,{em:r.em})),function hl(d){return d instanceof Bs||d instanceof El}(g)&&(o[c]=g.getDataValue()))}),o},a.prototype.addStyle=function(e,r,o){var c;void 0===r&&(r=""),void 0===o&&(o={}),"string"==typeof e?((c={})[e]=r,e=c):o=r||{},o.addStyle=e,e=this.extendStyle(e),this.setStyle(e,o)},a.prototype.removeStyle=function(e){var r=this.getStyle();delete r[e],this.setStyle(r)},a.prototype.styleToString=function(e){void 0===e&&(e={});var r=[],o=this.getStyle(e),c=e.important,g=function(w){var C=(0,x.isArray)(c)?c.indexOf(w)>=0:c;if("__"===w.substring(0,2))return"continue";var ae=o[w];((0,x.isArray)(ae)?ae:[ae]).forEach(function(Se){var We="".concat(Se).concat(C?" !important":"");We&&r.push("".concat(w,":").concat(We,";"))})};for(var b in o)g(b);return r.join("")},a.prototype.getSelectors=function(){return this.get("selectors")||this.get("classes")},a.prototype.getSelectorsString=function(e){return this.selectorsToString?this.selectorsToString(e):this.getSelectors().getFullString()},a}(L.Kx);const tn=Dt;var uo=function(){return uo=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},uo.apply(this,arguments)},ao=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},Jo=function(d){return(0,x.isArray)(d.get(wl))},ko=function(d){return!!d.get(Au)},ra=function(d){return!(!Jo(d)&&!ko(d))},Ri=function(d){var a=d.parent();return ra(d)&&(!a||!ra(a))},Ra=function(d){d.__symbReady||(d.on("change",d.__upSymbProps),d.__symbReady=!0)},es=function(d){var a=d.get(Au);if(a&&(0,x.isString)(a)){var e=d.__getAllById()[a];e?(a=e,d.set(Au,e)):a=0}return a||void 0},Xi=function(d){var a=d?.get(wl);return a&&(0,x.isArray)(a)&&(a.forEach(function(e,r){e&&(0,x.isString)(e)&&(a[r]=d.__getAllById()[e])}),a=a.filter(function(e){return e&&!(0,x.isString)(e)})),a||void 0},cs=function(d,a){void 0===a&&(a="");var e=d?.get(Df),r=a.split(":")[0],o=a!==r?[a,r]:[a];return!0===e||(0,x.isArray)(e)&&o.some(function(c){return e.indexOf(c)>=0})},cc=function(d,a){void 0===a&&(a={});var e=[],r=a.changed;if(a.fromInstance||a.noPropagate||a.fromUndo||r&&cs(d,r))return e;var o=Xi(d)||[],c=es(d);return(c?ao([c],Xi(c)||[],!0):o).filter(function(b){return b!==d}).filter(function(b){return!(r&&cs(b,r))})},Il=function(d,a){for(var e=d,r=d.parent(a);r&&ra(r);)e=r,r=r.parent(a);return e},vc=function(d,a){void 0===a&&(a={});var e=es(d),r=e&&Xi(e);!a.skipRefs&&r&&e.set(wl,r.filter(function(o){return o!==d})),d.set(Au,0),d.components().forEach(function(o){return vc(o,a)})},Aa=function(d,a,e,r){void 0===r&&(r={});var o=es(d),c=Xi(d);!o&&!c||d.em.log(a,{model:d,toUp:e,context:"symbols",opts:r})},sd=function(d,a){(0,x.keys)(d).forEach(function(e){Rc(d,e,a)||delete d[e]})},Rc=function(d,a,e){var o,r="attributes"===a?Object.values(d.attributes).some(function(g){return g?.type===rs}):(null===(o=d[a])||void 0===o?void 0:o.type)===rs;return!cs(e,a)||r},zd=function(d,a,e,r){var o=r||e||{},b={fromInstance:o.fromInstance,fromUndo:o.fromUndo},w=a.opt.temporary;if(r)if(r.add){var be=[],Se=!!Xi(d);if((B=cc(d,uo(uo({},b),{changed:"components:add"}))).length){var We=es(a);be=Xi(We||a)||[],(be=ao([],be,!0)).push(We||a)}!w&&Aa(d,"add",B,{opts:r,addedInstances:be.map(function(jn){return jn.cid}),added:a.cid}),B.forEach(function(jn){var Nr=Il(jn),ir=be.filter(function(Bt){var wr=Il(Bt,{prev:1});return Nr&&wr&&wr===Nr})[0]||a.clone({symbol:!0,symbolInv:Se});jn.append(ir,uo({fromInstance:d},r))})}else{var lt=es(a);if(lt&&!r.temporary&&lt.set(wl,Xi(lt).filter(function(ti){return ti!==a})),!Ri(a)&&!r.skipRefsUp){var Ot="components:remove",ur=r.index,Gt=a.parent(),ar=uo({fromInstance:a},r),Fn=Ri(a),fo=function(jn){var Nr=jn.parent();Nr&&!cs(Nr,Ot)&&jn.remove(ar)},B=cs(Gt,Ot)?[]:cc(a,b);Fn&&(B=Gt&&cc(Gt,uo(uo({},b),{changed:Ot})),fo=function(jn){var Nr=jn.components().at(ur);Nr&&Nr.remove(uo({fromInstance:Gt},ar))}),!w&&Aa(d,"remove",B,{opts:r,removed:a.cid,isSymbNested:Fn}),B.forEach(fo)}}else{var C=a,ne=(B=cc(d,uo(uo({},b),{changed:"components:reset"})),C.models),ae=new Set;Aa(d,"reset",B,{components:ne}),B.forEach(function(ti){var jn=ti.components(),Nr=ne.map(function(Dn,ir){return d.get(el)?Dn.clone({symbol:ra(Dn)}):!ra(Dn)||ae.has(Dn)?(ae.add(Dn),Dn.clone({symbol:!0})):jn.at(ir)});jn.reset(Nr,uo({fromInstance:d},e))})}d.__changesUp(o)},Jp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ks=function(){return Ks=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ks.apply(this,arguments)},dl=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e},Rl=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},Gl=function(d,a){return void 0===a&&(a=[]),d?(((0,x.isArray)(d)||(0,x.isFunction)(d.map)?d:[d]).map(function(r){a.push(r.getId()),Gl(r.components().models,a)}),a):[]},ld=function(d,a,e){void 0===a&&(a={}),void 0===e&&(e={}),e.visitedCmps=e.visitedCmps||{};var r=e.visitedCmps;return((0,x.isArray)(d)?d:[d]).map(function(c){var g=c.attributes,b=void 0===g?{}:g,w=c.components,C=c.tagName,B=c.style,ne=b.id,be=dl(b,["id","draggable"]),Se=c;if(ne)if(r[ne])r[ne].push(Se),ne=Ul.getNewId(a),Se.attributes.id=ne;else if(r[ne]=[],a[ne]){var We=Se=a[ne];C&&We.set({tagName:C},Ks(Ks({},e),{silent:!0})),(0,x.keys)(be).length&&We.addAttributes(be,Ks({},e)),(0,x.keys)(B).length&&We.addStyle(B,e)}var lt=(0,x.isFunction)(Se.components)?Se:null;if(w){var Ot=ld(w,a,e);lt?lt.components().reset(Ot,e):Se.components=Ot}else lt&&lt.components().reset([],e);return Se})},qu=function(d){function a(e,r){var o=d.call(this,e,r)||this;o.opt=r,o.listenTo(o,"add",o.onAdd),o.listenTo(o,"remove",o.removeChildren),o.listenTo(o,"reset",o.resetChildren);var c=r.em;return o.config=r.config,o.em=c,o.domc=r.domc||c?.Components,o}return Jp(a,d),Object.defineProperty(a.prototype,"events",{get:function(){var e;return null===(e=this.domc)||void 0===e?void 0:e.events},enumerable:!1,configurable:!0}),a.prototype.resetChildren=function(e,r){var o=this;void 0===r&&(r={});var c=this,g=r.previousModels||[],b=g.filter(function(B){return!e.get(B.cid)}),w=Gl(e),C=Gl(g).filter(function(B){return w.indexOf(B)>=0});r.keepIds=(r.keepIds||[]).concat(C),b.forEach(function(B){return o.removeChildren(B,c,r)}),e.each(function(B){return o.onAdd(B)})},a.prototype.resetFromString=function(e,r){var o,c;void 0===e&&(e=""),void 0===r&&(r={}),r.keepIds=Gl(this);var g=this,b=g.domc,w=g.em,C=g.parent,B=w?.Css,ne=b?.allById()||{},ae=this.parseString(e,r),be=ld(ae,ne,r),Se=r.visitedCmps,We=void 0===Se?{}:Se;Object.keys(We).forEach(function(lt){var Ot=We[lt];if(Ot.length){var ur=B?.getRules("#".concat(lt))||[];ur.length&&Ot.forEach(function(Gt){ur.forEach(function(ar){var Fn=ar.clone();Fn.set("selectors",["#".concat(Gt.attributes.id)]),B.getAll().add(Fn)})})}}),this.reset(be,r),w?.trigger("component:content",C,r,e),null===(c=(o=C).__checkInnerChilds)||void 0===c||c.call(o)},a.prototype.removeChildren=function(e,r,o){var c=this;if(void 0===o&&(o={}),e){var b=this.domc,w=this.em,C=o.temporary||o.fromUndo;if(e.prevColl=this,!C){var B=e.getId(),ne=w.Selectors.getAll(),ae=w.Css.getAll(),be=(o.keepIds||[]).indexOf(B)<0;delete(b?b.allById():{})[B];var We=be?ae.remove(ae.filter(function(Gt){return Gt.getSelectors().getFullString()==="#".concat(B)}),o):[];ne.remove(We.map(function(Gt){return Gt.getSelectors().at(0)})),e.opt.temporary||(w.Commands.run("core:component-style-clear",{target:e}),e.views.forEach(function(Gt){Gt.scriptContainer&&e.emitWithEditor(gt.I.scriptUnmount,{component:e,view:Gt,el:Gt.el})}),e.removed(),e.trigger("removed"),w.trigger(gt.I.remove,e),b&&ko(e)&&Ri(e)&&b.symbols.__trgEvent(b.events.symbolInstanceRemove,{component:e},!0));var lt=e.components();lt.forEach(function(Gt){zd(Gt,Gt,lt,Ks(Ks({},o),{skipRefsUp:!0})),c.removeChildren(Gt,r,o)})}var Ot=e.components();if(w.stopListening(Ot),w.stopListening(e),w.stopListening(e.get("classes")),e.__postRemove(),!e.opt.temporary){var ur=function(Gt){Gt.emitWithEditor(gt.I.removed,Gt,{removeOptions:o}),Gt.components().forEach(function(ar){return ur(ar)})};ur(e)}}},a.prototype.model=function(e,r){var g,o=r.collection.opt,c=o.em,b=c.Components.componentTypes;r.em=c,r.config=o.config,r.componentTypes=b,r.domc=o.domc;for(var w=0;w<b.length;w++)if(b[w].id==e.type){g=b[w].model;break}return g||(g=b[b.length-1].model,c&&e.type&&c.logWarning("Component type '".concat(e.type,"' not found"),{attrs:e,options:r})),new g(e,r)},a.prototype.parseString=function(e,r){void 0===r&&(r={});var o=this,c=o.em,g=o.domc,b=o.parent,w=b?.is("wrapper"),B=c.Css,ne=c.Parser.parseHtml(e,Ks({asDocument:r.asDocument&&w},r.parserOptions)),ae=ne.html;if(w&&ne.doctype){var be=b,Se=ne.html||{},We=Se.components,lt=void 0===We?[]:We,Ot=dl(Se,["components"]),ur=ne.head||{},Gt=ur.components,ar=dl(ur,["components"]);ae=lt,be.set(Ot,r),be.head.set(ar,r),be.head.components(Gt,r),be.docEl.set(ne.root,r),be.set({doctype:ne.doctype})}if(Ul.checkId(ae,ne.css,g.componentsById,r),ne.css&&B&&!r.temporary){var fo=dl(r,["at"]);B.addCollection(ne.css,Ks(Ks({},fo),{extend:1}))}return ae},a.prototype.add=function(e,r){var o=this;if(void 0===r&&(r={}),null!=e){r.keepIds=Rl(Rl([],r.keepIds||[],!0),Gl(r.previousModels),!0),(0,x.isString)(e)?e=this.parseString(e,r):(0,x.isArray)(e)&&e.forEach(function(g,b){if((0,x.isString)(g)){var w=o.parseString(g,r);e[b]=(0,x.isArray)(w)&&!w.length?null:w}});var c=((0,x.isArray)(e)?e:[e]).filter(Boolean).map(function(g){return o.processDef(g)});return e=(0,x.isArray)(e)?(0,x.flatten)(c,1):c[0],d.prototype.add.call(this,e,r)}},a.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var o=this.em,c=this.config,b=(void 0===c?{}:c).processor,w=e;if(b){var C=b(w=Ks({},w));C&&((0,x.each)(w,function(lt,Ot){return delete w[Ot]}),(0,x.extend)(w,C))}if(w.$$typeof&&"object"==typeof w.props){(w=Ks({},w)).props=Ks({},w.props);var B=o.Components,ae=o.Parser.parserHtml;(0,x.each)(w,function(lt,Ot){(0,x.includes)(["props","type"],Ot)||delete w[Ot]});var be=w.props,Se=be.children;delete be.children,delete w.props;var We=ae.splitPropsFromAttr(be);w.attributes=We.attrs,Se&&(w.components=Se),w.type?B.getType(w.type)||(w.tagName=w.type,delete w.type):w.type="textnode",(0,x.extend)(w,We.props)}return w},a.prototype.onAdd=function(e,r,o){void 0===o&&(o={});var g=this.domc,b=this.em,w=e.getStyle(),C=b&&b.getConfig().avoidInlineStyle;if(g&&g.Component.ensureInList(e),!(0,x.isEmpty)(w)&&!C&&b&&b.getConfig().forceClass&&!o.temporary){var B=e.cid;b.Css.setClassRule(B,w),e.setStyle({}),e.addClass(B)}if(e.__postAdd({recursive:!0}),b&&!o.temporary){var ne=function(ae){b.trigger(gt.I.add,ae,o),ae.components().forEach(function(be){return ne(be)})};ne(e),g&&ko(e)&&Ri(e)&&g.symbols.__trgEvent(g.events.symbolInstanceAdd,{component:e},!0)}},a}(L.pM);const xu=qu;var Dp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ef=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e,r)||this,c=r.config,g=void 0===c?{}:c,b=o.get("name"),w=o.get("label");b?w||o.set("label",b):o.set("name",w);var C=o.get("name"),B=g.escapeName,ne=B?B(C):a.escapeName(C);return o.set("name",ne),o.em=r.em,o}return Dp(a,d),a.prototype.defaults=function(){return{name:"",label:"",type:1,active:!0,private:!1,protected:!1,_undo:!0}},a.prototype.isId=function(){return 2===this.get("type")},a.prototype.isClass=function(){return 1===this.get("type")},a.prototype.getFullName=function(e){void 0===e&&(e={});var r=e.escape,o=this.get("name"),c="";switch(this.get("type")){case 1:c=".";break;case 2:c="#"}return c+(r?r(o):o)},a.prototype.toString=function(){return this.getFullName()},a.prototype.getName=function(){return this.get("name")||""},a.prototype.getLabel=function(){return this.get("label")||""},a.prototype.setLabel=function(e){return this.set("label",e)},a.prototype.getActive=function(){return!!this.get("active")},a.prototype.setActive=function(e){return this.set("active",e)},a.prototype.toJSON=function(e){void 0===e&&(e={});var r=this.em,o=L.Kx.prototype.toJSON.call(this,[e]),c=(0,x.result)(this,"defaults");if(r?.getConfig().avoidDefaults){(0,x.forEach)(c,function(b,w){o[w]===b&&delete o[w]}),o.label===o.name&&delete o.label;var g=(0,x.keys)(o).length;1===g&&o.name&&(o=o.name),2===g&&o.name&&o.type&&(o=this.getFullName())}return o},a.escapeName=function(e){return"".concat(e).trim().replace(/\s+/g,"-")},a.TYPE_CLASS=1,a.TYPE_ID=2,a}(L.Kx);const oc=Ef;Ef.prototype.idAttribute="name";var Tp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ml=function(d,a){return d.reduce(function(e,r,o){return e.concat(ml(d.slice(o+1),"".concat(a).concat(r)))},[a])},Yp=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Tp(a,d),a.prototype.modelId=function(e){return"".concat(e.name,"_").concat(e.type||oc.TYPE_CLASS)},a.prototype.getStyleable=function(){return(0,x.filter)(this.models,function(e){return e.getActive()&&!e.get("private")})},a.prototype.getValid=function(e){var o=(void 0===e?{}:e).noDisabled;return(0,x.filter)(this.models,function(c){return!c.get("private")}).filter(function(c){return o?c.get("active"):1})},a.prototype.getFullString=function(e,r){void 0===r&&(r={});var o=[];return(e||this).forEach(function(g){return o.push(g.getFullName(r))}),r.sort&&o.sort(),o.join("").trim()},a.prototype.getFullName=function(e){void 0===e&&(e={});var r=e.combination,o=e.array,c=[],g=this.map(function(b){return b.getFullName(e)}).sort();return r?g.forEach(function(b,w){c=c.concat(ml(g.slice(w+1),b))}):c=g,o?c:c.join(r?",":"")},a}(L.pM);const Mu=Yp;Yp.prototype.model=oc;var pu=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zc=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},ud=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return pu(a,d),a.prototype.defaults=function(){return{id:"",label:"",open:!0,attributes:{}}},a.prototype.getId=function(){return this.get("id")},a.prototype.getLabel=function(){return this.get("label")},a}(L.Kx);const dd=ud;function Fs(d){var a=new Set,e=new Map,r={items:[]};d.forEach(function(c){var g=c.category;if(g){a.add(g);var b=e.get(g);b?b.push(c):e.set(g,[c])}else r.items.push(c)});var o=Array.from(a).map(function(c){return{category:c,items:e.get(c)||[]}});return Zc(Zc([],o,!0),[r],!1)}var Tc=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tu="category",Td=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Tc(a,d),a.prototype.initCategory=function(e){var r=e.get(tu),o=r instanceof dd;if(r&&!o){(0,x.isString)(r)?r={id:r,label:r}:(0,z.isObject)(r)&&!r.id&&(r.id=r.label);var c=this.getCategories().add(r);return e.set(tu,c,{silent:!0}),c}if(o)return c=r,this.getCategories().add(c),c},a}(L.pM),Sd=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pd=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e,r)||this,c=r.events,g=r.em,b=c?.update;return g&&b&&o.on("change",function(w,C){return g.trigger(b,{category:w,changes:w.changedAttributes(),options:C})}),o}return Sd(a,d),a.prototype.add=function(e,r){return((0,x.isArray)(e)?e:[e]).forEach(function(c){return c&&(c.id=(0,z.normalizeKey)("".concat(c.id)))}),d.prototype.add.call(this,e,r)},a.prototype.get=function(e){return d.prototype.get.call(this,(0,x.isString)(e)?(0,z.normalizeKey)(e):e)},a}(L.pM);const Nl=pd;pd.prototype.model=dd;var ic=function(d){return d.select="trait:select",d.value="trait:value",d.categoryUpdate="trait:category:update",d.custom="trait:custom",d.all="trait",d}(ic||{});const Ve=ic;var kt=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Br=function(){return Br=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Br.apply(this,arguments)},qr=function(d){function a(e,r){var o=d.call(this,e)||this,c=o.attributes,g=c.target,b=c.name;return!o.get("id")&&o.set("id",b),g&&o.setTarget(g),o.em=r,o}return kt(a,d),a.prototype.defaults=function(){return{type:"text",label:"",name:"",unit:"",step:1,value:"",default:"",placeholder:"",category:"",changeProp:!1,options:[]}},Object.defineProperty(a.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"category",{get:function(){var e=this.get("category");return e instanceof dd?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"component",{get:function(){return this.target},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"changeProp",{get:function(){return!!this.get("changeProp")},enumerable:!1,configurable:!0}),a.prototype.setTarget=function(e){if(e){var r=this.attributes,o=r.name,c=r.changeProp,g=r.value,b=r.getValue;this.target=e,this.unset("target");var w=c?"change:".concat(o):"change:attributes:".concat(o);this.listenTo(e,w,this.targetUpdated);var C=g||(b?void 0:this.getValue());!(0,x.isUndefined)(C)&&this.set({value:C},{silent:!0})}},a.prototype.getId=function(){return this.get("id")},a.prototype.getType=function(){return this.get("type")},a.prototype.getName=function(){return this.get("name")},a.prototype.getLabel=function(e){var r;void 0===e&&(e={});var o=e.locale,c=void 0===o||o,g=this.getId(),b=this.get("label")||this.getName();return c&&(null===(r=this.em)||void 0===r?void 0:r.t("traitManager.traits.labels.".concat(g)))||b},a.prototype.getValue=function(e){return this.getTargetValue(e)},a.prototype.setValue=function(e,r){var o=this;void 0===r&&(r={});var b=this.em,w=r.partial,C={},B=this.attributes.setValue;B?B({value:e,component:this.component,editor:b?.getEditor(),trait:this,partial:!!w,options:r,emitUpdate:function(){return o.targetUpdated()}}):(w&&(C.avoidStore=!0),this.setTargetValue(e,C))},a.prototype.getDefault=function(){return this.get("default")},a.prototype.getOptions=function(){return this.get("options")||[]},a.prototype.getOption=function(e){var r=this,o=(0,z.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(c){return r.getOptionId(c)===o})[0]},a.prototype.getOptionId=function(e){return e.id||e.value},a.prototype.getOptionLabel=function(e,r){var o;void 0===r&&(r={});var c=r.locale,g=void 0===c||c,b=(0,x.isString)(e)?this.getOption(e):e,w=this.getOptionId(b),C=b.label||b.name||w,B=this.getName();return g&&(null===(o=this.em)||void 0===o?void 0:o.t("traitManager.traits.options.".concat(B,".").concat(w)))||C},a.prototype.getCategoryLabel=function(e){void 0===e&&(e={});var o=this.em,c=this.category,g=e.locale,b=void 0===g||g,w=c?.getId(),C=c?.getLabel();return b&&o?.t("traitManager.categories.".concat(w))||C||""},a.prototype.runCommand=function(){var e=this.em,r=this.attributes.command;if(r&&e)return(0,x.isString)(r)?e.Commands.run(r):r(e.Editor,this)},a.prototype.props=function(){return this.attributes},a.prototype.targetUpdated=function(){var r=this.component,o=this.em,c=this.getTargetValue({useType:!0});this.set({value:c},{fromTarget:1});var g={trait:this,component:r,value:c};r.trigger(Ve.value,g),o?.trigger(Ve.value,g),o?.trigger("trait:update",g)},a.prototype.getTargetValue=function(e){void 0===e&&(e={});var w,o=this.component,c=this.em,g=this.getName(),b=this.get("getValue");if(w=b?b({editor:c?.getEditor(),trait:this,component:o}):this.changeProp?o.get(g):o.getAttributes()[g],e.useType&&"checkbox"===this.getType()){var B=this.attributes,ne=B.valueTrue,ae=B.valueFalse;(0,x.isUndefined)(ne)||ne!==w?!(0,x.isUndefined)(ae)&&ae===w&&(w=!1):w=!0}return(0,x.isUndefined)(w)?"":w},a.prototype.setTargetValue=function(e,r){var o;void 0===r&&(r={});var g=this.component,b=this.attributes,w=this.getName();if(!(0,x.isUndefined)(e)){var C=e;if("false"===e?C=!1:"true"===e&&(C=!0),"checkbox"===this.getType()){var B=b.valueTrue,ne=b.valueFalse;C&&!(0,x.isUndefined)(B)&&(C=B),!C&&!(0,x.isUndefined)(ne)&&(C=ne)}var ae=((o={})[w]=C,o);ae.__p=r.avoidStore?null:void 0,this.changeProp?g.set(ae,r):g.addAttributes(ae,r)}},a.prototype.setValueFromInput=function(e,r,o){void 0===r&&(r=!0),void 0===o&&(o={});var c={value:e};this.set(c,Br(Br({},o),{avoidStore:1})),r&&(this.set("value","",o),this.set(c,o))},a.prototype.getInitValue=function(){var o,e=this.component,r=this.getName();if(e){var c=e.get("attributes");o=this.changeProp?e.get(r):c[r]}return o||this.get("value")||this.get("default")},a}(L.Kx);const vn=qr;var On=function(){function d(a){void 0===a&&(a={}),this.config=a}return d.prototype.build=function(a,e){return(0,x.isString)(a)?this.buildFromString(a,e):new vn(a,e)},d.prototype.buildFromString=function(a,e){var r={name:a,type:"text"};return"target"===a&&(r.type="select",r.default=!1,r.options=this.config.optionsTarget),new vn(r,e)},d}();const oi=On;var ji=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Cs=function(d){function a(e,r){var o=d.call(this,e)||this;o.categories=new Nl;var c=r.em;o.em=c,o.categories=new Nl([],{em:c,events:{update:Ve.categoryUpdate}}),o.on("add",o.handleAdd),o.on("reset",o.handleReset);var g=o.module,b=g?.getConfig();return o.tf=new oi(b),o}return ji(a,d),Object.defineProperty(a.prototype,"module",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),a.prototype.getCategories=function(){return this.categories},a.prototype.handleReset=function(e,r){var c=(void 0===r?{}:r).previousModels;(void 0===c?[]:c).forEach(function(b){return b.trigger("remove")})},a.prototype.handleAdd=function(e){e.em=this.em;var r=this.target;r&&(e.target=r),this.initCategory(e)},a.prototype.setTarget=function(e){this.target=e,this.models.forEach(function(r){return r.setTarget(e)})},a.prototype.add=function(e,r){if(null!=e){var c=this.target,g=this.em;if((0,x.isArray)(e)){for(var b=[],w=0,C=e.length;w<C;w++){var B=e[w];b[w]=B instanceof vn?B:this.tf.build(B,g),b[w].setTarget(c)}return d.prototype.add.call(this,b,r)}var ne=e instanceof vn?e:this.tf.build(e,g);return ne.setTarget(c),d.prototype.add.call(this,ne,r)}},a}(Td);const Ls=Cs;var gl=function(){return gl=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},gl.apply(this,arguments)},_c=function(){function d(a,e,r){this.component=a,this.updateFn=e,this.resolverListeners={},this.em=r.em,this.collectionsStateMap=r.collectionsStateMap}return d.prototype.bindComponent=function(a){this.component=a},d.prototype.updateCollectionStateMap=function(a){var e=this;this.collectionsStateMap=a;var o=this.getDynamicValuesOfType(rs).reduce(function(b,w){return b[w]=null,b},{}),c=this.getSerializableValues(o),g=this.addDynamicValues(c);Object.keys(g).forEach(function(b){e.updateFn(e.component,b,g[b])})},d.prototype.setDynamicValues=function(a,e){return void 0===e&&(e={}),e.skipWatcherUpdates||e.fromDataSource||this.removeListeners(),this.addDynamicValues(a,e)},d.prototype.addDynamicValues=function(a,e){if(void 0===e&&(e={}),!a)return{};var r=this.evaluateValues(a);return e.skipWatcherUpdates||e.fromDataSource||this.updateListeners(a),r},d.prototype.updateListeners=function(a){var e=this,o=this.em,c=this.collectionsStateMap;this.removeListeners(Object.keys(a));for(var g=Object.keys(a),b=function(B){var ne=g[B],ae=a[ne];if(!Vi(ae))return"continue";var be=Wc(ae,{em:o,collectionsStateMap:c});w.resolverListeners[ne]=new Lc({em:o,resolver:be,onUpdate:function(Se){return e.updateFn.bind(e)(e.component,ne,Se)}})},w=this,C=0;C<g.length;C++)b(C)},d.prototype.evaluateValues=function(a){for(var r=this.em,o=this.collectionsStateMap,c=gl({},a),g=Object.keys(a),b=0;b<g.length;b++){var w=g[b],C=a[w];Vi(C)&&(c[w]=Vd(C,{em:r,collectionsStateMap:o}))}return c},d.prototype.removeListeners=function(a){var e=this,r=a||Object.keys(this.resolverListeners);return r.forEach(function(o){var c,g;e.resolverListeners[o]&&(null===(g=(c=e.resolverListeners[o]).destroy)||void 0===g||g.call(c),delete e.resolverListeners[o])}),r},d.prototype.getSerializableValues=function(a){if(!a)return{};for(var e=gl({},a),r=Object.keys(e),o=0;o<r.length;o++){var c=r[o],g=this.resolverListeners[c];g&&(e[c]=g.resolver.toJSON())}return e},d.prototype.getAllSerializableValues=function(){for(var a={},e=Object.keys(this.resolverListeners),r=0;r<e.length;r++){var o=e[r];a[o]=this.resolverListeners[o].resolver.toJSON()}return a},d.prototype.getDynamicValuesOfType=function(a){var e=this;return Object.keys(this.resolverListeners).filter(function(o){return e.resolverListeners[o].resolver.get("type")===a})},d.prototype.destroy=function(){this.removeListeners()},d}(),hu={fromDataSource:!0,avoidStore:!0},Jf=function(){function d(a,e){this.component=a,this.propertyWatcher=new _c(a,this.onPropertyUpdate,e),this.attributeWatcher=new _c(a,this.onAttributeUpdate,e)}return d.prototype.onPropertyUpdate=function(a,e,r){a?.set(e,r,hu)},d.prototype.onAttributeUpdate=function(a,e,r){var o;a?.addAttributes(((o={})[e]=r,o),hu)},d.prototype.bindComponent=function(a){this.component=a,this.propertyWatcher.bindComponent(a),this.attributeWatcher.bindComponent(a),this.updateSymbolOverride()},d.prototype.updateCollectionStateMap=function(a){this.propertyWatcher.updateCollectionStateMap(a),this.attributeWatcher.updateCollectionStateMap(a)},d.prototype.addProps=function(a,e){var r=this;void 0===e&&(e={});var o=["components"],c=Object.fromEntries(Object.entries(a).map(function(w){var C,B=w[0],ne=w[1];return o.includes(B)?[B,ne]:[B,r.propertyWatcher.addDynamicValues((C={},C[B]=ne,C),e)[B]]}));if(a.attributes){var g=this.attributeWatcher.setDynamicValues(a.attributes,e);c.attributes=g}return e.skipWatcherUpdates||e.fromDataSource||this.updateSymbolOverride(),c},d.prototype.removeAttributes=function(a){this.attributeWatcher.removeListeners(a),this.updateSymbolOverride()},d.prototype.updateSymbolOverride=function(){if(this.component&&this.component.get(gc)){var a=this.propertyWatcher.getDynamicValuesOfType(rs),e=this.attributeWatcher.getDynamicValuesOfType(rs),r=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([Qo,"locked"],a,!0);Object.keys(e).length&&r.push("attributes"),cc(this.component).forEach(function(g){g.setSymbolOverride(r,{fromDataSource:!0})}),this.component.setSymbolOverride(r,{fromDataSource:!0})}},d.prototype.getDynamicPropsDefs=function(){return this.propertyWatcher.getAllSerializableValues()},d.prototype.getDynamicAttributesDefs=function(){return this.attributeWatcher.getAllSerializableValues()},d.prototype.getPropsDefsOrValues=function(a){return this.propertyWatcher.getSerializableValues(a)},d.prototype.getAttributesDefsOrValues=function(a){return this.attributeWatcher.getSerializableValues(a)},d.prototype.destroy=function(){this.propertyWatcher.destroy(),this.attributeWatcher.destroy()},d}(),Dm=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vs=function(){return Vs=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Vs.apply(this,arguments)},fd=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},qm=function(d){return d.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")},Of=function(d){return!!d?.getConfig().avoidInlineStyle},Sh="component:drag",wl="__symbols",Au="__symbol",Df="__symbol_ovrd",Yf=gt.I.update,Tf=gt.I.updateInside,yg=function(d){function a(e,r){void 0===e&&(e={});var o=this,c=new Jf(void 0,{em:r.em,collectionsStateMap:e[Qo]});(o=d.call(this,e,Vs(Vs({},r),{dataResolverWatchers:c}))||this).collectionStateListeners=[],c.bindComponent(o),o.dataResolverWatchers=c,(0,x.bindAll)(o,"__upSymbProps","__upSymbCls","__upSymbComps");var g=r.em,b=o.parent(),w=b?.attributes,C=o.get("propagate");if(C&&o.set("propagate",(0,x.isArray)(C)?C:[C]),w&&w.propagate&&!C){var B={},ne=w.propagate;ne.forEach(function(Ot){return B[Ot]=b.get(Ot)}),B.propagate=ne,o.set(Vs(Vs({},B),e))}r&&r.config&&r.config.voidElements.indexOf(o.get("tagName"))>=0&&o.set("void",!0),r.em=g,o.opt=r,o.em=g,o.config=r.config||{};var ae=o.dataResolverWatchers.getDynamicAttributesDefs();if(o.setAttributes(Vs(Vs(Vs({},(0,x.result)(o,"defaults").attributes||{}),o.get("attributes")||{}),ae)),o.ccid=a.createId(o,r),o.preInit(),o.initClasses(),o.initComponents(),o.initTraits(),o.initToolbar(),o.initScriptProps(),o.listenTo(o,"change:script",o.scriptUpdated),o.listenTo(o,"change:tagName",o.tagUpdated),o.listenTo(o,"change:attributes",o.attrUpdated),o.listenTo(o,"change:attributes:id",o._idUpdated),o.on("change:toolbar",o.__emitUpdateTlb),o.on("change",o.__onChange),o.on(Tf,o.__propToParent),o.set("status",""),o.views=[],["classes","traits","components"].forEach(function(Ot){var ur="add remove ".concat("components"!==Ot?"change":"");o.listenTo(o.get(Ot),ur.trim(),function(){for(var Gt=[],ar=0;ar<arguments.length;ar++)Gt[ar]=arguments[ar];return o.emitUpdate.apply(o,fd([Ot],Gt,!1))})}),!r.temporary){var be=g&&g.Css,Se=o.attributes,We=Se.styles;We&&be&&be.addCollection(We,{avoidUpdateStyle:!0},{group:"cmp:".concat(Se.type)}),o.__postAdd(),o.init(),ra(o)&&Ra(o),g?.trigger(gt.I.create,o,r)}return o}return Dm(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){var e;return(e={tagName:"div",type:"",name:"",removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,"stylable-require":"","style-signature":"",unstylable:"",highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,void:!1,state:"",status:"",content:"",icon:"",style:"",styles:"",classes:"",script:"","script-props":"","script-export":"",attributes:{},traits:["id","title"],propagate:"",dmode:"",toolbar:null,delegate:null})[Au]=0,e[wl]=0,e[Df]=0,e._undo=!0,e._undoexc=["status","open"],e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"tagName",{get:function(){return this.get("tagName")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"classes",{get:function(){return this.get("classes")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"traits",{get:function(){return this.get("traits")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"content",{get:function(){var e;return null!==(e=this.get("content"))&&void 0!==e?e:""},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"toolbar",{get:function(){return this.get("toolbar")||[]},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"resizable",{get:function(){return this.get("resizable")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"delegate",{get:function(){return this.get("delegate")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"locked",{get:function(){return this.get("locked")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"frame",{get:function(){return this.opt.frame},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"page",{get:function(){var e;return null===(e=this.frame)||void 0===e?void 0:e.getPage()},enumerable:!1,configurable:!0}),a.prototype.preInit=function(){},a.prototype.init=function(){},a.prototype.updated=function(e,r,o){},a.prototype.removed=function(){},a.prototype.set=function(e,r,o){var c,g,b={skipWatcherUpdates:!1,fromDataSource:!1};"object"==typeof e?(g=e,b=r||b):"string"==typeof e?((c={})[e]=r,g=c,b=o||b):(g={},b=o||b),this.dataResolverWatchers=this.dataResolverWatchers||b.dataResolverWatchers;var w=this.dataResolverWatchers.addProps(g,b);return d.prototype.set.call(this,w,b)},a.prototype.__postAdd=function(e){void 0===e&&(e={});var r=this.em,o=r?.UndoManager,c=this.components();o&&!this.__hasUm&&(o.add(c),o.add(this.getSelectors()),this.__hasUm=!0),e.recursive&&c.map(function(g){return g.__postAdd(e)})},a.prototype.__postRemove=function(){var e=this.em,r=e?.UndoManager;r&&(r.remove(this.components()),r.remove(this.getSelectors()),delete this.__hasUm)},a.prototype.__onChange=function(e,r){var o=this,c=this.changedAttributes()||{};(0,x.keys)(c).forEach(function(g){return o.emitUpdate(g)}),["status","open","toolbar","traits"].forEach(function(g){return delete c[g]}),(0,z.isEmptyObj)(c)||(this.__changesUp(r),this.__propSelfToParent({component:this,changed:c,options:r}))},a.prototype.__onStyleChange=function(e){var r=this,o=this.em;if(o){var c="component:styleUpdate",g=(0,x.keys)(e),b={style:e};o.trigger(c,this,b),g.forEach(function(w){return o.trigger("".concat(c,":").concat(w),r,b)})}},a.prototype.__changesUp=function(e){[this.frame,this.em].forEach(function(g){return g&&g.changesUp(e)})},a.prototype.__propSelfToParent=function(e){this.trigger(Yf,e),this.__propToParent(e)},a.prototype.__propToParent=function(e){var r=this.parent();r&&r.trigger(Tf,e)},a.prototype.__emitUpdateTlb=function(){this.emitUpdate("toolbar")},a.prototype.__getAllById=function(){var e=this.em;return e?e.Components.allById():{}},a.prototype.__upSymbProps=function(e,r){void 0===r&&(r={}),function(d,a){void 0===a&&(a={});var e=d.dataResolverWatchers.getPropsDefsOrValues(uo({},d.changedAttributes())),r=d.dataResolverWatchers.getAttributesDefsOrValues(uo({},e.attributes));if(function(d,a){["status","open",wl,Au,Df,"attributes"].forEach(function(r){return delete d[r]}),delete a.id,(0,z.isEmptyObj)(a)||(d.attributes=a)}(e,r),!(0,z.isEmptyObj)(e)){var o=cc(d,a);sd(e,d),Aa(d,"props",o,{opts:a,changed:e}),o.forEach(function(c){var g=uo({},e);sd(g,c),c.set(g,uo({fromInstance:d},a))})}}(this,r)},a.prototype.__upSymbCls=function(e,r,o){void 0===o&&(o={}),function(d,a){void 0===a&&(a={});var e=cc(d,a);Aa(d,"classes",e,{opts:a}),e.forEach(function(r){r.set("classes",d.get("classes"),{fromInstance:d})}),d.__changesUp(a)}(this,o)},a.prototype.__upSymbComps=function(e,r,o){zd(this,e,r,o)},a.prototype.is=function(e){return this.get("type")==e},a.prototype.props=function(){return this.attributes},a.prototype.index=function(){var e=this.collection;return e?e.indexOf(this):0},a.prototype.setDragMode=function(e){return this.set("dmode",e)},a.prototype.getDragMode=function(){return this.get("dmode")||""},a.prototype.setSymbolOverride=function(e,r){var o,c;void 0===r&&(r={}),this.set(((o={})[Df]=null!==(c=(0,x.isString)(e)?[e]:e)&&void 0!==c?c:0,o),r)},a.prototype.getSymbolOverride=function(){return this.get(Df)},a.prototype.find=function(e){var r,o=[],c=null===(r=this.view)||void 0===r?void 0:r.$el.find(e);return c?.each(function(g){var w=c.eq(g).data("model");w&&o.push(w)}),o},a.prototype.findType=function(e){var r=[],o=function(c){return c.forEach(function(g){g.is(e)&&r.push(g),o(g.components())})};return o(this.components()),r},a.prototype.findFirstType=function(e){return this.findType(e).at(0)},a.prototype.closest=function(e){var r,o=null===(r=this.view)||void 0===r?void 0:r.$el.closest(e);return o?.length?o.data("model"):void 0},a.prototype.closestType=function(e){for(var r=this.parent();r&&!r.is(e);)r=r.parent();return r},a.prototype.contains=function(e){var r=!1;if(!e)return r;var o=function(c){!r&&c.forEach(function(g){g===e&&(r=!0),!r&&o(g.components())})};return o(this.components()),r},a.prototype.tagUpdated=function(){this.trigger("rerender")},a.prototype.replaceWith=function(e,r){void 0===r&&(r={});var o=this.collection,c=o.indexOf(this);o.remove(this);var g=o.add(e,Vs(Vs({},r),{at:c}));return(0,x.isArray)(g)?g:[g]},a.prototype.attrUpdated=function(e,r,o){var c=this;void 0===o&&(o={});var g=this.get("attributes"),b=g.class;b&&this.setClass(b),delete g.class;var w=g.style;w&&this.setStyle(w,o),delete g.style;var C=Vs({},this.previous("attributes")),B=(0,z.shallowDiff)(C,this.get("attributes"));(0,x.keys)(B).forEach(function(ne){var ae,be="attributes:".concat(ne);c.trigger("change:".concat(be),c,B[ne],o),null===(ae=c.em)||void 0===ae||ae.trigger("".concat(Yf,":").concat(be),c,B[ne],o)})},a.prototype.setAttributes=function(e,r){return void 0===r&&(r={skipWatcherUpdates:!1,fromDataSource:!1}),this.set("attributes",Vs({},e),r),this},a.prototype.addAttributes=function(e,r){void 0===r&&(r={});var o=this.dataResolverWatchers.getDynamicAttributesDefs();return this.setAttributes(Vs(Vs(Vs({},this.getAttributes({noClass:!0})),o),e),r)},a.prototype.removeAttributes=function(e,r){void 0===e&&(e=[]),void 0===r&&(r={});var o=Array.isArray(e)?e:[e];this.dataResolverWatchers.removeAttributes(o);var c=this.getAttributes();return o.map(function(g){return delete c[g]}),this.setAttributes(c,r)},a.prototype.getStyle=function(e,r){void 0===e&&(e={}),void 0===r&&(r={});var o=this.em,c=(0,x.isString)(e)?e:"",g=c?r:e;if(Of(o)&&!g.inline){var b=o.get("state"),C=o.Css.getIdRule(this.getId(),Vs({state:b},g));return this.rule=C,C?C.getStyle(c):{}}return d.prototype.getStyle.call(this,c)},a.prototype.setStyle=function(e,r){var o=this;void 0===e&&(e={}),void 0===r&&(r={});var g=this.opt,b=this.em;if(!Of(b)||g.temporary||r.inline)e=d.prototype.setStyle.apply(this,arguments);else{var w=this.get("style")||{};e=(0,x.isString)(e)?this.parseStyle(e):e,e=Vs(Vs({},e),w);var C=b.get("state"),B=b.Css,ne=this.getStyle(r);this.rule=B.setIdRule(this.getId(),e,Vs({state:C},r));var ae=(0,z.shallowDiff)(ne,e);this.set("style","",{silent:!0}),(0,x.keys)(ae).forEach(function(be){return o.trigger("change:style:".concat(be))})}return g.temporary||this.__onStyleChange(r.addStyle||e),e},a.prototype.getAttributes=function(e){void 0===e&&(e={});var r=this.em,o=[],c=Vs({},this.get("attributes")),g=r?.Selectors,b=this.getId();if(e.noClass?delete c.class:(this.classes.forEach(function(B){return o.push((0,x.isString)(B)?B:B.getName())}),o.length&&(c.class=o.join(" "))),!e.noStyle){var w=this.getStyle({inline:!0});(0,z.isObject)(w)&&!(0,z.isEmptyObj)(w)&&(c.style=this.styleToString({inline:!0}))}if(!(0,x.has)(c,"id")){var C=!1;(Of(r)||!(0,x.isEmpty)(this.getStyle()))&&(C=!!g?.get(b,g.Selector.TYPE_ID)),(ra(this)||this.get("script-export")||this.get("script"))&&(C=!0),C&&(c.id=b)}return c},a.prototype.addClass=function(e){var r=this.em.Selectors.addClass(e);return this.classes.add(r)},a.prototype.setClass=function(e){return this.classes.reset(),this.addClass(e)},a.prototype.removeClass=function(e){var r=[];e=(0,x.isArray)(e)?e:[e];var o=this.classes,c=oc.TYPE_CLASS;return e.forEach(function(g){g.split(" ").forEach(function(w){var C=o.where({name:w,type:c})[0];C&&r.push(o.remove(C))})}),r},a.prototype.getClasses=function(){var r=this.getAttributes().class;return r?r.split(" "):[]},a.prototype.initClasses=function(e,r,o){void 0===o&&(o={});var g=this.get("attributes")||{},b=g.class,w=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(g,["class"]),C=[this,"change:classes",this.initClasses],B=this.get("classes")||b||[],ne=(0,x.isString)(B)?B.split(" "):B;this.stopListening.apply(this,C);var ae=this.normalizeClasses(ne),be=new Mu([]);return this.set("classes",be,o),be.add(ae),be.on("add remove reset",this.__upSymbCls),b&&ae.length&&this.set("attributes",w),this.listenTo.apply(this,C),this},a.prototype.initComponents=function(){var r=[this,"change:components",this.initComponents];this.stopListening.apply(this,r);var o=new xu([],this.opt);o.parent=this;var c=this.get("components"),g=!this.opt.avoidChildren;return this.set("components",o),g&&c&&o.add((0,x.isFunction)(c)?c(this):c,this.opt),o.on("add remove reset",this.__upSymbComps),this.listenTo.apply(this,r),this},a.prototype.initTraits=function(e){var r=this,o=this.em,c="change:traits";this.off(c,this.initTraits),this.__loadTraits();var g=Vs({},this.get("attributes")),b=this.traits;b.each(function(C){var B=C.getName(),ne=C.getInitValue();C.changeProp?(0,x.isUndefined)(r.get(B))&&r.set(B,ne):B&&ne&&(g[B]=ne)});var w=this.dataResolverWatchers.getDynamicAttributesDefs();return b.length&&this.setAttributes(Vs(Vs({},g),w)),this.on(c,this.initTraits),e&&o&&o.trigger("component:toggled"),this},a.prototype.initScriptProps=function(){if(!this.opt.temporary){var e="script-props",r=["change:".concat(e),this.initScriptProps];this.off.apply(this,r);var o=this.previous(e)||[],c=this.get(e)||[],g=o.map(function(w){return"change:".concat(w)}).join(" "),b=c.map(function(w){return"change:".concat(w)}).join(" ");g&&this.off(g,this.__scriptPropsChange),b&&this.on(b,this.__scriptPropsChange),this.on.apply(this,r)}},a.prototype.__scriptPropsChange=function(e,r,o){void 0===o&&(o={}),!o.avoidStore&&this.trigger("rerender")},a.prototype.append=function(e,r){void 0===r&&(r={});var c=((0,x.isArray)(e)?fd([],e,!0):[e]).map(function(b){return(0,x.isString)(b)||b.collection&&b.collection.remove(b,{temporary:!0}),b});return this.components().add(c,Vs({action:gt.t.add},r))},a.prototype.components=function(e,r){void 0===r&&(r={});var o=this.get("components");return(0,x.isUndefined)(e)?o:(o.reset(void 0,r),e?this.append(e,r):[])},a.prototype.getChildAt=function(e){return this.components().at(e||0)||void 0},a.prototype.getLastChild=function(){var e=this.components();return e.at(e.length-1)||null},a.prototype.empty=function(e){return void 0===e&&(e={}),this.components().reset(void 0,e),this},a.prototype.parent=function(e){void 0===e&&(e={});var r=this.collection||e.prev&&this.prevColl;return r?r.parent:void 0},a.prototype.parents=function(){var e=this.parent();return e?[e].concat(e.parents()):[]},a.prototype.scriptUpdated=function(){this.set("scriptUpdated",1)},a.prototype.initToolbar=function(){var e=this.em,r=this,o=e&&e.getConfig().stylePrefix||"";if(!r.get("toolbar")&&e){var c=[];r.collection&&c.push({label:e.getIcon("arrowUp"),command:function(g){return g.runCommand("core:component-exit",{force:1})}}),r.get("draggable")&&c.push({attributes:{class:"".concat(o,"no-touch-actions"),draggable:!0},label:e.getIcon("move"),command:"tlb-move"}),r.get("copyable")&&c.push({label:e.getIcon("copy"),command:"tlb-clone"}),r.get("removable")&&c.push({label:e.getIcon("delete"),command:"tlb-delete"}),r.set("toolbar",c)}},a.prototype.__loadTraits=function(e,r){void 0===r&&(r={});var o=e||this.traits;if(!(o instanceof Ls)){o=(0,x.isFunction)(o)?o(this):o;var c=new Ls([],this.opt);c.setTarget(this),o.length&&c.add(o),this.set({traits:c},r)}return this},a.prototype.getTraits=function(){return this.__loadTraits(),fd([],this.traits.models,!0)},a.prototype.setTraits=function(e){var r=(0,x.isArray)(e)?e:[e];return this.set({traits:r}),this.getTraits()},a.prototype.getTrait=function(e){return this.getTraits().filter(function(r){return r.get("id")===e||r.get("name")===e})[0]||null},a.prototype.updateTrait=function(e,r){var o,c=this.getTrait(e);return c&&c.set(r),null===(o=this.em)||void 0===o||o.trigger("component:toggled"),this},a.prototype.getTraitIndex=function(e){var r=this.getTrait(e);return r?this.traits.indexOf(r):-1},a.prototype.removeTrait=function(e){var o,r=this,g=((0,x.isArray)(e)?e:[e]).map(function(C){return r.getTrait(C)}),w=g.length?this.traits.remove(g):[];return null===(o=this.em)||void 0===o||o.trigger("component:toggled"),(0,x.isArray)(w)?w:[w]},a.prototype.addTrait=function(e,r){var o;void 0===r&&(r={}),this.__loadTraits();var c=this.traits.add(e,r);return null===(o=this.em)||void 0===o||o.trigger("component:toggled"),(0,x.isArray)(c)?c:[c]},a.prototype.normalizeClasses=function(e){var r=[],o=this.em,c=o?.Selectors;return c?e.models?fd([],e.models,!0):(e.forEach(function(g){return r.push(c.add(g))}),r):[]},a.prototype.clone=function(e){void 0===e&&(e={});var r=this.em,o=Vs(Vs({},this.attributes),this.dataResolverWatchers.getDynamicPropsDefs()),c=Vs({},this.opt),g=this.getId(),b=r?.Css;o.attributes=Vs({},o.attributes?this.dataResolverWatchers.getAttributesDefsOrValues(o.attributes):void 0),o.components=[],o.classes=[],o.traits=[],Ri(this)&&(e.symbol=!0),this.get("components").each(function(Se,We){o.components[We]=Se.clone(Vs(Vs({},e),{_inner:1}))}),this.get("traits").each(function(Se,We){o.traits[We]=Se.clone()}),this.get("classes").each(function(Se,We){o.classes[We]=Se.get("name")}),o.status="",c.collection=null,c.forCloning=!0;var w=new this.constructor(o,c),C="#".concat(w.getId());(b?b.getRules("#".concat(g)):[]).forEach(function(Se){var We=Se.clone();We.set("selectors",[C]),b.getAll().add(We)}),w.set(wl,0);var ne=es(this),ae=Xi(this);e.symbol||!ne&&!ae?ne?(ne.set(wl,fd(fd([],Xi(ne),!0),[w],!1)),Ra(w)):e.symbol&&(Jo(this)?(this.set(wl,fd(fd([],ae,!0),[w],!1)),w.set(Au,this),Ra(w)):e.symbolInv?(this.set(wl,[w]),w.set(Au,this),[this,w].map(function(Se){return Ra(Se)})):(w.set(wl,[this]),[this,w].map(function(Se){return Ra(Se)}),this.set(Au,w))):(w.set(Au,0),w.set(wl,0));var be="component:clone";return r&&r.trigger(be,w),this.trigger(be,w),w},a.prototype.getName=function(e){void 0===e&&(e={});var r=this.em,o=this.attributes,c=o.type,g=o.tagName,b=o.name,w=c||g,C=c?"":g,B="domComponents.names.",ne=b&&r?.t("".concat(B).concat(b)),ae=C&&r?.t("".concat(B).concat(C)),be=r&&(r.t("".concat(B).concat(c))||r.t("".concat(B).concat(g))),Se=this.get("custom-name");return(e.noCustom?"":Se)||ne||b||ae||(0,z.capitalize)(C)||be||(0,z.capitalize)(w)},a.prototype.setName=function(e,r){void 0===r&&(r={}),this.set("custom-name",e,r)},a.prototype.getIcon=function(){var e=this.get("icon");return e?e+" ":""},a.prototype.toHTML=function(e){void 0===e&&(e={});var o=e.tag||this.get("tagName");delete e.tag;var c=this.__attrToString(e),g=c?" ".concat(c):"",b=this.getInnerHTML(e),w=!b&&this.get("void"),C="<".concat(o).concat(g).concat(w?"/":"",">").concat(b);return!w&&(C+="</".concat(o,">")),C},a.prototype.getInnerHTML=function(e){return this.__innerHTML(e)},a.prototype.__innerHTML=function(e){void 0===e&&(e={});var r=this.components();return r.length?r.map(function(o){return o.toHTML(e)}).join(""):this.content},a.prototype.__attrToString=function(e){void 0===e&&(e={});var r=[],o=e.attributes,c=this.getAttrToHTML(e);if(o&&((0,x.isFunction)(o)?c=o(this,c)||{}:(0,z.isObject)(o)&&(c=o)),e.withProps){var g=this.toJSON();(0,x.forEach)(g,function(ne,ae){"_"!==ae[0]&&["classes","attributes","components"].indexOf(ae)<0&&(c["data-gjs-".concat(ae)]=(0,x.isArray)(ne)||(0,z.isObject)(ne)?JSON.stringify(ne):(0,x.isBoolean)(ne)?"".concat(ne):ne)})}for(var b in c){var w=c[b];if(!(0,x.isUndefined)(w)&&null!==w)if((0,x.isBoolean)(w))w&&r.push(b);else{var C="";if(e.altQuoteAttr&&(0,x.isString)(w)&&w.indexOf('"')>=0)C="'".concat(w.replace(/'/g,"&apos;"),"'");else{var B=(0,x.isString)(w)?w.replace(/"/g,"&quot;"):w;C='"'.concat(B,'"')}r.push("".concat(b,"=").concat(C))}}return r.join(" ")},a.prototype.getAttrToHTML=function(e){var r=this.getAttributes();return Of(this.em)&&!0!==e?.keepInlineStyle&&delete r.style,r},a.prototype.toJSON=function(e){void 0===e&&(e={});var r=U.Model.prototype.toJSON.call(this,e);if((r=Vs(Vs({},r),this.dataResolverWatchers.getDynamicPropsDefs())).attributes=this.dataResolverWatchers.getAttributesDefsOrValues(this.getAttributes()),delete r.dataResolverWatchers,delete r.attributes.class,delete r.toolbar,delete r.traits,delete r.status,delete r.open,delete r._undoexc,delete r.delegate,this.get(gc)&&(delete r[Au],delete r[Df],delete r[wl],delete r[Qo],delete r[gc],delete r.attributes.id),!e.fromUndo){var o=r[Au],c=r[wl];c&&(0,x.isArray)(c)&&(r[wl]=c.filter(function(g){return g}).map(function(g){return g.getId?g.getId():g})),o&&!(0,x.isString)(o)&&(r[Au]=o.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(r),r},a.prototype.getChangedProps=function(e){var r=e||U.Model.prototype.toJSON.apply(this),o=(0,x.result)(this,"defaults");return(0,x.forEach)(o,function(c,g){-1===["type"].indexOf(g)&&r[g]===c&&delete r[g]}),(0,x.isEmpty)(r.type)&&delete r.type,(0,x.forEach)(["attributes","style"],function(c){(0,x.isEmpty)(o[c])&&(0,x.isEmpty)(r[c])&&delete r[c]}),(0,x.forEach)(["classes","components"],function(c){(!r[c]||(0,x.isEmpty)(o[c])&&!r[c].length)&&delete r[c]}),r},a.prototype.getId=function(){return(this.get("attributes")||{}).id||this.ccid||this.cid},a.prototype.setId=function(e,r){return this.addAttributes({id:e},r),this},a.prototype.getEl=function(e){var r=this.getView(e);return r&&r.el},a.prototype.getView=function(e){var r=this,o=r.view,c=r.views,g=r.em,b=e||g?.getCurrentFrameModel();return b&&(o=c.filter(function(w){return w.frameView===b.view})[0]),o},a.prototype.getCurrentView=function(){var e=this.em.getCurrentFrame(),r=e?.model;return this.getView(r)},a.prototype.__getScriptProps=function(){var e=this.props();return(this.get("script-props")||[]).reduce(function(o,c){return o[c]=e[c],o},{})},a.prototype.getScriptString=function(e){var r=this,o=e||this.get("script")||"";if(!o)return o;if(this.get("script-props"))o=o.toString().trim();else{if((0,x.isFunction)(o)){var c=o.toString().trim();o=(c=c.slice(c.indexOf("{")+1,c.lastIndexOf("}"))).trim()}var g=this.em.getConfig(),b=qm(g.tagVarStart||"{[ "),w=qm(g.tagVarEnd||" ]}"),C=new RegExp("".concat(b,"([\\w\\d-]*)").concat(w),"g");o=o.replace(C,function(B,ne){r.scriptUpdated();var ae=r.attributes[ne]||"";return(0,x.isArray)(ae)||"object"==typeof ae?JSON.stringify(ae):ae})}return o},a.prototype.emitUpdate=function(e){for(var r,o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];var g=this.em,b=Yf+(e?":".concat(e):""),w=e&&this.get(e);e&&this.updated.apply(this,fd([e,w,e&&this.previous(e)],o,!1)),this.trigger.apply(this,fd([b],o,!1)),g&&g.trigger.apply(g,fd([b,this],o,!1)),["components","classes"].indexOf(e)>=0&&this.__propSelfToParent({component:this,changed:(r={},r[e]=w,r),options:o[2]||o[1]||{}})},a.prototype.emitWithEditor=function(e,r,o){[this.em,this].forEach(function(c){return c?.trigger(e,r,o)})},a.prototype.onAll=function(e){return(0,x.isFunction)(e)&&(e(this),this.components().forEach(function(r){return r.onAll(e)})),this},a.prototype.forEachChild=function(e){(0,x.isFunction)(e)&&this.components().forEach(function(r){e(r),r.forEachChild(e)})},a.prototype.remove=function(e){var r=this;void 0===e&&(e={});var o=this.em,c=this.collection,g=function(){c&&c.remove(r,Vs({action:gt.t.remove},e)),c||(r.components("",e),r.components().removeChildren(r,void 0,e))},b=Vs({},e);return[this,o].map(function(w){return w.trigger(gt.I.removeBefore,r,g,b)}),!b.abort&&g(),this},a.prototype.destroy=function(e){return this.dataResolverWatchers.destroy(),d.prototype.destroy.call(this,e)},a.prototype.move=function(e,r){if(void 0===r&&(r={}),e){var o=r.at,c=this.index(),g=e===this.parent();if(!g||c!==o&&c!==o-1){g&&o&&o>c&&(r.at=o-1);var w=gt.t.move;this.remove({action:w,temporary:1}),e.append(this,Vs({action:w},r)),this.emitUpdate()}}return this},a.prototype.isInstanceOf=function(e){var r,o,c=null===(o=null===(r=this.em)||void 0===r?void 0:r.Components.getType(e))||void 0===o?void 0:o.model;return!!c&&(this instanceof c||this.constructor.typeExtends.has(e))},a.prototype.isChildOf=function(e){for(var r=(0,x.isString)(e),o=this.parent();o;){if(r){if(o.isInstanceOf(e))return!0}else if(o===e)return!0;o=o.parent()}return!1},a.prototype.resetId=function(e){void 0===e&&(e={});var r=this.em,o=this.getId();if(!o)return this;var c=a.createId(this);this.setId(c);var g=r?.Css.getIdRule(o),b=g?.get("selectors").at(0);return b?.set("name",c),this},a.prototype._getStyleRule=function(e){var c=this.em,g=(void 0===e?{}:e).id||this.getId();return c?.Css.getIdRule(g)},a.prototype._getStyleSelector=function(e){var r=this._getStyleRule(e);return r?.get("selectors").at(0)},a.prototype._idUpdated=function(e,r,o){if(void 0===o&&(o={}),!o.idUpdate){var c=this.ccid,g=(this.get("attributes")||{}).id,b=(this.previous("attributes")||{}).id||c,w=a.getList(this);if(w[g]||!g&&b)return this.setId(b,{idUpdate:!0});delete w[b],w[g]=this,this.ccid=g;var C=this._getStyleSelector({id:b});C&&C.set({name:g,label:g})}},a.getDefaults=function(){return(0,x.result)(this.prototype,"defaults")},a.isComponent=function(e,r){return{tagName:(0,z.toLowerCase)(e.tagName)}},a.ensureInList=function(e){var r=a.getList(e),o=e.getId(),c=r[o];if(c){if(c!==e){var g=a.getIncrementId(o,r);e.setId(g),r[g]=e}}else r[o]=e;e.components().forEach(function(b){return a.ensureInList(b)})},a.createId=function(e,r){void 0===r&&(r={});var w,o=a.getList(e),c=r.idMap,g=void 0===c?{}:c,b=e.get("attributes").id;return b?(w=a.getIncrementId(b,o,r),e.setId(w),b!==w&&(g[b]=w)):w=a.getNewId(o),o[w]=e,w},a.getNewId=function(e){for(var o=Object.keys(e).length.toString().length+2,c=(Math.random()+1.1).toString(36).slice(-o),g="i".concat(c);e[g];)g=a.getNewId(e);return g},a.getIncrementId=function(e,r,o){void 0===o&&(o={});var c=o.keepIds,b=1,w=e;if((void 0===c?[]:c).indexOf(e)<0)for(;r[w];)b++,w="".concat(e,"-").concat(b);return w},a.getList=function(e){var r,o=e.em,c=o?.Components;return null!==(r=c?.componentsById)&&void 0!==r?r:{}},a.checkId=function(e,r,o,c){void 0===r&&(r=[]),void 0===o&&(o={}),void 0===c&&(c={});var g=(0,x.isArray)(e)?e:[e],b=c.keepIds,w=void 0===b?[]:b,C=c.idMap,B=void 0===C?{}:C;g.forEach(function(ne){var ae=ne.attributes,be=void 0===ae?{}:ae,Se=ne.components,We=be.id;if(We&&o[We]&&w.indexOf(We)<0){var lt=a.getIncrementId(We,o);B[We]=lt,be.id=lt,(0,x.isArray)(r)&&r.forEach(function(Ot){var ur=Ot.selectors;ur.forEach(function(Gt,ar){Gt==="#".concat(We)&&(ur[ar]="#".concat(lt))})})}Se&&a.checkId(Se,r,o,c)})},a.typeExtends=new Set,a}(tn);const Ul=yg;var Hd=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qf=function(){return Qf=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Qf.apply(this,arguments)},Cu="head",Tm=["title","style","base","link","meta","script","noscript"],Gd=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Hd(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Qf(Qf({},d.prototype.defaults),{type:Cu,tagName:Cu,draggable:!1,highlightable:!1,droppable:function(e){var r=e.tagName;return!r||Tm.includes((0,z.toLowerCase)(r))}})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===Cu},a}(Ul);const Qp=Gd;var qd=m(2128),zg=m(6778),Sp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hg=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Sp(a,d),a.prototype.canMove=function(e,r){var o=this,c=this.getRealIndex(r),g=e._dragSource,b=g.model,w=g.content,C=g.dragDef,B=!b||!this.isSourceSameSymbol(b),ne=((0,x.isFunction)(w)?C:w)||e.model;return Array.isArray(ne)?B&&ne.every(function(ae,be){return o.canMoveSingleContent(ae,c+be)}):B&&this.canMoveSingleContent(ne,c)},a.prototype.canMoveSingleContent=function(e,r){return this.model.em.Components.canMove(this.model,e,r).result},a.prototype.addChildAt=function(e,r){var c=e._dragSource.content,g=this.isTextNode()&&e.isTextable(),b=(0,x.isFunction)(c)?c():c;return Array.isArray(b)?this.addMultipleChildren(b,r,g):this.addSingleChild(b,r,g)},a.prototype.addSingleChild=function(e,r,o){var c,g,b,w,C;return C=o?null===(w=null===(b=null===(g=null===(c=this.model)||void 0===c?void 0:c.getView)||void 0===g?void 0:g.call(c))||void 0===b?void 0:b.insertComponent)||void 0===w?void 0:w.call(b,e,{action:"add-component"}):this.model.components().add(e,{at:this.getRealIndex(r),action:"add-component"}),new this.constructor(C)},a.prototype.addMultipleChildren=function(e,r,o){var g,c=this;return e.forEach(function(b,w){g=c.addSingleChild(b,r+w,o)}),g},a.prototype.isSourceSameSymbol=function(e){if(ra(this.model)){var r=Il(this.model);if((Jo(r)?r:es(r))===e)return!0}return!1},Object.defineProperty(a.prototype,"content",{set:function(e){this._dragSource.content=e},enumerable:!1,configurable:!0}),a}(zg.A);const hd=Hg;var $d=function(){return $d=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},$d.apply(this,arguments)},$m=function(){function d(a,e){var r=this;this.em=a,this.canvas=a.Canvas;var o=e||this.canvas.getFrames().map(function(g){return g.getComponent().getEl()}),c=Array.isArray(o)?o:[o];this.el=c[0],this.counter=0,(0,x.bindAll)(this,"handleDragEnter","handleDragOver","handleDrop","handleDragLeave","handleDragEnd"),c.forEach(function(g){return r.toggleEffects(g,!0)})}return d.prototype.toggleEffects=function(a,e){var r={on:Ln.on,off:Ln.AU},o=e?"on":"off";r[o](a,"dragenter",this.handleDragEnter),r[o](a,"dragover",this.handleDragOver),r[o](a,"drop",this.handleDrop),r[o](a,"dragleave",this.handleDragLeave)},d.prototype.__customTglEff=function(a){var e,r=a?Ln.on:Ln.AU,o=this.el.ownerDocument,c=null===(e=o.defaultView)||void 0===e?void 0:e.frameElement;this.getSorterOptions=a?function(b){return{legacyOnStartSort:function(){(0,Ln.on)(c,"pointermove",b.onMove)},legacyOnEnd:function(){(0,Ln.AU)(c,"pointermove",b.onMove)},customTarget:function(w){var C=w.event;return o.elementFromPoint(C.clientX,C.clientY)}}}:void 0,r(c,"pointerenter",this.handleDragEnter),r(c,"pointermove",this.handleDragOver),r(document,"pointerup",this.handleDrop),r(c,"pointerout",this.handleDragLeave)},d.prototype.startCustom=function(){this.__customTglEff(!0)},d.prototype.endCustom=function(a){this.over?this.endDrop(a):this.__customTglEff(!1)},d.prototype.endDrop=function(a,e){var o=this.em,c=this.dragStop;this.counter=0,c&&c(a||!this.over),this.__customTglEff(!1),o.trigger("canvas:dragend",e)},d.prototype.handleDragLeave=function(a){this.updateCounter(-1,a)},d.prototype.updateCounter=function(a,e){this.counter+=a,0===this.counter&&this.endDrop(!0,e)},d.prototype.handleDragEnter=function(a){var r,o,c,e=this,b=this.em,w=this.canvas,C=a.dataTransfer,B=b.get("dragSource");if((B?.content||w.getConfig().allowExternalDrop)&&(this.updateCounter(1,a),!this.over)){this.over=!0;var be,ne=b.Utils,ae=B?.content||"<br>";if(b.stopDefault(),b.inAbsoluteMode()){var Se=b.Components.getWrapper(),We=Se.append({})[0],lt=b.Commands.run("core:component-drag",{event:a,guidesInfo:1,center:1,target:We,onEnd:function(fo,ti,jn){var Dn;if(!jn.cancelled&&ae){Dn=Se.append(ae)[0];var ir=w.getOffset(),Bt=We.getStyle(),wr=Bt.top,sr=Bt.left,gn=Bt.position,xt=(0,Ln.Xy)(fo.target),Eo=parseInt("".concat(parseFloat(sr)+xt.x-ir.left),10),_o=parseInt("".concat(parseFloat(wr)+xt.y-ir.top),10);Dn.addStyle({left:Eo+"px",top:_o+"px",position:gn})}e.handleDragEnd(Dn,C),We.remove()}});be=function(fo){return lt.stop(a,{cancel:fo})},this.setAbsoluteDragContent=function(fo){return ae=fo}}else{var Ot=new ne.ComponentSorter({em:b,treeClass:hd,containerContext:{container:this.el,containerSel:"*",itemSel:"*",pfx:"gjs-",placeholderElement:w.getPlacerEl(),document:this.el.ownerDocument},dragBehavior:{dragDirection:qd.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnEndMove:this.handleDragEnd}}),ur=null===(r=this.getSorterOptions)||void 0===r?void 0:r.call(this,Ot);ur&&(Ot.eventHandlers.legacyOnStartSort=ur.legacyOnStart,Ot.eventHandlers.legacyOnEnd=ur.legacyOnEnd,Ot.containerContext.customTarget=ur.customTarget);var ar=null===(o=this.getTempDropModel(ae).view)||void 0===o?void 0:o.el;Ot.startSort(ar?[{element:ar,dragSource:B}]:[]),this.sorter=Ot,this.draggedNode=null===(c=Ot.sourceNodes)||void 0===c?void 0:c[0],be=function(fo){fo?Ot.cancelDrag():Ot.endDrag()}}this.dragStop=be,b.trigger("canvas:dragenter",C,ae)}},d.prototype.getTempDropModel=function(a){var e,r=this.em.Components.getComponents(),o={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},c=r.add(a,$d($d({},o),{temporary:!0})),g=r.remove(c,$d($d({},o),{temporary:!0}));return null===(e=(g=g instanceof Array?g[0]:g).view)||void 0===e||e.$el.data("model",g),g},d.prototype.handleDragEnd=function(a,e){var r=this.em;this.over=!1,a&&(r.set("dragResult",a),r.trigger("canvas:drop",e,a)),r.runDefault({preserveSelected:1})},d.prototype.handleDragOver=function(a){a.preventDefault(),this.em.trigger("canvas:dragover",a)},d.prototype.handleDrop=function(a){var e;a.preventDefault();var o=this.getContentByData(a.dataTransfer).content;this.draggedNode&&(this.draggedNode.content=o),null===(e=this.setAbsoluteDragContent)||void 0===e||e.call(this,o),this.endDrop(!o,a)},d.prototype.getContentByData=function(a){var e=this.em,r=a&&a.types,o=a&&a.files||[],c=e.get("dragSource"),g=a&&a.getData("text");if(o.length){g=[];for(var b=0;b<o.length;b++){var w=o[b],C=w.type.split("/")[0];"image"==C&&g.push({type:C,file:w,attributes:{alt:w.name}})}}else if(c?.content)g=c.content;else if((0,x.indexOf)(r,"text/html")>=0)g=a&&a.getData("text/html").replace(/<\/?meta[^>]*>/g,"");else if((0,x.indexOf)(r,"text/uri-list")>=0)g={type:"link",attributes:{href:g},content:g};else if((0,x.indexOf)(r,"text/json")>=0){var B=a&&a.getData("text/json");B&&(g=JSON.parse(B))}else 1===r.length&&"text/plain"===r[0]&&(g="<div>".concat(g,"</div>"));var ne={content:g};return e.trigger("canvas:dragdata",a,ne),ne},d}();const Jm=$m;var bg=function(){function d(a,e){var r;void 0===a&&(a=50),this.dragging=!1,this.lastMaxHeight=0,this.zoom=1,this.rectIsInScrollIframe=!1,this.autoscrollLimit=a,this.lastMaxHeight=null!==(r=e?.lastMaxHeight)&&void 0!==r?r:0,this.onScroll=e?.onScroll,this.rectIsInScrollIframe=!!e?.rectIsInScrollIframe,(0,x.bindAll)(this,"start","autoscroll","updateClientY","stop")}return d.prototype.start=function(a,e,r){var o=this;this.eventEl=a,this.scrollEl=e,this.lastMaxHeight=r?.lastMaxHeight||Number.POSITIVE_INFINITY,this.zoom=r?.zoom||1,setTimeout(function(){o.toggleAutoscrollFx(!0),requestAnimationFrame(o.autoscroll)},0)},d.prototype.autoscroll=function(){var a,e,r=this.scrollEl;if(this.dragging&&r){var o=null!==(a=this.lastClientY)&&void 0!==a?a:0,c=this.autoscrollLimit,b=this.getEventElHeight()-c,w=0;o<c&&(w+=o-c),o>b&&(w+=o-b);var C=this.getElScrollTop(r);void 0!==this.lastClientY&&0!==w&&this.lastMaxHeight-w>C&&(r.scrollBy({top:w,left:0,behavior:"auto"}),null===(e=this.onScroll)||void 0===e||e.call(this)),requestAnimationFrame(this.autoscroll)}},d.prototype.getEventElHeight=function(){var a=this.eventEl;return a?a.getBoundingClientRect().height:0},d.prototype.updateClientY=function(a){var e=this.scrollEl;a.preventDefault();var r=this.rectIsInScrollIframe?0:this.getElScrollTop(e);this.lastClientY=(0,Ln.G2)(a).clientY*this.zoom-r},d.prototype.getElScrollTop=function(a){return(a instanceof HTMLElement?a.scrollTop:a?.scrollY)||0},d.prototype.toggleAutoscrollFx=function(a){this.dragging=a;var e=this.eventEl;if(e){var r=a?"on":"off",o={on:Ln.on,off:Ln.AU};o[r](e,"mousemove dragover",this.updateClientY),o[r](e,"mouseup",this.stop)}},d.prototype.stop=function(){this.toggleAutoscrollFx(!1)},d}();const Sm=bg;var Pp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Eu=function(){return Eu=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Eu.apply(this,arguments)},Xp=function(d){function a(e,r){var o=d.call(this,{model:e})||this;o.dragging=!1,o.loaded=!1,o.lastMaxHeight=0,o.tools={},(0,x.bindAll)(o,"startAutoscroll","stopAutoscroll","_emitUpdate");var c=o.el;o.module._config=Eu(Eu({},o.config||{}),{frameView:o}),o.frameWrapView=r,o.showGlobalTools=(0,x.debounce)(o.showGlobalTools.bind(o),50);var g=o.getCanvasModel();return o.listenTo(e,"change:head",o.updateHead),o.listenTo(g,"change:styles",o.renderStyles),e.view=o,(0,z.setViewEl)(c,o),o.autoScroller=new Sm(o.config.autoscrollLimit,{rectIsInScrollIframe:!0,onScroll:function(){o.getGlobalToolsEl().style.opacity="0",o.showGlobalTools(),o.em.Canvas.spots.refreshDbn()}}),o}return Pp(a,d),Object.defineProperty(a.prototype,"tagName",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"attributes",{get:function(){return{allowfullscreen:"allowfullscreen"}},enumerable:!1,configurable:!0}),a.prototype.getBoxRect=function(){var r=this.el,o=this.module,c=o.getCanvasView(),g=o.getCoords(),b=r.getBoundingClientRect(),w=c.getCanvasOffset(),C=c.getViewportDelta(),B=o.getZoomMultiplier();return{x:(b.x-w.left-C.x-g.x)*B,y:(b.y-w.top-C.y-g.y)*B,width:b.width*B,height:b.height*B}},a.prototype.updateHead=function(){var e=this.model,r=this.getHead(),o=[],c=[],g=e.head,b=e.previous("head"),w=function(B){return void 0===B&&(B={}),Object.keys(B).sort().map(function(ne){return"[".concat(ne,'="').concat(B[ne],'"]')}).join("")},C=function(B,ne,ae){B.forEach(function(be){var Se=be.tag,We=be.attributes;!ne.some(function(Ot){return Ot.tag===Se&&w(Ot.attributes)===w(We)})&&ae.push(be)})};C(g,b,c),C(b,g,o),o.forEach(function(B){var ne,ae=r.querySelector("".concat(B.tag).concat(w(B.attributes)));null===(ne=ae?.parentNode)||void 0===ne||ne.removeChild(ae)}),(0,Ln.af)(r,c)},a.prototype.getEl=function(){return this.el},a.prototype.getCanvasModel=function(){var e;return null===(e=null==this?void 0:this.em.Canvas)||void 0===e?void 0:e.getModel()},a.prototype.getWindow=function(){return this.getEl().contentWindow},a.prototype.getDoc=function(){return this.getEl().contentDocument},a.prototype.getHead=function(){return this.getDoc().querySelector("head")},a.prototype.getBody=function(){return this.getDoc().querySelector("body")},a.prototype.getWrapper=function(){return this.getBody().querySelector("[data-gjs-type=wrapper]")},a.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,Ln.a_)("div",{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},a.prototype.getToolsEl=function(){var e;return null===(e=this.frameWrapView)||void 0===e?void 0:e.elTools},a.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},a.prototype.getHighlighter=function(){return this._getTool("[data-hl]")},a.prototype.getBadgeEl=function(){return this._getTool("[data-badge]")},a.prototype.getOffsetViewerEl=function(){return this._getTool("[data-offset]")},a.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},a.prototype.getOffsetRect=function(){var e=this.el,r=this.getBody(),o=r.scrollTop,c=r.scrollLeft,g=e.offsetHeight,b=e.offsetWidth;return{top:e.offsetTop,left:e.offsetLeft,height:g,width:b,scrollTop:o,scrollLeft:c,scrollBottom:o+g,scrollRight:c+b}},a.prototype._getTool=function(e){var r=this.tools,o=this.getToolsEl();return r[e]||(r[e]=o.querySelector(e)),r[e]},a.prototype.remove=function(){for(var e,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return this._toggleEffects(!1),this.tools={},null===(e=this.wrapper)||void 0===e||e.remove(),Ro.prototype.remove.apply(this,r),this},a.prototype.startAutoscroll=function(){this.autoScroller.start(this.el,this.getWindow(),{lastMaxHeight:this.getWrapper().offsetHeight-this.el.offsetHeight,zoom:this.em.getZoomDecimal()})},a.prototype.stopAutoscroll=function(){this.autoScroller.stop()},a.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=""},a.prototype.render=function(){var e=this,c=e.em;return e.$el.attr({class:"".concat(e.ppfx,"frame")}),this.renderScripts(),c.trigger("frame:render",this),this},a.prototype.renderScripts=function(){var e=this,r=this,o=r.el,g=r.em,b="frame:load",w={el:o,model:r.model,view:this},C=this.getCanvasModel(),B=function(ne){var ae;if(ne.length>0){var be=ne.shift(),Se=(0,Ln.a_)("script",Eu({type:"text/javascript"},(0,x.isString)(be)?{src:be}:be));null===(ae=o.contentDocument)||void 0===ae||ae.head.appendChild(Se),Se.hasAttribute("nomodule")&&"noModule"in HTMLScriptElement.prototype?B(ne):Se.onerror=Se.onload=B.bind(null,ne)}else g?.trigger(vr.frameLoadHead,w),e.renderBody(),g?.trigger(vr.frameLoadBody,w),g?.trigger(b,w)};o.onload=function(){var ne=e.config.frameContent;if(ne){var ae=e.getDoc();ae.open(),ae.write(ne),ae.close()}w.window=e.getWindow(),g?.trigger("".concat(b,":before"),w),g?.trigger(vr.frameLoad,w),e.renderHead(),B(function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],C.get("scripts"),!0))}},a.prototype.renderStyles=function(e){void 0===e&&(e={});var r=this.getHead(),o=this.getCanvasModel(),c=function(ne){return void 0===ne&&(ne=[]),ne.map(function(ae){return{tag:"link",attributes:Eu({rel:"stylesheet"},(0,x.isString)(ae)?{href:ae}:ae)}})},g=c(e.prev||o.previous("styles")),b=c(o?.get("styles")),w=[],C=[],B=function(ne,ae,be){ne.forEach(function(Se){var We=Se.attributes.href;!ae.some(function(Ot){return Ot.attributes.href===We})&&be.push(Se)})};B(b,g,C),B(g,b,w),w.forEach(function(ne){var ae,be=r.querySelector('link[href="'.concat(ne.attributes.href,'"]'));null===(ae=be?.parentNode)||void 0===ae||ae.removeChild(be)}),(0,Ln.af)(r,C)},a.prototype.renderHead=function(){var e,c=this.em,g=this.model.root,b=null===(e=c?.Components)||void 0===e?void 0:e.getType(Cu).view;b&&(this.headView=new b({el:this.getHead(),model:g.head,config:Eu(Eu({},g.config),{frameView:this})}).render())},a.prototype.renderBody=function(){var r,o,c,e=this,g=this,b=g.config,w=g.em,C=g.model,B=g.ppfx,ne=this.getDoc(),ae=this.getBody(),be=this.getWindow(),Se=C.hasAutoHeight(),We=w.config;be._isEditor=!0,this.renderStyles({prev:[]}),(0,Ln.BC)(ae,"<style>\n      ".concat(We.baseCss||b.frameStyle||"","\n\n      ").concat(Se?"body { overflow: hidden }":"",'\n\n      [data-gjs-type="wrapper"] {\n        ').concat(Se?"":"min-height: 100vh;","\n        padding-top: 0.001em;\n      }\n\n      .").concat(B,"dashed *[data-gjs-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(B,"selected {\n        outline: 2px solid #3b97e3 !important;\n        outline-offset: -2px;\n      }\n\n      .").concat(B,"selected-parent {\n        outline: 2px solid ").concat("#ffca6f"," !important\n      }\n\n      .").concat(B,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(B,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(B,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(B,"pointer-init {\n        pointer-events: initial;\n      }\n\n      .").concat(B,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(B,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(B,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(B,"is__grabbing,\n      .").concat(B,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(We.canvasCss||"","\n      ").concat(We.protectedCss||"","\n    </style>"));var Ot=C.root,ur=((null===(r=w?.Components)||void 0===r?void 0:r.getType("wrapper"))||{}).view;ur&&(this.wrapper=new ur({model:Ot,config:Eu(Eu({},Ot.config),{em:w,frameView:this})}).render(),(0,Ln.BC)(ae,null===(o=this.wrapper)||void 0===o?void 0:o.el),(0,Ln.BC)(ae,new Xt({collection:C.getStyles(),config:Eu(Eu({},w.Css.getConfig()),{frameView:this})}).render().el),(0,Ln.BC)(ae,this.getJsContainer()),(0,Ln.on)(ae,"click",function(Gt){var ar;return Gt&&"A"==(null===(ar=Gt.target)||void 0===ar?void 0:ar.tagName)&&Gt.preventDefault()}),(0,Ln.on)(ae,"submit",function(Gt){return Gt&&Gt.preventDefault()}),[{event:"keydown keyup keypress",class:"KeyboardEvent"},{event:"mousedown mousemove mouseup",class:"MouseEvent"},{event:"pointerdown pointermove pointerup",class:"PointerEvent"},{event:"wheel",class:"WheelEvent",opts:{passive:!b.infiniteCanvas}}].forEach(function(Gt){return Gt.event.split(" ").forEach(function(ar){ne.addEventListener(ar,function(Fn){return e.el.dispatchEvent((0,Ln.yL)(Fn,Gt.class))},Gt.opts)})}),this._toggleEffects(!0),(0,z.hasDnd)(w)&&(this.droppable=new Jm(w,null===(c=this.wrapper)||void 0===c?void 0:c.el)),this.loaded=!0,C.trigger("loaded"))},a.prototype._toggleEffects=function(e){var r=e?Ln.on:Ln.AU,o=this.getWindow();o&&r(o,"".concat(Ln.D8," resize"),this._emitUpdate)},a.prototype._emitUpdate=function(){this.model._emitUpdated()},a}(Ro);const Mp=Xp;var em=m(5633),Gg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xf=function(){return Xf=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Xf.apply(this,arguments)},Sf=function(d){function a(e,r){var o=d.call(this,{model:e})||this;return(0,x.bindAll)(o,"onScroll","frameLoaded","updateOffset","remove","startDrag"),Xf(Xf({},e.config),{frameWrapView:o}),o.cv=r,o.frame=new Mp(e,o),o.classAnim="".concat(o.ppfx,"frame-wrapper--anim"),o.updateOffset=(0,x.debounce)(o.updateOffset.bind(o),0),o.updateSize=(0,x.debounce)(o.updateSize.bind(o),0),o.listenTo(e,"loaded",o.frameLoaded),o.listenTo(e,"change:x change:y",o.updatePos),o.listenTo(e,"change:width change:height",o.updateSize),o.listenTo(e,"destroy remove",o.remove),o.updatePos(),o.setupDragger(),o}return Gg(a,d),a.prototype.events=function(){return{"click [data-action-remove]":"remove","mousedown [data-action-move]":"startDrag"}},a.prototype.setupDragger=function(){var g,b,w,e=this,o=this.module,c=this.model,C=function(B){o.toggleFramesEvents(B)};this.dragger=new em.A({onStart:function(){var B=c.attributes,ne=B.x,ae=B.y;w=e.em.getZoomMultiplier(),g=ne,b=ae,C(!1)},onEnd:function(){return C(!0)},setPosition:function(B){c.set({x:g+B.x*w,y:b+B.y*w})}})},a.prototype.startDrag=function(e){var r;e&&(null===(r=this.dragger)||void 0===r||r.start(e))},a.prototype.__clear=function(e){var r=this.frame;r&&r.remove(e),(0,Ln.YZ)(this.elTools)},a.prototype.remove=function(e){var o,r=this;return null===(o=this.sizeObserver)||void 0===o||o.disconnect(),this.__clear(e),Ro.prototype.remove.apply(this,e),["frame","dragger","cv","elTools"].forEach(function(c){return r[c]=0}),this},a.prototype.updateOffset=function(){var e,r=this,o=r.em,c=r.$el,g=r.frame;!o||o.destroyed||(o.runDefault({preserveSelected:1}),c.removeClass(this.classAnim),null===(e=g?.model)||void 0===e||e._emitUpdated())},a.prototype.updatePos=function(e){var g=this.model.attributes,b=g.x,w=g.y,C=this.el.style;this.frame.rect=void 0,C.left=isNaN(b)?b:"".concat(b,"px"),C.top=isNaN(w)?w:"".concat(w,"px"),e&&this.updateOffset()},a.prototype.updateSize=function(){this.updateDim()},a.prototype.updateDim=function(){var e=this,r=e.em,o=e.el,c=e.$el,g=e.model,b=e.classAnim,w=e.frame;if(w){w.rect=void 0,c.addClass(b);var C=this.__handleSize(),B=C.noChanges,ne=C.width,ae=C.height;((0,x.isNull)(ne)||(0,x.isNull)(ae))&&g.set(Xf(Xf({},ne?{}:{width:o.offsetWidth}),ae?{}:{height:o.offsetHeight}),{silent:1}),r.stopDefault({preserveSelected:1}),B?this.updateOffset():setTimeout(this.updateOffset,350)}},a.prototype.onScroll=function(){var r=this.frame;this.em.trigger("frame:scroll",{frame:r,body:r.getBody(),target:r.getWindow()})},a.prototype.frameLoaded=function(){this.frame.getWindow().onscroll=this.onScroll,this.updateDim()},a.prototype.__handleSize=function(){var e,c=this.model,b=this.el.style,w=c.attributes,C=w.width,B=w.height,be=C||"",Se=B||"",We=(b.width||"")==be&&(b.height||"")==Se,lt=(0,x.isNumber)(be)?"".concat(be).concat("px"):be,Ot=(0,x.isNumber)(Se)?"".concat(Se).concat("px"):Se;if(b.width=lt,null===(e=this.sizeObserver)||void 0===e||e.disconnect(),c.hasAutoHeight()){var Gt=this.frame.el.contentDocument;if(Gt){var ar=new ResizeObserver(function(){var Fn=parseFloat(c.get("minHeight"))||0,fo=Math.max(Gt.body.scrollHeight,Fn);b.height="".concat(fo,"px")});ar.observe(Gt.body),this.sizeObserver=ar}}else b.height=Ot,delete this.sizeObserver;return{noChanges:We,width:C,height:B,newW:be,newH:Se}},a.prototype.render=function(){var e=this,r=e.frame,o=e.$el,c=e.ppfx,g=e.cv,b=e.model,w=e.el,C=b.attributes.onRender;this.__clear(),this.__handleSize(),r.render(),o.empty().attr({class:"".concat(c,"frame-wrapper")}).append('\n      <div class="'.concat(c,'frame-wrapper__top gjs-two-color" data-frame-top>\n        <div class="').concat(c,'frame-wrapper__name" data-action-move>\n          ').concat(b.get("name")||"",'\n        </div>\n        <div class="').concat(c,'frame-wrapper__top-r">\n          <div class="').concat(c,'frame-wrapper__icon" data-action-remove style="display: none">\n            <svg viewBox="0 0 24 24"><path d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class="').concat(c,'frame-wrapper__right" data-frame-right></div>\n      <div class="').concat(c,'frame-wrapper__left" data-frame-left></div>\n      <div class="').concat(c,'frame-wrapper__bottom" data-frame-bottom></div>\n      ')).append(r.el);var B=(0,Ln.a_)("div",{class:"".concat(c,"tools"),style:"pointer-events:none; display: none"},'\n      <div class="'.concat(c,'highlighter" data-hl></div>\n      <div class="').concat(c,'badge" data-badge></div>\n      <div class="').concat(c,'placeholder">\n        <div class="').concat(c,'placeholder-int"></div>\n      </div>\n      <div class="').concat(c,'ghost"></div>\n      <div class="').concat(c,'toolbar" style="pointer-events:all"></div>\n      <div class="').concat(c,'resizer"></div>\n      <div class="').concat(c,'offset-v" data-offset>\n        <div class="gjs-marginName" data-offset-m>\n          <div class="gjs-margin-v-el gjs-margin-v-top" data-offset-m-t></div>\n          <div class="gjs-margin-v-el gjs-margin-v-bottom" data-offset-m-b></div>\n          <div class="gjs-margin-v-el gjs-margin-v-left" data-offset-m-l></div>\n          <div class="gjs-margin-v-el gjs-margin-v-right" data-offset-m-r></div>\n        </div>\n        <div class="gjs-paddingName" data-offset-m>\n          <div class="gjs-padding-v-el gjs-padding-v-top" data-offset-p-t></div>\n          <div class="gjs-padding-v-el gjs-padding-v-bottom" data-offset-p-b></div>\n          <div class="gjs-padding-v-el gjs-padding-v-left" data-offset-p-l></div>\n          <div class="gjs-padding-v-el gjs-padding-v-right" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class="').concat(c,'offset-fixed-v"></div>\n    '));this.elTools=B;var ne=g?.toolsWrapper;return ne&&ne.appendChild(B),C&&C({el:w,elTop:w.querySelector("[data-frame-top]"),elRight:w.querySelector("[data-frame-right]"),elBottom:w.querySelector("[data-frame-bottom]"),elLeft:w.querySelector("[data-frame-left]"),frame:b,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},a}(Ro);const Q=Sf;var j=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),J=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,!0)||this;return o.listenTo(o.collection,"reset",o.render),o.canvasView=r.canvasView,o._module=r.module,o}return j(a,d),a.prototype.onRemoveBefore=function(e,r){void 0===r&&(r={}),e.forEach(function(o){return o.remove(r)})},a.prototype.onRender=function(){this.$el.attr({class:"".concat(this.ppfx,"frames")})},a.prototype.clearItems=function(){(this.viewCollection||[]).forEach(function(r){return r.remove()}),this.viewCollection=[]},a.prototype.renderView=function(e,r){return new Q(e,this.canvasView)},a}(or);const se=J;var xe=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fe=function(){return fe=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},fe.apply(this,arguments)},De=function(d){function a(e){var r=d.call(this,{model:e})||this;r.ready=!1,(0,x.bindAll)(r,"clearOff","onKeyPress","onWheel","onPointer");var c=r.em,g=r.pfx,b=r.ppfx,w=r.module.events;return r.className="".concat(g,"canvas ").concat(b,"no-touch-actions").concat(c.config.customUI?"":" ".concat(g,"canvas-bg")),r.clsUnscale="".concat(g,"unscale"),r._initFrames(),r.listenTo(c,w.refresh,r.clearOff),r.listenTo(c,"component:selected",r.checkSelected),r.listenTo(c,"".concat(w.coords," ").concat(w.zoom),r.updateFrames),r.listenTo(e,"change:frames",r._onFramesUpdate),r.toggleListeners(!0),r}return xe(a,d),a.prototype.template=function(){var e=this.pfx;return'\n      <div class="'.concat(e,'canvas__frames" data-frames>\n        <div class="').concat(e,'canvas__spots" data-spots></div>\n      </div>\n      <div id="').concat(e,'tools" class="').concat(e,'canvas__tools" data-tools></div>\n      <style data-canvas-style></style>\n    ')},a.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},a.prototype._initFrames=function(){var e=this,r=e.frames,c=e.config,g=e.em,b=e.model.frames;g.set("readyCanvas",0),b.once("loaded:all",function(){return g.set("readyCanvas",1)}),r?.remove(),this.frames=new se({collection:b},fe(fe({},c),{canvasView:this}))},a.prototype.checkSelected=function(e,r){var o;void 0===r&&(r={});var c=r.scroll,g=this.em.getCurrentFrame();c&&(null===(o=e.views)||void 0===o||o.forEach(function(b){b.frameView===g&&b.scrollIntoView(c)}))},a.prototype.remove=function(){for(var e,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return clearTimeout(this.timerZoom),null===(e=this.frames)||void 0===e||e.remove(),this.frames=void 0,Ro.prototype.remove.apply(this,r),this.toggleListeners(!1),this},a.prototype.preventDefault=function(e){var r;e&&(e.preventDefault(),null===(r=e._parentEvent)||void 0===r||r.preventDefault())},a.prototype.toggleListeners=function(e){var o=this.el,c=this.config,g=e?Ln.on:Ln.AU;g(document,"keypress",this.onKeyPress),g(window,"scroll resize",this.clearOff),g(o,"wheel",this.onWheel,{passive:!c.infiniteCanvas}),g(o,"pointermove",this.onPointer)},a.prototype.screenToWorld=function(e,r){var o=this.module,c=o.getCoords(),g=o.getZoomMultiplier(),b=this.getViewportDelta();return{x:(e-c.x-b.x)*g,y:(r-c.y-b.y)*g}},a.prototype.onPointer=function(e){if(this.config.infiniteCanvas){var r=this.getCanvasOffset(),o=(0,Ln.Xy)(),c={x:e.clientX-r.left+o.x,y:e.clientY-r.top+o.y};if(e._parentEvent){var g=e.target.getBoundingClientRect(),b=this.module.getZoomDecimal();c.x=g.left-r.left+o.x+e.clientX*b,c.y=g.top-r.top+o.y+e.clientY*b}this.model.set({pointerScreen:c,pointer:this.screenToWorld(c.x,c.y)})}},a.prototype.onKeyPress=function(e){var r=this.em;" "===(0,Ln.Ch)(e)&&1!==r.getZoomDecimal()&&!r.Canvas.isInputFocused()&&(this.preventDefault(e),r.Editor.runCommand("core:canvas-move"))},a.prototype.onWheel=function(e){var o=this.module;if(this.config.infiniteCanvas){this.preventDefault(e);var g=e.deltaX,b=e.deltaY,w=o.getZoomDecimal(),C=(0,Ln.rp)(e),B=o.getCoords();if(C){var ne=w-b*w*.01;o.setZoom(100*ne);var ae=this.model.getPointerCoords(L.x2.Screen),be=this.getCanvasOffset(),Se=ae.x-be.width/2,We=ae.y-be.height/2,lt=ne/w;o.setCoords(Se-(Se-B.x)*lt,We-(We-B.y)*lt)}else this.onPointer(e),o.setCoords(B.x-g,B.y-b)}},a.prototype.updateFrames=function(e){var r=this.em,o=this.toolsWrapper,c={preserveSelected:1};this.updateFramesArea(),this.clearOff(),o.style.display="none",r.trigger("canvas:update",e),clearTimeout(this.timerZoom),this.timerZoom=setTimeout(function(){r.stopDefault(c),r.runDefault(c),o.style.display=""},300)},a.prototype.updateFramesArea=function(){var e=this,r=e.framesArea,o=e.model,c=e.module,g=e.cvStyle,b=e.clsUnscale,w=c.getZoomMultiplier();if(r){var C=o.attributes,B=C.x,ne=C.y,ae=c.getZoomDecimal();r.style.transform="scale(".concat(ae,") translate(").concat(B*w,"px, ").concat(ne*w,"px)")}g&&(g.innerHTML="\n        .".concat(b," { scale: ").concat(w," }\n      "))},a.prototype.fitViewport=function(e){var r,o,c;void 0===e&&(e={});var g=this,b=g.em,w=g.module,C=g.model;this.clearOff();var B=this.getCanvasOffset(),ne=e.el,ae=ne&&(null===(r=(0,z.getComponentView)(ne))||void 0===r?void 0:r.frameView),be=ae?ae.model:e.frame||b.getCurrentFrameModel()||C.frames.at(0),Se=be.attributes,Ot={x:Se.x??0,y:Se.y??0,width:be.width,height:be.height};if(ne){var ur=this.getElBoxRect(ne);Ot.x=Ot.x+ur.x,Ot.y=Ot.y+ur.y,Ot.width=ur.width,Ot.height=ur.height}var Gt=e.ignoreHeight,ar=null!==(o=e.gap)&&void 0!==o?o:0,Fn=(0,x.isNumber)(ar),fo=Fn?ar:ar.x,ti=Fn?ar:ar.y,jn=Ot.width+2*fo,Nr=Ot.height+2*ti,Dn=B.width,ir=B.height,Bt=Dn/jn,gn=100*(Gt?Bt:Math.min(Bt,ir/Nr)),xt=null!==(c=(0,x.isFunction)(e.zoom)?e.zoom(gn):e.zoom)&&void 0!==c?c:gn;w.setZoom(xt,{from:"fitViewport"});var Eo=(be.width>=Dn?Dn/2-jn/2:-fo)-Ot.x,_o=ir/2-Ot.y-Nr/2,mi=w.getZoomDecimal(),Sa={x:(Eo+fo)*mi,y:(_o+ti)*mi};if(Gt){var Ha=w.getZoomMultiplier();Sa.y=(-Ot.y+ti)*mi-(ir*Ha-ir)/2/Ha}w.setCoords(Sa.x,Sa.y)},a.prototype.isElInViewport=function(e){var r=(0,z.getElement)(e),o=(0,Ln.C8)(r),c=this.getFrameOffset(r),g=o.top,b=o.left;return g>=0&&b>=0&&g<=c.height&&b<=c.width},a.prototype.offset=function(e,r){void 0===r&&(r={});var o=r.noScroll,c=(0,Ln.C8)(e),g=o?{x:0,y:0}:(0,Ln.Xy)(e);return{top:c.top+g.y,left:c.left+g.x,width:c.width,height:c.height}},a.prototype.getRectToScreen=function(e){var r,o,c,g,b=this.getCanvasScroll(),w=this.module.getZoomDecimal(),C=this.module.getCoords(),B=this.getViewportDelta();return{x:(null!==(r=e.x)&&void 0!==r?r:0)*w-b.scrollLeft+C.x+B.x||0,y:(null!==(o=e.y)&&void 0!==o?o:0)*w-b.scrollTop+C.y+B.y||0,width:(null!==(c=e.width)&&void 0!==c?c:0)*w,height:(null!==(g=e.height)&&void 0!==g?g:0)*w}},a.prototype.getElBoxRect=function(e,r){var o,c,g;void 0===r&&(r={});var b=this.module,w=(0,Ln.C8)(e),C=w.width,B=w.height,ne=w.left,ae=w.top,be=null===(o=(0,z.getComponentView)(e))||void 0===o?void 0:o.frameView,Se=be?.getBoxRect(),We=b.getZoomMultiplier(),lt=null!==(c=Se?.x)&&void 0!==c?c:0,Ot=null!==(g=Se?.y)&&void 0!==g?g:0,ur=this.el,Gt=(0,Ln.Xy)(),fo={x:ne+lt+(ur.scrollLeft+Gt.x)*We,y:ae+Ot+(ur.scrollTop+Gt.y)*We,width:C,height:B};return r.local&&(fo.x=ne,fo.y=ae),r.toScreen?this.getRectToScreen(fo):fo},a.prototype.getViewportRect=function(e){void 0===e&&(e={});var r=this.getCanvasOffset(),o=r.top,c=r.left,g=r.width,b=r.height,w=this.module;if(e.toWorld){var C=w.getZoomMultiplier(),B=w.getCoords(),ne=this.getViewportDelta();return{x:(-B.x-ne.x||0)*C,y:(-B.y-ne.y||0)*C,width:g*C,height:b*C}}return{x:c,y:o,width:g,height:b}},a.prototype.getViewportDelta=function(e){void 0===e&&(e={});var r=this.module.getZoomMultiplier(),o=this.getCanvasOffset(),c=o.width,g=o.height;return{x:(c*r-c)/2/r,y:(g*r-g)/2/r}},a.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},a.prototype.getFrameOffset=function(e){var r;if(!this.frmOff||e){var o=null===(r=this.frame)||void 0===r?void 0:r.el,c=e?.ownerDocument.defaultView;this.frmOff=this.offset((c?c.frameElement:o)||o)}return this.frmOff},a.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},a.prototype.getElementPos=function(e,r){void 0===r&&(r={});var o=this.module.getZoomDecimal(),c=this.getFrameOffset(e),g=this.el,b=this.getCanvasOffset(),w=this.offset(e,r),ne=r.avoidFrameZoom?w.top:w.top*o,ae=r.avoidFrameZoom?w.left:w.left*o;return{top:r.avoidFrameOffset?ne:ne+(r.avoidFrameOffset?0:c.top)-b.top+g.scrollTop,left:r.avoidFrameOffset?ae:ae+(r.avoidFrameOffset?0:c.left)-b.left+g.scrollLeft,height:r.avoidFrameZoom?w.height:w.height*o,width:r.avoidFrameZoom?w.width:w.width*o,zoom:o,rect:w}},a.prototype.getElementOffsets=function(e){if(!e||(0,Ln.ir)(e))return{};var r={},o=window.getComputedStyle(e),c=this.module.getZoomDecimal();return["marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth"].forEach(function(b){r[b]=parseFloat(o[b])*c}),r},a.prototype.getPosition=function(e){var r;void 0===e&&(e={});var o=null===(r=this.frame)||void 0===r?void 0:r.el.contentDocument;if(!o)return{top:0,left:0,width:0,height:0};var c=o.body,g=this.module.getZoomDecimal(),b=this.getFrameOffset(),w=this.getCanvasOffset(),C=e.noScroll;return{top:b.top+(C?0:c.scrollTop)*g-w.top,left:b.left+(C?0:c.scrollLeft)*g-w.left,width:w.width,height:w.height}},a.prototype.getCanvasScroll=function(){return this.config.scrollableCanvas?{scrollTop:this.el.scrollTop,scrollLeft:this.el.scrollLeft}:{scrollTop:0,scrollLeft:0}},a.prototype.updateScript=function(e){var r=e.model,o=r.getId(),c={component:r,view:e,el:e.el};if(!e.scriptContainer){e.scriptContainer=(0,Ln.a_)("div",{"data-id":o});var g=this.getJsContainer();g?.appendChild(e.scriptContainer)}e.el.id=o,e.scriptContainer.innerHTML="";var b=document.createElement("script"),w=r.getScriptString(),C=r.get("script-props")?w:"function(){\n".concat(w,"\n;}"),B=JSON.stringify(r.__getScriptProps());b.innerHTML="\n      setTimeout(function() {\n        var item = document.getElementById('".concat(o,"');\n        if (!item) return;\n        var script = (").concat(C,").bind(item);\n        script(").concat(B,", { el: item });\n      }, 1);"),setTimeout(function(){r.emitWithEditor(gt.I.scriptMountBefore,c);var ne=e.scriptContainer;ne?.appendChild(b),r.emitWithEditor(gt.I.scriptMount,c)},0)},a.prototype.getJsContainer=function(e){var r=this.getFrameView(e);return r?.getJsContainer()},a.prototype.getFrameView=function(e){return e?.frameView||this.em.getCurrentFrame()},a.prototype._renderFrames=function(){if(this.ready){var e=this,o=e.frames,c=e.em,g=e.framesArea,b=e.model.frames;b.listenToLoad(),o.render();var w=b.at(0),C=w?.view;c.setCurrentFrame(C),g?.appendChild(o.el),this.frame=C,this.updateFramesArea()}},a.prototype.renderFrames=function(){this._renderFrames()},a.prototype.render=function(){var e=this,r=e.el,o=e.$el,c=e.ppfx,g=e.config,b=e.em;o.html(this.template());var w=o.find("[data-frames]");this.framesArea=w.get(0);var C=o.find("[data-tools]");return this.toolsWrapper=C.get(0),C.append('\n      <div class="'.concat(c,"tools ").concat(c,'tools-gl" style="pointer-events:none">\n        <div class="').concat(c,'placeholder">\n          <div class="').concat(c,'placeholder-int"></div>\n        </div>\n      </div>\n      <div id="').concat(c,'tools" style="pointer-events:none">\n        ').concat(g.extHl?'<div class="'.concat(c,'highlighter-sel"></div>'):"",'\n        <div class="').concat(c,'badge"></div>\n        <div class="').concat(c,'ghost"></div>\n        <div class="').concat(c,'toolbar" style="pointer-events:all"></div>\n        <div class="').concat(c,'resizer"></div>\n        <div class="').concat(c,'offset-v"></div>\n        <div class="').concat(c,'offset-fixed-v"></div>\n      </div>\n    ')),this.toolsEl=r.querySelector("#".concat(c,"tools")),this.hlEl=r.querySelector(".".concat(c,"highlighter")),this.badgeEl=r.querySelector(".".concat(c,"badge")),this.placerEl=r.querySelector(".".concat(c,"placeholder")),this.ghostEl=r.querySelector(".".concat(c,"ghost")),this.toolbarEl=r.querySelector(".".concat(c,"toolbar")),this.resizerEl=r.querySelector(".".concat(c,"resizer")),this.offsetEl=r.querySelector(".".concat(c,"offset-v")),this.fixedOffsetEl=r.querySelector(".".concat(c,"offset-fixed-v")),this.toolsGlobEl=r.querySelector(".".concat(c,"tools-gl")),this.spotsEl=r.querySelector("[data-spots]"),this.cvStyle=r.querySelector("[data-canvas-style]"),r.className=(0,z.getUiClass)(b,this.className),!0===g.scrollableCanvas&&(r.style.overflow="auto"),this.ready=!0,this._renderFrames(),this},a}(Ro);const Ae=De;var Ne=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tt=function(){return tt=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},tt.apply(this,arguments)},vt=function(d){function a(e){var r=d.call(this,e,"Canvas",{stylePrefix:"cv-",scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:"<!DOCTYPE html>",frameStyle:"\n    body { background-color: #fff }\n    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }\n    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }\n    * ::-webkit-scrollbar { width: 10px }\n  ",notTextable:["button","a","input[type=checkbox]","input[type=radio]"],allowExternalDrop:!0})||this;return r.events=St,r.framesById={},r.canvas=new Nt(r),r.spots=new wt(r),r.model=r.canvas,r.startAutoscroll=r.startAutoscroll.bind(r),r.stopAutoscroll=r.stopAutoscroll.bind(r),r.autoScroller=new Sm,r}return Ne(a,d),a.prototype.getCanvasView=function(){return this.canvasView},a.prototype.postLoad=function(){this.model.init()},a.prototype.getModel=function(){return this.canvas},a.prototype.getElement=function(){return this.getCanvasView().el},a.prototype.getFrame=function(e){return this.getFrames()[e||0]},a.prototype.getFrameEl=function(){var e=(this.canvasView||{}).frame;return e?.el},a.prototype.getFramesEl=function(){var e;return null===(e=this.canvasView)||void 0===e?void 0:e.framesArea},a.prototype.getWindow=function(){var e=(this.canvasView||{}).frame;return e?.getWindow()},a.prototype.getDocument=function(){var e=this.getFrameEl();return e?.contentDocument},a.prototype.getBody=function(){var e=this.getDocument();return e?.body},a.prototype._getLocalEl=function(e,r,o){var c=e,g=r?.frameView;return g?g[o]():c},a.prototype.getGlobalToolsEl=function(){var e;return null===(e=this.canvasView)||void 0===e?void 0:e.toolsGlobEl},a.prototype.getToolsEl=function(e){return this._getLocalEl(this.getCanvasView().toolsEl,e,"getToolsEl")},a.prototype.getHighlighter=function(e){return this._getLocalEl(this.getCanvasView().hlEl,e,"getHighlighter")},a.prototype.getBadgeEl=function(e){return this._getLocalEl(this.getCanvasView().badgeEl,e,"getBadgeEl")},a.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},a.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},a.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},a.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},a.prototype.getOffsetViewerEl=function(e){return this._getLocalEl(this.getCanvasView().offsetEl,e,"getOffsetViewerEl")},a.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},a.prototype.getSpotsEl=function(){var e;return null===(e=this.canvasView)||void 0===e?void 0:e.spotsEl},a.prototype.render=function(){var e;return null===(e=this.canvasView)||void 0===e||e.remove(),this.canvasView=new Ae(this.canvas),this.canvasView.render().el},a.prototype.getOffset=function(){var e=this.offset(this.getFrameEl()),r=this.offset(this.getElement());return{top:e.top-r.top,left:e.left-r.left}},a.prototype.offset=function(e){return this.getCanvasView().offset(e)},a.prototype.setCustomBadgeLabel=function(e){this.config.customBadgeLabel=e},a.prototype.getElementPos=function(e,r){return this.getCanvasView().getElementPos(e,r)},a.prototype.getElementOffsets=function(e){return this.getCanvasView().getElementOffsets(e)},a.prototype.getRect=function(){var e,r=null!==(e=this.getCanvasView().getPosition())&&void 0!==e?e:{},o=r.top,c=void 0===o?0:o,g=r.left,b=void 0===g?0:g;return tt(tt({},this.getCanvasView().getCanvasOffset()),{topScroll:c,leftScroll:b})},a.prototype.getTargetToElementDim=function(e,r,o){void 0===o&&(o={});var c=o||{},g=this.getCanvasView().getPosition();if(g){var b=c.elPos||this.getCanvasView().getElementPos(r),w=o.toRight||0,ne=c.event||null,ae=b.top-(c.targetHeight||e.offsetHeight),be=b.left;be+=w?b.width:0;var We=ae<g.top?g.top:ae,lt={top:We=We>b.top+b.height?b.top+b.height:We,left:(be=w?be-(c.targetWidth||e.offsetWidth):be)<g.left?g.left:be,elementTop:b.top,elementLeft:b.left,elementWidth:b.width,elementHeight:b.height,targetWidth:e.offsetWidth,targetHeight:e.offsetHeight,canvasTop:g.top,canvasLeft:g.left,canvasWidth:g.width,canvasHeight:g.height};return ne&&this.em&&this.em.trigger(ne,lt),lt}},a.prototype.canvasRectOffset=function(e,r,o){var c=this;void 0===o&&(o={});var b=function(w,C,B){void 0===C&&(C=1);var ne=c.em.getZoomDecimal(),ae=C?"top":"left",be=w.ownerDocument,Se=o.offset?function(w){var C=w.defaultView;return C?.frameElement}(be):{},We=Se.offsetTop,Ot=Se.offsetLeft,Gt=be.body||{},ar=Gt.scrollTop,fo=Gt.scrollLeft;return B[ae]-((C?void 0===ar?0:ar:void 0===fo?0:fo)-(C?void 0===We?0:We:void 0===Ot?0:Ot))*ne};return{top:b(e,1,r),left:b(e,0,r)}},a.prototype.getTargetToElementFixed=function(e,r,o){void 0===o&&(o={});var c=o.pos||this.getElementPos(e,{noScroll:!0}),g=o.canvasOff||this.canvasRectOffset(e,c),b=r.offsetHeight||0,w=r.offsetWidth||0,C=this.getCanvasView(),B=C.getCanvasScroll(),ne=B.scrollTop,ae=B.scrollLeft,be=C.getPosition(),Se=o.event,We=c.width-w,lt=-b,Ot=(0,x.isUndefined)(o.left)?We:o.left,ur=Math.max(-c.left+ae,0);Ot=Math.max(Ot,ur),Ot=Math.min(Ot,c.width-w),Ot=Math.min(Ot,be.width+ae-w-c.left);var fo=lt;if(g.top<b+ne){var ti=c.height+b;if(ti<be.height)fo+=ti;else{var Nr=-g.top+ne;fo=Nr<c.height?Nr:c.height}}var Dn={top:fo,left:Ot,canvasOffsetTop:g.top,canvasOffsetLeft:g.left,elRect:c,canvasOffset:g,canvasRect:be,targetWidth:w,targetHeight:b};return Se&&this.em.trigger(Se,Dn),Dn},a.prototype.getMouseRelativePos=function(e,r){void 0===r&&(r={});var o=r.subWinOffset,c=e.target,g=c.nodeType===Node.DOCUMENT_NODE?c:c.ownerDocument,b=g.defaultView||g.parentWindow,w=b.frameElement,C=o?b.pageYOffset:0,B=o?b.pageXOffset:0,ne=this.getZoomMultiplier(),ae=0,be=0;if(w){var Se=w.getBoundingClientRect();ae=Se.top||0,be=Se.left||0}return{y:(e.clientY+ae-C)*ne,x:(e.clientX+be-B)*ne}},a.prototype.getMouseRelativeCanvas=function(e,r){var o,c=this.getZoomDecimal(),g=this.getCanvasView(),b=null!==(o=g.getPosition(r))&&void 0!==o?o:{top:0,left:0},w=g.getCanvasScroll();return{y:e.clientY*c+(b.top+w.scrollTop),x:e.clientX*c+(b.left+w.scrollLeft)}},a.prototype.startDrag=function(e){this.em.set("dragSource",e)},a.prototype.endDrag=function(){this.em.set({dragResult:null,dragSource:void 0})},a.prototype.hasFocus=function(){return this.getDocument().hasFocus()},a.prototype.isInputFocused=function(){var e=this.getDocument(),r=this.getFrameEl(),o=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}(["body"],this.config.notTextable,!0),g=r&&document.activeElement===r?e&&e.activeElement:document.activeElement;return g&&!o.some(function(b){return g.matches(b)})},a.prototype.scrollTo=function(e,r){void 0===r&&(r={});var o=(0,z.getElement)(e),c=o&&(0,z.getViewEl)(o);c&&c.scrollIntoView(r)},a.prototype.startAutoscroll=function(e){var r=e&&e.view||this.em.getCurrentFrame();if(r&&r.startAutoscroll(),this.config.scrollableCanvas){var o=this.getCanvasView().el;this.autoScroller.start(o,o,{zoom:this.em.getZoomDecimal()})}},a.prototype.stopAutoscroll=function(e){var r=e&&e.view||this.em.getCurrentFrame();r&&r.stopAutoscroll(),this.config.scrollableCanvas&&this.autoScroller.stop()},a.prototype.setZoom=function(e,r){return void 0===r&&(r={}),this.canvas.set("zoom","string"==typeof e?parseFloat(e):e,r),this},a.prototype.getZoom=function(){return parseFloat(this.canvas.get("zoom"))},a.prototype.setCoords=function(e,r,o){var c;void 0===o&&(o={});var g=e||0===e,b=r||0===r,w={x:this.canvas.get("x"),y:this.canvas.get("y")};if(g&&(w.x=parseFloat("".concat(e))),b&&(w.y=parseFloat("".concat(r))),o.toWorld){var C=null===(c=this.canvasView)||void 0===c?void 0:c.getViewportDelta();C&&(g&&(w.x=w.x-C.x),b&&(w.y=w.y-C.y))}return this.canvas.set(w),this},a.prototype.getCoords=function(){var e=this.canvas.attributes;return{x:e.x,y:e.y}},a.prototype.getPointer=function(e){var r=this.canvas.attributes;return e?r.pointerScreen:r.pointer},a.prototype.getZoomDecimal=function(){return this.getZoom()/100},a.prototype.getZoomMultiplier=function(){var e=this.getZoomDecimal();return e?1/e:1},a.prototype.fitViewport=function(e){var r;null===(r=this.canvasView)||void 0===r||r.fitViewport(e)},a.prototype.toggleFramesEvents=function(e){this.getFramesEl().style.pointerEvents=e?"":"none"},a.prototype.getFrames=function(){return this.canvas.frames.map(function(e){return e})},a.prototype.addFrame=function(e,r){return void 0===e&&(e={}),void 0===r&&(r={}),this.canvas.frames.add(new ln(this,tt({},e)),r)},a.prototype.getLastDragResult=function(){return this.em.get("dragResult")},a.prototype.addSpot=function(e,r){var o;void 0===r&&(r={});var c=e,g=this.getSpots(c);if(g.length){var b=g[0];return b.set(c),b}var w=c.componentView||(null===(o=c.component)||void 0===o?void 0:o.view),C=new jt.A(this,tt(tt({},c),{id:c.id||"cs_".concat(c.type,"_").concat(w?.cid),type:c.type||""}));return this.spots.add(C,r),C},a.prototype.getSpots=function(e){return void 0===e&&(e={}),this.spots.where(e.id?{id:e.id}:e)},a.prototype.removeSpots=function(e){void 0===e&&(e={});var r=(0,x.isArray)(e)?e:this.getSpots(e);return this.spots.remove(r)},a.prototype.hasCustomSpot=function(e){var r=this.config.customSpots;return!!(!0===r||r&&e&&r[e])},a.prototype.getWorldRectToScreen=function(e){var r;return null===(r=this.canvasView)||void 0===r?void 0:r.getRectToScreen(e)},a.prototype.refresh=function(e){void 0===e&&(e={});var r=this,o=r.em,c=r.events,g=r.canvasView;g?.clearOff(),(e.spots||e.all)&&(this.refreshSpots(),o.trigger("canvas:updateTools")),o.set("canvasOffset",this.getOffset()),o.trigger(c.refresh,e)},a.prototype.refreshSpots=function(){this.spots.refresh()},a.prototype.destroy=function(){var r,e=this;this.canvas.stopListening(),null===(r=this.canvasView)||void 0===r||r.remove(),["model","droppable"].forEach(function(o){return e[o]={}})},a}(Oe);const Ht=vt;var pr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Sr=function(){return Sr=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Sr.apply(this,arguments)},Qt=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return pr(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Sr(Sr({},d.prototype.defaults),{tagName:"",droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),a.prototype.toHTML=function(){var e=this.content,r=this.parent();return r?.is("script")?e:this.__escapeContent(e)},a.prototype.__escapeContent=function(e){return(0,z.escapeNodeContent)(e)},a.isComponent=function(e){var r;if(3===e.nodeType)return{type:"textnode",content:null!==(r=e.textContent)&&void 0!==r?r:""}},a}(Ul);const Lr=Qt;var En=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qn=function(){return qn=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},qn.apply(this,arguments)},Fo=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return En(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return qn({},d.prototype.defaults)},enumerable:!1,configurable:!0}),a.prototype.toHTML=function(){return"\x3c!--".concat(this.content,"--\x3e")},a.isComponent=function(e){var r;if(8==e.nodeType)return{type:"comment",content:null!==(r=e.textContent)&&void 0!==r?r:""}},a}(Lr);const gi=Fo;var po=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jr=function(){return Jr=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Jr.apply(this,arguments)},lo="iframe",zo=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return po(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Jr(Jr({},d.prototype.defaults),{type:lo,tagName:lo,droppable:!1,resizable:!0,traits:["id","title","src"],attributes:{frameborder:"0"}})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===lo},a}(Ul);const cr=zo;var hr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xr=function(){return Xr=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Xr.apply(this,arguments)},rn='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',jo=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,r)||this,c=o.get("attributes").src;return c&&(0,z.buildBase64UrlFromSvg)((0,x.result)(o,"defaults").src)!==c&&o.set("src",c,{silent:!0}),o}return hr(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Xr(Xr({},d.prototype.defaults),{type:"image",tagName:"img",void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:["alt"],src:"<svg ".concat(rn,'>\n        <path d="M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z"></path>\n      </svg>'),fallback:"<svg ".concat(rn,'>\n        <path d="M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z"></path>\n      </svg>'),file:""})},enumerable:!1,configurable:!0}),a.prototype.initToolbar=function(){d.prototype.initToolbar.call(this);var e=this.em;if(e){var o="image-editor";if(e.Commands.has(o)){for(var c=!1,g=this.get("toolbar"),b=0;b<g.length;b++)if("image-editor"===g[b].command){c=!0;break}c||(g.push({attributes:{class:"fa fa-pencil"},command:o}),this.set("toolbar",g))}}},a.prototype.getAttrToHTML=function(){var e=d.prototype.getAttrToHTML.call(this),r=this.getSrcResult();return r&&(e.src=r),e},a.prototype.getSrcResult=function(e){void 0===e&&(e={});var r=this.get(e.fallback?"fallback":"src")||"",o=r;return r&&"<svg"===r.substr(0,4)&&(o=(0,z.buildBase64UrlFromSvg)(r)),o},a.prototype.isDefaultSrc=function(){var e=this.get("src"),r=(0,x.result)(this,"defaults").src;return e===r||e===(0,z.buildBase64UrlFromSvg)(r)},a.prototype.toJSON=function(e){var r=d.prototype.toJSON.call(this,e),o=r.attributes;return o&&r.src===o.src&&delete r.src,r},a.prototype.parseUri=function(e){var r={};if((0,z.hasWin)())(r=document.createElement("a")).href=e;else if(typeof URL<"u")try{r=new URL(e)}catch{}return{hostname:r.hostname||"",pathname:r.pathname||"",protocol:r.protocol||"",search:r.search||"",hash:r.hash||"",port:r.port||"",query:function(c){void 0===c&&(c="");for(var g={},b=c.substring(1).split("&"),w=0;w<b.length;w++){var C=b[w].split("="),B=decodeURIComponent(C[0]);B&&(g[B]=decodeURIComponent(C[1]||""))}return g}(r.search)}},a.isComponent=function(e){return"img"===(0,z.toLowerCase)(e.tagName)},a}(Ul);const So=jo;var Zo=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ro=function(){return ro=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ro.apply(this,arguments)},Ho=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,r)||this;return o.__checkInnerChilds(),o}return Zo(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return ro(ro({},d.prototype.defaults),{type:"text",droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),a.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var r=function(o){o.isInstanceOf("textnode")||o.set({locked:!0,layerable:!1})};(0,x.isFunction)(e)?this.forEachChild(function(o){e(o)&&r(o)}):this.forEachChild(r)}},a}(Ul);const Xo=Ho;var ka=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zt=function(){return zt=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},zt.apply(this,arguments)},Ir="label",Gr=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ka(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return zt(zt({},d.prototype.defaults),{type:Ir,tagName:Ir,traits:["id","title","for"]})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===Ir},a}(Xo);const on=Gr;var bn=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xn=function(){return Xn=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Xn.apply(this,arguments)},Po=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return bn(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Xn(Xn({},d.prototype.defaults),{type:"link",tagName:"a",traits:["title","href","target"]})},enumerable:!1,configurable:!0}),a.isComponent=function(e,r){var o;if(void 0===r&&(r={}),"a"===(0,z.toLowerCase)(e.tagName)){var c=r.textTags||[];o={type:"link",editable:!1};var g=e.childNodes;g.length||delete o.editable,(0,x.forEach)(g,function(w){var C=w.tagName;(3==w.nodeType&&""!==w.textContent.trim()||C&&c.indexOf((0,z.toLowerCase)(C))>=0)&&delete o.editable})}return o},a}(Xo);const $i=Po;var Ni=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ga=function(){return ga=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ga.apply(this,arguments)},_a=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,r)||this;return o.get("src")?o.parseFromSrc():o.updateSrc(),o.listenTo(o,"change:address change:zoom change:mapType",o.updateSrc),o}return Ni(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){var e=d.prototype.defaults;return ga(ga({},e),{type:"map",src:"",void:!1,mapUrl:"https://maps.google.com/maps",tagName:"iframe",mapType:"q",address:"",zoom:"1",attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:"Address",name:"address",placeholder:"eg. London, UK",changeProp:!0},{type:"select",label:"Map type",name:"mapType",changeProp:!0,options:[{id:"q",label:"Roadmap"},{id:"w",label:"Satellite"}]},{label:"Zoom",name:"zoom",type:"range",min:1,max:20,changeProp:!0}]})},enumerable:!1,configurable:!0}),a.prototype.updateSrc=function(){this.set("src",this.getMapUrl())},a.prototype.getMapUrl=function(){var e=this.get("address"),r=this.get("zoom"),o=this.get("mapType");return e=e?"&q="+e:"",r=r?"&z="+r:"",o=o?"&t="+o:"",this.get("mapUrl")+"?"+e+r+o+"&output=embed"},a.prototype.parseFromSrc=function(){var r=this.parseUri(this.get("src")).query;r.q&&this.set("address",r.q),r.z&&this.set("zoom",r.z),r.t&&this.set("mapType",r.t)},a.isComponent=function(e){if("iframe"==(0,z.toLowerCase)(e.tagName)&&/maps\.google\.com/.test(e.src))return{type:"map",src:e.src}},a}(So);const vs=_a;var ei=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hr=function(){return Hr=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Hr.apply(this,arguments)},Is="script",qa=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ei(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Hr(Hr({},d.prototype.defaults),{type:Is,tagName:Is,droppable:!1,draggable:!1,layerable:!1,highlightable:!1})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===Is},a}(Ul);const Bi=qa;var ua=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),va=function(){return va=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},va.apply(this,arguments)},os=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ua(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return va(va({},d.prototype.defaults),{type:"svg",tagName:"svg",highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),a.prototype.getName=function(){var e=this.get("tagName"),r=this.get("custom-name");return e=e.charAt(0).toUpperCase()+e.slice(1),r||e},a.isComponent=function(e){return"svg"===(0,z.toLowerCase)(e.tagName)},a}(Ul);const Es=os;var Ts=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),js=function(){return js=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},js.apply(this,arguments)},pl=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Ts(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return js(js({},d.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),a.isComponent=function(e,r){return void 0===r&&(r={}),!!r.inSvg},a}(Es);const zs=pl;var As=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tl=function(){return tl=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},tl.apply(this,arguments)},wa="table",Al=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,r)||this,c=o.get("components");return!c.length&&c.add({type:"tbody"}),o}return As(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return tl(tl({},d.prototype.defaults),{type:wa,tagName:wa,droppable:["tbody","thead","tfoot"]})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===wa},a}(Ul);const $a=Al;var Kc=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ws=function(){return Ws=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ws.apply(this,arguments)},al="tbody",Jd=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,r)||this,c=o.get("components"),g=o.get("columns"),b=o.get("rows");if(!c.length){for(var w=[];b--;){for(var C=[],B=g;B--;)C.push({type:"cell",classes:["cell"]});w.push({type:"row",classes:["row"],components:C})}c.add(w)}return o}return Kc(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Ws(Ws({},d.prototype.defaults),{type:al,tagName:al,draggable:["table"],droppable:["tr"],columns:1,rows:1})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===al},a}(Ul);const Ol=Jd;var ku=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),dc=function(){return dc=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},dc.apply(this,arguments)},vl=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ku(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return dc(dc({},d.prototype.defaults),{type:"cell",tagName:"td",draggable:["tr"]})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return["td","th"].indexOf((0,z.toLowerCase)(e.tagName))>=0},a}(Ul);const Pd=vl;var yc=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ss=function(){return Ss=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ss.apply(this,arguments)},Ys="tfoot",Ap=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return yc(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Ss(Ss({},d.prototype.defaults),{type:Ys,tagName:Ys})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===Ys},a}(Ol);const Ou=Ap;var kp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bu=function(){return Bu=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Bu.apply(this,arguments)},us="thead",Yd=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return kp(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Bu(Bu({},d.prototype.defaults),{type:us,tagName:us})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===us},a}(Ol);const Wu=Yd;var Du=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),pc=function(){return pc=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},pc.apply(this,arguments)},Lu=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Du(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return pc(pc({},d.prototype.defaults),{tagName:"tr",draggable:["thead","tbody","tfoot"],droppable:["th","td"]})},enumerable:!1,configurable:!0}),a.isComponent=function(e){return"tr"===(0,z.toLowerCase)(e.tagName)},a}(Ul);const eh=Lu;var Lp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),md=function(){return md=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},md.apply(this,arguments)},gd="video",zc="yt",Iu="vi",ru="ytnc",fp=function(d){return d&&"0"!==d},th=function(d){function a(e,r){void 0===e&&(e={});var o=d.call(this,e,r)||this;return o.get("src")&&o.parseFromSrc(),o.updatePropsFromAttr(),o.updateTraits(),o.on("change:provider",o.updateTraits),o.on("change:videoId change:provider",o.updateSrc),o}return Lp(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return md(md({},d.prototype.defaults),{type:gd,tagName:gd,videoId:"",void:!1,provider:"so",ytUrl:"https://www.youtube.com/embed/",ytncUrl:"https://www.youtube-nocookie.com/embed/",viUrl:"https://player.vimeo.com/video/",loop:!1,poster:"",muted:0,autoplay:!1,controls:!0,color:"",list:"",src:"",rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:"allowfullscreen"}})},enumerable:!1,configurable:!0}),a.prototype.updatePropsFromAttr=function(){if("so"===this.get("provider")){var e=this.get("attributes"),r=e.controls,o=e.autoplay,c=e.loop,g={};(0,z.isDef)(r)&&(g.controls=!!r),(0,z.isDef)(o)&&(g.autoplay=!!o),(0,z.isDef)(c)&&(g.loop=!!c),(0,z.isEmptyObj)(g)||this.set(g)}},a.prototype.updateTraits=function(){var c,e=this.em,o="iframe";switch(this.get("provider")){case zc:case ru:c=this.getYoutubeTraits();break;case Iu:c=this.getVimeoTraits();break;default:o="video",c=this.getSourceTraits()}this.set({tagName:o},{silent:!0}),this.set({traits:c}),e.get("ready")&&e.trigger("component:toggled")},a.prototype.parseFromSrc=function(){var e=this.get("provider"),r=this.parseUri(this.get("src")),o=r.query;switch(e){case zc:case ru:case Iu:this.set("videoId",r.pathname.split("/").pop()),o.list&&this.set("list",o.list),fp(o.autoplay)&&this.set("autoplay",!0),fp(o.loop)&&this.set("loop",!0),0===parseInt(o.controls)&&this.set("controls",!1),fp(o.color)&&this.set("color",o.color),"0"===o.rel&&this.set("rel",0),"1"===o.modestbranding&&this.set("modestbranding",1)}},a.prototype.updateSrc=function(){var r="";switch(this.get("provider")){case zc:r=this.getYoutubeSrc();break;case ru:r=this.getYoutubeNoCookieSrc();break;case Iu:r=this.getVimeoSrc()}this.set({src:r})},a.prototype.getAttrToHTML=function(){var e=d.prototype.getAttrToHTML.call(this);switch(this.get("provider")){case zc:case ru:case Iu:break;default:e.loop=!!this.get("loop"),e.autoplay=!!this.get("autoplay"),e.controls=!!this.get("controls")}return e},a.prototype.getProviderTrait=function(){return{type:"select",label:"Provider",name:"provider",changeProp:!0,options:[{value:"so",name:"HTML5 Source"},{value:zc,name:"Youtube"},{value:ru,name:"Youtube (no cookie)"},{value:Iu,name:"Vimeo"}]}},a.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:"Source",name:"src",placeholder:"eg. ./media/video.mp4",changeProp:!0},{label:"Poster",name:"poster",placeholder:"eg. ./media/image.jpg"},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},a.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. jNQXAC9IVRw",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:"checkbox",label:"Related",name:"rel",changeProp:!0},{type:"checkbox",label:"Modest",name:"modestbranding",changeProp:!0}]},a.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:"Video ID",name:"videoId",placeholder:"eg. 123456789",changeProp:!0},{label:"Color",name:"color",placeholder:"eg. FF0000",changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},a.prototype.getAutoplayTrait=function(){return{type:"checkbox",label:"Autoplay",name:"autoplay",changeProp:!0}},a.prototype.getLoopTrait=function(){return{type:"checkbox",label:"Loop",name:"loop",changeProp:!0}},a.prototype.getControlsTrait=function(){return{type:"checkbox",label:"Controls",name:"controls",changeProp:!0}},a.prototype.getYoutubeSrc=function(){var e=this.get("videoId"),r=this.get("ytUrl"),o=this.get("list");return r+=e+(e.indexOf("?")<0?"?":""),r+=o?"&list=".concat(o):"",r+=this.get("autoplay")?"&autoplay=1&mute=1":"",r+=this.get("controls")?"":"&controls=0&showinfo=0",r+=this.get("loop")?"&loop=1&playlist=".concat(e):"",(r+=this.get("rel")?"":"&rel=0")+(this.get("modestbranding")?"&modestbranding=1":"")},a.prototype.getYoutubeNoCookieSrc=function(){var e=this.getYoutubeSrc();return e.replace(this.get("ytUrl"),this.get("ytncUrl"))},a.prototype.getVimeoSrc=function(){var e=this.get("viUrl");return e+=this.get("videoId")+"?",e+=this.get("autoplay")?"&autoplay=1&muted=1":"",e+=this.get("loop")?"&loop=1":"",(e+=this.get("controls")?"":"&title=0&portrait=0&badge=0")+(this.get("color")?"&color="+this.get("color"):"")},a.isComponent=function(e){var r=e.tagName,o=e.src,c=/youtube\.com\/embed/.test(o),g=/youtube-nocookie\.com\/embed/.test(o),b=/player\.vimeo\.com\/video/.test(o),w=c||g||b;if((0,z.toLowerCase)(r)==gd||"iframe"==(0,z.toLowerCase)(r)&&w){var C={type:"video"};return o&&(C.src=o),w&&(c?C.provider=zc:g?C.provider=ru:b&&(C.provider=Iu)),C}},a}(So);const rh=th;var nh=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xl=function(){return Xl=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Xl.apply(this,arguments)},oh=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return nh(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return Xl(Xl({},d.prototype.defaults),{tagName:"body",removable:!1,copyable:!1,draggable:!1,components:[],traits:[],doctype:"",head:null,docEl:null,stylable:["background","background-color","background-image","background-repeat","background-attachment","background-position","background-size"]})},enumerable:!1,configurable:!0}),a.prototype.preInit=function(){var e,r,c=this.opt,g=this.attributes,b=null===(e=this.em)||void 0===e?void 0:e.Components,w=null===(r=b?.getType(Cu))||void 0===r?void 0:r.model,C=b?.getType("default").model;if(w){var B=g.head,ne=g.docEl;this.set({head:B&&B instanceof Ul?B:new w(Xl({},B),c),docEl:ne&&ne instanceof Ul?ne:new C(Xl({tagName:"html"},ne),c)},{silent:!0})}},Object.defineProperty(a.prototype,"head",{get:function(){return this.get("head")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"docEl",{get:function(){return this.get("docEl")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"doctype",{get:function(){return this.attributes.doctype||""},enumerable:!1,configurable:!0}),a.prototype.clone=function(e){var r=d.prototype.clone.call(this,e);return r.set("head",this.get("head").clone(e)),r.set("docEl",this.get("docEl").clone(e)),r},a.prototype.toHTML=function(e){void 0===e&&(e={});var r=this.doctype,o=(0,x.isUndefined)(e.asDocument)?!!r:e.asDocument,g=this.head,b=this.docEl,w=d.prototype.toHTML.call(this,e),C=o&&g?.toHTML(e)||"",B=o&&(0,Ln.kk)(b?.getAttrToHTML())||"",ne=B?" ".concat(B):"";return o?"".concat(r,"<html").concat(ne,">").concat(C).concat(w,"</html>"):w},a.prototype.__postAdd=function(){var e,r=null===(e=this.em)||void 0===e?void 0:e.UndoManager;return!this.__hasUm&&r?.add(this),d.prototype.__postAdd.call(this)},a.prototype.__postRemove=function(){var e,r=null===(e=this.em)||void 0===e?void 0:e.UndoManager;return r?.remove(this),d.prototype.__postRemove.call(this)},a.isComponent=function(){return!1},a}(Ul);const Pm=oh;var Mm=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ih=function(d){function a(){var e=null!==d&&d.apply(this,arguments)||this;return e.compView=$l,e}return Mm(a,d),a.prototype.initialize=function(e){this.opts=e||{},this.config=e.config||{},this.em=this.config.em;var r=this.collection;this.listenTo(r,"add",this.addTo),this.listenTo(r,"reset",this.resetChildren),this.listenTo(r,"remove",this.removeChildren)},a.prototype.removeChildren=function(e,r,o){var c=this;void 0===o&&(o={}),e.views.forEach(function(b){if(b){var w=b.childrenView,C=b.scriptContainer;w&&w.stopListening(),(0,Ln.YZ)(C),b.remove.apply(b)}}),e.components().forEach(function(b){return c.removeChildren(b,r,o)})},a.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},a.prototype.addToCollection=function(e,r,o){for(var c=this,g=c.config,b=c.opts,w=c.em,C=g.frameView,B=C?.model&&e.getView(C.model),ne=b.componentTypes||w?.Components.getTypes(),ae=e.get("type")||"default",be=this.compView,Se=0;Se<ne.length;Se++)if(ne[Se].id==ae){be=ne[Se].view;break}var lt,We=B||new be({model:e,config:g,componentTypes:ne});try{lt=We.render().el}catch(ar){lt=document.createTextNode(""),w.logError(ar)}if(r)r.appendChild(lt);else{var Ot=this.parentEl,ur=Ot.childNodes;if((0,x.isUndefined)(o))Ot.appendChild(lt);else{var Gt=ur.length==o;Gt&&o--,Gt||!ur.length?Ot.appendChild(lt):Ot.insertBefore(lt,ur[o])}}return e.opt.temporary||w?.trigger("component:mount",e),lt},a.prototype.resetChildren=function(e,r){var o=this;void 0===r&&(r={});var c=r.previousModels;r.skipDomReset||(this.parentEl.innerHTML=""),c?.forEach(function(g){return o.removeChildren(g,o.collection)}),e.each(function(g){return o.addToCollection(g)})},a.prototype.render=function(e){var r=this,o=this.el,c=document.createDocumentFragment();return this.parentEl=e||this.el,this.collection.each(function(g){return r.addToCollection(g,c)}),o.innerHTML="",o.appendChild(c),this},a}(L.Ss);const Ip=ih;var Ph=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$u=function(){return $u=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},$u.apply(this,arguments)},Am=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Ph(a,d),a.prototype.className=function(){return this.getClasses()},a.prototype.tagName=function(){return this.model.get("tagName")},a.prototype.preinitialize=function(e){void 0===e&&(e={}),this.opts=e},a.prototype.initialize=function(e){void 0===e&&(e={});var r=this.model,o=e.config||{},c=o.em,g=r.opt||{},w=this.$el,C=this.el;this.opts=e,this.modelOpt=g,this.config=o,this.em=c,this.pfx=o.stylePrefix||"",this.ppfx=o.pStylePrefix||"",this.attr=r.get("attributes"),this.classe=this.attr.class||[],this.listenTo(r,"change:style",this.updateStyle),this.listenTo(r,"change:attributes",this.renderAttributes),this.listenTo(r,"change:highlightable",this.updateHighlight),this.listenTo(r,"change:status change:locked",this.updateStatus),this.listenTo(r,"change:script rerender",this.reset),this.listenTo(r,"change:content",this.updateContent),this.listenTo(r,"change",this.handleChange),this.listenTo(r,"active",this.onActive),this.listenTo(r,"disable",this.onDisable),w.data("model",r),(0,z.setViewEl)(C,this),r.view=this,this.frameView&&r.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=$u($u({},this.constructor.getEvents()),{dragstart:"handleDragStart"}),this.delegateEvents(),!g.temporary&&this.init(this._clbObj())},Object.defineProperty(a.prototype,"__cmpStyleOpts",{get:function(){return{state:"",mediaText:""}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"createDoc",{get:function(){var e,r,o=(null===(e=this.frameView)||void 0===e?void 0:e.getDoc())||document;return null!==(r=this.opts.config)&&void 0!==r&&r.useFrameDoc?o:document},enumerable:!1,configurable:!0}),a.prototype.__isDraggable=function(){return this.config.draggableComponents&&this.model.attributes.draggable},a.prototype._clbObj=function(){var e=this,r=e.em,o=e.model,c=e.el;return{editor:r?.getEditor(),model:o,el:c}},a.prototype.init=function(e){},a.prototype.removed=function(e){},a.prototype.onRender=function(e){},a.prototype.onActive=function(e){},a.prototype.onDisable=function(e){},a.prototype.remove=function(){var e;d.prototype.remove.call(this);var o=this.model,c=this.$el,g=o.views,b=this.frameView||{};return o.components().forEach(function(w){var C=w.getView(b.model);C?.remove()}),null===(e=this.childrenView)||void 0===e||e.remove(),g.splice(g.indexOf(this),1),this.removed(this._clbObj()),c.data({model:"",collection:"",view:""}),this},a.prototype.handleDragStart=function(e){if(!this.__isDraggable())return!1;e.stopPropagation(),e.preventDefault();var r=this.em.getSelectedAll(),o=r.includes(this.model)?r:[this.model];this.em.Commands.run("tlb-move",{target:o,event:e})},a.prototype.initClasses=function(){var e=this.model,r=e.classes,o="change:classes";r instanceof Mu&&(this.stopListening(e,o,this.initClasses),this.listenTo(e,o,this.initClasses),this.listenTo(r,"add remove change reset",this.updateClasses),r.length&&this.importClasses())},a.prototype.initComponents=function(e){void 0===e&&(e={});var r=this,o=r.model,c=r.$el,g=r.childrenView,w=o.get("components"),C=[o,"change:components",this.initComponents];w instanceof xu&&(c.data("collection",w),g&&g.remove(),this.stopListening.apply(this,C),!e.avoidRender&&this.renderChildren(),this.listenTo.apply(this,C))},a.prototype.handleChange=function(){var e=this.model,r=(0,x.keys)(e.changed);if(1!==r.length||"status"!==r[0])for(var o in e.emitUpdate(),e.changed)e.emitUpdate(o)},a.prototype.importClasses=function(){var c=this.em.Selectors;c&&this.model.classes.forEach(function(g){return c.add(g.getName())})},a.prototype.updateStatus=function(e){void 0===e&&(e={});var r=this,o=r.em,c=r.el,g=r.ppfx,b=r.model,w=o?.Canvas,C=w?.config.extHl,B=b.get("status"),ne="".concat(g,"selected"),ae="".concat(ne,"-parent"),be="".concat(g,"freezed"),Se="".concat(g,"hovered"),We="".concat(g,"no-pointer"),lt="".concat(g,"pointer-init"),ur=C&&!e.noExtHl?"":ne;this.$el.removeClass([ne,ae,be,Se,We,lt].join(" "));var ar=[c.getAttribute("class")||""],Fn=!w?.hasCustomSpot(jt.F.Select),fo=!w?.hasCustomSpot(jt.F.Target);switch(B){case"selected":Fn&&ar.push(ur);break;case"selected-parent":fo&&ar.push(ae);break;case"freezed":ar.push(be);break;case"freezed-selected":ar.push(be),Fn&&ar.push(ur);break;case"hovered":!e.avoidHover&&ar.push(Se)}(0,x.isBoolean)(b.locked)&&ar.push(b.locked?We:lt);var ti=ar.filter(Boolean).join(" ");ti&&c.setAttribute("class",ti)},a.prototype.updateHighlight=function(){var e=this.model,r=e.get("textable"),o=e.get("highlightable")&&(r||!e.isChildOf("text"));this.setAttribute("data-gjs-highlightable",!!o||"")},a.prototype.updateStyle=function(e,r,o){void 0===o&&(o={});var g=this.model;if(Of(this.em)&&!o.inline){var w=this.__cmpStyleOpts,C=g.getStyle($u({inline:!0},w));!(0,x.isEmpty)(C)&&g.setStyle(C,w)}else this.setAttribute("style",g.styleToString(o))},a.prototype.updateStyles=function(){this.updateStyle()},a.prototype.updateClasses=function(){var e=this.model.classes.pluck("name").join(" ");this.setAttribute("class",e),this.updateStatus(),this.onAttrUpdate()},a.prototype.setAttribute=function(e,r){var o=this.$el;r?o.attr(e,r):o.removeAttr(e)},a.prototype.getClasses=function(){return this.model.getClasses().join(" ")},a.prototype.updateAttributes=function(){var e=[],r=this,o=r.model,c=r.$el,g=r.el,b=o.attributes,w=b.textable,C=b.type,B=$u($u({id:o.getId(),"data-gjs-type":C||"default"},this.__isDraggable()&&{draggable:!0}),w&&{contenteditable:"false"});(0,x.each)(g.attributes,function(ae){return e.push(ae.nodeName)}),e.forEach(function(ae){return c.removeAttr(ae)}),this.updateStyle(),this.updateHighlight();var ne=$u($u({},B),o.getAttributes());(0,x.keys)(ne).forEach(function(ae){return!1===ne[ae]&&delete ne[ae]}),c.attr(ne)},a.prototype.updateContent=function(){var e=this.model.content,r=this.model.components().length;this.getChildrenContainer().innerHTML=r?"":e},a.prototype.prevDef=function(e){e.preventDefault()},a.prototype.updateScript=function(){var o=this.em;this.model.get("script")&&o?.Canvas.getCanvasView().updateScript(this)},a.prototype.getChildrenContainer=function(){var e=this.el;return"function"==typeof this.getChildrenSelector&&(e=this.el.querySelector(this.getChildrenSelector())),e},a.prototype.getOffsetRect=function(){var e={top:0,left:0,bottom:0,right:0},r=this.el,o=0,c=0,g=function(b){var w=b.offsetParent;w?(o+=w.offsetTop,c+=w.offsetLeft,g(w)):(e.top=r.offsetTop+o,e.left=r.offsetLeft+c,e.bottom=e.top+r.offsetHeight,e.right=e.left+r.offsetWidth)};return g(r),e},a.prototype.isInViewport=function(){var e=this,r=e.el,c=e.frameView,b=e.em.Canvas.getCanvasView().getElBoxRect(r,{local:!0}),w=c.el,C=w.clientHeight,B=w.clientWidth,ne=b.y,ae=b.x,be=ne+b.height,Se=ae+b.width;return(ne>=0&&ne<C||be>0&&be<C)&&(Se>=0&&Se<B||ae>0&&ae<=B)},a.prototype.scrollIntoView=function(e){var r;if(void 0===e&&(e={}),!this.isInViewport()||e.force){var c=this.el;if("smooth"!==e.behavior){var g=this.getOffsetRect();null===(r=c.ownerDocument.defaultView)||void 0===r||r.scrollTo(0,g.top)}else c.scrollIntoView($u({behavior:"smooth",block:"nearest"},e))}},a.prototype.reset=function(){var e=this,r=e.el,o=e.model;e.scriptContainer&&o.emitWithEditor(gt.I.scriptUnmount,{component:o,view:e,el:r}),this.el="",this._ensureElement(),this._setData(),(0,Ln.bG)(r,this.el),this.render()},a.prototype._setData=function(){var e=this.model,r=e.components();this.$el.data({model:e,collection:r,view:this})},a.prototype._createElement=function(e){return this.createDoc.createElement(e)},a.prototype.renderChildren=function(){this.updateContent();var e=this.getChildrenContainer(),r=this.childrenView||new Ip({collection:this.model.get("components"),config:this.config,componentTypes:this.opts.componentTypes});r.render(e),this.childrenView=r;for(var o=Array.prototype.slice.call(r.el.childNodes),c=0,g=o.length;c<g;c++)e.appendChild(o.shift())},a.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},a.prototype.onAttrUpdate=function(){},a.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,z.setViewEl)(this.el,this),this.postRender()),this},a.prototype.postRender=function(){if(!this.modelOpt.temporary){var r=this.model,o=this.el;this.onRender(this._clbObj()),r.emitWithEditor(gt.I.render,{component:r,view:this,el:o})}},a.getEvents=function(){return(0,x.result)(this.prototype,"events")},a}(L.Ss);const $l=Am;var Pf=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ah=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Pf(a,d),a.prototype._setAttributes=function(){},a.prototype.renderAttributes=function(){},a.prototype.updateStatus=function(){},a.prototype.updateClasses=function(){},a.prototype.setAttribute=function(){},a.prototype.updateAttributes=function(){},a.prototype.initClasses=function(){},a.prototype.initComponents=function(){},a.prototype.delegateEvents=function(){return this},a.prototype._createElement=function(){return document.createTextNode("")},a.prototype.render=function(){var r=this.model;return r.opt.temporary||(this.el.textContent=r.content),this},a}($l);const sh=ah;var Fc=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Mf=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Fc(a,d),a.prototype._createElement=function(){return document.createComment(this.model.content)},a}(sh);const km=Mf;var ef=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tf=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ef(a,d),a.prototype.tagName=function(){return"div"},a.prototype.initialize=function(e){d.prototype.initialize.call(this,e),this.listenTo(this.model,"change:attributes:src",this.updateSrc)},a.prototype.updateSrc=function(){var e=(0,Ln.I6)(this.el,"iframe")[0];e&&(0,Ln.X6)(e,{src:this.__getSrc()})},a.prototype.render=function(){d.prototype.render.call(this);var e=(0,Ln.a_)("iframe",{class:"".concat(this.ppfx,"no-pointer"),style:"width: 100%; height: 100%; border: none",src:this.__getSrc()});return this.el.appendChild(e),this},a.prototype.__getSrc=function(){return this.model.getAttributes().src||""},a}($l);const Lm=tf;var Xd=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Rp=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Xd(a,d),a.prototype.tagName=function(){return"img"},a.prototype.events=function(){return{dblclick:"onActive",click:"initResize",error:"onError",load:"onLoad",dragstart:"noDrag"}},a.prototype.initialize=function(e){d.prototype.initialize.call(this,e),this.listenTo(this.model,"change:src",this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},a.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var r=this.model,o=this.em,c=r.get("file");if(c&&o){var g=o.Assets.FileUploader();g?.uploadFile({dataTransfer:{files:[c]}},function(b){var w=b&&b.data&&b.data[0],C=w&&((0,x.isString)(w)?w:w.src);C&&r.set({src:C})}),r.set("file","")}}},a.prototype.updateSrc=function(){var e=this.model;e.addAttributes({src:e.getSrcResult()}),this.updateClasses()},a.prototype.updateClasses=function(){d.prototype.updateClasses.call(this);var e=this,r=e.el,o=e.classEmpty,c=e.model,g=c.getSrcResult()&&!c.isDefaultSrc();r.classList[g?"remove":"add"](o)},a.prototype.onActive=function(e){e?.stopPropagation();var o=this.em,c=this.model,g=o?.Assets;g&&c.get("editable")&&g.open({select:function(b,w){c.set({src:b.getSrc()}),w&&g.close()},target:c,types:["image"],accept:"image/*"})},a.prototype.onError=function(){var o=this.el,c=this.model.getSrcResult({fallback:!0});c&&(o.srcset&&(o.srcset=""),o.src=c)},a.prototype.onLoad=function(){this.em.Canvas.refresh({all:!0})},a.prototype.noDrag=function(e){return e.preventDefault(),!1},a.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var r=this.$el,o=this.model,c=r.attr("class")||"";return!o.get("src")&&r.attr("class","".concat(c," ").concat(this.classEmpty).trim()),this.postRender(),this},a}($l);const Sc=Rp;var rf=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vd=function(){return vd=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},vd.apply(this,arguments)},lh=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},le=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}},ye=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return rf(a,d),a.prototype.events=function(){return{dblclick:"onActive",input:"onInput"}},a.prototype.initialize=function(e){d.prototype.initialize.call(this,e),(0,x.bindAll)(this,"disableEditing","onDisable");var r=this.model,o=this.em;this.listenTo(r,"focus",this.onActive),this.listenTo(r,"change:content",this.updateContentText),this.listenTo(r,"sync:content",this.syncContent),this.rte=o?.RichTextEditor},a.prototype.updateContentText=function(e,r,o){void 0===o&&(o={}),!o.fromDisable&&this.disableEditing()},a.prototype.canActivate=function(){var B,e=this,r=e.model,o=e.rteEnabled,c=e.em,g=c?.getEditing(),b=g===r,w=!0,C=!1;if((o||!r.get("editable")||b||(C=r.isChildOf("text")))&&(w=!1,C&&!r.get("textable"))){for(var ne=r.parent();ne&&!ne.isInstanceOf("text");)ne=ne.parent();ne&&ne.get("editable")?B=ne:w=!0}return{result:w,delegate:B}},a.prototype.onActive=function(e){return lh(this,void 0,void 0,function(){var r,o,c,g,w,C,B,ne,ae,be,Se;return le(this,function(We){switch(We.label){case 0:return o=(r=this).rte,c=r.em,g=this.canActivate(),w=g.delegate,g.result?(null===(Se=e?.stopPropagation)||void 0===Se||Se.call(e),C=this,[4,this.getContent()]):(w&&(null===(be=e?.stopPropagation)||void 0===be||be.call(e),c.setSelected(w),w.trigger("active",e)),[2]);case 1:if(C.lastContent=We.sent(),!o)return[3,5];We.label=2;case 2:return We.trys.push([2,4,,5]),ne=this,[4,o.enable(B=this,this.activeRte,{event:e,view:B})];case 3:return ne.activeRte=We.sent(),[3,5];case 4:return ae=We.sent(),c.logError(ae),[3,5];case 5:return this.toggleEvents(!0),[2]}})})},a.prototype.onDisable=function(e){this.disableEditing(e)},a.prototype.disableEditing=function(){return lh(this,arguments,void 0,function(e){var r,o,c,g,b,w,C,B,ne;return void 0===e&&(e={}),le(this,function(ae){switch(ae.label){case 0:return c=(r=this).rte,g=r.activeRte,b=r.em,w=(o=r.model)&&o.get("editable"),c?(C={},[4,this.getContent()]):[3,7];case 1:B=ae.sent(),ae.label=2;case 2:return ae.trys.push([2,4,,5]),[4,c.disable(this,g,e)];case 3:return C=ae.sent(),[3,5];case 4:return ne=ae.sent(),b.logError(ne),[3,5];case 5:return w&&(B!==this.lastContent||C.forceSync)?[4,this.syncContent(vd(vd({},e),{content:B}))]:[3,7];case 6:ae.sent(),this.lastContent="",ae.label=7;case 7:return this.toggleEvents(),[2]}})})},a.prototype.getContent=function(){return lh(this,void 0,void 0,function(){var e,r,o,c;return le(this,function(g){switch(g.label){case 0:return o=(e=this).activeRte,c="",(r=e.rte)?[4,r.getContent(this,o)]:[3,2];case 1:c=g.sent(),g.label=2;case 2:return[2,c]}})})},a.prototype.syncContent=function(){return lh(this,arguments,void 0,function(e){var r,o,c,b,w,C,B,ne;return void 0===e&&(e={}),le(this,function(ae){switch(ae.label){case 0:return o=(r=this).model,c=r.rte,r.rteEnabled||e.force?null!==(ne=e.content)&&void 0!==ne?(w=ne,[3,3]):[3,1]:[2];case 1:return[4,this.getContent()];case 2:w=ae.sent(),ae.label=3;case 3:return b=w,C=o.components(),B=vd({fromDisable:1},e),o.set("content","",B),c?.customRte&&!c.customRte.parseContent?(C.length&&C.reset(void 0,vd(vd({},e),{keepIds:Gl(C)})),o.set("content",b,B)):C.resetFromString(b,e),[2]}})})},a.prototype.insertComponent=function(e,r){var o;void 0===r&&(r={});var g=this.model,C=this.el.ownerDocument.getSelection();if(C?.rangeCount){var B=C.getRangeAt(0),ne=B.startContainer,ae=B.startOffset,be=(0,z.getComponentModel)(ne),Se=[];if(be&&null!==(o=be.is)&&void 0!==o&&o.call(be,"textnode")){var We=be.collection;We.forEach(function(ur){if(ur===be){var Gt="textnode",ar=r.useDomContent?ne.textContent||"":ur.content;Se.push({type:Gt,content:ar.slice(0,ae)}),Se.push(e),Se.push({type:Gt,content:ar.slice(ae)})}else Se.push(ur)});var lt=Se.filter(Boolean),Ot=lt.indexOf(e);return We.reset(lt,r),We.at(Ot)}}return g.append(e,r)},a.prototype.onInput=function(){var e,r="component",o=["".concat(r,":update"),"".concat(r,":input")].join(" ");null===(e=this.em)||void 0===e||e.trigger(o,this.model)},a.prototype.disablePropagation=function(e){e.stopPropagation()},a.prototype.toggleEvents=function(e){var r=this,o=r.em,c=r.model,g=r.$el,b={on:Ln.on,off:Ln.AU},w=e?"on":"off";o.setEditing(!!e&&this),this.rteEnabled=!!e;var C=[this.el.ownerDocument,document];if(b.off(C,"mousedown",this.onDisable),b[w](C,"mousedown",this.onDisable),o[w]("toolbar:run:before",this.onDisable),c&&(c[w]("removed",this.onDisable),c.trigger("rte:".concat(e?"enable":"disable"))),g?.off("mousedown",this.disablePropagation),g&&g[w]("mousedown",this.disablePropagation),this.config.draggableComponents)for(var B=this.el;B;)B.draggable=!e,(B=B.parentNode)&&"BODY"==B.tagName&&(B=0)},a}($l);const K=ye;var E=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),F=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return E(a,d),a.prototype.render=function(){return d.prototype.render.call(this),this.el.addEventListener("click",this.prevDef,!0),this},a}(K);const _e=F;var Ge=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),st=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Ge(a,d),a}(_e);const Tt=st;var Kt=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fr=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Kt(a,d),a.prototype.tagName=function(){return"div"},a.prototype.events=function(){return{}},a.prototype.initialize=function(e){d.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+"plh-map"},a.prototype.updateSrc=function(){this.getIframe().src=this.model.get("src")},a.prototype.getIframe=function(){if(!this.iframe){var e=document.createElement("iframe");e.src=this.model.get("src"),e.frameBorder="0",e.style.height="100%",e.style.width="100%",e.className=this.ppfx+"no-pointer",this.iframe=e}return this.iframe},a.prototype.render=function(){return d.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},a}(Sc);const nn=fr;var Yr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),io=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Yr(a,d),a.prototype.tagName=function(){return"script"},a.prototype.events=function(){return{}},a}($l);const Go=io;var Vn=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yi=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Vn(a,d),a.prototype._createElement=function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)},a}($l);const ai=yi;var Ti=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ui=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Ti(a,d),a}($l);const vi=Ui;var Uo=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),go=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Uo(a,d),a}($l);const pi=go;var Co=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hi=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Co(a,d),a}($l);const Gi=hi;var Va=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qi=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Va(a,d),a}($l);const xa=qi;var Da=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hs=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Da(a,d),a}($l);const Dl=hs;var Tl=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pc=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Tl(a,d),a.prototype.events=function(){return{}},a}($l);const Mh=Pc;var mu=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Af=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return mu(a,d),a.prototype.tagName=function(){return"div"},a.prototype.events=function(){return{}},a.prototype.initialize=function(){$l.prototype.initialize.apply(this,arguments);var e=this.model,o=["loop","autoplay","controls","color","rel","modestbranding","poster"].map(function(c){return"change:".concat(c)}).join(" ");this.listenTo(e,"change:provider",this.updateProvider),this.listenTo(e,"change:src",this.updateSrc),this.listenTo(e,o,this.updateVideo)},a.prototype.updateProvider=function(){var e=this.model.get("provider");this.el.innerHTML="",this.el.appendChild(this.renderByProvider(e))},a.prototype.updateSrc=function(){var r=this.model,o=this.videoEl;if(o){var c=r.get("provider"),g=r.get("src");switch(c){case"yt":g=r.getYoutubeSrc();break;case"ytnc":g=r.getYoutubeNoCookieSrc();break;case"vi":g=r.getVimeoSrc()}o.src=g}},a.prototype.updateVideo=function(){var r=this.model,o=this.videoEl;switch(r.get("provider")){case"yt":case"ytnc":case"vi":r.trigger("change:videoId");break;default:if(o){var g=o;g.loop=r.get("loop"),g.autoplay=r.get("autoplay"),g.controls=r.get("controls"),g.poster=r.get("poster")}}},a.prototype.renderByProvider=function(e){var r;switch(e){case"yt":r=this.renderYoutube();break;case"ytnc":r=this.renderYoutubeNoCookie();break;case"vi":r=this.renderVimeo();break;default:r=this.renderSource()}return this.videoEl=r,r},a.prototype.renderSource=function(){var e=document.createElement("video");return e.src=this.model.get("src"),this.initVideoEl(e),e},a.prototype.renderYoutube=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},a.prototype.renderYoutubeNoCookie=function(){var e=document.createElement("iframe");return e.src=this.model.getYoutubeNoCookieSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},a.prototype.renderVimeo=function(){var e=document.createElement("iframe");return e.src=this.model.getVimeoSrc(),e.frameBorder="0",e.setAttribute("allowfullscreen","true"),this.initVideoEl(e),e},a.prototype.initVideoEl=function(e){e.className=this.ppfx+"no-pointer",e.style.height="100%",e.style.width="100%"},a.prototype.render=function(){$l.prototype.render.apply(this),this.updateClasses();var e=this.model.get("provider");return this.el.appendChild(this.renderByProvider(e)),this.updateVideo(),this},a}(Sc);const hp=Af;var wg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ah=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return wg(a,d),a.prototype.tagName=function(){return"div"},a}($l);const Fp=Ah;var kh=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),kf=function(){return kf=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},kf.apply(this,arguments)},qg=function(d){function a(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=d.apply(this,e)||this;o.refreshDbn=(0,x.debounce)(function(){return o.refresh()},0);var c=o.events;return o.on(c.update,o.onUpdate),o.on(c.updateInside,o.onUpdateDeep),o}return kh(a,d),a.prototype.removeChildren=function(e,r,o){var c;void 0===o&&(o={}),d.prototype.removeChildren.call(this,e,r,o),null===(c=Xi(e))||void 0===c||c.forEach(function(g){return vc(g,{skipRefs:!0})}),this.__trgEvent(this.events.symbolMainRemove,{component:e})},a.prototype.onAdd=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];d.prototype.onAdd.apply(this,e),this.__trgEvent(this.events.symbolMainAdd,{component:e[0]})},a.prototype.onUpdate=function(e){this.__trgEvent(this.events.symbolMainUpdate,e)},a.prototype.onUpdateDeep=function(e){this.__trgEvent(this.events.symbolMainUpdateDeep,e)},a.prototype.refresh=function(){this.em.trigger(this.events.symbol)},a.prototype.__trgEvent=function(e,r,o){void 0===o&&(o=!1);var g=this.em,b=this.events,w=o?b.symbolInstance:b.symbolMain;g.trigger(e,r),g.trigger(w,kf(kf({},r),{event:e})),this.refreshDbn()},a}(xu);const Lf=qg;var xg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),mp=function(){return mp=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},mp.apply(this,arguments)},Ym=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.dataResolver=new Bs({type:e.type,path:e.path,defaultValue:e.defaultValue},r),o}return xg(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return mp(mp({},d.prototype.defaults),{type:ns,path:"",defaultValue:"",droppable:!1})},enumerable:!1,configurable:!0}),a.prototype.getPath=function(){return this.dataResolver.get("path")},a.prototype.getDefaultValue=function(){return this.dataResolver.get("defaultValue")},a.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},a.prototype.getInnerHTML=function(){return this.getDataValue()},a.prototype.setPath=function(e){this.dataResolver.set("path",e)},a.prototype.setDefaultValue=function(e){this.dataResolver.set("defaultValue",e)},a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===ns},a}(Ul);const Lh=Ym;var tm=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Im=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return tm(a,d),a.prototype.initialize=function(e){var r=this;void 0===e&&(e={}),d.prototype.initialize.call(this,e),this.dataResolverListener=new Lc({em:this.em,resolver:this.model.dataResolver,onUpdate:function(){return r.postRender()}})},a.prototype.remove=function(){return this.dataResolverListener.destroy(),d.prototype.remove.call(this)},a.prototype.postRender=function(){this.el.innerHTML=this.model.getDataValue(),d.prototype.postRender.call(this)},a}($l);const Rm=Im;var Fm=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),If=function(){return If=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},If.apply(this,arguments)},Rf=function(d){function a(e,r){var o=this,c=new El(e,{em:r.em});return(o=d.call(this,If(If({},e),{type:as,components:c.getDataValue(),droppable:!1}),r)||this).dataResolver=c,o.dataResolver.onValueChange=o.handleConditionChange.bind(o),o}return Fm(a,d),a.prototype.getCondition=function(){return this.dataResolver.getCondition()},a.prototype.getIfTrue=function(){return this.dataResolver.getIfTrue()},a.prototype.getIfFalse=function(){return this.dataResolver.getIfFalse()},a.prototype.handleConditionChange=function(){this.components(this.dataResolver.getDataValue())},a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===as},a.prototype.setCondition=function(e){this.dataResolver.setCondition(e)},a.prototype.setIfTrue=function(e){this.dataResolver.setIfTrue(e)},a.prototype.setIfFalse=function(e){this.dataResolver.setIfFalse(e)},a.prototype.toJSON=function(){return this.dataResolver.toJSON()},a}(Ul);const gp=Rf;var rm=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ih=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return rm(a,d),a}($l);const jm=Ih;var Ee=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),bt=function(){return bt=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},bt.apply(this,arguments)},Ur=function(d){function a(e,r){void 0===r&&(r={});var o,c=d.call(this,e,r)||this;return c.mutable=null===(o=e.mutable)||void 0===o||o,c.on("change",c.handleChange),c}return Ee(a,d),Object.defineProperty(a.prototype,"cl",{get:function(){return this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"dataSource",{get:function(){return this.cl.dataSource},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"em",{get:function(){return this.dataSource.em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this.cl.indexOf(this)},enumerable:!1,configurable:!0}),a.prototype.handleChange=function(){var e=this,r=this.changedAttributes();(0,x.keys)(r).forEach(function(o){return e.triggerChange(o)})},a.prototype.getPath=function(e,r){void 0===r&&(r={});var o=this,g=o.id,b=o.index,w=o.dataSource.id,C=e?".".concat(e):"";return"".concat(w,".").concat(r.useIndex?b:g).concat(C)},a.prototype.getPaths=function(e){return[this.getPath(e),this.getPath(e,{useIndex:!0})]},a.prototype.triggerChange=function(e){var c=this.em,g={dataSource:this.dataSource,dataRecord:this};this.getPaths(e).forEach(function(w){return c.trigger("".concat(Ei.path,":").concat(w),bt(bt({},g),{path:w}))})},a.prototype.set=function(e,r,o){var g,b,c=this;if(!this.isNew()&&!1===this.attributes.mutable)throw new Error("Cannot modify immutable record");var w=null===(b=null===(g=this.dataSource)||void 0===g?void 0:g.transformers)||void 0===b?void 0:b.onRecordSetValue,C=function(lt,Ot,ur){void 0===ur&&(ur={});var Gt=ur?.avoidTransformers||!w?Ot:w({id:c.id,key:lt,value:Ot});d.prototype.set.call(c,lt,Gt,ur),d.prototype.set.call(c,{__p:!!ur.partial||void 0},ur)};if("object"==typeof e&&null!==e)for(var ne=0,ae=Object.entries(e);ne<ae.length;ne++){var be=ae[ne];C(be[0],be[1],r)}else C(e,r,o);return this},a}(L.Kx);const mn=Ur;var to=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yo=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.dataSource=r.dataSource,o}return to(a,d),a}(L.pM);const Pi=Yo;Yo.prototype.model=mn;var ja=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ja=function(){return Ja=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ja.apply(this,arguments)},Gs=function(d){function a(e,r){var o=d.call(this,Ja(Ja({},e),{records:[]}),r)||this,c=e.records;return o.transformers=e.transformers||{},c instanceof Pi||o.set({records:new Pi(c,{dataSource:o})}),o.listenTo(o.records,"add",o.onAdd),o.listenTo(o.records,L.e2,o.handleChanges),o}return ja(a,d),a.prototype.defaults=function(){return{records:[],transformers:{}}},Object.defineProperty(a.prototype,"records",{get:function(){return this.attributes.records},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"em",{get:function(){return this.collection.em},enumerable:!1,configurable:!0}),a.prototype.onAdd=function(e){e.triggerChange()},a.prototype.addRecord=function(e,r){return this.records.add(e,r)},a.prototype.getRecord=function(e){return this.records.get(e)},a.prototype.getRecords=function(){var e=this;return function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],this.records.models,!0).map(function(r){return e.getRecord(r.id)})},a.prototype.removeRecord=function(e,r){var o=this.getRecord(e);if(!1===o?.mutable&&!r?.dangerously)throw new Error("Cannot remove immutable record");return this.records.remove(e,r)},a.prototype.setRecords=function(e){var r=this;this.records.reset([],{silent:!0}),e.forEach(function(o){r.records.add(o)})},a.prototype.handleChanges=function(e,r,o){this.em.changesUp(o||r)},a}(L.Kx);const Sl=Gs;var ac=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),qs=function(){return qs=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},qs.apply(this,arguments)},jc=function(d){function a(e,r){var o=this,c=e[el];if(r.forCloning)return d.call(this,e,r)||this;var g=r.em,b=qs(qs({},e),{components:void 0,droppable:!1}),w=o=d.call(this,b,r)||this;return c?(o.rebuildChildrenFromCollection(),(0,x.bindAll)(o,"rebuildChildrenFromCollection"),o.listenTo(o,"change:".concat(el),o.rebuildChildrenFromCollection),o.listenToDataSource(),w):(g.logError("missing collection definition"),w)}return ac(a,d),a.prototype.getItemsCount=function(){var e,r,o=this.getDataSourceItems(),c=Math.max(0,null!==(e=this.getConfigStartIndex())&&void 0!==e?e:0),g=null!==(r=this.getConfigEndIndex())&&void 0!==r?r:Number.MAX_VALUE,b=Math.min(o.length-1,g);return Math.max(0,b-c+1)},a.prototype.getConfigStartIndex=function(){return this.collectionConfig.startIndex},a.prototype.getConfigEndIndex=function(){return this.collectionConfig.endIndex},a.prototype.getComponentDef=function(){return this.getFirstChildJSON()},a.prototype.getDataSource=function(){var e,r;return null===(r=null===(e=this.collectionDef)||void 0===e?void 0:e.collectionConfig)||void 0===r?void 0:r.dataSource},a.prototype.getCollectionId=function(){var e,r;return null===(r=null===(e=this.collectionDef)||void 0===e?void 0:e.collectionConfig)||void 0===r?void 0:r.collectionId},a.prototype.setComponentDef=function(e){this.set(el,qs(qs({},this.collectionDef),{componentDef:e}))},a.prototype.setStartIndex=function(e){e<0?this.em.logError("Start index should be greater than or equal to 0"):this.updateCollectionConfig({startIndex:e})},a.prototype.setEndIndex=function(e){this.updateCollectionConfig({endIndex:e})},a.prototype.updateCollectionConfig=function(e){this.set(el,qs(qs({},this.collectionDef),{collectionConfig:qs(qs({},this.collectionConfig),e)}))},a.prototype.setDataSource=function(e){this.set(el,qs(qs({},this.collectionDef),{collectionConfig:qs(qs({},this.collectionConfig),{dataSource:e})}))},a.prototype.getDataSourceItems=function(){var e;return null!==(e=this.collectionDef)&&void 0!==e&&e.collectionConfig?function _d(d,a){var e=[];switch(!0){case(0,x.isArray)(d):e=d;break;case(0,z.isObject)(d)&&d instanceof Sl:e=yd(d.get("id"),a);break;case ul(d):e=1===d.path.split(".").length?yd(d.path,a):a.DataSources.getValue(d.path,[])}return e}(this.collectionConfig.dataSource,this.em):[]},a.prototype.getCollectionStateMap=function(){return this.get(Qo)||{}},Object.defineProperty(a.prototype,"collectionDef",{get:function(){return this.get(el)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"collectionConfig",{get:function(){var e;return(null===(e=this.collectionDef)||void 0===e?void 0:e.collectionConfig)||{}},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"collectionDataSource",{get:function(){return this.collectionConfig.dataSource},enumerable:!1,configurable:!0}),a.prototype.getFirstChildJSON=function(){var e=this.components().at(0),r=e?(0,z.serialize)(e):this.collectionDef.componentDef;return null==r||delete r.draggable,null==r||delete r.removable,r},a.prototype.listenToDataSource=function(){var e,r=this.em,o=null===(e=this.collectionDataSource)||void 0===e?void 0:e.path;o&&(this.dataSourceWatcher=new Lc({em:r,resolver:new Bs({type:ns,path:o},{em:r}),onUpdate:this.rebuildChildrenFromCollection}))},a.prototype.rebuildChildrenFromCollection=function(){this.components().reset(this.getCollectionItems(),hu)},a.prototype.getCollectionItems=function(){var e,r,o,c=this.collectionDef,g=c.componentDef,b=c.collectionConfig,w=function nf(d,a,e){for(var o=0,c=[{property:d,propertyPath:"collectionConfig"},{property:a,propertyPath:"componentDef"},{property:d?.collectionId,propertyPath:"collectionConfig.collectionId"},{property:d?.dataSource,propertyPath:"collectionConfig.dataSource"}];o<c.length;o++){var g=c[o];if(!xl(g.property,g.propertyPath,e))return[]}var C=d?.startIndex;return void 0!==C&&(C<0||!Number.isInteger(C))&&e.logError("Invalid startIndex: ".concat(C,". It must be a non-negative integer.")),!0}(b,g,this.em);if(!w)return[];for(var Ot,C=[],B=b.collectionId,ne=this.getDataSourceItems(),ae=null!==(r=this.getConfigStartIndex())&&void 0!==r?r:0,be=null!==(o=this.getConfigEndIndex())&&void 0!==o?o:Number.MAX_VALUE,Se=Math.min(ne.length-1,be),We=Se-ae+1,lt=this.getCollectionStateMap(),ur=ae;ur<=Se;ur++){var ar=ur===ae,Fn={collectionId:B,currentIndex:ur,currentItem:ne[ur],startIndex:ae,endIndex:Se,totalItems:We,remainingItems:We-(ur+1)};if(lt[B])return this.em.logError('The collection ID "'.concat(B,'" already exists in the parent collection state. Overriding it is not allowed.')),[];var fo=qs(qs({},lt),((e={})[B]=Fn,e));ar&&(Ot=new(0,(this.em.Components.getType(g?.type||"default")||this.em.Components.getType("default")).model)(qs(qs({},(0,z.serialize)(g)),{draggable:!1,removable:!1}),this.opt));var Dn=Ot.clone({symbol:!0});!ar&&Dn.set("locked",!0),Tu(fo,B)(Dn),C.push(Dn)}return C},a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===To},a.prototype.toJSON=function(e){var r=d.prototype.toJSON.call(this,e);return r[el].componentDef=this.getFirstChildJSON(),delete r.components,delete r.droppable,r},a}(Ul);const Ju=jc;function Tu(d,a){return function(e){nm(d)(e);var r=function(b){Tu(d,a)(b)},o="_hasAddListener".concat(a?"_".concat(a):""),c=e.components();e.collectionStateListeners.includes(o)||(e.listenTo(c,"add",r),e.collectionStateListeners.push(o),e.listenTo(c,"remove",function(b){var w;b.stopListening(b.components(),"add",r),b.off("change:".concat(Qo),Md);var C=b.collectionStateListeners.indexOf(o);-1!==C&&b.collectionStateListeners.splice(C,1);var B=b.get(Qo);b.set(Qo,qs(qs({},B),((w={})[a]=void 0,w)))})),c?.toArray().forEach(function(b){Tu(d,a)(b)}),e.on("change:".concat(Qo),Md)}}function Md(){var d,a=this.get(Qo);null===(d=this.components())||void 0===d||d.toArray().forEach(function(e){nm(a)(e)})}function xl(d,a,e){return!!d||(e.logError('The "'.concat(a,'" property is required in the collection definition.')),!1)}function nm(d){return function(a){a.set(gc,!0);var e=qs(qs({},a.get(Qo)),d);if(a.set(Qo,e),a.dataResolverWatchers.updateCollectionStateMap(e),Object.keys(e).every(function(g){return e[g].currentIndex===e[g].startIndex})){var c=a.__onStyleChange.bind(a);a.__onStyleChange=function(g,b){void 0===b&&(b={}),c(g),cc(a).forEach(function(C){C.addStyle(g,b)})},a.on("change:".concat(gc),function(){a.__onStyleChange=c})}}}function yd(d,a){var e=a.DataSources.getValue(d,[]);return Object.keys(e).map(function(o){return{type:ns,path:d+"."+o}})}var ch=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jp=function(){return jp=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},jp.apply(this,arguments)},Nm=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.dataResolver=new Ao({type:e.type,variableType:e.variableType,path:e.path,collectionId:e.collectionId},jp(jp({},r),{collectionsStateMap:o.get(Qo)})),o.listenTo(o,"change:".concat(Qo),o.handleCollectionsMapStateUpdate),o}return ch(a,d),Object.defineProperty(a.prototype,"defaults",{get:function(){return jp(jp({},d.prototype.defaults),{type:rs,collectionId:void 0,variableType:void 0,path:void 0,droppable:!1})},enumerable:!1,configurable:!0}),a.prototype.handleCollectionsMapStateUpdate=function(e,r,o){void 0===o&&(o={}),this.dataResolver.updateCollectionsStateMap(r)},a.prototype.getDataValue=function(){return this.dataResolver.getDataValue()},a.prototype.getInnerHTML=function(){return this.getDataValue()},a.isComponent=function(e){return(0,z.toLowerCase)(e.tagName)===rs},a}(Ul);const Rh=Nm;var Su=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),om=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Su(a,d),a.prototype.initialize=function(e){void 0===e&&(e={}),d.prototype.initialize.call(this,e),this.dataResolverListener=new Lc({em:this.em,resolver:this.model.dataResolver,onUpdate:this.postRender.bind(this)})},a.prototype.postRender=function(){this.el.innerHTML=this.model.getDataValue(),d.prototype.postRender.call(this)},a}($l);const im=om;var am=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sm=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return am(a,d),a}($l);const Ad=sm;var Bl=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hc=function(){return Hc=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Hc.apply(this,arguments)},Ff=function(d){return d[d.InvalidSource=0]="InvalidSource",d[d.SourceReject=1]="SourceReject",d[d.TargetReject=2]="TargetReject",d}(Ff||{}),jh=function(d){function a(e){var r=d.call(this,e,"DomComponents",new xu(void 0,{em:e}),gt.I,{stylePrefix:"comp-",components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]})||this;r.componentTypes=[{id:rs,model:Rh,view:im},{id:To,model:Ju,view:Ad},{id:as,model:gp,view:jm},{id:ns,model:Lh,view:Rm},{id:"cell",model:Pd,view:pi},{id:"row",model:eh,view:Dl},{id:"table",model:$a,view:Mh},{id:"thead",model:Wu,view:xa},{id:"tbody",model:Ol,view:vi},{id:"tfoot",model:Ou,view:Gi},{id:"map",model:vs,view:nn},{id:"link",model:$i,view:_e},{id:"label",model:on,view:Tt},{id:"video",model:rh,view:hp},{id:"image",model:So,view:Sc},{id:"script",model:Bi,view:Go},{id:"svg-in",model:zs,view:ai},{id:"svg",model:Es,view:ai},{id:"iframe",model:cr,view:Lm},{id:"comment",model:gi,view:km},{id:"textnode",model:Lr,view:sh},{id:Cu,model:Qp,view:$l},{id:"wrapper",model:Pm,view:Fp},{id:"text",model:Xo,view:K},{id:"default",model:Ul,view:$l}],r.componentsById={},r.Component=Ul,r.Components=xu,r.ComponentView=$l,r.ComponentsView=Ip,r.storageKey="components",r.keySymbols="symbols",r.events=gt.I,r.symbols=new Lf([],{em:e,config:r.config,domc:r}),e&&(r.config.components=e.config.components||r.config.components);var c=r.config.pStylePrefix;if(c&&(r.config.stylePrefix=c+r.config.stylePrefix),e){e.get("Parser").compTypes=r.componentTypes,e.on("change:componentHovered",r.componentHovered,r);var g=e.get("selected");e.listenTo(g,"add",function(b,w,C){return r.selectAdd(g.getComponent(b),C)}),e.listenTo(g,"remove",function(b,w,C){return r.selectRemove(g.getComponent(b),C)})}return r}return Bl(a,d),a.prototype.postLoad=function(){this.em.UndoManager.add(this.symbols)},a.prototype.load=function(e){var r=this,o=this.loadProjectData(e,{onResult:function(c){var g=r.getWrapper();if(g||(r.em.Pages.add({},{select:!0}),g=r.getWrapper()),(0,x.isArray)(c))c.length&&g.components(c);else{var b=c.components,w=void 0===b?[]:b,C=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(c,["components"]);g.set(C),g.components(w)}}});return this.symbols.reset(e[this.keySymbols]||[]),o},a.prototype.store=function(){var e;return(e={})[this.keySymbols]=this.symbols,e},a.prototype.getComponent=function(){var e=this.em.Pages.getSelected(),r=e?.getMainFrame();return r?.getComponent()},a.prototype.getWrapper=function(){return this.getComponent()},a.prototype.getComponents=function(){var e=this.getWrapper();return e?.components()},a.prototype.addComponent=function(e,r){return void 0===r&&(r={}),this.getComponents().add(e,r)},a.prototype.render=function(){var e;return null===(e=this.componentView)||void 0===e?void 0:e.render().el},a.prototype.clear=function(e){void 0===e&&(e={});var r=this.getComponents();return r?.filter(Boolean).forEach(function(o){return o.remove(e)}),this},a.prototype.setComponents=function(e,r){void 0===r&&(r={}),this.clear(r).addComponent(e,r)},a.prototype.addType=function(e,r){var o=this.em,c=r.model,g=void 0===c?{}:c,b=r.view,w=void 0===b?{}:b,C=r.isComponent,B=r.extend,ne=r.extendView,ae=r.extendFn,be=void 0===ae?[]:ae,Se=r.extendFnView,We=void 0===Se?[]:Se,lt=r.block,Ot=this.getType(e),ur=this.getType(B),Gt=this.getType(ne),ar=ur||Ot||this.getType("default"),Fn=ar.model,fo=Gt?Gt.view:ar.view,ti=function(wr,sr,gn){return wr.reduce(function(xt,Eo){var _o=sr[Eo],mi=gn.prototype[Eo];return _o&&mi&&(xt[Eo]=function(){for(var Sa=[],Ha=0;Ha<arguments.length;Ha++)Sa[Ha]=arguments[Ha];mi.bind(this).apply(void 0,Sa),_o.bind(this).apply(void 0,Sa)}),xt},{})};if("object"==typeof g){var jn={defaults:g.defaults};delete g.defaults;var Nr=new Set(Fn.typeExtends);Nr.add(Fn.getDefaults().type),r.model=Fn.extend(Hc(Hc({},g),ti(be,g,Fn)),{typeExtends:Nr,isComponent:!Ot||ur||C?C||function(){return 0}:Fn.isComponent}),Object.defineProperty(r.model.prototype,"defaults",{get:function(){return Hc(Hc({},(0,x.result)(Fn.prototype,"defaults")||{}),(0,x.result)(jn,"defaults")||{})}})}if("object"==typeof w&&(r.view=fo.extend(Hc(Hc({},w),ti(We,w,fo)))),Ot?(Ot.model=r.model,Ot.view=r.view):(r.id=e,this.componentTypes.unshift(r)),lt){var Dn={id:e,label:e,content:{type:e}},ir=!0===lt?Dn:Hc(Hc({},Dn),lt);o.Blocks.add(ir.id||e,ir)}var Bt="component:type:".concat(Ot?"update":"add");return o?.trigger(Bt,Ot||r),this},a.prototype.getType=function(e){for(var r=this.componentTypes,o=0;o<r.length;o++)if(r[o].id==e)return r[o]},a.prototype.removeType=function(e){var r=this.componentTypes,o=this.getType(e);if(o){var c=r.indexOf(o);return r.splice(c,1),o}},a.prototype.getTypes=function(){return this.componentTypes},a.prototype.selectAdd=function(e,r){var o=this;void 0===r&&(r={}),e&&(e.set({status:"selected"}),["component:selected","component:toggled"].forEach(function(c){return o.em.trigger(c,e,r)}))},a.prototype.selectRemove=function(e,r){var o=this;void 0===r&&(r={}),e&&(e.set({status:"",state:""}),["component:deselected","component:toggled"].forEach(function(g){return o.em.trigger(g,e,r)}))},a.prototype.componentHovered=function(){var e=this.em,r=e.get("componentHovered"),o=e.previous("componentHovered"),c="hovered";o&&o.get("status")==c&&o.set({status:"",state:""}),r&&(0,x.isEmpty)(r.get("status"))&&r.set("status",c)},a.prototype.getShallowWrapper=function(){var r=this.shallow,o=this.em;if(!r&&o){var c=o.shallow;if(!c)return;var g=c.Components;if(g.componentTypes=this.componentTypes,r=g.getWrapper()){var b=[Yf,Tf].join(" ");r.on(b,(0,x.debounce)(function(){return r?.components("")},100))}this.shallow=r}return r},a.prototype.isComponent=function(e){return(0,z.isComponent)(e)},a.prototype.addSymbol=function(e){if(!(0,x.isSymbol)(e)||Ri(e)){var r=e.clone({symbol:!0});return Jo(r)&&this.symbols.add(r),this.em.trigger("component:toggled"),r}},a.prototype.getSymbols=function(){return function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],this.symbols.models,!0)},a.prototype.detachSymbol=function(e){ko(e)&&vc(e)},a.prototype.getSymbolInfo=function(e,r){void 0===r&&(r={});var o=Jo(e),c=es(e),g=!!c,b=Xi(o?e:c)||[],w=c||(o?e:void 0),C=cc(e,{changed:r.withChanges}),B=o||g;return{isSymbol:B,isMain:o,isInstance:g,isRoot:B&&Ri(e),main:w,instances:b,relatives:C||[]}},a.prototype.canMove=function(e,r,o){var c={result:!1,reason:Ff.InvalidSource,target:e,source:null};if(!r||!e)return c;if(ra(e)&&r instanceof Ul&&ra(r)){var g=Il(e),b=Jo(g)?g:es(g),w=Il(r);if(b===(Jo(w)?w:es(w))&&g!==w)return Hc(Hc({},c),{reason:Ff.TargetReject})}var ae=(0,z.isComponent)(r)?r:null;if(!ae){var be=this.getShallowWrapper();ae=be?.append(r,{temporary:!0})[0]||null}if(c.source=ae,!ae)return c;var Se=ae.get("draggable");if((0,x.isFunction)(Se))Se=!!Se(ae,e,o);else{var We=e.getEl();Se=(0,x.isArray)(Se)?Se.join(","):Se,Se=(0,x.isString)(Se)?We?.matches(Se):Se}if(!Se)return Hc(Hc({},c),{reason:Ff.SourceReject});var lt=e.get("droppable");(0,x.isFunction)(lt)?lt=!!lt(ae,e,o):!1===lt&&e.isInstanceOf("text")&&ae.get("textable")?lt=!0:(We=ae.getEl(),lt=(0,x.isArray)(lt)?lt.join(","):lt,lt=(0,x.isString)(lt)?We?.matches(lt):lt);var Ot=[e].concat(e.parents()).indexOf(ae)>-1;return Hc(Hc({},c),!lt||Ot?{reason:Ff.TargetReject}:{result:!0})},a.prototype.allById=function(){return this.componentsById},a.prototype.getById=function(e){return this.componentsById[e]||null},a.prototype.destroy=function(){var e,r=this.allById();Object.keys(r).forEach(function(o){return r[o]&&r[o].remove()}),null===(e=this.componentView)||void 0===e||e.remove(),[this.em,this.componentsById,this.componentView].forEach(function(o){return{}})},a}(je);const Qm=jh;var kd=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ld=Number.MAX_VALUE,f=function(d){function a(){var e=d.call(this)||this;return(0,x.bindAll)(e,"sortRules"),e.compCls=[],e.ids=[],e}return kd(a,d),a.prototype.buildFromModel=function(e,r){var o=this;void 0===r&&(r={});var c="",g=this.em,b=g&&g.getConfig().avoidInlineStyle,w=e.styleToString(),C=e.classes;return this.ids.push("#".concat(e.getId())),C.forEach(function(ne){return o.compCls.push(ne.getFullName())}),!b&&w&&(c="#".concat(e.getId(),"{").concat(w,"}")),e.components().forEach(function(ne){return c+=o.buildFromModel(ne,r)}),c},a.prototype.build=function(e,r){var o=this;void 0===r&&(r={});var c=r.json,g=r.em,b=r.cssc||g?.Css;this.em=g,this.compCls=[],this.ids=[],this.model=e;var w=[],C=e?this.buildFromModel(e,r):"",B=(0,x.isUndefined)(r.clearStyles)&&g?g.getConfig().clearStyles:r.clearStyles;if(b){var ne=r.rules||b.getAll(),ae={},be=[];r.onlyMatched&&e&&(0,z.hasWin)()&&(ne=this.matchedRules(e,ne)),ne.forEach(function(Se){var We=Se.getAtRule();if(We){var lt=ae[We];lt?lt.push(Se):ae[We]=[Se]}else{var Ot=o.buildFromRule(Se,be,r);c?w.push(Ot):C+=Ot}}),this.sortMediaObject(ae).forEach(function(Se){var We="",lt=Se.key;Se.value.forEach(function(ur){var Gt=o.buildFromRule(ur,be,r);ur.get("singleAtRule")?C+="".concat(lt,"{").concat(Gt,"}"):We+=Gt,c&&w.push(Gt)}),We&&(C+="".concat(lt,"{").concat(We,"}"))}),g&&B&&ne.remove&&ne.remove(be)}return c?w.filter(function(Se){return Se}):C},a.prototype.buildFromRule=function(e,r,o){var g,c=this;void 0===o&&(o={});var ae,b="",w=this.model,C=e.selectorsToString({skipAdd:1}),B=e.get("selectorsAdd"),ne=e.get("singleAtRule");if(null===(g=e.get("selectors"))||void 0===g||g.forEach(function(Se){var We=Se.getFullName();(c.compCls.indexOf(We)>=0||c.ids.indexOf(We)>=0||o.keepUnusedStyles)&&(ae=1)}),C&&ae||B||ne||!w){var be=e.getDeclaration({body:1});be&&(o.json?b=e:b+=be)}else r.push(e);return b},a.prototype.matchedRules=function(e,r){var o=this,c=e.getEl(),g=[];return r.forEach(function(b){try{b.selectorsToString().split(",").some(function(w){return c?.matches(o.__cleanSelector(w))})&&g.push(b)}catch{}}),e.components().forEach(function(b){g=g.concat(o.matchedRules(b,r))}),g=g.filter(function(b,w){return g.indexOf(b)===w})},a.prototype.getQueryLength=function(e){var r=/(-?\d*\.?\d+)\w{0,}/.exec(e);return r?parseFloat(r[1]):Ld},a.prototype.sortMediaObject=function(e){var r=this;void 0===e&&(e={});var o=[];return(0,x.each)(e,function(c,g){return o.push({key:g,value:c})}),o.sort(function(c,g){var b=[c.key,g.key].every(function(B){return-1!==B.indexOf("min-width")}),C=b?g.key:c.key;return r.getQueryLength(b?c.key:g.key)-r.getQueryLength(C)})},a.prototype.sortRules=function(e,r){var o=function(w){return w.get("mediaText")||""},c=[o(e),o(r)].every(function(w){return-1!==w.indexOf("min-width")}),g=o(c?e:r),b=o(c?r:e);return this.getQueryLength(g)-this.getQueryLength(b)},a.prototype.__cleanSelector=function(e){return e.split(" ").map(function(r){return r.split(":")[0]}).join(" ")},a}(L.Kx);const v=f;var k=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),P=function(){return P=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},P.apply(this,arguments)},he=((0,z.hasWin)()?window:{}).CSS,Fe=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e)||this;return o.views=[],o.config=e||{},o.opt=r,o.em=r.em,o.ensureSelectors(null,null,{}),o.on("change",o.__onChange),o.setStyle(o.get("style")),o}return k(a,d),a.prototype.defaults=function(){return{selectors:[],selectorsAdd:"",style:{},mediaText:"",state:"",stylable:!0,atRuleType:"",singleAtRule:!1,important:!1,group:"",shallow:!1,_undo:!0}},a.prototype.__onChange=function(e,r){var o=this.em,c=this.changedAttributes();c&&!(0,z.isEmptyObj)(c)&&o?.changesUp(r)},a.prototype.clone=function(){var e=P({},this.opt),r=P({},this.attributes);return r.selectors=this.get("selectors").map(function(o){return o.clone()}),new this.constructor(r,e)},a.prototype.ensureSelectors=function(e,r,o){var c=this.em,g=c?.Selectors,b=[this,"change:selectors",this.ensureSelectors],w=this.getSelectors();if(this.stopListening.apply(this,b),w.models&&(w=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],w.models,!0)),w=(0,x.isString)(w)?[w]:w,Array.isArray(w)){var C=w.filter(function(B){return B}).map(function(B){return g?g.add(B):B});w=new Mu(C)}this.set("selectors",w,o),this.listenTo.apply(this,b)},a.prototype.getAtRule=function(){var e=this.get("atRuleType"),r=this.get("mediaText"),o=e?"@".concat(e):r?"@media":"";return o+(r&&o?" ".concat(r):"")},a.prototype.selectorsToString=function(e){void 0===e&&(e={});var r=[],o=this.get("state"),c=this.get("selectorsAdd"),g={escape:function(C){return he&&he.escape?he.escape(C):C}},b=this.getSelectors().getFullString(0,g),w=o&&!e.skipState?":".concat(o):"";return b&&r.push("".concat(b).concat(w)),c&&!e.skipAdd&&r.push(c),r.join(", ")},a.prototype.getDeclaration=function(e){void 0===e&&(e={});var r="",o=this.attributes.important,c=this.selectorsToString(e),g=this.styleToString(P({important:o},e)),b=this.get("singleAtRule");return(c||b)&&(g||e.allowEmpty)&&(r=b?g:"".concat(c,"{").concat(g,"}")),r},a.prototype.getDevice=function(){var e=this.em,r=this.attributes,o=r.atRuleType,c=r.mediaText,g=e?.Devices.getDevices()||[],b=g.filter(function(w){return""===w.getWidthMedia()})[0];return"media"===o&&c?g.filter(function(w){return w.getWidthMedia()===function(d){var a=/(-?\d*\.?\d+)\w{0,}/.exec(d);return a?a[0]:""}(c)})[0]||null:b||null},a.prototype.getState=function(){var e=this.em,r=this.get("state");return(e?.Selectors.getStates()||[]).filter(function(c){return c.getName()===r})[0]||null},a.prototype.getComponent=function(){var e,r=this.getSelectors(),o=1==r.length&&r.at(0),c=o&&o.isId()&&o.get("name");return c&&(null===(e=this.em)||void 0===e?void 0:e.Components.getById(c))||null},a.prototype.toCSS=function(e){void 0===e&&(e={});var r="",o=this.getAtRule(),c=this.getDeclaration(e);return(c||e.allowEmpty)&&(r=c),o&&r&&(r="".concat(o,"{").concat(r,"}")),r},a.prototype.toJSON=function(){for(var e,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var c=L.Kx.prototype.toJSON.apply(this,r);if(null!==(e=this.em)&&void 0!==e&&e.getConfig().avoidDefaults){var g=this.defaults();(0,x.forEach)(g,function(b,w){c[w]===b&&delete c[w]}),delete c.style.__p,(0,x.isEmpty)(c.selectors)&&delete c.selectors,(0,x.isEmpty)(c.style)&&delete c.style}return c},a.prototype.compare=function(e,r,o,c){var g;void 0===c&&(c={});var b=r||"",w=o||"",C=c.selectorsAdd||"",B=c.atRuleType||"";w&&!B&&(B="media");var ae=((0,x.isArray)(e)||e.models?e.models||e:[e]).map(function(lt){return lt.getFullName()}),be=null===(g=this.get("selectors"))||void 0===g?void 0:g.map(function(lt){return lt.getFullName()}),Se=ae.slice().sort(),We=be.slice().sort();return!(ae.length!==be.length||!Se.every(function(lt,Ot){return lt===We[Ot]})||this.get("state")!==b||this.get("mediaText")!==w||this.get("selectorsAdd")!==C||this.get("atRuleType")!==B)},a}(tn);const Be=Fe;var ot=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ft=function(d){function a(e,r){var o=d.call(this,e)||this;return o.editor=r?.em,setTimeout(function(){o.on("remove",o.onRemove),o.on("add",o.onAdd)}),o}return ot(a,d),a.prototype.toJSON=function(e){return L.pM.prototype.toJSON.call(this,e).filter(function(o){return o.style&&!o.shallow})},a.prototype.onAdd=function(e,r,o){e.ensureSelectors(e,r,o)},a.prototype.onRemove=function(e){var r=this.editor;r.stopListening(e),r.UndoManager.remove(e)},a.prototype.add=function(e,r){return void 0===r&&(r={}),"string"==typeof e&&(e=this.editor.get("Parser").parseCss(e)),r.em=this.editor,L.pM.prototype.add.apply(this,[e,r])},a}(L.pM);const jr=ft;ft.prototype.model=Be;var Rr=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_n=function(){return _n=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},_n.apply(this,arguments)},wo=function(d){function a(e){var r=d.call(this,e,"CssComposer",null,{},{stylePrefix:"css-",rules:[]})||this;r.Selectors=Mu,r.storageKey="styles";var o=r.config,c=o.pStylePrefix;return c&&(o.stylePrefix=c+o.stylePrefix),o.rules=r.em.config.style||o.rules||"",r.rules=new jr([],o),r}return Rr(a,d),a.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},a.prototype.postLoad=function(){this.em.UndoManager.add(this.getAll())},a.prototype.store=function(){return this.getProjectData()},a.prototype.load=function(e){return this.loadProjectData(e,{all:this.rules})},a.prototype.add=function(e,r,o,c,g){void 0===c&&(c={}),void 0===g&&(g={});var b=r||"",w=o||"",C=_n({},c),B=this.get(e,b,w,C);return B&&B.config&&!B.config.singleAtRule||(C.state=b,C.mediaText=w,C.selectors=[],w&&!C.atRuleType&&(C.atRuleType="media"),(B=new Be(C,this.config)).get("selectors").add(e,g),this.rules.add(B,g)),B},a.prototype.get=function(e,r,o,c){var g=e;if((0,x.isString)(e)){var b=this.em.Selectors,w=e.split(",")[0].trim(),C=this.em.Parser.parserCss.checkNode({selectors:w})[0];g=b.get(C.selectors)}return this.rules.find(function(B){return B.compare(g,r,o,c)})||null},a.prototype.getAll=function(){return this.rules},a.prototype.addCollection=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});var c=this.em,g=[];(0,x.isString)(e)&&(e=c.Parser.parseCss(e));for(var b=e instanceof Array?e:[e],w=0,C=b.length;w<C;w++){var B=b[w]||{};if(B.selectors){var ne=c?.Selectors;ne||console.warn("Selector Manager not found");for(var ae=B.selectors,be=ae instanceof Array?ae:[ae],Se=[],We=0,lt=be.length;We<lt;We++){var Ot=ne.add(be[We]);Se.push(Ot)}var ur=this.get(Se,B.state,B.mediaText,B),Gt=this.add(Se,B.state,B.mediaText,B,r),ar=!ur||!r.avoidUpdateStyle,Fn=B.style||{};if((0,z.isObject)(o)&&Gt.set(o,r),ar){var fo=r.extend?_n(_n({},Gt.get("style")),Fn):Fn;Gt.setStyle(fo,r)}g.push(Gt)}}return g},a.prototype.addRules=function(e){return this.addCollection(e)},a.prototype.setRule=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});var c=o.atRuleType,g=o.atRuleParams,b=this.em.Parser.parserCss.checkNode({selectors:e,style:r})[0],w=b.state,C=b.selectorsAdd,ne=this.em.Selectors.add(b.selectors),ae=this.add(ne,w,g,{selectorsAdd:C,atRule:c});return o.addStyles?ae.addStyle(r,o):ae.setStyle(r,o),ae},a.prototype.getRule=function(e,r){void 0===r&&(r={});var o=this.em,c=o.Selectors,g=o.Parser.parserCss.checkNode({selectors:e})[0],b=c.get(g.selectors);return b?this.get(b,g.state,r.atRuleParams,{selectorsAdd:g.selectorsAdd,atRuleType:r.atRuleType}):void 0},a.prototype.getRules=function(e){var r=this.getAll();if(!e)return function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],r.models,!0);var o={sort:!0},c=(0,x.isString)(e)?e.split(",").map(function(b){return b.trim()}):e;return r.filter(function(b){return c.indexOf(b.getSelectors().getFullString(null,o))>=0})},a.prototype.setIdRule=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});var c=o.addOpts,g=void 0===c?{}:c,b=o.mediaText,w=o.state||"",C=(0,x.isUndefined)(b)?this.em.getCurrentMedia():b,ne=this.em.Selectors.add({name:e,type:oc.TYPE_ID},g),ae=this.add(ne,w,C,{},g);return ae.setStyle(r,_n(_n({},o),g)),ae},a.prototype.getIdRule=function(e,r){void 0===r&&(r={});var o=r.mediaText,c=r.state||"",g=(0,x.isUndefined)(o)?this.em.getCurrentMedia():o,b=this.em.Selectors.get(e,oc.TYPE_ID);return b&&this.get(b,c,g)},a.prototype.setClassRule=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});var c=o.state||"",g=o.mediaText||this.em.getCurrentMedia(),w=this.em.Selectors.add({name:e,type:oc.TYPE_CLASS}),C=this.add(w,c,g);return C.setStyle(r,o),C},a.prototype.getClassRule=function(e,r){void 0===r&&(r={});var o=r.state||"",c=r.mediaText||this.em.getCurrentMedia(),g=this.em.Selectors.get(e,oc.TYPE_CLASS);return g&&this.get(g,o,c)},a.prototype.remove=function(e,r){var o=(0,x.isString)(e)?this.getRules(e):e,c=this.getAll().remove(o,r);return(0,x.isArray)(c)?c:[c]},a.prototype.clear=function(e){return void 0===e&&(e={}),this.getAll().reset([],e),this},a.prototype.getComponentRules=function(e,r){void 0===r&&(r={});var o=r.state,c=r.mediaText;r.current&&(o=this.em.get("state")||"",c=this.em.getCurrentMedia());var b=e.getId();return this.getAll().filter(function(C){return!(!(0,x.isUndefined)(o)&&C.get("state")!==o||!(0,x.isUndefined)(c)&&C.get("mediaText")!==c)&&C.getSelectorsString()==="#".concat(b)})},a.prototype.render=function(){var e;return null===(e=this.rulesView)||void 0===e||e.remove(),this.rulesView=new Xt({collection:this.rules,config:this.config}),this.rulesView.render().el},a.prototype.checkId=function(e,r){void 0===r&&(r={});var o=r.idMap,c=void 0===o?{}:o,g=[];return Object.keys(c).length?((Array.isArray(e)?e:[e]).forEach(function(w){var C=w.selectors;if(C&&1==C.length){var B=C[0];if((0,x.isString)(B)){if("#"===B[0]){var ne=B.substring(1),ae=c[ne];ne&&ae&&(C[0]="#".concat(ae),g.push(w))}}else B.name&&B.type===oc.TYPE_ID&&(ae=c[B.name])&&(B.name=ae,g.push(w))}}),g):g},a.prototype.destroy=function(){var e;this.rules.reset(),this.rules.stopListening(),null===(e=this.rulesView)||void 0===e||e.remove()},a}(je);const ni=wo;var Ta=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fi=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Ta(a,d),a.prototype.defaults=function(){return{label:"",content:"",media:"",category:"",activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{},dragDef:{}}},Object.defineProperty(a.prototype,"category",{get:function(){var e=this.get("category");return e instanceof dd?e:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"parent",{get:function(){return this.collection},enumerable:!1,configurable:!0}),a.prototype.getId=function(){return this.id},a.prototype.getLabel=function(){return this.get("label")},a.prototype.getMedia=function(){return this.get("media")},a.prototype.getContent=function(){return this.get("content")},a.prototype.getDragDef=function(){return this.get("dragDef")},a.prototype.getCategoryLabel=function(){var e=this.get("category");return(0,x.isFunction)(e?.get)?e.get("label"):e?.label?e?.label:e},a}(L.Kx);const fa=Fi;var zi=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),na=function(d){function a(e,r){var o=d.call(this,e)||this;return o.em=r.em,o.on("add",o.handleAdd),o}return zi(a,d),a.prototype.getCategories=function(){return this.em.Blocks.getCategories()},a.prototype.handleAdd=function(e){this.initCategory(e)},a}(Td);const Os=na;na.prototype.model=fa;var _s=function(d){return d.add="block:add",d.remove="block:remove",d.removeBefore="block:remove:before",d.update="block:update",d.dragStart="block:drag:start",d.drag="block:drag",d.dragEnd="block:drag:stop",d.categoryUpdate="block:category:update",d.custom="block:custom",d.all="block",d}(_s||{}),Hl=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ou=function(){return ou=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ou.apply(this,arguments)},Qu=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e)||this,c=o.model;return o.em=r.em,o.config=r,o.endDrag=o.endDrag.bind(o),o.ppfx=r.pStylePrefix||"",o.listenTo(c,"destroy remove",o.remove),o.listenTo(c,"change",o.render),o}return Hl(a,d),a.prototype.events=function(){return{click:"handleClick",mousedown:"startDrag",dragstart:"handleDragStart",drag:"handleDrag",dragend:"handleDragEnd"}},a.prototype.__getModule=function(){return this.em.Blocks},a.prototype.handleClick=function(e){var r,o,c=this,g=c.config,b=c.model,w=c.em,C=b.get("onClick")||g.appendOnClick;if(w.trigger("block:click",b,e),C){if((0,x.isFunction)(C))return C(b,w?.getEditor(),{event:e});var B=null===(r=g.getSorter)||void 0===r?void 0:r.call(g);if(B){var lt,ur,ne=b.get("content"),be=null===(o=this.getTempDropModel(ne).view)||void 0===o?void 0:o.el,Se=be?[{element:be,dragSource:{content:ne}}]:[],We=w.getSelected();if(We)if(B.validTarget(We.getEl(),Se,0))lt=We;else{var ar=We.parent();ar&&B.validTarget(ar.getEl(),Se,0)&&(lt=ar,ur=ar.components().indexOf(We)+1)}if(!lt){var Fn=w.getWrapper();B.validTarget(Fn.getEl(),Se,0)&&(lt=Fn)}var fo=lt&&lt.append(ne,{at:ur})[0];fo&&w.setSelected(fo,{scroll:1})}}},a.prototype.startDrag=function(e){var r,o=this,c=o.config,g=o.em,b=o.model,w=b.get("disable");if(0===e.button&&c.getSorter&&!this.el.draggable&&!w){g.refreshCanvas();var C=c.getSorter();C.__currentBlock=b;var B=this.model.get("content"),ae=null===(r=this.getTempDropModel(B).view)||void 0===r?void 0:r.el;C.startSort(ae?[{element:ae,dragSource:{content:B}}]:[]),(0,Ln.on)(document,"mouseup",this.endDrag)}},a.prototype.handleDragStart=function(e){this.__getModule().__startDrag(this.model,e)},a.prototype.handleDrag=function(e){this.__getModule().__drag(e)},a.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},a.prototype.endDrag=function(){var e,r;(0,Ln.AU)(document,"mouseup",this.endDrag);var o=null===(r=(e=this.config).getSorter)||void 0===r?void 0:r.call(e);o&&o.endDrag()},a.prototype.getTempDropModel=function(e){var r,o=this.em.Components.getComponents(),c={avoidChildren:1,avoidStore:1,avoidUpdateStyle:1},g=o.add(e,ou(ou({},c),{temporary:!0})),b=o.remove(g,ou(ou({},c),{temporary:!0}));return null===(r=(b=b instanceof Array?b[0]:b).view)||void 0===r||r.$el.data("model",b),b},a.prototype.render=function(){var e,r=this,o=r.em,c=r.el,g=r.$el,b=r.ppfx,w=r.model,C=w.get("disable"),B=w.get("attributes")||{},ne=B.class||"",ae="".concat(b,"block"),be=o&&o.t("blockManager.labels.".concat(w.id))||w.get("label"),Se=w.get("render"),We=w.get("media"),lt=C?"".concat(ae,"--disable"):"".concat(b,"four-color-h");g.attr(B),c.className="".concat(ne," ").concat(ae," ").concat(b,"one-bg ").concat(lt).trim(),c.innerHTML="\n      ".concat(We?'<div class="'.concat(ae,'__media">').concat(We,"</div>"):"",'\n      <div class="').concat(ae,'-label">').concat(be,"</div>\n    "),c.title=B.title||(null===(e=c.textContent)||void 0===e?void 0:e.trim()),c.setAttribute("draggable","".concat(!(!(0,z.hasDnd)(o)||C)));var Ot=Se&&Se({el:c,model:w,className:ae,prefix:b});return Ot&&(c.innerHTML=Ot),this},a}(L.Ss);const bc=Qu;var Zu=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fl=function(d){function a(e,r,o){var c=d.call(this,e)||this;c.config=r;var g=r.pStylePrefix||"";return c.em=r.em,c.catName=o,c.pfx=g,c.caretR="fa fa-caret-right",c.caretD="fa fa-caret-down",c.iconClass="".concat(g,"caret-icon"),c.activeClass="".concat(g,"open"),c.className="".concat(g).concat(o,"-category"),c.listenTo(c.model,"change:open",c.updateVisibility),c.model.view=c,c}return Zu(a,d),a.prototype.events=function(){return{"click [data-title]":"toggle"}},a.prototype.template=function(e){var r=e.pfx,o=e.label,c=e.catName;return H(wc||(wc=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}(['\n      <div class="','title" data-title>\n        <i class="','caret-icon"></i>\n        ','\n      </div>\n      <div class="',"",'s-c"></div>\n    '],['\n      <div class="','title" data-title>\n        <i class="','caret-icon"></i>\n        ','\n      </div>\n      <div class="',"",'s-c"></div>\n    '])),r,r,o,r,c)},a.prototype.attributes=function(){return this.model.get("attributes")||{}},a.prototype.updateVisibility=function(){this.model.get("open")?this.open():this.close()},a.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getTypeEl().style.display=""},a.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getTypeEl().style.display="none"},a.prototype.toggle=function(){var e=this.model;e.set("open",!e.get("open"))},a.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},a.prototype.getTypeEl=function(){return this.typeEl||(this.typeEl=this.el.querySelector(".".concat(this.pfx).concat(this.catName,"s-c"))),this.typeEl},a.prototype.append=function(e){this.getTypeEl().appendChild(e)},a.prototype.render=function(){var e=this,o=e.el,c=e.$el,g=e.model,b=e.pfx,w=e.catName,C=e.em.t("".concat(w,"Manager.categories.").concat(g.id))||g.get("label");return o.innerHTML=this.template({pfx:b,label:C,catName:w}),c.addClass(this.className),c.css({order:g.get("order")}),this.updateVisibility(),this},a}(L.Ss);const fc=Fl;var wc,bd=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ep=function(){return ep=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ep.apply(this,arguments)},wd=function(d){function a(e,r){var o=d.call(this,e)||this;o.renderedCategories=new Map,(0,x.bindAll)(o,"getSorter","onDrag","onDrop","onMove"),o.config=r||{},o.categories=e.categories||"";var c=o.config.pStylePrefix||"";o.ppfx=c,o.noCatClass="".concat(c,"blocks-no-cat"),o.blockContClass="".concat(c,"blocks-c"),o.catsClass="".concat(c,"block-categories");var g=o.collection;return o.listenTo(g,"add",o.addTo),o.listenTo(g,"reset",o.render),o.em=o.config.em,o.em&&(o.config.getSorter=o.getSorter),o}return bd(a,d),a.prototype.__getModule=function(){return this.em.Blocks},a.prototype.updateConfig=function(e){void 0===e&&(e={}),this.config=ep(ep({},this.config),e)},a.prototype.getSorter=function(){var e=this.em;if(e){if(!this.sorter){var o=e.Canvas;this.sorter=new e.Utils.ComponentSorter({em:e,treeClass:hd,containerContext:{container:o.getBody(),containerSel:"*",itemSel:"*",pfx:this.ppfx,placeholderElement:o.getPlacerEl(),document:o.getBody().ownerDocument},dragBehavior:{dragDirection:qd.A.BothDirections,nested:!0},positionOptions:{windowMargin:1,canvasRelative:!0},eventHandlers:{legacyOnStartSort:this.onDrag,legacyOnEndMove:this.onDrop,legacyOnMoveClb:this.onMove}})}return this.sorter}},a.prototype.onDrag=function(e){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,e)},a.prototype.onMove=function(e){this.__getModule().__drag(e)},a.prototype.onDrop=function(e){this.em.runDefault(),this.__getModule().__endDrag({component:e}),delete this.sorter.__currentBlock},a.prototype.addTo=function(e){this.add(e)},a.prototype.add=function(e,r){var c=this.config,g=this.renderedCategories,b=e.get("attributes"),C=new bc({model:e,attributes:b},c).render().el,B=e.parent.initCategory(e);if(B&&this.categories&&!c.ignoreCategories){var ne=B.getId(),ae=this.getCategoriesEl(),be=g.get(ne);return!be&&ae&&(be=new fc({model:B},c,"block").render(),g.set(ne,be),ae.appendChild(be.el)),void be?.append(C)}r?r.appendChild(C):this.append(C)},a.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},a.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},a.prototype.append=function(e){var r=this.getBlocksEl();r&&r.appendChild(e)},a.prototype.render=function(){var e=this,r=this.ppfx,o=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML='\n      <div class="'.concat(this.catsClass,'"></div>\n      <div class="').concat(this.noCatClass,'">\n        <div class="').concat(this.blockContClass,'"></div>\n      </div>\n    '),this.collection.each(function(g){return e.add(g,o)}),this.append(o);var c="".concat(this.blockContClass,"s ").concat(r,"one-bg ").concat(r,"two-color");return this.$el.addClass(c),this.rendered=!0,this},a}(L.Ss);const Pu=wd;var iu=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Np=function(){return Np=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Np.apply(this,arguments)},Up=function(d){function a(e){var r,o=d.call(this,e,"BlockManager",new Os((null===(r=e.config.blockManager)||void 0===r?void 0:r.blocks)||[],{em:e}),_s,{appendTo:"",blocks:[],appendOnClick:!1,custom:!1})||this;return o.events=_s,o.Block=fa,o.Blocks=Os,o.Category=dd,o.Categories=Nl,o.storageKey="",o.blocks=o.all,o.blocksVisible=new Os(o.blocks.models,{em:e}),o.categories=new Nl([],{em:e,events:{update:_s.categoryUpdate}}),o.blocks.on("add",function(c){return o.blocksVisible.add(c)}),o.blocks.on("remove",function(c){return o.blocksVisible.remove(c)}),o.blocks.on("reset",function(c){return o.blocksVisible.reset(c.models)}),o.__onAllEvent=(0,x.debounce)(function(){return o.__trgCustom()},0),o}return iu(a,d),a.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},a.prototype.__customData=function(){var e=this,r=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:r.container,dragStart:function(o,c){return e.startDrag(o,c)},drag:function(o){return e.__drag(o)},dragStop:function(o){return e.endDrag(o)}}},a.prototype.__startDrag=function(e,r){var o=this,c=o.em,g=o.events,b=o.blocks,w=e.getContent?e.getContent():e;this._dragBlock=e,c.set({dragResult:null,dragSource:{content:w,dragDef:e.getDragDef()}}),[c,b].map(function(C){return C.trigger(g.dragStart,e,r)})},a.prototype.__drag=function(e){var r=this,c=r.events,b=this._dragBlock;[r.em,r.blocks].map(function(w){return w.trigger(c.drag,b,e)})},a.prototype.__endDrag=function(e){void 0===e&&(e={});var r=this,o=r.em,c=r.events,g=r.blocks,b=this._dragBlock,w=e.component||o.get("dragResult");if(delete this._dragBlock,w&&b){var C="activeOnRender",B=w.get&&w.get(C),ne=b.get("activate")||B,ae=b.get("select"),be=(0,x.isArray)(w)?w[0]:w;(ae||ne&&!1!==ae)&&o.setSelected(be),ne&&(be.trigger("active"),B&&be.unset(C)),b.get("resetId")&&be.onAll(function(Se){return Se.resetId()})}o.set({dragResult:null,dragSource:void 0}),b&&[o,g].map(function(Se){return Se.trigger(c.dragEnd,w,b)})},a.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map(function(e){return e.view}).filter(Boolean)},a.prototype.__behaviour=function(e){return void 0===e&&(e={}),this._bhv=Np(Np({},this._bhv||{}),e)},a.prototype.__getBehaviour=function(){return this._bhv||{}},a.prototype.startDrag=function(e,r){this.__startDrag(e,r),this.__getFrameViews().forEach(function(o){var c;return null===(c=o.droppable)||void 0===c?void 0:c.startCustom()})},a.prototype.endDrag=function(e){this.__getFrameViews().forEach(function(r){var o;return null===(o=r.droppable)||void 0===o?void 0:o.endCustom(e)}),this.__endDrag()},a.prototype.postRender=function(){var e=this,c=e.em,g=this.blocksVisible;this.blocksView=new Pu({collection:g,categories:e.categories},Np(Np({},e.config),{em:c})),this.__appendTo(g.models),this.__trgCustom()},a.prototype.add=function(e,r,o){void 0===o&&(o={});var c=r||{};return c.id=e,this.blocks.add(c,o)},a.prototype.get=function(e){return this.blocks.get(e)},a.prototype.getAll=function(){return this.blocks},a.prototype.getAllVisible=function(){return this.blocksVisible},a.prototype.remove=function(e,r){return void 0===r&&(r={}),this.__remove(e,r)},a.prototype.getCategories=function(){return this.categories},a.prototype.getContainer=function(){var e;return null===(e=this.blocksView)||void 0===e?void 0:e.el},a.prototype.getDragBlock=function(){return this._dragBlock},a.prototype.getBlocksByCategory=function(e){return Fs(e||this.getAll().models)},a.prototype.render=function(e,r){void 0===r&&(r={});var o=this,c=o.categories,g=o.config,b=o.em,w=e||this.getAll().models;if(r.external){var C=new Os(w,{em:b});return new Pu({collection:C,categories:c},Np(Np({em:b},g),r)).render().el}return this.blocksView&&(this.blocksView.updateConfig(r),this.blocksView.collection.reset(w),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},a.prototype.destroy=function(){var e,r=[this.blocks,this.blocksVisible,this.categories];r.map(function(o){return o.stopListening()}),r.map(function(o){return o.reset()}),null===(e=this.blocksView)||void 0===e||e.remove()},a}(je);const of=Up;var Um=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xm=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Um(a,d),a.prototype.defaults=function(){return{name:"",label:""}},a.prototype.getName=function(){return this.get("name")},a.prototype.getLabel=function(){return this.get("label")||this.getName()},a}(L.Kx);const kv=Xm;Xm.prototype.idAttribute="name";var bb=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),N_="contentEditable",xb=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this,o=e.config||{};return r.config=o,r.module=e.module,r.coll=e.coll||null,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.em=o.em,r.listenTo(r.model,"change:active",r.updateStatus),r}return bb(a,d),a.prototype.template=function(){var e=this,r=e.pfx,c=e.config,g=e.model.get("label")||"";return H($g||($g=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}(['\n      <span id="','checkbox" class="','tag-status" data-tag-status></span>\n      <span id="','tag-label" data-tag-name>','</span>\n      <span id="','close" class="','tag-close" data-tag-remove> $'," </span>\n    "],['\n      <span id="','checkbox" class="','tag-status" data-tag-status></span>\n      <span id="','tag-label" data-tag-name>','</span>\n      <span id="','close" class="','tag-close" data-tag-remove> $'," </span>\n    "])),r,r,r,g,r,r,c.iconTagRemove)},a.prototype.events=function(){return{"click [data-tag-remove]":"removeTag","click [data-tag-status]":"changeStatus","dblclick [data-tag-name]":"startEditTag","focusout [data-tag-name]":"endEditTag"}},a.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector("[data-tag-name]")),this.inputEl},a.prototype.startEditTag=function(){var e=this.em,r=this.getInputEl();r[N_]="true",r.focus(),e?.setEditing(!0)},a.prototype.endEditTag=function(){var r=this.model,o=this.em,c=this.getInputEl(),g=c.textContent||"",b=o?.Selectors;c[N_]="false",o?.setEditing(!1),b&&b.rename(r,g)!==r&&(c.innerText=r.getLabel())},a.prototype.changeStatus=function(){var e=this.model;e.set("active",!e.getActive())},a.prototype.removeTag=function(){this.module.removeSelected(this.model)},a.prototype.updateStatus=function(){var e=this,r=e.model,o=e.$el,c=e.config,g=c.iconTagOn,b=c.iconTagOff,w=o.find("[data-tag-status]");r.get("active")?(w.html(g),o.removeClass("opac50")):(w.html(b),o.addClass("opac50"))},a.prototype.render=function(){var e=this,o=e.ppfx,c=e.$el,g=e.model,b="".concat(e.pfx,"tag"),w=["".concat(b," ").concat(o,"three-bg")];return g.get("protected")&&w.push("".concat(b,"-protected")),c.html(this.template()),c.attr("class",w.join(" ")),this.updateStatus(),this},a}(L.Ss);const Gc=xb;var $g,eg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),lm=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d},U_=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;r.config=e.config||{},r.pfx=r.config.stylePrefix||"",r.ppfx=r.config.pStylePrefix||"",r.className=r.pfx+"tags",r.stateInputId=r.pfx+"states",r.stateInputC=r.pfx+"input-c",r.states=r.config.states||[];var o=r.config.em,c=r.collection;r.target=o;var g=o.Selectors;r.module=g,r.em=o,r.componentChanged=(0,x.debounce)(r.componentChanged.bind(r),0),r.checkSync=(0,x.debounce)(r.checkSync.bind(r),0);var b=gt.I.update,w="".concat(b,":classes"),C="component:toggled ".concat(w),B="".concat(w," ").concat(b,":attributes:id change:state");return r.listenTo(o,C,r.componentChanged),r.listenTo(o,"styleManager:update",r.componentChanged),r.listenTo(o,B,r.__handleStateChange),r.listenTo(o,"styleable:change change:device",r.checkSync),r.listenTo(c,"add",r.addNew),r.listenTo(c,"reset",r.renderClasses),r.listenTo(c,"remove",r.tagRemoved),r.listenTo(g.getAll(),g.events.state,(0,x.debounce)(function(){return r.renderStates()},0)),r.delegateEvents(),r}return eg(a,d),a.prototype.template=function(e){var r=e.labelInfo,o=e.labelHead,c=e.iconSync,g=e.iconAdd,b=e.pfx,w=e.ppfx;return H(B_||(B_=lm([' <div id="','up" class="','header">\n        <div id="','label" class="','header-label">','</div>\n        <div id="','status-c" class="','header-status">\n          <span id="','input-c" data-states-c>\n            <div class="',"field ",'select">\n              <span id="','input-holder">\n                <select id="','states" data-states></select>\n              </span>\n              <div class="','sel-arrow">\n                <div class="','d-s-arrow"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id="','tags-field" class="','field">\n        <div id="','tags-c" data-selectors></div>\n        <input id="','new" data-input />\n        <span id="','add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',' </span>\n        <span class="',"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',' </span>\n      </div>\n      <div class="','sels-info">\n        <div class="','label-sel">',':</div>\n        <div class="','sels" data-selected></div>\n      </div>'],[' <div id="','up" class="','header">\n        <div id="','label" class="','header-label">','</div>\n        <div id="','status-c" class="','header-status">\n          <span id="','input-c" data-states-c>\n            <div class="',"field ",'select">\n              <span id="','input-holder">\n                <select id="','states" data-states></select>\n              </span>\n              <div class="','sel-arrow">\n                <div class="','d-s-arrow"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id="','tags-field" class="','field">\n        <div id="','tags-c" data-selectors></div>\n        <input id="','new" data-input />\n        <span id="','add-tag" class="',"tags-btn ",'tags-btn__add" data-add> $',' </span>\n        <span class="',"tags-btn ",'tags-btn__sync" style="display: none" data-sync-style> $',' </span>\n      </div>\n      <div class="','sels-info">\n        <div class="','label-sel">',':</div>\n        <div class="','sels" data-selected></div>\n      </div>'])),b,b,b,b,o,b,b,b,w,w,w,b,w,w,b,w,b,b,b,b,b,g,b,b,c,b,b,r,b)},a.prototype.events=function(){return{"change [data-states]":"stateChanged","click [data-add]":"startNewTag","focusout [data-input]":"endNewTag","keyup [data-input]":"onInputKeyUp","click [data-sync-style]":"syncStyle"}},a.prototype.syncStyle=function(){var ne,e=this.em,r=this.getTarget(),o=e.Css,g=this.getCommonSelectors({opts:{noDisabled:1}}),b=e.get("state"),w=e.getCurrentMedia(),C=[],B=o.get(g,b,w)||o.add(g,b,w);this.getTargets().forEach(function(ae){var be=o.getIdRule(ae.getId(),{state:b,mediaText:w});ne=be.getStyle(),be.setStyle({}),C.push(be)}),ne&&B.addStyle(ne),e.trigger("component:toggled"),e.trigger("component:sync-style",{component:r,selectors:g,mediaText:w,rule:B,ruleComponents:C,state:b})},a.prototype.tagRemoved=function(e){this.updateStateVis()},a.prototype.addNew=function(e){this.addToClasses(e)},a.prototype.startNewTag=function(){var e,r;null===(e=this.$addBtn)||void 0===e||e.css({display:"none"}),null===(r=this.$input)||void 0===r||r.show().focus()},a.prototype.endNewTag=function(){var e,r;null===(e=this.$addBtn)||void 0===e||e.css({display:""}),null===(r=this.$input)||void 0===r||r.hide().val("")},a.prototype.onInputKeyUp=function(e){var r;13===e.keyCode?(e.preventDefault(),this.addNewTag(null===(r=this.$input)||void 0===r?void 0:r.val())):27===e.keyCode&&this.endNewTag()},a.prototype.checkStates=function(){var e=this.em.getState(),r=this.getStates();r&&r.val(e)},a.prototype.componentChanged=function(e){this.updateSelection((void 0===e?{}:e).targets)},a.prototype.updateSelection=function(e){var r=e||this.getTargets(),o=[];return(r=(0,x.isArray)(r)?r:[r])&&r.length&&(o=this.getCommonSelectors({targets:r}),this.checkSync({validSelectors:o})),this.collection.reset(o),this.updateStateVis(r),this.module.__trgCustom(),o},a.prototype.getCommonSelectors=function(e){var r=void 0===e?{}:e,c=r.opts,g=void 0===c?{}:c,b=r.targets||this.getTargets();return this.module.__getCommonSelectors(b,g)},a.prototype._commonSelectors=function(){for(var e,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return(e=this.module).__common.apply(e,r)},a.prototype.checkSync=function(){var b,e=this,r=e.$btnSyncEl,o=e.config,c=e.collection,g=this.getTarget();if(g&&o.componentFirst&&c.length){var w=g.getStyle();b=!(0,x.isEmpty)(w)}r&&r[b?"show":"hide"]()},a.prototype.getTarget=function(){return this.target.getSelected()},a.prototype.getTargets=function(){return this.target.getSelectedAll()},a.prototype.updateStateVis=function(e){var r=this.em,o=r&&r.getConfig().avoidInlineStyle,c=this.collection.length||o?"":"none";this.getStatesC().css("display",c),this.updateSelector(e)},a.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},a.prototype.updateSelector=function(e){var r=this,o=this.el.querySelector("[data-selected]"),c=[],g=e||this.getTargets();(g=(0,x.isArray)(g)?g:[g]).forEach(function(b){return c.push(r.__getName(b))}),o&&(o.innerHTML=c.join(", ")),this.checkStates()},a.prototype.__getName=function(e){var C,r=this,o=r.pfx,c=r.config,g=r.em,b=c.selectedName,w=c.componentFirst;if((0,x.isString)(e))C=H(Lv||(Lv=lm(['<span class="','sel-gen">',"</span>"],['<span class="','sel-gen">',"</span>"])),o,e);else{var B=e?.getSelectors();if(!B)return"";var ne=B.getStyleable(),ae=g.get("state"),be=e.getId?H(W_||(W_=lm(['<span class="','sel-cmp">','</span>\n            <span class="','sel-id">#',"</span>"],['<span class="','sel-cmp">','</span>\n            <span class="','sel-id">#',"</span>"])),o,e.getName(),o,e.getId()):"";C=(C=this.collection.getFullString(ne))?H(Jg||(Jg=lm(['<span class="','sel-rule">',"</span>"],['<span class="','sel-rule">',"</span>"])),o,C):e.get("selectorsAdd")||be,C=w&&be?be:C,C+=ae?H(Uh||(Uh=lm(['<span class="','sel-state">:',"</span>"],['<span class="','sel-state">:',"</span>"])),o,ae):"",C=b?b({result:C,state:ae,target:e}):C}return C&&'<span class="'.concat(o,'sel">').concat(C,"</span>")},a.prototype.stateChanged=function(e){this.em.set("state",e.target.value)},a.prototype.addNewTag=function(e){var r=e.trim();r&&(this.module.addSelected({label:r}),this.endNewTag())},a.prototype.addToClasses=function(e,r){var o=r,c=this.getClasses(),g=new Gc({model:e,config:this.config,coll:this.collection,module:this.module}).render().el;return o?o.appendChild(g):c.append(g),g},a.prototype.renderClasses=function(){var e=this,r=document.createDocumentFragment(),o=this.getClasses();o.empty(),this.collection.each(function(c){return e.addToClasses(c,r)}),o.append(r)},a.prototype.getClasses=function(){return this.$el.find("[data-selectors]")},a.prototype.getStates=function(){if(!this.$states){var e=this.$el.find("[data-states]");this.$states=e[0]&&e}return this.$states},a.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find("#"+this.stateInputC)),this.$statesC},a.prototype.renderStates=function(){var r=this.module,o=this.em,c=o.t("selectorManager.emptyState"),g=r.getStates().map(function(w){var C=o.t("selectorManager.states.".concat(w.id))||w.getLabel()||w.id;return'<option value="'.concat(w.id,'">').concat(C,"</option>")}).join(""),b=this.getStates();b&&b.html('<option value="">'.concat(c,"</option>").concat(g)),this.checkStates()},a.prototype.render=function(){var e=this,r=e.em,o=e.pfx,c=e.ppfx,g=e.config,b=e.$el,w=e.el,C=g.render,ae={iconSync:g.iconSync,iconAdd:g.iconAdd,labelHead:r.t("selectorManager.label"),labelInfo:r.t("selectorManager.selected"),ppfx:c,pfx:o,el:w};b.html(this.template(ae));var be=C&&C(ae);return be&&be!==w&&b.empty().append(be),this.$input=b.find("[data-input]"),this.$addBtn=b.find("[data-add]"),this.$classes=b.find("#"+o+"tags-c"),this.$btnSyncEl=b.find("[data-sync-style]"),this.$input.hide(),this.renderStates(),this.renderClasses(),b.attr("class","".concat(this.className," ").concat(c,"one-bg ").concat(c,"two-color")),this},a}(L.Ss);const Zy=U_;var B_,Lv,W_,Jg,Uh,jf=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),af=function(){return af=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},af.apply(this,arguments)},Z_=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},Yg=function(d){return(0,x.isString)(d)&&"#"==d[0]},gu=function(d){return(0,x.isString)(d)&&"."==d[0]},sf="selector",Bh="".concat(sf,":"),K_="".concat(Bh,"add"),Iv="".concat(Bh,"update"),Cg="".concat(Bh,"remove"),V_="".concat(Cg,":before"),Ky="".concat(Bh,"custom"),Vy="".concat(Bh,"state"),Rv={all:sf,update:Iv,add:K_,remove:Cg,removeBefore:V_,state:Vy,custom:Ky},Fv=function(d){function a(e){var r=d.call(this,e,"SelectorManager",new Mu([]),Rv,{stylePrefix:"clm-",appendTo:"",selectors:[],states:[{name:"hover"},{name:"active"},{name:"nth-of-type(2n)"}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1},{skipListen:!0})||this;r.Selector=oc,r.Selectors=Mu,r.storageKey="",(0,x.bindAll)(r,"__updateSelectedByComponents");var o=r.config,c=o.pStylePrefix;c&&(o.stylePrefix=c+o.stylePrefix),r.all=new Mu(o.selectors),r.selected=new Mu([],{em:e,config:o}),r.states=new L.pM(o.states.map(function(w){return new kv(w)}),{model:kv}),r.model=new L.Kx({cFirst:o.componentFirst,_undo:!0}),r.__update=(0,x.debounce)(function(){return r.__trgCustom()},0),r.__initListen({collections:[r.states,r.selected],propagate:[{entity:r.states,event:r.events.state}]}),e.on("change:state",function(w,C){return e.trigger(Vy,C)}),r.model.on("change:cFirst",function(w,C){return e.trigger("selector:type",C)});var g="".concat(gt.I.update,":classes");e.on("component:toggled ".concat(g),r.__updateSelectedByComponents);var b="component:toggled ".concat(g," change:device styleManager:update selector:state selector:type style:target");return r.model.listenTo(e,b,function(){return r.__update()}),r}return jf(a,d),a.prototype.__trgCustom=function(e){this.em.trigger(this.events.custom,this.__customData(e))},a.prototype.getAll=function(e){return void 0===e&&(e={}),this.all?e.array?Z_([],this.all.models,!0):this.all:[]},a.prototype.__customData=function(e){return void 0===e&&(e={}),this.__ctn=this.__ctn||e.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},a.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},a.prototype.select=function(e,r){void 0===r&&(r={});var o=Array.isArray(e)?e:[e],c=this.em.Styles.select(o,r);this.selected.reset(this.__getCommonSelectors(c));var g=this.selectorTags,b=c.filter(function(w){return w}).map(function(w){return(0,z.isComponent)(w)||(0,z.isRule)(w)&&!w.get("selectorsAdd")?w:w.getSelectorsString()});return g&&g.componentChanged({targets:b}),this},a.prototype.addSelector=function(e,r,o){void 0===r&&(r={}),void 0===o&&(o={});var c=af({},r);(0,x.isObject)(e)?c=e:c.name=e,Yg(c.name)?(c.name=c.name.substr(1),c.type=oc.TYPE_ID):gu(c.name)&&(c.name=c.name.substr(1)),c.label&&!c.name&&(c.name=this.escapeName(c.label));var g=c.name,b=this.getConfig(),C=this.all,B=this.em,ne=g?this.get(g,c.type):C.where(c)[0];if(!ne){var ae=c instanceof oc?c:new oc(c,af(af({},o),{config:b,em:B}));return C.add(ae,o)}return ne},a.prototype.getSelector=function(e,r){return void 0===r&&(r=oc.TYPE_CLASS),Yg(e)?(e=e.substr(1),r=oc.TYPE_ID):gu(e)&&(e=e.substr(1)),this.all.where({name:e,type:r})[0]},a.prototype.add=function(e,r){var o=this;void 0===r&&(r={});var c=(0,x.isString)(e)?{}:r;return(0,x.isArray)(e)?e.map(function(g){return o.addSelector(g,r,c)}):this.addSelector(e,r,c)},a.prototype.addClass=function(e){var r=this,o=[];return(0,x.isString)(e)&&(e=e.trim().split(" ")),e.forEach(function(c){return o.push(r.addSelector(c))}),o},a.prototype.get=function(e,r){var o=this;if((0,x.isArray)(e)){var c=[];return e.map(function(b){return o.getSelector(b)}).filter(Boolean).forEach(function(b){return c.indexOf(b)<0&&c.push(b)}),c}return this.getSelector(e,r)},a.prototype.remove=function(e,r){return this.__remove(e,r)},a.prototype.rename=function(e,r,o){var c=this.escapeName(r);return this.get(c)||e.set({name:c,label:r},o)},a.prototype.setState=function(e){return this.em.setState(e),this},a.prototype.getState=function(){return this.em.getState()},a.prototype.getStates=function(){return Z_([],this.states.models,!0)},a.prototype.setStates=function(e,r){return this.states.reset(e.map(function(o){return new kv(o)}),r)},a.prototype.getSelected=function(){return this.__getCommon()},a.prototype.getSelectedAll=function(){return Z_([],this.selected.models,!0)},a.prototype.addSelected=function(e){var r=this.add(e);this.em.getSelectedAll().forEach(function(o){o.getSelectors().add(r)})},a.prototype.removeSelected=function(e){this.em.getSelectedAll().forEach(function(r){!e.get("protected")&&r&&r.getSelectors().remove(e)})},a.prototype.duplicateSelected=function(e,r){var o=this;void 0===r&&(r={});var c=this.em,g=this.getSelected();if(!(g.indexOf(e)<0)){var b=this.getState(),w=c.getCurrentMedia(),C=c.Css.get(g,b,w),B=C?.getStyle();c.getSelectedAll().forEach(function(ae){var be=ae.getSelectors();if(be.includes(e)){var Se=r.suffix||" copy",We=e.getLabel(),lt=o.addSelector("".concat(We).concat(Se)),Ot=be.indexOf(e);be.remove(e),be.add(lt,{at:Ot})}}),B&&c.Css.add(this.getSelected(),b,w).setStyle(B)}},a.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},a.prototype.setComponentFirst=function(e){this.getConfig().componentFirst=e,this.model.set({cFirst:e})},a.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},a.prototype.escapeName=function(e){var r=this.getConfig().escapeName;return r?r(e):oc.escapeName(e)},a.prototype.render=function(e){var r=this.selectorTags,o=this.getConfig(),c=r?.el;return this.selected.reset(e),this.selectorTags=new Zy({el:c,collection:this.selected,module:this,config:o}),this.selectorTags.render().el},a.prototype.destroy=function(){var r=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),r?.remove(),this.selectorTags=void 0},a.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},a.prototype.__getCommonSelectors=function(e,r){void 0===r&&(r={});var o=e.map(function(c){return c.getSelectors&&c.getSelectors().getValid(r)}).filter(Boolean);return this.__common.apply(this,o)},a.prototype.__common=function(){for(var e=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return r.length?1===r.length?r[0]:2===r.length?r[0].filter(function(c){return r[1].indexOf(c)>=0}):r.slice(1).reduce(function(c,g){return e.__common(c,g)},r[0]):[]},a.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},a}(je);const cm=Fv;var dh,Eg=((dh={})[4]="media",dh[5]="font-face",dh[6]="page",dh[7]="keyframes",dh[11]="counter-style",dh[12]="supports",dh[13]="document",dh[14]="font-feature-values",dh[15]="viewport",dh),zy=(0,x.keys)(Eg),z_=[5,6,11,15],Cb=zy.filter(function(d){return z_.indexOf(Number(d))<0}).map(function(d){return Eg[d]}).concat(["container","layer"]),Hy=z_.map(function(d){return Eg[d]}),Qg=function(d){void 0===d&&(d="");for(var a=[],e=[],r=d.split(","),o=0,c=r.length;o<c;o++){var g=r[o].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(g)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(g)){var b=g.split(".").filter(Boolean);e.push(b)}else a.push(g)}return{result:e,add:a}},Gy=function(d){for(var a=d.style,e={},r=0,o=a.length;r<o;r++){var c=a[r],g=a.getPropertyValue(c),b=a.getPropertyPriority(c);e[c]="".concat(g).concat(b?" !".concat(b):"")}return e},um=function(d){return(d.conditionText||d.media&&d.media.mediaText||d.name||d.selectorText||"").trim()},Og=function(d,a,e){void 0===a&&(a={}),void 0===e&&(e={});var r={},o=d.length,c=d[o-1],g=c?c.split(/:(.+)/):[],b=g[1],w=e.atRule,C=e.selectorsAdd,B=e.mediaText;return Hy.indexOf(w)>=0&&(r.singleAtRule=!0),w&&(r.atRuleType=w),C&&(r.selectorsAdd=C),B&&(r.mediaText=B),b&&(d[o-1]=g[0],r.state=b,g.splice(g.length-1,1)),r.selectors=d,r.style=a,r},qy=function(d){var a=d.cssText,e=void 0===a?"":a;return Cb.find(function(r){return 0===e.indexOf("@".concat(r))})},Nv=function(d){for(var a=[],e=d.cssRules||[],r=0,o=e.length;r<o;r++){var c=e[r],g=c.type,b=!1,w="",C="",B=c.selectorText||c.keyText||"",ne=z_.indexOf(g)>=0;if(ne)b=!0,w=Eg[g],C=um(c);else if(zy.indexOf("".concat(g))>=0||!g&&qy(c)){var ae=Nv(c),be=Eg[g]||qy(c);C=um(c);for(var Se=0,We=ae.length;Se<We;Se++){var lt=ae[Se];C&&(lt.mediaText=C),lt.atRuleType=be}a=a.concat(ae)}if(B||ne){for(var Ot=Gy(c),ur=Qg(B),Gt=ur.add,ar=ur.result,Fn=void 0,fo=0,ti=ar.length;fo<ti;fo++){var jn=Og(ar[fo],Ot,{atRule:Eg[g]});a.push(jn),Fn=jn}if(Gt.length){var Nr=Gt.join(", ");Fn?Fn.selectorsAdd=Nr:(jn={selectors:[],selectorsAdd:Nr,style:Ot},b&&(jn.singleAtRule=b),w&&(jn.atRuleType=w),C&&(jn.mediaText=C),a.push(jn))}}}return a};var Je=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yt=function(){return yt=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},yt.apply(this,arguments)},It=function(d){function a(e){var r=d.call(this,e,"Parser",{textTags:["br","b","i","u","a","ul","ol"],textTypes:["text","textnode","comment"],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:"text/html",allowScripts:!1,allowUnsafeAttr:!1,allowUnsafeAttrValue:!1,keepEmptyTextNodes:!1}})||this;r.events=Jt;var o=r.config;return r.parserCss=function(d,a){return void 0===a&&(a={}),{parse:function(e,r){var o=this;void 0===r&&(r={});var C,c=[],g=a.parserCss,b=d?.Editor,w=[],B=d?.Parser,ne={input:e};B?.__emitEvent(Jt.cssBefore,ne);var ae=ne.input;try{w=g?g(ae,b):function(d){var a=document.createElement("style");a.innerHTML=d,document.head.appendChild(a);var e=a.sheet;return document.head.removeChild(a),e?Nv(e):[]}(ae)}catch(be){if(C=be,r.throwOnError)throw be}return w.forEach(function(be){return c=c.concat(o.checkNode(be))}),B?.__emitEvent(Jt.css,{input:ae,output:c,nodes:w,error:C}),c},checkNode:function(e){var r=e.selectors,o=e.style,c=[e];if((0,x.isString)(r)){var g=[],b=e,w=Qg(r),C=w.result,B=w.add.join(", "),ne={atRule:b.atRule,mediaText:b.params};C.length?C.forEach(function(be){g.push(Og(be,o,ne))}):g.push(Og([],o,ne)),B&&(g[g.length-1].selectorsAdd=B),c=g}return c}}}(e,o),r.parserHtml=Ka(e,o),r}return Je(a,d),a.prototype.parseHtml=function(e,r){void 0===r&&(r={});var g=this.parserHtml;return g.compTypes=this.em.Components.getTypes()||[],g.parse(e,this.parserCss,r)},a.prototype.parseCss=function(e){return this.parserCss.parse(e)},a.prototype.__emitEvent=function(e,r){var c=this.em,g=this.events;c.trigger(e,r),c.trigger(g.all,yt({event:e},r))},a.prototype.destroy=function(){},a}(Oe);const Ut=It;var xr=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},yn=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}},bo=function(){function d(){}return d.prototype.store=function(a){return xr(this,arguments,void 0,function(e,r){return void 0===r&&(r={}),yn(this,function(o){return this.hasLocal(r,!0)&&localStorage.setItem(r.key,JSON.stringify(e)),[2,e]})})},d.prototype.load=function(){return xr(this,arguments,void 0,function(a){var e;return void 0===a&&(a={}),yn(this,function(r){return e={},this.hasLocal(a,!0)&&(e=JSON.parse(localStorage.getItem(a.key)||"{}")),[2,e]})})},d.prototype.hasLocal=function(a,e){if(void 0===a&&(a={}),a.checkLocal&&(!(0,z.hasWin)()||!localStorage)){if(e)throw new Error("localStorage not available");return!1}return!0},d}();const vo=bo;function Bn(d){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(d)}function _i(d,a){this.name="AggregateError",this.errors=d,this.message=a||""}_i.prototype=Error.prototype;var za=setTimeout;function ya(d){return!!(d&&typeof d.length<"u")}function ks(){}function Ps(d){if(!(this instanceof Ps))throw new TypeError("Promises must be constructed via new");if("function"!=typeof d)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],ol(d,this)}function sc(d,a){for(;3===d._state;)d=d._value;0!==d._state?(d._handled=!0,Ps._immediateFn(function(){var e=1===d._state?a.onFulfilled:a.onRejected;if(null!==e){var r;try{r=e(d._value)}catch(o){return void sl(a.promise,o)}Wl(a.promise,r)}else(1===d._state?Wl:sl)(a.promise,d._value)})):d._deferreds.push(a)}function Wl(d,a){try{if(a===d)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"===Bn(a)||"function"==typeof a)){var e=a.then;if(a instanceof Ps)return d._state=3,d._value=a,void hc(d);if("function"==typeof e)return void ol(function La(d,a){return function(){d.apply(a,arguments)}}(e,a),d)}d._state=1,d._value=a,hc(d)}catch(r){sl(d,r)}}function sl(d,a){d._state=2,d._value=a,hc(d)}function hc(d){2===d._state&&0===d._deferreds.length&&Ps._immediateFn(function(){d._handled||Ps._unhandledRejectionFn(d._value)});for(var a=0,e=d._deferreds.length;a<e;a++)sc(d,d._deferreds[a]);d._deferreds=null}function xc(d,a,e){this.onFulfilled="function"==typeof d?d:null,this.onRejected="function"==typeof a?a:null,this.promise=e}function ol(d,a){var e=!1;try{d(function(r){e||(e=!0,Wl(a,r))},function(r){e||(e=!0,sl(a,r))})}catch(r){if(e)return;e=!0,sl(a,r)}}Ps.prototype.catch=function(d){return this.then(null,d)},Ps.prototype.then=function(d,a){var e=new this.constructor(ks);return sc(this,new xc(d,a,e)),e},Ps.prototype.finally=function xi(d){var a=this.constructor;return this.then(function(e){return a.resolve(d()).then(function(){return e})},function(e){return a.resolve(d()).then(function(){return a.reject(e)})})},Ps.all=function(d){return new Ps(function(a,e){if(!ya(d))return e(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(d);if(0===r.length)return a([]);var o=r.length;function c(b,w){try{if(w&&("object"===Bn(w)||"function"==typeof w)){var C=w.then;if("function"==typeof C)return void C.call(w,function(B){c(b,B)},e)}r[b]=w,0==--o&&a(r)}catch(B){e(B)}}for(var g=0;g<r.length;g++)c(g,r[g])})},Ps.any=function ki(d){var a=this;return new a(function(e,r){if(!(d&&typeof d.length<"u"))return r(new TypeError("Promise.any accepts an array"));var o=Array.prototype.slice.call(d);if(0===o.length)return r();for(var c=[],g=0;g<o.length;g++)try{a.resolve(o[g]).then(e).catch(function(b){c.push(b),c.length===o.length&&r(new _i(c,"All promises were rejected"))})}catch(b){r(b)}})},Ps.allSettled=function xn(d){return new this(function(e,r){if(!(d&&typeof d.length<"u"))return r(new TypeError(Bn(d)+" "+d+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(d);if(0===o.length)return e([]);var c=o.length;function g(w,C){if(C&&("object"===Bn(C)||"function"==typeof C)){var B=C.then;if("function"==typeof B)return void B.call(C,function(ne){g(w,ne)},function(ne){o[w]={status:"rejected",reason:ne},0==--c&&e(o)})}o[w]={status:"fulfilled",value:C},0==--c&&e(o)}for(var b=0;b<o.length;b++)g(b,o[b])})},Ps.resolve=function(d){return d&&"object"===Bn(d)&&d.constructor===Ps?d:new Ps(function(a){a(d)})},Ps.reject=function(d){return new Ps(function(a,e){e(d)})},Ps.race=function(d){return new Ps(function(a,e){if(!ya(d))return e(new TypeError("Promise.race accepts an array"));for(var r=0,o=d.length;r<o;r++)Ps.resolve(d[r]).then(a,e)})},Ps._immediateFn="function"==typeof setImmediate&&function(d){setImmediate(d)}||function(d){za(d,0)},Ps._unhandledRejectionFn=function(a){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};const qc=Ps;(0,z.hasWin)()&&(window.Promise=window.Promise||qc);const tp="function"==typeof fetch?fetch.bind():function(d,a){return new qc(function(e,r){var o=new XMLHttpRequest;for(var c in o.open(a.method||"get",d),o.withCredentials="include"==a.credentials,a.headers||{})o.setRequestHeader(c,a.headers[c]);o.onload=function(g){return e({status:o.status,statusText:o.statusText,text:function(){return qc.resolve(o.responseText)}})},o.onerror=r,o.upload&&a.onProgress&&(o.upload.onprogress=a.onProgress),a.body?o.send(a.body):o.send()})};var su=function(){return su=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},su.apply(this,arguments)},rp=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},tc=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}},Bp=function(){function d(){}return d.prototype.store=function(a){return rp(this,arguments,void 0,function(e,r){return void 0===r&&(r={}),tc(this,function(o){switch(o.label){case 0:return[4,this.request(r.urlStore,this.__props(r,e),r)];case 1:return[2,o.sent()]}})})},d.prototype.load=function(){return rp(this,arguments,void 0,function(a){return void 0===a&&(a={}),tc(this,function(e){switch(e.label){case 0:return[4,this.request(a.urlLoad,this.__props(a),a)];case 1:return[2,e.sent()]}})})},d.prototype.request=function(a,e,r){return void 0===e&&(e={}),void 0===r&&(r={}),tp(a,e).then(function(o){var c=o.text();return 1==(o.status/200|0)?c:c.then(Promise.reject)}).then(function(o){var c=o&&(0,x.isString)(o);return r.contentTypeJson&&c?JSON.parse(o):o})},d.prototype.__props=function(a,e){void 0===a&&(a={});var w,r=a.contentTypeJson,o=a.headers||{},c=a.fetchOptions||{},g="X-Requested-With",b="Content-Type";if((0,x.isUndefined)(o[g])&&(o[g]="XMLHttpRequest"),(0,x.isUndefined)(o[b])&&r&&(o[b]="application/json; charset=utf-8"),e)if(r)w=JSON.stringify(e);else for(var C in w=new FormData,e)w.append(C,e[C]);var B={method:w?"POST":"GET",credentials:a.credentials,headers:o,body:w};return su(su({},B),(0,x.isFunction)(c)?c(B):c)},d}();const Wp=Bp;var Xu=function(d){return d.start="storage:start",d.startStore="storage:start:store",d.startLoad="storage:start:load",d.load="storage:load",d.store="storage:store",d.after="storage:after",d.afterStore="storage:after:store",d.afterLoad="storage:after:load",d.end="storage:end",d.endStore="storage:end:store",d.endLoad="storage:end:load",d.error="storage:error",d.errorStore="storage:error:store",d.errorLoad="storage:error:load",d}(Xu||{});const rc=Xu;var _p=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ed=function(){return ed=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ed.apply(this,arguments)},lf=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},vu=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}},Nf="local",Dg=function(d){function a(e){var r=d.call(this,e,"StorageManager",{id:"gjs-",type:"local",autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(d){return d},onLoad:function(d){return d},options:{local:{key:"gjsProject",checkLocal:!0},remote:{headers:{},urlStore:"",urlLoad:"",contentTypeJson:!0,fetchOptions:"",credentials:"include",onStore:function(d){return d},onLoad:function(d){return d}}}})||this;r.storages={},r.events=rc;var o=r.config;return o._disable&&(o.type=void 0),r.storages={},r.add(Nf,new vo),r.add("remote",new Wp),r.setCurrent(o.type),r}return _p(a,d),a.prototype.isAutosave=function(){return!!this.config.autosave},a.prototype.setAutosave=function(e){return this.config.autosave=!!e,this},a.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},a.prototype.setStepsBeforeSave=function(e){return this.config.stepsBeforeSave=e,this},a.prototype.add=function(e,r){return this.storages[e]=r,this},a.prototype.get=function(e){return this.storages[e]},a.prototype.getStorages=function(){return this.storages},a.prototype.getCurrent=function(){return this.config.currentStorage},a.prototype.setCurrent=function(e){return this.getConfig().currentStorage=e,this},a.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},a.prototype.getStorageOptions=function(e){return this.getCurrentOptions(e)},a.prototype.store=function(e){return lf(this,arguments,void 0,function(r,o){var c,g,b,w,B;return void 0===o&&(o={}),vu(this,function(ne){switch(ne.label){case 0:c=this.getCurrentStorage(),g=ed(ed({},this.getCurrentOptions()),o),b=this.getRecoveryStorage(),w=this.getCurrentOptions(Nf),ne.label=1;case 1:return ne.trys.push([1,5,,9]),[4,this.__exec(c,g,r)];case 2:return ne.sent(),b?[4,this.__exec(b,w,{})]:[3,4];case 3:ne.sent(),ne.label=4;case 4:return[3,9];case 5:return B=ne.sent(),b?[4,this.__exec(b,w,r)]:[3,7];case 6:return ne.sent(),[3,8];case 7:throw B;case 8:return[3,9];case 9:return[2,r]}})})},a.prototype.load=function(){return lf(this,arguments,void 0,function(e){var r,o,c,g,b;return void 0===e&&(e={}),vu(this,function(C){switch(C.label){case 0:return r=this.getCurrentStorage(),o=ed(ed({},this.getCurrentOptions()),e),(c=this.getRecoveryStorage())?[4,this.__exec(c,this.getCurrentOptions(Nf))]:[3,5];case 1:if(b=C.sent(),(0,x.isEmpty)(b))return[3,5];C.label=2;case 2:return C.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return C.sent(),g=b,[3,5];case 4:return C.sent(),[3,5];case 5:return g?[3,7]:[4,this.__exec(r,o)];case 6:g=C.sent(),C.label=7;case 7:return[2,g||{}]}})})},a.prototype.__askRecovery=function(){var e=this.em,r=this.getRecovery();return new Promise(function(o,c){(0,x.isFunction)(r)?r(o,c,e?.getEditor()):confirm(e?.t("storageManager.recover"))?o(null):c()})},a.prototype.getRecovery=function(){return this.config.recovery},a.prototype.getRecoveryStorage=function(){return this.getRecovery()&&"remote"===this.getCurrent()&&this.get(Nf)},a.prototype.__exec=function(e,r,o){return lf(this,void 0,void 0,function(){var c,g,b,w,C,B,ne,ae,be,Se,We,lt,Ot,ur;return vu(this,function(Gt){switch(Gt.label){case 0:if(c=o?"store":"load",g=this.getConfig(),b=g.onStore,w=g.onLoad,!e)return[2,o||{}];this.onStart(c,o),Gt.label=1;case 1:return Gt.trys.push([1,14,,15]),B=null===(ur=this.em)||void 0===ur?void 0:ur.getEditor(),ne=void 0,o?(be=b)?[4,b(o,B)]:[3,3]:[3,7];case 2:be=Gt.sent(),Gt.label=3;case 3:return ae=be||o,(Se=r.onStore)?[4,r.onStore(ae,B)]:[3,5];case 4:Se=Gt.sent(),Gt.label=5;case 5:return[4,e.store(ae=Se||ae,r)];case 6:return ne=Gt.sent(),C=o,[3,13];case 7:return[4,e.load(r)];case 8:return ne=Gt.sent(),C=this.__clearKeys(ne),(We=r.onLoad)?[4,r.onLoad(C,B)]:[3,10];case 9:We=Gt.sent(),Gt.label=10;case 10:return C=We||C,(lt=w)?[4,w(C,B)]:[3,12];case 11:lt=Gt.sent(),Gt.label=12;case 12:C=lt||C,Gt.label=13;case 13:return this.onAfter(c,C,ne),this.onEnd(c,C,ne),[3,15];case 14:throw Ot=Gt.sent(),this.onError(c,Ot),Ot;case 15:return[2,C]}})})},a.prototype.__clearKeys=function(e){void 0===e&&(e={});var r=this.getConfig(),o=new RegExp("^".concat(r.id)),c={};for(var g in e)c[g.replace(o,"")]=e[g];return c},a.prototype.getCurrentOptions=function(e){var r=this.getConfig(),o=e||this.getCurrent();return r.options[o]||{}},a.prototype.onStart=function(e,r){var o=this.em;if(o){var c="load"===e?rc.startLoad:rc.startStore;o.trigger(rc.start,e,r),o.trigger(c,r)}},a.prototype.onAfter=function(e,r,o){var c=this.em;if(c){var g="load"===e?rc.afterLoad:rc.afterStore;c.trigger(rc.after),c.trigger(g,r,o),c.trigger("load"===e?rc.load:rc.store,r,o)}},a.prototype.onEnd=function(e,r,o){var c=this.em;if(c){var g="load"===e?rc.endLoad:rc.endStore;c.trigger(rc.end,e,r,o),c.trigger(g,r,o)}},a.prototype.onError=function(e,r){var o=this.em;if(o){var c="load"===e?rc.errorLoad:rc.errorStore;o.trigger(rc.error,r,e),o.trigger(c,r),this.onEnd(e,r)}},a.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},a.prototype.destroy=function(){this.storages={}},a}(Oe);const Zh=Dg;var H_=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),tg=function(){return tg=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},tg.apply(this,arguments)},ev=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;r.events={},r.appendInput=!0;var o=e.config,c=void 0===o?{}:o,b=r.model,w=r.eventCapture,C=b.target,B=b.attributes.type;return r.config=c,r.em=c.em,r.pfx=c.stylePrefix||"",r.ppfx=c.pStylePrefix||"",r.target=C,r.className=r.pfx+"trait",r.clsField="".concat(r.ppfx,"field ").concat(r.ppfx,"field-").concat(B),[["change:value",r.onValueChange],["remove",r.removeView]].forEach(function(ae){var be=ae[0],Se=ae[1];b.off(be,Se),r.listenTo(b,be,Se)}),b.view=r,r.listenTo(b,"change:label",r.render),r.listenTo(b,"change:placeholder",r.rerender),r.events={},w.forEach(function(ae){return r.events[ae]="onChange"}),r.delegateEvents(),r.init(),r}return H_(a,d),a.prototype.attributes=function(){return this.model.get("attributes")||{}},a.prototype.templateLabel=function(e){var r=this.ppfx,o=this.getLabel();return'<div class="'.concat(r,'label" title="').concat(o,'">').concat(o,"</div>")},a.prototype.templateInput=function(e){return'<div class="'.concat(this.clsField,'" data-input></div>')},a.prototype.getClbOpts=function(){return{component:this.target,trait:this.model,elInput:this.getInputElem()}},a.prototype.removeView=function(){this.remove(),this.removed()},a.prototype.init=function(){},a.prototype.removed=function(){},a.prototype.onRender=function(e){},a.prototype.onUpdate=function(e){},a.prototype.onEvent=function(e){},a.prototype.onChange=function(e){var r=this.getInputElem();r&&!(0,x.isUndefined)(r.value)&&this.model.set("value",r.value),this.onEvent(tg(tg({},this.getClbOpts()),{event:e}))},a.prototype.getValueForTarget=function(){return this.model.get("value")},a.prototype.setInputValue=function(e){var r=this.getInputElem();r&&(r.value=e)},a.prototype.onValueChange=function(e,r,o){void 0===o&&(o={});var c=this.model,g=this.getValueForTarget();o.fromTarget?(this.setInputValue(g),this.postUpdate()):c.setValue(g,o)},a.prototype.renderLabel=function(){var r=this.$el,o=this.target,c=this.getLabel(),g=this.templateLabel(o);this.createLabel&&(g=this.createLabel({label:c,component:o,trait:this})||""),r.find("[data-label]").append(g)},a.prototype.getLabel=function(){var r=this.model.attributes,o=r.label,c=r.name;return this.em.t("traitManager.traits.labels.".concat(c))||(0,z.capitalize)(o||c).replace(/-/g," ")},a.prototype.getComponent=function(){return this.target},a.prototype.getInputEl=function(){if(!this.$input){var r=this.em,o=this.model,c=o,g=o.attributes.name,b=c.get("placeholder")||c.get("default")||"",w=c.get("type")||"text",C=c.get("min"),B=c.get("max"),ne=this.getModelValue(),ae=(0,T.default)('<input type="'.concat(w,'">')),be=r.t("traitManager.traits.attributes.".concat(g))||{};ae.attr(tg({placeholder:b},be)),(0,x.isUndefined)(ne)||(c.set({value:ne},{silent:!0}),ae.prop("value",ne)),C&&ae.prop("min",C),B&&ae.prop("max",B),this.$input=ae}return this.$input.get(0)},a.prototype.getInputElem=function(){var o=this.$input;return this.input||o&&o.get&&o.get(0)||this.getElInput()},a.prototype.getModelValue=function(){return this.model.getValue()},a.prototype.getElInput=function(){return this.elInput},a.prototype.renderField=function(){var e=this,o=e.appendInput,c=e.model,g=e.$el.find("[data-input]"),b=g[g.length-1],w=c.el;w||(w=this.createInput?this.createInput(this.getClbOpts()):this.getInputEl()),(0,x.isString)(w)?(b.innerHTML=w,this.elInput=b.firstChild):(o?b.appendChild(w):b.insertBefore(w,b.firstChild),this.elInput=w),c.el=this.elInput},a.prototype.hasLabel=function(){return!this.noLabel&&!1!==this.model.attributes.label},a.prototype.rerender=function(){delete this.model.el,this.render()},a.prototype.postUpdate=function(){this.onUpdate(this.getClbOpts())},a.prototype.render=function(){var e=this,r=e.$el,o=e.pfx,c=e.ppfx,b=e.model.attributes,w=b.type,C=b.id,B=this.hasLabel&&this.hasLabel(),ne="".concat(o,"trait");delete this.$input;var ae='<div class="'.concat(ne," ").concat(ne,"--").concat(w,'">\n      ').concat(B?'<div class="'.concat(c,'label-wrp" data-label></div>'):"",'\n      <div class="').concat(c,"field-wrp ").concat(c,"field-wrp--").concat(w,'" data-input>\n        ').concat(this.templateInput?(0,x.isFunction)(this.templateInput)?this.templateInput(this.getClbOpts()):this.templateInput:"","\n      </div>\n    </div>");return r.empty().append(ae),B&&this.renderLabel(),this.renderField(),this.el.className="".concat(ne,"__wrp ").concat(ne,"__wrp-").concat(C),this.postUpdate(),this.onRender(this.getClbOpts()),this},a}(L.Ss);const cf=ev;ev.prototype.eventCapture=["change"];var Tg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Uf=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Tg(a,d),a.prototype.templateInput=function(){return""},a.prototype.onChange=function(){this.handleClick()},a.prototype.handleClick=function(){this.model.runCommand()},a.prototype.renderLabel=function(){this.model.get("label")&&cf.prototype.renderLabel.apply(this)},a.prototype.getInputEl=function(){var o=this.ppfx,c=this.model.props(),w=c.full,C=c.labelButton||c.text,B="".concat(o,"btn");return'<button type="button" class="'.concat(B,"-prim").concat(w?" ".concat(B,"--full"):"",'">').concat(C,"</button>")},a}(cf);const Sg=Uf;Uf.prototype.eventCapture=["click button"];var Pg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$y=function(d){function a(){var e=null!==d&&d.apply(this,arguments)||this;return e.appendInput=!1,e}return Pg(a,d),a.prototype.templateInput=function(){var r=this.ppfx;return'<label class="'.concat(this.clsField,'" data-input>\n    <i class="').concat(r,'chk-icon"></i>\n  </label>')},a.prototype.onChange=function(){this.model.set("value",this.getInputElem().checked)},a.prototype.setInputValue=function(e){var r=this.getInputElem();r&&(r.checked=!!e)},a.prototype.getInputEl=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=!this.$input,c=cf.prototype.getInputEl.apply(this,e);if(o){var g=void 0,b=void 0,C=this.model,B=this.target,ne=C.attributes.valueFalse,ae=C.getName();C.changeProp?b=g=B.get(ae):g=!(!(b=B.get("attributes")[ae])&&""!==b),!(0,x.isUndefined)(ne)&&b===ne&&(g=!1),c.checked=g}return c},a}(cf);const Uv=$y;var Mg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Bv=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this,o=e.ppfx||"";return r.opts=e,r.ppfx=o,r.em=e.target||{},!e.onChange&&r.listenTo(r.model,"change:value",r.handleModelChange),r}return Mg(a,d),a.prototype.template=function(){return'<span class="'.concat(this.holderClass(),'"></span>')},a.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},a.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},a.prototype.elementUpdated=function(){this.model.trigger("el:change")},a.prototype.setValue=function(e,r){var c=e||this.model.get("defaults"),g=this.getInputEl();g&&(g.value=c)},a.prototype.handleModelChange=function(e,r,o){this.setValue(r,o)},a.prototype.handleChange=function(e){e.stopPropagation();var r=this.getInputEl().value;this.__onInputChange(r),this.elementUpdated()},a.prototype.__onInputChange=function(e){this.model.set({value:e},{fromInput:1})},a.prototype.getInputEl=function(){if(!this.inputEl){var r=this.model,c=this.opts.type||"text",g=r.get("placeholder")||r.get("defaults")||r.get("default")||"";this.inputEl=(0,T.default)('<input type="'.concat(c,'" placeholder="').concat(g,'">'))}return this.inputEl.get(0)},a.prototype.render=function(){this.inputEl=null;var e=this.$el;return e.addClass(this.inputClass()),e.html(this.template()),e.find(".".concat(this.holderClass())).append(this.getInputEl()),this},a}(L.Ss);const Kh=Bv;Bv.prototype.events={change:"handleChange"};var tv=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rv=function(){return rv=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},rv.apply(this,arguments)};T.default&&function G_(d,a){if((0,z.hasWin)()){var e={beforeShow:be,move:be,change:be,show:be,hide:be,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],o=!!/msie/i.exec(window.navigator.userAgent),c=function(){function er(si,eo){return!!~(""+si).indexOf(eo)}var Mt=document.createElement("div").style;return Mt.cssText="background-color:rgba(0,0,0,.5)",er(Mt.backgroundColor,"rgba")||er(Mt.backgroundColor,"hsla")}(),g=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var er="";if(o)for(var un=1;un<=6;un++)er+="<div class='sp-"+un+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",er,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),Gt="spectrum.id";d.fn.spectrum=function(er,un){if("string"==typeof er){var Mt=this,si=Array.prototype.slice.call(arguments,1);return this.each(function(){var eo=r[d(this).data(Gt)];if(eo){var Si=eo[er];if(!Si)throw new Error("Spectrum: no such method: '"+er+"'");"get"==er?Mt=eo.get():"container"==er?Mt=eo.container:"option"==er?Mt=eo.option.apply(eo,si):"destroy"==er?(eo.destroy(),d(this).removeData(Gt)):Si.apply(eo,si)}}),Mt}return this.spectrum("destroy").each(function(){var Si=function ne(er,un){var Mt=function B(er,un){var Mt=d.extend({},e,er);return Mt.callbacks={move:We(Mt.move,un),change:We(Mt.change,un),show:We(Mt.show,un),hide:We(Mt.hide,un),beforeShow:We(Mt.beforeShow,un)},Mt}(un,er),si=Mt.flat,eo=Mt.showSelectionPalette,Si=Mt.localStorageKey,Ma=Mt.theme,Ia=Mt.callbacks,ca=function Ot(er,un,Mt){var si;return function(){var eo=this,Si=arguments,Ma=function(){si=null,er.apply(eo,Si)};Mt&&clearTimeout(si),(Mt||!si)&&(si=setTimeout(Ma,un))}}(Gh,10),fs=!1,bl=!1,Vl=!0,kl=0,Vu=0,ap=0,Vt=0,In=0,fi=0,pa=0,ms=0,$s=0,Ud=0,lu=1,Ru=[],zh=[],sp={},Fu=Mt.selectionPalette.slice(0),vm=Mt.maxSelectionSize,cu="sp-dragging",ju=null,zu=er.ownerDocument,nc=d(er),Hf=!1,Zs=d(b,zu).addClass(Ma),Gp=Zs.find(".sp-picker-container"),Cd=Zs.find(".sp-color"),Gf=Zs.find(".sp-dragger"),Cc=Zs.find(".sp-hue"),Ua=Zs.find(".sp-slider"),lp=Zs.find(".sp-alpha-inner"),_f=Zs.find(".sp-alpha"),Bd=Zs.find(".sp-alpha-handle"),rl=Zs.find(".sp-input"),Jc=Zs.find(".sp-palette"),_m=Zs.find(".sp-initial"),ym=Zs.find(".sp-cancel"),Ai=Zs.find(".sp-clear"),Rs=Zs.find(".sp-choose"),wh=Zs.find(".sp-palette-toggle"),At=nc.is("input"),Zr=At&&"color"===nc.attr("type")&&ur(),ii=At&&!si,Ii=ii?d(g).addClass(Ma).addClass(Mt.className).addClass(Mt.replacerClassName):d([]),Zi=ii?Ii:nc,fl=Ii.find(".sp-preview-inner"),jl=Mt.color||At&&nc.val(),Mc=!1,Uc=Mt.preferredFormat,g_=!Mt.showButtons||Mt.clickoutFiresChange,bm=!jl,xh=Mt.allowEmpty&&!Zr;function Zg(){if(Mt.showPaletteOnly&&(Mt.showPalette=!0),wh.text(Mt.showPaletteOnly?Mt.togglePaletteMoreText:Mt.togglePaletteLessText),Mt.palette){Ru=Mt.palette.slice(0),zh=d.isArray(Ru[0])?Ru:[Ru],sp={};for(var ws=0;ws<zh.length;ws++)for(var gs=0;gs<zh[ws].length;gs++){var ll=Bt(zh[ws][gs]).toRgbString();sp[ll]=!0}}Zs.toggleClass("sp-flat",si),Zs.toggleClass("sp-input-disabled",!Mt.showInput),Zs.toggleClass("sp-alpha-enabled",Mt.showAlpha),Zs.toggleClass("sp-clear-enabled",xh),Zs.toggleClass("sp-buttons-disabled",!Mt.showButtons),Zs.toggleClass("sp-palette-buttons-disabled",!Mt.togglePaletteOnly),Zs.toggleClass("sp-palette-disabled",!Mt.showPalette),Zs.toggleClass("sp-palette-only",Mt.showPaletteOnly),Zs.toggleClass("sp-initial-disabled",!Mt.showInitial),Zs.addClass(Mt.className).addClass(Mt.containerClassName),Gh()}function v_(){if(Si&&window.localStorage){try{var ws=window.localStorage[Si].split(",#");ws.length>1&&(delete window.localStorage[Si],d.each(ws,function(gs,ll){xv(ll)}))}catch{}try{Fu=window.localStorage[Si].split(";")}catch{}}}function xv(ws){if(eo){var gs=Bt(ws).toRgbString();if(!sp[gs]&&-1===d.inArray(gs,Fu))for(Fu.push(gs);Fu.length>vm;)Fu.shift();if(Si&&window.localStorage)try{window.localStorage[Si]=Fu.join(";")}catch{}}}function __(){var ws=up(),gs=d.map(zh,function(ll,Ds){return w(ll,ws,"sp-palette-row sp-palette-row-"+Ds,Mt)});v_(),Fu&&gs.push(w(function Sy(){var ws=[];if(Mt.showPalette)for(var gs=0;gs<Fu.length;gs++){var ll=Bt(Fu[gs]).toRgbString();sp[ll]||ws.push(Fu[gs])}return ws.reverse().slice(0,Mt.maxSelectionSize)}(),ws,"sp-palette-row sp-palette-row-selection",Mt)),Jc.html(gs.join(""))}function Cv(){if(Mt.showInitial){var ws=Mc,gs=up();_m.html(w([ws,gs],gs,"sp-palette-row-initial",Mt))}}function dg(){(Vu<=0||kl<=0||Vt<=0)&&Gh(),bl=!0,Zs.addClass(cu),ju=null,nc.trigger("dragstart.spectrum",[up()])}function Ev(){bl=!1,Zs.removeClass(cu),nc.trigger("dragstop.spectrum",[up()])}function Wd(){var ws=rl.val();if(null!==ws&&""!==ws||!xh){var gs=Bt(ws);gs.isValid()?(zm(gs),xm(!0)):rl.addClass("sp-validation-error")}else zm(null),xm(!0)}function cp(){fs?yf():y_()}function y_(){var ws=d.Event("beforeShow.spectrum");if(fs)Gh();else if(nc.trigger("beforeShow.spectrum",[up()]),!1!==Ia.beforeShow(up())&&!ws.isDefaultPrevented()){(function C(){for(var er=0;er<r.length;er++)r[er]&&r[er].hide()})(),fs=!0;var gs=d(zu);gs.bind("keydown.spectrum",Py),gs.bind("click.spectrum",pg),d(window).bind("resize.spectrum",ca),Ii.addClass("sp-active"),Zs.removeClass("sp-hidden"),Gh(),Hm(),Mc=up(),Cv(),Ia.show(Mc),nc.trigger("show.spectrum",[Mc])}}function Py(ws){27===ws.keyCode&&yf()}function pg(ws){2!=ws.button&&(bl||(g_?xm(!0):My(),yf()))}function yf(){!fs||si||(fs=!1,d(zu).unbind("keydown.spectrum",Py),d(zu).unbind("click.spectrum",pg),d(window).unbind("resize.spectrum",ca),Ii.removeClass("sp-active"),Zs.addClass("sp-hidden"),Ia.hide(up()),nc.trigger("hide.spectrum",[up()]))}function My(){zm(Mc,!0)}function zm(ws,gs){var ll,Ds;Bt.equals(ws,up())?Hm():(!ws&&xh?bm=!0:(bm=!1,Vl=!ws,Ds=(ll=Bt(ws)).toHsv(),ms=Ds.h%360/360,$s=Ds.s,Ud=Ds.v,lu=Ds.a),Hm(),ll&&ll.isValid()&&!gs&&(Uc=Mt.preferredFormat||ll.getFormat()))}function up(ws){return ws=ws||{},xh&&bm?null:Bt.fromRatio({h:ms,s:$s,v:Ud,a:Math.round(100*lu)/100},{format:ws.format||Uc})}function wm(){Hm(),Ia.move(up()),nc.trigger("move.spectrum",[up()])}function Hm(){rl.removeClass("sp-validation-error"),w_();var ws=Bt.fromRatio({h:ms,s:1,v:1});Cd.css("background-color",ws.toHexString());var gs=Uc;lu<1&&(0!==lu||"name"!==gs)&&("hex"===gs||"hex3"===gs||"hex6"===gs||"name"===gs)&&(gs="rgb");var ll=up({format:gs}),Ds="";if(fl.removeClass("sp-clear-display"),fl.css("background-color","transparent"),!ll&&xh)fl.addClass("sp-clear-display");else{var rd=ll.toHexString(),qh=ll.toRgbString();if(c||1===ll.alpha?fl.css("background-color",qh):(fl.css("background-color","transparent"),fl.css("filter",ll.toFilter())),Mt.showAlpha){var $h=ll.toRgb();$h.a=0;var bp=Bt($h).toRgbString(),qp="linear-gradient(left, "+bp+", "+rd+")";o?lp.css("filter",Bt(bp).toFilter({gradientType:1},rd)):(lp.css("background","-webkit-"+qp),lp.css("background","-moz-"+qp),lp.css("background","-ms-"+qp),lp.css("background","linear-gradient(to right, "+bp+", "+rd+")"))}Ds=ll.toString(gs)}Mt.showInput&&rl.val(Ds),Mt.showPalette&&__(),Cv()}function w_(){var ws=$s,gs=Ud;if(xh&&bm)Bd.hide(),Ua.hide(),Gf.hide();else{Bd.show(),Ua.show(),Gf.show();var ll=ws*kl,Ds=Vu-gs*Vu;ll=Math.max(-ap,Math.min(kl-ap,ll-ap)),Ds=Math.max(-ap,Math.min(Vu-ap,Ds-ap)),Gf.css({top:Ds+"px",left:ll+"px"}),Bd.css({left:lu*In-fi/2+"px"}),Ua.css({top:ms*Vt-pa+"px"})}}function xm(ws){var gs=up(),ll="",Ds=!!Vl||!Bt.equals(gs,Mc);gs&&(ll=gs.toString(Uc),!fs&&xv(gs)),At&&nc.val(ll),ws&&Ds&&(Ia.change(gs),nc.trigger("change",[gs]))}function Gh(){fs&&(kl=Cd.width(),Vu=Cd.height(),ap=Gf.height(),Cc.width(),Vt=Cc.height(),pa=Ua.height(),In=_f.width(),fi=Bd.width(),si||(Zs.css("position","absolute"),Zs.offset(Mt.offset?Mt.offset:function ae(er,un){for(var Mt=un[0],si=er[0],eo=si.parentElement,Si=Mt.getBoundingClientRect(),Ma=si.offsetWidth,Ia=si.offsetHeight,ca={top:0,left:0,width:Mt.offsetWidth,height:Mt.offsetHeight};Mt&&(ca.top+=Mt.offsetTop-Mt.scrollTop,ca.left+=Mt.offsetLeft-Mt.scrollLeft,Mt!==eo&&eo.contains(Mt.offsetParent));)Mt=Mt.offsetParent;return Si.right+Ma>window.innerWidth-window.scrollX&&Si.right-Ma>0&&(ca.left-=Ma-ca.width),Si.bottom+Ia<window.innerHeight-window.scrollY?ca.top+=ca.height:ca.top-=Ia,ca}(Zs,Zi))),w_(),Mt.showPalette&&__(),nc.trigger("reflow.spectrum"))}function Tv(){yf(),Hf=!0,nc.attr("disabled",!0),Zi.addClass("sp-disabled")}!function Ty(){if(o&&Zs.find("*:not(input)").attr("unselectable","on"),Zg(),ii&&nc.after(Ii).hide(),xh||Ai.hide(),si)nc.after(Zs).hide();else{var ws="parent"===Mt.appendTo?nc.parent():d(Mt.appendTo);1!==ws.length&&(ws=d("body")),ws.append(Zs)}function gs(Ds){return Ds.data&&Ds.data.ignore?(zm(d(Ds.target).closest(".sp-thumb-el").data("color")),wm()):(zm(d(Ds.target).closest(".sp-thumb-el").data("color")),wm(),Mt.hideAfterPaletteSelect&&(xm(!0),yf())),!1}v_(),Zi.bind("click.spectrum touchstart.spectrum",function(Ds){Hf||cp(),Ds.stopPropagation(),d(Ds.target).is("input")||Ds.preventDefault()}),(nc.is(":disabled")||!0===Mt.disabled)&&Tv(),Zs.click(Se),rl.change(Wd),rl.bind("paste",function(){setTimeout(Wd,1)}),rl.keydown(function(Ds){13==Ds.keyCode&&Wd()}),ym.text(Mt.cancelText),ym.bind("click.spectrum",function(Ds){Ds.stopPropagation(),Ds.preventDefault(),My(),yf()}),Ai.attr("title",Mt.clearText),Ai.bind("click.spectrum",function(Ds){Ds.stopPropagation(),Ds.preventDefault(),bm=!0,wm(),si&&xm(!0)}),Rs.text(Mt.chooseText),Rs.bind("click.spectrum",function(Ds){Ds.stopPropagation(),Ds.preventDefault(),o&&rl.is(":focus")&&rl.trigger("change"),function b_(){return!rl.hasClass("sp-validation-error")}()&&(xm(!0),yf())}),wh.text(Mt.showPaletteOnly?Mt.togglePaletteMoreText:Mt.togglePaletteLessText),wh.bind("click.spectrum",function(Ds){Ds.stopPropagation(),Ds.preventDefault(),Mt.showPaletteOnly=!Mt.showPaletteOnly,!Mt.showPaletteOnly&&!si&&Zs.css("left","-="+(Gp.outerWidth(!0)+5)),Zg()}),lt(_f,function(Ds,rd,qh){lu=Ds/In,bm=!1,qh.shiftKey&&(lu=Math.round(10*lu)/10),wm()},dg,Ev),lt(Cc,function(Ds,rd){ms=parseFloat(rd/Vt),bm=!1,Mt.showAlpha||(lu=1),wm()},dg,Ev),lt(Cd,function(Ds,rd,qh){if(qh.shiftKey){if(!ju){var bp=Vu-Ud*Vu,qp=Math.abs(Ds-$s*kl)>Math.abs(rd-bp);ju=qp?"x":"y"}}else ju=null;var hg=!ju||"y"===ju;(!ju||"x"===ju)&&($s=parseFloat(Ds/kl)),hg&&(Ud=parseFloat((Vu-rd)/Vu)),bm=!1,Mt.showAlpha||(lu=1),wm()},dg,Ev),jl?(zm(jl),Hm(),Uc=Mt.preferredFormat||Bt(jl).getFormat(),xv(jl)):Hm(),si&&y_();var ll=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Jc.delegate(".sp-thumb-el",ll,gs),_m.delegate(".sp-thumb-el:nth-child(1)",ll,{ignore:!0},gs)}();var Cm={show:y_,hide:yf,toggle:cp,reflow:Gh,option:function fg(ws,gs){return ws===a?d.extend({},Mt):gs===a?Mt[ws]:(Mt[ws]=gs,"preferredFormat"===ws&&(Uc=Mt.preferredFormat),void Zg())},enable:function Dv(){Hf=!1,nc.attr("disabled",!1),Zi.removeClass("sp-disabled")},disable:Tv,offset:function Ay(ws){Mt.offset=ws,Gh()},set:function(ws){zm(ws),xm()},get:up,destroy:function Ov(){nc.show(),Zi.unbind("click.spectrum touchstart.spectrum"),Zs.remove(),Ii.remove(),r[Cm.id]=null},container:Zs};return Cm.id=r.push(Cm)-1,Cm}(this,d.extend({},er,d(this).data()));d(this).data(Gt,Si.id)})},d.fn.spectrum.load=!0,d.fn.spectrum.loadOpts={},d.fn.spectrum.draggable=lt,d.fn.spectrum.defaults=e,d.fn.spectrum.inputTypeColorSupport=function er(){if(typeof er._cachedResult>"u"){var un=d("<input type='color'/>")[0];er._cachedResult="color"===un.type&&""!==un.value}return er._cachedResult},d.spectrum={},d.spectrum.localization={},d.spectrum.palettes={},d.fn.spectrum.processNativeColorInputs=function(){var er=d("input[type=color]");er.length&&!ur()&&er.spectrum({preferredFormat:"hex6"})};var ar=/^[\s,#]+/,Fn=/\s+$/,fo=0,ti=Math,jn=ti.round,Nr=ti.min,Dn=ti.max,ir=ti.random,Bt=function(er,un){if(un=un||{},(er=er||"")instanceof Bt)return er;if(!(this instanceof Bt))return new Bt(er,un);var Mt=function wr(er){var un={r:0,g:0,b:0},Mt=1,si=!1,eo=!1;return"string"==typeof er&&(er=function Ns(er){er=er.replace(ar,"").replace(Fn,"").toLowerCase();var Mt,un=!1;if(Ji[er])er=Ji[er],un=!0;else if("transparent"==er)return{r:0,g:0,b:0,a:0,format:"name"};return(Mt=Qs.rgb.exec(er))?{r:Mt[1],g:Mt[2],b:Mt[3]}:(Mt=Qs.rgba.exec(er))?{r:Mt[1],g:Mt[2],b:Mt[3],a:Mt[4]}:(Mt=Qs.hsl.exec(er))?{h:Mt[1],s:Mt[2],l:Mt[3]}:(Mt=Qs.hsla.exec(er))?{h:Mt[1],s:Mt[2],l:Mt[3],a:Mt[4]}:(Mt=Qs.hsv.exec(er))?{h:Mt[1],s:Mt[2],v:Mt[3]}:(Mt=Qs.hsva.exec(er))?{h:Mt[1],s:Mt[2],v:Mt[3],a:Mt[4]}:(Mt=Qs.hex8.exec(er))?{a:Qa(Mt[1]),r:Or(Mt[2]),g:Or(Mt[3]),b:Or(Mt[4]),format:un?"name":"hex8"}:(Mt=Qs.hex6.exec(er))?{r:Or(Mt[1]),g:Or(Mt[2]),b:Or(Mt[3]),format:un?"name":"hex"}:!!(Mt=Qs.hex3.exec(er))&&{r:Or(Mt[1]+""+Mt[1]),g:Or(Mt[2]+""+Mt[2]),b:Or(Mt[3]+""+Mt[3]),format:un?"name":"hex"}}(er)),"object"==typeof er&&(er.hasOwnProperty("r")&&er.hasOwnProperty("g")&&er.hasOwnProperty("b")?(un=function sr(er,un,Mt){return{r:255*it(er,255),g:255*it(un,255),b:255*it(Mt,255)}}(er.r,er.g,er.b),si=!0,eo="%"===String(er.r).substr(-1)?"prgb":"rgb"):er.hasOwnProperty("h")&&er.hasOwnProperty("s")&&er.hasOwnProperty("v")?(er.s=$n(er.s),er.v=$n(er.v),un=function _o(er,un,Mt){er=6*it(er,360),un=it(un,100),Mt=it(Mt,100);var si=ti.floor(er),eo=er-si,Si=Mt*(1-un),Ma=Mt*(1-eo*un),Ia=Mt*(1-(1-eo)*un),ca=si%6;return{r:255*[Mt,Ma,Si,Si,Ia,Mt][ca],g:255*[Ia,Mt,Mt,Ma,Si,Si][ca],b:255*[Si,Si,Ia,Mt,Mt,Ma][ca]}}(er.h,er.s,er.v),si=!0,eo="hsv"):er.hasOwnProperty("h")&&er.hasOwnProperty("s")&&er.hasOwnProperty("l")&&(er.s=$n(er.s),er.l=$n(er.l),un=function xt(er,un,Mt){var si,eo,Si;function Ma(fs,bl,Vl){return Vl<0&&(Vl+=1),Vl>1&&(Vl-=1),Vl<1/6?fs+6*(bl-fs)*Vl:Vl<.5?bl:Vl<2/3?fs+(bl-fs)*(2/3-Vl)*6:fs}if(er=it(er,360),un=it(un,100),Mt=it(Mt,100),0===un)si=eo=Si=Mt;else{var Ia=Mt<.5?Mt*(1+un):Mt+un-Mt*un,ca=2*Mt-Ia;si=Ma(ca,Ia,er+1/3),eo=Ma(ca,Ia,er),Si=Ma(ca,Ia,er-1/3)}return{r:255*si,g:255*eo,b:255*Si}}(er.h,er.s,er.l),si=!0,eo="hsl"),er.hasOwnProperty("a")&&(Mt=er.a)),Mt=Na(Mt),{ok:si,format:er.format||eo,r:Nr(255,Dn(un.r,0)),g:Nr(255,Dn(un.g,0)),b:Nr(255,Dn(un.b,0)),a:Mt}}(er);this._originalInput=er,this._r=Mt.r,this._g=Mt.g,this._b=Mt.b,this._a=Mt.a,this._roundA=jn(100*this._a)/100,this._format=un.format||Mt.format,this._gradientType=un.gradientType,this._r<1&&(this._r=jn(this._r)),this._g<1&&(this._g=jn(this._g)),this._b<1&&(this._b=jn(this._b)),this._ok=Mt.ok,this._tc_id=fo++};Bt.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var er=this.toRgb();return(299*er.r+587*er.g+114*er.b)/1e3},setAlpha:function(er){return this._a=Na(er),this._roundA=jn(100*this._a)/100,this},toHsv:function(){var er=Eo(this._r,this._g,this._b);return{h:360*er.h,s:er.s,v:er.v,a:this._a}},toHsvString:function(){var er=Eo(this._r,this._g,this._b),un=jn(360*er.h),Mt=jn(100*er.s),si=jn(100*er.v);return 1==this._a?"hsv("+un+", "+Mt+"%, "+si+"%)":"hsva("+un+", "+Mt+"%, "+si+"%, "+this._roundA+")"},toHsl:function(){var er=gn(this._r,this._g,this._b);return{h:360*er.h,s:er.s,l:er.l,a:this._a}},toHslString:function(){var er=gn(this._r,this._g,this._b),un=jn(360*er.h),Mt=jn(100*er.s),si=jn(100*er.l);return 1==this._a?"hsl("+un+", "+Mt+"%, "+si+"%)":"hsla("+un+", "+Mt+"%, "+si+"%, "+this._roundA+")"},toHex:function(er){return mi(this._r,this._g,this._b,er)},toHexString:function(er){return"#"+this.toHex(er)},toHex8:function(){return Sa(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:jn(this._r),g:jn(this._g),b:jn(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+jn(this._r)+", "+jn(this._g)+", "+jn(this._b)+")":"rgba("+jn(this._r)+", "+jn(this._g)+", "+jn(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:jn(100*it(this._r,255))+"%",g:jn(100*it(this._g,255))+"%",b:jn(100*it(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+jn(100*it(this._r,255))+"%, "+jn(100*it(this._g,255))+"%, "+jn(100*it(this._b,255))+"%)":"rgba("+jn(100*it(this._r,255))+"%, "+jn(100*it(this._g,255))+"%, "+jn(100*it(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(bs[mi(this._r,this._g,this._b,!0)]||!1)},toFilter:function(er){var un="#"+Sa(this._r,this._g,this._b,this._a),Mt=un,si=this._gradientType?"GradientType = 1, ":"";return er&&(Mt=Bt(er).toHex8String()),"progid:DXImageTransform.Microsoft.gradient("+si+"startColorstr="+un+",endColorstr="+Mt+")"},toString:function(er){var un=!!er;er=er||this._format;var Mt=!1;return!un&&this._a<1&&this._a>=0&&("hex"===er||"hex6"===er||"hex3"===er||"name"===er)?"name"===er&&0===this._a?this.toName():this.toRgbString():("rgb"===er&&(Mt=this.toRgbString()),"prgb"===er&&(Mt=this.toPercentageRgbString()),("hex"===er||"hex6"===er)&&(Mt=this.toHexString()),"hex3"===er&&(Mt=this.toHexString(!0)),"hex8"===er&&(Mt=this.toHex8String()),"name"===er&&(Mt=this.toName()),"hsl"===er&&(Mt=this.toHslString()),"hsv"===er&&(Mt=this.toHsvString()),Mt||this.toHexString())},_applyModification:function(er,un){var Mt=er.apply(null,[this].concat([].slice.call(un)));return this._r=Mt._r,this._g=Mt._g,this._b=Mt._b,this.setAlpha(Mt._a),this},lighten:function(){return this._applyModification(Oo,arguments)},brighten:function(){return this._applyModification(Li,arguments)},darken:function(){return this._applyModification(la,arguments)},desaturate:function(){return this._applyModification(Ha,arguments)},saturate:function(){return this._applyModification(Us,arguments)},greyscale:function(){return this._applyModification(yo,arguments)},spin:function(){return this._applyModification(ta,arguments)},_applyCombination:function(er,un){return er.apply(null,[this].concat([].slice.call(un)))},analogous:function(){return this._applyCombination(wn,arguments)},complement:function(){return this._applyCombination(ea,arguments)},monochromatic:function(){return this._applyCombination(Hi,arguments)},splitcomplement:function(){return this._applyCombination(Pa,arguments)},triad:function(){return this._applyCombination(is,arguments)},tetrad:function(){return this._applyCombination(ps,arguments)}},Bt.fromRatio=function(er,un){if("object"==typeof er){var Mt={};for(var si in er)er.hasOwnProperty(si)&&(Mt[si]="a"===si?er[si]:$n(er[si]));er=Mt}return Bt(er,un)},Bt.equals=function(er,un){return!(!er||!un)&&Bt(er).toRgbString()==Bt(un).toRgbString()},Bt.random=function(){return Bt.fromRatio({r:ir(),g:ir(),b:ir()})},Bt.mix=function(er,un,Mt){Mt=0===Mt?0:Mt||50;var ca,si=Bt(er).toRgb(),eo=Bt(un).toRgb(),Si=Mt/100,Ma=2*Si-1,Ia=eo.a-si.a,fs=1-(ca=((ca=Ma*Ia==-1?Ma:(Ma+Ia)/(1+Ma*Ia))+1)/2);return Bt({r:eo.r*ca+si.r*fs,g:eo.g*ca+si.g*fs,b:eo.b*ca+si.b*fs,a:eo.a*Si+si.a*(1-Si)})},Bt.readability=function(er,un){var Mt=Bt(er),si=Bt(un),eo=Mt.toRgb(),Si=si.toRgb(),Ma=Mt.getBrightness(),Ia=si.getBrightness(),ca=Math.max(eo.r,Si.r)-Math.min(eo.r,Si.r)+Math.max(eo.g,Si.g)-Math.min(eo.g,Si.g)+Math.max(eo.b,Si.b)-Math.min(eo.b,Si.b);return{brightness:Math.abs(Ma-Ia),color:ca}},Bt.isReadable=function(er,un){var Mt=Bt.readability(er,un);return Mt.brightness>125&&Mt.color>500},Bt.mostReadable=function(er,un){for(var Mt=null,si=0,eo=!1,Si=0;Si<un.length;Si++){var Ma=Bt.readability(er,un[Si]),Ia=Ma.brightness>125&&Ma.color>500,ca=Ma.brightness/125*3+Ma.color/500;(Ia&&!eo||Ia&&eo&&ca>si||!Ia&&!eo&&ca>si)&&(eo=Ia,si=ca,Mt=Bt(un[Si]))}return Mt};var Mt,si,eo,Ji=Bt.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},bs=Bt.hexNames=function Xa(er){var un={};for(var Mt in er)er.hasOwnProperty(Mt)&&(un[er[Mt]]=Mt);return un}(Ji),Qs=(si="[\\s|\\(]+("+(Mt="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Mt+")[,|\\s]+("+Mt+")\\s*\\)?",eo="[\\s|\\(]+("+Mt+")[,|\\s]+("+Mt+")[,|\\s]+("+Mt+")[,|\\s]+("+Mt+")\\s*\\)?",{rgb:new RegExp("rgb"+si),rgba:new RegExp("rgba"+eo),hsl:new RegExp("hsl"+si),hsla:new RegExp("hsla"+eo),hsv:new RegExp("hsv"+si),hsva:new RegExp("hsva"+eo),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=Bt,d(function(){d.fn.spectrum.load&&d.fn.spectrum.processNativeColorInputs()})}function w(er,un,Mt,si){for(var eo=[],Si=0;Si<er.length;Si++){var Ma=er[Si];if(Ma){var Ia=Bt(Ma),ca=Ia.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";ca+=Bt.equals(un,Ma)?" sp-thumb-active":"";var fs=Ia.toString(si.preferredFormat||"rgb"),bl=c?"background-color:"+Ia.toRgbString():"filter:"+Ia.toFilter();eo.push('<span title="'+fs+'" data-color="'+Ia.toRgbString()+'" class="'+ca+'"><span class="sp-thumb-inner" style="'+bl+';"></span></span>')}else eo.push(d("<div />").append(d('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",si.noColorSelectedText)).html())}return"<div class='sp-cf "+Mt+"'>"+eo.join("")+"</div>"}function be(){}function Se(er){er.stopPropagation()}function We(er,un){var Mt=Array.prototype.slice,si=Mt.call(arguments,2);return function(){return er.apply(un,si.concat(Mt.call(arguments)))}}function lt(er,un,Mt,si){un=un||function(){},Mt=Mt||function(){},si=si||function(){};var eo=document,Si=!1,Ma={},Ia=0,ca=0,fs="ontouchstart"in window,bl={};function Vl(Vt){Vt.stopPropagation&&Vt.stopPropagation(),Vt.preventDefault&&Vt.preventDefault(),Vt.returnValue=!1}function kl(Vt){if(Si){if(o&&eo.documentMode<9&&!Vt.button)return ap();var $r=Vt&&Vt.touches&&Vt.touches[0],fi=$r&&$r.pageY||Vt.pageY,pa=Math.max(0,Math.min(($r&&$r.pageX||Vt.pageX)-Ma.left,ca)),ms=Math.max(0,Math.min(fi-Ma.top,Ia));fs&&Vl(Vt),un.apply(er,[pa,ms,Vt])}}function ap(){Si&&(d(eo).unbind(bl),d(eo.body).removeClass("sp-dragging"),setTimeout(function(){si.apply(er,arguments)},0)),Si=!1}bl.selectstart=Vl,bl.dragstart=Vl,bl["touchmove mousemove"]=kl,bl["touchend mouseup"]=ap,d(er).bind("touchstart mousedown",function Vu(Vt){!(Vt.which?3==Vt.which:2==Vt.button)&&!Si&&!1!==Mt.apply(er,arguments)&&(Si=!0,Ia=d(er).height(),ca=d(er).width(),Ma=d(er).offset(),d(eo).bind(bl),d(eo.body).addClass("sp-dragging"),kl(Vt),Vl(Vt))})}function ur(){return d.fn.spectrum.inputTypeColorSupport()}function gn(er,un,Mt){er=it(er,255),un=it(un,255),Mt=it(Mt,255);var Si,Ma,si=Dn(er,un,Mt),eo=Nr(er,un,Mt),Ia=(si+eo)/2;if(si==eo)Si=Ma=0;else{var ca=si-eo;switch(Ma=Ia>.5?ca/(2-si-eo):ca/(si+eo),si){case er:Si=(un-Mt)/ca+(un<Mt?6:0);break;case un:Si=(Mt-er)/ca+2;break;case Mt:Si=(er-un)/ca+4}Si/=6}return{h:Si,s:Ma,l:Ia}}function Eo(er,un,Mt){er=it(er,255),un=it(un,255),Mt=it(Mt,255);var Si,Ma,si=Dn(er,un,Mt),eo=Nr(er,un,Mt),Ia=si,ca=si-eo;if(Ma=0===si?0:ca/si,si==eo)Si=0;else{switch(si){case er:Si=(un-Mt)/ca+(un<Mt?6:0);break;case un:Si=(Mt-er)/ca+2;break;case Mt:Si=(er-un)/ca+4}Si/=6}return{h:Si,s:Ma,v:Ia}}function mi(er,un,Mt,si){var eo=[Cr(jn(er).toString(16)),Cr(jn(un).toString(16)),Cr(jn(Mt).toString(16))];return si&&eo[0].charAt(0)==eo[0].charAt(1)&&eo[1].charAt(0)==eo[1].charAt(1)&&eo[2].charAt(0)==eo[2].charAt(1)?eo[0].charAt(0)+eo[1].charAt(0)+eo[2].charAt(0):eo.join("")}function Sa(er,un,Mt,si){return[Cr(Cn(si)),Cr(jn(er).toString(16)),Cr(jn(un).toString(16)),Cr(jn(Mt).toString(16))].join("")}function Ha(er,un){un=0===un?0:un||10;var Mt=Bt(er).toHsl();return Mt.s-=un/100,Mt.s=Yt(Mt.s),Bt(Mt)}function Us(er,un){un=0===un?0:un||10;var Mt=Bt(er).toHsl();return Mt.s+=un/100,Mt.s=Yt(Mt.s),Bt(Mt)}function yo(er){return Bt(er).desaturate(100)}function Oo(er,un){un=0===un?0:un||10;var Mt=Bt(er).toHsl();return Mt.l+=un/100,Mt.l=Yt(Mt.l),Bt(Mt)}function Li(er,un){un=0===un?0:un||10;var Mt=Bt(er).toRgb();return Mt.r=Dn(0,Nr(255,Mt.r-jn(-un/100*255))),Mt.g=Dn(0,Nr(255,Mt.g-jn(-un/100*255))),Mt.b=Dn(0,Nr(255,Mt.b-jn(-un/100*255))),Bt(Mt)}function la(er,un){un=0===un?0:un||10;var Mt=Bt(er).toHsl();return Mt.l-=un/100,Mt.l=Yt(Mt.l),Bt(Mt)}function ta(er,un){var Mt=Bt(er).toHsl(),si=(jn(Mt.h)+un)%360;return Mt.h=si<0?360+si:si,Bt(Mt)}function ea(er){var un=Bt(er).toHsl();return un.h=(un.h+180)%360,Bt(un)}function is(er){var un=Bt(er).toHsl(),Mt=un.h;return[Bt(er),Bt({h:(Mt+120)%360,s:un.s,l:un.l}),Bt({h:(Mt+240)%360,s:un.s,l:un.l})]}function ps(er){var un=Bt(er).toHsl(),Mt=un.h;return[Bt(er),Bt({h:(Mt+90)%360,s:un.s,l:un.l}),Bt({h:(Mt+180)%360,s:un.s,l:un.l}),Bt({h:(Mt+270)%360,s:un.s,l:un.l})]}function Pa(er){var un=Bt(er).toHsl(),Mt=un.h;return[Bt(er),Bt({h:(Mt+72)%360,s:un.s,l:un.l}),Bt({h:(Mt+216)%360,s:un.s,l:un.l})]}function wn(er,un,Mt){un=un||6,Mt=Mt||30;var si=Bt(er).toHsl(),eo=360/Mt,Si=[Bt(er)];for(si.h=(si.h-(eo*un>>1)+720)%360;--un;)si.h=(si.h+eo)%360,Si.push(Bt(si));return Si}function Hi(er,un){un=un||6;for(var Mt=Bt(er).toHsv(),si=Mt.h,eo=Mt.s,Si=Mt.v,Ma=[],Ia=1/un;un--;)Ma.push(Bt({h:si,s:eo,v:Si})),Si=(Si+Ia)%1;return Ma}function Na(er){return er=parseFloat(er),(isNaN(er)||er<0||er>1)&&(er=1),er}function it(er,un){(function An(er){return"string"==typeof er&&-1!=er.indexOf(".")&&1===parseFloat(er)})(er)&&(er="100%");var Mt=function ho(er){return"string"==typeof er&&-1!=er.indexOf("%")}(er);return er=Nr(un,Dn(0,parseFloat(er))),Mt&&(er=parseInt(er*un,10)/100),ti.abs(er-un)<1e-6?1:er%un/parseFloat(un)}function Yt(er){return Nr(1,Dn(0,er))}function Or(er){return parseInt(er,16)}function Cr(er){return 1==er.length?"0"+er:""+er}function $n(er){return er<=1&&(er=100*er+"%"),er}function Cn(er){return Math.round(255*parseFloat(er)).toString(16)}function Qa(er){return Or(er)/255}}(T.default);var Wv=function(d){var a="name"===d.getFormat()&&d.toName(),e=1==d.getAlpha()?d.toHexString():d.toRgbString();return a||e.replace(/ /g,"")},q_=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return tv(a,d),a.prototype.template=function(){var e=this.ppfx;return'\n      <div class="'.concat(this.holderClass(),'"></div>\n      <div class="').concat(e,'field-colorp">\n        <div class="').concat(e,'field-colorp-c" data-colorp-c>\n          <div class="').concat(e,'checker-bg"></div>\n        </div>\n      </div>\n    ')},a.prototype.inputClass=function(){var e=this.ppfx;return"".concat(e,"field ").concat(e,"field-color")},a.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},a.prototype.remove=function(){return d.prototype.remove.call(this),this.colorEl.spectrum("destroy"),this},a.prototype.handleChange=function(e){e.stopPropagation();var r=e.target.value;(0,x.isUndefined)(r)||this.__onInputChange(r)},a.prototype.__onInputChange=function(e){var o=this.model,g=this.opts.onChange,b=e,w=this.getColorEl();if(w){w.spectrum("set",b);var C=w.spectrum("get"),B=b&&Wv(C);B&&(b=B)}g?g(b):o.set({value:b},{fromInput:1})},a.prototype.setValue=function(e,r){void 0===r&&(r={});var o=this.model,c=(0,x.isUndefined)(r.def)?o.get("defaults"):r.def,g=(0,x.isUndefined)(e)?(0,x.isUndefined)(c)?"":c:e,b=this.getInputEl(),w=this.getColorEl(),C="none"!=g?g:"";b.value=g,w.get(0).style.backgroundColor=C,(r.fromTarget||r.fromInput&&!r.avoidStore)&&(w.spectrum("set",C),this.noneColor="none"==g,this.movedColor=C)},a.prototype.getColorEl=function(){var e=this;if(!this.colorEl){var r=this,o=r.em,c=r.model,b=this.ppfx,w=r.opts.onChange,C=(0,T.default)('<div class="'.concat(this.ppfx,'field-color-picker"></div>')),B=C.get(0).style,ne=o&&o.getConfig&&o.getConfig().colorPicker||{};this.movedColor="";var be,ae=!1;this.$el.find("[data-colorp-c]").append(C);var Se=function(We,lt){void 0===lt&&(lt=!0),w?w(We,!lt):(lt&&c.setValueFromInput(0,!1),c.setValueFromInput(We,lt))};C.spectrum(rv(rv(rv({color:c.getValue()||!1,containerClassName:"".concat(b,"one-bg ").concat(b,"two-color ").concat(b,"editor-sp"),maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f",palette:[]},ne),c.get("colorPicker")||{}),{move:function(We){var lt=Wv(We);e.movedColor=lt,B.backgroundColor=lt,Se(lt,!1)},change:function(We){ae=!0;var lt=Wv(We);B.backgroundColor=lt,Se(lt),e.noneColor=!1},show:function(We){ae=!1,e.movedColor="",be=w?c.getValue({noDefault:!0}):Wv(We)},hide:function(){!ae&&(be||w)&&(e.noneColor&&(be=""),B.backgroundColor=be,C.spectrum("set",be),Se(be,!1))}})),o&&o.on&&this.listenTo(o,"component:selected",function(){e.movedColor&&Se(e.movedColor),ae=!0,e.movedColor="",C.spectrum("hide")}),this.colorEl=C}return this.colorEl},a.prototype.render=function(){return Kh.prototype.render.call(this),this.getColorEl(),this},a}(Kh);const dm=q_;var Jy=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yy=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Jy(a,d),a.prototype.templateInput=function(){return""},a.prototype.getInputEl=function(){if(!this.input){var e=this.model,r=this.getModelValue(),c=new dm({model:e,target:this.config.em,contClass:this.ppfx+"field-color",ppfx:this.ppfx}).render();c.setValue(r,{fromTarget:1}),this.input=c.el}return this.input},a}(cf);const Eb=Yy;var $_=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ag=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;return(0,x.bindAll)(r,"moveIncrement","upIncrement"),r.doc=document,r.listenTo(r.model,"change:unit",r.handleModelChange),r}return $_(a,d),a.prototype.template=function(){var e=this.ppfx;return'\n      <span class="'.concat(e,'input-holder"></span>\n      <span class="').concat(e,'field-units"></span>\n      <div class="').concat(e,'field-arrows" data-arrows>\n        <div class="').concat(e,'field-arrow-u" data-arrow-up></div>\n        <div class="').concat(e,'field-arrow-d" data-arrow-down></div>\n      </div>\n    ')},a.prototype.inputClass=function(){var e=this.ppfx;return this.opts.contClass||"".concat(e,"field ").concat(e,"field-integer")},a.prototype.setValue=function(e,r){var o=r||{},c=this.validateInputValue(e,{deepCheck:1}),g={value:c.value,unit:""};(c.unit||c.force)&&(g.unit=c.unit),this.model.set(g,o),o.silent&&this.handleModelChange()},a.prototype.handleChange=function(e){e.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},a.prototype.handleUnitChange=function(e){e.stopPropagation();var r=this.getUnitEl().value;this.model.set("unit",r),this.elementUpdated()},a.prototype.handleKeyDown=function(e){"ArrowUp"===e.key&&(e.preventDefault(),this.upArrowClick()),"ArrowDown"===e.key&&(e.preventDefault(),this.downArrowClick())},a.prototype.elementUpdated=function(){this.model.trigger("el:change")},a.prototype.handleModelChange=function(){var e=this.model;this.getInputEl().value=e.get("value");var r=this.getUnitEl();r&&(r.value=e.get("unit")||"")},a.prototype.getUnitEl=function(){if(!this.unitEl){var e=this.model,r=e.get("units")||[];if(r.length){var o=['<option value="" disabled hidden>-</option>'];r.forEach(function(g){var b=g==e.get("unit")?"selected":"";o.push("<option ".concat(b,">").concat(g,"</option>"))});var c=document.createElement("div");c.innerHTML='<select class="'.concat(this.ppfx,'input-unit">').concat(o.join(""),"</select>"),this.unitEl=c.firstChild}}return this.unitEl},a.prototype.upArrowClick=function(){var r=this.model.get("step"),o=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(o+r)),this.elementUpdated()},a.prototype.downArrowClick=function(){var r=this.model.get("step"),o=parseFloat(this.getInputEl().value);this.setValue(this.normalizeValue(o-r)),this.elementUpdated()},a.prototype.downIncrement=function(e){e.preventDefault(),this.moved=!1;var r=this.model.get("value")||0;r=this.normalizeValue(r),this.current={y:e.pageY,val:r},(0,Ln.on)(this.doc,"mousemove",this.moveIncrement),(0,Ln.on)(this.doc,"mouseup",this.upIncrement)},a.prototype.moveIncrement=function(e){this.moved=!0;var r=this.model,o=r.get("step"),c=this.current,g=this.normalizeValue(c.val+(c.y-e.pageY)*o),b=this.validateInputValue(g),w=b.value,C=b.unit;return this.prValue=w,r.set({value:w,unit:C},{avoidStore:1}),!1},a.prototype.upIncrement=function(){var e=this.model,r=e.get("step");if((0,Ln.AU)(this.doc,"mouseup",this.upIncrement),(0,Ln.AU)(this.doc,"mousemove",this.moveIncrement),this.prValue&&this.moved){var o=this.prValue-r;e.set("value",o,{avoidStore:1}).set("value",o+r),this.elementUpdated()}},a.prototype.normalizeValue=function(e,r){void 0===r&&(r=0);var c=this.model.get("step"),g=0;if(isNaN(e))return r;if(e=parseFloat(e),Math.floor(e)!==e){var b=c.toString().split(".")[1];g=b?b.length:0}return g?parseFloat(e.toFixed(g)):e},a.prototype.validateInputValue=function(e,r){void 0===r&&(r={});var o=0,c=r||{},g=this.model,w=(0,x.isUndefined)(e)?"":e,C=r.units||g.get("units")||[],B=g.get("unit")||C.length&&C[0]||"",ne=(0,x.isUndefined)(r.max)?g.get("max"):r.max,ae=(0,x.isUndefined)(r.min)?g.get("min"):r.min,be=!!g.get("limitlessMax"),Se=!!g.get("limitlessMin");if(c.deepCheck){var We=g.get("fixedValues")||[];if(""===w&&(B=""),w){var lt=new RegExp("^"+We.join("|"),"g");if(We.length&&lt.test(w))w=w.match(lt)[0],B="",o=1;else{var Ot=w+"";w+="",w=parseFloat(w.replace(",",".")),w=isNaN(w)?"":w;var ur=Ot.replace(w,"");(0,x.indexOf)(C,ur)>=0&&(B=ur)}}}return!isNaN(w)&&""!==w&&(!be&&!(0,x.isUndefined)(ne)&&""!==ne&&(w=w>ne?ne:w),!Se&&!(0,x.isUndefined)(ae)&&""!==ae&&(w=w<ae?ae:w)),{force:o,value:w,unit:B}},a.prototype.render=function(){Kh.prototype.render.call(this),this.unitEl=null;var e=this.getUnitEl();return e&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(e),this},a}(Kh);const kg=Ag;Ag.prototype.events={"change input":"handleChange","change select":"handleUnitChange","click [data-arrow-up]":"upArrowClick","click [data-arrow-down]":"downArrowClick","mousedown [data-arrows]":"downIncrement",keydown:"handleKeyDown"};var Qy=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),nv=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Qy(a,d),a.prototype.getValueForTarget=function(){var e=this.model,r=e.attributes,o=r.value,c=r.unit;return(0,x.isUndefined)(o)||""===o?e.get("default"):o+c},a.prototype.getInputEl=function(){if(!this.input){var r=this.ppfx,o=this.model,c=this.getModelValue(),g=new kg({contClass:"".concat(r,"field-int"),type:"number",model:o,ppfx:r});g.render(),this.$input=g.inputEl,this.$unit=g.unitEl,o.set("value",c,{fromTarget:!0}),this.$input.val(c),this.input=g.el}return this.input},a}(cf);const J_=nv;var Lg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zv=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;return r.listenTo(r.model,"change:options",r.rerender),r}return Lg(a,d),a.prototype.templateInput=function(){var r=this.ppfx;return'<div class="'.concat(this.clsField,'">\n      <div data-input></div>\n      <div class="').concat(r,'sel-arrow">\n        <div class="').concat(r,'d-s-arrow"></div>\n      </div>\n    </div>')},a.prototype.getInputEl=function(){if(!this.$input){var r=this.model,o=this.em,c=r.get("name"),g=r.get("options")||[],b=[],w="<select>";g.forEach(function(ne){var be,Se,We,ae="";(0,x.isString)(ne)?(be=ne,Se=ne):(be=ne.name||ne.label||ne.value,Se="".concat((0,x.isUndefined)(ne.value)?ne.id:ne.value).replace(/"/g,"&quot;"),ae+=(We=ne.style?ne.style.replace(/"/g,"&quot;"):"")?' style="'.concat(We,'"'):"");var lt=o.t("traitManager.traits.options.".concat(c,".").concat(Se))||be;w+='<option value="'.concat(Se,'"').concat(ae,">").concat(lt,"</option>"),b.push(Se)}),this.$input=(0,T.default)(w+="</select>");var C=r.getTargetValue(),B=b.indexOf(C)>=0?C:r.get("default");!(0,x.isUndefined)(B)&&this.$input.val(B)}return this.$input.get(0)},a}(cf);const Y_=Zv;var ov=m(91),Xy=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),iv="data-categories",pm="data-no-categories",Q_=function(d){function a(e,r){var o=d.call(this,e)||this;o.reuseView=!0,o.renderedCategories=new Map,o.itemsView=r;var c=e.config||{};o.config=c;var g=e.editor;o.em=g;var b=c.pStylePrefix||"";return o.ppfx=b,o.pfx=b+c.stylePrefix||"",o.className="".concat(o.pfx,"traits"),o.traitContClass="".concat(b,"traits-c"),o.classNoCat="".concat(b,"traits-empty-c"),o.catsClass="".concat(b,"trait-categories"),o.collection=new Ls([],{em:g}),o.listenTo(g,"component:toggled",o.updatedCollection),o.updatedCollection(),o}return Xy(a,d),a.prototype.updatedCollection=function(){var r=this.ppfx,o=this.em,c=o.getSelected();this.el.className="".concat(this.traitContClass,"s ").concat(r,"one-bg ").concat(r,"two-color"),this.collection=c?.traits||new Ls([],{em:o}),this.render()},a.prototype.add=function(e,r){var c=this.config,g=this.renderedCategories,b=this.itemView,w=e.get(this.itemType);this.itemsView&&this.itemsView[w]&&(b=this.itemsView[w]);var B=new b({config:c,model:e,attributes:e.get("attributes")}).render().el,ne=e.parent.initCategory(e);if(ne){var ae=ne.getId(),be=this.getCategoriesEl(),Se=g.get(ae);return!Se&&be&&(Se=new fc({model:ne},c,"trait").render(),g.set(ae,Se),be.appendChild(Se.el)),void Se?.append(B)}r?r.appendChild(B):this.append(B)},a.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector("[".concat(iv,"]"))),this.catsEl},a.prototype.getTraitsEl=function(){return this.traitsEl||(this.traitsEl=this.el.querySelector("[".concat(pm,"]"))),this.traitsEl},a.prototype.append=function(e){var r=this.getTraitsEl();r?.appendChild(e)},a.prototype.render=function(){var e=this,r=this,o=r.el,c=r.ppfx,g=r.catsClass,b=r.traitContClass,w=r.classNoCat,C=document.createDocumentFragment();delete this.catsEl,delete this.traitsEl,this.renderedCategories=new Map,o.innerHTML='\n      <div class="'.concat(g,'" ').concat(iv,'></div>\n      <div class="').concat(w," ").concat(b,'" ').concat(pm,"></div>\n    "),this.collection.forEach(function(ne){return e.add(ne,C)}),this.append(C);var B="".concat(b,"s ").concat(c,"one-bg ").concat(c,"two-color");return this.$el.addClass(B),this.rendered=!0,this},a}(ov.A);const X_=Q_;Q_.prototype.itemView=cf;var Ob=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),rg=function(d){function a(e){var r=d.call(this,e,"TraitManager",{stylePrefix:"trt-",appendTo:"",optionsTarget:[{value:!1},{value:"_blank"}],custom:!1})||this;r.TraitsView=X_,r.events=ic,r.state=new L.Kx({traits:[]}),r.types={text:cf,number:J_,select:Y_,checkbox:Uv,color:Eb,button:Sg};var c=r.state,g=r.config,b=r.events,w=g.pStylePrefix;w&&(g.stylePrefix="".concat(w).concat(g.stylePrefix)),(0,x.bindAll)(r,"__onSelect");var C=(0,x.debounce)(function(){return r.__upSel()},0),B=(0,x.debounce)(function(){return r.__onUp()},0);return c.listenTo(e,"component:toggled",C),c.listenTo(e,b.value,B),c.on("change:traits",r.__onSelect),r.debounced=[C,B],r}return Ob(a,d),a.prototype.select=function(e){var r=e?.getTraits()||[];this.state.set({component:e,traits:r}),this.__trgCustom()},a.prototype.getCategories=function(){var e,r=this.getComponent();return function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],(null===(e=r?.traits.categories)||void 0===e?void 0:e.models)||[],!0)},a.prototype.getTraits=function(){return this.getCurrent()},a.prototype.getTraitsByCategory=function(e){return Fs(e||this.getTraits())},a.prototype.getComponent=function(){return this.state.attributes.component},a.prototype.addType=function(e,r){var o=this.getType("text");this.types[e]=o.extend(r)},a.prototype.getType=function(e){return this.getTypes()[e]},a.prototype.getTypes=function(){return this.types},a.prototype.getTraitsViewer=function(){return this.view},a.prototype.getCurrent=function(){return this.state.get("traits")||[]},a.prototype.render=function(){var e=this.view,r=this.em;return e=new X_({el:e?.el,collection:[],editor:r,config:this.getConfig()},this.getTypes()),this.view=e,e.el},a.prototype.postRender=function(){this.__appendTo()},a.prototype.__onSelect=function(){var e=this,g=e.state.attributes;e.em.trigger(e.events.select,{component:g.component,traits:g.traits})},a.prototype.__trgCustom=function(e){void 0===e&&(e={});var r=this,o=r.em,c=r.events;this.__ctn=r.__ctn||e.container,o.trigger(c.custom,this.__customData())},a.prototype.__customData=function(){return{container:this.__ctn}},a.prototype.__upSel=function(){this.select(this.em.getSelected())},a.prototype.__onUp=function(){this.select(this.getComponent())},a}(Oe);const Db=rg;var Ig=m(3253),Tb=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),av=function(d){function a(){var e=null!==d&&d.apply(this,arguments)||this;return e._dropAreaConfig={ratio:.4,minUndroppableDimension:3,maxUndroppableDimension:20},e}return Tb(a,d),Object.defineProperty(a.prototype,"view",{get:function(){return this.model.viewLayer},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"element",{get:function(){var e;return null===(e=this.model.viewLayer)||void 0===e?void 0:e.el},enumerable:!1,configurable:!0}),a}(Ig.h);const ey=av;var Rg=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),fm=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;r.items=[],r.opt=e;var o=e.config||{};r.config=o,r.module=e.module,r.parentView=e.parentView;var c=o.stylePrefix||"",b=r.collection;r.listenTo(b,"add",r.addTo),r.listenTo(b,"reset resetNavigator",r.render),r.listenTo(b,"remove",r.removeChildren),r.className="".concat(c,"layers");var w=o.em;if(o.sortable&&!r.opt.sorter){var C=w.Utils,B=o.sortContainer||r.el,ne=r.createPlaceholder(c);r.opt.sorter=new C.ComponentSorter({em:w,treeClass:ey,containerContext:{container:B,containerSel:".".concat(r.className),itemSel:".".concat(c,"layer"),pfx:o.pStylePrefix,document,placeholderElement:ne},dragBehavior:{dragDirection:qd.A.Vertical,nested:!0}})}return r.$el.data("collection",b),e.parent&&r.$el.data("model",e.parent),r}return Rg(a,d),a.prototype.createPlaceholder=function(e){var r=document.createElement("div"),o=document.createElement("div");return r.className=e+"placeholder",r.style.display="none",r.style.pointerEvents="none",o.className=e+"placeholder-int",r.appendChild(o),r},a.prototype.removeChildren=function(e){var r=e.viewLayer;r&&(r.remove(),delete e.viewLayer)},a.prototype.addTo=function(e){this.addToCollection(e,null,this.collection.indexOf(e))},a.prototype.addToCollection=function(e,r,o){var c=this,b=c.opt,C=c.el,B=b.ItemView,We=e.viewLayer||new B({ItemView:B,level:b.level,model:e,parentView:c.parentView,config:c.config,sorter:b.sorter,opened:b.opened,module:b.module}),lt=We.render().el;if(r)r.appendChild(lt);else{var Ot=C,ur=Ot.childNodes;if((0,x.isUndefined)(o))Ot.appendChild(lt);else{var Gt=ur.length==o;Gt&&o--,Gt||!ur.length?Ot.appendChild(lt):Ot.insertBefore(lt,ur[o])}}return this.items.push(We),lt},a.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return L.Ss.prototype.remove.apply(this,e),this.items.map(function(o){return o.remove()}),this},a.prototype.render=function(){var e=this,o=this.el,c=this.module,g=document.createDocumentFragment();return o.innerHTML="",this.collection.map(function(b){return c.__getLayerFromComponent(b)}).forEach(function(b){return e.addToCollection(b,g)}),o.appendChild(g),o.className=this.className,this},a}(L.Ss);const ph=fm;var Vh=m(5301);var og=m(8351),Sb=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fg=function(){return Fg=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Fg.apply(this,arguments)},sv=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},Pb=[["preview","Preview","preview"],["resize","Resize","resize"],["fullscreen","Fullscreen","fullscreen"],["copy","CopyComponent"],["paste","PasteComponent"],["canvas-move","CanvasMove"],["canvas-clear","CanvasClear"],["open-code","ExportTemplate","export-template"],["open-layers","OpenLayers","open-layers"],["open-styles","OpenStyleManager","open-sm"],["open-traits","OpenTraitManager","open-tm"],["open-blocks","OpenBlocks","open-blocks"],["open-assets","OpenAssets","open-assets"],["component-select","SelectComponent","select-comp"],["component-outline","SwitchVisibility","sw-visibility"],["component-offset","ShowOffset","show-offset"],["component-move","MoveComponent","move-comp"],["component-next","ComponentNext"],["component-prev","ComponentPrev"],["component-enter","ComponentEnter"],["component-exit","ComponentExit","select-parent"],["component-delete","ComponentDelete"],["component-style-clear","ComponentStyleClear"],["component-drag","ComponentDrag"]],cw={preserveSelected:1},uw=function(d){return function(a){return d.trigger("".concat(Sh,":start"),a)}},r0=function(d){return function(a){return d.trigger(Sh,a)}},dw=function(d,a,e){return void 0===e&&(e={}),function(r,o,c){setTimeout(function(){a.forEach(function(g){return g.set("status",g.get("selectable")?"selected":"")}),d.setSelected(a),a[0].emitUpdate()}),d.trigger("".concat(Sh,":end"),c),setTimeout(function(){return d.runDefault(cw)}),(e.altMode||c.cancelled)&&d.set("_cmpDrag",1)}},cx=function(d){function a(e){var r=d.call(this,e,"Commands",{stylePrefix:"com-",defaults:{},strict:!0})||this;r.CommandAbstract=Vh.default,r.defaultCommands={},r.commands={},r.active={},r.events=og.A;var o=r.config,c=o.pStylePrefix,g=r.defaultCommands;for(var b in c&&(o.stylePrefix=c+o.stylePrefix),Object.keys(o.defaults).forEach(function(w){var C=o.defaults[w];C.id&&r.add(C.id,C)}),g["tlb-delete"]={run:function(w){return w.runCommand("core:component-delete")}},g["tlb-clone"]={run:function(w){w.runCommand("core:copy"),w.runCommand("core:paste",{action:"clone-component"})}},g["tlb-move"]={run:function(w,C,B){var ne;void 0===B&&(B={});var be=w.getModel(),Se=B.event,We=B.target,Ot=(Array.isArray(We)?We:We?[We]:sv([],w.getSelectedAll(),!0)).map(function(Bt){var wr,sr;return(null===(sr=null===(wr=Bt.delegate)||void 0===wr?void 0:wr.move)||void 0===sr?void 0:sr.call(wr,Bt))||Bt}).filter(Boolean),ur=Ot[Ot.length-1],Gt="dragstart"===Se?.type;if(!ur?.get("draggable"))return be.logWarning("The element is not draggable");var Fn=ur.get("dmode")||be.get("dmode"),fo=function(){return be.stopDefault(cw)},ti=(0,x.includes)(["absolute","translate"],Fn);Ot.forEach(function(Bt){return Bt.trigger("disable",{fromMove:!0})}),Gt?setTimeout(fo,0):fo();var jn=uw(be),Nr=r0(be),Dn=dw(be,Ot,{altMode:ti});if(ti)w.runCommand("core:component-drag",{guidesInfo:1,mode:Fn,target:ur,onStart:jn,onDrag:Nr,onEnd:Dn,event:Se});else{Gt&&Se.dataTransfer.setDragImage(null===(ne=ur.view)||void 0===ne?void 0:ne.el,0,0);var ir=w.Commands.get("move-comp");ir.onStart=jn,ir.onDrag=Nr,ir.onEndMoveFromModel=Dn,ir.initSorterFromModels(Ot)}Ot.filter(function(Bt){return Bt.get("selectable")}).forEach(function(Bt){return Bt.set("status","freezed-selected")})}},g["core:undo"]=function(w){return w.UndoManager.undo()},g["core:redo"]=function(w){return w.UndoManager.redo()},Pb.forEach(function(w){var C=w[2],B=m(585)("./".concat(w[1])).default,ne="core:".concat(w[0]);g[ne]=B,C&&(g[C]=B,["run","stop"].forEach(function(ae){e.on("".concat(ae,":").concat(C),function(){for(var be=[],Se=0;Se<arguments.length;Se++)be[Se]=arguments[Se];return e.trigger.apply(e,sv(["".concat(ae,":").concat(ne)],be,!1))})}))}),o.model=e.Canvas,g)r.add(b,g[b]);return r}return Sb(a,d),a.prototype.add=function(e,r){var o=(0,x.isFunction)(r)?{run:r}:r;return o.stop||(o.noStop=!0),delete o.initialize,o.id=e,this.commands[e]=Vh.default.extend(o),this},a.prototype.get=function(e){var r=this.commands[e];return(0,x.isFunction)(r)?(r=new r(this.config),this.commands[e]=r):r||this.em.logWarning("'".concat(e,"' command not found")),r},a.prototype.extend=function(e,r){void 0===r&&(r={});var o=this.get(e);if(o){var c=Fg(Fg({},o.constructor.prototype),r);this.add(e,c);var g=Pb.filter(function(b){return"core:".concat(b[0])===e&&b[2]})[0];g&&this.add(g[2],c)}return this},a.prototype.has=function(e){return!!this.commands[e]},a.prototype.getAll=function(){return this.commands},a.prototype.run=function(e,r){return void 0===r&&(r={}),this.runCommand(this.get(e),r)},a.prototype.stop=function(e,r){return void 0===r&&(r={}),this.stopCommand(this.get(e),r)},a.prototype.isActive=function(e){return this.getActive().hasOwnProperty(e)},a.prototype.getActive=function(){return this.active},a.prototype.runCommand=function(e,r){var o;if(void 0===r&&(r={}),e?.run){var b=this.config,C=this.em.Editor;(!this.isActive(e.id)||r.force||!b.strict)&&(o=C&&e.callRun(C,r))}return o},a.prototype.stopCommand=function(e,r){var o;if(void 0===r&&(r={}),e?.run){var b=this.config,C=this.em.Editor;(this.isActive(e.id)||r.force||!b.strict)&&(o=e.callStop(C,r))}return o},a.prototype.create=function(e){return e.stop||(e.noStop=!0),new(Vh.default.extend(e))(this.config)},a.prototype.__onRun=function(e,r){this.em.on("".concat(this.events.runCommand).concat(e),r)},a.prototype.__onStop=function(e,r){this.em.on("".concat(this.events.stopCommand).concat(e),r)},a.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},a}(Oe);const Mb=cx;var ux=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ab=function(){return Ab=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ab.apply(this,arguments)},pw="contentEditable",n0="data-toggle-move",lv=function(d){function a(e){var r=d.call(this,e)||this;(0,x.bindAll)(r,"__render"),r.opt=e,r.module=e.module,r.config=e.config||{},r.sorter=e.sorter||"",r.parentView=e.parentView;var g=r.pfx,b=r.ppfx,w=r.model.get("type")||"default";return r.className="".concat(g,"layer ").concat(g,"layer__t-").concat(w," no-select ").concat(b,"two-color"),r.inputNameCls="".concat(b,"layer-name"),r.clsTitleC="".concat(g,"layer-title-c"),r.clsTitle="".concat(g,"layer-title"),r.clsCaret="".concat(g,"layer-caret"),r.clsCount="".concat(g,"layer-count"),r.clsMove="".concat(g,"layer-move"),r.clsChildren="".concat(g,"layer-children"),r.clsNoChild="".concat(g,"layer-no-chld"),r.clsEdit="".concat(r.inputNameCls,"--edit"),r.clsNoEdit="".concat(r.inputNameCls,"--no-edit"),r.initComponent(),r}return ux(a,d),a.prototype.events=function(){var e;return(e={})["mousedown [".concat(n0,"]")]="startSort",e["touchstart [".concat(n0,"]")]="startSort",e["click [data-toggle-visible]"]="toggleVisibility",e["click [data-toggle-open]"]="toggleOpening",e["click [data-toggle-select]"]="handleSelect",e["mouseover [data-toggle-select]"]="handleHover",e["mouseout [data-toggle-select]"]="handleHoverOut",e["dblclick [data-name]"]="handleEdit",e["keydown [data-name]"]="handleEditKey",e["focusout [data-name]"]="handleEditEnd",e},a.prototype.template=function(e){var r=this,o=r.pfx,c=r.ppfx,b=r.clsNoEdit,C=r.opt,B=r.em,ne=r.config.hidable,ae=r.module.getComponents(e).length,be=ae?"":this.clsNoChild,Se="".concat(this.clsTitle," ").concat(be),We="".concat(this.clsTitleC),lt="".concat(this.inputNameCls," ").concat(b," ").concat(c,"no-app"),ur="".concat(10*(C.level||0),"px"),Gt=e.getName(),ar=e.getIcon(),Fn="".concat(o,"layer"),fo=(B?.getConfig()).icons,jn=fo.move,Nr=fo.eye,Dn=fo.eyeOff,ir=fo.chevron;return'\n      <div class="'.concat(o,"layer-item ").concat(c,'one-bg" data-toggle-select>\n        <div class="').concat(o,'layer-item-left">\n          ').concat(ne?'<i class="'.concat(o,'layer-vis" data-toggle-visible>\n                <i class="').concat(o,'layer-vis-on">').concat(Nr,'</i>\n                <i class="').concat(o,'layer-vis-off">').concat(Dn,"</i>\n              </i>"):"",'\n          <div class="').concat(We,'">\n            <div class="').concat(Se,'" style="padding-left: ').concat(ur,'">\n              <div class="').concat(o,'layer-title-inn" title="').concat(Gt,'">\n                <i class="').concat(this.clsCaret,'" data-toggle-open>').concat(ir,"</i>\n                  ").concat(ar?'<span class="'.concat(Fn,'__icon">').concat(ar,"</span>"):"",'\n                <span class="').concat(lt,'" data-name>').concat(Gt,'</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="').concat(o,'layer-item-right">\n          <div class="').concat(this.clsCount,'" data-count>').concat(ae||"",'</div>\n          <div class="').concat(this.clsMove,'" ').concat(n0,">").concat(jn||"",'</div>\n        </div>\n      </div>\n      <div class="').concat(this.clsChildren,'"></div>\n    ')},Object.defineProperty(a.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),a.prototype.initComponent=function(){var e=this,o=this.model,g=this.config.onInit,b=o.components();this.listenTo(b,"remove add reset",this.checkChildren),[["change:status",this.updateStatus],["change:open",this.updateOpening],["change:layerable",this.updateLayerable],["change:style:display",this.updateVisibility],["change:draggable",this.updateMove],["rerender:layer",this.render],["change:name change:custom-name",this.updateName]].forEach(function(w){return e.listenTo(o,w[0],w[1])}),this.$el.data("model",o),this.$el.data("collection",b),o.viewLayer=this,g.bind(this)({component:o,render:this.__render,listenTo:this.listenTo})},a.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},a.prototype.getVisibilityEl=function(){return this.getItemContainer().find("[data-toggle-visible]")},a.prototype.updateVisibility=function(){var e=this,r=e.pfx,o=e.model,c=e.module,g="".concat(r,"layer-hidden"),w=c.isVisible(o)?"removeClass":"addClass";this.$el[w](g),this.getVisibilityEl()[w]("".concat(r,"layer-off"))},a.prototype.updateMove=function(){var r=this.model,o=this.config,c=this.getItemContainer().find("[".concat(n0,"]"))[0];if(c){var g=r.get("draggable")&&o.sortable;c.style.display=g?"":"none"}},a.prototype.toggleVisibility=function(e){e?.stopImmediatePropagation();var o=this.module,c=this.model;o.setVisible(c,!o.isVisible(c))},a.prototype.handleEdit=function(e){e?.stopPropagation();var r=this,o=r.em,c=r.$el,g=r.clsNoEdit,b=r.clsEdit,w=this.getInputName();w[pw]="true",w.focus(),document.execCommand("selectAll",!1),o.setEditing(!0),c.find(".".concat(this.inputNameCls)).removeClass(g).addClass(b)},a.prototype.handleEditKey=function(e){e.stopPropagation(),((0,Ln.v$)(e)||(0,Ln.Ci)(e))&&this.handleEditEnd(e)},a.prototype.handleEditEnd=function(e){e?.stopPropagation();var r=this,o=r.em,c=r.$el,g=r.clsNoEdit,b=r.clsEdit,w=r.model,C=this.getInputName(),B=C.textContent;C.scrollLeft=0,C[pw]="false",w.setName(B),o.setEditing(!1),c.find(".".concat(this.inputNameCls)).addClass(g).removeClass(b),this.updateName()},a.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},a.prototype.updateOpening=function(){var e=this,r=e.$el,o=e.model,g="open",b="".concat(e.pfx,"layer-open"),w=this.getCaret();this.module.isOpen(o)?(r.addClass(g),w.addClass(b)):(r.removeClass(g),w.removeClass(b))},a.prototype.toggleOpening=function(e){var o=this.model,c=this.module;e?.stopImmediatePropagation(),o.get("components").length&&c.setOpen(o,!c.isOpen(o))},a.prototype.handleSelect=function(e){e?.stopPropagation(),this.module.setLayerData(this.model,{selected:!0},{event:e})},a.prototype.handleHover=function(e){e?.stopPropagation(),this.module.setLayerData(this.model,{hovered:!0})},a.prototype.handleHoverOut=function(e){e?.stopPropagation(),this.module.setLayerData(this.model,{hovered:!1})},a.prototype.startSort=function(e){var r,o,c;e.stopPropagation();var g=this,b=g.em,w=g.sorter,C=g.model;if((!e.button||0===e.button)&&w){var B=(null===(o=null===(r=C.delegate)||void 0===r?void 0:r.move)||void 0===o?void 0:o.call(r,C))||C;w.eventHandlers=Ab({legacyOnStartSort:uw(b),legacyOnMoveClb:r0(b),legacyOnEndMove:dw(b,[B])},w.eventHandlers);var ne=(null===(c=B.viewLayer)||void 0===c?void 0:c.el)||e.target;w.startSort([{element:ne}])}},a.prototype.updateStatus=function(){$l.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},a.prototype.getItemContainer=function(){return this.$el.children("[data-toggle-select]")},a.prototype.checkChildren=function(){var e=this,r=e.model,o=e.clsNoChild,c=e.module,g=c.getComponents(r).length,b=this.getItemContainer(),w=b.find(".".concat(this.clsTitle)),C=b.find("[data-count]");w[g?"removeClass":"addClass"](o),C.html("".concat(g||"")),!g&&c.setOpen(r,!1)},a.prototype.getCaret=function(){return(!this.caret||!this.caret.length)&&(this.caret=this.getItemContainer().find(".".concat(this.clsCaret))),this.caret},a.prototype.setRoot=function(e){var r,o=(0,x.isString)(e)?null===(r=this.em.getWrapper())||void 0===r?void 0:r.find(e)[0]:e;o&&(this.stopListening(),this.model=o,this.initComponent(),this._rendered&&this.render())},a.prototype.updateLayerable=function(){(this.parentView||this).render()},a.prototype.__clearItems=function(){var e;null===(e=this.items)||void 0===e||e.remove()},a.prototype.remove=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return L.Ss.prototype.remove.apply(this,e),delete this.model.viewLayer,this.__clearItems(),this},a.prototype.render=function(){var e=this,r=e.model,o=e.config,c=e.pfx,g=e.ppfx,b=e.opt,w=e.sorter;this.__clearItems();var C=b.opened,B=b.module,ne=b.ItemView,ae=!B.__isLayerable(r),be=this.$el.empty(),Se=b.level+1;delete this.inputName,this.items=new ph({ItemView:ne,collection:r.get("components"),config:o,sorter:w,opened:C,parentView:this,parent:r,level:Se,module:B});var We=this.items.render().$el;return o.showWrapper||1!==Se?(be.html(this.template(r)),be.find(".".concat(this.clsChildren)).append(We)):be.append(We),!B.isVisible(r)&&(this.className+=" ".concat(c,"hide")),ae&&(this.className+=" ".concat(g,"hidden")),be.attr("class",this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.updateMove(),this.__render(),this._rendered=!0,this},a.prototype.__render=function(){var e=this,b={component:e.model,el:e.el};e.config.onRender.bind(this)(b),this.em.trigger("layer:render",b)},a}(L.Ss);const dx=lv;var px=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),uf=function(){return uf=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},uf.apply(this,arguments)},ry="".concat("layer",":"),o0="".concat(ry,"root"),Lb="".concat(ry,"component"),Ib="".concat(ry,"custom"),fx={all:"layer",root:o0,component:Lb,custom:Ib},Rb={mediaText:""},hx=["open","status","locked","custom-name","components","classes"].map(function(d){return"".concat(gt.I.update,":").concat(d)}).join(" "),mx=function(d){function a(e){var r=d.call(this,e,"LayerManager",{stylePrefix:"",appendTo:"",sortable:!0,hidable:!0,hideTextnode:!0,root:"",showWrapper:!0,showHover:!0,scrollCanvas:{behavior:"smooth",block:"nearest"},scrollLayers:{behavior:"auto",block:"nearest"},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}})||this;return r.events=fx,(0,x.bindAll)(r,"componentChanged","__onRootChange","__onComponent"),r.model=new ke.A(r,{opened:{}}),r.config.stylePrefix=r.config.pStylePrefix,r}return px(a,d),a.prototype.onLoad=function(){var e=this,r=this,o=r.em,c=r.config,g=r.model;g.listenTo(o,"component:selected",this.componentChanged),g.on("change:root",this.__onRootChange),g.listenTo(o,hx,this.__onComponent),this.componentChanged(),g.listenToOnce(o,"load",function(){e.setRoot(c.root),e.__appendTo()})},a.prototype.setRoot=function(e){var r=this.em.getWrapper(),o=(0,z.isComponent)(e)?e:r;e&&(0,x.isString)(e)&&(0,z.hasWin)()&&(o=r.find(e)[0]||r);var c=this.__getLayerFromComponent(o);return this.model.set("root",c),c},a.prototype.getRoot=function(){return this.model.get("root")},a.prototype.getComponents=function(e){var r=this;return e.components().map(function(o){return r.__getLayerFromComponent(o)}).filter(function(o){return r.__isLayerable(o)})},a.prototype.setOpen=function(e,r){e.set("open",r)},a.prototype.isOpen=function(e){return!!e.get("open")},a.prototype.setVisible=function(e,r){var o="__prev-display",c=e.getStyle(Rb),g=c.display;if(r){var b=e.get(o);delete c.display,b&&(c.display=b,e.unset(o))}else g&&e.set(o,g),c.display="none";e.setStyle(c,Rb),this.updateLayer(e),this.em.trigger("component:toggled")},a.prototype.isVisible=function(e){return!function(d){return void 0===d&&(d={}),0===(d.display||"").trim().indexOf("none")}(e.getStyle(Rb))},a.prototype.setLocked=function(e,r){e.set("locked",r)},a.prototype.isLocked=function(e){return!!e.get("locked")},a.prototype.setName=function(e,r){e.set("custom-name",r)},a.prototype.getName=function(e){return e.getName()},a.prototype.getLayerData=function(e){var r=e.get("status");return{name:e.getName(),open:this.isOpen(e),selected:"selected"===r,hovered:"hovered"===r,visible:this.isVisible(e),locked:this.isLocked(e),components:this.getComponents(e)}},a.prototype.setLayerData=function(e,r,o){var c;void 0===o&&(o={});var b=this.em,w=this.config,C=r.open,B=r.selected,ne=r.hovered,ae=r.visible,be=r.locked,Se=r.name,We=uf({fromLayers:!0},o);if((0,z.isDef)(C)&&this.setOpen(e,C),(0,z.isDef)(B))if(B){b.setSelected(e,We);var lt=w.scrollCanvas;lt&&(null===(c=e.views)||void 0===c||c.forEach(function(Ot){return Ot.scrollIntoView(lt)}))}else b.removeSelected(e,We);(0,z.isDef)(ne)&&w.showHover&&b.setHovered(ne?e:null,We),(0,z.isDef)(ae)&&ae!==this.isVisible(e)&&this.setVisible(e,ae),(0,z.isDef)(be)&&this.setLocked(e,be),(0,z.isDef)(Se)&&this.setName(e,Se)},a.prototype.componentChanged=function(e,r){var o;if(void 0===r&&(r={}),!r.fromLayers){var g=this.em,w=this.config.scrollLayers,C=this.model.get("opened"),B=g.getSelected(),ne=B?.parent();for(var ae in C)C[ae].set("open",!1),delete C[ae];for(;ne;)ne.set("open",!0),C[ne.cid]=ne,ne=ne.parent();if(B&&w){var be=null===(o=B.viewLayer)||void 0===o?void 0:o.el;be?.scrollIntoView(w)}}},a.prototype.getAll=function(){return this.view},a.prototype.render=function(){var e,r,c=this.config,g=this.model,b=dx.extend(c.extend);return this.view=new b({el:null===(e=this.view)||void 0===e?void 0:e.el,ItemView:b,level:0,config:c,opened:g.get("opened"),model:this.getRoot(),module:this}),null===(r=this.view)||void 0===r?void 0:r.render().el},a.prototype.destroy=function(){var e;null===(e=this.view)||void 0===e||e.remove()},a.prototype.__onRootChange=function(){var e,r=this.getRoot();null===(e=this.view)||void 0===e||e.setRoot(r),this.em.trigger(o0,r),this.__trgCustom()},a.prototype.__getLayerFromComponent=function(e){var r,o;return(null===(o=null===(r=e.delegate)||void 0===r?void 0:r.layer)||void 0===o?void 0:o.call(r,e))||e},a.prototype.__onComponent=function(e){this.updateLayer(e)},a.prototype.__isLayerable=function(e){var r=e.tagName;return(!this.config.hideTextnode||!e.isInstanceOf("textnode")&&"br"!==r)&&e.get("layerable")},a.prototype.__trgCustom=function(e){var r=this,c=r.em,g=r.events;this.__ctn=r.__ctn||e?.container,c.trigger(g.custom,{container:this.__ctn,root:this.getRoot()})},a.prototype.updateLayer=function(e,r){this.em.trigger(Lb,e,r)},a}(Oe);const gx=mx;var _x=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Fb=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return _x(a,d),a.getDefaults=function(){return(0,x.result)(this.prototype,"defaults")},a.prototype.defaults=function(){return{type:"",src:""}},a.prototype.getType=function(){return this.get("type")},a.prototype.getSrc=function(){return this.get("src")},a.prototype.getFilename=function(){return this.get("src").split("/").pop().split("?").shift()},a.prototype.getExtension=function(){return this.getFilename().split(".").pop()},a}(L.Kx);const jb=Fb;Fb.prototype.idAttribute="src";var zv=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Hv=function(){return Hv=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Hv.apply(this,arguments)},yx=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return zv(a,d),a.prototype.defaults=function(){return Hv(Hv({},jb.getDefaults()),{type:"image",unitDim:"px",height:0,width:0})},a}(jb);const fw=yx;var bx=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),s0=function(d){function a(e){var r=d.call(this,e)||this;r.options=e,r.collection=e.collection;var o=e.config||{};r.config=o,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.em=o.em,r.className=r.pfx+"asset",r.listenTo(r.model,"destroy remove",r.remove),r.model.view=r;var c=r.init&&r.init.bind(r);return c&&c(e),r}return bx(a,d),a.prototype.__getBhv=function(){var e=this.em,r=e?.Assets;return r?.__getBehaviour()||{}},a.prototype.template=function(e,r){var o=this.pfx;return'\n      <div class="'.concat(o,'preview-cont">\n        ').concat(this.getPreview(),'\n      </div>\n      <div class="').concat(o,'meta">\n        ').concat(this.getInfo(),'\n      </div>\n      <div class="').concat(o,'close" data-toggle="asset-remove">\n        &Cross;\n      </div>\n    ')},a.prototype.updateTarget=function(e){e&&e.set&&(e.set("attributes",(0,x.clone)(e.get("attributes"))),e.set("src",this.model.get("src")))},a.prototype.getPreview=function(){return""},a.prototype.getInfo=function(){return""},a.prototype.render=function(){var e=this.el;return e.innerHTML=this.template(this,this.model),e.className=this.className,this},a}(L.Ss);const wx=s0;var ny=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hw=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d},Nb=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ny(a,d),a.prototype.getPreview=function(){var e=this,r=e.pfx,o=e.ppfx,g=e.model.get("src");return H(mw||(mw=hw(['\n      <div class="','preview" style="background-image: url(\'','\');"></div>\n      <div class="',"preview-bg ",'checker-bg"></div>\n    '],['\n      <div class="','preview" style="background-image: url(\'','\');"></div>\n      <div class="',"preview-bg ",'checker-bg"></div>\n    '])),r,g,r,o)},a.prototype.getInfo=function(){var r=this.pfx,o=this.model,c=o.get("name"),g=o.get("width"),b=o.get("height"),w=o.get("unitDim"),C=g&&b?"".concat(g,"x").concat(b).concat(w):"";return c=c||o.getFilename(),H(gw||(gw=hw(['\n      <div class="','name">','</div>\n      <div class="','dimensions">',"</div>\n    "],['\n      <div class="','name">','</div>\n      <div class="','dimensions">',"</div>\n    "])),r,c,r,C)},a.prototype.init=function(e){this.className+=" ".concat(this.pfx,"asset-image")},a.prototype.onClick=function(){var r=this.model,o=this.pfx,c=this.__getBhv().select,g=this.config.onClick,b=this.collection;b.trigger("deselectAll"),this.$el.addClass(o+"highlight"),(0,x.isFunction)(c)?c(r,!1):(0,x.isFunction)(g)?g(r):this.updateTarget(b.target)},a.prototype.onDblClick=function(){var r=this.em,o=this.model,c=this.__getBhv().select,g=this.config.onDblClick,b=this.collection,w=b.target,C=b.onSelect;(0,x.isFunction)(c)?c(o,!0):(0,x.isFunction)(g)?g(o):(this.updateTarget(w),r?.Modal.close()),(0,x.isFunction)(C)&&C(o)},a.prototype.onRemove=function(e){e.stopImmediatePropagation(),this.model.collection.remove(this.model)},a}(wx);const l0=Nb;Nb.prototype.events={"click [data-toggle=asset-remove]":"onRemove",click:"onClick",dblclick:"onDblClick"};var mw,gw,c0=function(){return c0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},c0.apply(this,arguments)},xx={types:[],initialize:function(d,a){var e=this;void 0===a&&(a={});var r=a.em;this.em=r,this.opts=a,this.model=function(c,g){var b,w,C;if(void 0===c&&(c={}),void 0===g&&(g={}),c&&c.type){var B=e.getBaseType();b=(C=e.getType(c.type))?C.model:B.model,w=C?C.view:B.view}else{var ne=e.recognizeType(c);b=(C=ne.type).model,w=C.view,c=ne.attributes}var ae=new b(c,c0(c0({},g),{em:r}));return ae.typeView=w,e.model.prototype=b.prototype,ae};var o=this.init&&this.init.bind(this);o&&o()},recognizeType:function(d){for(var a=this.getTypes(),e=0;e<a.length;e++){var r=a[e],o=r.isType(d);if(o="boolean"==typeof o&&o?{type:r.id}:o)return{type:r,attributes:o}}return{type:this.getBaseType(),attributes:d}},getBaseType:function(){var d=this.getTypes();return d[d.length-1]},getTypes:function(){return this.types},getType:function(d){for(var a=this.getTypes(),e=0;e<a.length;e++){var r=a[e];if(r.id===d)return r}},addType:function(d,a){var e=this.getType(d),r=this.getBaseType(),o=e?e.model:r.model,c=e?e.view:r.view,g=a.model,b=a.view,w=a.isType;g=g instanceof L.Kx||(0,x.isFunction)(g)?g:o.extend(g||{}),b=b instanceof L.Ss||(0,x.isFunction)(b)?b:c.extend(b||{}),this.extendViewApi&&!a.model&&!a.view&&(b=b.extend(a)),e?(e.model=g,e.view=b,e.isType=w||e.isType):(a.id=d,a.model=g,a.view=b,a.isType=w||function(C){if(C&&C.type==d)return!0},this.getTypes().unshift(a))}};const u0=xx;var Cx=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vw=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Cx(a,d),a}(L.pM.extend(u0));const oy=vw;vw.prototype.types=[{id:"image",model:fw,view:l0,isType:function(d){return"string"==typeof d?{type:"image",src:d}:d}}];var _w=function(d){return d.add="asset:add",d.remove="asset:remove",d.removeBefore="asset:remove:before",d.update="asset:update",d.open="asset:open",d.close="asset:close",d.uploadStart="asset:upload:start",d.uploadEnd="asset:upload:end",d.uploadError="asset:upload:error",d.uploadResponse="asset:upload:response",d.custom="asset:custom",d.all="asset",d}(_w||{});const df=_w;var fh=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zp=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;r.options=e,r.config=e.config,r.pfx=r.config.stylePrefix||"",r.ppfx=r.config.pStylePrefix||"",r.em=r.config.em;var o=r.collection;return r.listenTo(o,"reset",r.renderAssets),r.listenTo(o,"add",r.addToAsset),r.listenTo(o,"remove",r.removedAsset),r.listenTo(o,"deselectAll",r.deselectAll),r}return fh(a,d),a.prototype.template=function(e){var r=e.pfx,o=e.ppfx,c=e.em,g="";return this.config.showUrlInput&&(g='\n          <form class="'.concat(r,'add-asset">\n            <div class="').concat(o,"field ").concat(r,'add-field">\n              <input placeholder="').concat(c?.t("assetManager.inputPlh"),'"/>\n            </div>\n            <button class="').concat(o,'btn-prim">').concat(c?.t("assetManager.addButton"),'</button>\n            <div style="clear:both"></div>\n          </form>\n      ')),'\n    <div class="'.concat(r,'assets-cont">\n      <div class="').concat(r,'assets-header">\n        ').concat(g,'\n      </div>\n      <div class="').concat(r,'assets" data-el="assets"></div>\n      <div style="clear:both"></div>\n    </div>\n    ')},a.prototype.handleSubmit=function(e){e.preventDefault();var r=this.getAddInput(),o=r&&r.value.trim(),c=this.config.handleAdd;if(o){r.value="";var g=this.getAssetsEl();g&&(g.scrollTop=0),c?c.bind(this)(o):this.options.globalCollection.add(o,{at:0})}},a.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},a.prototype.getAddInput=function(){return(!this.inputUrl||!this.inputUrl.value)&&(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},a.prototype.removedAsset=function(e){this.collection.length||this.toggleNoAssets()},a.prototype.addToAsset=function(e){1==this.collection.length&&this.toggleNoAssets(!0),this.addAsset(e)},a.prototype.addAsset=function(e,r){void 0===r&&(r=null);var o=r,b=new e.typeView({model:e,collection:this.collection,config:this.config}).render().el;if(o)o.appendChild(b);else{var w=this.getAssetsEl();w&&w.insertBefore(b,w.firstChild)}return b},a.prototype.toggleNoAssets=function(e){void 0===e&&(e=!1);var r=this.$el.find(".".concat(this.pfx,"assets"));if(e)r.empty();else{var o=this.config.noAssets;o&&r.append(o)}},a.prototype.deselectAll=function(){var e=this.pfx;this.$el.find(".".concat(e,"highlight")).removeClass("".concat(e,"highlight"))},a.prototype.renderAssets=function(){var e=this,r=document.createDocumentFragment(),o=this.$el.find(".".concat(this.pfx,"assets"));o.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each(function(c){return e.addAsset(c,r)}),o.append(r)},a.prototype.render=function(){var e=this.options.fu.render().el;return this.$el.empty(),this.$el.append(e).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},a}(L.Ss);const yw=Zp;Zp.prototype.events={submit:"handleSubmit"};var cv=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ub=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;r.options=e;var o=e.config||{};r.module=e.module,r.config=o,r.em=r.config.em,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.target=r.options.globalCollection||{},r.uploadId=r.pfx+"uploadFile",r.disabled=void 0!==o.disableUpload?o.disableUpload:!o.upload&&!o.embedAsBase64,r.multiUpload=void 0===o.multiUpload||o.multiUpload;var c=o.uploadFile;return c?r.uploadFile=c.bind(r):!o.upload&&o.embedAsBase64&&(r.uploadFile=a.embedAsBase64),r.delegateEvents(),r}return cv(a,d),a.prototype.template=function(e){var r=e.pfx,o=e.title,c=e.uploadId,g=e.disabled,b=e.multiUpload;return H(qv||(qv=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}(['\n      <form>\n        <div id="','title">','</div>\n        <input\n          data-input\n          type="file"\n          id="','"\n          name="file"\n          accept="*/*"\n          ',"\n          ",'\n        />\n        <div style="clear:both;"></div>\n      </form>\n    '],['\n      <form>\n        <div id="','title">','</div>\n        <input\n          data-input\n          type="file"\n          id="','"\n          name="file"\n          accept="*/*"\n          ',"\n          ",'\n        />\n        <div style="clear:both;"></div>\n      </form>\n    '])),r,o,c,g?"disabled":"",b?"multiple":"")},a.prototype.events=function(){return{"change [data-input]":"uploadFile"}},a.prototype.onUploadStart=function(){var e=this.module;e?.__propEv(e.events.uploadStart)},a.prototype.onUploadEnd=function(e){var o=this.$el,c=this.module;c?.__propEv(c.events.uploadEnd,e);var g=o.find("input");g&&g.val("")},a.prototype.onUploadError=function(e){var r=this.module;console.error(e),this.onUploadEnd(e),r?.__propEv(r.events.uploadError,e)},a.prototype.onUploadResponse=function(e,r){var w,o=this,c=o.module,g=o.config,b=o.target;try{w="string"==typeof e?JSON.parse(e):e}catch{w=e}c?.__propEv(c.events.uploadResponse,w),g.autoAdd&&b&&b.add(w.data,{at:0}),this.onUploadEnd(e),r?.(w)},a.prototype.uploadFile=function(e,r){var o=this,c=e.dataTransfer?e.dataTransfer.files:e.target.files,g=this.config,b=g.beforeUpload;if(!1!==(b&&b(c))){var C=new FormData,B=g.params,ne=g.customFetch,ae=g.fetchOptions;for(var be in B)C.append(be,B[be]);if(this.multiUpload)for(var Se=0;Se<c.length;Se++)C.append("".concat(g.uploadName).concat(g.multiUploadSuffix),c[Se]);else c.length&&C.append(g.uploadName,c[0]);var We=g.upload,lt=g.headers,Ot="X-Requested-With";if(typeof lt[Ot]>"u"&&(lt[Ot]="XMLHttpRequest"),We){this.onUploadStart();var ur={method:"post",credentials:g.credentials||"include",headers:lt,body:C},Gt=ae?.(ur)||ur;return(ne?ne(We,Gt):tp(We,Gt).then(function(Fn){return 1==(Fn.status/200|0)?Fn.text():Fn.text().then(function(fo){return Promise.reject(fo)})})).then(function(Fn){return o.onUploadResponse(Fn,r)}).catch(function(Fn){return o.onUploadError(Fn)})}}},a.prototype.initDrop=function(){var e=this;if(!this.uploadForm){this.uploadForm=this.$el.find("form").get(0);var r=this.uploadForm;"draggable"in r&&(this.uploadForm.ondragover=function(){return r.className=e.pfx+"hover",!1},this.uploadForm.ondragleave=function(){return r.className="",!1},this.uploadForm.ondrop=function(o){r.className="",o.preventDefault(),e.uploadFile(o)})}},a.prototype.initDropzone=function(e){var r=this,o=0,c=this.config,g=e.model,b=e.el,w=g.Editor,C=g.Canvas.getBody(),B=this.ppfx,ne="".concat(B,"dropzone-active"),ae="".concat(B,"dropzone"),be=function(){b.className=b.className.replace(ne,"").trim(),o=0},Se=function(){return o||(b.className+=" ".concat(ne),o=1),!1},We=function(){return be(),!1},lt=function(Ot){if(be(),Ot.preventDefault(),Ot.stopPropagation(),r.uploadFile(Ot),c.openAssetsOnDrop&&w){var ur=w.getSelected();w.runCommand("open-assets",{target:ur,onSelect:function(){w.Modal.close(),w.AssetManager.setTarget(null)}})}return!1};e.$el.append('<div class="'.concat(ae,'">').concat(c.dropzoneContent,"</div>")),be(),"draggable"in b&&[b,C].forEach(function(Ot){Ot.ondragover=Se,Ot.ondragleave=We,Ot.ondrop=lt})},a.prototype.render=function(){var e=this,r=e.$el,o=e.pfx,c=e.em;return r.html(this.template({title:c&&c.t("assetManager.uploadTitle"),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:o})),this.initDrop(),r.attr("class",o+"file-uploader"),this},a.embedAsBase64=function(e,r){var o=this,g={data:[]};if(FileReader){for(var b=[],w=/^(.+)\/(.+)$/,C=function(be){var Se=new Promise(function(We,lt){var Ot=new FileReader;Ot.addEventListener("load",function(ur){var Gt,ar=be.name,Fn=w.exec(be.type);if("image"===(Gt=Fn?Fn[1]:be.type)){var fo={src:Ot.result,name:ar,type:Gt,height:0,width:0},ti=new Image;ti.addEventListener("error",function(jn){lt(jn)}),ti.addEventListener("load",function(){fo.height=ti.height,fo.width=ti.width,We(fo)}),ti.src=fo.src}else We(Gt?{src:Ot.result,name:ar,type:Gt}:Ot.result)}),Ot.addEventListener("error",function(ur){lt(ur)}),Ot.addEventListener("abort",function(ur){lt("Aborted")}),Ot.readAsDataURL(be)});b.push(Se)},B=0,ne=e.dataTransfer?e.dataTransfer.files:e.target.files;B<ne.length;B++)C(ne[B]);return Promise.all(b).then(function(be){g.data=be,o.onUploadResponse(g,r)},function(be){o.onUploadError(be)})}this.onUploadError(new Error("Unsupported platform, FileReader is not defined"))},a}(L.Ss);const Gv=Ub;var qv,Ox=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$v=function(){return $v=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},$v.apply(this,arguments)},ww=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},iy="open-assets",Dx=function(d){function a(e){var r=d.call(this,e,"AssetManager",new oy([],e),df,{assets:[],noAssets:"",stylePrefix:"am-",upload:"",uploadName:"files",headers:{},params:{},credentials:"include",multiUpload:!0,multiUploadSuffix:"[]",autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:""})||this;r.storageKey="assets",r.Asset=jb,r.Assets=oy,r.events=df;var c=r.all,g=r.config;r.assetsVis=new oy([]);var b=g.pStylePrefix;return b&&(g.stylePrefix="".concat(b).concat(g.stylePrefix)),c.on("add",function(w){return r.getAllVisible().add(w)}),c.on("remove",function(w){return r.getAllVisible().remove(w)}),r.__onAllEvent=(0,x.debounce)(function(){return r.__trgCustom()},0),r}return Ox(a,d),a.prototype.open=function(e){void 0===e&&(e={}),this.em.Commands.run(iy,$v({types:["image"],select:function(){}},e))},a.prototype.close=function(){this.em.Commands.stop(iy)},a.prototype.isOpen=function(){var e=this.em.Commands;return!!e?.isActive(iy)},a.prototype.add=function(e,r){return void 0===r&&(r={}),typeof r.at>"u"&&(r.at=0),this.all.add(e,r)},a.prototype.get=function(e){return this.all.where({src:e})[0]||null},a.prototype.getAll=function(){return this.all},a.prototype.getAllVisible=function(){return this.assetsVis},a.prototype.remove=function(e,r){return this.__remove(e,r)},a.prototype.store=function(){return this.getProjectData()},a.prototype.load=function(e){return this.loadProjectData(e)},a.prototype.getContainer=function(){var e;return this.__getBehaviour().container||(null===(e=this.am)||void 0===e?void 0:e.el)},a.prototype.getAssetsEl=function(){var e;return null===(e=this.am)||void 0===e?void 0:e.el.querySelector("[data-el=assets]")},a.prototype.render=function(e){if(!this.getConfig().custom){var r=e||this.getAll().models;if(!this.am){var o=this.__viewParams();o.fu=this.FileUploader(),this.am=new yw($v({},o)),this.am.render()}return this.assetsVis.reset(r),this.getContainer()}},a.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},a.prototype.addType=function(e,r){this.getAll().addType(e,r)},a.prototype.getType=function(e){return this.getAll().getType(e)},a.prototype.getTypes=function(){return this.getAll().getTypes()},a.prototype.AssetsView=function(){return this.am},a.prototype.FileUploader=function(){return this.fu||(this.fu=new Gv(this.__viewParams())),this.fu},a.prototype.onLoad=function(){var e=this;this.getAll().reset(this.config.assets);var o=this.em,c=this.events;o.Commands.__onRun(iy,function(){return e.__propEv(c.open)}),o.Commands.__onStop(iy,function(){return e.__propEv(c.close)})},a.prototype.postRender=function(e){var r;this.config.dropzone&&(null===(r=this.fu)||void 0===r||r.initDropzone(e))},a.prototype.setTarget=function(e){this.assetsVis.target=e},a.prototype.onSelect=function(e){this.assetsVis.onSelect=e},a.prototype.onClick=function(e){this.config.onClick=e},a.prototype.onDblClick=function(e){this.config.onDblClick=e},a.prototype.__propEv=function(e){for(var r,o,c=[],g=1;g<arguments.length;g++)c[g-1]=arguments[g];(r=this.em).trigger.apply(r,ww([e],c,!1)),(o=this.getAll()).trigger.apply(o,ww([e],c,!1))},a.prototype.__trgCustom=function(){var e=this.__getBehaviour(),r=this.getConfig().custom;!e.container&&!r.open||this.em.trigger(this.events.custom,this.__customData())},a.prototype.__customData=function(){var e=this,r=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:r.types||[],container:r.container,close:function(){return e.close()},remove:function(o,c){return e.remove(o,c)},select:function(o,c){var g=e.add(o);(0,x.isFunction)(r.select)&&r.select(g,c)},options:r.options||{}}},a.prototype.__behaviour=function(e){return void 0===e&&(e={}),this._bhv=$v($v({},this._bhv||{}),e)},a.prototype.__getBehaviour=function(e){return void 0===e&&(e={}),this._bhv||{}},a.prototype.destroy=function(){var e,r;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),null===(e=this.fu)||void 0===e||e.remove(),null===(r=this.am)||void 0===r||r.remove(),this._bhv={}},a}(je);const pf=Dx;var Bb=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xw=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e,r)||this,c=r.em,g={};o.em=c,e.frames||(g.component=e.component,g.styles=e.styles,["component","styles"].map(function(C){return o.unset(C)}));var w=new Ki(c.Canvas,e.frames||[g]);return w.page=o,o.set("frames",w),!o.getId()&&o.set("id",c?.Pages._createId()),c?.UndoManager.add(w),o}return Bb(a,d),a.prototype.defaults=function(){return{name:"",frames:[],_undo:!0}},a.prototype.onRemove=function(){this.getFrames().reset()},a.prototype.getFrames=function(){return this.get("frames")},a.prototype.getId=function(){return this.id},a.prototype.getName=function(){return this.get("name")},a.prototype.setName=function(e){return this.set({name:e})},a.prototype.getAllFrames=function(){return this.getFrames().models||[]},a.prototype.getMainFrame=function(){return this.getFrames().at(0)},a.prototype.getMainComponent=function(){var e=this.getMainFrame();return e?.getComponent()},a.prototype.toJSON=function(e){void 0===e&&(e={});var r=L.Kx.prototype.toJSON.call(this,e),o=(0,x.result)(this,"defaults");return(0,x.forEach)(r,function(c,g){0===g.indexOf("_")&&delete r[g]}),(0,x.forEach)(o,function(c,g){r[g]===c&&delete r[g]}),r},a}(L.Kx);const d0=xw;var Wb=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),jg=function(){return jg=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},jg.apply(this,arguments)},Tx=function(d){function a(e,r){var o=d.call(this,e)||this;return o.on("reset",o.onReset),o.on("remove",o.onRemove),o.model=function(c,g){return void 0===g&&(g={}),new d0(c,jg(jg({},g),{em:r}))},o}return Wb(a,d),a.prototype.onReset=function(e,r){var c,o=this;null===(c=r?.previousModels)||void 0===c||c.map(function(g){return o.onRemove(g,o,r)})},a.prototype.onRemove=function(e,r,o){void 0===o&&(o={}),!o.fromUndo&&!o.temporary&&e?.onRemove()},a}(L.pM);const Sx=Tx;var Cw=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jv=function(){return Jv=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Jv.apply(this,arguments)},Ew="change:selected",Ax=function(d){function a(e){var r=d.call(this,e,"PageManager",new Sx([],e),Vo)||this;r.events=Vo,r.storageKey="pages",(0,x.bindAll)(r,"_onPageChange");var o=new ke.A(r,{_undo:!0});return r.model=o,r.pages.on("reset",function(c){return c.at(0)&&r.select(c.at(0))}),r.pages.on("all",r.__onChange,r),o.on(Ew,r._onPageChange),r}return Cw(a,d),Object.defineProperty(a.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),a.prototype.getAll=function(){return function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],this.all.models,!0)},a.prototype.__onChange=function(e,r,o,c){this.em.trigger(this.events.all,{event:e,page:r,options:c||o})},a.prototype.onLoad=function(){var e,r=this,o=r.pages,c=r.config,g=r.em,b={silent:!0},w=(null===(e=c.pages)||void 0===e?void 0:e.map(function(B){return new d0(B,{em:g,config:c})}))||[];o.add(w,b);var C=o.length?this._initPage():this.add({type:"main"},b);C&&this.select(C,b)},a.prototype._onPageChange=function(e,r,o){var g=this.em,b=this.events,w=g.Layers,C=r.getMainComponent();w&&C&&w.setRoot(C),g.trigger(b.select,r,e.previous("selected")),this.__onChange(Ew,r,o)},a.prototype.postLoad=function(){var e=this,r=e.em,c=e.pages,g=r.UndoManager;g.add(e.model),g.add(c),c.on("add remove reset change",function(b,w,C){return r.changesUp(C||w)})},a.prototype.add=function(e,r){var o=this;void 0===r&&(r={});var g=this.em,b=this.events;e.id=e.id||this._createId();var w=function(){var C=o.pages.add(new d0(e,{em:o.em,config:o.config}),r);return r.select&&o.select(C),C};return!r.silent&&g.trigger(b.addBefore,e,w,r),r.abort?void 0:w()},a.prototype.remove=function(e,r){var o=this;void 0===r&&(r={});var g=this.em,b=this.events,w=(0,x.isString)(e)?this.get(e):e,C=function(){return w&&o.pages.remove(w,r),w};return!r.silent&&g.trigger(b.removeBefore,w,C,r),!r.abort&&C()},a.prototype.move=function(e,r){void 0===r&&(r={});var o=this.pages,c=(0,x.isString)(e)?this.get(e):e,g=r.at,b=void 0===g?0:g,w=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(r,["at"]);if(c){var C=o.indexOf(c);if(!(b<0||b>=o.length||C===b))return this.remove(c,Jv(Jv({},w),{temporary:!0})),o.add(c,Jv(Jv({},w),{at:b})),c}},a.prototype.get=function(e){return this.pages.filter(function(r){return r.get(r.idAttribute)===e})[0]},a.prototype.getMain=function(){var e=this.pages;return e.filter(function(r){return"main"===r.get("type")})[0]||e.at(0)},a.prototype.getAllWrappers=function(){var e=this.getAll();return(0,x.unique)((0,x.flatten)(e.map(function(r){return r.getAllFrames().map(function(o){return o.getComponent()})})))},a.prototype.select=function(e,r){void 0===r&&(r={});var o=this,c=o.em,g=o.model,b=o.events,w=(0,x.isString)(e)?this.get(e):e;return w&&(c.trigger(b.selectBefore,w,r),g.set("selected",w,r)),this},a.prototype.getSelected=function(){return this.model.get("selected")},a.prototype.destroy=function(){var e=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),["selected","model"].map(function(r){return e[r]=0})},a.prototype.store=function(){return this.getProjectData()},a.prototype.load=function(e){var r=this.loadProjectData(e,{all:this.pages,reset:!0});return this.pages.forEach(function(o){return o.getFrames().initRefs()}),r},a.prototype._initPage=function(){return this.get(this.config.selected)||this.getMain()},a.prototype._createId=function(){var c,r=this.getAll().length+16,o=this.getAllMap();do{c=(0,z.createId)(r)}while(o[c]);return c},a}(je);const p0=Ax;var Zb={placeholder:"eg. Text here"};const kx={assetManager:{addButton:"Add image",inputPlh:"http://path/to/the/image.jpg",modalTitle:"Select Image",uploadTitle:"Drop files here or click to upload"},blockManager:{labels:{},categories:{}},domComponents:{names:{"":"Box",wrapper:"Body",text:"Text",comment:"Comment",image:"Image",video:"Video",label:"Label",link:"Link",map:"Map",tfoot:"Table foot",tbody:"Table body",thead:"Table head",table:"Table",row:"Table row",cell:"Table cell"}},deviceManager:{device:"Device",devices:{desktop:"Desktop",tablet:"Tablet",mobileLandscape:"Mobile Landscape",mobilePortrait:"Mobile Portrait"}},panels:{buttons:{titles:{preview:"Preview",fullscreen:"Fullscreen","sw-visibility":"View components","export-template":"View code","open-sm":"Open Style Manager","open-tm":"Settings","open-layers":"Open Layer Manager","open-blocks":"Open Blocks"}}},selectorManager:{label:"Classes",selected:"Selected",emptyState:"- State -",states:{hover:"Hover",active:"Click","nth-of-type(2n)":"Even/Odd"}},styleManager:{empty:"Select an element before using Style Manager",layer:"Layer",fileButton:"Images",sectors:{general:"General",layout:"Layout",typography:"Typography",decorations:"Decorations",extra:"Extra",flex:"Flex",dimension:"Dimension"},properties:{"text-shadow-h":"X","text-shadow-v":"Y","text-shadow-blur":"Blur","text-shadow-color":"Color","box-shadow-h":"X","box-shadow-v":"Y","box-shadow-blur":"Blur","box-shadow-spread":"Spread","box-shadow-color":"Color","box-shadow-type":"Type","margin-top-sub":"Top","margin-right-sub":"Right","margin-bottom-sub":"Bottom","margin-left-sub":"Left","padding-top-sub":"Top","padding-right-sub":"Right","padding-bottom-sub":"Bottom","padding-left-sub":"Left","border-width-sub":"Width","border-style-sub":"Style","border-color-sub":"Color","border-top-left-radius-sub":"Top Left","border-top-right-radius-sub":"Top Right","border-bottom-right-radius-sub":"Bottom Right","border-bottom-left-radius-sub":"Bottom Left","transform-rotate-x":"Rotate X","transform-rotate-y":"Rotate Y","transform-rotate-z":"Rotate Z","transform-scale-x":"Scale X","transform-scale-y":"Scale Y","transform-scale-z":"Scale Z","transition-property-sub":"Property","transition-duration-sub":"Duration","transition-timing-function-sub":"Timing","background-image-sub":"Image","background-repeat-sub":"Repeat","background-position-sub":"Position","background-attachment-sub":"Attachment","background-size-sub":"Size"}},traitManager:{empty:"Select an element before using Trait Manager",label:"Component settings",categories:{},traits:{labels:{},attributes:{id:Zb,alt:Zb,title:Zb,href:{placeholder:"eg. https://google.com"}},options:{target:{false:"This window",_blank:"New window"}}}},storageManager:{recover:"Do you want to recover unsaved changes?"}};var Dw=function(d){return d.add="i18n:add",d.update="i18n:update",d.locale="i18n:locale",d}(Dw||{});const Tw=Dw;var Sw=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Pw=function(d){function a(e){var r=d.call(this,e,"I18n",{locale:"en",localeFallback:"en",detectLocale:!0,debug:!1,messages:{en:kx},messagesAdd:void 0})||this;r.events=Tw;var o=r.config.messagesAdd;return o&&r.addMessages(o),r.config.detectLocale&&(r.config.locale=r._localLang()),r}return Sw(a,d),a.prototype.setLocale=function(e){var r=this,c=r.config;return r.em.trigger(r.events.locale,{value:e,valuePrev:c.locale}),c.locale=e,this},a.prototype.getLocale=function(){return this.config.locale},a.prototype.getMessages=function(e,r){void 0===r&&(r={});var o=this.config.messages;return e&&!o[e]&&this._debug("'".concat(e,"' i18n lang not found"),r),e?o[e]:o},a.prototype.setMessages=function(e){var r=this,o=r.em,g=r.events;return r.config.messages=e,o.trigger(g.update,e),this},a.prototype.addMessages=function(e){var r=this,b=r.config.messages;return r.em.trigger(r.events.add,e),this.setMessages((0,z.deepMerge)(b,e)),this},a.prototype.t=function(e,r){void 0===r&&(r={});var o=this.config,c=r.params||{},g=r.l||this.getLocale(),b=r.lFlb||o.localeFallback,w=this._getMsg(e,g,r);return w||(w=this._getMsg(e,b,r)),!w&&this._debug("'".concat(e,"' i18n key not found in '").concat(g,"' lang"),r),w&&(0,x.isString)(w)?this._addParams(w,c):w},a.prototype._localLang=function(){var e=(0,z.hasWin)()&&window.navigator||{},r=e.language||e.userLanguage;return r?r.split("-")[0]:"en"},a.prototype._addParams=function(e,r){var o=new RegExp("{([\\w\\d-]*)}","g");return e.replace(o,function(c,g){return r[g]||""}).trim()},a.prototype._getMsg=function(e,r,o){void 0===o&&(o={});var c=this.getMessages(r,o);if(c){var g=c[e];return!g&&e.indexOf(".")>0&&(g=e.split(".").reduce(function(b,w){if(!(0,x.isUndefined)(b))return b[w]},c)),g}},a.prototype._debug=function(e,r){void 0===r&&(r={});var c=this.em;(r.debug||this.config.debug)&&c&&c.logWarning(e)},a.prototype.destroy=function(){},a}(Oe);const Mw=Pw;var Ng=function(){return Ng=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ng.apply(this,arguments)},Vb=function(){function d(a){void 0===a&&(a={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:"px",unitWidth:"px",keyHeight:"height",keyWidth:"width",currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=Ng({},this.defOpts),this.setOptions(a),(0,x.bindAll)(this,"handleKeyDown","handleMouseDown","move","stop")}return d.prototype.getConfig=function(){return this.opts},d.prototype.setOptions=function(a,e){void 0===a&&(a={}),this.opts=Ng(Ng({},e?this.defOpts:this.opts),a),this.setup()},d.prototype.setup=function(){var a=this.opts,e=a.prefix||"",r=a.appendTo||document.body,o=this.container;for(o||((o=document.createElement("div")).className="".concat(e,"resizer-c"),r.appendChild(o),this.container=o);o.firstChild;)o.removeChild(o.firstChild);var c={};for(var g in["tl","tc","tr","cl","cr","bl","bc","br"].forEach(function(w){return c[w]=a[w]?function(d,a){void 0===a&&(a={});var e=a.prefix||"",r=document.createElement("i");return r.className=e+"resizer-h "+e+"resizer-h-"+d,r.setAttribute("data-"+e+"handler",d),r}(w,a):null}),c){var b=c[g];b&&o.appendChild(b)}this.handlers=c,this.mousePosFetcher=a.mousePosFetcher,this.updateTarget=a.updateTarget,this.posFetcher=a.posFetcher,this.onStart=a.onStart,this.onMove=a.onMove,this.onEnd=a.onEnd,this.onUpdateContainer=a.onUpdateContainer},d.prototype.toggleFrames=function(a){if(this.opts.silentFrames){var e=document.querySelectorAll("iframe");(0,x.each)(e,function(r){return r.style.pointerEvents=a?"none":""})}},d.prototype.isHandler=function(a){var e=this.handlers;for(var r in e)if(e[r]===a)return!0;return!1},d.prototype.getFocusedEl=function(){return this.el},d.prototype.getParentEl=function(){var a;return null===(a=this.el)||void 0===a?void 0:a.parentElement},d.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},d.prototype.getElementPos=function(a,e){void 0===e&&(e={});var r=this.posFetcher;return r?r(a,e):function(d,a){var e=window,r=d.getBoundingClientRect();return{left:r.left+e.pageXOffset,top:r.top+e.pageYOffset,width:r.width,height:r.height}}(a)},d.prototype.focus=function(a){a&&a===this.el||(this.el=a,this.updateContainer({forceShow:!0}),(0,Ln.on)(this.getDocumentEl(),"pointerdown",this.handleMouseDown))},d.prototype.blur=function(){this.container.style.display="none",this.el&&((0,Ln.AU)(this.getDocumentEl(),"pointerdown",this.handleMouseDown),delete this.el)},d.prototype.start=function(a){var e=a;if(0===e.button){e.preventDefault(),e.stopPropagation();var r=this.el,o=this.getParentEl(),g=this.opts||{},b=this.mousePosFetcher,w="data-"+g.prefix+"handler",C=this.getElementPos(r,{avoidFrameZoom:!0,avoidFrameOffset:!0}),B=this.getElementPos(o),ne=e.target;this.handlerAttr=ne.getAttribute(w),this.clickedHandler=ne,this.startDim={t:C.top,l:C.left,w:C.width,h:C.height},this.rectDim={t:C.top,l:C.left,w:C.width,h:C.height},this.startPos=b?b(e):{x:e.clientX,y:e.clientY},this.parentDim={t:B.top,l:B.left,w:B.width,h:B.height};var ae=this.getDocumentEl();this.docs=ae,(0,Ln.on)(ae,"pointermove",this.move),(0,Ln.on)(ae,"keydown",this.handleKeyDown),(0,Ln.on)(ae,"pointerup",this.stop),(0,x.isFunction)(this.onStart)&&this.onStart(e,{docs:ae,config:g,el:r,resizer:this}),this.toggleFrames(!0),this.move(e)}},d.prototype.move=function(a){var e=a,r=this.onMove,o=this.mousePosFetcher,c=o?o(e):{x:e.clientX,y:e.clientY};this.currentPos=c,this.delta={x:c.x-this.startPos.x,y:c.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(!1),r&&r(e)},d.prototype.stop=function(a){var e=this.el,r=this.opts,o=this.docs||this.getDocumentEl();(0,Ln.AU)(o,"pointermove",this.move),(0,Ln.AU)(o,"keydown",this.handleKeyDown),(0,Ln.AU)(o,"pointerup",this.stop),this.updateRect(!0),this.toggleFrames(),(0,x.isFunction)(this.onEnd)&&this.onEnd(a,{docs:o,config:r,el:e,resizer:this}),delete this.docs},d.prototype.updateRect=function(a){var e=this.el,o=this.opts,c=this.rectDim,g=this.updateTarget,b=this.getSelectedHandler(),w=o.unitHeight,C=o.unitWidth,B=o.keyWidth,ne=o.keyHeight;if((0,x.isFunction)(g))g(e,c,{store:a,selectedHandler:b,resizer:this,config:o});else{var ae=e.style;ae[B]=c.w+C,ae[ne]=c.h+w}this.updateContainer()},d.prototype.updateContainer=function(a){var e;void 0===a&&(a={});var r=this,o=r.opts,c=r.container;!o.avoidContainerUpdate&&r.el&&a.forceShow&&(c.style.display="block"),null===(e=this.onUpdateContainer)||void 0===e||e.call(this,{el:c,resizer:this,opts:Ng(Ng({},o),a)})},d.prototype.getSelectedHandler=function(){var a=this.handlers;if(this.selectedHandler)for(var e in a)if(a[e]===this.selectedHandler)return e},d.prototype.handleKeyDown=function(a){27===a.keyCode&&(this.rectDim=this.startDim,this.stop(a))},d.prototype.handleMouseDown=function(a){var e=a.target;this.isHandler(e)?(this.selectedHandler=e,this.start(a)):e!==this.el&&(delete this.selectedHandler,this.blur())},d.prototype.calc=function(a){var e,r=this.opts||{},o=r.step,c=this.startDim,g=r.minDim,b=r.maxDim,w=a.delta.x,C=a.delta.y,B=this.parentDim.w,ne=this.parentDim.h,ae=this.opts.unitWidth,be=this.opts.unitHeight,Se=this.getParentRect(),We="%"===ae?c.w/100*B:c.w,lt="%"===be?c.h/100*ne:c.h,Ot={t:c.t-Se.top,l:c.l-Se.left,w:We,h:lt};if(a){var ur=a.handlerAttr;~ur.indexOf("r")&&(e="%"===ae?(0,z.normalizeFloat)((We+w*o)/B*100,.01):(0,z.normalizeFloat)(We+w*o,o),e=Math.max(g,e),b&&(e=Math.min(b,e)),Ot.w=e),~ur.indexOf("b")&&(e="%"===be?(0,z.normalizeFloat)((lt+C*o)/ne*100,.01):(0,z.normalizeFloat)(lt+C*o,o),e=Math.max(g,e),b&&(e=Math.min(b,e)),Ot.h=e),~ur.indexOf("l")&&(e="%"===ae?(0,z.normalizeFloat)((We-w*o)/B*100,.01):(0,z.normalizeFloat)(We-w*o,o),e=Math.max(g,e),b&&(e=Math.min(b,e)),Ot.w=e),~ur.indexOf("t")&&(e="%"===be?(0,z.normalizeFloat)((lt-C*o)/ne*100,.01):(0,z.normalizeFloat)(lt-C*o,o),e=Math.max(g,e),b&&(e=Math.min(b,e)),Ot.h=e);var Gt=r.ratioDefault?!a.keys.shift:a.keys.shift;if(ur.indexOf("c")<0&&Gt){var ar=c.w/c.h;Ot.w/Ot.h>ar?Ot.h=Math.round(Ot.w/ar):Ot.w=Math.round(Ot.h*ar)}for(var Fn in~ur.indexOf("l")&&(Ot.l+=c.w-Ot.w),~ur.indexOf("t")&&(Ot.t+=c.h-Ot.h),Ot)Ot[Fn]=parseInt("".concat(Ot[Fn]),10);return Ot}},d.prototype.getParentRect=function(){var a={left:0,top:0,width:0,height:0},e=this.el;if(!e)return a;var r=e.offsetParent;return r&&"BODY"!==r.tagName&&(a=this.getElementPos(r)),a},d}();const Rx=Vb;var hh=function(){return hh=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},hh.apply(this,arguments)};function Lw(d){var a=d.getBoundingClientRect();return{top:a.top+document.body.scrollTop,left:a.left+document.body.scrollLeft}}function f0(d,a){return z.matches.call(d,a)}function zb(d){return d?[d].concat(zb(d.parent())):[]}var jw=function(){function d(a){this.timeout=null,this.threshold=a}return d.prototype.updateArgs=function(a){this.lastArgs=a},d.prototype.execute=function(a){var e=this;this.timeout||(this.timeout=setTimeout(function(){e.lastArgs&&a(e.lastArgs),e.timeout=null},this.threshold))},d.prototype.clearTimeout=function(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),delete this.lastArgs},d}(),Hb=function(){return Hb=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Hb.apply(this,arguments)},Bx=function(){function d(a){this.top=a.top,this.left=a.left,this.height=a.height,this.width=a.width,this.offsets=a.offsets,this.dir=a.dir}return d.prototype.calculateDimensionDifference=function(a){return{topDifference:a.top-this.top,leftDifference:a.left-this.left}},d.prototype.adjustDimensions=function(a){return this.top+=a.topDifference,this.left+=a.leftDifference,this},d.prototype.determinePlacement=function(a,e){return this.dir?e<this.top+this.height/2?"before":"after":a<this.left+this.width/2?"before":"after"},d.prototype.equals=function(a){return!!a&&this.top===a.top&&this.left===a.left&&this.height===a.height&&this.width===a.width&&this.dir===a.dir&&JSON.stringify(this.offsets)===JSON.stringify(a.offsets)},d.prototype.clone=function(){return new d({top:this.top,left:this.left,height:this.height,width:this.width,offsets:Hb({},this.offsets),dir:this.dir})},d.prototype.getDropArea=function(a){var e=this.clone(),r=this.adjustDropDimension(this.width,this.left,a),c=r.newPosition;e.width=r.newSize,e.left=c;var g=this.adjustDropDimension(this.height,this.top,a),w=g.newPosition;return e.height=g.newSize,e.top=w,e},d.prototype.adjustDropDimension=function(a,e,r){var g=r.maxUndroppableDimension,b=a*(1-r.ratio)/2;return b=Math.max(b,r.minUndroppableDimension),{newSize:a-2*(b=Math.min(b,g)),newPosition:e+b}},d.prototype.isWithinBounds=function(a,e){return a>=this.left&&a<=this.left+this.width&&e>=this.top&&e<=this.top+this.height},d}();const Wx=Bx;var Gb=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),h0=function(){return h0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},h0.apply(this,arguments)},Zx=function(d){function a(e){var r=d.call(this)||this;return r.sourceNodes=[],r.containerOffset={top:0,left:0},r.moveThreshold=20,r.treeClass=e.treeClass,r.em=e.em,r.containerContext=e.containerContext,r.positionOptions=e.positionOptions,r.dragDirection=e.dragDirection,r.eventHandlers=e.eventHandlers,(0,x.bindAll)(r,"endDrag","cancelDrag","recalculateTargetOnScroll","startSort","onDragStart","onMove"),r.restLastMoveData(),r.rateLimiter=new jw(r.moveThreshold),r}return Gb(a,d),a.prototype.startSort=function(e){this.sourceNodes=e,this.bindDragEventHandlers()},a.prototype.bindDragEventHandlers=function(){(0,Ln.on)(this.containerContext.container,"dragstart",this.onDragStart),(0,Ln.on)(this.containerContext.container,"mousemove dragover",this.onMove),(0,Ln.on)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},a.prototype.recalculateTargetOnScroll=function(){var e=this.lastMoveData.mouseEvent;e&&this.onMove(e)},a.prototype.onMove=function(e){this.rateLimiter.updateArgs(e),this.rateLimiter.execute(this.handleMove.bind(this))},a.prototype.handleMove=function(e){var r,o,c,g,b,w;this.adjustForScroll();var C=this.lastMoveData.targetNode;null===(o=(r=this.eventHandlers).onMouseMove)||void 0===o||o.call(r,e);var B=this.getMousePositionRelativeToContainer(e.clientX,e.clientY),ne=B.mouseXRelative,ae=B.mouseYRelative,be=this.getTargetNode(e);if(!be?.equals(C)&&(null===(g=(c=this.eventHandlers).onTargetChange)||void 0===g||g.call(c,C,be)),!be)return this.triggerLegacyOnMoveCallback(e,0),this.triggerMoveEvent(ne,ae),void this.restLastMoveData();var We=this.getDropPosition(be,ne,ae),lt=We.index,Ot=We.placement,ur=We.placeholderDimensions;(!ur.equals(this.lastMoveData.placeholderDimensions)||Ot!==this.lastMoveData.placement)&&(null===(w=(b=this.eventHandlers).onPlaceholderPositionChange)||void 0===w||w.call(b,ur,Ot)),this.lastMoveData=h0(h0({},this.lastMoveData),{targetNode:be,mouseEvent:e,index:lt,placement:Ot,placeholderDimensions:ur}),this.triggerMoveEvent(ne,ae),this.triggerLegacyOnMoveCallback(e,lt)},a.prototype.adjustForScroll=function(){var e,r,o=this.lastMoveData.targetNode;if(o?.element){var c=this.getDim(o?.element);(g=null===(e=o.nodeDimensions)||void 0===e?void 0:e.calculateDimensionDifference(c))&&o.adjustDimensions(g)}var g,b=this.lastMoveData.hoveredNode;b?.element&&(c=this.getDim(b?.element),(g=null===(r=b.nodeDimensions)||void 0===r?void 0:r.calculateDimensionDifference(c))&&b.adjustDimensions(g))},a.prototype.restLastMoveData=function(){this.lastMoveData={targetNode:void 0,index:void 0,placement:void 0,mouseEvent:void 0}},a.prototype.triggerLegacyOnMoveCallback=function(e,r){var o,c,g,b,w=null===(o=this.sourceNodes[0])||void 0===o?void 0:o.model;null===(g=(c=this.eventHandlers).legacyOnMoveClb)||void 0===g||g.call(c,{event:e,target:w,parent:null===(b=this.lastMoveData.targetNode)||void 0===b?void 0:b.model,index:r})},a.prototype.triggerMoveEvent=function(e,r){var o,c=this.lastMoveData,g=c.targetNode,b=c.placement,w=c.index,C=w?w+("after"===b?-1:0):0;this.em.trigger("sorter:drag",{target:g?.element||null,targetModel:null===(o=this.lastMoveData.targetNode)||void 0===o?void 0:o.model,sourceModel:this.sourceNodes[0].model,dims:g?.childrenDimensions||[],pos:{index:C,indexEl:C,placement:b},x:e,y:r})},a.prototype.getDropPosition=function(e,r,o){var c,g=e.nodeDimensions,b=e.childrenDimensions,w=e.getChildren(),C=w&&w.length>0;g=g||this.getDim(e.element),e.nodeDimensions=g,b=b||this.getChildrenDim(e),e.childrenDimensions=b;var B=g.clone(),ne=0,ae="inside";return C&&(c=function kw(d,a,e){for(var ne,r={index:0,placement:"before"},o=0,c=0,b=0,w=0,C=0,B=0,ae=0,be=d.length;ae<be;ae++){var Se=(ne=d[ae]).top,We=ne.left,lt=ne.height,Ot=ne.width;if(B=Se+lt,w=We+Ot/2,C=Se+lt/2,!(c&&We>c||b&&C>=b||o&&We+Ot<o))if(r.index=ae,ne.dir){if(e<C){r.placement="before";break}r.placement="after"}else e<B&&(b=B),a<w?(c=w,r.placement="before"):(o=w,r.placement="after")}return r}(b,r,o),ae=c.placement,B=b[ne=c.index].clone(),ne+="after"==ae?1:0),{index:ne,placement:ae,placeholderDimensions:B}},a.prototype.getTargetNode=function(e){var r;this.cacheContainerPosition(this.containerContext.container);var o=this.getMousePositionRelativeToContainer(e.clientX,e.clientY),c=o.mouseXRelative,g=o.mouseYRelative,b=this.getMouseTargetElement(e),w=this.getFirstElementWithAModel(b);if(w){var C=null===(r=(0,T.default)(w))||void 0===r?void 0:r.data("model");if(C){var B=this.getOrCreateHoveredNode(C),ne=this.getDropPosition(B,c,g).index,ae=this.getValidParent(B,ne,c,g);return this.getOrReuseTargetNode(ae)}}},a.prototype.getOrCreateHoveredNode=function(e){var r=this.lastMoveData.hoveredNode,o=new this.treeClass(e),c=o.equals(r)?r:o;return this.lastMoveData.hoveredNode=c,c},a.prototype.getOrReuseTargetNode=function(e){var r=this.lastMoveData.targetNode;return e?.equals(r)?r:e},a.prototype.getMouseTargetElement=function(e){var r=this.containerContext.customTarget,o=this.containerContext.document.elementFromPoint(e.clientX,e.clientY);return r?r({event:e}):o},a.prototype.onDragStart=function(e){this.eventHandlers.onDragStart&&this.eventHandlers.onDragStart(e)},a.prototype.endDrag=function(){this.dropDragged()},a.prototype.cancelDrag=function(){var e,r;null===(r=(e=this.eventHandlers).onTargetChange)||void 0===r||r.call(e,this.lastMoveData.targetNode,void 0),this.finalizeMove()},a.prototype.finalizeMove=function(){var e,r,o,c;this.cleanupEventListeners(),this.triggerOnDragEndEvent(),null===(r=(e=this.eventHandlers).onEnd)||void 0===r||r.call(e),null===(c=(o=this.eventHandlers).legacyOnEnd)||void 0===c||c.call(o),this.restLastMoveData(),this.rateLimiter.clearTimeout()},a.prototype.dropDragged=function(){var e,r,o=this.lastMoveData;null===(r=(e=this.eventHandlers).onDrop)||void 0===r||r.call(e,o.targetNode,this.sourceNodes,o.index),this.finalizeMove()},a.prototype.triggerOnDragEndEvent=function(){var e=this.lastMoveData.targetNode,r=this.sourceNodes[0];this.em.trigger("sorter:drag:end",{targetCollection:e?e.getChildren():null,modelToDrop:r?.model,warns:[""],validResult:{result:!0,src:this.sourceNodes.map(function(o){return o.element}),srcModel:r?.model,trg:e?.element,trgModel:e?.model,draggable:!0,droppable:!0},dst:e?.element,srcEl:r?.element})},a.prototype.getFirstElementWithAModel=function(e){for(;e&&this.containerContext.container.contains(e);){if(void 0!==(0,T.default)(e).data("model"))return e;e=e.parentElement}return null},a.prototype.getValidParent=function(e,r,o,c){if(e){var g=this.lastMoveData.targetNode,b=e.equals(g);if(e.nodeDimensions=b?g.nodeDimensions:this.getDim(e.element),!e.isWithinDropBounds(o,c))return this.handleParentTraversal(e,o,c);if(b&&r===this.lastMoveData.index)return g;var C=this.sourceNodes.some(function(B){return e.canMove(B,r)});return this.triggerDragValidation(C,e),C?e:this.handleParentTraversal(e,o,c)}},a.prototype.handleParentTraversal=function(e,r,o){var c=e.getParent();if(c){var g=this.getIndexInParent(c,e,e.nodeDimensions,r,o);return this.getValidParent(c,g,r,o)}},a.prototype.getIndexInParent=function(e,r,o,c,g){var b=e?.indexOfChild(r);return o.dir=this.getDirection(r.element,e.element),b+("after"==o.determinePlacement(c,g)?1:0)},a.prototype.triggerDragValidation=function(e,r){var o=this.sourceNodes[0];return this.em.trigger("sorter:drag:validation",{valid:e,src:o?.element,srcModel:o?.model,trg:r.element,trgModel:r.model}),o},a.prototype.cleanupEventListeners=function(){var e=this.containerContext.container;(0,Ln.AU)(e,"dragstart",this.onDragStart),(0,Ln.AU)(e,"mousemove dragover",this.onMove),(0,Ln.AU)(this.containerContext.document,"mouseup dragend touchend",this.endDrag)},a.prototype.getDirection=function(e,r){var o;return o=this.dragDirection===qd.A.Vertical||this.dragDirection!==qd.A.Horizontal&&function Fx(d,a){if((0,Ln.ir)(d))return!1;var e=d.style||{},r=(0,T.default)(d),o=(0,T.default)(a);if(e.overflow&&"visible"!==e.overflow)return!1;var c=r.css("float");return!(c&&"none"!==c||"flex"===o.css("display")&&"column"!==o.css("flex-direction")||!function Fw(d){switch(d){case"static":case"relative":case"":return!0;default:return!1}}(e.position))&&(function jx(d){return["TR","TBODY","THEAD","TFOOT"].includes(d.tagName)}(d)||function Nx(d){var a=d.css("display");return["block","list-item","table","flex","grid"].includes(a)}(r))}(e,r),o},a.prototype.getChildrenDim=function(e){var r=this,o=[],c=e.element;if(!c)return[];var g=e.getChildren();return g&&0!==g.length?((0,x.each)(g,function(b,w){var C=b.element;if(C&&((0,Ln.ir)(C)||f0(C,r.containerContext.itemSel))){var B=r.getDim(C);B.dir=r.getDirection(C,c),o.push(B)}}),o):[]},a.prototype.getMousePositionRelativeToContainer=function(e,r){var o=r-this.containerOffset.top+this.containerContext.container.scrollTop,c=e-this.containerOffset.left+this.containerContext.container.scrollLeft;if(this.positionOptions.canvasRelative){var g=this.em.Canvas.getMouseRelativeCanvas({clientX:e,clientY:r},{noScroll:1});c=g.x,o=g.y}return{mouseXRelative:c,mouseYRelative:o}},a.prototype.cacheContainerPosition=function(e){var r=Lw(e),o=this.positionOptions.windowMargin?Math.abs(r.top):r.top,c=this.positionOptions.windowMargin?Math.abs(r.left):r.left;this.containerOffset={top:o,left:c}},a.prototype.getDim=function(e){var w,C,B,ne,r=this.em,o=this.positionOptions.relative,c=this.positionOptions.windowMargin,g=r?.Canvas,b=g?g.getElementOffsets(e):{};if(this.positionOptions.canvasRelative&&this.em){var ae=g.getElementPos(e,{noScroll:1});w=ae.top,C=ae.left,B=ae.height,ne=ae.width}else{var be=Lw(e);w=o?e.offsetTop:be.top-(c?-1:1)*this.containerOffset.top,C=o?e.offsetLeft:be.left-(c?-1:1)*this.containerOffset.left,B=e.offsetHeight,ne=e.offsetWidth}return new Wx({top:w,left:C,height:B,width:ne,offsets:b})},a}(L.Ss),Kx=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Vx=function(d){function a(e){var r=d.call(this)||this;return r.pfx=e.pfx||"",r.allowNesting=e.allowNesting||!1,r.container=e.container,r.setElement(e.el),r.offset={top:e.offset.top||0,left:e.offset.left||0},r.moveLimiter=new jw(100),r}return Kx(a,d),a.prototype.show=function(){this.el.style.display="block"},a.prototype.hide=function(){this.moveLimiter.clearTimeout(),this.el.style.display="none"},a.prototype.move=function(e,r){var o=this;this.moveLimiter.updateArgs({elementDimension:e,placement:r}),this.moveLimiter.execute(function(g){o._move(g.elementDimension,g.placement)})},a.prototype._move=function(e,r){var g=0,b=0,w="",C="";this.setOrientationForDimension(e);var B=e.top,ne=e.left,ae=e.height,be=e.width,Se=e.dir,We=e.offsets;if("inside"===r){if(this.setOrientation("horizontal"),!this.allowNesting)return void this.hide();var Ot=We?.paddingTop||5,ur=We?.paddingLeft||5,Gt=We?.borderTopWidth||0,ar=We?.borderLeftWidth||0;g=B+Ot+Gt,b=ne+ur+ar,w=Math.max(be-2*ur-(ar+(We?.borderRightWidth||0)),1)+"px",C="auto"}else Se?(w=be+"px",C="auto",g="before"===r?B-0:B+ae-0,b=ne):(w="auto",C=ae-0+"px",g=B+0,b="before"===r?ne-0:ne+be-0,this.setOrientation("vertical"));this.updateStyles(g,b,w,C),this.adjustOffset()},a.prototype.setOrientationForDimension=function(e){this.el.classList.remove("vertical"),this.el.classList.add("horizontal"),e&&!e.dir&&this.setOrientation("vertical")},a.prototype.setOrientation=function(e){this.el.classList.remove("horizontal"),this.el.classList.remove("vertical"),this.el.classList.add(e)},a.prototype.updateStyles=function(e,r,o,c){this.el.style.top=e+"px",this.el.style.left=r+"px",o&&(this.el.style.width=o),c&&(this.el.style.height=c)},a.prototype.adjustOffset=function(){this.$el.css("top","+="+this.offset.top+"px"),this.$el.css("left","+="+this.offset.left+"px")},a}(L.Ss),Yv=function(){return Yv=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Yv.apply(this,arguments)},zx=function(){function d(a){var e=function Ux(d){var a={containerContext:{container:"",placeholderElement:"",containerSel:"*",itemSel:"*",pfx:"",document},positionOptions:{borderOffset:10,relative:!1,windowMargin:0,offsetTop:0,offsetLeft:0,scale:1,canvasRelative:!1},dragBehavior:{dragDirection:qd.A.Vertical,nested:!1,selectOnEnd:!0},eventHandlers:{}};return hh(hh(hh({},a),d),{containerContext:hh(hh({},a.containerContext),d.containerContext),positionOptions:hh(hh({},a.positionOptions),d.positionOptions),dragBehavior:hh(hh({},a.dragBehavior),d.dragBehavior),eventHandlers:hh(hh({},a.eventHandlers),d.eventHandlers)})}(a);(0,x.bindAll)(this,"startSort","cancelDrag","recalculateTargetOnScroll","rollback","updateOffset","handlePlaceholderMove","finalizeMove"),this.containerContext=e.containerContext,this.positionOptions=e.positionOptions,this.dragBehavior=e.dragBehavior,this.eventHandlers=Yv(Yv({},e.eventHandlers),{onPlaceholderPositionChange:this.handlePlaceholderMove,onEnd:this.finalizeMove}),this.em=a.em,this.treeClass=a.treeClass,this.updateOffset(),this.em.on(this.em.Canvas.events.refresh,this.updateOffset),this.placeholder=this.createPlaceholder(),this.dropLocationDeterminer=new Zx({em:this.em,treeClass:this.treeClass,containerContext:this.containerContext,positionOptions:this.positionOptions,dragDirection:this.dragBehavior.dragDirection,eventHandlers:this.eventHandlers})}return d.prototype.startSort=function(a){var e,r,o,c,g,b,w,C=this.getSourceNodes(a),B=C.sourceNodes,ne=C.sourcesWithModel;this.sourceNodes=B,this.dropLocationDeterminer.startSort(B),this.bindDragEventHandlers(),null===(r=(e=this.eventHandlers).onStartSort)||void 0===r||r.call(e,this.sourceNodes,this.containerContext.container);var ae=null===(o=this.sourceNodes[0])||void 0===o?void 0:o.model;null===(g=(c=this.eventHandlers).legacyOnStartSort)||void 0===g||g.call(c,{sorter:this,target:ae,parent:ae&&(null===(b=ae.parent)||void 0===b?void 0:b.call(ae)),index:ae&&(null===(w=ae.index)||void 0===w?void 0:w.call(ae))}),this.em.trigger("sorter:drag:start",a[0],ne[0])},d.prototype.validTarget=function(a,e,r){if(!a)return!1;var o=(0,T.default)(a).data("model");if(!o)return!1;var c=new this.treeClass(o);return this.getSourceNodes(e).sourceNodes.some(function(w){return c.canMove(w,r)})},d.prototype.getSourceNodes=function(a){var e=this,o=a.filter(function(b){return!!b.dragSource||e.findValidSourceElement(b.element)}).map(function(b){var w;return{model:null===(w=(0,T.default)(b.element))||void 0===w?void 0:w.data("model"),content:b.dragSource}}),c=o.sort(function(b,w){return function Iw(d,a){var e=zb(d),r=zb(a),c=r.filter(function(w){return e.includes(w)})[0];if(!c)return d.model.index()-a.model.index();var g=r[r.indexOf(c)-1];return e[e.indexOf(c)-1].index()-g.index()}(b.model,w.model)});return{sourceNodes:c.map(function(b){return new e.treeClass(b.model,b.content)}),sourcesWithModel:o}},d.prototype.recalculateTargetOnScroll=function(){this.dropLocationDeterminer.recalculateTargetOnScroll()},d.prototype.cancelDrag=function(){this.triggerNullOnEndMove(!0),this.dropLocationDeterminer.cancelDrag()},d.prototype.endDrag=function(){this.dropLocationDeterminer.endDrag()},d.prototype.handlePlaceholderMove=function(a,e){this.ensurePlaceholderElement(),this.updatePlaceholderPosition(a,e)},d.prototype.createPlaceholder=function(){return new Vx({container:this.containerContext.container,allowNesting:this.dragBehavior.nested,pfx:this.containerContext.pfx,el:this.containerContext.placeholderElement,offset:{top:this.positionOptions.offsetTop,left:this.positionOptions.offsetLeft}})},d.prototype.ensurePlaceholderElement=function(){var a=this.placeholder.el,e=this.containerContext.container;a.ownerDocument.contains(a)||e.append(this.placeholder.el)},d.prototype.updateOffset=function(){var a,e=(null===(a=this.em)||void 0===a?void 0:a.get("canvasOffset"))||{};this.positionOptions.offsetTop=e.top,this.positionOptions.offsetLeft=e.left},d.prototype.findValidSourceElement=function(a){return a&&!f0(a,"".concat(this.containerContext.itemSel,", ").concat(this.containerContext.containerSel))&&(a=function Rw(d,a){if(d)for(var e=d.parentNode;e&&1===e.nodeType;){if(f0(e,a))return e;e=e.parentNode}}(a,this.containerContext.itemSel)),a},d.prototype.bindDragEventHandlers=function(){(0,Ln.on)(this.containerContext.document,"keydown",this.rollback)},d.prototype.updatePlaceholderPosition=function(a,e){this.placeholder.move(a,e)},d.prototype.cleanupEventListeners=function(){(0,Ln.AU)(this.containerContext.document,"keydown",this.rollback)},d.prototype.finalizeMove=function(){this.cleanupEventListeners(),this.placeholder.hide(),delete this.sourceNodes},d.prototype.rollback=function(a){(0,Ln.AU)(this.containerContext.document,"keydown",this.rollback),"Escape"===a.key&&this.cancelDrag()},d.prototype.triggerNullOnEndMove=function(a){var e,r,o,c,g,b=null===(e=this.sourceNodes)||void 0===e?void 0:e[0].model,w={target:b,parent:b&&(null===(r=b.parent)||void 0===r?void 0:r.call(b)),index:b&&(null===(o=b.index)||void 0===o?void 0:o.call(b))};null===(g=(c=this.eventHandlers).legacyOnEndMove)||void 0===g||g.call(c,null,this,Yv(Yv({},w),{cancelled:a}))},d}();const Nw=zx;var Hx=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qv=function(){return Qv=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Qv.apply(this,arguments)},qb={id:"sorter-target",type:jt.F.Target},qx=function(d){function a(e){var b=e.positionOptions,C=e.eventHandlers,B=void 0===C?{}:C,ne=d.call(this,{em:e.em,treeClass:e.treeClass,containerContext:e.containerContext,positionOptions:void 0===b?{}:b,dragBehavior:e.dragBehavior,eventHandlers:Qv(Qv({},B),{onStartSort:function(ae,be){var Se;null===(Se=B.onStartSort)||void 0===Se||Se.call(B,ae,be),ne.onStartSort()},onDrop:function(ae,be,Se){var We;null===(We=B.onDrop)||void 0===We||We.call(B,ae,be,Se),ne.onDrop(ae,be,Se)},onTargetChange:function(ae,be){var Se;null===(Se=B.onTargetChange)||void 0===Se||Se.call(B,ae,be),ne.onTargetChange(ae,be)},onMouseMove:function(ae){var be;null===(be=B.onMouseMove)||void 0===be||be.call(B,ae),ne.onMouseMove(ae)}})})||this;return ne.targetIsText=!1,ne.onMouseMove=function(ae){var be;ne.targetIsText&&(null===(be=ne.sourceNodes)||void 0===be?void 0:be.some(function(We){return We.isTextable()}))&&ne.updateTextViewCursorPosition(ae)},ne.onDrop=function(ae,be,Se){ae&&be.length>0?0===ne.handleNodeAddition(ae,be,"number"==typeof Se?Se:-1).length&&ne.triggerNullOnEndMove(!1):ne.triggerNullOnEndMove(!0),ae?.restNodeState(),ne.placeholder.hide()},ne.onTargetChange=function(ae,be){var Se;ae?.restNodeState();var We=ne.em.Canvas;if(!be)return ne.placeholder.hide(),void We.removeSpots(qb);be?.setSelectedParentState(),ne.targetIsText=be.isTextNode(),ne.targetIsText&&(null===(Se=ne.sourceNodes)||void 0===Se?void 0:Se.some(function(ar){return ar.isTextable()}))?(be.setContentEditable(!0),ne.placeholder.hide()):ne.placeholder.show(),[jt.F.Select,jt.F.Hover,jt.F.Spacing].forEach(function(ar){return We.removeSpots({type:ar})}),We.addSpot(Qv(Qv({},qb),{component:be.model}))},(0,x.bindAll)(ne,"handleScrollEvent"),ne}return Hx(a,d),a.prototype.onStartSort=function(){this.em.clearSelection(),this.setAutoCanvasScroll(!0)},a.prototype.bindDragEventHandlers=function(){this.em.on("frame:scroll",this.handleScrollEvent),d.prototype.bindDragEventHandlers.call(this)},a.prototype.cleanupEventListeners=function(){this.em.off("frame:scroll",this.handleScrollEvent),d.prototype.cleanupEventListeners.call(this)},a.prototype.handleScrollEvent=function(){for(var e,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var c=null===(e=r?.[0])||void 0===e?void 0:e.frame;this.em.Canvas.getCanvasView().frame===c&&this.recalculateTargetOnScroll()},a.prototype.handleNodeAddition=function(e,r,o){var c=this;return r.reduce(function(g,b){if(!e.canMove(b,o))return g;if(c.isPositionChanged(e,b,o)){var w=c.moveNode(e,b,o),C=w.index;g.push(w.addedNode),o=C}return o++,g},[])},a.prototype.isPositionChanged=function(e,r,o){var c=r.getParent(),g=c?c.indexOfChild(r):-1;c?.model.cid===e.model.cid&&g<o&&o--;var b=c?.model.cid===e.model.cid,w=g===o,C=this.targetIsText&&r.isTextable();return!(b&&w&&!C)},a.prototype.moveNode=function(e,r,o){var c=r.getParent();if(c){var g=c.indexOfChild(r);c.removeChildAt(g,{temporary:!0}),c.model.cid===e.model.cid&&g<o&&o--}var b=e.addChildAt(r,o,{action:"move-component"});return b&&this.triggerEndMoveEvent(b),{addedNode:b,index:o}},a.prototype.triggerEndMoveEvent=function(e){var r,o,c,g,b,w;null===(o=(r=this.eventHandlers).legacyOnEndMove)||void 0===o||o.call(r,e.model,this,{target:e.model,parent:e.model&&(null===(g=(c=e.model).parent)||void 0===g?void 0:g.call(c)),index:e.model&&(null===(w=(b=e.model).index)||void 0===w?void 0:w.call(b))})},a.prototype.finalizeMove=function(){var e,r;null===(e=this.em)||void 0===e||e.Canvas.removeSpots(qb),null===(r=this.sourceNodes)||void 0===r||r.forEach(function(o){return o.restNodeState()}),this.setAutoCanvasScroll(!1),d.prototype.finalizeMove.call(this)},a.prototype.updateTextViewCursorPosition=function(e){var r=this.em;if(r){var o=r.Canvas,c=o.getDocument(),g=null,b=(0,Ln.G2)(e);if(c.caretPositionFromPoint){var w=c.caretPositionFromPoint(b.clientX,b.clientY);w&&(g=c.createRange()).setStart(w.offsetNode,w.offset)}else c.caretRangeFromPoint?g=c.caretRangeFromPoint(b.clientX,b.clientY):e.rangeParent&&(g=c.createRange()).setStart(e.rangeParent,e.rangeOffset);var C=o.getWindow().getSelection();o.getFrameEl().focus(),C?.removeAllRanges(),g&&C?.addRange(g)}},a.prototype.setAutoCanvasScroll=function(e){var r=this.em,o=r?.Canvas;o&&(e?o.startAutoscroll():o.stopAutoscroll())},a}(Nw);const Uw=qx;var $x=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),m0=function(){return m0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},m0.apply(this,arguments)},Jx=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return $x(a,d),a.prototype.defaults=function(){return{values:{}}},a.prototype.initialize=function(){var e=this.collection;this.prop=e?.prop},a.prototype.getId=function(){return this.cid},a.prototype.getIndex=function(){var e=this.collection;return e?e.indexOf(this):-1},a.prototype.getValues=function(e){void 0===e&&(e={});var r=this.get("values");return e.camelCase?Object.keys(r).reduce(function(o,c){return o[(0,z.camelCase)(c)]=r[c],o},{}):r},a.prototype.getLabel=function(){var e;return null===(e=this.prop)||void 0===e?void 0:e.getLayerLabel(this)},a.prototype.isSelected=function(){var e;return(null===(e=this.prop)||void 0===e?void 0:e.getSelectedLayer())===this},a.prototype.select=function(){var e;return null===(e=this.prop)||void 0===e?void 0:e.selectLayer(this)},a.prototype.remove=function(){var e;return null===(e=this.prop)||void 0===e?void 0:e.removeLayer(this)},a.prototype.move=function(e){var r;return null===(r=this.prop)||void 0===r?void 0:r.moveLayer(this,e)},a.prototype.getStylePreview=function(e){var r;return void 0===e&&(e={}),null===(r=this.prop)||void 0===r?void 0:r.getStylePreview(this,e)},a.prototype.hasPreview=function(){var e;return!(null===(e=this.prop)||void 0===e||!e.get("preview"))},a.prototype.upValues=function(e){return void 0===e&&(e={}),this.set("values",m0(m0({},this.getValues()),e))},a}(L.Kx);const sy=Jx;var Yx=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Xv=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Yx(a,d),a.prototype.initialize=function(e,r){void 0===r&&(r={}),this.prop=r.prop},a}(L.pM);const g0=Xv;Xv.prototype.model=sy;var $b=m(3161),Bw=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qx=function(d){function a(e){return d.call(this,e)||this}return Bw(a,d),a.prototype.getChildren=function(){return this.model instanceof g0?this.model.models.map(function(e){return new a(e)}):null},a.prototype.getParent=function(){var e=this.model instanceof sy?this.model.collection:null;return e?new a(e):null},a.prototype.addChildAt=function(e,r){if(this.model instanceof sy)throw Error("Cannot add a layer model to another layer model");return new a(this.model.add(e.model,{at:r}))},a.prototype.removeChildAt=function(e){if(this.model instanceof sy)throw Error("Cannot remove a layer model from another layer model");var r=this.model.at(e);r&&this.model.remove(r)},a.prototype.indexOfChild=function(e){return e.model instanceof sy&&this.model instanceof g0?this.model.indexOf(e.model):-1},a.prototype.canMove=function(e,r){return this.model instanceof g0&&!!e.model},Object.defineProperty(a.prototype,"view",{get:function(){return this.model.view},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"element",{get:function(){var e;return null===(e=this.view)||void 0===e?void 0:e.el},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),a}($b.$),Xx=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Jb=function(){return Jb=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Jb.apply(this,arguments)},eC=function(d){function a(e){var g=e.positionOptions,w=e.eventHandlers,C=void 0===w?{}:w,B=d.call(this,{em:e.em,treeClass:Qx,containerContext:e.containerContext,positionOptions:void 0===g?{}:g,dragBehavior:e.dragBehavior,eventHandlers:Jb({onStartSort:function(ne,ae){var be;null===(be=C.onStartSort)||void 0===be||be.call(C,ne,ae),B.onLayerStartSort(ne)},onDrop:function(ne,ae,be){var Se;null===(Se=C.onDrop)||void 0===Se||Se.call(C,ne,ae,be),B.onLayerDrop(ne,ae,be)},onEnd:function(){B.placeholder.hide()}},C)})||this;return B.onLayerStartSort=function(ne){B.em.clearSelection();var ae=ne[0];B.em.trigger("sorter:drag:start",ae?.element,ae?.model),B.placeholder.show()},B.onLayerDrop=function(ne,ae,be){if(ne){be="number"==typeof be?be:-1;for(var Se=0;Se<ae.length;Se++){var We=ae[Se];if(ne.canMove(We,Se)){var lt=We.getParent(),Ot=-1;lt&&(Ot=lt.indexOfChild(We),lt.removeChildAt(Ot)),ne.addChildAt(We,be=Ot<be?be-1:be)}}B.placeholder.hide()}},B}return Xx(a,d),a}(Nw);const tC=eC;var Ww=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Yb=function(){return Yb=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Yb.apply(this,arguments)},v0=function(d){function a(e){var r=d.call(this,e,"Utils")||this;return r.Sorter=Uw,r.Resizer=Rx,r.Dragger=em.A,r.ComponentSorter=Uw,r.StyleManagerSorter=tC,r.helpers=Yb({},z),r}return Ww(a,d),a.prototype.destroy=function(){},a}(Oe);const rC=v0;var Bf,mh={},ff={16:!1,18:!1,17:!1,91:!1},Zw="all",uv={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},hf={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},Qb=function(d){return hf[d]||d.toUpperCase().charCodeAt(0)},Wf=[];for(Bf=1;Bf<20;Bf++)hf["f"+Bf]=111+Bf;function ly(d,a){for(var e=d.length;e--;)if(d[e]===a)return e;return-1}function _0(d,a){if(d.length!=a.length)return!1;for(var e=0;e<d.length;e++)if(d[e]!==a[e])return!1;return!0}var Kw={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function oC(d){var e,a=d.keyCode,r=ly(Wf,a);if(r>=0&&Wf.splice(r,1),(93==a||224==a)&&(a=91),a in ff)for(e in ff[a]=!1,uv)uv[e]==a&&(np[e]=!1)}function iC(){for(Bf in ff)ff[Bf]=!1;for(Bf in uv)np[Bf]=!1}function np(d,a,e){var r,o;r=r_(d),void 0===e&&(e=a,a="all");for(var c=0;c<r.length;c++)o=[],(d=r[c].split("+")).length>1&&(o=Hw(d),d=[d[d.length-1]]),(d=Qb(d=d[0]))in mh||(mh[d]=[]),mh[d].push({shortcut:r[c],scope:a,method:e,key:r[c],mods:o})}for(Bf in uv)np[Bf]=!1;function t_(){return Zw||"all"}function r_(d){var a;return""==(a=(d=d.replace(/\s/g,"")).split(","))[a.length-1]&&(a[a.length-2]+=","),a}function Hw(d){for(var a=d.slice(0,d.length-1),e=0;e<a.length;e++)a[e]=uv[a[e]];return a}function t1(d,a,e){d.addEventListener?d.addEventListener(a,e,!1):d.attachEvent&&d.attachEvent("on"+a,function(){e(window.event)})}np.setScope=function zw(d){Zw=d||"all"},np.getScope=t_,np.deleteScope=function b0(d){var a,e,r;for(a in mh)for(e=mh[a],r=0;r<e.length;)e[r].scope===d?e.splice(r,1):r++},np.filter=function e1(d){var a=(d.target||d.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)},np.isPressed=function Xb(d){return"string"==typeof d&&(d=Qb(d)),-1!=ly(Wf,d)},np.getPressedKeyCodes=function Vw(){return Wf.slice(0)},np.unbind=function e_(d,a){var e,r,c,g,b,o=[];for(e=r_(d),g=0;g<e.length;g++){if((r=e[g].split("+")).length>1&&(o=Hw(r)),d=Qb(d=r[r.length-1]),void 0===a&&(a=t_()),!mh[d])return;for(c=0;c<mh[d].length;c++)(b=mh[d][c]).scope===a&&_0(b.mods,o)&&(mh[d][c]={})}},np.handlers=mh,np.init=function(d){t1(d.document,"keydown",function(a){!function nC(d){var a,e,r,o,c,g;if(-1==ly(Wf,a=d.keyCode)&&Wf.push(a),(93==a||224==a)&&(a=91),a in ff)for(r in ff[a]=!0,uv)uv[r]==a&&(np[r]=!0);else if(function y0(d){for(Bf in ff)ff[Bf]=d[Kw[Bf]]}(d),np.filter.call(this,d)&&a in mh)for(g=t_(),o=0;o<mh[a].length;o++)if((e=mh[a][o]).scope==g||"all"==e.scope){for(r in c=e.mods.length>0,ff)(!ff[r]&&ly(e.mods,+r)>-1||ff[r]&&-1==ly(e.mods,+r))&&(c=!1);(0==e.mods.length&&!ff[16]&&!ff[18]&&!ff[17]&&!ff[91]||c)&&!1===e.method(d,e)&&(d.preventDefault?d.preventDefault():d.returnValue=!1,d.stopPropagation&&d.stopPropagation(),d.cancelBubble&&(d.cancelBubble=!0))}}(a)}),t1(d.document,"keyup",oC),t1(d,"focus",iC)};const cy=np;var n1=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Gw=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))};(0,z.hasWin)()&&cy.init(window);var o1=function(d){function a(e){var r=d.call(this,e,"Keymaps",{defaults:{"core:undo":{keys:"\u2318+z, ctrl+z",handler:"core:undo",opts:{prevent:!0}},"core:redo":{keys:"\u2318+shift+z, ctrl+shift+z",handler:"core:redo",opts:{prevent:!0}},"core:copy":{keys:"\u2318+c, ctrl+c",handler:"core:copy"},"core:paste":{keys:"\u2318+v, ctrl+v",handler:"core:paste"},"core:component-next":{keys:"s",handler:"core:component-next"},"core:component-prev":{keys:"w",handler:"core:component-prev"},"core:component-enter":{keys:"d",handler:"core:component-enter"},"core:component-exit":{keys:"a",handler:"core:component-exit"},"core:component-delete":{keys:"backspace, delete",handler:"core:component-delete",opts:{prevent:!0}}}})||this;return r.keymaster=cy,r.keymaps={},r}return n1(a,d),a.prototype.onLoad=function(){if(!this.em.isHeadless){var e=this.config.defaults;for(var r in e){var o=e[r];this.add(r,o.keys,o.handler,o.opts||{})}}},a.prototype.add=function(e,r,o,c){void 0===c&&(c={});var g=this.em,b=g.Commands,w=g.getEditor(),C=g.Canvas,B={id:e,keys:r,handler:o};return this.keymaps[e]&&this.remove(e),this.keymaps[e]=B,cy(r,function(ae,be){var Se,We={event:ae,h:be},lt=(0,x.isString)(o)?b.get(o):o;if(!g.isEditing()&&!w.Canvas.isInputFocused()||c.force){c.prevent&&(null===(Se=C.getCanvasView())||void 0===Se||Se.preventDefault(ae)),(0,x.isFunction)(lt)?lt(w,0,We):b.runCommand(lt,We);var ur=[e,be.shortcut,ae];g.trigger.apply(g,Gw(["keymap:emit"],ur,!1)),g.trigger.apply(g,Gw(["keymap:emit:".concat(e)],ur,!1))}},void 0),g.trigger("keymap:add",B),B},a.prototype.get=function(e){return this.keymaps[e]},a.prototype.getAll=function(){return this.keymaps},a.prototype.remove=function(e){var r=this.em,o=this.get(e);if(o)return delete this.keymaps[e],o.keys.split(", ").forEach(function(c){cy.unbind(c.trim())}),r?.trigger("keymap:remove",o),o},a.prototype.removeAll=function(){var e=this;return Object.keys(this.keymaps).forEach(function(r){return e.remove(r)}),cy.handlers={},this},a.prototype.destroy=function(){this.removeAll(),this.keymaps={}},a}(Oe);const aC=o1;var cC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),uC=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return cC(a,d),a.prototype.defaults=function(){return{title:"",content:"",attributes:{},open:!1}},a.prototype.open=function(){this.set("open",!0)},a.prototype.close=function(){this.set("open",!1)},a}(ke.A);const mf=uC;var dC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),uy=function(){return uy=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},uy.apply(this,arguments)},a1=function(d){function a(e){var r=d.call(this,e)||this,o=r.model;return r.listenTo(o,"change:open",r.updateOpen),r.listenTo(o,"change:title",r.updateTitle),r.listenTo(o,"change:content",r.updateContent),r}return dC(a,d),a.prototype.template=function(e){var r=e.pfx,o=e.ppfx,c=e.content,g=e.title;return'<div class="'.concat(r,"dialog ").concat(o,"one-bg ").concat(o,'two-color">\n      <div class="').concat(r,'header">\n        <div class="').concat(r,'title">').concat(g,'</div>\n        <div class="').concat(r,'btn-close" data-close-modal>&Cross;</div>\n      </div>\n      <div class="').concat(r,'content">\n        <div id="').concat(r,'c">').concat(c,'</div>\n        <div style="clear:both"></div>\n      </div>\n    </div>\n    <div class="').concat(r,'collector" style="display: none"></div>')},a.prototype.events=function(){return{click:"onClick","click [data-close-modal]":"hide"}},a.prototype.onClick=function(e){this.config.backdrop&&e.target===this.el&&this.hide()},a.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find("."+this.pfx+"collector")),this.$collector},a.prototype.getContent=function(){var e=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(e,"content #").concat(e,"c"))),this.$content},a.prototype.getTitle=function(e){return void 0===e&&(e={}),this.$title||(this.$title=this.$el.find("."+this.pfx+"title")),e.$?this.$title:this.$title.get(0)},a.prototype.updateContent=function(){var e=this.getContent(),r=e.children(),o=this.getCollector(),c=this.model.get("content");r.length&&o.append(r),e.empty().append(c)},a.prototype.updateTitle=function(){var e=this.getTitle({$:!0});e&&e.empty().append(this.model.get("title"))},a.prototype.updateOpen=function(){this.el.style.display=this.model.get("open")?"":"none"},a.prototype.hide=function(){this.model.close()},a.prototype.show=function(){this.model.open()},a.prototype.updateAttr=function(e){var r=this,o=r.pfx,c=r.$el,b=[].slice.call(r.el.attributes).map(function(w){return w.name});c.removeAttr(b.join(" ")),c.attr(uy(uy({},e||{}),{class:"".concat(o,"container ").concat(e&&e.class||"").trim()}))},a.prototype.render=function(){var e=this.$el,r=this.model.toJSON();return r.pfx=this.pfx,r.ppfx=this.ppfx,e.html(this.template(r)),this.updateAttr(),this.updateOpen(),this},a}(Ro);const yu=a1;var pC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),n_=function(d){function a(e){var r=d.call(this,e,"Modal",{stylePrefix:"mdl-",title:"",content:"",backdrop:!0,custom:!1,extend:{}})||this;return r.model=new mf(r),r.model.on("change:open",function(o,c){e.trigger("modal:".concat(c?"open":"close"))}),r.model.on("change",(0,x.debounce)(function(){var o=r._evData(),c=r.config.custom;(0,x.isFunction)(c)&&c(o),e.trigger("modal",o)},0)),r}return pC(a,d),a.prototype._evData=function(){var e=this,r=this.getTitle(),o=this.getContent(),c=this.model.attributes;return{open:c.open,attributes:c.attributes,title:(0,x.isString)(r)?(0,Ln.GZ)(r):r,content:(0,x.isString)(o)?(0,Ln.GZ)(o):o.get?o.get(0):o,close:function(){e.close()}}},a.prototype.postRender=function(e){var r=e.model.config.el||e.el,o=this.render();o&&r?.appendChild(o)},a.prototype.open=function(e){void 0===e&&(e={});var r=e.attributes||{};return e.title&&this.setTitle(e.title),e.content&&this.setContent(e.content),this.model.set("attributes",r),this.model.open(),this.modal&&this.modal.updateAttr(r),this},a.prototype.close=function(){return this.model.close(),this},a.prototype.onceClose=function(e){return this.em.once("modal:close",e),this},a.prototype.onceOpen=function(e){return this.em.once("modal:open",e),this},a.prototype.isOpen=function(){return!!this.model.get("open")},a.prototype.setTitle=function(e){return this.model.set("title",e),this},a.prototype.getTitle=function(){return this.model.get("title")},a.prototype.setContent=function(e){return this.model.set("content"," "),this.model.set("content",e),this},a.prototype.getContent=function(){return this.model.get("content")},a.prototype.getContentEl=function(){var e;return null===(e=this.modal)||void 0===e?void 0:e.getContent().get(0)},a.prototype.getModel=function(){return this.model},a.prototype.render=function(){var e;if(!this.config.custom){var r=yu.extend(this.config.extend);return this.modal=new r({el:this.modal&&this.modal.el,model:this.model,config:this.config}),null===(e=this.modal)||void 0===e?void 0:e.render().el}},a.prototype.destroy=function(){var e;null===(e=this.modal)||void 0===e||e.remove()},a}(Oe);const qw=n_;var s1="sw-visibility",$w="export-template",dv="open-sm",Jw="open-tm",gf="open-layers",Yw="open-blocks",l1="fullscreen",c1="preview";var mC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),x0=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.get("buttons").length&&o.set("buttons",new Xw(o.module,o.get("buttons"))),o}return mC(a,d),a.prototype.defaults=function(){return{id:"",label:"",tagName:"span",className:"",command:"",context:"",buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(a.prototype,"className",{get:function(){return this.get("className")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"command",{get:function(){return this.get("command")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"active",{get:function(){return this.get("active")},set:function(e){this.set("active",e)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"togglable",{get:function(){return this.get("togglable")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"runDefaultCommand",{get:function(){return this.get("runDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"stopDefaultCommand",{get:function(){return this.get("stopDefaultCommand")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"disable",{get:function(){return this.get("disable")},enumerable:!1,configurable:!0}),a}(ke.A);const Qw=x0;var gC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),C0=function(d){function a(e,r){return d.call(this,e,r,Qw)||this}return gC(a,d),a.prototype.deactivateAllExceptOne=function(e,r){this.forEach(function(o,c){o!==e&&(o.set("active",!1),r&&o.get("buttons").length&&o.get("buttons").deactivateAllExceptOne(e,r))})},a.prototype.deactivateAll=function(e,r){var o=e||"";this.forEach(function(c){c.get("context")==o&&c!==r&&c.set("active",!1,{fromCollection:!0})})},a.prototype.disableAllButtons=function(e){var r=e||"";this.forEach(function(o,c){o.get("context")==r&&o.set("disable",!0)})},a.prototype.disableAllButtonsExceptOne=function(e,r){this.forEach(function(o,c){o!==e&&(o.set("disable",!0),r&&o.get("buttons").length&&o.get("buttons").disableAllButtonsExceptOne(e,r))})},a}(Qr);const Xw=C0;C0.prototype.model=Qw;var ig=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vC=function(d){function a(e,r){var o=d.call(this,e,r)||this,c=o.get("buttons")||[];return o.buttons=new Xw(e,c),o}return ig(a,d),a.prototype.defaults=function(){return{id:"",content:"",visible:!0,buttons:[],attributes:{}}},Object.defineProperty(a.prototype,"buttons",{get:function(){return this.get("buttons")},set:function(e){this.set("buttons",e)},enumerable:!1,configurable:!0}),a}(ke.A);const e2=vC;var u1=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),t2=function(d){function a(e,r){return d.call(this,e,r,e2)||this}return u1(a,d),a}(Qr);const E0=t2;t2.prototype.model=e2;var _C=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Wm=function(){return Wm=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Wm.apply(this,arguments)},yC=function(d){function a(e){var r=d.call(this,e)||this,c=r.model,g=r.em,b=r.pfx,w=r.ppfx,C=c.className,B=c.attributes,ne=B.command,ae=B.listen;if(r.id=b+c.get("id"),r.activeCls="".concat(b,"active ").concat(w,"four-color"),r.disableCls="".concat(w,"disabled"),r.btnsVisCls="".concat(b,"visible"),r.className=b+"btn"+(C?" "+C:""),r.listenTo(c,"change",r.render),r.listenTo(c,"change:active updateActive",r.updateActive),r.listenTo(c,"checkActive",r.checkActive),r.listenTo(c,"change:bntsVis",r.updateBtnsVis),r.listenTo(c,"change:attributes",r.updateAttributes),r.listenTo(c,"change:className",r.updateClassName),r.listenTo(c,"change:disable",r.updateDisable),g&&(0,x.isString)(ne)&&ae){var be={fromListen:!0};r.listenTo(g,"run:".concat(ne),function(){return c.set("active",!0,be)}),r.listenTo(g,"stop:".concat(ne),function(){return c.set("active",!1,be)})}return g&&g.get&&(r.commands=g.get("Commands")),r}return _C(a,d),a.prototype.tagName=function(){return this.model.get("tagName")},a.prototype.events=function(){return{click:"clicked"}},a.prototype.updateClassName=function(){var r=this.model,o=this.pfx,c=r.className,g=r.get("attributes").class,b="".concat(g||""," ").concat(o,"btn ").concat(c||"");this.$el.attr("class",b.trim())},a.prototype.updateAttributes=function(){var e=this,r=e.em,o=e.model,c=e.$el,g=o.get("attributes")||{},b=r&&r.t&&r.t("panels.buttons.titles.".concat(o.id));c.attr(g),b&&c.attr({title:b}),this.updateClassName()},a.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get("bntsVis")?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},a.prototype.updateActive=function(e,r,o){var c;void 0===o&&(o={});var g=this,b=g.model,w=g.commands,C=g.$el,B=g.activeCls,ne=o.fromCollection,ae=o.fromListen,be=b.get("context"),Se=b.get("options"),We=b.command,lt={};We&&(w&&(0,x.isString)(We)?lt=w.get(We)||{}:(0,x.isFunction)(We)?lt=w.create({run:We}):null!==We&&(0,x.isObject)(We)&&(lt=w.create(We)),b.active?(!ne&&(null===(c=b.collection)||void 0===c||c.deactivateAll(be,b)),b.set("active",!0,{silent:!0}).trigger("checkActive"),!ae&&w.runCommand(lt,Wm(Wm({},Se),{sender:b})),lt.noStop&&b.set("active",!1)):(C.removeClass(B),!ae&&w.stopCommand(lt,Wm(Wm({},Se),{sender:b,force:1}))))},a.prototype.updateDisable=function(){this.$el[this.model.disable?"addClass":"removeClass"](this.disableCls)},a.prototype.checkActive=function(){var e=this,o=e.$el,c=e.activeCls;e.model.active?o.addClass(c):o.removeClass(c)},a.prototype.clicked=function(){var e=this.model;e.get("bntsVis")||e.disable||!e.command||this.toggleActive()},a.prototype.toggleActive=function(){var r=this.model,o=this.em,c=r.active;c&&!r.togglable||(r.active=!c,c?r.runDefaultCommand&&o.runDefault():r.stopDefaultCommand&&o.stopDefault())},a.prototype.render=function(){var e=this.model,r=e.get("label"),o=this.$el;return!e.get("el")&&o.empty(),this.updateAttributes(),r&&o.append(r),this.checkActive(),this.updateDisable(),this},a}(Ro);const bC=yC;var wC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xC=function(d){function a(e){var r=d.call(this,{collection:e})||this;return r.listenTo(r.collection,"add",r.addTo),r.listenTo(r.collection,"reset remove",r.render),r.className=r.pfx+"buttons",r}return wC(a,d),a.prototype.addTo=function(e){this.addToCollection(e)},a.prototype.addToCollection=function(e,r){var o=r||null,c=e.get("el"),b=new bC({el:c,model:e}).render().el;return o?o.appendChild(b):this.$el.append(b),b},a.prototype.render=function(){var e=this,r=document.createDocumentFragment();return this.$el.empty(),this.collection.each(function(o){return e.addToCollection(o,r)}),this.$el.append(r),this.$el.attr("class",(0,x.result)(this,"className")),this},a}(Ro);const CC=xC;var EC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),d1=function(){return d1=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},d1.apply(this,arguments)},o_=function(d){function a(e){var r=d.call(this,{model:e,el:e.get("el")})||this;return r.className=r.pfx+"panel",r.id=r.pfx+e.get("id"),r.listenTo(e,"change:appendContent",r.appendContent),r.listenTo(e,"change:content",r.updateContent),r.listenTo(e,"change:visible",r.toggleVisible),e.view=r,r}return EC(a,d),a.prototype.appendContent=function(){this.$el.append(this.model.get("appendContent"))},a.prototype.updateContent=function(){this.$el.html(this.model.get("content"))},a.prototype.toggleVisible=function(){this.model.get("visible")?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},a.prototype.attributes=function(){return this.model.get("attributes")},a.prototype.initResize=function(){var e=this.em,r=e?.Editor,o=this.model.get("resizable");if(r&&o){var c=!0===o?[!0,!0,!0,!0]:o,g=c.length,b=void 0,w=void 0,C=void 0,B=!1;if(2==g)b=(ne=c)[0],C=ne[0],w=ne[1],B=ne[1];else if(4==g){var ne;b=(ne=c)[0],w=ne[1],C=ne[2],B=ne[3]}var ae=new r.Utils.Resizer(d1({tc:b,cr:w,bc:C,cl:B,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:r.getConfig().stylePrefix,onEnd:function(){e.Canvas.refresh({all:!0})},posFetcher:function(be,Se){var We=Se.target,lt=be.style,Ot=ae.getConfig(),ur=Ot.keyWidth,Gt=Ot.keyHeight,ar=be.getBoundingClientRect(),Fn="container"==We,fo=lt[ur],ti=lt[Gt];return{left:0,top:0,width:fo&&!Fn?parseFloat(fo):ar.width,height:ti&&!Fn?parseFloat(ti):ar.height}}},o&&"boolean"!=typeof o?o:{}));ae.blur=function(){},ae.focus(this.el)}},a.prototype.render=function(){var e=this.model.buttons,r=this.$el,o=this.ppfx,c="".concat(this.className," ").concat(this.id," ").concat(o,"one-bg ").concat(o,"two-color");if(r.addClass(c),this.toggleVisible(),e.length){var g=new CC(e);r.append(g.render().el)}return r.append(this.model.get("content")),this},a}(Ro);const OC=o_;var DC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),TC=function(d){function a(e){var r=d.call(this,{collection:e})||this;return r.listenTo(e,"add",r.addTo),r.listenTo(e,"reset",r.render),r.listenTo(e,"remove",r.onRemove),r.className=r.pfx+"panels",r}return DC(a,d),a.prototype.onRemove=function(e){var r=e.view;r&&r.remove()},a.prototype.addTo=function(e){this.addToCollection(e)},a.prototype.addToCollection=function(e,r){var o=r||null,c=e.get("el"),g=new OC(e),b=g.render().el,w=e.get("appendTo");if(!c)if(w){var C=document.querySelector(w);C?.appendChild(b)}else o?o.appendChild(b):this.$el.append(b);return g.initResize(),b},a.prototype.render=function(){var e=this,r=this.$el,o=document.createDocumentFragment();return r.empty(),this.collection.each(function(c){return e.addToCollection(c,o)}),r.append(o),r.attr("class",this.className),this},a}(Ro);const O0=TC;var SC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),PC=function(d){function a(e){var r=d.call(this,e,"Panels",{stylePrefix:"pn-",defaults:[{id:"commands",buttons:[{}]},{id:"options",buttons:[{active:!0,id:s1,className:"fa fa-square-o",command:"core:component-outline",context:s1,attributes:{title:"View components"}},{id:c1,className:"fa fa-eye",command:c1,context:c1,attributes:{title:"Preview"}},{id:l1,className:"fa fa-arrows-alt",command:l1,context:l1,attributes:{title:"Fullscreen"}},{id:$w,className:"fa fa-code",command:$w,attributes:{title:"View code"}}]},{id:"views",buttons:[{id:dv,className:"fa fa-paint-brush",command:dv,active:!0,togglable:!1,attributes:{title:"Open Style Manager"}},{id:Jw,className:"fa fa-cog",command:Jw,togglable:!1,attributes:{title:"Settings"}},{id:gf,className:"fa fa-bars",command:gf,togglable:!1,attributes:{title:"Open Layer Manager"}},{id:Yw,className:"fa fa-th-large",command:Yw,togglable:!1,attributes:{title:"Open Blocks"}}]}]})||this;return r.panels=new E0(r,r.config.defaults),r}return SC(a,d),a.prototype.getPanels=function(){return this.panels},a.prototype.getPanelsEl=function(){var e;return null===(e=this.PanelsViewObj)||void 0===e?void 0:e.el},a.prototype.addPanel=function(e){return this.panels.add(e)},a.prototype.removePanel=function(e){return this.panels.remove(e)},a.prototype.getPanel=function(e){var r=this.panels.where({id:e});return r.length?r[0]:null},a.prototype.addButton=function(e,r){var o=this.getPanel(e);return o?o.buttons.add(r):null},a.prototype.removeButton=function(e,r){var o=this.getPanel(e);return o&&o.buttons.remove(r)},a.prototype.getButton=function(e,r){var o=this.getPanel(e);if(o){var c=o.buttons.where({id:r});return c.length?c[0]:null}return null},a.prototype.render=function(){var e;return null===(e=this.PanelsViewObj)||void 0===e||e.remove(),this.PanelsViewObj=new O0(this.panels),this.PanelsViewObj.render().el},a.prototype.active=function(){this.getPanels().each(function(e){e.buttons.each(function(r){r.get("active")&&r.trigger("updateActive")})})},a.prototype.disableButtons=function(){this.getPanels().each(function(e){e.buttons.each(function(r){r.get("disable")&&r.trigger("change:disable")})})},a.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},a}(Oe);const MC=PC;var kC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),IC=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return kC(a,d),a.prototype.build=function(e,r){void 0===r&&(r={});var o=r.em,c=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(r,["em"]),g=c;if(r.cleanId&&o){var w=o.Css.getAll().toJSON().map(function(C){var B=C.selectors,ne=B&&1===B.length&&B.models[0];return ne&&ne.isId()&&ne.get("name")}).filter(Boolean);g.attributes||(g.attributes=function(C,B){var ne=B.id;return ne&&"i"===ne[0]&&!C.get("script")&&!C.get("script-export")&&!C.get("attributes").id&&w.indexOf(ne)<0&&delete B.id,B})}return e.toHTML(g)},a}(L.Kx);const RC=IC;var D0=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),r2=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return D0(a,d),a.prototype.build=function(e){var r=this,o=e.toJSON();return this.beforeEach(o),(0,x.each)(o,function(c,g){var b=o[g];if(b instanceof L.Kx)o[g]=r.build(b);else if(b instanceof L.pM){var w=b;o[g]=[],w.length&&w.forEach(function(C,B){o[g][B]=r.build(C)})}}),o},a.prototype.beforeEach=function(e){delete e.status},a}(L.Kx);const FC=r2;var p1=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();function jC(d){var a;return 0===((null===(a=d.toString().match(/\{([\s\S]*)\}/m))||void 0===a?void 0:a[1])||"").replace(/^\s*\/\/.*$/gm,"").trim().length}var n2=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return p1(a,d),a.prototype.mapModel=function(e){var r,o=this,c="",g=e.get("script-export")||e.get("script"),b=e.get("type"),w=e.get("components"),C=e.getId();if(g){var B=e.get("attributes");B=(0,x.extend)({},B,{id:C}),e.set("attributes",B,{silent:!0});var ne=e.getScriptString(g),ae=e.get("script-props");if(e.get("scriptUpdated")&&!ae)this.mapJs[b+"-"+C]={ids:[C],code:ne};else{var be=void 0,Se=this.mapJs[b];if(ae&&(be=e.__getScriptProps()),Se)Se.ids.push(C),be&&(Se.props[C]=be);else{var We={ids:[C],code:ne};be&&(We.props=((r={})[C]=be,r)),this.mapJs[b]=We}}}return w.forEach(function(lt){c+=o.mapModel(lt)}),c},a.prototype.build=function(e){this.mapJs={},this.mapModel(e);var r="";for(var o in this.mapJs){var c=this.mapJs[o];if(c.code)if(c.props){if(jC(c.code))continue;r+="\n          var props = ".concat(JSON.stringify(c.props),";\n          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');\n          var els = document.querySelectorAll(ids);\n          for (var i = 0, len = els.length; i < len; i++) {\n            var el = els[i];\n            (").concat(c.code,".bind(el))(props[el.id]);\n          }")}else{var g="#"+c.ids.join(", #");r+="\n          var items = document.querySelectorAll('".concat(g,"');\n          for (var i = 0, len = items.length; i < len; i++) {\n            (function(){\n").concat(c.code,"\n}.bind(items[i]))();\n          }")}}return r},a}(L.Kx);const NC=n2;var dy,T0=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),f1=function(){return f1=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},f1.apply(this,arguments)};(0,z.hasWin)()&&(dy=m(4408),m(8253),m(7389),m(3640));var o2=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return T0(a,d),a.prototype.defaults=function(){return{input:"",label:"",codeName:"",theme:"hopscotch",readOnly:!0,lineNumbers:!0,autoFormat:!0}},a.prototype.init=function(e){return(0,x.bindAll)(this,"onChange"),this.editor=dy.fromTextArea(e,f1({dragDrop:!1,lineWrapping:!0,mode:this.get("codeName")},this.attributes)),this.element=e,this.editor.on("change",this.onChange),this},a.prototype.onChange=function(){this.trigger("update",this)},a.prototype.getEditor=function(){return this.editor},a.prototype.getElement=function(){return this.element},a.prototype.setElement=function(e){return this.element=e,this},a.prototype.refresh=function(){return this.getEditor().refresh(),this},a.prototype.focus=function(){return this.getEditor().focus(),this},a.prototype.getContent=function(){var e=this.getEditor();return e&&e.getValue()},a.prototype.setContent=function(e,r){var o=this;void 0===r&&(r={});var c=this.editor;if(c){c.setValue(e);var g=this.get("autoFormat");c.autoFormatRange&&(!0===g||Array.isArray(g)&&g.includes(this.get("codeName")))&&(dy.commands.selectAll(c),c.autoFormatRange(c.getCursor(!0),c.getCursor(!1)),dy.commands.goDocStart(c)),!r.noRefresh&&setTimeout(function(){return o.refresh()})}},a}(L.Kx);const UC=o2;o2.prototype.CodeMirror=dy;var BC=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),WC=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return BC(a,d),a.prototype.template=function(e){var r=e.pfx,o=e.codeName,c=e.label;return H(i2||(i2=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}(['\n      <div class="','editor" id="',"",'">\n        <div id="','title">','</div>\n        <div id="','code"></div>\n      </div>\n    '],['\n      <div class="','editor" id="',"",'">\n        <div id="','title">','</div>\n        <div id="','code"></div>\n      </div>\n    '])),r,r,o,r,c,r)},a.prototype.initialize=function(e){this.config=e.config||{},this.pfx=this.config.stylePrefix},a.prototype.render=function(){var e,r,o=this,c=o.model,g=o.pfx,b=o.$el,w=c.toJSON(),C=c.get("input")||(null===(r=(e=c).getElement)||void 0===r?void 0:r.call(e));return w.pfx=g,b.html(this.template(w)),b.attr("class","".concat(g,"editor-c")),b.find("#".concat(g,"code")).append(C),this},a}(L.Ss);const S0=WC;var i2,P0=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),M0=function(){return M0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},M0.apply(this,arguments)},A0=function(d){function a(e){var r=d.call(this,e,"CodeManager",{stylePrefix:"cm-",optsCodeViewer:{}})||this;r.EditorView=S0;var o=r.config,c=o.pStylePrefix;return c&&(o.stylePrefix=c+o.stylePrefix),r.generators={},r.viewers={},r.defGenerators={html:new RC,css:new v,json:new FC,js:new NC},r.defViewers={CodeMirror:new UC},r.loadDefaultGenerators().loadDefaultViewers(),r}return P0(a,d),a.prototype.addGenerator=function(e,r){return this.generators[e]=r,this},a.prototype.getGenerator=function(e){return this.generators[e]},a.prototype.getGenerators=function(){return this.generators},a.prototype.addViewer=function(e,r){return this.viewers[e]=r,this},a.prototype.getViewer=function(e){return this.viewers[e]},a.prototype.getViewers=function(){return this.viewers},a.prototype.createViewer=function(e){void 0===e&&(e={});var r=(0,x.isUndefined)(e.type)?"CodeMirror":e.type,o=this.getViewer(r)&&this.getViewer(r).clone(),c=document.createElement("div"),g=document.createElement("textarea");return c.appendChild(g),o.set(M0(M0({},this.config.optsCodeViewer),e)),o.init(g),o.setElement(c),o},a.prototype.updateViewer=function(e,r){e.setContent(r)},a.prototype.getCode=function(e,r,o){void 0===o&&(o={}),o.em=this.em;var c=this.getGenerator(r);return c?c.build(e,o):""},a.prototype.loadDefaultGenerators=function(){for(var e in this.defGenerators)this.addGenerator(e,this.defGenerators[e]);return this},a.prototype.loadDefaultViewers=function(){for(var e in this.defViewers)this.addViewer(e,this.defViewers[e]);return this},a.prototype.destroy=function(){},a}(Oe);const KC=A0;var h1=m(4729),VC=m.n(h1);var gh=function(d){return d.update="update",d.undo="undo",d.redo="redo",d.load="load",d.projectLoad="project:load",d.projectGet="project:get",d.log="log",d.telemetryInit="telemetry:init",d.destroy="destroy",d.destroyed="destroyed",d}(gh||{}),a2=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),sg=function(){return sg=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},sg.apply(this,arguments)},L0=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},I0=function(d){return d.avoidStore||d.noUndo||d.partial},lg=function(d){return Object.keys(d.changedAttributes())},R0=new WeakMap,fv=function(d){function a(e){var r=d.call(this,e,"UndoManager",{maximumStackLength:500,trackSelection:!0})||this;r.config._disable&&(r.config.maximumStackLength=0);var o=!0;return r.um=new(VC())(sg({track:!0,register:[]},r.config)),r.um.changeUndoType("change",{condition:function(c){var g=c.get("_undo");if(g){var b=c.get("_undoexc");if((0,x.isArray)(b)&&lg(c).some(function(w){return b.indexOf(w)>=0}))return!1;if((0,x.isBoolean)(g)||(0,x.isArray)(g)&&lg(c).some(function(w){return g.indexOf(w)>=0}))return!0}return!1},on:function(c,g,b){var w=R0.get(c);w||(w=c.previousAttributes(),R0.set(c,w));var C=b||g||{};if(C.noUndo&&setTimeout(function(){R0.delete(c)}),!I0(C)){var B=c.toJSON({fromUndo:o}),ne={object:c,before:w,after:B};return R0.delete(c),(0,x.isEmpty)(B)?void 0:ne}}}),r.um.changeUndoType("add",{on:function(c,g,b){if(void 0===b&&(b={}),!I0(b)&&r.isRegistered(g))return{object:g,before:void 0,after:c,options:sg(sg({},b),{fromUndo:o})}}}),r.um.changeUndoType("remove",{on:function(c,g,b){if(void 0===b&&(b={}),!I0(b)&&r.isRegistered(g))return{object:g,before:c,after:void 0,options:sg(sg({},b),{fromUndo:o})}}}),r.um.changeUndoType("reset",{undo:function(c,g){c.reset(g,{fromUndo:o})},redo:function(c,g,b){c.reset(b,{fromUndo:o})},on:function(c,g){if(void 0===g&&(g={}),!I0(g)&&r.isRegistered(c))return{object:c,before:g.previousModels,after:L0([],c.models,!0),options:sg(sg({},g),{fromUndo:o})}}}),r.um.on("undo redo",function(){e.getSelectedAll().map(function(c){return c.trigger("rerender:layer")})}),[gh.undo,gh.redo].forEach(function(c){return r.um.on(c,function(){return e.trigger(c)})}),r}return a2(a,d),a.prototype.postLoad=function(){var o=this.em;this.config.trackSelection&&o&&this.add(o.get("selected"))},a.prototype.add=function(e){return this.um.register(e),this},a.prototype.remove=function(e){return this.um.unregister(e),this},a.prototype.removeAll=function(){return this.um.unregisterAll(),this},a.prototype.start=function(){return this.um.startTracking(),this},a.prototype.stop=function(){return this.um.stopTracking(),this},a.prototype.undo=function(e){void 0===e&&(e=!0);var c=this.um;return!this.em.isEditing()&&c.undo(e),this},a.prototype.undoAll=function(){return this.um.undoAll(),this},a.prototype.redo=function(e){void 0===e&&(e=!0);var c=this.um;return!this.em.isEditing()&&c.redo(e),this},a.prototype.redoAll=function(){return this.um.redoAll(),this},a.prototype.hasUndo=function(){return!!this.um.isAvailable("undo")},a.prototype.hasRedo=function(){return!!this.um.isAvailable("redo")},a.prototype.isRegistered=function(e){return!!this.getInstance().objectRegistry.isRegistered(e)},a.prototype.getStack=function(){return this.um.stack},a.prototype.getStackGroup=function(){var e=[],r=[];return this.getStack().forEach(function(o){var c=o.get("magicFusionIndex");r.indexOf(c)<0&&(r.push(c),e.push(o))}),e},a.prototype.skip=function(e){var r=!!this.um.isTracking();r&&this.stop(),e(),r&&this.start()},a.prototype.getGroupedStack=function(){var e={};return this.getStack().forEach(function(c,g){var b=c.get("magicFusionIndex"),w=function(c,g){var b=c.attributes,ae=b.options;return{index:g,type:b.type,after:b.after,before:b.before,object:b.object,options:void 0===ae?{}:ae}}(c,g);e[b]?e[b].push(w):e[b]=[w]}),Object.keys(e).map(function(c){var g=e[c];return{index:g[g.length-1].index,actions:g,labels:(0,x.unique)(g.reduce(function(b,w){var C,B=null===(C=w.options)||void 0===C?void 0:C.action;return B&&b.push(B),b},[]))}})},a.prototype.goToGroup=function(e){var r=this;if(e){var o=this.getPointer(),c=e.index-o;(0,x.times)(Math.abs(c),function(){r[c<0?"undo":"redo"](!1)})}},a.prototype.getPointer=function(){return this.getStack().pointer},a.prototype.clear=function(){return this.um.clear(),this},a.prototype.getInstance=function(){return this.um},a.prototype.destroy=function(){this.clear().removeAll()},a}(Oe);const Rd=fv;var i_=function(){return i_=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},i_.apply(this,arguments)},m1=function(d){return d[d.ACTIVE=1]="ACTIVE",d[d.INACTIVE=0]="INACTIVE",d[d.DISABLED=-1]="DISABLED",d}(m1||{}),g1="_rte",py=function(d,a){void 0===a&&(a="A");var e=d.selection()||{},r=e.anchorNode,o=e.focusNode,c=r?.parentNode,g=o?.parentNode;return c?.nodeName==a||g?.nodeName==a},F0="data-selectme",fy={bold:{name:"bold",icon:"<b>B</b>",attributes:{title:"Bold"},result:function(d){return d.exec("bold")}},italic:{name:"italic",icon:"<i>I</i>",attributes:{title:"Italic"},result:function(d){return d.exec("italic")}},underline:{name:"underline",icon:"<u>U</u>",attributes:{title:"Underline"},result:function(d){return d.exec("underline")}},strikethrough:{name:"strikethrough",icon:"<s>S</s>",attributes:{title:"Strike-through"},result:function(d){return d.exec("strikeThrough")}},link:{icon:'<svg viewBox="0 0 24 24">\n          <path fill="currentColor" d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />\n        </svg>',name:"link",attributes:{style:"font-size:1.4rem;padding:0 4px 2px;",title:"Link"},state:function(d){return d&&d.selection()&&py(d)?1:0},result:function(d){py(d)?d.exec("unlink"):d.insertHTML('<a href="" '.concat(F0,">").concat(d.selection(),"</a>"),{select:!0})}},wrap:{name:"wrap",icon:'<svg viewBox="0 0 24 24">\n            <path fill="currentColor" d="M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z" />\n        </svg>',attributes:{title:"Wrap for style"},state:function(d){return d?.selection()&&py(d,"SPAN")?-1:0},result:function(d){!py(d,"SPAN")&&d.insertHTML("<span ".concat(F0,">").concat(d.selection(),"</span>"),{select:!0})}}},qC=function(){function d(a,e,r){void 0===r&&(r={});var o=this;if(this.em=a,this.settings=r,e[g1])return e[g1];e[g1]=this,this.setEl(e),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var c=(r.actions||[]).map(function(B){var ne=B;return(0,x.isString)(B)?ne=i_({},fy[B]):fy[B.name]&&(ne=i_(i_({},fy[B.name]),B)),ne}),g=c.length?c:Object.keys(fy).map(function(B){return fy[B]});r.classes=i_({actionbar:"actionbar",button:"action",active:"active",disabled:"disabled",inactive:"inactive"},r.classes);var b=r.classes,w=r.actionbar;if(this.actionbar=w,this.classes=b,this.actions=g,!w){if(!this.isCustom(r.module)){var C=r.actionbarContainer;(w=document.createElement("div")).className=b.actionbar,C?.appendChild(w),this.actionbar=w}g.forEach(function(B){return o.addAction(B)})}return r.styleWithCSS&&this.exec("styleWithCSS"),this}return d.prototype.isCustom=function(a){var e=a||this.em.RichTextEditor;return!(!e?.config.custom&&!e?.customRte)},d.prototype.destroy=function(){},d.prototype.setEl=function(a){this.el=a,this.doc=a.ownerDocument},d.prototype.updateActiveActions=function(){var a=this,e=this.getActions();e.forEach(function(r){var o=r.update,c=r.btn,g=a.classes,b=g.active,w=g.inactive,C=g.disabled,B=r.state,ne=r.name,ae=a.doc,be=m1.INACTIVE;if(c&&(c.className=c.className.replace(b,"").trim(),c.className=c.className.replace(w,"").trim(),c.className=c.className.replace(C,"").trim()),B){var Se=B(a,ae);if(be=Se,c)switch(Se){case 1:c.className+=" ".concat(b);break;case 0:c.className+=" ".concat(w);break;case-1:c.className+=" ".concat(C)}}else ae.queryCommandSupported(ne)&&ae.queryCommandState(ne)&&(c&&(c.className+=" ".concat(b)),be=m1.ACTIVE);r.currentState=be,o?.(a,r)}),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},d.prototype.enable=function(a){return this.enabled?this:this.__toggleEffects(!0,a)},d.prototype.disable=function(){return this.__toggleEffects(!1)},d.prototype.__toggleEffects=function(a,e){void 0===a&&(a=!1),void 0===e&&(e={});var r=a?Ln.on:Ln.AU,c=this.el,g=this.doc,b=this.actionbarEl();if(b&&(b.style.display=a?"":"none"),c.contentEditable="".concat(!!a),r(c,"mouseup keyup",this.updateActiveActions),r(g,"keydown",this.__onKeydown),r(g,"paste",this.__onPaste),this.enabled=a,a){var w=e.event;if(this.syncActions(),this.updateActiveActions(),w){var C=null;if(g.caretRangeFromPoint){var B=(0,Ln.G2)(w);C=g.caretRangeFromPoint(B.clientX,B.clientY)}else w.rangeParent&&(C=g.createRange()).setStart(w.rangeParent,w.rangeOffset);var ne=g.getSelection();ne?.removeAllRanges(),C&&ne?.addRange(C)}c.focus()}return this},d.prototype.__onKeydown=function(a){var e=this.em,r=e.RichTextEditor.getConfig().onKeydown;if(r)return r({ev:a,rte:this,editor:e.getEditor()});var o=this.doc;"Enter"===a.key&&!["insertOrderedList","insertUnorderedList"].some(function(g){return o.queryCommandState(g)})&&(o.execCommand("insertLineBreak"),a.preventDefault())},d.prototype.__onPaste=function(a){var e=this.em,r=e.RichTextEditor.getConfig().onPaste;if(r)return r({ev:a,rte:this,editor:e.getEditor()});var o=a.clipboardData,c=o.getData("text"),g=o.getData("text/html");if(c&&!g){a.preventDefault();var b=c.replace(/(?:\r\n|\r|\n)/g,"<br/>");this.doc.execCommand("insertHTML",!1,b)}},d.prototype.syncActions=function(){var a=this;this.getActions().forEach(function(e){if(a.actionbar&&(!e.state||e.state&&e.state(a,a.doc)>=0)){var o=e.btn;o&&(o["on".concat(e.event||"click")]=function(){e.result(a,e),a.updateActiveActions()})}})},d.prototype.addAction=function(a,e){void 0===e&&(e={});var r=e.sync,o=this.actionbarEl();if(o){var c=a.icon,g=a.attributes,b=void 0===g?{}:g,w=document.createElement("span");for(var C in w.className=this.classes.button,a.btn=w,b)w.setAttribute(C,b[C]);"string"==typeof c?w.innerHTML=c:w.appendChild(c),o.appendChild(w)}r&&(this.actions.push(a),this.syncActions())},d.prototype.getActions=function(){return this.actions},d.prototype.selection=function(){return this.doc.getSelection()},d.prototype.exec=function(a,e){this.doc.execCommand(a,!1,e)},d.prototype.actionbarEl=function(){return this.actionbar},d.prototype.insertHTML=function(a,e){var o=(void 0===e?{}:e).select,c=this,g=c.em,b=c.doc,w=c.el,C=b.getSelection();if(C&&C.rangeCount){var B=(0,z.getComponentModel)(w)||g.getSelected(),ne=b.createElement("div"),ae=C.getRangeAt(0);ae.deleteContents(),(0,x.isString)(a)?ne.innerHTML=a:a&&ne.appendChild(a),Array.prototype.slice.call(ne.childNodes).forEach(function(be){ae.insertNode(be)}),C.removeAllRanges(),C.addRange(ae),w.focus(),o&&B&&(B.once("rte:disable",function(){var be=B.find("[".concat(F0,"]"))[0];be&&(g.setSelected(be),be.removeAttributes(F0))}),B.trigger("disable"))}},d}();const $C=qC;var Ug=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),hy=function(){return hy=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},hy.apply(this,arguments)},j0=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},mv=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}},_1="".concat(vr.refresh," frame:scroll ").concat(gt.I.update),QC={enable:"rte:enable",disable:"rte:disable",custom:"rte:custom"},XC=function(d){function a(e){var r=d.call(this,e,"RichTextEditor",{stylePrefix:"rte-",adjustToolbar:!0,actions:["bold","italic","underline","strikethrough","link","wrap"],custom:!1})||this;r.events=QC;var o=r.config,c=o.pStylePrefix;c&&(o.stylePrefix=c+o.stylePrefix),r.pfx=o.stylePrefix,r.actions=o.actions||[];var g=new L.Kx;return r.model=g,g.on("change:currentView",r.__trgCustom,r),r.__dbdTrgCustom=(0,x.debounce)(function(){return r.__trgCustom()},0),r}return Ug(a,d),a.prototype.onLoad=function(){if((0,z.hasWin)()){var e=this.config,r=e.pStylePrefix,o=e.custom,c=(0,Ln.a_)("div",{class:(0,Ln.cx)("".concat(r,"rte-toolbar"),!o&&"".concat(r,"one-bg ").concat(r,"rte-toolbar-ui"))});this.toolbar=c,this.initRte((0,Ln.a_)("div")),(0,Ln.on)(c,"mousedown",function(g){return g.stopPropagation()})}},a.prototype.__trgCustom=function(){var e=this;e.em.trigger(e.events.custom,{enabled:!!e.model.get("currentView"),container:this.getToolbarEl(),actions:this.getAll()})},a.prototype.destroy=function(){var e,r,o;null===(e=this.globalRte)||void 0===e||e.destroy(),null===(o=null===(r=this.customRte)||void 0===r?void 0:r.destroy)||void 0===o||o.call(r),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,Ln.YZ)(this.toolbar)},a.prototype.postRender=function(e){var r=e.model.get("Canvas");this.toolbar.style.pointerEvents="all",this.hideToolbar(),r.getToolsEl().appendChild(this.toolbar)},a.prototype.initRte=function(e){var r=this.globalRte,o=this,c=o.em,g=o.pfx,b=o.actionbar,C=this.actions||function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],o.config.actions,!0),B={actionbar:"".concat(g,"actionbar"),button:"".concat(g,"action"),active:"".concat(g,"active"),inactive:"".concat(g,"inactive"),disabled:"".concat(g,"disabled")};return r?(r.em=c,r.setEl(e)):(r=new $C(c,e,{classes:B,actions:C,actionbar:b,actionbarContainer:this.toolbar,module:this}),this.globalRte=r),r.actionbar&&(this.actionbar=r.actionbar),r.actions&&(this.actions=r.actions),r},a.prototype.add=function(e,r){var o;void 0===r&&(r={}),r.name=e,null===(o=this.globalRte)||void 0===o||o.addAction(r,{sync:!0})},a.prototype.get=function(e){var r,o;return null===(r=this.globalRte)||void 0===r||r.getActions().forEach(function(c){c.name==e&&(o=c)}),o},a.prototype.getAll=function(){var e;return(null===(e=this.globalRte)||void 0===e?void 0:e.getActions())||[]},a.prototype.remove=function(e){var r,o=this.getAll(),c=this.get(e);if(c){var g=c.btn,b=o.indexOf(c);null===(r=g?.parentNode)||void 0===r||r.removeChild(g),o.splice(b,1)}return c},a.prototype.run=function(e){var r=this.globalRte,o=(0,x.isString)(e)?this.get(e):e;r&&o&&(o.result(r,o),r.updateActiveActions())},a.prototype.getToolbarEl=function(){return this.toolbar},a.prototype.updatePosition=function(){var o=this.toolbar,b=o.style,w=this.em.Canvas.getTargetToElementFixed(this.lastEl,o,{event:"rteToolbarPosUpdate",left:0});["top","left","bottom","right"].forEach(function(C){var B=w[C];(0,z.isDef)(B)&&(b[C]=(0,x.isString)(B)?B:(B||0)+"px")})},a.prototype.enable=function(e,r,o){return j0(this,void 0,void 0,function(){var c,g,b,w,C;return mv(this,function(B){switch(B.label){case 0:return this.lastEl=e.el,g=(c=this).customRte,b=c.em,w=e.getChildrenContainer(),this.toolbar.style.display="",[4,g?g.enable(w,r,o):this.initRte(w).enable(o)];case 1:return C=B.sent(),b&&(setTimeout(this.updatePosition.bind(this),0),b.off(_1,this.updatePosition,this),b.on(_1,this.updatePosition,this),b.trigger("rte:enable",e,C)),this.model.set({currentView:e}),[2,C]}})})},a.prototype.getContent=function(e,r){return j0(this,void 0,void 0,function(){var o,c;return mv(this,function(g){switch(g.label){case 0:return o=this.customRte,c=e.getChildrenContainer(),o&&r&&(0,x.isFunction)(o.getContent)?[4,o.getContent(c,r,{view:e})]:[3,2];case 1:return[2,g.sent()];case 2:return[2,c.innerHTML]}})})},a.prototype.hideToolbar=function(){var e=this.toolbar.style,r="-1000px";e.top=r,e.left=r,e.display="none"},a.prototype.disable=function(e,r){return j0(this,arguments,void 0,function(o,c,g){var b,w,C,B;return void 0===g&&(g={}),mv(this,function(ne){switch(ne.label){case 0:return b={},w=this.em,(C=this.customRte)?[4,C.disable(o.getChildrenContainer(),c,hy(hy({},g),{view:o}))]:[3,2];case 1:return(B=ne.sent())&&(b=B),[3,3];case 2:c&&c.disable(),ne.label=3;case 3:return this.hideToolbar(),w&&(w.off(_1,this.updatePosition,this),!g.fromMove&&w.trigger("rte:disable",o,c)),this.model.unset("currentView"),[2,b]}})})},a}(Oe);const eE=XC;var tE=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Kp=function(){return Kp=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Kp.apply(this,arguments)},l2=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},w1=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return tE(a,d),a.getDefaults=function(){return(0,x.result)(this.prototype,"defaults")},a.prototype.defaults=function(){return{name:"",property:"",type:"",defaults:"",info:"",value:"",icon:"",functionName:"",status:"",visible:!0,fixedValues:["initial","inherit"],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},a.prototype.initialize=function(e,r){void 0===e&&(e={}),void 0===r&&(r={}),this.em=r.em;var o=this.getId()||"",c=this.get("name")||this.get("label")||"";!this.get("property")&&this.set("property",(c||o).replace(/ /g,"-"));var g=this.get("property");!this.get("id")&&this.set("id",g),!c&&this.set("name",(0,z.capitalize)(g).replace(/-/g," ")),this.on("change",this.__upTargets),a.callInit(this,e,r)},a.prototype.__getParentProp=function(){var e,r;return null===(r=null===(e=this.collection)||void 0===e?void 0:e.opts)||void 0===r?void 0:r.parentProp},a.prototype.__upTargets=function(e,r){var o,c=this;void 0===r&&(r={});var b=this.em.Styles,w=this.getName(),C=r.__clear,B=C?"":this.__getFullValue(r),ne=this.__getParentProp(),ae=this.changedAttributes(),be=(0,x.keys)(ae).reduce(function(Gt,ar){return Gt[ar]=c.previous(ar),Gt},{}),Se=l2(l2([],(0,x.keys)(this.__getClearProps()),!0),["__p"],!1),We=(0,x.keys)(ae),lt=!r.__up&&!ne&&(C||Se.some(function(Gt){return We.indexOf(Gt)>=0})),Ot=this.get("onChange"),ur={property:this,from:be,to:ae,value:B,opts:r};b.__trgEv(b.events.propertyUpdate,ur),Ot&&Ot(ur),lt&&this.__upTargetsStyle(((o={})[w]=B,o),r)},a.prototype.__upTargetsStyle=function(e,r){var o,c=null===(o=this.em)||void 0===o?void 0:o.get("StyleManager");c?.addStyleTargets(Kp(Kp({},e),{__p:!!r.avoidStore}),r)},a.prototype._up=function(e,r){void 0===r&&(r={}),r.noTarget&&(r.__up=!0);var o=r.partial,c=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(r,["partial"]);return e.__p=!(!c.avoidStore&&!o),this.set(e,Kp(Kp({},c),{avoidStore:e.__p}))},a.prototype.up=function(e,r){void 0===r&&(r={}),this.set(e,Kp(Kp({},r),{__up:!0}))},a.prototype.init=function(){},a.prototype.getId=function(){return this.get("id")},a.prototype.getType=function(){return this.get("type")},a.prototype.getName=function(){return this.get("property")},a.prototype.getLabel=function(e){var r;void 0===e&&(e={});var o=e.locale,c=void 0===o||o,g=this.getId(),b=this.get("name")||this.get("label");return c&&(null===(r=this.em)||void 0===r?void 0:r.t("styleManager.properties.".concat(g)))||b},a.prototype.getValue=function(e){void 0===e&&(e={});var r=e.noDefault,o=this.get("value");return this.hasValue()||r?o:this.getDefaultValue()},a.prototype.hasValue=function(e){void 0===e&&(e={});var o=e.noParent&&this.getParentTarget(),c=this.get("value");return!(0,x.isUndefined)(c)&&""!==c&&!o},a.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},a.prototype.getStyle=function(e){var r;void 0===e&&(e={});var o=this.getName();return(r={})[e.camelCase?(0,z.camelCase)(o):o]=this.__getFullValue(e),r},a.prototype.getDefaultValue=function(){var e=this.get("default");return"".concat((0,x.isUndefined)(e)?this.get("defaults"):e)},a.prototype.upValue=function(e,r){void 0===r&&(r={});var o=null===e||""===e?this.__getClearProps():this.__parseValue(e,r);return this._up(o,r)},a.prototype.isVisible=function(){return!!this.get("visible")},a.prototype.clear=function(e){return void 0===e&&(e={}),this._up(this.__getClearProps(),Kp(Kp({},e),{__clear:!0})),this},a.prototype.canClear=function(){var e=this.getParent();return e?e.__canClearProp(this):this.hasValue({noParent:!0})},a.prototype.getParent=function(){return this.__getParentProp()},a.prototype.isFull=function(){return!!this.get("full")},a.prototype.__parseValue=function(e,r){return this.parseValue(e,r)},a.prototype.__getClearProps=function(){return{value:"",important:!1}},a.prototype.setValue=function(e,r,o){void 0===r&&(r=!0),void 0===o&&(o={});var c=this.parseValue(e),g=!r;!g&&this.set({value:void 0},{avoidStore:g,silent:!0}),this.set(c,Kp({avoidStore:g},o))},a.prototype.setValueFromInput=function(e,r,o){void 0===o&&(o={}),this.setValue(e,r,Kp(Kp({},o),{fromInput:1}))},a.prototype.parseValue=function(e,r){void 0===r&&(r={});var o={value:e},c="!important",g=this.get("functionName")||"";if((0,x.isString)(e)&&-1!==e.indexOf(c)&&(o.value=e.replace(c,"").trim(),o.important=!0),!g&&!r.complete)return o;var b=[],w="".concat(o.value).trim(),C=w.indexOf("(")+1,B=g||w.substring(0,C-1);if(B&&(o.functionName=B),!g||0===w.indexOf("".concat(g,"("))){var ne=w.lastIndexOf(")");b.push(C),ne>=0&&b.push(ne),o.value=String.prototype.substring.apply(w,b)}if(r.numeric){var ae=parseFloat(o.value);o.unit=o.value.replace(ae,""),o.value=ae}return o},a.prototype.__getFullValue=function(e){var o=(void 0===e?{}:e).withDefault;return!this.hasValue()&&o?this.getDefaultValue():this.getFullValue()},a.prototype.getFullValue=function(e,r){void 0===r&&(r={});var o=this.get("functionName"),c=this.getDefaultValue(),g=(0,x.isUndefined)(e)?this.get("value"):e,b=this.hasValue();if(g&&c&&g===c)return c;if(o&&b){var w="url"===o?"'".concat(g.replace(/'|"/g,""),"'"):g;g="".concat(o,"(").concat(w,")")}return b&&this.get("important")&&!r.skipImportant&&(g="".concat(g," !important")),g||""},a.prototype.__setParentTarget=function(e){this.up({parentTarget:e})},a.prototype.getParentTarget=function(){return this.get("parentTarget")||null},a.prototype.__parseFn=function(e){void 0===e&&(e="");var r=e.indexOf("(")+1,o=e.lastIndexOf(")");return{name:e.substring(0,r-1).trim(),value:String.prototype.substring.apply(e,[r,o>=0?o:void 0]).trim()}},a.prototype.__checkVisibility=function(e){var r=e.target,o=e.component,c=e.sectors,g=o||r;if(!g)return!1;var b=this.getId(),w=this.getName(),C=this.get("toRequire"),B=this.get("requires"),ne=this.get("requiresParent"),ae=g.get("unstylable"),be=g.get("stylable-require"),Se=g.get("stylable");if((0,x.isArray)(Se)&&(Se=Se.indexOf(w)>=0),(0,x.isArray)(ae)&&(Se=ae.indexOf(w)<0),C&&(Se=!r||be&&(be.indexOf(b)>=0||be.indexOf(w)>=0)),c&&B){var We=(0,x.keys)(B);c.forEach(function(Gt){Gt.getProperties().forEach(function(ar){(0,x.includes)(We,ar.id)&&(Se=Se&&(0,x.includes)(B[ar.id],ar.get("value")))})})}if(ne){var lt=o&&o.parent(),Ot=lt&&lt.getEl();if(Ot){var ur=(0,z.hasWin)()?window.getComputedStyle(Ot):{};(0,x.each)(ne,function(Gt,ar){Se=Se&&ur[ar]&&(0,x.includes)(Gt,ur[ar])})}else Se=!1}return!!Se},a}(L.Kx);const bu=w1;w1.callParentInit=function(d,a,e,r){void 0===r&&(r={}),d.prototype.initialize.apply(a,[e,Kp(Kp({},r),{skipInit:1})])},w1.callInit=function(d,a,e){void 0===e&&(e={}),!e.skipInit&&d.init(a,e)};var N0=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),a_=function(){return a_=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},a_.apply(this,arguments)},c2=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},u2=function(d){return"integer"===d||"number"===d},d2=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return N0(a,d),a.prototype.defaults=function(){return a_(a_({},bu.getDefaults()),{detached:!1,properties:[],separator:" ",join:null,fromStyle:null,toStyle:null,full:!0})},a.prototype.initialize=function(e,r){void 0===e&&(e={}),void 0===r&&(r={}),bu.callParentInit(bu,this,e,r);var o=this.em,c=new vy(this.get("properties")||[],{em:o,parentProp:this});this.set("properties",c,{silent:!0}),this.listenTo(c,"change",this.__upProperties),bu.callInit(this,e,r)},Object.defineProperty(a.prototype,"properties",{get:function(){return this.get("properties")||[]},enumerable:!1,configurable:!0}),a.prototype.getProperties=function(){return c2([],this.get("properties").models,!0)},a.prototype.getProperty=function(e){return this.properties.filter(function(r){return r.getId()===e||r.getName()===e})[0]},a.prototype.getPropertyAt=function(e){return this.get("properties").at(e)},a.prototype.isDetached=function(){return!!this.get("detached")},a.prototype.getValues=function(e){var o=(void 0===e?{}:e).byName;return this.getProperties().reduce(function(c,g){return c[o?g.getName():g.getId()]="".concat(g.__getFullValue()),c},{})},a.prototype.getSeparator=function(){return this.getSplitSeparator()},a.prototype.getJoin=function(){return this.__getJoin()},a.prototype.getStyleFromProps=function(e){var r;void 0===e&&(e={});var o=this.getName(),c=this.__getJoin(),g=this.get("toStyle"),b=this.getValues(),w={};if(g)w=g(b,{join:c,name:o,property:this});else if(b=this.getValues({byName:!0}),this.isDetached())w=b;else{var C=this.getProperties().map(function(B){return B.__getFullValue({withDefault:1})}).filter(Boolean).join(c);(r={})[o]=C,w=r}return this.isDetached()?w[o]="":(w[o]=w[o]||"",w=a_(a_({},w),this.getProperties().reduce(function(B,ne){return B[ne.getName()]="",B},{}))),e.camelCase?Object.keys(w).reduce(function(B,ne){return B[(0,z.camelCase)(ne)]=w[ne],B},{}):w},a.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get("separator"),"(?![^\\(]*\\))"))},a.prototype.__upProperties=function(e,r){if(void 0===r&&(r={}),!r.__up&&!r.__clearIn){var o=this.__getParentProp();if(o)return o.__upProperties(this,r);this.__upTargetsStyleProps(r,e)}},a.prototype.__upTargetsStyleProps=function(e,r){var o;void 0===e&&(e={});var c=this.getStyleFromProps();if(this.isDetached()&&r){var g=r.getName();(o={})[g]=c[g],c=o}this.__upTargetsStyle(c,e)},a.prototype._up=function(e,r){return void 0===r&&(r={}),this.__setProperties(this.__getSplitValue(e.value),r),bu.prototype._up.call(this,e,r),this},a.prototype.getStyle=function(e){return this.getStyleFromProps(e)},a.prototype.__getFullValue=function(e){if(void 0===e&&(e={}),this.isDetached()||e.__clear)return"";var r=this.getStyleFromProps()[this.getName()]||"";return dt(r)},a.prototype.__getJoin=function(){var e=this.get("join");return(0,x.isString)(e)?e:this.get("separator")},a.prototype.__styleHasProps=function(e){void 0===e&&(e={});var r=this.getName(),c=this.getProperties().map(function(b){return b.getName()});return c2([r],c,!0).some(function(b){return!(0,x.isUndefined)(e[b])&&""!==e[b]})},a.prototype.__splitValue=function(e,r){return dt(e).split(r).map(function(o){return o.trim()}).filter(Boolean)},a.prototype.__splitStyleName=function(e,r,o){return this.__splitValue(e[r]||"",o)},a.prototype.__getSplitValue=function(e,r){void 0===e&&(e="");var c=(void 0===r?{}:r).byName,g=this.getProperties(),b=4===g.length&&g.every(function(B){return u2(B.getType())}),w=this.__splitValue(e,this.getSplitSeparator()),C={};return g.forEach(function(B,ne){var ae=w[ne],be=(0,x.isUndefined)(ae)?"":ae;if(b){var Se=w.length;be=w[ne]||w[ne%Se+(1!=Se&&Se%2?1:0)]||be}var We=c?B.getName():B.getId();C[We]=be||""}),C},a.prototype.__getPropsFromStyle=function(e,r){if(void 0===e&&(e={}),void 0===r&&(r={}),!this.__styleHasProps(e))return null;var o=r.byName,c=this.getName(),g=this.getProperties(),b=this.getSplitSeparator(),w=this.get("fromStyle"),C=w?w(e,{property:this,name:c,separator:b}):{};return w||(C=this.__getSplitValue(e[c]||"",{byName:o}),g.forEach(function(ne){var ae=e[ne.getName()],be=o?ne.getName():ne.getId();!(0,x.isUndefined)(ae)&&""!==ae&&(C[be]=ae)})),C},a.prototype.__setProperties=function(e,r){void 0===e&&(e={}),void 0===r&&(r={}),this.getProperties().forEach(function(c){var g=e[c.getId()];c.__getFullValue()!==g&&c.upValue(g,r)});var o=(0,x.keys)(e).map(function(c){return e[c]}).join(" ");this.set("value",o,{silent:!0})},a.prototype.clear=function(){var e=this;return this.getProperties().map(function(r){return r.clear({__clearIn:!e.isDetached()})}),bu.prototype.clear.call(this),this},a.prototype.hasValue=function(e){return this.getProperties().some(function(r){return r.hasValue(e)})},a.prototype.getFullValue=function(){return this.__getFullValue()},a.prototype.__canClearProp=function(e){return this.isDetached()&&e.hasValue({noParent:!0})},a}(bu);const s_=d2;var Vp=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),zp=function(){return zp=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},zp.apply(this,arguments)},nE=/,(?![^\(]*\))/,oE=/\s(?![^(]*\))/,iE=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Vp(a,d),a.prototype.defaults=function(){return zp(zp({},s_.getDefaults()),{layers:[],emptyValue:"unset",layerSeparator:", ",layerJoin:"",prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},a.prototype.initialize=function(e,r){void 0===e&&(e={}),void 0===r&&(r={}),s_.callParentInit(s_,this,e,r);var o=this.get("layers"),c=new g0(o,{prop:this});c.property=this,c.properties=this.get("properties"),this.set("layers",c,{silent:!0}),this.on("change:selectedLayer",this.__upSelected),this.listenTo(c,"add remove",this.__upLayers),s_.callInit(this,e,r)},Object.defineProperty(a.prototype,"layers",{get:function(){return this.get("layers")},enumerable:!1,configurable:!0}),a.prototype.getLayers=function(){return this.layers.models},a.prototype.hasLayers=function(){return this.getLayers().length>0},a.prototype.getLayer=function(e){return void 0===e&&(e=0),this.layers.at(e)||void 0},a.prototype.getSelectedLayer=function(){var e=this.get("selectedLayer");return e&&e.getIndex()>=0?e:void 0},a.prototype.selectLayer=function(e){return this.set("selectedLayer",e,{__select:!0})},a.prototype.selectLayerAt=function(e){void 0===e&&(e=0);var r=this.getLayer(e);return r&&this.selectLayer(r)},a.prototype.moveLayer=function(e,r){void 0===r&&(r=0);var o=this.layers,c=e?e.getIndex():-1;c>=0&&(0,x.isNumber)(r)&&r>=0&&r<o.length&&c!==r&&(this.removeLayer(e),o.add(e,{at:r}))},a.prototype.addLayer=function(e,r){void 0===e&&(e={}),void 0===r&&(r={});var o={};return this.getProperties().forEach(function(g){var b=g.getId(),w=e[b];o[b]=(0,x.isUndefined)(w)?g.getDefaultValue():w}),this.layers.push({values:o},r)},a.prototype.removeLayer=function(e){return this.layers.remove(e)},a.prototype.removeLayerAt=function(e){void 0===e&&(e=0);var r=this.getLayer(e);return r?this.removeLayer(r):null},a.prototype.getLayerLabel=function(e){var r="";if(e){var o=this.get("layerLabel"),c=e.getValues(),g=e.getIndex();if(o)r=o(e,{index:g,values:c,property:this});else{var b=[];this.getProperties().map(function(w){b.push(c[w.getId()])}),r=b.filter(Boolean).join(" ")}}return r},a.prototype.getStyleFromLayer=function(e,r){var o;void 0===r&&(r={});var B,c=this.__getJoin(),g=this.__getJoinLayers(),b=this.get("toStyle"),w=this.getName(),C=e.getValues();if(b)B=b(C,{join:c,joinLayers:g,name:w,layer:e,property:this});else{var ne=this.getProperties().map(function(ae){var be=ae.getName(),Se=C[ae.getId()],We=(0,x.isUndefined)(Se)?ae.getDefaultValue():Se;if(r.number&&u2(ae.getType())){var lt=ae.parseValue(Se,r.number);We="".concat(lt.value).concat(lt.unit)}return{name:be,value:We}});B=this.isDetached()?ne.reduce(function(ae,be){return ae[be.name]=be.value,ae},{}):((o={})[this.getName()]=ne.map(function(ae){return ae.value}).join(c),o)}return r.camelCase?Object.keys(B).reduce(function(ae,be){return ae[(0,z.camelCase)(be)]=B[be],ae},{}):B},a.prototype.getStylePreview=function(e,r){void 0===r&&(r={});var o={};return this.get("preview")&&(o=this.getStyleFromLayer(e,r)),o},a.prototype.getLayerSeparator=function(){var e=this.get("layerSeparator");return(0,x.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},a.prototype.hasEmptyValue=function(){return!this.hasLayers()&&!!this.attributes.isEmptyValue},a.prototype.__upProperties=function(e,r){var o;void 0===r&&(r={});var c=this.getSelectedLayer();c&&(c.upValues(((o={})[e.getId()]=e.__getFullValue(),o)),!r.__up&&this.__upTargetsStyleProps(r))},a.prototype.__upLayers=function(e,r,o){this.__upTargetsStyleProps(o||r)},a.prototype.__upTargets=function(e,r){if(void 0===r&&(r={}),!r.__select)return bu.prototype.__upTargets.call(this,e,r)},a.prototype.__upTargetsStyleProps=function(e){void 0===e&&(e={}),this.__upTargetsStyle(this.getStyleFromLayers(e),e)},a.prototype.__upTargetsStyle=function(e,r){return bu.prototype.__upTargetsStyle.call(this,e,r)},a.prototype.__upSelected=function(e,r){var c=(void 0===e?{}:e).noEvent;void 0===r&&(r={});var g=this.em.Styles,b=this.getSelectedLayer(),w=b?.getValues();w&&this.getProperties().forEach(function(C){var B,ne=null!==(B=w[C.getId()])&&void 0!==B?B:"";C.__getFullValue()!==ne&&C.upValue(ne,zp(zp({},r),{__up:!0}))}),!c&&g.__trgEv(g.events.layerSelect,{property:this})},a.prototype._up=function(e,r){void 0===r&&(r={});var o=e.__layers,c=void 0===o?[]:o,g=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(e,["__layers"]);return!this.isDetached()&&this.__setLayers(c),this.__upSelected({noEvent:!0},r),bu.prototype._up.call(this,g,r),this},a.prototype.__setLayers=function(e,r){void 0===e&&(e=[]),void 0===r&&(r={});var o=this.layers,c=e.map(function(g){return{values:g}});o.length===c.length?c.map(function(g,b){var w;return null===(w=o.at(b))||void 0===w?void 0:w.upValues(g.values)}):o.reset(c),this.set({isEmptyValue:!!r.isEmptyValue}),this.__upSelected({noEvent:!0})},a.prototype.__parseValue=function(e){var r=this,o=this.parseValue(e);return o.__layers=e.split(nE).map(function(c){return c.trim()}).map(function(c){return r.__parseLayer(c)}).filter(Boolean),o},a.prototype.__parseLayer=function(e){var r=this.get("parseLayer"),o=e.split(oE),c=this.getProperties();return r?r({value:e,values:o}):c.reduce(function(g,b,w){var C=o[w];return g[b.getId()]=(0,x.isUndefined)(C)?b.getDefaultValue():C,g},{})},a.prototype.__getLayersFromStyle=function(e){var r=this;if(void 0===e&&(e={}),!this.__styleHasProps(e))return null;if(this.isEmptyValueStyle(e))return[];var o=this.getName(),c=this.getProperties(),g=this.getLayerSeparator(),b=this.attributes.fromStyle,w=b?b(e,{property:this,name:o,separatorLayers:g}):[];if(!b){var C=this.__splitStyleName(e,o,g).map(function(B){return B.split(r.getSplitSeparator())}).map(function(B){var ne={};return c.forEach(function(ae,be){var Se=B[be];ne[ae.getId()]=(0,x.isUndefined)(Se)?ae.getDefaultValue():Se}),ne});c.forEach(function(B){var ne=B.getId();r.__splitStyleName(e,B.getName(),g).map(function(ae){var be;return(be={})[ne]=ae||B.getDefaultValue(),be}).forEach(function(ae,be){C[be]=C[be]?zp(zp({},C[be]),ae):ae})}),w=C}return(0,x.isArray)(w)?w:[w]},a.prototype.getStyle=function(e){return void 0===e&&(e={}),this.getStyleFromLayers(e)},a.prototype.getStyleFromLayers=function(e){var r=this;void 0===e&&(e={});var o={},c=this.getName(),g=this.getLayers(),b=this.getProperties();if(g.map(function(B){return r.getStyleFromLayer(B,e)}).forEach(function(B){(0,x.keys)(B).map(function(ne){o[ne]||(o[ne]=[]),o[ne].push(B[ne])})}),(0,x.keys)(o).map(function(B){o[B]=o[B].join(r.__getJoinLayers())}),this.isDetached())o[c]="",!g.length&&b.map(function(B){o[B.getName()]=""});else{var C=b.reduce(function(B,ne){return B[ne.getName()]="",B},{});o[c]=o[c]||"",o=zp(zp({},o),C)}return zp(zp({},o),e.__clear?{}:this.getEmptyValueStyle())},a.prototype.isEmptyValueStyle=function(e){void 0===e&&(e={});var r=this.getEmptyValueStyle({force:!0}),o=(0,x.keys)(r);return!!o.length&&o.every(function(c){return r[c]===e[c]})},a.prototype.getEmptyValueStyle=function(e){void 0===e&&(e={});var r=this.attributes.emptyValue;if(!r||this.hasLayers()&&!e.force)return{};var o=this.getName(),c=this.getProperties(),g=(0,x.isString)(r)?r:r({property:this});if((0,x.isString)(g)){var b={};return this.isDetached()?c.map(function(w){b[w.getName()]=g}):b[o]=g,b}return g},a.prototype.__getJoinLayers=function(){var e=this.get("layerJoin"),r=this.get("layerSeparator");return e||((0,x.isString)(r)?r:e)},a.prototype.__getFullValue=function(){if(this.get("detached"))return"";var e=this.getStyleFromLayers();return dt(e[this.getName()])},a.prototype.hasValue=function(e){void 0===e&&(e={});var o=e.noParent&&this.getParentTarget();return(this.hasLayers()||this.hasEmptyValue())&&!o},a.prototype.clear=function(e){return void 0===e&&(e={}),this.layers.reset(),this.__upTargetsStyleProps(zp(zp({},e),{__clear:!0})),bu.prototype.clear.call(this),this},a.prototype.__canClearProp=function(){return!1},a.prototype.__getLayers=function(){return this.layers},a}(s_);const aE=iE;var p2=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),U0=function(){return U0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},U0.apply(this,arguments)},C1="data-clear-style",cE=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this;(0,x.bindAll)(r,"__change","__updateStyle");var o=e.config||{},c=o.em;r.config=o,r.em=c,r.pfx=o.stylePrefix||"",r.ppfx=o.pStylePrefix||"",r.__destroyFn=r.destroy?r.destroy.bind(r):function(){};var g=r.model;g.view=r,r.onValueChange=(0,x.debounce)(r.onValueChange.bind(r),10),r.updateStatus=(0,x.debounce)(r.updateStatus.bind(r),0),r.listenTo(g,"destroy remove",r.remove),r.listenTo(g,"change:visible",r.updateVisibility),r.listenTo(g,"change:name change:className change:full",r.render),r.listenTo(g,"change:value",r.onValueChange),r.listenTo(g,"change:parentTarget",r.updateStatus),r.listenTo(c,"change:device",r.onValueChange);var b=r.init&&r.init.bind(r);return b&&b(),r}return p2(a,d),a.prototype.events=function(){var e;return(e={change:"inputValueChanged"})["click [".concat(C1,"]")]="clear",e},a.prototype.template=function(e){var c=this.ppfx;return'\n      <div class="'.concat(this.pfx,'label" data-sm-label></div>\n      <div class="').concat(c,'fields" data-sm-fields></div>\n    ')},a.prototype.templateLabel=function(e){var o=this.pfx,c=this.em,g=e.parent,b=e.attributes,w=b.icon,C=void 0===w?"":w,B=b.info,ne=void 0===B?"":B,ae=c?.getConfig().icons,be=ae?.close||"";return'\n      <span class="'.concat(o,"icon ").concat(C,'" title="').concat(ne,'">\n        ').concat(e.getLabel(),"\n      </span>\n      ").concat(g?"":'<div class="'.concat(o,'clear" style="display: none" ').concat(C1,">").concat(be,"</div>"),"\n    ")},a.prototype.templateInput=function(e){return'\n      <div class="'.concat(this.ppfx,'field">\n        <input placeholder="').concat(e.getDefaultValue(),'"/>\n      </div>\n    ')},a.prototype.remove=function(){var e=this;return L.Ss.prototype.remove.apply(this,arguments),["em","input","$input","view"].forEach(function(r){return e[r]=null}),this.__destroyFn(this._getClbOpts()),this},a.prototype.updateStatus=function(){var e,r=this,o=r.model,c=r.pfx,g=r.ppfx,b=r.config,w="".concat(g,"four-color"),C="".concat(g,"color-warn"),B=this.$el.children(".".concat(c,"label")),ne=this.getClearEl(),ae=ne?ne.style:{};B.removeClass("".concat(w," ").concat(C)),ae.display="none",o.hasValue({noParent:!0})&&b.highlightChanged?(B.addClass(w),b.clearProperties&&(ae.display="")):o.hasValue()&&b.highlightComputed&&B.addClass(C),null===(e=this.parent)||void 0===e||e.updateStatus()},a.prototype.clear=function(e){e&&e.stopPropagation(),this.model.clear()},a.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(C1,"]"))),this.clearEl},a.prototype.inputValueChanged=function(e){e&&e.stopPropagation(),!this.emit&&this.model.upValue(e.target.value)},a.prototype.onValueChange=function(e,r,o){void 0===o&&(o={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},a.prototype.setValue=function(e){var r=this.model,o=(0,x.isUndefined)(e)||""===e?r.getDefaultValue():e;if(this.update)return this.__update(o);this.__setValueInput(o)},a.prototype.__setValueInput=function(e){var r=this.getInputEl();r&&(r.value=e)},a.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector("input")),this.input},a.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},a.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},a.prototype.__unset=function(){var e=this.unset&&this.unset.bind(this);e&&e(this._getClbOpts())},a.prototype.__update=function(e){var r=this.update&&this.update.bind(this);r&&r(U0(U0({},this._getClbOpts()),{value:e}))},a.prototype.__change=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=this.emit&&this.emit.bind(this);o&&o.apply(void 0,function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([this._getClbOpts()],e,!1))},a.prototype.__updateStyle=function(e,r){void 0===r&&(r={});var o=r.complete,c=r.partial,b=(function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}}(r,["complete","partial"]),this.model),w=!1!==o&&!0!==c;(0,z.isObject)(e)?b.__upTargetsStyle(e,{avoidStore:!w}):b.upValue(e,{partial:!w})},a.prototype._getClbOpts=function(){var e=this,r=e.model;return{el:e.el,createdEl:e.createdEl,property:r,props:r.attributes,change:this.__change,updateStyle:this.__updateStyle}},a.prototype.render=function(){this.clearCached();var e=this,r=e.pfx,o=e.model,c=e.el,g=e.$el,b=o.getName(),w=o.getType(),C=o.get("className")||"",B="".concat(r,"property"),ne="number"===w?"".concat(r).concat(w," ").concat(r,"integer"):"".concat(r).concat(w);this.createdEl&&this.__destroyFn(this._getClbOpts()),g.empty().append(this.template(o)),g.find("[data-sm-label]").append(this.templateLabel(o));var ae=this.create&&this.create.bind(this);this.createdEl=ae&&ae(this._getClbOpts()),g.find("[data-sm-fields]").append(this.createdEl||this.templateInput(o)),c.className="".concat(B," ").concat(ne," ").concat(B,"__").concat(b," ").concat(C).trim(),c.className+=o.isFull()?" ".concat(B,"--full"):"";var be=this.onRender&&this.onRender.bind(this);return be&&be(),this.setValue(o.getValue()),this},a.prototype.onRender=function(){},a}(L.Ss);const cg=cE;var uE=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),my=function(d){function a(e){var r=d.call(this,e)||this;r.config=e.config||{},r.pfx=r.config.stylePrefix||"",r.properties=[],r.parent=e.parent;var o=r.collection;return r.listenTo(o,"add",r.addTo),r.listenTo(o,"reset",r.render),r}return uE(a,d),a.prototype.addTo=function(e,r,o){this.add(e,null,o)},a.prototype.add=function(e,r,o){void 0===o&&(o={});var g=this.parent,w=r||this.el,C=new e.typeView({model:e,config:this.config});g&&(C.parent=g),C.render();var B=C.el;this.properties.push(C),(0,Ln.Sc)(w,B,o.at)},a.prototype.remove=function(){return L.Ss.prototype.remove.apply(this,arguments),this.clearItems(),this},a.prototype.clearItems=function(){this.properties.forEach(function(e){return e.remove()}),this.properties=[]},a.prototype.render=function(){var e=this,o=this.$el,c=this.pfx;this.clearItems();var g=document.createDocumentFragment();return this.collection.forEach(function(b){return e.add(b,g)}),o.empty(),o.append(g),o.attr("class","".concat(c,"properties")),this},a}(L.Ss);const B0=my;var f2=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),W0=function(){return W0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},W0.apply(this,arguments)},dE=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return f2(a,d),a.prototype.templateInput=function(){var e=this.pfx;return'\n      <div class="'.concat(e,"field ").concat(e,'composite">\n        <span id="').concat(e,'input-holder"></span>\n      </div>\n    ')},a.prototype.remove=function(){var e;return null===(e=this.props)||void 0===e||e.remove(),cg.prototype.remove.apply(this,arguments),this},a.prototype.onValueChange=function(){},a.prototype.onRender=function(){var e=this.pfx,r=this.model,o=r.get("properties");if(o.length&&!this.props){var c=r.isDetached(),g=new B0({config:W0(W0({},this.config),{highlightComputed:c,highlightChanged:c}),collection:o,parent:this});g.render(),this.$el.find("#".concat(e,"input-holder")).append(g.el),this.props=g}},a.prototype.clearCached=function(){cg.prototype.clearCached.apply(this,arguments),delete this.props},a}(cg);const gy=dE;var h2=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),m2=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return h2(a,d),a.prototype.events=function(){return{click:"select","click [data-close-layer]":"removeItem","mousedown [data-move-layer]":"initSorter","touchstart [data-move-layer]":"initSorter"}},a.prototype.template=function(){var e=this,r=e.pfx,o=e.ppfx,c=e.em,g=c?.getConfig().icons,b=g?.close||"",w=g?.move||"";return'\n      <div class="'.concat(r,'label-wrp">\n        <div id="').concat(r,'move" class="').concat(o,'no-touch-actions" data-move-layer>\n          ').concat(w,'\n        </div>\n        <div id="').concat(r,'label" data-label></div>\n        <div id="').concat(r,'preview-box" class="').concat(r,'layer-preview" style="display: none" data-preview-box>\n          <div id="').concat(r,'preview" class="').concat(r,'layer-preview-cnt" data-preview></div>\n        </div>\n        <div id="').concat(r,'close-layer" class="').concat(r,'btn-close" data-close-layer>\n          ').concat(b,'\n        </div>\n      </div>\n      <div id="').concat(r,'inputs" data-properties></div>\n    ')},a.prototype.initialize=function(e){void 0===e&&(e={});var r=this.model,o=e.config||{};this.em=o.em,this.config=o,this.sorter=e.sorter,this.pfx=o.stylePrefix||"",this.ppfx=o.pStylePrefix||"",this.propertyView=e.propertyView;var c=this.propertyView.model;this.listenTo(r,"destroy remove",this.remove),this.listenTo(r,"change:values",this.updateLabel),this.listenTo(c,"change:selectedLayer",this.updateVisibility),r.view=this,r.set({droppable:0,draggable:1}),this.$el.data("model",r)},a.prototype.initSorter=function(){var e;null===(e=this.sorter)||void 0===e||e.startSort([{element:this.el}])},a.prototype.removeItem=function(e){e&&e.stopPropagation(),this.model.remove()},a.prototype.select=function(){this.model.select()},a.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector("[data-properties]")),this.propsWrapEl},a.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector("[data-preview]")),this.previewEl},a.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector("[data-label]")),this.labelEl},a.prototype.updateLabel=function(){var e=this.model,r=e.getLabel();if(this.getLabelEl().innerHTML=r,e.hasPreview()){var o=this.getPreviewEl(),c=e.getStylePreview({number:{min:-3,max:3}}),g=(0,x.keys)(c).map(function(b){return"".concat(b,":").concat(c[b])}).join(";");o.setAttribute("style",g)}},a.prototype.updateVisibility=function(){var e,r=this,o=r.pfx,c=r.model,g=r.propertyView,b=this.getPropertiesWrapper(),w=c.isSelected();b.style.display=w?"":"none",this.$el[w?"addClass":"removeClass"]("".concat(o,"active")),w&&b.appendChild(null===(e=g.props)||void 0===e?void 0:e.el)},a.prototype.render=function(){var e=this,r=e.el,o=e.pfx,c=e.model;return r.innerHTML=this.template(),r.className="".concat(o,"layer"),c.hasPreview()&&(r.querySelector("[data-preview-box]").style.display=""),this.updateLabel(),this.updateVisibility(),this},a}(L.Ss);const pE=m2;var Z0=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),E1=function(d){function a(e){var r=d.call(this,e)||this,o=r.collection,c=e.config||{},g=c.em,b=c.stylePrefix||"",w=c.pStylePrefix||"";r.config=c,r.pfx=b,r.ppfx=w,r.propertyView=e.propertyView,r.className="".concat(b,"layers ").concat(w,"field"),r.listenTo(o,"add",r.addTo),r.listenTo(o,"reset",r.reset),r.items=[];var C=r.createPlaceholder(c.pStylePrefix);r.$el.append(C);var B=g?.Utils;return r.sorter=B?new B.StyleManagerSorter({em:g,containerContext:{container:r.el,containerSel:".".concat(b,"layers"),itemSel:".".concat(b,"layer"),pfx:c.pStylePrefix,document,placeholderElement:C},dragBehavior:{dragDirection:qd.A.Vertical,nested:!1}}):void 0,o.view=r,r.$el.data("model",o),r.$el.data("collection",o),r}return Z0(a,d),a.prototype.addTo=function(e){var r=this.collection.indexOf(e);this.addToCollection(e,null,r)},a.prototype.addToCollection=function(e,r,o){var c=r||null,g=this,B=g.$el,ne=new pE({model:e,config:g.config,sorter:g.sorter,propertyView:g.propertyView}),ae=ne.render().el;if(this.items.push(ne),c)c.appendChild(ae);else if(typeof o<"u"){var be="before";B.children().length===o&&(o--,be="after"),o<0?B.append(ae):B.children().eq(o)[be](ae)}else B.append(ae);return ae},a.prototype.reset=function(e,r){this.clearItems(),this.render()},a.prototype.remove=function(){return this.clearItems(),L.Ss.prototype.remove.apply(this,arguments),this},a.prototype.clearItems=function(){this.items.forEach(function(e){return e.remove()}),this.items=[]},a.prototype.render=function(){var e=this,r=this.$el,o=document.createDocumentFragment();return r.empty(),this.collection.forEach(function(c){return e.addToCollection(c,o)}),r.append(o),r.attr("class",this.className),this},a.prototype.createPlaceholder=function(e){var r=document.createElement("div"),o=document.createElement("div");return r.className=e+"placeholder",r.style.display="none",r.style.pointerEvents="none",o.className=e+"placeholder-int",r.appendChild(o),r},a}(L.Ss);const g2=E1;var fE=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),l_=function(){return l_=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},l_.apply(this,arguments)},h=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return fE(a,d),a.prototype.events=function(){return l_(l_({},gy.prototype.events()),{"click [data-add-layer]":"addLayer",change:""})},a.prototype.templateInput=function(){var r=this.pfx,o=this.em,c=o?.getConfig().icons,g=c?.plus||"+";return'\n      <div class="'.concat(r,"field ").concat(r,'stack">\n        <button type="button" id="').concat(r,'add" data-add-layer>\n          ').concat(g,"\n        </button>\n        <div data-layers-wrapper></div>\n      </div>\n    ")},a.prototype.init=function(){var e=this.model;this.listenTo(e.layers,"change reset",this.updateStatus),this.listenTo(e,"change:isEmptyValue",this.updateStatus)},a.prototype.addLayer=function(){this.model.addLayer({},{at:0})},a.prototype.setValue=function(){},a.prototype.remove=function(){var e;return null===(e=this.layersView)||void 0===e||e.remove(),gy.prototype.remove.apply(this,arguments),this},a.prototype.clearCached=function(){gy.prototype.clearCached.apply(this,arguments),delete this.layersView},a.prototype.onRender=function(){var e=this,r=e.model,o=e.el,c=e.config,g=r.get("properties");if(g.length&&!this.props){var b=new B0({config:l_(l_({},c),{highlightComputed:!1,highlightChanged:!1}),collection:g,parent:this});b.render();var w=new g2({collection:r.layers,config:c,propertyView:this});w.render(),o.querySelector("[data-layers-wrapper]").appendChild(w.el),this.props=b,this.layersView=w}},a}(gy);const s=h;var t=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),n=function(){return n=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},n.apply(this,arguments)},i=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return t(a,d),a.prototype.events=function(){return n(n({},cg.prototype.events()),{"click [data-clear-asset]":"clear","click [data-open-assets]":"openAssetManager"})},a.prototype.templateInput=function(){var e,o=this.pfx,c=this.em,g=null===(e=this.em)||void 0===e?void 0:e.getConfig().icons,b=g?.close;return'\n      <div class="'.concat(o,"field ").concat(o,"file\">\n        <div id='").concat(o,"input-holder'>\n          <div class=\"").concat(o,'btn-c">\n            <button class="').concat(o,'btn" id="').concat(o,'images" type="button" data-open-assets>\n              ').concat(c.t("styleManager.fileButton"),'\n            </button>\n          </div>\n          <div style="clear:both;"></div>\n        </div>\n        <div id="').concat(o,'preview-box" class="').concat(o,'preview-file" data-preview-box>\n          <div id="').concat(o,'preview-file" class="').concat(o,'preview-file-cnt" data-preview></div>\n          <div id="').concat(o,'close" class="').concat(o,'preview-file-close" data-clear-asset>').concat(b,"</div>\n        </div>\n      </div>\n    ")},a.prototype.__setValueInput=function(e){var o=this.model,c=this.el,g=o.getDefaultValue(),b=c.querySelector("[data-preview-box]"),w=c.querySelector("[data-preview]");b.style.display=e&&e!==g?"":"none",w.style.backgroundImage=e||o.getDefaultValue()},a.prototype.openAssetManager=function(){var r,e=this,o=null===(r=this.em)||void 0===r?void 0:r.Assets;o?.open({select:function(c,g){var b=(0,x.isString)(c)?c:c.get("src");e.model.upValue(b,{partial:!g}),g&&o.close()},types:["image"],accept:"image/*"})},a}(cg);const u=i;var y=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),I=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return y(a,d),a.prototype.templateInput=function(e){return""},a.prototype.init=function(){var e=this.model;this.listenTo(e,"change:unit",this.onValueChange),this.listenTo(e,"change:units",this.render)},a.prototype.setValue=function(e){},a.prototype.onRender=function(){var e=this,r=e.ppfx,c=e.el;if(!this.inputInst){var g=e.model.input;g.ppfx=r,g.render(),c.querySelector(".".concat(r,"fields")).appendChild(g.el),this.input=g.inputEl.get(0),this.inputInst=g}},a.prototype.clearCached=function(){cg.prototype.clearCached.apply(this,arguments),this.inputInst=null},a}(cg);const W=I;var ce=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ie=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ce(a,d),a.prototype.setValue=function(e){var r;null===(r=this.inputInst)||void 0===r||r.setValue(e,{fromTarget:1,def:this.model.getDefaultValue()})},a.prototype.remove=function(){var e=this;W.prototype.remove.apply(this,arguments);var r=this.inputInst;return r&&r.remove&&r.remove(),["inputInst","$color"].forEach(function(o){return e[o]=null}),this},a.prototype.__handleChange=function(e,r){this.model.upValue(e,{partial:r})},a.prototype.onRender=function(){var e;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var r=this,o=r.ppfx,b=r.el,C=new dm({target:r.em,model:r.model,ppfx:o,onChange:this.__handleChange}).render();b.querySelector(".".concat(o,"fields")).appendChild(C.el),this.input=null===(e=C.inputEl)||void 0===e?void 0:e.get(0),this.inputInst=C}},a}(W);const Re=ie;var qe=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ct=function(){return ct=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},ct.apply(this,arguments)},qt=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},_r=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return qe(a,d),a.prototype.defaults=function(){return ct(ct({},bu.getDefaults()),{options:[],full:0})},a.prototype.getOptions=function(){var e=this.attributes,r=e.options;return(r&&r.length?r:e.list)||[]},a.prototype.getOption=function(e){var r=this,o=(0,z.isDef)(e)?e:this.getValue();return this.getOptions().filter(function(c){return r.getOptionId(c)===o})[0]||null},a.prototype.setOptions=function(e){return void 0===e&&(e=[]),this.set("options",e),this},a.prototype.addOption=function(e){if(e){var r=this.getOptions();this.setOptions(qt(qt([],r,!0),[e],!1))}return this},a.prototype.getOptionId=function(e){return(0,z.isDef)(e.id)?e.id:e.value},a.prototype.getOptionLabel=function(e,r){var o;void 0===r&&(r={});var c=r.locale,g=void 0===c||c,b=((0,x.isString)(e)?this.getOption(e):e)||{},w=this.getOptionId(b),C=b.label||b.name||w,B=r.property||this.getId();return g&&(null===(o=this.em)||void 0===o?void 0:o.t("styleManager.options.".concat(B,".").concat(w)))||C},a.prototype.initialize=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];bu.prototype.initialize.apply(this,e),this.listenTo(this,"change:options",this.__onOptionChange)},a.prototype.__onOptionChange=function(){this.set("list",this.get("options"))},a}(bu);const zr=_r;var br=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),co=function(d){function a(e){var r=d.call(this,e)||this;return r.listenTo(r.model,"change:options",r.updateOptions),r}return br(a,d),a.prototype.templateInput=function(){var r=this.pfx,o=this.ppfx;return'\n      <div class="'.concat(o,"field ").concat(o,'select">\n        <span id="').concat(r,'input-holder"></span>\n        <div class="').concat(o,'sel-arrow">\n          <div class="').concat(o,'d-s-arrow"></div>\n        </div>\n      </div>\n    ')},a.prototype.updateOptions=function(){delete this.input,this.onRender()},a.prototype.onRender=function(){var e=this.pfx,r=this.model,o=r.getOptions();if(!this.input){var c=[];o.forEach(function(b){var w=r.getOptionId(b),C=r.getOptionLabel(w),B=b.style?b.style.replace(/"/g,"&quot;"):"",ne=B?'style="'.concat(B,'"'):"",ae=w.replace(/"/g,"&quot;");c.push('<option value="'.concat(ae,'" ').concat(ne,">").concat(C,"</option>"))});var g=this.el.querySelector("#".concat(e,"input-holder"));g.innerHTML="<select>".concat(c.join(""),"</select>"),this.input=g.firstChild}},a.prototype.__setValueInput=function(e){var r=this.model,o=this.getInputEl(),c=r.getOptions()[0],g=c?r.getOptionId(c):"";o&&(o.value=e||g)},a}(cg);const Bo=co;var Oi=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Qi=function(){return Qi=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Qi.apply(this,arguments)},Ca=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return Oi(a,d),a.prototype.defaults=function(){return Qi(Qi({},zr.getDefaults()),{full:1})},a}(zr);const ys=Ca;var ss=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),il=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return ss(a,d),a.prototype.templateInput=function(){var e=this.ppfx;return'<div class="'.concat(e,"field ").concat(e,'field-radio"></div>')},a.prototype.onRender=function(){var r=this.pfx,o=this.ppfx,c=this.model,g="".concat(o,"radio-item-label"),b=c.getName(),w=c.getOptions(),C="".concat(r,"radio ").concat(r,"radio-").concat(b),B=c.cid;if(!this.input){var ne=[];w.forEach(function(be){var Se=be.className?"".concat(be.className," ").concat(r,"icon ").concat(g):"",We=c.getOptionId(be),lt="".concat(b,"-").concat(We,"-").concat(B),Ot=Se?"":c.getOptionLabel(We),ur=be.title?'title="'.concat(be.title,'"'):"",Gt=c.getValue()===We?"checked":"";ne.push('\n          <div class="'.concat(o,'radio-item">\n            <input type="radio" class="').concat(C,'" id="').concat(lt,'" name="').concat(b,"-").concat(B,'" value="').concat(We,'" ').concat(Gt,'/>\n            <label class="').concat(Se||g,'" ').concat(ur,' for="').concat(lt,'">').concat(Ot,"</label>\n          </div>\n        "))});var ae=this.el.querySelector(".".concat(o,"field"));ae.innerHTML='<div class="'.concat(o,'radio-items">').concat(ne.join(""),"</div>"),this.input=ae.firstChild}},a.prototype.__setValueInput=function(e){var r,c=e||this.model.getDefaultValue(),g=null===(r=this.getInputEl())||void 0===r?void 0:r.querySelector('[value="'.concat(c,'"]'));g&&(g.checked=!0)},a}(Bo);const _l=il;var wu=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nc=function(){return Nc=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Nc.apply(this,arguments)},Ku=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return wu(a,d),a.prototype.defaults=function(){return Nc(Nc({},bu.getDefaults()),{units:[],unit:"",min:"",max:"",step:1})},a.prototype.getUnits=function(){return this.get("units")||[]},a.prototype.getUnit=function(){return this.get("unit")},a.prototype.getMin=function(){return this.get("min")},a.prototype.getMax=function(){return this.get("max")},a.prototype.getStep=function(){return this.get("step")},a.prototype.upUnit=function(e,r){return void 0===r&&(r={}),this._up({unit:e},r)},a.prototype.initialize=function(e,r){void 0===e&&(e={}),void 0===r&&(r={}),bu.callParentInit(bu,this,e,r);var o=this.get("unit"),c=this.getUnits();this.input=(0,z.hasWin)()?new kg({model:this}):void 0,c.length&&!o&&this.set("unit",c[0],{silent:!0}),bu.callInit(this,e,r)},a.prototype.__getClearProps=function(){return Nc(Nc({},bu.prototype.__getClearProps()),{unit:""})},a.prototype.parseValue=function(e,r){void 0===r&&(r={});var o=bu.prototype.parseValue.apply(this,arguments),c=this.input.validateInputValue(o.value,Nc({deepCheck:1},r)),b=c.unit;return o.value=c.value,o.unit=b,o},a.prototype.getFullValue=function(){var e=this.get("value"),r=this.get("unit"),o=(0,x.isUndefined)(e)?"":"".concat(e),c=!(0,x.isUndefined)(r)&&o?r:"",g="".concat(o).concat(c);return bu.prototype.getFullValue.apply(this,[g])},a}(bu);const Fd=Ku;var vf=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),vh=function(){return vh=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},vh.apply(this,arguments)},hm=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return vf(a,d),a.prototype.defaults=function(){return vh(vh({},Fd.getDefaults()),{showInput:1})},a}(Fd);const mm=hm;var _h=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Zf=function(){return Zf=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Zf.apply(this,arguments)},yh=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return _h(a,d),a.prototype.events=function(){return Zf(Zf({},W.prototype.events()),{"change [type=range]":"inputValueChanged","input [type=range]":"inputValueChangedSoft",change:""})},a.prototype.templateInput=function(e){var r=this.ppfx;return'\n      <div class="'.concat(r,"field ").concat(r,'field-range">\n        <input type="range" min="').concat(e.get("min"),'" max="').concat(e.get("max"),'" step="').concat(e.get("step"),'"/>\n      </div>\n    ')},a.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector("input[type=range]")),this.slider},a.prototype.inputValueChanged=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value)},a.prototype.inputValueChangedSoft=function(e){e.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},a.prototype.setValue=function(e){var r=this.model,o=r.parseValue(e);this.getSliderEl().value=""===e?r.getDefaultValue():parseFloat(o.value),W.prototype.setValue.apply(this,arguments)},a.prototype.onRender=function(){W.prototype.onRender.apply(this,arguments),this.model.get("showInput")||(this.inputInst.el.style.display="none")},a.prototype.clearCached=function(){W.prototype.clearCached.apply(this,arguments),delete this.slider},a}(W);const O1=yh;var gv=L.pM.extend(u0).extend({extendViewApi:1,init:function(){var e=this.em,r=this.opts.module||e?.get("StyleManager");r&&(r.__listenAdd(this,r.events.propertyAdd),r.__listenRemove(this,r.events.propertyRemove))},types:[{id:"stack",model:aE,view:s,isType:function(d){if(d&&"stack"==d.type)return d}},{id:"composite",model:s_,view:gy,isType:function(d){if(d&&"composite"==d.type)return d}},{id:"file",model:bu,view:u,isType:function(d){if(d&&"file"==d.type)return d}},{id:"color",model:bu,view:Re,isType:function(d){if(d&&"color"==d.type)return d}},{id:"select",model:zr,view:Bo,isType:function(d){if(d&&"select"==d.type)return d}},{id:"radio",model:ys,view:_l,isType:function(d){if(d&&"radio"==d.type)return d}},{id:"slider",model:mm,view:O1,isType:function(d){if(d&&"slider"==d.type)return d}},{id:"integer",model:Fd,view:W,isType:function(d){if(d&&"integer"==d.type)return d}},{id:"number",model:Fd,view:W,isType:function(d){if(d&&"number"==d.type)return d}},{id:"base",model:bu,view:cg,isType:function(d){return d.type="base",d}}]});const vy=gv;var hE=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),V0=function(){return V0=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},V0.apply(this,arguments)},vE=function(d){function a(e,r){void 0===r&&(r={});var o=d.call(this,e)||this,c=r.em;o.em=c;var b=o.buildProperties((e||{}).buildProps),w=o.get("name")||"",C=[];!o.get("id")&&o.set("id",w.replace(/ /g,"_").toLowerCase()),C=(C=b?o.extendProperties(b):o.get("properties").map(function(ne){return(0,x.isString)(ne)?o.buildProperties(ne)[0]:ne}).filter(Boolean)).map(function(ne){return o.checkExtend(ne)});var B=new vy(C,{em:c});return B.sector=o,o.set("properties",B),o}return hE(a,d),a.prototype.defaults=function(){return{id:"",name:"",open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(a.prototype,"properties",{get:function(){return this.get("properties")},enumerable:!1,configurable:!0}),a.prototype.getId=function(){return this.get("id")},a.prototype.getName=function(){var e,r=this.getId();return(null===(e=this.em)||void 0===e?void 0:e.t("styleManager.sectors.".concat(r)))||this.get("name")},a.prototype.setName=function(e){return this.set("name",e)},a.prototype.isOpen=function(){return!!this.get("open")},a.prototype.setOpen=function(e){return this.set("open",e)},a.prototype.isVisible=function(){return!!this.get("visible")},a.prototype.getProperties=function(e){void 0===e&&(e={});var r=this.properties,o=r.models?function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([],r.models,!0):r;return o.filter(function(c){var g=!0;return e.withValue&&(g=c.hasValue({noParent:!0})),e.withParentValue&&(g=!c.hasValue({noParent:!0})&&c.hasValue()),g})},a.prototype.getProperty=function(e){return this.getProperties().filter(function(r){return r.get("id")===e})[0]||void 0},a.prototype.addProperty=function(e,r){return this.properties.add(this.checkExtend(e),r)},a.prototype.extendProperties=function(e,r,o){void 0===o&&(o=!1);for(var c=e.length,g=r||this.get("properties"),b=this.get("extendBuilded"),w=[],C=0,B=g.length;C<B;C++){for(var ne=g[C],ae=0,be=0;be<c;be++){var Se=e[be];if(ne.property!=Se.property&&ne.id!=Se.property);else{var We=ne.properties;We&&We.length&&(ne.properties=this.extendProperties(Se.properties||[],We,1)),e[be]=b?(0,x.extend)(Se,ne):ne,w[be]=e[be],ae=1}}ae||(e.push(ne),w.push(ne))}return o?w.filter(function(lt){return lt}):e},a.prototype.checkExtend=function(e){var r=((0,x.isString)(e)?{extend:e}:e)||{},o=r.extend,c=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(r,["extend"]);return o?V0(V0({},this.buildProperties([o])[0]||{}),c):e},a.prototype.buildProperties=function(e){var r,o=e||[];if(!o.length)return[];var c=null===(r=this.em)||void 0===r?void 0:r.Styles.builtIn;return c?.build(o)},a}(L.Kx);const v2=vE;var _2=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$c=function(){return $c=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},$c.apply(this,arguments)},z0=function(d){function a(){return null!==d&&d.apply(this,arguments)||this}return _2(a,d),a.prototype.initialize=function(e,r){void 0===r&&(r={});var o=r.module;this.em=r.em,this.module=o,this.listenTo(this,"reset",this.onReset)},a.prototype.model=function(e,r){void 0===r&&(r={});var o=r.collection.em;return new v2(e,$c($c({},r),{em:o}))},a.prototype.onReset=function(e,r){void 0===r&&(r={}),(r.previousModels||[]).forEach(function(c){return c.get("properties").reset()})},a}(L.pM);const Zm=z0;var Kf=function(){return Kf=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Kf.apply(this,arguments)},vv=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},cn=function(d){return d.map(function(a){return{id:a}})},Lo=function(){function d(){this.props={},this.typeNumber="number",this.typeColor="color",this.typeRadio="radio",this.typeSelect="select",this.typeFile="file",this.typeSlider="slider",this.typeComposite="composite",this.typeStack="stack",this.unitsSize=["px","%","em","rem","vh","vw"],this.unitsSizeNoPerc=["px","em","rem","vh","vw"],this.unitsTime=["s","ms"],this.unitsAngle=["deg","rad","grad"],this.fixedValues=["initial","inherit","auto"];var a=", sans-serif",e=["flex-start","flex-end","center"],r=vv(vv([],e,!0),["baseline","stretch"],!1);this.optsBgSize=cn(["auto","cover","contain"]),this.optsBgAttach=cn(["scroll","fixed","local"]),this.optsBgRepeat=cn(["repeat","repeat-x","repeat-y","no-repeat"]),this.optsWrap=cn(["nowrap","wrap","wrap-reverse"]),this.optsOverflow=cn(["visible","hidden","scroll","auto"]),this.optsDir=cn(["row","row-reverse","column","column-reverse"]),this.opstDisplay=cn(["block","inline","inline-block","flex","none"]),this.optsTransitFn=cn(["linear","ease","ease-in","ease-out","ease-in-out"]),this.optsCursor=cn(["auto","pointer","copy","crosshair","grab","grabbing","help","move","text"]),this.optsFloat=cn(["none","left","right"]),this.optsPos=cn(["static","relative","absolute","fixed"]),this.optsTextAlign=cn(["left","center","right","justify"]),this.optsFlexAlign=cn(r),this.optsJustCont=cn(vv(vv([],e,!0),["space-between","space-around","space-evenly"],!1)),this.optsAlignCont=cn(vv(vv([],e,!0),["space-between","space-around","stretch"],!1)),this.optsAlignSelf=cn(vv(["auto"],r,!0)),this.optsTransitProp=cn(["all","width","height","background-color","transform","box-shadow","opacity"]),this.optsBorderStyle=cn(["none","solid","dotted","dashed","double","groove","ridge","inset","outset"]),this.optsBgPos=cn(["left top","left center","left bottom","right top","right center","right bottom","center top","center center","center bottom"]),this.optsWeight=[{id:"100",label:"Thin"},{id:"200",label:"Extra-Light"},{id:"300",label:"Light"},{id:"400",label:"Normal"},{id:"500",label:"Medium"},{id:"600",label:"Semi-Bold"},{id:"700",label:"Bold"},{id:"800",label:"Extra-Bold"},{id:"900",label:"Ultra-Bold"}],this.optsShadowType=[{id:"",label:"Outside"},{id:"inset",label:"Inside"}],this.optsFonts=["Arial, Helvetica"+a,"Arial Black, Gadget"+a,"Brush Script MT"+a,"Comic Sans MS, cursive"+a,"Courier New, Courier, monospace","Georgia, serif","Helvetica"+a,"Impact, Charcoal"+a,"Lucida Sans Unicode, Lucida Grande"+a,"Tahoma, Geneva"+a,"Times New Roman, Times, serif","Trebuchet MS, Helvetica"+a,"Verdana, Geneva"+a].map(function(o){return{id:o,label:o.split(",")[0]}}),this.fixedFontSizes=["medium","xx-small","x-small","small","large","x-large","xx-large","smaller","larger","length","initial","inherit"],this.fixedLetSpace=["normal","initial","inherit"],this.requireFlex={display:["flex"]},this.init()}return d.prototype.__sub=function(a){var e=this;return function(){return a.map(function(r){if((0,x.isString)(r))return e.get(r);var o=r.extend,c=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(r,["extend"]);return Kf(Kf({},e.get(o)),c)})}},d.prototype.init=function(){var a=this,e=this,r=e.fixedValues,o=e.requireFlex,c=e.typeNumber;return this.props={},[["text-shadow-h",{type:c,default:"0",units:this.unitsSizeNoPerc}],["top",{default:"auto",units:this.unitsSize,fixedValues:r},"text-shadow-h"],["right",{},"top"],["bottom",{},"top"],["left",{},"top"],["margin-top",{default:"0"},"top"],["margin-right",{},"margin-top"],["margin-bottom",{},"margin-top"],["margin-left",{},"margin-top"],["padding-top",{min:0},"margin-top"],["padding-right",{},"padding-top"],["padding-bottom",{},"padding-top"],["padding-left",{},"padding-top"],["width",{min:0},"top"],["min-width",{},"width"],["max-width",{},"width"],["height",{},"width"],["min-height",{},"width"],["max-height",{},"width"],["flex-basis",{requiresParent:o},"width"],["font-size",{default:"medium",fixedValues:this.fixedFontSizes},"width"],["letter-spacing",{default:"normal",fixedValues:this.fixedLetSpace},"top"],["line-height",{},"letter-spacing"],["text-shadow-v",{},"text-shadow-h"],["text-shadow-blur",{min:0},"text-shadow-h"],["border-radius-c",{property:"border-radius",fixedValues:void 0},"padding-top"],["border-top-left-radius",{},"border-radius-c"],["border-top-right-radius",{},"border-radius-c"],["border-bottom-left-radius",{},"border-radius-c"],["border-bottom-right-radius",{},"border-radius-c"],["border-width",{units:this.unitsSizeNoPerc},"border-radius-c"],["box-shadow-h",{},"text-shadow-h"],["box-shadow-v",{},"text-shadow-h"],["box-shadow-blur",{default:"5px"},"text-shadow-blur"],["box-shadow-spread",{},"text-shadow-h"],["transition-duration",{default:"2s",units:this.unitsTime},"border-radius-c"],["perspective",{},"border-radius-c"],["order",{type:c,default:"0",requiresParent:o}],["flex-grow",{},"order"],["flex-shrink",{default:"1"},"order"],["float",{type:this.typeRadio,default:"none",options:this.optsFloat}],["position",{default:"static",options:this.optsPos},"float"],["text-align",{default:"left",options:this.optsTextAlign},"float"],["color",{type:this.typeColor,default:"black",full:!0}],["text-shadow-color",{},"color"],["border-color",{},"color"],["box-shadow-color",{},"color"],["background-color",{default:"none"},"color"],["background-image",{type:this.typeFile,functionName:"url",default:"none",full:!0}],["opacity",{type:this.typeSlider,default:"1",min:0,max:1,step:.01,full:!0}],["display",{type:this.typeSelect,default:"block",options:this.opstDisplay}],["flex-direction",{default:"row",options:this.optsDir,requires:o},"display"],["flex-wrap",{default:"nowrap",options:this.optsWrap},"flex-direction"],["justify-content",{default:"flex-start",options:this.optsJustCont},"flex-wrap"],["align-items",{default:"stretch",options:this.optsFlexAlign},"flex-wrap"],["align-content",{options:this.optsAlignCont},"align-items"],["align-self",{default:"auto",options:this.optsAlignSelf,requiresParent:o},"display"],["font-family",{default:"Arial, Helvetica, sans-serif",options:this.optsFonts},"display"],["font-weight",{default:"400",options:this.optsWeight},"display"],["border-style",{default:"solid",options:this.optsBorderStyle},"display"],["box-shadow-type",{default:"",options:this.optsShadowType},"display"],["background-repeat",{default:"repeat",options:this.optsBgRepeat},"display"],["background-position",{default:"left top",options:this.optsBgPos},"display"],["background-attachment",{default:"scroll",options:this.optsBgAttach},"display"],["background-size",{default:"auto",options:this.optsBgSize},"display"],["transition-property",{default:"width",options:this.optsTransitProp},"display"],["transition-timing-function",{default:"ease",options:this.optsTransitFn},"display"],["cursor",{default:"auto",options:this.optsCursor},"display"],["overflow",{default:"visible",options:this.optsOverflow},"display"],["overflow-x",{},"overflow"],["overflow-y",{},"overflow"],["margin",{type:this.typeComposite,properties:this.__sub([{extend:"margin-top",id:"margin-top-sub"},{extend:"margin-right",id:"margin-right-sub"},{extend:"margin-bottom",id:"margin-bottom-sub"},{extend:"margin-left",id:"margin-left-sub"}])}],["padding",{properties:this.__sub([{extend:"padding-top",id:"padding-top-sub"},{extend:"padding-right",id:"padding-right-sub"},{extend:"padding-bottom",id:"padding-bottom-sub"},{extend:"padding-left",id:"padding-left-sub"}])},"margin"],["border",{properties:this.__sub([{extend:"border-width",id:"border-width-sub"},{extend:"border-style",id:"border-style-sub"},{extend:"border-color",id:"border-color-sub"}])},"margin"],["border-radius",{properties:this.__sub([{extend:"border-top-left-radius",id:"border-top-left-radius-sub"},{extend:"border-top-right-radius",id:"border-top-right-radius-sub"},{extend:"border-bottom-left-radius",id:"border-bottom-left-radius-sub"},{extend:"border-bottom-right-radius",id:"border-bottom-right-radius-sub"}])},"margin"],["transition",{type:this.typeStack,properties:this.__sub([{extend:"transition-property",id:"transition-property-sub"},{extend:"transition-duration",id:"transition-duration-sub"},{extend:"transition-timing-function",id:"transition-timing-function-sub"}])}],["box-shadow",{preview:!0,layerLabel:function(b,w){var C=w.values,ne=C["box-shadow-v"],ae=C["box-shadow-blur"],be=C["box-shadow-spread"];return"".concat(C["box-shadow-h"]," ").concat(ne," ").concat(ae," ").concat(be)},properties:this.__sub(["box-shadow-h","box-shadow-v","box-shadow-blur","box-shadow-spread","box-shadow-color","box-shadow-type"])},"transition"],["text-shadow",{default:"none",layerLabel:function(b,w){var C=w.values,ne=C["text-shadow-v"],ae=C["text-shadow-blur"];return"".concat(C["text-shadow-h"]," ").concat(ne," ").concat(ae)},properties:this.__sub(["text-shadow-h","text-shadow-v","text-shadow-blur","text-shadow-color"])},"box-shadow"],["background",{detached:!0,layerLabel:function(b,w){var C=w.values;return[C["background-repeat-sub"]||"",C["background-position-sub"]||"",C["background-attachment-sub"]||"",C["background-size-sub"]||""].join(" ")},properties:this.__sub([{extend:"background-image",id:"background-image-sub"},{extend:"background-repeat",id:"background-repeat-sub"},{extend:"background-position",id:"background-position-sub"},{extend:"background-attachment",id:"background-attachment-sub"},{extend:"background-size",id:"background-size-sub"}])},"box-shadow"],["transform",{type:"stack",layerSeparator:" ",fromStyle:function(b,w){var C=w.property,ne=b[w.name]||"",ae=C.getLayerSeparator();return ne?ne.split(ae).map(function(be){var Se=C.__parseFn(be);return{"transform-type":Se.name,"transform-value":Se.value}}):[]},toStyle:function(b,w){var C;return(C={})[w.name]="".concat(b["transform-type"],"(").concat(b["transform-value"],")"),C},properties:[{property:"transform-type",name:"Type",type:this.typeSelect,default:"rotateZ",full:!0,options:[{id:"scaleX",propValue:{units:[""],step:.01}},{id:"scaleY",propValue:{units:[""],step:.01}},{id:"scaleZ",propValue:{units:[""],step:.01}},{id:"rotateX",propValue:{units:this.unitsAngle,step:1}},{id:"rotateY",propValue:{units:this.unitsAngle,step:1}},{id:"rotateZ",propValue:{units:this.unitsAngle,step:1}},{id:"translateX",propValue:{units:this.unitsSize,step:1}},{id:"translateY",propValue:{units:this.unitsSize,step:1}}],onChange:function(b){var w=b.property;if(b.to.value){var B=w.getOption(),ne=Kf({},B.propValue||{}),ae=w.getParent().getProperty("transform-value"),be=ae.getUnit();(!be||ne?.units.indexOf(be)<0)&&(ne.unit=ne?.units[0]||""),ae.up(ne)}}},{property:"transform-value",type:this.typeNumber,default:"0",full:!0}]}]].forEach(function(b){a.add(b[0],b[1]||{},{from:b[2]})}),this},d.prototype.add=function(a,e,r){void 0===e&&(e={}),void 0===r&&(r={});var g=Kf(Kf(Kf({},this.props[r.from||a]||{}),{property:a}),e);return g.properties&&(0,x.isFunction)(g.properties)&&(g.properties=g.properties()),this.props[a]=g,g},d.prototype.get=function(a){return this.props[a]},d.prototype.build=function(a){var e=this,r=[];return((0,x.isString)(a)?[a]:a).forEach(function(c){r.push(e.get(c)||{property:c})}),r},d}();const Wo=Lo;var bi=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ds=function(d){function a(e){var r=d.call(this,e)||this,o=e.config||{},c=r.model,g=o.em;return r.config=o,r.em=g,r.pfx=o.stylePrefix||"",r.listenTo(c,"destroy remove",r.remove),r.listenTo(c,"change:open",r.updateOpen),r.listenTo(c,"change:visible",r.updateVisibility),r}return bi(a,d),a.prototype.template=function(e){var r,o=e.pfx,c=e.label,g=null===(r=this.em)||void 0===r?void 0:r.getConfig().icons,b=g?.caret||"",w="".concat(o,"sector-");return H(yl||(yl=function(d,a){return Object.defineProperty?Object.defineProperty(d,"raw",{value:a}):d.raw=a,d}(['\n      <div class="','title" data-sector-title>\n        <div class="','caret">$','</div>\n        <div class="','label">',"</div>\n      </div>\n    "],['\n      <div class="','title" data-sector-title>\n        <div class="','caret">$','</div>\n        <div class="','label">',"</div>\n      </div>\n    "])),w,w,b,w,c)},a.prototype.events=function(){return{"click [data-sector-title]":"toggle"}},a.prototype.updateOpen=function(){var e=this,r=e.$el,c=e.pfx,g=e.model.isOpen();r[g?"addClass":"removeClass"]("".concat(c,"open")),this.getPropertiesEl().style.display=g?"":"none"},a.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?"":"none"},a.prototype.getPropertiesEl=function(){return this.$el.find(".".concat(this.pfx,"properties")).get(0)},a.prototype.toggle=function(){var e=this.model;e.setOpen(!e.get("open"))},a.prototype.renderProperties=function(){var o=this.config,c=this.model.get("properties");if(c){var g=new B0({collection:c,config:o});this.$el.append(g.render().el)}},a.prototype.render=function(){var e=this,r=e.pfx,o=e.model,c=e.$el,g=o.getId(),b=o.getName();return c.html(this.template({pfx:r,label:b})),this.renderProperties(),c.attr("class","".concat(r,"sector ").concat(r,"sector__").concat(g," no-select")),this.updateOpen(),this},a}(L.Ss);const Wi=ds;var yl,mc=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),yp=function(d){function a(e){void 0===e&&(e={});var r=d.call(this,e)||this,o=e.module,c=e.config,g=r.collection;return r.pfx=c?.stylePrefix||"",r.ppfx=c?.pStylePrefix||"",r.config=c,r.module=o,r.listenTo(g,"add",r.addTo),r.listenTo(g,"reset",r.render),r}return mc(a,d),a.prototype.remove=function(){var e=this;return L.Ss.prototype.remove.apply(this,arguments),["config","module","em"].forEach(function(r){return e[r]={}}),this},a.prototype.addTo=function(e,r,o){void 0===o&&(o={}),this.addToCollection(e,null,o)},a.prototype.addToCollection=function(e,r,o){void 0===o&&(o={});var w=r||this.el,C=new Wi({model:e,config:this.config}).render().el;return(0,Ln.Sc)(w,C,o.at),C},a.prototype.render=function(){var e=this,r=this,o=r.$el,c=r.pfx,g=r.ppfx;o.empty();var b=document.createDocumentFragment();return this.collection.each(function(w){return e.addToCollection(w,b)}),o.append(b),o.addClass("".concat(c,"sectors ").concat(g,"one-bg ").concat(g,"two-color")),this},a}(L.Ss);const Hp=yp;var Zl=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Ya=function(){return Ya=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Ya.apply(this,arguments)},Kl=function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))},op="".concat("style",":"),td="".concat(op,"sector"),jd="".concat(td,":add"),ip="".concat(td,":remove"),Vf="".concat(td,":update"),bh="".concat(op,"property"),Bg="".concat(bh,":add"),zf="".concat(bh,":remove"),yy="".concat(bh,":update"),c_="".concat(op,"layer:select"),_v="".concat(op,"target"),Km="".concat(op,"custom"),by=function(d){return d||0===d},wy={all:"style",sectorAdd:jd,sectorRemove:ip,sectorUpdate:Vf,propertyAdd:Bg,propertyRemove:zf,propertyUpdate:yy,layerSelect:c_,target:_v,custom:Km},H0=function(d){function a(e){var r=d.call(this,e,"StyleManager",new Zm([],{em:e}),wy,{sectors:[{name:"General",open:!1,properties:["display","float","position","top","right","left","bottom"]},{name:"Flex",open:!1,properties:["flex-direction","flex-wrap","justify-content","align-items","align-content","order","flex-basis","flex-grow","flex-shrink","align-self"]},{name:"Dimension",open:!1,properties:["width","height","max-width","min-height","margin","padding"]},{name:"Typography",open:!1,properties:["font-family","font-size","font-weight","letter-spacing","color","line-height","text-align","text-shadow"]},{name:"Decorations",open:!1,properties:["background-color","border-radius","border","box-shadow","background"]},{name:"Extra",open:!1,properties:["opacity","transition","transform"]}],appendTo:"",stylePrefix:"sm-",custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:["width","height"]})||this;r.Sector=v2,r.storageKey="",(0,x.bindAll)(r,"__clearStateTarget");var o=r.config,c=o.pStylePrefix;c&&(o.stylePrefix=c+o.stylePrefix),r.builtIn=new Wo,r.properties=new vy([],{em:e,module:r}),r.sectors=r.all;var g=new L.Kx({targets:[]});r.model=g;var w="component:toggled ".concat(gt.I.update,":classes change:state change:device frame:resized selector:type");r.upAll=(0,x.debounce)(function(){return r.__upSel()},0),g.listenTo(e,w,r.upAll),g.listenTo(e,"component:toggled",r.__clearStateTarget);var C=(0,x.debounce)(function(){r.__upProps(),r.__trgCustom()},0);g.listenTo(e,"styleable:change undo redo",C);var B=(0,x.debounce)(function(){return r.__trgCustom()},0);return g.listenTo(e,"".concat(c_," ").concat(_v),B),g.on("change:lastTarget",function(){return e.trigger(_v,r.getSelected())}),r}return Zl(a,d),a.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},a.prototype.__trgCustom=function(e){void 0===e&&(e={}),this.__ctn=this.__ctn||e.container,this.em.trigger(this.events.custom,{container:this.__ctn})},a.prototype.__trgEv=function(e){for(var r,o=[],c=1;c<arguments.length;c++)o[c-1]=arguments[c];(r=this.em).trigger.apply(r,Kl([e],o,!1))},a.prototype.__clearStateTarget=function(){var e=this,r=this.em,o=this.__getStateTarget();o&&r?.skip(function(){r.Css.remove(o),e.model.set({stateTarget:null})})},a.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},a.prototype.postRender=function(){this.__appendTo()},a.prototype.addSector=function(e,r,o){void 0===o&&(o={});var c=this.getSector(e);return c||(r.id=e,c=this.sectors.add(r,o)),c},a.prototype.getSector=function(e,r){void 0===r&&(r={});var o=this.sectors.where({id:e})[0];return!o&&r.warn&&this._logNoSector(e),o||null},a.prototype.getSectors=function(e){void 0===e&&(e={});var r=this.sectors,o=r&&r.models?e.array?Kl([],r.models,!0):r:[];return e.visible?o.filter(function(c){return c.isVisible()}):o},a.prototype.removeSector=function(e){return this.getSectors().remove(this.getSector(e,{warn:!0}))},a.prototype.addProperty=function(e,r,o){void 0===o&&(o={});var g,c=this.getSector(e,{warn:!0});return c&&(g=c.addProperty(r,o)),g},a.prototype.getProperty=function(e,r){var c,o=this.getSector(e,{warn:!0});return o&&(c=o.properties.filter(function(g){return g.get("property")===r||g.get("id")===r})[0]),c},a.prototype.getProperties=function(e){var r,o=this.getSector(e,{warn:!0});return o&&(r=o.properties),r},a.prototype.removeProperty=function(e,r){var o=this.getProperties(e);return o?o.remove(this.getProperty(e,r)):null},a.prototype.select=function(e,r){var o=this;void 0===r&&(r={});var c=this.em,g=(0,x.isArray)(e)?e:[e],b=r.stylable,w=c.Css,C=[];g.filter(Boolean).forEach(function(We){var lt=We;if((0,x.isString)(We)){var Ot=w.getRule(We)||w.setRule(We);!(0,x.isUndefined)(b)&&Ot.set({stylable:b}),lt=Ot}C.push(lt)});var B=r.component||C.filter(function(We){return(0,z.isComponent)(We)}).reverse()[0];C=C.map(function(We){return o.getModelToStyle(We)});var ne=c.getState(),ae=C.slice().reverse()[0],be=this.getParentRules(ae,{state:ne,component:B}),Se=this.__getStateTarget();return c.skip(function(){var We;if(ne&&null!==(We=ae?.getState)&&void 0!==We&&We.call(ae)){var lt=ae.getStyle();Se?Se.setStyle(lt):Se=w.getAll().add({selectors:"gjs-selected",style:lt,shallow:!0,important:!0})}else Se&&(w.remove(Se),Se=void 0)}),this.model.set({targets:C,lastTarget:ae,lastTargetParents:be,stateTarget:Se,component:B}),this.__upProps(r),C},a.prototype.getSelected=function(){return this.model.get("lastTarget")},a.prototype.getSelectedAll=function(){return this.model.get("targets")},a.prototype.getSelectedParents=function(){return this.model.get("lastTargetParents")||[]},a.prototype.__getStateTarget=function(){return this.model.get("stateTarget")},a.prototype.addStyleTargets=function(e,r){this.getSelectedAll().map(function(g){return g.addStyle(e,r)});var o=this.getSelected();o&&this.__emitCmpStyleUpdate(e);var c=this.__getStateTarget();o&&c?.setStyle(o.getStyle(),r)},a.prototype.getBuiltIn=function(e){return this.builtIn.get(e)},a.prototype.getBuiltInAll=function(){return this.builtIn.props},a.prototype.addBuiltIn=function(e,r){return this.builtIn.add(e,r)},a.prototype.getModelToStyle=function(e,r){void 0===r&&(r={});var o=this.em,c=r.skipAdd;if(o&&e?.toHTML){var g=o.getConfig(),b=o.UndoManager,w=o.Css,C=o.Selectors,B=C?C.getConfig():{},ne=g.devicePreviewMode?"":o.get("state"),be=e.get("classes").getStyleable(),Se=be.length,We=!B.componentFirst||r.useClasses,lt={noCount:1},Ot={state:ne,addOpts:lt};b.skip(function(){var ur;if(Se&&We){var Gt=o.getCurrentMedia();!(ur=w.get(be,ne,Gt))&&!c&&(ur=w.add(be,ne,Gt,{},lt))}else if(g.avoidInlineStyle){var ar=e.getId();!(ur=w.getIdRule(ar,Ot))&&!c&&(ur=w.setIdRule(ar,{},Ot)),e.is("wrapper")&&ur.set("wrapper",1,lt)}ur&&(e=ur)})}return e},a.prototype.getParentRules=function(e,r){var o=void 0===r?{}:r,c=o.state,b=this.em,w=[];if(b&&e){var C=o.component,B=b.Css,ne=b.CodeManager.getGenerator("css"),ae=e.toHTML?e:e.getComponent(),be={array:!0},Se=[],We=[],lt=[],ur=[],Gt=function(jn){return jn.length?B.getRules().filter(function(Nr){var Dn=Nr.getSelectors().map(function(ir){return ir.getFullName()});return 0!==Dn.length&&Dn.every(function(ir){return jn.indexOf(ir)>=0})}):[]},ar=function(jn){return jn?B.getRules().filter(function(Nr){return Nr.selectorsToString()===jn}):[]};ae?(Se=B.getRules("#".concat(ae.getId())),We=ar(ae.get("tagName")),ur=(C?Gt(C.getSelectors().getFullName(be)):[]).concat(We).concat(Se)):(Se=C?B.getRules("#".concat(C.getId())):[],We=ar(C?.get("tagName")||""),lt=Gt((C?.getSelectors().getFullName(be)||[]).filter(function(jn){return-1===e.getSelectors().getFullName(be).findIndex(function(Nr){return Nr===jn})}).concat(e.getSelectors().getFullName(be))),ur=We.concat(Se).concat(lt));var ti=ur.filter(function(jn){return(0,x.isUndefined)(c)?1:jn.get("state")===c}).sort(ne.sortRules).reverse();w=ti.slice(ti.indexOf(e)+1)}return w},a.prototype.addType=function(e,r){this.properties.addType(e,r)},a.prototype.getType=function(e){return this.properties.getType(e)},a.prototype.getTypes=function(){return this.properties.getTypes()},a.prototype.createType=function(e,r){var o=void 0===r?{}:r,c=o.model,g=void 0===c?{}:c,b=o.view,w=void 0===b?{}:b,C=this.config,B=this.getType(e);if(B)return new B.view(Ya({model:new B.model(g),config:C},w))},a.prototype.render=function(){var e=this,c=e.SectView;return this.SectView=new Hp({el:c&&c.el,em:e.em,config:e.config,module:this,collection:this.sectors}),this.SectView.render().el},a.prototype._logNoSector=function(e){var r=this.em;r&&r.logWarning("'".concat(e,"' sector not found"))},a.prototype.__emitCmpStyleUpdate=function(e,r){void 0===r&&(r={});var o=this.em;if(!e.__p){var c=this.getSelectedAll(),g=r.components||o.getSelectedAll(),b=Array.isArray(g)?g:[g],w=Ya({},e);delete w.__p,b.forEach(function(C){return!c.includes(C)&&C.__onStyleChange(w)})}},a.prototype.__upProps=function(e){var r=this;void 0===e&&(e={});var o=this.getSelected();if(o){var c=this.sectors,g=this.model.get("component"),b=this.getSelectedParents(),w=o.getStyle(),C=b.map(function(B){return{target:B,style:B.getStyle()}});c.map(function(B){B.getProperties().map(function(ne){r.__upProp(ne,w,C,e)})}),c.forEach(function(B){var ne=B.getProperties();ne.forEach(function(be){var Se=be.__checkVisibility({target:o,component:g,sectors:c});be.set("visible",Se)});var ae=ne.some(function(be){return be.isVisible()});B.set("visible",ae)})}},a.prototype.__upProp=function(e,r,o,c){var g=this,b=e.getName(),w=r[b],C=by(w),B="stack"===e.getType(),ne="composite"===e.getType(),ae=Ya(Ya({},c),{__up:!0}),be=!ne&&!B,Se=e,We=e,lt=B?Se.__getLayersFromStyle(r):[],Ot=ne?We.__getPropsFromStyle(r):{},ur=C?w:null,Gt=null;if(B&&null===lt||ne&&null===Ot){var ar=B?"__getLayersFromStyle":"__getPropsFromStyle";if(Fn=o.filter(function(Dn){return null!==Se[ar](Dn.style)})[0]){ur=Fn.style[b],Gt=Fn.target;var fo=Se[ar](Fn.style);B?lt=fo:Ot=fo}}else if(!C){var Fn;ur=null,(Fn=o.filter(function(ir){return by(ir.style[b])})[0])&&(ur=Fn.style[b],Gt=Fn.target)}if(e.__setParentTarget(Gt),be&&e.__getFullValue()!==ur&&e.upValue(ur,ae),B&&Se.__setLayers(lt||[],{isEmptyValue:Se.isEmptyValueStyle(r)}),ne){var ti=We.getProperties();if(We.isDetached()){var jn=We.__getPropsFromStyle(r,{byName:!0})||{},Nr=o.map(function(Dn){return Ya(Ya({},Dn),{style:We.__getPropsFromStyle(Dn.style,{byName:!0})||{}})});ti.map(function(Dn){return g.__upProp(Dn,jn,Nr,c)})}else We.__setProperties(Ot||{},ae),We.getProperties().map(function(Dn){return Dn.__setParentTarget(Gt)})}},a.prototype.destroy=function(){var e;[this.properties,this.sectors].forEach(function(r){r.reset(),r.stopListening()}),null===(e=this.SectView)||void 0===e||e.remove(),this.model.stopListening(),this.upAll.cancel()},a}(je);const Vm=H0;var _E=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),xy=function(){return xy=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},xy.apply(this,arguments)},Wg=function(d){function a(e,r){var o=d.call(this,e,r)||this;return o.em=r,o.model=function(c,g){return void 0===g&&(g={}),new Sl(c,xy(xy({},g),{em:r}))},o}return _E(a,d),a}(L.pM);const Cy=Wg;var xd=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),D1=function(d){function a(e){var r=d.call(this,e,"DataSources",new Cy([],e),Ei)||this;return r.storageKey="dataSources",r.events=Ei,Object.assign(r,U.Events),r}return xd(a,d),a.prototype.destroy=function(){},a.prototype.add=function(e,r){void 0===r&&(r={});var o=this.all;return e.id=e.id||this._createId(),o.add(e,r)},a.prototype.get=function(e){return this.all.get(e)},a.prototype.getValue=function(e,r){return(0,z.get)(this.getContext(),e,r)},a.prototype.getContext=function(){return this.all.reduce(function(e,r){return e[r.id]=r.records.reduce(function(o,c,g){return o[c.id||g]=c.attributes,o},{}),e},{})},a.prototype.remove=function(e,r){return this.__remove(e,r)},a.prototype.fromPath=function(e){var r=[],o=(0,z.stringToPath)(e||""),c=o[0],g=o[1],b=o.slice(2),w=this.get(c),C=w?.records.get(g);return w&&r.push(w),C&&(r.push(C),b.length&&r.push(b.join("."))),r},a.prototype.store=function(){var e,r=[];return this.all.forEach(function(o){var c=o.get("skipFromStorage");c||r.push({id:o.id,name:o.get("name"),records:o.records.toJSON(),skipFromStorage:c})}),(e={})[this.storageKey]=r,e},a.prototype.load=function(e){return this.loadProjectData(e)},a.prototype.postLoad=function(){var r=this.em;r.listenTo(this.all,L.e2,function(c,g,b){return r.changesUp(b||g)})},a}(je);const Cl=D1;var yE=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),Nd=function(){return Nd=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},Nd.apply(this,arguments)},u_=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},Ey=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}};R().$=T.default;var y2=[rC,Mw,aC,Rd,Zh,kn,Ut,Vm,cm,qw,KC,MC,eE,Db,gx,Ht,Mb,of,Cl],q0=[pf,ni,p0,Qm,Cl];!function(d){var a=d.$;if(a&&a.prototype&&"jQuery"!==a.prototype.constructor.name){var e=a.fn;e.hide=function(){return this.css("display","none")},e.show=function(){return this.css("display","block")},e.focus=function(){var c=this.get(0);return c&&c.focus(),this},e.bind=function(c,g){return this.on(c,g)},e.unbind=function(c,g){if((0,x.isObject)(c)){for(var b in c)c.hasOwnProperty(b)&&this.off(b,c[b]);return this}return this.off(c,g)},e.click=function(c){return c?this.on("click",c):this.trigger("click")},e.change=function(c){return c?this.on("change",c):this.trigger("change")},e.keydown=function(c){return c?this.on("keydown",c):this.trigger("keydown")},e.delegate=function(c,g,b,w){return w||(w=b),this.on(g,c,function(C){C.data=b,w(C)})},e.scrollLeft=function(){var c=this.get(0),g=(c=9==c.nodeType?c.defaultView:c)instanceof Window?c:null;return g?g.pageXOffset:c.scrollLeft||0},e.scrollTop=function(){var c=this.get(0),g=(c=9==c.nodeType?c.defaultView:c)instanceof Window?c:null;return g?g.pageYOffset:c.scrollTop||0};var r=a.prototype.offset;e.offset=function(c){var g,b;return c&&(g=c.top,b=c.left),typeof g<"u"&&this.css("top","".concat(g,"px")),typeof b<"u"&&this.css("left","".concat(b,"px")),r.call(this)},a.map=function(c,g){for(var b=[],w=0;w<c.length;w++)b.push(g(c[w],w));return b};var o=Array.prototype.indexOf;a.inArray=function(c,g,b){return null==g?-1:o.call(g,c,b)},a.Event=function(c,g){if(!(this instanceof a.Event))return new a.Event(c,g);this.type=c,this.isDefaultPrevented=function(){return!1}}}}({$:T.default});var gm={debug:console.log,info:console.info,warning:console.warn,error:console.error},b2=function(d){function a(e){void 0===e&&(e={});var r=d.call(this)||this;r.Model=L.Kx,r.Collection=L.pM,r.events=gh,r.__skip=!1,r.defaultRunning=!1,r.destroyed=!1,r._config=e;var o=r.config;r.set("Config",e),r.set("modules",[]),r.set("toLoad",[]),r.set("storables",[]),r.set("selected",new pe),r.set("dmode",o.dragMode);var c=o.el,g=o.log,b=!0===g?(0,x.keys)(gm):(0,x.isArray)(g)?g:[];return(0,x.bindAll)(r,"initBaseColorPicker"),c&&o.fromElement&&(o.components=c.innerHTML),r.attrsOrig=c?(0,x.toArray)(c.attributes).reduce(function(w,C){return w[C.nodeName]=C.nodeValue,w},{}):"",o.components&&!o.pageManager&&(o.pageManager={pages:[{component:o.components}]}),y2.forEach(function(w){return r.loadModule(w)}),q0.forEach(function(w){return r.loadStorableModule(w)}),r.on("change:componentHovered",r.componentHovered,r),r.on("change:changesCount",r.updateChanges,r),r.on("change:readyLoad change:readyCanvas",r._checkReady,r),b.forEach(function(w){return r.listenLog(w)}),[{from:"change:selectedComponent",to:"component:toggled"}].forEach(function(w){var C=w.from,B=w.to;r.listenTo(r,C,function(){for(var ne=[],ae=0;ae<arguments.length;ae++)ne[ae]=arguments[ae];r.trigger.apply(r,function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([B],ne,!1)),r.logWarning("The event '".concat(C,"' is deprecated, replace it with '").concat(B,"'"))})}),r}return yE(a,d),a.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:""}},Object.defineProperty(a.prototype,"storables",{get:function(){return this.get("storables")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"modules",{get:function(){return this.get("modules")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"toLoad",{get:function(){return this.get("toLoad")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"selected",{get:function(){return this.get("selected")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"shallow",{get:function(){return this.get("shallow")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"I18n",{get:function(){return this.get("I18n")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Utils",{get:function(){return this.get("Utils")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Commands",{get:function(){return this.get("Commands")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Keymaps",{get:function(){return this.get("Keymaps")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Modal",{get:function(){return this.get("Modal")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Panels",{get:function(){return this.get("Panels")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"CodeManager",{get:function(){return this.get("CodeManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"UndoManager",{get:function(){return this.get("UndoManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"RichTextEditor",{get:function(){return this.get("RichTextEditor")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Canvas",{get:function(){return this.get("Canvas")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Editor",{get:function(){return this.get("Editor")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Components",{get:function(){return this.get("DomComponents")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Css",{get:function(){return this.get("CssComposer")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Blocks",{get:function(){return this.get("BlockManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Selectors",{get:function(){return this.get("SelectorManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Storage",{get:function(){return this.get("StorageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Traits",{get:function(){return this.get("TraitManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Parser",{get:function(){return this.get("Parser")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Layers",{get:function(){return this.get("LayerManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Assets",{get:function(){return this.get("AssetManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Devices",{get:function(){return this.get("DeviceManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Pages",{get:function(){return this.get("PageManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"Styles",{get:function(){return this.get("StyleManager")},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"DataSources",{get:function(){return this.get("DataSources")},enumerable:!1,configurable:!0}),a.prototype._checkReady=function(){this.get("readyLoad")&&this.get("readyCanvas")&&!this.get("ready")&&this.set("ready",!0)},a.prototype.getContainer=function(){return this.config.el},a.prototype.listenLog=function(e){this.listenTo(this,"log:".concat(e),gm[e])},Object.defineProperty(a.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){var e;return(null===(e=this.config.grapesjs)||void 0===e?void 0:e.version)||""},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isHeadless",{get:function(){return!!this.config.headless},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isShallow",{get:function(){return!!this.get("isShallow")},enumerable:!1,configurable:!0}),a.prototype.getConfig=function(e){var r=this.config;return(0,x.isUndefined)(e)?r:r[e]},a.prototype.loadOnStart=function(){var e=this,r=this.config,o=r.projectData,c=r.headless,g={initial:!0},b=this.Storage;this.toLoad.reverse().forEach(function(B){return B.onLoad()});var w=function(){e.modules.forEach(function(B){return B.postLoad&&B.postLoad(e)}),e.set("readyLoad",1)};c?(o&&this.loadData(o,g),w()):this._storageTimeout=setTimeout(function(){return u_(e,void 0,void 0,function(){var B;return Ey(this,function(ne){switch(ne.label){case 0:return o?(this.loadData(o,g),[3,5]):[3,1];case 1:if(!b?.canAutoload())return[3,5];ne.label=2;case 2:return ne.trys.push([2,4,,5]),[4,this.load({},g)];case 3:return ne.sent(),[3,5];case 4:return B=ne.sent(),this.logError(B),[3,5];case 5:return w(),[2]}})})});var C=new a({noticeOnUnload:!1,storageManager:!1,undoManager:!1});C.set({isShallow:!0}),C.Pages.onLoad(),C.Canvas.postLoad(),this.set("shallow",C)},a.prototype.updateChanges=function(e,r,o){var c=this,g=this.Storage,b=this.getDirtyCount();o.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout(function(){return c.trigger(gh.update)})),this.config.noticeOnUnload&&(window.onbeforeunload=b?function(){return!0}:null),g.isAutosave()&&b>=g.getStepsBeforeSave()&&this.store().catch(function(w){return c.logError(w)})},a.prototype.loadModule=function(e){var r=new e(this);return this.set(r.name,r),r.onLoad&&this.toLoad.push(r),this.modules.push(r),r},a.prototype.loadStorableModule=function(e){var r=this.loadModule(e);return this.storables.push(r),r},a.prototype.init=function(e,r){void 0===r&&(r={}),this.destroyed&&(this.initialize(r),this.destroyed=!1),this.set("Editor",e)},a.prototype.getEditor=function(){return this.get("Editor")},a.prototype.handleUpdates=function(e,r,o){var c=this;void 0===o&&(o={}),!(this.__skip||o.temporary||o.noCount||o.avoidStore||o.partial)&&this.get("ready")&&(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout(function(){var g=c.getDirtyCount()||0,w=function(d,a){var e={};for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&a.indexOf(r)<0&&(e[r]=d[r]);if(null!=d&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(d);o<r.length;o++)a.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(d,r[o])&&(e[r[o]]=d[r[o]])}return e}(o,["unset"]);c.set("changesCount",g+1,w)},0))},a.prototype.changesUp=function(e){this.handleUpdates(0,0,e)},a.prototype.componentHovered=function(e,r,o){var c=this.previous("componentHovered");c&&this.trigger("component:unhovered",c,o),r&&this.trigger("component:hovered",r,o)},a.prototype.getSelected=function(){return this.selected.lastComponent()},a.prototype.getSelectedAll=function(){return this.selected.allComponents()},a.prototype.setSelected=function(e,r){var o=this;void 0===r&&(r={});var c=r.event,g=c&&(c.ctrlKey||c.metaKey),b=(c||{}).shiftKey,w=((0,x.isArray)(e)?e:[e]).map(function(ae){var be,Se;return(null===(Se=null===(be=ae?.delegate)||void 0===be?void 0:be.select)||void 0===Se?void 0:Se.call(be,ae))||ae}).filter(Boolean),C=this.getSelectedAll(),B=this.getConfig().multipleSelection,ne=(0,x.isArray)(e);(ne||!e)&&this.removeSelected(C.filter(function(ae){return!(0,x.contains)(w,ae)})),w.forEach(function(ae){if(ae&&(o.trigger(gt.I.selectBefore,ae,r),!ae.get("selectable")||r.abort)){if(!r.useValid)return;for(var be=ae.parent();be&&!be.get("selectable");)be=be.parent();ae=be}if(g&&B)return o.toggleSelected(ae);if(b&&B){if(o.isEditing())return;o.clearSelection(o.Canvas.getWindow());var lt,Ot,Se=ae.collection,We=ae.index();if(o.getSelectedAll().forEach(function(ur){var Gt=ur.collection,ar=ur.index();Gt===Se&&(ar<We?lt=(0,x.isUndefined)(lt)?ar:Math.max(lt,ar):ar>We&&(Ot=(0,x.isUndefined)(Ot)?ar:Math.min(Ot,ar)))}),!(0,x.isUndefined)(lt))for(;lt!==We;)o.addSelected(Se.at(lt),r),lt++;if(!(0,x.isUndefined)(Ot))for(;Ot!==We;)o.addSelected(Se.at(Ot),r),Ot--;return o.addSelected(ae,r)}!ne&&o.removeSelected(C.filter(function(ur){return ur!==ae})),o.addSelected(ae,r)})},a.prototype.addSelected=function(e,r){var o=this;void 0===r&&(r={}),((0,x.isArray)(e)?e:[e]).forEach(function(g){var b=o.selected;g&&g.get("selectable")&&!g.parents().some(function(C){return b.hasComponent(C)})&&(r.forceChange&&o.removeSelected(g,r),b.allComponents().filter(function(C){return(0,x.contains)(C.parents(),g)}).forEach(function(C){return o.removeSelected(C,r)}),b.addComponent(g,r),o.trigger(gt.I.select,g,r),o.Canvas.addSpot({type:jt.F.Select,component:g}))})},a.prototype.removeSelected=function(e,r){var o=this;void 0===r&&(r={}),this.selected.removeComponent(e,r),((0,x.isArray)(e)?e:[e]).forEach(function(g){return o.Canvas.removeSpots({type:jt.F.Select,component:g})})},a.prototype.toggleSelected=function(e,r){var o=this;void 0===r&&(r={}),((0,x.isArray)(e)?e:[e]).forEach(function(g){o.selected.hasComponent(g)?o.removeSelected(g,r):o.addSelected(g,r)})},a.prototype.setHovered=function(e,r){var o=this;void 0===r&&(r={});var c=function(w,C){var ne=o.config,ae=o.Canvas,be=o.getHovered(),Se=o.getSelectedAll(),We=jt.F.Hover,lt=jt.F.Spacing;o.set("componentHovered",w||null,C),be&&(ae.removeSpots({type:We,component:be}),ae.removeSpots({type:lt,component:be})),w&&(ae.addSpot({type:We,component:w}),(!Se.includes(w)||ne.showOffsetsSelected)&&ae.addSpot({type:lt,component:w}))};if(!e)return c();var g="component:hover";if(r.forceChange&&c(),this.trigger("".concat(g,":before"),e,r),!e.get("hoverable")){if(!r.useValid||r.abort)return;for(var b=e.parent();b&&!b.get("hoverable");)b=b.parent();e=b}r.abort||(c(e,r),this.trigger(g,e,r))},a.prototype.getHovered=function(){return this.get("componentHovered")},a.prototype.setComponents=function(e,r){return void 0===r&&(r={}),this.Components.setComponents(e,r)},a.prototype.getComponents=function(){var e=this.Components,r=this.CodeManager;if(e&&r){var o=e.getComponents();return r.getCode(o,"json")}},a.prototype.setStyle=function(e,r){void 0===r&&(r={});var o=this.Css;return o.clear(r),o.getAll().add(e,r),this},a.prototype.addStyle=function(e,r){void 0===r&&(r={});var o=this.getStyle().add(e,r);return(0,x.isArray)(o)?o:[o]},a.prototype.getStyle=function(){return this.Css.getAll()},a.prototype.setState=function(e){return this.set("state",e),this},a.prototype.getState=function(){return this.get("state")||""},a.prototype.getHtml=function(e){void 0===e&&(e={});var r=this.config,o=r.optsHtml,c=r.jsInHtml?this.getJs(e):"",g=e.component||this.Components.getComponent();return(g?this.CodeManager.getCode(g,"html",Nd(Nd({},o),e)):"")+(c?"<script>".concat(c,"<\/script>"):"")},a.prototype.getCss=function(e){void 0===e&&(e={});var r=this.config,o=r.optsCss,c=e.avoidProtected,g=(0,x.isUndefined)(e.keepUnusedStyles)?r.keepUnusedStyles:e.keepUnusedStyles,b=this.Css,w=e.component||this.Components.getComponent(),C=c?"":r.protectedCss,B=w&&this.CodeManager.getCode(w,"css",Nd(Nd({cssc:b,keepUnusedStyles:g},o),e));return w?e.json?B:C+B:""},a.prototype.getJs=function(e){void 0===e&&(e={});var r=e.component||this.Components.getWrapper();return r?this.CodeManager.getCode(r,"js").trim():""},a.prototype.store=function(e){return u_(this,void 0,void 0,function(){var r;return Ey(this,function(o){switch(o.label){case 0:return r=this.storeData(),[4,this.Storage.store(r,e)];case 1:return o.sent(),this.clearDirtyCount(),[2,r]}})})},a.prototype.load=function(e){return u_(this,arguments,void 0,function(r,o){var c;return void 0===o&&(o={}),Ey(this,function(g){switch(g.label){case 0:return[4,this.Storage.load(r)];case 1:return c=g.sent(),this.loadData(c,o),[4,(0,z.wait)()];case 2:return g.sent(),o.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,c]}})})},a.prototype.storeData=function(){var e={},r=this.getEditing();r&&r.trigger("sync:content",{noCount:!0}),this.storables.forEach(function(c){e=Nd(Nd({},e),c.store(1))});var o=JSON.parse(JSON.stringify(e));return this.trigger(gh.projectGet,{project:o}),o},a.prototype.loadData=function(e,r){void 0===e&&(e={}),void 0===r&&(r={});var o=!1;return(0,z.isEmptyObj)(e)||(this.storables.forEach(function(c){return c.clear()}),this.storables.forEach(function(c){return c.load(e)}),o=!0),this.trigger(gh.projectLoad,{project:e,loaded:o,initial:!!r.initial}),e},a.prototype.getDeviceModel=function(){var e=this.get("device");return this.Devices.get(e)},a.prototype.runDefault=function(e){void 0===e&&(e={});var r=this.Commands.get(this.config.defaultCommand);!r||this.defaultRunning||(r.stop(this,this,e),r.run(this,this,e),this.defaultRunning=!0)},a.prototype.stopDefault=function(e){void 0===e&&(e={});var r=this.Commands;if(r){var o=r.get(this.config.defaultCommand);!o||!this.defaultRunning||(o.stop(this,this,e),this.defaultRunning=!1)}},a.prototype.refreshCanvas=function(e){void 0===e&&(e={}),this.Canvas.refresh({spots:e.tools})},a.prototype.clearSelection=function(e){var r;null===(r=(e||window).getSelection())||void 0===r||r.removeAllRanges()},a.prototype.getCurrentMedia=function(){var e=this.config,r=this.getDeviceModel(),o=e.mediaCondition,c=e.devicePreviewMode,g=r&&r.get("widthMedia");return r&&g&&!c?"(".concat(o,": ").concat(g,")"):""},a.prototype.getWrapper=function(){return this.Components.getWrapper()},a.prototype.setCurrentFrame=function(e){return this.set("currentFrame",e)},a.prototype.getCurrentFrame=function(){return this.get("currentFrame")},a.prototype.getCurrentFrameModel=function(){var e;return null===(e=this.getCurrentFrame()||{})||void 0===e?void 0:e.model},a.prototype.getIcon=function(e){return(this.config.icons||{})[e]||""},a.prototype.getDirtyCount=function(){return this.get("changesCount")},a.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},a.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},a.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},a.prototype.setDragMode=function(e){return this.set("dmode",e)},a.prototype.getDragMode=function(e){return e?.getDragMode()||this.get("dmode")||""},a.prototype.t=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=this.get("I18n");return o?.t.apply(o,e)},a.prototype.inAbsoluteMode=function(e){return"absolute"===this.getDragMode(e)},a.prototype.destroyAll=function(){var e=this,o=this.config,c=this.view;this.trigger(gh.destroy);var g=this.getEditor(),b=(o.grapesjs||{}).editors,w=void 0===b?[]:b,C=this.get("shallow");this._storageTimeout&&clearTimeout(this._storageTimeout),C?.destroyAll(),this.stopListening(),this.stopDefault(),(this.modules||[]).slice().reverse().forEach(function(B){return B.destroy()}),c?.remove&&c.remove(),this.clear({silent:!0}),this.destroyed=!0,["_config","view","_previousAttributes","_events","_listeners"].forEach(function(B){return e[B]={}}),w.splice(w.indexOf(g),1),(0,z.hasWin)()&&(0,T.default)(o.el).empty().attr(this.attrsOrig),this.trigger(gh.destroyed)},a.prototype.getEditing=function(){var e=this.get("editing");return e&&e.model||void 0},a.prototype.setEditing=function(e){return this.set("editing",e),this},a.prototype.isEditing=function(){return!!this.get("editing")},a.prototype.log=function(e,r){void 0===r&&(r={});var o=gh.log,c=r.ns,g=r.level,b=void 0===g?"debug":g;if(this.trigger(o,e,r),b&&this.trigger("".concat(o,":").concat(b),e,r),c){var w="".concat(o,"-").concat(c);this.trigger(w,e,r),b&&this.trigger("".concat(w,":").concat(b),e,r)}},a.prototype.logInfo=function(e,r){this.log(e,Nd(Nd({},r),{level:"info"}))},a.prototype.logWarning=function(e,r){this.log(e,Nd(Nd({},r),{level:"warning"}))},a.prototype.logError=function(e,r){this.log(e,Nd(Nd({},r),{level:"error"}))},a.prototype.initBaseColorPicker=function(e,r){void 0===r&&(r={});var o=this.config,c=o.colorPicker,g=void 0===c?{}:c,b=o.el,w=o.stylePrefix;return(0,T.default)(e).spectrum(Nd(Nd({containerClassName:"".concat(w,"one-bg ").concat(w,"two-color"),appendTo:b||"body",maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:"Ok",cancelText:"\u2a2f"},r),g))},a.prototype.skip=function(e){this.__skip=!0;var r=this.UndoManager;r?r.skip(e):e(),this.__skip=!1},a.prototype.data=function(e,r,o){var c="_gjs-data";if(e[c]||(e[c]={}),(0,x.isUndefined)(o))return e[c][r];e[c][r]=o},a}(L.Kx);const w2=b2;var T1=function(){var d=function(a,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(r[c]=o[c])})(a,e)};return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=a}d(a,e),a.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),$0=function(d){function a(e){var r=d.call(this,{model:e})||this,o=e.Panels,c=e.UndoManager;return e.view=r,e.once("change:ready",function(){o.active(),o.disableButtons(),c.clear(),e.getConfig().telemetry&&r.sendTelemetryData().catch(function(){}),setTimeout(function(){e.trigger(gh.load,e.Editor),e.clearDirtyCount()})}),r}return T1(a,d),a.prototype.render=function(){var e=this,o=this.$el,c=this.model,g=c.Panels,b=c.Canvas,w=c.config,C=c.modules,B=w.stylePrefix,ne=["".concat(B,"editor")];!w.customUI&&ne.push("".concat(B,"one-bg ").concat(B,"two-color"));var ae=(0,T.default)(w.el||"body ".concat(w.container));w.cssIcons&&(0,z.appendStyles)(w.cssIcons,{unique:!0,prepand:!0}),o.empty(),w.width&&ae.css("width",w.width),w.height&&ae.css("height",w.height),o.append(b.render()),o.append(g.render());var Se=c.shallow.Canvas.render();return Se.style.display="none",o.append(Se),o.attr("class",ne.join(" ")),ae.addClass("".concat(B,"editor-cont")).empty().append(o),C.forEach(function(We){var lt;return null===(lt=We.postRender)||void 0===lt?void 0:lt.call(We,e)}),this},a.prototype.sendTelemetryData=function(){return function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})}(this,void 0,void 0,function(){var e,r,o,c,b,w,C;return function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}}(this,function(B){switch(B.label){case 0:return"localhost"===(e=function x2(){return window.location.hostname}())||e.includes("localhost")?[2]:(o=this.model.version,c="".concat(r="gjs_telemetry_sent_").concat(o),sessionStorage.getItem(c)?[2]:[4,fetch("".concat("https://app.grapesjs.com","/api/gjs/telemetry/collect"),{method:"POST",body:JSON.stringify({domain:e,version:o})})]);case 1:return(b=B.sent()).ok?[3,3]:(w=Error.bind,C="Failed to send telemetry data ".concat,[4,b.text()]);case 2:throw new(w.apply(Error,[void 0,C.apply("Failed to send telemetry data ",[B.sent()])]));case 3:return sessionStorage.setItem(c,"true"),Object.keys(sessionStorage).forEach(function(ne){ne.startsWith(r)&&ne!==c&&sessionStorage.removeItem(ne)}),this.trigger(gh.telemetryInit),[2]}})})},a}(L.Ss);const bE=$0;var yv=function(){return yv=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},yv.apply(this,arguments)},bv=function(d,a,e,r){return new(e||(e=Promise))(function(c,g){function b(B){try{C(r.next(B))}catch(ne){g(ne)}}function w(B){try{C(r.throw(B))}catch(ne){g(ne)}}function C(B){B.done?c(B.value):function o(c){return c instanceof e?c:new e(function(g){g(c)})}(B.value).then(b,w)}C((r=r.apply(d,a||[])).next())})},d_=function(d,a){var r,o,c,g,e={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return g={next:b(0),throw:b(1),return:b(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function b(C){return function(B){return function w(C){if(r)throw new TypeError("Generator is already executing.");for(;g&&(g=0,C[0]&&(e=0)),e;)try{if(r=1,o&&(c=2&C[0]?o.return:C[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,C[1])).done)return c;switch(o=0,c&&(C=[2&C[0],c.value]),C[0]){case 0:case 1:c=C;break;case 4:return e.label++,{value:C[1],done:!1};case 5:e.label++,o=C[1],C=[0];continue;case 7:C=e.ops.pop(),e.trys.pop();continue;default:if(!(c=(c=e.trys).length>0&&c[c.length-1])&&(6===C[0]||2===C[0])){e=0;continue}if(3===C[0]&&(!c||C[1]>c[0]&&C[1]<c[3])){e.label=C[1];break}if(6===C[0]&&e.label<c[1]){e.label=c[1],c=C;break}if(c&&e.label<c[2]){e.label=c[2],e.ops.push(C);break}c[2]&&e.ops.pop(),e.trys.pop();continue}C=a.call(d,e)}catch(B){C=[6,B],o=0}finally{r=c=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([C,B])}}},Dy=function(){function d(a,e){var r;void 0===a&&(a={}),void 0===e&&(e={}),this.events=gh,this.html=H;var o={stylePrefix:"gjs-",components:"",style:"",fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:"900px",width:"100%",log:["warning","error"],baseCss:"",protectedCss:"* { box-sizing: border-box; } body {margin: 0;}",canvasCss:"",defaultCommand:"select-comp",showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:"max-width",tagVarStart:"{[ ",tagVarEnd:" ]}",keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:"Code",keepUnusedStyles:!1,customUI:!1,telemetry:!0};this.config=yv(yv(yv({},o),a),{pStylePrefix:null!==(r=a.stylePrefix)&&void 0!==r?r:o.stylePrefix}),this.em=new w2(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(d.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"DataSources",{get:function(){return this.em.DataSources},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),d.prototype.getConfig=function(a){return this.em.getConfig(a)},d.prototype.getHtml=function(a){return this.em.getHtml(a)},d.prototype.getCss=function(a){return this.em.getCss(a)},d.prototype.getJs=function(a){return this.em.getJs(a)},d.prototype.getComponents=function(){return this.Components.getComponents()},d.prototype.getWrapper=function(){return this.Components.getWrapper()},d.prototype.setComponents=function(a,e){return void 0===e&&(e={}),this.em.setComponents(a,e),this},d.prototype.addComponents=function(a,e){return this.getWrapper().append(a,e)},d.prototype.getStyle=function(){return this.em.Css.getAll()},d.prototype.setStyle=function(a,e){return void 0===e&&(e={}),this.em.setStyle(a,e),this},d.prototype.addStyle=function(a,e){return void 0===e&&(e={}),this.em.addStyle(a,e)},d.prototype.getSelected=function(){return this.em.getSelected()},d.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},d.prototype.getSelectedToStyle=function(){var a=this.em.getSelected();if(a)return this.StyleManager.getModelToStyle(a)},d.prototype.select=function(a,e){return this.em.setSelected(a,e),this},d.prototype.selectAdd=function(a){return this.em.addSelected(a),this},d.prototype.selectRemove=function(a){return this.em.removeSelected(a),this},d.prototype.selectToggle=function(a){return this.em.toggleSelected(a),this},d.prototype.getEditing=function(){return this.em.getEditing()},d.prototype.setDevice=function(a){return this.em.set("device",a),this},d.prototype.getDevice=function(){return this.em.get("device")},d.prototype.runCommand=function(a,e){return void 0===e&&(e={}),this.Commands.run(a,e)},d.prototype.stopCommand=function(a,e){return void 0===e&&(e={}),this.Commands.stop(a,e)},d.prototype.store=function(a){return bv(this,void 0,void 0,function(){return d_(this,function(e){switch(e.label){case 0:return[4,this.em.store(a)];case 1:return[2,e.sent()]}})})},d.prototype.load=function(a){return bv(this,arguments,void 0,function(e,r){return void 0===r&&(r={}),d_(this,function(o){switch(o.label){case 0:return[4,this.em.load(e,r)];case 1:return[2,o.sent()]}})})},d.prototype.getProjectData=function(){return this.em.storeData()},d.prototype.loadProjectData=function(a){return this.em.loadData(a)},d.prototype.storeData=function(){return this.em.storeData()},d.prototype.loadData=function(a){return this.em.loadData(a)},d.prototype.getContainer=function(){return this.config.el},d.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},d.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},d.prototype.refresh=function(a){this.em.refreshCanvas(a)},d.prototype.setCustomRte=function(a){this.RichTextEditor.customRte=a},d.prototype.setCustomParserCss=function(a){return this.Parser.getConfig().parserCss=a,this},d.prototype.setDragMode=function(a){return this.em.setDragMode(a),this},d.prototype.log=function(a,e){return void 0===e&&(e={}),this.em.log(a,e),this},d.prototype.t=function(){for(var a,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(a=this.em).t.apply(a,e)},d.prototype.on=function(a,e){return this.em.on(a,e),this},d.prototype.once=function(a,e){return this.em.once(a,e),this},d.prototype.off=function(a,e){return this.em.off(a,e),this},d.prototype.trigger=function(a){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.em.trigger.apply(this.em,function(d,a,e){if(e||2===arguments.length)for(var c,r=0,o=a.length;r<o;r++)(c||!(r in a))&&(c||(c=Array.prototype.slice.call(a,0,r)),c[r]=a[r]);return d.concat(c||Array.prototype.slice.call(a))}([a],e,!0)),this},d.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},d.prototype.getEl=function(){var a;return null===(a=this.editorView)||void 0===a?void 0:a.el},d.prototype.getModel=function(){return this.em},d.prototype.render=function(){var a;return null===(a=this.editorView)||void 0===a||a.remove(),this.editorView=new bE(this.em),this.editorView.render().el},d.prototype.onReady=function(a){this.em.get("ready")?a(this):this.em.on("load",a)},d}();const f_=Dy;var E2=function(d,a){return(0,x.isString)(d)?function(d,a){var e=a.get(d);if(!e){var r=(0,z.getGlobal)()[d];e=r?.default||r}return e}(d,a):d?.default||d},ug=function(d,a){d.getModel().logWarning("Plugin ".concat(a," not found"),{context:"plugins",plugin:a})},wv=function(){function d(){this.plugins={}}return d.prototype.add=function(a,e){return this.get(a)||(this.plugins[a]=e,e)},d.prototype.get=function(a){return this.plugins[a]},d.prototype.getAll=function(){return this.plugins},d}();const P1=wv;var m_=function(){return m_=Object.assign||function(d){for(var a,e=1,r=arguments.length;e<r;e++)for(var o in a=arguments[e])Object.prototype.hasOwnProperty.call(a,o)&&(d[o]=a[o]);return d},m_.apply(this,arguments)};!function(){if((0,z.hasWin)()&&function(){for(var e,r=window.navigator.userAgent,o=[["edge",/Edge\/([0-9\._]+)/],["ie",/MSIE\s(7\.0)/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],c=0;c<o.length&&!(e=o[c][1].exec(r));c++);return!!e}()){var a=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=""),a.apply(document.implementation,[e])}}}();var J0=new P1,M1=[],Y0=function(d,a){var e=E2(d,J0);return function(r){e?e(r,a||{}):ug(r,d)}},Q0={$:T.default,editors:M1,plugins:J0,usePlugin:Y0,version:"0.22.6",init:function(d){void 0===d&&(d={});var a=d.headless,e=d.container;if(!e&&!a)throw new Error("'container' is required");var r=m_(m_({autorender:!0,plugins:[],pluginsOpts:{}},d),{grapesjs:this,el:a?void 0:(0,x.isElement)(e)?e:document.querySelector(e)}),o=new f_(r,{$:T.default}),c=o.getModel();return r.plugins.forEach(function(g){var b=E2(g,J0);b?b(o,r.pluginsOpts[g]||{}):ug(o,g)}),c.loadOnStart(),r.autorender&&!a&&o.render(),M1.push(o),o}};const A1=Q0;var D2=X.Ay},93083:(oe,ue,re)=>{"use strict";re.d(ue,{g$:()=>Yn,HA:()=>Un});var O=re(15861),S=re(65879),m=re(96814),X=re(56223),x=re(75986),z=re(2032),H=re(59038),G=re(23680),D=re(4300),U=re(42495),R=re(78337);const T=["input"],N=["*"];let L=0;class Y{constructor(pn,Xt){this.source=pn,this.value=Xt}}const ee={provide:X.JU,useExisting:(0,S.Gpc)(()=>je),multi:!0},te=new S.OlP("MatRadioGroup"),pe=new S.OlP("mat-radio-default-options",{providedIn:"root",factory:function we(){return{color:"accent"}}});let Te=(()=>{var dr;class pn{get name(){return this._name}set name(Ft){this._name=Ft,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(Ft){this._labelPosition="before"===Ft?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(Ft){this._value!==Ft&&(this._value=Ft,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(Ft){this._selected=Ft,this.value=Ft?Ft.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(Ft){this._disabled=(0,U.Ig)(Ft),this._markRadiosForCheck()}get required(){return this._required}set required(Ft){this._required=(0,U.Ig)(Ft),this._markRadiosForCheck()}constructor(Ft){this._changeDetector=Ft,this._value=null,this._name="mat-radio-group-"+L++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new S.vpe}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(Ft=>Ft===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(Ft=>{Ft.name=this.name,Ft._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(Zn=>{Zn.checked=this.value===Zn.value,Zn.checked&&(this._selected=Zn)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Y(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(Ft=>Ft._markForCheck())}writeValue(Ft){this.value=Ft,this._changeDetector.markForCheck()}registerOnChange(Ft){this._controlValueAccessorChangeFn=Ft}registerOnTouched(Ft){this.onTouched=Ft}setDisabledState(Ft){this.disabled=Ft,this._changeDetector.markForCheck()}}return(dr=pn).\u0275fac=function(Ft){return new(Ft||dr)(S.Y36(S.sBO))},dr.\u0275dir=S.lG2({type:dr,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),pn})();class ge{constructor(pn){this._elementRef=pn}}const Ce=(0,G.Kr)((0,G.sb)(ge));let Oe=(()=>{var dr;class pn extends Ce{get checked(){return this._checked}set checked(Ft){const Zn=(0,U.Ig)(Ft);this._checked!==Zn&&(this._checked=Zn,Zn&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!Zn&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),Zn&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(Ft){this._value!==Ft&&(this._value=Ft,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===Ft),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(Ft){this._labelPosition=Ft}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(Ft){this._setDisabled((0,U.Ig)(Ft))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(Ft){this._required=(0,U.Ig)(Ft)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(Ft){this._color=Ft}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(Ft,Zn,Do,Jt,Jn,Qn,Io,ri){super(Zn),this._changeDetector=Do,this._focusMonitor=Jt,this._radioDispatcher=Jn,this._providerOverride=Io,this._uniqueId="mat-radio-"+ ++L,this.id=this._uniqueId,this.change=new S.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=Ft,this._noopAnimations="NoopAnimations"===Qn,ri&&(this.tabIndex=(0,U.su)(ri,0))}focus(Ft,Zn){Zn?this._focusMonitor.focusVia(this._inputElement,Zn,Ft):this._inputElement.nativeElement.focus(Ft)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((Ft,Zn)=>{Ft!==this.id&&Zn===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(Ft=>{!Ft&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Y(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(Ft){Ft.stopPropagation()}_onInputInteraction(Ft){if(Ft.stopPropagation(),!this.checked&&!this.disabled){const Zn=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),Zn&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(Ft){this._onInputInteraction(Ft),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(Ft){this._disabled!==Ft&&(this._disabled=Ft,this._changeDetector.markForCheck())}_updateTabIndex(){const Ft=this.radioGroup;let Zn;if(Zn=Ft&&Ft.selected&&!this.disabled?Ft.selected===this?this.tabIndex:-1:this.tabIndex,Zn!==this._previousTabIndex){const Do=this._inputElement?.nativeElement;Do&&(Do.setAttribute("tabindex",Zn+""),this._previousTabIndex=Zn)}}}return(dr=pn).\u0275fac=function(Ft){S.$Z()},dr.\u0275dir=S.lG2({type:dr,viewQuery:function(Ft,Zn){if(1&Ft&&S.Gf(T,5),2&Ft){let Do;S.iGM(Do=S.CRH())&&(Zn._inputElement=Do.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[S.qOj]}),pn})(),je=(()=>{var dr;class pn extends Te{}return(dr=pn).\u0275fac=function(){let Xt;return function(Zn){return(Xt||(Xt=S.n5z(dr)))(Zn||dr)}}(),dr.\u0275dir=S.lG2({type:dr,selectors:[["mat-radio-group"]],contentQueries:function(Ft,Zn,Do){if(1&Ft&&S.Suo(Do,Ue,5),2&Ft){let Jt;S.iGM(Jt=S.CRH())&&(Zn._radios=Jt)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],exportAs:["matRadioGroup"],features:[S._Bn([ee,{provide:te,useExisting:dr}]),S.qOj]}),pn})(),Ue=(()=>{var dr;class pn extends Oe{constructor(Ft,Zn,Do,Jt,Jn,Qn,Io,ri){super(Ft,Zn,Do,Jt,Jn,Qn,Io,ri)}}return(dr=pn).\u0275fac=function(Ft){return new(Ft||dr)(S.Y36(te,8),S.Y36(S.SBq),S.Y36(S.sBO),S.Y36(D.tE),S.Y36(R.A8),S.Y36(S.QbO,8),S.Y36(pe,8),S.$8M("tabindex"))},dr.\u0275cmp=S.Xpm({type:dr,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(Ft,Zn){1&Ft&&S.NdJ("focus",function(){return Zn._inputElement.nativeElement.focus()}),2&Ft&&(S.uIk("id",Zn.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),S.ekj("mat-primary","primary"===Zn.color)("mat-accent","accent"===Zn.color)("mat-warn","warn"===Zn.color)("mat-mdc-radio-checked",Zn.checked)("_mat-animation-noopable",Zn._noopAnimations))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[S.qOj],ngContentSelectors:N,decls:13,vars:17,consts:[[1,"mdc-form-field"],["formField",""],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"id","checked","disabled","required","change"],["input",""],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(Ft,Zn){if(1&Ft&&(S.F$t(),S.TgZ(0,"div",0,1)(2,"div",2)(3,"div",3),S.NdJ("click",function(Jt){return Zn._onTouchTargetClick(Jt)}),S.qZA(),S.TgZ(4,"input",4,5),S.NdJ("change",function(Jt){return Zn._onInputInteraction(Jt)}),S.qZA(),S.TgZ(6,"div",6),S._UZ(7,"div",7)(8,"div",8),S.qZA(),S.TgZ(9,"div",9),S._UZ(10,"div",10),S.qZA()(),S.TgZ(11,"label",11),S.Hsn(12),S.qZA()()),2&Ft){const Do=S.MAs(1);S.ekj("mdc-form-field--align-end","before"==Zn.labelPosition),S.xp6(2),S.ekj("mdc-radio--disabled",Zn.disabled),S.xp6(2),S.Q6J("id",Zn.inputId)("checked",Zn.checked)("disabled",Zn.disabled)("required",Zn.required),S.uIk("name",Zn.name)("value",Zn.value)("aria-label",Zn.ariaLabel)("aria-labelledby",Zn.ariaLabelledby)("aria-describedby",Zn.ariaDescribedby),S.xp6(5),S.Q6J("matRippleTrigger",Do)("matRippleDisabled",Zn._isRippleDisabled())("matRippleCentered",!0),S.xp6(2),S.Q6J("for",Zn.inputId)}},dependencies:[G.wG],styles:['.mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mdc-radio[hidden]{display:none}.mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mdc-radio__native-control:checked+.mdc-radio__background,.mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio--disabled{cursor:default;pointer-events:none}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:disabled+.mdc-radio__background,[aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-radio-button{--mdc-radio-disabled-selected-icon-opacity:0.38;--mdc-radio-disabled-unselected-icon-opacity:0.38;--mdc-radio-state-layer-size:40px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{padding:calc((var(--mdc-radio-state-layer-size) - 20px) / 2)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-disabled-selected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-unselected-icon-opacity)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-focus-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{top:calc(-1 * (var(--mdc-radio-state-layer-size) - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size) - 20px) / 2);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control{top:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);right:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);left:calc((var(--mdc-radio-state-layer-size) - var(--mdc-radio-state-layer-size)) / 2);width:var(--mdc-radio-state-layer-size);height:var(--mdc-radio-state-layer-size)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-radio-checked-ripple-color)}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}[dir=rtl] .mat-mdc-radio-touch-target{left:0;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0}),pn})(),Le=(()=>{var dr;class pn{}return(dr=pn).\u0275fac=function(Ft){return new(Ft||dr)},dr.\u0275mod=S.oAB({type:dr}),dr.\u0275inj=S.cJS({imports:[G.BQ,m.ez,G.si,G.BQ]}),pn})();var ke=re(98525),me=re(74104),l=re(64170),Me=re(83620),Ze=re(73176);function ut(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",5),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.Oqu(Xt)}}function $e(dr,pn){if(1&dr&&(S.ynx(0),S.TgZ(1,"mat-form-field")(2,"mat-label"),S.SDv(3,2),S.qZA(),S.TgZ(4,"mat-select",3),S.YNc(5,ut,2,2,"mat-option",4),S.qZA()(),S.BQk()),2&dr){const Xt=S.oxw();S.xp6(5),S.Q6J("ngForOf",Xt.hours)}}function Ct(dr,pn){1&dr&&(S.TgZ(0,"span"),S._uU(1,":"),S.qZA())}function Ke(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",5),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.Oqu(Xt)}}function Wt(dr,pn){if(1&dr&&(S.ynx(0),S.YNc(1,Ct,2,0,"span",1),S.TgZ(2,"mat-form-field")(3,"mat-label"),S.SDv(4,6),S.qZA(),S.TgZ(5,"mat-select",7),S.YNc(6,Ke,2,2,"mat-option",4),S.qZA()(),S.BQk()),2&dr){const Xt=S.oxw();S.xp6(1),S.Q6J("ngIf",!Xt.hideHours),S.xp6(5),S.Q6J("ngForOf",Xt.minutes)}}function mr(dr,pn){1&dr&&(S.TgZ(0,"span"),S._uU(1,":"),S.qZA())}function nr(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",5),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.Oqu(Xt)}}function Kr(dr,pn){if(1&dr&&(S.ynx(0),S.YNc(1,mr,2,0,"span",1),S.TgZ(2,"mat-form-field")(3,"mat-label"),S.SDv(4,8),S.qZA(),S.TgZ(5,"mat-select",9),S.YNc(6,nr,2,2,"mat-option",4),S.qZA()(),S.BQk()),2&dr){const Xt=S.oxw();S.xp6(1),S.Q6J("ngIf",!Xt.hideMinutes),S.xp6(5),S.Q6J("ngForOf",Xt.seconds)}}function Pn(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",5),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.Oqu(Xt)}}function Kn(dr,pn){if(1&dr&&(S.ynx(0),S._UZ(1,"span"),S._uU(2,". "),S.TgZ(3,"mat-form-field")(4,"mat-select",10),S.YNc(5,Pn,2,2,"mat-option",4),S.qZA()(),S.BQk()),2&dr){const Xt=S.oxw();S.xp6(5),S.Q6J("ngForOf",Xt.hourTypes)}}const Mo=["minutesTab"],mo=["hourlyTab"],No=["dailyTab"],Di=["weeklyTab"],ci=["monthlyTab"],zn=["yearlyTab"],Wn=["advancedTab"];function an(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.Oqu(Xt)}}function lr(dr,pn){if(1&dr&&(S.TgZ(0,"div")(1,"span"),S.SDv(2,19),S.qZA(),S._UZ(3,"cron-time-picker",20),S.qZA()),2&dr){const Xt=S.oxw(2);S.xp6(3),S.Q6J("formGroup",Xt.allForm)("hideHours",!0)("hideMinutes",!0)("use24HourTime",Xt.options.use24HourTime)("hideSeconds",Xt.options.hideSeconds||!Xt.isCronFlavorQuartz)}}function Pr(dr,pn){if(1&dr){const Xt=S.EpF();S.TgZ(0,"mat-tab",9,10)(2,"div",11),S.NdJ("click",function(){S.CHM(Xt);const Zn=S.oxw();return S.KtG(Zn.allForm.controls.cronType.setValue("minutely"))}),S.TgZ(3,"div")(4,"span",12),S.SDv(5,13),S.qZA(),S.TgZ(6,"mat-form-field")(7,"mat-label"),S.SDv(8,14),S.qZA(),S.TgZ(9,"mat-select",15),S.YNc(10,an,2,2,"mat-option",16),S.qZA()()(),S.YNc(11,lr,4,5,"div",17),S.qZA()()}if(2&dr){const Xt=S.oxw();S.Q6J("formGroup",Xt.allForm),S.xp6(10),S.Q6J("ngForOf",Xt.minutes),S.xp6(1),S.Q6J("ngIf",Xt.isCronFlavorQuartz)}}function Mn(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.Oqu(Xt)}}function dn(dr,pn){if(1&dr){const Xt=S.EpF();S.TgZ(0,"mat-tab",21,22)(2,"div",11),S.NdJ("click",function(){S.CHM(Xt);const Zn=S.oxw();return S.KtG(Zn.allForm.controls.cronType.setValue("hourly"))}),S.TgZ(3,"div")(4,"span",12),S.SDv(5,23),S.qZA(),S.TgZ(6,"mat-form-field",24)(7,"mat-label"),S.SDv(8,25),S.qZA(),S.TgZ(9,"mat-select",26),S.YNc(10,Mn,2,2,"mat-option",16),S.qZA()()(),S.TgZ(11,"div")(12,"span"),S.SDv(13,27),S.qZA(),S._UZ(14,"cron-time-picker",28),S.qZA()()()}if(2&dr){const Xt=S.oxw();S.xp6(6),S.Q6J("formGroup",Xt.allForm),S.xp6(4),S.Q6J("ngForOf",Xt.hours),S.xp6(4),S.Q6J("formGroup",Xt.allForm)("hideHours",!0)("use24HourTime",Xt.options.use24HourTime)("hideSeconds",Xt.options.hideSeconds||!Xt.isCronFlavorQuartz)}}function sn(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Xt," ")}}function kn(dr,pn){if(1&dr){const Xt=S.EpF();S.TgZ(0,"mat-tab",29,30)(2,"div",11),S.NdJ("click",function(){S.CHM(Xt);const Zn=S.oxw();return S.KtG(Zn.allForm.controls.cronType.setValue("daily"))}),S.TgZ(3,"div",24)(4,"span",12),S.SDv(5,31),S.qZA(),S.TgZ(6,"mat-radio-group",32)(7,"mat-radio-button",33)(8,"mat-form-field")(9,"mat-label"),S.SDv(10,34),S.qZA(),S.TgZ(11,"mat-select",35),S.YNc(12,sn,2,2,"mat-option",16),S.qZA()()(),S.TgZ(13,"mat-radio-button",36)(14,"span"),S.SDv(15,37),S.qZA()()()(),S.TgZ(16,"div")(17,"span"),S.SDv(18,38),S.qZA(),S._UZ(19,"cron-time-picker",39),S.qZA()()()}if(2&dr){const Xt=S.oxw();S.xp6(3),S.Q6J("formGroup",Xt.allForm),S.xp6(4),S.Q6J("value",!1)("checked",!0),S.xp6(5),S.Q6J("ngForOf",Xt.selectOptions.monthDays),S.xp6(1),S.Q6J("value",!0),S.xp6(6),S.Q6J("formGroup",Xt.allForm)("use24HourTime",Xt.options.use24HourTime)("hideSeconds",Xt.options.hideSeconds||!Xt.isCronFlavorQuartz)}}function xo(dr,pn){if(1&dr){const Xt=S.EpF();S.TgZ(0,"mat-tab",40,41)(2,"div",11),S.NdJ("click",function(){S.CHM(Xt);const Zn=S.oxw();return S.KtG(Zn.allForm.controls.cronType.setValue("weekly"))}),S.TgZ(3,"div")(4,"span",12),S.SDv(5,42),S.qZA(),S.TgZ(6,"div",24)(7,"mat-checkbox",43),S.SDv(8,44),S.qZA(),S.TgZ(9,"mat-checkbox",45),S.SDv(10,46),S.qZA(),S.TgZ(11,"mat-checkbox",47),S.SDv(12,48),S.qZA(),S.TgZ(13,"mat-checkbox",49),S.SDv(14,50),S.qZA(),S.TgZ(15,"mat-checkbox",51),S.SDv(16,52),S.qZA(),S.TgZ(17,"mat-checkbox",53),S.SDv(18,54),S.qZA(),S.TgZ(19,"mat-checkbox",55),S.SDv(20,56),S.qZA()()(),S.TgZ(21,"div")(22,"span",12),S.SDv(23,57),S.qZA(),S._UZ(24,"cron-time-picker",39),S.qZA()()()}if(2&dr){const Xt=S.oxw();S.xp6(6),S.Q6J("formGroup",Xt.allForm),S.xp6(18),S.Q6J("formGroup",Xt.allForm)("use24HourTime",Xt.options.use24HourTime)("hideSeconds",Xt.options.hideSeconds||!Xt.isCronFlavorQuartz)}}function Vo(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(3);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthDayDisplay(Xt)," ")}}function aa(dr,pn){if(1&dr&&(S.ynx(0),S.TgZ(1,"mat-form-field")(2,"mat-label"),S.SDv(3,75),S.qZA(),S.TgZ(4,"mat-select",76),S.YNc(5,Vo,2,2,"mat-option",16),S.qZA()(),S.BQk()),2&dr){const Xt=S.oxw(2);S.xp6(5),S.Q6J("ngForOf",Xt.selectOptions.monthDaysWithLasts)}}function Fa(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(3);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthDayDisplay(Xt)," ")}}function Qr(dr,pn){if(1&dr&&(S.ynx(0),S.TgZ(1,"mat-form-field")(2,"mat-label"),S.SDv(3,77),S.qZA(),S.TgZ(4,"mat-select",76),S.YNc(5,Fa,2,2,"mat-option",16),S.qZA()(),S.BQk()),2&dr){const Xt=S.oxw(2);S.xp6(5),S.Q6J("ngForOf",Xt.selectOptions.monthDaysWithOutLasts)}}function ze(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Xt," ")}}function Xe(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(2);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthWeekDisplay(Xt)," ")}}function at(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(2);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.dayDisplay(Xt)," ")}}function gr(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit;S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Xt," ")}}function Pt(dr,pn){if(1&dr){const Xt=S.EpF();S.TgZ(0,"mat-tab",58,59)(2,"div",60),S.NdJ("click",function(){S.CHM(Xt);const Zn=S.oxw();return S.KtG(Zn.allForm.controls.cronType.setValue("monthly"))}),S.TgZ(3,"mat-radio-group",61)(4,"mat-radio-button",62),S.ynx(5),S.SDv(6,63),S.BQk(),S.YNc(7,aa,6,1,"ng-container",17),S.YNc(8,Qr,6,1,"ng-container",17),S.ynx(9),S.SDv(10,64),S.BQk(),S.TgZ(11,"mat-form-field")(12,"mat-label"),S.SDv(13,65),S.qZA(),S.TgZ(14,"mat-select",66),S.YNc(15,ze,2,2,"mat-option",16),S.qZA()()(),S.TgZ(16,"mat-radio-button",62),S.ynx(17),S.SDv(18,67),S.BQk(),S.TgZ(19,"mat-form-field")(20,"mat-label"),S.SDv(21,68),S.qZA(),S.TgZ(22,"mat-select",69),S.YNc(23,Xe,2,2,"mat-option",16),S.qZA()(),S.TgZ(24,"mat-form-field")(25,"mat-label"),S.SDv(26,70),S.qZA(),S.TgZ(27,"mat-select",71),S.YNc(28,at,2,2,"mat-option",16),S.qZA()(),S._uU(29," of every "),S.TgZ(30,"mat-form-field")(31,"mat-label"),S.SDv(32,72),S.qZA(),S.TgZ(33,"mat-select",73),S.YNc(34,gr,2,2,"mat-option",16),S.qZA()()()(),S.TgZ(35,"div")(36,"span"),S.SDv(37,74),S.qZA(),S._UZ(38,"cron-time-picker",39),S.qZA()()()}if(2&dr){const Xt=S.oxw();S.xp6(2),S.Q6J("formGroup",Xt.allForm),S.xp6(2),S.Q6J("value",!1)("ngClass",Xt.options.formRadioClass),S.xp6(3),S.Q6J("ngIf","quartz"===Xt.options.cronFlavor),S.xp6(1),S.Q6J("ngIf","standard"===Xt.options.cronFlavor),S.xp6(6),S.Q6J("ngClass",Xt.options.formSelectClass),S.xp6(1),S.Q6J("ngForOf",Xt.selectOptions.months),S.xp6(1),S.Q6J("value",!0)("ngClass",Xt.options.formRadioClass),S.xp6(6),S.Q6J("ngClass",Xt.options.formSelectClass),S.xp6(1),S.Q6J("ngForOf",Xt.selectOptions.monthWeeks),S.xp6(4),S.Q6J("ngClass",Xt.options.formSelectClass),S.xp6(1),S.Q6J("ngForOf",Xt.selectOptions.days),S.xp6(6),S.Q6J("ngForOf",Xt.selectOptions.months),S.xp6(4),S.Q6J("formGroup",Xt.allForm)("use24HourTime",Xt.options.use24HourTime)("hideSeconds",Xt.options.hideSeconds||!Xt.isCronFlavorQuartz)}}function mt(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(3);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthDayDisplay(Xt)," ")}}function Zt(dr,pn){if(1&dr&&(S.TgZ(0,"mat-form-field")(1,"mat-label"),S.SDv(2,97),S.qZA(),S.TgZ(3,"mat-select",98),S.YNc(4,mt,2,2,"mat-option",16),S.qZA()()),2&dr){const Xt=S.oxw(2);S.xp6(4),S.Q6J("ngForOf",Xt.selectOptions.monthDaysWithLasts)}}function ln(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(3);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthDayDisplay(Xt)," ")}}function no(dr,pn){if(1&dr&&(S.TgZ(0,"mat-form-field")(1,"mat-label"),S.SDv(2,99),S.qZA(),S.TgZ(3,"mat-select",98),S.YNc(4,ln,2,2,"mat-option",16),S.qZA()()),2&dr){const Xt=S.oxw(2);S.xp6(4),S.Q6J("ngForOf",Xt.selectOptions.monthDaysWithOutLasts)}}function oo(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(2);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthDisplay(Xt)," ")}}function Ki(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(2);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthWeekDisplay(Xt)," ")}}function li(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(2);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.dayDisplay(Xt)," ")}}function ts(dr,pn){if(1&dr&&(S.TgZ(0,"mat-option",18),S._uU(1),S.qZA()),2&dr){const Xt=pn.$implicit,Ft=S.oxw(2);S.Q6J("value",Xt),S.xp6(1),S.hij(" ",Ft.monthDisplay(Xt)," ")}}function Nt(dr,pn){if(1&dr&&(S.TgZ(0,"mat-tab",78,79)(2,"div",80)(3,"mat-radio-group",81)(4,"mat-radio-button",82),S.ynx(5),S.SDv(6,83),S.BQk(),S.YNc(7,Zt,5,1,"mat-form-field",17),S.YNc(8,no,5,1,"mat-form-field",17),S.ynx(9),S.SDv(10,84),S.BQk(),S.TgZ(11,"mat-form-field")(12,"mat-label"),S.SDv(13,85),S.qZA(),S.TgZ(14,"mat-select",86),S.YNc(15,oo,2,2,"mat-option",16),S.qZA()()(),S.TgZ(16,"mat-radio-button",87),S.ynx(17),S.SDv(18,88),S.BQk(),S.TgZ(19,"mat-form-field")(20,"mat-label"),S.SDv(21,89),S.qZA(),S.TgZ(22,"mat-select",90),S.YNc(23,Ki,2,2,"mat-option",16),S.qZA()(),S.TgZ(24,"mat-form-field")(25,"mat-label"),S.SDv(26,91),S.qZA(),S.TgZ(27,"mat-select",92),S.YNc(28,li,2,2,"mat-option",16),S.qZA()(),S.ynx(29),S.SDv(30,93),S.BQk(),S.TgZ(31,"mat-form-field")(32,"mat-label"),S.SDv(33,94),S.qZA(),S.TgZ(34,"mat-select",86),S.YNc(35,ts,2,2,"mat-option",16),S.qZA()()()(),S.TgZ(36,"div"),S.ynx(37),S.SDv(38,95),S.BQk(),S._UZ(39,"cron-time-picker",96),S.qZA()()()),2&dr){const Xt=S.oxw();S.xp6(2),S.Q6J("formGroup",Xt.allForm),S.xp6(2),S.Q6J("value",!1)("ngClass",Xt.options.formRadioClass),S.xp6(3),S.Q6J("ngIf","quartz"===Xt.options.cronFlavor),S.xp6(1),S.Q6J("ngIf","standard"===Xt.options.cronFlavor),S.xp6(7),S.Q6J("ngForOf",Xt.selectOptions.months),S.xp6(1),S.Q6J("ngClass",Xt.options.formRadioClass),S.xp6(7),S.Q6J("ngForOf",Xt.selectOptions.monthWeeks),S.xp6(5),S.Q6J("ngForOf",Xt.selectOptions.days),S.xp6(7),S.Q6J("ngForOf",Xt.selectOptions.months),S.xp6(4),S.Q6J("disabled",Xt.disabled)("formGroup",Xt.allForm)("use24HourTime",Xt.options.use24HourTime)("hideSeconds",Xt.options.hideSeconds||!Xt.isCronFlavorQuartz)}}function jt(dr,pn){if(1&dr&&(S.TgZ(0,"mat-tab",100,101)(2,"div",80)(3,"mat-form-field")(4,"mat-label"),S.SDv(5,102),S.qZA(),S._UZ(6,"input",103),S.qZA()()()),2&dr){const Xt=S.oxw();S.xp6(2),S.Q6J("formGroup",Xt.allForm)}}function*gt(dr,pn){for(let Xt=dr;Xt<=pn;Xt++)yield Xt}let Fr=(()=>{var dr;class pn{get hours(){return this.use24HourTime?[...gt(0,23)]:[...gt(0,12)]}constructor(Ft){this.parent=Ft,this.disabled=!1,this.use24HourTime=!0,this.hideHours=!1,this.hideMinutes=!1,this.hideSeconds=!0,this.minutes=[...gt(0,59)],this.seconds=[...gt(0,59)],this.hourTypes=["AM","PM"]}ngOnInit(){this.allForm=this.parent.control}}return(dr=pn).\u0275fac=function(Ft){return new(Ft||dr)(S.Y36(X.gN))},dr.\u0275cmp=S.Xpm({type:dr,selectors:[["cron-time-picker"]],inputs:{disabled:"disabled",use24HourTime:"use24HourTime",hideHours:"hideHours",hideMinutes:"hideMinutes",hideSeconds:"hideSeconds"},features:[S._Bn([])],decls:5,vars:5,consts:function(){let Xt,Ft,Zn;return Xt=$localize`Hour(s)`,Ft=$localize`Minute(s)`,Zn=$localize`Second(s)`,[[3,"formGroup"],[4,"ngIf"],Xt,["formControlName","hours"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],Ft,["formControlName","minutes"],Zn,["formControlName","seconds"],["formControlName","hourType"]]},template:function(Ft,Zn){1&Ft&&(S.ynx(0,0),S.YNc(1,$e,6,1,"ng-container",1),S.YNc(2,Wt,7,2,"ng-container",1),S.YNc(3,Kr,7,2,"ng-container",1),S.YNc(4,Kn,6,1,"ng-container",1),S.BQk()),2&Ft&&(S.Q6J("formGroup",Zn.allForm),S.xp6(1),S.Q6J("ngIf",!Zn.hideHours),S.xp6(1),S.Q6J("ngIf",!Zn.hideMinutes),S.xp6(1),S.Q6J("ngIf",!Zn.hideSeconds),S.xp6(1),S.Q6J("ngIf",!Zn.use24HourTime))},dependencies:[m.sg,m.O5,X.JJ,X.JL,X.sg,X.u,l.KE,l.hX,ke.gD,G.ey],encapsulation:2}),pn})();class tr{constructor(){this.cronFlavor="standard",this.defaultTime="00:00:00",this.hideAdvancedTab=!1,this.hideDailyTab=!1,this.hideHourlyTab=!1,this.hideMinutesTab=!1,this.hideMonthlyTab=!1,this.hideSeconds=!1,this.hideSpecificMonthWeekTab=!1,this.hideSpecificWeekDayTab=!1,this.hideWeeklyTab=!1,this.hideYearlyTab=!1,this.use24HourTime=!0}}const wt={SUN:$localize`Sunday`,MON:$localize`Monday`,TUE:$localize`Tuesday`,WED:$localize`Wednesday`,THU:$localize`Thursday`,FRI:$localize`Friday`,SAT:$localize`Saturday`},St={"#1":$localize`First`,"#2":$localize`Second`,"#3":$localize`Third`,"#4":$localize`Fourth`,"#5":$localize`Fifth`,L:$localize`Last`},vr={1:$localize`January`,2:$localize`February`,3:$localize`March`,4:$localize`April`,5:$localize`May`,6:$localize`June`,7:$localize`July`,8:$localize`August`,9:$localize`September`,10:$localize`October`,11:$localize`November`,12:$localize`December`},fn=/\d+ 0\/\d+ \* 1\/1 \* [\?\*] \*/,Ko=/\d+ \d+ 0\/\d+ 1\/1 \* [\?\*] \*/,Ro=/\d+ \d+ \d+ 1\/\d+ \* [\?\*] \*/,Ln=/\d+ \d+ \d+ [\?\*] \* MON-FRI \*/,yr=/\d+ \d+ \d+ [\?\*] \* (MON|TUE|WED|THU|FRI|SAT|SUN)(,(MON|TUE|WED|THU|FRI|SAT|SUN))* \*/,kr=/\d+ \d+ \d+ (\d+|L|LW|1W) 1\/\d+ [\?\*] \*/,or=/\d+ \d+ \d+ [\?\*] 1\/\d+ (MON|TUE|WED|THU|FRI|SAT|SUN)((#[1-5])|L) \*/,Tr=/\d+ \d+ \d+ (\d+|L|LW|1W) \d+ [\?\*] \*/,ht=/\d+ \d+ \d+ [\?\*] \d+ (MON|TUE|WED|THU|FRI|SAT|SUN)((#[1-5])|L) \*/,Lt={provide:X.JU,useExisting:(0,S.Gpc)(()=>Un),multi:!0};function Dr(dr){const pn=dr.split("/").map(Xt=>parseInt(Xt,10));return 1===pn.length?{val:pn[0],inc:0}:{val:pn[0],inc:pn[1]}}function*hn(dr,pn){for(let Xt=dr;Xt<=pn;Xt++)yield Xt}let Un=(()=>{var dr;class pn{get isCronFlavorQuartz(){return"quartz"===this.options.cronFlavor}get isCronFlavorStandard(){return"standard"===this.options.cronFlavor}get yearDefaultChar(){return"quartz"===this.options.cronFlavor?"*":""}get weekDayDefaultChar(){return"quartz"===this.options.cronFlavor?"?":"*"}get monthDayDefaultChar(){return"quartz"===this.options.cronFlavor?"?":"*"}constructor(Ft){this.fb=Ft,this.tabIndex=0,this.seconds=[...hn(0,59)],this.minutes=[...hn(0,59)],this.hours=[...hn(0,23)],this.disabled=!1,this.options=new tr,this.selectOptions=this.getSelectOptions(),this.touched=!1,this.allForm=this.fb.group({cronType:["unknown",X.kI.required],seconds:[0],minutes:[0],minutesPer:[0],hours:[this.getAmPmHour(0)],hoursPer:[0],hoursType:[this.getHourType(0)],days:[0],daysPer:[0],months:[0],monthsInc:[0],day:["1"],monthsWeek:["#1"],weekdaysOnly:[!1],specificWeekDay:[!1],specificMonthWeek:[!1],MON:[!0],TUE:[!0],WED:[!0],THU:[!0],FRI:[!0],SAT:[!0],SUN:[!0],expression:["0 0 0 0 0"]})}onTabChange(Ft){let Do;switch(Ft.tab){case this.minutesTab:Do="minutely";break;case this.hourlyTab:Do="hourly";break;case this.dailyTab:Do="daily";break;case this.weeklyTab:Do="weekly";break;case this.monthlyTab:Do="monthly";break;case this.yearlyTab:Do="yearly";break;case this.advancedTab:Do="unknown";break;default:throw new Error("Invalid tab selected")}this.allForm.controls.cronType.setValue(Do)}ngOnInit(){var Ft=this;return(0,O.Z)(function*(){Ft.formSub=Ft.allForm.valueChanges.pipe((0,Me.b)(50)).subscribe(Zn=>{Ft.markAsTouched();const Do=Ft.computeCron();Ft.onChange(Do)})})()}ngOnDestroy(){this.formSub.unsubscribe()}computeCron(){let Ft;switch(this.allForm.value.cronType){case"minutely":Ft=this.computeMinutesCron();break;case"hourly":Ft=this.computeHourlyCron(),this.tabIndex=1;break;case"daily":Ft=this.computeDailyCron(),this.tabIndex=2;break;case"weekly":Ft=this.computeWeeklyCron(),this.tabIndex=3;break;case"monthly":Ft=this.computeMonthlyCron(),this.tabIndex=4;break;case"yearly":Ft=this.computeYearlyCron(),this.tabIndex=5;break;case"unknown":Ft=this.computeAdvancedExpression(),this.tabIndex=6;break;default:throw Error($localize`Unknown cron type `+this.allForm.value.cronType)}return Ft}computeMinutesCron(){const Ft=this.allForm.value;return`${this.isCronFlavorQuartz?Ft.seconds:""} 0/${Ft.minutesPer} * 1/1 * ${this.weekDayDefaultChar} ${this.yearDefaultChar}`.trim()}computeHourlyCron(){const Ft=this.allForm.value;return`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} 0/${Ft.hoursPer} 1/1 * ${this.weekDayDefaultChar} ${this.yearDefaultChar}`.trim()}computeDailyCron(){return this.allForm.value.weekdaysOnly?this.computeEveryWeekdayCron():this.computeEveryDaysCron()}computeEveryDaysCron(){const Ft=this.allForm.value;return`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} 1/${Ft.daysPer} * ${this.weekDayDefaultChar} ${this.yearDefaultChar}`.trim()}computeEveryWeekdayCron(){const Ft=this.allForm.value;return`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} ${this.monthDayDefaultChar} * MON-FRI ${this.yearDefaultChar}`.trim()}computeWeeklyCron(){const Ft=this.allForm.value,Zn=this.selectOptions.days.reduce((Do,Jt)=>Ft[Jt]?Do.concat([Jt]):Do,[]).join(",")||"*";return`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} ${this.monthDayDefaultChar} * ${Zn} ${this.yearDefaultChar}`.trim()}computeMonthlyCron(){const Ft=this.allForm.value;return Ft.specificWeekDay?`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} ${this.monthDayDefaultChar} 1/${Ft.monthsInc} ${Ft.day}${Ft.monthsWeek} ${this.yearDefaultChar}`.trim():`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} ${Ft.days} 1/${Ft.monthsInc} ${this.weekDayDefaultChar} ${this.yearDefaultChar}`.trim()}computeYearlyCron(){const Ft=this.allForm.value;return Ft.specificMonthWeek?`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} ${this.monthDayDefaultChar} ${Ft.months} ${Ft.day}${Ft.monthsWeek} ${this.yearDefaultChar}`.trim():`${this.isCronFlavorQuartz?Ft.seconds:""} ${Ft.minutes} ${this.hourToCron(Ft.hours,Ft.hoursType)} ${Ft.day} ${Ft.months} ${this.weekDayDefaultChar} ${this.yearDefaultChar}`.trim()}computeAdvancedExpression(){return this.allForm.value.expression}dayDisplay(Ft){return wt[Ft]}monthWeekDisplay(Ft){return St[Ft]}monthDisplay(Ft){return vr[Ft]}monthDayDisplay(Ft){return"L"===Ft?$localize`Last Day`:"LW"===Ft?$localize`Last Weekday`:"1W"===Ft?$localize`First Weekday`:`${Ft}${this.getOrdinalSuffix(Ft)}`}getAmPmHour(Ft){return this.options.use24HourTime?Ft:(Ft+11)%12+1}getHourType(Ft){return this.options.use24HourTime?void 0:Ft>=12?"PM":"AM"}hourToCron(Ft,Zn){return this.options.use24HourTime?Ft:"AM"===Zn?12===Ft?0:Ft:12===Ft?12:Ft+12}handleModelChange(Ft){if(!this.cronIsValid(Ft)){if(this.isCronFlavorQuartz)throw new Error($localize`Invalid cron expression, there must be 6 or 7 segments`);if(this.isCronFlavorStandard)throw new Error($localize`Invalid cron expression, there must be 5 segments`)}this.allForm.controls.expression.setValue(Ft),5===Ft.split(" ").length&&this.isCronFlavorStandard&&(Ft=`0 ${Ft} *`);const Zn=Ft.split(" ");this.allForm.controls.seconds.setValue(parseInt(Zn[0],10),{emitEvent:!1});let Do=Dr(Zn[1]);this.allForm.controls.minutesPer.setValue(Do.inc,{emitEvent:!1}),this.allForm.controls.minutes.setValue(Do.val),Do=Dr(Zn[2]),this.allForm.controls.hoursPer.setValue(Do.inc),this.allForm.controls.hours.setValue(Do.val),this.allForm.controls.hoursType.setValue(this.getHourType(this.allForm.value.hours),{emitEvent:!1}),Do=Dr(Zn[3]),this.allForm.controls.days.setValue(Do.val,{emitEvent:!1}),this.allForm.controls.daysPer.setValue(Do.val,{emitEvent:!1}),Do=Dr(Zn[4]),this.allForm.controls.months.setValue(Do.val,{emitEvent:!1}),this.allForm.controls.monthsInc.setValue(Do.inc,{emitEvent:!1}),this.allForm.controls.day.setValue(Zn[5]),Zn[5].match("MON")?this.allForm.controls.MON.setValue(!0,{emitEvent:!1}):this.allForm.controls.MON.setValue(!1,{emitEvent:!1}),Zn[5].match("TUE")?this.allForm.controls.TUE.setValue(!0,{emitEvent:!1}):this.allForm.controls.TUE.setValue(!1,{emitEvent:!1}),Zn[5].match("WED")?this.allForm.controls.WED.setValue(!0,{emitEvent:!1}):this.allForm.controls.WED.setValue(!1,{emitEvent:!1}),Zn[5].match("THU")?this.allForm.controls.THU.setValue(!0,{emitEvent:!1}):this.allForm.controls.THU.setValue(!1,{emitEvent:!1}),Zn[5].match("FRI")?this.allForm.controls.FRI.setValue(!0,{emitEvent:!1}):this.allForm.controls.FRI.setValue(!1,{emitEvent:!1}),Zn[5].match("SAT")?this.allForm.controls.SAT.setValue(!0,{emitEvent:!1}):this.allForm.controls.SAT.setValue(!1,{emitEvent:!1}),Zn[5].match("SUN")?this.allForm.controls.SUN.setValue(!0,{emitEvent:!1}):this.allForm.controls.SUN.setValue(!1,{emitEvent:!1}),Ft.match(fn)?this.allForm.controls.cronType.setValue("minutely",{emitEvent:!1}):Ft.match(Ko)?this.allForm.controls.cronType.setValue("hourly",{emitEvent:!1}):Ft.match(Ro)?(this.allForm.controls.cronType.setValue("daily",{emitEvent:!1}),this.allForm.controls.weekdaysOnly.setValue(!1)):Ft.match(Ln)?(this.allForm.controls.cronType.setValue("daily",{emitEvent:!1}),this.allForm.controls.weekdaysOnly.setValue(!0)):Ft.match(yr)?this.allForm.controls.cronType.setValue("weekly",{emitEvent:!1}):Ft.match(kr)?(this.allForm.controls.cronType.setValue("monthly",{emitEvent:!1}),this.allForm.controls.specificWeekDay.setValue(!1)):Ft.match(or)?(this.allForm.controls.cronType.setValue("monthly",{emitEvent:!1}),this.allForm.controls.specificWeekDay.setValue(!0)):Ft.match(Tr)||Ft.match(ht)?(this.allForm.controls.cronType.setValue("yearly",{emitEvent:!1}),this.allForm.controls.specificMonthWeek.setValue(!1)):this.allForm.controls.cronType.setValue("unknown",{emitEvent:!1}),this.allForm.updateValueAndValidity({onlySelf:!0})}cronIsValid(Ft){if(Ft){const Zn=Ft.split(" ");return this.isCronFlavorQuartz&&(6===Zn.length||7===Zn.length)||this.isCronFlavorStandard&&5===Zn.length}return!1}getOrdinalSuffix(Ft){if(Ft.length>1&&"1"===Ft.charAt(Ft.length-2))return"th";switch(Ft.charAt(Ft.length-1)){case"1":return"st";case"2":return"nd";case"3":return"rd";default:return"th"}}getSelectOptions(){return{months:this.getRange(1,12),monthWeeks:["#1","#2","#3","#4","#5","L"],days:["MON","TUE","WED","THU","FRI","SAT","SUN"],minutes:this.getRange(0,59),fullMinutes:this.getRange(0,59),seconds:this.getRange(0,59),hours:this.getRange(1,23),monthDays:this.getRange(1,31),monthDaysWithLasts:["1W",...this.getRange(1,31).map(String),"LW","L"],monthDaysWithOutLasts:[...this.getRange(1,31).map(String)],hourTypes:["AM","PM"]}}getRange(Ft,Zn){return Array.apply(null,Array(Zn-Ft+1)).map((Jt,Jn)=>Jn+Ft)}writeValue(Ft){null!==Ft&&this.handleModelChange(Ft)}registerOnChange(Ft){this.onChange=Ft}registerOnTouched(Ft){this.onTouched=Ft}setDisabledState(Ft){this.disabled=Ft}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}}return(dr=pn).\u0275fac=function(Ft){return new(Ft||dr)(S.Y36(X.qu))},dr.\u0275cmp=S.Xpm({type:dr,selectors:[["cron-editor"]],viewQuery:function(Ft,Zn){if(1&Ft&&(S.Gf(Mo,5),S.Gf(mo,5),S.Gf(No,5),S.Gf(Di,5),S.Gf(ci,5),S.Gf(zn,5),S.Gf(Wn,5)),2&Ft){let Do;S.iGM(Do=S.CRH())&&(Zn.minutesTab=Do.first),S.iGM(Do=S.CRH())&&(Zn.hourlyTab=Do.first),S.iGM(Do=S.CRH())&&(Zn.dailyTab=Do.first),S.iGM(Do=S.CRH())&&(Zn.weeklyTab=Do.first),S.iGM(Do=S.CRH())&&(Zn.monthlyTab=Do.first),S.iGM(Do=S.CRH())&&(Zn.yearlyTab=Do.first),S.iGM(Do=S.CRH())&&(Zn.advancedTab=Do.first)}},inputs:{backgroundColor:"backgroundColor",color:"color",disabled:"disabled",options:"options"},features:[S._Bn([Lt])],decls:9,vars:10,consts:function(){let Xt,Ft,Zn,Do,Jt,Jn,Qn,Io,ri,Ka,Ei,ui,ns,nl,Bs,To,rs,el,gc,Qo,Ba,Et,Mr,Ao,oa,ba,Vi,hl,ul,Oc,Yl,Wc,Vd,Od,Ml,id,Ac,Ea,du,Js,ad,Ql,Yc,Qc,kc,zl,Xc,eu;return Xt=$localize`Minutely`,Ft=$localize`Hourly`,Zn=$localize`Daily`,Do=$localize`Weekly`,Jt=$localize`Monthly`,Jn=$localize`Yearly`,Qn=$localize`Advanced`,Io=$localize`Every `,ri=$localize`Minute(s)`,Ka=$localize`At time `,Ei=$localize`Every `,ui=$localize`Hour(s)`,ns=$localize`At time `,nl=$localize`Every `,Bs=$localize`Day(s)`,To=$localize`Week Day (MON-FRI) `,rs=$localize`At time `,el=$localize`Every`,gc=$localize`Monday`,Qo=$localize`Tuesday`,Ba=$localize`Wednesday`,Et=$localize`Thursday`,Mr=$localize`Friday`,Ao=$localize`Saturday`,oa=$localize`Sunday`,ba=$localize` At `,Vi=$localize`On the`,hl=$localize` of every `,ul=$localize`Month`,Oc=$localize`On the`,Yl=$localize`Week`,Wc=$localize`Day`,Vd=$localize`Month`,Od=$localize`At time `,Ml=$localize`Day`,id=$localize`Day`,Ac=$localize` On the `,Ea=$localize`:day of month: of `,du=$localize`Month`,Js=$localize` On the `,ad=$localize`Week`,Ql=$localize`Day`,Yc=$localize` of `,Qc=$localize`Month`,kc=$localize` At time `,zl=$localize`Day`,Xc=$localize`Day`,eu=$localize`Expression`,[[1,"cron-editor-main"],[1,"cron-editor-container",3,"backgroundColor","color","selectedIndex","selectedTabChange","selectedIndexChange"],["class","cron-editor-tab","label",Xt,3,"formGroup",4,"ngIf"],["class","cron-editor-tab","label",Ft,4,"ngIf"],["class","cron-editor-tab","label",Zn,4,"ngIf"],["class","cron-editor-tab","label",Do,4,"ngIf"],["class","cron-editor-tab","label",Jt,4,"ngIf"],["class","cron-editor-tab","label",Jn,4,"ngIf"],["class","cron-editor-tab","label",Qn,4,"ngIf"],["label",Xt,1,"cron-editor-tab",3,"formGroup"],["minutesTab",""],[1,"cron-editor-tab-content",3,"click"],[1,"cron-form-label"],Io,ri,["formControlName","minutesPer"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],Ka,[3,"formGroup","hideHours","hideMinutes","use24HourTime","hideSeconds"],["label",Ft,1,"cron-editor-tab"],["hourlyTab",""],Ei,[3,"formGroup"],ui,["formControlName","hoursPer"],ns,[3,"formGroup","hideHours","use24HourTime","hideSeconds"],["label",Zn,1,"cron-editor-tab"],["dailyTab",""],nl,["formControlName","weekdaysOnly",1,"cron-editor-radio-group"],["name","subTab",1,"cron-editor-radio-button",3,"value","checked"],Bs,["formControlName","daysPer"],["name","subTab",1,"cron-editor-radio-button",3,"value"],To,rs,[3,"formGroup","use24HourTime","hideSeconds"],["label",Do,1,"cron-editor-tab"],["weeklyTab",""],el,["formControlName","MON",1,"checkbox-margin"],gc,["formControlName","TUE",1,"checkbox-margin"],Qo,["formControlName","WED",1,"checkbox-margin"],Ba,["formControlName","THU",1,"checkbox-margin"],Et,["formControlName","FRI",1,"checkbox-margin"],Mr,["formControlName","SAT",1,"checkbox-margin"],Ao,["formControlName","SUN",1,"checkbox-margin"],oa,ba,["label",Jt,1,"cron-editor-tab"],["monthlyTab",""],[1,"cron-editor-tab-content",3,"formGroup","click"],["formControlName","specificWeekDay",1,"cron-editor-radio-group"],["name","monthly-radio",1,"cron-editor-radio-button",3,"value","ngClass"],Vi,hl,ul,["formControlName","monthsInc",1,"months-small",3,"ngClass"],Oc,Yl,["formControlName","monthsWeek",1,"day-order-in-month",3,"ngClass"],Wc,["formControlName","day",1,"week-days",3,"ngClass"],Vd,["formControlName","monthsInc",1,"months-small"],Od,Ml,["formControlName","days",1,"month-days"],id,["label",Jn,1,"cron-editor-tab"],["yearlyTab",""],[1,"cron-editor-tab-content",3,"formGroup"],["formControlName","specificMonthWeek",1,"cron-editor-radio-group"],["name","yearly-radio",1,"cron-editor-radio-button",3,"value","ngClass"],Ac,Ea,du,["formControlName","months",1,"months"],["name","yearly-radio","value","specificMonthWeek",1,"cron-editor-radio-button",3,"ngClass"],Js,ad,["formControlName","monthsWeek",1,"day-order-in-month"],Ql,["formControlName","day",1,"week-days"],Yc,Qc,kc,[3,"disabled","formGroup","use24HourTime","hideSeconds"],zl,["formControlName","day",1,"month-days"],Xc,["label",Qn,1,"cron-editor-tab"],["advancedTab",""],eu,["matInput","","type","text","formControlName","expression",1,"advanced-cron-editor-input"]]},template:function(Ft,Zn){1&Ft&&(S.TgZ(0,"section",0)(1,"mat-tab-group",1),S.NdJ("selectedTabChange",function(Jt){return Zn.onTabChange(Jt)})("selectedIndexChange",function(Jt){return Zn.tabIndex=Jt}),S.YNc(2,Pr,12,3,"mat-tab",2),S.YNc(3,dn,15,6,"mat-tab",3),S.YNc(4,kn,20,8,"mat-tab",4),S.YNc(5,xo,25,4,"mat-tab",5),S.YNc(6,Pt,39,17,"mat-tab",6),S.YNc(7,Nt,40,14,"mat-tab",7),S.YNc(8,jt,7,1,"mat-tab",8),S.qZA()()),2&Ft&&(S.xp6(1),S.Q6J("backgroundColor",Zn.backgroundColor)("color",Zn.color)("selectedIndex",Zn.tabIndex),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideMinutesTab),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideHourlyTab),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideDailyTab),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideWeeklyTab),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideMonthlyTab),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideYearlyTab),S.xp6(1),S.Q6J("ngIf",!Zn.options.hideAdvancedTab))},dependencies:[m.mk,m.sg,m.O5,X.Fj,X.JJ,X.JL,X.sg,X.u,me.uX,me.SP,l.KE,l.hX,ke.gD,G.ey,z.Nt,je,Ue,x.oG,Fr],styles:[".cron-editor-main[_ngcontent-%COMP%]{@include mat-elevation(1);}.cron-editor-tab-content[_ngcontent-%COMP%]{margin-top:24px;border-radius:8px}.cron-editor-main[_ngcontent-%COMP%]   .cron-editor-container[_ngcontent-%COMP%]   .cron-editor-radio[_ngcontent-%COMP%]{width:20px;display:inline-block}.cron-editor-main[_ngcontent-%COMP%]   .cron-editor-container[_ngcontent-%COMP%]   .cron-editor-select[_ngcontent-%COMP%], .cron-editor-main[_ngcontent-%COMP%]   .cron-editor-container[_ngcontent-%COMP%]   .cron-editor-input[_ngcontent-%COMP%], .cron-editor-main[_ngcontent-%COMP%]   .cron-editor-container[_ngcontent-%COMP%]   .cron-editor-checkbox[_ngcontent-%COMP%]{display:inline-block}.cron-editor-main[_ngcontent-%COMP%]   .cron-editor-container[_ngcontent-%COMP%]   .well-time-wrapper[_ngcontent-%COMP%]{padding-left:20px}.cron-editor-main[_ngcontent-%COMP%]   .cron-editor-container[_ngcontent-%COMP%]   .inline-block[_ngcontent-%COMP%]{display:inline-block}.nav-tabs[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer}.cron-editor-daily[_ngcontent-%COMP%]{display:flex}.cron-editor-dail-hours[_ngcontent-%COMP%]{align-self:center}.cron-editor-radio-group[_ngcontent-%COMP%]{flex-direction:column;margin:15px 0;display:inline-flex}.cron-editor-radio-button[_ngcontent-%COMP%]{margin:5px}.checkbox-margin[_ngcontent-%COMP%]{margin:0 10px}"]}),pn})(),Yn=(()=>{var dr;class pn{}return(dr=pn).\u0275fac=function(Ft){return new(Ft||dr)},dr.\u0275mod=S.oAB({type:dr}),dr.\u0275inj=S.cJS({imports:[m.ez,X.u5,X.UX,me.Nh,H.ie,ke.LD,z.c,Le,x.p9,Ze.N6]}),pn})()},95392:(oe,ue,re)=>{"use strict";re.d(ue,{Co:()=>ci,nu:()=>No});var O=re(86656),S=re(65879),m=re(56223),X=re(23680),x=re(64170),z=re(98525),H=re(65619),G=re(22096),D=re(52572),U=re(78645),R=re(94664),T=re(37398),N=re(27921),L=re(5177),Y=re(59773),ee=re(48180),te=re(99397),pe=re(32181),we=re(9473),Te=re(96814),ge=re(32296),Ce=re(75986),Oe=re(30617),je=re(55940),Ue=re(92596),Le=re(26385);const ke=["searchSelectInput"],me=["innerSelectSearch"];function l(zn,Wn){if(1&zn){const an=S.EpF();S.TgZ(0,"mat-checkbox",10),S.NdJ("change",function(Pr){S.CHM(an);const Mn=S.oxw();return S.KtG(Mn._emitSelectAllBooleanToParent(Pr.checked))}),S.qZA()}if(2&zn){const an=S.oxw();S.Q6J("color",null==an.matFormField?null:an.matFormField.color)("checked",an.toggleAllCheckboxChecked)("indeterminate",an.toggleAllCheckboxIndeterminate)("matTooltip",an.toggleAllCheckboxTooltipMessage)("matTooltipPosition",an.toggleAllCheckboxTooltipPosition)}}function Me(zn,Wn){1&zn&&S._UZ(0,"mat-spinner",11)}function Ze(zn,Wn){1&zn&&S.Hsn(0,1,["*ngIf","clearIcon; else defaultIcon"])}function ut(zn,Wn){if(1&zn&&(S.TgZ(0,"mat-icon",15),S._uU(1),S.qZA()),2&zn){const an=S.oxw(2);S.Q6J("svgIcon",an.closeSvgIcon),S.xp6(1),S.hij(" ",an.closeSvgIcon?null:an.closeIcon," ")}}function $e(zn,Wn){if(1&zn){const an=S.EpF();S.TgZ(0,"button",12),S.NdJ("click",function(){S.CHM(an);const Pr=S.oxw();return S.KtG(Pr._reset(!0))}),S.YNc(1,Ze,1,0,"ng-content",13),S.YNc(2,ut,2,2,"ng-template",null,14,S.W1O),S.qZA()}if(2&zn){const an=S.MAs(3),lr=S.oxw();S.xp6(1),S.Q6J("ngIf",lr.clearIcon)("ngIfElse",an)}}function Ct(zn,Wn){1&zn&&S.Hsn(0,2,["*ngIf","noEntriesFound; else defaultNoEntriesFound"])}function Ke(zn,Wn){if(1&zn&&S._uU(0),2&zn){const an=S.oxw(2);S.Oqu(an.noEntriesFoundLabel)}}function Wt(zn,Wn){if(1&zn&&(S.TgZ(0,"div",16),S.YNc(1,Ct,1,0,"ng-content",13),S.YNc(2,Ke,1,1,"ng-template",null,17,S.W1O),S.qZA()),2&zn){const an=S.MAs(3),lr=S.oxw();S.xp6(1),S.Q6J("ngIf",lr.noEntriesFound)("ngIfElse",an)}}const mr=[[["",8,"mat-select-search-custom-header-content"]],[["","ngxMatSelectSearchClear",""]],[["","ngxMatSelectNoEntriesFound",""]]],nr=function(zn,Wn){return{"mat-select-search-inner-multiple":zn,"mat-select-search-inner-toggle-all":Wn}},Kr=[".mat-select-search-custom-header-content","[ngxMatSelectSearchClear]","[ngxMatSelectNoEntriesFound]"];let Pn=(()=>{var zn;class Wn{}return zn=Wn,(0,O.Z)(Wn,"\u0275fac",function(lr){return new(lr||zn)}),(0,O.Z)(Wn,"\u0275dir",S.lG2({type:zn,selectors:[["","ngxMatSelectSearchClear",""]]})),Wn})();const Kn=["ariaLabel","clearSearchInput","closeIcon","closeSvgIcon","disableInitialFocus","disableScrollToActiveOnOptionsChanged","enableClearOnEscapePressed","hideClearSearchButton","noEntriesFoundLabel","placeholderLabel","preventHomeEndKeyPropagation","searching"],Mo=new S.OlP("mat-selectsearch-default-options");let mo=(()=>{var zn;class Wn{}return zn=Wn,(0,O.Z)(Wn,"\u0275fac",function(lr){return new(lr||zn)}),(0,O.Z)(Wn,"\u0275dir",S.lG2({type:zn,selectors:[["","ngxMatSelectNoEntriesFound",""]]})),Wn})(),No=(()=>{var zn;class Wn{get value(){return this._formControl.value}set _options(lr){this._options$.next(lr)}get _options(){return this._options$.getValue()}constructor(lr,Pr,Mn,dn,sn,kn){(0,O.Z)(this,"matSelect",void 0),(0,O.Z)(this,"changeDetectorRef",void 0),(0,O.Z)(this,"_viewportRuler",void 0),(0,O.Z)(this,"matOption",void 0),(0,O.Z)(this,"matFormField",void 0),(0,O.Z)(this,"placeholderLabel","Suche"),(0,O.Z)(this,"type","text"),(0,O.Z)(this,"closeIcon","close"),(0,O.Z)(this,"closeSvgIcon",void 0),(0,O.Z)(this,"noEntriesFoundLabel","Keine Optionen gefunden"),(0,O.Z)(this,"clearSearchInput",!0),(0,O.Z)(this,"searching",!1),(0,O.Z)(this,"disableInitialFocus",!1),(0,O.Z)(this,"enableClearOnEscapePressed",!1),(0,O.Z)(this,"preventHomeEndKeyPropagation",!1),(0,O.Z)(this,"disableScrollToActiveOnOptionsChanged",!1),(0,O.Z)(this,"ariaLabel","dropdown search"),(0,O.Z)(this,"showToggleAllCheckbox",!1),(0,O.Z)(this,"toggleAllCheckboxChecked",!1),(0,O.Z)(this,"toggleAllCheckboxIndeterminate",!1),(0,O.Z)(this,"toggleAllCheckboxTooltipMessage",""),(0,O.Z)(this,"toggleAllCheckboxTooltipPosition","below"),(0,O.Z)(this,"hideClearSearchButton",!1),(0,O.Z)(this,"alwaysRestoreSelectedOptionsMulti",!1),(0,O.Z)(this,"recreateValuesArray",!1),(0,O.Z)(this,"toggleAll",new S.vpe),(0,O.Z)(this,"searchSelectInput",void 0),(0,O.Z)(this,"innerSelectSearch",void 0),(0,O.Z)(this,"clearIcon",void 0),(0,O.Z)(this,"noEntriesFound",void 0),(0,O.Z)(this,"_lastExternalInputValue",void 0),(0,O.Z)(this,"onTouched",xo=>{}),(0,O.Z)(this,"_options$",new H.X(null)),(0,O.Z)(this,"optionsList$",this._options$.pipe((0,R.w)(xo=>xo?xo.changes.pipe((0,T.U)(Vo=>Vo.toArray()),(0,N.O)(xo.toArray())):(0,G.of)(null)))),(0,O.Z)(this,"optionsLength$",this.optionsList$.pipe((0,T.U)(xo=>xo?xo.length:0))),(0,O.Z)(this,"previousSelectedValues",void 0),(0,O.Z)(this,"_formControl",new m.NI("",{nonNullable:!0})),(0,O.Z)(this,"_showNoEntriesFound$",(0,D.a)([this._formControl.valueChanges,this.optionsLength$]).pipe((0,T.U)(([xo,Vo])=>!(!this.noEntriesFoundLabel||!xo||Vo!==this.getOptionsLengthOffset())))),(0,O.Z)(this,"_onDestroy",new U.x),(0,O.Z)(this,"activeDescendant",void 0),this.matSelect=lr,this.changeDetectorRef=Pr,this._viewportRuler=Mn,this.matOption=dn,this.matFormField=sn,this.applyDefaultOptions(kn)}applyDefaultOptions(lr){if(lr)for(const Pr of Kn)lr.hasOwnProperty(Pr)&&(this[Pr]=lr[Pr])}ngOnInit(){this.matOption?(this.matOption.disabled=!0,this.matOption._getHostElement().classList.add("contains-mat-select-search"),this.matOption._getHostElement().setAttribute("role","presentation")):console.error("<ngx-mat-select-search> must be placed inside a <mat-option> element"),this.matSelect.openedChange.pipe((0,L.g)(1),(0,Y.R)(this._onDestroy)).subscribe(lr=>{lr?(this.updateInputWidth(),this.disableInitialFocus||this._focus()):this.clearSearchInput&&this._reset()}),this.matSelect.openedChange.pipe((0,ee.q)(1),(0,R.w)(lr=>{this._options=this.matSelect.options;let Pr=this._options.toArray()[this.getOptionsLengthOffset()];return this._options.changes.pipe((0,te.b)(()=>{setTimeout(()=>{const Mn=this._options.toArray(),dn=Mn[this.getOptionsLengthOffset()],sn=this.matSelect._keyManager;sn&&this.matSelect.panelOpen&&dn&&((!Pr||!this.matSelect.compareWith(Pr.value,dn.value)||!sn.activeItem||!Mn.find(xo=>this.matSelect.compareWith(xo.value,sn.activeItem?.value)))&&sn.setActiveItem(this.getOptionsLengthOffset()),setTimeout(()=>{this.updateInputWidth()})),Pr=dn})}))})).pipe((0,Y.R)(this._onDestroy)).subscribe(),this._showNoEntriesFound$.pipe((0,Y.R)(this._onDestroy)).subscribe(lr=>{this.matOption&&(lr?this.matOption._getHostElement().classList.add("mat-select-search-no-entries-found"):this.matOption._getHostElement().classList.remove("mat-select-search-no-entries-found"))}),this._viewportRuler.change().pipe((0,Y.R)(this._onDestroy)).subscribe(()=>{this.matSelect.panelOpen&&this.updateInputWidth()}),this.initMultipleHandling(),this.optionsList$.pipe((0,Y.R)(this._onDestroy)).subscribe(()=>{this.changeDetectorRef.markForCheck()})}_emitSelectAllBooleanToParent(lr){this.toggleAll.emit(lr)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}_isToggleAllCheckboxVisible(){return this.matSelect.multiple&&this.showToggleAllCheckbox}_handleKeydown(lr){(lr.key&&1===lr.key.length||this.preventHomeEndKeyPropagation&&("Home"===lr.key||"End"===lr.key))&&lr.stopPropagation(),this.matSelect.multiple&&lr.key&&"Enter"===lr.key&&setTimeout(()=>this._focus()),this.enableClearOnEscapePressed&&"Escape"===lr.key&&this.value&&(this._reset(!0),lr.stopPropagation())}_handleKeyup(lr){if("ArrowUp"===lr.key||"ArrowDown"===lr.key){const Pr=this.matSelect._getAriaActiveDescendant(),Mn=this._options.toArray().findIndex(dn=>dn.id===Pr);-1!==Mn&&(this.unselectActiveDescendant(),this.activeDescendant=this._options.toArray()[Mn]._getHostElement(),this.activeDescendant.setAttribute("aria-selected","true"),this.searchSelectInput.nativeElement.setAttribute("aria-activedescendant",Pr))}}writeValue(lr){this._lastExternalInputValue=lr,this._formControl.setValue(lr),this.changeDetectorRef.markForCheck()}onBlur(){this.unselectActiveDescendant(),this.onTouched()}registerOnChange(lr){this._formControl.valueChanges.pipe((0,pe.h)(Pr=>Pr!==this._lastExternalInputValue),(0,te.b)(()=>this._lastExternalInputValue=void 0),(0,Y.R)(this._onDestroy)).subscribe(lr)}registerOnTouched(lr){this.onTouched=lr}_focus(){if(!this.searchSelectInput||!this.matSelect.panel)return;const lr=this.matSelect.panel.nativeElement,Pr=lr.scrollTop;this.searchSelectInput.nativeElement.focus(),lr.scrollTop=Pr}_reset(lr){this._formControl.setValue(""),lr&&this._focus()}initMultipleHandling(){this.matSelect.ngControl?(this.previousSelectedValues=this.matSelect.ngControl.value,this.matSelect.ngControl.valueChanges&&this.matSelect.ngControl.valueChanges.pipe((0,Y.R)(this._onDestroy)).subscribe(lr=>{let Pr=!1;if(this.matSelect.multiple&&(this.alwaysRestoreSelectedOptionsMulti||this._formControl.value&&this._formControl.value.length)&&this.previousSelectedValues&&Array.isArray(this.previousSelectedValues)){(!lr||!Array.isArray(lr))&&(lr=[]);const Mn=this.matSelect.options.map(dn=>dn.value);this.previousSelectedValues.forEach(dn=>{!lr.some(sn=>this.matSelect.compareWith(sn,dn))&&!Mn.some(sn=>this.matSelect.compareWith(sn,dn))&&(this.recreateValuesArray?lr=[...lr,dn]:lr.push(dn),Pr=!0)})}this.previousSelectedValues=lr,Pr&&this.matSelect._onChange(lr)})):this.matSelect.multiple&&console.error("the mat-select containing ngx-mat-select-search must have a ngModel or formControl directive when multiple=true")}updateInputWidth(){if(!this.innerSelectSearch||!this.innerSelectSearch.nativeElement)return;let lr=this.innerSelectSearch.nativeElement,Pr=null;for(;lr&&lr.parentElement;)if(lr=lr.parentElement,lr.classList.contains("mat-select-panel")){Pr=lr;break}Pr&&(this.innerSelectSearch.nativeElement.style.width=Pr.clientWidth+"px")}getOptionsLengthOffset(){return this.matOption?1:0}unselectActiveDescendant(){this.activeDescendant?.removeAttribute("aria-selected"),this.searchSelectInput.nativeElement.removeAttribute("aria-activedescendant")}}return zn=Wn,(0,O.Z)(Wn,"\u0275fac",function(lr){return new(lr||zn)(S.Y36(z.gD),S.Y36(S.sBO),S.Y36(we.rL),S.Y36(X.ey,8),S.Y36(x.KE,8),S.Y36(Mo,8))}),(0,O.Z)(Wn,"\u0275cmp",S.Xpm({type:zn,selectors:[["ngx-mat-select-search"]],contentQueries:function(lr,Pr,Mn){if(1&lr&&(S.Suo(Mn,Pn,5),S.Suo(Mn,mo,5)),2&lr){let dn;S.iGM(dn=S.CRH())&&(Pr.clearIcon=dn.first),S.iGM(dn=S.CRH())&&(Pr.noEntriesFound=dn.first)}},viewQuery:function(lr,Pr){if(1&lr&&(S.Gf(ke,7,S.SBq),S.Gf(me,7,S.SBq)),2&lr){let Mn;S.iGM(Mn=S.CRH())&&(Pr.searchSelectInput=Mn.first),S.iGM(Mn=S.CRH())&&(Pr.innerSelectSearch=Mn.first)}},inputs:{placeholderLabel:"placeholderLabel",type:"type",closeIcon:"closeIcon",closeSvgIcon:"closeSvgIcon",noEntriesFoundLabel:"noEntriesFoundLabel",clearSearchInput:"clearSearchInput",searching:"searching",disableInitialFocus:"disableInitialFocus",enableClearOnEscapePressed:"enableClearOnEscapePressed",preventHomeEndKeyPropagation:"preventHomeEndKeyPropagation",disableScrollToActiveOnOptionsChanged:"disableScrollToActiveOnOptionsChanged",ariaLabel:"ariaLabel",showToggleAllCheckbox:"showToggleAllCheckbox",toggleAllCheckboxChecked:"toggleAllCheckboxChecked",toggleAllCheckboxIndeterminate:"toggleAllCheckboxIndeterminate",toggleAllCheckboxTooltipMessage:"toggleAllCheckboxTooltipMessage",toggleAllCheckboxTooltipPosition:"toggleAllCheckboxTooltipPosition",hideClearSearchButton:"hideClearSearchButton",alwaysRestoreSelectedOptionsMulti:"alwaysRestoreSelectedOptionsMulti",recreateValuesArray:"recreateValuesArray"},outputs:{toggleAll:"toggleAll"},features:[S._Bn([{provide:m.JU,useExisting:(0,S.Gpc)(()=>zn),multi:!0}])],ngContentSelectors:Kr,decls:13,vars:14,consts:[["matInput","",1,"mat-select-search-input","mat-select-search-hidden"],[1,"mat-select-search-inner","mat-typography","mat-datepicker-content","mat-tab-header",3,"ngClass"],["innerSelectSearch",""],[1,"mat-select-search-inner-row"],["class","mat-select-search-toggle-all-checkbox","matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change",4,"ngIf"],["autocomplete","off",1,"mat-select-search-input",3,"type","formControl","placeholder","keydown","keyup","blur"],["searchSelectInput",""],["class","mat-select-search-spinner","diameter","16",4,"ngIf"],["mat-icon-button","","aria-label","Clear","class","mat-select-search-clear",3,"click",4,"ngIf"],["class","mat-select-search-no-entries-found",4,"ngIf"],["matTooltipClass","ngx-mat-select-search-toggle-all-tooltip",1,"mat-select-search-toggle-all-checkbox",3,"color","checked","indeterminate","matTooltip","matTooltipPosition","change"],["diameter","16",1,"mat-select-search-spinner"],["mat-icon-button","","aria-label","Clear",1,"mat-select-search-clear",3,"click"],[4,"ngIf","ngIfElse"],["defaultIcon",""],[3,"svgIcon"],[1,"mat-select-search-no-entries-found"],["defaultNoEntriesFound",""]],template:function(lr,Pr){1&lr&&(S.F$t(mr),S._UZ(0,"input",0),S.TgZ(1,"div",1,2)(3,"div",3),S.YNc(4,l,1,5,"mat-checkbox",4),S.TgZ(5,"input",5,6),S.NdJ("keydown",function(dn){return Pr._handleKeydown(dn)})("keyup",function(dn){return Pr._handleKeyup(dn)})("blur",function(){return Pr.onBlur()}),S.qZA(),S.YNc(7,Me,1,0,"mat-spinner",7),S.YNc(8,$e,4,2,"button",8),S.Hsn(9),S.qZA(),S._UZ(10,"mat-divider"),S.qZA(),S.YNc(11,Wt,4,2,"div",9),S.ALo(12,"async")),2&lr&&(S.xp6(1),S.Q6J("ngClass",S.WLB(11,nr,Pr.matSelect.multiple,Pr._isToggleAllCheckboxVisible())),S.xp6(3),S.Q6J("ngIf",Pr._isToggleAllCheckboxVisible()),S.xp6(1),S.Q6J("type",Pr.type)("formControl",Pr._formControl)("placeholder",Pr.placeholderLabel),S.uIk("aria-label",Pr.ariaLabel),S.xp6(2),S.Q6J("ngIf",Pr.searching),S.xp6(1),S.Q6J("ngIf",!Pr.hideClearSearchButton&&Pr.value&&!Pr.searching),S.xp6(3),S.Q6J("ngIf",S.lcZ(12,9,Pr._showNoEntriesFound$)))},dependencies:[Te.mk,Te.O5,m.Fj,m.JJ,m.oH,ge.RK,Ce.oG,Oe.Hw,je.Ou,Ue.gM,Le.d,Te.Ov],styles:[".mat-select-search-hidden[_ngcontent-%COMP%]{visibility:hidden}.mat-select-search-inner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;z-index:100;font-size:inherit;box-shadow:none;background-color:var(--mat-select-panel-background-color)}.mat-select-search-inner.mat-select-search-inner-multiple.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-inner-row[_ngcontent-%COMP%]{display:flex;align-items:center}.mat-select-search-input[_ngcontent-%COMP%]{box-sizing:border-box;width:100%;border:none;font-family:inherit;font-size:inherit;color:currentColor;outline:none;background-color:var(--mat-select-panel-background-color);padding:0 44px 0 16px;height:calc(3em - 1px);line-height:calc(3em - 1px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-right:16px;padding-left:44px}.mat-select-search-input[_ngcontent-%COMP%]::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mat-select-search-inner-toggle-all[_ngcontent-%COMP%]   .mat-select-search-input[_ngcontent-%COMP%]{padding-left:5px}.mat-select-search-no-entries-found[_ngcontent-%COMP%]{padding-top:8px}.mat-select-search-clear[_ngcontent-%COMP%]{position:absolute;right:4px;top:0}[dir=rtl][_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-clear[_ngcontent-%COMP%]{right:auto;left:4px}.mat-select-search-spinner[_ngcontent-%COMP%]{position:absolute;right:16px;top:calc(50% - 8px)}[dir=rtl][_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-spinner[_ngcontent-%COMP%]{right:auto;left:16px}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search{position:sticky;top:-8px;z-index:1;opacity:1;margin-top:-8px;pointer-events:all}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mat-icon{margin-right:0;margin-left:0}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search mat-pseudo-checkbox{display:none}  .mat-mdc-option[aria-disabled=true].contains-mat-select-search .mdc-list-item__primary-text{opacity:1}.mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:5px}[dir=rtl][_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .mat-select-search-toggle-all-checkbox[_ngcontent-%COMP%]{padding-left:0;padding-right:5px}"],changeDetection:0})),Wn})(),ci=(()=>{var zn;class Wn{}return zn=Wn,(0,O.Z)(Wn,"\u0275fac",function(lr){return new(lr||zn)}),(0,O.Z)(Wn,"\u0275mod",S.oAB({type:zn})),(0,O.Z)(Wn,"\u0275inj",S.cJS({imports:[Te.ez,m.UX,ge.ot,Ce.p9,Oe.Ps,je.Cq,Ue.AV,Le.t]})),Wn})()}}]);