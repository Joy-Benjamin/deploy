(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[8847],{48847:function(module){var O;typeof self<"u"&&self,O=function(){return function(M){var S={};function O(I){if(S[I])return S[I].exports;var b=S[I]={i:I,l:!1,exports:{}};return M[I].call(b.exports,b,b.exports,O),b.l=!0,b.exports}return O.m=M,O.c=S,O.d=function(I,b,t){O.o(I,b)||Object.defineProperty(I,b,{configurable:!1,enumerable:!0,get:t})},O.n=function(I){var b=I&&I.__esModule?function(){return I.default}:function(){return I};return O.d(b,"a",b),b},O.o=function(I,b){return Object.prototype.hasOwnProperty.call(I,b)},O.p="",O(O.s=1)}([function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){t.defaults={attributes:[["allowColumnReordering",!0],["allowColumnResize",!0],["allowColumnResizeFromCell",!1],["allowFreezingRows",!1],["allowFreezingColumns",!1],["allowMovingSelection",!0],["allowRowHeaderResize",!0],["allowRowReordering",!1],["allowRowResize",!0],["allowRowResizeFromCell",!1],["allowSorting",!0],["autoGenerateSchema",!1],["autoResizeColumns",!1],["borderDragBehavior","none"],["borderResizeZone",10],["clearSettingsOptionText","Clear saved settings"],["columnHeaderClickBehavior","sort"],["columnSelectorHiddenText","&nbsp;&nbsp;&nbsp;"],["columnSelectorText","Add/Remove columns"],["columnSelectorVisibleText","\u2713"],["contextHoverScrollAmount",2],["contextHoverScrollRateMs",5],["copyHeadersOnSelectAll",!0],["copyText","Copy"],["debug",!1],["editable",!0],["ellipsisText","..."],["filterOptionText","Filter %s"],["filterTextPrefix","(filtered) "],["globalRowResize",!1],["hideColumnText","Hide %s"],["maxAutoCompleteItems",200],["multiLine",!1],["name",""],["pageUpDownOverlap",1],["pasteText","Paste"],["persistantSelectionMode",!1],["removeFilterOptionText","Remove filter on %s"],["reorderDeadZone",3],["resizeScrollZone",20],["rowGrabZoneSize",5],["saveAppearance",!0],["scrollAnimationPPSThreshold",.75],["scrollPointerLock",!1],["scrollRepeatRate",75],["selectionFollowsActiveCell",!1],["selectionHandleBehavior","none"],["selectionMode","cell"],["selectionScrollIncrement",20],["selectionScrollZone",20],["showClearSettingsOption",!0],["showColumnHeaders",!0],["showColumnSelector",!0],["showCopy",!1],["showFilter",!0],["showNewRow",!1],["showOrderByOption",!0],["showOrderByOptionTextAsc","Order by %s ascending"],["showOrderByOptionTextDesc","Order by %s descending"],["showPaste",!1],["showPerformance",!1],["showRowHeaders",!0],["showRowNumbers",!0],["singleSelectionMode",!1],["snapToRow",!1],["touchContextMenuTimeMs",800],["touchDeadZone",3],["touchEasingMethod","easeOutQuad"],["touchReleaseAcceleration",1e3],["touchReleaseAnimationDurationMs",2e3],["touchScrollZone",20],["touchSelectHandleZone",20],["touchZoomSensitivity",.005],["touchZoomMin",.5],["touchZoomMax",1.75],["maxPixelRatio",2],["tree",!1],["treeHorizontalScroll",!1]],styles:[["activeCellBackgroundColor","rgba(255, 255, 255, 1)"],["activeCellBorderColor","rgba(110, 168, 255, 1)"],["activeCellBorderWidth",1],["activeCellColor","rgba(0, 0, 0, 1)"],["activeCellFont","16px sans-serif"],["activeCellHoverBackgroundColor","rgba(255, 255, 255, 1)"],["activeCellHorizontalAlignment","left"],["activeCellHoverColor","rgba(0, 0, 0, 1)"],["activeCellOverlayBorderColor","rgba(66, 133, 244, 1)"],["activeCellOverlayBorderWidth",1],["activeCellPaddingBottom",5],["activeCellPaddingLeft",5],["activeCellPaddingRight",5],["activeCellPaddingTop",5],["activeCellSelectedBackgroundColor","rgba(236, 243, 255, 1)"],["activeCellSelectedColor","rgba(0, 0, 0, 1)"],["activeCellVerticalAlignment","center"],["activeColumnHeaderCellBackgroundColor","rgba(225, 225, 225, 1)"],["activeColumnHeaderCellColor","rgba(0, 0, 0, 1)"],["activeRowHeaderCellBackgroundColor","rgba(225, 225, 225, 1)"],["activeRowHeaderCellColor","rgba(0, 0, 0, 1)"],["autocompleteBottomMargin",60],["autosizeHeaderCellPadding",8],["autosizePadding",5],["cellAutoResizePadding",13],["cellBackgroundColor","rgba(255, 255, 255, 1)"],["cellBorderColor","rgba(195, 199, 202, 1)"],["cellBorderWidth",1],["cellColor","rgba(0, 0, 0, 1)"],["cellFont","16px sans-serif"],["cellGridHeight",250],["cellHeight",24],["cellHeightWithChildGrid",150],["cellHorizontalAlignment","left"],["cellHoverBackgroundColor","rgba(255, 255, 255, 1)"],["cellHoverColor","rgba(0, 0, 0, 1)"],["cellPaddingBottom",5],["cellPaddingLeft",5],["cellPaddingRight",5],["cellPaddingTop",5],["cellSelectedBackgroundColor","rgba(236, 243, 255, 1)"],["cellSelectedColor","rgba(0, 0, 0, 1)"],["cellVerticalAlignment","center"],["cellWidth",250],["cellWidthWithChildGrid",250],["cellWhiteSpace","nowrap"],["cellLineHeight",1],["cellLineSpacing",3],["childContextMenuArrowColor","rgba(43, 48, 43, 1)"],["childContextMenuArrowHTML","&#x25BA;"],["childContextMenuMarginLeft",-11],["childContextMenuMarginTop",-6],["columnHeaderCellBackgroundColor","rgba(240, 240, 240, 1)"],["columnHeaderCellBorderColor","rgba(172, 172, 172, 1)"],["columnHeaderCellBorderWidth",1],["columnHeaderCellCapBackgroundColor","rgba(240, 240, 240, 1)"],["columnHeaderCellCapBorderColor","rgba(172, 172, 172, 1)"],["columnHeaderCellCapBorderWidth",1],["columnHeaderCellColor","rgba(50, 50, 50, 1)"],["columnHeaderCellFont","16px sans-serif"],["columnHeaderCellHeight",25],["columnHeaderCellHorizontalAlignment","left"],["columnHeaderCellHoverBackgroundColor","rgba(235, 235, 235, 1)"],["columnHeaderCellHoverColor","rgba(0, 0, 0, 1)"],["columnHeaderCellPaddingBottom",5],["columnHeaderCellPaddingLeft",5],["columnHeaderCellPaddingRight",5],["columnHeaderCellPaddingTop",5],["columnHeaderCellVerticalAlignment","center"],["columnHeaderOrderByArrowBorderColor","rgba(195, 199, 202, 1)"],["columnHeaderOrderByArrowBorderWidth",1],["columnHeaderOrderByArrowColor","rgba(155, 155, 155, 1)"],["columnHeaderOrderByArrowHeight",8],["columnHeaderOrderByArrowMarginLeft",0],["columnHeaderOrderByArrowMarginRight",5],["columnHeaderOrderByArrowMarginTop",6],["columnHeaderOrderByArrowWidth",13],["contextFilterButtonBorder","solid 1px rgba(158, 163, 169, 1)"],["contextFilterButtonBorderRadius","3px"],["contextFilterButtonHTML","&#x25BC;"],["contextFilterInputBackground","rgba(255,255,255,1)"],["contextFilterInputBorder","solid 1px rgba(158, 163, 169, 1)"],["contextFilterInputBorderRadius","0"],["contextFilterInputColor","rgba(0,0,0,1)"],["contextFilterInputFontFamily","sans-serif"],["contextFilterInputFontSize","14px"],["contextFilterInvalidRegExpBackground","rgba(180, 6, 1, 1)"],["contextFilterInvalidRegExpColor","rgba(255, 255, 255, 1)"],["contextMenuArrowColor","rgba(43, 48, 43, 1)"],["contextMenuArrowDownHTML","&#x25BC;"],["contextMenuArrowUpHTML","&#x25B2;"],["contextMenuBackground","rgba(240, 240, 240, 1)"],["contextMenuBorder","solid 1px rgba(158, 163, 169, 1)"],["contextMenuBorderRadius","3px"],["contextMenuChildArrowFontSize","12px"],["contextMenuColor","rgba(43, 48, 43, 1)"],["contextMenuCursor","default"],["contextMenuFilterButtonFontFamily","sans-serif"],["contextMenuFilterButtonFontSize","10px"],["contextMenuFilterInvalidExpresion","rgba(237, 155, 156, 1)"],["contextMenuFontFamily","sans-serif"],["contextMenuFontSize","16px"],["contextMenuHoverBackground","rgba(182, 205, 250, 1)"],["contextMenuHoverColor","rgba(43, 48, 153, 1)"],["contextMenuItemBorderRadius","3px"],["contextMenuItemMargin","2px"],["contextMenuLabelDisplay","inline-block"],["contextMenuLabelMargin","0 3px 0 0"],["contextMenuLabelMaxWidth","700px"],["contextMenuLabelMinWidth","75px"],["contextMenuMarginLeft",3],["contextMenuMarginTop",-3],["contextMenuOpacity","0.98"],["contextMenuPadding","2px"],["contextMenuWindowMargin",30],["contextMenuZIndex",1e4],["cornerCellBackgroundColor","rgba(240, 240, 240, 1)"],["cornerCellBorderColor","rgba(202, 202, 202, 1)"],["debugBackgroundColor","rgba(0, 0, 0, .0)"],["debugColor","rgba(255, 15, 24, 1)"],["debugEntitiesColor","rgba(76, 231, 239, 1.00)"],["debugFont","11px sans-serif"],["debugPerfChartBackground","rgba(29, 25, 26, 1.00)"],["debugPerfChartTextColor","rgba(255, 255, 255, 0.8)"],["debugPerformanceColor","rgba(252, 255, 37, 1.00)"],["debugScrollHeightColor","rgba(248, 33, 103, 1.00)"],["debugScrollWidthColor","rgba(66, 255, 27, 1.00)"],["debugTouchPPSXColor","rgba(246, 102, 24, 1.00)"],["debugTouchPPSYColor","rgba(186, 0, 255, 1.00)"],["display","inline-block"],["editCellBackgroundColor","white"],["editCellBorder","solid 1px rgba(110, 168, 255, 1)"],["editCellBoxShadow","0 2px 5px rgba(0,0,0,0.4)"],["editCellColor","black"],["editCellFontFamily","sans-serif"],["editCellFontSize","16px"],["editCellPaddingLeft",4],["editCellZIndex",1e4],["frozenMarkerHoverColor","rgba(236, 243, 255, 1)"],["frozenMarkerHoverBorderColor","rgba(110, 168, 255, 1)"],["frozenMarkerActiveColor","rgba(236, 243, 255, 1)"],["frozenMarkerActiveBorderColor","rgba(110, 168, 255, 1)"],["frozenMarkerColor","rgba(222, 222, 222, 1)"],["frozenMarkerBorderColor","rgba(168, 168, 168, 1)"],["frozenMarkerBorderWidth",1],["frozenMarkerWidth",2],["gridBackgroundColor","rgba(240, 240, 240, 1)"],["gridBorderCollapse","collapse"],["gridBorderColor","rgba(202, 202, 202, 1)"],["gridBorderWidth",1],["height","auto"],["maxHeight","inherit"],["maxWidth","inherit"],["minColumnWidth",45],["minHeight","inherit"],["minRowHeight",24],["minWidth","inherit"],["mobileContextMenuMargin",10],["mobileEditInputHeight",30],["mobileEditFontFamily","sans-serif"],["mobileEditFontSize","16px"],["moveOverlayBorderWidth",1],["moveOverlayBorderColor","rgba(66, 133, 244, 1)"],["moveOverlayBorderSegments","12, 7"],["name","default"],["overflowY","auto"],["overflowX","auto"],["reorderMarkerBackgroundColor","rgba(0, 0, 0, 0.1)"],["reorderMarkerBorderColor","rgba(0, 0, 0, 0.2)"],["reorderMarkerBorderWidth",1.25],["reorderMarkerIndexBorderColor","rgba(66, 133, 244, 1)"],["reorderMarkerIndexBorderWidth",2.75],["rowHeaderCellBackgroundColor","rgba(240, 240, 240, 1)"],["rowHeaderCellBorderColor","rgba(200, 200, 200, 1)"],["rowHeaderCellBorderWidth",1],["rowHeaderCellColor","rgba(50, 50, 50, 1)"],["rowHeaderCellFont","16px sans-serif"],["rowHeaderCellHeight",25],["rowHeaderCellHorizontalAlignment","left"],["rowHeaderCellHoverBackgroundColor","rgba(235, 235, 235, 1)"],["rowHeaderCellHoverColor","rgba(0, 0, 0, 1)"],["rowHeaderCellPaddingBottom",5],["rowHeaderCellPaddingLeft",5],["rowHeaderCellPaddingRight",5],["rowHeaderCellPaddingTop",5],["rowHeaderCellSelectedBackgroundColor","rgba(217, 217, 217, 1)"],["rowHeaderCellSelectedColor","rgba(50, 50, 50, 1)"],["rowHeaderCellVerticalAlignment","center"],["rowHeaderCellWidth",57],["scrollBarActiveColor","rgba(125, 125, 125, 1)"],["scrollBarBackgroundColor","rgba(240, 240, 240, 1)"],["scrollBarBorderColor","rgba(202, 202, 202, 1)"],["scrollBarBorderWidth",.5],["scrollBarBoxBorderRadius",4.125],["scrollBarBoxColor","rgba(192, 192, 192, 1)"],["scrollBarBoxMargin",2],["scrollBarBoxMinSize",15],["scrollBarBoxWidth",8],["scrollBarCornerBackgroundColor","rgba(240, 240, 240, 1)"],["scrollBarCornerBorderColor","rgba(202, 202, 202, 1)"],["scrollBarWidth",11],["selectionHandleBorderColor","rgba(255, 255, 255, 1)"],["selectionHandleBorderWidth",1.5],["selectionHandleColor","rgba(66, 133, 244, 1)"],["selectionHandleSize",8],["selectionHandleType","square"],["selectionOverlayBorderColor","rgba(66, 133, 244, 1)"],["selectionOverlayBorderWidth",1],["treeArrowBorderColor","rgba(195, 199, 202, 1)"],["treeArrowBorderWidth",1],["treeArrowClickRadius",5],["treeArrowColor","rgba(155, 155, 155, 1)"],["treeArrowHeight",8],["treeArrowMarginLeft",0],["treeArrowMarginRight",5],["treeArrowMarginTop",6],["treeArrowWidth",13],["treeGridHeight",250],["width","auto"]]}}}.apply(S,[]))&&(M.exports=b)},function(module,exports,__nested_webpack_require_15748__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_15748__(2),__nested_webpack_require_15748__(0),__nested_webpack_require_15748__(3),__nested_webpack_require_15748__(4),__nested_webpack_require_15748__(5),__nested_webpack_require_15748__(6),__nested_webpack_require_15748__(7),__nested_webpack_require_15748__(8),__nested_webpack_require_15748__(9)],__WEBPACK_AMD_DEFINE_RESULT__=function context(component){"use strict";component=component();var modules=Array.prototype.slice.call(arguments);function Grid(args){args=args||{};var self={};return self.isComponent=void 0===args.component,self.isChildGrid=args.parentNode&&/canvas-datagrid-(cell|tree)/.test(args.parentNode.nodeType),self.intf=self.isChildGrid?{}:self.isComponent?eval("Reflect.construct(HTMLElement, [], new.target)"):document.createElement("canvas"),self.args=args,self.intf.args=args,self.applyComponentStyle=component.applyComponentStyle,self.hyphenateProperty=component.hyphenateProperty,self.dehyphenateProperty=component.dehyphenateProperty,self.createGrid=function M(S){return S.component=!1,new Grid(S)},modules.forEach(function(M){M(self)}),self.isChildGrid?(self.shadowRoot=args.parentNode.shadowRoot,self.parentNode=args.parentNode):(self.shadowRoot=self.intf.attachShadow({mode:"open"}),self.parentNode=self.shadowRoot),self.init(),self.intf}return window.HTMLElement&&(Grid.prototype=Object.create(window.HTMLElement.prototype)),window.customElements&&(Grid.observedAttributes=component.getObservableAttributes(),Grid.prototype.disconnectedCallback=component.disconnectedCallback,Grid.prototype.attributeChangedCallback=component.attributeChangedCallback,Grid.prototype.connectedCallback=component.connectedCallback,Grid.prototype.adoptedCallback=component.adoptedCallback,window.customElements.define("canvas-datagrid",Grid)),window&&!window.canvasDatagrid&&!window.require&&(window.canvasDatagrid=function(M){return new Grid(M)}),module.exports=function M(S){S=S||{};var O,I=["style","formatters","sorters","filters","treeGridAttributes","cellGridAttributes","data","schema"];return window.customElements?(O=document.createElement("canvas-datagrid"),Object.keys(S).forEach(function(b){if("data"!==b&&"parentNode"!==b){if(-1!==I.indexOf(b))return void I.forEach(function(t){void 0===S[t]||t!==b||(-1!==["formatters","sorters","filters"].indexOf(b)?"object"==typeof S[t]&&null!==S[t]&&Object.keys(S[t]).forEach(function(c){O[t][c]=S[t][c]}):O[t]=S[t])});O.attributes[b]=S[b]}}),S.data&&(O.data=S.data),S.parentNode&&S.parentNode.appendChild(O),O):(S.component=!1,O=new Grid(S),S.parentNode&&S.parentNode.appendChild&&S.parentNode.appendChild(O),O)},module.exports}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__nested_webpack_require_20907__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_ARRAY__=[__nested_webpack_require_20907__(0)],__WEBPACK_AMD_DEFINE_RESULT__=function(defaults){"use strict";return function(){var typeMap,component={};function getDefaultItem(M,S){var O={};return defaults(O),O.defaults[M].filter(function(b){return b[0].toLowerCase()===S.toLowerCase()||component.hyphenateProperty(b[0])===S.toLowerCase()||component.hyphenateProperty(b[0],!0)===S.toLowerCase()})[0]}return component.dehyphenateProperty=function(S){S=S.replace("--cdg-","");var I,O="";return Array.prototype.forEach.call(S,function(b){if(I)return I=!1,void(O+=b.toUpperCase());"-"!==b?O+=b:I=!0}),O},component.hyphenateProperty=function(S,O){var I="";return Array.prototype.forEach.call(S,function(b){b!==b.toUpperCase()?I+=b:I+="-"+b.toLowerCase()}),(O?"--cdg-":"")+I},component.applyComponentStyle=function(M,S){if(S.isComponent){var O=window.getComputedStyle("CANVAS-DATAGRID"===S.tagName?S:S.canvas,null),I={};S.computedStyle=O,defaults(I),(I=I.defaults.styles).forEach(function(b){var t;""===(t=O.getPropertyValue(component.hyphenateProperty(b[0],!0)))&&(t=O.getPropertyValue(component.hyphenateProperty(b[0],!1))),""!==t&&"string"==typeof t&&S.setStyleProperty(b[0],typeMap[typeof b[1]](t.replace(/^\s+/,"").replace(/\s+$/,""),b[1]),!0)}),!M&&S.dispatchEvent&&(requestAnimationFrame(function(){S.resize(!0)}),S.dispatchEvent("stylechanged",S.style))}},typeMap={data:function(M){try{return JSON.parse(M)}catch{throw new Error("Cannot read JSON data in canvas-datagrid data.")}},schema:function(M){try{return JSON.parse(M)}catch{throw new Error("Cannot read JSON data in canvas-datagrid schema attribute.")}},number:function(M,S){var O=parseInt(M,10);return isNaN(O)?S:O},boolean:function(M){return/true/i.test(M)},string:function(M){return M}},component.getObservableAttributes=function(){var M={},S=["data","schema","style","className","name"];return defaults(M),M.defaults.attributes.forEach(function(O){S.push(O[0].toLowerCase())}),S},component.disconnectedCallback=function(){this.connected=!1},component.connectedCallback=function(){var M=this;M.parentDOMNode.innerHTML="",M.parentDOMNode.appendChild(M.canvas),M.connected=!0,component.observe(M),component.applyComponentStyle(!0,M),M.resize(!0)},component.adoptedCallback=function(){this.resize()},component.attributeChangedCallback=function(attrName,oldVal,newVal){var tfn,intf=this,def;if("style"!==attrName){if("data"===attrName)return"application/x-canvas-datagrid"===intf.dataType&&(intf.dataType="application/json+x-canvas-datagrid"),void(intf.args.data=newVal);if("schema"!==attrName)if("name"!==attrName){if("class"!==attrName&&"className"!==attrName){if(def=getDefaultItem("attributes",attrName),def)return tfn=typeMap[typeof def[1]],void(intf.attributes[def[0]]=tfn(newVal));/^on/.test(attrName)&&intf.addEventListener("on"+attrName,function(e){eval(newVal)})}}else intf.name=newVal;else intf.args.schema=typeMap.schema(newVal)}else component.applyComponentStyle(!1,intf)},component.observe=function(M){var S;window.MutationObserver&&(M.applyComponentStyle=function(){component.applyComponentStyle(!1,M),M.resize()},(S=new window.MutationObserver(function(O){var I,b;Array.prototype.forEach.call(O,function(t){"class"!==t.attributeName&&"style"!==t.attributeName&&"STYLE"!==t.target.nodeName?t.target.parentNode&&"STYLE"===t.target.parentNode.nodeName?b=!0:t.target===M&&(t.addedNodes.length>0||"characterData"===t.type)&&(I=!0):b=!0}),b&&M.applyComponentStyle(!1,M),I&&("application/x-canvas-datagrid"===M.dataType&&(M.dataType="application/json+x-canvas-datagrid"),M.data=M.innerHTML)})).observe(M,{characterData:!0,childList:!0,attributes:!0,subtree:!0}),Array.prototype.forEach.call(document.querySelectorAll("style"),function(O){S.observe(O,{characterData:!0,childList:!0,attributes:!0,subtree:!0})}))},component}}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){var c=[],o=!1,r=0,a=300,i=[],g=[],l=[];function x(u,y,v,P){v=v||1;var k,E=[];for(k=u;k<=y;k+=v)E[k]=void 0===P?k:"function"==typeof P?P(k):P;return E}function R(u,y,v,P,E){var k=(u+=t.canvasOffsetLeft)+v,F=(y+=t.canvasOffsetTop)+P;t.ctx.beginPath(),t.ctx.moveTo(u+E,y),t.ctx.lineTo(k-E,y),t.ctx.quadraticCurveTo(k,y,k,y+E),t.ctx.lineTo(k,y+P-E),t.ctx.quadraticCurveTo(k,F,k-E,F),t.ctx.lineTo(u+E,F),t.ctx.quadraticCurveTo(u,F,u,F-E),t.ctx.lineTo(u,y+E),t.ctx.quadraticCurveTo(u,y,u+E,y)}function T(u,y,v,P){t.ctx.fillRect(u+=t.canvasOffsetLeft,y+=t.canvasOffsetTop,v,P)}function H(u,y,v,P){t.ctx.strokeRect(u+=t.canvasOffsetLeft,y+=t.canvasOffsetTop,v,P)}function L(u,y,v){t.ctx.fillText(u,y+=t.canvasOffsetLeft,v+=t.canvasOffsetTop)}function W(u){t.ctx.beginPath(),0===u&&(t.ctx.moveTo(t.lastFrozenColumnPixel,t.lastFrozenRowPixel),t.ctx.lineTo(t.lastFrozenColumnPixel,t.height),t.ctx.lineTo(t.width,t.height),t.ctx.lineTo(t.width,t.lastFrozenRowPixel)),1===u&&(t.ctx.moveTo(0,t.lastFrozenRowPixel),t.ctx.lineTo(0,t.height),t.ctx.lineTo(t.width,t.height),t.ctx.lineTo(t.width,t.lastFrozenRowPixel)),2===u&&(t.ctx.moveTo(t.lastFrozenColumnPixel,0),t.ctx.lineTo(t.width,0),t.ctx.lineTo(t.width,t.height),t.ctx.lineTo(t.lastFrozenColumnPixel,t.height)),t.ctx.clip()}function K(u,y,v){if("circle"===t.style.selectionHandleType)return function D(u,y,v){u+=t.canvasOffsetLeft,y+=t.canvasOffsetTop,t.ctx.beginPath(),t.ctx.arc(u,y,v,0,2*Math.PI),t.ctx.fill()}(u,y,.5*v);T(u-.5*v,y-.5*v,v,v)}function ot(u,y,v){if("circle"===t.style.selectionHandleType)return function J(u,y,v){u+=t.canvasOffsetLeft,y+=t.canvasOffsetTop,t.ctx.beginPath(),t.ctx.arc(u,y,v,0,2*Math.PI),t.ctx.stroke()}(u,y,.5*v);H(u-.5*v,y-.5*v,v,v)}function z(u,y){t.ctx.beginPath(),{t:function(){t.ctx.moveTo(u.x+t.canvasOffsetLeft,u.y+t.canvasOffsetTop),t.ctx.lineTo(u.x+t.canvasOffsetLeft+u.width,u.y+t.canvasOffsetTop)},r:function(){t.ctx.moveTo(u.x+t.canvasOffsetLeft+u.width,u.y+t.canvasOffsetTop),t.ctx.lineTo(u.x+t.canvasOffsetLeft+u.width,u.y+t.canvasOffsetTop+u.height)},b:function(){t.ctx.moveTo(u.x+t.canvasOffsetLeft,u.y+t.canvasOffsetTop+u.height),t.ctx.lineTo(u.x+t.canvasOffsetLeft+u.width,u.y+t.canvasOffsetTop+u.height)},l:function(){t.ctx.moveTo(u.x+t.canvasOffsetLeft,u.y+t.canvasOffsetTop),t.ctx.lineTo(u.x+t.canvasOffsetLeft,u.y+t.canvasOffsetTop+u.height)}}[y](),t.ctx.stroke()}t.htmlImageCache={},t.draw=function(u){if(!t.dispatchEvent("beforedraw",{})&&(t.isChildGrid||t.height&&t.width))if(t.isChildGrid&&u)requestAnimationFrame(t.parentGrid.draw);else if(!1!==t.intf.visible){var y,P,E,k,F,X,q,$,N,it,ct,f,Y,dt,gt,tt,ut=t.data||[],bt="collapse"===t.style.gridBorderCollapse,Ct=[],Bt=[],wt=[],Tt=[],Lt=ut.length,kt=t.currentCell||{},It=t.getColumnHeaderCellHeight(),vt=t.getRowHeaderCellWidth(),pt=t.style.cellHeight;r+=1,P=performance.now(),t.visibleRowHeights=[],ut.length>t.orders.rows.length&&t.createRowOrders(),t.ctx.save(),function Kt(){t.visibleRows=[],Y=t.getSchema(),t.visibleCells=[],t.canvasOffsetTop=t.isChildGrid?t.parentNode.offsetTop:0,t.canvasOffsetLeft=t.isChildGrid?t.parentNode.offsetLeft:0,ct=t.height,f=t.width}(),function qt(){R(0,0,f,ct,0),t.ctx.clip(),t.ctx.fillStyle=t.style.gridBackgroundColor,T(0,0,f,ct)}(),function Ut(){var s=Math.min(ut.length,t.frozenRow);for(N=-t.scrollBox.scrollLeft+t.scrollPixelLeft+t.style.cellBorderWidth,$=It,dt=0;dt<s&&Dt(t.orders.rows[dt],dt);dt+=1);t.attributes.allowFreezingRows&&($+=t.style.frozenMarkerBorderWidth+t.style.frozenMarkerWidth-.4999999999),t.lastFrozenRowPixel=$}(),function Yt(){t.ctx.save(),t.frozenRow>0&&(R(0,t.lastFrozenRowPixel,t.width,t.height-t.lastFrozenRowPixel,0),t.ctx.clip());var h,s,A,_=Y.length;for(N=-t.scrollBox.scrollLeft+t.scrollPixelLeft+t.style.cellBorderWidth,t.attributes.snapToRow||($+=-t.scrollBox.scrollTop+t.scrollPixelTop+t.style.cellBorderWidth),dt=t.frozenRow+t.scrollIndexTop;dt<Lt&&(s=t.orders.rows[dt],t.scrollIndexBottom=dt,t.scrollPixelBottom=$,Dt(s,dt));dt+=1);if(t.attributes.showNewRow){for(t.attributes.showRowHeaders&&(N+=vt),q=pt=t.style.cellHeight,X=!1,h=t.scrollIndexLeft;h<_&&(A=t.orders.columns[h],!((N+=St(t.newRow,ut.length,ut.length)(Y[A],A,h))>t.width+t.scrollBox.scrollLeft));h+=1);Tt.push([t.newRow,ut.length,ut.length,$,q])}t.ctx.restore()}(),function te(){if(tt){t.ctx.save();var h=t.activeCell.columnIndex+1>t.frozenColumn||t.activeCell.rowIndex+1>t.frozenRow;R(h?t.lastFrozenColumnPixel:0,h?t.lastFrozenRowPixel:0,h?t.width-t.lastFrozenColumnPixel:t.width,h?t.height-t.lastFrozenRowPixel:t.height,0),t.ctx.clip(),"row"===t.attributes.selectionMode?t.activeCell&&t.activeCell.rowIndex===tt.rowIndex&&(t.ctx.lineWidth=t.style.activeCellOverlayBorderWidth,t.ctx.strokeStyle=t.style.activeCellOverlayBorderColor,H(0,tt.y,t.getHeaderWidth()+vt,t.visibleRowHeights[tt.rowIndex])):(t.ctx.lineWidth=t.style.activeCellOverlayBorderWidth,t.ctx.strokeStyle=t.style.activeCellOverlayBorderColor,H(tt.x,tt.y,tt.width,tt.height)),t.ctx.restore()}}(),function Zt(){var h,A,_,V,rt,s=Y.length;function j(et,B){for(B=Math.min(B,s),_=et;_<B&&((V=Y[A=t.orders.columns[_]]).hidden||(h={title:V.title,name:V.name,width:V.width||t.style.cellWidth,style:"columnHeaderCell",type:"string",index:_,order:A},!((N+=St({columnHeaderCell:V.title||V.name},-1,-1)(h,A,_))>t.width+t.scrollBox.scrollLeft)));_+=1);}Tt.forEach(function(et,B){$=et[3],pt=et[4],B===t.frozenRow&&(t.ctx.save(),R(0,t.lastFrozenRowPixel,t.width,t.height-t.lastFrozenRowPixel,0),t.ctx.clip()),function Vt(h,s,A){var _,Z;t.attributes.showRowHeaders&&(N=0,_={name:"rowHeaderCell",width:t.sizes.columns[-1]||t.style.rowHeaderCellWidth,style:"rowHeaderCell",type:"string",data:Z=s+1,index:-1},X=t.openChildren[s],St({rowHeaderCell:Z},s,A)(_,-1,-1))}(0,et[1],et[2])}),t.ctx.restore(),t.attributes.showColumnHeaders&&(N=-t.scrollBox.scrollLeft+t.scrollPixelLeft+t.style.columnHeaderCellBorderWidth,t.attributes.showRowHeaders&&(N+=vt),$=0,pt=t.getColumnHeaderCellHeight(),j(t.scrollIndexLeft,s),rt=N,N=t.style.columnHeaderCellBorderWidth,t.attributes.showRowHeaders&&(N+=vt),j(0,t.frozenColumn),(N=rt)<f&&(it={name:"",width:t.style.scrollBarWidth,style:"columnHeaderCellCap",isColumnHeaderCell:!0,isColumnHeaderCellCap:!0,type:"string",index:Y.length},St({endCap:""},-1,-1)(it,-1,-1)),t.attributes.showRowHeaders&&(N=0,it={name:"cornerCell",width:t.style.rowHeaderCellWidth,style:"cornerCell",type:"string",index:-1},St({cornerCell:""},-1,-1)(it,-1,-1)))}(),function ee(){var h=t.lastFrozenRowPixel-t.style.frozenMarkerWidth,s=t.lastFrozenColumnPixel-t.style.frozenMarkerBorderWidth,A=t.currentCell&&"frozen-row-marker"===t.currentCell.style,_=t.currentCell&&"frozen-column-marker"===t.currentCell.style;t.ctx.lineWidth=t.style.frozenMarkerBorderWidth,t.attributes.allowFreezingColumns&&(t.ctx.fillStyle=_?t.style.frozenMarkerHoverColor:t.style.frozenMarkerColor,t.ctx.strokeStyle=_?t.style.frozenMarkerHoverBorderColor:t.style.frozenMarkerBorderColor,T(s,0,t.style.frozenMarkerWidth,t.height),H(s,0,t.style.frozenMarkerWidth,t.height),t.visibleCells.unshift({x:s,y:0,height:t.height,width:t.style.frozenMarkerWidth+t.style.frozenMarkerBorderWidth,style:"frozen-column-marker"})),t.attributes.allowFreezingRows&&(t.ctx.fillStyle=A?t.style.frozenMarkerHoverColor:t.style.frozenMarkerColor,t.ctx.strokeStyle=A?t.style.frozenMarkerHoverBorderColor:t.style.frozenMarkerBorderColor,T(0,h,t.width,t.style.frozenMarkerWidth),H(0,h,t.width,t.style.frozenMarkerWidth),t.visibleCells.unshift({x:0,y:h,height:t.style.frozenMarkerWidth+t.style.frozenMarkerBorderWidth,width:t.width,style:"frozen-row-marker"})),t.freezeMarkerPosition&&(t.ctx.fillStyle=t.style.frozenMarkerActiveColor,t.ctx.strokeStyle=t.style.frozenMarkerActiveBorderColor,"frozen-column-marker"===t.dragMode?(T(t.freezeMarkerPosition.x,0,t.style.frozenMarkerWidth,t.height),H(t.freezeMarkerPosition.x,0,t.style.frozenMarkerWidth,t.height)):(T(0,t.freezeMarkerPosition.y,t.width,t.style.frozenMarkerWidth),H(0,t.freezeMarkerPosition.y,t.width,t.style.frozenMarkerWidth)))}(),function ft(){(t.mobile||t.attributes.allowMovingSelection)&&(t.ctx.lineWidth=t.style.selectionHandleBorderWidth,t.ctx.strokeStyle=t.style.selectionHandleBorderColor,t.ctx.fillStyle=t.style.selectionHandleColor,wt.forEach(function(h){!function at(u,y){var v=t.style.selectionHandleSize;({tr:function(){K(u.x+u.width,u.y,v),ot(u.x+u.width,u.y,v)},br:function(){K(u.x+u.width,u.y+u.height,v),ot(u.x+u.width,u.y+u.height,v)},tl:function(){K(u.x,u.y,v),ot(u.x,u.y,v)},bl:function(){K(u.x,u.y+u.height,v),ot(u.x,u.y+u.height,v)}})[y]()}(h[0],h[1]);var s=t.attributes.touchSelectHandleZone/2;t.visibleCells.unshift({x:h[0].x+("tl"===h[1]||"bl"===h[1]?0:h[0].width)-s,y:h[0].y+("bl"===h[1]||"br"===h[1]?h[0].height:0)-s,height:t.style.selectionHandleSize+s,width:t.style.selectionHandleSize+s,style:"selection-handle-"+h[1]})}))}(),function Xt(){if(t.reorderObject){var h={height:t.reorderObject.height,width:t.reorderObject.width,x:t.reorderObject.x+t.reorderObject.dragOffset.x,y:t.reorderObject.y+t.reorderObject.dragOffset.y},s={width:f,height:ct,x:0,y:0};t.ctx.fillStyle=t.style.reorderMarkerBackgroundColor,t.ctx.lineWidth=t.style.reorderMarkerBorderWidth,t.ctx.strokeStyle=t.style.reorderMarkerBorderColor,"row-reorder"===t.dragMode?(h.width=f,h.x=0,s.width=f,s.height=t.currentCell.height,s.y=t.currentCell.y,T(h.x,h.y,h.width,h.height),H(h.x,h.y,h.width,h.height),t.ctx.lineWidth=t.style.reorderMarkerIndexBorderWidth,t.ctx.strokeStyle=t.style.reorderMarkerIndexBorderColor,t.currentCell.rowIndex!==t.reorderObject.rowIndex&&t.currentCell.rowIndex>-1&&t.currentCell.rowIndex<Lt&&z(s,t.reorderTarget.sortRowIndex>t.reorderObject.sortRowIndex?"b":"t")):"column-reorder"===t.dragMode&&t.reorderObject&&(h.height=ct,h.y=0,s.height=ct,s.width=t.currentCell.width,s.y=0,s.x=t.currentCell.x,T(h.x,h.y,h.width,h.height),H(h.x,h.y,h.width,h.height),t.ctx.lineWidth=t.style.reorderMarkerIndexBorderWidth,t.ctx.strokeStyle=t.style.reorderMarkerIndexBorderColor,t.currentCell.sortColumnIndex!==t.reorderObject.sortColumnIndex&&t.currentCell.sortColumnIndex>-1&&t.currentCell.sortColumnIndex<Y.length&&z(s,t.reorderTarget.columnIndex>t.reorderObject.columnIndex?"r":"l"))}}(),function Jt(){t.movingSelection&&(t.ctx.lineWidth=t.style.moveOverlayBorderWidth,t.ctx.strokeStyle=t.style.moveOverlayBorderColor,t.ctx.setLineDash(t.style.moveOverlayBorderSegments),Bt.forEach(function(h){z(h[0],h[1])}),t.ctx.setLineDash([]))}(),function Qt(){t.ctx.lineWidth=t.style.gridBorderWidth,t.ctx.strokeStyle=t.style.gridBorderColor,H(0,0,t.width,t.height)}(),function $t(){function h(s){z(s[0],s[1])}t.ctx.lineWidth=t.style.selectionOverlayBorderWidth,t.ctx.strokeStyle=t.style.selectionOverlayBorderColor,Ct.filter(function(s){return s[0].rowIndex<t.frozenRow&&s[0].columnIndex<t.frozenColumn}).forEach(h),t.ctx.save(),W(0),Ct.filter(function(s){return s[0].rowIndex>=t.frozenRow&&s[0].columnIndex>=t.frozenColumn}).forEach(h),t.ctx.restore(),t.ctx.save(),W(1),Ct.filter(function(s){return s[0].rowIndex>=t.frozenRow&&s[0].columnIndex<t.frozenColumn}).forEach(h),t.ctx.restore(),t.ctx.save(),W(2),Ct.filter(function(s){return s[0].rowIndex<t.frozenRow&&s[0].columnIndex>=t.frozenColumn}).forEach(h),t.ctx.restore()}(),function jt(){var h,s=t.scrollBox.entities,A=2*t.style.scrollBarBoxMargin;t.ctx.strokeStyle=t.style.scrollBarBorderColor,t.ctx.lineWidth=t.style.scrollBarBorderWidth,s.horizontalBox.x=vt+t.style.scrollBarBoxMargin+t.scrollBox.scrollLeft/t.scrollBox.scrollWidth*(s.horizontalBar.width-t.scrollBox.scrollBoxWidth),s.verticalBox.y=It+t.style.scrollBarBoxMargin+t.scrollBox.scrollTop/t.scrollBox.scrollHeight*(s.verticalBar.height-t.scrollBox.scrollBoxHeight),t.scrollBox.horizontalBarVisible&&(t.ctx.fillStyle=t.style.scrollBarBackgroundColor,T(s.horizontalBar.x,s.horizontalBar.y,s.horizontalBar.width+A,s.horizontalBar.height),H(s.horizontalBar.x,s.horizontalBar.y,s.horizontalBar.width+A,s.horizontalBar.height),t.ctx.fillStyle=t.style.scrollBarBoxColor,t.scrollBox.horizontalBoxVisible&&(/horizontal/.test(kt.context)&&(t.ctx.fillStyle=t.style.scrollBarActiveColor),R(s.horizontalBox.x,s.horizontalBox.y,s.horizontalBox.width,s.horizontalBox.height,t.style.scrollBarBoxBorderRadius),t.ctx.stroke(),t.ctx.fill()),h=!0,t.visibleCells.unshift(s.horizontalBar),t.visibleCells.unshift(s.horizontalBox)),t.scrollBox.verticalBarVisible&&(t.ctx.fillStyle=t.style.scrollBarBackgroundColor,T(s.verticalBar.x,s.verticalBar.y,s.verticalBar.width,s.verticalBar.height+A),H(s.verticalBar.x,s.verticalBar.y,s.verticalBar.width,s.verticalBar.height+A),t.scrollBox.verticalBoxVisible&&(t.ctx.fillStyle=t.style.scrollBarBoxColor,/vertical/.test(kt.context)&&(t.ctx.fillStyle=t.style.scrollBarActiveColor),R(s.verticalBox.x,s.verticalBox.y,s.verticalBox.width,s.verticalBox.height,t.style.scrollBarBoxBorderRadius),t.ctx.stroke(),t.ctx.fill()),h=!0,t.visibleCells.unshift(s.verticalBar),t.visibleCells.unshift(s.verticalBox)),h&&(t.ctx.strokeStyle=t.style.scrollBarCornerBorderColor,t.ctx.fillStyle=t.style.scrollBarCornerBackgroundColor,R(s.corner.x,s.corner.y,s.corner.width,s.corner.height,0),t.ctx.stroke(),t.ctx.fill(),t.visibleCells.unshift(s.corner))}(),y&&t.resize(!0),function oe(){var h;t.ctx.save(),(t.attributes.showPerformance||t.attributes.debug)&&(0===c.length&&(c=x(0,a,1,0)),c.pop(),c.unshift(performance.now()-P)),t.attributes.debug?(t.ctx.font=t.style.debugFont,(h={}).perf=(c.reduce(function(s,A){return s+A},0)/Math.min(r,c.length)).toFixed(1),h.perfDelta=c[0].toFixed(1),h.frozenColumnsWidth=function st(){for(var u=0,y=t.getSchema(),v=0,P=Math.min(t.frozenColumn,y.length);v<P;)y[v].hidden||(u+=t.getColummnWidth(v)),v+=1;return u}(),h.htmlImages=Object.keys(t.htmlImageCache).length,h.reorderObject="x: "+(t.reorderObject||{columnIndex:0}).columnIndex+", y: "+(t.reorderObject||{rowIndex:0}).rowIndex,h.reorderTarget="x: "+(t.reorderTarget||{columnIndex:0}).columnIndex+", y: "+(t.reorderTarget||{rowIndex:0}).rowIndex,h.scale=t.scale,h.startScale=t.startScale,h.scaleDelta=t.scaleDelta,h.zoomDeltaStart=t.zoomDeltaStart,h.touchLength=t.touchLength,h.touches="y0: "+(t.touchPosition||{y:0}).y+" y1: "+(t.touchPosition1||{y:0}).y,h.scrollBox=t.scrollBox.toString(),h.scrollIndex="x: "+t.scrollIndexLeft+", y: "+t.scrollIndexTop,h.scrollPixel="x: "+t.scrollPixelLeft+", y: "+t.scrollPixelTop,h.canvasOffset="x: "+t.canvasOffsetLeft+", y: "+t.canvasOffsetTop,h.touchDelta="x: "+t.touchDelta.x+", y: "+t.touchDelta.y,h.touchAnimateTo="x: "+t.touchAnimateTo.x+", y: "+t.touchAnimateTo.y,h.scrollAnimation="x: "+t.scrollAnimation.x+", y: "+t.scrollAnimation.y,h.touchPPS="x: "+t.xPPS+", y: "+t.yPPS,h.touchPPST="x: "+t.xPPST+", y: "+t.yPPST,h.touchDuration=t.touchDuration,h.pointerLockPosition=t.pointerLockPosition?t.pointerLockPosition.x+", "+t.pointerLockPosition.y:"",h.size="w: "+t.width+", h: "+t.height,h.mouse="x: "+t.mouse.x+", y: "+t.mouse.y,h.touch=t.touchStart?"x: "+t.touchStart.x+", y: "+t.touchStart.y:"",h.entities=t.visibleCells.length,h.hasFocus=t.hasFocus,h.dragMode=t.dragMode,t.currentCell&&(h.columnIndex=t.currentCell.columnIndex,h.rowIndex=t.currentCell.rowIndex,h.sortColumnIndex=t.currentCell.sortColumnIndex,h.sortRowIndex=t.currentCell.sortRowIndex,h.context=t.currentCell.context,h.dragContext=t.currentCell.dragContext,h.style=t.currentCell.style,h.type=t.currentCell.type),t.ctx.textAlign="right",t.ctx.fillStyle=t.style.debugBackgroundColor,T(0,0,t.width,t.height),Object.keys(h).forEach(function(s,A){var _=s+": "+h[s];t.ctx.fillStyle=t.style.debugColor,L(_,f-20,(t.attributes.showPerformance?140:24)+14*A)}),t.ctx.restore()):t.ctx.restore()}(),function re(){if(t.attributes.showPerformance){var s=t.width-250-t.style.scrollBarWidth-2*t.style.scrollBarBorderWidth,A=It;0===g.length&&(g=x(0,a,1,function(){return[0,0]})),0===l.length&&(l=x(0,a,1,function(){return[0,0]})),0===i.length&&(i=x(0,a,1,0)),t.ctx.lineWidth=.5,t.ctx.textAlign="left",t.ctx.font=t.style.debugFont,t.ctx.fillStyle=t.style.debugPerfChartBackground,T(s,A,250,100),[["Scroll Height",g,0,t.scrollBox.scrollHeight,t.style.debugScrollHeightColor,!1],["Scroll Width",g,1,t.scrollBox.scrollWidth,t.style.debugScrollWidthColor,!1],["Performance",c,void 0,200,t.style.debugPerformanceColor,!1],["Entities",i,void 0,1500,t.style.debugEntitiesColor,!1],["TouchPPSX",l,0,1e3,t.style.debugTouchPPSXColor,!0],["TouchPPSY",l,1,1e3,t.style.debugTouchPPSYColor,!0]].forEach(function(V,rt){V.push(rt),Z.apply(null,V)}),t.ctx.fillStyle=t.style.debugPerfChartBackground,i.pop(),i.unshift(t.visibleCells.length),g.pop(),g.unshift([t.scrollBox.scrollTop,t.scrollBox.scrollLeft]),l.pop(),l.unshift([t.yPPS,t.xPPS])}function Z(V,rt,j,et,B,mt,Mt){var lt;(function C(u,y,v,P,E,k,F,X,q){var yt=u/E.length,$=y/F;v+=t.canvasOffsetLeft,P+=t.canvasOffsetTop,t.ctx.beginPath(),t.ctx.moveTo(v,P+y),E.forEach(function(N){var it=void 0===k?N:N[k];q&&(it=Math.abs(it)),t.ctx.lineTo(v+yt,P+y-it*$),v+=yt}),t.ctx.moveTo(v+u,P+y),t.ctx.strokeStyle=X,t.ctx.stroke()})(250,100,s,A,rt,j,et,B,mt),t.ctx.fillStyle=B,T(3+s,A+9+11*Mt,8,8),t.ctx.fillStyle=t.style.debugPerfChartTextColor,lt=void 0!==j?rt[0][j]:rt[0],L(V+" "+(isNaN(lt)?0:lt).toFixed(3),14+s,A+16+11*Mt)}}(),!t.dispatchEvent("afterdraw",{})&&t.ctx.restore()}function _t(h,s,A,_){_=_||{x:0,y:0},h.selectionBorder="",!h.isRowHeader&&t.selections[h.rowIndex+-_.y]&&-1!==t.selections[h.rowIndex+-_.y].indexOf(h.columnIndex+-_.x)&&((!t.selections[h.rowIndex-1-_.y]||-1===t.selections[h.rowIndex-1-_.y].indexOf(h.columnIndex+-_.x)||0===h.rowIndex)&&!h.isHeader&&(s.push([h,"t"]),h[A+"BorderTop"]=!0,h[A+"Border"]+="t"),(!t.selections[h.rowIndex+1+-_.y]||-1===t.selections[h.rowIndex+1+-_.y].indexOf(h.columnIndex+-_.x))&&(s.push([h,"b"]),h[A+"BorderBottom"]=!0,h[A+"Border"]+="b"),(!t.selections[h.rowIndex+-_.y]||0===h.columnIndex||-1===t.selections[h.rowIndex+-_.y].indexOf(h.columnIndex-1-_.x))&&(s.push([h,"l"]),h[A+"BorderLeft"]=!0,h[A+"Border"]+="l"),(!t.selections[h.rowIndex+-_.y]||h.columnIndex===Y.length||-1===t.selections[h.rowIndex+-_.y].indexOf(h.columnIndex+1+-_.x))&&(s.push([h,"r"]),h[A+"BorderRight"]=!0,h[A+"Border"]+="r"))}function St(h,s,A){return function(Z,V,rt){if(Z.hidden)return 0;var et,B,ht,j=Z.style||"cell",mt=/HeaderCell/.test(j),Mt=/cornerCell/.test(j),lt="rowHeaderCell"===j,ne="columnHeaderCell"===j,Ht=t.selections[s]&&-1!==t.selections[s].indexOf(rt),zt=t.hovers.rowIndex===s&&t.hovers.columnIndex===rt,Pt=t.activeCell.rowIndex===s&&t.activeCell.columnIndex===rt,Wt="columnHeaderCellCap"===j,At=h?h[Z.name]:void 0,Rt="canvas-datagrid"===Z.type,Et=!(t.orders.rows[t.activeCell.rowIndex]!==s&&t.orders.columns[t.activeCell.columnIndex]!==V||-1!==rt&&-1!==s)&&(lt?"activeRowHeaderCell":"activeColumnHeaderCell"),Ot=t.formatters[Z.type||"string"],Ft=0,Nt=0,xt=t.sizes.columns[V]||Z.width,nt={value:At,row:h,header:Z};if(Wt&&(xt=f-N),void 0===xt&&(xt=t.style.cellWidth),N+(xt*=t.scale)+t.style.cellBorderWidth<0&&(N+=xt+t.style.cellBorderWidth),Pt&&"cornerCell"!==j&&(j="activeCell"),-1===t.visibleRows.indexOf(A)&&!mt&&t.visibleRows.push(A),ht=t.dispatchEvent("formatcellvalue",nt),E=N,k=$,"cornerCell"===j?(E=0,k=0):lt?E=0:mt&&(k=0),(B={type:Rt?"canvas-datagrid-cell":Z.type,style:j,nodeType:"canvas-datagrid-cell",x:E,y:k,fontHeight:(t.style[j+"FontHeight"]||0)*t.scale,horizontalAlignment:t.style[j+"HorizontalAlignment"],verticalAlignment:t.style[j+"VerticalAlignment"],paddingLeft:(t.style[j+"PaddingLeft"]||0)*t.scale,paddingTop:(t.style[j+"PaddingTop"]||0)*t.scale,paddingRight:(t.style[j+"PaddingRight"]||0)*t.scale,paddingBottom:(t.style[j+"PaddingBottom"]||0)*t.scale,whiteSpace:t.style.cellWhiteSpace,lineHeight:t.style.cellLineHeight,lineSpacing:t.style.cellLineSpacing,offsetTop:t.canvasOffsetTop+k,offsetLeft:t.canvasOffsetLeft+E,scrollTop:t.scrollBox.scrollTop,scrollLeft:t.scrollBox.scrollLeft,active:Pt||Et,hovered:zt,selected:Ht,width:xt,height:pt,offsetWidth:xt,offsetHeight:pt,parentNode:t.intf.parentNode,offsetParent:t.intf.parentNode,data:h,isCorner:Mt,isHeader:mt,isColumnHeader:ne,isColumnHeaderCellCap:Wt,isRowHeader:lt,rowOpen:X,header:Z,columnIndex:rt,rowIndex:s,sortColumnIndex:V,sortRowIndex:A,isGrid:Rt,isNormal:!Rt&&!Mt&&!mt,gridId:(t.attributes.name||"")+A+":"+V,parentGrid:t.intf,innerHTML:"",activeHeader:Et,value:mt&&!lt?Z.title||Z.name:At}).calculatedLineHeight=B.fontHeight*B.lineHeight+B.lineSpacing,B.paddedWidth=B.width-B.paddingRight-B.paddingLeft,B.paddedHeight=B.height-B.paddingTop-B.paddingBottom,nt.cell=B,B.userHeight=B.isHeader?t.sizes.rows[-1]:q,B.userWidth=B.isHeader?t.sizes.columns.cornerCell:t.sizes.columns[V],t.visibleCells.unshift(B),!t.dispatchEvent("beforerendercell",nt)){if(t.ctx.fillStyle=t.style[j+"BackgroundColor"],t.ctx.strokeStyle=t.style[j+"BorderColor"],t.ctx.lineWidth=t.style[j+"BorderWidth"],zt&&(t.ctx.fillStyle=t.style[j+"HoverBackgroundColor"],t.ctx.strokeStyle=t.style[j+"HoverBorderColor"]),Ht&&(t.ctx.fillStyle=t.style[j+"SelectedBackgroundColor"],t.ctx.strokeStyle=t.style[j+"SelectedBorderColor"]),Et&&(t.ctx.fillStyle=t.style[Et+"BackgroundColor"]),t.dispatchEvent("rendercell",nt),B.isGrid&&(B.height!==q&&(B.height=q||t.style.cellHeightWithChildGrid,y=!0),B.width=t.sizes.columns[V]||t.style.cellWidthWithChildGrid),X&&!B.isRowHeader&&(B.height=t.sizes.rows[A]||t.style.cellHeight),B.isGrid||(T(E,k,B.width,B.height),H(E,k,B.width,B.height)),t.ctx.save(),R(B.x,B.y,B.width,B.height,0),t.ctx.clip(),t.dispatchEvent("afterrendercell",nt),B.height!==pt&&!(X&&!B.isRowHeader)&&(t.sizes.rows[mt?-1:A]=B.height,y=!0),B.width!==xt&&(t.sizes.columns[V]=B.width,y=!0),lt&&t.attributes.tree&&(t.dispatchEvent("rendertreearrow",nt)||(Nt=function w(u,y,v){var P=t.style.treeArrowMarginTop*t.scale,E=t.style.treeArrowMarginRight*t.scale,k=t.style.treeArrowMarginLeft*t.scale,F=t.style.treeArrowWidth*t.scale,X=t.style.treeArrowHeight*t.scale;return y+=t.canvasOffsetLeft,v+=t.canvasOffsetTop,t.ctx.fillStyle=t.style.treeArrowColor,t.ctx.strokeStyle=t.style.treeArrowBorderColor,t.ctx.beginPath(),y+=k,v+=P,t.openChildren[u.rowIndex]?(t.ctx.moveTo(y,v),t.ctx.lineTo(y+F,v),t.ctx.lineTo(y+.5*F,v+X),t.ctx.moveTo(y,v)):(t.ctx.lineTo(y,v),t.ctx.lineTo(y+X,v+.5*F),t.ctx.lineTo(y,v+F),t.ctx.lineTo(y,v)),t.ctx.stroke(),t.ctx.fill(),k+F+E}(B,t.style[j+"PaddingLeft"],k))),t.attributes.showRowNumbers&&lt||!lt)if(B.isGrid&&!t.dispatchEvent("beforerendercellgrid",nt)){if(!t.childGrids[B.gridId]){if((et=t.cellGridAttributes).name=t.attributes.saveAppearance?B.gridId:void 0,et.component=!1,et.parentNode=B,et.data=At,nt.cellGridAttributes=et,t.dispatchEvent("beforecreatecellgrid",nt))return;t.childGrids[B.gridId]=t.createGrid(et),t.sizes.rows[A]=t.sizes.rows[A]||t.style.cellGridHeight,y=!0}B.grid=t.childGrids[B.gridId],B.grid.parentNode=B,B.grid.visible=!0,B.grid.draw(),t.dispatchEvent("rendercellgrid",nt)}else B.isGrid||(t.childGrids[B.gridId]&&(t.childGrids[B.gridId].parentNode.offsetHeight=0),mt&&t.orderBy===Z.name&&(t.dispatchEvent("renderorderbyarrow",nt)||(Ft=function d(u,y){var v=t.style.columnHeaderOrderByArrowMarginTop*t.scale,P=t.style.columnHeaderOrderByArrowMarginLeft*t.scale,E=t.style.columnHeaderOrderByArrowMarginRight*t.scale,k=t.style.columnHeaderOrderByArrowWidth*t.scale,F=t.style.columnHeaderOrderByArrowHeight*t.scale;return u+=t.canvasOffsetLeft,y+=t.canvasOffsetTop,t.ctx.fillStyle=t.style.columnHeaderOrderByArrowColor,t.ctx.strokeStyle=t.style.columnHeaderOrderByArrowBorderColor,t.ctx.beginPath(),u+=P,y+=v,"asc"===t.orderDirection?(t.ctx.moveTo(u,y),t.ctx.lineTo(u+k,y),t.ctx.lineTo(u+.5*k,y+F),t.ctx.moveTo(u,y)):(t.ctx.lineTo(u,y+F),t.ctx.lineTo(u+k,y+F),t.ctx.lineTo(u+.5*k,y),t.ctx.lineTo(u,y+F)),t.ctx.stroke(),t.ctx.fill(),P+k+E}(E+t.style[j+"PaddingLeft"],0))),t.ctx.fillStyle=t.style[j+"Color"],zt&&(t.ctx.fillStyle=t.style[j+"HoverColor"]),Ht&&(t.ctx.fillStyle=t.style[j+"SelectedColor"]),Et&&(t.ctx.fillStyle=t.style[Et+"Color"]),B.treeArrowWidth=Nt,B.orderByArrowWidth=Ft,void 0===(ht=void 0!==ht?ht:Ot?Ot(nt):"")&&!Ot&&(ht="",console.warn("canvas-datagrid: Unknown format "+Z.type+" add a cellFormater")),B.formattedValue=(ht??"").toString(),t.columnFilters&&void 0!==t.columnFilters[ht]&&mt&&(B.formattedValue=t.attributes.filterTextPrefix+ht),t.ctx.font=t.style[j+"FontHeight"]*t.scale+"px "+t.style[j+"FontName"],t.dispatchEvent("formattext",nt)||(B.text=function U(u,y){if(!u.formattedValue)return{lines:[{width:0,value:""}],width:0,height:u.calculatedLineHeight};var E,k,N,f,Y,gt,F=u.formattedValue.split(y),X=u.calculatedLineHeight,q=[],it=t.attributes.ellipsisText,tt={width:0,value:""},ut="nowrap"!==t.style.cellWhiteSpace?u.paddedHeight:u.calculatedLineHeight;for(q.push(tt),N=t.ctx.measureText(" "+it).width,E=0;E<F.length;E+=1){var bt=t.ctx.measureText((k=F[E])+y);if(tt.width+bt.width+N<u.paddedWidth)tt.value+=k+y,tt.width+=bt.width;else if(/\w-\w/.test(k)&&u.paddedWidth<bt.width)F.splice(E,1,k.split("-")[0]+"-",k.split("-")[1]),E-=1;else{if(tt={width:bt.width,value:k+y},0===E&&(q=[]).push(tt),(X+=u.calculatedLineHeight)>ut){if(0===q.length||(gt=q[q.length-1]).width<u.paddedWidth&&1===F.length)break;var Ct=Y=gt.value+k;if((f=t.ctx.measureText(Y+it).width)>u.paddedWidth)for(var Bt=parseInt(Y.length/2),wt=-1;Bt>0;)Y=Ct.substr(0,Bt*wt+Y.length),wt=(f=t.ctx.measureText(Y+it).width)>u.paddedWidth?-1:1,Bt=parseInt(Bt/2);gt.value=Y+=Ct.length!=Y.length?it:"",gt.width=f;break}E>0&&q.push(tt)}}return{lines:q,width:0,height:u.calculatedLineHeight*q.length}}(B," ")),t.dispatchEvent("rendertext",nt)||(B.innerHTML||"html"===Z.type?function m(u){var y,v=u.innerHTML||u.formattedValue,P=v.toString()+u.rowIndex.toString()+u.columnIndex.toString(),E=u.x+t.canvasOffsetLeft,k=u.y+t.canvasOffsetTop;if(t.htmlImageCache[P]){if(y=t.htmlImageCache[P].img,t.htmlImageCache[P].height===u.height&&t.htmlImageCache[P].width===u.width)return y.complete?t.ctx.drawImage(y,E,k):void 0;t.htmlImageCache[P]=void 0}else o=!1;y=new Image(u.width,u.height),t.htmlImageCache[P]={img:y,width:u.width,height:u.height},y.onload=function(){t.ctx.drawImage(y,E,k),function p(){var u=!0;Object.keys(t.htmlImageCache).forEach(function(y){t.htmlImageCache[y].img.complete||(u=!1)}),u&&!o&&(o=!0,t.draw())}()},y.src="data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" width="'+u.width+'" height="'+u.height+'">\n<foreignObject class="node" x="0" y="0" width="100%" height="100%">\n<body xmlns="http://www.w3.org/1999/xhtml" style="margin:0;padding:0;">\n'+v+"\n</body></foreignObject>\n</svg>\n")}(B):function Q(u){var P,E,v=u.fontHeight*u.lineHeight,k="nowrap"!==t.style.cellWhiteSpace,F=0;for(P=0;P<u.text.lines.length;P+=1){E=u.text.lines[P];var X=Math.max(.5*(u.height-(k?u.text.height:u.calculatedLineHeight)),0)+v,q=u.paddingLeft+u.treeArrowWidth+u.orderByArrowWidth;"right"===u.horizontalAlignment?q=u.paddingLeft+u.paddedWidth-E.width:"center"===u.horizontalAlignment&&(q=u.paddingLeft+(u.paddedWidth+u.paddingRight)/2-E.width/2),"top"===u.verticalAlignment?X=u.calculatedLineHeight:"bottom"===u.verticalAlignment&&(X=u.height-u.paddingBottom-u.text.height),E.height=v+u.lineSpacing,E.offsetLeft=q,E.offsetTop=X,E.x=u.x+q,E.y=u.y+F+X,F+=E.height,L(E.value,E.x,E.y)}t.attributes.debug&&u.active&&requestAnimationFrame(function(){t.ctx.font=t.style.debugFont,t.ctx.fillStyle=t.style.debugColor,L(JSON.stringify({x:u.x,y:u.y,h:u.height,w:u.width,pw:u.paddedWidth,idx:u.columnIndex,idx_ord:u.sortColumnIndex},null,"\t"),u.x+14,u.y+14),L(JSON.stringify(u.text.lines.map(function(yt){return{w:yt.width,v:yt.value.length}}),null,"\t"),u.x+14,u.y+30)})}(B)));return Pt&&(tt=B),_t(B,Ct,"selection"),function Gt(h){(t.attributes.allowMovingSelection||t.mobile)&&(h.selectionBorderTop&&h.selectionBorderRight&&t.mobile&&(wt.push([h,"tr"]),h.selectionHandle="tr"),h.selectionBorderTop&&h.selectionBorderLeft&&t.mobile&&(wt.push([h,"tl"]),h.selectionHandle="tl"),h.selectionBorderBottom&&h.selectionBorderLeft&&t.mobile&&(wt.push([h,"bl"]),h.selectionHandle="bl"),h.selectionBorderBottom&&h.selectionBorderRight&&("none"!==t.attributes.selectionHandleBehavior||t.mobile)&&(wt.push([h,"br"]),h.selectionHandle="br"))}(B),t.movingSelection&&_t(B,Bt,"move",t.moveOffset),t.ctx.restore(),N+=B.width+(bt?0:t.style.cellBorderWidth),B.width}}}function Dt(h,s){var A,_,Z,V,rt=Y.length;if($-2*pt>ct||(gt=ut[h],$<-(q=(Z=(t.sizes.rows[h]||t.style.cellHeight)*t.scale)+(_=((X=t.openChildren[h])?t.sizes.trees[h]:0)*t.scale))))return!1;for(t.attributes.showRowHeaders&&(N+=vt),pt=q,V=t.scrollIndexLeft;V<rt;V+=1)if(A=t.orders.columns[V],(N+=St(gt,h,s)(Y[A],A,V))>t.width){t.scrollIndexRight=V,t.scrollPixelRight=N;break}for(N=0,t.attributes.showRowHeaders&&(N+=vt),V=0;V<t.frozenColumn&&(A=t.orders.columns[V],!((N+=St(gt,h,s)(Y[A],A,V))>t.width));V+=1);return t.lastFrozenColumnPixel=N,pt=q,N=-t.scrollBox.scrollLeft+t.scrollPixelLeft+t.style.cellBorderWidth,F=t.childGrids[h],h!==ut.length&&X?(F.visible=!0,F.parentNode={offsetTop:$+Z+t.canvasOffsetTop,offsetLeft:vt-1+t.canvasOffsetLeft,offsetHeight:_,offsetWidth:t.width-vt-t.style.scrollBarWidth-1,offsetParent:t.intf.parentNode,parentNode:t.intf.parentNode,style:t.style,nodeType:"canvas-datagrid-tree",scrollTop:t.scrollBox.scrollTop,scrollLeft:t.scrollBox.scrollLeft,rowIndex:h},t.visibleCells.unshift({rowIndex:h,columnIndex:0,y:F.parentNode.offsetTop,x:F.parentNode.offsetLeft,height:F.height,width:F.width,style:"tree-grid",type:F.parentNode.nodeType}),F.draw()):F&&(F.parentNode.offsetHeight=0,delete t.sizes.trees[h]),Tt.push([gt,h,s,$,q]),t.visibleRowHeights[h]=q,$+=pt+(bt?0:t.style.cellBorderWidth),!0}}}}.apply(S,[]))&&(M.exports=b)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){var c;t.stopPropagation=function(o){o.stopPropagation()},t.addEventListener=function(o,r){t.events[o]=t.events[o]||[],t.events[o].unshift(r)},t.removeEventListener=function(o,r){(t.events[o]||[]).forEach(function(i,n){r===i&&t.events[o].splice(n,1)})},t.dispatchEvent=function(o,r){var a;function i(){a=!0}if(r=o.type?o:r||{},t.events[o=o.type||o])return t.events[o].forEach(function(g){r.ctx=t.ctx,r.preventDefault=i,g.apply(t.intf,[r])}),a},t.getRatio=function(){return Math.min(t.attributes.maxPixelRatio,(window.devicePixelRatio||1)/(t.ctx.webkitBackingStorePixelRatio||t.ctx.mozBackingStorePixelRatio||t.ctx.msBackingStorePixelRatio||t.ctx.oBackingStorePixelRatio||t.ctx.backingStorePixelRatio||1))},t.resize=function(o){if(t.canvas){var r,D,a={x:0,y:0,height:0,width:0,style:"vertical-scroll-bar"},i={x:0,y:0,height:0,width:0,style:"horizontal-scroll-bar"},n={x:0,y:0,height:0,width:0,style:"vertical-scroll-box"},g={x:0,y:0,height:0,width:0,style:"horizontal-scroll-box"},l={x:0,y:0,height:0,width:0,isCorner:!0,isScrollBoxCorner:!0,style:"scroll-box-corner"},x=2*t.style.scrollBarBoxMargin,C=2*t.style.scrollBarBorderWidth,p=.5*t.style.scrollBarBoxMargin,m=t.style.scrollBarWidth+2*t.style.scrollBarBorderWidth,d=t.getRatio(),w="collapse"===t.style.gridBorderCollapse?1:2,R=t.style.cellBorderWidth*w,T=t.style.columnHeaderCellBorderWidth*w,H=0,L=0,J=(t.data||[]).length,W=t.getColumnHeaderCellHeight(),K=t.getRowHeaderCellWidth(),ot=t.style.cellHeight,at=t.getSchema();for(t.scrollCache.x=[],t.scrollCache.y=[],r=0;r<J;r+=1)t.scrollCache.y[r]=H,H+=((t.sizes.rows[r]||ot)+(t.sizes.trees[r]||0))*t.scale+(t.frozenRow>r&&t.sizes.trees[r]||0);return J>1&&(t.scrollCache.y[r]=H),L=at.reduce(function(st,u,y){if(at[t.orders.columns[y]].hidden)return t.scrollCache.x[y]=st,st;var v=st+t.getColummnWidth(t.orders.columns[y]);return t.scrollCache.x[y]=v,v},0)||0,t.attributes.showNewRow&&(H+=ot),t.attributes.snapToRow&&(H+=t.style.cellHeight),U(),t.isChildGrid?(t.width=t.parentNode.offsetWidth,t.height=t.parentNode.offsetHeight):(t.height!==t.canvas.offsetHeight||t.width!==t.canvas.offsetWidth)&&(t.height=t.canvas.offsetHeight,t.width=t.canvas.offsetWidth,t.canvasOffsetLeft=t.args.canvasOffsetLeft||0,t.canvasOffsetTop=t.args.canvasOffsetTop||0),t.scrollBox.top=W+T,t.scrollBox.left=K,G(),z(),t.scrollBox.horizontalBarVisible&&("auto"===t.style.height&&!t.isChildGrid&&(t.height+=m),H+=m,U(),G(),z()),t.scrollBox.verticalBarVisible&&("auto"===t.style.width&&!t.isChildGrid&&(t.width+=m),L+=m,U(),G(),z()),G(),t.scrollBox.scrollWidth=L-t.scrollBox.width,t.scrollBox.scrollHeight=H-t.scrollBox.height,t.scrollBox.widthBoxRatio=t.scrollBox.width/L,t.scrollBox.scrollBoxWidth=t.scrollBox.width*t.scrollBox.widthBoxRatio-t.style.scrollBarWidth-C-p,t.scrollBox.heightBoxRatio=(t.scrollBox.height-W)/H,t.scrollBox.scrollBoxHeight=t.scrollBox.height*t.scrollBox.heightBoxRatio-t.style.scrollBarWidth-C-p,t.scrollBox.scrollBoxWidth=Math.max(t.scrollBox.scrollBoxWidth,t.style.scrollBarBoxMinSize),t.scrollBox.scrollBoxHeight=Math.max(t.scrollBox.scrollBoxHeight,t.style.scrollBarBoxMinSize),i.x+=K,i.y+=t.height-t.style.scrollBarWidth-p,i.width=t.width-t.style.scrollBarWidth-K-p-x,i.height=t.style.scrollBarWidth+t.style.scrollBarBorderWidth+p,g.y=i.y+t.style.scrollBarBoxMargin,g.width=t.scrollBox.scrollBoxWidth,g.height=t.style.scrollBarBoxWidth,a.x+=t.width-t.style.scrollBarWidth-t.style.scrollBarBorderWidth-p,a.y+=W,a.width=t.style.scrollBarWidth+t.style.scrollBarBorderWidth+p,a.height=t.height-W-t.style.scrollBarWidth-p-x,n.x=a.x+t.style.scrollBarBoxMargin,n.width=t.style.scrollBarBoxWidth,n.height=t.scrollBox.scrollBoxHeight,l.x=i.x+i.width+x,l.y=a.y+a.height+x,l.width=t.style.scrollBarWidth+t.style.scrollBarBorderWidth,l.height=t.style.scrollBarWidth+t.style.scrollBarBorderWidth,t.scrollBox.entities={horizontalBar:i,horizontalBox:g,verticalBar:a,verticalBox:n,corner:l},t.scrollBox.bar={v:a,h:i},t.scrollBox.box={v:n,h:g},t.page=Math.max(1,t.visibleRows.length-3-t.attributes.pageUpDownOverlap),t.isChildGrid||(t.canvas.width=t.width*d,t.canvas.height=t.height*d,t.ctx.scale(d,d)),t.resizeEditInput(),t.scroll(!0),o&&t.draw(!0),t.dispatchEvent("resize",{}),!0}function z(){t.scrollBox.horizontalBarVisible="auto"!==t.style.width&&L>t.scrollBox.width&&"hidden"!==t.style.overflowX||"scroll"===t.style.overflowX,t.scrollBox.horizontalBoxVisible=L>t.scrollBox.width,t.scrollBox.verticalBarVisible="auto"!==t.style.height&&H>t.scrollBox.height&&"hidden"!==t.style.overflowY||"scroll"===t.style.overflowY,t.scrollBox.verticalBoxVisible=H>t.scrollBox.height}function G(){t.scrollBox.width=t.width-K,t.scrollBox.height=t.height-W}function U(){t.isChildGrid||(D={height:W+H+R+1,width:L+K+R},["width","height"].forEach(function(Q){-1!==["auto",void 0].indexOf(t.style[Q])&&-1!==["auto",void 0].indexOf(t.appliedInlineStyles[Q])?t.parentNodeStyle[Q]=D[Q]+"px":-1==["auto",void 0].indexOf(t.style[Q])&&-1==["auto",void 0].indexOf(t.appliedInlineStyles[Q])&&(t.parentNodeStyle[Q]=t.style[Q],t.isComponet&&(t.canvas.style[Q]=t.style[Q]))}))}},t.scroll=function(o){var r=t.getSchema(),i=t.style.cellHeight;for(t.scrollIndexTop=Math.floor((t.data||[]).length*(t.scrollBox.scrollTop/t.scrollBox.scrollHeight)-100),t.scrollIndexTop=Math.max(t.scrollIndexTop,0),t.scrollPixelTop=t.scrollCache.y[t.scrollIndexTop],0===t.scrollBox.scrollHeight&&(t.scrollIndexTop=0),t.scrollPixelTop=0,t.scrollIndexLeft=t.frozenColumn,t.scrollPixelLeft=0;t.scrollPixelTop<t.scrollBox.scrollTop&&t.scrollIndexTop<t.data.length;)t.scrollIndexTop+=1,t.scrollPixelTop=t.scrollCache.y[t.scrollIndexTop];for(;t.scrollPixelLeft<t.scrollBox.scrollLeft+1&&t.scrollIndexLeft<r.length;)t.scrollPixelLeft=t.scrollCache.x[t.scrollIndexLeft],t.scrollIndexLeft+=1;r.length>0&&(t.scrollIndexLeft=Math.max(t.scrollIndexLeft-1,0),t.scrollPixelLeft-=t.getColummnWidth(t.orders.columns[t.scrollIndexLeft])),(t.data||[]).length>0&&(t.scrollIndexTop=Math.max(t.scrollIndexTop-1,0),t.scrollPixelTop=Math.max(t.scrollPixelTop-(t.data[t.scrollIndexTop]?(t.sizes.rows[t.scrollIndexTop]||i)+(t.sizes.trees[t.scrollIndexTop]||0):i)*t.scale,0)),t.ellipsisCache={},o||t.draw(!0),requestAnimationFrame(t.resizeEditInput),t.dispatchEvent("scroll",{top:t.scrollBox.scrollTop,left:t.scrollBox.scrollLeft})},t.mousemove=function(o,r){if(!t.contextMenu&&!t.input){t.mouse=r||t.getLayerPos(o);var i,g,l,m,a=(o.ctrlKey||o.metaKey||t.attributes.persistantSelectionMode)&&!t.attributes.singleSelectionMode,n=t.getSchema(),x=t.mouse.x,C=t.mouse.y,p=t.getCellAt(x,C),d={NativeEvent:o,cell:p,x,y:C},w=t.currentCell;if(clearTimeout(t.scrollTimer),t.isInGrid({x,y:C})||(t.hasFocus=!1),!t.dispatchEvent("mousemove",d)&&(p&&t.currentCell&&(t.rowBoundaryCrossed=t.currentCell.rowIndex!==p.rowIndex,t.columnBoundaryCrossed=t.currentCell.columnIndex!==p.columnIndex,t.cellBoundaryCrossed=t.rowBoundaryCrossed||t.columnBoundaryCrossed,["row","column","cell"].forEach(function(R){t[R+"BoundaryCrossed"]&&(d.cell=w,t.dispatchEvent(R+"mouseout",d),d.cell=p,t.dispatchEvent(R+"mouseover",d))})),t.currentCell=p,t.hasFocus)){if(t.hovers={},!t.draggingItem&&p&&-1===t.scrollModes.indexOf(p.context)&&(t.dragItem=p,t.dragMode=p.dragContext,t.cursor=p.context,"cell"===p.context&&(t.cursor="default",t.hovers={rowIndex:p.rowIndex,columnIndex:p.columnIndex}),(t.selecting||t.reorderObject)&&"cell"===p.context)){if(m={x:Math.abs(t.dragStart.x-x),y:Math.abs(t.dragStart.y-C)},-1!==t.dragStartObject.columnIndex&&o.shiftKey&&(t.dragStartObject={rowIndex:t.activeCell.rowIndex,columnIndex:t.activeCell.columnIndex}),g={top:Math.min(t.dragStartObject.rowIndex,p.rowIndex),left:Math.min(t.dragStartObject.columnIndex,p.columnIndex),bottom:Math.max(t.dragStartObject.rowIndex,p.rowIndex),right:Math.max(t.dragStartObject.columnIndex,p.columnIndex)},-1===t.dragStartObject.columnIndex&&(l=t.getSelectionBounds(),g.left=-1,g.right=n.length-1,g.top=Math.min(l.top,p.rowIndex),g.bottom=Math.max(l.bottom,p.rowIndex)),(t.dragStartObject.rowIndex!==p.rowIndex||t.dragStartObject.columnIndex!==p.columnIndex)&&(t.ignoreNextClick=!0),(t.cellBoundaryCrossed||0===m.x&&0===m.y||"row"===t.attributes.selectionMode)&&("row"!==t.attributes.selectionMode&&-1!==t.dragStartObject.columnIndex||!t.rowBoundaryCrossed?"row"!==t.attributes.selectionMode&&(t.dragAddToSelection||void 0===p.rowIndex?(t.selections[p.rowIndex]=t.selections[p.rowIndex]||[],-1===t.selections[p.rowIndex].indexOf(p.columnIndex)&&t.selections[p.rowIndex].push(p.columnIndex)):t.selections[p.rowIndex]&&-1!==t.selections[p.rowIndex].indexOf(p.columnIndex)&&t.selections[p.rowIndex].splice(t.selections[p.rowIndex].indexOf(p.columnIndex),1)):t.selectRow(p.rowIndex,a,null,!0)),!(t.selectionBounds&&g.top===t.selectionBounds.top&&g.left===t.selectionBounds.left&&g.bottom===t.selectionBounds.bottom&&g.right===t.selectionBounds.right||a))if(t.selections=[],l=g,"row"===t.attributes.selectionMode)for(i=l.top;i<=l.bottom;i+=1)t.selectRow(i,!0,null,!0);else-1!==g.top&&t.selectArea(l,!0);t.autoScrollZone(o,x,C,a)}t.cellBoundaryCrossed=!1,t.rowBoundaryCrossed=!1,t.columnBoundaryCrossed=!1,t.draw(!0)}}},t.click=function(o,r){var a,i=JSON.stringify(t.getSelectionBounds()),n=(o.ctrlKey||o.metaKey||t.attributes.persistantSelectionMode)&&!t.attributes.singleSelectionMode,g=r||t.getLayerPos(o);if(t.currentCell=t.getCellAt(g.x,g.y),void 0===t.currentCell.grid)if(t.input&&t.endEdit(),t.ignoreNextClick)t.ignoreNextClick=!1;else if(a=t.currentCell,!t.dispatchEvent("click",{NativeEvent:o,cell:t.currentCell})&&t.hasFocus){if(-1===["rowHeaderCell","columnHeaderCell"].indexOf(t.currentCell.style)&&!n&&t.setActiveCell(a.columnIndex,a.rowIndex),"cell"===t.currentCell.context){if("cornerCell"===t.currentCell.style)return t.selectAll(),t.draw(),void l();if("columnHeaderCell"===t.currentCell.style){if("sort"===t.attributes.columnHeaderClickBehavior)return t.orderDirection=t.orderBy===a.header.name&&"asc"===t.orderDirection?"desc":"asc",t.order(a.header.name,t.orderDirection),void l();if("select"===t.attributes.columnHeaderClickBehavior)return t.selectColumn(a.header.index,n,o.shiftKey),void t.draw()}if(t.selections[a.rowIndex]=t.selections[a.rowIndex]||[],("row"===t.attributes.selectionMode||"rowHeaderCell"===t.currentCell.style)&&"rowHeaderCell"===t.currentCell.style&&t.attributes.tree&&g.x>0&&g.x-t.currentCell.x<t.style.treeArrowWidth+t.style.treeArrowMarginLeft+t.style.treeArrowMarginRight+t.style.treeArrowClickRadius&&g.y-t.currentCell.y<t.style.treeArrowHeight+t.style.treeArrowMarginTop+t.style.treeArrowClickRadius&&g.y>0)return void t.toggleTree(a.rowIndex);o.shiftKey&&!n&&(t.selectionBounds=t.getSelectionBounds(),t.selectArea(void 0,!1))}l(),t.draw(!0)}function l(){var x,C=t.getSelectionBounds();i!==JSON.stringify(C)&&(x={selections:t.selections,selectionBounds:t.getSelectionBounds()},Object.defineProperty(x,"selectedData",{get:function(){return t.getSelectedData()}}),t.dispatchEvent("selectionchanged",x))}},t.dragResizeColumn=function(o){var r,a,i;return r=t.getLayerPos(o),(a=t.resizingStartingWidth+r.x-t.dragStart.x)<t.style.minColumnWidth&&(a=t.style.minColumnWidth),(i=t.resizingStartingHeight+r.y-t.dragStart.y)<t.style.minRowHeight&&(i=t.style.minRowHeight),!t.dispatchEvent("resizecolumn",{x:a,y:i,draggingItem:t.draggingItem})&&(t.scrollBox.scrollLeft>t.scrollBox.scrollWidth-t.attributes.resizeScrollZone&&"ew-resize"===t.dragMode&&(t.resize(!0),t.scrollBox.scrollLeft+=a),"ew-resize"===t.dragMode?(t.sizes.columns["rowHeaderCell"===t.draggingItem.header.style?"cornerCell":t.draggingItem.sortColumnIndex]=a,-1!==["rowHeaderCell","cornerCell"].indexOf(t.draggingItem.header.style)&&t.resize(!0),void t.resizeChildGrids()):"ns-resize"===t.dragMode?(t.draggingItem.rowOpen?t.sizes.trees[t.draggingItem.rowIndex]=i:t.attributes.globalRowResize?t.style.cellHeight=i:t.sizes.rows[t.draggingItem.rowIndex]=i,t.dispatchEvent("resizerow",{row:i}),void t.resizeChildGrids()):void(t.ellipsisCache={}))},t.stopDragResize=function(){t.resize(),document.body.removeEventListener("mousemove",t.dragResizeColumn,!1),document.body.removeEventListener("mouseup",t.stopDragResize,!1),t.setStorageData(),t.draw(!0),t.ignoreNextClick=!0},t.scrollGrid=function(o){var r=t.getLayerPos(o);return t.attributes.scrollPointerLock&&t.pointerLockPosition&&-1!==["horizontal-scroll-box","vertical-scroll-box"].indexOf(t.scrollStartMode)&&(t.pointerLockPosition.x+=o.movementX,t.pointerLockPosition.y+=o.movementY,t.pointerLockPosition.x=Math.min(t.width-t.style.scrollBarWidth,Math.max(0,t.pointerLockPosition.x)),t.pointerLockPosition.y=Math.min(t.height-t.style.scrollBarWidth,Math.max(0,t.pointerLockPosition.y)),r=t.pointerLockPosition),t.scrollMode=t.getCellAt(r.x,r.y).context,"horizontal-scroll-box"===t.scrollMode&&"horizontal-scroll-box"!==t.scrollStartMode?(t.scrollStartMode="horizontal-scroll-box",t.dragStart=r,t.scrollStart.left=t.scrollBox.scrollLeft,void clearTimeout(t.scrollTimer)):"vertical-scroll-box"===t.scrollMode&&"vertical-scroll-box"!==t.scrollStartMode?(t.scrollStartMode="vertical-scroll-box",t.dragStart=r,t.scrollStart.top=t.scrollBox.scrollTop,void clearTimeout(t.scrollTimer)):("vertical-scroll-box"===t.scrollStartMode&&"vertical-scroll-box"!==t.scrollMode&&(t.scrollMode="vertical-scroll-box"),"horizontal-scroll-box"===t.scrollStartMode&&"horizontal-scroll-box"!==t.scrollMode&&(t.scrollMode="horizontal-scroll-box"),clearTimeout(t.scrollTimer),void(-1!==t.scrollModes.indexOf(t.scrollMode)&&("vertical-scroll-box"===t.scrollMode?t.scrollBox.scrollTop=t.scrollStart.top+(r.y-t.dragStart.y)/t.scrollBox.heightBoxRatio:"vertical-scroll-top"===t.scrollMode?(t.scrollBox.scrollTop-=t.page*t.style.cellHeight,t.scrollTimer=setTimeout(t.scrollGrid,t.attributes.scrollRepeatRate,o)):"vertical-scroll-bottom"===t.scrollMode&&(t.scrollBox.scrollTop+=t.page*t.style.cellHeight,t.scrollTimer=setTimeout(t.scrollGrid,t.attributes.scrollRepeatRate,o)),"horizontal-scroll-box"===t.scrollMode?t.scrollBox.scrollLeft=t.scrollStart.left+(r.x-t.dragStart.x)/t.scrollBox.widthBoxRatio:"horizontal-scroll-right"===t.scrollMode?(t.scrollBox.scrollLeft+=t.attributes.selectionScrollIncrement,t.scrollTimer=setTimeout(t.scrollGrid,t.attributes.scrollRepeatRate,o)):"horizontal-scroll-left"===t.scrollMode&&(t.scrollBox.scrollLeft-=t.attributes.selectionScrollIncrement,t.scrollTimer=setTimeout(t.scrollGrid,t.attributes.scrollRepeatRate,o)))))},t.stopScrollGrid=function(){clearTimeout(t.scrollTimer),document.exitPointerLock&&document.exitPointerLock(),document.removeEventListener("mousemove",t.scrollGrid,!1)},t.dragReorder=function(o){var r,a,i,n="column-reorder"===t.dragMode,g="row-reorder"===t.dragMode;a=(r=t.getLayerPos(o)).x-t.dragStart.x,i=r.y-t.dragStart.y,(t.attributes.allowColumnReordering||!n)&&(!t.attributes.allowRowReordering&&g||t.dispatchEvent("reordering",{NativeEvent:o,source:t.dragStartObject,target:t.currentCell,dragMode:t.dragMode})||(Math.abs(a)>t.attributes.reorderDeadZone||Math.abs(i)>t.attributes.reorderDeadZone)&&(t.reorderObject=t.draggingItem,t.reorderTarget=t.currentCell,t.reorderObject.dragOffset={x:a,y:i},t.autoScrollZone(o,n?r.x:-1,g?r.y:-1,!1)))},t.stopDragReorder=function(o){var r,a,i={"row-reorder":t.orders.rows,"column-reorder":t.orders.columns},n={"row-reorder":"rowIndex","column-reorder":"sortColumnIndex"}[t.dragMode];document.body.removeEventListener("mousemove",t.dragReorder,!1),document.body.removeEventListener("mouseup",t.stopDragReorder,!1),t.reorderObject&&t.reorderTarget&&("column-reorder"===t.dragMode&&t.reorderTarget.sortColumnIndex>-1&&t.reorderTarget.sortColumnIndex<t.getSchema().length||"row-reorder"===t.dragMode&&t.reorderTarget.rowIndex>-1&&t.reorderTarget.rowIndex<t.data.length)&&t.reorderObject[n]!==t.reorderTarget[n]&&!t.dispatchEvent("reorder",{NativeEvent:o,source:t.reorderObject,target:t.reorderTarget,dragMode:t.dragMode})&&(t.ignoreNextClick=!0,r=i[t.dragMode].indexOf(t.reorderObject[n]),a=i[t.dragMode].indexOf(t.reorderTarget[n]),i[t.dragMode].splice(r,1),i[t.dragMode].splice(a,0,t.reorderObject[n]),"column-reorder"===t.dragMode?t.orders.columns=i[t.dragMode]:t.orders.rows=i[t.dragMode],t.resize(),t.setStorageData()),t.reorderObject=void 0,t.reorderTarget=void 0,t.draw(!0)},t.dragMove=function(o){if(!t.dispatchEvent("moving",{NativeEvent:o,cell:t.currentCell})){var r=t.getLayerPos(o);t.moveOffset={x:t.currentCell.columnIndex-t.dragStartObject.columnIndex,y:t.currentCell.rowIndex-t.dragStartObject.rowIndex},(Math.abs(r.x)>t.attributes.reorderDeadZone||Math.abs(r.y)>t.attributes.reorderDeadZone)&&setTimeout(function(){t.autoScrollZone(o,r.x,r.y,!1)},1)}},t.stopDragMove=function(o){document.body.removeEventListener("mousemove",t.dragMove,!1),document.body.removeEventListener("mouseup",t.stopDragMove,!1);var r=t.getSelectionBounds();if(t.dispatchEvent("endmove",{NativeEvent:o,cell:t.currentCell}))return t.movingSelection=void 0,t.moveOffset=void 0,void t.draw(!0);t.moveOffset&&(t.moveTo(t.movingSelection,r.left+t.moveOffset.x,r.top+t.moveOffset.y),t.moveSelection(t.moveOffset.x,t.moveOffset.y)),t.movingSelection=void 0,t.moveOffset=void 0,t.draw(!0)},t.freezeMove=function(o){if(!t.dispatchEvent("freezemoving",{NativeEvent:o,cell:t.currentCell})){var r=t.getLayerPos(o);t.ignoreNextClick=!0,t.freezeMarkerPosition=r,t.currentCell&&void 0!==t.currentCell.rowIndex&&"frozen-row-marker"===t.dragMode&&(t.scrollBox.scrollTop=0,t.frozenRow=t.currentCell.rowIndex+1),t.currentCell&&void 0!==t.currentCell.columnIndex&&"frozen-column-marker"===t.dragMode&&(t.scrollBox.scrollLeft=0,t.frozenColumn=t.currentCell.columnIndex+1),(Math.abs(r.x)>t.attributes.reorderDeadZone||Math.abs(r.y)>t.attributes.reorderDeadZone)&&setTimeout(function(){t.autoScrollZone(o,r.x,r.y,!1)},1)}},t.stopFreezeMove=function(o){if(document.body.removeEventListener("mousemove",t.freezeMove,!1),document.body.removeEventListener("mouseup",t.stopFreezeMove,!1),t.freezeMarkerPosition=void 0,t.dispatchEvent("endfreezemove",{NativeEvent:o,cell:t.currentCell}))return t.frozenRow=t.startFreezeMove.x,t.frozenColumn=t.startFreezeMove.y,void t.draw(!0);t.draw(!0)},t.mousedown=function(o,r){if(t.lastMouseDownTarget=o.target,!t.dispatchEvent("mousedown",{NativeEvent:o,cell:t.currentCell})&&t.hasFocus&&2!==o.button&&!t.input){var a=o.ctrlKey||o.metaKey,i=/-move/.test(t.dragMode),n=/frozen-row-marker|frozen-column-marker/.test(t.dragMode),g=/-resize/.test(t.dragMode);if(t.dragStart=r||t.getLayerPos(o),t.scrollStart={left:t.scrollBox.scrollLeft,top:t.scrollBox.scrollTop},t.dragStartObject=t.getCellAt(t.dragStart.x,t.dragStart.y),t.dragAddToSelection=!t.dragStartObject.selected,!a&&!o.shiftKey&&!/(vertical|horizontal)-scroll-(bar|box)/.test(t.dragStartObject.context)&&t.currentCell&&!t.currentCell.isColumnHeader&&!i&&!n&&!g&&(t.selections=[]),!t.dragStartObject.isGrid){if(-1!==t.scrollModes.indexOf(t.dragStartObject.context))return t.scrollMode=t.dragStartObject.context,t.scrollStartMode=t.dragStartObject.context,t.scrollGrid(o),t.attributes.scrollPointerLock&&-1!==["horizontal-scroll-box","vertical-scroll-box"].indexOf(t.scrollStartMode)&&(t.pointerLockPosition={x:t.dragStart.x,y:t.dragStart.y},t.canvas.requestPointerLock()),document.addEventListener("mousemove",t.scrollGrid,!1),document.addEventListener("mouseup",t.stopScrollGrid,!1),void(t.ignoreNextClick=!0);if("cell"===t.dragMode)return t.selecting=!0,void(("row"===t.attributes.selectionMode||-1===t.dragStartObject.columnIndex)&&t.dragStartObject.rowIndex>-1?t.selectRow(t.dragStartObject.rowIndex,a,null):"row"!==t.attributes.selectionMode&&t.mousemove(o));if(i)return t.draggingItem=t.dragItem,t.movingSelection=t.selections.concat([]),t.dragging=t.dragStartObject,t.dispatchEvent("beginmove",{NativeEvent:o,cell:t.currentCell})?void 0:(document.body.addEventListener("mousemove",t.dragMove,!1),document.body.addEventListener("mouseup",t.stopDragMove,!1),t.mousemove(o));if(n)return t.draggingItem=t.dragItem,t.startFreezeMove={x:t.frozenRow,y:t.frozenColumn},t.dispatchEvent("beginfreezemove",{NativeEvent:o})?void 0:(document.body.addEventListener("mousemove",t.freezeMove,!1),document.body.addEventListener("mouseup",t.stopFreezeMove,!1),t.mousemove(o));if(g)return t.draggingItem=t.dragItem,t.resizingStartingHeight=t.draggingItem.rowOpen?t.sizes.trees[t.draggingItem.rowIndex]:t.sizes.rows[t.draggingItem.rowIndex]||t.style.cellHeight,t.resizingStartingWidth=t.sizes.columns["rowHeaderCell"===t.draggingItem.header.style?"cornerCell":t.draggingItem.sortColumnIndex]||t.draggingItem.width,document.body.addEventListener("mousemove",t.dragResizeColumn,!1),void document.body.addEventListener("mouseup",t.stopDragResize,!1);if(-1!==["row-reorder","column-reorder"].indexOf(t.dragMode))return t.draggingItem=t.dragStartObject,document.body.addEventListener("mousemove",t.dragReorder,!1),void document.body.addEventListener("mouseup",t.stopDragReorder,!1)}}},t.mouseup=function(o){clearTimeout(t.scrollTimer),t.cellBoundaryCrossed=!0,t.rowBoundaryCrossed=!0,t.columnBoundaryCrossed=!0,t.selecting=void 0,t.draggingItem=void 0,t.dragStartObject=void 0,!t.dispatchEvent("mouseup",{NativeEvent:o,cell:t.currentCell})&&(!t.hasFocus&&o.target!==t.canvas||t.currentCell&&void 0!==t.currentCell.grid||t.contextMenu||t.input||(t.dragStart&&t.isInGrid(t.dragStart)&&t.controlInput.focus(),o.preventDefault()))},t.getAdjacentCells=function(){var o,a=t.getSchema(),i={};for(o=0;o<a.length;o+=1)a[t.orders.columns[o]].hidden||(void 0===i.first&&(i.first=o,i.left=o),i.last=o,o>t.activeCell.columnIndex&&void 0===i.right&&(i.right=o),o<t.activeCell.columnIndex&&(i.left=o));return void 0===i.right&&(i.right=i.last),i},t.keydown=function(o){var r,a,i=t.getAdjacentCells(),n=t.activeCell.columnIndex,g=t.activeCell.rowIndex,l=o.ctrlKey||o.metaKey,x=t.data.length-1,p=t.getSchema().length-1;if(!t.dispatchEvent("keydown",{NativeEvent:o,cell:t.currentCell})&&t.hasFocus){if(t.attributes.showNewRow&&(x+=1),9===o.keyCode&&o.preventDefault(),27===o.keyCode?(t.selections=[],t.draw(!0)):l&&65===o.keyCode?t.selectAll():40===o.keyCode?g+=1:38===o.keyCode?g-=1:37===o.keyCode||o.shiftKey&&9===o.keyCode?n=i.left:39===o.keyCode||!o.shiftKey&&9===o.keyCode?n=i.right:33===o.keyCode?(g-=t.page,o.preventDefault()):34===o.keyCode?(g+=t.page,o.preventDefault()):36===o.keyCode||l&&38===o.keyCode?g=0:35===o.keyCode||l&&40===o.keyCode?g=t.data.length-1:l&&39===o.keyCode?n=i.last:l&&37===o.keyCode&&(n=i.first),13===o.keyCode)return t.beginEditAt(n,g,o);if(32===o.keyCode){if(t.selections=[],t.selections[Math.max(g,0)]=[],t.selections[Math.max(g,0)].push(n),t.selectionBounds=t.getSelectionBounds(),"row"===t.attributes.selectionMode)for(r=t.selectionBounds.top;r<=t.selectionBounds.bottom;r+=1)t.selectRow(r,l,null,!0);else t.selectArea(void 0,l);return o.preventDefault(),void t.draw(!0)}(n<0||Number.isNaN(n))&&(n=i.first),g>x&&(g=x),(g<0||Number.isNaN(g))&&(g=0),n>p&&(n=i.last),o.shiftKey&&-1!==[37,38,39,40].indexOf(o.keyCode)&&(t.selections[Math.max(g,0)]=t.selections[Math.max(g,0)]||[],t.selections[Math.max(g,0)].push(n),t.selectionBounds=t.getSelectionBounds(),t.selectArea(void 0,l),t.draw(!0)),(n!==t.activeCell.columnIndex||g!==t.activeCell.rowIndex)&&(t.scrollIntoView(n!==t.activeCell.columnIndex?n:void 0,g===t.activeCell.rowIndex||Number.isNaN(g)?void 0:g),t.setActiveCell(n,g),!o.shiftKey&&t.attributes.selectionFollowsActiveCell&&(l||(t.selections=[]),t.selections[g]=t.selections[g]||[],t.selections[g].push(n),a={selectedData:t.getSelectedData(),selections:t.selections,selectionBounds:t.getSelectionBounds()},Object.defineProperty(a,"selectedData",{get:function(){return t.getSelectedData()}}),t.dispatchEvent("selectionchanged",a)),t.draw(!0))}},t.keyup=function(o){t.dispatchEvent("keyup",{NativeEvent:o,cell:t.currentCell})},t.keypress=function(o){t.hasFocus&&t.dispatchEvent("keypress",{NativeEvent:o,cell:t.currentCell})},t.dblclick=function(o){t.dispatchEvent("dblclick",{NativeEvent:o,cell:t.currentCell})||t.hasFocus&&("ew-resize"===t.currentCell.context&&"columnHeaderCell"===t.currentCell.style?t.fitColumnToValues(t.currentCell.header.name):"ew-resize"===t.currentCell.context&&"cornerCell"===t.currentCell.style?t.autosize():-1!==["cell","activeCell"].indexOf(t.currentCell.style)&&t.beginEditAt(t.currentCell.columnIndex,t.currentCell.rowIndex))},t.scrollWheel=function(x){var r,a,i=x,n=void 0===x.deltaX?x.NativeEvent.deltaX:x.deltaX,g=void 0===x.deltaY?x.NativeEvent.deltaY:x.deltaY,l=void 0===x.deltaMode?x.NativeEvent.deltaMode:x.deltaMode;c||t.dispatchEvent("wheel",{NativeEvent:x})||(x=x.NativeEvent||x,t.touchHaltAnimation=!0,r=t.scrollBox.scrollLeft,a=t.scrollBox.scrollTop,t.hasFocus&&(1===l&&(g*=17),(t.scrollBox.scrollTop<t.scrollBox.scrollHeight&&g>0||t.scrollBox.scrollLeft<t.scrollBox.scrollWidth&&n>0||t.scrollBox.scrollTop>0&&g<0||t.scrollBox.scrollLeft>0&&n<0)&&i.preventDefault(x),c=setTimeout(function(){c=void 0,t.scrollBox.scrollTo(n+r,g+a)},1)))},t.pasteData=function(o,r,a,i){var n=t.getVisibleSchema();if("text/html"===r&&!1===/^(<meta[^>]+>)?<table>/.test(o.substring(0,29)))return console.warn("Unrecognized HTML format. HTML must be a simple table, e.g.: <table><tr><td>data</td></tr></table>."),void console.warn("Data with the mime type text/html not in this format will not be imported as row data.");for(var x=function l(W,K){return"text/html"===K?W.substring(W.indexOf("<table><tr>")+11,W.length-13).split("</tr><tr>").filter(at=>!/^<th>|^<thead>/.test(at)).map(at=>at.match(/<td>[^<]+/g).map(z=>z.replace(/^<td>/,""))):W.split("\n").map(at=>[at])}(o,r),C=[],p=0;p<x.length;p++){var m=t.orders.rows[a+p],d=x[p],w=t.data[m],R=Object.assign({},w);C[m]=[];for(var T=0;T<d.length;T++){var H=n[i+T];if(H){var L=H.name,D=d[T];null!=D?(C[m].push(i+T),R[L]=D):R[L]=w[L]}else console.warn("Paste data exceeded grid bounds. Skipping.")}t.data[m]=R}t.selections=C;var J=[];return C.forEach(function(W,K){void 0!==K&&W.forEach(function(ot){J.push([K,ot])})}),t.dispatchEvent("afterpaste",{cells:J}),x.length},t.getNextVisibleColumnIndex=function(o){var r,a=t.getVisibleSchema();for(r=0;r<a.length;r+=1)if(a[r].columnIndex===o)return a[r+1].columnIndex;return-1},t.getVisibleColumnIndexOf=function(o){var r,a=t.getVisibleSchema();for(r=0;r<a.length;r+=1)if(a[r].columnIndex===o)return r;return-1},t.paste=function(o){if(!t.dispatchEvent("beforepaste",{NativeEvent:o})){var a=new Map(Array.from(o.clipboardData.items).map(x=>[x.type,x])),i=["text/html","text/csv","text/plain"],n=i.map(x=>a.get(x)).filter(x=>!!x);if(0===n.length)return void console.warn("Cannot find supported clipboard data type. Supported types are:",i.join(", "));var g=n[0],l=g.type;g.getAsString(function(x){t.pasteData(x,l,t.activeCell.rowIndex,t.getVisibleColumnIndexOf(t.activeCell.columnIndex)),t.draw()})}},t.cut=function(o){t.copy(o),t.forEachSelectedCell(function(r,a,i){r[a][i]=""})},t.copy=function(o){if(!t.dispatchEvent("copy",{NativeEvent:o})&&t.hasFocus&&o.clipboardData){var r,a,x,n=[],g=[],l={},C=t.getSelectedData(),p=t.getSchema();C.length>0&&(C.forEach(function(T){var H=Object.keys(T);if(T){var L=[],D=[],J=[];p.forEach(function(W,K){J.push(p[t.orders.columns[K]])}),J.forEach(function(W,K){-1!==H.indexOf(W.name)&&(l[W.name]=!0,function R(T,H,L,D){null!==T&&!1!==T&&void 0!==T&&T.replace?(H.push(d(T)),L.push('"'+T.replace(/"/g,'""')+'"')):void 0!==T?(L.push(T),H.push(d(T))):(L.push(""),H.push("<td>&nbsp;</td>"))}(T[W.name],L,D))}),n.push(L.join("")),g.push(D.join(","))}}),r=w(x=Object.keys(l))+g.join("\n"),a="<table>"+w(x,!0)+"<tr>"+n.join("</tr><tr>")+"</tr></table>",1===x.length&&(r=r.substring(1,r.length-1)),o.clipboardData.setData("text/html",a),o.clipboardData.setData("text/plain",r),o.clipboardData.setData("text/csv",r),o.clipboardData.setData("application/json",JSON.stringify(C)),o.preventDefault())}function m(T){return T.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(T){return"<td>"+("string"==typeof(T=T??"")?m(T):T)+"</td>"}function w(T,H){if(!p.length||T.length<2)return"";var L=[];return H&&L.push("<tr>"),p.forEach(function(D,J){if(!(D=p[t.orders.columns[J]]).hidden&&-1!==T.indexOf(D.name)){var W={NativeEvent:o,column:D};t.dispatchEvent("copyonschema",W)&&(D=W.column);var K=D.name||D.title||"";L.push(H?"<th>"+m(K)+"</th>":'"'+K.replace(/"/g,'""')+'"')}}),L.push(H?"</tr>":"\n"),L.join(H?"":",")}}}}.apply(S,[]))&&(M.exports=b)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){var r,a;t.scrollAnimation={},t.touchDelta={},t.touchAnimateTo={},t.animationFrames=0,t.getTouchPos=function(n,g){var C,l=g?n.touches[g]:n.touches[0],x=t.canvas.getBoundingClientRect();if(l)return C={x:l.clientX-x.left,y:l.clientY-x.top},t.isChildGrid&&(C.x-=t.canvasOffsetLeft,C.y-=t.canvasOffsetTop),{x:C.x,y:C.y,rect:x}},t.easingFunctions={linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return n*(2-n)},easeInOutQuad:function(n){return n<.5?2*n*n:(4-2*n)*n-1},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return--n*n*n+1},easeInOutCubic:function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1- --n*n*n*n},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1+--n*n*n*n*n},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}},t.easing=function(n,g,l,x){return l*t.easingFunctions[t.attributes.touchEasingMethod](n/x)+g},t.calculatePPSTimed=function(){t.xPPST=-(t.touchDelta.x-t.touchSigmaTimed.x)/(t.touchDelta.t-t.touchSigmaTimed.t),t.yPPST=-(t.touchDelta.y-t.touchSigmaTimed.y)/(t.touchDelta.t-t.touchSigmaTimed.t),t.touchSigmaTimed={x:t.touchDelta.x,y:t.touchDelta.y,t:performance.now()}},t.calculatePPS=function(){t.xPPS=-(t.touchDelta.x-t.touchSigma.x)/(t.touchDelta.t-t.touchSigma.t),t.yPPS=-(t.touchDelta.y-t.touchSigma.y)/(t.touchDelta.t-t.touchSigma.t),t.touchSigma={x:t.touchDelta.x,y:t.touchDelta.y,t:performance.now()}},t.touchEndAnimation=function(){if(!t.canvas||!t.scrollBox.scrollTo)return requestAnimationFrame(t.touchEndAnimation);var l,n=performance.now(),g=t.attributes.touchReleaseAnimationDurationMs;l=n-t.touchDelta.t,t.animationFrames+=1,t.scrollAnimation.x=t.easing(l,t.touchDelta.scrollLeft,t.touchAnimateTo.x,g),t.scrollAnimation.y=t.easing(l,t.touchDelta.scrollTop,t.touchAnimateTo.y,g),!(l>g||t.scrollAnimation.y===t.scrollBox.scrollTop&&t.scrollAnimation.x===t.scrollBox.scrollLeft||t.stopAnimation)&&(t.scrollBox.scrollTo(t.scrollAnimation.x,t.scrollAnimation.y),requestAnimationFrame(t.touchEndAnimation))},t.touchEditCell=function(n){t.beginEditAt(n.columnIndex,n.rowIndex)},t.touchCell=function(n){return function(){clearInterval(t.calculatePPSTimer);var g,l=t.getTouchPos(n);if(Math.abs(t.touchDelta.x)+Math.abs(t.touchDelta.y)<t.attributes.touchDeadZone){if(!(g=t.getCellAt(l.x,l.y)))return;if(t.touchingCell&&t.touchingCell.rowIndex===g.rowIndex&&t.touchingCell.columnIndex===g.columnIndex)return void t.touchEditCell(g);t.input&&t.input.editCell&&t.endEdit(),t.touchingCell=g,t.selectArea({top:g.rowIndex,bottom:g.rowIndex,left:g.columnIndex,right:g.columnIndex}),t.draw(!0)}}},t.touchstart=function(n){if(n.changedTouches[0]&&(t.touchStart=t.getTouchPos(n),t.startingCell=t.getCellAt(t.touchStart.x,t.touchStart.y,!0)),!t.dispatchEvent("touchstart",{NativeEvent:n,cell:t.startingCell})){if(t.disposeContextMenu(),clearInterval(t.calculatePPSTimer),clearTimeout(t.touchContextTimeout),t.touchStartEvent=n,t.stopAnimation=!0,t.animationFrames=0,t.stopPropagation(n),n.preventDefault(),1===n.touches.length&&n.changedTouches[0]&&!t.zoomAltered){if(t.touchLength=1,t.touchStart=t.touchStart||t.touchStart1,t.touchScrollStart={x:t.scrollBox.scrollLeft,y:t.scrollBox.scrollTop,t:performance.now()},t.touchDelta={x:0,y:0,scrollLeft:t.scrollBox.scrollLeft,scrollTop:t.scrollBox.scrollTop,t:t.touchScrollStart.t},t.touchSigma={x:t.touchDelta.x,y:t.touchDelta.y,t:t.touchDelta.t},t.touchSigmaTimed={x:t.touchDelta.x,y:t.touchDelta.y,t:t.touchDelta.t},t.touchContextTimeout=setTimeout(function(){t.contextmenuEvent(n,t.touchStart)},t.attributes.touchContextMenuTimeMs),t.calculatePPSTimer=setInterval(t.calculatePPSTimed,50),t.startingCell&&(t.startingCell.isGrid||-1!==["tree","inherit"].indexOf(t.startingCell.context)))return void(t.hasFocus=!1);if(t.hasFocus=!0,t.startingCell.isHeader)return t.startingCell.isRowHeader?(t.selectArea({top:t.startingCell.rowIndex,bottom:t.startingCell.rowIndex,left:0,right:t.getVisibleSchema().length-1}),t.draw(!0)):t.startingCell.isColumnHeader&&("sort"===t.attributes.columnHeaderClickBehavior&&(t.orderDirection=t.orderBy===t.startingCell.header.name&&"asc"===t.orderDirection?"desc":"asc",t.order(t.startingCell.header.name,t.orderDirection)),"select"===t.attributes.columnHeaderClickBehavior&&(t.selectArea({top:0,bottom:t.data.length-1,left:t.startingCell.columnIndex,right:t.startingCell.columnIndex}),t.draw(!0))),void t.touchEndEvents(n)}t.zoomAltered||(document.body.addEventListener("touchmove",t.touchmove,{passive:!1}),document.body.addEventListener("touchend",t.touchend,!1),document.body.addEventListener("touchcancel",t.touchcancel,!1),t.draw(!0))}},t.touchSelect=function(n,g){if(void 0!==n.rowIndex&&void 0!==n.columnIndex){t.touchSelecting=!0;var l=t.getSelectionBounds();"selection-handle-bl"===g&&n.rowIndex>=l.top&&n.columnIndex<=l.right?(l.bottom=n.rowIndex,l.left=n.columnIndex):"selection-handle-tl"===g&&n.rowIndex<=l.bottom&&n.columnIndex<=l.right?(l.top=n.rowIndex,l.left=n.columnIndex):"selection-handle-tr"===g&&n.rowIndex<=l.bottom&&n.columnIndex>=l.left?(l.top=n.rowIndex,l.right=n.columnIndex):"selection-handle-br"===g&&n.rowIndex>=l.top&&n.columnIndex>=l.left&&(l.bottom=n.rowIndex,l.right=n.columnIndex),"row"===t.attributes.selectionMode||-1===n.rowIndex?(l.left=0,l.right=t.getSchema().length-1):l.left=Math.max(0,l.left),t.selectArea(l),t.draw(!0)}},t.touchmove=function(n){r||requestAnimationFrame(function(){r=!0,function i(n){var g,l,x,C,p,m,d,w,R;if(!t.dispatchEvent("beforetouchmove",{NativeEvent:n})){if(clearTimeout(a),n.changedTouches[0]&&(t.touchPosition=t.getTouchPos(n)),n.changedTouches[1]&&(t.touchPosition1=t.getTouchPos(n,1)),Math.abs(t.touchDelta.x)+Math.abs(t.touchDelta.y)>t.attributes.touchDeadZone&&clearTimeout(t.touchContextTimeout),2===n.touches.length&&t.touchPosition&&t.touchPosition1)return w=t.touchPosition.y,R=t.touchPosition1.y,t.zoomDeltaStart||(t.zoomDeltaStart=Math.abs(w-R),t.startScale=t.scale),t.touchLength=2,t.scaleDelta=t.zoomDeltaStart-Math.abs(w-R),t.scale=t.startScale-t.scaleDelta*t.attributes.touchZoomSensitivity,t.scale=Math.min(Math.max(t.scale,t.attributes.touchZoomMin),t.attributes.touchZoomMax),t.zoomAltered=!0,t.resize(!0),void t.resizeChildGrids();t.zoomAltered||(t.touchLength=1,t.touchPosition=t.touchPosition||t.touchPosition1,g=t.getColumnHeaderCellHeight(),l=t.getRowHeaderCellWidth(),x=t.width-t.style.scrollBarWidth-t.touchPosition.x<t.attributes.selectionScrollZone,C=t.touchPosition.x-l<t.attributes.selectionScrollZone,p=t.height-t.style.scrollBarWidth-t.touchPosition.y<t.attributes.selectionScrollZone,m=t.touchPosition.y-g<t.attributes.selectionScrollZone,d=t.style.scrollBarWidth,n.stopPropagation(),t.touchDelta={x:t.touchPosition.x-t.touchStart.x,y:t.touchPosition.y-t.touchStart.y,scrollLeft:t.scrollBox.scrollLeft,scrollTop:t.scrollBox.scrollTop,t:performance.now()},t.currentCell=t.getCellAt(t.touchPosition.x,t.touchPosition.y),t.dispatchEvent("touchmove",{NativeEvent:n,cell:t.currentCell}),t.calculatePPS(),t.touchDuration=performance.now()-t.touchScrollStart.t,t.stopAnimation=!0,t.animationFrames=0,t.touchSelecting&&(x||C||m||p)&&function T(){var H=t.scrollBox.scrollLeft,L=t.scrollBox.scrollTop;H+=x?t.attributes.selectionScrollIncrement:0,L+=p?t.attributes.selectionScrollIncrement:0,t.scrollBox.scrollTo(H-=C?t.attributes.selectionScrollIncrement:0,L-=m?t.attributes.selectionScrollIncrement:0),a=setTimeout(T,t.attributes.scrollRepeatRate)}(),/vertical-scroll-/.test(t.startingCell.style)?t.scrollBox.scrollTop=t.scrollBox.scrollHeight*((t.touchPosition.y-g-d)/(t.scrollBox.height-d-g)):/horizontal-scroll-/.test(t.startingCell.style)?t.scrollBox.scrollLeft=t.scrollBox.scrollWidth*((t.touchPosition.x-l-d)/(t.scrollBox.width-d-l)):/selection-handle-/.test(t.startingCell.style)?t.touchSelect(t.currentCell,t.startingCell.style):t.scrollBox.scrollTo(t.touchScrollStart.x-t.touchDelta.x,t.touchScrollStart.y-t.touchDelta.y))}}(n),r=!1})},t.touchEndEvents=function(n){t.zoomDeltaStart=void 0,t.touchSelecting=!1,clearInterval(t.touchScrollTimeout),clearInterval(t.touchContextTimeout),clearInterval(t.calculatePPSTimer),n.stopPropagation(),document.body.removeEventListener("touchmove",t.touchmove,{passive:!1}),document.body.removeEventListener("touchend",t.touchend,!1),document.body.removeEventListener("touchcancel",t.touchcancel,!1)},t.touchend=function(n){if(!t.dispatchEvent("touchend",{NativeEvent:n,cell:t.currentCell})){if(t.zoomDeltaStart=void 0,n.changedTouches[0]&&(t.touchPosition=void 0),n.changedTouches[1]&&(t.touchPosition1=void 0),t.zoomAltered)return void(0===n.touches.length&&(t.zoomAltered=!1));var g=Math.abs(t.touchDelta.x)+Math.abs(t.touchDelta.y)<t.attributes.touchDeadZone;isNaN(t.xPPS)&&(t.xPPS=0),isNaN(t.yPPS)&&(t.yPPS=0),isNaN(t.xPPST)&&(t.xPPST=0),isNaN(t.yPPST)&&(t.yPPST=0),t.touchAnimateTo.x=t.xPPS*t.attributes.touchReleaseAcceleration,t.touchAnimateTo.y=t.yPPS*t.attributes.touchReleaseAcceleration,t.calculatePPSTimed(),g&&!t.contextMenu?t.touchCell(t.touchStartEvent)():0===t.animationFrames&&(Math.abs(t.xPPST)>t.attributes.scrollAnimationPPSThreshold||Math.abs(t.yPPST)>t.attributes.scrollAnimationPPSThreshold)&&!/-scroll-/.test(t.startingCell.style)&&!g&&(t.stopAnimation=!1,t.touchEndAnimation()),t.touchEndEvents(n)}},t.touchcancel=function(n){t.dispatchEvent("touchcancel",{NativeEvent:n,cell:t.currentCell})||t.touchEndEvents(n)}}}.apply(S,[]))&&(M.exports=b)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t,c){function o(r,a){var n,i=[];for(n=r;n<=a;n+=1)i[n]=n;return i}t.scale=1,t.orders={rows:[],columns:[]},t.appliedInlineStyles={},t.cellGridAttributes={},t.treeGridAttributes={},t.visibleRowHeights=[],t.hasFocus=!1,t.activeCell={columnIndex:0,rowIndex:0},t.innerHTML="",t.storageName="canvasDataGrid",t.invalidSearchExpClass="canvas-datagrid-invalid-search-regExp",t.localStyleLibraryStorageKey="canvas-datagrid-user-style-library",t.dataType="application/x-canvas-datagrid",t.orderBy=null,t.orderDirection="asc",t.orderings={columns:[],add:function(r,a,i){t.orderings.columns=t.orderings.columns.filter(function(n){return n.orderBy!==r}),t.orderings.columns.push({orderBy:r,orderDirection:a,sortFunction:i})},sort:function(){t.orderings.columns.forEach(function(r){t.data.sort(r.sortFunction(r.orderBy,r.orderDirection))})}},t.columnFilters={},t.filters={},t.frozenRow=0,t.frozenColumn=0,t.ellipsisCache={},t.scrollCache={x:[],y:[]},t.scrollBox={},t.visibleRows=[],t.visibleCells=[],t.sizes={rows:{},columns:{},trees:{}},t.currentFilter=function(){return!0},t.selections=[],t.hovers={},t.attributes={},t.style={},t.formatters={},t.sorters={},t.parsers={},t.schemaHashes={},t.events={},t.changes=[],t.scrollIndexTop=0,t.scrollPixelTop=0,t.scrollIndexLeft=0,t.scrollPixelLeft=0,t.childGrids={},t.openChildren={},t.scrollModes=["vertical-scroll-box","vertical-scroll-top","vertical-scroll-bottom","horizontal-scroll-box","horizontal-scroll-right","horizontal-scroll-left"],t.componentL1Events={},t.eventNames=["afterdraw","afterrendercell","attributechanged","beforebeginedit","beforecreatecellgrid","beforedraw","beforeendedit","beforerendercell","beforerendercellgrid","beginedit","cellmouseout","cellmouseover","click","collapsetree","contextmenu","copy","datachanged","dblclick","endedit","expandtree","formatcellvalue","keydown","keypress","keyup","mousedown","mousemove","mouseup","newrow","ordercolumn","rendercell","rendercellgrid","renderorderbyarrow","rendertext","rendertreearrow","reorder","reordering","resize","resizecolumn","resizerow","schemachanged","scroll","selectionchanged","stylechanged","touchcancel","touchend","touchmove","touchstart","wheel"],t.mouse={x:0,y:0},t.getSelectedData=function(r){var a=[],i=t.getSchema(),n=t.data.length;return 0===n?[]:(t.selections.forEach(function(g,l){if(g&&l!==n){if(0===g.length)return void(a[l]=null);a[l]={},g.forEach(function(x){var C;-1===x||!i[x]||(C=t.orders.columns[x],(r||!i[C].hidden)&&t.data[l]&&(a[l][i[C].name]=t.data[l][i[C].name]))})}}),a)},t.getColumnHeaderCellHeight=function(){return t.attributes.showColumnHeaders?(t.sizes.rows[-1]||t.style.columnHeaderCellHeight)*t.scale:0},t.getRowHeaderCellWidth=function(){return t.attributes.showRowHeaders?(t.sizes.columns[-1]||t.style.rowHeaderCellWidth)*t.scale:0},t.setStorageData=function(){if(t.attributes.saveAppearance&&t.attributes.name){var r={};t.getSchema().forEach(function(a){r[a.name]=!a.hidden}),localStorage.setItem(t.storageName+"-"+t.attributes.name,JSON.stringify({sizes:{rows:t.sizes.rows,columns:t.sizes.columns},orders:{rows:t.orders.rows,columns:t.orders.columns},orderBy:t.orderBy,orderDirection:t.orderDirection,visibility:r}))}},t.getSchema=function(){return t.schema||t.tempSchema||[]},t.createColumnOrders=function(){var r=t.getSchema();t.orders.columns=o(0,r.length-1)},t.createRowOrders=function(){t.orders.rows=o(0,t.data.length-1)},t.getVisibleSchema=function(){return t.getSchema().filter(function(r){return!r.hidden})},t.applyDefaultValue=function(r,a){var i=a.defaultValue||"";"function"==typeof i&&(i=i.apply(t.intf,[a])),r[a.name]=i},t.createNewRowData=function(){t.newRow={},t.getSchema().forEach(function(a){t.applyDefaultValue(t.newRow,a)})},t.getSchemaNameHash=function(r){for(var a=0;t.schemaHashes[r];)r+=a+=1;return r},t.filter=function(r){var a=t.filters[r];return!a&&void 0!==r&&(console.warn("Cannot find filter for type %s, falling back to substring match.",r),a=t.filters.string),a},t.applyFilter=function(){t.refreshFromOrigialData(),Object.keys(t.columnFilters).forEach(function(r){var a=t.getHeaderByName(r);a&&(t.currentFilter=a.filter||t.filter(a.type||"string"),t.data=t.data.filter(function(i){return t.currentFilter(i[r],t.columnFilters[r])}))}),t.resize(),t.draw(!0)},t.applyDataTransforms=function(){t.applyFilter(),t.orderings.sort()},t.getBestGuessDataType=function(r,a){var i,n,g=a.length;for(n=0;n<g;n+=1)if(null!=a[n]&&-1!==[null,void 0].indexOf(a[n][r]))return"object"==(i=typeof a[n])?"string":i;return"string"},t.drawChildGrids=function(){Object.keys(t.childGrids).forEach(function(r){t.childGrids[r].draw()})},t.resizeChildGrids=function(){Object.keys(t.childGrids).forEach(function(r){t.childGrids[r].resize()})},t.autoScrollZone=function(r,a,i,n){var g,l=t.getRowHeaderCellWidth(),x=t.getColumnHeaderCellHeight();-1!==i&&(a>t.width-t.attributes.selectionScrollZone&&a<t.width&&(t.scrollBox.scrollLeft+=t.attributes.selectionScrollIncrement,g=!0),a-t.attributes.selectionScrollZone-l<0&&(t.scrollBox.scrollLeft-=t.attributes.selectionScrollIncrement,g=!0)),-1!==i&&(i>t.height-t.attributes.selectionScrollZone&&i<t.height&&(t.scrollBox.scrollTop+=t.attributes.selectionScrollIncrement,g=!0),i-t.attributes.selectionScrollZone-x<0&&(t.scrollBox.scrollTop-=t.attributes.selectionScrollIncrement,g=!0)),g&&!n&&t.currentCell&&-1!==t.currentCell.columnIndex&&(t.scrollTimer=setTimeout(t.mousemove,t.attributes.scrollRepeatRate,r))},t.refreshFromOrigialData=function(){t.data=t.originalData.filter(function(r){return!0})},t.validateColumn=function(r,a){if(!r.name)throw new Error("A column must contain at least a name.");if(a.filter(function(i){return i.name===r.name}).length>0)throw new Error("A column with the name "+r.name+" already exists and cannot be added again.");return!0},t.setDefaults=function(r,a,i,n){r[i]=void 0===a[i]?n:a[i]},t.setAttributes=function(){t.defaults.attributes.forEach(function(a){t.setDefaults(t.attributes,t.args,a[0],a[1])})},t.setStyle=function(){t.defaults.styles.forEach(function(a){t.setDefaults(t.style,t.args.style||{},a[0],a[1])})},t.autosize=function(r){t.getVisibleSchema().forEach(function(a,i){(a.name===r||void 0===r)&&(t.sizes.columns[i]=Math.max(t.findColumnMaxTextLength(a.name),t.style.minColumnWidth))}),t.sizes.columns[-1]=t.findColumnMaxTextLength("cornerCell")},t.dispose=function(){!t.isChildGrid&&t.canvas&&t.canvas.parentNode&&t.canvas.parentNode.removeChild(t.canvas),t.isChildGrid||document.body.removeChild(t.controlInput),t.eventParent.removeEventListener("mouseup",t.mouseup,!1),t.eventParent.removeEventListener("mousedown",t.mousedown,!1),t.eventParent.removeEventListener("dblclick",t.dblclick,!1),t.eventParent.removeEventListener("click",t.click,!1),t.eventParent.removeEventListener("mousemove",t.mousemove),t.eventParent.removeEventListener("wheel",t.scrollWheel,!1),t.canvas.removeEventListener("contextmenu",t.contextmenu,!1),t.canvas.removeEventListener("copy",t.copy),t.controlInput.removeEventListener("copy",t.copy),t.controlInput.removeEventListener("cut",t.cut),t.controlInput.removeEventListener("paste",t.paste),t.controlInput.removeEventListener("keypress",t.keypress,!1),t.controlInput.removeEventListener("keyup",t.keyup,!1),t.controlInput.removeEventListener("keydown",t.keydown,!1),window.removeEventListener("resize",t.resize),t.observer&&t.observer.disconnect&&t.observer.disconnect()},t.tryLoadStoredSettings=function(){var r;t.reloadStoredValues(),t.storedSettings&&"object"==typeof t.storedSettings.orders&&null!==t.storedSettings.orders&&(t.storedSettings.orders.rows.length>=(t.data||[]).length&&(t.orders.rows=t.storedSettings.orders.rows),r=t.getSchema(),t.storedSettings.orders.columns.length===r.length&&(t.orders.columns=t.storedSettings.orders.columns),t.orderBy=void 0===t.storedSettings.orderBy?r[0].name:t.storedSettings.orderBy,t.orderDirection=void 0===t.storedSettings.orderDirection?"asc":t.storedSettings.orderDirection,void 0!==t.storedSettings.orderBy&&t.getHeaderByName(t.orderBy)&&t.orderDirection&&t.order(t.orderBy,t.orderDirection))},t.getDomRoot=function(){return t.shadowRoot?t.shadowRoot.host:t.parentNode},t.getFontName=function(r){return r.replace(/\d+\.?\d*px/,"")},t.getFontHeight=function(r){return parseFloat(r,10)},t.parseStyleValue=function(r){if(/Font/.test(r))return t.style[r+"Height"]=t.getFontHeight(t.style[r]),void(t.style[r+"Name"]=t.getFontName(t.style[r]));"moveOverlayBorderSegments"===r&&"string"==typeof t.style[r]&&(t.style[r]=t.style[r].split(",").map(function(a){return parseInt(a,10)}))},t.initProp=function(r){t.args[r]&&Object.keys(t.args[r]).forEach(function(a){t[r][a]=t.args[r][a]})},t.getStyleProperty=function(r){return-1===t.styleKeys.indexOf(r)?t.parentNodeStyle[r]:t.style[r]},t.setStyleProperty=function(r,a,i){var n=-1!==["height","width","minHeight","minWidth","maxHeight","maxWidth"].indexOf(r);-1===t.styleKeys.indexOf(r)?t.parentNodeStyle[r]=a:(/-/.test(r)&&(r=t.dehyphenateProperty(r)),t.style[r]=a,t.parseStyleValue(r)),n&&t.resize(),i||(t.draw(!0),t.dispatchEvent("stylechanged",{name:"style",value:a}))},t.reloadStoredValues=function(){if(t.attributes.name&&t.attributes.saveAppearance){try{t.storedSettings=localStorage.getItem(t.storageName+"-"+t.attributes.name)}catch(r){console.warn("Error loading stored values. "+r.message),t.storedSettings=void 0}if(t.storedSettings)try{t.storedSettings=JSON.parse(t.storedSettings)}catch(r){console.warn("could not read settings from localStore",r),t.storedSettings=void 0}t.storedSettings&&("object"==typeof t.storedSettings.sizes&&null!==t.storedSettings.sizes&&(t.sizes.rows=t.storedSettings.sizes.rows,t.sizes.columns=t.storedSettings.sizes.columns,["trees","columns","rows"].forEach(function(r){t.sizes[r]||(t.sizes[r]={})})),"object"==typeof t.storedSettings.visibility&&t.getSchema().forEach(function(r){t.storedSettings.visibility&&void 0!==t.storedSettings.visibility[r.name]&&(r.hidden=!t.storedSettings.visibility[r.name])}))}},t.init=function(){if(!t.initialized){var a={};return t.setAttributes(),t.setStyle(),t.initScrollBox(),t.setDom(),t.nodeType="canvas-datagrid",t.ie=/Trident/.test(window.navigator.userAgent),t.edge=/Edge/.test(window.navigator.userAgent),t.webKit=/WebKit/.test(window.navigator.userAgent),t.moz=/Gecko/.test(window.navigator.userAgent),t.mobile=/Mobile/i.test(window.navigator.userAgent),t.cursorGrab="grab",t.cursorGrabing="grabbing",t.cursorGrab=t.webKit?"-webkit-grab":t.cursorGrab,t.cursorGrabing=t.moz?"-webkit-grabbing":t.cursorGrabbing,t.pointerLockPosition={x:0,y:0},Object.keys(t.style).forEach(t.parseStyleValue),t.intf.moveSelection=t.moveSelection,t.intf.moveTo=t.moveTo,t.intf.addEventListener=t.addEventListener,t.intf.removeEventListener=t.removeEventListener,t.intf.dispatchEvent=t.dispatchEvent,t.intf.dispose=t.dispose,t.intf.appendTo=t.appendTo,t.intf.getVisibleCellByIndex=t.getVisibleCellByIndex,t.intf.filters=t.filters,t.intf.sorters=t.sorters,t.intf.autosize=t.autosize,t.intf.beginEditAt=t.beginEditAt,t.intf.endEdit=t.endEdit,t.intf.setActiveCell=t.setActiveCell,t.intf.forEachSelectedCell=t.forEachSelectedCell,t.intf.scrollIntoView=t.scrollIntoView,t.intf.clearChangeLog=t.clearChangeLog,t.intf.gotoCell=t.gotoCell,t.intf.gotoRow=t.gotoRow,t.intf.getHeaderByName=t.getHeaderByName,t.intf.findColumnScrollLeft=t.findColumnScrollLeft,t.intf.findRowScrollTop=t.findRowScrollTop,t.intf.fitColumnToValues=t.fitColumnToValues,t.intf.findColumnMaxTextLength=t.findColumnMaxTextLength,t.intf.disposeContextMenu=t.disposeContextMenu,t.intf.getCellAt=t.getCellAt,t.intf.isCellVisible=t.isCellVisible,t.intf.isRowVisible=t.isRowVisible,t.intf.isColumnVisible=t.isColumnVisible,t.intf.order=t.order,t.intf.draw=t.draw,t.intf.isComponent=t.isComponent,t.intf.selectArea=t.selectArea,t.intf.clipElement=t.clipElement,t.intf.getSchemaFromData=t.getSchemaFromData,t.intf.setFilter=t.setFilter,t.intf.selectRow=t.selectRow,t.intf.parentGrid=t.parentGrid,t.intf.toggleTree=t.toggleTree,t.intf.expandTree=t.expandTree,t.intf.collapseTree=t.collapseTree,t.intf.canvas=t.canvas,t.intf.context=t.ctx,t.intf.insertRow=t.insertRow,t.intf.deleteRow=t.deleteRow,t.intf.addRow=t.addRow,t.intf.insertColumn=t.insertColumn,t.intf.deleteColumn=t.deleteColumn,t.intf.addColumn=t.addColumn,t.intf.getClippingRect=t.getClippingRect,t.intf.setRowHeight=t.setRowHeight,t.intf.setColumnWidth=t.setColumnWidth,t.intf.resetColumnWidths=t.resetColumnWidths,t.intf.resetRowHeights=t.resetRowHeights,t.intf.resize=t.resize,t.intf.selectColumn=t.selectColumn,t.intf.selectRow=t.selectRow,t.intf.selectAll=t.selectAll,t.intf.selectNone=t.selectNone,t.intf.drawChildGrids=t.drawChildGrids,t.intf.assertPxColor=t.assertPxColor,t.intf.clearPxColorAssertions=t.clearPxColorAssertions,t.intf.integerToAlpha=t.integerToAlpha,t.intf.copy=t.copy,t.intf.paste=t.paste,t.intf.setStyleProperty=t.setStyleProperty,Object.defineProperty(t.intf,"defaults",{get:function(){return{styles:t.defaults.styles.reduce(function(i,n){return i[n[0]]=n[1],i},{}),attributes:t.defaults.attributes.reduce(function(i,n){return i[n[0]]=n[1],i},{})}}}),t.styleKeys=Object.keys(t.intf.defaults.styles),t.styleKeys.map(function(i){return t.hyphenateProperty(i,!1)}).forEach(r),t.styleKeys.map(function(i){return t.hyphenateProperty(i,!0)}).forEach(r),t.DOMStyles=window.getComputedStyle(document.body,null),t.styleKeys.concat(Object.keys(t.DOMStyles)).forEach(function(i){a[i]=void 0,Object.defineProperty(a,i,{get:function(){return t.getStyleProperty(i)},set:function(n){t.initialized&&(t.appliedInlineStyles[i]=n),t.setStyleProperty(i,n)}})}),Object.defineProperty(t.intf,"shadowRoot",{get:function(){return t.shadowRoot}}),Object.defineProperty(t.intf,"activeCell",{get:function(){return t.activeCell}}),Object.defineProperty(t.intf,"hasFocus",{get:function(){return t.hasFocus}}),Object.defineProperty(t.intf,"style",{get:function(){return a},set:function(i){Object.keys(i).forEach(function(n){t.setStyleProperty(n,i[n],!0)}),t.draw(!0),t.dispatchEvent("stylechanged",{name:"style",value:i})}}),Object.defineProperty(t.intf,"attributes",{value:{}}),Object.keys(t.attributes).forEach(function(i){Object.defineProperty(t.intf.attributes,i,{get:function(){return t.attributes[i]},set:function(n){t.attributes[i]=n,"name"===i&&t.tryLoadStoredSettings(),t.draw(!0),t.dispatchEvent("attributechanged",{name:i,value:n[i]})}})}),t.filters.string=function(i,n){i=String(i);var g,x=/\/(i|g|m)*$/.exec(n),C=x?x[0].substring(1):"",p=C.length;if(t.invalidFilterRegEx=void 0,"/"===n.substring(0,1)&&x){try{g=new RegExp(n.substring(1,n.length-(p+1)),C)}catch(m){return void(t.invalidFilterRegEx=m)}return g.test(i)}return!!i.toString&&-1!==i.toString().toLocaleUpperCase().indexOf(n.toLocaleUpperCase())},t.filters.number=function(i,n){return!n||i===n},["formatters","filters","sorters"].forEach(t.initProp),t.applyComponentStyle(!1,t.intf),t.reloadStoredValues(),t.args.data&&(t.intf.data=t.args.data),(t.intf.innerText||t.intf.textContent)&&("application/x-canvas-datagrid"===t.intf.dataType&&(t.intf.dataType="application/json+x-canvas-datagrid"),t.intf.data=t.intf.innerText||t.intf.textContent),t.args.schema&&(t.intf.schema=t.args.schema),t.isChildGrid||!t.isComponent?requestAnimationFrame(function(){t.resize(!0)}):t.resize(!0),t.initialized=!0,t}function r(i){-1===t.styleKeys.indexOf(i)&&t.styleKeys.push(i)}},t.intf.blur=function(r){t.hasFocus=!1},t.intf.focus=function(){t.hasFocus=!0,t.controlInput.focus()},(t.shadowRoot||t.isChildGrid)&&(Object.defineProperty(t.intf,"height",{get:function(){return t.shadowRoot?t.shadowRoot.height:t.parentNode.height},set:function(r){t.shadowRoot?t.shadowRoot.height=r:t.parentNode.height=r,t.resize(!0)}}),Object.defineProperty(t.intf,"width",{get:function(){return t.shadowRoot?t.shadowRoot.width:t.parentNode.width},set:function(r){t.shadowRoot?t.shadowRoot.width=r:t.parentNode.width=r,t.resize(!0)}}),Object.defineProperty(t.intf,"parentNode",{get:function(){return t.parentNode},set:function(r){if(!t.isChildGrid)throw new TypeError("Cannot set property parentNode which has only a getter");t.parentNode=r}})),Object.defineProperty(t.intf,"visibleRowHeights",{get:function(){return t.visibleRowHeights}}),Object.defineProperty(t.intf,"openChildren",{get:function(){return t.openChildren}}),Object.defineProperty(t.intf,"childGrids",{get:function(){return Object.keys(t.childGrids).map(function(r){return t.childGrids[r]})}}),Object.defineProperty(t.intf,"isChildGrid",{get:function(){return t.isChildGrid}}),Object.defineProperty(t,"cursor",{get:function(){return t.parentNodeStyle.cursor},set:function(r){"cell"===r&&(r="default"),t.currentCursor!==r&&(t.parentNodeStyle.cursor=r,t.currentCursor=r)}}),Object.defineProperty(t.intf,"orderDirection",{get:function(){return t.orderDirection},set:function(r){"desc"!==r&&(r="asc"),t.orderDirection=r,t.order(t.orderBy,t.orderDirection)}}),Object.defineProperty(t.intf,"orderBy",{get:function(){return t.orderBy},set:function(r){if(void 0===t.getSchema().find(function(a){return a.name===r}))throw new Error("Cannot sort by unknown column name.");t.orderBy=r,t.order(t.orderBy,t.orderDirection)}}),t.isComponent&&(Object.defineProperty(t.intf,"offsetHeight",{get:function(){return t.canvas.offsetHeight}}),Object.defineProperty(t.intf,"offsetWidth",{get:function(){return t.canvas.offsetWidth}})),Object.defineProperty(t.intf,"scrollHeight",{get:function(){return t.scrollBox.scrollHeight}}),Object.defineProperty(t.intf,"scrollWidth",{get:function(){return t.scrollBox.scrollWidth}}),Object.defineProperty(t.intf,"scrollTop",{get:function(){return t.scrollBox.scrollTop},set:function(r){t.scrollBox.scrollTop=r}}),Object.defineProperty(t.intf,"scrollLeft",{get:function(){return t.scrollBox.scrollLeft},set:function(r){t.scrollBox.scrollLeft=r}}),Object.defineProperty(t.intf,"sizes",{get:function(){return t.sizes}}),Object.defineProperty(t.intf,"parentDOMNode",{get:function(){return t.parentDOMNode}}),Object.defineProperty(t.intf,"input",{get:function(){return t.input}}),Object.defineProperty(t.intf,"controlInput",{get:function(){return t.controlInput}}),Object.defineProperty(t.intf,"currentCell",{get:function(){return t.currentCell}}),Object.defineProperty(t.intf,"visibleCells",{get:function(){return t.visibleCells}}),Object.defineProperty(t.intf,"visibleRows",{get:function(){return t.visibleRows}}),Object.defineProperty(t.intf,"selections",{get:function(){return t.selections}}),Object.defineProperty(t.intf,"dragMode",{get:function(){return t.dragMode}}),Object.defineProperty(t.intf,"changes",{get:function(){return t.changes}}),t.intf.formatters=t.formatters,Object.defineProperty(t.intf,"dataType",{get:function(){return t.dataType},set:function(r){if(!t.parsers[r])throw new Error("No parser for MIME type "+r);t.dataType=r}}),t.eventNames.forEach(function(r){Object.defineProperty(t.intf,"on"+r,{get:function(){return t.componentL1Events[r]},set:function(a){t.events[r]=[],t.componentL1Events[r]=a,a&&t.addEventListener(r,a)}})}),Object.defineProperty(t.intf,"frozenRow",{get:function(){return t.frozenRow},set:function(r){if(isNaN(r))throw new TypeError("Expected value for frozenRow to be a number.");if(t.visibleRows.length<r)throw new RangeError("Cannot set a value larger than the number of visible rows.");t.frozenRow=r}}),Object.defineProperty(t.intf,"frozenColumn",{get:function(){return t.frozenColumn},set:function(r){if(isNaN(r))throw new TypeError("Expected value for frozenRow to be a number.");if(t.getVisibleSchema().length<r)throw new RangeError("Cannot set a value larger than the number of visible columns.");t.frozenColumn=r}}),Object.defineProperty(t.intf,"scrollIndexRect",{get:function(){return{top:t.scrollIndexTop,right:t.scrollIndexRight,bottom:t.scrollIndexBottom,left:t.scrollIndexLeft}}}),Object.defineProperty(t.intf,"scrollPixelRect",{get:function(){return{top:t.scrollPixelTop,right:t.scrollPixelRight,bottom:t.scrollPixelBottom,left:t.scrollPixelLeft}}}),Object.defineProperty(t.intf,"rowOrder",{get:function(){return t.orders.rows},set:function(r){if(!Array.isArray(r))throw new TypeError("Value must be an array.");if(!t.data||r.length<t.data.length)throw new RangeError("Array length must be equal to or greater than number of rows.");t.orders.rows=r}}),Object.defineProperty(t.intf,"columnOrder",{get:function(){return t.orders.columns},set:function(r){if(!Array.isArray(r))throw new TypeError("Value must be an array.");if(r.length<t.getSchema().length)throw new RangeError("Array length must be equal to or greater than number of columns.");t.orders.columns=r}}),Object.defineProperty(t.intf,"selectionBounds",{get:function(){return t.getSelectionBounds()}}),Object.defineProperty(t.intf,"selectedRows",{get:function(){return t.getSelectedData(!0)}}),Object.defineProperty(t.intf,"selectedCells",{get:function(){return t.getSelectedData()}}),Object.defineProperty(t.intf,"visibleSchema",{get:function(){return t.getVisibleSchema().map(function(a){return a})}}),Object.defineProperty(t.intf,"treeGridAttributes",{get:function(){return t.treeGridAttributes},set:function(a){t.treeGridAttributes=a}}),Object.defineProperty(t.intf,"cellGridAttributes",{get:function(){return t.cellGridAttributes},set:function(a){t.cellGridAttributes=a}}),Object.defineProperty(t.intf,"ctx",{get:function(){return t.ctx}}),Object.defineProperty(t.intf,"schema",{get:function(){return t.getSchema()},set:function(a){if(void 0===a)return t.schema=void 0,t.tempSchema=void 0,void t.dispatchEvent("schemachanged",{schema:void 0});if(!Array.isArray(a)||"object"!=typeof a[0])throw new Error("Schema must be an array of objects.");if(void 0===a[0].name)throw new Error("Expected schema to contain an object with at least a name property.");t.schema=a.map(function(n,g){return n.width=n.width||t.style.cellWidth,n.filter=n.filter||t.filter(n.type),n.type=n.type||"string",n.index=g,n.columnIndex=g,n.rowIndex=-1,n}),t.tempSchema=void 0,t.createNewRowData(),t.createColumnOrders(),t.tryLoadStoredSettings(),t.storedSettings&&"object"==typeof t.storedSettings.visibility&&t.schema.forEach(function(n,g){t.storedSettings&&void 0!==t.storedSettings.visibility[n.name]&&(n.hidden=!t.storedSettings.visibility[n.name])}),t.resize(!0),t.dispatchEvent("schemachanged",{schema:t.schema})}}),t.intf.getTypes=function(){return Object.keys(t.parsers)},t.parseInnerHtml=function(r){if(!r||/^ +$/.test(r))return[];try{r=JSON.parse(r)}catch(a){console.warn(Error("Cannot parse application/json+x-canvas-datagrid formated data. "+a.message+"  \nNote: canvas-datagrid.innerHTML is for string data only.  Use the canvas-datagrid.data property to set object data."))}return r},t.parsers["application/json+x-canvas-datagrid"]=function(r,a){t.parsers["application/x-canvas-datagrid"](t.parseInnerHtml(r),function(i,n){return a(i,n)})},t.parsers["application/x-canvas-datagrid"]=function(r,a){return a(r)},t.intf.parsers=t.parsers,t.etl=function(r,a){if(!t.intf.parsers[t.dataType])throw new Error("Unsupported data type.");t.intf.parsers[t.dataType](r,function(i,n){Array.isArray(n)&&(t.schema=n),t.attributes.autoGenerateSchema&&(t.schema=t.getSchemaFromData(i)),t.schema||(t.tempSchema=t.getSchemaFromData(i)),t.getSchema()&&t.createColumnOrders(),t.originalData=i,t.applyDataTransforms(),!t.schema&&0===(t.data||[]).length&&(t.tempSchema=[{name:""}]),t.fitColumnToValues("cornerCell",!0),(t.tempSchema&&!t.schema||t.attributes.autoGenerateSchema)&&(t.createColumnOrders(),t.dispatchEvent("schemachanged",{schema:t.tempSchema})),a()})},Object.defineProperty(t.intf,"data",{get:function(){return t.data},set:function(a){t.etl(a,function(){t.changes=[],t.createNewRowData(),t.attributes.autoResizeColumns&&t.data.length>0&&void 0===t.storedSettings&&t.autosize(),t.fitColumnToValues("cornerCell",!0),t.createRowOrders(),t.tryLoadStoredSettings(),t.dispatchEvent("datachanged",{data:t.data}),t.resize(!0)})}}),t.initScrollBox=function(){var r=0,a=0,i=0,n=0,g=0,l=0,x=20,C=20;function p(d,w){if(isNaN(d))throw new Error("ScrollTop value must be a number");d<0&&(d=0),d>g&&(d=g),g<0&&(d=0),i=d,w||t.scroll()}function m(d,w){if(isNaN(d))throw new Error("ScrollLeft value must be a number");d<0&&(d=0),d>l&&(d=l),l<0&&(d=0),n=d,w||t.scroll()}t.scrollBox.toString=function(){return'{"width": '+l.toFixed(2)+', "height": '+g.toFixed(2)+', "left": '+n.toFixed(2)+', "top": '+i.toFixed(2)+', "widthRatio": '+t.scrollBox.widthBoxRatio.toFixed(5)+', "heightRatio": '+t.scrollBox.heightBoxRatio.toFixed(5)+"}"},t.scrollBox.scrollTo=function(d,w,R){m(d,!0),p(w,R)},Object.defineProperty(t.scrollBox,"scrollBoxHeight",{get:function(){return x},set:function(d){x=d}}),Object.defineProperty(t.scrollBox,"scrollBoxWidth",{get:function(){return C},set:function(d){C=d}}),Object.defineProperty(t.scrollBox,"height",{get:function(){return r},set:function(d){r=d}}),Object.defineProperty(t.scrollBox,"width",{get:function(){return a},set:function(d){a=d}}),Object.defineProperty(t.scrollBox,"scrollTop",{get:function(){return i},set:p}),Object.defineProperty(t.scrollBox,"scrollLeft",{get:function(){return n},set:m}),Object.defineProperty(t.scrollBox,"scrollHeight",{get:function(){return g},set:function(d){i>d&&(i=Math.max(d,0)),g=d}}),Object.defineProperty(t.scrollBox,"scrollWidth",{get:function(){return l},set:function(d){n>d&&(n=Math.max(d,0)),l=d}})}}}.apply(S,[]))&&(M.exports=b)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){var c,o,r;function a(l){t.createInlineStyle(l,"canvas-datagrid-context-menu-item"+(t.mobile?"-mobile":"")),l.addEventListener("mouseover",function(){t.createInlineStyle(l,"canvas-datagrid-context-menu-item:hover")}),l.addEventListener("mouseout",function(){t.createInlineStyle(l,"canvas-datagrid-context-menu-item")})}function i(l,x,C,p){var L,m=document.createElement("div"),d=document.createElement("div"),w=document.createElement("div"),R=[],T=-1,H={};if(!Array.isArray(C))throw new Error("createContextMenu expects an array.");function W(){m.scrollTop>0?t.parentDOMNode.appendChild(d):d.parentNode&&d.parentNode.removeChild(d),m.scrollTop>=m.scrollHeight-m.offsetHeight&&w.parentNode?w.parentNode.removeChild(w):m.scrollHeight-m.offsetHeight>0&&!(m.scrollTop>=m.scrollHeight-m.offsetHeight)&&t.parentDOMNode.appendChild(w)}function K(z){return function G(){var U=t.attributes.contextHoverScrollAmount;"up"===z&&0===m.scrollTop||"down"===z&&m.scrollTop===m.scrollHeight||(m.scrollTop+="up"===z?-U:U,o=setTimeout(G,t.attributes.contextHoverScrollRateMs,z))}}function ot(z){return function(){clearTimeout(o)}}return H.parentGrid=t.intf,H.parentContextMenu=p,H.container=m,function at(){var z={},G=t.scrollOffset(t.canvas);void 0===c&&(c=t.style.contextMenuZIndex),function D(){C.forEach(function(z){var U,G=document.createElement("div");function Q(v){v.relatedTarget===m||z.contextMenu.container===v.relatedTarget||U===v.relatedTarget||G===v.relatedTarget||z.contextMenu.container.contains(v.relatedTarget)||(z.contextMenu.dispose(),R.splice(R.indexOf(z.contextMenu),1),z.contextMenu=void 0,G.removeEventListener("mouseout",Q),m.removeEventListener("mouseout",Q),G.setAttribute("contextOpen","0"),G.setAttribute("opening","0"))}function st(v){if("1"===G.getAttribute("opening")&&"1"!==G.getAttribute("contextOpen")){var P=G.getBoundingClientRect();z.contextMenu=i(l,P={left:P.left+t.style.childContextMenuMarginLeft+m.offsetWidth,top:P.top+t.style.childContextMenuMarginTop,bottom:P.bottom,right:P.right},v,H),G.setAttribute("contextOpen","1"),G.addEventListener("mouseout",Q),m.addEventListener("mouseout",Q),R.push(z.contextMenu)}}function u(){var v;if("1"!==G.getAttribute("contextOpen")){if(G.setAttribute("opening","1"),"function"==typeof z.items)return void(void 0!==(v=z.items.apply(H,[function(P){st(P)}]))&&Array.isArray(v)&&st(v));st(z.items)}}(function y(v){(function P(E){if(null!==E){if("function"==typeof E)return P(E(l));if("object"==typeof E)return void G.appendChild(E);a(G),G.innerHTML=E}})(v.title),v.contextItemContainer=G,(v.items&&v.items.length>0||"function"==typeof v.items)&&(U=document.createElement("div"),t.createInlineStyle(U,"canvas-datagrid-context-child-arrow"),U.innerHTML=t.style.childContextMenuArrowHTML,G.appendChild(U),G.addEventListener("mouseover",u),G.addEventListener("mouseout",function(){G.setAttribute("opening","0")})),v.click&&G.addEventListener("click",function(E){v.click.apply(t,[E])})})(z),m.appendChild(G)})}(),t.createInlineStyle(m,"canvas-datagrid-context-menu"+(t.mobile?"-mobile":"")),z.x=x.left-G.left,z.y=x.top-G.top,z.height=0,c+=1,m.style.position="absolute",d.style.color=t.style.contextMenuArrowColor,w.style.color=t.style.contextMenuArrowColor,[d,w].forEach(function(U){U.style.textAlign="center",U.style.position="absolute",U.style.zIndex=c+1}),m.style.zIndex=c,p&&p.inputDropdown&&(m.style.maxHeight=window.innerHeight-z.y-t.style.autocompleteBottomMargin+"px",m.style.minWidth=x.width+"px",z.y+=x.height),t.mobile&&(m.style.width=x.width+"px"),m.style.left=z.x+"px",m.style.top=z.y+"px",m.addEventListener("scroll",W),m.addEventListener("wheel",function(U){t.hasFocus&&(m.scrollTop+=U.deltaY,m.scrollLeft+=U.deltaX),W()}),d.innerHTML=t.style.contextMenuArrowUpHTML,w.innerHTML=t.style.contextMenuArrowDownHTML,m.appendChild(d),document.body.appendChild(w),document.body.appendChild(m),(L=m.getBoundingClientRect()).bottom>window.innerHeight&&(p&&p.inputDropdown||(z.y-=L.bottom+t.style.contextMenuWindowMargin-window.innerHeight),z.y<0&&(z.y=t.style.contextMenuWindowMargin),m.offsetHeight>window.innerHeight-t.style.contextMenuWindowMargin&&(m.style.height=window.innerHeight-2*t.style.contextMenuWindowMargin+"px")),L.right>window.innerWidth&&(z.x-=L.right-window.innerWidth+t.style.contextMenuWindowMargin),z.x<0&&(z.x=t.style.contextMenuWindowMargin),z.y<0&&(z.y=t.style.contextMenuWindowMargin),m.style.left=z.x+"px",m.style.top=z.y+"px",L=m.getBoundingClientRect(),d.style.top=L.top+"px",w.style.top=L.top+L.height-w.offsetHeight+"px",d.style.left=L.left+"px",w.style.left=L.left+"px",w.style.width=m.offsetWidth+"px",d.style.width=m.offsetWidth+"px",w.addEventListener("mouseover",K("down")),w.addEventListener("mouseout",ot()),d.addEventListener("mouseover",K("up")),d.addEventListener("mouseout",ot()),W()}(),H.clickIndex=function J(z){C[z].contextItemContainer.dispatchEvent(new Event("click"))},H.rect=L,H.items=C,H.upArrow=d,H.downArrow=w,H.dispose=function(){clearTimeout(o),R.forEach(function(z){z.dispose()}),[w,d,m].forEach(function(z){z.parentNode&&z.parentNode.removeChild(z)})},Object.defineProperty(H,"selectedIndex",{get:function(){return T},set:function(z){if("number"!=typeof z||isNaN(z||!isFinite(z)))throw new Error("Context menu selected index must be a sane number.");(T=z)>C.length-1&&(T=C.length-1),T<0&&(T=0),C.forEach(function(G,U){if(U===T)return t.createInlineStyle(G.contextItemContainer,"canvas-datagrid-context-menu-item:hover");t.createInlineStyle(G.contextItemContainer,"canvas-datagrid-context-menu-item")})}}),H}t.disposeAutocomplete=function(){r&&(r.dispose(),r=void 0)},t.disposeContextMenu=function(){document.removeEventListener("click",t.disposeContextMenu),c=t.style.contextMenuZIndex,t.disposeAutocomplete(),t.contextMenu&&t.contextMenu.dispose(),t.contextMenu=void 0},t.contextmenuEvent=function(l,x){if(t.hasFocus||l.target===t.canvas){var p,m=[],d=x||t.getLayerPos(l),w={NativeEvent:l,cell:t.getCellAt(d.x,d.y),items:m};w.cell.isGrid||function g(l){var x=!(l.cell.isBackground||l.cell.isColumnHeaderCellCap||l.cell.isScrollBar||l.cell.isCorner||l.cell.isRowHeader)&&l.cell.header;t.attributes.showFilter&&x&&function n(l){var w,R,x=document.createElement("div"),C=document.createElement("div"),p=document.createElement("button"),m=document.createElement("input"),d=l.cell&&l.cell.header?l.cell.header.title||l.cell.header.name:"";function T(){m.style.background=t.style.contextFilterInputBackground,m.style.color=t.style.contextFilterInputColor,t.invalidFilterRegEx&&(m.style.background=t.style.contextFilterInvalidRegExpBackground,m.style.color=t.style.contextFilterInvalidRegExpColor)}function L(D){D&&-1!==[40,38,13,9].indexOf(D.keyCode)||(function H(){var D=0;w={},t.data.forEach(function(J){var W=J[l.cell.header.name];w[W]||D>t.attributes.maxAutoCompleteItems||(D+=1,w[W]={title:t.formatters[l.cell.header.type||"string"]({cell:{value:W}}),click:function(K){m.value=W,K.stopPropagation(),m.dispatchEvent(new Event("keyup")),t.disposeAutocomplete()}})}),w=Object.keys(w).map(function(J){return w[J]})}(),R=m.getBoundingClientRect(),r&&(r.dispose(),r=void 0),(r=i(l,{left:R.left,top:R.top,right:R.right,bottom:R.bottom,height:R.height,width:R.width},w,{inputDropdown:!0})).selectedIndex=0)}t.createInlineStyle(C,"canvas-datagrid-context-menu-label"),t.createInlineStyle(p,"canvas-datagrid-context-menu-filter-button"),t.createInlineStyle(m,"canvas-datagrid-context-menu-filter-input"),T(),m.onclick=t.disposeAutocomplete,m.addEventListener("keydown",function(D){40===D.keyCode&&(r.selectedIndex+=1),38===D.keyCode&&(r.selectedIndex-=1),13===D.keyCode&&(r.clickIndex(r.selectedIndex),t.disposeContextMenu()),9===D.keyCode&&(r.clickIndex(r.selectedIndex),D.preventDefault()),27===D.keyCode&&t.disposeContextMenu()}),m.addEventListener("keyup",function(){t.setFilter(l.cell.header.name,m.value)}),m.addEventListener("keyup",L),["focus","blur","keydown","keyup","change"].forEach(function(D){m.addEventListener(D,T)}),m.value=l.cell.header&&t.columnFilters[l.cell.header.name]||"",C.innerHTML=t.attributes.filterOptionText.replace(/%s/g,d),p.onclick=function(){if(r)return t.disposeAutocomplete();L()},p.innerHTML=t.style.contextFilterButtonHTML,x.addEventListener("click",function(D){return D.stopPropagation()}),x.appendChild(C),x.appendChild(m),x.appendChild(p),l.items.push({title:x}),Object.keys(t.columnFilters).length&&Object.keys(t.columnFilters).forEach(function(D){var J=t.getHeaderByName(D);l.items.push({title:t.attributes.removeFilterOptionText.replace(/%s/g,J.title||J.name),click:function(K){K.preventDefault(),t.setFilter(D,""),t.controlInput.focus()}})})}(l),t.attributes.showCopy&&t.selections.reduce(function(C,p){return C+p.length},0)>0&&l.items.push({title:t.attributes.copyText,click:function(){document.execCommand("copy"),t.disposeContextMenu(),t.controlInput.focus()}}),t.attributes.showPaste&&t.clipBoardData&&l.items.push({title:t.attributes.pasteText,click:function(){t.paste(t.clipBoardData,l.cell.columnIndex,l.cell.rowIndex),t.draw()}}),t.attributes.showColumnSelector&&(l.items.push({title:t.attributes.columnSelectorText,items:function(){var C=[];return t.getSchema().forEach(function(p){function m(w){p.hidden=!p.hidden,t.dispatchEvent("togglecolumn",{column:p,hidden:p.hidden}),w.preventDefault(),t.stopPropagation(w),t.disposeContextMenu(),t.resize(!0),t.setStorageData()}var d=document.createElement("div");a(d),d.addEventListener("touchstart",m),d.addEventListener("click",m),d.innerHTML=(p.hidden?t.attributes.columnSelectorHiddenText:t.attributes.columnSelectorVisibleText)+(p.title||p.name),C.push({title:d})}),C}}),l.cell&&l.cell.header&&l.cell.columnIndex>-1&&l.items.push({title:t.attributes.hideColumnText.replace(/%s/gi,l.cell.header.title||l.cell.header.name),click:function(C){t.getSchema()[l.cell.columnIndex].hidden=!0,C.preventDefault(),t.stopPropagation(C),t.disposeContextMenu(),t.setStorageData(),setTimeout(function(){t.resize(!0)},10)}})),t.attributes.saveAppearance&&t.attributes.showClearSettingsOption&&(Object.keys(t.sizes.rows).length>0||Object.keys(t.sizes.columns).length>0)&&l.items.push({title:t.attributes.clearSettingsOptionText,click:function(C){C.preventDefault(),t.sizes.rows={},t.sizes.columns={},t.createRowOrders(),t.createColumnOrders(),t.storedSettings=void 0,t.dispatchEvent("resizecolumn",{columnWidth:t.style.cellWidth}),t.dispatchEvent("resizerow",{cellHeight:t.style.cellHeight}),t.setStorageData(),t.resize(!0),t.disposeContextMenu(),t.controlInput.focus()}}),t.attributes.allowSorting&&t.attributes.showOrderByOption&&x&&(l.items.push({title:t.attributes.showOrderByOptionTextAsc.replace("%s",l.cell.header.title||l.cell.header.name),click:function(C){C.preventDefault(),t.order(l.cell.header.name,"asc"),t.controlInput.focus()}}),l.items.push({title:t.attributes.showOrderByOptionTextDesc.replace("%s",l.cell.header.title||l.cell.header.name),click:function(C){C.preventDefault(),t.order(l.cell.header.name,"desc"),t.disposeContextMenu(),t.controlInput.focus()}}))}(w),!t.dispatchEvent("contextmenu",w)&&(w.cell.isGrid||(t.contextMenu&&t.disposeContextMenu(),p={left:d.x+d.rect.left+t.style.contextMenuMarginLeft+t.canvasOffsetLeft,top:d.y+d.rect.top+t.style.contextMenuMarginTop+t.canvasOffsetTop,right:w.cell.width+w.cell.x+d.rect.left,bottom:w.cell.height+w.cell.y+d.rect.top,height:w.cell.height,width:w.cell.width},t.mobile&&(p.left=t.style.mobileContextMenuMargin+"px",p.width=t.width-2*t.style.mobileContextMenuMargin+"px"),t.contextMenu=i(w,p,m),document.addEventListener("mouseup",function C(){requestAnimationFrame(function(){document.addEventListener("click",t.disposeContextMenu),document.removeEventListener("mouseup",C)})}),l.preventDefault()))}}}}.apply(S,[]))&&(M.exports=b)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){t.getClippingRect=function(c){var o=t.position(t.parentNode),r=t.position(c),a=t.scrollOffset(t.canvas),i={x:0,y:0,h:0,w:0},n={x:-1/0,y:-1/0,h:1/0,w:1/0},g=t.getColumnHeaderCellHeight(),l=t.getRowHeaderCellWidth();return o.top-=a.top,o.left-=a.left,r.top-=a.top,r.left-=a.left,i.h=o.top+o.height-c.offsetTop-t.style.scrollBarWidth,i.w=o.left+o.width-c.offsetLeft-t.style.scrollBarWidth,i.x=o.left+-1*r.left+l,i.y=o.top+-1*r.top+g,{x:i.x>n.x?i.x:n.x,y:i.y>n.y?i.y:n.y,h:i.h<n.h?i.h:n.h,w:i.w<n.w?i.w:n.w}},t.clipElement=function(c){var o=t.getClippingRect(c);o.w<0&&(o.w=0),o.h<0&&(o.h=0),c.style.clip="rect("+o.y+"px,"+o.w+"px,"+o.h+"px,"+o.x+"px)"},t.scrollOffset=function(c){for(var o=0,r=0,a=document.scrollingElement||{scrollLeft:0,scrollTop:0};c.parentNode&&"CANVAS-DATAGRID"!==c.nodeName&&c!==t.intf;)"canvas-datagrid-tree"!==c.nodeType&&"canvas-datagrid-cell"!==c.nodeType&&(o-=c.scrollLeft,r-=c.scrollTop),c=c.parentNode;return{left:o-a.scrollLeft,top:r-a.scrollTop}},t.resizeEditInput=function(){if(t.input&&t.input.editCell){var c=t.canvas.getBoundingClientRect(),o=t.scrollOffset(t.intf),a=t.style.cellBorderWidth*("collapse"===t.style.gridBorderCollapse?1:2),i=t.getVisibleCellByIndex(t.input.editCell.columnIndex,t.input.editCell.rowIndex)||{x:-100,y:-100,height:0,width:0};if(t.mobile)return t.input.style.left="0",t.input.style.top=t.height-t.style.mobileEditInputHeight-a-1+"px",t.input.style.height=t.style.mobileEditInputHeight+"px",void(t.input.style.width=t.width-a-1+"px");t.input.style.left=c.left+i.x+t.canvasOffsetLeft-o.left+"px",t.input.style.top=c.top+i.y-t.style.cellBorderWidth+t.canvasOffsetTop-o.top+"px",t.input.style.height=i.height-a+"px",t.input.style.width=i.width-t.style.cellPaddingLeft+"px",t.clipElement(t.input)}},t.position=function(c,o){for(var n,g,r=0,a=0,i=c;c.offsetParent&&"CANVAS-DATAGRID"!==c.nodeName;)r+=c.offsetLeft,a+=c.offsetTop,n=c.offsetHeight,g=c.offsetWidth,c=c.offsetParent;return o?{left:r,top:a,height:n,width:g}:{left:r+(i=t.scrollOffset(c=i)).left,top:a+i.top,height:n,width:g}},t.getLayerPos=function(c){var o=t.canvas.getBoundingClientRect(),r={x:c.clientX-o.left,y:c.clientY-o.top};return t.isChildGrid&&(r.x-=t.canvasOffsetLeft,r.y-=t.canvasOffsetTop),{x:r.x,y:r.y,rect:o}},t.endEdit=function(c){var o=t.input.editCell,r=o.rowIndex;if(t.dispatchEvent("beforeendedit",{cell:o,newValue:t.input.value,oldValue:o.value,abort:function a(){c=!0},input:t.input}))return!1;if(t.input.value!==o.value&&!c){if(t.changes[r]=t.changes[r]||{},t.changes[r][o.header.name]=t.input.value,o.data||(t.data[o.rowIndex]={},o.data=t.data[o.rowIndex]),o.data[o.header.name]=t.input.value,r===t.data.length){if(t.dispatchEvent("newrow",{value:t.input.value,defaultValue:o.value,aborted:c,cell:o,input:t.input}))return!1;t.addRow(o.data),t.createNewRowData()}t.draw(!0)}return t.input.parentNode&&t.input.parentNode.removeChild(t.input),t.intf.focus(),t.dispatchEvent("endedit",{cell:o,value:t.input.value,aborted:c,input:t.input}),t.input=void 0,!0},t.beginEditAt=function(c,o,r){if(t.attributes.editable){t.input&&t.endEdit();var n,g,l,x,C,a=t.getVisibleCellByIndex(c,o);if(t.getSchema(),a&&a.header){if(l=a.header.enum,t.dispatchEvent("beforebeginedit",{cell:a,NativeEvent:r}))return!1;t.scrollIntoView(c,o),t.setActiveCell(c,o),n=t.getAdjacentCells(),t.input=l?document.createElement("select"):document.createElement(t.attributes.multiLine?"textarea":"input"),(a=t.getVisibleCellByIndex(c,o))&&(l&&("function"==typeof l?g=l.apply(t.intf,[{cell:a}]):Array.isArray(l)&&(g=l),g.forEach(function(p){var d,w,m=document.createElement("option");Array.isArray(p)?(d=p[0],w=p[1]):(d=p,w=p),d===a.value&&(C=!0),m.value=d,m.innerHTML=w,t.input.appendChild(m)}),C||((x=document.createElement("option")).value=a.value,x.innerHTML=a.value,t.input.appendChild(x)),t.input.addEventListener("change",function(){t.endEdit(),t.draw(!0)})),t.dispatchEvent("appendeditinput",{cell:a,input:t.input})||document.body.appendChild(t.input),t.createInlineStyle(t.input,t.mobile?"canvas-datagrid-edit-mobile-input":"canvas-datagrid-edit-input"),t.input.style.position="absolute",t.input.editCell=a,t.resizeEditInput(),t.input.style.zIndex=t.style.editCellZIndex,t.input.style.fontSize=parseInt(t.style.editCellFontSize,10)*t.scale+"px",t.input.value=-1!==[null,void 0].indexOf(a.value)?"":a.value,t.input.focus(),t.input.addEventListener("click",t.stopPropagation),t.input.addEventListener("dblclick",t.stopPropagation),t.input.addEventListener("mouseup",t.stopPropagation),t.input.addEventListener("mousedown",t.stopPropagation),t.input.addEventListener("keydown",function(p){var m=a.columnIndex,d=a.rowIndex;if(27===p.keyCode)t.endEdit(!0),t.draw(!0);else if(13===p.keyCode&&(!t.attributes.multiLine||t.attributes.multiLine&&p.shiftKey))t.endEdit(),t.draw(!0);else if(9===p.keyCode){if(p.preventDefault(),!t.endEdit())return;m=p.shiftKey?n.left:n.right,n.left===c&&p.shiftKey&&(m=n.last,d-=1),n.right===c&&!p.shiftKey&&(m=n.first,d+=1),d<0&&(d=t.data.length-1),d>t.data.length-1&&(d=0),t.scrollIntoView(m,d),t.beginEditAt(m,d,p)}}),t.dispatchEvent("beginedit",{cell:a,input:t.input}))}}},t.createInlineStyle=function(c,o){var r={"canvas-datagrid-context-menu-filter-input":{height:"19px",verticalAlign:"bottom",marginLeft:"2px",padding:"0",background:t.style.contextFilterInputBackground,color:t.style.contextFilterInputColor,border:t.style.contextFilterInputBorder,borderRadius:t.style.contextFilterInputBorderRadius,lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextFilterInputFontFamily,fontSize:t.style.contextFilterInputFontSize},"canvas-datagrid-context-menu-filter-button":{height:"19px",verticalAlign:"bottom",marginLeft:"2px",padding:"0",background:t.style.contextMenuBackground,color:t.style.contextMenuColor,border:t.style.contextFilterButtonBorder,borderRadius:t.style.contextFilterButtonBorderRadius,lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextMenuFilterButtonFontFamily,fontSize:t.style.contextMenuFilterButtonFontSize},"canvas-datagrid-context-child-arrow":{cssFloat:"right",color:t.style.childContextMenuArrowColor,fontSize:t.style.contextMenuChildArrowFontSize,fontFamily:t.style.contextMenuFontFamily,verticalAlign:"middle"},"canvas-datagrid-autocomplete":{fontFamily:t.style.contextMenuFontFamily,fontSize:t.style.contextMenuFontSize,background:t.style.contextMenuBackground,color:t.style.contextMenuColor,border:t.style.contextMenuBorder,padding:t.style.contextMenuPadding,borderRadius:t.style.contextMenuBorderRadius,opacity:t.style.contextMenuOpacity,position:"absolute",zIndex:9999,overflow:"hidden"},"canvas-datagrid-autocomplete-item":{background:t.style.contextMenuBackground,color:t.style.contextMenuColor},"canvas-datagrid-autocomplete-item:hover":{background:t.style.contextMenuHoverBackground,color:t.style.contextMenuHoverColor},"canvas-datagrid-canvas":{position:"absolute",zIndex:"-1"},"canvas-datagrid":{display:"block"},"canvas-datagrid-control-input":{position:"fixed",top:"-5px",left:"-5px",border:"none",opacity:"0",cursor:"pointer",width:"1px",height:"1px",lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextMenuFontFamily,fontSize:t.style.contextMenuFontSize},"canvas-datagrid-edit-mobile-input":{boxSizing:"content-box",outline:"none",margin:"0",padding:"0 0 0 0",lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.mobileEditFontFamily,fontSize:t.style.mobileEditFontSize,border:t.style.editCellBorder,color:t.style.editCellColor,background:t.style.editCellBackgroundColor,appearance:"none",webkitAppearance:"none",mozAppearance:"none",borderRadius:"0"},"canvas-datagrid-edit-input":{boxSizing:"content-box",outline:"none",margin:"0",padding:"0 0 0 "+t.style.editCellPaddingLeft+"px",lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.editCellFontFamily,fontSize:t.style.editCellFontSize,boxShadow:t.style.editCellBoxShadow,border:t.style.editCellBorder,color:t.style.editCellColor,background:t.style.editCellBackgroundColor,appearance:"none",webkitAppearance:"none",mozAppearance:"none",borderRadius:"0"},"canvas-datagrid-context-menu-item-mobile":{lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextMenuFontFamily,fontSize:t.style.contextMenuFontSize,color:"inherit",background:"inherit",margin:t.style.contextMenuItemMargin,borderRadius:t.style.contextMenuItemBorderRadius,verticalAlign:"middle"},"canvas-datagrid-context-menu-item":{lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextMenuFontFamily,fontSize:t.style.contextMenuFontSize,color:"inherit",background:"inherit",margin:t.style.contextMenuItemMargin,borderRadius:t.style.contextMenuItemBorderRadius,verticalAlign:"middle"},"canvas-datagrid-context-menu-item:hover":{background:t.style.contextMenuHoverBackground,color:t.style.contextMenuHoverColor},"canvas-datagrid-context-menu-label":{margin:t.style.contextMenuLabelMargin,display:t.style.contextMenuLabelDisplay,minWidth:t.style.contextMenuLabelMinWidth,maxWidth:t.style.contextMenuLabelMaxWidth},"canvas-datagrid-context-menu-mobile":{lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextMenuFontFamily,fontSize:t.style.contextMenuFontSize,background:t.style.contextMenuBackground,color:t.style.contextMenuColor,border:t.style.contextMenuBorder,padding:t.style.contextMenuPadding,borderRadius:t.style.contextMenuBorderRadius,opacity:t.style.contextMenuOpacity,overflow:"hidden",whiteSpace:"nowrap"},"canvas-datagrid-context-menu":{lineHeight:"normal",fontWeight:"normal",fontFamily:t.style.contextMenuFontFamily,fontSize:t.style.contextMenuFontSize,background:t.style.contextMenuBackground,color:t.style.contextMenuColor,border:t.style.contextMenuBorder,padding:t.style.contextMenuPadding,borderRadius:t.style.contextMenuBorderRadius,opacity:t.style.contextMenuOpacity,overflow:"hidden",whiteSpace:"nowrap",cursor:t.style.contextMenuCursor},"canvas-datagrid-invalid-search-regExp":{background:t.style.contextMenuFilterInvalidExpresion}};r[o]&&Object.keys(r[o]).map(function(a){c.style[a]=r[o][a]})},t.appendTo=function(c){t.parentNode=c,t.setDom()},t.setDom=function(){t.isChildGrid?(t.parentGrid=t.parentNode.parentGrid,t.ctx=t.parentGrid.context,t.canvas=t.parentGrid.canvas,t.controlInput=t.parentGrid.controlInput,t.eventParent=t.canvas):(t.controlInput=t.controlInput||document.createElement("input"),t.controlInput.onblur=t.intf.blur,t.createInlineStyle(t.controlInput,"canvas-datagrid-control-input"),t.isChildGrid=!1,t.parentDOMNode=t.parentNode,t.parentIsCanvas=/^canvas$/i.test(t.parentDOMNode.tagName),t.parentIsCanvas?t.canvas=t.parentDOMNode:(t.canvas=document.createElement("canvas"),t.parentDOMNode.appendChild(t.canvas)),document.body.appendChild(t.controlInput),t.createInlineStyle(t.canvas,"canvas-datagrid"),t.ctx=t.canvas.getContext("2d"),t.ctx.textBaseline="alphabetic",t.eventParent=t.canvas),t.parentNodeStyle=t.canvas.style,t.controlInput.setAttribute("readonly",!0),t.controlInput.addEventListener("blur",function(c){c.target!==t.canvas&&(t.hasFocus=!1)}),t.eventParent.addEventListener("scroll",t.resize,!1),t.eventParent.addEventListener("touchstart",t.touchstart,!1),t.eventParent.addEventListener("mouseup",t.mouseup,!1),t.eventParent.addEventListener("mousedown",t.mousedown,!1),t.eventParent.addEventListener("dblclick",t.dblclick,!1),t.eventParent.addEventListener("click",t.click,!1),t.eventParent.addEventListener("mousemove",t.mousemove),t[t.isChildGrid?"parentGrid":"eventParent"].addEventListener("wheel",t.scrollWheel,!1),t.canvas.addEventListener("contextmenu",t.contextmenuEvent,!1),t.controlInput.addEventListener("copy",t.copy),t.controlInput.addEventListener("cut",t.cut),t.controlInput.addEventListener("paste",t.paste),t.controlInput.addEventListener("keypress",t.keypress,!1),t.controlInput.addEventListener("keyup",t.keyup,!1),t.controlInput.addEventListener("keydown",t.keydown,!1),window.addEventListener("resize",t.resize)}}}.apply(S,[]))&&(M.exports=b)},function(M,S,O){var b;void 0!==(b=function(){"use strict";return function(t){t.integerToAlpha=function(c){for(var o="a".charCodeAt(0),a="z".charCodeAt(0)-o+1,i="";c>=0;)i=String.fromCharCode(c%a+o)+i,c=Math.floor(c/a)-1;return i},t.insertColumn=function(c,o){var r=t.getSchema();if(r.length<o)throw new Error("Index is beyond the length of the schema.");t.validateColumn(c,r),r.splice(o,0,c),t.data.forEach(function(a){t.applyDefaultValue(a,c)}),t.intf.schema=r},t.deleteColumn=function(c){var o=t.getSchema();t.data.forEach(function(r){delete r[o[c].name]}),o.splice(c,1),t.intf.schema=o},t.addColumn=function(c){var o=t.getSchema();t.validateColumn(c,o),o.push(c),t.data.forEach(function(r){t.applyDefaultValue(r,c)}),t.intf.schema=o},t.deleteRow=function(c){t.originalData.splice(c,1),t.setFilter(),t.resize(!0)},t.insertRow=function(c,o){if(t.originalData.length<o)throw new Error("Index is beyond the length of the dataset.");t.originalData.splice(o,0,c),t.getSchema().forEach(function(r){void 0===c[r.name]&&t.applyDefaultValue(t.originalData[o],r)}),t.setFilter(),t.resize(!0)},t.addRow=function(c){t.originalData.push(c),t.getSchema().forEach(function(o){void 0===c[o.name]&&t.applyDefaultValue(t.originalData[t.originalData.length-1],o)}),t.setFilter(),t.resize(!0)},t.setRowHeight=function(c,o){t.sizes.rows[c]=o,t.draw(!0)},t.setColumnWidth=function(c,o){t.sizes.columns[c]=o,t.draw(!0)},t.resetColumnWidths=function(){t.sizes.columns={},t.draw(!0)},t.resetRowHeights=function(){t.sizes.rows={},t.draw(!0)},t.setFilter=function(c,o){void 0===c&&void 0===o?t.columnFilters={}:!c||""!==o&&void 0!==o?t.columnFilters[c]=o:delete t.columnFilters[c],t.applyDataTransforms()},t.findRowScrollTop=function(c){if(void 0===t.scrollCache.y[c])throw new RangeError("Row index out of range.");return t.scrollCache.y[c]},t.findColumnScrollLeft=function(c){var o=Math.max(c-1,0);if(void 0===t.scrollCache.x[o])throw new Error("Column index out of range.");return t.scrollCache.x[o]-t.getColummnWidth(t.orders.columns[c])},t.gotoCell=function(c,o,r,a){var g,i=void 0===c?void 0:t.findColumnScrollLeft(c),n=void 0===o?void 0:t.findRowScrollTop(o);i-=(t.scrollBox.width-(t.scrollBox.verticalBarVisible?t.style.scrollBarWidth:0))*(r=void 0===r?0:r),n-=(t.scrollBox.height-(t.scrollBox.horizontalBarVisible?t.style.scrollBarWidth:0))*(a=void 0===a?0:a),void 0!==c&&void 0!==o?(t.scrollBox.scrollTo(i,n),requestAnimationFrame(function(){(g=t.getVisibleCellByIndex(c,o))&&t.scrollBox.scrollTo(i+=g.width*r,n+=g.height*a)})):void 0!==c?t.scrollBox.scrollLeft=i:void 0!==o&&(t.scrollBox.scrollTop=n)},t.gotoRow=function(c){t.gotoCell(0,c)},t.scrollIntoView=function(c,o,r,a){0===t.visibleCells.filter(function(i){return(i.rowIndex===o||void 0===o)&&(i.columnIndex===c||void 0===c)&&i.x>0&&i.y>0&&i.x+i.width<t.width&&i.y+i.height<t.height}).length&&t.gotoCell(c,o,r,a)},t.setActiveCell=function(c,o){c<0&&(c=0),o<0&&(o=0),t.activeCell={rowIndex:o,columnIndex:c}},t.selectNone=function(c){t.selections=[],t.dispatchEvent("selectionchanged",{selectedData:t.getSelectedData(),selections:t.selections,selectionBounds:t.selectionBounds}),!c&&t.draw()},t.selectAll=function(c){t.selectArea({top:0,left:-1,right:t.getSchema().length-1,bottom:t.data.length-1}),!c&&t.draw()},t.isColumnSelected=function(c){var o=!0;return t.data.forEach(function(r,a){(!t.selections[a]||-1===t.selections[a].indexOf(t.orders.columns[c]))&&(o=!1)}),o},t.forEachSelectedCell=function(c,o){var r=[],a=o?t.getSchema():t.getVisibleSchema(),i=t.data.length;t.selections.forEach(function(n,g){if(g!==i){if(0===n.length)return void(r[g]=null);r[g]={},n.forEach(function(l){-1===l||!a[l]||c(t.data,g,a[l].name)})}})},t.selectColumn=function(c,o,r,a){var i,n,g;function l(C){t.data.forEach(function(p,m){t.selections[m]=t.selections[m]||[],-1===t.selections[m].indexOf(C)&&t.selections[m].push(C)})}if(r){if(!t.activeCell)return;for(i=Math.min(t.activeCell.columnIndex,c),n=Math.max(t.activeCell.columnIndex,c),g=i;n>g;g+=1)l(g)}!o&&!r&&(t.selections=[],t.activeCell.columnIndex=c,t.activeCell.rowIndex=t.scrollIndexTop),o&&t.isColumnSelected(c)?function x(C){t.data.forEach(function(p,m){t.selections[m]=t.selections[m]||[],-1!==t.selections[m].indexOf(C)&&t.selections[m].splice(t.selections[m].indexOf(C),1)})}(c):l(c),!a&&t.dispatchEvent("selectionchanged",{selectedData:t.getSelectedData(),selections:t.selections,selectionBounds:t.getSelectionBounds()})},t.selectRow=function(c,o,r,a){var i,n,g,l=t.getVisibleSchema();function x(){a||t.dispatchEvent("selectionchanged",{selectedData:t.getSelectedData(),selections:t.selections,selectionBounds:t.selectionBounds})}function C(p){t.selections[p]=[],t.selections[p].push(-1),l.forEach(function(m,d){t.selections[p].push(t.orders.columns.indexOf(m.index))})}if((!1===t.dragAddToSelection||void 0===t.dragObject)&&t.selections[c]&&t.selections[c].length-1===l.length&&o)return t.selections[c]=[],void x();if(!0===t.dragAddToSelection||void 0===t.dragObject)if(r&&void 0===t.dragObject){if(!t.activeCell)return;for(n=Math.min(t.activeCell.rowIndex,c),g=Math.max(t.activeCell.rowIndex,c),i=n;g>=i;i+=1)C(i)}else C(c);x()},t.collapseTree=function(c){t.dispatchEvent("collapsetree",{childGrid:t.childGrids[c],data:t.data[c],rowIndex:c}),t.openChildren[c].blur(),t.openChildren[c].dispose(),delete t.openChildren[c],delete t.sizes.trees[c],delete t.childGrids[c],t.dispatchEvent("resizerow",{cellHeight:t.style.cellHeight}),t.resize(!0),t.draw(!0)},t.expandTree=function(c){var n,o=t.args.treeGridAttributes||{},r=t.getColumnHeaderCellHeight(),a=t.sizes.columns.cornerCell||t.style.rowHeaderCellWidth,i=t.sizes.trees[c]||t.style.treeGridHeight;t.childGrids[c]||(o.debug=t.attributes.debug,o.name=t.attributes.saveAppearance?t.attributes.name+"tree"+c:void 0,o.style=o.style||t.style,o.parentNode={parentGrid:t.intf,nodeType:"canvas-datagrid-tree",offsetHeight:i,offsetWidth:t.width-a,header:{width:t.width-a},offsetLeft:a,offsetTop:r,offsetParent:t.intf.parentNode,parentNode:t.intf.parentNode,style:"tree",data:t.data[c]},n=t.createGrid(o),t.childGrids[c]=n),(n=t.childGrids[c]).visible=!0,t.dispatchEvent("expandtree",{treeGrid:n,data:t.data[c],rowIndex:c}),t.openChildren[c]=n,t.sizes.trees[c]=i,t.dispatchEvent("resizerow",{height:t.style.cellHeight}),t.resize(!0)},t.toggleTree=function(c){if(t.openChildren[c])return t.collapseTree(c);t.expandTree(c)},t.getHeaderByName=function(c){var o,r=t.getSchema();for(o=0;o<r.length;o+=1)if(r[o].name===c)return r[o]},t.fitColumnToValues=function(c,o){t.canvas&&(t.sizes.columns["cornerCell"===c?-1:t.getHeaderByName(c).index]=Math.max(t.findColumnMaxTextLength(c),t.style.minColumnWidth),o||(t.resize(),t.draw(!0)))},t.isCellVisible=function(c,o){if(void 0!==o)return t.visibleCells.filter(function(i){return i.columnIndex===c&&i.rowIndex===o}).length>0;var r,a=t.visibleCells.length;for(r=0;r<a;r+=1)if(c.x===t.visibleCells[r].x&&c.y===t.visibleCells[r].y)return!0;return!1},t.order=function(c,o,r,a){var i,n=t.getSchema().filter(function(g){return g.name===c});if(!t.dispatchEvent("beforesortcolumn",{name:c,direction:o})&&(t.orderBy=c,t.orderDirection=o,t.data&&0!==t.data.length)){if(0===n.length)throw new Error("Cannot sort.  No such column name");!(i=r||n[0].sorter||t.sorters[n[0].type])&&void 0!==n[0].type&&console.warn('Cannot sort type "%s" falling back to string sort.',n[0].type),t.orderings.add(c,o,"function"==typeof i?i:t.sorters.string),t.orderings.sort(),t.dispatchEvent("sortcolumn",{name:c,direction:o}),t.draw(!0),!a&&t.setStorageData()}},t.isInGrid=function(c){return!(c.x<0||c.x>t.width||c.y<0||c.y>t.height)},t.moveSelection=function(c,o){var r=[];t.selections.forEach(function(a,i){r[i+o]=[],a.forEach(function(n){r[i+o].push(n+c)})}),t.selections=r},t.moveTo=function(c,o,r){var g,a=t.getSelectedData(),i=t.getVisibleSchema(),n=c.length,l=-1/0,x=1/0,C=r-1;c.forEach(function(p,m){m!==n&&0!==p.length&&(x=Math.min(t.getVisibleColumnIndexOf(o),x),l=Math.max(l,p.length),p.forEach(function(d){d=t.getVisibleColumnIndexOf(d),i[d]&&(t.data[m]||(t.data[m]={}),t.data[m][i[d].name]=null)}))}),c.forEach(function(p,m){var d;C+=1,g=t.getVisibleColumnIndexOf(o),p.forEach(function(w,R){w=t.getVisibleColumnIndexOf(w),R>0&&(g+=w-d),d=w,!(-1===w||!i[g]||!i[w]||t.data.length-1<C||C<0)&&(t.data[C]||(t.data[C]={}),t.data[C][i[g].name]=a[m][i[w].name])})})},t.isColumnVisible=function(c){return t.visibleCells.filter(function(o){return o.columnIndex===c}).length>0},t.isRowVisible=function(c){return t.visibleCells.filter(function(o){return o.rowIndex===c}).length>0},t.getVisibleCellByIndex=function(c,o){return t.visibleCells.filter(function(r){return r.columnIndex===c&&r.rowIndex===o})[0]},t.getCellAt=function(c,o,r){if(t.visibleCells){var i,l,C,d,w,n=r?t.attributes.touchScrollZone:0,g="move"===t.attributes.borderDragBehavior,x=t.visibleCells.length,p=g?t.cursorGrab:"ew-resize",m=g?t.cursorGrab:"ns-resize";if(t.visibleCells&&t.visibleCells.length){if(t.hasFocus=!0,!(o<t.height&&o>0&&c<t.width&&c>0))return t.hasFocus=!1,{dragContext:"inherit",context:"inherit"};for(l=0;l<x;l+=1)if(w={x:(d=t.visibleCells[l]).x,y:d.y,height:d.height,width:d.width},r&&/(vertical|horizontal)-scroll-/.test(d.style)&&(w.x-=n,w.y-=n,w.height+=n,w.width+=n),w.x-t.style.cellBorderWidth<c&&w.x+w.width+t.style.cellBorderWidth>c&&w.y-t.style.cellBorderWidth<o&&w.y+w.height+t.style.cellBorderWidth>o){if(/frozen-row-marker/.test(d.style))return d.dragContext=d.style,d.context="row-resize",d;if(/frozen-column-marker/.test(d.style))return d.dragContext=d.style,d.context="col-resize",d;if(/selection-handle-/.test(d.style))return d.dragContext=d.style,d.context="crosshair",d;if(/vertical-scroll-(bar|box)/.test(d.style))return d.dragContext="vertical-scroll-box",d.context="vertical-scroll-box",d.isScrollBar=!0,d.isVerticalScrollBar=!0,o>t.scrollBox.box.v.y+t.scrollBox.scrollBoxHeight?(d.dragContext="vertical-scroll-bottom",d.context="vertical-scroll-bottom"):o<t.scrollBox.box.v.y&&(d.dragContext="vertical-scroll-top",d.context="vertical-scroll-top"),t.cursor="default",d;if(/horizontal-scroll-(bar|box)/.test(d.style))return d.dragContext="horizontal-scroll-box",d.context="horizontal-scroll-box",d.isScrollBar=!0,d.isHorizontalScrollBar=!0,c>t.scrollBox.box.h.x+t.scrollBox.scrollBoxWidth?(d.dragContext="horizontal-scroll-right",d.context="horizontal-scroll-right"):c<t.scrollBox.box.h.x&&(d.dragContext="horizontal-scroll-left",d.context="horizontal-scroll-left"),t.cursor="default",d;if(i=(R=w).x+R.width-.4*t.attributes.borderResizeZone<c&&R.x+R.width+.6*t.attributes.borderResizeZone>c?"r":R.x-.4*t.attributes.borderResizeZone<c&&R.x+.6*t.attributes.borderResizeZone>c?"l":R.y+R.height-.4*t.attributes.borderResizeZone<o&&R.y+R.height+.6*t.attributes.borderResizeZone>o?"b":R.y-.4*t.attributes.borderResizeZone<o&&R.y+.6*t.attributes.borderResizeZone>o?"t":void 0,C=g&&d.selectionBorder&&-1!==d.selectionBorder.indexOf(i),-1!==["l","r"].indexOf(i)&&(t.attributes.allowColumnResize||C)&&(t.attributes.allowColumnResizeFromCell&&d.isNormal||!d.isNormal||C)&&(t.attributes.allowRowHeaderResize&&(d.isRowHeader||d.isCorner)||!d.isRowHeader||!d.isCorner)){if((d.isColumnHeader||d.isCorner||t.attributes.allowColumnResizeFromCell&&d.isNormal)&&"r"===i)return d.context="ew-resize",d.dragContext="ew-resize",d;if(!d.isColumnHeader&&!d.isCorner&&C)return d.context=p,d.dragContext=i+"-move",d}if(-1!==["t","b"].indexOf(i)&&d.rowIndex>-1&&(t.attributes.allowRowResize||C)&&(t.attributes.allowRowResizeFromCell&&d.isNormal||!d.isNormal||C)&&!d.isColumnHeader){if((d.isRowHeader||d.isCorner||t.attributes.allowRowResizeFromCell&&d.isNormal)&&"b"===i)return d.context="ns-resize",d.dragContext="ns-resize",d;if(!d.isRowHeader&&!d.isCorner&&C)return d.context=m,d.dragContext=i+"-move",d}return"columnHeaderCell"===d.style?(d.context="cell",d.dragContext="column-reorder",d):"rowHeaderCell"===d.style?(t.attributes.rowGrabZoneSize+(d.y-t.style.cellBorderWidth)<o||!t.attributes.allowRowReordering?(d.dragContext="cell",d.context="cell"):(d.context=t.cursorGrab,d.dragContext="row-reorder"),d):d.isGrid?(t.hasFocus=!1,d.dragContext="cell-grid",d.context="cell-grid",d):"tree-grid"===d.style?(t.hasFocus=!1,d.dragContext="tree",d.context="tree",d):(d.dragContext="cell",d.context="cell",d)}return t.hasFocus=!0,t.cursor="default",{dragContext:"background",context:"background",style:"background",isBackground:!0}}}var R},t.getSelectionBounds=function(){var c={x:1/0,y:1/0},o={x:-1/0,y:-1/0};return t.selections.forEach(function(r,a){var i,n;c.y=a<c.y?a:c.y,o.y=a>o.y?a:o.y,i=Math.max.apply(null,r),n=Math.min.apply(null,r),c.x=n<c.x?n:c.x,o.x=i>o.x?i:o.x}),{top:c.y,left:c.x,bottom:o.y,right:o.x}},t.getSchemaFromData=function(c){return c=c||t.data,Object.keys(c[0]||{" ":""}).map(function(r,a){var i=t.getBestGuessDataType(r,c),n={name:r,title:isNaN(parseInt(r,10))?r:t.integerToAlpha(r).toUpperCase(),index:a,columnIndex:a,type:i,filter:t.filter(i)};return t.storedSettings&&t.storedSettings.visibility&&void 0!==t.storedSettings.visibility[n.name]&&(n.hidden=!t.storedSettings.visibility[n.name]),n})},t.clearChangeLog=function(){t.changes=[]},t.selectArea=function(c,o){t.selectionBounds=c||t.selectionBounds;var r,a,i,n=t.getSchema();if(o||(t.selections=[]),t.selectionBounds.top<-1||t.selectionBounds.bottom>t.data.length||t.selectionBounds.left<-1||t.selectionBounds.right>n.length)throw new Error("Impossible selection area");for(a=t.selectionBounds.top;a<=t.selectionBounds.bottom;a+=1)for(t.selections[a]=[],i=t.selectionBounds.left;i<=t.selectionBounds.right;i+=1)-1===t.selections[a].indexOf(i)&&t.selections[a].push(i);r={selections:t.selections,selectionBounds:t.selectionBounds},Object.defineProperty(r,"selectedData",{get:function(){return t.getSelectedData()}}),t.dispatchEvent("selectionchanged",r)},t.findColumnMaxTextLength=function(c){var o=-1/0;if("cornerCell"===c)return t.ctx.font=t.style.rowHeaderCellFont,t.ctx.measureText((t.data.length+(t.attributes.showNewRow?1:0)).toString()).width+t.style.autosizePadding+t.style.autosizeHeaderCellPadding+t.style.rowHeaderCellPaddingRight+t.style.rowHeaderCellPaddingLeft+(t.attributes.tree?t.style.treeArrowWidth+t.style.treeArrowMarginLeft+t.style.treeArrowMarginRight:0);var r=null;return t.getSchema().forEach(function(a){if(a.name===c){t.ctx.font=t.style.columnHeaderCellFont;var i=t.ctx.measureText(a.title||a.name).width+t.style.headerCellPaddingRight+t.style.headerCellPaddingLeft;o=i>o?i:o,r=t.formatters[a.type]}}),t.data.forEach(function(a){var i=a[c];r&&(i=r({cell:{value:i}})),t.ctx.font=t.style.cellFont;var n=t.ctx.measureText(i).width+t.style.cellPaddingRight+t.style.cellPaddingLeft+t.style.cellAutoResizePadding;o=n>o?n:o}),o},t.getHeaderWidth=function(){return t.getVisibleSchema().reduce(function(c,o){return c+(o.width||t.style.cellWidth)},0)},t.getRowHeight=function(c){return(t.sizes.rows[c]||t.style.cellHeight)*t.scale},t.getColummnWidth=function(c){return(t.sizes.columns[c]||t.getSchema()[c].width||t.style.cellWidth)*t.scale},t.formatters.string=function(o){return void 0!==o.cell.value?o.cell.value:""},t.formatters.rowHeaderCell=t.formatters.string,t.formatters.headerCell=t.formatters.string,t.formatters.number=t.formatters.string,t.formatters.int=t.formatters.string,t.formatters.html=t.formatters.string,t.sorters.string=function(c,o){var r="asc"===o;return function(a,i){return null==a[c]?1:null==i[c]?0:r?a[c].localeCompare?a[c].localeCompare(i[c]):1:i[c].localeCompare?i[c].localeCompare(a[c]):1}},t.sorters.number=function(c,o){var r="asc"===o;return function(a,i){return r?a[c]-i[c]:i[c]-a[c]}},t.sorters.date=function(c,o){var r="asc"===o;return function(a,i){return r?new Date(a[c]).getTime()-new Date(i[c]).getTime():new Date(i[c]).getTime()-new Date(a[c]).getTime()}}}}.apply(S,[]))&&(M.exports=b)}])},module.exports=O()}}]);